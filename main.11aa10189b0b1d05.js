(self.webpackChunkangular_aws_map=self.webpackChunkangular_aws_map||[]).push([[179],{4285:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},7487:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},9984:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},2093:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},4849:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.isMsWindow=void 0;var U=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];J.isMsWindow=function X(m){if(function V(m){return"MSInputMethodContext"in m&&"msCrypto"in m}(m)&&void 0!==m.msCrypto.subtle){var q=m.msCrypto,G=q.getRandomValues,z=q.subtle;return U.map(function(T){return z[T]}).concat(G).every(function(T){return"function"==typeof T})}return!1}},1806:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});var V=U(1980);V.__exportStar(U(4285),J),V.__exportStar(U(7487),J),V.__exportStar(U(9984),J),V.__exportStar(U(2093),J),V.__exportStar(U(4849),J)},9760:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.EMPTY_DATA_SHA_256=J.SHA_256_HMAC_ALGO=J.SHA_256_HASH=void 0,J.SHA_256_HASH={name:"SHA-256"},J.SHA_256_HMAC_ALGO={name:"HMAC",hash:J.SHA_256_HASH},J.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},7895:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var V=U(9121),X=U(5139),m=U(5979),q=U(710),G=U(1806),z=U(2521),T=function(){function D(F){this.hash=(0,q.supportsWebCrypto)((0,z.locateWindow)())?new X.Sha256(F):(0,G.isMsWindow)((0,z.locateWindow)())?new V.Sha256(F):new m.Sha256(F)}return D.prototype.update=function(F,Z){this.hash.update(F,Z)},D.prototype.digest=function(){return this.hash.digest()},D}();J.Sha256=T},9121:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var V=U(5200),X=U(9760),m=U(2622),q=U(2521),G=function(){function D(F){F?(this.operation=function z(D){return new Promise(function(F,Z){var Y=(0,q.locateWindow)().msCrypto.subtle.importKey("raw",T(D),X.SHA_256_HMAC_ALGO,!1,["sign"]);Y.oncomplete=function(){Y.result&&F(Y.result),Z(new Error("ImportKey completed without importing key."))},Y.onerror=function(){Z(new Error("ImportKey failed to import key."))}})}(F).then(function(Z){return(0,q.locateWindow)().msCrypto.subtle.sign(X.SHA_256_HMAC_ALGO,Z)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,q.locateWindow)().msCrypto.subtle.digest("SHA-256"))}return D.prototype.update=function(F){var Z=this;(0,V.isEmptyData)(F)||(this.operation=this.operation.then(function(Y){return Y.onerror=function(){Z.operation=Promise.reject(new Error("Error encountered updating hash"))},Y.process(T(F)),Y}),this.operation.catch(function(){}))},D.prototype.digest=function(){return this.operation.then(function(F){return new Promise(function(Z,Y){F.onerror=function(){Y(new Error("Error encountered finalizing hash"))},F.oncomplete=function(){F.result&&Z(new Uint8Array(F.result)),Y(new Error("Error encountered finalizing hash"))},F.finish()})})},D}();function T(D){return"string"==typeof D?(0,m.fromUtf8)(D):ArrayBuffer.isView(D)?new Uint8Array(D.buffer,D.byteOffset,D.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(D)}J.Sha256=G},9801:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.WebCryptoSha256=J.Ie11Sha256=void 0,(0,U(5789).__exportStar)(U(7895),J);var X=U(9121);Object.defineProperty(J,"Ie11Sha256",{enumerable:!0,get:function(){return X.Sha256}});var m=U(5139);Object.defineProperty(J,"WebCryptoSha256",{enumerable:!0,get:function(){return m.Sha256}})},5200:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.isEmptyData=void 0,J.isEmptyData=function U(V){return"string"==typeof V?0===V.length:0===V.byteLength}},5139:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var V=U(7736),X=U(9760),m=U(2521),q=function(){function G(z){this.toHash=new Uint8Array(0),void 0!==z&&(this.key=new Promise(function(T,D){(0,m.locateWindow)().crypto.subtle.importKey("raw",(0,V.convertToBuffer)(z),X.SHA_256_HMAC_ALGO,!1,["sign"]).then(T,D)}),this.key.catch(function(){}))}return G.prototype.update=function(z){if(!(0,V.isEmptyData)(z)){var T=(0,V.convertToBuffer)(z),D=new Uint8Array(this.toHash.byteLength+T.byteLength);D.set(this.toHash,0),D.set(T,this.toHash.byteLength),this.toHash=D}},G.prototype.digest=function(){var z=this;return this.key?this.key.then(function(T){return(0,m.locateWindow)().crypto.subtle.sign(X.SHA_256_HMAC_ALGO,T,z.toHash).then(function(D){return new Uint8Array(D)})}):(0,V.isEmptyData)(this.toHash)?Promise.resolve(X.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,m.locateWindow)().crypto.subtle.digest(X.SHA_256_HASH,z.toHash)}).then(function(T){return Promise.resolve(new Uint8Array(T))})},G}();J.Sha256=q},6521:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.RawSha256=void 0;var V=U(154),X=function(){function m(){this.state=Int32Array.from(V.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return m.prototype.update=function(q){if(this.finished)throw new Error("Attempted to update an already finished hash.");var G=0,z=q.byteLength;if(this.bytesHashed+=z,8*this.bytesHashed>V.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;z>0;)this.buffer[this.bufferLength++]=q[G++],z--,this.bufferLength===V.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},m.prototype.digest=function(){if(!this.finished){var q=8*this.bytesHashed,G=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),z=this.bufferLength;if(G.setUint8(this.bufferLength++,128),z%V.BLOCK_SIZE>=V.BLOCK_SIZE-8){for(var T=this.bufferLength;T<V.BLOCK_SIZE;T++)G.setUint8(T,0);this.hashBuffer(),this.bufferLength=0}for(T=this.bufferLength;T<V.BLOCK_SIZE-8;T++)G.setUint8(T,0);G.setUint32(V.BLOCK_SIZE-8,Math.floor(q/4294967296),!0),G.setUint32(V.BLOCK_SIZE-4,q),this.hashBuffer(),this.finished=!0}var D=new Uint8Array(V.DIGEST_LENGTH);for(T=0;T<8;T++)D[4*T]=this.state[T]>>>24&255,D[4*T+1]=this.state[T]>>>16&255,D[4*T+2]=this.state[T]>>>8&255,D[4*T+3]=this.state[T]>>>0&255;return D},m.prototype.hashBuffer=function(){for(var G=this.buffer,z=this.state,T=z[0],D=z[1],F=z[2],Z=z[3],Y=z[4],ie=z[5],pe=z[6],se=z[7],be=0;be<V.BLOCK_SIZE;be++){if(be<16)this.temp[be]=(255&G[4*be])<<24|(255&G[4*be+1])<<16|(255&G[4*be+2])<<8|255&G[4*be+3];else{var Me=this.temp[be-2];this.temp[be]=(((Me>>>17|Me<<15)^(Me>>>19|Me<<13)^Me>>>10)+this.temp[be-7]|0)+((((Me=this.temp[be-15])>>>7|Me<<25)^(Me>>>18|Me<<14)^Me>>>3)+this.temp[be-16]|0)}var je=(((Y>>>6|Y<<26)^(Y>>>11|Y<<21)^(Y>>>25|Y<<7))+(Y&ie^~Y&pe)|0)+(se+(V.KEY[be]+this.temp[be]|0)|0)|0,Se=((T>>>2|T<<30)^(T>>>13|T<<19)^(T>>>22|T<<10))+(T&D^T&F^D&F)|0;se=pe,pe=ie,ie=Y,Y=Z+je|0,Z=F,F=D,D=T,T=je+Se|0}z[0]+=T,z[1]+=D,z[2]+=F,z[3]+=Z,z[4]+=Y,z[5]+=ie,z[6]+=pe,z[7]+=se},m}();J.RawSha256=X},154:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.MAX_HASHABLE_LENGTH=J.INIT=J.KEY=J.DIGEST_LENGTH=J.BLOCK_SIZE=void 0,J.BLOCK_SIZE=64,J.DIGEST_LENGTH=32,J.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),J.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],J.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},5979:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),(0,U(5789).__exportStar)(U(9235),J)},9235:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var V=U(5789),X=U(154),m=U(6521),q=U(7736),G=function(){function T(D){if(this.hash=new m.RawSha256,D){this.outer=new m.RawSha256;var F=function z(T){var D=(0,q.convertToBuffer)(T);if(D.byteLength>X.BLOCK_SIZE){var F=new m.RawSha256;F.update(D),D=F.digest()}var Z=new Uint8Array(X.BLOCK_SIZE);return Z.set(D),Z}(D),Z=new Uint8Array(X.BLOCK_SIZE);Z.set(F);for(var Y=0;Y<X.BLOCK_SIZE;Y++)F[Y]^=54,Z[Y]^=92;for(this.hash.update(F),this.outer.update(Z),Y=0;Y<F.byteLength;Y++)F[Y]=0}}return T.prototype.update=function(D){if(!(0,q.isEmptyData)(D)&&!this.error)try{this.hash.update((0,q.convertToBuffer)(D))}catch(F){this.error=F}},T.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},T.prototype.digest=function(){return(0,V.__awaiter)(this,void 0,void 0,function(){return(0,V.__generator)(this,function(D){return[2,this.digestSync()]})})},T}();J.Sha256=G},6516:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});var V=U(4022),X=function(){function m(){this.state=Int32Array.from(V.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return m.prototype.update=function(q){if(this.finished)throw new Error("Attempted to update an already finished hash.");var G=0,z=q.byteLength;if(this.bytesHashed+=z,8*this.bytesHashed>V.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;z>0;)this.buffer[this.bufferLength++]=q[G++],z--,this.bufferLength===V.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},m.prototype.digest=function(){if(!this.finished){var q=8*this.bytesHashed,G=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),z=this.bufferLength;if(G.setUint8(this.bufferLength++,128),z%V.BLOCK_SIZE>=V.BLOCK_SIZE-8){for(var T=this.bufferLength;T<V.BLOCK_SIZE;T++)G.setUint8(T,0);this.hashBuffer(),this.bufferLength=0}for(T=this.bufferLength;T<V.BLOCK_SIZE-8;T++)G.setUint8(T,0);G.setUint32(V.BLOCK_SIZE-8,Math.floor(q/4294967296),!0),G.setUint32(V.BLOCK_SIZE-4,q),this.hashBuffer(),this.finished=!0}var D=new Uint8Array(V.DIGEST_LENGTH);for(T=0;T<8;T++)D[4*T]=this.state[T]>>>24&255,D[4*T+1]=this.state[T]>>>16&255,D[4*T+2]=this.state[T]>>>8&255,D[4*T+3]=this.state[T]>>>0&255;return D},m.prototype.hashBuffer=function(){for(var G=this.buffer,z=this.state,T=z[0],D=z[1],F=z[2],Z=z[3],Y=z[4],ie=z[5],pe=z[6],se=z[7],be=0;be<V.BLOCK_SIZE;be++){if(be<16)this.temp[be]=(255&G[4*be])<<24|(255&G[4*be+1])<<16|(255&G[4*be+2])<<8|255&G[4*be+3];else{var Me=this.temp[be-2];this.temp[be]=(((Me>>>17|Me<<15)^(Me>>>19|Me<<13)^Me>>>10)+this.temp[be-7]|0)+((((Me=this.temp[be-15])>>>7|Me<<25)^(Me>>>18|Me<<14)^Me>>>3)+this.temp[be-16]|0)}var je=(((Y>>>6|Y<<26)^(Y>>>11|Y<<21)^(Y>>>25|Y<<7))+(Y&ie^~Y&pe)|0)+(se+(V.KEY[be]+this.temp[be]|0)|0)|0,Se=((T>>>2|T<<30)^(T>>>13|T<<19)^(T>>>22|T<<10))+(T&D^T&F^D&F)|0;se=pe,pe=ie,ie=Y,Y=Z+je|0,Z=F,F=D,D=T,T=je+Se|0}z[0]+=T,z[1]+=D,z[2]+=F,z[3]+=Z,z[4]+=Y,z[5]+=ie,z[6]+=pe,z[7]+=se},m}();J.RawSha256=X},4022:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.BLOCK_SIZE=64,J.DIGEST_LENGTH=32,J.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),J.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],J.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},4578:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),U(3541).__exportStar(U(3039),J)},3039:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});var V=U(3541),X=U(4022),m=U(6516),q=U(8259),G=function(){function F(Z){if(this.hash=new m.RawSha256,Z){this.outer=new m.RawSha256;var Y=function z(F){var Z=D(F);if(Z.byteLength>X.BLOCK_SIZE){var Y=new m.RawSha256;Y.update(Z),Z=Y.digest()}var ie=new Uint8Array(X.BLOCK_SIZE);return ie.set(Z),ie}(Z),ie=new Uint8Array(X.BLOCK_SIZE);ie.set(Y);for(var pe=0;pe<X.BLOCK_SIZE;pe++)Y[pe]^=54,ie[pe]^=92;for(this.hash.update(Y),this.outer.update(ie),pe=0;pe<Y.byteLength;pe++)Y[pe]=0}}return F.prototype.update=function(Z){if(!function T(F){return"string"==typeof F?0===F.length:0===F.byteLength}(Z)&&!this.error)try{this.hash.update(D(Z))}catch(Y){this.error=Y}},F.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},F.prototype.digest=function(){return V.__awaiter(this,void 0,void 0,function(){return V.__generator(this,function(Z){return[2,this.digestSync()]})})},F}();function D(F){return"string"==typeof F?q.fromUtf8(F):ArrayBuffer.isView(F)?new Uint8Array(F.buffer,F.byteOffset,F.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(F)}J.Sha256=G},8259:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{fromUtf8:()=>G,toUtf8:()=>z});var G=function(T){return"function"==typeof TextEncoder?function m(T){return(new TextEncoder).encode(T)}(T):function(T){for(var D=[],F=0,Z=T.length;F<Z;F++){var Y=T.charCodeAt(F);if(Y<128)D.push(Y);else if(Y<2048)D.push(Y>>6|192,63&Y|128);else if(F+1<T.length&&55296==(64512&Y)&&56320==(64512&T.charCodeAt(F+1))){var ie=65536+((1023&Y)<<10)+(1023&T.charCodeAt(++F));D.push(ie>>18|240,ie>>12&63|128,ie>>6&63|128,63&ie|128)}else D.push(Y>>12|224,Y>>6&63|128,63&Y|128)}return Uint8Array.from(D)}(T)},z=function(T){return"function"==typeof TextDecoder?function q(T){return new TextDecoder("utf-8").decode(T)}(T):function(T){for(var D="",F=0,Z=T.length;F<Z;F++){var Y=T[F];if(Y<128)D+=String.fromCharCode(Y);else if(192<=Y&&Y<224){var ie=T[++F];D+=String.fromCharCode((31&Y)<<6|63&ie)}else if(240<=Y&&Y<365){var se="%"+[Y,T[++F],T[++F],T[++F]].map(function(be){return be.toString(16)}).join("%");D+=decodeURIComponent(se)}else D+=String.fromCharCode((15&Y)<<12|(63&T[++F])<<6|63&T[++F])}return D}(T)}},710:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),U(7840).__exportStar(U(933),J)},933:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.supportsZeroByteGCM=J.supportsSubtleCrypto=J.supportsSecureRandom=J.supportsWebCrypto=void 0;var V=U(7840),X=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function q(T){return"object"==typeof T&&"object"==typeof T.crypto&&"function"==typeof T.crypto.getRandomValues}function G(T){return T&&X.every(function(D){return"function"==typeof T[D]})}J.supportsWebCrypto=function m(T){return!(!q(T)||"object"!=typeof T.crypto.subtle)&&G(T.crypto.subtle)},J.supportsSecureRandom=q,J.supportsSubtleCrypto=G,J.supportsZeroByteGCM=function z(T){return V.__awaiter(this,void 0,void 0,function(){var D;return V.__generator(this,function(Y){switch(Y.label){case 0:if(!G(T))return[2,!1];Y.label=1;case 1:return Y.trys.push([1,4,,5]),[4,T.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return D=Y.sent(),[4,T.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},D,new Uint8Array(0))];case 3:return[2,16===Y.sent().byteLength];case 4:return Y.sent(),[2,!1];case 5:return[2]}})})}},2862:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.convertToBuffer=void 0;var V=U(2622),X=typeof Buffer<"u"&&Buffer.from?function(q){return Buffer.from(q,"utf8")}:V.fromUtf8;J.convertToBuffer=function m(q){return q instanceof Uint8Array?q:"string"==typeof q?X(q):ArrayBuffer.isView(q)?new Uint8Array(q.buffer,q.byteOffset,q.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(q)}},7736:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.uint32ArrayFrom=J.numToUint8=J.isEmptyData=J.convertToBuffer=void 0;var V=U(2862);Object.defineProperty(J,"convertToBuffer",{enumerable:!0,get:function(){return V.convertToBuffer}});var X=U(5516);Object.defineProperty(J,"isEmptyData",{enumerable:!0,get:function(){return X.isEmptyData}});var m=U(5183);Object.defineProperty(J,"numToUint8",{enumerable:!0,get:function(){return m.numToUint8}});var q=U(6777);Object.defineProperty(J,"uint32ArrayFrom",{enumerable:!0,get:function(){return q.uint32ArrayFrom}})},5516:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.isEmptyData=void 0,J.isEmptyData=function U(V){return"string"==typeof V?0===V.length:0===V.byteLength}},5183:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.numToUint8=void 0,J.numToUint8=function U(V){return new Uint8Array([(4278190080&V)>>24,(16711680&V)>>16,(65280&V)>>8,255&V])}},6777:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.uint32ArrayFrom=void 0,J.uint32ArrayFrom=function U(V){if(!Array.from){for(var X=new Uint32Array(V.length);0<V.length;)X[0]=V[0];return X}return Uint32Array.from(V)}},9684:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},7593:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},5243:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},883:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},2625:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.isMsWindow=void 0;var U=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];J.isMsWindow=function X(m){if(function V(m){return"MSInputMethodContext"in m&&"msCrypto"in m}(m)&&void 0!==m.msCrypto.subtle){var q=m.msCrypto,G=q.getRandomValues,z=q.subtle;return U.map(function(T){return z[T]}).concat(G).every(function(T){return"function"==typeof T})}return!1}},5657:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});var V=U(4806);(0,V.__exportStar)(U(9684),J),(0,V.__exportStar)(U(7593),J),(0,V.__exportStar)(U(5243),J),(0,V.__exportStar)(U(883),J),(0,V.__exportStar)(U(2625),J)},7655:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.EMPTY_DATA_SHA_256=J.SHA_256_HMAC_ALGO=J.SHA_256_HASH=void 0,J.SHA_256_HASH={name:"SHA-256"},J.SHA_256_HMAC_ALGO={name:"HMAC",hash:J.SHA_256_HASH},J.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},1198:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var V=U(7273),X=U(157),m=U(5415),q=U(463),G=U(5657),z=U(2521),T=function(){function D(F){this.hash=(0,q.supportsWebCrypto)((0,z.locateWindow)())?new X.Sha256(F):(0,G.isMsWindow)((0,z.locateWindow)())?new V.Sha256(F):new m.Sha256(F)}return D.prototype.update=function(F,Z){this.hash.update(F,Z)},D.prototype.digest=function(){return this.hash.digest()},D}();J.Sha256=T},7273:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var V=U(1739),X=U(7655),m=U(4456),q=U(2521),G=function(){function D(F){F?(this.operation=function z(D){return new Promise(function(F,Z){var Y=(0,q.locateWindow)().msCrypto.subtle.importKey("raw",T(D),X.SHA_256_HMAC_ALGO,!1,["sign"]);Y.oncomplete=function(){Y.result&&F(Y.result),Z(new Error("ImportKey completed without importing key."))},Y.onerror=function(){Z(new Error("ImportKey failed to import key."))}})}(F).then(function(Z){return(0,q.locateWindow)().msCrypto.subtle.sign(X.SHA_256_HMAC_ALGO,Z)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,q.locateWindow)().msCrypto.subtle.digest("SHA-256"))}return D.prototype.update=function(F){var Z=this;(0,V.isEmptyData)(F)||(this.operation=this.operation.then(function(Y){return Y.onerror=function(){Z.operation=Promise.reject(new Error("Error encountered updating hash"))},Y.process(T(F)),Y}),this.operation.catch(function(){}))},D.prototype.digest=function(){return this.operation.then(function(F){return new Promise(function(Z,Y){F.onerror=function(){Y(new Error("Error encountered finalizing hash"))},F.oncomplete=function(){F.result&&Z(new Uint8Array(F.result)),Y(new Error("Error encountered finalizing hash"))},F.finish()})})},D}();function T(D){return"string"==typeof D?(0,m.fromUtf8)(D):ArrayBuffer.isView(D)?new Uint8Array(D.buffer,D.byteOffset,D.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(D)}J.Sha256=G},2518:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.WebCryptoSha256=J.Ie11Sha256=void 0,(0,U(5955).__exportStar)(U(1198),J);var X=U(7273);Object.defineProperty(J,"Ie11Sha256",{enumerable:!0,get:function(){return X.Sha256}});var m=U(157);Object.defineProperty(J,"WebCryptoSha256",{enumerable:!0,get:function(){return m.Sha256}})},1739:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.isEmptyData=void 0,J.isEmptyData=function U(V){return"string"==typeof V?0===V.length:0===V.byteLength}},157:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var V=U(5512),X=U(7655),m=U(2521),q=function(){function G(z){this.toHash=new Uint8Array(0),void 0!==z&&(this.key=new Promise(function(T,D){(0,m.locateWindow)().crypto.subtle.importKey("raw",(0,V.convertToBuffer)(z),X.SHA_256_HMAC_ALGO,!1,["sign"]).then(T,D)}),this.key.catch(function(){}))}return G.prototype.update=function(z){if(!(0,V.isEmptyData)(z)){var T=(0,V.convertToBuffer)(z),D=new Uint8Array(this.toHash.byteLength+T.byteLength);D.set(this.toHash,0),D.set(T,this.toHash.byteLength),this.toHash=D}},G.prototype.digest=function(){var z=this;return this.key?this.key.then(function(T){return(0,m.locateWindow)().crypto.subtle.sign(X.SHA_256_HMAC_ALGO,T,z.toHash).then(function(D){return new Uint8Array(D)})}):(0,V.isEmptyData)(this.toHash)?Promise.resolve(X.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,m.locateWindow)().crypto.subtle.digest(X.SHA_256_HASH,z.toHash)}).then(function(T){return Promise.resolve(new Uint8Array(T))})},G}();J.Sha256=q},1934:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.RawSha256=void 0;var V=U(268),X=function(){function m(){this.state=Int32Array.from(V.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return m.prototype.update=function(q){if(this.finished)throw new Error("Attempted to update an already finished hash.");var G=0,z=q.byteLength;if(this.bytesHashed+=z,8*this.bytesHashed>V.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;z>0;)this.buffer[this.bufferLength++]=q[G++],z--,this.bufferLength===V.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},m.prototype.digest=function(){if(!this.finished){var q=8*this.bytesHashed,G=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),z=this.bufferLength;if(G.setUint8(this.bufferLength++,128),z%V.BLOCK_SIZE>=V.BLOCK_SIZE-8){for(var T=this.bufferLength;T<V.BLOCK_SIZE;T++)G.setUint8(T,0);this.hashBuffer(),this.bufferLength=0}for(T=this.bufferLength;T<V.BLOCK_SIZE-8;T++)G.setUint8(T,0);G.setUint32(V.BLOCK_SIZE-8,Math.floor(q/4294967296),!0),G.setUint32(V.BLOCK_SIZE-4,q),this.hashBuffer(),this.finished=!0}var D=new Uint8Array(V.DIGEST_LENGTH);for(T=0;T<8;T++)D[4*T]=this.state[T]>>>24&255,D[4*T+1]=this.state[T]>>>16&255,D[4*T+2]=this.state[T]>>>8&255,D[4*T+3]=this.state[T]>>>0&255;return D},m.prototype.hashBuffer=function(){for(var G=this.buffer,z=this.state,T=z[0],D=z[1],F=z[2],Z=z[3],Y=z[4],ie=z[5],pe=z[6],se=z[7],be=0;be<V.BLOCK_SIZE;be++){if(be<16)this.temp[be]=(255&G[4*be])<<24|(255&G[4*be+1])<<16|(255&G[4*be+2])<<8|255&G[4*be+3];else{var Me=this.temp[be-2];this.temp[be]=(((Me>>>17|Me<<15)^(Me>>>19|Me<<13)^Me>>>10)+this.temp[be-7]|0)+((((Me=this.temp[be-15])>>>7|Me<<25)^(Me>>>18|Me<<14)^Me>>>3)+this.temp[be-16]|0)}var je=(((Y>>>6|Y<<26)^(Y>>>11|Y<<21)^(Y>>>25|Y<<7))+(Y&ie^~Y&pe)|0)+(se+(V.KEY[be]+this.temp[be]|0)|0)|0,Se=((T>>>2|T<<30)^(T>>>13|T<<19)^(T>>>22|T<<10))+(T&D^T&F^D&F)|0;se=pe,pe=ie,ie=Y,Y=Z+je|0,Z=F,F=D,D=T,T=je+Se|0}z[0]+=T,z[1]+=D,z[2]+=F,z[3]+=Z,z[4]+=Y,z[5]+=ie,z[6]+=pe,z[7]+=se},m}();J.RawSha256=X},268:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.MAX_HASHABLE_LENGTH=J.INIT=J.KEY=J.DIGEST_LENGTH=J.BLOCK_SIZE=void 0,J.BLOCK_SIZE=64,J.DIGEST_LENGTH=32,J.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),J.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],J.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},5415:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),(0,U(2960).__exportStar)(U(316),J)},316:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var V=U(2960),X=U(268),m=U(1934),q=U(5512),G=function(){function T(D){if(this.hash=new m.RawSha256,D){this.outer=new m.RawSha256;var F=function z(T){var D=(0,q.convertToBuffer)(T);if(D.byteLength>X.BLOCK_SIZE){var F=new m.RawSha256;F.update(D),D=F.digest()}var Z=new Uint8Array(X.BLOCK_SIZE);return Z.set(D),Z}(D),Z=new Uint8Array(X.BLOCK_SIZE);Z.set(F);for(var Y=0;Y<X.BLOCK_SIZE;Y++)F[Y]^=54,Z[Y]^=92;for(this.hash.update(F),this.outer.update(Z),Y=0;Y<F.byteLength;Y++)F[Y]=0}}return T.prototype.update=function(D){if(!(0,q.isEmptyData)(D)&&!this.error)try{this.hash.update((0,q.convertToBuffer)(D))}catch(F){this.error=F}},T.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},T.prototype.digest=function(){return(0,V.__awaiter)(this,void 0,void 0,function(){return(0,V.__generator)(this,function(D){return[2,this.digestSync()]})})},T}();J.Sha256=G},463:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),(0,U(9077).__exportStar)(U(7053),J)},7053:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.supportsZeroByteGCM=J.supportsSubtleCrypto=J.supportsSecureRandom=J.supportsWebCrypto=void 0;var V=U(9077),X=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function q(T){return"object"==typeof T&&"object"==typeof T.crypto&&"function"==typeof T.crypto.getRandomValues}function G(T){return T&&X.every(function(D){return"function"==typeof T[D]})}J.supportsWebCrypto=function m(T){return!(!q(T)||"object"!=typeof T.crypto.subtle)&&G(T.crypto.subtle)},J.supportsSecureRandom=q,J.supportsSubtleCrypto=G,J.supportsZeroByteGCM=function z(T){return(0,V.__awaiter)(this,void 0,void 0,function(){var D;return(0,V.__generator)(this,function(Y){switch(Y.label){case 0:if(!G(T))return[2,!1];Y.label=1;case 1:return Y.trys.push([1,4,,5]),[4,T.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return D=Y.sent(),[4,T.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},D,new Uint8Array(0))];case 3:return[2,16===Y.sent().byteLength];case 4:return Y.sent(),[2,!1];case 5:return[2]}})})}},4389:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.convertToBuffer=void 0;var V=U(4456),X=typeof Buffer<"u"&&Buffer.from?function(q){return Buffer.from(q,"utf8")}:V.fromUtf8;J.convertToBuffer=function m(q){return q instanceof Uint8Array?q:"string"==typeof q?X(q):ArrayBuffer.isView(q)?new Uint8Array(q.buffer,q.byteOffset,q.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(q)}},5512:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.uint32ArrayFrom=J.numToUint8=J.isEmptyData=J.convertToBuffer=void 0;var V=U(4389);Object.defineProperty(J,"convertToBuffer",{enumerable:!0,get:function(){return V.convertToBuffer}});var X=U(3666);Object.defineProperty(J,"isEmptyData",{enumerable:!0,get:function(){return X.isEmptyData}});var m=U(1268);Object.defineProperty(J,"numToUint8",{enumerable:!0,get:function(){return m.numToUint8}});var q=U(491);Object.defineProperty(J,"uint32ArrayFrom",{enumerable:!0,get:function(){return q.uint32ArrayFrom}})},3666:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.isEmptyData=void 0,J.isEmptyData=function U(V){return"string"==typeof V?0===V.length:0===V.byteLength}},1268:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.numToUint8=void 0,J.numToUint8=function U(V){return new Uint8Array([(4278190080&V)>>24,(16711680&V)>>16,(65280&V)>>8,255&V])}},491:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.uint32ArrayFrom=void 0,J.uint32ArrayFrom=function U(V){if(!Uint32Array.from){for(var X=new Uint32Array(V.length),m=0;m<V.length;)X[m]=V[m],m+=1;return X}return Uint32Array.from(V)}},4456:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{fromUtf8:()=>G,toUtf8:()=>z});var G=function(T){return"function"==typeof TextEncoder?function m(T){return(new TextEncoder).encode(T)}(T):function(T){for(var D=[],F=0,Z=T.length;F<Z;F++){var Y=T.charCodeAt(F);if(Y<128)D.push(Y);else if(Y<2048)D.push(Y>>6|192,63&Y|128);else if(F+1<T.length&&55296==(64512&Y)&&56320==(64512&T.charCodeAt(F+1))){var ie=65536+((1023&Y)<<10)+(1023&T.charCodeAt(++F));D.push(ie>>18|240,ie>>12&63|128,ie>>6&63|128,63&ie|128)}else D.push(Y>>12|224,Y>>6&63|128,63&Y|128)}return Uint8Array.from(D)}(T)},z=function(T){return"function"==typeof TextDecoder?function q(T){return new TextDecoder("utf-8").decode(T)}(T):function(T){for(var D="",F=0,Z=T.length;F<Z;F++){var Y=T[F];if(Y<128)D+=String.fromCharCode(Y);else if(192<=Y&&Y<224){var ie=T[++F];D+=String.fromCharCode((31&Y)<<6|63&ie)}else if(240<=Y&&Y<365){var se="%"+[Y,T[++F],T[++F],T[++F]].map(function(be){return be.toString(16)}).join("%");D+=decodeURIComponent(se)}else D+=String.fromCharCode((15&Y)<<12|(63&T[++F])<<6|63&T[++F])}return D}(T)}},2521:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{locateWindow:()=>X});var V={};function X(){return typeof window<"u"?window:typeof self<"u"?self:V}},2622:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{fromUtf8:()=>G,toUtf8:()=>z});var G=function(T){return"function"==typeof TextEncoder?function m(T){return(new TextEncoder).encode(T)}(T):function(T){for(var D=[],F=0,Z=T.length;F<Z;F++){var Y=T.charCodeAt(F);if(Y<128)D.push(Y);else if(Y<2048)D.push(Y>>6|192,63&Y|128);else if(F+1<T.length&&55296==(64512&Y)&&56320==(64512&T.charCodeAt(F+1))){var ie=65536+((1023&Y)<<10)+(1023&T.charCodeAt(++F));D.push(ie>>18|240,ie>>12&63|128,ie>>6&63|128,63&ie|128)}else D.push(Y>>12|224,Y>>6&63|128,63&Y|128)}return Uint8Array.from(D)}(T)},z=function(T){return"function"==typeof TextDecoder?function q(T){return new TextDecoder("utf-8").decode(T)}(T):function(T){for(var D="",F=0,Z=T.length;F<Z;F++){var Y=T[F];if(Y<128)D+=String.fromCharCode(Y);else if(192<=Y&&Y<224){var ie=T[++F];D+=String.fromCharCode((31&Y)<<6|63&ie)}else if(240<=Y&&Y<365){var se="%"+[Y,T[++F],T[++F],T[++F]].map(function(be){return be.toString(16)}).join("%");D+=decodeURIComponent(se)}else D+=String.fromCharCode((15&Y)<<12|(63&T[++F])<<6|63&T[++F])}return D}(T)}},8604:Ae=>{function J(U){if(!(this instanceof J))return new J(U);this._bbox=U||[1/0,1/0,-1/0,-1/0],this._valid=!!U}Ae.exports=J,J.prototype.include=function(U){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],U[0]),this._bbox[1]=Math.min(this._bbox[1],U[1]),this._bbox[2]=Math.max(this._bbox[2],U[0]),this._bbox[3]=Math.max(this._bbox[3],U[1]),this},J.prototype.equals=function(U){var V;return V=U instanceof J?U.bbox():U,this._bbox[0]==V[0]&&this._bbox[1]==V[1]&&this._bbox[2]==V[2]&&this._bbox[3]==V[3]},J.prototype.center=function(U){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},J.prototype.union=function(U){var V;return this._valid=!0,V=U instanceof J?U.bbox():U,this._bbox[0]=Math.min(this._bbox[0],V[0]),this._bbox[1]=Math.min(this._bbox[1],V[1]),this._bbox[2]=Math.max(this._bbox[2],V[2]),this._bbox[3]=Math.max(this._bbox[3],V[3]),this},J.prototype.bbox=function(){return this._valid?this._bbox:null},J.prototype.contains=function(U){if(!U)return this._fastContains();if(!this._valid)return null;var V=U[0],X=U[1];return this._bbox[0]<=V&&this._bbox[1]<=X&&this._bbox[2]>=V&&this._bbox[3]>=X},J.prototype.intersect=function(U){return this._valid?(V=U instanceof J?U.bbox():U,!(this._bbox[0]>V[2]||this._bbox[2]<V[0]||this._bbox[3]<V[1]||this._bbox[1]>V[3])):null;var V},J.prototype._fastContains=function(){return this._valid?new Function("ll","return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]"):new Function("return null;")},J.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null}},869:(Ae,J,U)=>{var V=U(7265);function m(z){var T=0;if(z&&z.length>0){T+=Math.abs(q(z[0]));for(var D=1;D<z.length;D++)T-=Math.abs(q(z[D]))}return T}function q(z){var T,D,Z,Y,ie,pe,se=0,be=z.length;if(be>2){for(pe=0;pe<be;pe++)pe===be-2?(Z=be-2,Y=be-1,ie=0):pe===be-1?(Z=be-1,Y=0,ie=1):(Z=pe,Y=pe+1,ie=pe+2),T=z[Z],D=z[Y],se+=(G(z[ie][0])-G(T[0]))*Math.sin(G(D[1]));se=se*V.RADIUS*V.RADIUS/2}return se}function G(z){return z*Math.PI/180}Ae.exports.geometry=function X(z){var D,T=0;switch(z.type){case"Polygon":return m(z.coordinates);case"MultiPolygon":for(D=0;D<z.coordinates.length;D++)T+=m(z.coordinates[D]);return T;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(D=0;D<z.geometries.length;D++)T+=X(z.geometries[D]);return T}},Ae.exports.ring=q},8143:Ae=>{Ae.exports=function U(V){if(!V||!V.type)return null;var X=J[V.type];return X?"geometry"===X?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:V}]}:"feature"===X?{type:"FeatureCollection",features:[V]}:"featurecollection"===X?V:void 0:null};var J={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},8035:(Ae,J,U)=>{var V=U(7923),X=U(8369);Ae.exports.hint=function m(q,G){var z,T=[];if("object"==typeof q)z=q;else{if("string"!=typeof q)return[{message:"Expected string or object as input",line:0}];try{z=V.parse(q)}catch(Z){var D=Z.message.match(/line (\d+)/);return[{line:parseInt(D[1],10)-1,message:Z.message,error:Z}]}}return T.concat(X.hint(z,G))}},8369:(Ae,J,U)=>{var V=U(4967);Ae.exports.hint=function X(m,q){var G=[],z=0;function F(j){if((!q||!1!==q.noDuplicateMembers)&&j.__duplicateProperties__&&G.push({message:"An object contained duplicate members, making parsing ambigous: "+j.__duplicateProperties__.join(", "),line:j.__line__}),!Y(j,"type","string"))if(O[j.type])j&&O[j.type](j);else{var ee=B[j.type.toLowerCase()];G.push(void 0!==ee?{message:"Expected "+ee+" but got "+j.type+" (case sensitive)",line:j.__line__}:{message:"The type "+j.type+" is unknown",line:j.__line__})}}function Z(j,ee){return j.every(function(W){return null!==W&&typeof W===ee})}function Y(j,ee,W){if(typeof j[ee]>"u")return G.push({message:'"'+ee+'" member required',line:j.__line__});if("array"===W){if(!Array.isArray(j[ee]))return G.push({message:'"'+ee+'" member should be an array, but is an '+typeof j[ee]+" instead",line:j.__line__})}else{if("object"===W&&j[ee]&&j[ee].constructor!==Object)return G.push({message:'"'+ee+'" member should be '+W+", but is an "+j[ee].constructor.name+" instead",line:j.__line__});if(W&&typeof j[ee]!==W)return G.push({message:'"'+ee+'" member should be '+W+", but is an "+typeof j[ee]+" instead",line:j.__line__})}}function pe(j,ee){if(!Array.isArray(j))return G.push({message:"position should be an array, is a "+typeof j+" instead",line:j.__line__||ee});if(j.length<2)return G.push({message:"position must have 2 or more elements",line:j.__line__||ee});if(j.length>3)return G.push({message:"position should not have more than 3 elements",level:"message",line:j.__line__||ee});if(!Z(j,"number"))return G.push({message:"each element in a position must be a number",line:j.__line__||ee});if(q&&q.precisionWarning){if(10===z)return z+=1,G.push({message:"truncated warnings: we've encountered coordinate precision warning 10 times, no more warnings will be reported",level:"message",line:j.__line__||ee});z<10&&j.forEach(function(W){var ce=0,Ze=String(W).split(".")[1];if(void 0!==Ze&&(ce=Ze.length),ce>6)return z+=1,G.push({message:"precision of coordinates should be reduced",level:"message",line:j.__line__||ee})})}}function se(j,ee,W,ce){if(void 0===ce&&void 0!==j.__line__&&(ce=j.__line__),0===W)return pe(j,ce);if(1===W&&ee)if("LinearRing"===ee){if(!Array.isArray(j[j.length-1]))return G.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:ce}),!0;if(j.length<4&&G.push({message:"a LinearRing of coordinates needs to have four or more positions",line:ce}),j.length&&(j[j.length-1].length!==j[0].length||!j[j.length-1].every(function(lt,we){return j[0][we]===lt})))return G.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:ce}),!0}else if("Line"===ee&&j.length<2)return G.push({message:"a line needs to have two or more coordinates to be valid",line:ce});if(Array.isArray(j))return j.map(function(lt){return se(lt,ee,W-1,lt.__line__||ce)}).some(function(lt){return lt});G.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:ce})}function be(j){j.crs&&G.push("object"==typeof j.crs&&j.crs.properties&&"urn:ogc:def:crs:OGC:1.3:CRS84"===j.crs.properties.name?{message:"old-style crs member is not recommended, this object is equivalent to the default and should be removed",line:j.__line__}:{message:"old-style crs member is not recommended",line:j.__line__})}function Me(j){if(j.bbox){if(Array.isArray(j.bbox))return Z(j.bbox,"number")||G.push({message:"each element in a bbox member must be a number",line:j.bbox.__line__}),4===j.bbox.length||6===j.bbox.length||G.push({message:"bbox must contain 4 elements (for 2D) or 6 elements (for 3D)",line:j.bbox.__line__}),G.length;G.push({message:"bbox member must be an array of numbers, but is a "+typeof j.bbox,line:j.__line__})}}function A(j){be(j),Me(j),void 0!==j.id&&"string"!=typeof j.id&&"number"!=typeof j.id&&G.push({message:'Feature "id" member must have a string or number value',line:j.__line__}),void 0!==j.features&&G.push({message:'Feature object cannot contain a "features" member',line:j.__line__}),void 0!==j.coordinates&&G.push({message:'Feature object cannot contain a "coordinates" member',line:j.__line__}),"Feature"!==j.type&&G.push({message:"GeoJSON features must have a type=feature member",line:j.__line__}),Y(j,"properties","object"),Y(j,"geometry","object")||j.geometry&&F(j.geometry)}var O={Point:function Je(j){be(j),Me(j),function Ne(j){void 0!==j.properties&&G.push({message:'geometry object cannot contain a "properties" member',line:j.__line__}),void 0!==j.geometry&&G.push({message:'geometry object cannot contain a "geometry" member',line:j.__line__}),void 0!==j.features&&G.push({message:'geometry object cannot contain a "features" member',line:j.__line__})}(j),Y(j,"coordinates","array")||pe(j.coordinates)},Feature:A,MultiPoint:function It(j){be(j),Me(j),Y(j,"coordinates","array")||se(j.coordinates,"",1)},LineString:function Ke(j){be(j),Me(j),Y(j,"coordinates","array")||se(j.coordinates,"Line",1)},MultiLineString:function nt(j){be(j),Me(j),Y(j,"coordinates","array")||se(j.coordinates,"Line",2)},FeatureCollection:function ie(j){if(be(j),Me(j),void 0!==j.properties&&G.push({message:'FeatureCollection object cannot contain a "properties" member',line:j.__line__}),void 0!==j.coordinates&&G.push({message:'FeatureCollection object cannot contain a "coordinates" member',line:j.__line__}),!Y(j,"features","array")){if(!Z(j.features,"object"))return G.push({message:"Every feature must be an object",line:j.__line__});j.features.forEach(A)}},GeometryCollection:function Ue(j){be(j),Me(j),Y(j,"geometries","array")||(Z(j.geometries,"object")||G.push({message:"The geometries array in a GeometryCollection must contain only geometry objects",line:j.__line__}),1===j.geometries.length&&G.push({message:"GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type",line:j.geometries.__line__}),j.geometries.forEach(function(ee){ee&&("GeometryCollection"===ee.type&&G.push({message:"GeometryCollection should avoid nested geometry collections",line:j.geometries.__line__}),F(ee))}))},Polygon:function je(j){be(j),Me(j),Y(j,"coordinates","array")||se(j.coordinates,"LinearRing",2)||V(j,G)},MultiPolygon:function Se(j){be(j),Me(j),Y(j,"coordinates","array")||se(j.coordinates,"LinearRing",3)||V(j,G)}},B=Object.keys(O).reduce(function(j,ee){return j[ee.toLowerCase()]=ee,j},{});return"object"!=typeof m||null==m?(G.push({message:"The root of a GeoJSON object must be an object.",line:0}),G):(F(m),G.forEach(function(j){({}).hasOwnProperty.call(j,"line")&&void 0===j.line&&delete j.line}),G)}},4967:Ae=>{function J(m){return m*Math.PI/180}function U(m){var q=0;if(m.length>2)for(var G,z,T=0;T<m.length-1;T++)q+=J((z=m[T+1])[0]-(G=m[T])[0])*(2+Math.sin(J(G[1]))+Math.sin(J(z[1])));return q>=0}function V(m){if(m&&m.length>0){if(U(m[0]))return!1;if(!m.slice(1,m.length).every(U))return!1}return!0}Ae.exports=function(q,G){(function X(m){return"Polygon"===m.type?V(m.coordinates):"MultiPolygon"===m.type?m.coordinates.every(V):void 0})(q)||G.push({message:"Polygons and MultiPolygons should follow the right-hand rule",level:"message",line:q.__line__})}},8527:function(Ae){Ae.exports=function(){"use strict";var J=function(L,K){var de={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},Ve={on:function(tt,dt,Vt){if(void 0===de[tt])throw new Error("Invalid event type: "+tt);de[tt].push({selector:dt,fn:Vt})},render:function(tt){K.store.featureChanged(tt)}},Qe=function(tt,dt){for(var Vt=de[tt],Rt=Vt.length;Rt--;){var cn=Vt[Rt];if(cn.selector(dt)){cn.fn.call(Ve,dt)||K.store.render(),K.ui.updateMapClasses();break}}};return L.start.call(Ve),{render:L.render,stop:function(){L.stop&&L.stop()},trash:function(){L.trash&&(L.trash(),K.store.render())},combineFeatures:function(){L.combineFeatures&&L.combineFeatures()},uncombineFeatures:function(){L.uncombineFeatures&&L.uncombineFeatures()},drag:function(tt){Qe("drag",tt)},click:function(tt){Qe("click",tt)},mousemove:function(tt){Qe("mousemove",tt)},mousedown:function(tt){Qe("mousedown",tt)},mouseup:function(tt){Qe("mouseup",tt)},mouseout:function(tt){Qe("mouseout",tt)},keydown:function(tt){Qe("keydown",tt)},keyup:function(tt){Qe("keyup",tt)},touchstart:function(tt){Qe("touchstart",tt)},touchmove:function(tt){Qe("touchmove",tt)},touchend:function(tt){Qe("touchend",tt)},tap:function(tt){Qe("tap",tt)}}},U=6378137;function V(L){var K=0;if(L&&L.length>0){K+=Math.abs(X(L[0]));for(var de=1;de<L.length;de++)K-=Math.abs(X(L[de]))}return K}function X(L){var K,de,Ve,Qe,tt,dt,Vt=0,Rt=L.length;if(Rt>2){for(dt=0;dt<Rt;dt++)dt===Rt-2?(Ve=Rt-2,Qe=Rt-1,tt=0):dt===Rt-1?(Ve=Rt-1,Qe=0,tt=1):(Ve=dt,Qe=dt+1,tt=dt+2),K=L[Ve],de=L[Qe],Vt+=(m(L[tt][0])-m(K[0]))*Math.sin(m(de[1]));Vt=Vt*U*U/2}return Vt}function m(L){return L*Math.PI/180}var q_geometry=function L(K){var de,Ve=0;switch(K.type){case"Polygon":return V(K.coordinates);case"MultiPolygon":for(de=0;de<K.coordinates.length;de++)Ve+=V(K.coordinates[de]);return Ve;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(de=0;de<K.geometries.length;de++)Ve+=L(K.geometries[de]);return Ve}},Me="mapbox-gl-draw-hot",Ne="mapbox-gl-draw-cold",Je="add",je="move",Ke="pointer",nt="none",It={POLYGON:"polygon",LINE:"line_string",POINT:"point"},Ue="Feature",A="Polygon",O="LineString",B="Point",j="FeatureCollection",lt={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},we="draw.create",bt="draw.update",Xn="feature",Zt="midpoint",Ce="vertex",Vn="true",ur="false",mi=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],Bi={Point:0,LineString:1,Polygon:2};function Wt(L,K){var de=Bi[L.geometry.type]-Bi[K.geometry.type];return 0===de&&L.geometry.type===A?L.area-K.area:de}function Lt(L){if(this._items={},this._nums={},this._length=L?L.length:0,L)for(var K=0,de=L.length;K<de;K++)this.add(L[K]),void 0!==L[K]&&("string"==typeof L[K]?this._items[L[K]]=K:this._nums[L[K]]=K)}Lt.prototype.add=function(L){return this.has(L)||(this._length++,"string"==typeof L?this._items[L]=this._length:this._nums[L]=this._length),this},Lt.prototype.delete=function(L){return!1===this.has(L)||(this._length--,delete this._items[L],delete this._nums[L]),this},Lt.prototype.has=function(L){return!("string"!=typeof L&&"number"!=typeof L||void 0===this._items[L]&&void 0===this._nums[L])},Lt.prototype.values=function(){var L=this,K=[];return Object.keys(this._items).forEach(function(de){K.push({k:de,v:L._items[de]})}),Object.keys(this._nums).forEach(function(de){K.push({k:JSON.parse(de),v:L._nums[de]})}),K.sort(function(de,Ve){return de.v-Ve.v}).map(function(de){return de.k})},Lt.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var Ma=[Xn,Zt,Ce],pa={click:function(L,K,de){return si(L,K,de,de.options.clickBuffer)},touch:function(L,K,de){return si(L,K,de,de.options.touchBuffer)}};function si(L,K,de,Ve){if(null===de.map)return[];var cn,pt,Qe=L?(void 0===(pt=Ve)&&(pt=0),[[(cn=L).point.x-pt,cn.point.y-pt],[cn.point.x+pt,cn.point.y+pt]]):K,tt={};de.options.styles&&(tt.layers=de.options.styles.map(function(cn){return cn.id}));var dt=de.map.queryRenderedFeatures(Qe,tt).filter(function(cn){return-1!==Ma.indexOf(cn.properties.meta)}),Vt=new Lt,Rt=[];return dt.forEach(function(cn){var pt=cn.properties.id;Vt.has(pt)||(Vt.add(pt),Rt.push(cn))}),function(cn){return cn.map(function(pt){return pt.geometry.type===A&&(pt.area=q_geometry({type:Ue,property:{},geometry:pt.geometry})),pt}).sort(Wt).map(function(pt){return delete pt.area,pt})}(Rt)}function $r(L,K){var de=pa.click(L,null,K),Ve={mouse:nt};return de[0]&&(Ve.mouse=de[0].properties.active===Vn?je:Ke,Ve.feature=de[0].properties.meta),-1!==K.events.currentModeName().indexOf("draw")&&(Ve.mouse=Je),K.ui.queueMapClasses(Ve),K.ui.updateMapClasses(),de[0]}function eu(L,K){var de=L.x-K.x,Ve=L.y-K.y;return Math.sqrt(de*de+Ve*Ve)}function Ka(L,K,de){void 0===de&&(de={});var Ve=null!=de.fineTolerance?de.fineTolerance:4,Qe=null!=de.grossTolerance?de.grossTolerance:12,tt=null!=de.interval?de.interval:500;L.point=L.point||K.point,L.time=L.time||K.time;var dt=eu(L.point,K.point);return dt<Ve||dt<Qe&&K.time-L.time<tt}function Do(L,K,de){void 0===de&&(de={});var Ve=null!=de.tolerance?de.tolerance:25,Qe=null!=de.interval?de.interval:250;return L.point=L.point||K.point,L.time=L.time||K.time,eu(L.point,K.point)<Ve&&K.time-L.time<Qe}function Oa(L,K){return L(K={exports:{}},K.exports),K.exports}var ps=Oa(function(L){var K=L.exports=function(de,Ve){if(Ve||(Ve=16),void 0===de&&(de=128),de<=0)return"0";for(var Qe=Math.log(Math.pow(2,de))/Math.log(Ve),tt=2;Qe===1/0;tt*=2)Qe=Math.log(Math.pow(2,de/tt))/Math.log(Ve)*tt;var dt=Qe-Math.floor(Qe),Vt="";for(tt=0;tt<Math.floor(Qe);tt++)Vt=Math.floor(Math.random()*Ve).toString(Ve)+Vt;if(dt){var Rt=Math.pow(Ve,dt);Vt=Math.floor(Math.random()*Rt).toString(Ve)+Vt}var cn=parseInt(Vt,Ve);return cn!==1/0&&cn>=Math.pow(2,de)?K(de,Ve):Vt};K.rack=function(de,Ve,Qe){var tt=function(Vt){var Rt=0;do{if(Rt++>10){if(!Qe)throw new Error("too many ID collisions, use more bits");de+=Qe}var cn=K(de,Ve)}while(Object.hasOwnProperty.call(dt,cn));return dt[cn]=Vt,cn},dt=tt.hats={};return tt.get=function(Vt){return tt.hats[Vt]},tt.set=function(Vt,Rt){return tt.hats[Vt]=Rt,tt},tt.bits=de||128,tt.base=Ve||16,tt}}),so=function(L,K){this.ctx=L,this.properties=K.properties||{},this.coordinates=K.geometry.coordinates,this.id=K.id||ps(),this.type=K.geometry.type};so.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},so.prototype.incomingCoords=function(L){this.setCoordinates(L)},so.prototype.setCoordinates=function(L){this.coordinates=L,this.changed()},so.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},so.prototype.setProperty=function(L,K){this.properties[L]=K},so.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:Ue,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},so.prototype.internal=function(L){var K={id:this.id,meta:Xn,"meta:type":this.type,active:ur,mode:L};if(this.ctx.options.userProperties)for(var de in this.properties)K["user_"+de]=this.properties[de];return{type:Ue,properties:K,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var ma=function(L,K){so.call(this,L,K)};(ma.prototype=Object.create(so.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},ma.prototype.updateCoordinate=function(L,K,de){this.coordinates=3===arguments.length?[K,de]:[L,K],this.changed()},ma.prototype.getCoordinate=function(){return this.getCoordinates()};var uo=function(L,K){so.call(this,L,K)};(uo.prototype=Object.create(so.prototype)).isValid=function(){return this.coordinates.length>1},uo.prototype.addCoordinate=function(L,K,de){this.changed();var Ve=parseInt(L,10);this.coordinates.splice(Ve,0,[K,de])},uo.prototype.getCoordinate=function(L){var K=parseInt(L,10);return JSON.parse(JSON.stringify(this.coordinates[K]))},uo.prototype.removeCoordinate=function(L){this.changed(),this.coordinates.splice(parseInt(L,10),1)},uo.prototype.updateCoordinate=function(L,K,de){var Ve=parseInt(L,10);this.coordinates[Ve]=[K,de],this.changed()};var wo=function(L,K){so.call(this,L,K),this.coordinates=this.coordinates.map(function(de){return de.slice(0,-1)})};(wo.prototype=Object.create(so.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(L){return L.length>2})},wo.prototype.incomingCoords=function(L){this.coordinates=L.map(function(K){return K.slice(0,-1)}),this.changed()},wo.prototype.setCoordinates=function(L){this.coordinates=L,this.changed()},wo.prototype.addCoordinate=function(L,K,de){this.changed();var Ve=L.split(".").map(function(Qe){return parseInt(Qe,10)});this.coordinates[Ve[0]].splice(Ve[1],0,[K,de])},wo.prototype.removeCoordinate=function(L){this.changed();var K=L.split(".").map(function(Ve){return parseInt(Ve,10)}),de=this.coordinates[K[0]];de&&(de.splice(K[1],1),de.length<3&&this.coordinates.splice(K[0],1))},wo.prototype.getCoordinate=function(L){var K=L.split(".").map(function(Ve){return parseInt(Ve,10)});return JSON.parse(JSON.stringify(this.coordinates[K[0]][K[1]]))},wo.prototype.getCoordinates=function(){return this.coordinates.map(function(L){return L.concat([L[0]])})},wo.prototype.updateCoordinate=function(L,K,de){this.changed();var Ve=L.split("."),Qe=parseInt(Ve[0],10),tt=parseInt(Ve[1],10);void 0===this.coordinates[Qe]&&(this.coordinates[Qe]=[]),this.coordinates[Qe][tt]=[K,de]};var Vu={MultiPoint:ma,MultiLineString:uo,MultiPolygon:wo},As=function(L,K,de,Ve,Qe){var tt=de.split("."),dt=parseInt(tt[0],10),Vt=tt[1]?tt.slice(1).join("."):null;return L[dt][K](Vt,Ve,Qe)},xo=function(L,K){if(so.call(this,L,K),delete this.coordinates,this.model=Vu[K.geometry.type],void 0===this.model)throw new TypeError(K.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(K.geometry.coordinates)};function lr(L){this.map=L.map,this.drawConfig=JSON.parse(JSON.stringify(L.options||{})),this._ctx=L}(xo.prototype=Object.create(so.prototype))._coordinatesToFeatures=function(L){var K=this,de=this.model.bind(this);return L.map(function(Ve){return new de(K.ctx,{id:ps(),type:Ue,properties:{},geometry:{coordinates:Ve,type:K.type.replace("Multi","")}})})},xo.prototype.isValid=function(){return this.features.every(function(L){return L.isValid()})},xo.prototype.setCoordinates=function(L){this.features=this._coordinatesToFeatures(L),this.changed()},xo.prototype.getCoordinate=function(L){return As(this.features,"getCoordinate",L)},xo.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(L){return L.type===A?L.getCoordinates():L.coordinates})))},xo.prototype.updateCoordinate=function(L,K,de){As(this.features,"updateCoordinate",L,K,de),this.changed()},xo.prototype.addCoordinate=function(L,K,de){As(this.features,"addCoordinate",L,K,de),this.changed()},xo.prototype.removeCoordinate=function(L){As(this.features,"removeCoordinate",L),this.changed()},xo.prototype.getFeatures=function(){return this.features},lr.prototype.setSelected=function(L){return this._ctx.store.setSelected(L)},lr.prototype.setSelectedCoordinates=function(L){var K=this;this._ctx.store.setSelectedCoordinates(L),L.reduce(function(de,Ve){return void 0===de[Ve.feature_id]&&(de[Ve.feature_id]=!0,K._ctx.store.get(Ve.feature_id).changed()),de},{})},lr.prototype.getSelected=function(){return this._ctx.store.getSelected()},lr.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},lr.prototype.isSelected=function(L){return this._ctx.store.isSelected(L)},lr.prototype.getFeature=function(L){return this._ctx.store.get(L)},lr.prototype.select=function(L){return this._ctx.store.select(L)},lr.prototype.deselect=function(L){return this._ctx.store.deselect(L)},lr.prototype.deleteFeature=function(L,K){return void 0===K&&(K={}),this._ctx.store.delete(L,K)},lr.prototype.addFeature=function(L){return this._ctx.store.add(L)},lr.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},lr.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},lr.prototype.setActionableState=function(L){return void 0===L&&(L={}),this._ctx.events.actionable({trash:L.trash||!1,combineFeatures:L.combineFeatures||!1,uncombineFeatures:L.uncombineFeatures||!1})},lr.prototype.changeMode=function(L,K,de){return void 0===K&&(K={}),void 0===de&&(de={}),this._ctx.events.changeMode(L,K,de)},lr.prototype.updateUIClasses=function(L){return this._ctx.ui.queueMapClasses(L)},lr.prototype.activateUIButton=function(L){return this._ctx.ui.setActiveButton(L)},lr.prototype.featuresAt=function(L,K,de){if(void 0===de&&(de="click"),"click"!==de&&"touch"!==de)throw new Error("invalid buffer type");return pa[de](L,K,this._ctx)},lr.prototype.newFeature=function(L){var K=L.geometry.type;return K===B?new ma(this._ctx,L):K===O?new uo(this._ctx,L):K===A?new wo(this._ctx,L):new xo(this._ctx,L)},lr.prototype.isInstanceOf=function(L,K){if(L===B)return K instanceof ma;if(L===O)return K instanceof uo;if(L===A)return K instanceof wo;if("MultiFeature"===L)return K instanceof xo;throw new Error("Unknown feature class: "+L)},lr.prototype.doRender=function(L){return this._ctx.store.featureChanged(L)},lr.prototype.onSetup=function(){},lr.prototype.onDrag=function(){},lr.prototype.onClick=function(){},lr.prototype.onMouseMove=function(){},lr.prototype.onMouseDown=function(){},lr.prototype.onMouseUp=function(){},lr.prototype.onMouseOut=function(){},lr.prototype.onKeyUp=function(){},lr.prototype.onKeyDown=function(){},lr.prototype.onTouchStart=function(){},lr.prototype.onTouchMove=function(){},lr.prototype.onTouchEnd=function(){},lr.prototype.onTap=function(){},lr.prototype.onStop=function(){},lr.prototype.onTrash=function(){},lr.prototype.onCombineFeature=function(){},lr.prototype.onUncombineFeature=function(){},lr.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Gu={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},bu=Object.keys(Gu);function Ao(L){return[].concat(L).filter(function(K){return void 0!==K})}function ms(){var L=this;if(!L.ctx.map||void 0===L.ctx.map.getSource(Me))return Rt();var K=L.ctx.events.currentModeName();L.ctx.ui.queueMapClasses({mode:K});var de=[],Ve=[];L.isDirty?Ve=L.getAllIds():(de=L.getChangedIds().filter(function(cn){return void 0!==L.get(cn)}),Ve=L.sources.hot.filter(function(cn){return cn.properties.id&&-1===de.indexOf(cn.properties.id)&&void 0!==L.get(cn.properties.id)}).map(function(cn){return cn.properties.id})),L.sources.hot=[];var Qe=L.sources.cold.length;L.sources.cold=L.isDirty?[]:L.sources.cold.filter(function(cn){return-1===de.indexOf(cn.properties.id||cn.properties.parent)});var tt=Qe!==L.sources.cold.length||Ve.length>0;function dt(cn,pt){var rn=L.get(cn).internal(K);L.ctx.events.currentModeRender(rn,function(gn){L.sources[pt].push(gn)})}if(de.forEach(function(cn){return dt(cn,"hot")}),Ve.forEach(function(cn){return dt(cn,"cold")}),tt&&L.ctx.map.getSource(Ne).setData({type:j,features:L.sources.cold}),L.ctx.map.getSource(Me).setData({type:j,features:L.sources.hot}),L._emitSelectionChange&&(L.ctx.map.fire("draw.selectionchange",{features:L.getSelected().map(function(cn){return cn.toGeoJSON()}),points:L.getSelectedCoordinates().map(function(cn){return{type:Ue,properties:{},geometry:{type:B,coordinates:cn.coordinates}}})}),L._emitSelectionChange=!1),L._deletedFeaturesToEmit.length){var Vt=L._deletedFeaturesToEmit.map(function(cn){return cn.toGeoJSON()});L._deletedFeaturesToEmit=[],L.ctx.map.fire("draw.delete",{features:Vt})}function Rt(){L.isDirty=!1,L.clearChangedIds()}Rt(),L.ctx.map.fire("draw.render",{})}function Yr(L){var K,de=this;this._features={},this._featureIds=new Lt,this._selectedFeatureIds=new Lt,this._selectedCoordinates=[],this._changedFeatureIds=new Lt,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=L,this.sources={hot:[],cold:[]},this.render=function(){K||(K=requestAnimationFrame(function(){K=null,ms.call(de)}))},this.isDirty=!1}function tu(L,K){var de=L._selectedCoordinates.filter(function(Ve){return L._selectedFeatureIds.has(Ve.feature_id)});L._selectedCoordinates.length===de.length||K.silent||(L._emitSelectionChange=!0),L._selectedCoordinates=de}Yr.prototype.createRenderBatch=function(){var L=this,K=this.render,de=0;return this.render=function(){de++},function(){L.render=K,de>0&&L.render()}},Yr.prototype.setDirty=function(){return this.isDirty=!0,this},Yr.prototype.featureChanged=function(L){return this._changedFeatureIds.add(L),this},Yr.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Yr.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Yr.prototype.getAllIds=function(){return this._featureIds.values()},Yr.prototype.add=function(L){return this.featureChanged(L.id),this._features[L.id]=L,this._featureIds.add(L.id),this},Yr.prototype.delete=function(L,K){var de=this;return void 0===K&&(K={}),Ao(L).forEach(function(Ve){de._featureIds.has(Ve)&&(de._featureIds.delete(Ve),de._selectedFeatureIds.delete(Ve),K.silent||-1===de._deletedFeaturesToEmit.indexOf(de._features[Ve])&&de._deletedFeaturesToEmit.push(de._features[Ve]),delete de._features[Ve],de.isDirty=!0)}),tu(this,K),this},Yr.prototype.get=function(L){return this._features[L]},Yr.prototype.getAll=function(){var L=this;return Object.keys(this._features).map(function(K){return L._features[K]})},Yr.prototype.select=function(L,K){var de=this;return void 0===K&&(K={}),Ao(L).forEach(function(Ve){de._selectedFeatureIds.has(Ve)||(de._selectedFeatureIds.add(Ve),de._changedFeatureIds.add(Ve),K.silent||(de._emitSelectionChange=!0))}),this},Yr.prototype.deselect=function(L,K){var de=this;return void 0===K&&(K={}),Ao(L).forEach(function(Ve){de._selectedFeatureIds.has(Ve)&&(de._selectedFeatureIds.delete(Ve),de._changedFeatureIds.add(Ve),K.silent||(de._emitSelectionChange=!0))}),tu(this,K),this},Yr.prototype.clearSelected=function(L){return void 0===L&&(L={}),this.deselect(this._selectedFeatureIds.values(),{silent:L.silent}),this},Yr.prototype.setSelected=function(L,K){var de=this;return void 0===K&&(K={}),L=Ao(L),this.deselect(this._selectedFeatureIds.values().filter(function(Ve){return-1===L.indexOf(Ve)}),{silent:K.silent}),this.select(L.filter(function(Ve){return!de._selectedFeatureIds.has(Ve)}),{silent:K.silent}),this},Yr.prototype.setSelectedCoordinates=function(L){return this._selectedCoordinates=L,this._emitSelectionChange=!0,this},Yr.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Yr.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Yr.prototype.getSelected=function(){var L=this;return this._selectedFeatureIds.values().map(function(K){return L.get(K)})},Yr.prototype.getSelectedCoordinates=function(){var L=this;return this._selectedCoordinates.map(function(K){return{coordinates:L.get(K.feature_id).getCoordinate(K.coord_path)}})},Yr.prototype.isSelected=function(L){return this._selectedFeatureIds.has(L)},Yr.prototype.setFeatureProperty=function(L,K,de){this.get(L).setProperty(K,de),this.featureChanged(L)},Yr.prototype.storeMapConfig=function(){var L=this;mi.forEach(function(K){L.ctx.map[K]&&(L._mapInitialConfig[K]=L.ctx.map[K].isEnabled())})},Yr.prototype.restoreMapConfig=function(){var L=this;Object.keys(this._mapInitialConfig).forEach(function(K){L._mapInitialConfig[K]?L.ctx.map[K].enable():L.ctx.map[K].disable()})},Yr.prototype.getInitialConfigValue=function(L){return void 0===this._mapInitialConfig[L]||this._mapInitialConfig[L]};var Br=function(){for(var L=arguments,K={},de=0;de<arguments.length;de++){var Ve=L[de];for(var Qe in Ve)oe.call(Ve,Qe)&&(K[Qe]=Ve[Qe])}return K},oe=Object.prototype.hasOwnProperty,ue=["mode","feature","mouse"];function fe(L){var K=null,de=null,Ve={onRemove:function(){return L.map.off("load",Ve.connect),clearInterval(de),Ve.removeLayers(),L.store.restoreMapConfig(),L.ui.removeButtons(),L.events.removeEventListeners(),L.ui.clearMapClasses(),L.map=null,L.container=null,L.store=null,K&&K.parentNode&&K.parentNode.removeChild(K),K=null,this},connect:function(){L.map.off("load",Ve.connect),clearInterval(de),Ve.addLayers(),L.store.storeMapConfig(),L.events.addEventListeners()},onAdd:function(Qe){var tt=Qe.fire;return Qe.fire=function(dt,Vt){var Rt=arguments;return 1===tt.length&&1!==arguments.length&&(Rt=[Br({},{type:dt},Vt)]),tt.apply(Qe,Rt)},L.map=Qe,L.events=function(dt){var Vt=Object.keys(dt.options.modes).reduce(function(At,Qt){return At[Qt]=function Us(L){var K=Object.keys(L);return function(de,Ve){void 0===Ve&&(Ve={});var Qe={},tt=K.reduce(function(dt,Vt){return dt[Vt]=L[Vt],dt},new lr(de));return{start:function(){var dt=this;Qe=tt.onSetup(Ve),bu.forEach(function(Vt){var Rt,cn=Gu[Vt],pt=function(){return!1};L[cn]&&(pt=function(){return!0}),dt.on(Vt,pt,(Rt=cn,function(rn){return tt[Rt](Qe,rn)}))})},stop:function(){tt.onStop(Qe)},trash:function(){tt.onTrash(Qe)},combineFeatures:function(){tt.onCombineFeatures(Qe)},uncombineFeatures:function(){tt.onUncombineFeatures(Qe)},render:function(dt,Vt){tt.toDisplayFeatures(Qe,dt,Vt)}}}}(dt.options.modes[Qt]),At},{}),Rt={},cn={},pt={},rn=null,gn=null;pt.drag=function(At,Qt){Qt({point:At.point,time:(new Date).getTime()})?(dt.ui.queueMapClasses({mouse:"drag"}),gn.drag(At)):At.originalEvent.stopPropagation()},pt.mousedrag=function(At){pt.drag(At,function(Qt){return!Ka(Rt,Qt)})},pt.touchdrag=function(At){pt.drag(At,function(Qt){return!Do(cn,Qt)})},pt.mousemove=function(At){if(1===(void 0!==At.originalEvent.buttons?At.originalEvent.buttons:At.originalEvent.which))return pt.mousedrag(At);var Qt=$r(At,dt);At.featureTarget=Qt,gn.mousemove(At)},pt.mousedown=function(At){Rt={time:(new Date).getTime(),point:At.point};var Qt=$r(At,dt);At.featureTarget=Qt,gn.mousedown(At)},pt.mouseup=function(At){var Qt=$r(At,dt);At.featureTarget=Qt,Ka(Rt,{point:At.point,time:(new Date).getTime()})?gn.click(At):gn.mouseup(At)},pt.mouseout=function(At){gn.mouseout(At)},pt.touchstart=function(At){if(At.originalEvent.preventDefault(),dt.options.touchEnabled){cn={time:(new Date).getTime(),point:At.point};var Qt=pa.touch(At,null,dt)[0];At.featureTarget=Qt,gn.touchstart(At)}},pt.touchmove=function(At){if(At.originalEvent.preventDefault(),dt.options.touchEnabled)return gn.touchmove(At),pt.touchdrag(At)},pt.touchend=function(At){if(At.originalEvent.preventDefault(),dt.options.touchEnabled){var Qt=pa.touch(At,null,dt)[0];At.featureTarget=Qt,Do(cn,{time:(new Date).getTime(),point:At.point})?gn.tap(At):gn.touchend(At)}};var Nn=function(At){return!(8===At||46===At||At>=48&&At<=57)};function kn(At,Qt,On){void 0===On&&(On={}),gn.stop();var qr=Vt[At];if(void 0===qr)throw new Error(At+" is not valid");rn=At;var zr=qr(dt,Qt);gn=J(zr,dt),On.silent||dt.map.fire("draw.modechange",{mode:At}),dt.store.setDirty(),dt.store.render()}pt.keydown=function(At){"mapboxgl-canvas"===(At.srcElement||At.target).classList[0]&&(8!==At.keyCode&&46!==At.keyCode||!dt.options.controls.trash?Nn(At.keyCode)?gn.keydown(At):49===At.keyCode&&dt.options.controls.point?kn(lt.DRAW_POINT):50===At.keyCode&&dt.options.controls.line_string?kn(lt.DRAW_LINE_STRING):51===At.keyCode&&dt.options.controls.polygon&&kn(lt.DRAW_POLYGON):(At.preventDefault(),gn.trash()))},pt.keyup=function(At){Nn(At.keyCode)&&gn.keyup(At)},pt.zoomend=function(){dt.store.changeZoom()},pt.data=function(At){if("style"===At.dataType){var Qt=dt.setup,On=dt.map,zr=dt.store;dt.options.styles.some(function(Pn){return On.getLayer(Pn.id)})||(Qt.addLayers(),zr.setDirty(),zr.render())}};var Li={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){gn=J(Vt[rn=dt.options.defaultMode](dt),dt)},changeMode:kn,actionable:function(At){var Qt=!1;Object.keys(At).forEach(function(On){if(void 0===Li[On])throw new Error("Invalid action type");Li[On]!==At[On]&&(Qt=!0),Li[On]=At[On]}),Qt&&dt.map.fire("draw.actionable",{actions:Li})},currentModeName:function(){return rn},currentModeRender:function(At,Qt){return gn.render(At,Qt)},fire:function(At,Qt){pt[At]&&pt[At](Qt)},addEventListeners:function(){dt.map.on("mousemove",pt.mousemove),dt.map.on("mousedown",pt.mousedown),dt.map.on("mouseup",pt.mouseup),dt.map.on("data",pt.data),dt.map.on("touchmove",pt.touchmove),dt.map.on("touchstart",pt.touchstart),dt.map.on("touchend",pt.touchend),dt.container.addEventListener("mouseout",pt.mouseout),dt.options.keybindings&&(dt.container.addEventListener("keydown",pt.keydown),dt.container.addEventListener("keyup",pt.keyup))},removeEventListeners:function(){dt.map.off("mousemove",pt.mousemove),dt.map.off("mousedown",pt.mousedown),dt.map.off("mouseup",pt.mouseup),dt.map.off("data",pt.data),dt.map.off("touchmove",pt.touchmove),dt.map.off("touchstart",pt.touchstart),dt.map.off("touchend",pt.touchend),dt.container.removeEventListener("mouseout",pt.mouseout),dt.options.keybindings&&(dt.container.removeEventListener("keydown",pt.keydown),dt.container.removeEventListener("keyup",pt.keyup))},trash:function(At){gn.trash(At)},combineFeatures:function(){gn.combineFeatures()},uncombineFeatures:function(){gn.uncombineFeatures()},getMode:function(){return rn}}}(L),L.ui=function(dt){var Vt={},Rt=null,cn={mode:null,feature:null,mouse:null},pt={mode:null,feature:null,mouse:null};function rn(At){pt=Br(pt,At)}function gn(){var At,Qt;if(dt.container){var On=[],qr=[];ue.forEach(function(zr){pt[zr]!==cn[zr]&&(On.push(zr+"-"+cn[zr]),null!==pt[zr]&&qr.push(zr+"-"+pt[zr]))}),On.length>0&&(At=dt.container.classList).remove.apply(At,On),qr.length>0&&(Qt=dt.container.classList).add.apply(Qt,qr),cn=Br(cn,pt)}}function Nn(At,Qt){void 0===Qt&&(Qt={});var On=document.createElement("button");return On.className="mapbox-gl-draw_ctrl-draw-btn "+Qt.className,On.setAttribute("title",Qt.title),Qt.container.appendChild(On),On.addEventListener("click",function(qr){if(qr.preventDefault(),qr.stopPropagation(),qr.target===Rt)return kn(),void Qt.onDeactivate();Li(At),Qt.onActivate()},!0),On}function kn(){Rt&&(Rt.classList.remove("active"),Rt=null)}function Li(At){kn();var Qt=Vt[At];Qt&&Qt&&"trash"!==At&&(Qt.classList.add("active"),Rt=Qt)}return{setActiveButton:Li,queueMapClasses:rn,updateMapClasses:gn,clearMapClasses:function(){rn({mode:null,feature:null,mouse:null}),gn()},addButtons:function(){var At=dt.options.controls,Qt=document.createElement("div");return Qt.className="mapboxgl-ctrl-group mapboxgl-ctrl",At&&(At[It.LINE]&&(Vt[It.LINE]=Nn(It.LINE,{container:Qt,className:"mapbox-gl-draw_line",title:"LineString tool "+(dt.options.keybindings?"(l)":""),onActivate:function(){return dt.events.changeMode(lt.DRAW_LINE_STRING)},onDeactivate:function(){return dt.events.trash()}})),At[It.POLYGON]&&(Vt[It.POLYGON]=Nn(It.POLYGON,{container:Qt,className:"mapbox-gl-draw_polygon",title:"Polygon tool "+(dt.options.keybindings?"(p)":""),onActivate:function(){return dt.events.changeMode(lt.DRAW_POLYGON)},onDeactivate:function(){return dt.events.trash()}})),At[It.POINT]&&(Vt[It.POINT]=Nn(It.POINT,{container:Qt,className:"mapbox-gl-draw_point",title:"Marker tool "+(dt.options.keybindings?"(m)":""),onActivate:function(){return dt.events.changeMode(lt.DRAW_POINT)},onDeactivate:function(){return dt.events.trash()}})),At.trash&&(Vt.trash=Nn("trash",{container:Qt,className:"mapbox-gl-draw_trash",title:"Delete",onActivate:function(){dt.events.trash()}})),At.combine_features&&(Vt.combine_features=Nn("combineFeatures",{container:Qt,className:"mapbox-gl-draw_combine",title:"Combine",onActivate:function(){dt.events.combineFeatures()}})),At.uncombine_features&&(Vt.uncombine_features=Nn("uncombineFeatures",{container:Qt,className:"mapbox-gl-draw_uncombine",title:"Uncombine",onActivate:function(){dt.events.uncombineFeatures()}}))),Qt},removeButtons:function(){Object.keys(Vt).forEach(function(At){var Qt=Vt[At];Qt.parentNode&&Qt.parentNode.removeChild(Qt),delete Vt[At]})}}}(L),L.container=Qe.getContainer(),L.store=new Yr(L),K=L.ui.addButtons(),L.options.boxSelect&&(Qe.boxZoom.disable(),Qe.dragPan.disable(),Qe.dragPan.enable()),Qe.loaded()?Ve.connect():(Qe.on("load",Ve.connect),de=setInterval(function(){Qe.loaded()&&Ve.connect()},16)),L.events.start(),K},addLayers:function(){L.map.addSource(Ne,{data:{type:j,features:[]},type:"geojson"}),L.map.addSource(Me,{data:{type:j,features:[]},type:"geojson"}),L.options.styles.forEach(function(Qe){L.map.addLayer(Qe)}),L.store.setDirty(!0),L.store.render()},removeLayers:function(){L.options.styles.forEach(function(Qe){L.map.getLayer(Qe.id)&&L.map.removeLayer(Qe.id)}),L.map.getSource(Ne)&&L.map.removeSource(Ne),L.map.getSource(Me)&&L.map.removeSource(Me)}};return L.setup=Ve,Ve}function ve(L){return function(K){var de=K.featureTarget;return!!de&&!!de.properties&&de.properties.meta===L}}function De(L){return!!L.featureTarget&&!!L.featureTarget.properties&&L.featureTarget.properties.active===Vn&&L.featureTarget.properties.meta===Xn}function $e(L){return!!L.featureTarget&&!!L.featureTarget.properties&&L.featureTarget.properties.active===ur&&L.featureTarget.properties.meta===Xn}function Xe(L){return void 0===L.featureTarget}function He(L){var K=L.featureTarget;return!!K&&!!K.properties&&K.properties.meta===Ce}function Ee(L){return!!L.originalEvent&&!0===L.originalEvent.shiftKey}function Fe(L){return 27===L.keyCode}function Mt(L){return 13===L.keyCode}var Ft=ct;function ct(L,K){this.x=L,this.y=K}function Et(L,K){var de=K.getBoundingClientRect();return new Ft(L.clientX-de.left-(K.clientLeft||0),L.clientY-de.top-(K.clientTop||0))}function Jt(L,K,de,Ve){return{type:Ue,properties:{meta:Ce,parent:L,coord_path:de,active:Ve?Vn:ur},geometry:{type:B,coordinates:K}}}function Kt(L,K,de){void 0===K&&(K={}),void 0===de&&(de=null);var Ve,Qe=L.geometry,tt=Qe.type,dt=Qe.coordinates,Vt=L.properties&&L.properties.id,Rt=[];function cn(rn,gn){var Nn="",kn=null;rn.forEach(function(Li,At){var Qt=null!=gn?gn+"."+At:String(At),On=Jt(Vt,Li,Qt,pt(Qt));if(K.midpoints&&kn){var qr=function(Pn,Zn,Ya){var Qn=Zn.geometry.coordinates,Ji=Ya.geometry.coordinates;if(Qn[1]>85||Qn[1]<-85||Ji[1]>85||Ji[1]<-85)return null;var Vi={lng:(Qn[0]+Ji[0])/2,lat:(Qn[1]+Ji[1])/2};return{type:Ue,properties:{meta:Zt,parent:Pn,lng:Vi.lng,lat:Vi.lat,coord_path:Ya.properties.coord_path},geometry:{type:B,coordinates:[Vi.lng,Vi.lat]}}}(Vt,kn,On);qr&&Rt.push(qr)}kn=On;var zr=JSON.stringify(Li);Nn!==zr&&Rt.push(On),0===At&&(Nn=zr)})}function pt(rn){return!!K.selectedPaths&&-1!==K.selectedPaths.indexOf(rn)}return tt===B?Rt.push(Jt(Vt,dt,de,pt(de))):tt===A?dt.forEach(function(rn,gn){cn(rn,null!==de?de+"."+gn:String(gn))}):tt===O?cn(dt,de):0===tt.indexOf("Multi")&&(Ve=tt.replace("Multi",""),dt.forEach(function(rn,gn){Rt=Rt.concat(Kt({type:Ue,properties:L.properties,geometry:{type:Ve,coordinates:rn}},K,gn))})),Rt}ct.prototype={clone:function(){return new ct(this.x,this.y)},add:function(L){return this.clone()._add(L)},sub:function(L){return this.clone()._sub(L)},multByPoint:function(L){return this.clone()._multByPoint(L)},divByPoint:function(L){return this.clone()._divByPoint(L)},mult:function(L){return this.clone()._mult(L)},div:function(L){return this.clone()._div(L)},rotate:function(L){return this.clone()._rotate(L)},rotateAround:function(L,K){return this.clone()._rotateAround(L,K)},matMult:function(L){return this.clone()._matMult(L)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(L){return this.x===L.x&&this.y===L.y},dist:function(L){return Math.sqrt(this.distSqr(L))},distSqr:function(L){var K=L.x-this.x,de=L.y-this.y;return K*K+de*de},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(L){return Math.atan2(this.y-L.y,this.x-L.x)},angleWith:function(L){return this.angleWithSep(L.x,L.y)},angleWithSep:function(L,K){return Math.atan2(this.x*K-this.y*L,this.x*L+this.y*K)},_matMult:function(L){var de=L[2]*this.x+L[3]*this.y;return this.x=L[0]*this.x+L[1]*this.y,this.y=de,this},_add:function(L){return this.x+=L.x,this.y+=L.y,this},_sub:function(L){return this.x-=L.x,this.y-=L.y,this},_mult:function(L){return this.x*=L,this.y*=L,this},_div:function(L){return this.x/=L,this.y/=L,this},_multByPoint:function(L){return this.x*=L.x,this.y*=L.y,this},_divByPoint:function(L){return this.x/=L.x,this.y/=L.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var L=this.y;return this.y=this.x,this.x=-L,this},_rotate:function(L){var K=Math.cos(L),de=Math.sin(L),Qe=de*this.x+K*this.y;return this.x=K*this.x-de*this.y,this.y=Qe,this},_rotateAround:function(L,K){var de=Math.cos(L),Ve=Math.sin(L),tt=K.y+Ve*(this.x-K.x)+de*(this.y-K.y);return this.x=K.x+de*(this.x-K.x)-Ve*(this.y-K.y),this.y=tt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ct.convert=function(L){return L instanceof ct?L:Array.isArray(L)?new ct(L[0],L[1]):L};var mn=function(L){setTimeout(function(){L.map&&L.map.doubleClickZoom&&L._ctx&&L._ctx.store&&L._ctx.store.getInitialConfigValue&&L._ctx.store.getInitialConfigValue("doubleClickZoom")&&L.map.doubleClickZoom.enable()},0)},St=function(L){setTimeout(function(){L.map&&L.map.doubleClickZoom&&L.map.doubleClickZoom.disable()},0)},Ut=function(L){if(!L||!L.type)return null;var K=Tt[L.type];return K?"geometry"===K?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:L}]}:"feature"===K?{type:"FeatureCollection",features:[L]}:"featurecollection"===K?L:void 0:null},Tt={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function Gn(L){switch(L&&L.type||null){case"FeatureCollection":return L.features=L.features.reduce(function(K,de){return K.concat(Gn(de))},[]),L;case"Feature":return L.geometry?Gn(L.geometry).map(function(K){var de={type:"Feature",properties:JSON.parse(JSON.stringify(L.properties)),geometry:K};return void 0!==L.id&&(de.id=L.id),de}):[L];case"MultiPoint":return L.coordinates.map(function(K){return{type:"Point",coordinates:K}});case"MultiPolygon":return L.coordinates.map(function(K){return{type:"Polygon",coordinates:K}});case"MultiLineString":return L.coordinates.map(function(K){return{type:"LineString",coordinates:K}});case"GeometryCollection":return L.geometries.map(Gn).reduce(function(K,de){return K.concat(de)},[]);case"Point":case"Polygon":case"LineString":return[L]}}var ln=Oa(function(L){var K=L.exports=function(pt){return new de(pt)};function de(pt){this.value=pt}function Ve(pt,rn,gn){var Nn=[],kn=[],Li=!0;return function At(Qt){var On=gn?Qe(Qt):Qt,qr={},zr=!0,Pn={node:On,node_:Qt,path:[].concat(Nn),parent:kn[kn.length-1],parents:kn,key:Nn.slice(-1)[0],isRoot:0===Nn.length,level:Nn.length,circular:null,update:function(Qn,Ji){Pn.isRoot||(Pn.parent.node[Pn.key]=Qn),Pn.node=Qn,Ji&&(zr=!1)},delete:function(Qn){delete Pn.parent.node[Pn.key],Qn&&(zr=!1)},remove:function(Qn){Vt(Pn.parent.node)?Pn.parent.node.splice(Pn.key,1):delete Pn.parent.node[Pn.key],Qn&&(zr=!1)},keys:null,before:function(Qn){qr.before=Qn},after:function(Qn){qr.after=Qn},pre:function(Qn){qr.pre=Qn},post:function(Qn){qr.post=Qn},stop:function(){Li=!1},block:function(){zr=!1}};if(!Li)return Pn;function Zn(){if("object"==typeof Pn.node&&null!==Pn.node){Pn.keys&&Pn.node_===Pn.node||(Pn.keys=tt(Pn.node)),Pn.isLeaf=0==Pn.keys.length;for(var Qn=0;Qn<kn.length;Qn++)if(kn[Qn].node_===Qt){Pn.circular=kn[Qn];break}}else Pn.isLeaf=!0,Pn.keys=null;Pn.notLeaf=!Pn.isLeaf,Pn.notRoot=!Pn.isRoot}Zn();var Ya=rn.call(Pn,Pn.node);return void 0!==Ya&&Pn.update&&Pn.update(Ya),qr.before&&qr.before.call(Pn,Pn.node),zr&&("object"!=typeof Pn.node||null===Pn.node||Pn.circular||(kn.push(Pn),Zn(),Rt(Pn.keys,function(Qn,Ji){Nn.push(Qn),qr.pre&&qr.pre.call(Pn,Pn.node[Qn],Qn);var Vi=At(Pn.node[Qn]);gn&&cn.call(Pn.node,Qn)&&(Pn.node[Qn]=Vi.node),Vi.isLast=Ji==Pn.keys.length-1,Vi.isFirst=0==Ji,qr.post&&qr.post.call(Pn,Vi),Nn.pop()}),kn.pop()),qr.after&&qr.after.call(Pn,Pn.node)),Pn}(pt).node}function Qe(pt){if("object"==typeof pt&&null!==pt){var rn;if(Vt(pt))rn=[];else if("[object Date]"===dt(pt))rn=new Date(pt.getTime?pt.getTime():pt);else if("[object RegExp]"===dt(pt))rn=new RegExp(pt);else if("[object Error]"===dt(pt))rn={message:pt.message};else if(function(kn){return"[object Boolean]"===dt(kn)}(pt))rn=new Boolean(pt);else if(function(kn){return"[object Number]"===dt(kn)}(pt))rn=new Number(pt);else if(function(kn){return"[object String]"===dt(kn)}(pt))rn=new String(pt);else if(Object.create&&Object.getPrototypeOf)rn=Object.create(Object.getPrototypeOf(pt));else if(pt.constructor===Object)rn={};else{var Nn=function(){};Nn.prototype=pt.constructor&&pt.constructor.prototype||pt.__proto__||{},rn=new Nn}return Rt(tt(pt),function(kn){rn[kn]=pt[kn]}),rn}return pt}de.prototype.get=function(pt){for(var rn=this.value,gn=0;gn<pt.length;gn++){var Nn=pt[gn];if(!rn||!cn.call(rn,Nn)){rn=void 0;break}rn=rn[Nn]}return rn},de.prototype.has=function(pt){for(var rn=this.value,gn=0;gn<pt.length;gn++){var Nn=pt[gn];if(!rn||!cn.call(rn,Nn))return!1;rn=rn[Nn]}return!0},de.prototype.set=function(pt,rn){for(var gn=this.value,Nn=0;Nn<pt.length-1;Nn++){var kn=pt[Nn];cn.call(gn,kn)||(gn[kn]={}),gn=gn[kn]}return gn[pt[Nn]]=rn,rn},de.prototype.map=function(pt){return Ve(this.value,pt,!0)},de.prototype.forEach=function(pt){return this.value=Ve(this.value,pt,!1),this.value},de.prototype.reduce=function(pt,rn){var gn=1===arguments.length,Nn=gn?this.value:rn;return this.forEach(function(kn){this.isRoot&&gn||(Nn=pt.call(this,Nn,kn))}),Nn},de.prototype.paths=function(){var pt=[];return this.forEach(function(rn){pt.push(this.path)}),pt},de.prototype.nodes=function(){var pt=[];return this.forEach(function(rn){pt.push(this.node)}),pt},de.prototype.clone=function(){var pt=[],rn=[];return function gn(Nn){for(var kn=0;kn<pt.length;kn++)if(pt[kn]===Nn)return rn[kn];if("object"==typeof Nn&&null!==Nn){var Li=Qe(Nn);return pt.push(Nn),rn.push(Li),Rt(tt(Nn),function(At){Li[At]=gn(Nn[At])}),pt.pop(),rn.pop(),Li}return Nn}(this.value)};var tt=Object.keys||function(pt){var rn=[];for(var gn in pt)rn.push(gn);return rn};function dt(pt){return Object.prototype.toString.call(pt)}var Vt=Array.isArray||function(pt){return"[object Array]"===Object.prototype.toString.call(pt)},Rt=function(pt,rn){if(pt.forEach)return pt.forEach(rn);for(var gn=0;gn<pt.length;gn++)rn(pt[gn],gn,pt)};Rt(tt(de.prototype),function(pt){K[pt]=function(rn){var gn=[].slice.call(arguments,1),Nn=new de(rn);return Nn[pt].apply(Nn,gn)}});var cn=Object.hasOwnProperty||function(pt,rn){return rn in pt}}),ni=En;function En(L){if(!(this instanceof En))return new En(L);this._bbox=L||[1/0,1/0,-1/0,-1/0],this._valid=!!L}En.prototype.include=function(L){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],L[0]),this._bbox[1]=Math.min(this._bbox[1],L[1]),this._bbox[2]=Math.max(this._bbox[2],L[0]),this._bbox[3]=Math.max(this._bbox[3],L[1]),this},En.prototype.equals=function(L){var K;return K=L instanceof En?L.bbox():L,this._bbox[0]==K[0]&&this._bbox[1]==K[1]&&this._bbox[2]==K[2]&&this._bbox[3]==K[3]},En.prototype.center=function(L){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},En.prototype.union=function(L){var K;return this._valid=!0,K=L instanceof En?L.bbox():L,this._bbox[0]=Math.min(this._bbox[0],K[0]),this._bbox[1]=Math.min(this._bbox[1],K[1]),this._bbox[2]=Math.max(this._bbox[2],K[2]),this._bbox[3]=Math.max(this._bbox[3],K[3]),this},En.prototype.bbox=function(){return this._valid?this._bbox:null},En.prototype.contains=function(L){if(!L)return this._fastContains();if(!this._valid)return null;var K=L[0],de=L[1];return this._bbox[0]<=K&&this._bbox[1]<=de&&this._bbox[2]>=K&&this._bbox[3]>=de},En.prototype.intersect=function(L){return this._valid?(K=L instanceof En?L.bbox():L,!(this._bbox[0]>K[2]||this._bbox[2]<K[0]||this._bbox[3]<K[1]||this._bbox[1]>K[3])):null;var K},En.prototype._fastContains=function(){return this._valid?new Function("ll","return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]"):new Function("return null;")},En.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var ui={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},_i=Object.keys(ui),Ir=function(L){return Xr(L).bbox()};function Xr(L){for(var K=ni(),de=function(L){if(!L)return[];var K=Gn(Ut(L)),de=[];return K.features.forEach(function(Ve){Ve.geometry&&(de=de.concat(function Qe(tt){return Array.isArray(tt)&&tt.length&&"number"==typeof tt[0]?[tt]:tt.reduce(function(dt,Vt){return Array.isArray(Vt)&&Array.isArray(Vt[0])?dt.concat(Qe(Vt)):(dt.push(Vt),dt)},[])}(Ve.geometry.coordinates)))}),de}(L),Ve=0;Ve<de.length;Ve++)K.include(de[Ve]);return K}function xi(L,K){var de=-90,Ve=90,Qe=-90,tt=90,dt=270,Vt=-270;L.forEach(function(cn){var pt=Ir(cn),rn=pt[1],gn=pt[3],Nn=pt[0],kn=pt[2];rn>de&&(de=rn),gn<Ve&&(Ve=gn),gn>Qe&&(Qe=gn),rn<tt&&(tt=rn),Nn<dt&&(dt=Nn),kn>Vt&&(Vt=kn)});var Rt=K;return de+Rt.lat>85&&(Rt.lat=85-de),Qe+Rt.lat>90&&(Rt.lat=90-Qe),Ve+Rt.lat<-85&&(Rt.lat=-85-Ve),tt+Rt.lat<-90&&(Rt.lat=-90-tt),dt+Rt.lng<=-270&&(Rt.lng+=360*Math.ceil(Math.abs(Rt.lng)/360)),Vt+Rt.lng>=270&&(Rt.lng-=360*Math.ceil(Math.abs(Rt.lng)/360)),Rt}function Hr(L,K){var de=xi(L.map(function(Ve){return Ve.toGeoJSON()}),K);L.forEach(function(Ve){var Qe,tt=Ve.getCoordinates(),dt=function(Rt){var cn={lng:Rt[0]+de.lng,lat:Rt[1]+de.lat};return[cn.lng,cn.lat]},Vt=function(Rt){return Rt.map(function(cn){return dt(cn)})};Ve.type===B?Qe=dt(tt):Ve.type===O||"MultiPoint"===Ve.type?Qe=tt.map(dt):Ve.type===A||"MultiLineString"===Ve.type?Qe=tt.map(Vt):"MultiPolygon"===Ve.type&&(Qe=tt.map(function(Rt){return Rt.map(function(cn){return Vt(cn)})})),Ve.incomingCoords(Qe)})}Ir.polygon=function(L){return Xr(L).polygon()},Ir.bboxify=function(L){return ln(L).map(function(K){K&&_i.some(function(de){return!!K[de]&&-1!==ui[de].indexOf(K.type)})&&(K.bbox=Xr(K).bbox(),this.update(K))})};var Mn={onSetup:function(L){var K=this,de={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:L.featureIds||[]};return this.setSelected(de.initiallySelectedFeatureIds.filter(function(Ve){return void 0!==K.getFeature(Ve)})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),de},fireUpdate:function(){this.map.fire(bt,{action:"move",features:this.getSelected().map(function(L){return L.toGeoJSON()})})},fireActionable:function(){var L=this,K=this.getSelected(),de=K.filter(function(Vt){return L.isInstanceOf("MultiFeature",Vt)}),Ve=!1;if(K.length>1){Ve=!0;var Qe=K[0].type.replace("Multi","");K.forEach(function(Vt){Vt.type.replace("Multi","")!==Qe&&(Ve=!1)})}this.setActionableState({combineFeatures:Ve,uncombineFeatures:de.length>0,trash:K.length>0})},getUniqueIds:function(L){return L.length?L.map(function(K){return K.properties.id}).filter(function(K){return void 0!==K}).reduce(function(K,de){return K.add(de),K},new Lt).values():[]},stopExtendedInteractions:function(L){L.boxSelectElement&&(L.boxSelectElement.parentNode&&L.boxSelectElement.parentNode.removeChild(L.boxSelectElement),L.boxSelectElement=null),this.map.dragPan.enable(),L.boxSelecting=!1,L.canBoxSelect=!1,L.dragMoving=!1,L.canDragMove=!1},onStop:function(){mn(this)},onMouseMove:function(L){return this.stopExtendedInteractions(L),!0},onMouseOut:function(L){return!L.dragMoving||this.fireUpdate()}};Mn.onTap=Mn.onClick=function(L,K){return Xe(K)?this.clickAnywhere(L,K):ve(Ce)(K)?this.clickOnVertex(L,K):(de=K).featureTarget&&de.featureTarget.properties&&de.featureTarget.properties.meta===Xn?this.clickOnFeature(L,K):void 0;var de},Mn.clickAnywhere=function(L){var K=this,de=this.getSelectedIds();de.length&&(this.clearSelectedFeatures(),de.forEach(function(Ve){return K.doRender(Ve)})),mn(this),this.stopExtendedInteractions(L)},Mn.clickOnVertex=function(L,K){this.changeMode(lt.DIRECT_SELECT,{featureId:K.featureTarget.properties.parent,coordPath:K.featureTarget.properties.coord_path,startPos:K.lngLat}),this.updateUIClasses({mouse:je})},Mn.startOnActiveFeature=function(L,K){this.stopExtendedInteractions(L),this.map.dragPan.disable(),this.doRender(K.featureTarget.properties.id),L.canDragMove=!0,L.dragMoveLocation=K.lngLat},Mn.clickOnFeature=function(L,K){var de=this;St(this),this.stopExtendedInteractions(L);var Ve=Ee(K),Qe=this.getSelectedIds(),tt=K.featureTarget.properties.id,dt=this.isSelected(tt);if(!Ve&&dt&&this.getFeature(tt).type!==B)return this.changeMode(lt.DIRECT_SELECT,{featureId:tt});dt&&Ve?(this.deselect(tt),this.updateUIClasses({mouse:Ke}),1===Qe.length&&mn(this)):!dt&&Ve?(this.select(tt),this.updateUIClasses({mouse:je})):dt||Ve||(Qe.forEach(function(Vt){return de.doRender(Vt)}),this.setSelected(tt),this.updateUIClasses({mouse:je})),this.doRender(tt)},Mn.onMouseDown=function(L,K){return De(K)?this.startOnActiveFeature(L,K):this.drawConfig.boxSelect&&(de=K).originalEvent&&de.originalEvent.shiftKey&&0===de.originalEvent.button?this.startBoxSelect(L,K):void 0;var de},Mn.startBoxSelect=function(L,K){this.stopExtendedInteractions(L),this.map.dragPan.disable(),L.boxSelectStartLocation=Et(K.originalEvent,this.map.getContainer()),L.canBoxSelect=!0},Mn.onTouchStart=function(L,K){if(De(K))return this.startOnActiveFeature(L,K)},Mn.onDrag=function(L,K){return L.canDragMove?this.dragMove(L,K):this.drawConfig.boxSelect&&L.canBoxSelect?this.whileBoxSelect(L,K):void 0},Mn.whileBoxSelect=function(L,K){L.boxSelecting=!0,this.updateUIClasses({mouse:Je}),L.boxSelectElement||(L.boxSelectElement=document.createElement("div"),L.boxSelectElement.classList.add("mapbox-gl-draw_boxselect"),this.map.getContainer().appendChild(L.boxSelectElement));var de=Et(K.originalEvent,this.map.getContainer()),Ve=Math.min(L.boxSelectStartLocation.x,de.x),Qe=Math.max(L.boxSelectStartLocation.x,de.x),tt=Math.min(L.boxSelectStartLocation.y,de.y),dt=Math.max(L.boxSelectStartLocation.y,de.y),Vt="translate("+Ve+"px, "+tt+"px)";L.boxSelectElement.style.transform=Vt,L.boxSelectElement.style.WebkitTransform=Vt,L.boxSelectElement.style.width=Qe-Ve+"px",L.boxSelectElement.style.height=dt-tt+"px"},Mn.dragMove=function(L,K){L.dragMoving=!0,K.originalEvent.stopPropagation();var de={lng:K.lngLat.lng-L.dragMoveLocation.lng,lat:K.lngLat.lat-L.dragMoveLocation.lat};Hr(this.getSelected(),de),L.dragMoveLocation=K.lngLat},Mn.onMouseUp=function(L,K){var de=this;if(L.dragMoving)this.fireUpdate();else if(L.boxSelecting){var Ve=[L.boxSelectStartLocation,Et(K.originalEvent,this.map.getContainer())],Qe=this.featuresAt(null,Ve,"click"),tt=this.getUniqueIds(Qe).filter(function(dt){return!de.isSelected(dt)});tt.length&&(this.select(tt),tt.forEach(function(dt){return de.doRender(dt)}),this.updateUIClasses({mouse:je}))}this.stopExtendedInteractions(L)},Mn.toDisplayFeatures=function(L,K,de){K.properties.active=this.isSelected(K.properties.id)?Vn:ur,de(K),this.fireActionable(),K.properties.active===Vn&&K.geometry.type!==B&&Kt(K).forEach(de)},Mn.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Mn.onCombineFeatures=function(){var L=this.getSelected();if(!(0===L.length||L.length<2)){for(var K=[],de=[],Ve=L[0].type.replace("Multi",""),Qe=0;Qe<L.length;Qe++){var tt=L[Qe];if(tt.type.replace("Multi","")!==Ve)return;tt.type.includes("Multi")?tt.getCoordinates().forEach(function(Vt){K.push(Vt)}):K.push(tt.getCoordinates()),de.push(tt.toGeoJSON())}if(de.length>1){var dt=this.newFeature({type:Ue,properties:de[0].properties,geometry:{type:"Multi"+Ve,coordinates:K}});this.addFeature(dt),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([dt.id]),this.map.fire("draw.combine",{createdFeatures:[dt.toGeoJSON()],deletedFeatures:de})}this.fireActionable()}},Mn.onUncombineFeatures=function(){var L=this,K=this.getSelected();if(0!==K.length){for(var de=[],Ve=[],Qe=function(dt){var Vt=K[dt];L.isInstanceOf("MultiFeature",Vt)&&(Vt.getFeatures().forEach(function(Rt){L.addFeature(Rt),Rt.properties=Vt.properties,de.push(Rt.toGeoJSON()),L.select([Rt.id])}),L.deleteFeature(Vt.id,{silent:!0}),Ve.push(Vt.toGeoJSON()))},tt=0;tt<K.length;tt++)Qe(tt);de.length>1&&this.map.fire("draw.uncombine",{createdFeatures:de,deletedFeatures:Ve}),this.fireActionable()}};var Oi=ve(Ce),er=ve(Zt),ua={fireUpdate:function(){this.map.fire(bt,{action:"change_coordinates",features:this.getSelected().map(function(L){return L.toGeoJSON()})})},fireActionable:function(L){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:L.selectedCoordPaths.length>0})},startDragging:function(L,K){this.map.dragPan.disable(),L.canDragMove=!0,L.dragMoveLocation=K.lngLat},stopDragging:function(L){this.map.dragPan.enable(),L.dragMoving=!1,L.canDragMove=!1,L.dragMoveLocation=null},onVertex:function(L,K){this.startDragging(L,K);var de=K.featureTarget.properties,Ve=L.selectedCoordPaths.indexOf(de.coord_path);Ee(K)||-1!==Ve?Ee(K)&&-1===Ve&&L.selectedCoordPaths.push(de.coord_path):L.selectedCoordPaths=[de.coord_path];var Qe=this.pathsToCoordinates(L.featureId,L.selectedCoordPaths);this.setSelectedCoordinates(Qe)},onMidpoint:function(L,K){this.startDragging(L,K);var de=K.featureTarget.properties;L.feature.addCoordinate(de.coord_path,de.lng,de.lat),this.fireUpdate(),L.selectedCoordPaths=[de.coord_path]},pathsToCoordinates:function(L,K){return K.map(function(de){return{feature_id:L,coord_path:de}})},onFeature:function(L,K){0===L.selectedCoordPaths.length?this.startDragging(L,K):this.stopDragging(L)},dragFeature:function(L,K,de){Hr(this.getSelected(),de),L.dragMoveLocation=K.lngLat},dragVertex:function(L,K,de){for(var Ve=L.selectedCoordPaths.map(function(Vt){return L.feature.getCoordinate(Vt)}),Qe=xi(Ve.map(function(Vt){return{type:Ue,properties:{},geometry:{type:B,coordinates:Vt}}}),de),tt=0;tt<Ve.length;tt++){var dt=Ve[tt];L.feature.updateCoordinate(L.selectedCoordPaths[tt],dt[0]+Qe.lng,dt[1]+Qe.lat)}},clickNoTarget:function(){this.changeMode(lt.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(lt.SIMPLE_SELECT)},clickActiveFeature:function(L){L.selectedCoordPaths=[],this.clearSelectedCoordinates(),L.feature.changed()},onSetup:function(L){var K=L.featureId,de=this.getFeature(K);if(!de)throw new Error("You must provide a featureId to enter direct_select mode");if(de.type===B)throw new TypeError("direct_select mode doesn't handle point features");var Ve={featureId:K,feature:de,dragMoveLocation:L.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:L.coordPath?[L.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(K,Ve.selectedCoordPaths)),this.setSelected(K),St(this),this.setActionableState({trash:!0}),Ve},onStop:function(){mn(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(L,K,de){L.featureId===K.properties.id?(K.properties.active=Vn,de(K),Kt(K,{map:this.map,midpoints:!0,selectedPaths:L.selectedCoordPaths}).forEach(de)):(K.properties.active=ur,de(K)),this.fireActionable(L)},onTrash:function(L){L.selectedCoordPaths.sort(function(K,de){return de.localeCompare(K,"en",{numeric:!0})}).forEach(function(K){return L.feature.removeCoordinate(K)}),this.fireUpdate(),L.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(L),!1===L.feature.isValid()&&(this.deleteFeature([L.featureId]),this.changeMode(lt.SIMPLE_SELECT,{}))},onMouseMove:function(L,K){var de=De(K),Ve=Oi(K),Qe=0===L.selectedCoordPaths.length;return this.updateUIClasses(de&&Qe||Ve&&!Qe?{mouse:je}:{mouse:nt}),this.stopDragging(L),!0},onMouseOut:function(L){return L.dragMoving&&this.fireUpdate(),!0}};ua.onTouchStart=ua.onMouseDown=function(L,K){return Oi(K)?this.onVertex(L,K):De(K)?this.onFeature(L,K):er(K)?this.onMidpoint(L,K):void 0},ua.onDrag=function(L,K){if(!0===L.canDragMove){L.dragMoving=!0,K.originalEvent.stopPropagation();var de={lng:K.lngLat.lng-L.dragMoveLocation.lng,lat:K.lngLat.lat-L.dragMoveLocation.lat};L.selectedCoordPaths.length>0?this.dragVertex(L,K,de):this.dragFeature(L,K,de),L.dragMoveLocation=K.lngLat}},ua.onClick=function(L,K){return Xe(K)?this.clickNoTarget(L,K):De(K)?this.clickActiveFeature(L,K):$e(K)?this.clickInactive(L,K):void this.stopDragging(L)},ua.onTap=function(L,K){return Xe(K)?this.clickNoTarget(L,K):De(K)?this.clickActiveFeature(L,K):$e(K)?this.clickInactive(L,K):void 0},ua.onTouchEnd=ua.onMouseUp=function(L){L.dragMoving&&this.fireUpdate(),this.stopDragging(L)};var qo={};function or(L,K){return!!L.lngLat&&L.lngLat.lng===K[0]&&L.lngLat.lat===K[1]}qo.onSetup=function(){var L=this.newFeature({type:Ue,properties:{},geometry:{type:B,coordinates:[]}});return this.addFeature(L),this.clearSelectedFeatures(),this.updateUIClasses({mouse:Je}),this.activateUIButton(It.POINT),this.setActionableState({trash:!0}),{point:L}},qo.stopDrawingAndRemove=function(L){this.deleteFeature([L.point.id],{silent:!0}),this.changeMode(lt.SIMPLE_SELECT)},qo.onTap=qo.onClick=function(L,K){this.updateUIClasses({mouse:je}),L.point.updateCoordinate("",K.lngLat.lng,K.lngLat.lat),this.map.fire(we,{features:[L.point.toGeoJSON()]}),this.changeMode(lt.SIMPLE_SELECT,{featureIds:[L.point.id]})},qo.onStop=function(L){this.activateUIButton(),L.point.getCoordinate().length||this.deleteFeature([L.point.id],{silent:!0})},qo.toDisplayFeatures=function(L,K,de){var Ve=K.properties.id===L.point.id;if(K.properties.active=Ve?Vn:ur,!Ve)return de(K)},qo.onTrash=qo.stopDrawingAndRemove,qo.onKeyUp=function(L,K){if(Fe(K)||Mt(K))return this.stopDrawingAndRemove(L,K)};var ji={onSetup:function(){var L=this.newFeature({type:Ue,properties:{},geometry:{type:A,coordinates:[[]]}});return this.addFeature(L),this.clearSelectedFeatures(),St(this),this.updateUIClasses({mouse:Je}),this.activateUIButton(It.POLYGON),this.setActionableState({trash:!0}),{polygon:L,currentVertexPosition:0}},clickAnywhere:function(L,K){if(L.currentVertexPosition>0&&or(K,L.polygon.coordinates[0][L.currentVertexPosition-1]))return this.changeMode(lt.SIMPLE_SELECT,{featureIds:[L.polygon.id]});this.updateUIClasses({mouse:Je}),L.polygon.updateCoordinate("0."+L.currentVertexPosition,K.lngLat.lng,K.lngLat.lat),L.currentVertexPosition++,L.polygon.updateCoordinate("0."+L.currentVertexPosition,K.lngLat.lng,K.lngLat.lat)},clickOnVertex:function(L){return this.changeMode(lt.SIMPLE_SELECT,{featureIds:[L.polygon.id]})},onMouseMove:function(L,K){L.polygon.updateCoordinate("0."+L.currentVertexPosition,K.lngLat.lng,K.lngLat.lat),He(K)&&this.updateUIClasses({mouse:Ke})}};ji.onTap=ji.onClick=function(L,K){return He(K)?this.clickOnVertex(L,K):this.clickAnywhere(L,K)},ji.onKeyUp=function(L,K){Fe(K)?(this.deleteFeature([L.polygon.id],{silent:!0}),this.changeMode(lt.SIMPLE_SELECT)):Mt(K)&&this.changeMode(lt.SIMPLE_SELECT,{featureIds:[L.polygon.id]})},ji.onStop=function(L){this.updateUIClasses({mouse:nt}),mn(this),this.activateUIButton(),void 0!==this.getFeature(L.polygon.id)&&(L.polygon.removeCoordinate("0."+L.currentVertexPosition),L.polygon.isValid()?this.map.fire(we,{features:[L.polygon.toGeoJSON()]}):(this.deleteFeature([L.polygon.id],{silent:!0}),this.changeMode(lt.SIMPLE_SELECT,{},{silent:!0})))},ji.toDisplayFeatures=function(L,K,de){var Ve=K.properties.id===L.polygon.id;if(K.properties.active=Ve?Vn:ur,!Ve)return de(K);if(0!==K.geometry.coordinates.length){var Qe=K.geometry.coordinates[0].length;if(!(Qe<3)){if(K.properties.meta=Xn,de(Jt(L.polygon.id,K.geometry.coordinates[0][0],"0.0",!1)),Qe>3){var tt=K.geometry.coordinates[0].length-3;de(Jt(L.polygon.id,K.geometry.coordinates[0][tt],"0."+tt,!1))}if(Qe<=4&&(de({type:Ue,properties:K.properties,geometry:{coordinates:[[K.geometry.coordinates[0][0][0],K.geometry.coordinates[0][0][1]],[K.geometry.coordinates[0][1][0],K.geometry.coordinates[0][1][1]]],type:O}}),3===Qe))return;return de(K)}}},ji.onTrash=function(L){this.deleteFeature([L.polygon.id],{silent:!0}),this.changeMode(lt.SIMPLE_SELECT)};var jr={onSetup:function(L){var K,de,Ve=(L=L||{}).featureId,Qe="forward";if(Ve){if(!(K=this.getFeature(Ve)))throw new Error("Could not find a feature with the provided featureId");var tt=L.from;if(tt&&"Feature"===tt.type&&tt.geometry&&"Point"===tt.geometry.type&&(tt=tt.geometry),tt&&"Point"===tt.type&&tt.coordinates&&2===tt.coordinates.length&&(tt=tt.coordinates),!tt||!Array.isArray(tt))throw new Error("Please use the `from` property to indicate which point to continue the line from");var dt=K.coordinates.length-1;if(K.coordinates[dt][0]===tt[0]&&K.coordinates[dt][1]===tt[1])K.addCoordinate.apply(K,[de=dt+1].concat(K.coordinates[dt]));else{if(K.coordinates[0][0]!==tt[0]||K.coordinates[0][1]!==tt[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");Qe="backwards",K.addCoordinate.apply(K,[de=0].concat(K.coordinates[0]))}}else K=this.newFeature({type:Ue,properties:{},geometry:{type:O,coordinates:[]}}),de=0,this.addFeature(K);return this.clearSelectedFeatures(),St(this),this.updateUIClasses({mouse:Je}),this.activateUIButton(It.LINE),this.setActionableState({trash:!0}),{line:K,currentVertexPosition:de,direction:Qe}},clickAnywhere:function(L,K){if(L.currentVertexPosition>0&&or(K,L.line.coordinates[L.currentVertexPosition-1])||"backwards"===L.direction&&or(K,L.line.coordinates[L.currentVertexPosition+1]))return this.changeMode(lt.SIMPLE_SELECT,{featureIds:[L.line.id]});this.updateUIClasses({mouse:Je}),L.line.updateCoordinate(L.currentVertexPosition,K.lngLat.lng,K.lngLat.lat),"forward"===L.direction?(L.currentVertexPosition++,L.line.updateCoordinate(L.currentVertexPosition,K.lngLat.lng,K.lngLat.lat)):L.line.addCoordinate(0,K.lngLat.lng,K.lngLat.lat)},clickOnVertex:function(L){return this.changeMode(lt.SIMPLE_SELECT,{featureIds:[L.line.id]})},onMouseMove:function(L,K){L.line.updateCoordinate(L.currentVertexPosition,K.lngLat.lng,K.lngLat.lat),He(K)&&this.updateUIClasses({mouse:Ke})}};jr.onTap=jr.onClick=function(L,K){if(He(K))return this.clickOnVertex(L,K);this.clickAnywhere(L,K)},jr.onKeyUp=function(L,K){Mt(K)?this.changeMode(lt.SIMPLE_SELECT,{featureIds:[L.line.id]}):Fe(K)&&(this.deleteFeature([L.line.id],{silent:!0}),this.changeMode(lt.SIMPLE_SELECT))},jr.onStop=function(L){mn(this),this.activateUIButton(),void 0!==this.getFeature(L.line.id)&&(L.line.removeCoordinate(""+L.currentVertexPosition),L.line.isValid()?this.map.fire(we,{features:[L.line.toGeoJSON()]}):(this.deleteFeature([L.line.id],{silent:!0}),this.changeMode(lt.SIMPLE_SELECT,{},{silent:!0})))},jr.onTrash=function(L){this.deleteFeature([L.line.id],{silent:!0}),this.changeMode(lt.SIMPLE_SELECT)},jr.toDisplayFeatures=function(L,K,de){var Ve=K.properties.id===L.line.id;if(K.properties.active=Ve?Vn:ur,!Ve)return de(K);K.geometry.coordinates.length<2||(K.properties.meta=Xn,de(Jt(L.line.id,K.geometry.coordinates["forward"===L.direction?K.geometry.coordinates.length-2:1],""+("forward"===L.direction?K.geometry.coordinates.length-2:1),!1)),de(K))};var gs={simple_select:Mn,direct_select:ua,draw_point:qo,draw_polygon:ji,draw_line_string:jr},Ui={defaultMode:lt.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}],modes:gs,controls:{},userProperties:!1},La={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Tn={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function ri(L,K){return L.map(function(de){return de.source?de:Br(de,{id:de.id+"."+K,source:"hot"===K?Me:Ne})})}var Wo=Oa(function(L,K){var de="[object Arguments]",Ve="[object Map]",Qe="[object Object]",tt="[object Set]",dt=/^\[object .+?Constructor\]$/,Vt=/^(?:0|[1-9]\d*)$/,Rt={};Rt["[object Float32Array]"]=Rt["[object Float64Array]"]=Rt["[object Int8Array]"]=Rt["[object Int16Array]"]=Rt["[object Int32Array]"]=Rt["[object Uint8Array]"]=Rt["[object Uint8ClampedArray]"]=Rt["[object Uint16Array]"]=Rt["[object Uint32Array]"]=!0,Rt[de]=Rt["[object Array]"]=Rt["[object ArrayBuffer]"]=Rt["[object Boolean]"]=Rt["[object DataView]"]=Rt["[object Date]"]=Rt["[object Error]"]=Rt["[object Function]"]=Rt[Ve]=Rt["[object Number]"]=Rt[Qe]=Rt["[object RegExp]"]=Rt[tt]=Rt["[object String]"]=Rt["[object WeakMap]"]=!1;var cn="object"==typeof global&&global&&global.Object===Object&&global,pt="object"==typeof self&&self&&self.Object===Object&&self,rn=cn||pt||Function("return this")(),gn=K&&!K.nodeType&&K,Nn=gn&&L&&!L.nodeType&&L,kn=Nn&&Nn.exports===gn,Li=kn&&cn.process,At=function(){try{return Li&&Li.binding&&Li.binding("util")}catch{}}(),Qt=At&&At.isTypedArray;function On(it,vt){for(var Ht=-1,Dn=null==it?0:it.length;++Ht<Dn;)if(vt(it[Ht],Ht,it))return!0;return!1}function qr(it){var vt=-1,Ht=Array(it.size);return it.forEach(function(Dn,Or){Ht[++vt]=[Or,Dn]}),Ht}function zr(it){var vt=-1,Ht=Array(it.size);return it.forEach(function(Dn){Ht[++vt]=Dn}),Ht}var Pn,Zn,Ya,Qn=Array.prototype,Vi=Object.prototype,ga=rn["__core-js_shared__"],Gi=Function.prototype.toString,Re=Vi.hasOwnProperty,at=(Pn=/[^.]+$/.exec(ga&&ga.keys&&ga.keys.IE_PROTO||""))?"Symbol(src)_1."+Pn:"",Nt=Vi.toString,_n=RegExp("^"+Gi.call(Re).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bi=kn?rn.Buffer:void 0,qt=rn.Symbol,Ei=rn.Uint8Array,Ki=Vi.propertyIsEnumerable,gi=Qn.splice,ii=qt?qt.toStringTag:void 0,ya=Object.getOwnPropertySymbols,qi=bi?bi.isBuffer:void 0,li=(Zn=Object.keys,Ya=Object,function(it){return Zn(Ya(it))}),la=Wi(rn,"DataView"),ei=Wi(rn,"Map"),Yi=Wi(rn,"Promise"),cr=Wi(rn,"Set"),Zo=Wi(rn,"WeakMap"),Xa=Wi(Object,"create"),Jo=zn(la),Tr=zn(ei),Vs=zn(Yi),nu=zn(cr),Gs=zn(Zo),nc=qt?qt.prototype:void 0,Ur=nc?nc.valueOf:void 0;function ca(it){var vt=-1,Ht=null==it?0:it.length;for(this.clear();++vt<Ht;){var Dn=it[vt];this.set(Dn[0],Dn[1])}}function ys(it){var vt=-1,Ht=null==it?0:it.length;for(this.clear();++vt<Ht;){var Dn=it[vt];this.set(Dn[0],Dn[1])}}function Rs(it){var vt=-1,Ht=null==it?0:it.length;for(this.clear();++vt<Ht;){var Dn=it[vt];this.set(Dn[0],Dn[1])}}function Cl(it){var vt=-1,Ht=null==it?0:it.length;for(this.__data__=new Rs;++vt<Ht;)this.add(it[vt])}function Hs(it){var vt=this.__data__=new ys(it);this.size=vt.size}function rc(it,vt){for(var Ht=it.length;Ht--;)if(Xo(it[Ht][0],vt))return Ht;return-1}function jo(it){return null==it?void 0===it?"[object Undefined]":"[object Null]":ii&&ii in Object(it)?function(vt){var Ht=Re.call(vt,ii),Dn=vt[ii];try{vt[ii]=void 0;var Or=!0}catch{}var dr=Nt.call(vt);return Or&&(Ht?vt[ii]=Dn:delete vt[ii]),dr}(it):Nt.call(it)}function ru(it){return ar(it)&&jo(it)==de}function wu(it,vt,Ht,Dn,Or){return it===vt||(null==it||null==vt||!ar(it)&&!ar(vt)?it!=it&&vt!=vt:function(dr,Ii,Qi,Ar,eo,to){var Qa=zi(dr),Na=zi(Ii),Mo=Qa?"[object Array]":sn(dr),_a=Na?"[object Array]":sn(Ii),ka=(Mo=Mo==de?Qe:Mo)==Qe,So=(_a=_a==de?Qe:_a)==Qe,Hu=Mo==_a;if(Hu&&iu(dr)){if(!iu(Ii))return!1;Qa=!0,ka=!1}if(Hu&&!ka)return to||(to=new Hs),Qa||Su(dr)?ci(dr,Ii,Qi,Ar,eo,to):function(yi,Rr,ti,qs,au,Oo,kr){switch(ti){case"[object DataView]":if(yi.byteLength!=Rr.byteLength||yi.byteOffset!=Rr.byteOffset)return!1;yi=yi.buffer,Rr=Rr.buffer;case"[object ArrayBuffer]":return!(yi.byteLength!=Rr.byteLength||!Oo(new Ei(yi),new Ei(Rr)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Xo(+yi,+Rr);case"[object Error]":return yi.name==Rr.name&&yi.message==Rr.message;case"[object RegExp]":case"[object String]":return yi==Rr+"";case Ve:var _r=qr;case tt:if(_r||(_r=zr),yi.size!=Rr.size&&!(1&qs))return!1;var vs=kr.get(yi);if(vs)return vs==Rr;qs|=2,kr.set(yi,Rr);var tl=ci(_r(yi),_r(Rr),qs,au,Oo,kr);return kr.delete(yi),tl;case"[object Symbol]":if(Ur)return Ur.call(yi)==Ur.call(Rr)}return!1}(dr,Ii,Mo,Qi,Ar,eo,to);if(!(1&Qi)){var ho=ka&&Re.call(dr,"__wrapped__"),ba=So&&Re.call(Ii,"__wrapped__");if(ho||ba){var Il=ho?dr.value():dr,Cu=ba?Ii.value():Ii;return to||(to=new Hs),eo(Il,Cu,Qi,Ar,to)}}return!!Hu&&(to||(to=new Hs),function(yi,Rr,ti,qs,au,Oo){var kr=1&ti,_r=lo(yi),Ws=_r.length;if(Ws!=lo(Rr).length&&!kr)return!1;for(var tl=Ws;tl--;){var _s=_r[tl];if(!(kr?_s in Rr:Re.call(Rr,_s)))return!1}var Tl=Oo.get(yi);if(Tl&&Oo.get(Rr))return Tl==Rr;var Oc=!0;Oo.set(yi,Rr),Oo.set(Rr,yi);for(var nl=kr;++tl<Ws;){var rl=yi[_s=_r[tl]],$u=Rr[_s];if(qs)var Qo=kr?qs($u,rl,_s,Rr,yi,Oo):qs(rl,$u,_s,yi,Rr,Oo);if(!(void 0===Qo?rl===$u||au(rl,$u,ti,qs,Oo):Qo)){Oc=!1;break}nl||(nl="constructor"==_s)}if(Oc&&!nl){var wa=yi.constructor,ic=Rr.constructor;wa==ic||!("constructor"in yi)||!("constructor"in Rr)||"function"==typeof wa&&wa instanceof wa&&"function"==typeof ic&&ic instanceof ic||(Oc=!1)}return Oo.delete(yi),Oo.delete(Rr),Oc}(dr,Ii,Qi,Ar,eo,to))}(it,vt,Ht,Dn,wu,Or))}function ci(it,vt,Ht,Dn,Or,dr){var Ii=1&Ht,Qi=it.length,Ar=vt.length;if(Qi!=Ar&&!(Ii&&Ar>Qi))return!1;var eo=dr.get(it);if(eo&&dr.get(vt))return eo==vt;var to=-1,Qa=!0,Na=2&Ht?new Cl:void 0;for(dr.set(it,vt),dr.set(vt,it);++to<Qi;){var Mo=it[to],_a=vt[to];if(Dn)var ka=Ii?Dn(_a,Mo,to,vt,it,dr):Dn(Mo,_a,to,it,vt,dr);if(void 0!==ka){if(ka)continue;Qa=!1;break}if(Na){if(!On(vt,function(So,Hu){if(!Na.has(Hu)&&(Mo===So||Or(Mo,So,Ht,Dn,dr)))return Na.push(Hu)})){Qa=!1;break}}else if(Mo!==_a&&!Or(Mo,_a,Ht,Dn,dr)){Qa=!1;break}}return dr.delete(it),dr.delete(vt),Qa}function lo(it){return Dn=Yo,Or=function ou(it){return null!=(vt=it)&&$s(vt.length)&&!Xi(vt)?function Mc(it,vt){var Ht=zi(it),Dn=!Ht&&xu(it),Or=!Ht&&!Dn&&iu(it),dr=!Ht&&!Dn&&!Or&&Su(it),Ii=Ht||Dn||Or||dr,Qi=Ii?function(to,Qa){for(var Na=-1,Mo=Array(to);++Na<to;)Mo[Na]=Qa(Na);return Mo}(it.length,String):[],Ar=Qi.length;for(var eo in it)!vt&&!Re.call(it,eo)||Ii&&("length"==eo||Or&&("offset"==eo||"parent"==eo)||dr&&("buffer"==eo||"byteLength"==eo||"byteOffset"==eo)||Er(eo,Ar))||Qi.push(eo);return Qi}(it):function va(it){if(Ht=(vt=it)&&vt.constructor,vt!==("function"==typeof Ht&&Ht.prototype||Vi))return li(it);var vt,Ht,Or=[];for(var dr in Object(it))Re.call(it,dr)&&"constructor"!=dr&&Or.push(dr);return Or}(it);var vt}(vt=it),zi(vt)?Or:function(dr,Ii){for(var Qi=-1,Ar=Ii.length,eo=dr.length;++Qi<Ar;)dr[eo+Qi]=Ii[Qi];return dr}(Or,Dn(vt));var vt,Dn,Or}function Eo(it,vt){var Ht,Dn,Or=it.__data__;return("string"==(Dn=typeof(Ht=vt))||"number"==Dn||"symbol"==Dn||"boolean"==Dn?"__proto__"!==Ht:null===Ht)?Or["string"==typeof vt?"string":"hash"]:Or.map}function Wi(it,vt){var Ht=it?.[vt];return function Ko(it){return!(!Eu(it)||(vt=it,at&&at in vt))&&(Xi(it)?_n:dt).test(zn(it));var vt}(Ht)?Ht:void 0}ca.prototype.clear=function(){this.__data__=Xa?Xa(null):{},this.size=0},ca.prototype.delete=function(it){var vt=this.has(it)&&delete this.__data__[it];return this.size-=vt?1:0,vt},ca.prototype.get=function(it){var vt=this.__data__;if(Xa){var Ht=vt[it];return"__lodash_hash_undefined__"===Ht?void 0:Ht}return Re.call(vt,it)?vt[it]:void 0},ca.prototype.has=function(it){var vt=this.__data__;return Xa?void 0!==vt[it]:Re.call(vt,it)},ca.prototype.set=function(it,vt){var Ht=this.__data__;return this.size+=this.has(it)?0:1,Ht[it]=Xa&&void 0===vt?"__lodash_hash_undefined__":vt,this},ys.prototype.clear=function(){this.__data__=[],this.size=0},ys.prototype.delete=function(it){var vt=this.__data__,Ht=rc(vt,it);return!(Ht<0||(Ht==vt.length-1?vt.pop():gi.call(vt,Ht,1),--this.size,0))},ys.prototype.get=function(it){var vt=this.__data__,Ht=rc(vt,it);return Ht<0?void 0:vt[Ht][1]},ys.prototype.has=function(it){return rc(this.__data__,it)>-1},ys.prototype.set=function(it,vt){var Ht=this.__data__,Dn=rc(Ht,it);return Dn<0?(++this.size,Ht.push([it,vt])):Ht[Dn][1]=vt,this},Rs.prototype.clear=function(){this.size=0,this.__data__={hash:new ca,map:new(ei||ys),string:new ca}},Rs.prototype.delete=function(it){var vt=Eo(this,it).delete(it);return this.size-=vt?1:0,vt},Rs.prototype.get=function(it){return Eo(this,it).get(it)},Rs.prototype.has=function(it){return Eo(this,it).has(it)},Rs.prototype.set=function(it,vt){var Ht=Eo(this,it),Dn=Ht.size;return Ht.set(it,vt),this.size+=Ht.size==Dn?0:1,this},Cl.prototype.add=Cl.prototype.push=function(it){return this.__data__.set(it,"__lodash_hash_undefined__"),this},Cl.prototype.has=function(it){return this.__data__.has(it)},Hs.prototype.clear=function(){this.__data__=new ys,this.size=0},Hs.prototype.delete=function(it){var vt=this.__data__,Ht=vt.delete(it);return this.size=vt.size,Ht},Hs.prototype.get=function(it){return this.__data__.get(it)},Hs.prototype.has=function(it){return this.__data__.has(it)},Hs.prototype.set=function(it,vt){var Ht=this.__data__;if(Ht instanceof ys){var Dn=Ht.__data__;if(!ei||Dn.length<199)return Dn.push([it,vt]),this.size=++Ht.size,this;Ht=this.__data__=new Rs(Dn)}return Ht.set(it,vt),this.size=Ht.size,this};var Yo=ya?function(it){return null==it?[]:(it=Object(it),function(vt,Ht){for(var Dn=-1,Or=null==vt?0:vt.length,dr=0,Ii=[];++Dn<Or;){var Qi=vt[Dn];Ht(Qi)&&(Ii[dr++]=Qi)}return Ii}(ya(it),function(vt){return Ki.call(it,vt)}))}:function(){return[]},sn=jo;function Er(it,vt){return!!(vt=vt??9007199254740991)&&("number"==typeof it||Vt.test(it))&&it>-1&&it%1==0&&it<vt}function zn(it){if(null!=it){try{return Gi.call(it)}catch{}try{return it+""}catch{}}return""}function Xo(it,vt){return it===vt||it!=it&&vt!=vt}(la&&"[object DataView]"!=sn(new la(new ArrayBuffer(1)))||ei&&sn(new ei)!=Ve||Yi&&"[object Promise]"!=sn(Yi.resolve())||cr&&sn(new cr)!=tt||Zo&&"[object WeakMap]"!=sn(new Zo))&&(sn=function(it){var vt=jo(it),Ht=vt==Qe?it.constructor:void 0,Dn=Ht?zn(Ht):"";if(Dn)switch(Dn){case Jo:return"[object DataView]";case Tr:return Ve;case Vs:return"[object Promise]";case nu:return tt;case Gs:return"[object WeakMap]"}return vt});var xu=ru(function(){return arguments}())?ru:function(it){return ar(it)&&Re.call(it,"callee")&&!Ki.call(it,"callee")},zi=Array.isArray,iu=qi||function(){return!1};function Xi(it){if(!Eu(it))return!1;var vt=jo(it);return"[object Function]"==vt||"[object GeneratorFunction]"==vt||"[object AsyncFunction]"==vt||"[object Proxy]"==vt}function $s(it){return"number"==typeof it&&it>-1&&it%1==0&&it<=9007199254740991}function Eu(it){var vt=typeof it;return null!=it&&("object"==vt||"function"==vt)}function ar(it){return null!=it&&"object"==typeof it}var it,Su=Qt?(it=Qt,function(vt){return it(vt)}):function(it){return ar(it)&&$s(it.length)&&!!Rt[jo(it)]};L.exports=function(it,vt){return wu(it,vt)}}),un={Polygon:wo,LineString:uo,Point:ma,MultiPolygon:xo,MultiLineString:xo,MultiPoint:xo};var Wn=function(L,K){var de={options:L=function(Qe){void 0===Qe&&(Qe={});var tt=Br(Qe);return Qe.controls||(tt.controls={}),tt.controls=Br(!1===Qe.displayControlsDefault?Tn:La,Qe.controls),(tt=Br(Ui,tt)).styles=ri(tt.styles,"cold").concat(ri(tt.styles,"hot")),tt}(L)};K=function Ro(L,K){return K.modes=lt,K.getFeatureIdsAt=function(de){return pa.click({point:de},null,L).map(function(Ve){return Ve.properties.id})},K.getSelectedIds=function(){return L.store.getSelectedIds()},K.getSelected=function(){return{type:j,features:L.store.getSelectedIds().map(function(de){return L.store.get(de)}).map(function(de){return de.toGeoJSON()})}},K.getSelectedPoints=function(){return{type:j,features:L.store.getSelectedCoordinates().map(function(de){return{type:Ue,properties:{},geometry:{type:B,coordinates:de.coordinates}}})}},K.set=function(de){if(void 0===de.type||de.type!==j||!Array.isArray(de.features))throw new Error("Invalid FeatureCollection");var Ve=L.store.createRenderBatch(),Qe=L.store.getAllIds().slice(),tt=K.add(de),dt=new Lt(tt);return(Qe=Qe.filter(function(Vt){return!dt.has(Vt)})).length&&K.delete(Qe),Ve(),tt},K.add=function(de){var Ve=JSON.parse(JSON.stringify(Ut(de))).features.map(function(Qe){if(Qe.id=Qe.id||ps(),null===Qe.geometry)throw new Error("Invalid geometry: null");if(void 0===L.store.get(Qe.id)||L.store.get(Qe.id).type!==Qe.geometry.type){var tt=un[Qe.geometry.type];if(void 0===tt)throw new Error("Invalid geometry type: "+Qe.geometry.type+".");var dt=new tt(L,Qe);L.store.add(dt)}else{var Vt=L.store.get(Qe.id);Vt.properties=Qe.properties,Wo(Vt.getCoordinates(),Qe.geometry.coordinates)||Vt.incomingCoords(Qe.geometry.coordinates)}return Qe.id});return L.store.render(),Ve},K.get=function(de){var Ve=L.store.get(de);if(Ve)return Ve.toGeoJSON()},K.getAll=function(){return{type:j,features:L.store.getAll().map(function(de){return de.toGeoJSON()})}},K.delete=function(de){return L.store.delete(de,{silent:!0}),K.getMode()!==lt.DIRECT_SELECT||L.store.getSelectedIds().length?L.store.render():L.events.changeMode(lt.SIMPLE_SELECT,void 0,{silent:!0}),K},K.deleteAll=function(){return L.store.delete(L.store.getAllIds(),{silent:!0}),K.getMode()===lt.DIRECT_SELECT?L.events.changeMode(lt.SIMPLE_SELECT,void 0,{silent:!0}):L.store.render(),K},K.changeMode=function(de,Ve){return void 0===Ve&&(Ve={}),de===lt.SIMPLE_SELECT&&K.getMode()===lt.SIMPLE_SELECT?(Qe=Ve.featureIds||[],tt=L.store.getSelectedIds(),Qe.length===tt.length&&JSON.stringify(Qe.map(function(dt){return dt}).sort())===JSON.stringify(tt.map(function(dt){return dt}).sort())||(L.store.setSelected(Ve.featureIds,{silent:!0}),L.store.render()),K):(de===lt.DIRECT_SELECT&&K.getMode()===lt.DIRECT_SELECT&&Ve.featureId===L.store.getSelectedIds()[0]||L.events.changeMode(de,Ve,{silent:!0}),K);var Qe,tt},K.getMode=function(){return L.events.getMode()},K.trash=function(){return L.events.trash({silent:!0}),K},K.combineFeatures=function(){return L.events.combineFeatures({silent:!0}),K},K.uncombineFeatures=function(){return L.events.uncombineFeatures({silent:!0}),K},K.setFeatureProperty=function(de,Ve,Qe){return L.store.setFeatureProperty(de,Ve,Qe),K},K}(de,K),de.api=K;var Ve=fe(de);return K.onAdd=Ve.onAdd,K.onRemove=Ve.onRemove,K.types=It,K.options=L,K};function Qr(L){Wn(L,this)}return Qr.modes=gs,Qr}()},4969:Ae=>{"use strict";function J(U,V){this.x=U,this.y=V}Ae.exports=J,J.prototype={clone:function(){return new J(this.x,this.y)},add:function(U){return this.clone()._add(U)},sub:function(U){return this.clone()._sub(U)},multByPoint:function(U){return this.clone()._multByPoint(U)},divByPoint:function(U){return this.clone()._divByPoint(U)},mult:function(U){return this.clone()._mult(U)},div:function(U){return this.clone()._div(U)},rotate:function(U){return this.clone()._rotate(U)},rotateAround:function(U,V){return this.clone()._rotateAround(U,V)},matMult:function(U){return this.clone()._matMult(U)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(U){return this.x===U.x&&this.y===U.y},dist:function(U){return Math.sqrt(this.distSqr(U))},distSqr:function(U){var V=U.x-this.x,X=U.y-this.y;return V*V+X*X},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(U){return Math.atan2(this.y-U.y,this.x-U.x)},angleWith:function(U){return this.angleWithSep(U.x,U.y)},angleWithSep:function(U,V){return Math.atan2(this.x*V-this.y*U,this.x*U+this.y*V)},_matMult:function(U){var X=U[2]*this.x+U[3]*this.y;return this.x=U[0]*this.x+U[1]*this.y,this.y=X,this},_add:function(U){return this.x+=U.x,this.y+=U.y,this},_sub:function(U){return this.x-=U.x,this.y-=U.y,this},_mult:function(U){return this.x*=U,this.y*=U,this},_div:function(U){return this.x/=U,this.y/=U,this},_multByPoint:function(U){return this.x*=U.x,this.y*=U.y,this},_divByPoint:function(U){return this.x/=U.x,this.y/=U.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var U=this.y;return this.y=this.x,this.x=-U,this},_rotate:function(U){var V=Math.cos(U),X=Math.sin(U),q=X*this.x+V*this.y;return this.x=V*this.x-X*this.y,this.y=q,this},_rotateAround:function(U,V){var X=Math.cos(U),m=Math.sin(U),G=V.y+m*(this.x-V.x)+X*(this.y-V.y);return this.x=V.x+X*(this.x-V.x)-m*(this.y-V.y),this.y=G,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},J.convert=function(U){return U instanceof J?U:Array.isArray(U)?new J(U[0],U[1]):U}},1077:Ae=>{Ae.exports={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}},8407:(Ae,J,U)=>{"use strict";var V=U(4208),X=U(3082),m=U(4703),q=U(9069).EventEmitter,G=U(1077),z=U(5765),T=U(6775);function D(F,Z){this._eventEmitter=new q,this.options=m({},this.options,Z),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geocoderApi=F}D.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,getItemValue:function(F){return"string"==typeof F?F:F.place_name},render:function(F){if("string"==typeof F){var Z=F.split(","),Y=Z[0].toLowerCase().indexOf(this.query.toLowerCase()),ie=this.query.length;return'<div class="mapboxgl-ctrl-geocoder--suggestion maplibregl-ctrl-geocoder--suggestion"><svg class="mapboxgl-ctrl-geocoder--suggestion-icon maplibre-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="mapboxgl-ctrl-geocoder--suggestion-info maplibregl-ctrl-geocoder--suggestion-info"><div class="mapboxgl-ctrl-geocoder--suggestion-title maplibregl-ctrl-geocoder--suggestion-title">'+Z[0].substring(0,Y)+'<span class="mapboxgl-ctrl-geocoder--suggestion-match maplibregl-ctrl-geocoder--suggestion-match">'+Z[0].substring(Y,Y+ie)+"</span>"+Z[0].substring(Y+ie)+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address maplibregl-ctrl-geocoder--suggestion-address">'+Z.splice(1,Z.length).join(",")+"</div></div></div>"}var Me=F.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--result maplibregl-ctrl-geocoder--result"><svg class="mapboxgl-ctrl-geocoder--result-icon maplibre-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="mapboxgl-ctrl-geocoder--result-title maplibregl-ctrl-geocoder--result-title">'+Me[0]+'</div><div class="mapboxgl-ctrl-geocoder--result-address maplibregl-ctrl-geocoder--result-address">'+Me.splice(1,Me.length).join(",")+"</div></div></div>"},popupRender:function(F){var Z=F.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion maplibre-ctrl-geocoder--suggestion popup-suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title maplibre-ctrl-geocoder--suggestion-title popup-suggestion-title">'+Z[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address maplibre-ctrl-geocoder--suggestion-address popup-suggestion-address">'+Z.splice(1,Z.length).join(",")+"</div></div>"},processResults:function(F,Z,Y){if(!Z||0===Z.length)return F;var ie=F.map(function(Je){return Je.place_name}),pe=Z.filter(function(Je){return!ie.includes(Je)});if(pe.length+F.length>Y){for(var se=Math.min(pe.length,Math.floor(Y/2));F.length+se<Y;)se++;for(var be=[],Me=0;Me<se;Me++)be.push(pe[Me]);for(var Ne=0;Ne<Y-se;Ne++)be.push(F[Ne]);return be}return pe.length>0?pe.concat(F):F},showResultMarkers:!0,debounceSearch:200},addTo:function(F){function Z(ie,pe){if(!document.body.contains(pe))throw new Error("Element provided to #addTo() exists, but is not in the DOM");var se=ie.onAdd();pe.appendChild(se)}if(F._controlContainer)F.addControl(this);else if(F instanceof HTMLElement)Z(this,F);else{if("string"!=typeof F)throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element");var Y=document.querySelectorAll(F);if(0===Y.length)throw new Error("Element ",F,"not found.");if(Y.length>1)throw new Error("Geocoder can only be added to a single html element");Z(this,Y[0])}},onAdd:function(F){if(F&&"string"!=typeof F&&(this._map=F),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);var Z=this.container=document.createElement("div");Z.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";var Y=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",X(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);var ie=document.createElement("div");ie.classList.add("mapboxgl-ctrl-geocoder--pin-right","maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button maplibregl-ctrl-geocoder--button";var pe=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(pe),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),ie.appendChild(this._clearEl),ie.appendChild(this._loadingEl),Z.appendChild(Y),Z.appendChild(this._inputEl),Z.appendChild(ie),this._typeahead=new V(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),Z},createIcon:function(F,Z){var Y=document.createElementNS("http://www.w3.org/2000/svg","svg");if(Y.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+F+" maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+F),Y.setAttribute("viewBox","0 0 18 18"),Y.setAttribute("xml:space","preserve"),Y.setAttribute("width",18),Y.setAttribute("height",18),"innerHTML"in Y)Y.innerHTML=Z;else{var ie=document.createElement("div");ie.innerHTML="<svg>"+Z.valueOf().toString()+"</svg>",Y.appendChild(ie.firstChild.firstChild)}return Y},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_onPaste:function(F){var Z=(F.clipboardData||window.clipboardData).getData("text");Z.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(Z)},_onKeyDown:function(F){var Z=27,Y=9;if(F.keyCode===Z&&this.options.clearAndBlurOnEsc)return this._clear(F),this._inputEl.blur();var ie=F.target&&F.target.shadowRoot?F.target.shadowRoot.activeElement:F.target;if(!ie||!ie.value)return this.fresh=!0,F.keyCode!==Y&&this.clear(F),this._clearEl.style.display="none";if(!F.metaKey&&-1===[Y,Z,37,39,38,40].indexOf(F.keyCode)){if(13===F.keyCode){if(this.options.showResultsWhileTyping)return void(null==this._typeahead.selected&&this.geocoderApi.getSuggestions?this._geocode(ie.value,!0):null==this._typeahead.selected&&this.options.showResultMarkers&&this._fitBoundsForMarkers());this._typeahead.selected||this._geocode(ie.value)}ie.value.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(ie.value)}},_showButton:function(){this._typeahead.selected&&(this._clearEl.style.display="block")},_hideButton:function(){this._typeahead.selected&&(this._clearEl.style.display="none")},_onBlur:function(F){this.options.clearOnBlur&&this._clearOnBlur(F),this.options.collapsed&&this._collapse()},_onChange:function(){var F=this._typeahead.selected;if(F&&"string"==typeof F)this._geocode(F,!0);else if(F&&JSON.stringify(F)!==this.lastSelected){var Z;if(this._clearEl.style.display="none",this.options.flyTo)if(this._removeResultMarkers(),F.properties&&G[F.properties.short_code])Z=m({},this.options.flyTo),this._map&&this._map.fitBounds(G[F.properties.short_code].bbox,Z);else if(F.bbox){var Y=F.bbox;Z=m({},this.options.flyTo),this._map&&this._map.fitBounds([[Y[0],Y[1]],[Y[2],Y[3]]],Z)}else Z=m({},{zoom:this.options.zoom},this.options.flyTo),F.center?Z.center=F.center:F.geometry&&F.geometry.type&&"Point"===F.geometry.type&&F.geometry.coordinates&&(Z.center=F.geometry.coordinates),this._map&&this._map.flyTo(Z);this.options.marker&&this._maplibregl&&this._handleMarker(F),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(F),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:F})}},_getConfigForRequest:function(){var Z=this;return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce(function(ie,pe){return Z.options[pe]&&(ie[pe]=["countries","types","language"].indexOf(pe)>-1?Z.options[pe].split(/[\s,]+/):Z.options[pe],"proximity"===pe&&Z.options[pe]&&"number"==typeof Z.options[pe].longitude&&"number"==typeof Z.options[pe].latitude&&(ie[pe]=[Z.options[pe].longitude,Z.options[pe].latitude])),ie},{})},_geocode:function(F,Z){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:F}),this.inputString=F;var pe,Y=null,ie=this._getConfigForRequest();if(this.options.localGeocoderOnly)pe=Promise.resolve();else if(this.options.reverseGeocode&&/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/.test(F)){var se=F.split(/[\s(,)?]+/).map(function(Je){return parseFloat(Je,10)}).reverse();"proximity"in(ie=m(ie,{query:se,limit:1}))&&delete ie.proximity,pe=this.geocoderApi.reverseGeocode(ie)}else ie=m(ie,{query:F}),pe=this.geocoderApi.forwardGeocode(ie);var be=[];this.options.localGeocoder&&((be=this.options.localGeocoder(F))||(be=[]));var Me=[];return pe.catch(function(Je){Y=Je}.bind(this)).then(function(Je){this._loadingEl.style.display="none";var je={};return(je=Je||{type:"FeatureCollection",features:[]}).config=ie,this.fresh&&(this.fresh=!1),je.features=je.features?be.concat(je.features):be,this.options.externalGeocoder?(Me=this.options.externalGeocoder(F,je.features,ie)||[]).then(function(Se){return je.features=je.features?Se.concat(je.features):Se,je},function(){return je}):this.geocoderApi.getSuggestions&&!Z?(this._getSuggestions(F)||[]).then(function(Se){return Se.length>0&&(je.suggestions=Se),je},function(){return je}):je}.bind(this)).then(function(Je){if(Y)throw Y;if(this.options.filter&&Je.features.length&&(Je.features=Je.features.filter(this.options.filter)),Je.features.length){this._clearEl.style.display="block",this._eventEmitter.emit("results",Je);var je=this.options.processResults(Je.features,Je.suggestions,this.options.limit);this._eventEmitter.emit("processedResults",je),this._typeahead.update(je),(!this.options.showResultsWhileTyping||Z)&&this.options.showResultMarkers&&this._fitBoundsForMarkers()}else this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",Je)}.bind(this)).catch(function(Je){this._loadingEl.style.display="none",be.length&&this.options.localGeocoder||Me.length&&this.options.externalGeocoder?(this._clearEl.style.display="block",this._typeahead.update(be)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:be}),this._eventEmitter.emit("error",{error:Je})}.bind(this)),pe},_getSuggestions:function(F){return new Promise(function(Z,Y){this.geocoderApi.getSuggestions||Y(),this._eventEmitter.emit("loadingSuggestions",{query:F});var ie=null,pe=[],se=this._getConfigForRequest();se=m(se,{query:F}),this.geocoderApi.getSuggestions(se).catch(function(Me){ie=Me}.bind(this)).then(function(Me){if(ie)throw ie;Me.suggestions.length&&(pe=Me.suggestions),Z(pe),this._eventEmitter.emit("resultsSuggestions",Me)}.bind(this)).catch(function(Me){this._eventEmitter.emit("error",{error:Me})}.bind(this))}.bind(this))},_clear:function(F){F&&F.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(F){this._clear(F),this._inputEl.focus()},_clearOnBlur:function(F){F.relatedTarget&&this._clear(F)},_onQueryResult:function(F){if(F.features.length){var Y=F.features[0];this._typeahead.selected=Y,this._inputEl.value=Y.place_name,this._onChange()}},_updateProximity:function(){if(this._map)if(this._map.getZoom()>9){var F=this._map.getCenter().wrap();this.setProximity({longitude:F.lng,latitude:F.lat})}else this.setProximity(null)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed","maplibregl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed","maplibregl-ctrl-geocoder--collapsed")},query:function(F){return this._geocode(F).then(this._onQueryResult),this},_renderError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error maplibre-gl-geocoder--error'>There was an error reaching the server</div>")},_renderNoResults:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>No results found</div>")},_renderMessage:function(F){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(F)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var F=this.options.language.split(",")[0],Z=T.language(F),Y=z.placeholder[Z];if(Y)return Y}return"Search"},_fitBoundsForMarkers:function(){if(!(this._typeahead.data.length<1)){var F=this._typeahead.data.filter(function(pe){return"string"!=typeof pe}).slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){var Y=m({},{padding:100},this.options.flyTo),ie=new this._maplibregl.LngLatBounds;F.forEach(function(pe){ie.extend(pe.geometry.coordinates)}),this._map.fitBounds(ie,Y)}return F.length>0&&this._maplibregl&&this._handleResultMarkers(F),this}},setInput:function(F){return this._inputEl.value=F,this._typeahead.selected=null,this._typeahead.clear(),F.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(F),this},setProximity:function(F){return this.options.proximity=F,this},getProximity:function(){return this.options.proximity},setRenderFunction:function(F){return F&&"function"==typeof F&&(this._typeahead.render=F),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(F){var Z=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=F||this.options.language||Z,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(F){return this.options.zoom=F,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(F){return this.options.flyTo=F,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(F){return this.placeholder=F||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(F){return this.options.bbox=F,this},getCountries:function(){return this.options.countries},setCountries:function(F){return this.options.countries=F,this},getTypes:function(){return this.options.types},setTypes:function(F){return this.options.types=F,this},getMinLength:function(){return this.options.minLength},setMinLength:function(F){return this.options.minLength=F,this._typeahead&&(this._typeahead.options.minLength=F),this},getLimit:function(){return this.options.limit},setLimit:function(F){return this.options.limit=F,this._typeahead&&(this._typeahead.options.limit=F),this},getFilter:function(){return this.options.filter},setFilter:function(F){return this.options.filter=F,this},setGeocoderApi:function(F){return this.geocoderApi=F,this},getGeocoderApi:function(){return this.geocoderApi},_handleMarker:function(F){if(this._map){this._removeMarker();var ie,Y=m({},{color:"#4668F2"},this.options.marker);if(this.mapMarker=new this._maplibregl.Marker(Y),this.options.popup){var se=m({},{},this.options.popup);ie=new this._maplibregl.Popup(se).setHTML(this.options.popupRender(F))}return F.center?(this.mapMarker.setLngLat(F.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(ie)):F.geometry&&F.geometry.type&&"Point"===F.geometry.type&&F.geometry.coordinates&&(this.mapMarker.setLngLat(F.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(ie)),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},_handleResultMarkers:function(F){if(this._map){this._removeResultMarkers();var Y=m({},{color:"#4668F2"},this.options.showResultMarkers);return F.forEach(function(ie){if(this.options.showResultMarkers&&this.options.showResultMarkers.element){var pe=this.options.showResultMarkers.element.cloneNode(!0);Y=m(Y,{element:pe})}var be,se=new this._maplibregl.Marker(m({},Y,{element:pe}));if(this.options.popup){var Ne=m({},{},this.options.popup);be=new this._maplibregl.Popup(Ne).setHTML(this.options.popupRender(ie))}ie.center?(se.setLngLat(ie.center).addTo(this._map),this.options.popup&&se.setPopup(be)):ie.geometry&&ie.geometry.type&&"Point"===ie.geometry.type&&ie.geometry.coordinates&&(se.setLngLat(ie.geometry.coordinates).addTo(this._map),this.options.popup&&se.setPopup(be)),this.resultMarkers.push(se)}.bind(this)),this}},_removeResultMarkers:function(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(F){F.remove()}),this.resultMarkers=[])},on:function(F,Z){return this._eventEmitter.on(F,Z),this},off:function(F,Z){return this._eventEmitter.removeListener(F,Z),this}},Ae.exports=D},5765:Ae=>{"use strict";Ae.exports={placeholder:{de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05dc\u05d7\u05e4\u05e9",ja:"\u30b5\u30fc\u30c1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041f\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641c\u7d22",cs:"Vyhled\xe1v\xe1n\xed",hu:"Keres\xe9s",ka:"\u10eb\u10d8\u10d4\u10d1\u10d0",nb:"S\xf8ke",sk:"Vyh\u013ead\xe1vanie",th:"\u0e04\u0e49\u0e19\u0e2b\u0e32",fi:"Hae",is:"Leita",ko:"\uc218\uc0c9",pl:"Szukaj",sl:"Iskanje",fa:"\u062c\u0633\u062a\u062c\u0648",ru:"\u041f\u043e\u0438\u0441\u043a"}}},2919:(Ae,J,U)=>{"use strict";function V(e){return"function"==typeof e}function X(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const m=X(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function q(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class G{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(V(r))try{r()}catch(o){t=o instanceof m?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{D(o)}catch(s){t=t??[],s instanceof m?t=[...t,...s.errors]:t.push(s)}}if(t)throw new m(t)}}add(t){var n;if(t&&t!==this)if(this.closed)D(t);else{if(t instanceof G){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&q(n,t)}remove(t){const{_finalizers:n}=this;n&&q(n,t),t instanceof G&&t._removeParent(this)}}G.EMPTY=(()=>{const e=new G;return e.closed=!0,e})();const z=G.EMPTY;function T(e){return e instanceof G||e&&"closed"in e&&V(e.remove)&&V(e.add)&&V(e.unsubscribe)}function D(e){V(e)?e():e.unsubscribe()}const F={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Z={setTimeout(e,t,...n){const{delegate:r}=Z;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=Z;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Y(e){Z.setTimeout(()=>{const{onUnhandledError:t}=F;if(!t)throw e;t(e)})}function ie(){}const pe=Me("C",void 0,void 0);function Me(e,t,n){return{kind:e,value:t,error:n}}let Ne=null;function Je(e){if(F.useDeprecatedSynchronousErrorHandling){const t=!Ne;if(t&&(Ne={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=Ne;if(Ne=null,n)throw r}}else e()}class Se extends G{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,T(t)&&t.add(this)):this.destination=j}static create(t,n,r){return new Ue(t,n,r)}next(t){this.isStopped?B(function be(e){return Me("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?B(function se(e){return Me("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?B(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ke=Function.prototype.bind;function nt(e,t){return Ke.call(e,t)}class It{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){A(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){A(r)}else A(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){A(n)}}}class Ue extends Se{constructor(t,n,r){let i;if(super(),V(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&F.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&nt(t.next,o),error:t.error&&nt(t.error,o),complete:t.complete&&nt(t.complete,o)}):i=t}this.destination=new It(i)}}function A(e){F.useDeprecatedSynchronousErrorHandling?function je(e){F.useDeprecatedSynchronousErrorHandling&&Ne&&(Ne.errorThrown=!0,Ne.error=e)}(e):Y(e)}function B(e,t){const{onStoppedNotification:n}=F;n&&Z.setTimeout(()=>n(e,t))}const j={closed:!0,next:ie,error:function O(e){throw e},complete:ie},ee="function"==typeof Symbol&&Symbol.observable||"@@observable";function W(e){return e}function Ze(e){return 0===e.length?W:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}let lt=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function bt(e){return e&&e instanceof Se||function wt(e){return e&&V(e.next)&&V(e.error)&&V(e.complete)}(e)&&T(e)}(n)?n:new Ue(n,r,i);return Je(()=>{const{operator:s,source:l}=this;o.add(s?s.call(o,l):l?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=we(r))((i,o)=>{const s=new Ue({next:l=>{try{n(l)}catch(g){o(g),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[ee](){return this}pipe(...n){return Ze(n)(this)}toPromise(n){return new(n=we(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function we(e){var t;return null!==(t=e??F.Promise)&&void 0!==t?t:Promise}const Ye=X(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let xt=(()=>{class e extends lt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new yn(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Ye}next(n){Je(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Je(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Je(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?z:(this.currentObservers=null,o.push(n),new G(()=>{this.currentObservers=null,q(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new lt;return n.source=this,n}}return e.create=(t,n)=>new yn(t,n),e})();class yn extends xt{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:z}}function Bt(e){return V(e?.lift)}function bn(e){return t=>{if(Bt(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ct(e,t,n,r,i){return new xn(e,t,n,r,i)}class xn extends Se{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(l){try{n(l)}catch(g){t.error(g)}}:super._next,this._error=i?function(l){try{i(l)}catch(g){t.error(g)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function pn(e,t){return bn((n,r)=>{let i=0;n.subscribe(Ct(r,o=>{r.next(e.call(t,o,i++))}))})}var Xn=function(e,t){return(Xn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])})(e,t)};function Zt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Xn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ce=function(){return Ce=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},Ce.apply(this,arguments)};function Vn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Wt(e,t,n,r){return new(n||(n=Promise))(function(o,s){function l(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(l,g)}d((r=r.apply(e,t||[])).next())})}function Lt(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}function si(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function $r(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function Do(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function Oa(e){return this instanceof Oa?(this.v=e,this):new Oa(e)}function ps(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(b){r[b]&&(i[b]=function(I){return new Promise(function(k,R){o.push([b,I,k,R])>1||l(b,I)})})}function l(b,I){try{!function g(b){b.value instanceof Oa?Promise.resolve(b.value.v).then(d,_):x(o[0][2],b)}(r[b](I))}catch(k){x(o[0][3],k)}}function d(b){l("next",b)}function _(b){l("throw",b)}function x(b,I){b(I),o.shift(),o.length&&l(o[0][0],o[0][1])}}const bu=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Us(e){return V(e?.then)}function Ao(e){return V(e[ee])}function ms(e){return Symbol.asyncIterator&&V(e?.[Symbol.asyncIterator])}function Yr(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Br=function tu(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function oe(e){return V(e?.[Br])}function ue(e){return ps(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield Oa(n.read());if(i)return yield Oa(void 0);yield yield Oa(r)}}finally{n.releaseLock()}})}function fe(e){return V(e?.getReader)}function ve(e){if(e instanceof lt)return e;if(null!=e){if(Ao(e))return function De(e){return new lt(t=>{const n=e[ee]();if(V(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(bu(e))return function $e(e){return new lt(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(Us(e))return function Xe(e){return new lt(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Y)})}(e);if(ms(e))return Ee(e);if(oe(e))return function He(e){return new lt(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(fe(e))return function Fe(e){return Ee(ue(e))}(e)}throw Yr(e)}function Ee(e){return new lt(t=>{(function Mt(e,t){var n,r,i,o;return Wt(this,void 0,void 0,function*(){try{for(n=function ma(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=si(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(l,g){!function i(o,s,l,g){Promise.resolve(g).then(function(d){o({value:d,done:l})},s)}(l,g,(s=e[o](s)).done,s.value)})}}}(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function Ft(e,t,n,r=0,i=!1){const o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function Et(e,t,n=1/0){return V(t)?Et((r,i)=>pn((o,s)=>t(r,o,i,s))(ve(e(r,i))),n):("number"==typeof t&&(n=t),bn((r,i)=>function ct(e,t,n,r,i,o,s,l){const g=[];let d=0,_=0,x=!1;const b=()=>{x&&!g.length&&!d&&t.complete()},I=R=>d<r?k(R):g.push(R),k=R=>{o&&t.next(R),d++;let xe=!1;ve(n(R,_++)).subscribe(Ct(t,ke=>{i?.(ke),o?I(ke):t.next(ke)},()=>{xe=!0},void 0,()=>{if(xe)try{for(d--;g.length&&d<r;){const ke=g.shift();s?Ft(t,s,()=>k(ke)):k(ke)}b()}catch(ke){t.error(ke)}}))};return e.subscribe(Ct(t,I,()=>{x=!0,b()})),()=>{l?.()}}(r,i,e,n)))}function Jt(e=1/0){return Et(W,e)}const Kt=new lt(e=>e.complete());function Tt(e){return e[e.length-1]}function jn(e){return function Ut(e){return e&&V(e.schedule)}(Tt(e))?e.pop():void 0}function ni(e,t=0){return bn((n,r)=>{n.subscribe(Ct(r,i=>Ft(r,e,()=>r.next(i),t),()=>Ft(r,e,()=>r.complete(),t),i=>Ft(r,e,()=>r.error(i),t)))})}function En(e,t=0){return bn((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function xi(e,t){if(!e)throw new Error("Iterable cannot be null");return new lt(n=>{Ft(n,t,()=>{const r=e[Symbol.asyncIterator]();Ft(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Oi(e,t){return t?function Mn(e,t){if(null!=e){if(Ao(e))return function ui(e,t){return ve(e).pipe(En(t),ni(t))}(e,t);if(bu(e))return function Ir(e,t){return new lt(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(Us(e))return function _i(e,t){return ve(e).pipe(En(t),ni(t))}(e,t);if(ms(e))return xi(e,t);if(oe(e))return function Xr(e,t){return new lt(n=>{let r;return Ft(n,t,()=>{r=e[Br](),Ft(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>V(r?.return)&&r.return()})}(e,t);if(fe(e))return function Hr(e,t){return xi(ue(e),t)}(e,t)}throw Yr(e)}(e,t):ve(e)}function qo(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new Ue({next:()=>{r.unsubscribe(),e()}});return t(...n).subscribe(r)}function or(e){for(let t in e)if(e[t]===or)return t;throw Error("Could not find renamed property on target object.")}function jr(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(jr).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function gs(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const Ui=or({__forward_ref__:or});function La(e){return e.__forward_ref__=La,e.toString=function(){return jr(this())},e}function Tn(e){return function ri(e){return"function"==typeof e&&e.hasOwnProperty(Ui)&&e.__forward_ref__===La}(e)?e():e}class un extends Error{constructor(t,n){super(function Ro(e,t){return`NG0${Math.abs(e)}${t?": "+t.trim():""}`}(t,n)),this.code=t}}function Qr(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function Wn(e){return"string"==typeof e?e:null==e?"":String(e)}(e)}function Ve(e,t){throw new un(-201,!1)}function Qt(e,t){null==e&&function On(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function Zn(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Qn(e){return{providers:e.providers||[],imports:e.imports||[]}}function Ji(e){return Vi(e,at)||Vi(e,_n)}function Vi(e,t){return e.hasOwnProperty(t)?e[t]:null}function Re(e){return e&&(e.hasOwnProperty(Nt)||e.hasOwnProperty(bi))?e[Nt]:null}const at=or({\u0275prov:or}),Nt=or({\u0275inj:or}),_n=or({ngInjectableDef:or}),bi=or({ngInjectorDef:or});var qt=(()=>((qt=qt||{})[qt.Default=0]="Default",qt[qt.Host=1]="Host",qt[qt.Self=2]="Self",qt[qt.SkipSelf=4]="SkipSelf",qt[qt.Optional=8]="Optional",qt))();let Ei;function gi(e){const t=Ei;return Ei=e,t}function ii(e,t,n){const r=Ji(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&qt.Optional?null:void 0!==t?t:void Ve(jr(e))}function qi(e){return{toString:e}.toString()}var li=(()=>((li=li||{})[li.OnPush=0]="OnPush",li[li.Default=1]="Default",li))(),Yi=(()=>{return(e=Yi||(Yi={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",Yi;var e})();const cr=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Jo={},Tr=[],Vs=or({\u0275cmp:or}),nu=or({\u0275dir:or}),Gs=or({\u0275pipe:or}),nc=or({\u0275mod:or}),Ur=or({\u0275fac:or}),ca=or({__NG_ELEMENT_ID__:or});let ys=0;function Rs(e){return qi(()=>{const n=!0===e.standalone,r={},i={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===li.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||Tr,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Yi.Emulated,id:"c"+ys++,styles:e.styles||Tr,_:null,setInput:null,schemas:e.schemas||null,tView:null},o=e.dependencies,s=e.features;return i.inputs=wu(e.inputs,r),i.outputs=wu(e.outputs),s&&s.forEach(l=>l(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(Hs).filter(Mc):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(Eo).filter(Mc):null,i})}function Hs(e){return ci(e)||lo(e)}function Mc(e){return null!==e}const rc={};function jo(e){return qi(()=>{const t={type:e.type,bootstrap:e.bootstrap||Tr,declarations:e.declarations||Tr,imports:e.imports||Tr,exports:e.exports||Tr,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(rc[e.id]=e.type),t})}function wu(e,t){if(null==e)return Jo;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}const Ko=Rs;function ci(e){return e[Vs]||null}function lo(e){return e[nu]||null}function Eo(e){return e[Gs]||null}function Wi(e,t){const n=e[nc]||null;if(!n&&!0===t)throw new Error(`Type ${jr(e)} does not have '\u0275mod' property.`);return n}function ho(e){return Array.isArray(e)&&"object"==typeof e[1]}function ba(e){return Array.isArray(e)&&!0===e[1]}function Il(e){return 0!=(8&e.flags)}function Cu(e){return 2==(2&e.flags)}function Rr(e){return null!==e.template}function ti(e){return 0!=(256&e[2])}function bs(e,t){return e.hasOwnProperty(Ur)?e[Ur]:null}class ws{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function za(e){return e.type.prototype.ngOnChanges&&(e.setInput=Td),fn}function fn(){const e=Ms(this),t=e?.current;if(t){const n=e.previous;if(n===Jo)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function Td(e,t,n,r){const i=Ms(e)||function es(e,t){return e[Nc]=t}(e,{previous:Jo,current:null}),o=i.current||(i.current={}),s=i.previous,l=this.declaredInputs[n],g=s[l];o[l]=new ws(g&&g.currentValue,t,s===Jo),e[r]=t}const Nc="__ngSimpleChanges__";function Ms(e){return e[Nc]||null}function Ti(e){for(;Array.isArray(e);)e=e[0];return e}function po(e,t){return Ti(t[e.index])}function Co(e,t){const n=t[e];return ho(n)?n:n[0]}function ns(e){return 64==(64&e[2])}function Yt(e,t){return null==t?null:e[t]}function Un(e){e[18]=0}function Ba(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const Jn={lFrame:ge(null),bindingsEnabled:!0};function Pi(){return Jn.bindingsEnabled}function zt(){return Jn.lFrame.lView}function Lr(){return Jn.lFrame.tView}function ro(){let e=Tu();for(;null!==e&&64===e.type;)e=e.parent;return e}function Tu(){return Jn.lFrame.currentTNode}function Cs(e,t){const n=Jn.lFrame;n.currentTNode=e,n.isParent=t}function kc(){return Jn.lFrame.isParent}function f(e,t){const n=Jn.lFrame;n.bindingIndex=n.bindingRootIndex=e,h(t)}function h(e){Jn.lFrame.currentDirectiveIndex=e}function P(e){Jn.lFrame.currentQueryIndex=e}function M(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function H(e,t,n){if(n&qt.SkipSelf){let i=t,o=e;for(;!(i=i.parent,null!==i||n&qt.Host||(i=M(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;t=i,e=o}const r=Jn.lFrame=ae();return r.currentTNode=t,r.lView=e,!0}function te(e){const t=ae(),n=e[1];Jn.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function ae(){const e=Jn.lFrame,t=null===e?null:e.child;return null===t?ge(e):t}function ge(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function _e(){const e=Jn.lFrame;return Jn.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const ye=_e;function Le(){const e=_e();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function ze(e){Jn.lFrame.selectedIndex=e}function kt(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:l,ngAfterViewInit:g,ngAfterViewChecked:d,ngOnDestroy:_}=o;s&&(e.contentHooks||(e.contentHooks=[])).push(-n,s),l&&((e.contentHooks||(e.contentHooks=[])).push(n,l),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,l)),g&&(e.viewHooks||(e.viewHooks=[])).push(-n,g),d&&((e.viewHooks||(e.viewHooks=[])).push(n,d),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,d)),null!=_&&(e.destroyHooks||(e.destroyHooks=[])).push(n,_)}}function tn(e,t,n){Cn(e,t,3,n)}function wn(e,t,n,r){(3&e[2])===n&&Cn(e,t,n,r)}function An(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Cn(e,t,n,r){const o=r??-1,s=t.length-1;let l=0;for(let g=void 0!==r?65535&e[18]:0;g<s;g++)if("number"==typeof t[g+1]){if(l=t[g],null!=r&&l>=r)break}else t[g]<0&&(e[18]+=65536),(l<o||-1==o)&&(Vr(e,n,t,g),e[18]=(4294901760&e[18])+g+2),g++}function Vr(e,t,n,r){const i=n[r]<0,o=n[r+1],l=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{o.call(l)}finally{}}}else try{o.call(l)}finally{}}class Kn{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function ta(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],l=n[r++];e.setAttribute(t,s,l,o)}else{const o=i,s=n[++r];No(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function Lo(e){return 3===e||4===e||6===e}function No(e){return 64===e.charCodeAt(0)}function Zi(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||fa(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function fa(e,t,n,r,i){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const l=e[o++];if("number"==typeof l){if(l===t){s=-1;break}if(l>t){s=o-1;break}}}for(;o<e.length;){const l=e[o];if("number"==typeof l)break;if(l===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function lu(e){return-1!==e}function ko(e){return 32767&e}function is(e,t){let n=function Ua(e){return e>>16}(e),r=t;for(;n>0;)r=r[15],n--;return r}let os=!0;function sc(e){const t=os;return os=e,t}let Bc=0;const as={};function Au(e,t){const n=cu(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,mo(r.data,e),mo(t,null),mo(r.blueprint,null));const i=Ts(e,t),o=e.injectorIndex;if(lu(i)){const s=ko(i),l=is(i,t),g=l[1].data;for(let d=0;d<8;d++)t[o+d]=l[s+d]|g[s+d]}return t[o+8]=i,o}function mo(e,t){e.push(0,0,0,0,0,0,0,0,t)}function cu(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Ts(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=dm(i),null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Ru(e,t,n){!function Du(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ca)&&(r=n[ca]),null==r&&(r=n[ca]=Bc++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function io(e,t,n){if(n&qt.Optional)return e;Ve()}function Ea(e,t,n,r){if(n&qt.Optional&&void 0===r&&(r=null),0==(n&(qt.Self|qt.Host))){const i=e[9],o=gi(void 0);try{return i?i.get(t,r,n&qt.Optional):ii(t,r,n&qt.Optional)}finally{gi(o)}}return io(r,0,n)}function uc(e,t,n,r=qt.Default,i){if(null!==e){if(1024&t[2]){const s=function x0(e,t,n,r,i){let o=e,s=t;for(;null!==o&&null!==s&&1024&s[2]&&!(256&s[2]);){const l=jc(o,s,n,r|qt.Self,as);if(l!==as)return l;let g=o.parent;if(!g){const d=s[21];if(d){const _=d.get(n,as,r);if(_!==as)return _}g=dm(s),s=s[15]}o=g}return i}(e,t,n,r,as);if(s!==as)return s}const o=jc(e,t,n,r,as);if(o!==as)return o}return Ea(t,n,r,i)}function jc(e,t,n,r,i){const o=function Mh(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(ca)?e[ca]:void 0;return"number"==typeof t?t>=0?255&t:cm:t}(n);if("function"==typeof o){if(!H(t,e,r))return r&qt.Host?io(i,0,r):Ea(t,n,r,i);try{const s=o(r);if(null!=s||r&qt.Optional)return s;Ve()}finally{ye()}}else if("number"==typeof o){let s=null,l=cu(e,t),g=-1,d=r&qt.Host?t[16][6]:null;for((-1===l||r&qt.SkipSelf)&&(g=-1===l?Ts(e,t):t[l+8],-1!==g&&cc(r,!1)?(s=t[1],l=ko(g),t=is(g,t)):l=-1);-1!==l;){const _=t[1];if(lc(o,l,_.data)){const x=lm(l,t,n,s,r,d);if(x!==as)return x}g=t[l+8],-1!==g&&cc(r,t[1].data[l+8]===d)&&lc(o,l,t)?(s=_,l=ko(g),t=is(g,t)):l=-1}}return i}function lm(e,t,n,r,i,o){const s=t[1],l=s.data[e+8],_=function Ol(e,t,n,r,i){const o=e.providerIndexes,s=t.data,l=1048575&o,g=e.directiveStart,_=o>>20,b=i?l+_:e.directiveEnd;for(let I=r?l:l+_;I<b;I++){const k=s[I];if(I<g&&n===k||I>=g&&k.type===n)return I}if(i){const I=s[g];if(I&&Rr(I)&&I.type===n)return g}return null}(l,s,n,null==r?Cu(l)&&os:r!=s&&0!=(3&l.type),i&qt.Host&&o===l);return null!==_?sl(t,s,_,l):as}function sl(e,t,n,r){let i=e[n];const o=t.data;if(function br(e){return e instanceof Kn}(i)){const s=i;s.resolving&&function L(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new un(-200,`Circular dependency in DI detected for ${e}${n}`)}(Qr(o[n]));const l=sc(s.canSeeViewProviders);s.resolving=!0;const g=s.injectImpl?gi(s.injectImpl):null;H(e,r,qt.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function $t(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const s=za(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{null!==g&&gi(g),sc(l),s.resolving=!1,ye()}}return i}function lc(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function cc(e,t){return!(e&qt.Self||e&qt.Host&&t)}class Uc{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return uc(this._tNode,this._lView,t,r,n)}}function cm(){return new Uc(ro(),zt())}function dm(e){const t=e[1],n=t.type;return 2===n?t.declTNode:1===n?e[6]:null}const Ad="__parameters__";function Ll(e,t,n){return qi(()=>{const r=function fm(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return l.annotation=s,l;function l(g,d,_){const x=g.hasOwnProperty(Ad)?g[Ad]:Object.defineProperty(g,Ad,{value:[]})[Ad];for(;x.length<=_;)x.push(null);return(x[_]=x[_]||[]).push(s),g}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class Pr{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Zn({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function du(e,t){e.forEach(n=>Array.isArray(n)?du(n,t):t(n))}function hm(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function wf(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const Sf={},gm="__NG_DI_FLAG__",kl="ngTempTokenPath",ym=/\n/gm,Mu="__source";let If;function Od(e){const t=If;return If=e,t}function M0(e,t=qt.Default){if(void 0===If)throw new un(-203,!1);return null===If?ii(e,void 0,t):If.get(e,t&qt.Optional?null:void 0,t)}function tr(e,t=qt.Default){return(function Ki(){return Ei}()||M0)(Tn(e),t)}function na(e,t=qt.Default){return"number"!=typeof t&&(t=0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)),tr(e,t)}function _m(e){const t=[];for(let n=0;n<e.length;n++){const r=Tn(e[n]);if(Array.isArray(r)){if(0===r.length)throw new un(900,!1);let i,o=qt.Default;for(let s=0;s<r.length;s++){const l=r[s],g=O0(l);"number"==typeof g?-1===g?i=l.token:o|=g:i=l}t.push(tr(i,o))}else t.push(tr(r))}return t}function Tf(e,t){return e[gm]=t,e.prototype[gm]=t,e}function O0(e){return e[gm]}const Ld=Tf(Ll("Optional"),8),Pf=Tf(Ll("SkipSelf"),4);let Sm;const Hh=new Pr("ENVIRONMENT_INITIALIZER"),km=new Pr("INJECTOR",-1),Fm=new Pr("INJECTOR_DEF_TYPES");class Ff{get(t,n=Sf){if(n===Sf){const r=new Error(`NullInjectorError: No provider for ${jr(t)}!`);throw r.name="NullInjectorError",r}return n}}function Kc(...e){return{\u0275providers:$h(0,e)}}function $h(e,...t){const n=[],r=new Set;let i;return du(t,o=>{const s=o;qh(s,n,[],r)&&(i||(i=[]),i.push(s))}),void 0!==i&&Yc(i,n),n}function Yc(e,t){for(let n=0;n<e.length;n++){const{providers:i}=e[n];du(i,o=>{t.push(o)})}}function qh(e,t,n,r){if(!(e=Tn(e)))return!1;let i=null,o=Re(e);const s=!o&&ci(e);if(o||s){if(s&&!s.standalone)return!1;i=e}else{const g=e.ngModule;if(o=Re(g),!o)return!1;i=g}const l=r.has(i);if(s){if(l)return!1;if(r.add(i),s.dependencies){const g="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const d of g)qh(d,t,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!l){let d;r.add(i);try{du(o.imports,_=>{qh(_,t,n,r)&&(d||(d=[]),d.push(_))})}finally{}void 0!==d&&Yc(d,t)}if(!l){const d=bs(i)||(()=>new i);t.push({provide:i,useFactory:d,deps:Tr},{provide:Fm,useValue:i,multi:!0},{provide:Hh,useValue:()=>tr(i),multi:!0})}const g=o.providers;null==g||l||du(g,_=>{t.push(_)})}}return i!==e&&void 0!==e.providers}const Hi=or({provide:String,useValue:or});function Wh(e){return null!==e&&"object"==typeof e&&Hi in e}function vc(e){return"function"==typeof e}const zf=new Pr("Set Injector scope."),cl={},Xc={};let Zh;function co(){return void 0===Zh&&(Zh=new Ff),Zh}class Ou{}class dl extends Ou{constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,fl(t,s=>this.processProvider(s)),this.records.set(km,Ks(void 0,this)),i.has("environment")&&this.records.set(Ou,Ks(void 0,this));const o=this.records.get(zf);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Fm.multi,Tr,qt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const n=Od(this),r=gi(void 0);try{return t()}finally{Od(n),gi(r)}}get(t,n=Sf,r=qt.Default){this.assertNotDestroyed();const i=Od(this),o=gi(void 0);try{if(!(r&qt.SkipSelf)){let l=this.records.get(t);if(void 0===l){const g=function eb(e){return"function"==typeof e||"object"==typeof e&&e instanceof Pr}(t)&&Ji(t);l=g&&this.injectableDefInScope(g)?Ks(jd(t),cl):null,this.records.set(t,l)}if(null!=l)return this.hydrate(t,l)}return(r&qt.Self?co():this.parent).get(t,n=r&qt.Optional&&n===Sf?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[kl]=s[kl]||[]).unshift(jr(t)),i)throw s;return function fy(e,t,n,r){const i=e[kl];throw t[Mu]&&i.unshift(t[Mu]),e.message=function ss(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=jr(t);if(Array.isArray(t))i=t.map(jr).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let l=t[s];o.push(s+":"+("string"==typeof l?JSON.stringify(l):jr(l)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(ym,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[kl]=null,e}(s,t,"R3InjectorError",this.source)}throw s}finally{gi(o),Od(i)}}resolveInjectorInitializers(){const t=Od(this),n=gi(void 0);try{const r=this.get(Hh.multi,Tr,qt.Self);for(const i of r)i()}finally{Od(t),gi(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(jr(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new un(205,!1)}processProvider(t){let n=vc(t=Tn(t))?t:Tn(t&&t.provide);const r=function jm(e){return Wh(e)?Ks(void 0,e.useValue):Ks(function Qc(e,t,n){let r;if(vc(e)){const i=Tn(e);return bs(i)||jd(i)}if(Wh(e))r=()=>Tn(e.useValue);else if(function Bm(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(..._m(e.deps||[]));else if(function zm(e){return!(!e||!e.useExisting)}(e))r=()=>tr(Tn(e.useExisting));else{const i=Tn(e&&(e.useClass||e.provide));if(!function Oy(e){return!!e.deps}(e))return bs(i)||jd(i);r=()=>new i(..._m(e.deps))}return r}(e),cl)}(t);if(vc(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Ks(void 0,cl,!0),i.factory=()=>_m(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===cl&&(n.value=Xc,n.value=n.factory()),"object"==typeof n.value&&n.value&&function Ly(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=Tn(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function jd(e){const t=Ji(e),n=null!==t?t.factory:bs(e);if(null!==n)return n;if(e instanceof Pr)throw new un(204,!1);if(e instanceof Function)return function Jh(e){const t=e.length;if(t>0)throw function Nl(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new un(204,!1);const n=function ga(e){const t=e&&(e[at]||e[_n]);if(t){const n=function Gi(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new un(204,!1)}function Ks(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function ra(e){return!!e.\u0275providers}function fl(e,t){for(const n of e)Array.isArray(n)?fl(n,t):ra(n)?fl(n.\u0275providers,t):t(n)}class a{}class w{resolveComponentFactory(t){throw function u(e){const t=Error(`No component factory found for ${jr(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let E=(()=>{class e{}return e.NULL=new w,e})();function C(){return N(ro(),zt())}function N(e,t){return new $(po(e,t))}let $=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=C,e})();class re{}let Te=(()=>{class e{}return e.\u0275prov=Zn({token:e,providedIn:"root",factory:()=>null}),e})();class Pe{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const We=new Pe("14.1.1"),Be={};function Ni(e){return e.ngOriginalError}class ki{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Ni(t);for(;n&&Ni(n);)n=Ni(n);return n||null}}const ao=new Map;let oa=0;const aa="__ngContext__";function ir(e,t){ho(t)?(e[aa]=t[20],function Si(e){ao.set(e[20],e)}(t)):e[aa]=t}function Ys(e){const t=e[aa];return"number"==typeof t?function di(e){return ao.get(e)||null}(t):t||null}function Ds(e){const t=Ys(e);return t?ho(t)?t:t.lView:null}const Kh=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(cr))();function ls(e){return e instanceof Function?e():e}var $a=(()=>(($a=$a||{})[$a.Important=1]="Important",$a[$a.DashCase=2]="DashCase",$a))();function Hd(e,t){return undefined(e,t)}function _c(e){const t=e[3];return ba(t)?t[3]:t}function bc(e){return wc(e[13])}function od(e){return wc(e[4])}function wc(e){for(;null!==e&&!ba(e);)e=e[4];return e}function Ku(e,t,n,r,i){if(null!=r){let o,s=!1;ba(r)?o=r:ho(r)&&(s=!0,r=r[0]);const l=Ti(r);0===e&&null!==n?null==i?tp(t,n,l):ml(t,n,l,i||null,!0):1===e&&null!==n?ml(t,n,l,i||null,!0):2===e?function ad(e,t,n){const r=Yf(e,t);r&&function Kf(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,l,s):3===e&&t.destroyNode(l),null!=o&&function Fy(e,t,n,r,i){const o=n[7];o!==Ti(n)&&Ku(t,e,r,o,i);for(let l=10;l<n.length;l++){const g=n[l];gl(g[1],g,e,t,r,o)}}(t,e,o,n,i)}}function Qh(e,t,n){return e.createElement(t,n)}function jl(e,t){const n=e[9],r=n.indexOf(t),i=t[3];512&t[2]&&(t[2]&=-513,Ba(i,-1)),n.splice(r,1)}function Zf(e,t){if(e.length<=10)return;const n=10+t,r=e[n];if(r){const i=r[17];null!==i&&i!==e&&jl(i,r),t>0&&(e[n-1][4]=r[4]);const o=wf(e,10+t);!function Hm(e,t){gl(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function $m(e,t){if(!(128&t[2])){const n=t[11];n.destroyNode&&gl(e,t,n,3,null,null),function bo(e){let t=e[13];if(!t)return Wd(e[1],e);for(;t;){let n=null;if(ho(t))n=t[13];else{const r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)ho(t)&&Wd(t[1],t),t=t[3];null===t&&(t=e),ho(t)&&Wd(t[1],t),n=t&&t[4]}t=n}}(t)}}function Wd(e,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function ep(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof Kn)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const l=i[o[s]],g=o[s+1];try{g.call(l)}finally{}}else try{o.call(i)}finally{}}}}(e,t),function pl(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+1],l="function"==typeof s?s(t):Ti(t[s]),g=r[i=n[o+2]],d=n[o+3];"boolean"==typeof d?l.removeEventListener(n[o],g,d):d>=0?r[i=d]():r[i=-d].unsubscribe(),o+=2}else{const s=r[i=n[o+1]];n[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)(0,r[o])();t[7]=null}}(e,t),1===t[1].type&&t[11].destroy();const n=t[17];if(null!==n&&ba(t[3])){n!==t[3]&&jl(n,t);const r=t[19];null!==r&&r.detachView(e)}!function Gr(e){ao.delete(e[20])}(t)}}function Zd(e,t,n){return function Jf(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const i=e.data[r.directiveStart].encapsulation;if(i===Yi.None||i===Yi.Emulated)return null}return po(r,n)}(e,t.parent,n)}function ml(e,t,n,r,i){e.insertBefore(t,n,r,i)}function tp(e,t,n){e.appendChild(t,n)}function qm(e,t,n,r,i){null!==r?ml(e,t,n,r,i):tp(e,t,n)}function Yf(e,t){return e.parentNode(t)}let ks=function Zm(e,t,n){return 40&e.type?po(e,n):null};function hu(e,t,n,r){const i=Zd(e,r,t),o=t[11],l=function Wm(e,t,n){return ks(e,t,n)}(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let g=0;g<n.length;g++)qm(o,i,n[g],l,!1);else qm(o,i,n,l,!1)}function np(e,t){if(null!==t){const n=t.type;if(3&n)return po(t,e);if(4&n)return Ul(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return np(e,r);{const i=e[t.index];return ba(i)?Ul(-1,i):Ti(i)}}if(32&n)return Hd(t,e)()||Ti(e[t.index]);{const r=Km(e,t);return null!==r?Array.isArray(r)?r[0]:np(_c(e[16]),r):np(e,t.next)}}return null}function Km(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Ul(e,t){const n=10+e+1;if(n<t.length){const r=t[n],i=r[1].firstChild;if(null!==i)return np(r,i)}return t[7]}function xc(e,t,n,r,i,o,s){for(;null!=n;){const l=r[n.index],g=n.type;if(s&&0===t&&(l&&ir(Ti(l),r),n.flags|=4),64!=(64&n.flags))if(8&g)xc(e,t,n.child,r,i,o,!1),Ku(t,e,i,l,o);else if(32&g){const d=Hd(n,r);let _;for(;_=d();)Ku(t,e,i,_,o);Ku(t,e,i,l,o)}else 16&g?Ym(e,t,r,n,i,o):Ku(t,e,i,l,o);n=s?n.projectionNext:n.next}}function gl(e,t,n,r,i,o){xc(n,r,e.firstChild,t,i,o,!1)}function Ym(e,t,n,r,i,o){const s=n[16],g=s[6].projection[r.projection];if(Array.isArray(g))for(let d=0;d<g.length;d++)Ku(t,e,i,g[d],o);else xc(e,t,g,s[3],i,o,!0)}function Xm(e,t,n){e.setAttribute(t,"style",n)}function Xf(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function rp(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}const Qm="ng-template";function eg(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==rp(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function ip(e){return 4===e.type&&e.value!==Qm}function By(e,t,n){return t===(4!==e.type||n?e.value:Qm)}function tg(e,t,n){let r=4;const i=e.attrs||[],o=function Qf(e){for(let t=0;t<e.length;t++)if(Lo(e[t]))return t;return e.length}(i);let s=!1;for(let l=0;l<t.length;l++){const g=t[l];if("number"!=typeof g){if(!s)if(4&r){if(r=2|1&r,""!==g&&!By(e,g,n)||""===g&&1===t.length){if(Nu(r))return!1;s=!0}}else{const d=8&r?g:t[++l];if(8&r&&null!==e.attrs){if(!eg(e.attrs,d,n)){if(Nu(r))return!1;s=!0}continue}const x=jy(8&r?"class":g,i,ip(e),n);if(-1===x){if(Nu(r))return!1;s=!0;continue}if(""!==d){let b;b=x>o?"":i[x+1].toLowerCase();const I=8&r?b:null;if(I&&-1!==rp(I,d,0)||2&r&&d!==b){if(Nu(r))return!1;s=!0}}}}else{if(!s&&!Nu(r)&&!Nu(g))return!1;if(s&&Nu(g))continue;s=!1,r=g|1&r}}return Nu(r)||s}function Nu(e){return 0==(1&e)}function jy(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){const s=t[i];if(s===e)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let l=t[++i];for(;"string"==typeof l;)l=t[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function Vy(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function op(e,t,n=!1){for(let r=0;r<t.length;r++)if(tg(e,t[r],n))return!0;return!1}function Gy(e,t){return e?":not("+t.trim()+")":t}function Hy(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const l=e[++n];i+="["+s+(l.length>0?'="'+l+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Nu(s)&&(t+=Gy(o,i),i=""),r=s,o=o||!Nu(r);n++}return""!==i&&(t+=Gy(o,i)),t}const Nr={};function oE(e,t=null,n=null,r){const i=aE(e,t,n,r);return i.resolveInjectorInitializers(),i}function aE(e,t=null,n=null,r,i=new Set){const o=[n||Tr,Kc(e)];return r=r||("object"==typeof e?void 0:jr(e)),new dl(o,t||co(),r||null,i)}let Vl=(()=>{class e{static create(n,r){if(Array.isArray(n))return oE({name:""},r,n,"");{const i=n.name??"";return oE({name:i},n.parent,n.providers,i)}}}return e.THROW_IF_NOT_FOUND=Sf,e.NULL=new Ff,e.\u0275prov=Zn({token:e,providedIn:"any",factory:()=>tr(km)}),e.__NG_ELEMENT_ID__=-1,e})();function sr(e,t=qt.Default){const n=zt();return null===n?tr(e,t):uc(ro(),n,Tn(e),t)}function hb(){throw new Error("invalid")}function EE(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const s=e.data[o];P(i),s.contentQueries(2,t[o],o)}}}function Xy(e,t,n,r,i,o,s,l,g,d,_){const x=t.blueprint.slice();return x[0]=i,x[2]=76|r,(null!==_||e&&1024&e[2])&&(x[2]|=1024),Un(x),x[3]=x[15]=e,x[8]=n,x[10]=s||e&&e[10],x[11]=l||e&&e[11],x[12]=g||e&&e[12]||null,x[9]=d||e&&e[9]||null,x[6]=o,x[20]=function Mr(){return oa++}(),x[21]=_,x[16]=2==t.type?e[16]:x,x}function lp(e,t,n,r,i){let o=e.data[t];if(null===o)o=function Cb(e,t,n,r,i){const o=Tu(),s=kc(),g=e.data[t]=function cR(e,t,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=g),null!==o&&(s?null==o.child&&null!==g.parent&&(o.child=g):null===o.next&&(o.next=g)),g}(e,t,n,r,i),function Fc(){return Jn.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function Pu(){const e=Jn.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Cs(o,!0),o}function cp(e,t,n,r){if(0===n)return-1;const i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Qy(e,t,n){te(t);try{const r=e.viewQuery;null!==r&&Lb(1,r,n);const i=e.template;null!==i&&SE(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&EE(e,t),e.staticViewQueries&&Lb(2,e.viewQuery,n);const o=e.components;null!==o&&function aR(e,t){for(let n=0;n<t.length;n++)IR(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,Le()}}function rg(e,t,n,r){const i=t[2];if(128!=(128&i)){te(t);try{Un(t),function Is(e){return Jn.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&SE(e,t,n,2,r);const s=3==(3&i);if(s){const d=e.preOrderCheckHooks;null!==d&&tn(t,d,null)}else{const d=e.preOrderHooks;null!==d&&wn(t,d,0,null),An(t,0)}if(function SR(e){for(let t=bc(e);null!==t;t=od(t)){if(!t[2])continue;const n=t[9];for(let r=0;r<n.length;r++){const i=n[r],o=i[3];0==(512&i[2])&&Ba(o,1),i[2]|=512}}}(t),function ER(e){for(let t=bc(e);null!==t;t=od(t))for(let n=10;n<t.length;n++){const r=t[n],i=r[1];ns(r)&&rg(i,r,i.template,r[8])}}(t),null!==e.contentQueries&&EE(e,t),s){const d=e.contentCheckHooks;null!==d&&tn(t,d)}else{const d=e.contentHooks;null!==d&&wn(t,d,1),An(t,1)}!function iR(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)ze(~i);else{const o=i,s=n[++r],l=n[++r];f(s,o),l(2,t[o])}}}finally{ze(-1)}}(e,t);const l=e.components;null!==l&&function oR(e,t){for(let n=0;n<t.length;n++)CR(e,t[n])}(t,l);const g=e.viewQuery;if(null!==g&&Lb(2,g,r),s){const d=e.viewCheckHooks;null!==d&&tn(t,d)}else{const d=e.viewHooks;null!==d&&wn(t,d,2),An(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,Ba(t[3],-1))}finally{Le()}}}function sR(e,t,n,r){const i=t[10],s=function qu(e){return 4==(4&e[2])}(t);try{!s&&i.begin&&i.begin(),s&&Qy(e,t,r),rg(e,t,n,r)}finally{!s&&i.end&&i.end()}}function SE(e,t,n,r,i){const o=function Ie(){return Jn.lFrame.selectedIndex}(),s=2&r;try{ze(-1),s&&t.length>22&&function $y(e,t,n,r){if(!r)if(3==(3&t[2])){const o=e.preOrderCheckHooks;null!==o&&tn(t,o,n)}else{const o=e.preOrderHooks;null!==o&&wn(t,o,0,n)}ze(n)}(e,t,22,!1),n(r,i)}finally{ze(o)}}function IE(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Pb(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Pb(e,t,n,r,i,o,s,l,g,d){const _=22+r,x=_+i,b=function uR(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Nr);return n}(_,x),I="function"==typeof d?d():d;return b[1]={type:e,blueprint:b,template:n,queries:null,viewQuery:l,declTNode:t,data:b.slice().fill(null,_),bindingStartIndex:_,expandoStartIndex:x,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:g,consts:I,incompleteFirstPass:!1}}function PE(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function DE(e,t){const r=t.directiveEnd,i=e.data,o=t.attrs,s=[];let l=null,g=null;for(let d=t.directiveStart;d<r;d++){const _=i[d],x=_.inputs,b=null===o||ip(t)?null:xR(x,o);s.push(b),l=PE(x,d,l),g=PE(_.outputs,d,g)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=16),l.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=l,t.outputs=g}function RE(e,t,n,r,i,o){const s=o.hostBindings;if(s){let l=e.hostBindingOpCodes;null===l&&(l=e.hostBindingOpCodes=[]);const g=~t.index;(function pR(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(l)!=g&&l.push(g),l.push(r,i,s)}}function ME(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function OE(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function _R(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Rr(t)&&(n[""]=e)}}function LE(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function NE(e,t,n,r,i){e.data[r]=i;const o=i.factory||(i.factory=bs(i.type)),s=new Kn(o,Rr(i),sr);e.blueprint[r]=s,n[r]=s,RE(e,t,0,r,cp(e,n,i.hostVars,Nr),i)}function bR(e,t,n){const r=po(t,e),i=IE(n),o=e[10],s=ev(e,Xy(e,i,null,n.onPush?32:16,r,t,o,o.createRenderer(r,n),null,null,null));e[t.index]=s}function wR(e,t,n,r,i,o){const s=o[t];if(null!==s){const l=r.setInput;for(let g=0;g<s.length;){const d=s[g++],_=s[g++],x=s[g++];null!==l?r.setInput(n,x,d,_):n[_]=x}}}function xR(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function CR(e,t){const n=Co(t,e);if(ns(n)){const r=n[1];48&n[2]?rg(r,n,r.template,n[8]):n[5]>0&&Rb(n)}}function Rb(e){for(let r=bc(e);null!==r;r=od(r))for(let i=10;i<r.length;i++){const o=r[i];if(512&o[2]){const s=o[1];rg(s,o,s.template,o[8])}else o[5]>0&&Rb(o)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Co(n[r],e);ns(i)&&i[5]>0&&Rb(i)}}function IR(e,t){const n=Co(t,e),r=n[1];(function TR(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),Qy(r,n,n[8])}function ev(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Ob(e,t,n){const r=t[10];r.begin&&r.begin();try{rg(e,t,e.template,n)}catch(i){throw function VE(e,t){const n=e[9],r=n?n.get(ki,null):null;r&&r.handleError(t)}(t,i),i}finally{r.end&&r.end()}}function zE(e){!function FE(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=Ds(n);if(null!==r){const i=r[1];sR(i,r,i.template,n)}}}(e[8])}function Lb(e,t,n){P(0),t(e,n)}const DR=(()=>Promise.resolve(null))();function Nb(e,t,n,r,i){for(let o=0;o<n.length;){const s=n[o++],l=n[o++],g=t[s],d=e.data[s];null!==d.setInput?d.setInput(g,i,r,l):g[l]=i}}function tv(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const l=t[s];"number"==typeof l?o=l:1==o?i=gs(i,l):2==o&&(r=gs(r,l+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function nv(e,t,n,r,i=!1){for(;null!==n;){const o=t[n.index];if(null!==o&&r.push(Ti(o)),ba(o))for(let l=10;l<o.length;l++){const g=o[l],d=g[1].firstChild;null!==d&&nv(g[1],g,d,r)}const s=n.type;if(8&s)nv(e,t,n.child,r);else if(32&s){const l=Hd(n,t);let g;for(;g=l();)r.push(g)}else if(16&s){const l=Km(t,n);if(Array.isArray(l))r.push(...l);else{const g=_c(t[16]);nv(g[1],g,l,r,!0)}}n=i?n.projectionNext:n.next}return r}class ig{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return nv(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ba(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(Zf(t,r),wf(n,r))}this._attachedToViewContainer=!1}$m(this._lView[1],this._lView)}onDestroy(t){!function TE(e,t,n,r){const i=function BE(e){return e[7]||(e[7]=[])}(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&function jE(e){return e.cleanup||(e.cleanup=[])}(e).push(r,i.length-1))}(this._lView[1],this._lView,null,t)}markForCheck(){!function Mb(e){for(;e;){e[2]|=32;const t=_c(e);if(ti(e)&&!t)return e;e=t}return null}(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Ob(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new un(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Wf(e,t){gl(e,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new un(902,!1);this._appRef=t}}class AR extends ig{constructor(t){super(t),this._view=t}detectChanges(){zE(this._view)}checkNoChanges(){}get context(){return null}}class kb extends E{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=ci(t);return new og(n,this.ngModule)}}function GE(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class MR{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){const i=this.injector.get(t,Be,r);return i!==Be||n===Be?i:this.parentInjector.get(t,n,r)}}class og extends a{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function ib(e){return e.map(Hy).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return GE(this.componentDef.inputs)}get outputs(){return GE(this.componentDef.outputs)}create(t,n,r,i){let o=(i=i||this.ngModule)instanceof Ou?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new MR(t,o):t,l=s.get(re,null);if(null===l)throw new un(407,!1);const g=s.get(Te,null),d=l.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",x=r?function lR(e,t,n){return e.selectRootElement(t,n===Yi.ShadowDom)}(d,r,this.componentDef.encapsulation):Qh(l.createRenderer(null,this.componentDef),_,function RR(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(_)),b=this.componentDef.onPush?288:272,I=function FR(e,t){return{components:[],scheduler:e||Kh,clean:DR,playerHandler:t||null,flags:0}}(),k=Pb(0,null,null,1,0,null,null,null,null,null),R=Xy(null,k,I,b,null,null,l,d,g,s,null);let xe,ke;te(R);try{const ut=function NR(e,t,n,r,i,o){const s=n[1];n[22]=e;const g=lp(s,22,2,"#host",null),d=g.mergedAttrs=t.hostAttrs;null!==d&&(tv(g,d,!0),null!==e&&(ta(i,e,d),null!==g.classes&&Xf(i,e,g.classes),null!==g.styles&&Xm(i,e,g.styles)));const _=r.createRenderer(e,t),x=Xy(n,IE(t),null,t.onPush?32:16,n[22],g,r,_,o||null,null,null);return s.firstCreatePass&&(Ru(Au(g,n),s,t.type),OE(s,g),LE(g,n.length,1)),ev(n,x),n[22]=x}(x,this.componentDef,R,l,d);if(x)if(r)ta(d,x,["ng-version",We.full]);else{const{attrs:et,classes:Ot}=function ob(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!Nu(i))break;i=o}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);et&&ta(d,x,et),Ot&&Ot.length>0&&Xf(d,x,Ot.join(" "))}if(ke=function ts(e,t){return e.data[t]}(k,22),void 0!==n){const et=ke.projection=[];for(let Ot=0;Ot<this.ngContentSelectors.length;Ot++){const Gt=n[Ot];et.push(null!=Gt?Array.from(Gt):null)}}xe=function kR(e,t,n,r,i){const o=n[1],s=function hR(e,t,n){const r=ro();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),NE(e,r,t,cp(e,t,1,null),n),DE(e,r));const i=sl(t,e,r.directiveStart,r);ir(i,t);const o=po(r,t);return o&&ir(o,t),i}(o,n,t);if(r.components.push(s),e[8]=s,null!==i)for(const g of i)g(s,t);if(t.contentQueries){const g=ro();t.contentQueries(1,s,g.directiveStart)}const l=ro();return!o.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(ze(l.index),RE(n[1],l,0,l.directiveStart,l.directiveEnd,t),ME(t,s)),s}(ut,this.componentDef,R,I,[zR]),Qy(k,R,null)}finally{Le()}return new LR(this.componentType,xe,N(ke,R),R,ke)}}class LR extends class Ny{}{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new AR(i),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){const o=this._rootLView;Nb(o[1],o,i,t,n),function AE(e,t){const n=Co(t,e);16&n[2]||(n[2]|=32)}(o,this._tNode.index)}}get injector(){return new Uc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function zR(){const e=ro();kt(zt()[1],e)}function jb(e,t,n,r,i){const s=i?"class":"style";Nb(e,n,t.inputs[s],s,r)}function ov(e,t,n,r){const i=zt(),o=Lr(),s=22+e,l=i[11],g=i[s]=Qh(l,t,function Pt(){return Jn.lFrame.currentNamespace}()),d=o.firstCreatePass?function tM(e,t,n,r,i,o,s){const l=t.consts,d=lp(t,e,2,i,Yt(l,o));return function Db(e,t,n,r){let i=!1;if(Pi()){const o=function yR(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];op(n,s.selectors,!1)&&(i||(i=[]),Ru(Au(n,t),e,s.type),Rr(s)?(OE(e,n),i.unshift(s)):i.push(s))}return i}(e,t,n),s=null===r?null:{"":-1};if(null!==o){i=!0,LE(n,e.data.length,o.length);for(let _=0;_<o.length;_++){const x=o[_];x.providersResolver&&x.providersResolver(x)}let l=!1,g=!1,d=cp(e,t,o.length,null);for(let _=0;_<o.length;_++){const x=o[_];n.mergedAttrs=Zi(n.mergedAttrs,x.hostAttrs),NE(e,n,t,d,x),_R(d,x,s),null!==x.contentQueries&&(n.flags|=8),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(n.flags|=128);const b=x.type.prototype;!l&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),l=!0),!g&&(b.ngOnChanges||b.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),g=!0),d++}DE(e,n)}s&&function vR(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const o=n[t[i+1]];if(null==o)throw new un(-301,!1);r.push(t[i],o)}}}(n,r,s)}return n.mergedAttrs=Zi(n.mergedAttrs,n.attrs),i}(t,n,d,Yt(l,s)),null!==d.attrs&&tv(d,d.attrs,!1),null!==d.mergedAttrs&&tv(d,d.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,d),d}(s,o,i,0,t,n,r):o.data[s];Cs(d,!0);const _=d.mergedAttrs;null!==_&&ta(l,g,_);const x=d.classes;null!==x&&Xf(l,g,x);const b=d.styles;return null!==b&&Xm(l,g,b),64!=(64&d.flags)&&hu(o,i,g,d),0===function Js(){return Jn.lFrame.elementDepthCount}()&&ir(g,i),function um(){Jn.lFrame.elementDepthCount++}(),function yi(e){return 1==(1&e.flags)}(d)&&(function Ib(e,t,n){!Pi()||(function mR(e,t,n,r){const i=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||Au(n,t),ir(r,t);const s=n.initialInputs;for(let l=i;l<o;l++){const g=e.data[l],d=Rr(g);d&&bR(t,n,g);const _=sl(t,e,l,n);ir(_,t),null!==s&&wR(0,l-i,_,g,0,s),d&&(Co(n.index,t)[8]=_)}}(e,t,n,po(n,t)),128==(128&n.flags)&&function gR(e,t,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function p(){return Jn.lFrame.currentDirectiveIndex}();try{ze(o);for(let l=r;l<i;l++){const g=e.data[l],d=t[l];h(l),(null!==g.hostBindings||0!==g.hostVars||null!==g.hostAttrs)&&ME(g,d)}}finally{ze(-1),h(s)}}(e,t,n))}(o,i,d),function CE(e,t,n){if(Il(t)){const i=t.directiveEnd;for(let o=t.directiveStart;o<i;o++){const s=e.data[o];s.contentQueries&&s.contentQueries(1,n[o],o)}}}(o,d,i)),null!==r&&function Tb(e,t,n=po){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],l=-1===s?n(t,e):e[s];e[i++]=l}}}(i,d),ov}function ug(){let e=ro();kc()?function Dl(){Jn.lFrame.isParent=!1}():(e=e.parent,Cs(e,!1));const t=e;!function Wu(){Jn.lFrame.elementDepthCount--}();const n=Lr();return n.firstCreatePass&&(kt(n,e),Il(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function qn(e){return 0!=(16&e.flags)}(t)&&jb(n,t,zt(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function Ln(e){return 0!=(32&e.flags)}(t)&&jb(n,t,zt(),t.stylesWithoutHost,!1),ug}function av(e,t,n,r){return ov(e,t,n,r),ug(),av}function sv(e){return!!e&&"function"==typeof e.then}const iS=function rS(e){return!!e&&"function"==typeof e.subscribe};const xp="en-US";let nC=xp;class ih{}class PC{}class DC extends ih{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kb(this);const r=Wi(t);this._bootstrapComponents=ls(r.bootstrap),this._r3Injector=aE(t,n,[{provide:ih,useValue:this},{provide:E,useValue:this.componentFactoryResolver}],jr(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Xb extends PC{constructor(t){super(),this.moduleType=t}create(t){return new DC(this.moduleType,t)}}class W3 extends ih{constructor(t,n,r){super(),this.componentFactoryResolver=new kb(this),this.instance=null;const i=new dl([...t,{provide:ih,useValue:this},{provide:E,useValue:this.componentFactoryResolver}],n||co(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function pv(e,t,n=null){return new W3(e,t,n).injector}function ew(e){return t=>{setTimeout(e,void 0,t)}}const mu=class wO extends xt{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&"object"==typeof t){const g=t;i=g.next?.bind(g),o=g.error?.bind(g),s=g.complete?.bind(g)}this.__isAsync&&(o=ew(o),i&&(i=ew(i)),s&&(s=ew(s)));const l=super.subscribe({next:i,error:o,complete:s});return t instanceof G&&t.add(l),l}};let ql=(()=>{class e{}return e.__NG_ELEMENT_ID__=IO,e})();function IO(){return function GC(e,t){let n;const r=t[e.index];if(ba(r))n=r;else{let i;if(8&e.type)i=Ti(r);else{const o=t[11];i=o.createComment("");const s=po(e,t);ml(o,Yf(o,s),i,function ky(e,t){return e.nextSibling(t)}(o,s),!1)}t[e.index]=n=function kE(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}(r,t,i,e),ev(t,n)}return new UC(n,e,t)}(ro(),zt())}const TO=ql,UC=class extends TO{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return N(this._hostTNode,this._hostLView)}get injector(){return new Uc(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ts(this._hostTNode,this._hostLView);if(lu(t)){const n=is(t,this._hostLView),r=ko(t);return new Uc(n[1].data[r+8],n)}return new Uc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=VC(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=t.createEmbeddedView(n||{},o);return this.insert(s,i),s}createComponent(t,n,r,i,o){const s=t&&!function fc(e){return"function"==typeof e}(t);let l;if(s)l=n;else{const x=n||{};l=x.index,r=x.injector,i=x.projectableNodes,o=x.environmentInjector||x.ngModuleRef}const g=s?t:new og(ci(t)),d=r||this.parentInjector;if(!o&&null==g.ngModule){const b=(s?d:this.parentInjector).get(Ou,null);b&&(o=b)}const _=g.create(d,i,void 0,o);return this.insert(_.hostView,l),_}insert(t,n){const r=t._lView,i=r[1];if(function Pl(e){return ba(e[3])}(r)){const _=this.indexOf(t);if(-1!==_)this.detach(_);else{const x=r[3],b=new UC(x,x[6],x[3]);b.detach(b.indexOf(t))}}const o=this._adjustIndex(n),s=this._lContainer;!function Yu(e,t,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=t),r<o-10?(t[4]=n[i],hm(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;const s=t[17];null!==s&&n!==s&&function nb(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(s,t);const l=t[19];null!==l&&l.insertView(e),t[2]|=64}(i,r,s,o);const l=Ul(o,s),g=r[11],d=Yf(g,s[7]);return null!==d&&function tb(e,t,n,r,i,o){r[0]=i,r[6]=t,gl(e,r,n,1,i,o)}(i,s[6],g,r,d,l),t.attachToViewContainerRef(),hm(nw(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=VC(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=Zf(this._lContainer,n);r&&(wf(nw(this._lContainer),n),$m(r[1],r))}detach(t){const n=this._adjustIndex(t,-1),r=Zf(this._lContainer,n);return r&&null!=wf(nw(this._lContainer),n)?new ig(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function VC(e){return e[8]}function nw(e){return e[8]||(e[8]=[])}function yv(...e){}const vv=new Pr("Application Initializer");let _v=(()=>{class e{constructor(n){this.appInits=n,this.resolve=yv,this.reject=yv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(sv(o))n.push(o);else if(iS(o)){const s=new Promise((l,g)=>{o.subscribe({complete:l,error:g})});n.push(s)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(tr(vv,8))},e.\u0275prov=Zn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const yg=new Pr("AppId",{providedIn:"root",factory:function hI(){return`${mw()}${mw()}${mw()}`}});function mw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const pI=new Pr("Platform Initializer"),mI=new Pr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),gI=new Pr("appBootstrapListener");let rL=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Zn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const cd=new Pr("LocaleId",{providedIn:"root",factory:()=>na(cd,qt.Optional|qt.SkipSelf)||function iL(){return typeof $localize<"u"&&$localize.locale||xp}()});class aL{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let gw=(()=>{class e{compileModuleSync(n){return new Xb(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=ls(Wi(n).declarations).reduce((s,l)=>{const g=ci(l);return g&&s.push(new og(g)),s},[]);return new aL(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Zn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const lL=(()=>Promise.resolve(0))();function yw(e){typeof Zone>"u"?lL.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class qa{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new mu(!1),this.onMicrotaskEmpty=new mu(!1),this.onStable=new mu(!1),this.onError=new mu(!1),typeof Zone>"u")throw new un(908,!1);Zone.assertZonePatched();const i=this;if(i._nesting=0,i._outer=i._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const o=Zone.AsyncStackTaggingZoneSpec;i._inner=i._inner.fork(new o("Angular"))}Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function cL(){let e=cr.requestAnimationFrame,t=cr.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function hL(e){const t=()=>{!function fL(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(cr,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,_w(e),e.isCheckStableRunning=!0,vw(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),_w(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,l)=>{try{return _I(e),n.invokeTask(i,o,s,l)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),bI(e)}},onInvoke:(n,r,i,o,s,l,g)=>{try{return _I(e),n.invoke(i,o,s,l,g)}finally{e.shouldCoalesceRunChangeDetection&&t(),bI(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,_w(e),vw(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!qa.isInAngularZone())throw new un(909,!1)}static assertNotInAngularZone(){if(qa.isInAngularZone())throw new un(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,dL,yv,yv);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const dL={};function vw(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function _w(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function _I(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function bI(e){e._nesting--,vw(e)}class pL{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new mu,this.onMicrotaskEmpty=new mu,this.onStable=new mu,this.onError=new mu}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const wI=new Pr(""),bv=new Pr("");let xw,bw=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,xw||(function mL(e){xw=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qa.assertNotInAngularZone(),yw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())yw(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return e.\u0275fac=function(n){return new(n||e)(tr(qa),tr(ww),tr(bv))},e.\u0275prov=Zn({token:e,factory:e.\u0275fac}),e})(),ww=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return xw?.findTestabilityInTree(this,n,r)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Zn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),Qd=null;const xI=new Pr("AllowMultipleToken"),Ew=new Pr("PlatformDestroyListeners");class EI{constructor(t,n){this.name=t,this.token=n}}function CI(e,t,n=[]){const r=`Platform: ${t}`,i=new Pr(r);return(o=[])=>{let s=Sw();if(!s||s.injector.get(xI,!1)){const l=[...n,...o,{provide:i,useValue:!0}];e?e(l):function vL(e){if(Qd&&!Qd.get(xI,!1))throw new un(400,!1);Qd=e;const t=e.get(TI);(function SI(e){const t=e.get(pI,null);t&&t.forEach(n=>n())})(e)}(function II(e=[],t){return Vl.create({name:t,providers:[{provide:zf,useValue:"platform"},{provide:Ew,useValue:new Set([()=>Qd=null])},...e]})}(l,r))}return function bL(e){const t=Sw();if(!t)throw new un(401,!1);return t}()}}function Sw(){return Qd?.get(TI)??null}let TI=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function wL(e,t){let n;return n="noop"===e?new pL:("zone.js"===e?void 0:e)||new qa(t),n}(r?.ngZone,function PI(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:qa,useValue:i}];return i.run(()=>{const s=Vl.create({providers:o,parent:this.injector,name:n.moduleType.name}),l=n.create(s),g=l.injector.get(ki,null);if(!g)throw new un(402,!1);return i.runOutsideAngular(()=>{const d=i.onError.subscribe({next:_=>{g.handleError(_)}});l.onDestroy(()=>{xv(this._modules,l),d.unsubscribe()})}),function DI(e,t,n){try{const r=n();return sv(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(g,i,()=>{const d=l.injector.get(_v);return d.runInitializers(),d.donePromise.then(()=>(function rC(e){Qt(e,"Expected localeId to be defined"),"string"==typeof e&&(nC=e.toLowerCase().replace(/_/g,"-"))}(l.injector.get(cd,xp)||xp),this._moduleDoBootstrap(l),l))})})}bootstrapModule(n,r=[]){const i=AI({},r);return function gL(e,t,n){const r=new Xb(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(wv);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new un(403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new un(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Ew,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(tr(Vl))},e.\u0275prov=Zn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function AI(e,t){return Array.isArray(t)?t.reduce(AI,e):{...e,...t}}let wv=(()=>{class e{constructor(n,r,i){this._zone=n,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new lt(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),s=new lt(l=>{let g;this._zone.runOutsideAngular(()=>{g=this._zone.onStable.subscribe(()=>{qa.assertNotInAngularZone(),yw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{qa.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{g.unsubscribe(),d.unsubscribe()}});this.isStable=function er(...e){const t=jn(e),n=function ln(e,t){return"number"==typeof Tt(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?ve(r[0]):Jt(n)(Oi(r,t)):Kt}(o,s.pipe(function ua(e={}){const{connector:t=(()=>new xt),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let s,l,g,d=0,_=!1,x=!1;const b=()=>{l?.unsubscribe(),l=void 0},I=()=>{b(),s=g=void 0,_=x=!1},k=()=>{const R=s;I(),R?.unsubscribe()};return bn((R,xe)=>{d++,!x&&!_&&b();const ke=g=g??t();xe.add(()=>{d--,0===d&&!x&&!_&&(l=qo(k,i))}),ke.subscribe(xe),!s&&d>0&&(s=new Ue({next:ut=>ke.next(ut),error:ut=>{x=!0,b(),l=qo(I,n,ut),ke.error(ut)},complete:()=>{_=!0,b(),l=qo(I,r),ke.complete()}}),ve(R).subscribe(s))})(o)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof a;if(!this._injector.get(_v).done)throw!i&&function Cp(e){const t=ci(e)||lo(e)||Eo(e);return null!==t&&t.standalone}(n),new un(405,false);let s;s=i?n:this._injector.get(E).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const l=function yL(e){return e.isBoundToModule}(s)?void 0:this._injector.get(ih),d=s.create(Vl.NULL,[],r||s.selector,l),_=d.location.nativeElement,x=d.injector.get(wI,null);return x?.registerApplication(_),d.onDestroy(()=>{this.detachView(d.hostView),xv(this.components,d),x?.unregisterApplication(_)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new un(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;xv(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(gI,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>xv(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new un(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)(tr(qa),tr(Ou),tr(ki))},e.\u0275prov=Zn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function xv(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let MI=!0,Cw=(()=>{class e{}return e.__NG_ELEMENT_ID__=SL,e})();function SL(e){return function CL(e,t,n){if(Cu(e)&&!n){const r=Co(e.index,t);return new ig(r,r)}return 47&e.type?new ig(t[16],t):null}(ro(),zt(),16==(16&e))}const zL=CI(null,"core",[]);let BL=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(tr(wv))},e.\u0275mod=jo({type:e}),e.\u0275inj=Qn({}),e})(),Iv=null;function ef(){return Iv}const ku=new Pr("DocumentToken");let Aw=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Zn({token:e,factory:function(){return function GL(){return tr(GI)}()},providedIn:"platform"}),e})();const HL=new Pr("Location Initialized");let GI=(()=>{class e extends Aw{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ef().getBaseHref(this._doc)}onPopState(n){const r=ef().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=ef().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,r,i){HI()?this._history.pushState(n,r,i):this.location.hash=i}replaceState(n,r,i){HI()?this._history.replaceState(n,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return e.\u0275fac=function(n){return new(n||e)(tr(ku))},e.\u0275prov=Zn({token:e,factory:function(){return function $L(){return new GI(tr(ku))}()},providedIn:"platform"}),e})();function HI(){return!!window.history.pushState}function Rw(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function $I(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function fd(e){return e&&"?"!==e[0]?"?"+e:e}let ah=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Zn({token:e,factory:function(){return na(WI)},providedIn:"root"}),e})();const qI=new Pr("appBaseHref");let WI=(()=>{class e extends ah{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??na(ku).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Rw(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+fd(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+fd(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+fd(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(tr(Aw),tr(qI,8))},e.\u0275prov=Zn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),qL=(()=>{class e extends ah{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Rw(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+fd(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+fd(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(tr(Aw),tr(qI,8))},e.\u0275prov=Zn({token:e,factory:e.\u0275fac}),e})(),Mw=(()=>{class e{constructor(n){this._subject=new mu,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._baseHref=$I(ZI(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+fd(r))}normalize(n){return e.stripTrailingSlash(function ZL(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,ZI(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+fd(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+fd(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return e.normalizeQueryParams=fd,e.joinWithSlash=Rw,e.stripTrailingSlash=$I,e.\u0275fac=function(n){return new(n||e)(tr(ah))},e.\u0275prov=Zn({token:e,factory:function(){return function WL(){return new Mw(tr(ah))}()},providedIn:"root"}),e})();function ZI(e){return e.replace(/\/index.html$/,"")}let dk=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=jo({type:e}),e.\u0275inj=Qn({}),e})();let mk=(()=>{class e{}return e.\u0275prov=Zn({token:e,providedIn:"root",factory:()=>new gk(tr(ku),window)}),e})();class gk{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function yk(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=cT(this.window.history)||cT(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function cT(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class qw extends class _k extends class VL{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function UL(e){Iv||(Iv=e)}(new qw)}onAndCancel(t,n,r){return t.addEventListener(n,r,!1),()=>{t.removeEventListener(n,r,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function bk(){return wg=wg||document.querySelector("base"),wg?wg.getAttribute("href"):null}();return null==n?null:function wk(e){kv=kv||document.createElement("a"),kv.setAttribute("href",e);const t=kv.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){wg=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function RN(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}(document.cookie,t)}}let kv,wg=null;const dT=new Pr("TRANSITION_ID"),Ek=[{provide:vv,useFactory:function xk(e,t,n){return()=>{n.get(_v).donePromise.then(()=>{const r=ef(),i=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[dT,ku,Vl],multi:!0}];let Ck=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Zn({token:e,factory:e.\u0275fac}),e})();const Fv=new Pr("EventManagerPlugins");let zv=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(n))return this._eventNameToPlugin.set(n,s),s}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(tr(Fv),tr(qa))},e.\u0275prov=Zn({token:e,factory:e.\u0275fac}),e})();class fT{constructor(t){this._doc=t}addGlobalEventListener(t,n,r){const i=ef().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let hT=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Zn({token:e,factory:e.\u0275fac}),e})(),xg=(()=>{class e extends hT{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,i.push(r.appendChild(s))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(pT),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(pT))}}return e.\u0275fac=function(n){return new(n||e)(tr(ku))},e.\u0275prov=Zn({token:e,factory:e.\u0275fac}),e})();function pT(e){ef().remove(e)}const Ww={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Zw=/%COMP%/g;function Bv(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?Bv(e,i,n):(i=i.replace(Zw,e),n.push(i))}return n}function yT(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Jw=(()=>{class e{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Kw(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case Yi.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Rk(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case Yi.ShadowDom:return new Mk(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=Bv(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(tr(zv),tr(xg),tr(yg))},e.\u0275prov=Zn({token:e,factory:e.\u0275fac}),e})();class Kw{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(Ww[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){(_T(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(_T(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const o=Ww[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=Ww[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&($a.DashCase|$a.Important)?t.style.setProperty(n,r,i&$a.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&$a.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,yT(r)):this.eventManager.addEventListener(t,n,yT(r))}}function _T(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class Rk extends Kw{constructor(t,n,r,i){super(t),this.component=r;const o=Bv(i+"-"+r.id,r.styles,[]);n.addStyles(o),this.contentAttr=function Pk(e){return"_ngcontent-%COMP%".replace(Zw,e)}(i+"-"+r.id),this.hostAttr=function Dk(e){return"_nghost-%COMP%".replace(Zw,e)}(i+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}class Mk extends Kw{constructor(t,n,r,i){super(t),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Bv(i.id,i.styles,[]);for(let s=0;s<o.length;s++){const l=document.createElement("style");l.textContent=o[s],this.shadowRoot.appendChild(l)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Ok=(()=>{class e extends fT{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return e.\u0275fac=function(n){return new(n||e)(tr(ku))},e.\u0275prov=Zn({token:e,factory:e.\u0275fac}),e})();const bT=["alt","control","meta","shift"],Nk={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wT={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},kk={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let Fk=(()=>{class e extends fT{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ef().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let s="";if(bT.forEach(g=>{const d=r.indexOf(g);d>-1&&(r.splice(d,1),s+=g+".")}),s+=o,0!=r.length||0===o.length)return null;const l={};return l.domEventName=i,l.fullKey=s,l}static getEventFullKey(n){let r="",i=function zk(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&wT.hasOwnProperty(t)&&(t=wT[t]))}return Nk[t]||t}(n);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),bT.forEach(o=>{o!=i&&(0,kk[o])(n)&&(r+=o+".")}),r+=i,r}static eventCallback(n,r,i){return o=>{e.getEventFullKey(o)===n&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(tr(ku))},e.\u0275prov=Zn({token:e,factory:e.\u0275fac}),e})();const xT=[{provide:mI,useValue:"browser"},{provide:pI,useValue:function Bk(){qw.makeCurrent()},multi:!0},{provide:ku,useFactory:function Uk(){return function jh(e){Sm=e}(document),document},deps:[]}],Vk=CI(zL,"browser",xT),ET=new Pr(""),ST=[{provide:bv,useClass:class Sk{addToWindow(t){cr.getAngularTestability=(r,i=!0)=>{const o=t.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},cr.getAllAngularTestabilities=()=>t.getAllTestabilities(),cr.getAllAngularRootElements=()=>t.getAllRootElements(),cr.frameworkStabilizers||(cr.frameworkStabilizers=[]),cr.frameworkStabilizers.push(r=>{const i=cr.getAllAngularTestabilities();let o=i.length,s=!1;const l=function(g){s=s||g,o--,0==o&&r(s)};i.forEach(function(g){g.whenStable(l)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?ef().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:wI,useClass:bw,deps:[qa,ww,bv]},{provide:bw,useClass:bw,deps:[qa,ww,bv]}],CT=[{provide:zf,useValue:"root"},{provide:ki,useFactory:function jk(){return new ki},deps:[]},{provide:Fv,useClass:Ok,multi:!0,deps:[ku,qa,mI]},{provide:Fv,useClass:Fk,multi:!0,deps:[ku]},{provide:Jw,useClass:Jw,deps:[zv,xg,yg]},{provide:re,useExisting:Jw},{provide:hT,useExisting:xg},{provide:xg,useClass:xg,deps:[ku]},{provide:zv,useClass:zv,deps:[Fv,qa]},{provide:class vk{},useClass:Ck,deps:[]},[]];let Gk=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:yg,useValue:n.appId},{provide:dT,useExisting:yg},Ek]}}}return e.\u0275fac=function(n){return new(n||e)(tr(ET,12))},e.\u0275mod=jo({type:e}),e.\u0275inj=Qn({providers:[...CT,...ST],imports:[dk,BL]}),e})(),IT=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return e.\u0275fac=function(n){return new(n||e)(tr(ku))},e.\u0275prov=Zn({token:e,factory:function(n){let r=null;return r=n?new n:function $k(){return new IT(tr(ku))}(),r},providedIn:"root"}),e})();function xr(...e){return Oi(e,jn(e))}typeof window<"u"&&window;class Kl extends xt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}const{isArray:Qk}=Array,{getPrototypeOf:eF,prototype:tF,keys:nF}=Object;const{isArray:oF}=Array;function DT(...e){const t=jn(e),n=function Gn(e){return V(Tt(e))?e.pop():void 0}(e),{args:r,keys:i}=function rF(e){if(1===e.length){const t=e[0];if(Qk(t))return{args:t,keys:null};if(function iF(e){return e&&"object"==typeof e&&eF(e)===tF}(t)){const n=nF(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}(e);if(0===r.length)return Oi([],t);const o=new lt(function lF(e,t,n=W){return r=>{AT(t,()=>{const{length:i}=e,o=new Array(i);let s=i,l=i;for(let g=0;g<i;g++)AT(t,()=>{const d=Oi(e[g],t);let _=!1;d.subscribe(Ct(r,x=>{o[g]=x,_||(_=!0,l--),l||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,t,i?s=>function uF(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}(i,s):W));return n?o.pipe(function sF(e){return pn(t=>function aF(e,t){return oF(t)?e(...t):e(t)}(e,t))}(n)):o}function AT(e,t,n){e?Ft(n,e,t):t()}function Qw(...e){return function cF(){return Jt(1)}()(Oi(e,jn(e)))}function RT(e){return new lt(t=>{ve(e()).subscribe(t)})}function Eg(e,t){const n=V(e)?e:()=>e,r=i=>i.error(n());return new lt(t?i=>t.schedule(r,0,i):r)}const Pp=X(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function e1(){return bn((e,t)=>{let n=null;e._refCount++;const r=Ct(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}class MT extends lt{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Bt(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new G;const n=this.getSubject();t.add(this.source.subscribe(Ct(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=G.EMPTY)}return t}refCount(){return e1()(this)}}function Pc(e,t){return bn((n,r)=>{let i=null,o=0,s=!1;const l=()=>s&&!i&&r.complete();n.subscribe(Ct(r,g=>{i?.unsubscribe();let d=0;const _=o++;ve(e(g,_)).subscribe(i=Ct(r,x=>r.next(t?t(g,x,_,d++):x),()=>{i=null,l()}))},()=>{s=!0,l()}))})}function Sg(e){return e<=0?()=>Kt:bn((t,n)=>{let r=0;t.subscribe(Ct(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function nf(e,t){return bn((n,r)=>{let i=0;n.subscribe(Ct(r,o=>e.call(t,o,i++)&&r.next(o)))})}function jv(e){return bn((t,n)=>{let r=!1;t.subscribe(Ct(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function OT(e=fF){return bn((t,n)=>{let r=!1;t.subscribe(Ct(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function fF(){return new Pp}function rf(e,t){const n=arguments.length>=2;return r=>r.pipe(e?nf((i,o)=>e(i,o,r)):W,Sg(1),n?jv(t):OT(()=>new Pp))}function sh(e,t){return V(t)?Et(e,t,1):Et(e,1)}function Qs(e,t,n){const r=V(e)||t||n?{next:e,error:t,complete:n}:e;return r?bn((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let l=!0;i.subscribe(Ct(o,g=>{var d;null===(d=r.next)||void 0===d||d.call(r,g),o.next(g)},()=>{var g;l=!1,null===(g=r.complete)||void 0===g||g.call(r),o.complete()},g=>{var d;l=!1,null===(d=r.error)||void 0===d||d.call(r,g),o.error(g)},()=>{var g,d;l&&(null===(g=r.unsubscribe)||void 0===g||g.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):W}function af(e){return bn((t,n)=>{let o,r=null,i=!1;r=t.subscribe(Ct(n,void 0,void 0,s=>{o=ve(e(s,af(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function hF(e,t,n,r,i){return(o,s)=>{let l=n,g=t,d=0;o.subscribe(Ct(s,_=>{const x=d++;g=l?e(g,_,x):(l=!0,_),r&&s.next(g)},i&&(()=>{l&&s.next(g),s.complete()})))}}function LT(e,t){return bn(hF(e,t,arguments.length>=2,!0))}function t1(e){return e<=0?()=>Kt:bn((t,n)=>{let r=[];t.subscribe(Ct(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function NT(e,t){const n=arguments.length>=2;return r=>r.pipe(e?nf((i,o)=>e(i,o,r)):W,t1(1),n?jv(t):OT(()=>new Pp))}function n1(e){return bn((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}const oi="primary";class gF{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Dp(e){return new gF(e)}function yF(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],l=e[o];if(s.startsWith(":"))i[s.substring(1)]=l;else if(s!==l.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Dc(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!kT(e[i],t[i]))return!1;return!0}function kT(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}return e===t}function FT(e){return Array.prototype.concat.apply([],e)}function zT(e){return e.length>0?e[e.length-1]:null}function Fs(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function pd(e){return iS(e)?e:sv(e)?Oi(Promise.resolve(e)):xr(e)}const bF={exact:function UT(e,t,n){if(!lh(e.segments,t.segments)||!Uv(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!e.children[r]||!UT(e.children[r],t.children[r],n))return!1;return!0},subset:VT},BT={exact:function wF(e,t){return Dc(e,t)},subset:function xF(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>kT(e[n],t[n]))},ignored:()=>!0};function jT(e,t,n){return bF[n.paths](e.root,t.root,n.matrixParams)&&BT[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function VT(e,t,n){return GT(e,t,t.segments,n)}function GT(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!(!lh(i,n)||t.hasChildren()||!Uv(i,n,r))}if(e.segments.length===n.length){if(!lh(e.segments,n)||!Uv(e.segments,n,r))return!1;for(const i in t.children)if(!e.children[i]||!VT(e.children[i],t.children[i],r))return!1;return!0}{const i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!!(lh(e.segments,i)&&Uv(e.segments,i,r)&&e.children[oi])&&GT(e.children[oi],t,o,r)}}function Uv(e,t,n){return t.every((r,i)=>BT[n](e[i].parameters,r.parameters))}class uh{constructor(t,n,r){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dp(this.queryParams)),this._queryParamMap}toString(){return CF.serialize(this)}}class fi{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Fs(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vv(this)}}class Cg{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Dp(this.parameters)),this._parameterMap}toString(){return ZT(this)}}function lh(e,t){return e.length===t.length&&e.every((n,r)=>n.path===t[r].path)}class HT{}class $T{parse(t){const n=new LF(t);return new uh(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${Ig(t.root,!0)}`,r=function PF(e){const t=Object.keys(e).map(n=>{const r=e[n];return Array.isArray(r)?r.map(i=>`${Gv(n)}=${Gv(i)}`).join("&"):`${Gv(n)}=${Gv(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${r}${"string"==typeof t.fragment?`#${function IF(e){return encodeURI(e)}(t.fragment)}`:""}`}}const CF=new $T;function Vv(e){return e.segments.map(t=>ZT(t)).join("/")}function Ig(e,t){if(!e.hasChildren())return Vv(e);if(t){const n=e.children[oi]?Ig(e.children[oi],!1):"",r=[];return Fs(e.children,(i,o)=>{o!==oi&&r.push(`${o}:${Ig(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function SF(e,t){let n=[];return Fs(e.children,(r,i)=>{i===oi&&(n=n.concat(t(r,i)))}),Fs(e.children,(r,i)=>{i!==oi&&(n=n.concat(t(r,i)))}),n}(e,(r,i)=>i===oi?[Ig(e.children[oi],!1)]:[`${i}:${Ig(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[oi]?`${Vv(e)}/${n[0]}`:`${Vv(e)}/(${n.join("//")})`}}function qT(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Gv(e){return qT(e).replace(/%3B/gi,";")}function i1(e){return qT(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hv(e){return decodeURIComponent(e)}function WT(e){return Hv(e.replace(/\+/g,"%20"))}function ZT(e){return`${i1(e.path)}${function TF(e){return Object.keys(e).map(t=>`;${i1(t)}=${i1(e[t])}`).join("")}(e.parameters)}`}const DF=/^[^\/()?;=#]+/;function $v(e){const t=e.match(DF);return t?t[0]:""}const AF=/^[^=?&#]+/,MF=/^[^&#]+/;class LF{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new fi([],{}):new fi([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[oi]=new fi(t,n)),r}parseSegment(){const t=$v(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new un(4009,!1);return this.capture(t),new Cg(Hv(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=$v(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=$v(this.remaining);i&&(r=i,this.capture(r))}t[Hv(n)]=Hv(r)}parseQueryParam(t){const n=function RF(e){const t=e.match(AF);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function OF(e){const t=e.match(MF);return t?t[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=WT(n),o=WT(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=$v(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new un(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=oi);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[oi]:new fi([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new un(4011,!1)}}function o1(e){return e.segments.length>0?new fi([],{[oi]:e}):e}function qv(e){const t={};for(const r of Object.keys(e.children)){const o=qv(e.children[r]);(o.segments.length>0||o.hasChildren())&&(t[r]=o)}return function NF(e){if(1===e.numberOfChildren&&e.children[oi]){const t=e.children[oi];return new fi(e.segments.concat(t.segments),t.children)}return e}(new fi(e.segments,t))}function ch(e){return e instanceof uh}function zF(e,t,n,r,i){if(0===n.length)return Ap(t.root,t.root,t.root,r,i);const o=function YT(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new KT(!0,0,e);let t=0,n=!1;const r=e.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const l={};return Fs(o.outlets,(g,d)=>{l[d]="string"==typeof g?g.split("/"):g}),[...i,{outlets:l}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((l,g)=>{0==g&&"."===l||(0==g&&""===l?n=!0:".."===l?t++:""!=l&&i.push(l))}),i):[...i,o]},[]);return new KT(n,t,r)}(n);return o.toRoot()?Ap(t.root,t.root,new fi([],{}),r,i):function s(g){const d=function jF(e,t,n,r){if(e.isAbsolute)return new Rp(t.root,!0,0);if(-1===r)return new Rp(n,n===t.root,0);return function XT(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new un(4005,!1);i=r.segments.length}return new Rp(r,!1,i-o)}(n,r+(Tg(e.commands[0])?0:1),e.numberOfDoubleDots)}(o,t,e.snapshot?._urlSegment,g),_=d.processChildren?Dg(d.segmentGroup,d.index,o.commands):s1(d.segmentGroup,d.index,o.commands);return Ap(t.root,d.segmentGroup,_,r,i)}(e.snapshot?._lastPathIndex)}function Tg(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Pg(e){return"object"==typeof e&&null!=e&&e.outlets}function Ap(e,t,n,r,i){let s,o={};r&&Fs(r,(g,d)=>{o[d]=Array.isArray(g)?g.map(_=>`${_}`):`${g}`}),s=e===t?n:JT(e,t,n);const l=o1(qv(s));return new uh(l,o,i)}function JT(e,t,n){const r={};return Fs(e.children,(i,o)=>{r[o]=i===t?n:JT(i,t,n)}),new fi(e.segments,r)}class KT{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Tg(r[0]))throw new un(4003,!1);const i=r.find(Pg);if(i&&i!==zT(r))throw new un(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Rp{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}}function s1(e,t,n){if(e||(e=new fi([],{})),0===e.segments.length&&e.hasChildren())return Dg(e,t,n);const r=function VF(e,t,n){let r=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;const s=e.segments[i],l=n[r];if(Pg(l))break;const g=`${l}`,d=r<n.length-1?n[r+1]:null;if(i>0&&void 0===g)break;if(g&&d&&"object"==typeof d&&void 0===d.outlets){if(!eP(g,d,s))return o;r+=2}else{if(!eP(g,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const o=new fi(e.segments.slice(0,r.pathIndex),{});return o.children[oi]=new fi(e.segments.slice(r.pathIndex),e.children),Dg(o,0,i)}return r.match&&0===i.length?new fi(e.segments,{}):r.match&&!e.hasChildren()?u1(e,t,n):r.match?Dg(e,0,i):u1(e,t,n)}function Dg(e,t,n){if(0===n.length)return new fi(e.segments,{});{const r=function UF(e){return Pg(e[0])?e[0].outlets:{[oi]:e}}(n),i={};return Fs(r,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=s1(e.children[s],t,o))}),Fs(e.children,(o,s)=>{void 0===r[s]&&(i[s]=o)}),new fi(e.segments,i)}}function u1(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const o=n[i];if(Pg(o)){const g=GF(o.outlets);return new fi(r,g)}if(0===i&&Tg(n[0])){r.push(new Cg(e.segments[t].path,QT(n[0]))),i++;continue}const s=Pg(o)?o.outlets[oi]:`${o}`,l=i<n.length-1?n[i+1]:null;s&&l&&Tg(l)?(r.push(new Cg(s,QT(l))),i+=2):(r.push(new Cg(s,{})),i++)}return new fi(r,{})}function GF(e){const t={};return Fs(e,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[r]=u1(new fi([],{}),0,n))}),t}function QT(e){const t={};return Fs(e,(n,r)=>t[r]=`${n}`),t}function eP(e,t,n){return e==n.path&&Dc(t,n.parameters)}class md{constructor(t,n){this.id=t,this.url=n}}class l1 extends md{constructor(t,n,r="imperative",i=null){super(t,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class dh extends md{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Wv extends md{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class tP extends md{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class HF extends md{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $F extends md{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qF extends md{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class WF extends md{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ZF extends md{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JF{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class KF{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class YF{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class XF{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QF{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class e4{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nP{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class rP{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=c1(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){const n=c1(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=d1(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return d1(t,this._root).map(n=>n.value)}}function c1(e,t){if(e===t.value)return t;for(const n of t.children){const r=c1(e,n);if(r)return r}return null}function d1(e,t){if(e===t.value)return[t];for(const n of t.children){const r=d1(e,n);if(r.length)return r.unshift(t),r}return[]}class gd{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function Mp(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class iP extends rP{constructor(t,n){super(t),this.snapshot=n,f1(this,t)}toString(){return this.snapshot.toString()}}function oP(e,t){const n=function n4(e,t){const s=new Zv([],{},{},"",{},oi,t,null,e.root,-1,{});return new sP("",new gd(s,[]))}(e,t),r=new Kl([new Cg("",{})]),i=new Kl({}),o=new Kl({}),s=new Kl({}),l=new Kl(""),g=new Op(r,i,s,l,o,oi,t,n.root);return g.snapshot=n.root,new iP(new gd(g,[]),n)}class Op{constructor(t,n,r,i,o,s,l,g){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=l,this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(pn(t=>Dp(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(pn(t=>Dp(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function aP(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function r4(e){return e.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Zv{constructor(t,n,r,i,o,s,l,g,d,_,x,b){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=l,this.routeConfig=g,this._urlSegment=d,this._lastPathIndex=_,this._correctedLastPathIndex=b??_,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Dp(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dp(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class sP extends rP{constructor(t,n){super(n),this.url=t,f1(this,n)}toString(){return uP(this._root)}}function f1(e,t){t.value._routerState=e,t.children.forEach(n=>f1(e,n))}function uP(e){const t=e.children.length>0?` { ${e.children.map(uP).join(", ")} } `:"";return`${e.value}${t}`}function h1(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Dc(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Dc(t.params,n.params)||e.params.next(n.params),function vF(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Dc(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Dc(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function p1(e,t){const n=Dc(e.params,t.params)&&function EF(e,t){return lh(e,t)&&e.every((n,r)=>Dc(n.parameters,t[r].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||p1(e.parent,t.parent))}function Ag(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function o4(e,t,n){return t.children.map(r=>{for(const i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Ag(e,r,i);return Ag(e,r)})}(e,t,n);return new gd(r,i)}{if(e.shouldAttach(t.value)){const o=e.retrieve(t.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(l=>Ag(e,l)),s}}const r=function a4(e){return new Op(new Kl(e.url),new Kl(e.params),new Kl(e.queryParams),new Kl(e.fragment),new Kl(e.data),e.outlet,e.component,e)}(t.value),i=t.children.map(o=>Ag(e,o));return new gd(r,i)}}const m1="ngNavigationCancelingError";function lP(e,t){const{redirectTo:n,navigationBehaviorOptions:r}=ch(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=cP(!1,0,t);return i.url=n,i.navigationBehaviorOptions=r,i}function cP(e,t,n){const r=new Error("NavigationCancelingError: "+(e||""));return r[m1]=!0,r.cancellationCode=t,n&&(r.url=n),r}function dP(e){return fP(e)&&ch(e.url)}function fP(e){return e&&e[m1]}class s4{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Rg,this.attachRef=null}}class Rg{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const r=this.getOrCreateContext(t);r.outlet=n,this.contexts.set(t,r)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new s4,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}const Jv=!1;let hP=(()=>{class e{constructor(n,r,i,o,s){this.parentContexts=n,this.location=r,this.changeDetector=o,this.environmentInjector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new mu,this.deactivateEvents=new mu,this.attachEvents=new mu,this.detachEvents=new mu,this.name=i||oi,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new un(4012,Jv);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new un(4012,Jv);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new un(4012,Jv);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new un(4013,Jv);this._activatedRoute=n;const i=this.location,s=n._futureSnapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,g=new u4(n,l,i.injector);if(r&&function l4(e){return!!e.resolveComponentFactory}(r)){const d=r.resolveComponentFactory(s);this.activated=i.createComponent(d,i.length,g)}else this.activated=i.createComponent(s,{index:i.length,injector:g,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(n){return new(n||e)(sr(Rg),sr(ql),function _f(e){return function go(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(Lo(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===t)return n[i+1];i+=2}}}return null}(ro(),e)}("name"),sr(Cw),sr(Ou))},e.\u0275dir=Ko({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),e})();class u4{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Op?this.route:t===Rg?this.childContexts:this.parent.get(t,n)}}let pP=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Rs({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,r){1&n&&av(0,"router-outlet")},dependencies:[hP],encapsulation:2}),e})();function mP(e,t){return e.providers&&!e._injector&&(e._injector=pv(e.providers,t,`Route: ${e.path}`)),e._injector??t}function y1(e){const t=e.children&&e.children.map(y1),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==oi&&(n.component=pP),n}function bl(e){return e.outlet||oi}function gP(e,t){const n=e.filter(r=>bl(r)===t);return n.push(...e.filter(r=>bl(r)!==t)),n}function yP(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class p4{constructor(t,n,r,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(t){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),h1(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){const i=Mp(n);t.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Fs(i,(o,s)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){const i=t.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Mp(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:l})}}deactivateRouteAndOutlet(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Mp(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,n,r){const i=Mp(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new e4(o.value.snapshot))}),t.children.length&&this.forwardEvent(new XF(t.value.snapshot))}activateRoutes(t,n,r){const i=t.value,o=n?n.value:null;if(h1(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const l=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(l.contexts),s.attachRef=l.componentRef,s.route=l.route.value,s.outlet&&s.outlet.attach(l.componentRef,l.route.value),h1(l.route.value),this.activateChildRoutes(t,null,s.children)}else{const l=yP(i.snapshot),g=l?.get(E)??null;s.attachRef=null,s.route=i,s.resolver=g,s.injector=l,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,r)}}class vP{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Kv{constructor(t,n){this.component=t,this.route=n}}function m4(e,t,n){const r=e._root;return Mg(r,t?t._root:null,n,[r.value])}function Yv(e,t,n){return(yP(t)??n).get(e)}function Mg(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Mp(t);return e.children.forEach(s=>{(function y4(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,s=t?t.value:null,l=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const g=function v4(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!lh(e.url,t.url);case"pathParamsOrQueryParamsChange":return!lh(e.url,t.url)||!Dc(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!p1(e,t)||!Dc(e.queryParams,t.queryParams);default:return!p1(e,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new vP(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Mg(e,t,o.component?l?l.children:null:n,r,i),g&&l&&l.outlet&&l.outlet.isActivated&&i.canDeactivateChecks.push(new Kv(l.outlet.component,s))}else s&&Og(t,l,i),i.canActivateChecks.push(new vP(r)),Mg(e,null,o.component?l?l.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Fs(o,(s,l)=>Og(s,n.getContext(l),i)),i}function Og(e,t,n){const r=Mp(e),i=e.value;Fs(r,(o,s)=>{Og(o,i.component?t?t.children.getContext(s):null:t,n)}),n.canDeactivateChecks.push(new Kv(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}function Lg(e){return"function"==typeof e}const Xv=Symbol("INITIAL_VALUE");function Lp(){return Pc(e=>DT(e.map(t=>t.pipe(Sg(1),function dF(...e){const t=jn(e);return bn((n,r)=>{(t?Qw(e,n,t):Qw(e,n)).subscribe(r)})}(Xv)))).pipe(pn(t=>{for(const n of t)if(!0!==n){if(n===Xv)return Xv;if(!1===n||n instanceof uh)return n}return!0}),nf(t=>t!==Xv),Sg(1)))}function _P(e){return function ce(...e){return Ze(e)}(Qs(t=>{if(ch(t))throw lP(0,t)}),pn(t=>!0===t))}const v1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bP(e,t,n,r,i){const o=_1(e,t,n);return o.matched?function N4(e,t,n,r){const i=t.canMatch;return i&&0!==i.length?xr(i.map(s=>{const l=e.get(s),g=function S4(e){return e&&Lg(e.canMatch)}(l)?l.canMatch(t,n):l(t,n);return pd(g)})).pipe(Lp(),_P()):xr(!0)}(r=mP(t,r),t,n).pipe(pn(s=>!0===s?o:{...v1})):xr(o)}function _1(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...v1}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(t.matcher||yF)(n,e,t);if(!i)return{...v1};const o={};Fs(i.posParams,(l,g)=>{o[g]=l.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Qv(e,t,n,r,i="corrected"){if(n.length>0&&function z4(e,t,n){return n.some(r=>e_(e,t,r)&&bl(r)!==oi)}(e,n,r)){const s=new fi(t,function F4(e,t,n,r){const i={};i[oi]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const o of n)if(""===o.path&&bl(o)!==oi){const s=new fi([],{});s._sourceSegment=e,s._segmentIndexShift=t.length,i[bl(o)]=s}return i}(e,t,r,new fi(n,e.children)));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function B4(e,t,n){return n.some(r=>e_(e,t,r))}(e,n,r)){const s=new fi(e.segments,function k4(e,t,n,r,i,o){const s={};for(const l of r)if(e_(e,n,l)&&!i[bl(l)]){const g=new fi([],{});g._sourceSegment=e,g._segmentIndexShift="legacy"===o?e.segments.length:t.length,s[bl(l)]=g}return{...i,...s}}(e,t,n,r,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const o=new fi(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}function e_(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function wP(e,t,n,r){return!!(bl(e)===r||r!==oi&&e_(t,n,e))&&("**"===e.path||_1(t,e,n).matched)}function xP(e,t,n){return 0===t.length&&!e.children[n]}const t_=!1;class n_{constructor(t){this.segmentGroup=t||null}}class EP{constructor(t){this.urlTree=t}}function Ng(e){return Eg(new n_(e))}function SP(e){return Eg(new EP(e))}class G4{constructor(t,n,r,i,o){this.injector=t,this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const t=Qv(this.urlTree.root,[],[],this.config).segmentGroup,n=new fi(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,n,oi).pipe(pn(o=>this.createUrlTree(qv(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(af(o=>{if(o instanceof EP)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof n_?this.noMatchError(o):o}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,oi).pipe(pn(i=>this.createUrlTree(qv(i),t.queryParams,t.fragment))).pipe(af(i=>{throw i instanceof n_?this.noMatchError(i):i}))}noMatchError(t){return new un(4002,t_)}createUrlTree(t,n,r){const i=o1(t);return new uh(i,n,r)}expandSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,n,r).pipe(pn(o=>new fi([],o))):this.expandSegment(t,r,n,r.segments,i,!0)}expandChildren(t,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return Oi(i).pipe(sh(o=>{const s=r.children[o],l=gP(n,o);return this.expandSegmentGroup(t,l,s,o).pipe(pn(g=>({segment:g,outlet:o})))}),LT((o,s)=>(o[s.outlet]=s.segment,o),{}),NT())}expandSegment(t,n,r,i,o,s){return Oi(r).pipe(sh(l=>this.expandSegmentAgainstRoute(t,n,r,l,i,o,s).pipe(af(d=>{if(d instanceof n_)return xr(null);throw d}))),rf(l=>!!l),af((l,g)=>{if(l instanceof Pp||"EmptyError"===l.name)return xP(n,i,o)?xr(new fi([],{})):Ng(n);throw l}))}expandSegmentAgainstRoute(t,n,r,i,o,s,l){return wP(i,n,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,n,i,o,s):l&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s):Ng(n):Ng(n)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?SP(o):this.lineralizeSegments(r,o).pipe(Et(s=>{const l=new fi(s,{});return this.expandSegment(t,l,n,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s){const{matched:l,consumedSegments:g,remainingSegments:d,positionalParamSegments:_}=_1(n,i,o);if(!l)return Ng(n);const x=this.applyRedirectCommands(g,i.redirectTo,_);return i.redirectTo.startsWith("/")?SP(x):this.lineralizeSegments(i,x).pipe(Et(b=>this.expandSegment(t,n,r,b.concat(d),s,!1)))}matchSegmentAgainstRoute(t,n,r,i,o){return"**"===r.path?(t=mP(r,t),r.loadChildren?(r._loadedRoutes?xr({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(t,r)).pipe(pn(l=>(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,new fi(i,{})))):xr(new fi(i,{}))):bP(n,r,i,t).pipe(Pc(({matched:s,consumedSegments:l,remainingSegments:g})=>s?this.getChildConfig(t=r._injector??t,r,i).pipe(Et(_=>{const x=_.injector??t,b=_.routes,{segmentGroup:I,slicedSegments:k}=Qv(n,l,g,b),R=new fi(I.segments,I.children);if(0===k.length&&R.hasChildren())return this.expandChildren(x,b,R).pipe(pn(et=>new fi(l,et)));if(0===b.length&&0===k.length)return xr(new fi(l,{}));const xe=bl(r)===o;return this.expandSegment(x,R,b,k,xe?oi:o,!0).pipe(pn(ut=>new fi(l.concat(ut.segments),ut.children)))})):Ng(n)))}getChildConfig(t,n,r){return n.children?xr({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?xr({routes:n._loadedRoutes,injector:n._loadedInjector}):function L4(e,t,n,r){const i=t.canLoad;return void 0===i||0===i.length?xr(!0):xr(i.map(s=>{const l=e.get(s),g=function b4(e){return e&&Lg(e.canLoad)}(l)?l.canLoad(t,n):l(t,n);return pd(g)})).pipe(Lp(),_P())}(t,n,r).pipe(Et(i=>i?this.configLoader.loadChildren(t,n).pipe(Qs(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function U4(e){return Eg(cP(t_,3))}())):xr({routes:[],injector:t})}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return xr(r);if(i.numberOfChildren>1||!i.children[oi])return Eg(new un(4e3,t_));i=i.children[oi]}}applyRedirectCommands(t,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r)}applyRedirectCreateUrlTree(t,n,r,i){const o=this.createSegmentGroup(t,n.root,r,i);return new uh(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const r={};return Fs(t,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const l=i.substring(1);r[o]=n[l]}else r[o]=i}),r}createSegmentGroup(t,n,r,i){const o=this.createSegments(t,n.segments,r,i);let s={};return Fs(n.children,(l,g)=>{s[g]=this.createSegmentGroup(t,l,r,i)}),new fi(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){const i=r[n.path.substring(1)];if(!i)throw new un(4001,t_);return i}findOrReturn(t,n){let r=0;for(const i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}}class $4{}class Z4{constructor(t,n,r,i,o,s,l,g){this.injector=t,this.rootComponentType=n,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=l,this.urlSerializer=g}recognize(){const t=Qv(this.urlTree.root,[],[],this.config.filter(n=>void 0===n.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,oi).pipe(pn(n=>{if(null===n)return null;const r=new Zv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},oi,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new gd(r,n),o=new sP(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(t){const n=t.value,r=aP(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i)}processChildren(t,n,r){return Oi(Object.keys(r.children)).pipe(sh(i=>{const o=r.children[i],s=gP(n,i);return this.processSegmentGroup(t,s,o,i)}),LT((i,o)=>i&&o?(i.push(...o),i):null),function pF(e,t=!1){return bn((n,r)=>{let i=0;n.subscribe(Ct(r,o=>{const s=e(o,i++);(s||t)&&r.next(o),!s&&r.complete()}))})}(i=>null!==i),jv(null),NT(),pn(i=>{if(null===i)return null;const o=CP(i);return function J4(e){e.sort((t,n)=>t.value.outlet===oi?-1:n.value.outlet===oi?1:t.value.outlet.localeCompare(n.value.outlet))}(o),o}))}processSegment(t,n,r,i,o){return Oi(n).pipe(sh(s=>this.processSegmentAgainstRoute(s._injector??t,s,r,i,o)),rf(s=>!!s),af(s=>{if(s instanceof Pp)return xP(r,i,o)?xr([]):xr(null);throw s}))}processSegmentAgainstRoute(t,n,r,i,o){if(n.redirectTo||!wP(n,r,i,o))return xr(null);let s;if("**"===n.path){const l=i.length>0?zT(i).parameters:{},g=TP(r)+i.length;s=xr({snapshot:new Zv(i,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,DP(n),bl(n),n.component??n._loadedComponent??null,n,IP(r),g,AP(n),g),consumedSegments:[],remainingSegments:[]})}else s=bP(r,n,i,t).pipe(pn(({matched:l,consumedSegments:g,remainingSegments:d,parameters:_})=>{if(!l)return null;const x=TP(r)+g.length;return{snapshot:new Zv(g,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,DP(n),bl(n),n.component??n._loadedComponent??null,n,IP(r),x,AP(n),x),consumedSegments:g,remainingSegments:d}}));return s.pipe(Pc(l=>{if(null===l)return xr(null);const{snapshot:g,consumedSegments:d,remainingSegments:_}=l;t=n._injector??t;const x=n._loadedInjector??t,b=function K4(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(n),{segmentGroup:I,slicedSegments:k}=Qv(r,d,_,b.filter(xe=>void 0===xe.redirectTo),this.relativeLinkResolution);if(0===k.length&&I.hasChildren())return this.processChildren(x,b,I).pipe(pn(xe=>null===xe?null:[new gd(g,xe)]));if(0===b.length&&0===k.length)return xr([new gd(g,[])]);const R=bl(n)===o;return this.processSegment(x,b,I,k,R?oi:o).pipe(pn(xe=>null===xe?null:[new gd(g,xe)]))}))}}function Y4(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function CP(e){const t=[],n=new Set;for(const r of e){if(!Y4(r)){t.push(r);continue}const i=t.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):t.push(r)}for(const r of n){const i=CP(r.children);t.push(new gd(r.value,i))}return t.filter(r=>!n.has(r))}function IP(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function TP(e){let t=e,n=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift??0;return n-1}function DP(e){return e.data||{}}function AP(e){return e.resolve||{}}const b1=Symbol("RouteTitle");function RP(e){return"string"==typeof e.title||null===e.title}function w1(e){return Pc(t=>{const n=e(t);return n?Oi(n).pipe(pn(()=>t)):xr(t)})}let MP=(()=>{class e{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oi);return r}getResolvedTitleForRoute(n){return n.data[b1]}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Zn({token:e,factory:function(){return na(OP)},providedIn:"root"}),e})(),OP=(()=>{class e extends MP{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(n){return new(n||e)(tr(IT))},e.\u0275prov=Zn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class oz{}class sz extends class az{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}{}const x1=new Pr("",{providedIn:"root",factory:()=>({})}),E1=new Pr("ROUTES");let S1=(()=>{class e{constructor(n,r){this.injector=n,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return xr(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=pd(n.loadComponent()).pipe(Qs(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),n1(()=>{this.componentLoaders.delete(n)})),i=new MT(r,()=>new xt).pipe(e1());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return xr({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(pn(l=>{this.onLoadEndListener&&this.onLoadEndListener(r);let g,d,_=!1;Array.isArray(l)?d=l:(g=l.create(n).injector,d=FT(g.get(E1,[],qt.Self|qt.Optional)));return{routes:d.map(y1),injector:g}}),n1(()=>{this.childrenLoaders.delete(r)})),s=new MT(o,()=>new xt).pipe(e1());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(n){return pd(n()).pipe(Et(r=>r instanceof PC||Array.isArray(r)?xr(r):Oi(this.compiler.compileModuleAsync(r))))}}return e.\u0275fac=function(n){return new(n||e)(tr(Vl),tr(gw))},e.\u0275prov=Zn({token:e,factory:e.\u0275fac}),e})();class lz{}class cz{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}}function dz(e){throw e}function fz(e,t,n){return t.parse("/")}const hz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function NP(){const e=na(HT),t=na(Rg),n=na(Mw),r=na(Vl),i=na(gw),o=na(E1,{optional:!0})??[],s=na(x1,{optional:!0})??{},l=na(OP),g=na(MP,{optional:!0}),d=na(lz,{optional:!0}),_=na(oz,{optional:!0}),x=new yu(null,e,t,n,r,i,FT(o));return d&&(x.urlHandlingStrategy=d),_&&(x.routeReuseStrategy=_),x.titleStrategy=g??l,function mz(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy),e.canceledNavigationResolution&&(t.canceledNavigationResolution=e.canceledNavigationResolution)}(s,x),x}let yu=(()=>{class e{constructor(n,r,i,o,s,l,g){this.rootComponentType=n,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new xt,this.errorHandler=dz,this.malformedUriErrorHandler=fz,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>xr(void 0),this.urlHandlingStrategy=new cz,this.routeReuseStrategy=new sz,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=s.get(S1),this.configLoader.onLoadEndListener=b=>this.triggerEvent(new KF(b)),this.configLoader.onLoadStartListener=b=>this.triggerEvent(new JF(b)),this.ngModule=s.get(ih),this.console=s.get(rL);const x=s.get(qa);this.isNgZoneEnabled=x instanceof qa&&qa.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function _F(){return new uh(new fi([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=oP(this.currentUrlTree,this.rootComponentType),this.transitions=new Kl({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(n){const r=this.events;return n.pipe(nf(i=>0!==i.id),pn(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Pc(i=>{let o=!1,s=!1;return xr(i).pipe(Qs(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Pc(l=>{const g=this.browserUrlTree.toString(),d=!this.navigated||l.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||d)&&this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return kP(l.source)&&(this.browserUrlTree=l.extractedUrl),xr(l).pipe(Pc(x=>{const b=this.transitions.getValue();return r.next(new l1(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),b!==this.transitions.getValue()?Kt:Promise.resolve(x)}),function H4(e,t,n,r){return Pc(i=>function V4(e,t,n,r,i){return new G4(e,t,n,r,i).apply()}(e,t,n,i.extractedUrl,r).pipe(pn(o=>({...i,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Qs(x=>{this.currentNavigation={...this.currentNavigation,finalUrl:x.urlAfterRedirects},i.urlAfterRedirects=x.urlAfterRedirects}),function Q4(e,t,n,r,i,o){return Et(s=>function W4(e,t,n,r,i,o,s="emptyOnly",l="legacy"){return new Z4(e,t,n,r,i,s,l,o).recognize().pipe(Pc(g=>null===g?function q4(e){return new lt(t=>t.error(e))}(new $4):xr(g)))}(e,t,n,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i,o).pipe(pn(l=>({...s,targetSnapshot:l}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Qs(x=>{if(i.targetSnapshot=x.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const I=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(I,x)}this.browserUrlTree=x.urlAfterRedirects}const b=new HF(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(b)}));if(d&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:b,extractedUrl:I,source:k,restoredState:R,extras:xe}=l,ke=new l1(b,this.serializeUrl(I),k,R);r.next(ke);const ut=oP(I,this.rootComponentType).snapshot;return xr(i={...l,targetSnapshot:ut,urlAfterRedirects:I,extras:{...xe,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=l.rawUrl,l.resolve(null),Kt}),Qs(l=>{const g=new $F(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(g)}),pn(l=>i={...l,guards:m4(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function I4(e,t){return Et(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?xr({...n,guardsResult:!0}):function T4(e,t,n,r){return Oi(e).pipe(Et(i=>function O4(e,t,n,r,i){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?xr(o.map(l=>{const g=Yv(l,t,i);return pd(function E4(e){return e&&Lg(e.canDeactivate)}(g)?g.canDeactivate(e,t,n,r):g(e,t,n,r)).pipe(rf())})).pipe(Lp()):xr(!0)}(i.component,i.route,n,t,r)),rf(i=>!0!==i,!0))}(s,r,i,e).pipe(Et(l=>l&&function _4(e){return"boolean"==typeof e}(l)?function P4(e,t,n,r){return Oi(t).pipe(sh(i=>Qw(function A4(e,t){return null!==e&&t&&t(new YF(e)),xr(!0)}(i.route.parent,r),function D4(e,t){return null!==e&&t&&t(new QF(e)),xr(!0)}(i.route,r),function M4(e,t,n){const r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>function g4(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(s)).filter(s=>null!==s).map(s=>RT(()=>xr(s.guards.map(g=>{const d=Yv(g,s.node,n);return pd(function x4(e){return e&&Lg(e.canActivateChild)}(d)?d.canActivateChild(r,e):d(r,e)).pipe(rf())})).pipe(Lp())));return xr(o).pipe(Lp())}(e,i.path,n),function R4(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return xr(!0);const i=r.map(o=>RT(()=>{const s=Yv(o,t,n);return pd(function w4(e){return e&&Lg(e.canActivate)}(s)?s.canActivate(t,e):s(t,e)).pipe(rf())}));return xr(i).pipe(Lp())}(e,i.route,n))),rf(i=>!0!==i,!0))}(r,o,e,t):xr(l)),pn(l=>({...n,guardsResult:l})))})}(this.ngModule.injector,l=>this.triggerEvent(l)),Qs(l=>{if(i.guardsResult=l.guardsResult,ch(l.guardsResult))throw lP(0,l.guardsResult);const g=new qF(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.triggerEvent(g)}),nf(l=>!!l.guardsResult||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),w1(l=>{if(l.guards.canActivateChecks.length)return xr(l).pipe(Qs(g=>{const d=new WF(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(d)}),Pc(g=>{let d=!1;return xr(g).pipe(function ez(e,t){return Et(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return xr(n);let o=0;return Oi(i).pipe(sh(s=>function tz(e,t,n,r){const i=e.routeConfig,o=e._resolve;return void 0!==i?.title&&!RP(i)&&(o[b1]=i.title),function nz(e,t,n,r){const i=function rz(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return xr({});const o={};return Oi(i).pipe(Et(s=>function iz(e,t,n,r){const i=Yv(e,t,r);return pd(i.resolve?i.resolve(t,n):i(t,n))}(e[s],t,n,r).pipe(rf(),Qs(l=>{o[s]=l}))),t1(1),function mF(e){return pn(()=>e)}(o),af(s=>s instanceof Pp?Kt:Eg(s)))}(o,e,t,r).pipe(pn(s=>(e._resolvedData=s,e.data=aP(e,n).resolve,i&&RP(i)&&(e.data[b1]=i.title),null)))}(s.route,r,e,t)),Qs(()=>o++),t1(1),Et(s=>o===i.length?xr(n):Kt))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Qs({next:()=>d=!0,complete:()=>{d||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),Qs(g=>{const d=new ZF(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(d)}))}),w1(l=>{const g=d=>{const _=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&_.push(this.configLoader.loadComponent(d.routeConfig).pipe(Qs(x=>{d.component=x}),pn(()=>{})));for(const x of d.children)_.push(...g(x));return _};return DT(g(l.targetSnapshot.root)).pipe(jv(),Sg(1))}),w1(()=>this.afterPreactivation()),pn(l=>{const g=function i4(e,t,n){const r=Ag(e,t._root,n?n._root:void 0);return new iP(r,t)}(this.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return i={...l,targetRouterState:g}}),Qs(l=>{this.currentUrlTree=l.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),this.routerState=l.targetRouterState,"deferred"===this.urlUpdateStrategy&&(l.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,l),this.browserUrlTree=l.urlAfterRedirects)}),((e,t,n)=>pn(r=>(new p4(t,r.targetRouterState,r.currentRouterState,n).activate(e),r)))(this.rootContexts,this.routeReuseStrategy,l=>this.triggerEvent(l)),Qs({next(){o=!0},complete(){o=!0}}),n1(()=>{o||s||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),af(l=>{if(s=!0,fP(l)){dP(l)||(this.navigated=!0,this.restoreHistory(i,!0));const g=new Wv(i.id,this.serializeUrl(i.extractedUrl),l.message,l.cancellationCode);if(r.next(g),dP(l)){const d=this.urlHandlingStrategy.merge(l.url,this.rawUrlTree),_={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||kP(i.source)};this.scheduleNavigation(d,"imperative",null,_,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const g=new tP(i.id,this.serializeUrl(i.extractedUrl),l,i.targetSnapshot??void 0);r.next(g);try{i.resolve(this.errorHandler(l))}catch(d){i.reject(d)}}return Kt}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}setTransition(n){this.transitions.next({...this.transitions.value,...n})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},o=n.state?.navigationId?n.state:null;if(o){const l={...o};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(i.state=l)}const s=this.parseUrl(n.url);this.scheduleNavigation(s,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){this.config=n.map(y1),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:l,preserveFragment:g}=r,d=i||this.routerState.root,_=g?this.currentUrlTree.fragment:s;let x=null;switch(l){case"merge":x={...this.currentUrlTree.queryParams,...o};break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=o||null}return null!==x&&(x=this.removeEmptyProps(x)),zF(d,this.currentUrlTree,n,x,_??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=ch(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(n,r={skipLocationChange:!1}){return function gz(e){for(let t=0;t<e.length;t++){if(null==e[t])throw new un(4008,false)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...hz}:!1===r?{...pz}:r,ch(n))return jT(this.currentUrlTree,n,i);const o=this.parseUrl(n);return jT(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const o=n[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new dh(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let l,g,d;s?(l=s.resolve,g=s.reject,d=s.promise):d=new Promise((b,I)=>{l=b,g=I});const _=++this.navigationId;let x;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),x=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):x=0,this.setTransition({id:_,targetPageId:x,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:o,resolve:l,reject:g,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(b=>Promise.reject(b))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,r,i){const o=new Wv(n.id,this.serializeUrl(n.extractedUrl),r,i);this.triggerEvent(o),n.resolve(!1)}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return e.\u0275fac=function(n){hb()},e.\u0275prov=Zn({token:e,factory:function(){return NP()},providedIn:"root"}),e})();function kP(e){return"imperative"!==e}class FP{}let zP=(()=>{class e{constructor(n,r,i,o,s){this.router=n,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(nf(n=>n instanceof dh),sh(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=pv(o.providers,n,`Route: ${o.path}`));const s=o._injector??n,l=o._loadedInjector??s;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(s,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(l,o.children??o._loadedRoutes))}return Oi(i).pipe(Jt())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):xr(null);const o=i.pipe(Et(s=>null===s?xr(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?Oi([o,this.loader.loadComponent(r)]).pipe(Jt()):o})}}return e.\u0275fac=function(n){return new(n||e)(tr(yu),tr(gw),tr(Ou),tr(FP),tr(S1))},e.\u0275prov=Zn({token:e,factory:e.\u0275fac}),e})();const BP=new Pr("");let _z=(()=>{class e{constructor(n,r,i={}){this.router=n,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof l1?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof dh&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof nP&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.router.triggerEvent(new nP(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(n){hb()},e.\u0275prov=Zn({token:e,factory:e.\u0275fac}),e})();const jP=new Pr("ROUTER_FORROOT_GUARD"),UP=new Pr(""),bz=[Mw,{provide:HT,useClass:$T},{provide:yu,useFactory:NP},Rg,{provide:Op,useFactory:function wz(e){return e.routerState.root},deps:[yu]},S1];function xz(){return new EI("Router",yu)}let VP=(()=>{class e{constructor(n){}static forRoot(n,r){return{ngModule:e,providers:[bz,[],GP(n),{provide:jP,useFactory:Iz,deps:[[yu,new Ld,new Pf]]},{provide:x1,useValue:r||{}},r?.useHash?{provide:ah,useClass:qL}:{provide:ah,useClass:WI},{provide:BP,useFactory:()=>{const e=na(yu),t=na(mk),n=na(x1);return n.scrollOffset&&t.setOffset(n.scrollOffset),new _z(e,t,n)}},r?.preloadingStrategy?Oz(r.preloadingStrategy):[],{provide:EI,multi:!0,useFactory:xz},r?.initialNavigation?Pz(r):[],[{provide:HP,useFactory:Tz},{provide:gI,multi:!0,useExisting:HP}]]}}static forChild(n){return{ngModule:e,providers:[GP(n)]}}}return e.\u0275fac=function(n){return new(n||e)(tr(jP,8))},e.\u0275mod=jo({type:e}),e.\u0275inj=Qn({}),e})();function Iz(e){return"guarded"}function GP(e){return[{provide:E1,multi:!0,useValue:e}]}function Tz(){const e=na(Vl);return t=>{const n=e.get(wv);if(t!==n.components[0])return;const r=e.get(yu),i=e.get($P);1===e.get(T1)&&r.initialNavigation(),e.get(UP,null,qt.Optional)?.setUpPreloading(),e.get(BP,null,qt.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.next(),i.complete()}}const HP=new Pr("");function Pz(e){return["disabled"===e.initialNavigation?[{provide:vv,multi:!0,useFactory:()=>{const e=na(yu);return()=>{e.setUpLocationChangeListener()}}},{provide:T1,useValue:2}]:[],"enabledBlocking"===e.initialNavigation?[{provide:T1,useValue:0},{provide:vv,multi:!0,deps:[Vl],useFactory:e=>{const t=e.get(HL,Promise.resolve(null));let n=!1;return()=>t.then(()=>new Promise(i=>{const o=e.get(yu),s=e.get($P);(function r(i){e.get(yu).events.pipe(nf(s=>s instanceof dh||s instanceof Wv||s instanceof tP),pn(s=>s instanceof dh||s instanceof Wv&&(0===s.code||1===s.code)&&null),nf(s=>null!==s),Sg(1)).subscribe(()=>{i()})})(()=>{i(!0),n=!0}),o.afterPreactivation=()=>(i(!0),n||s.closed?xr(void 0):s),o.initialNavigation()}))}}]:[]]}const $P=new Pr("",{factory:()=>new xt}),T1=new Pr("",{providedIn:"root",factory:()=>1});function Oz(e){return[zP,{provide:UP,useExisting:zP},{provide:FP,useExisting:e}]}const Lz=[];let Nz=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=jo({type:e}),e.\u0275inj=Qn({imports:[VP.forRoot(Lz),VP]}),e})();var e,Fz=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},zz=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},Np=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(zz(arguments[t]));return e},qP={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5},wl=(()=>{return(e=wl||(wl={})).DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",wl;var e})(),Yl=function(){function e(t,n){void 0===n&&(n=wl.WARN),this.name=t,this.level=n,this._pluggables=[]}return e.prototype._padding=function(t){return t<10?"0"+t:""+t},e.prototype._ts=function(){var t=new Date;return[this._padding(t.getMinutes()),this._padding(t.getSeconds())].join(":")+"."+t.getMilliseconds()},e.prototype.configure=function(t){return t?(this._config=t,this._config):this._config},e.prototype._log=function(t){for(var n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var s=this.level;e.LOG_LEVEL&&(s=e.LOG_LEVEL),typeof window<"u"&&window.LOG_LEVEL&&(s=window.LOG_LEVEL);var l=qP[s],g=qP[t];if(g>=l){var d=console.log.bind(console);t===wl.ERROR&&console.error&&(d=console.error.bind(console)),t===wl.WARN&&console.warn&&(d=console.warn.bind(console));var _="["+t+"] "+this._ts()+" "+this.name,x="";if(1===i.length&&"string"==typeof i[0])d(x=_+" - "+i[0]);else if(1===i.length)x=_+" "+i[0],d(_,i[0]);else if("string"==typeof i[0]){var b=i.slice(1);1===b.length&&(b=b[0]),x=_+" - "+i[0]+" "+b,d(_+" - "+i[0],b)}else x=_+" "+i,d(_,i);try{for(var I=Fz(this._pluggables),k=I.next();!k.done;k=I.next()){var R=k.value,xe={message:x,timestamp:Date.now()};R.pushLogs([xe])}}catch(ke){n={error:ke}}finally{try{k&&!k.done&&(r=I.return)&&r.call(I)}finally{if(n)throw n.error}}}},e.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._log.apply(this,Np([wl.INFO],t))},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._log.apply(this,Np([wl.INFO],t))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._log.apply(this,Np([wl.WARN],t))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._log.apply(this,Np([wl.ERROR],t))},e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._log.apply(this,Np([wl.DEBUG],t))},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._log.apply(this,Np([wl.VERBOSE],t))},e.prototype.addPluggable=function(t){t&&"Logging"===t.getCategoryName()&&(this._pluggables.push(t),t.configure(this._config))},e.prototype.listPluggables=function(){return this._pluggables},e.LOG_LEVEL=null,e}(),P1=new Yl("Amplify"),jz=function(){function e(){this._components=[],this._config={},this._modules={},this.Auth=null,this.Analytics=null,this.API=null,this.Credentials=null,this.Storage=null,this.I18n=null,this.Cache=null,this.PubSub=null,this.Interactions=null,this.Pushnotification=null,this.UI=null,this.XR=null,this.Predictions=null,this.DataStore=null,this.Geo=null,this.Logger=Yl,this.ServiceWorker=null}return e.prototype.register=function(t){P1.debug("component registered in amplify",t),this._components.push(t),"function"==typeof t.getModuleName?(this._modules[t.getModuleName()]=t,this[t.getModuleName()]=t):P1.debug("no getModuleName method for component",t),t.configure(this._config)},e.prototype.configure=function(t){var n=this;return t?(this._config=Object.assign(this._config,t),P1.debug("amplify config",this._config),Object.entries(this._modules).forEach(function(r){var i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}(r,2),s=i[1];Object.keys(s).forEach(function(l){n._modules[l]&&(s[l]=n._modules[l])})}),this._components.map(function(r){r.configure(n._config)}),this._config):this._config},e.prototype.addPluggable=function(t){t&&t.getCategory&&"function"==typeof t.getCategory&&this._components.map(function(n){n.addPluggable&&"function"==typeof n.addPluggable&&n.addPluggable(t)})},e}(),kp=new jz,Uz=(e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,n)},function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),Hz=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},$z=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Hz(arguments[t]));return e},o_=new Yl("Util"),fh=function(e){function t(n){var r=e.call(this,n)||this;return r.nonRetryable=!0,r}return Uz(t,e),t}(Error);function WP(e,t,n,r){return void 0===r&&(r=1),function(e,t,n,r){return new(n||(n=Promise))(function(o,s){function l(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(l,g)}d((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function(){var i,o;return function(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}(this,function(s){switch(s.label){case 0:if("function"!=typeof e)throw Error("functionToRetry must be a function");o_.debug(e.name+" attempt #"+r+" with this vars: "+JSON.stringify(t)),s.label=1;case 1:return s.trys.push([1,3,,8]),[4,e.apply(void 0,$z(t))];case 2:return[2,s.sent()];case 3:if(i=s.sent(),o_.debug("error on "+e.name,i),function(e){return e&&e.nonRetryable}(i))throw o_.debug(e.name+" non retryable error",i),i;return o=n(r,t,i),o_.debug(e.name+" retrying in "+o+" ms"),!1===o?[3,6]:[4,new Promise(function(l){return setTimeout(l,o)})];case 4:return s.sent(),[4,WP(e,t,n,r+1)];case 5:return[2,s.sent()];case 6:throw i;case 7:return[3,8];case 8:return[2]}})})}var JP=function(e,t,n){return void 0===n&&(n=3e5),WP(e,t,function Wz(e){return void 0===e&&(e=3e5),function(r){var i=100*Math.pow(2,r)+100*Math.random();return!(i>e)&&i}}(n))},D1="aws-amplify/4.6.0",hh={userAgent:D1+" js",product:"",navigator:null,isReactNative:!1};typeof navigator<"u"&&navigator.product&&("ReactNative"===(hh.product=navigator.product||"",hh.navigator=navigator||null,navigator.product)?(hh.userAgent=D1+" react-native",hh.isReactNative=!0):(hh.userAgent=D1+" js",hh.isReactNative=!1));for(var Ac=function(e){return""+hh.userAgent+(e||"")},KP=U(4578),YP={},A1={},kg=0;kg<256;kg++){var Fg=kg.toString(16).toLowerCase();1===Fg.length&&(Fg="0"+Fg),YP[kg]=Fg,A1[Fg]=kg}function uf(e){for(var t="",n=0;n<e.byteLength;n++)t+=YP[e[n]];return t}var ph=U(8762),lf={clockOffset:0,getDateWithClockOffset:function(){return lf.clockOffset?new Date((new Date).getTime()+lf.clockOffset):new Date},getClockOffset:function(){return lf.clockOffset},getHeaderStringFromDate:function(e){return void 0===e&&(e=lf.getDateWithClockOffset()),e.toISOString().replace(/[:\-]|\.\d{3}/g,"")},getDateFromHeaderString:function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}(e.match(/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2}).+/),7),r=t[2],i=t[3],o=t[4],s=t[5],l=t[6];return new Date(Date.UTC(Number(t[1]),Number(r)-1,Number(i),Number(o),Number(s),Number(l)))},isClockSkewed:function(e){return Math.abs(e.getTime()-lf.getDateWithClockOffset().getTime())>=3e5},isClockSkewError:function(e){if(!e.response||!e.response.headers)return!1;var t=e.response.headers;return Boolean(["BadRequestException","InvalidSignatureException"].includes(t["x-amzn-errortype"])&&(t.date||t.Date))},setClockOffset:function(e){lf.clockOffset=e}},el=function(){return el=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},el.apply(this,arguments)},XP=new Yl("Signer"),a_="AWS4-HMAC-SHA256",zg=function(e,t){var n=new KP.Sha256(e);return n.update(t),n.digestSync()},QP=function(e){var t=e||"",n=new KP.Sha256;return n.update(t),uf(n.digestSync())},eB=function(e){return e&&0!==e.length?e.split("&").map(function(t){var n=t.split("=");if(1===n.length)return t;var r=function(e){return e.replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}(n[1]);return n[0]+"="+r}).sort(function(t,n){var r=t.split("=")[0],i=n.split("=")[0];return r===i?t<n?-1:1:r<i?-1:1}).join("&"):""},tB=function(e){return e&&0!==Object.keys(e).length?Object.keys(e).map(function(t){return{key:t.toLowerCase(),value:e[t]?e[t].trim().replace(/\s+/g," "):""}}).sort(function(t,n){return t.key<n.key?-1:1}).map(function(t){return t.key+":"+t.value}).join("\n")+"\n":""},eD=function(e){return Object.keys(e).map(function(t){return t.toLowerCase()}).sort().join(";")},tD=function(e){var t=(0,ph.Qc)(e.url);return[e.method||"/",encodeURIComponent(t.pathname).replace(/%2F/gi,"/"),eB(t.query),tB(e.headers),eD(e.headers),QP(e.data)].join("\n")},nD=function(e){var i=((0,ph.Qc)(e.url).host.match(/([^\.]+)\.(?:([^\.]*)\.)?amazonaws\.com$/)||[]).slice(1,3);return"es"===i[1]&&(i=i.reverse()),{service:e.service||i[0],region:e.region||i[1]}},rD=function(e,t,n){return[e,t,n,"aws4_request"].join("/")},iD=function(e,t,n,r){return[e,n,r,QP(t)].join("\n")},oD=function(e,t,n){XP.debug(n);var i=zg("AWS4"+e,t),o=zg(i,n.region),s=zg(o,n.service);return zg(s,"aws4_request")},aD=function(e,t){return uf(zg(e,t))},rB=function(){function e(){}return e.sign=function(t,n,r){void 0===r&&(r=null),t.headers=t.headers||{};var o=lf.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),s=o.substr(0,8),l=(0,ph.Qc)(t.url);t.headers.host=l.host,t.headers["x-amz-date"]=o,n.session_token&&(t.headers["X-Amz-Security-Token"]=n.session_token);var g=tD(t);XP.debug(g);var d=r||nD(t),_=rD(s,d.region,d.service),x=iD(a_,g,o,_),b=oD(n.secret_key,s,d),I=aD(b,x),k=function(e,t,n,r,i){return["AWS4-HMAC-SHA256 Credential="+t+"/"+n,"SignedHeaders="+r,"Signature="+i].join(", ")}(0,n.access_key,_,eD(t.headers),I);return t.headers.Authorization=k,t},e.signUrl=function(t,n,r,i){var o="object"==typeof t?t.url:t,s="object"==typeof t?t.method:"GET",l="object"==typeof t?t.body:void 0,g=lf.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),d=g.substr(0,8),b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}((0,ph.Qc)(o,!0,!0),["search"]),k={host:b.host},R=r||nD({url:(0,ph.WU)(b)}),xe=R.region,ke=R.service,ut=rD(d,xe,ke),et=n.session_token&&"iotdevicegateway"!==ke,Ot=el(el(el({"X-Amz-Algorithm":a_,"X-Amz-Credential":[n.access_key,ut].join("/"),"X-Amz-Date":g.substr(0,16)},et?{"X-Amz-Security-Token":""+n.session_token}:{}),i?{"X-Amz-Expires":""+i}:{}),{"X-Amz-SignedHeaders":Object.keys(k).join(",")}),Gt=tD({method:s,url:(0,ph.WU)(el(el({},b),{query:el(el({},b.query),Ot)})),headers:k,data:l}),Bn=iD(a_,Gt,g,ut),ai=oD(n.secret_key,d,{region:xe,service:ke}),zo=aD(ai,Bn),Ho=el({"X-Amz-Signature":zo},n.session_token&&{"X-Amz-Security-Token":n.session_token});return(0,ph.WU)({protocol:b.protocol,slashes:!0,hostname:b.hostname,port:b.port,pathname:b.pathname,query:el(el(el({},b.query),Ot),Ho)})},e}(),Bg=function(){return Bg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Bg.apply(this,arguments)},sD=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},uD=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(sD(arguments[t]));return e},yd=new Yl("Hub"),iB=typeof Symbol<"u"&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",aB=function(){function e(t){this.listeners=[],this.patterns=[],this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=t}return e.prototype.remove=function(t,n){if(t instanceof RegExp){var r=this.patterns.find(function(o){return o.pattern.source===t.source});if(!r)return void yd.warn("No listeners for "+t);this.patterns=uD(this.patterns.filter(function(o){return o!==r}))}else{var i=this.listeners[t];if(!i)return void yd.warn("No listeners for "+t);this.listeners[t]=uD(i.filter(function(o){return o.callback!==n}))}},e.prototype.dispatch=function(t,n,r,i){void 0===r&&(r=""),this.protectedChannels.indexOf(t)>-1&&(i===iB||yd.warn("WARNING: "+t+" is protected and dispatching on it can have unintended consequences"));var s={channel:t,payload:Bg({},n),source:r,patternInfo:[]};try{this._toListeners(s)}catch(l){yd.error(l)}},e.prototype.listen=function(t,n,r){var o,i=this;if(void 0===r&&(r="noname"),function oB(e){return void 0!==e.onHubCapsule}(n))yd.warn("WARNING onHubCapsule is Deprecated. Please pass in a callback."),o=n.onHubCapsule.bind(n);else{if("function"!=typeof n)throw new Error("No callback supplied to Hub");o=n}if(t instanceof RegExp)this.patterns.push({pattern:t,callback:o});else{var s=this.listeners[t];s||(this.listeners[t]=s=[]),s.push({name:r,callback:o})}return function(){i.remove(t,o)}},e.prototype._toListeners=function(t){var n=t.channel,r=t.payload,i=this.listeners[n];if(i&&i.forEach(function(s){yd.debug("Dispatching to "+n+" with ",r);try{s.callback(t)}catch(l){yd.error(l)}}),this.patterns.length>0){if(!r.message)return void yd.warn("Cannot perform pattern matching without a message key");var o=r.message;this.patterns.forEach(function(s){var l=o.match(s.pattern);if(l){var d=sD(l).slice(1),_=Bg(Bg({},t),{patternInfo:d});try{s.callback(_)}catch(x){yd.error(x)}}})}},e}(),sB=new aB("__default__"),s_=function(){return s_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s_.apply(this,arguments)},uB=new Yl("Parser"),lD=function(e){var r,t={};return e.aws_mobile_analytics_app_id&&(t.Analytics={AWSPinpoint:{appId:e.aws_mobile_analytics_app_id,region:e.aws_mobile_analytics_app_region}}),(e.aws_cognito_identity_pool_id||e.aws_user_pools_id)&&(t.Auth={userPoolId:e.aws_user_pools_id,userPoolWebClientId:e.aws_user_pools_web_client_id,region:e.aws_cognito_region,identityPoolId:e.aws_cognito_identity_pool_id,identityPoolRegion:e.aws_cognito_region,mandatorySignIn:"enable"===e.aws_mandatory_sign_in,signUpVerificationMethod:e.aws_cognito_sign_up_verification_method||"code"}),r=e.aws_user_files_s3_bucket?{AWSS3:{bucket:e.aws_user_files_s3_bucket,region:e.aws_user_files_s3_bucket_region,dangerouslyConnectToHttpEndpointForTesting:e.aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing}}:e?e.Storage||e:{},e.Logging&&(t.Logging=s_(s_({},e.Logging),{region:e.aws_project_region})),e.geo&&(t.Geo=Object.assign({},e.geo),e.geo.amazon_location_service&&(t.Geo={AmazonLocationService:e.geo.amazon_location_service})),t.Analytics=Object.assign({},t.Analytics,e.Analytics),t.Auth=Object.assign({},t.Auth,e.Auth),t.Storage=Object.assign({},r),t.Logging=Object.assign({},t.Logging,e.Logging),uB.debug("parse config",e,"to amplifyconfig",t),t},lB=U(7691),cD=U.n(lB),mh={},cB=function(){function e(){}return e.setItem=function(t,n){return mh[t]=n,mh[t]},e.getItem=function(t){return Object.prototype.hasOwnProperty.call(mh,t)?mh[t]:void 0},e.removeItem=function(t){return delete mh[t]},e.clear=function(){return mh={}},e}(),dB=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.amplify.test-ls",1),this.storageWindow.removeItem("aws.amplify.test-ls")}catch{this.storageWindow=cB}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),fB=[{type:"text/plain",ext:"txt"},{type:"text/html",ext:"html"},{type:"text/javascript",ext:"js"},{type:"text/css",ext:"css"},{type:"text/csv",ext:"csv"},{type:"text/yaml",ext:"yml"},{type:"text/yaml",ext:"yaml"},{type:"text/calendar",ext:"ics"},{type:"text/calendar",ext:"ical"},{type:"image/apng",ext:"apng"},{type:"image/bmp",ext:"bmp"},{type:"image/gif",ext:"gif"},{type:"image/x-icon",ext:"ico"},{type:"image/x-icon",ext:"cur"},{type:"image/jpeg",ext:"jpg"},{type:"image/jpeg",ext:"jpeg"},{type:"image/jpeg",ext:"jfif"},{type:"image/jpeg",ext:"pjp"},{type:"image/jpeg",ext:"pjpeg"},{type:"image/png",ext:"png"},{type:"image/svg+xml",ext:"svg"},{type:"image/tiff",ext:"tif"},{type:"image/tiff",ext:"tiff"},{type:"image/webp",ext:"webp"},{type:"application/json",ext:"json"},{type:"application/xml",ext:"xml"},{type:"application/x-sh",ext:"sh"},{type:"application/zip",ext:"zip"},{type:"application/x-rar-compressed",ext:"rar"},{type:"application/x-tar",ext:"tar"},{type:"application/x-bzip",ext:"bz"},{type:"application/x-bzip2",ext:"bz2"},{type:"application/pdf",ext:"pdf"},{type:"application/java-archive",ext:"jar"},{type:"application/msword",ext:"doc"},{type:"application/vnd.ms-excel",ext:"xls"},{type:"application/vnd.ms-excel",ext:"xlsx"},{type:"message/rfc822",ext:"eml"}],hB=function(e){return void 0===e&&(e={}),0===Object.keys(e).length},pB=function(e,t,n){if(!e||!e.sort)return!1;var r=n&&"desc"===n?-1:1;return e.sort(function(i,o){var s=i[t],l=o[t];return typeof l>"u"?typeof s>"u"?0:1*r:typeof s>"u"||s<l?-1*r:s>l?1*r:0}),!0},mB=function(e,t){var n=Object.assign({},e);return t&&("string"==typeof t?delete n[t]:t.forEach(function(r){delete n[r]})),n},gB=function(e,t){void 0===t&&(t="application/octet-stream");var n=e.toLowerCase(),r=fB.filter(function(i){return n.endsWith("."+i.ext)});return r.length>0?r[0].type:t},yB=function(e){var t=e.toLowerCase();return!!t.startsWith("text/")||"application/json"===t||"application/xml"===t||"application/sh"===t},vB=function(){for(var e="",t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=32;n>0;n-=1)e+=t[Math.floor(Math.random()*t.length)];return e},dD=function(e){if(e.isResolved)return e;var t=!0,n=!1,r=!1,i=e.then(function(o){return r=!0,t=!1,o},function(o){throw n=!0,t=!1,o});return i.isFullfilled=function(){return r},i.isPending=function(){return t},i.isRejected=function(){return n},i},_B=function(){if(typeof self>"u")return!1;var e=self;return typeof e.WorkerGlobalScope<"u"&&self instanceof e.WorkerGlobalScope},jg=function(){return{isBrowser:typeof window<"u"&&typeof window.document<"u",isNode:typeof process<"u"&&null!=process.versions&&null!=process.versions.node}},fD=function(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),!R1(e))return e;var r={};for(var i in e)e.hasOwnProperty(i)&&(r[t.includes(i)?i:i[0].toLowerCase()+i.slice(1)]=n.includes(i)?e[i]:fD(e[i],t,n));return r},hD=function(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),!R1(e))return e;var r={};for(var i in e)e.hasOwnProperty(i)&&(r[t.includes(i)?i:i[0].toUpperCase()+i.slice(1)]=n.includes(i)?e[i]:hD(e[i],t,n));return r},R1=function(e){return!(!(e instanceof Object)||e instanceof Array||e instanceof Function||e instanceof Number||e instanceof String||e instanceof Boolean)};!function(){function e(){}e.isEmpty=hB,e.sortByField=pB,e.objectLessAttributes=mB,e.filenameToContentType=gB,e.isTextFile=yB,e.generateRandomString=vB,e.makeQuerablePromise=dD,e.isWebWorker=_B,e.browserOrNode=jg,e.transferKeyToLowerCase=fD,e.transferKeyToUpperCase=hD,e.isStrictObject=R1}();var cf=new Yl("CognitoCredentials"),xB=new Promise(function(e,t){return jg().isBrowser?window.gapi&&window.gapi.auth2&&window.gapi.auth2?(cf.debug("google api already loaded"),e()):void setTimeout(function(){return e()},2e3):(cf.debug("not in the browser, directly resolved"),e())}),EB=function(){function e(){this.initialized=!1,this.refreshGoogleToken=this.refreshGoogleToken.bind(this),this._refreshGoogleTokenImpl=this._refreshGoogleTokenImpl.bind(this)}return e.prototype.refreshGoogleToken=function(){return function(e,t,n,r){return new(n||(n=Promise))(function(o,s){function l(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(l,g)}d((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function(){return function(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}(this,function(t){switch(t.label){case 0:return this.initialized?[3,2]:(cf.debug("need to wait for the Google SDK loaded"),[4,xB]);case 1:t.sent(),this.initialized=!0,cf.debug("finish waiting"),t.label=2;case 2:return[2,this._refreshGoogleTokenImpl()]}})})},e.prototype._refreshGoogleTokenImpl=function(){var t=null;return jg().isBrowser&&(t=window.gapi&&window.gapi.auth2?window.gapi.auth2:null),t?new Promise(function(n,r){t.getAuthInstance().then(function(i){i||(cf.debug("google Auth undefined"),r(new fh("google Auth undefined")));var o=i.currentUser.get();o.isSignedIn()?(cf.debug("refreshing the google access token"),o.reloadAuthResponse().then(function(s){n({token:s.id_token,expires_at:s.expires_at})}).catch(function(s){r(s&&"network_error"===s.error?"Network error reloading google auth response":new fh("Failed to reload google auth response"))})):r(new fh("User is not signed in with Google"))}).catch(function(i){cf.debug("Failed to refresh google token",i),r(new fh("Failed to refresh google token"))})}):(cf.debug("no gapi auth2 available"),Promise.reject("no gapi auth2 available"))},e}(),gh=new Yl("CognitoCredentials"),IB=new Promise(function(e,t){return jg().isBrowser?window.FB?(gh.debug("FB SDK already loaded"),e()):void setTimeout(function(){return e()},2e3):(gh.debug("not in the browser, directly resolved"),e())}),TB=function(){function e(){this.initialized=!1,this.refreshFacebookToken=this.refreshFacebookToken.bind(this),this._refreshFacebookTokenImpl=this._refreshFacebookTokenImpl.bind(this)}return e.prototype.refreshFacebookToken=function(){return function(e,t,n,r){return new(n||(n=Promise))(function(o,s){function l(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(l,g)}d((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function(){return function(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}(this,function(t){switch(t.label){case 0:return this.initialized?[3,2]:(gh.debug("need to wait for the Facebook SDK loaded"),[4,IB]);case 1:t.sent(),this.initialized=!0,gh.debug("finish waiting"),t.label=2;case 2:return[2,this._refreshFacebookTokenImpl()]}})})},e.prototype._refreshFacebookTokenImpl=function(){var t=null;if(jg().isBrowser&&(t=window.FB),!t){var n="no fb sdk available";return gh.debug(n),Promise.reject(new fh(n))}return new Promise(function(r,i){t.getLoginStatus(function(o){if(o&&o.authResponse){var l=o.authResponse,g=l.accessToken,x=1e3*l.expiresIn+(new Date).getTime();g||(gh.debug(s="the jwtToken is undefined"),i(new fh(s))),r({token:g,expires_at:x})}else{var s;gh.debug(s="no response from facebook when refreshing the jwt token"),i(new fh(s))}},{scope:"public_profile,email"})})},e}(),PB=new EB,DB=new TB;function O1(e,t,n,r){return new(n||(n=Promise))(function(o,s){function l(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(l,g)}d((r=r.apply(e,t||[])).next())})}function L1(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}var l_=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce({},t)}}(l_||(l_={})),l_))(),c_=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce({},t)}}(c_||(c_={})),c_))(),d_=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce({},t)}}(d_||(d_={})),d_))(),f_=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce({},t)}}(f_||(f_={})),f_))(),yD=function(){function e(t){this.statusCode=t.statusCode,this.headers=t.headers||{},this.body=t.body}return e.isInstance=function(t){return!!t&&("number"==typeof t.statusCode&&"object"==typeof t.headers)},e}(),yh=function(){return yh=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},yh.apply(this,arguments)};function AB(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}var Fp=function(){function e(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?":"!==t.protocol.substr(-1)?t.protocol+":":t.protocol:"https:",this.path=t.path?"/"!==t.path.charAt(0)?"/"+t.path:t.path:"/"}return e.isInstance=function(t){return!!t&&("method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers)},e.prototype.clone=function(){var t=new e(yh(yh({},this),{headers:yh({},this.headers)}));return t.query&&(t.query=function MB(e){return Object.keys(e).reduce(function(t,n){var r,i=e[n];return yh(yh({},t),((r={})[n]=Array.isArray(i)?function RB(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(AB(arguments[t]));return e}(i):i,r))},{})}(t.query)),t},e}(),UB=function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r,i,o,l,g,d,_,x,b,I,k,R,xe,ke;return Lt(this,function(ut){switch(ut.label){case 0:return r=[Ce({},e)],ke={},[4,hi(e.body,t)];case 1:switch(n=Ce.apply(void 0,r.concat([(ke.body=ut.sent(),ke)])),o="UnknownError",o=Ra(e,n.body)){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":return[3,6];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return l=[{}],[4,p_(n,t)];case 3:return i=Ce.apply(void 0,[Ce.apply(void 0,l.concat([ut.sent()])),{name:o,$metadata:ft(e)}]),[3,19];case 4:return g=[{}],[4,Ta(n,t)];case 5:return i=Ce.apply(void 0,[Ce.apply(void 0,g.concat([ut.sent()])),{name:o,$metadata:ft(e)}]),[3,19];case 6:return d=[{}],[4,oj(n,t)];case 7:return i=Ce.apply(void 0,[Ce.apply(void 0,d.concat([ut.sent()])),{name:o,$metadata:ft(e)}]),[3,19];case 8:return _=[{}],[4,Pa(n,t)];case 9:return i=Ce.apply(void 0,[Ce.apply(void 0,_.concat([ut.sent()])),{name:o,$metadata:ft(e)}]),[3,19];case 10:return x=[{}],[4,Ja(n,t)];case 11:return i=Ce.apply(void 0,[Ce.apply(void 0,x.concat([ut.sent()])),{name:o,$metadata:ft(e)}]),[3,19];case 12:return b=[{}],[4,xl(n,t)];case 13:return i=Ce.apply(void 0,[Ce.apply(void 0,b.concat([ut.sent()])),{name:o,$metadata:ft(e)}]),[3,19];case 14:return I=[{}],[4,fs(n,t)];case 15:return i=Ce.apply(void 0,[Ce.apply(void 0,I.concat([ut.sent()])),{name:o,$metadata:ft(e)}]),[3,19];case 16:return k=[{}],[4,Da(n,t)];case 17:return i=Ce.apply(void 0,[Ce.apply(void 0,k.concat([ut.sent()])),{name:o,$metadata:ft(e)}]),[3,19];case 18:o=(R=n.body).code||R.Code||o,i=Ce(Ce({},R),{name:""+o,message:R.message||R.Message||o,$fault:"client",$metadata:ft(e)}),ut.label=19;case 19:return i.message=xe=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(xe),i))]}})})},GB=function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r,i,o,l,g,d,_,x,b,I,k,R,xe,ke;return Lt(this,function(ut){switch(ut.label){case 0:return r=[Ce({},e)],ke={},[4,hi(e.body,t)];case 1:switch(n=Ce.apply(void 0,r.concat([(ke.body=ut.sent(),ke)])),o="UnknownError",o=Ra(e,n.body)){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return l=[{}],[4,p_(n,t)];case 3:return i=Ce.apply(void 0,[Ce.apply(void 0,l.concat([ut.sent()])),{name:o,$metadata:ft(e)}]),[3,19];case 4:return g=[{}],[4,Ta(n,t)];case 5:return i=Ce.apply(void 0,[Ce.apply(void 0,g.concat([ut.sent()])),{name:o,$metadata:ft(e)}]),[3,19];case 6:return d=[{}],[4,Pa(n,t)];case 7:return i=Ce.apply(void 0,[Ce.apply(void 0,d.concat([ut.sent()])),{name:o,$metadata:ft(e)}]),[3,19];case 8:return _=[{}],[4,k1(n,t)];case 9:return i=Ce.apply(void 0,[Ce.apply(void 0,_.concat([ut.sent()])),{name:o,$metadata:ft(e)}]),[3,19];case 10:return x=[{}],[4,Ja(n,t)];case 11:return i=Ce.apply(void 0,[Ce.apply(void 0,x.concat([ut.sent()])),{name:o,$metadata:ft(e)}]),[3,19];case 12:return b=[{}],[4,xl(n,t)];case 13:return i=Ce.apply(void 0,[Ce.apply(void 0,b.concat([ut.sent()])),{name:o,$metadata:ft(e)}]),[3,19];case 14:return I=[{}],[4,fs(n,t)];case 15:return i=Ce.apply(void 0,[Ce.apply(void 0,I.concat([ut.sent()])),{name:o,$metadata:ft(e)}]),[3,19];case 16:return k=[{}],[4,Da(n,t)];case 17:return i=Ce.apply(void 0,[Ce.apply(void 0,k.concat([ut.sent()])),{name:o,$metadata:ft(e)}]),[3,19];case 18:o=(R=n.body).code||R.Code||o,i=Ce(Ce({},R),{name:""+o,message:R.message||R.Message||o,$fault:"client",$metadata:ft(e)}),ut.label=19;case 19:return i.message=xe=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(xe),i))]}})})},p_=function(e,t){return Wt(void 0,void 0,void 0,function(){var r;return Lt(this,function(o){return r=Hj(e.body,t),[2,Ce({name:"ExternalServiceException",$fault:"client",$metadata:ft(e)},r)]})})},Ta=function(e,t){return Wt(void 0,void 0,void 0,function(){var r;return Lt(this,function(o){return r=e5(e.body,t),[2,Ce({name:"InternalErrorException",$fault:"server",$metadata:ft(e)},r)]})})},oj=function(e,t){return Wt(void 0,void 0,void 0,function(){var r;return Lt(this,function(o){return r=t5(e.body,t),[2,Ce({name:"InvalidIdentityPoolConfigurationException",$fault:"client",$metadata:ft(e)},r)]})})},Pa=function(e,t){return Wt(void 0,void 0,void 0,function(){var r;return Lt(this,function(o){return r=n5(e.body,t),[2,Ce({name:"InvalidParameterException",$fault:"client",$metadata:ft(e)},r)]})})},k1=function(e,t){return Wt(void 0,void 0,void 0,function(){var r;return Lt(this,function(o){return r=r5(e.body,t),[2,Ce({name:"LimitExceededException",$fault:"client",$metadata:ft(e)},r)]})})},Ja=function(e,t){return Wt(void 0,void 0,void 0,function(){var r;return Lt(this,function(o){return r=f5(e.body,t),[2,Ce({name:"NotAuthorizedException",$fault:"client",$metadata:ft(e)},r)]})})},xl=function(e,t){return Wt(void 0,void 0,void 0,function(){var r;return Lt(this,function(o){return r=p5(e.body,t),[2,Ce({name:"ResourceConflictException",$fault:"client",$metadata:ft(e)},r)]})})},fs=function(e,t){return Wt(void 0,void 0,void 0,function(){var r;return Lt(this,function(o){return r=m5(e.body,t),[2,Ce({name:"ResourceNotFoundException",$fault:"client",$metadata:ft(e)},r)]})})},Da=function(e,t){return Wt(void 0,void 0,void 0,function(){var r;return Lt(this,function(o){return r=x5(e.body,t),[2,Ce({name:"TooManyRequestsException",$fault:"client",$metadata:ft(e)},r)]})})},Ug=function(e,t){return Object.entries(e).reduce(function(n,r){var i,o=$r(r,2),s=o[0],l=o[1];return null===l?n:Ce(Ce({},n),((i={})[s]=l,i))},{})},jj=function(e,t){return{AccessKeyId:null!=e.AccessKeyId?e.AccessKeyId:void 0,Expiration:null!=e.Expiration?new Date(Math.round(1e3*e.Expiration)):void 0,SecretKey:null!=e.SecretKey?e.SecretKey:void 0,SessionToken:null!=e.SessionToken?e.SessionToken:void 0}},Hj=function(e,t){return{message:null!=e.message?e.message:void 0}},e5=function(e,t){return{message:null!=e.message?e.message:void 0}},t5=function(e,t){return{message:null!=e.message?e.message:void 0}},n5=function(e,t){return{message:null!=e.message?e.message:void 0}},r5=function(e,t){return{message:null!=e.message?e.message:void 0}},f5=function(e,t){return{message:null!=e.message?e.message:void 0}},p5=function(e,t){return{message:null!=e.message?e.message:void 0}},m5=function(e,t){return{message:null!=e.message?e.message:void 0}},x5=function(e,t){return{message:null!=e.message?e.message:void 0}},ft=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},Aa=function(e,t,n,r,i){return Wt(void 0,void 0,void 0,function(){var o,l,_;return Lt(this,function(x){switch(x.label){case 0:return[4,e.endpoint()];case 1:return o=x.sent(),_={protocol:void 0===(l=o.protocol)?"https":l,hostname:o.hostname,port:o.port,method:"POST",path:n,headers:t},void 0!==r&&(_.hostname=r),void 0!==i&&(_.body=i),[2,new Fp(_)]}})})},hi=function(e,t){return function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then(function(n){return t.utf8Encoder(n)})}(e,t).then(function(n){return n.length?JSON.parse(n):{}})},Ra=function(e,t){var r=function(o){var s=o;return s.indexOf(":")>=0&&(s=s.split(":")[0]),s.indexOf("#")>=0&&(s=s.split("#")[1]),s},i=("x-amzn-errortype",Object.keys(e.headers).find(function(l){return l.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==i?r(e.headers[i]):void 0!==t.code?r(t.code):void 0!==t.__type?r(t.__type):""},m_=function(){return m_=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},m_.apply(this,arguments)};function ID(e,t,n,r){return new(n||(n=Promise))(function(o,s){function l(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(l,g)}d((r=r.apply(e,t||[])).next())})}function TD(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}var A5={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},R5={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function DD(e,t,n){return{applyToStack:function(r){r.add(function(e,t){return function(n,r){return function(i){return ID(void 0,void 0,void 0,function(){var o,s;return TD(this,function(l){switch(l.label){case 0:return[4,n(i)];case 1:return o=l.sent().response,[4,t(o,e)];case 2:return s=l.sent(),[2,{response:o,output:s}]}})})}}}(e,n),A5),r.add(function(e,t){return function(n,r){return function(i){return ID(void 0,void 0,void 0,function(){var o;return TD(this,function(s){switch(s.label){case 0:return[4,t(i.input,e)];case 1:return o=s.sent(),[2,n(m_(m_({},i),{request:o}))]}})})}}}(e,t),R5)}}}var Rc=function(){return Rc=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},Rc.apply(this,arguments)};function M5(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function V1(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(M5(arguments[t]));return e}var v_=function(){var e=[],t=[],n=new Set,s=function(_){return e.forEach(function(x){_.add(x.middleware,Rc({},x))}),t.forEach(function(x){_.addRelativeTo(x.middleware,Rc({},x))}),_},l=function(_){var x=[];return _.before.forEach(function(b){0===b.before.length&&0===b.after.length?x.push(b):x.push.apply(x,V1(l(b)))}),x.push(_),_.after.reverse().forEach(function(b){0===b.before.length&&0===b.after.length?x.push(b):x.push.apply(x,V1(l(b)))}),x},d={add:function(_,x){void 0===x&&(x={});var b=x.name,I=x.override,k=Rc({step:"initialize",priority:"normal",middleware:_},x);if(b){if(n.has(b)){if(!I)throw new Error("Duplicate middleware name '"+b+"'");var R=e.findIndex(function(ke){return ke.name===b}),xe=e[R];if(xe.step!==k.step||xe.priority!==k.priority)throw new Error('"'+b+'" middleware with '+xe.priority+" priority in "+xe.step+" step cannot be overridden by same-name middleware with "+k.priority+" priority in "+k.step+" step.");e.splice(R,1)}n.add(b)}e.push(k)},addRelativeTo:function(_,x){var b=x.name,I=x.override,k=Rc({middleware:_},x);if(b){if(n.has(b)){if(!I)throw new Error("Duplicate middleware name '"+b+"'");var R=t.findIndex(function(ke){return ke.name===b}),xe=t[R];if(xe.toMiddleware!==k.toMiddleware||xe.relation!==k.relation)throw new Error('"'+b+'" middleware '+xe.relation+' "'+xe.toMiddleware+'" middleware cannot be overridden by same-name middleware '+k.relation+' "'+k.toMiddleware+'" middleware.');t.splice(R,1)}n.add(b)}t.push(k)},clone:function(){return s(v_())},use:function(_){_.applyToStack(d)},remove:function(_){return"string"==typeof _?function(_){var x=!1,b=function(I){return!I.name||I.name!==_||(x=!0,n.delete(_),!1)};return e=e.filter(b),t=t.filter(b),x}(_):function(_){var x=!1,b=function(I){return I.middleware!==_||(x=!0,I.name&&n.delete(I.name),!1)};return e=e.filter(b),t=t.filter(b),x}(_)},removeByTag:function(_){var x=!1,b=function(I){var k=I.tags,R=I.name;return!k||!k.includes(_)||(R&&n.delete(R),x=!0,!1)};return e=e.filter(b),t=t.filter(b),x},concat:function(_){var x=s(v_());return x.use(_),x},applyToStack:s,resolve:function(_,x){var b,I;try{for(var k=function U1(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(function(){var _=[],x=[],b={};e.forEach(function(k){var R=Rc(Rc({},k),{before:[],after:[]});R.name&&(b[R.name]=R),_.push(R)}),t.forEach(function(k){var R=Rc(Rc({},k),{before:[],after:[]});R.name&&(b[R.name]=R),x.push(R)}),x.forEach(function(k){if(k.toMiddleware){var R=b[k.toMiddleware];if(void 0===R)throw new Error(k.toMiddleware+" is not found when adding "+(k.name||"anonymous")+" middleware "+k.relation+" "+k.toMiddleware);"after"===k.relation&&R.after.push(k),"before"===k.relation&&R.before.push(k)}});var I=function(_){return _.sort(function(x,b){return AD[b.step]-AD[x.step]||RD[b.priority||"normal"]-RD[x.priority||"normal"]})}(_).map(l).reduce(function(k,R){return k.push.apply(k,V1(R)),k},[]);return I.map(function(k){return k.middleware})}().reverse()),R=k.next();!R.done;R=k.next())_=(0,R.value)(_,x)}catch(ke){b={error:ke}}finally{try{R&&!R.done&&(I=k.return)&&I.call(k)}finally{if(b)throw b.error}}return _}};return d},AD={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},RD={high:3,normal:2,low:1},O5=function(){function e(t){this.middlewareStack=v_(),this.config=t}return e.prototype.send=function(t,n,r){var o="function"==typeof n?n:r,s=t.resolveMiddleware(this.middlewareStack,this.config,"function"!=typeof n?n:void 0);if(!o)return s(t).then(function(l){return l.output});s(t).then(function(l){return o(null,l.output)},function(l){return o(l)}).catch(function(){})},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),MD=function e(){this.middlewareStack=v_()},G1=function(e,t){return(G1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])})(e,t)};function N5(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function k5(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(N5(arguments[t]));return e}var b_=function(){var e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,k5([null],arguments)),n=new t;return Object.setPrototypeOf(n,e.prototype),n};b_.prototype=Object.create(String.prototype,{constructor:{value:b_,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(b_,String),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}(function L5(e,t){function n(){this.constructor=e}G1(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(t,e),t.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},t.prototype.toJSON=function(){return e.prototype.toString.call(this)},t.fromObject=function(n){return n instanceof t?n:new t(n instanceof String||"string"==typeof n?n:JSON.stringify(n))}}(b_);var H1=function(e){function t(n){var r=e.call(this)||this;return r.input=n,r}return Zt(t,e),t.prototype.resolveMiddleware=function(n,r,i){this.middlewareStack.use(DD(r,this.serialize,this.deserialize));var o=n.concat(this.middlewareStack),_=r.requestHandler;return o.resolve(function(x){return _.handle(x.request,i||{})},{logger:r.logger,clientName:"CognitoIdentityClient",commandName:"GetCredentialsForIdentityCommand",inputFilterSensitiveLog:l_.filterSensitiveLog,outputFilterSensitiveLog:c_.filterSensitiveLog})},t.prototype.serialize=function(n,r){return function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r;return Lt(this,function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetCredentialsForIdentity"},r=JSON.stringify(function(e,t){return Ce(Ce(Ce({},null!=e.CustomRoleArn&&{CustomRoleArn:e.CustomRoleArn}),null!=e.IdentityId&&{IdentityId:e.IdentityId}),null!=e.Logins&&{Logins:Ug(e.Logins,t)})}(e,t)),[2,Aa(t,n,"/",void 0,r)]})})}(n,r)},t.prototype.deserialize=function(n,r){return function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r,i;return Lt(this,function(o){switch(o.label){case 0:return e.statusCode>=300?[2,UB(e,t)]:[4,hi(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{Credentials:null!=e.Credentials?jj(e.Credentials):void 0,IdentityId:null!=e.IdentityId?e.IdentityId:void 0}}(n),i=Ce({$metadata:ft(e)},r),[2,Promise.resolve(i)]}})})}(n,r)},t}(MD),$1=function(e,t){return($1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])})(e,t)},x_=function(e){function t(n,r){void 0===r&&(r=!0);var i=e.call(this,n)||this;return i.tryNextLink=r,i}return function F5(e,t){function n(){this.constructor=e}$1(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error);function FD(e){return Promise.all(Object.keys(e).reduce(function(t,n){var r=e[n];return t.push("string"==typeof r?[n,r]:r().then(function(i){return[n,i]})),t},[])).then(function(t){return t.reduce(function(n,r){var i=function gD(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}(r,2);return n[i[0]]=i[1],n},{})})}function Gg(e){var t=this;return function(){return O1(t,void 0,void 0,function(){var n,r,i,o,s,l,g,_,x,b,I,k;return L1(this,function(R){switch(R.label){case 0:return x=(_=e.client).send,b=H1.bind,k={CustomRoleArn:e.customRoleArn,IdentityId:e.identityId},e.logins?[4,FD(e.logins)]:[3,2];case 1:return I=R.sent(),[3,3];case 2:I=void 0,R.label=3;case 3:return[4,x.apply(_,[new(b.apply(H1,[void 0,(k.Logins=I,k)]))])];case 4:return n=R.sent().Credentials,r=void 0===n?function j5(){throw new x_("Response from Amazon Cognito contained no credentials")}():n,o=void 0===(i=r.AccessKeyId)?function B5(){throw new x_("Response from Amazon Cognito contained no access key ID")}():i,s=r.Expiration,g=void 0===(l=r.SecretKey)?function U5(){throw new x_("Response from Amazon Cognito contained no secret key")}():l,[2,{identityId:e.identityId,accessKeyId:o,secretAccessKey:g,sessionToken:r.SessionToken,expiration:s}]}})})}}var Hg=function(e){function t(n){var r=e.call(this)||this;return r.input=n,r}return Zt(t,e),t.prototype.resolveMiddleware=function(n,r,i){this.middlewareStack.use(DD(r,this.serialize,this.deserialize));var o=n.concat(this.middlewareStack),_=r.requestHandler;return o.resolve(function(x){return _.handle(x.request,i||{})},{logger:r.logger,clientName:"CognitoIdentityClient",commandName:"GetIdCommand",inputFilterSensitiveLog:d_.filterSensitiveLog,outputFilterSensitiveLog:f_.filterSensitiveLog})},t.prototype.serialize=function(n,r){return function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r;return Lt(this,function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetId"},r=JSON.stringify(function(e,t){return Ce(Ce(Ce({},null!=e.AccountId&&{AccountId:e.AccountId}),null!=e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId}),null!=e.Logins&&{Logins:Ug(e.Logins,t)})}(e,t)),[2,Aa(t,n,"/",void 0,r)]})})}(n,r)},t.prototype.deserialize=function(n,r){return function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r,i;return Lt(this,function(o){switch(o.label){case 0:return e.statusCode>=300?[2,GB(e,t)]:[4,hi(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{IdentityId:null!=e.IdentityId?e.IdentityId:void 0}}(n),i=Ce({$metadata:ft(e)},r),[2,Promise.resolve(i)]}})})}(n,r)},t}(MD),q1="IdentityIds",V5=function(){function e(t){void 0===t&&(t="aws:cognito-identity-ids"),this.dbName=t}return e.prototype.getItem=function(t){return this.withObjectStore("readonly",function(n){var r=n.get(t);return new Promise(function(i){r.onerror=function(){return i(null)},r.onsuccess=function(){return i(r.result?r.result.value:null)}})}).catch(function(){return null})},e.prototype.removeItem=function(t){return this.withObjectStore("readwrite",function(n){var r=n.delete(t);return new Promise(function(i,o){r.onerror=function(){return o(r.error)},r.onsuccess=function(){return i()}})})},e.prototype.setItem=function(t,n){return this.withObjectStore("readwrite",function(r){var i=r.put({id:t,value:n});return new Promise(function(o,s){i.onerror=function(){return s(i.error)},i.onsuccess=function(){return o()}})})},e.prototype.getDb=function(){var t=self.indexedDB.open(this.dbName,1);return new Promise(function(n,r){t.onsuccess=function(){n(t.result)},t.onerror=function(){r(t.error)},t.onblocked=function(){r(new Error("Unable to access DB"))},t.onupgradeneeded=function(){var i=t.result;i.onerror=function(){r(new Error("Failed to create object store"))},i.createObjectStore(q1,{keyPath:"id"})}})},e.prototype.withObjectStore=function(t,n){return this.getDb().then(function(r){var i=r.transaction(q1,t);return i.oncomplete=function(){return r.close()},new Promise(function(o,s){i.onerror=function(){return s(i.error)},o(n(i.objectStore(q1)))}).catch(function(o){throw r.close(),o})})},e}(),G5=function(){function e(t){void 0===t&&(t={}),this.store=t}return e.prototype.getItem=function(t){return t in this.store?this.store[t]:null},e.prototype.removeItem=function(t){delete this.store[t]},e.prototype.setItem=function(t,n){this.store[t]=n},e}(),H5=new G5;var J5=U(9801);function BD(e,t,n,r){return new(n||(n=Promise))(function(o,s){function l(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(l,g)}d((r=r.apply(e,t||[])).next())})}function jD(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}var vh=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,X5)},X5=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function e6(e){return void 0===e&&(e=0),new Promise(function(t,n){e&&setTimeout(function(){var r=new Error("Request did not complete within "+e+" ms");r.name="TimeoutError",n(r)},e)})}for(var t6=function(){function e(t){this.requestTimeout=(void 0===t?{}:t).requestTimeout}return e.prototype.destroy=function(){},e.prototype.handle=function(t,n){var i=(void 0===n?{}:n).abortSignal,o=this.requestTimeout;if(i?.aborted){var s=new Error("Request aborted");return s.name="AbortError",Promise.reject(s)}var l=t.path;if(t.query){var g=function Q5(e){var t,n,r=[];try{for(var i=function K1(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var s=o.value,l=e[s];if(s=vh(s),Array.isArray(l))for(var g=0,d=l.length;g<d;g++)r.push(s+"="+vh(l[g]));else{var _=s;(l||"string"==typeof l)&&(_+="="+vh(l)),r.push(_)}}}catch(x){t={error:x}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}(t.query);g&&(l+="?"+g)}var d=t.port,_=t.method,x=t.protocol+"//"+t.hostname+(d?":"+d:"")+l,I={body:"GET"===_||"HEAD"===_?void 0:t.body,headers:new Headers(t.headers),method:_};typeof AbortController<"u"&&(I.signal=i);var k=new Request(x,I),R=[fetch(k).then(function(xe){var ke,ut,et=xe.headers,Ot={};try{for(var Gt=function Z1(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(et.entries()),Bn=Gt.next();!Bn.done;Bn=Gt.next()){var ai=Bn.value;Ot[ai[0]]=ai[1]}}catch(Ho){ke={error:Ho}}finally{try{Bn&&!Bn.done&&(ut=Gt.return)&&ut.call(Gt)}finally{if(ke)throw ke.error}}return void 0!==xe.body?{response:new yD({headers:Ot,statusCode:xe.status,body:xe.body})}:xe.blob().then(function(Ho){return{response:new yD({headers:Ot,statusCode:xe.status,body:Ho})}})}),e6(o)];return i&&R.push(new Promise(function(xe,ke){i.onabort=function(){var ut=new Error("Request aborted");ut.name="AbortError",ke(ut)}})),Promise.race(R)},e}(),_h={},zp=new Array(64),zs=0,$g="A".charCodeAt(0),Y1="Z".charCodeAt(0);zs+$g<=Y1;zs++){var df=String.fromCharCode(zs+$g);_h[df]=zs,zp[zs]=df}for(zs=0,$g="a".charCodeAt(0),Y1="z".charCodeAt(0);zs+$g<=Y1;zs++)df=String.fromCharCode(zs+$g),_h[df]=qg=zs+26,zp[qg]=df;for(zs=0;zs<10;zs++){var qg;_h[zs.toString(10)]=zs+52,df=zs.toString(10),_h[df]=qg=zs+52,zp[qg]=df}function VD(e){var t=e.length/4*3;"=="===e.substr(-2)?t-=2:"="===e.substr(-1)&&t--;for(var n=new ArrayBuffer(t),r=new DataView(n),i=0;i<e.length;i+=4){for(var o=0,s=0,l=i,g=i+3;l<=g;l++)"="!==e[l]?(o|=_h[e[l]]<<6*(g-l),s+=6):o>>=6;var d=i/4*3;o>>=s%8;for(var _=Math.floor(s/8),x=0;x<_;x++){var b=8*(_-x-1);r.setUint8(d+x,(o&255<<b)>>b)}}return new Uint8Array(n)}function s6(e){return new Promise(function(t,n){var r=new FileReader;r.onloadend=function(){var i;if(2!==r.readyState)return n(new Error("Reader aborted too early"));var o=null!==(i=r.result)&&void 0!==i?i:"",s=o.indexOf(",");t(o.substring(s>-1?s+1:o.length))},r.onabort=function(){return n(new Error("Read aborted"))},r.onerror=function(){return n(r.error)},r.readAsDataURL(e)})}_h["+"]=62,zp[62]="+",_h["/"]=63,zp[63]="/";var C_=function(){return C_=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},C_.apply(this,arguments)};function Q1(e,t,n,r){return new(n||(n=Promise))(function(o,s){function l(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(l,g)}d((r=r.apply(e,t||[])).next())})}function I_(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}function l6(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}var f6={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},g6=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],y6=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],v6=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],_6=[500,502,503,504],HD=function(e){var t,n;return 429===(null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||y6.includes(e.name)||1==(null===(n=e.$retryable)||void 0===n?void 0:n.throttling)},E6=U(9444),L6=function(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))},N6=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return g6.includes(e.name)}(e)||HD(e)||function(e){var t;return v6.includes(e.name)||_6.includes((null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||0)}(e))},k6=function(){function e(t,n){var r,i,o;this.maxAttemptsProvider=t,this.mode="standard",this.retryDecider=null!==(r=n?.retryDecider)&&void 0!==r?r:N6,this.delayDecider=null!==(i=n?.delayDecider)&&void 0!==i?i:L6,this.retryQuota=null!==(o=n?.retryQuota)&&void 0!==o?o:function(e){var n=500,r=function(l){return"TimeoutError"===l.name?10:5},i=function(l){return r(l)<=n};return Object.freeze({hasRetryTokens:i,retrieveRetryTokens:function(l){if(!i(l))throw new Error("No retry token available");var g=r(l);return n-=g,g},releaseRetryTokens:function(l){n+=l??1,n=Math.min(n,500)}})}()}return e.prototype.shouldRetry=function(t,n,r){return n<r&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)},e.prototype.getMaxAttempts=function(){return Q1(this,void 0,void 0,function(){var t;return I_(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return t=r.sent(),[3,3];case 2:return r.sent(),t=3,[3,3];case 3:return[2,t]}})})},e.prototype.retry=function(t,n){return Q1(this,void 0,void 0,function(){var r,i,o,s,l,g,d,_;return I_(this,function(x){switch(x.label){case 0:return i=0,o=0,[4,this.getMaxAttempts()];case 1:s=x.sent(),Fp.isInstance(l=n.request)&&(l.headers["amz-sdk-invocation-id"]=(0,E6.v4)()),g=function(){var b,I,k,R,xe;return I_(this,function(ke){switch(ke.label){case 0:return ke.trys.push([0,2,,5]),Fp.isInstance(l)&&(l.headers["amz-sdk-request"]="attempt="+(i+1)+"; max="+s),[4,t(n)];case 1:return b=ke.sent(),I=b.response,k=b.output,d.retryQuota.releaseRetryTokens(r),k.$metadata.attempts=i+1,k.$metadata.totalRetryDelay=o,[2,{value:{response:I,output:k}}];case 2:return R=ke.sent(),i++,d.shouldRetry(R,i,s)?(r=d.retryQuota.retrieveRetryTokens(R),xe=d.delayDecider(HD(R)?500:100,i),o+=xe,[4,new Promise(function(ut){return setTimeout(ut,xe)})]):[3,4];case 3:return ke.sent(),[2,"continue"];case 4:throw R.$metadata||(R.$metadata={}),R.$metadata.attempts=i,R.$metadata.totalRetryDelay=o,R;case 5:return[2]}})},d=this,x.label=2;case 2:return[5,g()];case 3:return"object"==typeof(_=x.sent())?[2,_.value]:[3,2];case 4:return[2]}})})},e}();var $6=U(7230),tx=U.n($6),KD=U(2622),YD="cognito-identity.{region}.amazonaws.com",Y6=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),X6=new Set(["cn-north-1","cn-northwest-1"]),Q6=new Set(["us-iso-east-1"]),eU=new Set(["us-isob-east-1"]),tU=new Set(["us-gov-east-1","us-gov-west-1"]);function QD(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}var e2={apiVersion:"2014-06-30",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-northeast-1":n={hostname:"cognito-identity.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"cognito-identity.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"cognito-identity.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"cognito-identity.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"cognito-identity.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":n={hostname:"cognito-identity.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"cognito-identity.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"cognito-identity.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"cognito-identity.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"cognito-identity.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"cognito-identity.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"cognito-identity.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-east-1":n={hostname:"cognito-identity-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-east-2":n={hostname:"cognito-identity-fips.us-east-2.amazonaws.com",partition:"aws",signingRegion:"us-east-2"};break;case"fips-us-gov-west-1":n={hostname:"cognito-identity-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"fips-us-west-2":n={hostname:"cognito-identity-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"sa-east-1":n={hostname:"cognito-identity.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"cognito-identity.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"cognito-identity.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-west-1":n={hostname:"cognito-identity.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-west-1":n={hostname:"cognito-identity.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"cognito-identity.us-west-2.amazonaws.com",partition:"aws"};break;default:Y6.has(e)&&(n={hostname:YD.replace("{region}",e),partition:"aws"}),X6.has(e)&&(n={hostname:"cognito-identity.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Q6.has(e)&&(n={hostname:"cognito-identity.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),eU.has(e)&&(n={hostname:"cognito-identity.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),tU.has(e)&&(n={hostname:"cognito-identity.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:YD.replace("{region}",e),partition:"aws"})}return Promise.resolve(Ce({signingService:"cognito-identity"},n))},serviceId:"Cognito Identity",urlParser:function(e){var l,t=new URL(e),n=t.hostname,r=t.pathname,i=t.port,o=t.protocol,s=t.search;return s&&(l=function rU(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var i=function rx(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e.split("&")),o=i.next();!o.done;o=i.next()){var l=QD(o.value.split("="),2),g=l[0],d=l[1],_=void 0===d?null:d;g=decodeURIComponent(g),_&&(_=decodeURIComponent(_)),g in r?Array.isArray(r[g])?r[g].push(_):r[g]=[r[g],_]:r[g]=_}}catch(x){t={error:x}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(s)),{hostname:n,port:i?parseInt(i):void 0,protocol:o,path:r,query:l}}},oU=Ce(Ce({},e2),{runtime:"browser",base64Decoder:VD,base64Encoder:function r6(e){for(var t="",n=0;n<e.length;n+=3){for(var r=0,i=0,o=n,s=Math.min(n+3,e.length);o<s;o++)r|=e[o]<<8*(s-o-1),i+=8;var l=Math.ceil(i/6);r<<=6*l-i;for(var g=1;g<=l;g++){var d=6*(l-g);t+=zp[(r&63<<d)>>d]}t+="==".slice(0,4-l)}return t},bodyLengthChecker:function U6(e){if("string"==typeof e){for(var t=e.length,n=t-1;n>=0;n--){var r=e.charCodeAt(n);r>127&&r<=2047?t++:r>2047&&r<=65535&&(t+=2)}return t}return"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:void 0},credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:function(e){var t=e.serviceId,n=e.clientVersion;return function(){return function V6(e,t,n,r){return new(n||(n=Promise))(function(o,s){function l(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(l,g)}d((r=r.apply(e,t||[])).next())})}(void 0,void 0,void 0,function(){var r,i,o,s,l,g,d,_,x;return function G6(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}(this,function(b){return r=null!==(o=window?.navigator)&&void 0!==o&&o.userAgent?tx().parse(window.navigator.userAgent):void 0,i=[["aws-sdk-js",n],["os/"+((null===(s=r?.os)||void 0===s?void 0:s.name)||"other"),null===(l=r?.os)||void 0===l?void 0:l.version],["lang/js"],["md/browser",(null!==(d=null===(g=r?.browser)||void 0===g?void 0:g.name)&&void 0!==d?d:"unknown")+"_"+(null!==(x=null===(_=r?.browser)||void 0===_?void 0:_.version)&&void 0!==x?x:"unknown")]],t&&i.push(["api/"+t,n]),[2,i]})})}}({serviceId:e2.serviceId,clientVersion:"3.6.1"}),maxAttempts:3,region:function(){return Promise.reject("Region is missing")},requestHandler:new t6,sha256:J5.Sha256,streamCollector:function(e){return"function"==typeof Blob&&e instanceof Blob?function o6(e){return BD(this,void 0,void 0,function(){var t,n;return jD(this,function(r){switch(r.label){case 0:return[4,s6(e)];case 1:return t=r.sent(),n=VD(t),[2,new Uint8Array(n)]}})})}(e):function a6(e){return BD(this,void 0,void 0,function(){var t,n,r,i,o,s,l;return jD(this,function(g){switch(g.label){case 0:t=new Uint8Array(0),n=e.getReader(),r=!1,g.label=1;case 1:return r?[3,3]:[4,n.read()];case 2:return i=g.sent(),o=i.done,(s=i.value)&&(l=t,(t=new Uint8Array(l.length+s.length)).set(l),t.set(s,l.length)),r=o,[3,1];case 3:return[2,t]}})})}(e)},utf8Decoder:KD.fromUtf8,utf8Encoder:KD.toUtf8}),jp=function(){return jp=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},jp.apply(this,arguments)};var cU=function(e){var t=e.endpoint;if("string"==typeof t){var r=Promise.resolve((0,e.urlParser)(t));return function(){return r}}if("object"==typeof t){var i=Promise.resolve(t);return function(){return i}}return t},dU=function(e){return function aU(e,t,n,r){return new(n||(n=Promise))(function(o,s){function l(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(l,g)}d((r=r.apply(e,t||[])).next())})}(void 0,void 0,void 0,function(){var t,n,r,o,s;return function sU(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}(this,function(l){switch(l.label){case 0:return n=void 0===(t=e.tls)||t,[4,e.region()];case 1:if(r=l.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");return[4,e.regionInfoProvider(r)];case 2:if(!(o=(null!==(s=l.sent())&&void 0!==s?s:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((n?"https:":"http:")+"//"+o)]}})})},mU=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},Up=function(){return Up=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},Up.apply(this,arguments)};var r2="content-length",bU={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},wU=function(e){return{applyToStack:function(t){t.add(function _U(e){var t=this;return function(n){return function(r){return function gU(e,t,n,r){return new(n||(n=Promise))(function(o,s){function l(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(l,g)}d((r=r.apply(e,t||[])).next())})}(t,void 0,void 0,function(){var i,o,s,l,g;return function yU(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}(this,function(d){return Fp.isInstance(i=r.request)&&(s=i.headers,(o=i.body)&&-1===Object.keys(s).map(function(_){return _.toLowerCase()}).indexOf(r2)&&void 0!==(l=e(o))&&(i.headers=Up(Up({},i.headers),((g={})[r2]=String(l),g)))),[2,n(Up(Up({},r),{request:i}))]})})}}}(e.bodyLengthChecker),bU)}}};var IU={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},TU=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return function xU(e,t,n,r){return new(n||(n=Promise))(function(o,s){function l(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(l,g)}d((r=r.apply(e,t||[])).next())})}(void 0,void 0,void 0,function(){var r,i;return function EU(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}(this,function(s){return Fp.isInstance(n.request)?(r=n.request,(void 0===(i=(e.requestHandler.metadata||{}).handlerProtocol)?"":i).indexOf("h2")>=0&&!r.headers[":authority"]?(delete r.headers.host,r.headers[":authority"]=""):r.headers.host||(r.headers.host=r.hostname),[2,t(n)]):[2,t(n)]})})}}}(e),IU)}}};var MU=function(){return function(e,t){return function(n){return function DU(e,t,n,r){return new(n||(n=Promise))(function(o,s){function l(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(l,g)}d((r=r.apply(e,t||[])).next())})}(void 0,void 0,void 0,function(){var r,i,o,s,l,g,d,_,x;return function AU(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}(this,function(b){switch(b.label){case 0:return r=t.clientName,i=t.commandName,o=t.inputFilterSensitiveLog,s=t.logger,l=t.outputFilterSensitiveLog,[4,e(n)];case 1:return g=b.sent(),s?("function"==typeof s.info&&(_=(d=g.output).$metadata,x=function PU(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(d,["$metadata"]),s.info({clientName:r,commandName:i,input:o(n.input),output:l(x),metadata:_})),[2,g]):[2,g]}})})}}},OU={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},N_=function(){return N_=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},N_.apply(this,arguments)};var vd=function(){return vd=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},vd.apply(this,arguments)};function _d(e,t,n,r){return new(n||(n=Promise))(function(o,s){function l(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(l,g)}d((r=r.apply(e,t||[])).next())})}function bd(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}function wd(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function zU(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}var c2="X-Amz-Date",d2="X-Amz-Signature",f2="X-Amz-Security-Token",h2="authorization",p2=c2.toLowerCase(),$U=[h2,p2,"date"],qU=d2.toLowerCase(),cx="x-amz-content-sha256",WU=f2.toLowerCase(),ZU={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},JU=/^proxy-/,KU=/^sec-/,dx="AWS4-HMAC-SHA256",YU="AWS4-HMAC-SHA256-PAYLOAD",m2="aws4_request",Vp={},z_=[];function fx(e,t,n){return e+"/"+t+"/"+n+"/"+m2}function g2(e,t,n){var r=new e(t);return r.update(n),r.digest()}function y2(e,t,n){var r,i,o=e.headers,s={};try{for(var l=wd(Object.keys(o).sort()),g=l.next();!g.done;g=l.next()){var d=g.value,_=d.toLowerCase();(_ in ZU||t?.has(_)||JU.test(_)||KU.test(_))&&(!n||n&&!n.has(_))||(s[_]=o[d].trim().replace(/\s+/g," "))}}catch(x){r={error:x}}finally{try{g&&!g.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return s}function hx(e,t){var n=e.headers,r=e.body;return _d(this,void 0,void 0,function(){var i,o,s,l,g,d,_;return bd(this,function(x){switch(x.label){case 0:try{for(i=wd(Object.keys(n)),o=i.next();!o.done;o=i.next())if((s=o.value).toLowerCase()===cx)return[2,n[s]]}catch(b){d={error:b}}finally{try{o&&!o.done&&(_=i.return)&&_.call(i)}finally{if(d)throw d.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||function(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)}(r)?((l=new t).update(r),g=uf,[4,l.digest()]):[3,3];case 2:return[2,g.apply(void 0,[x.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}})})}function v2(e){var t=e.headers,n=e.query,r=function FU(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["headers","query"]);return vd(vd({},r),{headers:vd({},t),query:n?o8(n):void 0})}function o8(e){return Object.keys(e).reduce(function(t,n){var r,i=e[n];return vd(vd({},t),((r={})[n]=Array.isArray(i)?function BU(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(zU(arguments[t]));return e}(i):i,r))},{})}function _2(e){var t,n;e="function"==typeof e.clone?e.clone():v2(e);try{for(var r=wd(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;$U.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}var l8=function(){function e(t){var n=t.applyChecksum,r=t.credentials,i=t.region,s=t.sha256,l=t.uriEscapePath,g=void 0===l||l;this.service=t.service,this.sha256=s,this.uriEscapePath=g,this.applyChecksum="boolean"!=typeof n||n,this.regionProvider=c8(i),this.credentialProvider=d8(r)}return e.prototype.presign=function(t,n){return void 0===n&&(n={}),_d(this,void 0,void 0,function(){var r,i,o,s,l,g,d,_,x,b,I,k,R,xe,ke,ut,et,Ot,Gt,Bn,ai,zo,Ho,hs;return bd(this,function(Bo){switch(Bo.label){case 0:return i=void 0===(r=n.signingDate)?new Date:r,s=void 0===(o=n.expiresIn)?3600:o,l=n.unsignableHeaders,g=n.unhoistableHeaders,d=n.signableHeaders,_=n.signingRegion,x=n.signingService,[4,this.credentialProvider()];case 1:return b=Bo.sent(),null==_?[3,2]:(k=_,[3,4]);case 2:return[4,this.regionProvider()];case 3:k=Bo.sent(),Bo.label=4;case 4:return I=k,R=B_(i),xe=R.longDate,ke=R.shortDate,s>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(ut=fx(ke,I,x??this.service),et=function a8(e,t){var n,r,i;void 0===t&&(t={});var o="function"==typeof e.clone?e.clone():v2(e),s=o.headers,l=o.query,g=void 0===l?{}:l;try{for(var d=wd(Object.keys(s)),_=d.next();!_.done;_=d.next()){var x=_.value,b=x.toLowerCase();"x-amz-"===b.substr(0,6)&&(null===(i=t.unhoistableHeaders)||void 0===i||!i.has(b))&&(g[x]=s[x],delete s[x])}}catch(I){n={error:I}}finally{try{_&&!_.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}return vd(vd({},e),{headers:s,query:g})}(_2(t),{unhoistableHeaders:g}),b.sessionToken&&(et.query[f2]=b.sessionToken),et.query["X-Amz-Algorithm"]=dx,et.query["X-Amz-Credential"]=b.accessKeyId+"/"+ut,et.query[c2]=xe,et.query["X-Amz-Expires"]=s.toString(10),Ot=y2(et,l,d),et.query["X-Amz-SignedHeaders"]=b2(Ot),Gt=et.query,Bn=d2,ai=this.getSignature,zo=[xe,ut,this.getSigningKey(b,I,ke,x)],Ho=this.createCanonicalRequest,hs=[et,Ot],[4,hx(t,this.sha256)]);case 5:return[4,ai.apply(this,zo.concat([Ho.apply(this,hs.concat([Bo.sent()]))]))];case 6:return Gt[Bn]=Bo.sent(),[2,et]}})})},e.prototype.sign=function(t,n){return _d(this,void 0,void 0,function(){return bd(this,function(r){return"string"==typeof t?[2,this.signString(t,n)]:t.headers&&t.payload?[2,this.signEvent(t,n)]:[2,this.signRequest(t,n)]})})},e.prototype.signEvent=function(t,n){var r=t.headers,i=t.payload,o=n.signingDate,s=void 0===o?new Date:o,l=n.priorSignature,g=n.signingRegion,d=n.signingService;return _d(this,void 0,void 0,function(){var _,x,b,k,R,xe,ke,ut,et,Ot;return bd(this,function(Gt){switch(Gt.label){case 0:return null==g?[3,1]:(x=g,[3,3]);case 1:return[4,this.regionProvider()];case 2:x=Gt.sent(),Gt.label=3;case 3:return _=x,b=B_(s),k=b.longDate,R=fx(b.shortDate,_,d??this.service),[4,hx({headers:{},body:i},this.sha256)];case 4:return xe=Gt.sent(),(ke=new this.sha256).update(r),et=uf,[4,ke.digest()];case 5:return ut=et.apply(void 0,[Gt.sent()]),Ot=[YU,k,R,l,ut,xe].join("\n"),[2,this.signString(Ot,{signingDate:s,signingRegion:_,signingService:d})]}})})},e.prototype.signString=function(t,n){var r=void 0===n?{}:n,i=r.signingDate,o=void 0===i?new Date:i,s=r.signingRegion,l=r.signingService;return _d(this,void 0,void 0,function(){var g,d,_,x,b,I,k,R;return bd(this,function(xe){switch(xe.label){case 0:return[4,this.credentialProvider()];case 1:return g=xe.sent(),null==s?[3,2]:(_=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:_=xe.sent(),xe.label=4;case 4:return d=_,x=B_(o).shortDate,k=(I=this.sha256).bind,[4,this.getSigningKey(g,d,x,l)];case 5:return(b=new(k.apply(I,[void 0,xe.sent()]))).update(t),R=uf,[4,b.digest()];case 6:return[2,R.apply(void 0,[xe.sent()])]}})})},e.prototype.signRequest=function(t,n){var r=void 0===n?{}:n,i=r.signingDate,o=void 0===i?new Date:i,s=r.signableHeaders,l=r.unsignableHeaders,g=r.signingRegion,d=r.signingService;return _d(this,void 0,void 0,function(){var _,x,b,I,k,R,xe,ke,ut,et,Ot;return bd(this,function(Gt){switch(Gt.label){case 0:return[4,this.credentialProvider()];case 1:return _=Gt.sent(),null==g?[3,2]:(b=g,[3,4]);case 2:return[4,this.regionProvider()];case 3:b=Gt.sent(),Gt.label=4;case 4:return x=b,I=_2(t),k=B_(o),R=k.longDate,ke=fx(xe=k.shortDate,x,d??this.service),I.headers[p2]=R,_.sessionToken&&(I.headers[WU]=_.sessionToken),[4,hx(I,this.sha256)];case 5:return ut=Gt.sent(),!function i8(e,t){var n,r;e=e.toLowerCase();try{for(var i=wd(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}(cx,I.headers)&&this.applyChecksum&&(I.headers[cx]=ut),et=y2(I,l,s),[4,this.getSignature(R,ke,this.getSigningKey(_,x,xe,d),this.createCanonicalRequest(I,et,ut))];case 6:return Ot=Gt.sent(),I.headers[h2]=dx+" Credential="+_.accessKeyId+"/"+ke+", SignedHeaders="+b2(et)+", Signature="+Ot,[2,I]}})})},e.prototype.createCanonicalRequest=function(t,n,r){var i=Object.keys(n).sort();return t.method+"\n"+this.getCanonicalPath(t)+"\n"+function n8(e){var t,n,r=e.query,i=void 0===r?{}:r,o=[],s={},l=function(x){if(x.toLowerCase()===qU)return"continue";o.push(x);var b=i[x];"string"==typeof b?s[x]=vh(x)+"="+vh(b):Array.isArray(b)&&(s[x]=b.slice(0).sort().reduce(function(I,k){return I.concat([vh(x)+"="+vh(k)])},[]).join("&"))};try{for(var g=wd(Object.keys(i).sort()),d=g.next();!d.done;d=g.next())l(d.value)}catch(x){t={error:x}}finally{try{d&&!d.done&&(n=g.return)&&n.call(g)}finally{if(t)throw t.error}}return o.map(function(x){return s[x]}).filter(function(x){return x}).join("&")}(t)+"\n"+i.map(function(o){return o+":"+n[o]}).join("\n")+"\n\n"+i.join(";")+"\n"+r},e.prototype.createStringToSign=function(t,n,r){return _d(this,void 0,void 0,function(){var i,o;return bd(this,function(s){switch(s.label){case 0:return(i=new this.sha256).update(r),[4,i.digest()];case 1:return o=s.sent(),[2,dx+"\n"+t+"\n"+n+"\n"+uf(o)]}})})},e.prototype.getCanonicalPath=function(t){var n=t.path;return this.uriEscapePath?"/"+encodeURIComponent(n.replace(/^\//,"")).replace(/%2F/g,"/"):n},e.prototype.getSignature=function(t,n,r,i){return _d(this,void 0,void 0,function(){var o,s,l,g,d;return bd(this,function(_){switch(_.label){case 0:return[4,this.createStringToSign(t,n,i)];case 1:return o=_.sent(),g=(l=this.sha256).bind,[4,r];case 2:return(s=new(g.apply(l,[void 0,_.sent()]))).update(o),d=uf,[4,s.digest()];case 3:return[2,d.apply(void 0,[_.sent()])]}})})},e.prototype.getSigningKey=function(t,n,r,i){return function(e,t,n,r,i){return _d(void 0,void 0,void 0,function(){var o,s,l,g,d,x,b,I;return bd(this,function(k){switch(k.label){case 0:return[4,g2(e,t.secretAccessKey,t.accessKeyId)];case 1:if(o=k.sent(),(s=n+":"+r+":"+i+":"+uf(o)+":"+t.sessionToken)in Vp)return[2,Vp[s]];for(z_.push(s);z_.length>50;)delete Vp[z_.shift()];l="AWS4"+t.secretAccessKey,k.label=2;case 2:k.trys.push([2,7,8,9]),g=wd([n,r,i,m2]),d=g.next(),k.label=3;case 3:return d.done?[3,6]:[4,g2(e,l,d.value)];case 4:l=k.sent(),k.label=5;case 5:return d=g.next(),[3,3];case 6:return[3,9];case 7:return x=k.sent(),b={error:x},[3,9];case 8:try{d&&!d.done&&(I=g.return)&&I.call(g)}finally{if(b)throw b.error}return[7];case 9:return[2,Vp[s]=l]}})})}(this.sha256,t,r,n,i||this.service)},e}(),B_=function(e){var t=function s8(e){return function u8(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.substr(0,8)}},b2=function(e){return Object.keys(e).sort().join(";")},c8=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},d8=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e};function px(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}var Gp=function(){return Gp=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},Gp.apply(this,arguments)};function x2(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function E2(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(x2(arguments[t]));return e}var gx="user-agent",w8=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,yx=function(e){var t=x2(e,2),n=t[0],r=t[1],i=n.indexOf("/"),o=n.substring(0,i),s=n.substring(i+1);return"api"===o&&(s=s.toLowerCase()),[o,s,r].filter(function(l){return l&&l.length>0}).map(function(l){return l?.replace(w8,"_")}).join("/")},E8={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},S8=function(e){return{applyToStack:function(t){t.add(function(e){return function(t,n){return function(r){return function y8(e,t,n,r){return new(n||(n=Promise))(function(o,s){function l(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(l,g)}d((r=r.apply(e,t||[])).next())})}(void 0,void 0,void 0,function(){var i,o,s,l,g,d,_,x;return function v8(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}(this,function(b){switch(b.label){case 0:return Fp.isInstance(i=r.request)?(o=i.headers,s=(null===(_=n?.userAgent)||void 0===_?void 0:_.map(yx))||[],[4,e.defaultUserAgentProvider()]):[2,t(r)];case 1:return l=b.sent().map(yx),g=(null===(x=e?.customUserAgent)||void 0===x?void 0:x.map(yx))||[],o["x-amz-user-agent"]=E2(l,s,g).join(" "),d=E2(l.filter(function(I){return I.startsWith("aws-sdk-")}),g).join(" "),"browser"!==e.runtime&&d&&(o[gx]=o[gx]?o[gx]+" "+d:d),[2,t(Gp(Gp({},r),{request:i}))]}})})}}}(e),E8)}}},vx=function(e){function t(n){var r=this,o=function(e){if(!e.region)throw new Error("Region is missing");return jp(jp({},e),{region:mU(e.region)})}(Ce(Ce({},oU),n)),s=function(e){var t;return jp(jp({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:e.endpoint?cU(e):function(){return dU(e)},isCustomEndpoint:!!e.endpoint})}(o),l=function f8(e){var d,t=this,r=px(e.credentials||e.credentialDefaultProvider(e)),i=e.signingEscapePath,o=void 0===i||i,s=e.systemClockOffset,l=void 0===s?e.systemClockOffset||0:s,g=e.sha256;return d=e.signer?px(e.signer):function(){return px(e.region)().then(function(_){return function NU(e,t,n,r){return new(n||(n=Promise))(function(o,s){function l(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(l,g)}d((r=r.apply(e,t||[])).next())})}(t,void 0,void 0,function(){return function kU(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}(this,function(x){switch(x.label){case 0:return[4,e.regionInfoProvider(_)];case 1:return[2,[x.sent()||{},_]]}})})}).then(function(_){var x=function l2(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}(_,2),b=x[0],R=b.signingService;return e.signingRegion=e.signingRegion||b.signingRegion||x[1],e.signingName=e.signingName||R||e.serviceId,new l8({credentials:r,region:e.signingRegion,service:e.signingName,sha256:g,uriEscapePath:o})})},N_(N_({},e),{systemClockOffset:l,signingEscapePath:o,credentials:r,signer:d})}(s),g=function(e){var t=function(e){if(void 0===e&&(e=3),"number"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}(e.maxAttempts);return C_(C_({},e),{maxAttempts:t,retryStrategy:e.retryStrategy||new k6(t)})}(l),_=function _8(e){return Gp(Gp({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}(g);return(r=e.call(this,_)||this).config=_,r.middlewareStack.use(function(e){return{applyToStack:function(t){t.add(function(e){return function(t,n){return function(r){return Q1(void 0,void 0,void 0,function(){var i;return I_(this,function(o){return!(null===(i=e?.retryStrategy)||void 0===i)&&i.mode&&(n.userAgent=function c6(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l6(arguments[t]));return e}(n.userAgent||[],[["cfg/retry-mode",e.retryStrategy.mode]])),[2,e.retryStrategy.retry(t,r)]})})}}}(e),f6)}}}(r.config)),r.middlewareStack.use(wU(r.config)),r.middlewareStack.use(TU(r.config)),r.middlewareStack.use({applyToStack:function(t){t.add(MU(),OU)}}),r.middlewareStack.use(S8(r.config)),r}return Zt(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(O5),U_=function(){return U_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},U_.apply(this,arguments)},zu=function(e,t,n,r){return new(n||(n=Promise))(function(o,s){function l(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(l,g)}d((r=r.apply(e,t||[])).next())})},Bu=function(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}},pi=new Yl("Credentials"),T8=function(){function e(t){this._gettingCredPromise=null,this._refreshHandlers={},this.Auth=void 0,this.configure(t),this._refreshHandlers.google=PB.refreshGoogleToken,this._refreshHandlers.facebook=DB.refreshFacebookToken}return e.prototype.getModuleName=function(){return"Credentials"},e.prototype.getCredSource=function(){return this._credentials_source},e.prototype.configure=function(t){if(!t)return this._config||{};this._config=Object.assign({},this._config,t);var n=this._config.refreshHandlers;return n&&(this._refreshHandlers=U_(U_({},this._refreshHandlers),n)),this._storage=this._config.storage,this._storage||(this._storage=(new dB).getStorage()),this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),this._config},e.prototype.get=function(){return pi.debug("getting credentials"),this._pickupCredentials()},e.prototype._getCognitoIdentityIdStorageKey=function(t){return"CognitoIdentityId-"+t},e.prototype._pickupCredentials=function(){return pi.debug("picking up credentials"),this._gettingCredPromise&&this._gettingCredPromise.isPending()?pi.debug("getting old cred promise"):(pi.debug("getting new cred promise"),this._gettingCredPromise=dD(this._keepAlive())),this._gettingCredPromise},e.prototype._keepAlive=function(){return zu(this,void 0,void 0,function(){var t,n,r,i,o,s,g;return Bu(this,function(d){switch(d.label){case 0:if(pi.debug("checking if credentials exists and not expired"),(t=this._credentials)&&!this._isExpired(t)&&!this._isPastTTL())return pi.debug("credentials not changed and not expired, directly return"),[2,Promise.resolve(t)];if(pi.debug("need to get a new credential or refresh the existing one"),!(r=void 0===(n=this.Auth)?kp.Auth:n)||"function"!=typeof r.currentUserCredentials)return[2,Promise.reject("No Auth module registered in Amplify")];if(this._isExpired(t)||!this._isPastTTL())return[3,6];pi.debug("ttl has passed but token is not yet expired"),d.label=1;case 1:return d.trys.push([1,5,,6]),[4,r.currentUserPoolUser()];case 2:return i=d.sent(),[4,r.currentSession()];case 3:return o=d.sent(),s=o.refreshToken,[4,new Promise(function(_,x){i.refreshSession(s,function(b,I){return b?x(b):_(I)})})];case 4:return d.sent(),[3,6];case 5:return g=d.sent(),pi.debug("Error attempting to refreshing the session",g),[3,6];case 6:return[2,r.currentUserCredentials()]}})})},e.prototype.refreshFederatedToken=function(t){pi.debug("Getting federated credentials");var n=t.provider,r=t.user,i=t.token,o=t.identity_id,s=t.expires_at;s=1970===new Date(s).getFullYear()?1e3*s:s;var l=this;return pi.debug("checking if federated jwt token expired"),s>(new Date).getTime()?(pi.debug("token not expired"),this._setCredentialsFromFederation({provider:n,token:i,user:r,identity_id:o,expires_at:s})):l._refreshHandlers[n]&&"function"==typeof l._refreshHandlers[n]?(pi.debug("getting refreshed jwt token from federation provider"),this._providerRefreshWithRetry({refreshHandler:l._refreshHandlers[n],provider:n,user:r})):(pi.debug("no refresh handler for provider:",n),this.clear(),Promise.reject("no refresh handler for provider"))},e.prototype._providerRefreshWithRetry=function(t){var n=this,i=t.provider,o=t.user;return JP(t.refreshHandler,[],1e4).then(function(l){return pi.debug("refresh federated token sucessfully",l),n._setCredentialsFromFederation({provider:i,token:l.token,user:o,identity_id:l.identity_id,expires_at:l.expires_at})}).catch(function(l){return"string"==typeof l&&0===l.toLowerCase().lastIndexOf("network error",l.length)||n.clear(),pi.debug("refresh federated token failed",l),Promise.reject("refreshing federation token failed: "+l)})},e.prototype._isExpired=function(t){if(!t)return pi.debug("no credentials for expiration check"),!0;pi.debug("are these credentials expired?",t);var n=Date.now();return t.expiration.getTime()<=n},e.prototype._isPastTTL=function(){return this._nextCredentialsRefresh<=Date.now()},e.prototype._setCredentialsForGuest=function(){return zu(this,void 0,void 0,function(){var t,n,r,o,s,l,g,x=this;return Bu(this,function(b){switch(b.label){case 0:return pi.debug("setting credentials for guest"),n=(t=this._config).identityPoolId,r=t.region,t.mandatorySignIn?[2,Promise.reject("cannot get guest credentials when mandatory signin enabled")]:n?r?(s=this,[4,this._getGuestIdentityId()]):(pi.debug("region is not configured for getting the credentials"),[2,Promise.reject("region is not configured for getting the credentials")]):(pi.debug("No Cognito Identity pool provided for unauthenticated access"),[2,Promise.reject("No Cognito Identity pool provided for unauthenticated access")]);case 1:return o=s._identityId=b.sent(),l=new vx({region:r,customUserAgent:Ac()}),g=void 0,g=o?Gg({identityId:o,client:l})():zu(x,void 0,void 0,function(){var I;return Bu(this,function(xe){switch(xe.label){case 0:return[4,l.send(new Hg({IdentityPoolId:n}))];case 1:return I=xe.sent().IdentityId,this._identityId=I,[2,Gg({client:l,identityId:I})()]}})}).catch(function(I){return zu(x,void 0,void 0,function(){return Bu(this,function(k){throw I})})}),[2,this._loadCredentials(g,"guest",!1,null).then(function(I){return I}).catch(function(I){return zu(x,void 0,void 0,function(){var R=this;return Bu(this,function(xe){switch(xe.label){case 0:return"ResourceNotFoundException"===I.name&&I.message==="Identity '"+o+"' not found."?(pi.debug("Failed to load guest credentials"),[4,this._removeGuestIdentityId()]):[3,2];case 1:return xe.sent(),g=zu(R,void 0,void 0,function(){var ke;return Bu(this,function(Ot){switch(Ot.label){case 0:return[4,l.send(new Hg({IdentityPoolId:n}))];case 1:return ke=Ot.sent().IdentityId,this._identityId=ke,[2,Gg({client:l,identityId:ke})()]}})}).catch(function(ke){return zu(R,void 0,void 0,function(){return Bu(this,function(ut){throw ke})})}),[2,this._loadCredentials(g,"guest",!1,null)];case 2:return[2,I]}})})})]}})})},e.prototype._setCredentialsFromFederation=function(t){var n=t.provider,r=t.token,i=t.identity_id,s={google:"accounts.google.com",facebook:"graph.facebook.com",amazon:"www.amazon.com",developer:"cognito-identity.amazonaws.com"}[n]||n;if(!s)return Promise.reject("You must specify a federated provider");var l={};l[s]=r;var g=this._config,d=g.identityPoolId,_=g.region;if(!d)return pi.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!_)return pi.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var x=new vx({region:_,customUserAgent:Ac()}),b=void 0;return b=i?Gg({identityId:i,logins:l,client:x})():function q5(e){var t=this,n=e.accountId,r=e.cache,i=void 0===r?function $5(){return"object"==typeof self&&self.indexedDB?new V5:"object"==typeof window&&window.localStorage?window.localStorage:H5}():r,o=e.client,s=e.customRoleArn,l=e.identityPoolId,g=e.logins,d=e.userIdentifier,_=void 0===d?g&&0!==Object.keys(g).length?void 0:"ANONYMOUS":d,x=_?"aws:cognito-identity-credentials:"+l+":"+_:void 0,b=function(){return O1(t,void 0,void 0,function(){var I,k,R,xe,ke,ut,et,Ot,Gt;return L1(this,function(Bn){switch(Bn.label){case 0:return(k=x)?[4,i.getItem(x)]:[3,2];case 1:k=Bn.sent(),Bn.label=2;case 2:return(I=k)?[3,7]:(ut=(ke=o).send,et=Hg.bind,Gt={AccountId:n,IdentityPoolId:l},g?[4,FD(g)]:[3,4]);case 3:return Ot=Bn.sent(),[3,5];case 4:Ot=void 0,Bn.label=5;case 5:return[4,ut.apply(ke,[new(et.apply(Hg,[void 0,(Gt.Logins=Ot,Gt)]))])];case 6:R=Bn.sent().IdentityId,xe=void 0===R?function W5(){throw new x_("Response from Amazon Cognito contained no identity ID")}():R,I=xe,x&&Promise.resolve(i.setItem(x,I)).catch(function(){}),Bn.label=7;case 7:return[2,(b=Gg({client:o,customRoleArn:s,logins:g,identityId:I}))()]}})})};return function(){return b().catch(function(I){return O1(t,void 0,void 0,function(){return L1(this,function(k){throw x&&Promise.resolve(i.removeItem(x)).catch(function(){}),I})})})}}({logins:l,identityPoolId:d,client:x})(),this._loadCredentials(b,"federated",!0,t)},e.prototype._setCredentialsFromSession=function(t){var n=this;pi.debug("set credentials from session");var r=t.getIdToken().getJwtToken(),i=this._config,o=i.region,s=i.userPoolId,l=i.identityPoolId;if(!l)return pi.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!o)return pi.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var d={};d["cognito-idp."+o+".amazonaws.com/"+s]=r;var _=new vx({region:o,customUserAgent:Ac()}),b=zu(n,void 0,void 0,function(){var I,k,R,xe,ke,ut,et,Ot,Gt,Bn;return Bu(this,function(ai){switch(ai.label){case 0:return[4,this._getGuestIdentityId()];case 1:return(I=ai.sent())?[3,3]:[4,_.send(new Hg({IdentityPoolId:l,Logins:d}))];case 2:R=ai.sent().IdentityId,k=R,ai.label=3;case 3:return[4,_.send(new H1({IdentityId:I||k,Logins:d}))];case 4:return xe=ai.sent(),ut=(ke=xe.Credentials).AccessKeyId,et=ke.Expiration,Ot=ke.SecretKey,Gt=ke.SessionToken,this._identityId=Bn=xe.IdentityId,I?(pi.debug("The guest identity "+I+" has been successfully linked to the logins"),I===Bn&&pi.debug("The guest identity "+I+" has become the primary identity"),[4,this._removeGuestIdentityId()]):[3,6];case 5:ai.sent(),ai.label=6;case 6:return[2,{accessKeyId:ut,secretAccessKey:Ot,sessionToken:Gt,expiration:et,identityId:Bn}]}})}).catch(function(I){return zu(n,void 0,void 0,function(){return Bu(this,function(k){throw I})})});return this._loadCredentials(b,"userPool",!0,null)},e.prototype._loadCredentials=function(t,n,r,i){var o=this,s=this;return new Promise(function(l,g){t.then(function(d){return zu(o,void 0,void 0,function(){var _,x,b,I,k;return Bu(this,function(R){switch(R.label){case 0:if(pi.debug("Load credentials successfully",d),this._identityId&&!d.identityId&&(d.identityId=this._identityId),s._credentials=d,s._credentials.authenticated=r,s._credentials_source=n,s._nextCredentialsRefresh=(new Date).getTime()+3e6,"federated"===n){_=Object.assign({id:this._credentials.identityId},i.user),x=i.provider,b=i.token,I=i.expires_at,k=i.identity_id;try{this._storage.setItem("aws-amplify-federatedInfo",JSON.stringify({provider:x,token:b,user:_,expires_at:I,identity_id:k}))}catch(xe){pi.debug("Failed to put federated info into auth storage",xe)}}return"guest"!==n?[3,2]:[4,this._setGuestIdentityId(d.identityId)];case 1:R.sent(),R.label=2;case 2:return l(s._credentials),[2]}})})}).catch(function(d){if(d)return pi.debug("Failed to load credentials",t),pi.debug("Error loading credentials",d),void g(d)})})},e.prototype.set=function(t,n){return"session"===n?this._setCredentialsFromSession(t):"federation"===n?this._setCredentialsFromFederation(t):"guest"===n?this._setCredentialsForGuest():(pi.debug("no source specified for setting credentials"),Promise.reject("invalid source"))},e.prototype.clear=function(){return zu(this,void 0,void 0,function(){return Bu(this,function(t){return this._credentials=null,this._credentials_source=null,pi.debug("removing aws-amplify-federatedInfo from storage"),this._storage.removeItem("aws-amplify-federatedInfo"),[2]})})},e.prototype._getGuestIdentityId=function(){return zu(this,void 0,void 0,function(){var t,n;return Bu(this,function(r){switch(r.label){case 0:t=this._config.identityPoolId,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._storageSync];case 2:return r.sent(),[2,this._storage.getItem(this._getCognitoIdentityIdStorageKey(t))];case 3:return n=r.sent(),pi.debug("Failed to get the cached guest identityId",n),[3,4];case 4:return[2]}})})},e.prototype._setGuestIdentityId=function(t){return zu(this,void 0,void 0,function(){var n,r;return Bu(this,function(i){switch(i.label){case 0:n=this._config.identityPoolId,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._storageSync];case 2:return i.sent(),this._storage.setItem(this._getCognitoIdentityIdStorageKey(n),t),[3,4];case 3:return r=i.sent(),pi.debug("Failed to cache guest identityId",r),[3,4];case 4:return[2]}})})},e.prototype._removeGuestIdentityId=function(){return zu(this,void 0,void 0,function(){var t;return Bu(this,function(n){return pi.debug("removing "+this._getCognitoIdentityIdStorageKey(t=this._config.identityPoolId)+" from storage"),this._storage.removeItem(this._getCognitoIdentityIdStorageKey(t)),[2]})})},e.prototype.shear=function(t){return{accessKeyId:t.accessKeyId,sessionToken:t.sessionToken,secretAccessKey:t.secretAccessKey,identityId:t.identityId,authenticated:t.authenticated}},e}(),_x=new T8(null);kp.register(_x);var k8=function(e){var t=e.endpoint;if("string"==typeof t){var r=Promise.resolve((0,e.urlParser)(t));return function(){return r}}if("object"==typeof t){var i=Promise.resolve(t);return function(){return i}}return t},C2=function(e){return"string"==typeof e&&(e.startsWith("fips-")||e.endsWith("-fips"))},I2=function(e){return C2(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e},T2=function(e,t){var n;void 0===e&&(e=[]);var r=t.useFipsEndpoint,i=t.useDualstackEndpoint;return null===(n=e.find(function(o){var s=o.tags;return r===s.includes("fips")&&i===s.includes("dualstack")}))||void 0===n?void 0:n.hostname},H8=function(e,t){var n,r,i,o,s,l,g=t.useFipsEndpoint,d=void 0!==g&&g,_=t.useDualstackEndpoint,x=void 0!==_&&_,b=t.signingService,I=t.regionHash,k=t.partitionHash,R=function(e,t){var n,r=t.partitionHash;return null!==(n=Object.keys(r||{}).find(function(i){return r[i].regions.includes(e)}))&&void 0!==n?n:"aws"}(e,{partitionHash:k}),xe=e in I?e:null!==(r=null===(n=k[R])||void 0===n?void 0:n.endpoint)&&void 0!==r?r:e,ke={useFipsEndpoint:d,useDualstackEndpoint:x},Ot=function(e,t){var r=t.partitionHostname;return t.regionHostname||(r?r.replace("{region}",e):void 0)}(xe,{regionHostname:T2(null===(i=I[xe])||void 0===i?void 0:i.variants,ke),partitionHostname:T2(null===(o=k[R])||void 0===o?void 0:o.variants,ke)});if(void 0===Ot)throw new Error("Endpoint resolution failed for: "+{resolvedRegion:xe,useFipsEndpoint:d,useDualstackEndpoint:x});var Gt=function(e,t){var n=t.signingRegion;if(n)return n;if(t.useFipsEndpoint){var o=t.regionRegex.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),s=e.match(o);if(s)return s[0].slice(1,-1)}}(Ot,{signingRegion:null===(s=I[xe])||void 0===s?void 0:s.signingRegion,regionRegex:k[R].regionRegex,useFipsEndpoint:d});return Ce(Ce({partition:R,signingService:b,hostname:Ot},Gt&&{signingRegion:Gt}),(null===(l=I[xe])||void 0===l?void 0:l.signingService)&&{signingService:I[xe].signingService})},El=function(){function e(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?":"!==t.protocol.substr(-1)?t.protocol+":":t.protocol:"https:",this.path=t.path?"/"!==t.path.charAt(0)?"/"+t.path:t.path:"/"}return e.isInstance=function(t){return!!t&&("method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers)},e.prototype.clone=function(){var t=new e(Ce(Ce({},this),{headers:Ce({},this.headers)}));return t.query&&(t.query=function $8(e){return Object.keys(e).reduce(function(t,n){var r,i=e[n];return Ce(Ce({},t),((r={})[n]=Array.isArray(i)?Do([],$r(i)):i,r))},{})}(t.query)),t},e}(),bx=function(){function e(t){this.statusCode=t.statusCode,this.headers=t.headers||{},this.body=t.body}return e.isInstance=function(t){return!!t&&("number"==typeof t.statusCode&&"object"==typeof t.headers)},e}();function Hp(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}var H_,P2="content-length",W8={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},K8={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Q8={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},wh=(()=>(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"}(wh||(wh={})),wh))(),D2=wh.STANDARD,tV=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],nV=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],rV=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],iV=[500,502,503,504],wx=function(e){var t,n;return 429===(null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||nV.includes(e.name)||1==(null===(n=e.$retryable)||void 0===n?void 0:n.throttling)},uV=function(){function e(t){var n,r,i,o,s;this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=null!==(n=t?.beta)&&void 0!==n?n:.7,this.minCapacity=null!==(r=t?.minCapacity)&&void 0!==r?r:1,this.minFillRate=null!==(i=t?.minFillRate)&&void 0!==i?i:.5,this.scaleConstant=null!==(o=t?.scaleConstant)&&void 0!==o?o:.4,this.smooth=null!==(s=t?.smooth)&&void 0!==s?s:.8;var l=this.getCurrentTimeInSeconds();this.lastThrottleTime=l,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}return e.prototype.getCurrentTimeInSeconds=function(){return Date.now()/1e3},e.prototype.getSendToken=function(){return Wt(this,void 0,void 0,function(){return Lt(this,function(t){return[2,this.acquireTokenBucket(1)]})})},e.prototype.acquireTokenBucket=function(t){return Wt(this,void 0,void 0,function(){var n;return Lt(this,function(r){switch(r.label){case 0:return this.enabled?(this.refillTokenBucket(),t>this.currentCapacity?(n=(t-this.currentCapacity)/this.fillRate*1e3,[4,new Promise(function(i){return setTimeout(i,n)})]):[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return this.currentCapacity=this.currentCapacity-t,[2]}})})},e.prototype.refillTokenBucket=function(){var t=this.getCurrentTimeInSeconds();this.lastTimestamp?(this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+(t-this.lastTimestamp)*this.fillRate),this.lastTimestamp=t):this.lastTimestamp=t},e.prototype.updateClientSendingRate=function(t){var n;if(this.updateMeasuredRate(),wx(t)){var r=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=r,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),n=this.cubicThrottle(r),this.enableTokenBucket()}else this.calculateTimeWindow(),n=this.cubicSuccess(this.getCurrentTimeInSeconds());var i=Math.min(n,2*this.measuredTxRate);this.updateTokenBucketRate(i)},e.prototype.calculateTimeWindow=function(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))},e.prototype.cubicThrottle=function(t){return this.getPrecise(t*this.beta)},e.prototype.cubicSuccess=function(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)},e.prototype.enableTokenBucket=function(){this.enabled=!0},e.prototype.updateTokenBucketRate=function(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)},e.prototype.updateMeasuredRate=function(){var t=this.getCurrentTimeInSeconds(),n=Math.floor(2*t)/2;this.requestCount++,n>this.lastTxRateBucket&&(this.measuredTxRate=this.getPrecise(this.requestCount/(n-this.lastTxRateBucket)*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=n)},e.prototype.getPrecise=function(t){return parseFloat(t.toFixed(8))},e}(),lV=new Uint8Array(16);function cV(){if(!H_&&!(H_=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return H_(lV)}const dV=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,hV=function fV(e){return"string"==typeof e&&dV.test(e)};for(var Bs=[],xx=0;xx<256;++xx)Bs.push((xx+256).toString(16).substr(1));const yV=function gV(e,t,n){var r=(e=e||{}).random||(e.rng||cV)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function pV(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Bs[e[t+0]]+Bs[e[t+1]]+Bs[e[t+2]]+Bs[e[t+3]]+"-"+Bs[e[t+4]]+Bs[e[t+5]]+"-"+Bs[e[t+6]]+Bs[e[t+7]]+"-"+Bs[e[t+8]]+Bs[e[t+9]]+"-"+Bs[e[t+10]]+Bs[e[t+11]]+Bs[e[t+12]]+Bs[e[t+13]]+Bs[e[t+14]]+Bs[e[t+15]]).toLowerCase();if(!hV(n))throw TypeError("Stringified UUID is invalid");return n}(r)};var PV=function(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))},DV=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return tV.includes(e.name)}(e)||wx(e)||function(e){var t;return rV.includes(e.name)||iV.includes((null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||0)}(e))},A2=function(){function e(t,n){var r,i,o;this.maxAttemptsProvider=t,this.mode=wh.STANDARD,this.retryDecider=null!==(r=n?.retryDecider)&&void 0!==r?r:DV,this.delayDecider=null!==(i=n?.delayDecider)&&void 0!==i?i:PV,this.retryQuota=null!==(o=n?.retryQuota)&&void 0!==o?o:function(e,t){var s=(t?.noRetryIncrement,1),l=(t?.retryCost,5),g=(t?.timeoutRetryCost,10),d=500,_=function(k){return"TimeoutError"===k.name?g:l},x=function(k){return _(k)<=d};return Object.freeze({hasRetryTokens:x,retrieveRetryTokens:function(k){if(!x(k))throw new Error("No retry token available");var R=_(k);return d-=R,R},releaseRetryTokens:function(k){d+=k??s,d=Math.min(d,500)}})}()}return e.prototype.shouldRetry=function(t,n,r){return n<r&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)},e.prototype.getMaxAttempts=function(){return Wt(this,void 0,void 0,function(){var t;return Lt(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return t=r.sent(),[3,3];case 2:return r.sent(),t=3,[3,3];case 3:return[2,t]}})})},e.prototype.retry=function(t,n,r){return Wt(this,void 0,void 0,function(){var i,o,s,l,g,d,_,x;return Lt(this,function(b){switch(b.label){case 0:return o=0,s=0,[4,this.getMaxAttempts()];case 1:l=b.sent(),El.isInstance(g=n.request)&&(g.headers["amz-sdk-invocation-id"]=yV()),d=function(){var I,k,R,xe,ke,ut;return Lt(this,function(et){switch(et.label){case 0:return et.trys.push([0,4,,7]),El.isInstance(g)&&(g.headers["amz-sdk-request"]="attempt="+(o+1)+"; max="+l),r?.beforeRequest?[4,r.beforeRequest()]:[3,2];case 1:et.sent(),et.label=2;case 2:return[4,t(n)];case 3:return I=et.sent(),k=I.response,R=I.output,r?.afterRequest&&r.afterRequest(k),_.retryQuota.releaseRetryTokens(i),R.$metadata.attempts=o+1,R.$metadata.totalRetryDelay=s,[2,{value:{response:k,output:R}}];case 4:return xe=et.sent(),ke=AV(xe),o++,_.shouldRetry(ke,o,l)?(i=_.retryQuota.retrieveRetryTokens(ke),ut=_.delayDecider(wx(ke)?500:100,o),s+=ut,[4,new Promise(function(Ot){return setTimeout(Ot,ut)})]):[3,6];case 5:return et.sent(),[2,"continue"];case 6:throw ke.$metadata||(ke.$metadata={}),ke.$metadata.attempts=o,ke.$metadata.totalRetryDelay=s,ke;case 7:return[2]}})},_=this,b.label=2;case 2:return[5,d()];case 3:return"object"==typeof(x=b.sent())?[2,x.value]:[3,2];case 4:return[2]}})})},e}(),AV=function(e){return e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):"string"==typeof e?new Error(e):new Error("AWS SDK error wrapper for "+e)},RV=function(e){function t(n,r){var i=this,o=r??{},s=o.rateLimiter,l=Vn(o,["rateLimiter"]);return(i=e.call(this,n,l)||this).rateLimiter=s??new uV,i.mode=wh.ADAPTIVE,i}return Zt(t,e),t.prototype.retry=function(n,r){return Wt(this,void 0,void 0,function(){var i=this;return Lt(this,function(o){return[2,e.prototype.retry.call(this,n,r,{beforeRequest:function(){return Wt(i,void 0,void 0,function(){return Lt(this,function(s){return[2,this.rateLimiter.getSendToken()]})})},afterRequest:function(s){i.rateLimiter.updateClientSendingRate(s)}})]})})},t}(A2),OV=function(e){return Wt(void 0,void 0,void 0,function(){return Lt(this,function(t){switch(t.label){case 0:return"string"==typeof e?[2,e]:[4,e()];case 1:return[2,t.sent()]}})})},jV={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0};(function(e){function t(n,r){void 0===r&&(r=!0);var i=e.call(this,n)||this;return i.tryNextLink=r,i}Zt(t,e),t.from=function(n,r){return void 0===r&&(r=!0),Object.defineProperty(n,"tryNextLink",{value:r,configurable:!1,enumerable:!1,writable:!1}),n}})(Error),function(e){function t(n,r){void 0===r&&(r=!0);var i=e.call(this,n)||this;return i.tryNextLink=r,i.name="CredentialsProviderError",i}Zt(t,e),t.from=function(n,r){return void 0===r&&(r=!0),Object.defineProperty(n,"tryNextLink",{value:r,configurable:!1,enumerable:!1,writable:!1}),n}}(Error);for(var O2={},Ex={},Zg=0;Zg<256;Zg++){var Jg=Zg.toString(16).toLowerCase();1===Jg.length&&(Jg="0"+Jg),O2[Zg]=Jg,Ex[Jg]=Zg}function $p(e){for(var t="",n=0;n<e.byteLength;n++)t+=O2[e[n]];return t}var L2="X-Amz-Date",N2="X-Amz-Signature",k2="X-Amz-Security-Token",F2="authorization",z2=L2.toLowerCase(),ZV=[F2,z2,"date"],JV=N2.toLowerCase(),Sx="x-amz-content-sha256",KV=k2.toLowerCase(),YV={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},XV=/^proxy-/,QV=/^sec-/,Cx="AWS4-HMAC-SHA256",eG="AWS4-HMAC-SHA256-PAYLOAD",B2="aws4_request",qp={},$_=[],Ix=function(e,t,n){return e+"/"+t+"/"+n+"/"+B2},j2=function(e,t,n){var r=new e(t);return r.update(n),r.digest()},U2=function(e,t,n){var r,i,o=e.headers,s={};try{for(var l=si(Object.keys(o).sort()),g=l.next();!g.done;g=l.next()){var d=g.value,_=d.toLowerCase();(_ in YV||t?.has(_)||XV.test(_)||QV.test(_))&&(!n||n&&!n.has(_))||(s[_]=o[d].trim().replace(/\s+/g," "))}}catch(x){r={error:x}}finally{try{g&&!g.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return s},xh=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,oG)},oG=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()},Tx=function(e,t){var n=e.headers,r=e.body;return Wt(void 0,void 0,void 0,function(){var i,o,s,l,g,d,_;return Lt(this,function(x){switch(x.label){case 0:try{for(i=si(Object.keys(n)),o=i.next();!o.done;o=i.next())if((s=o.value).toLowerCase()===Sx)return[2,n[s]]}catch(b){d={error:b}}finally{try{o&&!o.done&&(_=i.return)&&_.call(i)}finally{if(d)throw d.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||function(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)}(r)?((l=new t).update(r),g=$p,[4,l.digest()]):[3,3];case 2:return[2,g.apply(void 0,[x.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}})})},V2=function(e){var t=e.headers,n=e.query,r=Vn(e,["headers","query"]);return Ce(Ce({},r),{headers:Ce({},t),query:n?lG(n):void 0})},lG=function(e){return Object.keys(e).reduce(function(t,n){var r,i=e[n];return Ce(Ce({},t),((r={})[n]=Array.isArray(i)?Do([],$r(i)):i,r))},{})},G2=function(e){var t,n;e="function"==typeof e.clone?e.clone():V2(e);try{for(var r=si(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;ZV.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e},mG=function(){function e(t){var n=t.applyChecksum,r=t.credentials,i=t.region,s=t.sha256,l=t.uriEscapePath,g=void 0===l||l;this.service=t.service,this.sha256=s,this.uriEscapePath=g,this.applyChecksum="boolean"!=typeof n||n,this.regionProvider=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}(i),this.credentialProvider=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}(r)}return e.prototype.presign=function(t,n){return void 0===n&&(n={}),Wt(this,void 0,void 0,function(){var r,i,o,s,l,g,d,_,x,b,I,k,R,xe,ke,ut,et,Ot,Gt,Bn,ai,zo,Ho,hs;return Lt(this,function(Bo){switch(Bo.label){case 0:return i=void 0===(r=n.signingDate)?new Date:r,s=void 0===(o=n.expiresIn)?3600:o,l=n.unsignableHeaders,g=n.unhoistableHeaders,d=n.signableHeaders,_=n.signingRegion,x=n.signingService,[4,this.credentialProvider()];case 1:return b=Bo.sent(),null==_?[3,2]:(k=_,[3,4]);case 2:return[4,this.regionProvider()];case 3:k=Bo.sent(),Bo.label=4;case 4:return I=k,R=q_(i),xe=R.longDate,ke=R.shortDate,s>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(ut=Ix(ke,I,x??this.service),et=function(e,t){var n,r,i;void 0===t&&(t={});var o="function"==typeof e.clone?e.clone():V2(e),s=o.headers,l=o.query,g=void 0===l?{}:l;try{for(var d=si(Object.keys(s)),_=d.next();!_.done;_=d.next()){var x=_.value,b=x.toLowerCase();"x-amz-"===b.substr(0,6)&&(null===(i=t.unhoistableHeaders)||void 0===i||!i.has(b))&&(g[x]=s[x],delete s[x])}}catch(I){n={error:I}}finally{try{_&&!_.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}return Ce(Ce({},e),{headers:s,query:g})}(G2(t),{unhoistableHeaders:g}),b.sessionToken&&(et.query[k2]=b.sessionToken),et.query["X-Amz-Algorithm"]=Cx,et.query["X-Amz-Credential"]=b.accessKeyId+"/"+ut,et.query[L2]=xe,et.query["X-Amz-Expires"]=s.toString(10),Ot=U2(et,l,d),et.query["X-Amz-SignedHeaders"]=H2(Ot),Gt=et.query,Bn=N2,ai=this.getSignature,zo=[xe,ut,this.getSigningKey(b,I,ke,x)],Ho=this.createCanonicalRequest,hs=[et,Ot],[4,Tx(t,this.sha256)]);case 5:return[4,ai.apply(this,zo.concat([Ho.apply(this,hs.concat([Bo.sent()]))]))];case 6:return Gt[Bn]=Bo.sent(),[2,et]}})})},e.prototype.sign=function(t,n){return Wt(this,void 0,void 0,function(){return Lt(this,function(r){return"string"==typeof t?[2,this.signString(t,n)]:t.headers&&t.payload?[2,this.signEvent(t,n)]:[2,this.signRequest(t,n)]})})},e.prototype.signEvent=function(t,n){var r=t.headers,i=t.payload,o=n.signingDate,s=void 0===o?new Date:o,l=n.priorSignature,g=n.signingRegion,d=n.signingService;return Wt(this,void 0,void 0,function(){var _,x,b,k,R,xe,ke,ut,et,Ot;return Lt(this,function(Gt){switch(Gt.label){case 0:return null==g?[3,1]:(x=g,[3,3]);case 1:return[4,this.regionProvider()];case 2:x=Gt.sent(),Gt.label=3;case 3:return _=x,b=q_(s),k=b.longDate,R=Ix(b.shortDate,_,d??this.service),[4,Tx({headers:{},body:i},this.sha256)];case 4:return xe=Gt.sent(),(ke=new this.sha256).update(r),et=$p,[4,ke.digest()];case 5:return ut=et.apply(void 0,[Gt.sent()]),Ot=[eG,k,R,l,ut,xe].join("\n"),[2,this.signString(Ot,{signingDate:s,signingRegion:_,signingService:d})]}})})},e.prototype.signString=function(t,n){var r=void 0===n?{}:n,i=r.signingDate,o=void 0===i?new Date:i,s=r.signingRegion,l=r.signingService;return Wt(this,void 0,void 0,function(){var g,d,_,x,b,I,k,R;return Lt(this,function(xe){switch(xe.label){case 0:return[4,this.credentialProvider()];case 1:return g=xe.sent(),null==s?[3,2]:(_=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:_=xe.sent(),xe.label=4;case 4:return d=_,x=q_(o).shortDate,k=(I=this.sha256).bind,[4,this.getSigningKey(g,d,x,l)];case 5:return(b=new(k.apply(I,[void 0,xe.sent()]))).update(t),R=$p,[4,b.digest()];case 6:return[2,R.apply(void 0,[xe.sent()])]}})})},e.prototype.signRequest=function(t,n){var r=void 0===n?{}:n,i=r.signingDate,o=void 0===i?new Date:i,s=r.signableHeaders,l=r.unsignableHeaders,g=r.signingRegion,d=r.signingService;return Wt(this,void 0,void 0,function(){var _,x,b,I,k,R,xe,ke,ut,et,Ot;return Lt(this,function(Gt){switch(Gt.label){case 0:return[4,this.credentialProvider()];case 1:return _=Gt.sent(),null==g?[3,2]:(b=g,[3,4]);case 2:return[4,this.regionProvider()];case 3:b=Gt.sent(),Gt.label=4;case 4:return x=b,I=G2(t),k=q_(o),R=k.longDate,ke=Ix(xe=k.shortDate,x,d??this.service),I.headers[z2]=R,_.sessionToken&&(I.headers[KV]=_.sessionToken),[4,Tx(I,this.sha256)];case 5:return ut=Gt.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=si(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}(Sx,I.headers)&&this.applyChecksum&&(I.headers[Sx]=ut),et=U2(I,l,s),[4,this.getSignature(R,ke,this.getSigningKey(_,x,xe,d),this.createCanonicalRequest(I,et,ut))];case 6:return Ot=Gt.sent(),I.headers[F2]=Cx+" Credential="+_.accessKeyId+"/"+ke+", SignedHeaders="+H2(et)+", Signature="+Ot,[2,I]}})})},e.prototype.createCanonicalRequest=function(t,n,r){var i=Object.keys(n).sort();return t.method+"\n"+this.getCanonicalPath(t)+"\n"+function(e){var t,n,r=e.query,i=void 0===r?{}:r,o=[],s={},l=function(x){if(x.toLowerCase()===JV)return"continue";o.push(x);var b=i[x];"string"==typeof b?s[x]=xh(x)+"="+xh(b):Array.isArray(b)&&(s[x]=b.slice(0).sort().reduce(function(I,k){return I.concat([xh(x)+"="+xh(k)])},[]).join("&"))};try{for(var g=si(Object.keys(i).sort()),d=g.next();!d.done;d=g.next())l(d.value)}catch(x){t={error:x}}finally{try{d&&!d.done&&(n=g.return)&&n.call(g)}finally{if(t)throw t.error}}return o.map(function(x){return s[x]}).filter(function(x){return x}).join("&")}(t)+"\n"+i.map(function(o){return o+":"+n[o]}).join("\n")+"\n\n"+i.join(";")+"\n"+r},e.prototype.createStringToSign=function(t,n,r){return Wt(this,void 0,void 0,function(){var i,o;return Lt(this,function(s){switch(s.label){case 0:return(i=new this.sha256).update(r),[4,i.digest()];case 1:return o=s.sent(),[2,Cx+"\n"+t+"\n"+n+"\n"+$p(o)]}})})},e.prototype.getCanonicalPath=function(t){var n=t.path;return this.uriEscapePath?"/"+encodeURIComponent(n.replace(/^\//,"")).replace(/%2F/g,"/"):n},e.prototype.getSignature=function(t,n,r,i){return Wt(this,void 0,void 0,function(){var o,s,l,g,d;return Lt(this,function(_){switch(_.label){case 0:return[4,this.createStringToSign(t,n,i)];case 1:return o=_.sent(),g=(l=this.sha256).bind,[4,r];case 2:return(s=new(g.apply(l,[void 0,_.sent()]))).update(o),d=$p,[4,s.digest()];case 3:return[2,d.apply(void 0,[_.sent()])]}})})},e.prototype.getSigningKey=function(t,n,r,i){return function(e,t,n,r,i){return Wt(void 0,void 0,void 0,function(){var o,s,l,g,d,x,b,I;return Lt(this,function(k){switch(k.label){case 0:return[4,j2(e,t.secretAccessKey,t.accessKeyId)];case 1:if(o=k.sent(),(s=n+":"+r+":"+i+":"+$p(o)+":"+t.sessionToken)in qp)return[2,qp[s]];for($_.push(s);$_.length>50;)delete qp[$_.shift()];l="AWS4"+t.secretAccessKey,k.label=2;case 2:k.trys.push([2,7,8,9]),g=si([n,r,i,B2]),d=g.next(),k.label=3;case 3:return d.done?[3,6]:[4,j2(e,l,d.value)];case 4:l=k.sent(),k.label=5;case 5:return d=g.next(),[3,3];case 6:return[3,9];case 7:return x=k.sent(),b={error:x},[3,9];case 8:try{d&&!d.done&&(I=g.return)&&I.call(g)}finally{if(b)throw b.error}return[7];case 9:return[2,qp[s]=l]}})})}(this.sha256,t,r,n,i||this.service)},e}(),q_=function(e){var t=function(e){return function(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.substr(0,8)}},H2=function(e){return Object.keys(e).sort().join(";")},Kg=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},q2=function(e){return new Date(Date.now()+e)},W2=function(e,t){var n=Date.parse(e);return function(e,t){return Math.abs(q2(t).getTime()-e)>=3e5}(n,t)?n-Date.now():t},Z2=function(e){var t,n,r;return bx.isInstance(e)?null!==(n=null===(t=e.headers)||void 0===t?void 0:t.date)&&void 0!==n?n:null===(r=e.headers)||void 0===r?void 0:r.Date:void 0},bG={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},J2="user-agent",Px="x-amz-user-agent",EG=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Dx=function(e){var t=$r(e,2),n=t[0],r=t[1],i=n.indexOf("/"),o=n.substring(0,i),s=n.substring(i+1);return"api"===o&&(s=s.toLowerCase()),[o,s,r].filter(function(l){return l&&l.length>0}).map(function(l){return l?.replace(EG,"_")}).join("/")},CG={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},W_=function(){var e=[],t=[],n=new Set,s=function(_){return e.forEach(function(x){_.add(x.middleware,Ce({},x))}),t.forEach(function(x){_.addRelativeTo(x.middleware,Ce({},x))}),_},l=function(_){var x=[];return _.before.forEach(function(b){0===b.before.length&&0===b.after.length?x.push(b):x.push.apply(x,Do([],$r(l(b))))}),x.push(_),_.after.reverse().forEach(function(b){0===b.before.length&&0===b.after.length?x.push(b):x.push.apply(x,Do([],$r(l(b))))}),x},d={add:function(_,x){void 0===x&&(x={});var b=x.name,I=x.override,k=Ce({step:"initialize",priority:"normal",middleware:_},x);if(b){if(n.has(b)){if(!I)throw new Error("Duplicate middleware name '"+b+"'");var R=e.findIndex(function(ke){return ke.name===b}),xe=e[R];if(xe.step!==k.step||xe.priority!==k.priority)throw new Error('"'+b+'" middleware with '+xe.priority+" priority in "+xe.step+" step cannot be overridden by same-name middleware with "+k.priority+" priority in "+k.step+" step.");e.splice(R,1)}n.add(b)}e.push(k)},addRelativeTo:function(_,x){var b=x.name,I=x.override,k=Ce({middleware:_},x);if(b){if(n.has(b)){if(!I)throw new Error("Duplicate middleware name '"+b+"'");var R=t.findIndex(function(ke){return ke.name===b}),xe=t[R];if(xe.toMiddleware!==k.toMiddleware||xe.relation!==k.relation)throw new Error('"'+b+'" middleware '+xe.relation+' "'+xe.toMiddleware+'" middleware cannot be overridden by same-name middleware '+k.relation+' "'+k.toMiddleware+'" middleware.');t.splice(R,1)}n.add(b)}t.push(k)},clone:function(){return s(W_())},use:function(_){_.applyToStack(d)},remove:function(_){return"string"==typeof _?function(_){var x=!1,b=function(I){return!I.name||I.name!==_||(x=!0,n.delete(_),!1)};return e=e.filter(b),t=t.filter(b),x}(_):function(_){var x=!1,b=function(I){return I.middleware!==_||(x=!0,I.name&&n.delete(I.name),!1)};return e=e.filter(b),t=t.filter(b),x}(_)},removeByTag:function(_){var x=!1,b=function(I){var k=I.tags,R=I.name;return!k||!k.includes(_)||(R&&n.delete(R),x=!0,!1)};return e=e.filter(b),t=t.filter(b),x},concat:function(_){var x=s(W_());return x.use(_),x},applyToStack:s,resolve:function(_,x){var b,I;try{for(var k=si(function(){var _=[],x=[],b={};e.forEach(function(k){var R=Ce(Ce({},k),{before:[],after:[]});R.name&&(b[R.name]=R),_.push(R)}),t.forEach(function(k){var R=Ce(Ce({},k),{before:[],after:[]});R.name&&(b[R.name]=R),x.push(R)}),x.forEach(function(k){if(k.toMiddleware){var R=b[k.toMiddleware];if(void 0===R)throw new Error(k.toMiddleware+" is not found when adding "+(k.name||"anonymous")+" middleware "+k.relation+" "+k.toMiddleware);"after"===k.relation&&R.after.push(k),"before"===k.relation&&R.before.push(k)}});var I=function(_){return _.sort(function(x,b){return Y2[b.step]-Y2[x.step]||X2[b.priority||"normal"]-X2[x.priority||"normal"]})}(_).map(l).reduce(function(k,R){return k.push.apply(k,Do([],$r(R))),k},[]);return I.map(function(k){return k.middleware})}().reverse()),R=k.next();!R.done;R=k.next())_=(0,R.value)(_,x)}catch(ke){b={error:ke}}finally{try{R&&!R.done&&(I=k.return)&&I.call(k)}finally{if(b)throw b.error}}return _}};return d},Y2={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},X2={high:3,normal:2,low:1},TG=function(){function e(t){this.middlewareStack=W_(),this.config=t}return e.prototype.send=function(t,n,r){var o="function"==typeof n?n:r,s=t.resolveMiddleware(this.middlewareStack,this.config,"function"!=typeof n?n:void 0);if(!o)return s(t).then(function(l){return l.output});s(t).then(function(l){return o(null,l.output)},function(l){return o(l)}).catch(function(){})},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),Wp=function e(){this.middlewareStack=W_()},Xl="***SensitiveInformation***",PG=function(e){if(null!=e){if("boolean"==typeof e)return e;throw new TypeError("Expected boolean, got "+typeof e)}},Z_=function(e){if(null!=e){if("number"==typeof e)return e;throw new TypeError("Expected number, got "+typeof e)}},DG=Math.ceil(Math.pow(2,127)*(2-Math.pow(2,-23))),Yg=function(e){return Mx(e,32)},Mx=function(e,t){var n=function(e){if(null!=e){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError("Expected integer, got "+typeof e)}}(e);if(void 0!==n&&AG(n,t)!==n)throw new TypeError("Expected "+t+"-bit integer, got "+e);return n},AG=function(e,t){switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},Sl=function(e,t){if(null==e)throw t?new TypeError("Expected a non-null value for "+t):new TypeError("Expected a non-null value");return e},Eh=function(e){if(null!=e){if("object"==typeof e&&!Array.isArray(e))return e;throw new TypeError("Expected object, got "+typeof e)}},Mi=function(e){if(null!=e){if("string"==typeof e)return e;throw new TypeError("Expected string, got "+typeof e)}},MG=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Zp=function(e){var t=e.match(MG);if(null===t||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},Xg=function(e){return"string"==typeof e?tA(e):Z_(e)},tA=function(e){switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error("Unable to parse float value: "+e)}},Ox=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],kG=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),Jp=function(e){if(null!=e){if("string"!=typeof e)throw new TypeError("RFC-3339 date-times must be expressed as strings");var t=kG.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");var n=$r(t,8),o=n[2],s=n[3],l=n[4],g=n[5],d=n[6],_=n[7],x=function(e){return function(e){return Mx(e,16)}("string"==typeof e?Zp(e):e)}(Qg(n[1])),b=ff(o,"month",1,12),I=ff(s,"day",1,31);return J_(x,b,I,{hours:l,minutes:g,seconds:d,fractionalMilliseconds:_})}},J_=function(e,t,n,r){var i=t-1;return HG(e,i,n),new Date(Date.UTC(e,i,n,ff(r.hours,"hour",0,23),ff(r.minutes,"minute",0,59),ff(r.seconds,"seconds",0,60),qG(r.fractionalMilliseconds)))},GG=[31,28,31,30,31,30,31,31,30,31,30,31],HG=function(e,t,n){var r=GG[t];if(1===t&&$G(e)&&(r=29),n>r)throw new TypeError("Invalid day for "+Ox[t]+" in "+e+": "+n)},$G=function(e){return e%4==0&&(e%100!=0||e%400==0)},ff=function(e,t,n,r){var i=function(e){return function(e){return Mx(e,8)}("string"==typeof e?Zp(e):e)}(Qg(e));if(i<n||i>r)throw new TypeError(t+" must be between "+n+" and "+r+", inclusive");return i},qG=function(e){return null==e?0:1e3*function(e){return function(e){var t=Z_(e);if(void 0!==t&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>DG)throw new TypeError("Expected 32-bit float, got "+e);return t}("string"==typeof e?Zp(e):e)}("0."+e)},Qg=function(e){for(var t=0;t<e.length-1&&"0"===e.charAt(t);)t++;return 0===t?e:e.slice(t)},WG=function(e){switch(e){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};function Sh(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var K_=function(){var e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,Do([null],$r(arguments))),n=new t;return Object.setPrototypeOf(n,e.prototype),n};K_.prototype=Object.create(String.prototype,{constructor:{value:K_,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(K_,String),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Zt(t,e),t.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},t.prototype.toJSON=function(){return e.prototype.toString.call(this)},t.fromObject=function(n){return n instanceof t?n:new t(n instanceof String||"string"==typeof n?n:JSON.stringify(n))}}(K_);var nA=function(e){if(e!=e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}};var JG=U(2518);function YG(e){return void 0===e&&(e=0),new Promise(function(t,n){e&&setTimeout(function(){var r=new Error("Request did not complete within "+e+" ms");r.name="TimeoutError",n(r)},e)})}for(var XG=function(){function e(t){var n=this;"function"==typeof t?this.configProvider=function(){return Wt(n,void 0,void 0,function(){return Lt(this,function(r){switch(r.label){case 0:return[4,t()];case 1:return[2,r.sent()||{}]}})})}:this.config=t??{}}return e.prototype.destroy=function(){},e.prototype.handle=function(t,n){var i=(void 0===n?{}:n).abortSignal;return Wt(this,void 0,void 0,function(){var o,s,l,g,d,_,x,b,k,R,xe;return Lt(this,function(ke){switch(ke.label){case 0:return!this.config&&this.configProvider?(o=this,[4,this.configProvider()]):[3,2];case 1:o.config=ke.sent(),ke.label=2;case 2:return s=this.config.requestTimeout,i?.aborted?((l=new Error("Request aborted")).name="AbortError",[2,Promise.reject(l)]):(g=t.path,t.query&&(d=function KG(e){var t,n,r=[];try{for(var i=si(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var s=o.value,l=e[s];if(s=xh(s),Array.isArray(l))for(var g=0,d=l.length;g<d;g++)r.push(s+"="+xh(l[g]));else{var _=s;(l||"string"==typeof l)&&(_+="="+xh(l)),r.push(_)}}}catch(x){t={error:x}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}(t.query),d&&(g+="?"+d)),b=t.protocol+"//"+t.hostname+((_=t.port)?":"+_:"")+g,k={body:"GET"===(x=t.method)||"HEAD"===x?void 0:t.body,headers:new Headers(t.headers),method:x},typeof AbortController<"u"&&(k.signal=i),R=new Request(b,k),xe=[fetch(R).then(function(ut){var et,Ot,Gt=ut.headers,Bn={};try{for(var ai=si(Gt.entries()),zo=ai.next();!zo.done;zo=ai.next()){var Ho=zo.value;Bn[Ho[0]]=Ho[1]}}catch(Bo){et={error:Bo}}finally{try{zo&&!zo.done&&(Ot=ai.return)&&Ot.call(ai)}finally{if(et)throw et.error}}return void 0!==ut.body?{response:new bx({headers:Bn,statusCode:ut.status,body:ut.body})}:ut.blob().then(function(Bo){return{response:new bx({headers:Bn,statusCode:ut.status,body:Bo})}})}),YG(s)],i&&xe.push(new Promise(function(ut,et){i.onabort=function(){var Ot=new Error("Request aborted");Ot.name="AbortError",et(Ot)}})),[2,Promise.race(xe)])}})})},e}(),hf={},Kp=new Array(64),js=0,ey="A".charCodeAt(0),Nx="Z".charCodeAt(0);js+ey<=Nx;js++){var pf=String.fromCharCode(js+ey);hf[pf]=js,Kp[js]=pf}for(js=0,ey="a".charCodeAt(0),Nx="z".charCodeAt(0);js+ey<=Nx;js++)pf=String.fromCharCode(js+ey),hf[pf]=ty=js+26,Kp[ty]=pf;for(js=0;js<10;js++){var ty;hf[js.toString(10)]=js+52,pf=js.toString(10),hf[pf]=ty=js+52,Kp[ty]=pf}function rA(e){var t=e.length/4*3;"=="===e.substr(-2)?t-=2:"="===e.substr(-1)&&t--;for(var n=new ArrayBuffer(t),r=new DataView(n),i=0;i<e.length;i+=4){for(var o=0,s=0,l=i,g=i+3;l<=g;l++)if("="!==e[l]){if(!(e[l]in hf))throw new TypeError("Invalid character "+e[l]+" in base64 string.");o|=hf[e[l]]<<6*(g-l),s+=6}else o>>=6;var d=i/4*3;o>>=s%8;for(var _=Math.floor(s/8),x=0;x<_;x++){var b=8*(_-x-1);r.setUint8(d+x,(o&255<<b)>>b)}}return new Uint8Array(n)}function eH(e){for(var t="",n=0;n<e.length;n+=3){for(var r=0,i=0,o=n,s=Math.min(n+3,e.length);o<s;o++)r|=e[o]<<8*(s-o-1),i+=8;var l=Math.ceil(i/6);r<<=6*l-i;for(var g=1;g<=l;g++){var d=6*(l-g);t+=Kp[(r&63<<d)>>d]}t+="==".slice(0,4-l)}return t}hf["+"]=62,Kp[62]="+",hf["/"]=63,Kp[63]="/";var tH=function(e){return"function"==typeof Blob&&e instanceof Blob?function nH(e){return Wt(this,void 0,void 0,function(){var t,n;return Lt(this,function(r){switch(r.label){case 0:return[4,iH(e)];case 1:return t=r.sent(),n=rA(t),[2,new Uint8Array(n)]}})})}(e):function rH(e){return Wt(this,void 0,void 0,function(){var t,n,r,i,o,s,l;return Lt(this,function(g){switch(g.label){case 0:t=new Uint8Array(0),n=e.getReader(),r=!1,g.label=1;case 1:return r?[3,3]:[4,n.read()];case 2:return i=g.sent(),o=i.done,(s=i.value)&&(l=t,(t=new Uint8Array(l.length+s.length)).set(l),t.set(s,l.length)),r=o,[3,1];case 3:return[2,t]}})})}(e)};function iH(e){return new Promise(function(t,n){var r=new FileReader;r.onloadend=function(){var i;if(2!==r.readyState)return n(new Error("Reader aborted too early"));var o=null!==(i=r.result)&&void 0!==i?i:"",s=o.indexOf(",");t(o.substring(s>-1?s+1:o.length))},r.onabort=function(){return n(new Error("Read aborted"))},r.onerror=function(){return n(r.error)},r.readAsDataURL(e)})}var oH=function(e){return function(){return Promise.reject(e)}};function aH(e){if("string"==typeof e){for(var t=e.length,n=t-1;n>=0;n--){var r=e.charCodeAt(n);r>127&&r<=2047?t++:r>2047&&r<=65535&&(t+=2)}return t}return"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:void 0}var sH=function(e){var t=e.serviceId,n=e.clientVersion;return function(){return Wt(void 0,void 0,void 0,function(){var r,i,o,s,l,g,d,_,x;return Lt(this,function(b){return r=typeof window<"u"&&(null===(o=window?.navigator)||void 0===o?void 0:o.userAgent)?tx().parse(window.navigator.userAgent):void 0,i=[["aws-sdk-js",n],["os/"+((null===(s=r?.os)||void 0===s?void 0:s.name)||"other"),null===(l=r?.os)||void 0===l?void 0:l.version],["lang/js"],["md/browser",(null!==(d=null===(g=r?.browser)||void 0===g?void 0:g.name)&&void 0!==d?d:"unknown")+"_"+(null!==(x=null===(_=r?.browser)||void 0===_?void 0:_.version)&&void 0!==x?x:"unknown")]],t&&i.push(["api/"+t,n]),[2,i]})})}},iA=U(4456),lH=function(e){var l,t=new URL(e),n=t.hostname,r=t.pathname,i=t.port,o=t.protocol,s=t.search;return s&&(l=function uH(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var i=si(e.split("&")),o=i.next();!o.done;o=i.next()){var l=$r(o.value.split("="),2),g=l[0],d=l[1],_=void 0===d?null:d;g=decodeURIComponent(g),_&&(_=decodeURIComponent(_)),g in r?Array.isArray(r[g])?r[g].push(_):r[g]=[r[g],_]:r[g]=_}}catch(x){t={error:x}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(s)),{hostname:n,port:i?parseInt(i):void 0,protocol:o,path:r,query:l}},cH={},dH={aws:{regions:["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-southeast-1","ap-southeast-2","ap-southeast-3","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"],regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.amazonaws.com",tags:[]},{hostname:"geo-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"geo-fips.{region}.api.aws",tags:["dualstack","fips"]},{hostname:"geo.{region}.api.aws",tags:["dualstack"]}]},"aws-cn":{regions:["cn-north-1","cn-northwest-1"],regionRegex:"^cn\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.amazonaws.com.cn",tags:[]},{hostname:"geo-fips.{region}.amazonaws.com.cn",tags:["fips"]},{hostname:"geo-fips.{region}.api.amazonwebservices.com.cn",tags:["dualstack","fips"]},{hostname:"geo.{region}.api.amazonwebservices.com.cn",tags:["dualstack"]}]},"aws-iso":{regions:["us-iso-east-1","us-iso-west-1"],regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.c2s.ic.gov",tags:[]},{hostname:"geo-fips.{region}.c2s.ic.gov",tags:["fips"]}]},"aws-iso-b":{regions:["us-isob-east-1"],regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.sc2s.sgov.gov",tags:[]},{hostname:"geo-fips.{region}.sc2s.sgov.gov",tags:["fips"]}]},"aws-us-gov":{regions:["us-gov-east-1","us-gov-west-1"],regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.amazonaws.com",tags:[]},{hostname:"geo-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"geo-fips.{region}.api.aws",tags:["dualstack","fips"]},{hostname:"geo.{region}.api.aws",tags:["dualstack"]}]}},fH=function(e,t){return Wt(void 0,void 0,void 0,function(){return Lt(this,function(n){return[2,H8(e,Ce(Ce({},t),{signingService:"geo",regionHash:cH,partitionHash:dH}))]})})};(function(e){function t(n,r){void 0===r&&(r=!0);var i=e.call(this,n)||this;return i.tryNextLink=r,i}Zt(t,e),t.from=function(n,r){return void 0===r&&(r=!0),Object.defineProperty(n,"tryNextLink",{value:r,configurable:!1,enumerable:!1,writable:!1}),n}})(Error),function(e){function t(n,r){void 0===r&&(r=!0);var i=e.call(this,n)||this;return i.tryNextLink=r,i.name="CredentialsProviderError",i}Zt(t,e),t.from=function(n,r){return void 0===r&&(r=!0),Object.defineProperty(n,"tryNextLink",{value:r,configurable:!1,enumerable:!1,writable:!1}),n}}(Error);var mH=["in-region","cross-region","mobile","standard","legacy"],yH=function(){var e,t,r=null===(t=(typeof window<"u"&&(null===(e=window?.navigator)||void 0===e?void 0:e.userAgent)?tx().parse(window.navigator.userAgent):void 0)?.platform)||void 0===t?void 0:t.type;return"tablet"===r||"mobile"===r},vH=function(e){var t,n,r,i,o,s,l,g,d,_,x,b,I,k,R,xe=function(e){var n=(void 0===e?{}:e).defaultsMode;return function(e,t,n){var r,i,o,s=function(){return Wt(void 0,void 0,void 0,function(){return Lt(this,function(g){switch(g.label){case 0:i||(i=e()),g.label=1;case 1:return g.trys.push([1,,3,4]),[4,i];case 2:return r=g.sent(),o=!0,[3,4];case 3:return i=void 0,[7];case 4:return[2,r]}})})};return function(){return Wt(void 0,void 0,void 0,function(){return Lt(this,function(g){switch(g.label){case 0:return o?[3,2]:[4,s()];case 1:r=g.sent(),g.label=2;case 2:return[2,r]}})})}}(function(){return Wt(void 0,void 0,void 0,function(){var r,i;return Lt(this,function(o){switch(o.label){case 0:return"function"!=typeof n?[3,2]:[4,n()];case 1:return i=o.sent(),[3,3];case 2:i=n,o.label=3;case 3:switch((r=i)?.toLowerCase()){case"auto":return[2,Promise.resolve(yH()?"mobile":"standard")];case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return[2,Promise.resolve(r?.toLocaleLowerCase())];case void 0:return[2,Promise.resolve("legacy")];default:throw new Error('Invalid parameter for "defaultsMode", expect '+mH.join(", ")+", got "+r)}return[2]}})})})}(e),ke=function(){return xe().then(WG)},ut=function(e){var t,n,r,i,o;return{apiVersion:"2020-11-19",disableHostPrefix:null!==(t=e?.disableHostPrefix)&&void 0!==t&&t,logger:null!==(n=e?.logger)&&void 0!==n?n:{},regionInfoProvider:null!==(r=e?.regionInfoProvider)&&void 0!==r?r:fH,serviceId:null!==(i=e?.serviceId)&&void 0!==i?i:"Location",urlParser:null!==(o=e?.urlParser)&&void 0!==o?o:lH}}(e);return Ce(Ce(Ce({},ut),e),{runtime:"browser",defaultsMode:xe,base64Decoder:null!==(t=e?.base64Decoder)&&void 0!==t?t:rA,base64Encoder:null!==(n=e?.base64Encoder)&&void 0!==n?n:eH,bodyLengthChecker:null!==(r=e?.bodyLengthChecker)&&void 0!==r?r:aH,credentialDefaultProvider:null!==(i=e?.credentialDefaultProvider)&&void 0!==i?i:function(et){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:null!==(o=e?.defaultUserAgentProvider)&&void 0!==o?o:sH({serviceId:ut.serviceId,clientVersion:"3.48.0"}),maxAttempts:null!==(s=e?.maxAttempts)&&void 0!==s?s:3,region:null!==(l=e?.region)&&void 0!==l?l:oH("Region is missing"),requestHandler:null!==(g=e?.requestHandler)&&void 0!==g?g:new XG(ke),retryMode:null!==(d=e?.retryMode)&&void 0!==d?d:function(){return Wt(void 0,void 0,void 0,function(){return Lt(this,function(et){switch(et.label){case 0:return[4,ke()];case 1:return[2,et.sent().retryMode||D2]}})})},sha256:null!==(_=e?.sha256)&&void 0!==_?_:JG.Sha256,streamCollector:null!==(x=e?.streamCollector)&&void 0!==x?x:tH,useDualstackEndpoint:null!==(b=e?.useDualstackEndpoint)&&void 0!==b?b:function(){return Promise.resolve(!1)},useFipsEndpoint:null!==(I=e?.useFipsEndpoint)&&void 0!==I?I:function(){return Promise.resolve(!1)},utf8Decoder:null!==(k=e?.utf8Decoder)&&void 0!==k?k:iA.fromUtf8,utf8Encoder:null!==(R=e?.utf8Encoder)&&void 0!==R?R:iA.toUtf8})},Xp=function(e){function t(n){var r=this,o=function(e){var t=e.region,n=e.useFipsEndpoint;if(!t)throw new Error("Region is missing");return Ce(Ce({},e),{region:function(){return Wt(void 0,void 0,void 0,function(){var r;return Lt(this,function(i){switch(i.label){case 0:return"string"==typeof t?[2,I2(t)]:[4,t()];case 1:return r=i.sent(),[2,I2(r)]}})})},useFipsEndpoint:function(){return Wt(void 0,void 0,void 0,function(){var i;return Lt(this,function(o){switch(o.label){case 0:return"string"!=typeof t?[3,1]:(i=t,[3,3]);case 1:return[4,t()];case 2:i=o.sent(),o.label=3;case 3:return C2(i)?[2,!0]:[2,"boolean"==typeof n?Promise.resolve(n):n()]}})})}})}(vH(n)),l=function(e){var t=function(e){if(void 0===e&&(e=3),"number"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}(e.maxAttempts);return Ce(Ce({},e),{maxAttempts:t,retryStrategy:function(){return Wt(void 0,void 0,void 0,function(){return Lt(this,function(r){switch(r.label){case 0:return e.retryStrategy?[2,e.retryStrategy]:[4,OV(e.retryMode)];case 1:return r.sent()===wh.ADAPTIVE?[2,new RV(t)]:[2,new A2(t)]}})})}})}(function(e){var t,n=function(e){if("boolean"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}(e.useDualstackEndpoint),r=e.endpoint,i=e.useFipsEndpoint;return Ce(Ce({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:r?k8(Ce(Ce({},e),{endpoint:r})):function(){return function(e){return Wt(void 0,void 0,void 0,function(){var t,n,r,o,s,l,g;return Lt(this,function(d){switch(d.label){case 0:return n=void 0===(t=e.tls)||t,[4,e.region()];case 1:if(r=d.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");return[4,e.useDualstackEndpoint()];case 2:return o=d.sent(),[4,e.useFipsEndpoint()];case 3:return s=d.sent(),[4,e.regionInfoProvider(r,{useDualstackEndpoint:o,useFipsEndpoint:s})];case 4:if(!(l=(null!==(g=d.sent())&&void 0!==g?g:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((n?"https:":"http:")+"//"+l)]}})})}(Ce(Ce({},e),{useDualstackEndpoint:n,useFipsEndpoint:i}))},isCustomEndpoint:!!r,useDualstackEndpoint:n})}(o)),d=function(e){var l,t=e.credentials?function(e){return"function"==typeof e?function(e,t,n){var r,i,o,s=function(){return Wt(void 0,void 0,void 0,function(){return Lt(this,function(g){switch(g.label){case 0:i||(i=e()),g.label=1;case 1:return g.trys.push([1,,3,4]),[4,i];case 2:return r=g.sent(),o=!0,[3,4];case 3:return i=void 0,[7];case 4:return[2,r]}})})};if(void 0===t)return function(){return Wt(void 0,void 0,void 0,function(){return Lt(this,function(g){switch(g.label){case 0:return o?[3,2]:[4,s()];case 1:r=g.sent(),g.label=2;case 2:return[2,r]}})})};var l=!1;return function(){return Wt(void 0,void 0,void 0,function(){return Lt(this,function(g){switch(g.label){case 0:return o?[3,2]:[4,s()];case 1:r=g.sent(),g.label=2;case 2:return l?[2,r]:n&&!n(r)?(l=!0,[2,r]):t(r)?[4,s()]:[3,4];case 3:return g.sent(),[2,r];case 4:return[2,r]}})})}}(e,function(t){return void 0!==t.expiration&&t.expiration.getTime()-Date.now()<3e5},function(t){return void 0!==t.expiration}):Kg(e)}(e.credentials):e.credentialDefaultProvider(e),n=e.signingEscapePath,r=void 0===n||n,i=e.systemClockOffset,o=void 0===i?e.systemClockOffset||0:i,s=e.sha256;return l=e.signer?Kg(e.signer):function(){return Kg(e.region)().then(function(g){return Wt(void 0,void 0,void 0,function(){var d,_,x,b;return Lt(this,function(I){switch(I.label){case 0:return _=(d=e).regionInfoProvider,x=[g],b={},[4,e.useFipsEndpoint()];case 1:return b.useFipsEndpoint=I.sent(),[4,e.useDualstackEndpoint()];case 2:return[4,_.apply(d,x.concat([(b.useDualstackEndpoint=I.sent(),b)]))];case 3:return[2,[I.sent()||{},g]]}})})}).then(function(g){var d=$r(g,2),_=d[0],I=_.signingService;e.signingRegion=e.signingRegion||_.signingRegion||d[1],e.signingName=e.signingName||I||e.serviceId;var k=Ce(Ce({},e),{credentials:t,region:e.signingRegion,service:e.signingName,sha256:s,uriEscapePath:r});return new(e.signerConstructor||mG)(k)})},Ce(Ce({},e),{systemClockOffset:o,signingEscapePath:r,credentials:t,signer:l})}(l),_=function xG(e){return Ce(Ce({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}(d);return(r=e.call(this,_)||this).config=_,r.middlewareStack.use(function(e){return{applyToStack:function(t){t.add(function(e){return function(t,n){return function(r){return Wt(void 0,void 0,void 0,function(){var i;return Lt(this,function(o){switch(o.label){case 0:return[4,e.retryStrategy()];case 1:return(i=o.sent())?.mode&&(n.userAgent=Do(Do([],$r(n.userAgent||[])),[["cfg/retry-mode",i.mode]])),[2,i.retry(t,r)]}})})}}}(e),jV)}}}(r.config)),r.middlewareStack.use(function(e){return{applyToStack:function(t){t.add(function q8(e){var t=this;return function(n){return function(r){return Wt(t,void 0,void 0,function(){var i,o,s,l,g;return Lt(this,function(d){return El.isInstance(i=r.request)&&(s=i.headers,(o=i.body)&&-1===Object.keys(s).map(function(_){return _.toLowerCase()}).indexOf(P2)&&void 0!==(l=e(o))&&(i.headers=Ce(Ce({},i.headers),((g={})[P2]=String(l),g)))),[2,n(Ce(Ce({},r),{request:i}))]})})}}}(e.bodyLengthChecker),W8)}}}(r.config)),r.middlewareStack.use(function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return Wt(void 0,void 0,void 0,function(){var r,i;return Lt(this,function(s){return El.isInstance(n.request)?(r=n.request,(void 0===(i=(e.requestHandler.metadata||{}).handlerProtocol)?"":i).indexOf("h2")>=0&&!r.headers[":authority"]?(delete r.headers.host,r.headers[":authority"]=""):r.headers.host||(r.headers.host=r.hostname),[2,t(n)]):[2,t(n)]})})}}}(e),K8)}}}(r.config)),r.middlewareStack.use({applyToStack:function(t){t.add(function(e,t){return function(n){return Wt(void 0,void 0,void 0,function(){var r,i,o,s,l,g,d,_,x;return Lt(this,function(b){switch(b.label){case 0:return r=t.clientName,i=t.commandName,o=t.inputFilterSensitiveLog,s=t.logger,l=t.outputFilterSensitiveLog,[4,e(n)];case 1:return g=b.sent(),s?("function"==typeof s.info&&(_=(d=g.output).$metadata,x=Vn(d,["$metadata"]),s.info({clientName:r,commandName:i,input:o(n.input),output:l(x),metadata:_})),[2,g]):[2,g]}})})}},Q8)}}),r.middlewareStack.use(function(e){return{applyToStack:function(t){t.addRelativeTo(function(e){return function(t,n){return function(r){return Wt(this,void 0,void 0,function(){var i,o,s,l,g,d;return Lt(this,function(_){switch(_.label){case 0:return El.isInstance(r.request)?[4,e.signer()]:[2,t(r)];case 1:return i=_.sent(),s=t,l=[Ce({},r)],d={},[4,i.sign(r.request,{signingDate:q2(e.systemClockOffset),signingRegion:n.signing_region,signingService:n.signing_service})];case 2:return[4,s.apply(void 0,[Ce.apply(void 0,l.concat([(d.request=_.sent(),d)]))]).catch(function(x){var b,I=null!==(b=x.ServerTime)&&void 0!==b?b:Z2(x.$response);throw I&&(e.systemClockOffset=W2(I,e.systemClockOffset)),x})];case 3:return o=_.sent(),(g=Z2(o.response))&&(e.systemClockOffset=W2(g,e.systemClockOffset)),[2,o]}})})}}}(e),bG)}}}(r.config)),r.middlewareStack.use(function(e){return{applyToStack:function(t){t.add(function(e){return function(t,n){return function(r){return Wt(void 0,void 0,void 0,function(){var i,o,s,l,g,d,_,x,b;return Lt(this,function(I){switch(I.label){case 0:return El.isInstance(i=r.request)?(o=i.headers,s=(null===(x=n?.userAgent)||void 0===x?void 0:x.map(Dx))||[],[4,e.defaultUserAgentProvider()]):[2,t(r)];case 1:return l=I.sent().map(Dx),g=(null===(b=e?.customUserAgent)||void 0===b?void 0:b.map(Dx))||[],d=Do(Do(Do([],$r(l)),$r(s)),$r(g)).join(" "),_=Do(Do([],$r(l.filter(function(k){return k.startsWith("aws-sdk-")}))),$r(g)).join(" "),"browser"!==e.runtime?(_&&(o[Px]=o[Px]?o[J2]+" "+_:_),o[J2]=d):o[Px]=d,[2,t(Ce(Ce({},r),{request:i}))]}})})}}}(e),CG)}}}(r.config)),r}return Zt(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(TG),wH={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},xH={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Qp(e,t,n){return{applyToStack:function(r){r.add(function(e,t){return function(n,r){return function(i){return Wt(void 0,void 0,void 0,function(){var o,s,l;return Lt(this,function(g){switch(g.label){case 0:return[4,n(i)];case 1:o=g.sent().response,g.label=2;case 2:return g.trys.push([2,4,,5]),[4,t(o,e)];case 3:return s=g.sent(),[2,{response:o,output:s}];case 4:throw l=g.sent(),Object.assign(l,{$response:o});case 5:return[2]}})})}}}(e,n),wH),r.add(function(e,t){return function(n,r){return function(i){return Wt(void 0,void 0,void 0,function(){var o;return Lt(this,function(s){switch(s.label){case 0:return[4,t(i.input,e)];case 1:return o=s.sent(),[2,n(Ce(Ce({},i),{request:o}))]}})})}}}(e,t),xH)}}}var Y_=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce({},t)}}(Y_||(Y_={})),Y_))(),X_=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce({},t)}}(X_||(X_={})),X_))(),em=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Polygon&&{Polygon:t.Polygon.map(function(n){return Xl})})}}(em||(em={})),em))(),Q_=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Geometry&&{Geometry:em.filterSensitiveLog(t.Geometry)})}}(Q_||(Q_={})),Q_))(),e0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Entries&&{Entries:t.Entries.map(function(n){return Q_.filterSensitiveLog(n)})})}}(e0||(e0={})),e0))(),t0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce({},t)}}(t0||(t0={})),t0))(),n0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce({},t)}}(n0||(n0={})),n0))(),r0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Geometry&&{Geometry:em.filterSensitiveLog(t.Geometry)})}}(r0||(r0={})),r0))(),o0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce({},t)}}(o0||(o0={})),o0))(),a0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Geometry&&{Geometry:em.filterSensitiveLog(t.Geometry)})}}(a0||(a0={})),a0))(),s0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Entries&&{Entries:t.Entries.map(function(n){return a0.filterSensitiveLog(n)})})}}(s0||(s0={})),s0))(),u0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Position&&{Position:Xl})}}(u0||(u0={})),u0))(),l0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Point&&{Point:Xl})}}(l0||(l0={})),l0))(),ry=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Geometry&&{Geometry:l0.filterSensitiveLog(t.Geometry)})}}(ry||(ry={})),ry))(),c0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Place&&{Place:ry.filterSensitiveLog(t.Place)})}}(c0||(c0={})),c0))(),d0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Position&&{Position:Xl})}}(d0||(d0={})),d0))(),f0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce(Ce({},t),t.Summary&&{Summary:d0.filterSensitiveLog(t.Summary)}),t.Results&&{Results:t.Results.map(function(n){return c0.filterSensitiveLog(n)})})}}(f0||(f0={})),f0))(),h0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce(Ce(Ce({},t),t.Text&&{Text:Xl}),t.BiasPosition&&{BiasPosition:Xl}),t.FilterBBox&&{FilterBBox:Xl})}}(h0||(h0={})),h0))(),p0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Place&&{Place:ry.filterSensitiveLog(t.Place)})}}(p0||(p0={})),p0))(),m0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce(Ce(Ce(Ce({},t),t.Text&&{Text:Xl}),t.BiasPosition&&{BiasPosition:Xl}),t.FilterBBox&&{FilterBBox:Xl}),t.ResultBBox&&{ResultBBox:Xl})}}(m0||(m0={})),m0))(),g0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce(Ce({},t),t.Summary&&{Summary:m0.filterSensitiveLog(t.Summary)}),t.Results&&{Results:t.Results.map(function(n){return p0.filterSensitiveLog(n)})})}}(g0||(g0={})),g0))(),MH=function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r,i,o,l,g,d,_,x,b,I,k;return Lt(this,function(R){switch(R.label){case 0:return r=[Ce({},e)],k={},[4,on(e.body,t)];case 1:switch(n=Ce.apply(void 0,r.concat([(k.body=R.sent(),k)])),o="UnknownError",o=yr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return l=[{}],[4,hr(n,t)];case 3:return i=Ce.apply(void 0,[Ce.apply(void 0,l.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 4:return g=[{}],[4,pr(n,t)];case 5:return i=Ce.apply(void 0,[Ce.apply(void 0,g.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 6:return d=[{}],[4,Kr(n,t)];case 7:return i=Ce.apply(void 0,[Ce.apply(void 0,d.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 8:return _=[{}],[4,mr(n,t)];case 9:return i=Ce.apply(void 0,[Ce.apply(void 0,_.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 10:return x=[{}],[4,gr(n,t)];case 11:return i=Ce.apply(void 0,[Ce.apply(void 0,x.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 12:o=(b=n.body).code||b.Code||o,i=Ce(Ce({},b),{name:""+o,message:b.message||b.Message||o,$fault:"client",$metadata:he(e)}),R.label=13;case 13:return i.message=I=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(I),i))]}})})},kH=function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r,i,o,l,g,d,_,x,b,I,k;return Lt(this,function(R){switch(R.label){case 0:return r=[Ce({},e)],k={},[4,on(e.body,t)];case 1:switch(n=Ce.apply(void 0,r.concat([(k.body=R.sent(),k)])),o="UnknownError",o=yr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return l=[{}],[4,hr(n,t)];case 3:return i=Ce.apply(void 0,[Ce.apply(void 0,l.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 4:return g=[{}],[4,pr(n,t)];case 5:return i=Ce.apply(void 0,[Ce.apply(void 0,g.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 6:return d=[{}],[4,Kr(n,t)];case 7:return i=Ce.apply(void 0,[Ce.apply(void 0,d.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 8:return _=[{}],[4,mr(n,t)];case 9:return i=Ce.apply(void 0,[Ce.apply(void 0,_.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 10:return x=[{}],[4,gr(n,t)];case 11:return i=Ce.apply(void 0,[Ce.apply(void 0,x.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 12:o=(b=n.body).code||b.Code||o,i=Ce(Ce({},b),{name:""+o,message:b.message||b.Message||o,$fault:"client",$metadata:he(e)}),R.label=13;case 13:return i.message=I=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(I),i))]}})})},o$=function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r,i,o,l,g,d,_,x,b,I,k;return Lt(this,function(R){switch(R.label){case 0:return r=[Ce({},e)],k={},[4,on(e.body,t)];case 1:switch(n=Ce.apply(void 0,r.concat([(k.body=R.sent(),k)])),o="UnknownError",o=yr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return l=[{}],[4,hr(n,t)];case 3:return i=Ce.apply(void 0,[Ce.apply(void 0,l.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 4:return g=[{}],[4,pr(n,t)];case 5:return i=Ce.apply(void 0,[Ce.apply(void 0,g.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 6:return d=[{}],[4,Kr(n,t)];case 7:return i=Ce.apply(void 0,[Ce.apply(void 0,d.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 8:return _=[{}],[4,mr(n,t)];case 9:return i=Ce.apply(void 0,[Ce.apply(void 0,_.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 10:return x=[{}],[4,gr(n,t)];case 11:return i=Ce.apply(void 0,[Ce.apply(void 0,x.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 12:o=(b=n.body).code||b.Code||o,i=Ce(Ce({},b),{name:""+o,message:b.message||b.Message||o,$fault:"client",$metadata:he(e)}),R.label=13;case 13:return i.message=I=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(I),i))]}})})},h$=function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r,i,o,l,g,d,_,x,b,I,k;return Lt(this,function(R){switch(R.label){case 0:return r=[Ce({},e)],k={},[4,on(e.body,t)];case 1:switch(n=Ce.apply(void 0,r.concat([(k.body=R.sent(),k)])),o="UnknownError",o=yr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return l=[{}],[4,hr(n,t)];case 3:return i=Ce.apply(void 0,[Ce.apply(void 0,l.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 4:return g=[{}],[4,pr(n,t)];case 5:return i=Ce.apply(void 0,[Ce.apply(void 0,g.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 6:return d=[{}],[4,Kr(n,t)];case 7:return i=Ce.apply(void 0,[Ce.apply(void 0,d.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 8:return _=[{}],[4,mr(n,t)];case 9:return i=Ce.apply(void 0,[Ce.apply(void 0,_.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 10:return x=[{}],[4,gr(n,t)];case 11:return i=Ce.apply(void 0,[Ce.apply(void 0,x.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 12:o=(b=n.body).code||b.Code||o,i=Ce(Ce({},b),{name:""+o,message:b.message||b.Message||o,$fault:"client",$metadata:he(e)}),R.label=13;case 13:return i.message=I=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(I),i))]}})})},x$=function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r,i,o,l,g,d,_,x,b,I,k;return Lt(this,function(R){switch(R.label){case 0:return r=[Ce({},e)],k={},[4,on(e.body,t)];case 1:switch(n=Ce.apply(void 0,r.concat([(k.body=R.sent(),k)])),o="UnknownError",o=yr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return l=[{}],[4,hr(n,t)];case 3:return i=Ce.apply(void 0,[Ce.apply(void 0,l.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 4:return g=[{}],[4,pr(n,t)];case 5:return i=Ce.apply(void 0,[Ce.apply(void 0,g.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 6:return d=[{}],[4,Kr(n,t)];case 7:return i=Ce.apply(void 0,[Ce.apply(void 0,d.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 8:return _=[{}],[4,mr(n,t)];case 9:return i=Ce.apply(void 0,[Ce.apply(void 0,_.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 10:return x=[{}],[4,gr(n,t)];case 11:return i=Ce.apply(void 0,[Ce.apply(void 0,x.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 12:o=(b=n.body).code||b.Code||o,i=Ce(Ce({},b),{name:""+o,message:b.message||b.Message||o,$fault:"client",$metadata:he(e)}),R.label=13;case 13:return i.message=I=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(I),i))]}})})},C$=function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r,i,o,l,g,d,_,x,b,I,k;return Lt(this,function(R){switch(R.label){case 0:return r=[Ce({},e)],k={},[4,on(e.body,t)];case 1:switch(n=Ce.apply(void 0,r.concat([(k.body=R.sent(),k)])),o="UnknownError",o=yr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return l=[{}],[4,hr(n,t)];case 3:return i=Ce.apply(void 0,[Ce.apply(void 0,l.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 4:return g=[{}],[4,pr(n,t)];case 5:return i=Ce.apply(void 0,[Ce.apply(void 0,g.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 6:return d=[{}],[4,Kr(n,t)];case 7:return i=Ce.apply(void 0,[Ce.apply(void 0,d.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 8:return _=[{}],[4,mr(n,t)];case 9:return i=Ce.apply(void 0,[Ce.apply(void 0,_.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 10:return x=[{}],[4,gr(n,t)];case 11:return i=Ce.apply(void 0,[Ce.apply(void 0,x.concat([R.sent()])),{name:o,$metadata:he(e)}]),[3,13];case 12:o=(b=n.body).code||b.Code||o,i=Ce(Ce({},b),{name:""+o,message:b.message||b.Message||o,$fault:"client",$metadata:he(e)}),R.label=13;case 13:return i.message=I=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(I),i))]}})})},hr=function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r;return Lt(this,function(i){return n={name:"AccessDeniedException",$fault:"client",$metadata:he(e),Message:void 0},null!=(r=e.body).message&&(n.Message=Mi(r.message)),[2,n]})})},pr=function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r;return Lt(this,function(i){return n={name:"InternalServerException",$fault:"server",$retryable:{},$metadata:he(e),Message:void 0},null!=(r=e.body).message&&(n.Message=Mi(r.message)),[2,n]})})},Kr=function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r;return Lt(this,function(i){return n={name:"ResourceNotFoundException",$fault:"client",$metadata:he(e),Message:void 0},null!=(r=e.body).message&&(n.Message=Mi(r.message)),[2,n]})})},mr=function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r;return Lt(this,function(i){return n={name:"ThrottlingException",$fault:"client",$retryable:{},$metadata:he(e),Message:void 0},null!=(r=e.body).message&&(n.Message=Mi(r.message)),[2,n]})})},gr=function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r;return Lt(this,function(i){return n={name:"ValidationException",$fault:"client",$metadata:he(e),FieldList:void 0,Message:void 0,Reason:void 0},null!=(r=e.body).fieldList&&(n.FieldList=K9(r.fieldList,t)),null!=r.message&&(n.Message=Mi(r.message)),null!=r.reason&&(n.Reason=Mi(r.reason)),[2,n]})})},N$=function(e,t){return e.filter(function(n){return null!=n}).map(function(n){return null===n?null:function(e,t){return Ce(Ce({},null!=e.GeofenceId&&{GeofenceId:e.GeofenceId}),null!=e.Geometry&&{Geometry:dA(e.Geometry,t)})}(n,t)})},oA=function(e,t){return e.filter(function(n){return null!=n}).map(function(n){return null===n?null:nA(n)})},uA=function(e,t){return e.filter(function(n){return null!=n}).map(function(n){return null===n?null:n})},dA=function(e,t){return Ce({},null!=e.Polygon&&{Polygon:B$(e.Polygon,t)})},fA=function(e,t){return e.filter(function(n){return null!=n}).map(function(n){return null===n?null:n})},B$=function(e,t){return e.filter(function(n){return null!=n}).map(function(n){return null===n?null:function(e,t){return e.filter(function(n){return null!=n}).map(function(n){return null===n?null:xd(n,t)})}(n,t)})},xd=function(e,t){return e.filter(function(n){return null!=n}).map(function(n){return null===n?null:nA(n)})},nm=function(e,t){return{Code:Mi(e.Code),Message:Mi(e.Message)}},y0=function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:Xg(n)})},pA=function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:Mi(n)})},gA=function(e,t){return{Polygon:null!=e.Polygon?m9(e.Polygon,t):void 0}},m9=function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:ju(n,t)})}(n,t)})},yA=function(e,t){return{AddressNumber:Mi(e.AddressNumber),Country:Mi(e.Country),Geometry:null!=e.Geometry?M9(e.Geometry,t):void 0,Interpolated:PG(e.Interpolated),Label:Mi(e.Label),Municipality:Mi(e.Municipality),Neighborhood:Mi(e.Neighborhood),PostalCode:Mi(e.PostalCode),Region:Mi(e.Region),Street:Mi(e.Street),SubRegion:Mi(e.SubRegion),TimeZone:null!=e.TimeZone?Z9(e.TimeZone,t):void 0}},M9=function(e,t){return{Point:null!=e.Point?ju(e.Point,t):void 0}},ju=function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:Xg(n)})},Z9=function(e,t){return{Name:Mi(e.Name),Offset:Yg(e.Offset)}},K9=function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:function(e,t){return{Message:Mi(e.message),Name:Mi(e.name)}}(n)})},he=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},on=function(e,t){return function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then(function(n){return t.utf8Encoder(n)})}(e,t).then(function(n){return n.length?JSON.parse(n):{}})},yr=function(e,t){var r=function(o){var s=o;return s.indexOf(":")>=0&&(s=s.split(":")[0]),s.indexOf("#")>=0&&(s=s.split("#")[1]),s},i=("x-amzn-errortype",Object.keys(e.headers).find(function(l){return l.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==i?r(e.headers[i]):void 0!==t.code?r(t.code):void 0!==t.__type?r(t.__type):""},X9=function(e){function t(n){var r=e.call(this)||this;return r.input=n,r}return Zt(t,e),t.prototype.resolveMiddleware=function(n,r,i){this.middlewareStack.use(Qp(r,this.serialize,this.deserialize));var o=n.concat(this.middlewareStack),_=r.requestHandler;return o.resolve(function(x){return _.handle(x.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"SearchPlaceIndexForTextCommand",inputFilterSensitiveLog:h0.filterSensitiveLog,outputFilterSensitiveLog:g0.filterSensitiveLog})},t.prototype.serialize=function(n,r){return function(e,t){return Wt(void 0,void 0,void 0,function(){var n,i,o,s,l,g,d,_,x,b;return Lt(this,function(I){switch(I.label){case 0:return[4,t.endpoint()];case 1:if(n=I.sent(),o=void 0===(i=n.protocol)?"https":i,s=n.port,g={"content-type":"application/json"},d=((l=n.path)?.endsWith("/")?l.slice(0,-1):l||"")+"/places/v0/indexes/{IndexName}/search/text",void 0===e.IndexName)throw new Error("No value provided for input HTTP label: IndexName.");if((_=e.IndexName).length<=0)throw new Error("Empty value provided for input HTTP label: IndexName.");return d=d.replace("{IndexName}",Sh(_)),x=JSON.stringify(Ce(Ce(Ce(Ce(Ce(Ce({},null!=e.BiasPosition&&{BiasPosition:xd(e.BiasPosition,t)}),null!=e.FilterBBox&&{FilterBBox:oA(e.FilterBBox)}),null!=e.FilterCountries&&{FilterCountries:uA(e.FilterCountries)}),null!=e.Language&&{Language:e.Language}),null!=e.MaxResults&&{MaxResults:e.MaxResults}),null!=e.Text&&{Text:e.Text})),[4,t.endpoint()];case 2:if(b=I.sent().hostname,!0!==t.disableHostPrefix&&!Hp(b="places."+b))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new El({protocol:o,hostname:b,port:s,method:"POST",headers:g,path:d,body:x})]}})})}(n,r)},t.prototype.deserialize=function(n,r){return function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r,i,o;return Lt(this,function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,C$(e,t)]:(n={$metadata:he(e),Results:void 0,Summary:void 0},i=Sl,o=Eh,[4,on(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Results&&(n.Results=function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:function(e,t){return{Distance:Xg(e.Distance),Place:null!=e.Place?yA(e.Place,t):void 0,Relevance:Xg(e.Relevance)}}(n,t)})}(r.Results,t)),null!=r.Summary&&(n.Summary=function(e,t){return{BiasPosition:null!=e.BiasPosition?ju(e.BiasPosition,t):void 0,DataSource:Mi(e.DataSource),FilterBBox:null!=e.FilterBBox?y0(e.FilterBBox):void 0,FilterCountries:null!=e.FilterCountries?pA(e.FilterCountries):void 0,Language:Mi(e.Language),MaxResults:Yg(e.MaxResults),ResultBBox:null!=e.ResultBBox?y0(e.ResultBBox):void 0,Text:Mi(e.Text)}}(r.Summary,t)),[2,Promise.resolve(n)]}})})}(n,r)},t}(Wp),Q9=function(e){function t(n){var r=e.call(this)||this;return r.input=n,r}return Zt(t,e),t.prototype.resolveMiddleware=function(n,r,i){this.middlewareStack.use(Qp(r,this.serialize,this.deserialize));var o=n.concat(this.middlewareStack),_=r.requestHandler;return o.resolve(function(x){return _.handle(x.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"SearchPlaceIndexForPositionCommand",inputFilterSensitiveLog:u0.filterSensitiveLog,outputFilterSensitiveLog:f0.filterSensitiveLog})},t.prototype.serialize=function(n,r){return function(e,t){return Wt(void 0,void 0,void 0,function(){var n,i,o,s,l,g,d,_,x,b;return Lt(this,function(I){switch(I.label){case 0:return[4,t.endpoint()];case 1:if(n=I.sent(),o=void 0===(i=n.protocol)?"https":i,s=n.port,g={"content-type":"application/json"},d=((l=n.path)?.endsWith("/")?l.slice(0,-1):l||"")+"/places/v0/indexes/{IndexName}/search/position",void 0===e.IndexName)throw new Error("No value provided for input HTTP label: IndexName.");if((_=e.IndexName).length<=0)throw new Error("Empty value provided for input HTTP label: IndexName.");return d=d.replace("{IndexName}",Sh(_)),x=JSON.stringify(Ce(Ce(Ce({},null!=e.Language&&{Language:e.Language}),null!=e.MaxResults&&{MaxResults:e.MaxResults}),null!=e.Position&&{Position:xd(e.Position,t)})),[4,t.endpoint()];case 2:if(b=I.sent().hostname,!0!==t.disableHostPrefix&&!Hp(b="places."+b))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new El({protocol:o,hostname:b,port:s,method:"POST",headers:g,path:d,body:x})]}})})}(n,r)},t.prototype.deserialize=function(n,r){return function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r,i,o;return Lt(this,function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,x$(e,t)]:(n={$metadata:he(e),Results:void 0,Summary:void 0},i=Sl,o=Eh,[4,on(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Results&&(n.Results=function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:function(e,t){return{Distance:Xg(e.Distance),Place:null!=e.Place?yA(e.Place,t):void 0}}(n,t)})}(r.Results,t)),null!=r.Summary&&(n.Summary=function(e,t){return{DataSource:Mi(e.DataSource),Language:Mi(e.Language),MaxResults:Yg(e.MaxResults),Position:null!=e.Position?ju(e.Position,t):void 0}}(r.Summary,t)),[2,Promise.resolve(n)]}})})}(n,r)},t}(Wp),e7=function(e){function t(n){var r=e.call(this)||this;return r.input=n,r}return Zt(t,e),t.prototype.resolveMiddleware=function(n,r,i){this.middlewareStack.use(Qp(r,this.serialize,this.deserialize));var o=n.concat(this.middlewareStack),_=r.requestHandler;return o.resolve(function(x){return _.handle(x.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"GetGeofenceCommand",inputFilterSensitiveLog:n0.filterSensitiveLog,outputFilterSensitiveLog:r0.filterSensitiveLog})},t.prototype.serialize=function(n,r){return function(e,t){return Wt(void 0,void 0,void 0,function(){var n,i,o,s,l,g,d,_,b;return Lt(this,function(I){switch(I.label){case 0:return[4,t.endpoint()];case 1:if(n=I.sent(),o=void 0===(i=n.protocol)?"https":i,s=n.port,g={},d=((l=n.path)?.endsWith("/")?l.slice(0,-1):l||"")+"/geofencing/v0/collections/{CollectionName}/geofences/{GeofenceId}",void 0===e.CollectionName)throw new Error("No value provided for input HTTP label: CollectionName.");if((_=e.CollectionName).length<=0)throw new Error("Empty value provided for input HTTP label: CollectionName.");if(d=d.replace("{CollectionName}",Sh(_)),void 0===e.GeofenceId)throw new Error("No value provided for input HTTP label: GeofenceId.");if((_=e.GeofenceId).length<=0)throw new Error("Empty value provided for input HTTP label: GeofenceId.");return d=d.replace("{GeofenceId}",Sh(_)),[4,t.endpoint()];case 2:if(b=I.sent().hostname,!0!==t.disableHostPrefix&&!Hp(b="geofencing."+b))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new El({protocol:o,hostname:b,port:s,method:"GET",headers:g,path:d,body:void 0})]}})})}(n,r)},t.prototype.deserialize=function(n,r){return function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r,i,o;return Lt(this,function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,o$(e,t)]:(n={$metadata:he(e),CreateTime:void 0,GeofenceId:void 0,Geometry:void 0,Status:void 0,UpdateTime:void 0},i=Sl,o=Eh,[4,on(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).CreateTime&&(n.CreateTime=Sl(Jp(r.CreateTime))),null!=r.GeofenceId&&(n.GeofenceId=Mi(r.GeofenceId)),null!=r.Geometry&&(n.Geometry=gA(r.Geometry,t)),null!=r.Status&&(n.Status=Mi(r.Status)),null!=r.UpdateTime&&(n.UpdateTime=Sl(Jp(r.UpdateTime))),[2,Promise.resolve(n)]}})})}(n,r)},t}(Wp),t7=function(e){function t(n){var r=e.call(this)||this;return r.input=n,r}return Zt(t,e),t.prototype.resolveMiddleware=function(n,r,i){this.middlewareStack.use(Qp(r,this.serialize,this.deserialize));var o=n.concat(this.middlewareStack),_=r.requestHandler;return o.resolve(function(x){return _.handle(x.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"ListGeofencesCommand",inputFilterSensitiveLog:o0.filterSensitiveLog,outputFilterSensitiveLog:s0.filterSensitiveLog})},t.prototype.serialize=function(n,r){return function(e,t){return Wt(void 0,void 0,void 0,function(){var n,i,o,s,l,g,d,_,x,b;return Lt(this,function(I){switch(I.label){case 0:return[4,t.endpoint()];case 1:if(n=I.sent(),o=void 0===(i=n.protocol)?"https":i,s=n.port,g={"content-type":"application/json"},d=((l=n.path)?.endsWith("/")?l.slice(0,-1):l||"")+"/geofencing/v0/collections/{CollectionName}/list-geofences",void 0===e.CollectionName)throw new Error("No value provided for input HTTP label: CollectionName.");if((_=e.CollectionName).length<=0)throw new Error("Empty value provided for input HTTP label: CollectionName.");return d=d.replace("{CollectionName}",Sh(_)),x=JSON.stringify(Ce({},null!=e.NextToken&&{NextToken:e.NextToken})),[4,t.endpoint()];case 2:if(b=I.sent().hostname,!0!==t.disableHostPrefix&&!Hp(b="geofencing."+b))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new El({protocol:o,hostname:b,port:s,method:"POST",headers:g,path:d,body:x})]}})})}(n,r)},t.prototype.deserialize=function(n,r){return function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r,i,o;return Lt(this,function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,h$(e,t)]:(n={$metadata:he(e),Entries:void 0,NextToken:void 0},i=Sl,o=Eh,[4,on(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Entries&&(n.Entries=function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:function(e,t){return{CreateTime:null!=e.CreateTime?Sl(Jp(e.CreateTime)):void 0,GeofenceId:Mi(e.GeofenceId),Geometry:null!=e.Geometry?gA(e.Geometry,t):void 0,Status:Mi(e.Status),UpdateTime:null!=e.UpdateTime?Sl(Jp(e.UpdateTime)):void 0}}(n,t)})}(r.Entries,t)),null!=r.NextToken&&(n.NextToken=Mi(r.NextToken)),[2,Promise.resolve(n)]}})})}(n,r)},t}(Wp),n7=function(e){function t(n){var r=e.call(this)||this;return r.input=n,r}return Zt(t,e),t.prototype.resolveMiddleware=function(n,r,i){this.middlewareStack.use(Qp(r,this.serialize,this.deserialize));var o=n.concat(this.middlewareStack),_=r.requestHandler;return o.resolve(function(x){return _.handle(x.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"BatchPutGeofenceCommand",inputFilterSensitiveLog:e0.filterSensitiveLog,outputFilterSensitiveLog:t0.filterSensitiveLog})},t.prototype.serialize=function(n,r){return function(e,t){return Wt(void 0,void 0,void 0,function(){var n,i,o,s,l,g,d,_,x,b;return Lt(this,function(I){switch(I.label){case 0:return[4,t.endpoint()];case 1:if(n=I.sent(),o=void 0===(i=n.protocol)?"https":i,s=n.port,g={"content-type":"application/json"},d=((l=n.path)?.endsWith("/")?l.slice(0,-1):l||"")+"/geofencing/v0/collections/{CollectionName}/put-geofences",void 0===e.CollectionName)throw new Error("No value provided for input HTTP label: CollectionName.");if((_=e.CollectionName).length<=0)throw new Error("Empty value provided for input HTTP label: CollectionName.");return d=d.replace("{CollectionName}",Sh(_)),x=JSON.stringify(Ce({},null!=e.Entries&&{Entries:N$(e.Entries,t)})),[4,t.endpoint()];case 2:if(b=I.sent().hostname,!0!==t.disableHostPrefix&&!Hp(b="geofencing."+b))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new El({protocol:o,hostname:b,port:s,method:"POST",headers:g,path:d,body:x})]}})})}(n,r)},t.prototype.deserialize=function(n,r){return function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r,i,o;return Lt(this,function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,kH(e,t)]:(n={$metadata:he(e),Errors:void 0,Successes:void 0},i=Sl,o=Eh,[4,on(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Errors&&(n.Errors=function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:function(e,t){return{Error:null!=e.Error?nm(e.Error,t):void 0,GeofenceId:Mi(e.GeofenceId)}}(n,t)})}(r.Errors,t)),null!=r.Successes&&(n.Successes=function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:function(e,t){return{CreateTime:null!=e.CreateTime?Sl(Jp(e.CreateTime)):void 0,GeofenceId:Mi(e.GeofenceId),UpdateTime:null!=e.UpdateTime?Sl(Jp(e.UpdateTime)):void 0}}(n)})}(r.Successes)),[2,Promise.resolve(n)]}})})}(n,r)},t}(Wp),r7=function(e){function t(n){var r=e.call(this)||this;return r.input=n,r}return Zt(t,e),t.prototype.resolveMiddleware=function(n,r,i){this.middlewareStack.use(Qp(r,this.serialize,this.deserialize));var o=n.concat(this.middlewareStack),_=r.requestHandler;return o.resolve(function(x){return _.handle(x.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"BatchDeleteGeofenceCommand",inputFilterSensitiveLog:Y_.filterSensitiveLog,outputFilterSensitiveLog:X_.filterSensitiveLog})},t.prototype.serialize=function(n,r){return function(e,t){return Wt(void 0,void 0,void 0,function(){var n,i,o,s,l,g,d,_,x,b;return Lt(this,function(I){switch(I.label){case 0:return[4,t.endpoint()];case 1:if(n=I.sent(),o=void 0===(i=n.protocol)?"https":i,s=n.port,g={"content-type":"application/json"},d=((l=n.path)?.endsWith("/")?l.slice(0,-1):l||"")+"/geofencing/v0/collections/{CollectionName}/delete-geofences",void 0===e.CollectionName)throw new Error("No value provided for input HTTP label: CollectionName.");if((_=e.CollectionName).length<=0)throw new Error("Empty value provided for input HTTP label: CollectionName.");return d=d.replace("{CollectionName}",Sh(_)),x=JSON.stringify(Ce({},null!=e.GeofenceIds&&{GeofenceIds:fA(e.GeofenceIds)})),[4,t.endpoint()];case 2:if(b=I.sent().hostname,!0!==t.disableHostPrefix&&!Hp(b="geofencing."+b))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new El({protocol:o,hostname:b,port:s,method:"POST",headers:g,path:d,body:x})]}})})}(n,r)},t.prototype.deserialize=function(n,r){return function(e,t){return Wt(void 0,void 0,void 0,function(){var n,r,i,o;return Lt(this,function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,MH(e,t)]:(n={$metadata:he(e),Errors:void 0},i=Sl,o=Eh,[4,on(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Errors&&(n.Errors=function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:function(e,t){return{Error:null!=e.Error?nm(e.Error,t):void 0,GeofenceId:Mi(e.GeofenceId)}}(n,t)})}(r.Errors,t)),[2,Promise.resolve(n)]}})})}(n,r)},t}(Wp);var jx=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o};function CA(e,t){if(!Number.isFinite(e)||!Number.isFinite(t))throw new Error("Invalid coordinates: ["+e+","+t+"]");if(t<-90||90<t)throw new Error("Latitude must be between -90 and 90 degrees inclusive.");if(e<-180||180<e)throw new Error("Longitude must be between -180 and 180 degrees inclusive.")}function Ux(e){if(!/^[-._\p{L}\p{N}]+$/iu.test(e))throw new Error("Invalid geofenceId: '"+e+"' - IDs can only contain alphanumeric characters, hyphens, underscores and periods.")}function IA(e,t){var n=t?t+": ":"";if(e.length<4)throw new Error(n+"LinearRing must contain 4 or more coordinates.");var r=[];if(e.forEach(function(_){try{CA(_[0],_[1])}catch(x){r.push({coordinates:_,error:x.message})}}),r.length>0)throw new Error(n+"One or more of the coordinates in the Polygon LinearRing are not valid: "+JSON.stringify(r));var i=jx(e[0],2),o=i[0],s=i[1],l=jx(e[e.length-1],2);if(o!==l[0]||s!==l[1])throw new Error(n+"LinearRing's first and last coordinates are not the same");if(function d7(e){for(var i,o,t=function l7(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(e),n=0,r=1;r<t.length;)i=o||t[0],n+=((o=t[r])[0]-i[0])*(o[1]+i[1]),r++;return n>0}(e))throw new Error(n+"LinearRing coordinates must be wound counterclockwise")}var Ql=function(e,t,n,r){return new(n||(n=Promise))(function(o,s){function l(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(l,g)}d((r=r.apply(e,t||[])).next())})},ec=function(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}},p7=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},_u=new Yl("AmazonLocationServiceProvider"),g7=function(){function e(t){this._config=t||{},_u.debug("Geo Options",this._config)}return e.prototype.getCategory=function(){return e.CATEGORY},e.prototype.getProviderName=function(){return e.PROVIDER_NAME},e.prototype.configure=function(t){return _u.debug("configure Amazon Location Service Provider",t),t?(this._config=Object.assign({},this._config,t),this._config):this._config},e.prototype.getAvailableMaps=function(){this._verifyMapResources();var t=[],n=this._config.maps.items,r=this._config.region;for(var i in n)t.push({mapName:i,style:n[i].style,region:r});return t},e.prototype.getDefaultMap=function(){this._verifyMapResources();var t=this._config.maps.default;return{mapName:t,style:this._config.maps.items[t].style,region:this._config.region}},e.prototype.searchByText=function(t,n){return Ql(this,void 0,void 0,function(){var i,o,s,l,g,d;return ec(this,function(x){switch(x.label){case 0:return[4,this._ensureCredentials()];case 1:if(!x.sent())throw new Error("No credentials");if(this._verifySearchIndex(n?.searchIndexName),i={Text:t,IndexName:this._config.search_indices.default},n){if(i.FilterCountries=n.countries,i.MaxResults=n.maxResults,n.searchIndexName&&(i.IndexName=n.searchIndexName),n.biasPosition&&n.searchAreaConstraints)throw new Error("BiasPosition and SearchAreaConstraints are mutually exclusive, please remove one or the other from the options object");n.biasPosition&&(i.BiasPosition=n.biasPosition),n.searchAreaConstraints&&(i.FilterBBox=n.searchAreaConstraints)}o=new Xp({credentials:this._config.credentials,region:this._config.region,customUserAgent:Ac()}),s=new X9(i),x.label=2;case 2:return x.trys.push([2,4,,5]),[4,o.send(s)];case 3:return l=x.sent(),[3,5];case 4:throw g=x.sent(),_u.debug(g),g;case 5:return d=l.Results.map(function(b){return b.Place}),[2,cD()(d,{deep:!0})]}})})},e.prototype.searchByCoordinates=function(t,n){return Ql(this,void 0,void 0,function(){var i,o,s,l,g,d;return ec(this,function(x){switch(x.label){case 0:return[4,this._ensureCredentials()];case 1:if(!x.sent())throw new Error("No credentials");this._verifySearchIndex(n?.searchIndexName),i={Position:t,IndexName:this._config.search_indices.default},n&&(n.searchIndexName&&(i.IndexName=n.searchIndexName),i.MaxResults=n.maxResults),o=new Xp({credentials:this._config.credentials,region:this._config.region,customUserAgent:Ac()}),s=new Q9(i),x.label=2;case 2:return x.trys.push([2,4,,5]),[4,o.send(s)];case 3:return l=x.sent(),[3,5];case 4:throw g=x.sent(),_u.debug(g),g;case 5:return d=l.Results.map(function(b){return b.Place}),[2,cD()(d[0],{deep:!0})]}})})},e.prototype.saveGeofences=function(t,n){return Ql(this,void 0,void 0,function(){var i,o,s,g=this;return ec(this,function(d){switch(d.label){case 0:if(t.length<1)throw new Error("Geofence input array is empty");return[4,this._ensureCredentials()];case 1:if(!d.sent())throw new Error("No credentials");try{this._verifyGeofenceCollections(n?.collectionName)}catch(_){throw _u.debug(_),_}for(function h7(e){var t={};e.forEach(function(n){if(!n.geofenceId)throw new Error("Geofence '"+n+"' is missing geofenceId");var r=n.geofenceId;if(Ux(r),t[r])throw new Error("Duplicate geofenceId: "+r);if(t[r]=!0,!n.geometry)throw new Error("Geofence '"+r+"' is missing geometry");var i=n.geometry;if(!i.polygon)throw new Error("Geofence '"+r+"' is missing geometry.polygon");var o=i.polygon;try{!function f7(e,t){var n=t?t+": ":"";if(!Array.isArray(e))throw new Error(n+"Polygon is of incorrect structure. It should be an array of LinearRings");if(e.length<1)throw new Error(n+"Polygon must have a single LinearRing array.");if(e.length>1)throw new Error(n+"Polygon must have a single LinearRing array. Note: We do not currently support polygons with holes, multipolygons, polygons that are wound clockwise, or that cross the antimeridian.");if(e.reduce(function(i,o){return i+o.length},0)>1e3)throw new Error(n+"Polygon has more than the maximum 1000 vertices.");e.forEach(function(i){IA(i,t)})}(o,r)}catch(g){if(g.message.includes("Polygon has more than the maximum 1000 vertices."))throw new Error("Geofence '"+r+"' has more than the maximum of 1000 vertices")}IA(jx(o,1)[0],r)})}(t),i=t.map(function(_){return{GeofenceId:_.geofenceId,Geometry:{Polygon:_.geometry.polygon}}}),o={successes:[],errors:[]},s=[];i.length>0;)s.push(i.splice(0,10));return[4,Promise.all(s.map(function(_){return Ql(g,void 0,void 0,function(){var x,b;return ec(this,function(I){switch(I.label){case 0:return I.trys.push([0,2,,3]),[4,this._AmazonLocationServiceBatchPutGeofenceCall(_,n?.collectionName||this._config.geofenceCollections.default)];case 1:return x=I.sent(),[3,3];case 2:return b=I.sent(),_.forEach(function(k){o.errors.push({geofenceId:k.GeofenceId,error:{code:"APIConnectionError",message:b.message}})}),[2];case 3:return x.Successes.forEach(function(k){o.successes.push({geofenceId:k.GeofenceId,createTime:k.CreateTime,updateTime:k.UpdateTime})}),x.Errors.forEach(function(k){var R=k.Error;o.errors.push({error:{code:R.Code,message:R.Message},geofenceId:k.GeofenceId})}),[2]}})})}))];case 2:return d.sent(),[2,o]}})})},e.prototype.getGeofence=function(t,n){return Ql(this,void 0,void 0,function(){var i,s,l,g;return ec(this,function(R){switch(R.label){case 0:return[4,this._ensureCredentials()];case 1:if(!R.sent())throw new Error("No credentials");try{this._verifyGeofenceCollections(n?.collectionName)}catch(xe){throw _u.debug(xe),xe}Ux(t),i=new Xp({credentials:this._config.credentials,region:this._config.region,customUserAgent:Ac()}),s=new e7({GeofenceId:t,CollectionName:n?.collectionName||this._config.geofenceCollections.default}),R.label=2;case 2:return R.trys.push([2,4,,5]),[4,i.send(s)];case 3:return l=R.sent(),[3,5];case 4:throw g=R.sent(),_u.debug(g),g;case 5:return[2,{createTime:l.CreateTime,geofenceId:l.GeofenceId,geometry:{polygon:l.Geometry.Polygon},status:l.Status,updateTime:l.UpdateTime}]}})})},e.prototype.listGeofences=function(t){return Ql(this,void 0,void 0,function(){var r,o,s,l,g;return ec(this,function(x){switch(x.label){case 0:return[4,this._ensureCredentials()];case 1:if(!x.sent())throw new Error("No credentials");try{this._verifyGeofenceCollections(t?.collectionName)}catch(b){throw _u.debug(b),b}r=new Xp({credentials:this._config.credentials,region:this._config.region,customUserAgent:Ac()}),o=new t7({NextToken:t?.nextToken,CollectionName:t?.collectionName||this._config.geofenceCollections.default}),x.label=2;case 2:return x.trys.push([2,4,,5]),[4,r.send(o)];case 3:return s=x.sent(),[3,5];case 4:throw l=x.sent(),_u.debug(l),l;case 5:return g=s.NextToken,[2,{entries:s.Entries.map(function(b){return{geofenceId:b.GeofenceId,createTime:b.CreateTime,updateTime:b.UpdateTime,status:b.Status,geometry:{polygon:b.Geometry.Polygon}}}),nextToken:g}]}})})},e.prototype.deleteGeofences=function(t,n){return Ql(this,void 0,void 0,function(){var i,o,s,l,g=this;return ec(this,function(d){switch(d.label){case 0:if(t.length<1)throw new Error("GeofenceId input array is empty");return[4,this._ensureCredentials()];case 1:if(!d.sent())throw new Error("No credentials");if(this._verifyGeofenceCollections(n?.collectionName),(i=t.filter(function(_){try{Ux(_)}catch{return!0}})).length>0)throw new Error("Invalid geofence ids: "+i.join(", "));for(o={successes:[],errors:[]},s=[],l=0;l<t.length;)s.push(t.slice(l,l+=10));return[4,Promise.all(s.map(function(_){return Ql(g,void 0,void 0,function(){var x,b,I,k;return ec(this,function(R){switch(R.label){case 0:return R.trys.push([0,2,,3]),[4,this._AmazonLocationServiceBatchDeleteGeofenceCall(_,n?.collectionName||this._config.geofenceCollections.default)];case 1:return x=R.sent(),[3,3];case 2:return b=R.sent(),_.forEach(function(xe){o.errors.push({geofenceId:xe,error:{code:b.message,message:b.message}})}),[2];case 3:return I=x.Errors.map(function(xe){return xe.geofenceId}),(k=o.successes).push.apply(k,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p7(arguments[t]));return e}(_.filter(function(xe){return!I.includes(xe)}))),[2]}})})}))];case 2:return d.sent(),[2,o]}})})},e.prototype._ensureCredentials=function(){return Ql(this,void 0,void 0,function(){var t,n,r;return ec(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,_x.get()];case 1:return(t=i.sent())?(n=_x.shear(t),_u.debug("Set credentials for storage. Credentials are:",n),this._config.credentials=n,[2,!0]):[2,!1];case 2:return r=i.sent(),_u.debug("Ensure credentials error. Credentials are:",r),[2,!1];case 3:return[2]}})})},e.prototype._verifyMapResources=function(){var t;if(!this._config.maps)throw _u.debug(t="No map resources found in amplify config, run 'amplify add geo' to create one and run `amplify push` after"),new Error(t);if(!this._config.maps.default)throw _u.debug(t="No default map resource found in amplify config, run 'amplify add geo' to create one and run `amplify push` after"),new Error(t)},e.prototype._verifySearchIndex=function(t){if(!(this._config.search_indices&&this._config.search_indices.default||t)){var n="No Search Index found in amplify config, please run `amplify add geo` to create one and run `amplify push` after.";throw _u.debug(n),new Error(n)}},e.prototype._verifyGeofenceCollections=function(t){if(!(this._config.geofenceCollections&&this._config.geofenceCollections.default||t)){var n="No Geofence Collections found, please run `amplify add geo` to create one and run `amplify push` after.";throw _u.debug(n),new Error(n)}},e.prototype._AmazonLocationServiceBatchPutGeofenceCall=function(t,n){return Ql(this,void 0,void 0,function(){var r,i,o,s;return ec(this,function(g){switch(g.label){case 0:r={Entries:t,CollectionName:n||this._config.geofenceCollections.default},i=new Xp({credentials:this._config.credentials,region:this._config.region,customUserAgent:Ac()}),o=new n7(r),g.label=1;case 1:return g.trys.push([1,3,,4]),[4,i.send(o)];case 2:return s=g.sent(),[3,4];case 3:throw g.sent();case 4:return[2,s]}})})},e.prototype._AmazonLocationServiceBatchDeleteGeofenceCall=function(t,n){return Ql(this,void 0,void 0,function(){var r,i,o,s;return ec(this,function(g){switch(g.label){case 0:r={GeofenceIds:t,CollectionName:n||this._config.geofenceCollections.default},i=new Xp({credentials:this._config.credentials,region:this._config.region,customUserAgent:Ac()}),o=new r7(r),g.label=1;case 1:return g.trys.push([1,3,,4]),[4,i.send(o)];case 2:return s=g.sent(),[3,4];case 3:throw g.sent();case 4:return[2,s]}})})},e.CATEGORY="Geo",e.PROVIDER_NAME="AmazonLocationService",e}(),im=function(e,t,n,r){return new(n||(n=Promise))(function(o,s){function l(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(l,g)}d((r=r.apply(e,t||[])).next())})},om=function(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}},Ed=new Yl("Geo"),mf="AmazonLocationService",v7=function(){function e(){this._config={},this._pluggables=[],Ed.debug("Geo Options",this._config)}return e.prototype.getModuleName=function(){return e.MODULE},e.prototype.addPluggable=function(t){if(t&&"Geo"===t.getCategory())return this._pluggables.push(t),t.configure(this._config[t.getProviderName()])},e.prototype.getPluggable=function(t){var n=this._pluggables.find(function(r){return r.getProviderName()===t});if(void 0===n)throw Ed.debug("No plugin found with providerName",t),new Error("No plugin found in Geo for the provider");return n},e.prototype.removePluggable=function(t){this._pluggables=this._pluggables.filter(function(n){return n.getProviderName()!==t})},e.prototype.configure=function(t){var n=this;if(Ed.debug("configure Geo"),!t)return this._config;var r=lD(t);return this._config=Object.assign({},this._config,r.Geo,t),this._pluggables.forEach(function(i){i.configure(n._config[i.getProviderName()])}),0===this._pluggables.length&&this.addPluggable(new g7),this._config},e.prototype.getAvailableMaps=function(t){return void 0===t&&(t=mf),this.getPluggable(t).getAvailableMaps()},e.prototype.getDefaultMap=function(t){return void 0===t&&(t=mf),this.getPluggable(t).getDefaultMap()},e.prototype.searchByText=function(t,n){return im(this,void 0,void 0,function(){var r,o,s;return om(this,function(l){switch(l.label){case 0:o=this.getPluggable(void 0===(r=(n||{}).providerName)?mf:r),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,o.searchByText(t,n)];case 2:return[2,l.sent()];case 3:throw s=l.sent(),Ed.debug(s),s;case 4:return[2]}})})},e.prototype.searchByCoordinates=function(t,n){return im(this,void 0,void 0,function(){var r,o,s,l,g,d;return om(this,function(_){switch(_.label){case 0:o=this.getPluggable(void 0===(r=(n||{}).providerName)?mf:r),s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}(t,2),l=s[0],g=s[1],_.label=1;case 1:return _.trys.push([1,3,,4]),CA(l,g),[4,o.searchByCoordinates(t,n)];case 2:return[2,_.sent()];case 3:throw d=_.sent(),Ed.debug(d),d;case 4:return[2]}})})},e.prototype.saveGeofences=function(t,n){return im(this,void 0,void 0,function(){var r,o,s,l;return om(this,function(g){switch(g.label){case 0:o=this.getPluggable(void 0===(r=(n||{}).providerName)?mf:r),s=Array.isArray(t)?t:[t],g.label=1;case 1:return g.trys.push([1,3,,4]),[4,o.saveGeofences(s,n)];case 2:return[2,g.sent()];case 3:throw l=g.sent(),Ed.debug(l),l;case 4:return[2]}})})},e.prototype.getGeofence=function(t,n){return im(this,void 0,void 0,function(){var r,o,s;return om(this,function(l){switch(l.label){case 0:o=this.getPluggable(void 0===(r=(n||{}).providerName)?mf:r),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,o.getGeofence(t,n)];case 2:return[2,l.sent()];case 3:throw s=l.sent(),Ed.debug(s),s;case 4:return[2]}})})},e.prototype.listGeofences=function(t){return im(this,void 0,void 0,function(){var n,i,o;return om(this,function(s){switch(s.label){case 0:i=this.getPluggable(void 0===(n=(t||{}).providerName)?mf:n),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,i.listGeofences(t)];case 2:return[2,s.sent()];case 3:throw o=s.sent(),Ed.debug(o),o;case 4:return[2]}})})},e.prototype.deleteGeofences=function(t,n){return im(this,void 0,void 0,function(){var r,o,s,l;return om(this,function(g){switch(g.label){case 0:o=this.getPluggable(void 0===(r=(n||{}).providerName)?mf:r),s=Array.isArray(t)?t:[t],g.label=1;case 1:return g.trys.push([1,3,,4]),[4,o.deleteGeofences(s,n)];case 2:return[2,g.sent()];case 3:throw l=g.sent(),Ed.debug(l),l;case 4:return[2]}})})},e.MODULE="Geo",e}(),v0=new v7;kp.register(v0);var iy=U(4987),_0=function(e,t,n,r){return new(n||(n=Promise))(function(o,s){function l(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(l,g)}d((r=r.apply(e,t||[])).next())})};class b0{constructor(t,n){this.refreshCredentials=()=>_0(this,void 0,void 0,function*(){try{this.credentials=yield kp.Auth.currentCredentials()}catch(r){throw console.error(`Failed to refresh credentials: ${r}`),r}}),this.refreshCredentialsWithRetry=()=>_0(this,void 0,void 0,function*(){try{yield JP(this.refreshCredentials,[],3e5),this.activeTimeout&&clearTimeout(this.activeTimeout);const o=new Date(this.credentials.expiration).getTime()-(new Date).getTime()-1e4;this.activeTimeout=window.setTimeout(this.refreshCredentialsWithRetry,o)}catch(r){console.error(`Failed to refresh credentials: ${r}`)}}),this.transformRequest=(r,i)=>{if("Style"===i&&!r.includes("://")){if(null==this.region)throw new Error("AWS region for map is undefined. Please verify that the region is set in aws-exports.js or that you are providing an AWS region parameter to createMap");r=`https://maps.geo.${this.region}.amazonaws.com/maps/v0/maps/${r}/style-descriptor`}if(r.includes("amazonaws.com")){const o=r+`?x-amz-user-agent=${encodeURIComponent((e=>e.replace(/\./g,"%2E"))(Ac()))}`;return{url:rB.signUrl(o,{access_key:this.credentials.accessKeyId,secret_key:this.credentials.secretAccessKey,session_token:this.credentials.sessionToken})}}},this.credentials=t,this.region=n,this.activeTimeout=null,this.refreshCredentialsWithRetry(),sB.listen("auth",r=>{switch(r.payload.event){case"signIn":case"signOut":case"tokenRefresh":this.refreshCredentialsWithRetry()}})}}b0.createMapLibreMap=e=>_0(void 0,void 0,void 0,function*(){const{region:t,mapConstructor:n=iy.Map}=e,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["region","mapConstructor"]),i=v0.getDefaultMap(),s=new b0(yield kp.Auth.currentCredentials(),t||i.region).transformRequest;return new n(Object.assign(Object.assign({},r),{style:e.style||i.mapName,transformRequest:s}))}),U(8407),U(209),U(8527),U(3913);const LA_amplify={Auth:{identityPoolId:"us-east-1:57a33aaf-0026-44e3-908c-7fb9d5730b9f",region:"us-east-1"},geo:{AmazonLocationService:{maps:{items:{AmazonMap:{style:"Default style"}},default:"AmazonMap"},region:"us-east-1"}}};let V7=(()=>{class e{constructor(){kp.configure(LA_amplify)}ngAfterViewInit(){this.loadMap()}getCurrentPosition(){return new lt(n=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(r=>{n.next({latitude:r.coords.latitude,longitude:r.coords.longitude}),n.complete()}):n.error()})}loadMap(){(e=>_0(void 0,void 0,void 0,function*(){return b0.createMapLibreMap(e)}))({container:"map",center:[0,0],zoom:0}).then(n=>{this.map=n,this.map.addControl(new iy.NavigationControl),this.map.addControl(new iy.GeolocateControl),this.getCurrentPosition().subscribe(r=>{this.map.flyTo({center:[r.longitude,r.latitude],zoom:13});const i=new iy.Marker;i.setLngLat([r.longitude,r.latitude]),i.setPopup((new iy.Popup).setHTML("Angular AWS Map")),i.addTo(this.map)})})}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Rs({type:e,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container-fluid","py-3"],["id","map"]],template:function(n,r){1&n&&(ov(0,"div",0)(1,"h1"),function OS(e,t=""){const n=zt(),r=Lr(),i=e+22,o=r.firstCreatePass?lp(r,i,1,t,null):r.data[i],s=n[i]=function qf(e,t){return e.createText(t)}(n[11],t);hu(r,n,s,o),Cs(o,!1)}(2,"Angular AWS Map"),ug(),av(3,"div",1),ug())},styles:["#map[_ngcontent-%COMP%]{height:400px;width:100%;max-width:600px}"]}),e})(),G7=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=jo({type:e,bootstrap:[V7]}),e.\u0275inj=Qn({imports:[Gk,Nz]}),e})();(function EL(){MI=!1})(),Vk().bootstrapModule(G7).catch(e=>console.error(e))},1437:function(Ae,J,U){"use strict";var V=this&&this.__importDefault||function(G){return G&&G.__esModule?G:{default:G}};Object.defineProperty(J,"__esModule",{value:!0});var X=V(U(9814)),m=U(8275);J.default=function q(G,z,T){void 0===T&&(T={});for(var D=T.steps||64,F=T.properties?T.properties:!Array.isArray(G)&&"Feature"===G.type&&G.properties?G.properties:{},Z=[],Y=0;Y<D;Y++)Z.push(X.default(G,z,-360*Y/D,T).geometry.coordinates);return Z.push(Z[0]),m.polygon([Z],F)}},9814:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});var V=U(8275),X=U(8418);J.default=function m(q,G,z,T){void 0===T&&(T={});var D=X.getCoord(q),F=V.degreesToRadians(D[0]),Z=V.degreesToRadians(D[1]),Y=V.degreesToRadians(z),ie=V.lengthToRadians(G,T.units),pe=Math.asin(Math.sin(Z)*Math.cos(ie)+Math.cos(Z)*Math.sin(ie)*Math.cos(Y)),se=F+Math.atan2(Math.sin(Y)*Math.sin(ie)*Math.cos(Z),Math.cos(ie)-Math.sin(Z)*Math.sin(pe)),be=V.radiansToDegrees(se),Me=V.radiansToDegrees(pe);return V.point([be,Me],T.properties)}},2777:(Ae,J,U)=>{"use strict";var X=U(8418),m=U(8275);J.Z=function q(G,z,T){void 0===T&&(T={});var D=X.getCoord(G),F=X.getCoord(z),Z=m.degreesToRadians(F[1]-D[1]),Y=m.degreesToRadians(F[0]-D[0]),ie=m.degreesToRadians(D[1]),pe=m.degreesToRadians(F[1]),se=Math.pow(Math.sin(Z/2),2)+Math.pow(Math.sin(Y/2),2)*Math.cos(ie)*Math.cos(pe);return m.radiansToLength(2*Math.atan2(Math.sqrt(se),Math.sqrt(1-se)),T.units)}},8275:(Ae,J)=>{"use strict";function U(O,B,j){void 0===j&&(j={});var ee={type:"Feature"};return(0===j.id||j.id)&&(ee.id=j.id),j.bbox&&(ee.bbox=j.bbox),ee.properties=B||{},ee.geometry=O,ee}function X(O,B,j){if(void 0===j&&(j={}),!O)throw new Error("coordinates is required");if(!Array.isArray(O))throw new Error("coordinates must be an Array");if(O.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!nt(O[0])||!nt(O[1]))throw new Error("coordinates must contain numbers");return U({type:"Point",coordinates:O},B,j)}function q(O,B,j){void 0===j&&(j={});for(var ee=0,W=O;ee<W.length;ee++){var ce=W[ee];if(ce.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Ze=0;Ze<ce[ce.length-1].length;Ze++)if(ce[ce.length-1][Ze]!==ce[0][Ze])throw new Error("First and last Position are not equivalent.")}return U({type:"Polygon",coordinates:O},B,j)}function z(O,B,j){if(void 0===j&&(j={}),O.length<2)throw new Error("coordinates must be an array of two or more positions");return U({type:"LineString",coordinates:O},B,j)}function D(O,B){void 0===B&&(B={});var j={type:"FeatureCollection"};return B.id&&(j.id=B.id),B.bbox&&(j.bbox=B.bbox),j.features=O,j}function F(O,B,j){return void 0===j&&(j={}),U({type:"MultiLineString",coordinates:O},B,j)}function Z(O,B,j){return void 0===j&&(j={}),U({type:"MultiPoint",coordinates:O},B,j)}function Y(O,B,j){return void 0===j&&(j={}),U({type:"MultiPolygon",coordinates:O},B,j)}function se(O,B){void 0===B&&(B="kilometers");var j=J.factors[B];if(!j)throw new Error(B+" units is invalid");return O*j}function be(O,B){void 0===B&&(B="kilometers");var j=J.factors[B];if(!j)throw new Error(B+" units is invalid");return O/j}function Je(O){return O%(2*Math.PI)*180/Math.PI}function nt(O){return!isNaN(O)&&null!==O&&!Array.isArray(O)}Object.defineProperty(J,"__esModule",{value:!0}),J.earthRadius=6371008.8,J.factors={centimeters:100*J.earthRadius,centimetres:100*J.earthRadius,degrees:J.earthRadius/111325,feet:3.28084*J.earthRadius,inches:39.37*J.earthRadius,kilometers:J.earthRadius/1e3,kilometres:J.earthRadius/1e3,meters:J.earthRadius,metres:J.earthRadius,miles:J.earthRadius/1609.344,millimeters:1e3*J.earthRadius,millimetres:1e3*J.earthRadius,nauticalmiles:J.earthRadius/1852,radians:1,yards:1.0936*J.earthRadius},J.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/J.earthRadius,yards:1.0936133},J.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},J.feature=U,J.geometry=function V(O,B,j){switch(void 0===j&&(j={}),O){case"Point":return X(B).geometry;case"LineString":return z(B).geometry;case"Polygon":return q(B).geometry;case"MultiPoint":return Z(B).geometry;case"MultiLineString":return F(B).geometry;case"MultiPolygon":return Y(B).geometry;default:throw new Error(O+" is invalid")}},J.point=X,J.points=function m(O,B,j){return void 0===j&&(j={}),D(O.map(function(ee){return X(ee,B)}),j)},J.polygon=q,J.polygons=function G(O,B,j){return void 0===j&&(j={}),D(O.map(function(ee){return q(ee,B)}),j)},J.lineString=z,J.lineStrings=function T(O,B,j){return void 0===j&&(j={}),D(O.map(function(ee){return z(ee,B)}),j)},J.featureCollection=D,J.multiLineString=F,J.multiPoint=Z,J.multiPolygon=Y,J.geometryCollection=function ie(O,B,j){return void 0===j&&(j={}),U({type:"GeometryCollection",geometries:O},B,j)},J.round=function pe(O,B){if(void 0===B&&(B=0),B&&!(B>=0))throw new Error("precision must be a positive number");var j=Math.pow(10,B||0);return Math.round(O*j)/j},J.radiansToLength=se,J.lengthToRadians=be,J.lengthToDegrees=function Me(O,B){return Je(be(O,B))},J.bearingToAzimuth=function Ne(O){var B=O%360;return B<0&&(B+=360),B},J.radiansToDegrees=Je,J.degreesToRadians=function je(O){return O%360*Math.PI/180},J.convertLength=function Se(O,B,j){if(void 0===B&&(B="kilometers"),void 0===j&&(j="kilometers"),!(O>=0))throw new Error("length must be a positive number");return se(be(O,B),j)},J.convertArea=function Ke(O,B,j){if(void 0===B&&(B="meters"),void 0===j&&(j="kilometers"),!(O>=0))throw new Error("area must be a positive number");var ee=J.areaFactors[B];if(!ee)throw new Error("invalid original units");var W=J.areaFactors[j];if(!W)throw new Error("invalid final units");return O/ee*W},J.isNumber=nt,J.isObject=function It(O){return!!O&&O.constructor===Object},J.validateBBox=function Ue(O){if(!O)throw new Error("bbox is required");if(!Array.isArray(O))throw new Error("bbox must be an Array");if(4!==O.length&&6!==O.length)throw new Error("bbox must be an Array of 4 or 6 numbers");O.forEach(function(B){if(!nt(B))throw new Error("bbox must only contain numbers")})},J.validateId=function A(O){if(!O)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof O))throw new Error("id must be a number or a string")}},8418:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});var V=U(8275);J.getCoord=function X(Z){if(!Z)throw new Error("coord is required");if(!Array.isArray(Z)){if("Feature"===Z.type&&null!==Z.geometry&&"Point"===Z.geometry.type)return Z.geometry.coordinates;if("Point"===Z.type)return Z.coordinates}if(Array.isArray(Z)&&Z.length>=2&&!Array.isArray(Z[0])&&!Array.isArray(Z[1]))return Z;throw new Error("coord must be GeoJSON Point or an Array of numbers")},J.getCoords=function m(Z){if(Array.isArray(Z))return Z;if("Feature"===Z.type){if(null!==Z.geometry)return Z.geometry.coordinates}else if(Z.coordinates)return Z.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},J.containsNumber=function q(Z){if(Z.length>1&&V.isNumber(Z[0])&&V.isNumber(Z[1]))return!0;if(Array.isArray(Z[0])&&Z[0].length)return q(Z[0]);throw new Error("coordinates must only contain numbers")},J.geojsonType=function G(Z,Y,ie){if(!Y||!ie)throw new Error("type and name required");if(!Z||Z.type!==Y)throw new Error("Invalid input to "+ie+": must be a "+Y+", given "+Z.type)},J.featureOf=function z(Z,Y,ie){if(!Z)throw new Error("No feature passed");if(!ie)throw new Error(".featureOf() requires a name");if(!Z||"Feature"!==Z.type||!Z.geometry)throw new Error("Invalid input to "+ie+", Feature with geometry required");if(!Z.geometry||Z.geometry.type!==Y)throw new Error("Invalid input to "+ie+": must be a "+Y+", given "+Z.geometry.type)},J.collectionOf=function T(Z,Y,ie){if(!Z)throw new Error("No featureCollection passed");if(!ie)throw new Error(".collectionOf() requires a name");if(!Z||"FeatureCollection"!==Z.type)throw new Error("Invalid input to "+ie+", FeatureCollection required");for(var pe=0,se=Z.features;pe<se.length;pe++){var be=se[pe];if(!be||"Feature"!==be.type||!be.geometry)throw new Error("Invalid input to "+ie+", Feature with geometry required");if(!be.geometry||be.geometry.type!==Y)throw new Error("Invalid input to "+ie+": must be a "+Y+", given "+be.geometry.type)}},J.getGeom=function D(Z){return"Feature"===Z.type?Z.geometry:Z},J.getType=function F(Z,Y){return"FeatureCollection"===Z.type?"FeatureCollection":"GeometryCollection"===Z.type?"GeometryCollection":"Feature"===Z.type&&null!==Z.geometry?Z.geometry.type:Z.type}},7230:function(Ae){Ae.exports=function(J){var U={};function V(X){if(U[X])return U[X].exports;var m=U[X]={i:X,l:!1,exports:{}};return J[X].call(m.exports,m,m.exports,V),m.l=!0,m.exports}return V.m=J,V.c=U,V.d=function(X,m,q){V.o(X,m)||Object.defineProperty(X,m,{enumerable:!0,get:q})},V.r=function(X){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(X,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(X,"__esModule",{value:!0})},V.t=function(X,m){if(1&m&&(X=V(X)),8&m||4&m&&"object"==typeof X&&X&&X.__esModule)return X;var q=Object.create(null);if(V.r(q),Object.defineProperty(q,"default",{enumerable:!0,value:X}),2&m&&"string"!=typeof X)for(var G in X)V.d(q,G,function(z){return X[z]}.bind(null,G));return q},V.n=function(X){var m=X&&X.__esModule?function(){return X.default}:function(){return X};return V.d(m,"a",m),m},V.o=function(X,m){return Object.prototype.hasOwnProperty.call(X,m)},V.p="",V(V.s=90)}({17:function(J,U,V){"use strict";U.__esModule=!0,U.default=void 0;var X=V(18),m=function(){function q(){}return q.getFirstMatch=function(G,z){var T=z.match(G);return T&&T.length>0&&T[1]||""},q.getSecondMatch=function(G,z){var T=z.match(G);return T&&T.length>1&&T[2]||""},q.matchAndReturnConst=function(G,z,T){if(G.test(z))return T},q.getWindowsVersionName=function(G){switch(G){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},q.getMacOSVersionName=function(G){var z=G.split(".").splice(0,2).map(function(T){return parseInt(T,10)||0});if(z.push(0),10===z[0])switch(z[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},q.getAndroidVersionName=function(G){var z=G.split(".").splice(0,2).map(function(T){return parseInt(T,10)||0});if(z.push(0),!(1===z[0]&&z[1]<5))return 1===z[0]&&z[1]<6?"Cupcake":1===z[0]&&z[1]>=6?"Donut":2===z[0]&&z[1]<2?"Eclair":2===z[0]&&2===z[1]?"Froyo":2===z[0]&&z[1]>2?"Gingerbread":3===z[0]?"Honeycomb":4===z[0]&&z[1]<1?"Ice Cream Sandwich":4===z[0]&&z[1]<4?"Jelly Bean":4===z[0]&&z[1]>=4?"KitKat":5===z[0]?"Lollipop":6===z[0]?"Marshmallow":7===z[0]?"Nougat":8===z[0]?"Oreo":9===z[0]?"Pie":void 0},q.getVersionPrecision=function(G){return G.split(".").length},q.compareVersions=function(G,z,T){void 0===T&&(T=!1);var D=q.getVersionPrecision(G),F=q.getVersionPrecision(z),Z=Math.max(D,F),Y=0,ie=q.map([G,z],function(pe){var se=Z-q.getVersionPrecision(pe),be=pe+new Array(se+1).join(".0");return q.map(be.split("."),function(Me){return new Array(20-Me.length).join("0")+Me}).reverse()});for(T&&(Y=Z-Math.min(D,F)),Z-=1;Z>=Y;){if(ie[0][Z]>ie[1][Z])return 1;if(ie[0][Z]===ie[1][Z]){if(Z===Y)return 0;Z-=1}else if(ie[0][Z]<ie[1][Z])return-1}},q.map=function(G,z){var T,D=[];if(Array.prototype.map)return Array.prototype.map.call(G,z);for(T=0;T<G.length;T+=1)D.push(z(G[T]));return D},q.find=function(G,z){var T,D;if(Array.prototype.find)return Array.prototype.find.call(G,z);for(T=0,D=G.length;T<D;T+=1){var F=G[T];if(z(F,T))return F}},q.assign=function(G){for(var z,T,D=G,F=arguments.length,Z=new Array(F>1?F-1:0),Y=1;Y<F;Y++)Z[Y-1]=arguments[Y];if(Object.assign)return Object.assign.apply(Object,[G].concat(Z));var ie=function(){var pe=Z[z];"object"==typeof pe&&null!==pe&&Object.keys(pe).forEach(function(se){D[se]=pe[se]})};for(z=0,T=Z.length;z<T;z+=1)ie();return G},q.getBrowserAlias=function(G){return X.BROWSER_ALIASES_MAP[G]},q.getBrowserTypeByAlias=function(G){return X.BROWSER_MAP[G]||""},q}();U.default=m,J.exports=U.default},18:function(J,U,V){"use strict";U.__esModule=!0,U.ENGINE_MAP=U.OS_MAP=U.PLATFORMS_MAP=U.BROWSER_MAP=U.BROWSER_ALIASES_MAP=void 0,U.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},U.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},U.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},U.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},U.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(J,U,V){"use strict";U.__esModule=!0,U.default=void 0;var X,m=(X=V(91))&&X.__esModule?X:{default:X},q=V(18);function G(T,D){for(var F=0;F<D.length;F++){var Z=D[F];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(T,Z.key,Z)}}var z=function(){function T(){}var D,Z;return T.getParser=function(Y,ie){if(void 0===ie&&(ie=!1),"string"!=typeof Y)throw new Error("UserAgent should be a string");return new m.default(Y,ie)},T.parse=function(Y){return new m.default(Y).getResult()},D=T,Z=[{key:"BROWSER_MAP",get:function(){return q.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return q.ENGINE_MAP}},{key:"OS_MAP",get:function(){return q.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return q.PLATFORMS_MAP}}],null&&G(D.prototype,null),Z&&G(D,Z),T}();U.default=z,J.exports=U.default},91:function(J,U,V){"use strict";U.__esModule=!0,U.default=void 0;var X=T(V(92)),m=T(V(93)),q=T(V(94)),G=T(V(95)),z=T(V(17));function T(F){return F&&F.__esModule?F:{default:F}}var D=function(){function F(Y,ie){if(void 0===ie&&(ie=!1),null==Y||""===Y)throw new Error("UserAgent parameter can't be empty");this._ua=Y,this.parsedResult={},!0!==ie&&this.parse()}var Z=F.prototype;return Z.getUA=function(){return this._ua},Z.test=function(Y){return Y.test(this._ua)},Z.parseBrowser=function(){var Y=this;this.parsedResult.browser={};var ie=z.default.find(X.default,function(pe){if("function"==typeof pe.test)return pe.test(Y);if(pe.test instanceof Array)return pe.test.some(function(se){return Y.test(se)});throw new Error("Browser's test function is not valid")});return ie&&(this.parsedResult.browser=ie.describe(this.getUA())),this.parsedResult.browser},Z.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},Z.getBrowserName=function(Y){return Y?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},Z.getBrowserVersion=function(){return this.getBrowser().version},Z.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},Z.parseOS=function(){var Y=this;this.parsedResult.os={};var ie=z.default.find(m.default,function(pe){if("function"==typeof pe.test)return pe.test(Y);if(pe.test instanceof Array)return pe.test.some(function(se){return Y.test(se)});throw new Error("Browser's test function is not valid")});return ie&&(this.parsedResult.os=ie.describe(this.getUA())),this.parsedResult.os},Z.getOSName=function(Y){var ie=this.getOS().name;return Y?String(ie).toLowerCase()||"":ie||""},Z.getOSVersion=function(){return this.getOS().version},Z.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},Z.getPlatformType=function(Y){void 0===Y&&(Y=!1);var ie=this.getPlatform().type;return Y?String(ie).toLowerCase()||"":ie||""},Z.parsePlatform=function(){var Y=this;this.parsedResult.platform={};var ie=z.default.find(q.default,function(pe){if("function"==typeof pe.test)return pe.test(Y);if(pe.test instanceof Array)return pe.test.some(function(se){return Y.test(se)});throw new Error("Browser's test function is not valid")});return ie&&(this.parsedResult.platform=ie.describe(this.getUA())),this.parsedResult.platform},Z.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},Z.getEngineName=function(Y){return Y?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},Z.parseEngine=function(){var Y=this;this.parsedResult.engine={};var ie=z.default.find(G.default,function(pe){if("function"==typeof pe.test)return pe.test(Y);if(pe.test instanceof Array)return pe.test.some(function(se){return Y.test(se)});throw new Error("Browser's test function is not valid")});return ie&&(this.parsedResult.engine=ie.describe(this.getUA())),this.parsedResult.engine},Z.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},Z.getResult=function(){return z.default.assign({},this.parsedResult)},Z.satisfies=function(Y){var ie=this,pe={},se=0,be={},Me=0;if(Object.keys(Y).forEach(function(Ue){var A=Y[Ue];"string"==typeof A?(be[Ue]=A,Me+=1):"object"==typeof A&&(pe[Ue]=A,se+=1)}),se>0){var Ne=Object.keys(pe),Je=z.default.find(Ne,function(Ue){return ie.isOS(Ue)});if(Je){var je=this.satisfies(pe[Je]);if(void 0!==je)return je}var Se=z.default.find(Ne,function(Ue){return ie.isPlatform(Ue)});if(Se){var Ke=this.satisfies(pe[Se]);if(void 0!==Ke)return Ke}}if(Me>0){var nt=Object.keys(be),It=z.default.find(nt,function(Ue){return ie.isBrowser(Ue,!0)});if(void 0!==It)return this.compareVersion(be[It])}},Z.isBrowser=function(Y,ie){void 0===ie&&(ie=!1);var pe=this.getBrowserName().toLowerCase(),se=Y.toLowerCase(),be=z.default.getBrowserTypeByAlias(se);return ie&&be&&(se=be.toLowerCase()),se===pe},Z.compareVersion=function(Y){var ie=[0],pe=Y,se=!1,be=this.getBrowserVersion();if("string"==typeof be)return">"===Y[0]||"<"===Y[0]?(pe=Y.substr(1),"="===Y[1]?(se=!0,pe=Y.substr(2)):ie=[],ie.push(">"===Y[0]?1:-1)):"="===Y[0]?pe=Y.substr(1):"~"===Y[0]&&(se=!0,pe=Y.substr(1)),ie.indexOf(z.default.compareVersions(be,pe,se))>-1},Z.isOS=function(Y){return this.getOSName(!0)===String(Y).toLowerCase()},Z.isPlatform=function(Y){return this.getPlatformType(!0)===String(Y).toLowerCase()},Z.isEngine=function(Y){return this.getEngineName(!0)===String(Y).toLowerCase()},Z.is=function(Y,ie){return void 0===ie&&(ie=!1),this.isBrowser(Y,ie)||this.isOS(Y)||this.isPlatform(Y)},Z.some=function(Y){var ie=this;return void 0===Y&&(Y=[]),Y.some(function(pe){return ie.is(pe)})},F}();U.default=D,J.exports=U.default},92:function(J,U,V){"use strict";U.__esModule=!0,U.default=void 0;var X,m=(X=V(17))&&X.__esModule?X:{default:X},q=/version\/(\d+(\.?_?\d+)+)/i;U.default=[{test:[/googlebot/i],describe:function(z){var T={name:"Googlebot"},D=m.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,z)||m.default.getFirstMatch(q,z);return D&&(T.version=D),T}},{test:[/opera/i],describe:function(z){var T={name:"Opera"},D=m.default.getFirstMatch(q,z)||m.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/opr\/|opios/i],describe:function(z){var T={name:"Opera"},D=m.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,z)||m.default.getFirstMatch(q,z);return D&&(T.version=D),T}},{test:[/SamsungBrowser/i],describe:function(z){var T={name:"Samsung Internet for Android"},D=m.default.getFirstMatch(q,z)||m.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/Whale/i],describe:function(z){var T={name:"NAVER Whale Browser"},D=m.default.getFirstMatch(q,z)||m.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/MZBrowser/i],describe:function(z){var T={name:"MZ Browser"},D=m.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,z)||m.default.getFirstMatch(q,z);return D&&(T.version=D),T}},{test:[/focus/i],describe:function(z){var T={name:"Focus"},D=m.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,z)||m.default.getFirstMatch(q,z);return D&&(T.version=D),T}},{test:[/swing/i],describe:function(z){var T={name:"Swing"},D=m.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,z)||m.default.getFirstMatch(q,z);return D&&(T.version=D),T}},{test:[/coast/i],describe:function(z){var T={name:"Opera Coast"},D=m.default.getFirstMatch(q,z)||m.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(z){var T={name:"Opera Touch"},D=m.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,z)||m.default.getFirstMatch(q,z);return D&&(T.version=D),T}},{test:[/yabrowser/i],describe:function(z){var T={name:"Yandex Browser"},D=m.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,z)||m.default.getFirstMatch(q,z);return D&&(T.version=D),T}},{test:[/ucbrowser/i],describe:function(z){var T={name:"UC Browser"},D=m.default.getFirstMatch(q,z)||m.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/Maxthon|mxios/i],describe:function(z){var T={name:"Maxthon"},D=m.default.getFirstMatch(q,z)||m.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/epiphany/i],describe:function(z){var T={name:"Epiphany"},D=m.default.getFirstMatch(q,z)||m.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/puffin/i],describe:function(z){var T={name:"Puffin"},D=m.default.getFirstMatch(q,z)||m.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/sleipnir/i],describe:function(z){var T={name:"Sleipnir"},D=m.default.getFirstMatch(q,z)||m.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/k-meleon/i],describe:function(z){var T={name:"K-Meleon"},D=m.default.getFirstMatch(q,z)||m.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/micromessenger/i],describe:function(z){var T={name:"WeChat"},D=m.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,z)||m.default.getFirstMatch(q,z);return D&&(T.version=D),T}},{test:[/qqbrowser/i],describe:function(z){var T={name:/qqbrowserlite/i.test(z)?"QQ Browser Lite":"QQ Browser"},D=m.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,z)||m.default.getFirstMatch(q,z);return D&&(T.version=D),T}},{test:[/msie|trident/i],describe:function(z){var T={name:"Internet Explorer"},D=m.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/\sedg\//i],describe:function(z){var T={name:"Microsoft Edge"},D=m.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/edg([ea]|ios)/i],describe:function(z){var T={name:"Microsoft Edge"},D=m.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/vivaldi/i],describe:function(z){var T={name:"Vivaldi"},D=m.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/seamonkey/i],describe:function(z){var T={name:"SeaMonkey"},D=m.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/sailfish/i],describe:function(z){var T={name:"Sailfish"},D=m.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,z);return D&&(T.version=D),T}},{test:[/silk/i],describe:function(z){var T={name:"Amazon Silk"},D=m.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/phantom/i],describe:function(z){var T={name:"PhantomJS"},D=m.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/slimerjs/i],describe:function(z){var T={name:"SlimerJS"},D=m.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(z){var T={name:"BlackBerry"},D=m.default.getFirstMatch(q,z)||m.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/(web|hpw)[o0]s/i],describe:function(z){var T={name:"WebOS Browser"},D=m.default.getFirstMatch(q,z)||m.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/bada/i],describe:function(z){var T={name:"Bada"},D=m.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/tizen/i],describe:function(z){var T={name:"Tizen"},D=m.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,z)||m.default.getFirstMatch(q,z);return D&&(T.version=D),T}},{test:[/qupzilla/i],describe:function(z){var T={name:"QupZilla"},D=m.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,z)||m.default.getFirstMatch(q,z);return D&&(T.version=D),T}},{test:[/firefox|iceweasel|fxios/i],describe:function(z){var T={name:"Firefox"},D=m.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/electron/i],describe:function(z){var T={name:"Electron"},D=m.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/MiuiBrowser/i],describe:function(z){var T={name:"Miui"},D=m.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/chromium/i],describe:function(z){var T={name:"Chromium"},D=m.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,z)||m.default.getFirstMatch(q,z);return D&&(T.version=D),T}},{test:[/chrome|crios|crmo/i],describe:function(z){var T={name:"Chrome"},D=m.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/GSA/i],describe:function(z){var T={name:"Google Search"},D=m.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:function(z){var T=!z.test(/like android/i),D=z.test(/android/i);return T&&D},describe:function(z){var T={name:"Android Browser"},D=m.default.getFirstMatch(q,z);return D&&(T.version=D),T}},{test:[/playstation 4/i],describe:function(z){var T={name:"PlayStation 4"},D=m.default.getFirstMatch(q,z);return D&&(T.version=D),T}},{test:[/safari|applewebkit/i],describe:function(z){var T={name:"Safari"},D=m.default.getFirstMatch(q,z);return D&&(T.version=D),T}},{test:[/.*/i],describe:function(z){var T=-1!==z.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:m.default.getFirstMatch(T,z),version:m.default.getSecondMatch(T,z)}}}],J.exports=U.default},93:function(J,U,V){"use strict";U.__esModule=!0,U.default=void 0;var X,m=(X=V(17))&&X.__esModule?X:{default:X},q=V(18);U.default=[{test:[/Roku\/DVP/],describe:function(z){var T=m.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,z);return{name:q.OS_MAP.Roku,version:T}}},{test:[/windows phone/i],describe:function(z){var T=m.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,z);return{name:q.OS_MAP.WindowsPhone,version:T}}},{test:[/windows /i],describe:function(z){var T=m.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,z),D=m.default.getWindowsVersionName(T);return{name:q.OS_MAP.Windows,version:T,versionName:D}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(z){var T={name:q.OS_MAP.iOS},D=m.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,z);return D&&(T.version=D),T}},{test:[/macintosh/i],describe:function(z){var T=m.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,z).replace(/[_\s]/g,"."),D=m.default.getMacOSVersionName(T),F={name:q.OS_MAP.MacOS,version:T};return D&&(F.versionName=D),F}},{test:[/(ipod|iphone|ipad)/i],describe:function(z){var T=m.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,z).replace(/[_\s]/g,".");return{name:q.OS_MAP.iOS,version:T}}},{test:function(z){var T=!z.test(/like android/i),D=z.test(/android/i);return T&&D},describe:function(z){var T=m.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,z),D=m.default.getAndroidVersionName(T),F={name:q.OS_MAP.Android,version:T};return D&&(F.versionName=D),F}},{test:[/(web|hpw)[o0]s/i],describe:function(z){var T=m.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,z),D={name:q.OS_MAP.WebOS};return T&&T.length&&(D.version=T),D}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(z){var T=m.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,z)||m.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,z)||m.default.getFirstMatch(/\bbb(\d+)/i,z);return{name:q.OS_MAP.BlackBerry,version:T}}},{test:[/bada/i],describe:function(z){var T=m.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,z);return{name:q.OS_MAP.Bada,version:T}}},{test:[/tizen/i],describe:function(z){var T=m.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,z);return{name:q.OS_MAP.Tizen,version:T}}},{test:[/linux/i],describe:function(){return{name:q.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:q.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(z){var T=m.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,z);return{name:q.OS_MAP.PlayStation4,version:T}}}],J.exports=U.default},94:function(J,U,V){"use strict";U.__esModule=!0,U.default=void 0;var X,m=(X=V(17))&&X.__esModule?X:{default:X},q=V(18);U.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(z){var T=m.default.getFirstMatch(/(can-l01)/i,z)&&"Nova",D={type:q.PLATFORMS_MAP.mobile,vendor:"Huawei"};return T&&(D.model=T),D}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:q.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:q.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:q.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:q.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:q.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:q.PLATFORMS_MAP.tablet}}},{test:function(z){var T=z.test(/ipod|iphone/i),D=z.test(/like (ipod|iphone)/i);return T&&!D},describe:function(z){var T=m.default.getFirstMatch(/(ipod|iphone)/i,z);return{type:q.PLATFORMS_MAP.mobile,vendor:"Apple",model:T}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:q.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:q.PLATFORMS_MAP.mobile}}},{test:function(z){return"blackberry"===z.getBrowserName(!0)},describe:function(){return{type:q.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(z){return"bada"===z.getBrowserName(!0)},describe:function(){return{type:q.PLATFORMS_MAP.mobile}}},{test:function(z){return"windows phone"===z.getBrowserName()},describe:function(){return{type:q.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(z){var T=Number(String(z.getOSVersion()).split(".")[0]);return"android"===z.getOSName(!0)&&T>=3},describe:function(){return{type:q.PLATFORMS_MAP.tablet}}},{test:function(z){return"android"===z.getOSName(!0)},describe:function(){return{type:q.PLATFORMS_MAP.mobile}}},{test:function(z){return"macos"===z.getOSName(!0)},describe:function(){return{type:q.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(z){return"windows"===z.getOSName(!0)},describe:function(){return{type:q.PLATFORMS_MAP.desktop}}},{test:function(z){return"linux"===z.getOSName(!0)},describe:function(){return{type:q.PLATFORMS_MAP.desktop}}},{test:function(z){return"playstation 4"===z.getOSName(!0)},describe:function(){return{type:q.PLATFORMS_MAP.tv}}},{test:function(z){return"roku"===z.getOSName(!0)},describe:function(){return{type:q.PLATFORMS_MAP.tv}}}],J.exports=U.default},95:function(J,U,V){"use strict";U.__esModule=!0,U.default=void 0;var X,m=(X=V(17))&&X.__esModule?X:{default:X},q=V(18);U.default=[{test:function(z){return"microsoft edge"===z.getBrowserName(!0)},describe:function(z){if(/\sedg\//i.test(z))return{name:q.ENGINE_MAP.Blink};var T=m.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,z);return{name:q.ENGINE_MAP.EdgeHTML,version:T}}},{test:[/trident/i],describe:function(z){var T={name:q.ENGINE_MAP.Trident},D=m.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:function(z){return z.test(/presto/i)},describe:function(z){var T={name:q.ENGINE_MAP.Presto},D=m.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:function(z){var T=z.test(/gecko/i),D=z.test(/like gecko/i);return T&&!D},describe:function(z){var T={name:q.ENGINE_MAP.Gecko},D=m.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:q.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(z){var T={name:q.ENGINE_MAP.WebKit},D=m.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}}],J.exports=U.default}})},7691:(Ae,J,U)=>{"use strict";const V=U(1395),X=U(3724),G=new(U(7231))({maxSize:1e5}),z=D=>!("object"!=typeof D||null===D||D instanceof RegExp||D instanceof Error||D instanceof Date),T=(D,F)=>{if(!z(D))return D;F={deep:!1,pascalCase:!1,...F};const{exclude:Z,pascalCase:Y,stopPaths:ie,deep:pe}=F,se=new Set(ie),be=Me=>(Ne,Je)=>{if(pe&&z(Je)){const je=void 0===Me?Ne:`${Me}.${Ne}`;se.has(je)||(Je=V(Je,be(je)))}if(!Z||!((D,F)=>D.some(Z=>"string"==typeof Z?Z===F:(Z.lastIndex=0,Z.test(F))))(Z,Ne)){const je=Y?`${Ne}_`:Ne;if(G.has(je))Ne=G.get(je);else{const Se=X(Ne,{pascalCase:Y});Ne.length<100&&G.set(je,Se),Ne=Se}}return[Ne,Je]};return V(D,be(void 0))};Ae.exports=(D,F)=>Array.isArray(D)?Object.keys(D).map(Z=>T(D[Z],F)):T(D,F)},3724:Ae=>{"use strict";const U=(V,X)=>{if("string"!=typeof V&&!Array.isArray(V))throw new TypeError("Expected the input to be `string | string[]`");return X=Object.assign({pascalCase:!1},X),V=Array.isArray(V)?V.map(G=>G.trim()).filter(G=>G.length).join("-"):V.trim(),0===V.length?"":1===V.length?X.pascalCase?V.toUpperCase():V.toLowerCase():(V!==V.toLowerCase()&&(V=(V=>{let X=!1,m=!1,q=!1;for(let G=0;G<V.length;G++){const z=V[G];X&&/[a-zA-Z]/.test(z)&&z.toUpperCase()===z?(V=V.slice(0,G)+"-"+V.slice(G),X=!1,q=m,m=!0,G++):m&&q&&/[a-zA-Z]/.test(z)&&z.toLowerCase()===z?(V=V.slice(0,G-1)+"-"+V.slice(G-1),q=m,m=!1,X=!0):(X=z.toLowerCase()===z&&z.toUpperCase()!==z,q=m,m=z.toUpperCase()===z&&z.toLowerCase()!==z)}return V})(V)),V=V.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(G,z)=>z.toUpperCase()).replace(/\d+(\w|$)/g,G=>G.toUpperCase()),G=V,X.pascalCase?G.charAt(0).toUpperCase()+G.slice(1):G);var G};Ae.exports=U,Ae.exports.default=U},209:Ae=>{function J(U,V,X){var m,q,G,z,T;function D(){var Z=Date.now()-z;Z<V&&Z>=0?m=setTimeout(D,V-Z):(m=null,X||(T=U.apply(G,q),G=q=null))}null==V&&(V=100);var F=function(){G=this,q=arguments,z=Date.now();var Z=X&&!m;return m||(m=setTimeout(D,V)),Z&&(T=U.apply(G,q),G=q=null),T};return F.clear=function(){m&&(clearTimeout(m),m=null)},F.flush=function(){m&&(T=U.apply(G,q),G=q=null,clearTimeout(m),m=null)},F}J.debounce=J,Ae.exports=J},9069:Ae=>{"use strict";var V,J="object"==typeof Reflect?Reflect:null,U=J&&"function"==typeof J.apply?J.apply:function(Se,Ke,nt){return Function.prototype.apply.call(Se,Ke,nt)};V=J&&"function"==typeof J.ownKeys?J.ownKeys:Object.getOwnPropertySymbols?function(Se){return Object.getOwnPropertyNames(Se).concat(Object.getOwnPropertySymbols(Se))}:function(Se){return Object.getOwnPropertyNames(Se)};var m=Number.isNaN||function(Se){return Se!=Se};function q(){q.init.call(this)}Ae.exports=q,Ae.exports.once=function Me(je,Se){return new Promise(function(Ke,nt){function It(A){je.removeListener(Se,Ue),nt(A)}function Ue(){"function"==typeof je.removeListener&&je.removeListener("error",It),Ke([].slice.call(arguments))}Je(je,Se,Ue,{once:!0}),"error"!==Se&&function Ne(je,Se,Ke){"function"==typeof je.on&&Je(je,"error",Se,Ke)}(je,It,{once:!0})})},q.EventEmitter=q,q.prototype._events=void 0,q.prototype._eventsCount=0,q.prototype._maxListeners=void 0;var G=10;function z(je){if("function"!=typeof je)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof je)}function T(je){return void 0===je._maxListeners?q.defaultMaxListeners:je._maxListeners}function D(je,Se,Ke,nt){var It,Ue,A;if(z(Ke),void 0===(Ue=je._events)?(Ue=je._events=Object.create(null),je._eventsCount=0):(void 0!==Ue.newListener&&(je.emit("newListener",Se,Ke.listener?Ke.listener:Ke),Ue=je._events),A=Ue[Se]),void 0===A)A=Ue[Se]=Ke,++je._eventsCount;else if("function"==typeof A?A=Ue[Se]=nt?[Ke,A]:[A,Ke]:nt?A.unshift(Ke):A.push(Ke),(It=T(je))>0&&A.length>It&&!A.warned){A.warned=!0;var O=new Error("Possible EventEmitter memory leak detected. "+A.length+" "+String(Se)+" listeners added. Use emitter.setMaxListeners() to increase limit");O.name="MaxListenersExceededWarning",O.emitter=je,O.type=Se,O.count=A.length,function X(je){console&&console.warn&&console.warn(je)}(O)}return je}function F(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Z(je,Se,Ke){var nt={fired:!1,wrapFn:void 0,target:je,type:Se,listener:Ke},It=F.bind(nt);return It.listener=Ke,nt.wrapFn=It,It}function Y(je,Se,Ke){var nt=je._events;if(void 0===nt)return[];var It=nt[Se];return void 0===It?[]:"function"==typeof It?Ke?[It.listener||It]:[It]:Ke?function be(je){for(var Se=new Array(je.length),Ke=0;Ke<Se.length;++Ke)Se[Ke]=je[Ke].listener||je[Ke];return Se}(It):pe(It,It.length)}function ie(je){var Se=this._events;if(void 0!==Se){var Ke=Se[je];if("function"==typeof Ke)return 1;if(void 0!==Ke)return Ke.length}return 0}function pe(je,Se){for(var Ke=new Array(Se),nt=0;nt<Se;++nt)Ke[nt]=je[nt];return Ke}function Je(je,Se,Ke,nt){if("function"==typeof je.on)nt.once?je.once(Se,Ke):je.on(Se,Ke);else{if("function"!=typeof je.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof je);je.addEventListener(Se,function It(Ue){nt.once&&je.removeEventListener(Se,It),Ke(Ue)})}}Object.defineProperty(q,"defaultMaxListeners",{enumerable:!0,get:function(){return G},set:function(je){if("number"!=typeof je||je<0||m(je))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+je+".");G=je}}),q.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},q.prototype.setMaxListeners=function(Se){if("number"!=typeof Se||Se<0||m(Se))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Se+".");return this._maxListeners=Se,this},q.prototype.getMaxListeners=function(){return T(this)},q.prototype.emit=function(Se){for(var Ke=[],nt=1;nt<arguments.length;nt++)Ke.push(arguments[nt]);var It="error"===Se,Ue=this._events;if(void 0!==Ue)It=It&&void 0===Ue.error;else if(!It)return!1;if(It){var A;if(Ke.length>0&&(A=Ke[0]),A instanceof Error)throw A;var O=new Error("Unhandled error."+(A?" ("+A.message+")":""));throw O.context=A,O}var B=Ue[Se];if(void 0===B)return!1;if("function"==typeof B)U(B,this,Ke);else{var j=B.length,ee=pe(B,j);for(nt=0;nt<j;++nt)U(ee[nt],this,Ke)}return!0},q.prototype.on=q.prototype.addListener=function(Se,Ke){return D(this,Se,Ke,!1)},q.prototype.prependListener=function(Se,Ke){return D(this,Se,Ke,!0)},q.prototype.once=function(Se,Ke){return z(Ke),this.on(Se,Z(this,Se,Ke)),this},q.prototype.prependOnceListener=function(Se,Ke){return z(Ke),this.prependListener(Se,Z(this,Se,Ke)),this},q.prototype.off=q.prototype.removeListener=function(Se,Ke){var nt,It,Ue,A,O;if(z(Ke),void 0===(It=this._events))return this;if(void 0===(nt=It[Se]))return this;if(nt===Ke||nt.listener===Ke)0==--this._eventsCount?this._events=Object.create(null):(delete It[Se],It.removeListener&&this.emit("removeListener",Se,nt.listener||Ke));else if("function"!=typeof nt){for(Ue=-1,A=nt.length-1;A>=0;A--)if(nt[A]===Ke||nt[A].listener===Ke){O=nt[A].listener,Ue=A;break}if(Ue<0)return this;0===Ue?nt.shift():function se(je,Se){for(;Se+1<je.length;Se++)je[Se]=je[Se+1];je.pop()}(nt,Ue),1===nt.length&&(It[Se]=nt[0]),void 0!==It.removeListener&&this.emit("removeListener",Se,O||Ke)}return this},q.prototype.removeAllListeners=function(Se){var Ke,nt,It;if(void 0===(nt=this._events))return this;if(void 0===nt.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==nt[Se]&&(0==--this._eventsCount?this._events=Object.create(null):delete nt[Se]),this;if(0===arguments.length){var A,Ue=Object.keys(nt);for(It=0;It<Ue.length;++It)"removeListener"!==(A=Ue[It])&&this.removeAllListeners(A);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Ke=nt[Se]))this.removeListener(Se,Ke);else if(void 0!==Ke)for(It=Ke.length-1;It>=0;It--)this.removeListener(Se,Ke[It]);return this},q.prototype.listeners=function(Se){return Y(this,Se,!0)},q.prototype.rawListeners=function(Se){return Y(this,Se,!1)},q.listenerCount=function(je,Se){return"function"==typeof je.listenerCount?je.listenerCount(Se):ie.call(je,Se)},q.prototype.listenerCount=ie,q.prototype.eventNames=function(){return this._eventsCount>0?V(this._events):[]}},4067:(Ae,J)=>{J.printMsg=function(){console.log("This is a message from the demo package")}},5780:Ae=>{var U;Ae.exports=U={},U.simpleFilter=function(V,X){return X.filter(function(m){return U.test(V,m)})},U.test=function(V,X){return null!==U.match(V,X)},U.match=function(V,X,m){var ie,q=0,G=[],z=X.length,T=0,D=0,F=(m=m||{}).pre||"",Z=m.post||"",Y=m.caseSensitive&&X||X.toLowerCase();V=m.caseSensitive&&V||V.toLowerCase();for(var pe=0;pe<z;pe++)ie=X[pe],Y[pe]===V[q]?(ie=F+ie+Z,q+=1,D+=1+D):D=0,T+=D,G[G.length]=ie;return q===V.length?(T=Y===V?1/0:T,{rendered:G.join(""),score:T}):null},U.filter=function(V,X,m){return X&&0!==X.length?"string"!=typeof V?X:(m=m||{},X.reduce(function(q,G,z,T){var D=G;m.extract&&(D=m.extract(G));var F=U.match(V,D,m);return null!=F&&(q[q.length]={string:F.rendered,score:F.score,index:z,original:G}),q},[]).sort(function(q,G){return G.score-q.score||q.index-G.index})):[]}},3334:Ae=>{var J=Ae.exports=function(U,V){if(V||(V=16),void 0===U&&(U=128),U<=0)return"0";for(var X=Math.log(Math.pow(2,U))/Math.log(V),m=2;X===1/0;m*=2)X=Math.log(Math.pow(2,U/m))/Math.log(V)*m;var q=X-Math.floor(X),G="";for(m=0;m<Math.floor(X);m++)G=Math.floor(Math.random()*V).toString(V)+G;if(q){var T=Math.pow(V,q);G=Math.floor(Math.random()*T).toString(V)+G}var D=parseInt(G,V);return D!==1/0&&D>=Math.pow(2,U)?J(U,V):G};J.rack=function(U,V,X){var m=function(G){var z=0;do{if(z++>10){if(!X)throw new Error("too many ID collisions, use more bits");U+=X}var T=J(U,V)}while(Object.hasOwnProperty.call(q,T));return q[T]=G,T},q=m.hats={};return m.get=function(G){return m.hats[G]},m.set=function(G,z){return m.hats[G]=z,m},m.bits=U||128,m.base=V||16,m}},7923:(Ae,J,U)=>{Ae=U.nmd(Ae);var V=function(){var X=function(Me,Ne,Je,je){for(Je=Je||{},je=Me.length;je--;Je[Me[je]]=Ne);return Je},m=[1,12],q=[1,13],G=[1,9],z=[1,10],T=[1,11],D=[1,14],F=[1,15],Z=[14,18,22,24],Y=[18,22],ie=[22,24],pe={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(Ne,Je,je,Se,Ke,nt,It){var Ue=nt.length-1;switch(Ke){case 1:this.$=Ne.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(Ne);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=nt[Ue-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=nt[Ue-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[nt[Ue-2],nt[Ue]];break;case 16:this.$={},this.$[nt[Ue][0]]=nt[Ue][1];break;case 17:this.$=nt[Ue-2],void 0!==nt[Ue-2][nt[Ue][0]]&&(this.$.__duplicateProperties__||Object.defineProperty(this.$,"__duplicateProperties__",{value:[],enumerable:!1}),this.$.__duplicateProperties__.push(nt[Ue][0])),nt[Ue-2][nt[Ue][0]]=nt[Ue][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[nt[Ue]];break;case 21:this.$=nt[Ue-2],nt[Ue-2].push(nt[Ue])}},table:[{3:5,4:m,5:6,6:q,7:3,8:G,9:4,10:z,11:T,12:1,13:2,15:7,16:8,17:D,23:F},{1:[3]},{14:[1,16]},X(Z,[2,7]),X(Z,[2,8]),X(Z,[2,9]),X(Z,[2,10]),X(Z,[2,11]),X(Z,[2,12]),X(Z,[2,3]),X(Z,[2,4]),X(Z,[2,5]),X([14,18,21,22,24],[2,1]),X(Z,[2,2]),{3:20,4:m,18:[1,17],19:18,20:19},{3:5,4:m,5:6,6:q,7:3,8:G,9:4,10:z,11:T,13:23,15:7,16:8,17:D,23:F,24:[1,21],25:22},{1:[2,6]},X(Z,[2,13]),{18:[1,24],22:[1,25]},X(Y,[2,16]),{21:[1,26]},X(Z,[2,18]),{22:[1,28],24:[1,27]},X(ie,[2,20]),X(Z,[2,14]),{3:20,4:m,20:29},{3:5,4:m,5:6,6:q,7:3,8:G,9:4,10:z,11:T,13:30,15:7,16:8,17:D,23:F},X(Z,[2,19]),{3:5,4:m,5:6,6:q,7:3,8:G,9:4,10:z,11:T,13:31,15:7,16:8,17:D,23:F},X(Y,[2,17]),X(Y,[2,15]),X(ie,[2,21])],defaultActions:{16:[2,6]},parseError:function(Ne,Je){if(!Je.recoverable){let Se=function(Ke,nt){this.message=Ke,this.hash=nt};throw Se.prototype=Error,new Se(Ne,Je)}this.trace(Ne)},parse:function(Ne){var Je=this,je=[0],Ke=[null],nt=[],It=this.table,Ue="",A=0,O=0,B=0,j=2,ee=1,W=nt.slice.call(arguments,1),ce=Object.create(this.lexer),Ze={yy:{}};for(var lt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,lt)&&(Ze.yy[lt]=this.yy[lt]);ce.setInput(Ne,Ze.yy),Ze.yy.lexer=ce,Ze.yy.parser=this,typeof ce.yylloc>"u"&&(ce.yylloc={});var we=ce.yylloc;nt.push(we);var wt=ce.options&&ce.options.ranges;this.parseError="function"==typeof Ze.yy.parseError?Ze.yy.parseError:Object.getPrototypeOf(this).parseError;for(var xt,yn,Bt,bn,xn,Xn,Zt,Vn,Ye=function(){var mi;return"number"!=typeof(mi=ce.lex()||ee)&&(mi=Je.symbols_[mi]||mi),mi},pn={};;){if(this.defaultActions[Bt=je[je.length-1]]?bn=this.defaultActions[Bt]:((null===xt||typeof xt>"u")&&(xt=Ye()),bn=It[Bt]&&It[Bt][xt]),typeof bn>"u"||!bn.length||!bn[0]){var ur="";for(Xn in Vn=[],It[Bt])this.terminals_[Xn]&&Xn>j&&Vn.push("'"+this.terminals_[Xn]+"'");ur=ce.showPosition?"Parse error on line "+(A+1)+":\n"+ce.showPosition()+"\nExpecting "+Vn.join(", ")+", got '"+(this.terminals_[xt]||xt)+"'":"Parse error on line "+(A+1)+": Unexpected "+(xt==ee?"end of input":"'"+(this.terminals_[xt]||xt)+"'"),this.parseError(ur,{text:ce.match,token:this.terminals_[xt]||xt,line:ce.yylineno,loc:we,expected:Vn})}if(bn[0]instanceof Array&&bn.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Bt+", token: "+xt);switch(bn[0]){case 1:je.push(xt),Ke.push(ce.yytext),nt.push(ce.yylloc),je.push(bn[1]),xt=null,yn?(xt=yn,yn=null):(O=ce.yyleng,Ue=ce.yytext,A=ce.yylineno,we=ce.yylloc,B>0&&B--);break;case 2:if(pn.$=Ke[Ke.length-(Zt=this.productions_[bn[1]][1])],pn._$={first_line:nt[nt.length-(Zt||1)].first_line,last_line:nt[nt.length-1].last_line,first_column:nt[nt.length-(Zt||1)].first_column,last_column:nt[nt.length-1].last_column},wt&&(pn._$.range=[nt[nt.length-(Zt||1)].range[0],nt[nt.length-1].range[1]]),typeof(xn=this.performAction.apply(pn,[Ue,O,A,Ze.yy,bn[1],Ke,nt].concat(W)))<"u")return xn;Zt&&(je=je.slice(0,-1*Zt*2),Ke=Ke.slice(0,-1*Zt),nt=nt.slice(0,-1*Zt)),je.push(this.productions_[bn[1]][0]),Ke.push(pn.$),nt.push(pn._$),je.push(It[je[je.length-2]][je[je.length-1]]);break;case 3:return!0}}return!0}};function be(){this.yy={}}return pe.lexer={EOF:1,parseError:function(Je,je){if(!this.yy.parser)throw new Error(Je);this.yy.parser.parseError(Je,je)},setInput:function(Ne,Je){return this.yy=Je||this.yy||{},this._input=Ne,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Ne=this._input[0];return this.yytext+=Ne,this.yyleng++,this.offset++,this.match+=Ne,this.matched+=Ne,Ne.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Ne},unput:function(Ne){var Je=Ne.length,je=Ne.split(/(?:\r\n?|\n)/g);this._input=Ne+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Je),this.offset-=Je;var Se=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),je.length-1&&(this.yylineno-=je.length-1);var Ke=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:je?(je.length===Se.length?this.yylloc.first_column:0)+Se[Se.length-je.length].length-je[0].length:this.yylloc.first_column-Je},this.options.ranges&&(this.yylloc.range=[Ke[0],Ke[0]+this.yyleng-Je]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(Ne){this.unput(this.match.slice(Ne))},pastInput:function(){var Ne=this.matched.substr(0,this.matched.length-this.match.length);return(Ne.length>20?"...":"")+Ne.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Ne=this.match;return Ne.length<20&&(Ne+=this._input.substr(0,20-Ne.length)),(Ne.substr(0,20)+(Ne.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Ne=this.pastInput(),Je=new Array(Ne.length+1).join("-");return Ne+this.upcomingInput()+"\n"+Je+"^"},test_match:function(Ne,Je){var je,Se,Ke;if(this.options.backtrack_lexer&&(Ke={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ke.yylloc.range=this.yylloc.range.slice(0))),(Se=Ne[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Se.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Se?Se[Se.length-1].length-Se[Se.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Ne[0].length},this.yytext+=Ne[0],this.match+=Ne[0],this.matches=Ne,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Ne[0].length),this.matched+=Ne[0],je=this.performAction.call(this,this.yy,this,Je,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),je)return je;if(this._backtrack){for(var nt in Ke)this[nt]=Ke[nt];return!1}return!1},next:function(){if(this.done)return this.EOF;var Ne,Je,je,Se;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Ke=this._currentRules(),nt=0;nt<Ke.length;nt++)if((je=this._input.match(this.rules[Ke[nt]]))&&(!Je||je[0].length>Je[0].length)){if(Je=je,Se=nt,this.options.backtrack_lexer){if(!1!==(Ne=this.test_match(je,Ke[nt])))return Ne;if(this._backtrack){Je=!1;continue}return!1}if(!this.options.flex)break}return Je?!1!==(Ne=this.test_match(Je,Ke[Se]))&&Ne:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(Je){this.conditionStack.push(Je)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Je){return(Je=this.conditionStack.length-1-Math.abs(Je||0))>=0?this.conditionStack[Je]:"INITIAL"},pushState:function(Je){this.begin(Je)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Je,je,Se,Ke){switch(Se){case 0:break;case 1:return 6;case 2:return je.yytext=je.yytext.substr(1,je.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}},be.prototype=pe,pe.Parser=be,new be}();J.parser=V,J.Parser=V.Parser,J.parse=function(){return V.parse.apply(V,arguments)},J.main=function(m){m[1]||(console.log("Usage: "+m[0]+" FILE"),process.exit(1));var q=U(4067).readFileSync(U(7150).normalize(m[1]),"utf8");return J.parser.parse(q)},U.c[U.s]===Ae&&J.main(process.argv.slice(1))},3082:Ae=>{var X=/^\s+|\s+$/g,m=/^[-+]0x[0-9a-f]+$/i,q=/^0b[01]+$/i,G=/^0o[0-7]+$/i,z=parseInt,T="object"==typeof global&&global&&global.Object===Object&&global,D="object"==typeof self&&self&&self.Object===Object&&self,F=T||D||Function("return this")(),Y=Object.prototype.toString,ie=Math.max,pe=Math.min,se=function(){return F.Date.now()};function Me(Se){var Ke=typeof Se;return!!Se&&("object"==Ke||"function"==Ke)}function je(Se){if("number"==typeof Se)return Se;if(function Je(Se){return"symbol"==typeof Se||function Ne(Se){return!!Se&&"object"==typeof Se}(Se)&&"[object Symbol]"==Y.call(Se)}(Se))return NaN;if(Me(Se)){var Ke="function"==typeof Se.valueOf?Se.valueOf():Se;Se=Me(Ke)?Ke+"":Ke}if("string"!=typeof Se)return 0===Se?Se:+Se;Se=Se.replace(X,"");var nt=q.test(Se);return nt||G.test(Se)?z(Se.slice(2),nt?2:8):m.test(Se)?NaN:+Se}Ae.exports=function be(Se,Ke,nt){var It,Ue,A,O,B,j,ee=0,W=!1,ce=!1,Ze=!0;if("function"!=typeof Se)throw new TypeError("Expected a function");function lt(Ct){var xn=It,pn=Ue;return It=Ue=void 0,ee=Ct,O=Se.apply(pn,xn)}function we(Ct){return ee=Ct,B=setTimeout(Ye,Ke),W?lt(Ct):O}function bt(Ct){var xn=Ct-j;return void 0===j||xn>=Ke||xn<0||ce&&Ct-ee>=A}function Ye(){var Ct=se();if(bt(Ct))return xt(Ct);B=setTimeout(Ye,function wt(Ct){var Xn=Ke-(Ct-j);return ce?pe(Xn,A-(Ct-ee)):Xn}(Ct))}function xt(Ct){return B=void 0,Ze&&It?lt(Ct):(It=Ue=void 0,O)}function bn(){var Ct=se(),xn=bt(Ct);if(It=arguments,Ue=this,j=Ct,xn){if(void 0===B)return we(j);if(ce)return B=setTimeout(Ye,Ke),lt(j)}return void 0===B&&(B=setTimeout(Ye,Ke)),O}return Ke=je(Ke)||0,Me(nt)&&(W=!!nt.leading,A=(ce="maxWait"in nt)?ie(je(nt.maxWait)||0,Ke):A,Ze="trailing"in nt?!!nt.trailing:Ze),bn.cancel=function yn(){void 0!==B&&clearTimeout(B),ee=0,It=j=Ue=B=void 0},bn.flush=function Bt(){return void 0===B?O:xt(se())},bn}},8222:(Ae,J,U)=>{Ae=U.nmd(Ae);var X="__lodash_hash_undefined__",G=9007199254740991,z="[object Arguments]",T="[object Array]",F="[object Boolean]",Z="[object Date]",Y="[object Error]",ie="[object Function]",se="[object Map]",be="[object Number]",Ne="[object Object]",Je="[object Promise]",Se="[object RegExp]",Ke="[object Set]",nt="[object String]",A="[object WeakMap]",O="[object ArrayBuffer]",B="[object DataView]",xt=/^\[object .+?Constructor\]$/,yn=/^(?:0|[1-9]\d*)$/,Bt={};Bt["[object Float32Array]"]=Bt["[object Float64Array]"]=Bt["[object Int8Array]"]=Bt["[object Int16Array]"]=Bt["[object Int32Array]"]=Bt["[object Uint8Array]"]=Bt["[object Uint8ClampedArray]"]=Bt["[object Uint16Array]"]=Bt["[object Uint32Array]"]=!0,Bt[z]=Bt[T]=Bt[O]=Bt[F]=Bt[B]=Bt[Z]=Bt[Y]=Bt[ie]=Bt[se]=Bt[be]=Bt[Ne]=Bt[Se]=Bt[Ke]=Bt[nt]=Bt[A]=!1;var bn="object"==typeof global&&global&&global.Object===Object&&global,Ct="object"==typeof self&&self&&self.Object===Object&&self,xn=bn||Ct||Function("return this")(),pn=J&&!J.nodeType&&J,Xn=pn&&Ae&&!Ae.nodeType&&Ae,Zt=Xn&&Xn.exports===pn,Ce=Zt&&bn.process,Vn=function(){try{return Ce&&Ce.binding&&Ce.binding("util")}catch{}}(),ur=Vn&&Vn.isTypedArray;function Wt(Re,at){for(var Nt=-1,_n=null==Re?0:Re.length;++Nt<_n;)if(at(Re[Nt],Nt,Re))return!0;return!1}function pa(Re,at){return Re.has(at)}function $r(Re){var at=-1,Nt=Array(Re.size);return Re.forEach(function(_n,bi){Nt[++at]=[bi,_n]}),Nt}function Ka(Re){var at=-1,Nt=Array(Re.size);return Re.forEach(function(_n){Nt[++at]=_n}),Nt}var Re,Do=Array.prototype,ps=Object.prototype,so=xn["__core-js_shared__"],ma=Function.prototype.toString,uo=ps.hasOwnProperty,wo=(Re=/[^.]+$/.exec(so&&so.keys&&so.keys.IE_PROTO||""))?"Symbol(src)_1."+Re:"",Vu=ps.toString,As=RegExp("^"+ma.call(uo).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xo=Zt?xn.Buffer:void 0,lr=xn.Symbol,Gu=xn.Uint8Array,bu=ps.propertyIsEnumerable,Us=Do.splice,Ao=lr?lr.toStringTag:void 0,ms=Object.getOwnPropertySymbols,Yr=xo?xo.isBuffer:void 0,tu=function eu(Re,at){return function(Nt){return Re(at(Nt))}}(Object.keys,Object),Br=tt(xn,"DataView"),oe=tt(xn,"Map"),ue=tt(xn,"Promise"),fe=tt(xn,"Set"),ve=tt(xn,"WeakMap"),De=tt(Object,"create"),$e=kn(Br),Xe=kn(oe),He=kn(ue),Ee=kn(fe),Fe=kn(ve),Mt=lr?lr.prototype:void 0,Ft=Mt?Mt.valueOf:void 0;function ct(Re){var at=-1,Nt=null==Re?0:Re.length;for(this.clear();++at<Nt;){var _n=Re[at];this.set(_n[0],_n[1])}}function Ut(Re){var at=-1,Nt=null==Re?0:Re.length;for(this.clear();++at<Nt;){var _n=Re[at];this.set(_n[0],_n[1])}}function En(Re){var at=-1,Nt=null==Re?0:Re.length;for(this.clear();++at<Nt;){var _n=Re[at];this.set(_n[0],_n[1])}}function Hr(Re){var at=-1,Nt=null==Re?0:Re.length;for(this.__data__=new En;++at<Nt;)this.add(Re[at])}function er(Re){var at=this.__data__=new Ut(Re);this.size=at.size}function Ui(Re,at){for(var Nt=Re.length;Nt--;)if(Li(Re[Nt][0],at))return Nt;return-1}function Tn(Re){return null==Re?void 0===Re?"[object Undefined]":"[object Null]":Ao&&Ao in Object(Re)?function dt(Re){var at=uo.call(Re,Ao),Nt=Re[Ao];try{Re[Ao]=void 0;var _n=!0}catch{}var bi=Vu.call(Re);return _n&&(at?Re[Ao]=Nt:delete Re[Ao]),bi}(Re):function Nn(Re){return Vu.call(Re)}(Re)}function ri(Re){return Qn(Re)&&Tn(Re)==z}function Wo(Re,at,Nt,_n,bi){return Re===at||(null==Re||null==at||!Qn(Re)&&!Qn(at)?Re!=Re&&at!=at:function un(Re,at,Nt,_n,bi,qt){var Ei=Qt(Re),Ki=Qt(at),gi=Ei?T:Rt(Re),ii=Ki?T:Rt(at),ya=(gi=gi==z?Ne:gi)==Ne,qi=(ii=ii==z?Ne:ii)==Ne,li=gi==ii;if(li&&qr(Re)){if(!qr(at))return!1;Ei=!0,ya=!1}if(li&&!ya)return qt||(qt=new er),Ei||Ji(Re)?L(Re,at,Nt,_n,bi,qt):function K(Re,at,Nt,_n,bi,qt,Ei){switch(Nt){case B:if(Re.byteLength!=at.byteLength||Re.byteOffset!=at.byteOffset)return!1;Re=Re.buffer,at=at.buffer;case O:return!(Re.byteLength!=at.byteLength||!qt(new Gu(Re),new Gu(at)));case F:case Z:case be:return Li(+Re,+at);case Y:return Re.name==at.name&&Re.message==at.message;case Se:case nt:return Re==at+"";case se:var Ki=$r;case Ke:if(Ki||(Ki=Ka),Re.size!=at.size&&!(1&_n))return!1;var ii=Ei.get(Re);if(ii)return ii==at;_n|=2,Ei.set(Re,at);var ya=L(Ki(Re),Ki(at),_n,bi,qt,Ei);return Ei.delete(Re),ya;case"[object Symbol]":if(Ft)return Ft.call(Re)==Ft.call(at)}return!1}(Re,at,gi,Nt,_n,bi,qt);if(!(1&Nt)){var la=ya&&uo.call(Re,"__wrapped__"),ei=qi&&uo.call(at,"__wrapped__");if(la||ei){var Yi=la?Re.value():Re,cr=ei?at.value():at;return qt||(qt=new er),bi(Yi,cr,Nt,_n,qt)}}return!!li&&(qt||(qt=new er),function de(Re,at,Nt,_n,bi,qt){var Ei=1&Nt,Ki=Ve(Re),gi=Ki.length;if(gi!=Ve(at).length&&!Ei)return!1;for(var qi=gi;qi--;){var li=Ki[qi];if(!(Ei?li in at:uo.call(at,li)))return!1}var la=qt.get(Re);if(la&&qt.get(at))return la==at;var ei=!0;qt.set(Re,at),qt.set(at,Re);for(var Yi=Ei;++qi<gi;){var cr=Re[li=Ki[qi]],Zo=at[li];if(_n)var Xa=Ei?_n(Zo,cr,li,at,Re,qt):_n(cr,Zo,li,Re,at,qt);if(!(void 0===Xa?cr===Zo||bi(cr,Zo,Nt,_n,qt):Xa)){ei=!1;break}Yi||(Yi="constructor"==li)}if(ei&&!Yi){var Jo=Re.constructor,Tr=at.constructor;Jo!=Tr&&"constructor"in Re&&"constructor"in at&&!("function"==typeof Jo&&Jo instanceof Jo&&"function"==typeof Tr&&Tr instanceof Tr)&&(ei=!1)}return qt.delete(Re),qt.delete(at),ei}(Re,at,Nt,_n,bi,qt))}(Re,at,Nt,_n,Wo,bi))}function L(Re,at,Nt,_n,bi,qt){var Ei=1&Nt,Ki=Re.length,gi=at.length;if(Ki!=gi&&!(Ei&&gi>Ki))return!1;var ii=qt.get(Re);if(ii&&qt.get(at))return ii==at;var ya=-1,qi=!0,li=2&Nt?new Hr:void 0;for(qt.set(Re,at),qt.set(at,Re);++ya<Ki;){var la=Re[ya],ei=at[ya];if(_n)var Yi=Ei?_n(ei,la,ya,at,Re,qt):_n(la,ei,ya,Re,at,qt);if(void 0!==Yi){if(Yi)continue;qi=!1;break}if(li){if(!Wt(at,function(cr,Zo){if(!pa(li,Zo)&&(la===cr||bi(la,cr,Nt,_n,qt)))return li.push(Zo)})){qi=!1;break}}else if(la!==ei&&!bi(la,ei,Nt,_n,qt)){qi=!1;break}}return qt.delete(Re),qt.delete(at),qi}function Ve(Re){return function La(Re,at,Nt){var _n=at(Re);return Qt(Re)?_n:function Bi(Re,at){for(var Nt=-1,_n=at.length,bi=Re.length;++Nt<_n;)Re[bi+Nt]=at[Nt];return Re}(_n,Nt(Re))}(Re,Vi,Vt)}function Qe(Re,at){var Nt=Re.__data__;return function pt(Re){var at=typeof Re;return"string"==at||"number"==at||"symbol"==at||"boolean"==at?"__proto__"!==Re:null===Re}(at)?Nt["string"==typeof at?"string":"hash"]:Nt.map}function tt(Re,at){var Nt=function si(Re,at){return Re?.[at]}(Re,at);return function Ro(Re){return!(!Ya(Re)||function rn(Re){return!!wo&&wo in Re}(Re))&&(Pn(Re)?As:xt).test(kn(Re))}(Nt)?Nt:void 0}ct.prototype.clear=function Et(){this.__data__=De?De(null):{},this.size=0},ct.prototype.delete=function Jt(Re){var at=this.has(Re)&&delete this.__data__[Re];return this.size-=at?1:0,at},ct.prototype.get=function Kt(Re){var at=this.__data__;if(De){var Nt=at[Re];return Nt===X?void 0:Nt}return uo.call(at,Re)?at[Re]:void 0},ct.prototype.has=function mn(Re){var at=this.__data__;return De?void 0!==at[Re]:uo.call(at,Re)},ct.prototype.set=function St(Re,at){var Nt=this.__data__;return this.size+=this.has(Re)?0:1,Nt[Re]=De&&void 0===at?X:at,this},Ut.prototype.clear=function Tt(){this.__data__=[],this.size=0},Ut.prototype.delete=function Gn(Re){var at=this.__data__,Nt=Ui(at,Re);return!(Nt<0||(Nt==at.length-1?at.pop():Us.call(at,Nt,1),--this.size,0))},Ut.prototype.get=function jn(Re){var at=this.__data__,Nt=Ui(at,Re);return Nt<0?void 0:at[Nt][1]},Ut.prototype.has=function ln(Re){return Ui(this.__data__,Re)>-1},Ut.prototype.set=function ni(Re,at){var Nt=this.__data__,_n=Ui(Nt,Re);return _n<0?(++this.size,Nt.push([Re,at])):Nt[_n][1]=at,this},En.prototype.clear=function ui(){this.size=0,this.__data__={hash:new ct,map:new(oe||Ut),string:new ct}},En.prototype.delete=function _i(Re){var at=Qe(this,Re).delete(Re);return this.size-=at?1:0,at},En.prototype.get=function Ir(Re){return Qe(this,Re).get(Re)},En.prototype.has=function Xr(Re){return Qe(this,Re).has(Re)},En.prototype.set=function xi(Re,at){var Nt=Qe(this,Re),_n=Nt.size;return Nt.set(Re,at),this.size+=Nt.size==_n?0:1,this},Hr.prototype.add=Hr.prototype.push=function Mn(Re){return this.__data__.set(Re,X),this},Hr.prototype.has=function Oi(Re){return this.__data__.has(Re)},er.prototype.clear=function ua(){this.__data__=new Ut,this.size=0},er.prototype.delete=function qo(Re){var at=this.__data__,Nt=at.delete(Re);return this.size=at.size,Nt},er.prototype.get=function or(Re){return this.__data__.get(Re)},er.prototype.has=function ji(Re){return this.__data__.has(Re)},er.prototype.set=function jr(Re,at){var Nt=this.__data__;if(Nt instanceof Ut){var _n=Nt.__data__;if(!oe||_n.length<199)return _n.push([Re,at]),this.size=++Nt.size,this;Nt=this.__data__=new En(_n)}return Nt.set(Re,at),this.size=Nt.size,this};var Vt=ms?function(Re){return null==Re?[]:(Re=Object(Re),function mi(Re,at){for(var Nt=-1,_n=null==Re?0:Re.length,bi=0,qt=[];++Nt<_n;){var Ei=Re[Nt];at(Ei,Nt,Re)&&(qt[bi++]=Ei)}return qt}(ms(Re),function(at){return bu.call(Re,at)}))}:function ga(){return[]},Rt=Tn;function cn(Re,at){return!!(at=at??G)&&("number"==typeof Re||yn.test(Re))&&Re>-1&&Re%1==0&&Re<at}function kn(Re){if(null!=Re){try{return ma.call(Re)}catch{}try{return Re+""}catch{}}return""}function Li(Re,at){return Re===at||Re!=Re&&at!=at}(Br&&Rt(new Br(new ArrayBuffer(1)))!=B||oe&&Rt(new oe)!=se||ue&&Rt(ue.resolve())!=Je||fe&&Rt(new fe)!=Ke||ve&&Rt(new ve)!=A)&&(Rt=function(Re){var at=Tn(Re),Nt=at==Ne?Re.constructor:void 0,_n=Nt?kn(Nt):"";if(_n)switch(_n){case $e:return B;case Xe:return se;case He:return Je;case Ee:return Ke;case Fe:return A}return at});var At=ri(function(){return arguments}())?ri:function(Re){return Qn(Re)&&uo.call(Re,"callee")&&!bu.call(Re,"callee")},Qt=Array.isArray,qr=Yr||function Gi(){return!1};function Pn(Re){if(!Ya(Re))return!1;var at=Tn(Re);return at==ie||"[object GeneratorFunction]"==at||"[object AsyncFunction]"==at||"[object Proxy]"==at}function Zn(Re){return"number"==typeof Re&&Re>-1&&Re%1==0&&Re<=G}function Ya(Re){var at=typeof Re;return null!=Re&&("object"==at||"function"==at)}function Qn(Re){return null!=Re&&"object"==typeof Re}var Ji=ur?function Ma(Re){return function(at){return Re(at)}}(ur):function Wn(Re){return Qn(Re)&&Zn(Re.length)&&!!Bt[Tn(Re)]};function Vi(Re){return function On(Re){return null!=Re&&Zn(Re.length)&&!Pn(Re)}(Re)?function gs(Re,at){var Nt=Qt(Re),_n=!Nt&&At(Re),bi=!Nt&&!_n&&qr(Re),qt=!Nt&&!_n&&!bi&&Ji(Re),Ei=Nt||_n||bi||qt,Ki=Ei?function Lt(Re,at){for(var Nt=-1,_n=Array(Re);++Nt<Re;)_n[Nt]=at(Nt);return _n}(Re.length,String):[],gi=Ki.length;for(var ii in Re)(at||uo.call(Re,ii))&&(!Ei||!("length"==ii||bi&&("offset"==ii||"parent"==ii)||qt&&("buffer"==ii||"byteLength"==ii||"byteOffset"==ii)||cn(ii,gi)))&&Ki.push(ii);return Ki}(Re):function Qr(Re){if(!function gn(Re){var at=Re&&Re.constructor;return Re===("function"==typeof at&&at.prototype||ps)}(Re))return tu(Re);var at=[];for(var Nt in Object(Re))uo.call(Re,Nt)&&"constructor"!=Nt&&at.push(Nt);return at}(Re)}Ae.exports=function zr(Re,at){return Wo(Re,at)}},1395:Ae=>{"use strict";const J=m=>"object"==typeof m&&null!==m,U=Symbol("skip"),V=m=>J(m)&&!(m instanceof RegExp)&&!(m instanceof Error)&&!(m instanceof Date),X=(m,q,G,z=new WeakMap)=>{if(G={deep:!1,target:{},...G},z.has(m))return z.get(m);z.set(m,G.target);const{target:T}=G;delete G.target;const D=F=>F.map(Z=>V(Z)?X(Z,q,G,z):Z);if(Array.isArray(m))return D(m);for(const[F,Z]of Object.entries(m)){const Y=q(F,Z,m);if(Y===U)continue;let[ie,pe,{shouldRecurse:se=!0}={}]=Y;"__proto__"!==ie&&(G.deep&&se&&V(pe)&&(pe=Array.isArray(pe)?D(pe):X(pe,q,G,z)),T[ie]=pe)}return T};Ae.exports=(m,q,G)=>{if(!J(m))throw new TypeError(`Expected an object, got \`${m}\` (${typeof m})`);return X(m,q,G)},Ae.exports.mapObjectSkip=U},3913:(Ae,J,U)=>{const V=U(970),X=U(9390),m=U(5041),q=U(5238);Ae.exports={CircleMode:V,DragCircleMode:X,DirectMode:m,SimpleSelectMode:q}},970:(Ae,J,U)=>{const V=U(3331),X=U(1319),m=U(4054),q=U(1437).default,G={...V.modes.draw_polygon};G.onSetup=function(T){const D=this.newFeature({type:X.geojsonTypes.FEATURE,properties:{isCircle:!0,center:[]},geometry:{type:X.geojsonTypes.POLYGON,coordinates:[[]]}});return this.addFeature(D),this.clearSelectedFeatures(),m.disable(this),this.updateUIClasses({mouse:X.cursors.ADD}),this.activateUIButton(X.types.POLYGON),this.setActionableState({trash:!0}),{initialRadiusInKm:T.initialRadiusInKm||2,polygon:D,currentVertexPosition:0}},G.clickAnywhere=function(T,D){if(0===T.currentVertexPosition){T.currentVertexPosition++;const F=[D.lngLat.lng,D.lngLat.lat],Z=q(F,T.initialRadiusInKm);T.polygon.incomingCoords(Z.geometry.coordinates),T.polygon.properties.center=F,T.polygon.properties.radiusInKm=T.initialRadiusInKm}return this.changeMode(X.modes.SIMPLE_SELECT,{featureIds:[T.polygon.id]})},Ae.exports=G},5041:(Ae,J,U)=>{const V=U(3331),X=U(2120),m=U(3905),q=U(1319),G=U(9374),z=U(2777).Z,T=U(8275),D=U(1437).default,F=U(3901),Z=V.modes.direct_select;Z.dragFeature=function(Y,ie,pe){m(this.getSelected(),pe),this.getSelected().filter(se=>se.properties.isCircle).map(se=>se.properties.center).forEach(se=>{se[0]+=pe.lng,se[1]+=pe.lat}),Y.dragMoveLocation=ie.lngLat},Z.dragVertex=function(Y,ie,pe){if(Y.feature.properties.isCircle){const se=Y.feature.properties.center,be=[ie.lngLat.lng,ie.lngLat.lat],Me=z(T.point(se),T.point(be),{units:"kilometers"}),Ne=D(se,Me);Y.feature.incomingCoords(Ne.geometry.coordinates),Y.feature.properties.radiusInKm=Me}else{const se=Y.selectedCoordPaths.map(Ne=>Y.feature.getCoordinate(Ne)),be=se.map(Ne=>({type:q.geojsonTypes.FEATURE,properties:{},geometry:{type:q.geojsonTypes.POINT,coordinates:Ne}})),Me=G(be,pe);for(let Ne=0;Ne<se.length;Ne++){const Je=se[Ne];Y.feature.updateCoordinate(Y.selectedCoordPaths[Ne],Je[0]+Me.lng,Je[1]+Me.lat)}}},Z.toDisplayFeatures=function(Y,ie,pe){Y.featureId===ie.properties.id?(ie.properties.active=q.activeStates.ACTIVE,pe(ie),(ie.properties.user_isCircle?F(ie):X(ie,{map:this.map,midpoints:!0,selectedPaths:Y.selectedCoordPaths})).forEach(pe)):(ie.properties.active=q.activeStates.INACTIVE,pe(ie)),this.fireActionable(Y)},Ae.exports=Z},9390:(Ae,J,U)=>{const V=U(3331),X=U(1319),m=U(4054),q=U(3609),G=U(1437).default,z=U(2777).Z,T=U(8275),D={...V.modes.draw_polygon};D.onSetup=function(F){const Z=this.newFeature({type:X.geojsonTypes.FEATURE,properties:{isCircle:!0,center:[]},geometry:{type:X.geojsonTypes.POLYGON,coordinates:[[]]}});return this.addFeature(Z),this.clearSelectedFeatures(),m.disable(this),q.disable(this),this.updateUIClasses({mouse:X.cursors.ADD}),this.activateUIButton(X.types.POLYGON),this.setActionableState({trash:!0}),{polygon:Z,currentVertexPosition:0}},D.onMouseDown=D.onTouchStart=function(F,Z){0===F.polygon.properties.center.length&&(F.polygon.properties.center=[Z.lngLat.lng,Z.lngLat.lat])},D.onDrag=D.onMouseMove=function(F,Z){const Y=F.polygon.properties.center;if(Y.length>0){const ie=z(T.point(Y),T.point([Z.lngLat.lng,Z.lngLat.lat]),{units:"kilometers"}),pe=G(Y,ie);F.polygon.incomingCoords(pe.geometry.coordinates),F.polygon.properties.radiusInKm=ie}},D.onMouseUp=D.onTouchEnd=function(F,Z){return q.enable(this),this.changeMode(X.modes.SIMPLE_SELECT,{featureIds:[F.polygon.id]})},D.onClick=D.onTap=function(F,Z){F.polygon.properties.center=[]},D.toDisplayFeatures=function(F,Z,Y){return Z.properties.active=Z.properties.id===F.polygon.id?X.activeStates.ACTIVE:X.activeStates.INACTIVE,Y(Z)},Ae.exports=D},5238:(Ae,J,U)=>{const V=U(3331),X=U(2120),m=U(3905),q=U(1319),G=U(3901),z=V.modes.simple_select;z.dragMove=function(T,D){T.dragMoving=!0,D.originalEvent.stopPropagation();const F={lng:D.lngLat.lng-T.dragMoveLocation.lng,lat:D.lngLat.lat-T.dragMoveLocation.lat};m(this.getSelected(),F),this.getSelected().filter(Z=>Z.properties.isCircle).map(Z=>Z.properties.center).forEach(Z=>{Z[0]+=F.lng,Z[1]+=F.lat}),T.dragMoveLocation=D.lngLat},z.toDisplayFeatures=function(T,D,F){D.properties.active=this.isSelected(D.properties.id)?q.activeStates.ACTIVE:q.activeStates.INACTIVE,F(D),this.fireActionable(),D.properties.active===q.activeStates.ACTIVE&&D.geometry.type!==q.geojsonTypes.POINT&&(D.properties.user_isCircle?G(D):X(D)).forEach(F)},Ae.exports=z},3901:(Ae,J,U)=>{const V=U(5340);Ae.exports=function X(m){const{properties:q,geometry:G}=m;if(!q.user_isCircle)return null;const z=[],T=G.coordinates[0].slice(0,-1);for(let D=0;D<T.length;D+=Math.round(T.length/4))z.push(V(q.id,T[D],`0.${D}`,!1));return z}},3609:Ae=>{Ae.exports={enable(J){setTimeout(()=>{!J.map||!J.map.dragPan||!J._ctx||!J._ctx.store||!J._ctx.store.getInitialConfigValue||!J._ctx.store.getInitialConfigValue("dragPan")||J.map.dragPan.enable()},0)},disable(J){setTimeout(()=>{!J.map||!J.map.doubleClickZoom||J.map.dragPan.disable()},0)}}},6844:Ae=>{Ae.exports=function(U){return function V(X){return Array.isArray(X)&&X.length&&"number"==typeof X[0]?[X]:X.reduce(function(m,q){return Array.isArray(q)&&Array.isArray(q[0])?m.concat(V(q)):(m.push(q),m)},[])}(U)}},7301:(Ae,J,U)=>{var V=U(8143),X=U(8714),m=U(6844);Ae.exports=function(q){if(!q)return[];var G=X(V(q)),z=[];return G.features.forEach(function(T){!T.geometry||(z=z.concat(m(T.geometry.coordinates)))}),z}},5988:(Ae,J,U)=>{var V=U(7301),X=U(5080),m=U(8604),q={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},G=Object.keys(q);function z(T){for(var F=m(),Z=V(T),Y=0;Y<Z.length;Y++)F.include(Z[Y]);return F}Ae.exports=function(T){return z(T).bbox()},Ae.exports.polygon=function(T){return z(T).polygon()},Ae.exports.bboxify=function(T){return X(T).map(function(D){D&&G.some(function(Z){return!!D[Z]&&-1!==q[Z].indexOf(D.type)})&&(D.bbox=z(D).bbox(),this.update(D))})}},3331:(Ae,J,U)=>{const V=U(1726),X=U(9043),m=U(7997),q=U(1319);Ae.exports=function(z){!function(z,T){const D={options:z=X(z)};T=m(D,T),D.api=T;const F=V(D);T.onAdd=F.onAdd,T.onRemove=F.onRemove,T.types=q.types,T.options=z}(z,this)},Ae.exports.modes=U(5073)},7997:(Ae,J,U)=>{const V=U(8222),X=U(8143),m=U(3334),q=U(2447),G=U(3888),z=U(8035),T=U(1319),D=U(6330),F={Polygon:U(5165),LineString:U(4479),Point:U(4158),MultiPolygon:U(5315),MultiLineString:U(5315),MultiPoint:U(5315)};Ae.exports=function(Z,Y){return Y.modes=T.modes,Y.getFeatureIdsAt=function(ie){return q.click({point:ie},null,Z).map(se=>se.properties.id)},Y.getSelectedIds=function(){return Z.store.getSelectedIds()},Y.getSelected=function(){return{type:T.geojsonTypes.FEATURE_COLLECTION,features:Z.store.getSelectedIds().map(ie=>Z.store.get(ie)).map(ie=>ie.toGeoJSON())}},Y.getSelectedPoints=function(){return{type:T.geojsonTypes.FEATURE_COLLECTION,features:Z.store.getSelectedCoordinates().map(ie=>({type:T.geojsonTypes.FEATURE,properties:{},geometry:{type:T.geojsonTypes.POINT,coordinates:ie.coordinates}}))}},Y.set=function(ie){if(void 0===ie.type||ie.type!==T.geojsonTypes.FEATURE_COLLECTION||!Array.isArray(ie.features))throw new Error("Invalid FeatureCollection");const pe=Z.store.createRenderBatch();let se=Z.store.getAllIds().slice();const be=Y.add(ie),Me=new D(be);return se=se.filter(Ne=>!Me.has(Ne)),se.length&&Y.delete(se),pe(),be},Y.add=function(ie){const pe=z.hint(ie,{precisionWarning:!1}).filter(Me=>"message"!==Me.level);if(pe.length)throw new Error(pe[0].message);const be=JSON.parse(JSON.stringify(X(ie))).features.map(Me=>{if(Me.id=Me.id||m(),null===Me.geometry)throw new Error("Invalid geometry: null");if(void 0===Z.store.get(Me.id)||Z.store.get(Me.id).type!==Me.geometry.type){const Ne=F[Me.geometry.type];if(void 0===Ne)throw new Error(`Invalid geometry type: ${Me.geometry.type}.`);const Je=new Ne(Z,Me);Z.store.add(Je)}else{const Ne=Z.store.get(Me.id);Ne.properties=Me.properties,V(Ne.getCoordinates(),Me.geometry.coordinates)||Ne.incomingCoords(Me.geometry.coordinates)}return Me.id});return Z.store.render(),be},Y.get=function(ie){const pe=Z.store.get(ie);if(pe)return pe.toGeoJSON()},Y.getAll=function(){return{type:T.geojsonTypes.FEATURE_COLLECTION,features:Z.store.getAll().map(ie=>ie.toGeoJSON())}},Y.delete=function(ie){return Z.store.delete(ie,{silent:!0}),Y.getMode()!==T.modes.DIRECT_SELECT||Z.store.getSelectedIds().length?Z.store.render():Z.events.changeMode(T.modes.SIMPLE_SELECT,void 0,{silent:!0}),Y},Y.deleteAll=function(){return Z.store.delete(Z.store.getAllIds(),{silent:!0}),Y.getMode()===T.modes.DIRECT_SELECT?Z.events.changeMode(T.modes.SIMPLE_SELECT,void 0,{silent:!0}):Z.store.render(),Y},Y.changeMode=function(ie,pe={}){return ie===T.modes.SIMPLE_SELECT&&Y.getMode()===T.modes.SIMPLE_SELECT?(G(pe.featureIds||[],Z.store.getSelectedIds())||(Z.store.setSelected(pe.featureIds,{silent:!0}),Z.store.render()),Y):(ie===T.modes.DIRECT_SELECT&&Y.getMode()===T.modes.DIRECT_SELECT&&pe.featureId===Z.store.getSelectedIds()[0]||Z.events.changeMode(ie,pe,{silent:!0}),Y)},Y.getMode=function(){return Z.events.getMode()},Y.trash=function(){return Z.events.trash({silent:!0}),Y},Y.combineFeatures=function(){return Z.events.combineFeatures({silent:!0}),Y},Y.uncombineFeatures=function(){return Z.events.uncombineFeatures({silent:!0}),Y},Y.setFeatureProperty=function(ie,pe,se){return Z.store.setFeatureProperty(ie,pe,se),Y},Y}},1319:Ae=>{Ae.exports={classes:{CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},sources:{HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},cursors:{ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},types:{POLYGON:"polygon",LINE:"line_string",POINT:"point"},geojsonTypes:{FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},modes:{DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},events:{CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},updateActions:{MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},meta:{FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},activeStates:{ACTIVE:"true",INACTIVE:"false"},interactions:["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],LAT_MIN:-90,LAT_RENDERED_MIN:-85,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}},5262:(Ae,J,U)=>{const V=U(4699),X=U(166),m=U(2447),q=U(7715),G=U(2423),z=U(1319),T=U(3595);Ae.exports=function(D){const F=Object.keys(D.options.modes).reduce((Se,Ke)=>(Se[Ke]=T(D.options.modes[Ke]),Se),{});let Z={},Y={};const ie={};let pe=null,se=null;ie.drag=function(Se,Ke){Ke({point:Se.point,time:(new Date).getTime()})?(D.ui.queueMapClasses({mouse:z.cursors.DRAG}),se.drag(Se)):Se.originalEvent.stopPropagation()},ie.mousedrag=function(Se){ie.drag(Se,Ke=>!q(Z,Ke))},ie.touchdrag=function(Se){ie.drag(Se,Ke=>!G(Y,Ke))},ie.mousemove=function(Se){if(1===(void 0!==Se.originalEvent.buttons?Se.originalEvent.buttons:Se.originalEvent.which))return ie.mousedrag(Se);const nt=X(Se,D);Se.featureTarget=nt,se.mousemove(Se)},ie.mousedown=function(Se){Z={time:(new Date).getTime(),point:Se.point};const Ke=X(Se,D);Se.featureTarget=Ke,se.mousedown(Se)},ie.mouseup=function(Se){const Ke=X(Se,D);Se.featureTarget=Ke,q(Z,{point:Se.point,time:(new Date).getTime()})?se.click(Se):se.mouseup(Se)},ie.mouseout=function(Se){se.mouseout(Se)},ie.touchstart=function(Se){if(Se.originalEvent.preventDefault(),!D.options.touchEnabled)return;Y={time:(new Date).getTime(),point:Se.point};const Ke=m.touch(Se,null,D)[0];Se.featureTarget=Ke,se.touchstart(Se)},ie.touchmove=function(Se){if(Se.originalEvent.preventDefault(),D.options.touchEnabled)return se.touchmove(Se),ie.touchdrag(Se)},ie.touchend=function(Se){if(Se.originalEvent.preventDefault(),!D.options.touchEnabled)return;const Ke=m.touch(Se,null,D)[0];Se.featureTarget=Ke,G(Y,{time:(new Date).getTime(),point:Se.point})?se.tap(Se):se.touchend(Se)};const be=Se=>!(8===Se||46===Se||Se>=48&&Se<=57);function Me(Se,Ke,nt={}){se.stop();const It=F[Se];if(void 0===It)throw new Error(`${Se} is not valid`);pe=Se;const Ue=It(D,Ke);se=V(Ue,D),nt.silent||D.map.fire(z.events.MODE_CHANGE,{mode:Se}),D.store.setDirty(),D.store.render()}ie.keydown=function(Se){"mapboxgl-canvas"===(Se.srcElement||Se.target).classList[0]&&(8!==Se.keyCode&&46!==Se.keyCode||!D.options.controls.trash?be(Se.keyCode)?se.keydown(Se):49===Se.keyCode&&D.options.controls.point?Me(z.modes.DRAW_POINT):50===Se.keyCode&&D.options.controls.line_string?Me(z.modes.DRAW_LINE_STRING):51===Se.keyCode&&D.options.controls.polygon&&Me(z.modes.DRAW_POLYGON):(Se.preventDefault(),se.trash()))},ie.keyup=function(Se){be(Se.keyCode)&&se.keyup(Se)},ie.zoomend=function(){D.store.changeZoom()},ie.data=function(Se){if("style"===Se.dataType){const{setup:Ke,map:nt,options:It,store:Ue}=D;It.styles.some(O=>nt.getLayer(O.id))||(Ke.addLayers(),Ue.setDirty(),Ue.render())}};const Ne={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){pe=D.options.defaultMode,se=V(F[pe](D),D)},changeMode:Me,actionable:function Je(Se){let Ke=!1;Object.keys(Se).forEach(nt=>{if(void 0===Ne[nt])throw new Error("Invalid action type");Ne[nt]!==Se[nt]&&(Ke=!0),Ne[nt]=Se[nt]}),Ke&&D.map.fire(z.events.ACTIONABLE,{actions:Ne})},currentModeName:function(){return pe},currentModeRender:function(Se,Ke){return se.render(Se,Ke)},fire:function(Se,Ke){ie[Se]&&ie[Se](Ke)},addEventListeners:function(){D.map.on("mousemove",ie.mousemove),D.map.on("mousedown",ie.mousedown),D.map.on("mouseup",ie.mouseup),D.map.on("data",ie.data),D.map.on("touchmove",ie.touchmove),D.map.on("touchstart",ie.touchstart),D.map.on("touchend",ie.touchend),D.container.addEventListener("mouseout",ie.mouseout),D.options.keybindings&&(D.container.addEventListener("keydown",ie.keydown),D.container.addEventListener("keyup",ie.keyup))},removeEventListeners:function(){D.map.off("mousemove",ie.mousemove),D.map.off("mousedown",ie.mousedown),D.map.off("mouseup",ie.mouseup),D.map.off("data",ie.data),D.map.off("touchmove",ie.touchmove),D.map.off("touchstart",ie.touchstart),D.map.off("touchend",ie.touchend),D.container.removeEventListener("mouseout",ie.mouseout),D.options.keybindings&&(D.container.removeEventListener("keydown",ie.keydown),D.container.removeEventListener("keyup",ie.keyup))},trash:function(Se){se.trash(Se)},combineFeatures:function(){se.combineFeatures()},uncombineFeatures:function(){se.uncombineFeatures()},getMode:function(){return pe}}}},684:(Ae,J,U)=>{const V=U(3334),X=U(1319),m=function(q,G){this.ctx=q,this.properties=G.properties||{},this.coordinates=G.geometry.coordinates,this.id=G.id||V(),this.type=G.geometry.type};m.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},m.prototype.incomingCoords=function(q){this.setCoordinates(q)},m.prototype.setCoordinates=function(q){this.coordinates=q,this.changed()},m.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},m.prototype.setProperty=function(q,G){this.properties[q]=G},m.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:X.geojsonTypes.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},m.prototype.internal=function(q){const G={id:this.id,meta:X.meta.FEATURE,"meta:type":this.type,active:X.activeStates.INACTIVE,mode:q};if(this.ctx.options.userProperties)for(const z in this.properties)G[`user_${z}`]=this.properties[z];return{type:X.geojsonTypes.FEATURE,properties:G,geometry:{coordinates:this.getCoordinates(),type:this.type}}},Ae.exports=m},4479:(Ae,J,U)=>{const V=U(684),X=function(m,q){V.call(this,m,q)};(X.prototype=Object.create(V.prototype)).isValid=function(){return this.coordinates.length>1},X.prototype.addCoordinate=function(m,q,G){this.changed();const z=parseInt(m,10);this.coordinates.splice(z,0,[q,G])},X.prototype.getCoordinate=function(m){const q=parseInt(m,10);return JSON.parse(JSON.stringify(this.coordinates[q]))},X.prototype.removeCoordinate=function(m){this.changed(),this.coordinates.splice(parseInt(m,10),1)},X.prototype.updateCoordinate=function(m,q,G){const z=parseInt(m,10);this.coordinates[z]=[q,G],this.changed()},Ae.exports=X},5315:(Ae,J,U)=>{const V=U(684),X=U(1319),m=U(3334),q={MultiPoint:U(4158),MultiLineString:U(4479),MultiPolygon:U(5165)},G=(T,D,F,Z,Y)=>{const ie=F.split("."),pe=parseInt(ie[0],10),se=ie[1]?ie.slice(1).join("."):null;return T[pe][D](se,Z,Y)},z=function(T,D){if(V.call(this,T,D),delete this.coordinates,this.model=q[D.geometry.type],void 0===this.model)throw new TypeError(`${D.geometry.type} is not a valid type`);this.features=this._coordinatesToFeatures(D.geometry.coordinates)};(z.prototype=Object.create(V.prototype))._coordinatesToFeatures=function(T){const D=this.model.bind(this);return T.map(F=>new D(this.ctx,{id:m(),type:X.geojsonTypes.FEATURE,properties:{},geometry:{coordinates:F,type:this.type.replace("Multi","")}}))},z.prototype.isValid=function(){return this.features.every(T=>T.isValid())},z.prototype.setCoordinates=function(T){this.features=this._coordinatesToFeatures(T),this.changed()},z.prototype.getCoordinate=function(T){return G(this.features,"getCoordinate",T)},z.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(T=>T.type===X.geojsonTypes.POLYGON?T.getCoordinates():T.coordinates)))},z.prototype.updateCoordinate=function(T,D,F){G(this.features,"updateCoordinate",T,D,F),this.changed()},z.prototype.addCoordinate=function(T,D,F){G(this.features,"addCoordinate",T,D,F),this.changed()},z.prototype.removeCoordinate=function(T){G(this.features,"removeCoordinate",T),this.changed()},z.prototype.getFeatures=function(){return this.features},Ae.exports=z},4158:(Ae,J,U)=>{const V=U(684),X=function(m,q){V.call(this,m,q)};(X.prototype=Object.create(V.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},X.prototype.updateCoordinate=function(m,q,G){this.coordinates=3===arguments.length?[q,G]:[m,q],this.changed()},X.prototype.getCoordinate=function(){return this.getCoordinates()},Ae.exports=X},5165:(Ae,J,U)=>{const V=U(684),X=function(m,q){V.call(this,m,q),this.coordinates=this.coordinates.map(G=>G.slice(0,-1))};(X.prototype=Object.create(V.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(m=>m.length>2)},X.prototype.incomingCoords=function(m){this.coordinates=m.map(q=>q.slice(0,-1)),this.changed()},X.prototype.setCoordinates=function(m){this.coordinates=m,this.changed()},X.prototype.addCoordinate=function(m,q,G){this.changed();const z=m.split(".").map(D=>parseInt(D,10));this.coordinates[z[0]].splice(z[1],0,[q,G])},X.prototype.removeCoordinate=function(m){this.changed();const q=m.split(".").map(z=>parseInt(z,10)),G=this.coordinates[q[0]];G&&(G.splice(q[1],1),G.length<3&&this.coordinates.splice(q[0],1))},X.prototype.getCoordinate=function(m){const q=m.split(".").map(z=>parseInt(z,10));return JSON.parse(JSON.stringify(this.coordinates[q[0]][q[1]]))},X.prototype.getCoordinates=function(){return this.coordinates.map(m=>m.concat([m[0]]))},X.prototype.updateCoordinate=function(m,q,G){this.changed();const z=m.split("."),T=parseInt(z[0],10),D=parseInt(z[1],10);void 0===this.coordinates[T]&&(this.coordinates[T]=[]),this.coordinates[T][D]=[q,G]},Ae.exports=X},8747:(Ae,J,U)=>{const V=U(1319);Ae.exports={isOfMetaType:function(X){return function(m){const q=m.featureTarget;return!(!q||!q.properties)&&q.properties.meta===X}},isShiftMousedown:function(X){return!(!X.originalEvent||!X.originalEvent.shiftKey)&&0===X.originalEvent.button},isActiveFeature:function(X){return!(!X.featureTarget||!X.featureTarget.properties)&&X.featureTarget.properties.active===V.activeStates.ACTIVE&&X.featureTarget.properties.meta===V.meta.FEATURE},isInactiveFeature:function(X){return!(!X.featureTarget||!X.featureTarget.properties)&&X.featureTarget.properties.active===V.activeStates.INACTIVE&&X.featureTarget.properties.meta===V.meta.FEATURE},noTarget:function(X){return void 0===X.featureTarget},isFeature:function(X){return!(!X.featureTarget||!X.featureTarget.properties)&&X.featureTarget.properties.meta===V.meta.FEATURE},isVertex:function(X){const m=X.featureTarget;return!(!m||!m.properties)&&m.properties.meta===V.meta.VERTEX},isShiftDown:function(X){return!!X.originalEvent&&!0===X.originalEvent.shiftKey},isEscapeKey:function(X){return 27===X.keyCode},isEnterKey:function(X){return 13===X.keyCode},true:function(){return!0}}},9374:(Ae,J,U)=>{const V=U(5988),X=U(1319),{LAT_MIN:m,LAT_MAX:q,LAT_RENDERED_MIN:G,LAT_RENDERED_MAX:z,LNG_MIN:T,LNG_MAX:D}=X;Ae.exports=function(F,Z){let Y=m,ie=q,pe=m,se=q,be=D,Me=T;F.forEach(Je=>{const je=V(Je),Se=je[1],Ke=je[3],nt=je[0],It=je[2];Se>Y&&(Y=Se),Ke<ie&&(ie=Ke),Ke>pe&&(pe=Ke),Se<se&&(se=Se),nt<be&&(be=nt),It>Me&&(Me=It)});const Ne=Z;return Y+Ne.lat>z&&(Ne.lat=z-Y),pe+Ne.lat>q&&(Ne.lat=q-pe),ie+Ne.lat<G&&(Ne.lat=G-ie),se+Ne.lat<m&&(Ne.lat=m-se),be+Ne.lng<=T&&(Ne.lng+=360*Math.ceil(Math.abs(Ne.lng)/360)),Me+Ne.lng>=D&&(Ne.lng-=360*Math.ceil(Math.abs(Ne.lng)/360)),Ne}},856:(Ae,J,U)=>{const V=U(1319);Ae.exports=function(X,m,q,G){const z=m.geometry.coordinates,T=q.geometry.coordinates;if(z[1]>V.LAT_RENDERED_MAX||z[1]<V.LAT_RENDERED_MIN||T[1]>V.LAT_RENDERED_MAX||T[1]<V.LAT_RENDERED_MIN)return null;const D=G.project([z[0],z[1]]),F=G.project([T[0],T[1]]),Z=G.unproject([(D.x+F.x)/2,(D.y+F.y)/2]);return{type:V.geojsonTypes.FEATURE,properties:{meta:V.meta.MIDPOINT,parent:X,lng:Z.lng,lat:Z.lat,coord_path:q.properties.coord_path},geometry:{type:V.geojsonTypes.POINT,coordinates:[Z.lng,Z.lat]}}}},2120:(Ae,J,U)=>{const V=U(5340),X=U(856),m=U(1319);Ae.exports=function q(G,z={},T=null){const{type:D,coordinates:F}=G.geometry,Z=G.properties&&G.properties.id;let Y=[];function ie(be,Me){let Ne="",Je=null;be.forEach((je,Se)=>{const Ke=null!=Me?`${Me}.${Se}`:String(Se),nt=V(Z,je,Ke,pe(Ke));if(z.midpoints&&Je){const Ue=X(Z,Je,nt,z.map);Ue&&Y.push(Ue)}Je=nt;const It=JSON.stringify(je);Ne!==It&&Y.push(nt),0===Se&&(Ne=It)})}function pe(be){return!!z.selectedPaths&&-1!==z.selectedPaths.indexOf(be)}return D===m.geojsonTypes.POINT?Y.push(V(Z,F,T,pe(T))):D===m.geojsonTypes.POLYGON?F.forEach((be,Me)=>{ie(be,null!==T?`${T}.${Me}`:String(Me))}):D===m.geojsonTypes.LINE_STRING?ie(F,T):0===D.indexOf(m.geojsonTypes.MULTI_PREFIX)&&function se(){const be=D.replace(m.geojsonTypes.MULTI_PREFIX,"");F.forEach((Me,Ne)=>{Y=Y.concat(q({type:m.geojsonTypes.FEATURE,properties:G.properties,geometry:{type:be,coordinates:Me}},z,Ne))})}(),Y}},5340:(Ae,J,U)=>{const V=U(1319);Ae.exports=function(X,m,q,G){return{type:V.geojsonTypes.FEATURE,properties:{meta:V.meta.VERTEX,parent:X,coord_path:q,active:G?V.activeStates.ACTIVE:V.activeStates.INACTIVE},geometry:{type:V.geojsonTypes.POINT,coordinates:m}}}},4054:Ae=>{Ae.exports={enable(J){setTimeout(()=>{!J.map||!J.map.doubleClickZoom||!J._ctx||!J._ctx.store||!J._ctx.store.getInitialConfigValue||!J._ctx.store.getInitialConfigValue("doubleClickZoom")||J.map.doubleClickZoom.enable()},0)},disable(J){setTimeout(()=>{!J.map||!J.map.doubleClickZoom||J.map.doubleClickZoom.disable()},0)}}},5025:Ae=>{Ae.exports=function(J,U){const V=J.x-U.x,X=J.y-U.y;return Math.sqrt(V*V+X*X)}},2447:(Ae,J,U)=>{const V=U(3953),X=U(633),m=U(1319),q=U(6330),G=[m.meta.FEATURE,m.meta.MIDPOINT,m.meta.VERTEX];function D(F,Z,Y,ie){if(null===Y.map)return[];const pe=F?X(F,ie):Z,se={};Y.options.styles&&(se.layers=Y.options.styles.map(Je=>Je.id));const be=Y.map.queryRenderedFeatures(pe,se).filter(Je=>-1!==G.indexOf(Je.properties.meta)),Me=new q,Ne=[];return be.forEach(Je=>{const je=Je.properties.id;Me.has(je)||(Me.add(je),Ne.push(Je))}),V(Ne)}Ae.exports={click:function z(F,Z,Y){return D(F,Z,Y,Y.options.clickBuffer)},touch:function T(F,Z,Y){return D(F,Z,Y,Y.options.touchBuffer)}}},166:(Ae,J,U)=>{const V=U(2447),X=U(1319);Ae.exports=function(q,G){const z=V.click(q,null,G),T={mouse:X.cursors.NONE};return z[0]&&(T.mouse=z[0].properties.active===X.activeStates.ACTIVE?X.cursors.MOVE:X.cursors.POINTER,T.feature=z[0].properties.meta),-1!==G.events.currentModeName().indexOf("draw")&&(T.mouse=X.cursors.ADD),G.ui.queueMapClasses(T),G.ui.updateMapClasses(),z[0]}},7715:(Ae,J,U)=>{const V=U(5025);Ae.exports=function(z,T,D={}){const F=null!=D.fineTolerance?D.fineTolerance:4,Z=null!=D.grossTolerance?D.grossTolerance:12,Y=null!=D.interval?D.interval:500;z.point=z.point||T.point,z.time=z.time||T.time;const ie=V(z.point,T.point);return ie<F||ie<Z&&T.time-z.time<Y}},3873:Ae=>{Ae.exports=function J(U,V){return!!U.lngLat&&U.lngLat.lng===V[0]&&U.lngLat.lat===V[1]}},2423:(Ae,J,U)=>{const V=U(5025);Ae.exports=function(G,z,T={}){const D=null!=T.tolerance?T.tolerance:25,F=null!=T.interval?T.interval:250;return G.point=G.point||z.point,G.time=G.time||z.time,V(G.point,z.point)<D&&z.time-G.time<F}},633:Ae=>{Ae.exports=function J(U,V=0){return[[U.point.x-V,U.point.y-V],[U.point.x+V,U.point.y+V]]}},4699:Ae=>{Ae.exports=function(U,V){const X={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},m={on:function(G,z,T){if(void 0===X[G])throw new Error(`Invalid event type: ${G}`);X[G].push({selector:z,fn:T})},render:function(G){V.store.featureChanged(G)}},q=function(G,z){const T=X[G];let D=T.length;for(;D--;){const F=T[D];if(F.selector(z)){F.fn.call(m,z),V.store.render(),V.ui.updateMapClasses();break}}};return U.start.call(m),{render:U.render,stop:function(){U.stop&&U.stop()},trash:function(){U.trash&&(U.trash(),V.store.render())},combineFeatures:function(){U.combineFeatures&&U.combineFeatures()},uncombineFeatures:function(){U.uncombineFeatures&&U.uncombineFeatures()},drag:function(G){q("drag",G)},click:function(G){q("click",G)},mousemove:function(G){q("mousemove",G)},mousedown:function(G){q("mousedown",G)},mouseup:function(G){q("mouseup",G)},mouseout:function(G){q("mouseout",G)},keydown:function(G){q("keydown",G)},keyup:function(G){q("keyup",G)},touchstart:function(G){q("touchstart",G)},touchmove:function(G){q("touchmove",G)},touchend:function(G){q("touchend",G)},tap:function(G){q("tap",G)}}}},4840:(Ae,J,U)=>{const V=U(4969);Ae.exports=function X(m,q){const G=q.getBoundingClientRect();return new V(m.clientX-G.left-(q.clientLeft||0),m.clientY-G.top-(q.clientTop||0))}},3905:(Ae,J,U)=>{const V=U(9374),X=U(1319);Ae.exports=function(m,q){const G=V(m.map(z=>z.toGeoJSON()),q);m.forEach(z=>{const T=z.getCoordinates(),D=ie=>{const pe={lng:ie[0]+G.lng,lat:ie[1]+G.lat};return[pe.lng,pe.lat]},F=ie=>ie.map(pe=>D(pe));let Y;z.type===X.geojsonTypes.POINT?Y=D(T):z.type===X.geojsonTypes.LINE_STRING||z.type===X.geojsonTypes.MULTI_POINT?Y=T.map(D):z.type===X.geojsonTypes.POLYGON||z.type===X.geojsonTypes.MULTI_LINE_STRING?Y=T.map(F):z.type===X.geojsonTypes.MULTI_POLYGON&&(Y=T.map(ie=>ie.map(pe=>F(pe)))),z.incomingCoords(Y)})}},3953:(Ae,J,U)=>{const V=U(869),X=U(1319),m={Point:0,LineString:1,Polygon:2};function q(z,T){const D=m[z.geometry.type]-m[T.geometry.type];return 0===D&&z.geometry.type===X.geojsonTypes.POLYGON?z.area-T.area:D}Ae.exports=function G(z){return z.map(T=>(T.geometry.type===X.geojsonTypes.POLYGON&&(T.area=V.geometry({type:X.geojsonTypes.FEATURE,property:{},geometry:T.geometry})),T)).sort(q).map(T=>(delete T.area,T))}},6330:Ae=>{function J(U){if(this._items={},this._nums={},this._length=U?U.length:0,U)for(let V=0,X=U.length;V<X;V++)this.add(U[V]),void 0!==U[V]&&("string"==typeof U[V]?this._items[U[V]]=V:this._nums[U[V]]=V)}J.prototype.add=function(U){return this.has(U)||(this._length++,"string"==typeof U?this._items[U]=this._length:this._nums[U]=this._length),this},J.prototype.delete=function(U){return!1===this.has(U)||(this._length--,delete this._items[U],delete this._nums[U]),this},J.prototype.has=function(U){return!("string"!=typeof U&&"number"!=typeof U||void 0===this._items[U]&&void 0===this._nums[U])},J.prototype.values=function(){const U=[];return Object.keys(this._items).forEach(V=>{U.push({k:V,v:this._items[V]})}),Object.keys(this._nums).forEach(V=>{U.push({k:JSON.parse(V),v:this._nums[V]})}),U.sort((V,X)=>V.v-X.v).map(V=>V.k)},J.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this},Ae.exports=J},3888:Ae=>{Ae.exports=function(J,U){return J.length===U.length&&JSON.stringify(J.map(V=>V).sort())===JSON.stringify(U.map(V=>V).sort())}},6313:Ae=>{Ae.exports=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}]},5479:Ae=>{Ae.exports=function J(U,V,X){let m,q;function G(){m=!1,q&&(z.apply(X,q),q=!1)}function z(){m?q=arguments:(m=!0,U.apply(X,arguments),setTimeout(G,V))}return z}},859:Ae=>{Ae.exports=function J(U){return[].concat(U).filter(V=>void 0!==V)}},4261:(Ae,J,U)=>{const{noTarget:V,isOfMetaType:X,isInactiveFeature:m,isShiftDown:q}=U(8747),G=U(2120),z=U(9374),T=U(4054),D=U(1319),F=U(8747),Z=U(3905),Y=X(D.meta.VERTEX),ie=X(D.meta.MIDPOINT),pe={fireUpdate:function(){this.map.fire(D.events.UPDATE,{action:D.updateActions.CHANGE_COORDINATES,features:this.getSelected().map(se=>se.toGeoJSON())})},fireActionable:function(se){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:se.selectedCoordPaths.length>0})},startDragging:function(se,be){this.map.dragPan.disable(),se.canDragMove=!0,se.dragMoveLocation=be.lngLat},stopDragging:function(se){this.map.dragPan.enable(),se.dragMoving=!1,se.canDragMove=!1,se.dragMoveLocation=null},onVertex:function(se,be){this.startDragging(se,be);const Me=be.featureTarget.properties,Ne=se.selectedCoordPaths.indexOf(Me.coord_path);q(be)||-1!==Ne?q(be)&&-1===Ne&&se.selectedCoordPaths.push(Me.coord_path):se.selectedCoordPaths=[Me.coord_path];const Je=this.pathsToCoordinates(se.featureId,se.selectedCoordPaths);this.setSelectedCoordinates(Je)},onMidpoint:function(se,be){this.startDragging(se,be);const Me=be.featureTarget.properties;se.feature.addCoordinate(Me.coord_path,Me.lng,Me.lat),this.fireUpdate(),se.selectedCoordPaths=[Me.coord_path]},pathsToCoordinates:function(se,be){return be.map(Me=>({feature_id:se,coord_path:Me}))},onFeature:function(se,be){0===se.selectedCoordPaths.length?this.startDragging(se,be):this.stopDragging(se)},dragFeature:function(se,be,Me){Z(this.getSelected(),Me),se.dragMoveLocation=be.lngLat},dragVertex:function(se,be,Me){const Ne=se.selectedCoordPaths.map(Se=>se.feature.getCoordinate(Se)),Je=Ne.map(Se=>({type:D.geojsonTypes.FEATURE,properties:{},geometry:{type:D.geojsonTypes.POINT,coordinates:Se}})),je=z(Je,Me);for(let Se=0;Se<Ne.length;Se++){const Ke=Ne[Se];se.feature.updateCoordinate(se.selectedCoordPaths[Se],Ke[0]+je.lng,Ke[1]+je.lat)}},clickNoTarget:function(){this.changeMode(D.modes.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(D.modes.SIMPLE_SELECT)},clickActiveFeature:function(se){se.selectedCoordPaths=[],this.clearSelectedCoordinates(),se.feature.changed()},onSetup:function(se){const be=se.featureId,Me=this.getFeature(be);if(!Me)throw new Error("You must provide a featureId to enter direct_select mode");if(Me.type===D.geojsonTypes.POINT)throw new TypeError("direct_select mode doesn't handle point features");const Ne={featureId:be,feature:Me,dragMoveLocation:se.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:se.coordPath?[se.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(be,Ne.selectedCoordPaths)),this.setSelected(be),T.disable(this),this.setActionableState({trash:!0}),Ne},onStop:function(){T.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(se,be,Me){se.featureId===be.properties.id?(be.properties.active=D.activeStates.ACTIVE,Me(be),G(be,{map:this.map,midpoints:!0,selectedPaths:se.selectedCoordPaths}).forEach(Me)):(be.properties.active=D.activeStates.INACTIVE,Me(be)),this.fireActionable(se)},onTrash:function(se){se.selectedCoordPaths.sort().reverse().forEach(be=>se.feature.removeCoordinate(be)),this.fireUpdate(),se.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(se),!1===se.feature.isValid()&&(this.deleteFeature([se.featureId]),this.changeMode(D.modes.SIMPLE_SELECT,{}))},onMouseMove:function(se,be){const Me=F.isActiveFeature(be),Ne=Y(be),Je=0===se.selectedCoordPaths.length;this.updateUIClasses(Me&&Je||Ne&&!Je?{mouse:D.cursors.MOVE}:{mouse:D.cursors.NONE}),this.stopDragging(se)},onMouseOut:function(se){se.dragMoving&&this.fireUpdate()}};pe.onTouchStart=pe.onMouseDown=function(se,be){return Y(be)?this.onVertex(se,be):F.isActiveFeature(be)?this.onFeature(se,be):ie(be)?this.onMidpoint(se,be):void 0},pe.onDrag=function(se,be){if(!0!==se.canDragMove)return;se.dragMoving=!0,be.originalEvent.stopPropagation();const Me={lng:be.lngLat.lng-se.dragMoveLocation.lng,lat:be.lngLat.lat-se.dragMoveLocation.lat};se.selectedCoordPaths.length>0?this.dragVertex(se,be,Me):this.dragFeature(se,be,Me),se.dragMoveLocation=be.lngLat},pe.onClick=function(se,be){return V(be)?this.clickNoTarget(se,be):F.isActiveFeature(be)?this.clickActiveFeature(se,be):m(be)?this.clickInactive(se,be):void this.stopDragging(se)},pe.onTap=function(se,be){return V(be)?this.clickNoTarget(se,be):F.isActiveFeature(be)?this.clickActiveFeature(se,be):m(be)?this.clickInactive(se,be):void 0},pe.onTouchEnd=pe.onMouseUp=function(se){se.dragMoving&&this.fireUpdate(),this.stopDragging(se)},Ae.exports=pe},3070:(Ae,J,U)=>{const V=U(8747),X=U(3873),m=U(4054),q=U(1319),G=U(5340),z={onSetup:function(T){const D=(T=T||{}).featureId;let F,Z,Y="forward";if(D){if(F=this.getFeature(D),!F)throw new Error("Could not find a feature with the provided featureId");let ie=T.from;if(ie&&"Feature"===ie.type&&ie.geometry&&"Point"===ie.geometry.type&&(ie=ie.geometry),ie&&"Point"===ie.type&&ie.coordinates&&2===ie.coordinates.length&&(ie=ie.coordinates),!ie||!Array.isArray(ie))throw new Error("Please use the `from` property to indicate which point to continue the line from");const pe=F.coordinates.length-1;if(F.coordinates[pe][0]===ie[0]&&F.coordinates[pe][1]===ie[1])Z=pe+1,F.addCoordinate(Z,...F.coordinates[pe]);else{if(F.coordinates[0][0]!==ie[0]||F.coordinates[0][1]!==ie[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");Y="backwards",Z=0,F.addCoordinate(Z,...F.coordinates[0])}}else F=this.newFeature({type:q.geojsonTypes.FEATURE,properties:{},geometry:{type:q.geojsonTypes.LINE_STRING,coordinates:[]}}),Z=0,this.addFeature(F);return this.clearSelectedFeatures(),m.disable(this),this.updateUIClasses({mouse:q.cursors.ADD}),this.activateUIButton(q.types.LINE),this.setActionableState({trash:!0}),{line:F,currentVertexPosition:Z,direction:Y}},clickAnywhere:function(T,D){if(T.currentVertexPosition>0&&X(D,T.line.coordinates[T.currentVertexPosition-1])||"backwards"===T.direction&&X(D,T.line.coordinates[T.currentVertexPosition+1]))return this.changeMode(q.modes.SIMPLE_SELECT,{featureIds:[T.line.id]});this.updateUIClasses({mouse:q.cursors.ADD}),T.line.updateCoordinate(T.currentVertexPosition,D.lngLat.lng,D.lngLat.lat),"forward"===T.direction?(T.currentVertexPosition++,T.line.updateCoordinate(T.currentVertexPosition,D.lngLat.lng,D.lngLat.lat)):T.line.addCoordinate(0,D.lngLat.lng,D.lngLat.lat)},clickOnVertex:function(T){return this.changeMode(q.modes.SIMPLE_SELECT,{featureIds:[T.line.id]})},onMouseMove:function(T,D){T.line.updateCoordinate(T.currentVertexPosition,D.lngLat.lng,D.lngLat.lat),V.isVertex(D)&&this.updateUIClasses({mouse:q.cursors.POINTER})}};z.onTap=z.onClick=function(T,D){if(V.isVertex(D))return this.clickOnVertex(T,D);this.clickAnywhere(T,D)},z.onKeyUp=function(T,D){V.isEnterKey(D)?this.changeMode(q.modes.SIMPLE_SELECT,{featureIds:[T.line.id]}):V.isEscapeKey(D)&&(this.deleteFeature([T.line.id],{silent:!0}),this.changeMode(q.modes.SIMPLE_SELECT))},z.onStop=function(T){m.enable(this),this.activateUIButton(),void 0!==this.getFeature(T.line.id)&&(T.line.removeCoordinate(`${T.currentVertexPosition}`),T.line.isValid()?this.map.fire(q.events.CREATE,{features:[T.line.toGeoJSON()]}):(this.deleteFeature([T.line.id],{silent:!0}),this.changeMode(q.modes.SIMPLE_SELECT,{},{silent:!0})))},z.onTrash=function(T){this.deleteFeature([T.line.id],{silent:!0}),this.changeMode(q.modes.SIMPLE_SELECT)},z.toDisplayFeatures=function(T,D,F){const Z=D.properties.id===T.line.id;if(D.properties.active=Z?q.activeStates.ACTIVE:q.activeStates.INACTIVE,!Z)return F(D);D.geometry.coordinates.length<2||(D.properties.meta=q.meta.FEATURE,F(G(T.line.id,D.geometry.coordinates["forward"===T.direction?D.geometry.coordinates.length-2:1],""+("forward"===T.direction?D.geometry.coordinates.length-2:1),!1)),F(D))},Ae.exports=z},7182:(Ae,J,U)=>{const V=U(8747),X=U(1319),m={onSetup:function(){const q=this.newFeature({type:X.geojsonTypes.FEATURE,properties:{},geometry:{type:X.geojsonTypes.POINT,coordinates:[]}});return this.addFeature(q),this.clearSelectedFeatures(),this.updateUIClasses({mouse:X.cursors.ADD}),this.activateUIButton(X.types.POINT),this.setActionableState({trash:!0}),{point:q}},stopDrawingAndRemove:function(q){this.deleteFeature([q.point.id],{silent:!0}),this.changeMode(X.modes.SIMPLE_SELECT)}};m.onTap=m.onClick=function(q,G){this.updateUIClasses({mouse:X.cursors.MOVE}),q.point.updateCoordinate("",G.lngLat.lng,G.lngLat.lat),this.map.fire(X.events.CREATE,{features:[q.point.toGeoJSON()]}),this.changeMode(X.modes.SIMPLE_SELECT,{featureIds:[q.point.id]})},m.onStop=function(q){this.activateUIButton(),q.point.getCoordinate().length||this.deleteFeature([q.point.id],{silent:!0})},m.toDisplayFeatures=function(q,G,z){const T=G.properties.id===q.point.id;if(G.properties.active=T?X.activeStates.ACTIVE:X.activeStates.INACTIVE,!T)return z(G)},m.onTrash=m.stopDrawingAndRemove,m.onKeyUp=function(q,G){if(V.isEscapeKey(G)||V.isEnterKey(G))return this.stopDrawingAndRemove(q,G)},Ae.exports=m},7615:(Ae,J,U)=>{const V=U(8747),X=U(4054),m=U(1319),q=U(3873),G=U(5340),z={onSetup:function(){const T=this.newFeature({type:m.geojsonTypes.FEATURE,properties:{},geometry:{type:m.geojsonTypes.POLYGON,coordinates:[[]]}});return this.addFeature(T),this.clearSelectedFeatures(),X.disable(this),this.updateUIClasses({mouse:m.cursors.ADD}),this.activateUIButton(m.types.POLYGON),this.setActionableState({trash:!0}),{polygon:T,currentVertexPosition:0}},clickAnywhere:function(T,D){if(T.currentVertexPosition>0&&q(D,T.polygon.coordinates[0][T.currentVertexPosition-1]))return this.changeMode(m.modes.SIMPLE_SELECT,{featureIds:[T.polygon.id]});this.updateUIClasses({mouse:m.cursors.ADD}),T.polygon.updateCoordinate(`0.${T.currentVertexPosition}`,D.lngLat.lng,D.lngLat.lat),T.currentVertexPosition++,T.polygon.updateCoordinate(`0.${T.currentVertexPosition}`,D.lngLat.lng,D.lngLat.lat)},clickOnVertex:function(T){return this.changeMode(m.modes.SIMPLE_SELECT,{featureIds:[T.polygon.id]})},onMouseMove:function(T,D){T.polygon.updateCoordinate(`0.${T.currentVertexPosition}`,D.lngLat.lng,D.lngLat.lat),V.isVertex(D)&&this.updateUIClasses({mouse:m.cursors.POINTER})}};z.onTap=z.onClick=function(T,D){return V.isVertex(D)?this.clickOnVertex(T,D):this.clickAnywhere(T,D)},z.onKeyUp=function(T,D){V.isEscapeKey(D)?(this.deleteFeature([T.polygon.id],{silent:!0}),this.changeMode(m.modes.SIMPLE_SELECT)):V.isEnterKey(D)&&this.changeMode(m.modes.SIMPLE_SELECT,{featureIds:[T.polygon.id]})},z.onStop=function(T){this.updateUIClasses({mouse:m.cursors.NONE}),X.enable(this),this.activateUIButton(),void 0!==this.getFeature(T.polygon.id)&&(T.polygon.removeCoordinate(`0.${T.currentVertexPosition}`),T.polygon.isValid()?this.map.fire(m.events.CREATE,{features:[T.polygon.toGeoJSON()]}):(this.deleteFeature([T.polygon.id],{silent:!0}),this.changeMode(m.modes.SIMPLE_SELECT,{},{silent:!0})))},z.toDisplayFeatures=function(T,D,F){const Z=D.properties.id===T.polygon.id;if(D.properties.active=Z?m.activeStates.ACTIVE:m.activeStates.INACTIVE,!Z)return F(D);if(0===D.geometry.coordinates.length)return;const Y=D.geometry.coordinates[0].length;if(!(Y<3)){if(D.properties.meta=m.meta.FEATURE,F(G(T.polygon.id,D.geometry.coordinates[0][0],"0.0",!1)),Y>3){const ie=D.geometry.coordinates[0].length-3;F(G(T.polygon.id,D.geometry.coordinates[0][ie],`0.${ie}`,!1))}if(Y<=4&&(F({type:m.geojsonTypes.FEATURE,properties:D.properties,geometry:{coordinates:[[D.geometry.coordinates[0][0][0],D.geometry.coordinates[0][0][1]],[D.geometry.coordinates[0][1][0],D.geometry.coordinates[0][1][1]]],type:m.geojsonTypes.LINE_STRING}}),3===Y))return;return F(D)}},z.onTrash=function(T){this.deleteFeature([T.polygon.id],{silent:!0}),this.changeMode(m.modes.SIMPLE_SELECT)},Ae.exports=z},5073:(Ae,J,U)=>{Ae.exports={simple_select:U(3313),direct_select:U(4261),draw_point:U(7182),draw_polygon:U(7615),draw_line_string:U(3070)}},3083:(Ae,J,U)=>{const V=Ae.exports=U(2245);V.prototype.onSetup=function(){},V.prototype.onDrag=function(){},V.prototype.onClick=function(){},V.prototype.onMouseMove=function(){},V.prototype.onMouseDown=function(){},V.prototype.onMouseUp=function(){},V.prototype.onMouseOut=function(){},V.prototype.onKeyUp=function(){},V.prototype.onKeyDown=function(){},V.prototype.onTouchStart=function(){},V.prototype.onTouchMove=function(){},V.prototype.onTouchEnd=function(){},V.prototype.onTap=function(){},V.prototype.onStop=function(){},V.prototype.onTrash=function(){},V.prototype.onCombineFeature=function(){},V.prototype.onUncombineFeature=function(){},V.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")}},2245:(Ae,J,U)=>{const V=U(1319),X=U(2447),m=U(4158),q=U(4479),G=U(5165),z=U(5315),T=Ae.exports=function(D){this.map=D.map,this.drawConfig=JSON.parse(JSON.stringify(D.options||{})),this._ctx=D};T.prototype.setSelected=function(D){return this._ctx.store.setSelected(D)},T.prototype.setSelectedCoordinates=function(D){this._ctx.store.setSelectedCoordinates(D),D.reduce((F,Z)=>(void 0===F[Z.feature_id]&&(F[Z.feature_id]=!0,this._ctx.store.get(Z.feature_id).changed()),F),{})},T.prototype.getSelected=function(){return this._ctx.store.getSelected()},T.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},T.prototype.isSelected=function(D){return this._ctx.store.isSelected(D)},T.prototype.getFeature=function(D){return this._ctx.store.get(D)},T.prototype.select=function(D){return this._ctx.store.select(D)},T.prototype.deselect=function(D){return this._ctx.store.deselect(D)},T.prototype.deleteFeature=function(D,F={}){return this._ctx.store.delete(D,F)},T.prototype.addFeature=function(D){return this._ctx.store.add(D)},T.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},T.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},T.prototype.setActionableState=function(D={}){return this._ctx.events.actionable({trash:D.trash||!1,combineFeatures:D.combineFeatures||!1,uncombineFeatures:D.uncombineFeatures||!1})},T.prototype.changeMode=function(D,F={},Z={}){return this._ctx.events.changeMode(D,F,Z)},T.prototype.updateUIClasses=function(D){return this._ctx.ui.queueMapClasses(D)},T.prototype.activateUIButton=function(D){return this._ctx.ui.setActiveButton(D)},T.prototype.featuresAt=function(D,F,Z="click"){if("click"!==Z&&"touch"!==Z)throw new Error("invalid buffer type");return X[Z](D,F,this._ctx)},T.prototype.newFeature=function(D){const F=D.geometry.type;return F===V.geojsonTypes.POINT?new m(this._ctx,D):F===V.geojsonTypes.LINE_STRING?new q(this._ctx,D):F===V.geojsonTypes.POLYGON?new G(this._ctx,D):new z(this._ctx,D)},T.prototype.isInstanceOf=function(D,F){if(D===V.geojsonTypes.POINT)return F instanceof m;if(D===V.geojsonTypes.LINE_STRING)return F instanceof q;if(D===V.geojsonTypes.POLYGON)return F instanceof G;if("MultiFeature"===D)return F instanceof z;throw new Error(`Unknown feature class: ${D}`)},T.prototype.doRender=function(D){return this._ctx.store.featureChanged(D)}},3595:(Ae,J,U)=>{const V=U(3083),X={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},m=Object.keys(X);Ae.exports=function(q){const G=Object.keys(q);return function(z,T={}){let D={};const F=G.reduce((Y,ie)=>(Y[ie]=q[ie],Y),new V(z));return{start:function(){D=F.onSetup(T),m.forEach(Y=>{const ie=X[Y];let pe=()=>!1;q[ie]&&(pe=()=>!0),this.on(Y,pe,function Z(Y){return function(ie){F[Y](D,ie)}}(ie))})},stop:function(){F.onStop(D)},trash:function(){F.onTrash(D)},combineFeatures:function(){F.onCombineFeatures(D)},uncombineFeatures:function(){F.onUncombineFeatures(D)},render:function(Y,ie){F.toDisplayFeatures(D,Y,ie)}}}}},3313:(Ae,J,U)=>{const V=U(8747),X=U(4840),m=U(2120),q=U(6330),G=U(4054),z=U(3905),T=U(1319),D={onSetup:function(F){const Z={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoveing:!1,canDragMove:!1,initiallySelectedFeatureIds:F.featureIds||[]};return this.setSelected(Z.initiallySelectedFeatureIds.filter(Y=>void 0!==this.getFeature(Y))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),Z},fireUpdate:function(){this.map.fire(T.events.UPDATE,{action:T.updateActions.MOVE,features:this.getSelected().map(F=>F.toGeoJSON())})},fireActionable:function(){const F=this.getSelected(),Z=F.filter(se=>this.isInstanceOf("MultiFeature",se));let Y=!1;if(F.length>1){Y=!0;const se=F[0].type.replace("Multi","");F.forEach(be=>{be.type.replace("Multi","")!==se&&(Y=!1)})}this.setActionableState({combineFeatures:Y,uncombineFeatures:Z.length>0,trash:F.length>0})},getUniqueIds:function(F){return F.length?F.map(Y=>Y.properties.id).filter(Y=>void 0!==Y).reduce((Y,ie)=>(Y.add(ie),Y),new q).values():[]},stopExtendedInteractions:function(F){F.boxSelectElement&&(F.boxSelectElement.parentNode&&F.boxSelectElement.parentNode.removeChild(F.boxSelectElement),F.boxSelectElement=null),this.map.dragPan.enable(),F.boxSelecting=!1,F.canBoxSelect=!1,F.dragMoving=!1,F.canDragMove=!1},onStop:function(){G.enable(this)},onMouseMove:function(F){return this.stopExtendedInteractions(F)},onMouseOut:function(F){if(F.dragMoving)return this.fireUpdate()}};D.onTap=D.onClick=function(F,Z){return V.noTarget(Z)?this.clickAnywhere(F,Z):V.isOfMetaType(T.meta.VERTEX)(Z)?this.clickOnVertex(F,Z):V.isFeature(Z)?this.clickOnFeature(F,Z):void 0},D.clickAnywhere=function(F){const Z=this.getSelectedIds();Z.length&&(this.clearSelectedFeatures(),Z.forEach(Y=>this.doRender(Y))),G.enable(this),this.stopExtendedInteractions(F)},D.clickOnVertex=function(F,Z){this.changeMode(T.modes.DIRECT_SELECT,{featureId:Z.featureTarget.properties.parent,coordPath:Z.featureTarget.properties.coord_path,startPos:Z.lngLat}),this.updateUIClasses({mouse:T.cursors.MOVE})},D.startOnActiveFeature=function(F,Z){this.stopExtendedInteractions(F),this.map.dragPan.disable(),this.doRender(Z.featureTarget.properties.id),F.canDragMove=!0,F.dragMoveLocation=Z.lngLat},D.clickOnFeature=function(F,Z){G.disable(this),this.stopExtendedInteractions(F);const Y=V.isShiftDown(Z),ie=this.getSelectedIds(),pe=Z.featureTarget.properties.id,se=this.isSelected(pe);if(!Y&&se&&this.getFeature(pe).type!==T.geojsonTypes.POINT)return this.changeMode(T.modes.DIRECT_SELECT,{featureId:pe});se&&Y?(this.deselect(pe),this.updateUIClasses({mouse:T.cursors.POINTER}),1===ie.length&&G.enable(this)):!se&&Y?(this.select(pe),this.updateUIClasses({mouse:T.cursors.MOVE})):!se&&!Y&&(ie.forEach(be=>this.doRender(be)),this.setSelected(pe),this.updateUIClasses({mouse:T.cursors.MOVE})),this.doRender(pe)},D.onMouseDown=function(F,Z){return V.isActiveFeature(Z)?this.startOnActiveFeature(F,Z):this.drawConfig.boxSelect&&V.isShiftMousedown(Z)?this.startBoxSelect(F,Z):void 0},D.startBoxSelect=function(F,Z){this.stopExtendedInteractions(F),this.map.dragPan.disable(),F.boxSelectStartLocation=X(Z.originalEvent,this.map.getContainer()),F.canBoxSelect=!0},D.onTouchStart=function(F,Z){if(V.isActiveFeature(Z))return this.startOnActiveFeature(F,Z)},D.onDrag=function(F,Z){return F.canDragMove?this.dragMove(F,Z):this.drawConfig.boxSelect&&F.canBoxSelect?this.whileBoxSelect(F,Z):void 0},D.whileBoxSelect=function(F,Z){F.boxSelecting=!0,this.updateUIClasses({mouse:T.cursors.ADD}),F.boxSelectElement||(F.boxSelectElement=document.createElement("div"),F.boxSelectElement.classList.add(T.classes.BOX_SELECT),this.map.getContainer().appendChild(F.boxSelectElement));const Y=X(Z.originalEvent,this.map.getContainer()),ie=Math.min(F.boxSelectStartLocation.x,Y.x),pe=Math.max(F.boxSelectStartLocation.x,Y.x),se=Math.min(F.boxSelectStartLocation.y,Y.y),be=Math.max(F.boxSelectStartLocation.y,Y.y),Me=`translate(${ie}px, ${se}px)`;F.boxSelectElement.style.transform=Me,F.boxSelectElement.style.WebkitTransform=Me,F.boxSelectElement.style.width=pe-ie+"px",F.boxSelectElement.style.height=be-se+"px"},D.dragMove=function(F,Z){F.dragMoving=!0,Z.originalEvent.stopPropagation();const Y={lng:Z.lngLat.lng-F.dragMoveLocation.lng,lat:Z.lngLat.lat-F.dragMoveLocation.lat};z(this.getSelected(),Y),F.dragMoveLocation=Z.lngLat},D.onMouseUp=function(F,Z){if(F.dragMoving)this.fireUpdate();else if(F.boxSelecting){const Y=[F.boxSelectStartLocation,X(Z.originalEvent,this.map.getContainer())],ie=this.featuresAt(null,Y,"click"),pe=this.getUniqueIds(ie).filter(se=>!this.isSelected(se));pe.length&&(this.select(pe),pe.forEach(se=>this.doRender(se)),this.updateUIClasses({mouse:T.cursors.MOVE}))}this.stopExtendedInteractions(F)},D.toDisplayFeatures=function(F,Z,Y){Z.properties.active=this.isSelected(Z.properties.id)?T.activeStates.ACTIVE:T.activeStates.INACTIVE,Y(Z),this.fireActionable(),Z.properties.active===T.activeStates.ACTIVE&&Z.geometry.type!==T.geojsonTypes.POINT&&m(Z).forEach(Y)},D.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},D.onCombineFeatures=function(){const F=this.getSelected();if(0===F.length||F.length<2)return;const Z=[],Y=[],ie=F[0].type.replace("Multi","");for(let pe=0;pe<F.length;pe++){const se=F[pe];if(se.type.replace("Multi","")!==ie)return;se.type.includes("Multi")?se.getCoordinates().forEach(be=>{Z.push(be)}):Z.push(se.getCoordinates()),Y.push(se.toGeoJSON())}if(Y.length>1){const pe=this.newFeature({type:T.geojsonTypes.FEATURE,properties:Y[0].properties,geometry:{type:`Multi${ie}`,coordinates:Z}});this.addFeature(pe),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([pe.id]),this.map.fire(T.events.COMBINE_FEATURES,{createdFeatures:[pe.toGeoJSON()],deletedFeatures:Y})}this.fireActionable()},D.onUncombineFeatures=function(){const F=this.getSelected();if(0===F.length)return;const Z=[],Y=[];for(let ie=0;ie<F.length;ie++){const pe=F[ie];this.isInstanceOf("MultiFeature",pe)&&(pe.getFeatures().forEach(se=>{this.addFeature(se),se.properties=pe.properties,Z.push(se.toGeoJSON()),this.select([se.id])}),this.deleteFeature(pe.id,{silent:!0}),Y.push(pe.toGeoJSON()))}Z.length>1&&this.map.fire(T.events.UNCOMBINE_FEATURES,{createdFeatures:Z,deletedFeatures:Y}),this.fireActionable()},Ae.exports=D},9043:(Ae,J,U)=>{const V=U(4703),X=U(1319),m={defaultMode:X.modes.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:U(6313),modes:U(5073),controls:{},userProperties:!1},q={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},G={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function z(T,D){return T.map(F=>F.source?F:V(F,{id:`${F.id}.${D}`,source:"hot"===D?X.sources.HOT:X.sources.COLD}))}Ae.exports=function(T={}){let D=V(T);return T.controls||(D.controls={}),D.controls=V(!1===T.displayControlsDefault?G:q,T.controls),D=V(m,D),D.styles=z(D.styles,"cold").concat(z(D.styles,"hot")),D}},1300:(Ae,J,U)=>{const V=U(1319);Ae.exports=function(){const m=this;if(!m.ctx.map||void 0===m.ctx.map.getSource(V.sources.HOT))return Y();const G=m.ctx.events.currentModeName();m.ctx.ui.queueMapClasses({mode:G});let z=[],T=[];m.isDirty?T=m.getAllIds():(z=m.getChangedIds().filter(ie=>void 0!==m.get(ie)),T=m.sources.hot.filter(ie=>ie.properties.id&&-1===z.indexOf(ie.properties.id)&&void 0!==m.get(ie.properties.id)).map(ie=>ie.properties.id)),m.sources.hot=[];const D=m.sources.cold.length;m.sources.cold=m.isDirty?[]:m.sources.cold.filter(ie=>-1===z.indexOf(ie.properties.id||ie.properties.parent));const F=D!==m.sources.cold.length||T.length>0;function Z(ie,pe){const be=m.get(ie).internal(G);m.ctx.events.currentModeRender(be,Me=>{m.sources[pe].push(Me)})}if(z.forEach(ie=>Z(ie,"hot")),T.forEach(ie=>Z(ie,"cold")),F&&m.ctx.map.getSource(V.sources.COLD).setData({type:V.geojsonTypes.FEATURE_COLLECTION,features:m.sources.cold}),m.ctx.map.getSource(V.sources.HOT).setData({type:V.geojsonTypes.FEATURE_COLLECTION,features:m.sources.hot}),m._emitSelectionChange&&(m.ctx.map.fire(V.events.SELECTION_CHANGE,{features:m.getSelected().map(ie=>ie.toGeoJSON()),points:m.getSelectedCoordinates().map(ie=>({type:V.geojsonTypes.FEATURE,properties:{},geometry:{type:V.geojsonTypes.POINT,coordinates:ie.coordinates}}))}),m._emitSelectionChange=!1),m._deletedFeaturesToEmit.length){const ie=m._deletedFeaturesToEmit.map(pe=>pe.toGeoJSON());m._deletedFeaturesToEmit=[],m.ctx.map.fire(V.events.DELETE,{features:ie})}function Y(){m.isDirty=!1,m.clearChangedIds()}Y(),m.ctx.map.fire(V.events.RENDER,{})}},1726:(Ae,J,U)=>{const V=U(5262),X=U(2152),m=U(2605),q=U(1319),G=U(4703);Ae.exports=function(z){let T=null,D=null;const F={onRemove:function(){return z.map.off("load",F.connect),clearInterval(D),F.removeLayers(),z.store.restoreMapConfig(),z.ui.removeButtons(),z.events.removeEventListeners(),z.ui.clearMapClasses(),z.map=null,z.container=null,z.store=null,T&&T.parentNode&&T.parentNode.removeChild(T),T=null,this},connect:function(){z.map.off("load",F.connect),clearInterval(D),F.addLayers(),z.store.storeMapConfig(),z.events.addEventListeners()},onAdd:function(Z){{const Y=Z.fire;Z.fire=function(ie,pe){let se=arguments;return 1===Y.length&&1!==arguments.length&&(se=[G({},{type:ie},pe)]),Y.apply(Z,se)}}return z.map=Z,z.events=V(z),z.ui=m(z),z.container=Z.getContainer(),z.store=new X(z),T=z.ui.addButtons(),z.options.boxSelect&&(Z.boxZoom.disable(),Z.dragPan.disable(),Z.dragPan.enable()),Z.loaded()?F.connect():(Z.on("load",F.connect),D=setInterval(()=>{Z.loaded()&&F.connect()},16)),z.events.start(),T},addLayers:function(){z.map.addSource(q.sources.COLD,{data:{type:q.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),z.map.addSource(q.sources.HOT,{data:{type:q.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),z.options.styles.forEach(Z=>{z.map.addLayer(Z)}),z.store.setDirty(!0),z.store.render()},removeLayers:function(){z.options.styles.forEach(Z=>{z.map.getLayer(Z.id)&&z.map.removeLayer(Z.id)}),z.map.getSource(q.sources.COLD)&&z.map.removeSource(q.sources.COLD),z.map.getSource(q.sources.HOT)&&z.map.removeSource(q.sources.HOT)}};return z.setup=F,F}},2152:(Ae,J,U)=>{const V=U(5479),X=U(859),m=U(6330),q=U(1300),G=U(1319).interactions,z=Ae.exports=function(D){this._features={},this._featureIds=new m,this._selectedFeatureIds=new m,this._selectedCoordinates=[],this._changedFeatureIds=new m,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=D,this.sources={hot:[],cold:[]},this.render=V(q,16,this),this.isDirty=!1};function T(D){const F=this._selectedCoordinates.filter(Z=>this._selectedFeatureIds.has(Z.feature_id));this._selectedCoordinates.length!==F.length&&!D.silent&&(this._emitSelectionChange=!0),this._selectedCoordinates=F}z.prototype.createRenderBatch=function(){const D=this.render;let F=0;return this.render=function(){F++},()=>{this.render=D,F>0&&this.render()}},z.prototype.setDirty=function(){return this.isDirty=!0,this},z.prototype.featureChanged=function(D){return this._changedFeatureIds.add(D),this},z.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},z.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},z.prototype.getAllIds=function(){return this._featureIds.values()},z.prototype.add=function(D){return this.featureChanged(D.id),this._features[D.id]=D,this._featureIds.add(D.id),this},z.prototype.delete=function(D,F={}){return X(D).forEach(Z=>{!this._featureIds.has(Z)||(this._featureIds.delete(Z),this._selectedFeatureIds.delete(Z),F.silent||-1===this._deletedFeaturesToEmit.indexOf(this._features[Z])&&this._deletedFeaturesToEmit.push(this._features[Z]),delete this._features[Z],this.isDirty=!0)}),T.call(this,F),this},z.prototype.get=function(D){return this._features[D]},z.prototype.getAll=function(){return Object.keys(this._features).map(D=>this._features[D])},z.prototype.select=function(D,F={}){return X(D).forEach(Z=>{this._selectedFeatureIds.has(Z)||(this._selectedFeatureIds.add(Z),this._changedFeatureIds.add(Z),F.silent||(this._emitSelectionChange=!0))}),this},z.prototype.deselect=function(D,F={}){return X(D).forEach(Z=>{!this._selectedFeatureIds.has(Z)||(this._selectedFeatureIds.delete(Z),this._changedFeatureIds.add(Z),F.silent||(this._emitSelectionChange=!0))}),T.call(this,F),this},z.prototype.clearSelected=function(D={}){return this.deselect(this._selectedFeatureIds.values(),{silent:D.silent}),this},z.prototype.setSelected=function(D,F={}){return D=X(D),this.deselect(this._selectedFeatureIds.values().filter(Z=>-1===D.indexOf(Z)),{silent:F.silent}),this.select(D.filter(Z=>!this._selectedFeatureIds.has(Z)),{silent:F.silent}),this},z.prototype.setSelectedCoordinates=function(D){return this._selectedCoordinates=D,this._emitSelectionChange=!0,this},z.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},z.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},z.prototype.getSelected=function(){return this._selectedFeatureIds.values().map(D=>this.get(D))},z.prototype.getSelectedCoordinates=function(){return this._selectedCoordinates.map(F=>({coordinates:this.get(F.feature_id).getCoordinate(F.coord_path)}))},z.prototype.isSelected=function(D){return this._selectedFeatureIds.has(D)},z.prototype.setFeatureProperty=function(D,F,Z){this.get(D).setProperty(F,Z),this.featureChanged(D)},z.prototype.storeMapConfig=function(){G.forEach(D=>{this.ctx.map[D]&&(this._mapInitialConfig[D]=this.ctx.map[D].isEnabled())})},z.prototype.restoreMapConfig=function(){Object.keys(this._mapInitialConfig).forEach(D=>{this._mapInitialConfig[D]?this.ctx.map[D].enable():this.ctx.map[D].disable()})},z.prototype.getInitialConfigValue=function(D){return void 0===this._mapInitialConfig[D]||this._mapInitialConfig[D]}},2605:(Ae,J,U)=>{const V=U(4703),X=U(1319),m=["mode","feature","mouse"];Ae.exports=function(q){const G={};let z=null,T={mode:null,feature:null,mouse:null},D={mode:null,feature:null,mouse:null};function Z(Ne){D=V(D,Ne)}function Y(){if(!q.container)return;const Ne=[],Je=[];m.forEach(je=>{D[je]!==T[je]&&(Ne.push(`${je}-${T[je]}`),null!==D[je]&&Je.push(`${je}-${D[je]}`))}),Ne.length>0&&q.container.classList.remove.apply(q.container.classList,Ne),Je.length>0&&q.container.classList.add.apply(q.container.classList,Je),T=V(T,D)}function ie(Ne,Je={}){const je=document.createElement("button");return je.className=`${X.classes.CONTROL_BUTTON} ${Je.className}`,je.setAttribute("title",Je.title),Je.container.appendChild(je),je.addEventListener("click",Se=>{Se.preventDefault(),Se.stopPropagation(),Se.target!==z?(se(Ne),Je.onActivate()):pe()},!0),je}function pe(){!z||(z.classList.remove(X.classes.ACTIVE_BUTTON),z=null)}function se(Ne){pe();const Je=G[Ne];!Je||Je&&"trash"!==Ne&&(Je.classList.add(X.classes.ACTIVE_BUTTON),z=Je)}return{setActiveButton:se,queueMapClasses:Z,updateMapClasses:Y,clearMapClasses:function F(){Z({mode:null,feature:null,mouse:null}),Y()},addButtons:function be(){const Ne=q.options.controls,Je=document.createElement("div");return Je.className=`${X.classes.CONTROL_GROUP} ${X.classes.CONTROL_BASE}`,Ne&&(Ne[X.types.LINE]&&(G[X.types.LINE]=ie(X.types.LINE,{container:Je,className:X.classes.CONTROL_BUTTON_LINE,title:"LineString tool "+(q.options.keybindings?"(l)":""),onActivate:()=>q.events.changeMode(X.modes.DRAW_LINE_STRING)})),Ne[X.types.POLYGON]&&(G[X.types.POLYGON]=ie(X.types.POLYGON,{container:Je,className:X.classes.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(q.options.keybindings?"(p)":""),onActivate:()=>q.events.changeMode(X.modes.DRAW_POLYGON)})),Ne[X.types.POINT]&&(G[X.types.POINT]=ie(X.types.POINT,{container:Je,className:X.classes.CONTROL_BUTTON_POINT,title:"Marker tool "+(q.options.keybindings?"(m)":""),onActivate:()=>q.events.changeMode(X.modes.DRAW_POINT)})),Ne.trash&&(G.trash=ie("trash",{container:Je,className:X.classes.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:()=>{q.events.trash()}})),Ne.combine_features&&(G.combine_features=ie("combineFeatures",{container:Je,className:X.classes.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:()=>{q.events.combineFeatures()}})),Ne.uncombine_features&&(G.uncombine_features=ie("uncombineFeatures",{container:Je,className:X.classes.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:()=>{q.events.uncombineFeatures()}}))),Je},removeButtons:function Me(){Object.keys(G).forEach(Ne=>{const Je=G[Ne];Je.parentNode&&Je.parentNode.removeChild(Je),delete G[Ne]})}}}},8714:Ae=>{Ae.exports=function J(U){switch(U&&U.type||null){case"FeatureCollection":return U.features=U.features.reduce(function(V,X){return V.concat(J(X))},[]),U;case"Feature":return U.geometry?J(U.geometry).map(function(V){var X={type:"Feature",properties:JSON.parse(JSON.stringify(U.properties)),geometry:V};return void 0!==U.id&&(X.id=U.id),X}):U;case"MultiPoint":return U.coordinates.map(function(V){return{type:"Point",coordinates:V}});case"MultiPolygon":return U.coordinates.map(function(V){return{type:"Polygon",coordinates:V}});case"MultiLineString":return U.coordinates.map(function(V){return{type:"LineString",coordinates:V}});case"GeometryCollection":return U.geometries.map(J).reduce(function(V,X){return V.concat(X)},[]);case"Point":case"Polygon":case"LineString":return[U]}}},4987:function(Ae){Ae.exports=function(){"use strict";var J,U,V;function X(m,q){if(J)if(U){var G="var sharedChunk = {}; ("+J+")(sharedChunk); ("+U+")(sharedChunk);",z={};J(z),V=q(z),typeof window<"u"&&(V.workerUrl=window.URL.createObjectURL(new Blob([G],{type:"text/javascript"})))}else U=q;else J=q}return X(0,function(m){function q(a,u){return a(u={exports:{}},u.exports),u.exports}var G=z;function z(a,u,c,y){this.cx=3*a,this.bx=3*(c-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(y-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=y,this.p2x=c,this.p2y=y}z.prototype.sampleCurveX=function(a){return((this.ax*a+this.bx)*a+this.cx)*a},z.prototype.sampleCurveY=function(a){return((this.ay*a+this.by)*a+this.cy)*a},z.prototype.sampleCurveDerivativeX=function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},z.prototype.solveCurveX=function(a,u){var c,y,w,E,C;for(void 0===u&&(u=1e-6),w=a,C=0;C<8;C++){if(E=this.sampleCurveX(w)-a,Math.abs(E)<u)return w;var N=this.sampleCurveDerivativeX(w);if(Math.abs(N)<1e-6)break;w-=E/N}if((w=a)<(c=0))return c;if(w>(y=1))return y;for(;c<y;){if(E=this.sampleCurveX(w),Math.abs(E-a)<u)return w;a>E?c=w:y=w,w=.5*(y-c)+c}return w},z.prototype.solve=function(a,u){return this.sampleCurveY(this.solveCurveX(a,u))};var T=D;function D(a,u){this.x=a,this.y=u}D.prototype={clone:function(){return new D(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,u){return this.clone()._rotateAround(a,u)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var u=a.x-this.x,c=a.y-this.y;return u*u+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,u){return Math.atan2(this.x*u-this.y*a,this.x*a+this.y*u)},_matMult:function(a){var u=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=u,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var u=Math.cos(a),c=Math.sin(a),y=c*this.x+u*this.y;return this.x=u*this.x-c*this.y,this.y=y,this},_rotateAround:function(a,u){var c=Math.cos(a),y=Math.sin(a),w=u.y+y*(this.x-u.x)+c*(this.y-u.y);return this.x=u.x+c*(this.x-u.x)-y*(this.y-u.y),this.y=w,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},D.convert=function(a){return a instanceof D?a:Array.isArray(a)?new D(a[0],a[1]):a};var F=typeof self<"u"?self:{},Z=Math.pow(2,53)-1;function Y(a,u,c,y){var w=new G(a,u,c,y);return function(E){return w.solve(E)}}var ie=Y(.25,.1,.25,1);function pe(a,u,c){return Math.min(c,Math.max(u,a))}function se(a,u,c){var y=c-u,w=((a-u)%y+y)%y+u;return w===u?c:w}function be(a){for(var u=[],c=arguments.length-1;c-- >0;)u[c]=arguments[c+1];for(var y=0,w=u;y<w.length;y+=1){var E=w[y];for(var C in E)a[C]=E[C]}return a}var Me=1;function Ne(){return Me++}function Je(){return function a(u){return u?(u^16*Math.random()>>u/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,a)}()}function je(a){return!!a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)}function Se(a,u){a.forEach(function(c){u[c]&&(u[c]=u[c].bind(u))})}function Ke(a,u){return-1!==a.indexOf(u,a.length-u.length)}function nt(a,u,c){var y={};for(var w in a)y[w]=u.call(c||this,a[w],w,a);return y}function It(a,u,c){var y={};for(var w in a)u.call(c||this,a[w],w,a)&&(y[w]=a[w]);return y}function Ue(a){return Array.isArray(a)?a.map(Ue):"object"==typeof a&&a?nt(a,Ue):a}var A={};function O(a){A[a]||(typeof console<"u"&&console.warn(a),A[a]=!0)}function B(a,u,c){return(c.y-a.y)*(u.x-a.x)>(u.y-a.y)*(c.x-a.x)}function j(a){for(var u=0,c=0,y=a.length,w=y-1,E=void 0,C=void 0;c<y;w=c++)u+=((C=a[w]).x-(E=a[c]).x)*(E.y+C.y);return u}function ee(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function W(a){var u={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(y,w,E,C){var N=E||C;return u[w]=!N||N.toLowerCase(),""}),u["max-age"]){var c=parseInt(u["max-age"],10);isNaN(c)?delete u["max-age"]:u["max-age"]=c}return u}var ce=null;function Ze(a){if(null==ce){var u=a.navigator?a.navigator.userAgent:null;ce=!!a.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return ce}function lt(a){try{var u=F[a];return u.setItem("_mapbox_test_",1),u.removeItem("_mapbox_test_"),!0}catch{return!1}}var we,wt,bt,Ye,xt=F.performance&&F.performance.now?F.performance.now.bind(F.performance):Date.now.bind(Date),yn=F.requestAnimationFrame||F.mozRequestAnimationFrame||F.webkitRequestAnimationFrame||F.msRequestAnimationFrame,Bt=F.cancelAnimationFrame||F.mozCancelAnimationFrame||F.webkitCancelAnimationFrame||F.msCancelAnimationFrame,bn={now:xt,frame:function(a){var u=yn(a);return{cancel:function(){return Bt(u)}}},getImageData:function(a,u){void 0===u&&(u=0);var c=F.document.createElement("canvas"),y=c.getContext("2d");if(!y)throw new Error("failed to create canvas 2d context");return c.width=a.width,c.height=a.height,y.drawImage(a,0,0,a.width,a.height),y.getImageData(-u,-u,a.width+2*u,a.height+2*u)},resolveURL:function(a){return we||(we=F.document.createElement("a")),we.href=a,we.href},hardwareConcurrency:F.navigator&&F.navigator.hardwareConcurrency||4,get devicePixelRatio(){return F.devicePixelRatio},get prefersReducedMotion(){return!!F.matchMedia&&(null==wt&&(wt=F.matchMedia("(prefers-reduced-motion: reduce)")),wt.matches)}},Ct={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},xn={supported:!1,testSupport:function(a){!pn&&Ye&&(Xn?Zt(a):bt=a)}},pn=!1,Xn=!1;function Zt(a){var u=a.createTexture();a.bindTexture(a.TEXTURE_2D,u);try{if(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,Ye),a.isContextLost())return;xn.supported=!0}catch{}a.deleteTexture(u),pn=!0}F.document&&((Ye=F.document.createElement("img")).onload=function(){bt&&Zt(bt),bt=null,Xn=!0},Ye.onerror=function(){pn=!0,bt=null},Ye.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Ce="01",Vn=function(a,u){this._transformRequestFn=a,this._customAccessToken=u,this._createSkuToken()};function ur(a){return 0===a.indexOf("mapbox:")}Vn.prototype._createSkuToken=function(){var a=function(){for(var u="",c=0;c<10;c++)u+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Ce,u].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt},Vn.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Vn.prototype.transformRequest=function(a,u){return this._transformRequestFn&&this._transformRequestFn(a,u)||{url:a}},Vn.prototype.normalizeStyleURL=function(a,u){if(!ur(a))return a;var c=Lt(a);return c.path="/styles/v1"+c.path,this._makeAPIURL(c,this._customAccessToken||u)},Vn.prototype.normalizeGlyphsURL=function(a,u){if(!ur(a))return a;var c=Lt(a);return c.path="/fonts/v1"+c.path,this._makeAPIURL(c,this._customAccessToken||u)},Vn.prototype.normalizeSourceURL=function(a,u){if(!ur(a))return a;var c=Lt(a);return c.path="/v4/"+c.authority+".json",c.params.push("secure"),this._makeAPIURL(c,this._customAccessToken||u)},Vn.prototype.normalizeSpriteURL=function(a,u,c,y){var w=Lt(a);return ur(a)?(w.path="/styles/v1"+w.path+"/sprite"+u+c,this._makeAPIURL(w,this._customAccessToken||y)):(w.path+=""+u+c,Ma(w))},Vn.prototype.normalizeTileURL=function(a,u){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!ur(a))return a;var c=Lt(a);c.path=c.path.replace(/(\.(png|jpg)\d*)(?=$)/,(bn.devicePixelRatio>=2||512===u?"@2x":"")+(xn.supported?".webp":"$1")),c.path=c.path.replace(/^.+\/v4\//,"/"),c.path="/v4"+c.path;var y=this._customAccessToken||function(w){for(var E=0,C=w;E<C.length;E+=1){var N=C[E].match(/^access_token=(.*)$/);if(N)return N[1]}return null}(c.params)||Ct.ACCESS_TOKEN;return Ct.REQUIRE_ACCESS_TOKEN&&y&&this._skuToken&&c.params.push("sku="+this._skuToken),this._makeAPIURL(c,y)},Vn.prototype.canonicalizeTileURL=function(a,u){var c=Lt(a);if(!c.path.match(/(^\/v4\/)/)||!c.path.match(/\.[\w]+$/))return a;var y="mapbox://tiles/";y+=c.path.replace("/v4/","");var w=c.params;return u&&(w=w.filter(function(E){return!E.match(/^access_token=/)})),w.length&&(y+="?"+w.join("&")),y},Vn.prototype.canonicalizeTileset=function(a,u){for(var c=!!u&&ur(u),y=[],w=0,E=a.tiles||[];w<E.length;w+=1){var C=E[w];Bi(C)?y.push(this.canonicalizeTileURL(C,c)):y.push(C)}return y},Vn.prototype._makeAPIURL=function(a,u){var c="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",y=Lt(Ct.API_URL);if(a.protocol=y.protocol,a.authority=y.authority,"http"===a.protocol){var w=a.params.indexOf("secure");w>=0&&a.params.splice(w,1)}if("/"!==y.path&&(a.path=""+y.path+a.path),!Ct.REQUIRE_ACCESS_TOKEN)return Ma(a);if(!(u=u||Ct.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+c);if("s"===u[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+c);return a.params=a.params.filter(function(E){return-1===E.indexOf("access_token")}),a.params.push("access_token="+u),Ma(a)},Vn.prototype.setTransformRequest=function(a){this._transformRequestFn=a};var mi=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Bi(a){return mi.test(a)}var Wt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Lt(a){var u=a.match(Wt);if(!u)throw new Error("Unable to parse URL object");return{protocol:u[1],authority:u[2],path:u[3]||"/",params:u[4]?u[4].split("&"):[]}}function Ma(a){var u=a.params.length?"?"+a.params.join("&"):"";return a.protocol+"://"+a.authority+a.path+u}function pa(a){if(!a)return null;var u=a.split(".");if(!u||3!==u.length)return null;try{return JSON.parse(decodeURIComponent(F.atob(u[1]).split("").map(function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var si=function(a){this.type=a,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};si.prototype.getStorageKey=function(a){var u,c=pa(Ct.ACCESS_TOKEN);return u=c&&c.u?F.btoa(encodeURIComponent(c.u).replace(/%([0-9A-F]{2})/g,function(y,w){return String.fromCharCode(Number("0x"+w))})):Ct.ACCESS_TOKEN||"",a?"mapbox.eventData."+a+":"+u:"mapbox.eventData:"+u},si.prototype.fetchEventData=function(){var a=lt("localStorage"),u=this.getStorageKey(),c=this.getStorageKey("uuid");if(a)try{var y=F.localStorage.getItem(u);y&&(this.eventData=JSON.parse(y));var w=F.localStorage.getItem(c);w&&(this.anonId=w)}catch{O("Unable to read from LocalStorage")}},si.prototype.saveEventData=function(){var a=lt("localStorage"),u=this.getStorageKey(),c=this.getStorageKey("uuid");if(a)try{F.localStorage.setItem(c,this.anonId),Object.keys(this.eventData).length>=1&&F.localStorage.setItem(u,JSON.stringify(this.eventData))}catch{O("Unable to write to LocalStorage")}},si.prototype.processRequests=function(a){},si.prototype.postEvent=function(a,u,c,y){var w=this;if(Ct.EVENTS_URL){var E=Lt(Ct.EVENTS_URL);E.params.push("access_token="+(y||Ct.ACCESS_TOKEN||""));var C={event:this.type,created:new Date(a).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.15.3",skuId:Ce,userId:this.anonId},N=u?be(C,u):C,$={url:Ma(E),headers:{"Content-Type":"text/plain"},body:JSON.stringify([N])};this.pendingRequest=oe($,function(Q){w.pendingRequest=null,c(Q),w.saveEventData(),w.processRequests(y)})}},si.prototype.queueRequest=function(a,u){this.queue.push(a),this.processRequests(u)};var $r,eu,Ka=function(a){function u(){a.call(this,"map.load"),this.success={},this.skuToken=""}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.postMapLoadEvent=function(c,y,w,E){this.skuToken=w,(Ct.EVENTS_URL&&E||Ct.ACCESS_TOKEN&&Array.isArray(c)&&c.some(function(C){return ur(C)||Bi(C)}))&&this.queueRequest({id:y,timestamp:Date.now()},E)},u.prototype.processRequests=function(c){var y=this;if(!this.pendingRequest&&0!==this.queue.length){var w=this.queue.shift(),E=w.id,C=w.timestamp;E&&this.success[E]||(this.anonId||this.fetchEventData(),je(this.anonId)||(this.anonId=Je()),this.postEvent(C,{skuToken:this.skuToken},function(N){N||E&&(y.success[E]=!0)},c))}},u}(si),Do=new(function(a){function u(c){a.call(this,"appUserTurnstile"),this._customAccessToken=c}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.postTurnstileEvent=function(c,y){Ct.EVENTS_URL&&Ct.ACCESS_TOKEN&&Array.isArray(c)&&c.some(function(w){return ur(w)||Bi(w)})&&this.queueRequest(Date.now(),y)},u.prototype.processRequests=function(c){var y=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var w=pa(Ct.ACCESS_TOKEN),E=w?w.u:Ct.ACCESS_TOKEN,C=E!==this.eventData.tokenU;je(this.anonId)||(this.anonId=Je(),C=!0);var N=this.queue.shift();if(this.eventData.lastSuccess){var $=new Date(this.eventData.lastSuccess),Q=new Date(N),ne=(N-this.eventData.lastSuccess)/864e5;C=C||ne>=1||ne<-1||$.getDate()!==Q.getDate()}else C=!0;if(!C)return this.processRequests();this.postEvent(N,{"enabled.telemetry":!1},function(re){re||(y.eventData.lastSuccess=N,y.eventData.tokenU=E)},c)}},u}(si)),Oa=Do.postTurnstileEvent.bind(Do),ps=new Ka,so=ps.postMapLoadEvent.bind(ps),ma=500,uo=50;function wo(){F.caches&&!$r&&($r=F.caches.open("mapbox-tiles"))}function Vu(a){var u=a.indexOf("?");return u<0?a:a.slice(0,u)}var As,xo=1/0;function lr(){return null==As&&(As=F.OffscreenCanvas&&new F.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof F.createImageBitmap),As}var Gu={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Gu);var bu=function(a){function u(c,y,w){401===y&&Bi(w)&&(c+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),a.call(this,c),this.status=y,this.url=w,this.name=this.constructor.name,this.message=c}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},u}(Error),Us=ee()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===F.location.protocol?F.parent:F).location.href};function Ao(a,u){var c,y=new F.AbortController,w=new F.Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,referrer:Us(),signal:y.signal}),E=!1,C=!1,N=(c=w.url).indexOf("sku=")>0&&Bi(c);"json"===a.type&&w.headers.set("Accept","application/json");var $=function(ne,re,le){if(!C){if(ne&&"SecurityError"!==ne.message&&O(ne),re&&le)return Q(re);var me=Date.now();F.fetch(w).then(function(Te){if(Te.ok){var Pe=N?Te.clone():null;return Q(Te,Pe,me)}return u(new bu(Te.statusText,Te.status,a.url))}).catch(function(Te){20!==Te.code&&u(new Error(Te.message))})}},Q=function(ne,re,le){("arrayBuffer"===a.type?ne.arrayBuffer():"json"===a.type?ne.json():ne.text()).then(function(me){C||(re&&le&&function(Te,Pe,We){if(wo(),$r){var Be={status:Pe.status,statusText:Pe.statusText,headers:new F.Headers};Pe.headers.forEach(function(st,ht){return Be.headers.set(ht,st)});var rt=W(Pe.headers.get("Cache-Control")||"");rt["no-store"]||(rt["max-age"]&&Be.headers.set("Expires",new Date(We+1e3*rt["max-age"]).toUTCString()),new Date(Be.headers.get("Expires")).getTime()-We<42e4||function(st,ht){if(void 0===eu)try{new Response(new ReadableStream),eu=!0}catch{eu=!1}eu?ht(st.body):st.blob().then(ht)}(Pe,function(st){var ht=new F.Response(st,Be);wo(),$r&&$r.then(function(gt){return gt.put(Vu(Te.url),ht)}).catch(function(gt){return O(gt.message)})}))}}(w,re,le),E=!0,u(null,me,ne.headers.get("Cache-Control"),ne.headers.get("Expires")))}).catch(function(me){C||u(new Error(me.message))})};return N?function(ne,re){if(wo(),!$r)return re(null);var le=Vu(ne.url);$r.then(function(me){me.match(le).then(function(Te){var Pe=function(We){if(!We)return!1;var Be=new Date(We.headers.get("Expires")||0),rt=W(We.headers.get("Cache-Control")||"");return Be>Date.now()&&!rt["no-cache"]}(Te);me.delete(le),Pe&&me.put(le,Te.clone()),re(null,Te,Pe)}).catch(re)}).catch(re)}(w,$):$(null,null),{cancel:function(){C=!0,E||y.abort()}}}var ms,Yr,tu=function(a,u){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){if(ee()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,u);if(!ee()){var c=a.url.substring(0,a.url.indexOf("://"));return(Ct.REGISTERED_PROTOCOLS[c]||Ao)(a,u)}}if(!(/^file:/.test(y=a.url)||/^file:/.test(Us())&&!/^\w+:/.test(y))){if(F.fetch&&F.Request&&F.AbortController&&F.Request.prototype.hasOwnProperty("signal"))return Ao(a,u);if(ee()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,u,void 0,!0)}var y;return function(w,E){var C=new F.XMLHttpRequest;for(var N in C.open(w.method||"GET",w.url,!0),"arrayBuffer"===w.type&&(C.responseType="arraybuffer"),w.headers)C.setRequestHeader(N,w.headers[N]);return"json"===w.type&&(C.responseType="text",C.setRequestHeader("Accept","application/json")),C.withCredentials="include"===w.credentials,C.onerror=function(){E(new Error(C.statusText))},C.onload=function(){if((C.status>=200&&C.status<300||0===C.status)&&null!==C.response){var $=C.response;if("json"===w.type)try{$=JSON.parse(C.response)}catch(Q){return E(Q)}E(null,$,C.getResponseHeader("Cache-Control"),C.getResponseHeader("Expires"))}else E(new bu(C.statusText,C.status,w.url))},C.send(w.body),{cancel:function(){return C.abort()}}}(a,u)},Br=function(a,u){return tu(be(a,{type:"arrayBuffer"}),u)},oe=function(a,u){return tu(be(a,{method:"POST"}),u)},ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";ms=[],Yr=0;var fe=function(a,u){if(xn.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*"),Yr>=Ct.MAX_PARALLEL_IMAGE_REQUESTS){var c={requestParameters:a,callback:u,cancelled:!1,cancel:function(){this.cancelled=!0}};return ms.push(c),c}Yr++;var y=!1,w=function(){if(!y)for(y=!0,Yr--;ms.length&&Yr<Ct.MAX_PARALLEL_IMAGE_REQUESTS;){var C=ms.shift();C.cancelled||(C.cancel=fe(C.requestParameters,C.callback).cancel)}},E=Br(a,function(C,N,$,Q){var re,le;w(),C?u(C):N&&(lr()?(re=u,le=new F.Blob([new Uint8Array(N)],{type:"image/png"}),F.createImageBitmap(le).then(function(me){re(null,me)}).catch(function(me){re(new Error("Could not load image because of "+me.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(ne,re,le,me){var Te=new F.Image,Pe=F.URL;Te.onload=function(){re(null,Te),Pe.revokeObjectURL(Te.src),Te.onload=null,F.requestAnimationFrame(function(){Te.src=ue})},Te.onerror=function(){return re(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var We=new F.Blob([new Uint8Array(ne)],{type:"image/png"});Te.cacheControl=le,Te.expires=me,Te.src=ne.byteLength?Pe.createObjectURL(We):ue}(N,u,$,Q))});return{cancel:function(){E.cancel(),w()}}};function ve(a,u,c){c[a]&&-1!==c[a].indexOf(u)||(c[a]=c[a]||[],c[a].push(u))}function De(a,u,c){if(c&&c[a]){var y=c[a].indexOf(u);-1!==y&&c[a].splice(y,1)}}var $e=function(a,u){void 0===u&&(u={}),be(this,u),this.type=a},Xe=function(a){function u(c,y){void 0===y&&(y={}),a.call(this,"error",be({error:c},y))}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u}($e),He=function(){};He.prototype.on=function(a,u){return this._listeners=this._listeners||{},ve(a,u,this._listeners),this},He.prototype.off=function(a,u){return De(a,u,this._listeners),De(a,u,this._oneTimeListeners),this},He.prototype.once=function(a,u){return this._oneTimeListeners=this._oneTimeListeners||{},ve(a,u,this._oneTimeListeners),this},He.prototype.fire=function(a,u){"string"==typeof a&&(a=new $e(a,u||{}));var c=a.type;if(this.listens(c)){a.target=this;for(var y=0,w=this._listeners&&this._listeners[c]?this._listeners[c].slice():[];y<w.length;y+=1)w[y].call(this,a);for(var E=0,C=this._oneTimeListeners&&this._oneTimeListeners[c]?this._oneTimeListeners[c].slice():[];E<C.length;E+=1){var N=C[E];De(c,N,this._oneTimeListeners),N.call(this,a)}var $=this._eventedParent;$&&(be(a,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),$.fire(a))}else a instanceof Xe&&console.error(a.error);return this},He.prototype.listens=function(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)},He.prototype.setEventedParent=function(a,u){return this._eventedParent=a,this._eventedParentData=u,this};var Ee={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Fe=function(a,u,c,y){this.message=(a?a+": ":"")+c,y&&(this.identifier=y),null!=u&&u.__line__&&(this.line=u.__line__)};function Mt(a){var u=a.value;return u?[new Fe(a.key,u,"constants have been deprecated as of v8")]:[]}function Ft(a){for(var u=[],c=arguments.length-1;c-- >0;)u[c]=arguments[c+1];for(var y=0,w=u;y<w.length;y+=1){var E=w[y];for(var C in E)a[C]=E[C]}return a}function ct(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function Et(a){if(Array.isArray(a))return a.map(Et);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){var u={};for(var c in a)u[c]=Et(a[c]);return u}return ct(a)}var Jt=function(a){function u(c,y){a.call(this,y),this.message=y,this.key=c}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u}(Error),Kt=function(a,u){void 0===u&&(u=[]),this.parent=a,this.bindings={};for(var c=0,y=u;c<y.length;c+=1){var w=y[c];this.bindings[w[0]]=w[1]}};Kt.prototype.concat=function(a){return new Kt(this,a)},Kt.prototype.get=function(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(a+" not found in scope.")},Kt.prototype.has=function(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)};var mn={kind:"null"},St={kind:"number"},Ut={kind:"string"},Tt={kind:"boolean"},Gn={kind:"color"},jn={kind:"object"},ln={kind:"value"},ni={kind:"collator"},En={kind:"formatted"},ui={kind:"resolvedImage"};function _i(a,u){return{kind:"array",itemType:a,N:u}}function Ir(a){if("array"===a.kind){var u=Ir(a.itemType);return"number"==typeof a.N?"array<"+u+", "+a.N+">":"value"===a.itemType.kind?"array":"array<"+u+">"}return a.kind}var Xr=[mn,St,Ut,Tt,Gn,En,jn,_i(ln),ui];function xi(a,u){if("error"===u.kind)return null;if("array"===a.kind){if("array"===u.kind&&(0===u.N&&"value"===u.itemType.kind||!xi(a.itemType,u.itemType))&&("number"!=typeof a.N||a.N===u.N))return null}else{if(a.kind===u.kind)return null;if("value"===a.kind)for(var c=0,y=Xr;c<y.length;c+=1)if(!xi(y[c],u))return null}return"Expected "+Ir(a)+" but found "+Ir(u)+" instead."}function Hr(a,u){return u.some(function(c){return c.kind===a.kind})}function Mn(a,u){return u.some(function(c){return"null"===c?null===a:"array"===c?Array.isArray(a):"object"===c?a&&!Array.isArray(a)&&"object"==typeof a:c===typeof a})}var Oi=q(function(a,u){var c={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function y(N){return(N=Math.round(N))<0?0:N>255?255:N}function w(N){return y("%"===N[N.length-1]?parseFloat(N)/100*255:parseInt(N))}function E(N){return($="%"===N[N.length-1]?parseFloat(N)/100:parseFloat(N))<0?0:$>1?1:$;var $}function C(N,$,Q){return Q<0?Q+=1:Q>1&&(Q-=1),6*Q<1?N+($-N)*Q*6:2*Q<1?$:3*Q<2?N+($-N)*(2/3-Q)*6:N}try{u.parseCSSColor=function(N){var $,Q=N.replace(/ /g,"").toLowerCase();if(Q in c)return c[Q].slice();if("#"===Q[0])return 4===Q.length?($=parseInt(Q.substr(1),16))>=0&&$<=4095?[(3840&$)>>4|(3840&$)>>8,240&$|(240&$)>>4,15&$|(15&$)<<4,1]:null:7===Q.length&&($=parseInt(Q.substr(1),16))>=0&&$<=16777215?[(16711680&$)>>16,(65280&$)>>8,255&$,1]:null;var ne=Q.indexOf("("),re=Q.indexOf(")");if(-1!==ne&&re+1===Q.length){var le=Q.substr(0,ne),me=Q.substr(ne+1,re-(ne+1)).split(","),Te=1;switch(le){case"rgba":if(4!==me.length)return null;Te=E(me.pop());case"rgb":return 3!==me.length?null:[w(me[0]),w(me[1]),w(me[2]),Te];case"hsla":if(4!==me.length)return null;Te=E(me.pop());case"hsl":if(3!==me.length)return null;var Pe=(parseFloat(me[0])%360+360)%360/360,We=E(me[1]),Be=E(me[2]),rt=Be<=.5?Be*(We+1):Be+We-Be*We,st=2*Be-rt;return[y(255*C(st,rt,Pe+1/3)),y(255*C(st,rt,Pe)),y(255*C(st,rt,Pe-1/3)),Te];default:return null}}return null}}catch{}}).parseCSSColor,er=function(a,u,c,y){void 0===y&&(y=1),this.r=a,this.g=u,this.b=c,this.a=y};er.parse=function(a){if(a){if(a instanceof er)return a;if("string"==typeof a){var u=Oi(a);if(u)return new er(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3])}}},er.prototype.toString=function(){var a=this.toArray(),u=a[1],c=a[2],y=a[3];return"rgba("+Math.round(a[0])+","+Math.round(u)+","+Math.round(c)+","+y+")"},er.prototype.toArray=function(){var a=this.a;return 0===a?[0,0,0,0]:[255*this.r/a,255*this.g/a,255*this.b/a,a]},er.black=new er(0,0,0,1),er.white=new er(1,1,1,1),er.transparent=new er(0,0,0,0),er.red=new er(1,0,0,1);var ua=function(a,u,c){this.sensitivity=a?u?"variant":"case":u?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ua.prototype.compare=function(a,u){return this.collator.compare(a,u)},ua.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var qo=function(a,u,c,y,w){this.text=a,this.image=u,this.scale=c,this.fontStack=y,this.textColor=w},or=function(a){this.sections=a};or.fromString=function(a){return new or([new qo(a,null,null,null,null)])},or.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(a){return 0!==a.text.length||a.image&&0!==a.image.name.length})},or.factory=function(a){return a instanceof or?a:or.fromString(a)},or.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(a){return a.text}).join("")},or.prototype.serialize=function(){for(var a=["format"],u=0,c=this.sections;u<c.length;u+=1){var y=c[u];if(y.image)a.push(["image",y.image.name]);else{a.push(y.text);var w={};y.fontStack&&(w["text-font"]=["literal",y.fontStack.split(",")]),y.scale&&(w["font-scale"]=y.scale),y.textColor&&(w["text-color"]=["rgba"].concat(y.textColor.toArray())),a.push(w)}}return a};var ji=function(a){this.name=a.name,this.available=a.available};function jr(a,u,c,y){return"number"==typeof a&&a>=0&&a<=255&&"number"==typeof u&&u>=0&&u<=255&&"number"==typeof c&&c>=0&&c<=255?void 0===y||"number"==typeof y&&y>=0&&y<=1?null:"Invalid rgba value ["+[a,u,c,y].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof y?[a,u,c,y]:[a,u,c]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function gs(a){if(null===a||"string"==typeof a||"boolean"==typeof a||"number"==typeof a||a instanceof er||a instanceof ua||a instanceof or||a instanceof ji)return!0;if(Array.isArray(a)){for(var u=0,c=a;u<c.length;u+=1)if(!gs(c[u]))return!1;return!0}if("object"==typeof a){for(var y in a)if(!gs(a[y]))return!1;return!0}return!1}function Ui(a){if(null===a)return mn;if("string"==typeof a)return Ut;if("boolean"==typeof a)return Tt;if("number"==typeof a)return St;if(a instanceof er)return Gn;if(a instanceof ua)return ni;if(a instanceof or)return En;if(a instanceof ji)return ui;if(Array.isArray(a)){for(var u,c=a.length,y=0,w=a;y<w.length;y+=1){var E=Ui(w[y]);if(u){if(u===E)continue;u=ln;break}u=E}return _i(u||ln,c)}return jn}function La(a){var u=typeof a;return null===a?"":"string"===u||"number"===u||"boolean"===u?String(a):a instanceof er||a instanceof or||a instanceof ji?a.toString():JSON.stringify(a)}ji.prototype.toString=function(){return this.name},ji.fromString=function(a){return a?new ji({name:a,available:!1}):null},ji.prototype.serialize=function(){return["image",this.name]};var Tn=function(a,u){this.type=a,this.value=u};Tn.parse=function(a,u){if(2!==a.length)return u.error("'literal' expression requires exactly one argument, but found "+(a.length-1)+" instead.");if(!gs(a[1]))return u.error("invalid value");var c=a[1],y=Ui(c),w=u.expectedType;return"array"!==y.kind||0!==y.N||!w||"array"!==w.kind||"number"==typeof w.N&&0!==w.N||(y=w),new Tn(y,c)},Tn.prototype.evaluate=function(){return this.value},Tn.prototype.eachChild=function(){},Tn.prototype.outputDefined=function(){return!0},Tn.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof er?["rgba"].concat(this.value.toArray()):this.value instanceof or?this.value.serialize():this.value};var ri=function(a){this.name="ExpressionEvaluationError",this.message=a};ri.prototype.toJSON=function(){return this.message};var Wo={string:Ut,number:St,boolean:Tt,object:jn},un=function(a,u){this.type=a,this.args=u};un.parse=function(a,u){if(a.length<2)return u.error("Expected at least one argument.");var c,y=1,w=a[0];if("array"===w){var E,C;if(a.length>2){var N=a[1];if("string"!=typeof N||!(N in Wo)||"object"===N)return u.error('The item type argument of "array" must be one of string, number, boolean',1);E=Wo[N],y++}else E=ln;if(a.length>3){if(null!==a[2]&&("number"!=typeof a[2]||a[2]<0||a[2]!==Math.floor(a[2])))return u.error('The length argument to "array" must be a positive integer literal',2);C=a[2],y++}c=_i(E,C)}else c=Wo[w];for(var $=[];y<a.length;y++){var Q=u.parse(a[y],y,ln);if(!Q)return null;$.push(Q)}return new un(c,$)},un.prototype.evaluate=function(a){for(var u=0;u<this.args.length;u++){var c=this.args[u].evaluate(a);if(!xi(this.type,Ui(c)))return c;if(u===this.args.length-1)throw new ri("Expected value to be of type "+Ir(this.type)+", but found "+Ir(Ui(c))+" instead.")}return null},un.prototype.eachChild=function(a){this.args.forEach(a)},un.prototype.outputDefined=function(){return this.args.every(function(a){return a.outputDefined()})},un.prototype.serialize=function(){var a=this.type,u=[a.kind];if("array"===a.kind){var c=a.itemType;if("string"===c.kind||"number"===c.kind||"boolean"===c.kind){u.push(c.kind);var y=a.N;("number"==typeof y||this.args.length>1)&&u.push(y)}}return u.concat(this.args.map(function(w){return w.serialize()}))};var Ro=function(a){this.type=En,this.sections=a};Ro.parse=function(a,u){if(a.length<2)return u.error("Expected at least one argument.");var c=a[1];if(!Array.isArray(c)&&"object"==typeof c)return u.error("First argument must be an image or text section.");for(var y=[],w=!1,E=1;E<=a.length-1;++E){var C=a[E];if(w&&"object"==typeof C&&!Array.isArray(C)){w=!1;var N=null;if(C["font-scale"]&&!(N=u.parse(C["font-scale"],1,St)))return null;var $=null;if(C["text-font"]&&!($=u.parse(C["text-font"],1,_i(Ut))))return null;var Q=null;if(C["text-color"]&&!(Q=u.parse(C["text-color"],1,Gn)))return null;var ne=y[y.length-1];ne.scale=N,ne.font=$,ne.textColor=Q}else{var re=u.parse(a[E],1,ln);if(!re)return null;var le=re.type.kind;if("string"!==le&&"value"!==le&&"null"!==le&&"resolvedImage"!==le)return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");w=!0,y.push({content:re,scale:null,font:null,textColor:null})}}return new Ro(y)},Ro.prototype.evaluate=function(a){return new or(this.sections.map(function(u){var c=u.content.evaluate(a);return Ui(c)===ui?new qo("",c,null,null,null):new qo(La(c),null,u.scale?u.scale.evaluate(a):null,u.font?u.font.evaluate(a).join(","):null,u.textColor?u.textColor.evaluate(a):null)}))},Ro.prototype.eachChild=function(a){for(var u=0,c=this.sections;u<c.length;u+=1){var y=c[u];a(y.content),y.scale&&a(y.scale),y.font&&a(y.font),y.textColor&&a(y.textColor)}},Ro.prototype.outputDefined=function(){return!1},Ro.prototype.serialize=function(){for(var a=["format"],u=0,c=this.sections;u<c.length;u+=1){var y=c[u];a.push(y.content.serialize());var w={};y.scale&&(w["font-scale"]=y.scale.serialize()),y.font&&(w["text-font"]=y.font.serialize()),y.textColor&&(w["text-color"]=y.textColor.serialize()),a.push(w)}return a};var Wn=function(a){this.type=ui,this.input=a};Wn.parse=function(a,u){if(2!==a.length)return u.error("Expected two arguments.");var c=u.parse(a[1],1,Ut);return c?new Wn(c):u.error("No image name provided.")},Wn.prototype.evaluate=function(a){var u=this.input.evaluate(a),c=ji.fromString(u);return c&&a.availableImages&&(c.available=a.availableImages.indexOf(u)>-1),c},Wn.prototype.eachChild=function(a){a(this.input)},Wn.prototype.outputDefined=function(){return!1},Wn.prototype.serialize=function(){return["image",this.input.serialize()]};var Qr={"to-boolean":Tt,"to-color":Gn,"to-number":St,"to-string":Ut},L=function(a,u){this.type=a,this.args=u};L.parse=function(a,u){if(a.length<2)return u.error("Expected at least one argument.");var c=a[0];if(("to-boolean"===c||"to-string"===c)&&2!==a.length)return u.error("Expected one argument.");for(var y=Qr[c],w=[],E=1;E<a.length;E++){var C=u.parse(a[E],E,ln);if(!C)return null;w.push(C)}return new L(y,w)},L.prototype.evaluate=function(a){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(a));if("color"===this.type.kind){for(var u,c,y=0,w=this.args;y<w.length;y+=1){if(c=null,(u=w[y].evaluate(a))instanceof er)return u;if("string"==typeof u){var E=a.parseColor(u);if(E)return E}else if(Array.isArray(u)&&!(c=u.length<3||u.length>4?"Invalid rbga value "+JSON.stringify(u)+": expected an array containing either three or four numeric values.":jr(u[0],u[1],u[2],u[3])))return new er(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new ri(c||"Could not parse color from value '"+("string"==typeof u?u:String(JSON.stringify(u)))+"'")}if("number"===this.type.kind){for(var C=null,N=0,$=this.args;N<$.length;N+=1){if(null===(C=$[N].evaluate(a)))return 0;var Q=Number(C);if(!isNaN(Q))return Q}throw new ri("Could not convert "+JSON.stringify(C)+" to number.")}return"formatted"===this.type.kind?or.fromString(La(this.args[0].evaluate(a))):"resolvedImage"===this.type.kind?ji.fromString(La(this.args[0].evaluate(a))):La(this.args[0].evaluate(a))},L.prototype.eachChild=function(a){this.args.forEach(a)},L.prototype.outputDefined=function(){return this.args.every(function(a){return a.outputDefined()})},L.prototype.serialize=function(){if("formatted"===this.type.kind)return new Ro([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Wn(this.args[0]).serialize();var a=["to-"+this.type.kind];return this.eachChild(function(u){a.push(u.serialize())}),a};var K=["Unknown","Point","LineString","Polygon"],de=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};de.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},de.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?K[this.feature.type]:this.feature.type:null},de.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},de.prototype.canonicalID=function(){return this.canonical},de.prototype.properties=function(){return this.feature&&this.feature.properties||{}},de.prototype.parseColor=function(a){var u=this._parseColorCache[a];return u||(u=this._parseColorCache[a]=er.parse(a)),u};var Ve=function(a,u,c,y){this.name=a,this.type=u,this._evaluate=c,this.args=y};Ve.prototype.evaluate=function(a){return this._evaluate(a,this.args)},Ve.prototype.eachChild=function(a){this.args.forEach(a)},Ve.prototype.outputDefined=function(){return!1},Ve.prototype.serialize=function(){return[this.name].concat(this.args.map(function(a){return a.serialize()}))},Ve.parse=function(a,u){var c,y=a[0],w=Ve.definitions[y];if(!w)return u.error('Unknown expression "'+y+'". If you wanted a literal array, use ["literal", [...]].',0);for(var E=Array.isArray(w)?w[0]:w.type,C=Array.isArray(w)?[[w[1],w[2]]]:w.overloads,N=C.filter(function(Rn){var an=Rn[0];return!Array.isArray(an)||an.length===a.length-1}),$=null,Q=0,ne=N;Q<ne.length;Q+=1){var re=ne[Q],le=re[0],me=re[1];$=new Ji(u.registry,u.path,null,u.scope);for(var Te=[],Pe=!1,We=1;We<a.length;We++){var Be=a[We],rt=Array.isArray(le)?le[We-1]:le.type,st=$.parse(Be,1+Te.length,rt);if(!st){Pe=!0;break}Te.push(st)}if(!Pe)if(Array.isArray(le)&&le.length!==Te.length)$.error("Expected "+le.length+" arguments, but found "+Te.length+" instead.");else{for(var ht=0;ht<Te.length;ht++){var gt=Array.isArray(le)?le[ht]:le.type,Dt=Te[ht];$.concat(ht+1).checkSubtype(gt,Dt.type)}if(0===$.errors.length)return new Ve(y,E,me,Te)}}if(1===N.length)(c=u.errors).push.apply(c,$.errors);else{for(var jt=(N.length?N:C).map(function(Rn){var an;return an=Rn[0],Array.isArray(an)?"("+an.map(Ir).join(", ")+")":"("+Ir(an.type)+"...)"}).join(" | "),Xt=[],vn=1;vn<a.length;vn++){var en=u.parse(a[vn],1+Xt.length);if(!en)return null;Xt.push(Ir(en.type))}u.error("Expected arguments of type "+jt+", but found ("+Xt.join(", ")+") instead.")}return null},Ve.register=function(a,u){for(var c in Ve.definitions=u,u)a[c]=Ve};var Qe=function(a,u,c){this.type=ni,this.locale=c,this.caseSensitive=a,this.diacriticSensitive=u};function tt(a,u){a[0]=Math.min(a[0],u[0]),a[1]=Math.min(a[1],u[1]),a[2]=Math.max(a[2],u[0]),a[3]=Math.max(a[3],u[1])}function dt(a,u){return!(a[0]<=u[0]||a[2]>=u[2]||a[1]<=u[1]||a[3]>=u[3])}function Vt(a,u){var c=(180+a[0])/360,y=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,w=Math.pow(2,u.z);return[Math.round(c*w*8192),Math.round(y*w*8192)]}function Rt(a,u,c){return u[1]>a[1]!=c[1]>a[1]&&a[0]<(c[0]-u[0])*(a[1]-u[1])/(c[1]-u[1])+u[0]}function cn(a,u){for(var c,y,w,E,C,N,$,Q=!1,ne=0,re=u.length;ne<re;ne++)for(var le=u[ne],me=0,Te=le.length;me<Te-1;me++){if((E=(c=a)[0]-(y=le[me])[0])*($=c[1]-(w=le[me+1])[1])-(N=c[0]-w[0])*(C=c[1]-y[1])==0&&E*N<=0&&C*$<=0)return!1;Rt(a,le[me],le[me+1])&&(Q=!Q)}return Q}function pt(a,u){for(var c=0;c<u.length;c++)if(cn(a,u[c]))return!0;return!1}function rn(a,u,c,y){var w=y[0]-c[0],E=y[1]-c[1],C=(a[0]-c[0])*E-w*(a[1]-c[1]),N=(u[0]-c[0])*E-w*(u[1]-c[1]);return C>0&&N<0||C<0&&N>0}function gn(a,u,c){for(var y=0,w=c;y<w.length;y+=1)for(var E=w[y],C=0;C<E.length-1;++C)if((re=[(ne=E[C+1])[0]-(Q=E[C])[0],ne[1]-Q[1]])[0]*(le=[($=u)[0]-(N=a)[0],$[1]-N[1]])[1]-re[1]*le[0]!=0&&rn(N,$,Q,ne)&&rn(Q,ne,N,$))return!0;var N,$,Q,ne,re,le;return!1}function Nn(a,u){for(var c=0;c<a.length;++c)if(!cn(a[c],u))return!1;for(var y=0;y<a.length-1;++y)if(gn(a[y],a[y+1],u))return!1;return!0}function kn(a,u){for(var c=0;c<u.length;c++)if(Nn(a,u[c]))return!0;return!1}function Li(a,u,c){for(var y=[],w=0;w<a.length;w++){for(var E=[],C=0;C<a[w].length;C++){var N=Vt(a[w][C],c);tt(u,N),E.push(N)}y.push(E)}return y}function At(a,u,c){for(var y=[],w=0;w<a.length;w++){var E=Li(a[w],u,c);y.push(E)}return y}function Qt(a,u,c,y){if(a[0]<c[0]||a[0]>c[2]){var w=.5*y,E=a[0]-c[0]>w?-y:c[0]-a[0]>w?y:0;0===E&&(E=a[0]-c[2]>w?-y:c[2]-a[0]>w?y:0),a[0]+=E}tt(u,a)}function On(a,u,c,y){for(var w=8192*Math.pow(2,y.z),E=[8192*y.x,8192*y.y],C=[],N=0,$=a;N<$.length;N+=1)for(var Q=0,ne=$[N];Q<ne.length;Q+=1){var re=ne[Q],le=[re.x+E[0],re.y+E[1]];Qt(le,u,c,w),C.push(le)}return C}function qr(a,u,c,y){for(var w,E=8192*Math.pow(2,y.z),C=[8192*y.x,8192*y.y],N=[],$=0,Q=a;$<Q.length;$+=1){for(var ne=[],re=0,le=Q[$];re<le.length;re+=1){var me=le[re],Te=[me.x+C[0],me.y+C[1]];tt(u,Te),ne.push(Te)}N.push(ne)}if(u[2]-u[0]<=E/2){(w=u)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(var Pe=0,We=N;Pe<We.length;Pe+=1)for(var Be=0,rt=We[Pe];Be<rt.length;Be+=1)Qt(rt[Be],u,c,E)}return N}Qe.parse=function(a,u){if(2!==a.length)return u.error("Expected one argument.");var c=a[1];if("object"!=typeof c||Array.isArray(c))return u.error("Collator options argument must be an object.");var y=u.parse(void 0!==c["case-sensitive"]&&c["case-sensitive"],1,Tt);if(!y)return null;var w=u.parse(void 0!==c["diacritic-sensitive"]&&c["diacritic-sensitive"],1,Tt);if(!w)return null;var E=null;return c.locale&&!(E=u.parse(c.locale,1,Ut))?null:new Qe(y,w,E)},Qe.prototype.evaluate=function(a){return new ua(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)},Qe.prototype.eachChild=function(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)},Qe.prototype.outputDefined=function(){return!1},Qe.prototype.serialize=function(){var a={};return a["case-sensitive"]=this.caseSensitive.serialize(),a["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(a.locale=this.locale.serialize()),["collator",a]};var zr=function(a,u){this.type=Tt,this.geojson=a,this.geometries=u};function Pn(a){if(a instanceof Ve&&("get"===a.name&&1===a.args.length||"feature-state"===a.name||"has"===a.name&&1===a.args.length||"properties"===a.name||"geometry-type"===a.name||"id"===a.name||/^filter-/.test(a.name))||a instanceof zr)return!1;var u=!0;return a.eachChild(function(c){u&&!Pn(c)&&(u=!1)}),u}function Zn(a){if(a instanceof Ve&&"feature-state"===a.name)return!1;var u=!0;return a.eachChild(function(c){u&&!Zn(c)&&(u=!1)}),u}function Ya(a,u){if(a instanceof Ve&&u.indexOf(a.name)>=0)return!1;var c=!0;return a.eachChild(function(y){c&&!Ya(y,u)&&(c=!1)}),c}zr.parse=function(a,u){if(2!==a.length)return u.error("'within' expression requires exactly one argument, but found "+(a.length-1)+" instead.");if(gs(a[1])){var c=a[1];if("FeatureCollection"===c.type)for(var y=0;y<c.features.length;++y){var w=c.features[y].geometry.type;if("Polygon"===w||"MultiPolygon"===w)return new zr(c,c.features[y].geometry)}else if("Feature"===c.type){var E=c.geometry.type;if("Polygon"===E||"MultiPolygon"===E)return new zr(c,c.geometry)}else if("Polygon"===c.type||"MultiPolygon"===c.type)return new zr(c,c)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")},zr.prototype.evaluate=function(a){if(null!=a.geometry()&&null!=a.canonicalID()){if("Point"===a.geometryType())return function(u,c){var y=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],E=u.canonicalID();if("Polygon"===c.type){var C=Li(c.coordinates,w,E),N=On(u.geometry(),y,w,E);if(!dt(y,w))return!1;for(var $=0,Q=N;$<Q.length;$+=1)if(!cn(Q[$],C))return!1}if("MultiPolygon"===c.type){var ne=At(c.coordinates,w,E),re=On(u.geometry(),y,w,E);if(!dt(y,w))return!1;for(var le=0,me=re;le<me.length;le+=1)if(!pt(me[le],ne))return!1}return!0}(a,this.geometries);if("LineString"===a.geometryType())return function(u,c){var y=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],E=u.canonicalID();if("Polygon"===c.type){var C=Li(c.coordinates,w,E),N=qr(u.geometry(),y,w,E);if(!dt(y,w))return!1;for(var $=0,Q=N;$<Q.length;$+=1)if(!Nn(Q[$],C))return!1}if("MultiPolygon"===c.type){var ne=At(c.coordinates,w,E),re=qr(u.geometry(),y,w,E);if(!dt(y,w))return!1;for(var le=0,me=re;le<me.length;le+=1)if(!kn(me[le],ne))return!1}return!0}(a,this.geometries)}return!1},zr.prototype.eachChild=function(){},zr.prototype.outputDefined=function(){return!0},zr.prototype.serialize=function(){return["within",this.geojson]};var Qn=function(a,u){this.type=u.type,this.name=a,this.boundExpression=u};Qn.parse=function(a,u){if(2!==a.length||"string"!=typeof a[1])return u.error("'var' expression requires exactly one string literal argument.");var c=a[1];return u.scope.has(c)?new Qn(c,u.scope.get(c)):u.error('Unknown variable "'+c+'". Make sure "'+c+'" has been bound in an enclosing "let" expression before using it.',1)},Qn.prototype.evaluate=function(a){return this.boundExpression.evaluate(a)},Qn.prototype.eachChild=function(){},Qn.prototype.outputDefined=function(){return!1},Qn.prototype.serialize=function(){return["var",this.name]};var Ji=function(a,u,c,y,w){void 0===u&&(u=[]),void 0===y&&(y=new Kt),void 0===w&&(w=[]),this.registry=a,this.path=u,this.key=u.map(function(E){return"["+E+"]"}).join(""),this.scope=y,this.errors=w,this.expectedType=c};function Vi(a,u){for(var c,y=a.length-1,w=0,E=y,C=0;w<=E;)if((c=a[C=Math.floor((w+E)/2)])<=u){if(C===y||u<a[C+1])return C;w=C+1}else{if(!(c>u))throw new ri("Input is not a number.");E=C-1}return 0}Ji.prototype.parse=function(a,u,c,y,w){return void 0===w&&(w={}),u?this.concat(u,c,y)._parse(a,w):this._parse(a,w)},Ji.prototype._parse=function(a,u){function c(Q,ne,re){return"assert"===re?new un(ne,[Q]):"coerce"===re?new L(ne,[Q]):Q}if(null!==a&&"string"!=typeof a&&"boolean"!=typeof a&&"number"!=typeof a||(a=["literal",a]),Array.isArray(a)){if(0===a.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var y=a[0];if("string"!=typeof y)return this.error("Expression name must be a string, but found "+typeof y+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var w=this.registry[y];if(w){var E=w.parse(a,this);if(!E)return null;if(this.expectedType){var C=this.expectedType,N=E.type;if("string"!==C.kind&&"number"!==C.kind&&"boolean"!==C.kind&&"object"!==C.kind&&"array"!==C.kind||"value"!==N.kind)if("color"!==C.kind&&"formatted"!==C.kind&&"resolvedImage"!==C.kind||"value"!==N.kind&&"string"!==N.kind){if(this.checkSubtype(C,N))return null}else E=c(E,C,u.typeAnnotation||"coerce");else E=c(E,C,u.typeAnnotation||"assert")}if(!(E instanceof Tn)&&"resolvedImage"!==E.type.kind&&function Q(ne){if(ne instanceof Qn)return Q(ne.boundExpression);if(ne instanceof Ve&&"error"===ne.name||ne instanceof Qe||ne instanceof zr)return!1;var re=ne instanceof L||ne instanceof un,le=!0;return ne.eachChild(function(me){le=re?le&&Q(me):le&&me instanceof Tn}),!!le&&Pn(ne)&&Ya(ne,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(E)){var $=new de;try{E=new Tn(E.type,E.evaluate($))}catch(Q){return this.error(Q.message),null}}return E}return this.error('Unknown expression "'+y+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===a?"'undefined' value invalid. Use null instead.":"object"==typeof a?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof a+" instead.")},Ji.prototype.concat=function(a,u,c){var y="number"==typeof a?this.path.concat(a):this.path,w=c?this.scope.concat(c):this.scope;return new Ji(this.registry,y,u||null,w,this.errors)},Ji.prototype.error=function(a){for(var u=[],c=arguments.length-1;c-- >0;)u[c]=arguments[c+1];var y=""+this.key+u.map(function(w){return"["+w+"]"}).join("");this.errors.push(new Jt(y,a))},Ji.prototype.checkSubtype=function(a,u){var c=xi(a,u);return c&&this.error(c),c};var ga=function(a,u,c){this.type=a,this.input=u,this.labels=[],this.outputs=[];for(var y=0,w=c;y<w.length;y+=1){var E=w[y],C=E[1];this.labels.push(E[0]),this.outputs.push(C)}};function Gi(a,u,c){return a*(1-c)+u*c}ga.parse=function(a,u){if(a.length-1<4)return u.error("Expected at least 4 arguments, but found only "+(a.length-1)+".");if((a.length-1)%2!=0)return u.error("Expected an even number of arguments.");var c=u.parse(a[1],1,St);if(!c)return null;var y=[],w=null;u.expectedType&&"value"!==u.expectedType.kind&&(w=u.expectedType);for(var E=1;E<a.length;E+=2){var C=1===E?-1/0:a[E],N=a[E+1],$=E,Q=E+1;if("number"!=typeof C)return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(y.length&&y[y.length-1][0]>=C)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',$);var ne=u.parse(N,Q,w);if(!ne)return null;w=w||ne.type,y.push([C,ne])}return new ga(w,c,y)},ga.prototype.evaluate=function(a){var u=this.labels,c=this.outputs;if(1===u.length)return c[0].evaluate(a);var y=this.input.evaluate(a);if(y<=u[0])return c[0].evaluate(a);var w=u.length;return y>=u[w-1]?c[w-1].evaluate(a):c[Vi(u,y)].evaluate(a)},ga.prototype.eachChild=function(a){a(this.input);for(var u=0,c=this.outputs;u<c.length;u+=1)a(c[u])},ga.prototype.outputDefined=function(){return this.outputs.every(function(a){return a.outputDefined()})},ga.prototype.serialize=function(){for(var a=["step",this.input.serialize()],u=0;u<this.labels.length;u++)u>0&&a.push(this.labels[u]),a.push(this.outputs[u].serialize());return a};var Re=Object.freeze({__proto__:null,number:Gi,color:function(a,u,c){return new er(Gi(a.r,u.r,c),Gi(a.g,u.g,c),Gi(a.b,u.b,c),Gi(a.a,u.a,c))},array:function(a,u,c){return a.map(function(y,w){return Gi(y,u[w],c)})}}),at=6/29*3*(6/29),Nt=Math.PI/180,_n=180/Math.PI;function bi(a){return a>.008856451679035631?Math.pow(a,1/3):a/at+4/29}function qt(a){return a>6/29?a*a*a:at*(a-4/29)}function Ei(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function Ki(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function gi(a){var u=Ki(a.r),c=Ki(a.g),y=Ki(a.b),w=bi((.4124564*u+.3575761*c+.1804375*y)/.95047),E=bi((.2126729*u+.7151522*c+.072175*y)/1);return{l:116*E-16,a:500*(w-E),b:200*(E-bi((.0193339*u+.119192*c+.9503041*y)/1.08883)),alpha:a.a}}function ii(a){var u=(a.l+16)/116,c=isNaN(a.a)?u:u+a.a/500,y=isNaN(a.b)?u:u-a.b/200;return u=1*qt(u),c=.95047*qt(c),y=1.08883*qt(y),new er(Ei(3.2404542*c-1.5371385*u-.4985314*y),Ei(-.969266*c+1.8760108*u+.041556*y),Ei(.0556434*c-.2040259*u+1.0572252*y),a.alpha)}function ya(a,u,c){var y=u-a;return a+c*(y>180||y<-180?y-360*Math.round(y/360):y)}var qi={forward:gi,reverse:ii,interpolate:function(a,u,c){return{l:Gi(a.l,u.l,c),a:Gi(a.a,u.a,c),b:Gi(a.b,u.b,c),alpha:Gi(a.alpha,u.alpha,c)}}},li={forward:function(a){var u=gi(a),c=u.l,y=u.a,w=u.b,E=Math.atan2(w,y)*_n;return{h:E<0?E+360:E,c:Math.sqrt(y*y+w*w),l:c,alpha:a.a}},reverse:function(a){var u=a.h*Nt,c=a.c;return ii({l:a.l,a:Math.cos(u)*c,b:Math.sin(u)*c,alpha:a.alpha})},interpolate:function(a,u,c){return{h:ya(a.h,u.h,c),c:Gi(a.c,u.c,c),l:Gi(a.l,u.l,c),alpha:Gi(a.alpha,u.alpha,c)}}},la=Object.freeze({__proto__:null,lab:qi,hcl:li}),ei=function(a,u,c,y,w){this.type=a,this.operator=u,this.interpolation=c,this.input=y,this.labels=[],this.outputs=[];for(var E=0,C=w;E<C.length;E+=1){var N=C[E],$=N[1];this.labels.push(N[0]),this.outputs.push($)}};function Yi(a,u,c,y){var w=y-c,E=a-c;return 0===w?0:1===u?E/w:(Math.pow(u,E)-1)/(Math.pow(u,w)-1)}ei.interpolationFactor=function(a,u,c,y){var w=0;if("exponential"===a.name)w=Yi(u,a.base,c,y);else if("linear"===a.name)w=Yi(u,1,c,y);else if("cubic-bezier"===a.name){var E=a.controlPoints;w=new G(E[0],E[1],E[2],E[3]).solve(Yi(u,1,c,y))}return w},ei.parse=function(a,u){var c=a[0],y=a[1],w=a[2],E=a.slice(3);if(!Array.isArray(y)||0===y.length)return u.error("Expected an interpolation type expression.",1);if("linear"===y[0])y={name:"linear"};else if("exponential"===y[0]){var C=y[1];if("number"!=typeof C)return u.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:C}}else{if("cubic-bezier"!==y[0])return u.error("Unknown interpolation type "+String(y[0]),1,0);var N=y.slice(1);if(4!==N.length||N.some(function(We){return"number"!=typeof We||We<0||We>1}))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:N}}if(a.length-1<4)return u.error("Expected at least 4 arguments, but found only "+(a.length-1)+".");if((a.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(!(w=u.parse(w,2,St)))return null;var $=[],Q=null;"interpolate-hcl"===c||"interpolate-lab"===c?Q=Gn:u.expectedType&&"value"!==u.expectedType.kind&&(Q=u.expectedType);for(var ne=0;ne<E.length;ne+=2){var re=E[ne],le=E[ne+1],me=ne+3,Te=ne+4;if("number"!=typeof re)return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',me);if($.length&&$[$.length-1][0]>=re)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',me);var Pe=u.parse(le,Te,Q);if(!Pe)return null;Q=Q||Pe.type,$.push([re,Pe])}return"number"===Q.kind||"color"===Q.kind||"array"===Q.kind&&"number"===Q.itemType.kind&&"number"==typeof Q.N?new ei(Q,c,y,w,$):u.error("Type "+Ir(Q)+" is not interpolatable.")},ei.prototype.evaluate=function(a){var u=this.labels,c=this.outputs;if(1===u.length)return c[0].evaluate(a);var y=this.input.evaluate(a);if(y<=u[0])return c[0].evaluate(a);var w=u.length;if(y>=u[w-1])return c[w-1].evaluate(a);var E=Vi(u,y),C=ei.interpolationFactor(this.interpolation,y,u[E],u[E+1]),N=c[E].evaluate(a),$=c[E+1].evaluate(a);return"interpolate"===this.operator?Re[this.type.kind.toLowerCase()](N,$,C):"interpolate-hcl"===this.operator?li.reverse(li.interpolate(li.forward(N),li.forward($),C)):qi.reverse(qi.interpolate(qi.forward(N),qi.forward($),C))},ei.prototype.eachChild=function(a){a(this.input);for(var u=0,c=this.outputs;u<c.length;u+=1)a(c[u])},ei.prototype.outputDefined=function(){return this.outputs.every(function(a){return a.outputDefined()})},ei.prototype.serialize=function(){var a;a="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var u=[this.operator,a,this.input.serialize()],c=0;c<this.labels.length;c++)u.push(this.labels[c],this.outputs[c].serialize());return u};var cr=function(a,u){this.type=a,this.args=u};cr.parse=function(a,u){if(a.length<2)return u.error("Expectected at least one argument.");var c=null,y=u.expectedType;y&&"value"!==y.kind&&(c=y);for(var w=[],E=0,C=a.slice(1);E<C.length;E+=1){var N=u.parse(C[E],1+w.length,c,void 0,{typeAnnotation:"omit"});if(!N)return null;c=c||N.type,w.push(N)}var $=y&&w.some(function(Q){return xi(y,Q.type)});return new cr($?ln:c,w)},cr.prototype.evaluate=function(a){for(var u,c=null,y=0,w=0,E=this.args;w<E.length&&(y++,(c=E[w].evaluate(a))&&c instanceof ji&&!c.available&&(u||(u=c.name),c=null,y===this.args.length&&(c=u)),null===c);w+=1);return c},cr.prototype.eachChild=function(a){this.args.forEach(a)},cr.prototype.outputDefined=function(){return this.args.every(function(a){return a.outputDefined()})},cr.prototype.serialize=function(){var a=["coalesce"];return this.eachChild(function(u){a.push(u.serialize())}),a};var Zo=function(a,u){this.type=u.type,this.bindings=[].concat(a),this.result=u};Zo.prototype.evaluate=function(a){return this.result.evaluate(a)},Zo.prototype.eachChild=function(a){for(var u=0,c=this.bindings;u<c.length;u+=1)a(c[u][1]);a(this.result)},Zo.parse=function(a,u){if(a.length<4)return u.error("Expected at least 3 arguments, but found "+(a.length-1)+" instead.");for(var c=[],y=1;y<a.length-1;y+=2){var w=a[y];if("string"!=typeof w)return u.error("Expected string, but found "+typeof w+" instead.",y);if(/[^a-zA-Z0-9_]/.test(w))return u.error("Variable names must contain only alphanumeric characters or '_'.",y);var E=u.parse(a[y+1],y+1);if(!E)return null;c.push([w,E])}var C=u.parse(a[a.length-1],a.length-1,u.expectedType,c);return C?new Zo(c,C):null},Zo.prototype.outputDefined=function(){return this.result.outputDefined()},Zo.prototype.serialize=function(){for(var a=["let"],u=0,c=this.bindings;u<c.length;u+=1){var y=c[u];a.push(y[0],y[1].serialize())}return a.push(this.result.serialize()),a};var Xa=function(a,u,c){this.type=a,this.index=u,this.input=c};Xa.parse=function(a,u){if(3!==a.length)return u.error("Expected 2 arguments, but found "+(a.length-1)+" instead.");var c=u.parse(a[1],1,St),y=u.parse(a[2],2,_i(u.expectedType||ln));return c&&y?new Xa(y.type.itemType,c,y):null},Xa.prototype.evaluate=function(a){var u=this.index.evaluate(a),c=this.input.evaluate(a);if(u<0)throw new ri("Array index out of bounds: "+u+" < 0.");if(u>=c.length)throw new ri("Array index out of bounds: "+u+" > "+(c.length-1)+".");if(u!==Math.floor(u))throw new ri("Array index must be an integer, but found "+u+" instead.");return c[u]},Xa.prototype.eachChild=function(a){a(this.index),a(this.input)},Xa.prototype.outputDefined=function(){return!1},Xa.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Jo=function(a,u){this.type=Tt,this.needle=a,this.haystack=u};Jo.parse=function(a,u){if(3!==a.length)return u.error("Expected 2 arguments, but found "+(a.length-1)+" instead.");var c=u.parse(a[1],1,ln),y=u.parse(a[2],2,ln);return c&&y?Hr(c.type,[Tt,Ut,St,mn,ln])?new Jo(c,y):u.error("Expected first argument to be of type boolean, string, number or null, but found "+Ir(c.type)+" instead"):null},Jo.prototype.evaluate=function(a){var u=this.needle.evaluate(a),c=this.haystack.evaluate(a);if(!c)return!1;if(!Mn(u,["boolean","string","number","null"]))throw new ri("Expected first argument to be of type boolean, string, number or null, but found "+Ir(Ui(u))+" instead.");if(!Mn(c,["string","array"]))throw new ri("Expected second argument to be of type array or string, but found "+Ir(Ui(c))+" instead.");return c.indexOf(u)>=0},Jo.prototype.eachChild=function(a){a(this.needle),a(this.haystack)},Jo.prototype.outputDefined=function(){return!0},Jo.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Tr=function(a,u,c){this.type=St,this.needle=a,this.haystack=u,this.fromIndex=c};Tr.parse=function(a,u){if(a.length<=2||a.length>=5)return u.error("Expected 3 or 4 arguments, but found "+(a.length-1)+" instead.");var c=u.parse(a[1],1,ln),y=u.parse(a[2],2,ln);if(!c||!y)return null;if(!Hr(c.type,[Tt,Ut,St,mn,ln]))return u.error("Expected first argument to be of type boolean, string, number or null, but found "+Ir(c.type)+" instead");if(4===a.length){var w=u.parse(a[3],3,St);return w?new Tr(c,y,w):null}return new Tr(c,y)},Tr.prototype.evaluate=function(a){var u=this.needle.evaluate(a),c=this.haystack.evaluate(a);if(!Mn(u,["boolean","string","number","null"]))throw new ri("Expected first argument to be of type boolean, string, number or null, but found "+Ir(Ui(u))+" instead.");if(!Mn(c,["string","array"]))throw new ri("Expected second argument to be of type array or string, but found "+Ir(Ui(c))+" instead.");if(this.fromIndex){var y=this.fromIndex.evaluate(a);return c.indexOf(u,y)}return c.indexOf(u)},Tr.prototype.eachChild=function(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)},Tr.prototype.outputDefined=function(){return!1},Tr.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var a=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),a]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Vs=function(a,u,c,y,w,E){this.inputType=a,this.type=u,this.input=c,this.cases=y,this.outputs=w,this.otherwise=E};Vs.parse=function(a,u){if(a.length<5)return u.error("Expected at least 4 arguments, but found only "+(a.length-1)+".");if(a.length%2!=1)return u.error("Expected an even number of arguments.");var c,y;u.expectedType&&"value"!==u.expectedType.kind&&(y=u.expectedType);for(var w={},E=[],C=2;C<a.length-1;C+=2){var N=a[C],$=a[C+1];Array.isArray(N)||(N=[N]);var Q=u.concat(C);if(0===N.length)return Q.error("Expected at least one branch label.");for(var ne=0,re=N;ne<re.length;ne+=1){var le=re[ne];if("number"!=typeof le&&"string"!=typeof le)return Q.error("Branch labels must be numbers or strings.");if("number"==typeof le&&Math.abs(le)>Number.MAX_SAFE_INTEGER)return Q.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof le&&Math.floor(le)!==le)return Q.error("Numeric branch labels must be integer values.");if(c){if(Q.checkSubtype(c,Ui(le)))return null}else c=Ui(le);if(void 0!==w[String(le)])return Q.error("Branch labels must be unique.");w[String(le)]=E.length}var me=u.parse($,C,y);if(!me)return null;y=y||me.type,E.push(me)}var Te=u.parse(a[1],1,ln);if(!Te)return null;var Pe=u.parse(a[a.length-1],a.length-1,y);return Pe?"value"!==Te.type.kind&&u.concat(1).checkSubtype(c,Te.type)?null:new Vs(c,y,Te,w,E,Pe):null},Vs.prototype.evaluate=function(a){var u=this.input.evaluate(a);return(Ui(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(a)},Vs.prototype.eachChild=function(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)},Vs.prototype.outputDefined=function(){return this.outputs.every(function(a){return a.outputDefined()})&&this.otherwise.outputDefined()},Vs.prototype.serialize=function(){for(var a=this,u=["match",this.input.serialize()],c=[],y={},w=0,E=Object.keys(this.cases).sort();w<E.length;w+=1){var C=E[w];void 0===(re=y[this.cases[C]])?(y[this.cases[C]]=c.length,c.push([this.cases[C],[C]])):c[re][1].push(C)}for(var N=function(me){return"number"===a.inputType.kind?Number(me):me},$=0,Q=c;$<Q.length;$+=1){var ne=Q[$],re=ne[0],le=ne[1];u.push(1===le.length?N(le[0]):le.map(N)),u.push(this.outputs[outputIndex$1].serialize())}return u.push(this.otherwise.serialize()),u};var nu=function(a,u,c){this.type=a,this.branches=u,this.otherwise=c};nu.parse=function(a,u){if(a.length<4)return u.error("Expected at least 3 arguments, but found only "+(a.length-1)+".");if(a.length%2!=0)return u.error("Expected an odd number of arguments.");var c;u.expectedType&&"value"!==u.expectedType.kind&&(c=u.expectedType);for(var y=[],w=1;w<a.length-1;w+=2){var E=u.parse(a[w],w,Tt);if(!E)return null;var C=u.parse(a[w+1],w+1,c);if(!C)return null;y.push([E,C]),c=c||C.type}var N=u.parse(a[a.length-1],a.length-1,c);return N?new nu(c,y,N):null},nu.prototype.evaluate=function(a){for(var u=0,c=this.branches;u<c.length;u+=1){var y=c[u],w=y[1];if(y[0].evaluate(a))return w.evaluate(a)}return this.otherwise.evaluate(a)},nu.prototype.eachChild=function(a){for(var u=0,c=this.branches;u<c.length;u+=1){var y=c[u],w=y[1];a(y[0]),a(w)}a(this.otherwise)},nu.prototype.outputDefined=function(){return this.branches.every(function(a){return a[1].outputDefined()})&&this.otherwise.outputDefined()},nu.prototype.serialize=function(){var a=["case"];return this.eachChild(function(u){a.push(u.serialize())}),a};var Gs=function(a,u,c,y){this.type=a,this.input=u,this.beginIndex=c,this.endIndex=y};function nc(a,u){return"=="===a||"!="===a?"boolean"===u.kind||"string"===u.kind||"number"===u.kind||"null"===u.kind||"value"===u.kind:"string"===u.kind||"number"===u.kind||"value"===u.kind}function Ur(a,u,c,y){return 0===y.compare(u,c)}function ca(a,u,c){var y="=="!==a&&"!="!==a;return function(){function w(E,C,N){this.type=Tt,this.lhs=E,this.rhs=C,this.collator=N,this.hasUntypedArgument="value"===E.type.kind||"value"===C.type.kind}return w.parse=function(E,C){if(3!==E.length&&4!==E.length)return C.error("Expected two or three arguments.");var N=E[0],$=C.parse(E[1],1,ln);if(!$)return null;if(!nc(N,$.type))return C.concat(1).error('"'+N+"\" comparisons are not supported for type '"+Ir($.type)+"'.");var Q=C.parse(E[2],2,ln);if(!Q)return null;if(!nc(N,Q.type))return C.concat(2).error('"'+N+"\" comparisons are not supported for type '"+Ir(Q.type)+"'.");if($.type.kind!==Q.type.kind&&"value"!==$.type.kind&&"value"!==Q.type.kind)return C.error("Cannot compare types '"+Ir($.type)+"' and '"+Ir(Q.type)+"'.");y&&("value"===$.type.kind&&"value"!==Q.type.kind?$=new un(Q.type,[$]):"value"!==$.type.kind&&"value"===Q.type.kind&&(Q=new un($.type,[Q])));var ne=null;if(4===E.length){if("string"!==$.type.kind&&"string"!==Q.type.kind&&"value"!==$.type.kind&&"value"!==Q.type.kind)return C.error("Cannot use collator to compare non-string types.");if(!(ne=C.parse(E[3],3,ni)))return null}return new w($,Q,ne)},w.prototype.evaluate=function(E){var C=this.lhs.evaluate(E),N=this.rhs.evaluate(E);if(y&&this.hasUntypedArgument){var $=Ui(C),Q=Ui(N);if($.kind!==Q.kind||"string"!==$.kind&&"number"!==$.kind)throw new ri('Expected arguments for "'+a+'" to be (string, string) or (number, number), but found ('+$.kind+", "+Q.kind+") instead.")}if(this.collator&&!y&&this.hasUntypedArgument){var ne=Ui(C),re=Ui(N);if("string"!==ne.kind||"string"!==re.kind)return u(E,C,N)}return this.collator?c(E,C,N,this.collator.evaluate(E)):u(E,C,N)},w.prototype.eachChild=function(E){E(this.lhs),E(this.rhs),this.collator&&E(this.collator)},w.prototype.outputDefined=function(){return!0},w.prototype.serialize=function(){var E=[a];return this.eachChild(function(C){E.push(C.serialize())}),E},w}()}Gs.parse=function(a,u){if(a.length<=2||a.length>=5)return u.error("Expected 3 or 4 arguments, but found "+(a.length-1)+" instead.");var c=u.parse(a[1],1,ln),y=u.parse(a[2],2,St);if(!c||!y)return null;if(!Hr(c.type,[_i(ln),Ut,ln]))return u.error("Expected first argument to be of type array or string, but found "+Ir(c.type)+" instead");if(4===a.length){var w=u.parse(a[3],3,St);return w?new Gs(c.type,c,y,w):null}return new Gs(c.type,c,y)},Gs.prototype.evaluate=function(a){var u=this.input.evaluate(a),c=this.beginIndex.evaluate(a);if(!Mn(u,["string","array"]))throw new ri("Expected first argument to be of type array or string, but found "+Ir(Ui(u))+" instead.");if(this.endIndex){var y=this.endIndex.evaluate(a);return u.slice(c,y)}return u.slice(c)},Gs.prototype.eachChild=function(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)},Gs.prototype.outputDefined=function(){return!1},Gs.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var a=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),a]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var ys=ca("==",function(a,u,c){return u===c},Ur),Rs=ca("!=",function(a,u,c){return u!==c},function(a,u,c,y){return!Ur(0,u,c,y)}),Cl=ca("<",function(a,u,c){return u<c},function(a,u,c,y){return y.compare(u,c)<0}),Hs=ca(">",function(a,u,c){return u>c},function(a,u,c,y){return y.compare(u,c)>0}),Mc=ca("<=",function(a,u,c){return u<=c},function(a,u,c,y){return y.compare(u,c)<=0}),rc=ca(">=",function(a,u,c){return u>=c},function(a,u,c,y){return y.compare(u,c)>=0}),jo=function(a,u,c,y,w){this.type=Ut,this.number=a,this.locale=u,this.currency=c,this.minFractionDigits=y,this.maxFractionDigits=w};jo.parse=function(a,u){if(3!==a.length)return u.error("Expected two arguments.");var c=u.parse(a[1],1,St);if(!c)return null;var y=a[2];if("object"!=typeof y||Array.isArray(y))return u.error("NumberFormat options argument must be an object.");var w=null;if(y.locale&&!(w=u.parse(y.locale,1,Ut)))return null;var E=null;if(y.currency&&!(E=u.parse(y.currency,1,Ut)))return null;var C=null;if(y["min-fraction-digits"]&&!(C=u.parse(y["min-fraction-digits"],1,St)))return null;var N=null;return y["max-fraction-digits"]&&!(N=u.parse(y["max-fraction-digits"],1,St))?null:new jo(c,w,E,C,N)},jo.prototype.evaluate=function(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))},jo.prototype.eachChild=function(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)},jo.prototype.outputDefined=function(){return!1},jo.prototype.serialize=function(){var a={};return this.locale&&(a.locale=this.locale.serialize()),this.currency&&(a.currency=this.currency.serialize()),this.minFractionDigits&&(a["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(a["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),a]};var ru=function(a){this.type=St,this.input=a};ru.parse=function(a,u){if(2!==a.length)return u.error("Expected 1 argument, but found "+(a.length-1)+" instead.");var c=u.parse(a[1],1);return c?"array"!==c.type.kind&&"string"!==c.type.kind&&"value"!==c.type.kind?u.error("Expected argument of type string or array, but found "+Ir(c.type)+" instead."):new ru(c):null},ru.prototype.evaluate=function(a){var u=this.input.evaluate(a);if("string"==typeof u||Array.isArray(u))return u.length;throw new ri("Expected value to be of type string or array, but found "+Ir(Ui(u))+" instead.")},ru.prototype.eachChild=function(a){a(this.input)},ru.prototype.outputDefined=function(){return!1},ru.prototype.serialize=function(){var a=["length"];return this.eachChild(function(u){a.push(u.serialize())}),a};var wu={"==":ys,"!=":Rs,">":Hs,"<":Cl,">=":rc,"<=":Mc,array:un,at:Xa,boolean:un,case:nu,coalesce:cr,collator:Qe,format:Ro,image:Wn,in:Jo,"index-of":Tr,interpolate:ei,"interpolate-hcl":ei,"interpolate-lab":ei,length:ru,let:Zo,literal:Tn,match:Vs,number:un,"number-format":jo,object:un,slice:Gs,step:ga,string:un,"to-boolean":L,"to-color":L,"to-number":L,"to-string":L,var:Qn,within:zr};function Ko(a,u){var c=u[0],y=u[1],w=u[2],E=u[3];c=c.evaluate(a),y=y.evaluate(a),w=w.evaluate(a);var C=E?E.evaluate(a):1,N=jr(c,y,w,C);if(N)throw new ri(N);return new er(c/255*C,y/255*C,w/255*C,C)}function va(a,u){return a in u}function ci(a,u){var c=u[a];return void 0===c?null:c}function lo(a){return{type:a}}function Eo(a){return{result:"success",value:a}}function Wi(a){return{result:"error",value:a}}function Yo(a){return"data-driven"===a["property-type"]||"cross-faded-data-driven"===a["property-type"]}function sn(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function Er(a){return!!a.expression&&a.expression.interpolated}function zn(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":null===a?"null":typeof a}function Xo(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}function xu(a){return a}function zi(a,u,c){return void 0!==a?a:void 0!==u?u:void 0!==c?c:void 0}function iu(a,u,c,y,w){return zi(typeof c===w?y[c]:void 0,a.default,u.default)}function Xi(a,u,c){if("number"!==zn(c))return zi(a.default,u.default);var y=a.stops.length;if(1===y||c<=a.stops[0][0])return a.stops[0][1];if(c>=a.stops[y-1][0])return a.stops[y-1][1];var w=Vi(a.stops.map(function(E){return E[0]}),c);return a.stops[w][1]}function $s(a,u,c){var y=void 0!==a.base?a.base:1;if("number"!==zn(c))return zi(a.default,u.default);var w=a.stops.length;if(1===w||c<=a.stops[0][0])return a.stops[0][1];if(c>=a.stops[w-1][0])return a.stops[w-1][1];var le,me,Pe,We,E=Vi(a.stops.map(function(re){return re[0]}),c),C=(le=y,We=c-(me=a.stops[E][0]),0==(Pe=a.stops[E+1][0]-me)?0:1===le?We/Pe:(Math.pow(le,We)-1)/(Math.pow(le,Pe)-1)),N=a.stops[E][1],$=a.stops[E+1][1],Q=Re[u.type]||xu;if(a.colorSpace&&"rgb"!==a.colorSpace){var ne=la[a.colorSpace];Q=function(re,le){return ne.reverse(ne.interpolate(ne.forward(re),ne.forward(le),C))}}return"function"==typeof N.evaluate?{evaluate:function(){for(var re=[],le=arguments.length;le--;)re[le]=arguments[le];var me=N.evaluate.apply(void 0,re),Te=$.evaluate.apply(void 0,re);if(void 0!==me&&void 0!==Te)return Q(me,Te,C)}}:Q(N,$,C)}function Eu(a,u,c){return"color"===u.type?c=er.parse(c):"formatted"===u.type?c=or.fromString(c.toString()):"resolvedImage"===u.type?c=ji.fromString(c.toString()):zn(c)===u.type||"enum"===u.type&&u.values[c]||(c=void 0),zi(c,a.default,u.default)}Ve.register(wu,{error:[{kind:"error"},[Ut],function(a,u){throw new ri(u[0].evaluate(a))}],typeof:[Ut,[ln],function(a,u){return Ir(Ui(u[0].evaluate(a)))}],"to-rgba":[_i(St,4),[Gn],function(a,u){return u[0].evaluate(a).toArray()}],rgb:[Gn,[St,St,St],Ko],rgba:[Gn,[St,St,St,St],Ko],has:{type:Tt,overloads:[[[Ut],function(a,u){return va(u[0].evaluate(a),a.properties())}],[[Ut,jn],function(a,u){var c=u[1];return va(u[0].evaluate(a),c.evaluate(a))}]]},get:{type:ln,overloads:[[[Ut],function(a,u){return ci(u[0].evaluate(a),a.properties())}],[[Ut,jn],function(a,u){var c=u[1];return ci(u[0].evaluate(a),c.evaluate(a))}]]},"feature-state":[ln,[Ut],function(a,u){return ci(u[0].evaluate(a),a.featureState||{})}],properties:[jn,[],function(a){return a.properties()}],"geometry-type":[Ut,[],function(a){return a.geometryType()}],id:[ln,[],function(a){return a.id()}],zoom:[St,[],function(a){return a.globals.zoom}],"heatmap-density":[St,[],function(a){return a.globals.heatmapDensity||0}],"line-progress":[St,[],function(a){return a.globals.lineProgress||0}],accumulated:[ln,[],function(a){return void 0===a.globals.accumulated?null:a.globals.accumulated}],"+":[St,lo(St),function(a,u){for(var c=0,y=0,w=u;y<w.length;y+=1)c+=w[y].evaluate(a);return c}],"*":[St,lo(St),function(a,u){for(var c=1,y=0,w=u;y<w.length;y+=1)c*=w[y].evaluate(a);return c}],"-":{type:St,overloads:[[[St,St],function(a,u){var c=u[1];return u[0].evaluate(a)-c.evaluate(a)}],[[St],function(a,u){return-u[0].evaluate(a)}]]},"/":[St,[St,St],function(a,u){var c=u[1];return u[0].evaluate(a)/c.evaluate(a)}],"%":[St,[St,St],function(a,u){var c=u[1];return u[0].evaluate(a)%c.evaluate(a)}],ln2:[St,[],function(){return Math.LN2}],pi:[St,[],function(){return Math.PI}],e:[St,[],function(){return Math.E}],"^":[St,[St,St],function(a,u){var c=u[1];return Math.pow(u[0].evaluate(a),c.evaluate(a))}],sqrt:[St,[St],function(a,u){return Math.sqrt(u[0].evaluate(a))}],log10:[St,[St],function(a,u){return Math.log(u[0].evaluate(a))/Math.LN10}],ln:[St,[St],function(a,u){return Math.log(u[0].evaluate(a))}],log2:[St,[St],function(a,u){return Math.log(u[0].evaluate(a))/Math.LN2}],sin:[St,[St],function(a,u){return Math.sin(u[0].evaluate(a))}],cos:[St,[St],function(a,u){return Math.cos(u[0].evaluate(a))}],tan:[St,[St],function(a,u){return Math.tan(u[0].evaluate(a))}],asin:[St,[St],function(a,u){return Math.asin(u[0].evaluate(a))}],acos:[St,[St],function(a,u){return Math.acos(u[0].evaluate(a))}],atan:[St,[St],function(a,u){return Math.atan(u[0].evaluate(a))}],min:[St,lo(St),function(a,u){return Math.min.apply(Math,u.map(function(c){return c.evaluate(a)}))}],max:[St,lo(St),function(a,u){return Math.max.apply(Math,u.map(function(c){return c.evaluate(a)}))}],abs:[St,[St],function(a,u){return Math.abs(u[0].evaluate(a))}],round:[St,[St],function(a,u){var c=u[0].evaluate(a);return c<0?-Math.round(-c):Math.round(c)}],floor:[St,[St],function(a,u){return Math.floor(u[0].evaluate(a))}],ceil:[St,[St],function(a,u){return Math.ceil(u[0].evaluate(a))}],"filter-==":[Tt,[Ut,ln],function(a,u){var c=u[0],y=u[1];return a.properties()[c.value]===y.value}],"filter-id-==":[Tt,[ln],function(a,u){var c=u[0];return a.id()===c.value}],"filter-type-==":[Tt,[Ut],function(a,u){var c=u[0];return a.geometryType()===c.value}],"filter-<":[Tt,[Ut,ln],function(a,u){var c=u[0],y=u[1],w=a.properties()[c.value],E=y.value;return typeof w==typeof E&&w<E}],"filter-id-<":[Tt,[ln],function(a,u){var c=u[0],y=a.id(),w=c.value;return typeof y==typeof w&&y<w}],"filter->":[Tt,[Ut,ln],function(a,u){var c=u[0],y=u[1],w=a.properties()[c.value],E=y.value;return typeof w==typeof E&&w>E}],"filter-id->":[Tt,[ln],function(a,u){var c=u[0],y=a.id(),w=c.value;return typeof y==typeof w&&y>w}],"filter-<=":[Tt,[Ut,ln],function(a,u){var c=u[0],y=u[1],w=a.properties()[c.value],E=y.value;return typeof w==typeof E&&w<=E}],"filter-id-<=":[Tt,[ln],function(a,u){var c=u[0],y=a.id(),w=c.value;return typeof y==typeof w&&y<=w}],"filter->=":[Tt,[Ut,ln],function(a,u){var c=u[0],y=u[1],w=a.properties()[c.value],E=y.value;return typeof w==typeof E&&w>=E}],"filter-id->=":[Tt,[ln],function(a,u){var c=u[0],y=a.id(),w=c.value;return typeof y==typeof w&&y>=w}],"filter-has":[Tt,[ln],function(a,u){return u[0].value in a.properties()}],"filter-has-id":[Tt,[],function(a){return null!==a.id()&&void 0!==a.id()}],"filter-type-in":[Tt,[_i(Ut)],function(a,u){return u[0].value.indexOf(a.geometryType())>=0}],"filter-id-in":[Tt,[_i(ln)],function(a,u){return u[0].value.indexOf(a.id())>=0}],"filter-in-small":[Tt,[Ut,_i(ln)],function(a,u){var c=u[0];return u[1].value.indexOf(a.properties()[c.value])>=0}],"filter-in-large":[Tt,[Ut,_i(ln)],function(a,u){var c=u[0],y=u[1];return function(w,E,C,N){for(;C<=N;){var $=C+N>>1;if(E[$]===w)return!0;E[$]>w?N=$-1:C=$+1}return!1}(a.properties()[c.value],y.value,0,y.value.length-1)}],all:{type:Tt,overloads:[[[Tt,Tt],function(a,u){var c=u[1];return u[0].evaluate(a)&&c.evaluate(a)}],[lo(Tt),function(a,u){for(var c=0,y=u;c<y.length;c+=1)if(!y[c].evaluate(a))return!1;return!0}]]},any:{type:Tt,overloads:[[[Tt,Tt],function(a,u){var c=u[1];return u[0].evaluate(a)||c.evaluate(a)}],[lo(Tt),function(a,u){for(var c=0,y=u;c<y.length;c+=1)if(y[c].evaluate(a))return!0;return!1}]]},"!":[Tt,[Tt],function(a,u){return!u[0].evaluate(a)}],"is-supported-script":[Tt,[Ut],function(a,u){var c=a.globals&&a.globals.isSupportedScript;return!c||c(u[0].evaluate(a))}],upcase:[Ut,[Ut],function(a,u){return u[0].evaluate(a).toUpperCase()}],downcase:[Ut,[Ut],function(a,u){return u[0].evaluate(a).toLowerCase()}],concat:[Ut,lo(ln),function(a,u){return u.map(function(c){return La(c.evaluate(a))}).join("")}],"resolved-locale":[Ut,[ni],function(a,u){return u[0].evaluate(a).resolvedLocale()}]});var ar=function(a,u){var c;this.expression=a,this._warningHistory={},this._evaluator=new de,this._defaultValue=u?"color"===(c=u).type&&Xo(c.default)?new er(0,0,0,0):"color"===c.type?er.parse(c.default)||null:void 0===c.default?null:c.default:null,this._enumValues=u&&"enum"===u.type?u.values:null};function Su(a){return Array.isArray(a)&&a.length>0&&"string"==typeof a[0]&&a[0]in wu}function ou(a,u){var w,E,c=new Ji(wu,[],u?(E={color:Gn,string:Ut,number:St,enum:Ut,boolean:Tt,formatted:En,resolvedImage:ui},"array"===(w=u).type?_i(E[w.value]||ln,w.length):E[w.type]):void 0),y=c.parse(a,void 0,void 0,void 0,u&&"string"===u.type?{typeAnnotation:"coerce"}:void 0);return y?Eo(new ar(y,u)):Wi(c.errors)}ar.prototype.evaluateWithoutErrorHandling=function(a,u,c,y,w,E){return this._evaluator.globals=a,this._evaluator.feature=u,this._evaluator.featureState=c,this._evaluator.canonical=y,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=E,this.expression.evaluate(this._evaluator)},ar.prototype.evaluate=function(a,u,c,y,w,E){this._evaluator.globals=a,this._evaluator.feature=u||null,this._evaluator.featureState=c||null,this._evaluator.canonical=y,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=E||null;try{var C=this.expression.evaluate(this._evaluator);if(null==C||"number"==typeof C&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new ri("Expected value to be one of "+Object.keys(this._enumValues).map(function(N){return JSON.stringify(N)}).join(", ")+", but found "+JSON.stringify(C)+" instead.");return C}catch(N){return this._warningHistory[N.message]||(this._warningHistory[N.message]=!0,typeof console<"u"&&console.warn(N.message)),this._defaultValue}};var it=function(a,u){this.kind=a,this._styleExpression=u,this.isStateDependent="constant"!==a&&!Zn(u.expression)};it.prototype.evaluateWithoutErrorHandling=function(a,u,c,y,w,E){return this._styleExpression.evaluateWithoutErrorHandling(a,u,c,y,w,E)},it.prototype.evaluate=function(a,u,c,y,w,E){return this._styleExpression.evaluate(a,u,c,y,w,E)};var vt=function(a,u,c,y){this.kind=a,this.zoomStops=c,this._styleExpression=u,this.isStateDependent="camera"!==a&&!Zn(u.expression),this.interpolationType=y};function Ht(a,u){if("error"===(a=ou(a,u)).result)return a;var c=a.value.expression,y=Pn(c);if(!y&&!Yo(u))return Wi([new Jt("","data expressions not supported")]);var w=Ya(c,["zoom"]);if(!w&&!sn(u))return Wi([new Jt("","zoom expressions not supported")]);var E=function C(N){var $=null;if(N instanceof Zo)$=C(N.result);else if(N instanceof cr)for(var Q=0,ne=N.args;Q<ne.length&&!($=C(ne[Q]));Q+=1);else(N instanceof ga||N instanceof ei)&&N.input instanceof Ve&&"zoom"===N.input.name&&($=N);return $ instanceof Jt||N.eachChild(function(re){var le=C(re);le instanceof Jt?$=le:!$&&le?$=new Jt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):$&&le&&$!==le&&($=new Jt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),$}(c);return E||w?E instanceof Jt?Wi([E]):E instanceof ei&&!Er(u)?Wi([new Jt("",'"interpolate" expressions cannot be used with this property')]):Eo(E?new vt(y?"camera":"composite",a.value,E.labels,E instanceof ei?E.interpolation:void 0):new it(y?"constant":"source",a.value)):Wi([new Jt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}vt.prototype.evaluateWithoutErrorHandling=function(a,u,c,y,w,E){return this._styleExpression.evaluateWithoutErrorHandling(a,u,c,y,w,E)},vt.prototype.evaluate=function(a,u,c,y,w,E){return this._styleExpression.evaluate(a,u,c,y,w,E)},vt.prototype.interpolationFactor=function(a,u,c){return this.interpolationType?ei.interpolationFactor(this.interpolationType,a,u,c):0};var Dn=function(a,u){this._parameters=a,this._specification=u,Ft(this,function c(y,w){var E,C,N,$="color"===w.type,Q=y.stops&&"object"==typeof y.stops[0][0],ne=Q||!(Q||void 0!==y.property),re=y.type||(Er(w)?"exponential":"interval");if($&&((y=Ft({},y)).stops&&(y.stops=y.stops.map(function(en){return[en[0],er.parse(en[1])]})),y.default=er.parse(y.default?y.default:w.default)),y.colorSpace&&"rgb"!==y.colorSpace&&!la[y.colorSpace])throw new Error("Unknown color space: "+y.colorSpace);if("exponential"===re)E=$s;else if("interval"===re)E=Xi;else if("categorical"===re){E=iu,C=Object.create(null);for(var le=0,me=y.stops;le<me.length;le+=1){var Te=me[le];C[Te[0]]=Te[1]}N=typeof y.stops[0][0]}else{if("identity"!==re)throw new Error('Unknown function type "'+re+'"');E=Eu}if(Q){for(var Pe={},We=[],Be=0;Be<y.stops.length;Be++){var rt=y.stops[Be],st=rt[0].zoom;void 0===Pe[st]&&(Pe[st]={zoom:st,type:y.type,property:y.property,default:y.default,stops:[]},We.push(st)),Pe[st].stops.push([rt[0].value,rt[1]])}for(var ht=[],gt=0,Dt=We;gt<Dt.length;gt+=1){var jt=Dt[gt];ht.push([Pe[jt].zoom,c(Pe[jt],w)])}var Xt={name:"linear"};return{kind:"composite",interpolationType:Xt,interpolationFactor:ei.interpolationFactor.bind(void 0,Xt),zoomStops:ht.map(function(en){return en[0]}),evaluate:function(en,Rn){var an=en.zoom;return $s({stops:ht,base:y.base},w,an).evaluate(an,Rn)}}}if(ne){var vn="exponential"===re?{name:"exponential",base:void 0!==y.base?y.base:1}:null;return{kind:"camera",interpolationType:vn,interpolationFactor:ei.interpolationFactor.bind(void 0,vn),zoomStops:y.stops.map(function(en){return en[0]}),evaluate:function(en){return E(y,w,en.zoom,C,N)}}}return{kind:"source",evaluate:function(en,Rn){var an=Rn&&Rn.properties?Rn.properties[y.property]:void 0;return void 0===an?zi(y.default,w.default):E(y,w,an,C,N)}}}(this._parameters,this._specification))};function Or(a){var u=a.key,c=a.value,y=a.valueSpec||{},w=a.objectElementValidators||{},E=a.style,C=a.styleSpec,N=[],$=zn(c);if("object"!==$)return[new Fe(u,c,"object expected, "+$+" found")];for(var Q in c){var ne=Q.split(".")[0],re=y[ne]||y["*"],le=void 0;if(w[ne])le=w[ne];else if(y[ne])le=_r;else if(w["*"])le=w["*"];else{if(!y["*"]){N.push(new Fe(u,c[Q],'unknown property "'+Q+'"'));continue}le=_r}N=N.concat(le({key:(u&&u+".")+Q,value:c[Q],valueSpec:re,style:E,styleSpec:C,object:c,objectKey:Q},c))}for(var me in y)w[me]||y[me].required&&void 0===y[me].default&&void 0===c[me]&&N.push(new Fe(u,c,'missing required property "'+me+'"'));return N}function dr(a){var u=a.value,c=a.valueSpec,y=a.style,w=a.styleSpec,E=a.key,C=a.arrayElementValidator||_r;if("array"!==zn(u))return[new Fe(E,u,"array expected, "+zn(u)+" found")];if(c.length&&u.length!==c.length)return[new Fe(E,u,"array length "+c.length+" expected, length "+u.length+" found")];if(c["min-length"]&&u.length<c["min-length"])return[new Fe(E,u,"array length at least "+c["min-length"]+" expected, length "+u.length+" found")];var N={type:c.value,values:c.values};w.$version<7&&(N.function=c.function),"object"===zn(c.value)&&(N=c.value);for(var $=[],Q=0;Q<u.length;Q++)$=$.concat(C({array:u,arrayIndex:Q,value:u[Q],valueSpec:N,style:y,styleSpec:w,key:E+"["+Q+"]"}));return $}function Ii(a){var u=a.key,c=a.value,y=a.valueSpec,w=zn(c);return"number"===w&&c!=c&&(w="NaN"),"number"!==w?[new Fe(u,c,"number expected, "+w+" found")]:"minimum"in y&&c<y.minimum?[new Fe(u,c,c+" is less than the minimum value "+y.minimum)]:"maximum"in y&&c>y.maximum?[new Fe(u,c,c+" is greater than the maximum value "+y.maximum)]:[]}function Qi(a){var u,c,y,w=a.valueSpec,E=ct(a.value.type),C={},N="categorical"!==E&&void 0===a.value.property,$=!N,Q="array"===zn(a.value.stops)&&"array"===zn(a.value.stops[0])&&"object"===zn(a.value.stops[0][0]),ne=Or({key:a.key,value:a.value,valueSpec:a.styleSpec.function,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(me){if("identity"===E)return[new Fe(me.key,me.value,'identity function may not have a "stops" property')];var Te=[],Pe=me.value;return Te=Te.concat(dr({key:me.key,value:Pe,valueSpec:me.valueSpec,style:me.style,styleSpec:me.styleSpec,arrayElementValidator:re})),"array"===zn(Pe)&&0===Pe.length&&Te.push(new Fe(me.key,Pe,"array must have at least one stop")),Te},default:function(me){return _r({key:me.key,value:me.value,valueSpec:w,style:me.style,styleSpec:me.styleSpec})}}});return"identity"===E&&N&&ne.push(new Fe(a.key,a.value,'missing required property "property"')),"identity"===E||a.value.stops||ne.push(new Fe(a.key,a.value,'missing required property "stops"')),"exponential"===E&&a.valueSpec.expression&&!Er(a.valueSpec)&&ne.push(new Fe(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&($&&!Yo(a.valueSpec)?ne.push(new Fe(a.key,a.value,"property functions not supported")):N&&!sn(a.valueSpec)&&ne.push(new Fe(a.key,a.value,"zoom functions not supported"))),"categorical"!==E&&!Q||void 0!==a.value.property||ne.push(new Fe(a.key,a.value,'"property" property is required')),ne;function re(me){var Te=[],Pe=me.value,We=me.key;if("array"!==zn(Pe))return[new Fe(We,Pe,"array expected, "+zn(Pe)+" found")];if(2!==Pe.length)return[new Fe(We,Pe,"array length 2 expected, length "+Pe.length+" found")];if(Q){if("object"!==zn(Pe[0]))return[new Fe(We,Pe,"object expected, "+zn(Pe[0])+" found")];if(void 0===Pe[0].zoom)return[new Fe(We,Pe,"object stop key must have zoom")];if(void 0===Pe[0].value)return[new Fe(We,Pe,"object stop key must have value")];if(y&&y>ct(Pe[0].zoom))return[new Fe(We,Pe[0].zoom,"stop zoom values must appear in ascending order")];ct(Pe[0].zoom)!==y&&(y=ct(Pe[0].zoom),c=void 0,C={}),Te=Te.concat(Or({key:We+"[0]",value:Pe[0],valueSpec:{zoom:{}},style:me.style,styleSpec:me.styleSpec,objectElementValidators:{zoom:Ii,value:le}}))}else Te=Te.concat(le({key:We+"[0]",value:Pe[0],valueSpec:{},style:me.style,styleSpec:me.styleSpec},Pe));return Su(Et(Pe[1]))?Te.concat([new Fe(We+"[1]",Pe[1],"expressions are not allowed in function stops.")]):Te.concat(_r({key:We+"[1]",value:Pe[1],valueSpec:w,style:me.style,styleSpec:me.styleSpec}))}function le(me,Te){var Pe=zn(me.value),We=ct(me.value),Be=null!==me.value?me.value:Te;if(u){if(Pe!==u)return[new Fe(me.key,Be,Pe+" stop domain type must match previous stop domain type "+u)]}else u=Pe;if("number"!==Pe&&"string"!==Pe&&"boolean"!==Pe)return[new Fe(me.key,Be,"stop domain value must be a number, string, or boolean")];if("number"!==Pe&&"categorical"!==E){var rt="number expected, "+Pe+" found";return Yo(w)&&void 0===E&&(rt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Fe(me.key,Be,rt)]}return"categorical"!==E||"number"!==Pe||isFinite(We)&&Math.floor(We)===We?"categorical"!==E&&"number"===Pe&&void 0!==c&&We<c?[new Fe(me.key,Be,"stop domain values must appear in ascending order")]:(c=We,"categorical"===E&&We in C?[new Fe(me.key,Be,"stop domain values must be unique")]:(C[We]=!0,[])):[new Fe(me.key,Be,"integer expected, found "+We)]}}function Ar(a){var u=("property"===a.expressionContext?Ht:ou)(Et(a.value),a.valueSpec);if("error"===u.result)return u.value.map(function(y){return new Fe(""+a.key+y.key,a.value,y.message)});var c=u.value.expression||u.value._styleExpression.expression;if("property"===a.expressionContext&&"text-font"===a.propertyKey&&!c.outputDefined())return[new Fe(a.key,a.value,'Invalid data expression for "'+a.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===a.expressionContext&&"layout"===a.propertyType&&!Zn(c))return[new Fe(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===a.expressionContext&&!Zn(c))return[new Fe(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&0===a.expressionContext.indexOf("cluster")){if(!Ya(c,["zoom","feature-state"]))return[new Fe(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===a.expressionContext&&!Pn(c))return[new Fe(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function eo(a){var u=a.key,c=a.value,y=a.valueSpec,w=[];return Array.isArray(y.values)?-1===y.values.indexOf(ct(c))&&w.push(new Fe(u,c,"expected one of ["+y.values.join(", ")+"], "+JSON.stringify(c)+" found")):-1===Object.keys(y.values).indexOf(ct(c))&&w.push(new Fe(u,c,"expected one of ["+Object.keys(y.values).join(", ")+"], "+JSON.stringify(c)+" found")),w}function to(a){if(!0===a||!1===a)return!0;if(!Array.isArray(a)||0===a.length)return!1;switch(a[0]){case"has":return a.length>=2&&"$id"!==a[1]&&"$type"!==a[1];case"in":return a.length>=3&&("string"!=typeof a[1]||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==a.length||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(var u=0,c=a.slice(1);u<c.length;u+=1){var y=c[u];if(!to(y)&&"boolean"!=typeof y)return!1}return!0;default:return!0}}Dn.deserialize=function(a){return new Dn(a._parameters,a._specification)},Dn.serialize=function(a){return{_parameters:a._parameters,_specification:a._specification}};var Qa={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Na(a){if(null==a)return{filter:function(){return!0},needGeometry:!1};to(a)||(a=_a(a));var u=ou(a,Qa);if("error"===u.result)throw new Error(u.value.map(function(c){return c.key+": "+c.message}).join(", "));return{filter:function(c,y,w){return u.value.evaluate(c,y,{},w)},needGeometry:function c(y){if(!Array.isArray(y))return!1;if("within"===y[0])return!0;for(var w=1;w<y.length;w++)if(c(y[w]))return!0;return!1}(a)}}function Mo(a,u){return a<u?-1:a>u?1:0}function _a(a){if(!a)return!0;var u,c=a[0];return a.length<=1?"any"!==c:"=="===c?ka(a[1],a[2],"=="):"!="===c?ho(ka(a[1],a[2],"==")):"<"===c||">"===c||"<="===c||">="===c?ka(a[1],a[2],c):"any"===c?(u=a.slice(1),["any"].concat(u.map(_a))):"all"===c?["all"].concat(a.slice(1).map(_a)):"none"===c?["all"].concat(a.slice(1).map(_a).map(ho)):"in"===c?So(a[1],a.slice(2)):"!in"===c?ho(So(a[1],a.slice(2))):"has"===c?Hu(a[1]):"!has"===c?ho(Hu(a[1])):"within"!==c||a}function ka(a,u,c){switch(a){case"$type":return["filter-type-"+c,u];case"$id":return["filter-id-"+c,u];default:return["filter-"+c,a,u]}}function So(a,u){if(0===u.length)return!1;switch(a){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some(function(c){return typeof c!=typeof u[0]})?["filter-in-large",a,["literal",u.sort(Mo)]]:["filter-in-small",a,["literal",u]]}}function Hu(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function ho(a){return["!",a]}function ba(a){return to(Et(a.value))?Ar(Ft({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function u(c){var y=c.value,w=c.key;if("array"!==zn(y))return[new Fe(w,y,"array expected, "+zn(y)+" found")];var E,C=c.styleSpec,N=[];if(y.length<1)return[new Fe(w,y,"filter array must have at least 1 element")];switch(N=N.concat(eo({key:w+"[0]",value:y[0],valueSpec:C.filter_operator,style:c.style,styleSpec:c.styleSpec})),ct(y[0])){case"<":case"<=":case">":case">=":y.length>=2&&"$type"===ct(y[1])&&N.push(new Fe(w,y,'"$type" cannot be use with operator "'+y[0]+'"'));case"==":case"!=":3!==y.length&&N.push(new Fe(w,y,'filter array for operator "'+y[0]+'" must have 3 elements'));case"in":case"!in":y.length>=2&&"string"!==(E=zn(y[1]))&&N.push(new Fe(w+"[1]",y[1],"string expected, "+E+" found"));for(var $=2;$<y.length;$++)E=zn(y[$]),"$type"===ct(y[1])?N=N.concat(eo({key:w+"["+$+"]",value:y[$],valueSpec:C.geometry_type,style:c.style,styleSpec:c.styleSpec})):"string"!==E&&"number"!==E&&"boolean"!==E&&N.push(new Fe(w+"["+$+"]",y[$],"string, number, or boolean expected, "+E+" found"));break;case"any":case"all":case"none":for(var Q=1;Q<y.length;Q++)N=N.concat(u({key:w+"["+Q+"]",value:y[Q],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":E=zn(y[1]),2!==y.length?N.push(new Fe(w,y,'filter array for "'+y[0]+'" operator must have 2 elements')):"string"!==E&&N.push(new Fe(w+"[1]",y[1],"string expected, "+E+" found"));break;case"within":E=zn(y[1]),2!==y.length?N.push(new Fe(w,y,'filter array for "'+y[0]+'" operator must have 2 elements')):"object"!==E&&N.push(new Fe(w+"[1]",y[1],"object expected, "+E+" found"))}return N}(a)}function Il(a,u){var c=a.key,y=a.style,w=a.styleSpec,E=a.value,C=a.objectKey,N=w[u+"_"+a.layerType];if(!N)return[];var $=C.match(/^(.*)-transition$/);if("paint"===u&&$&&N[$[1]]&&N[$[1]].transition)return _r({key:c,value:E,valueSpec:w.transition,style:y,styleSpec:w});var Q,ne=a.valueSpec||N[C];if(!ne)return[new Fe(c,E,'unknown property "'+C+'"')];if("string"===zn(E)&&Yo(ne)&&!ne.tokens&&(Q=/^{([^}]+)}$/.exec(E)))return[new Fe(c,E,'"'+C+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Q[1])+" }`.")];var re=[];return"symbol"===a.layerType&&("text-field"===C&&y&&!y.glyphs&&re.push(new Fe(c,E,'use of "text-field" requires a style "glyphs" property')),"text-font"===C&&Xo(Et(E))&&"identity"===ct(E.type)&&re.push(new Fe(c,E,'"text-font" does not support identity functions'))),re.concat(_r({key:a.key,value:E,valueSpec:ne,style:y,styleSpec:w,expressionContext:"property",propertyType:u,propertyKey:C}))}function Cu(a){return Il(a,"paint")}function yi(a){return Il(a,"layout")}function Rr(a){var u=[],c=a.value,y=a.key,w=a.style,E=a.styleSpec;c.type||c.ref||u.push(new Fe(y,c,'either "type" or "ref" is required'));var C,N=ct(c.type),$=ct(c.ref);if(c.id)for(var Q=ct(c.id),ne=0;ne<a.arrayIndex;ne++){var re=w.layers[ne];ct(re.id)===Q&&u.push(new Fe(y,c.id,'duplicate layer id "'+c.id+'", previously used at line '+re.id.__line__))}if("ref"in c)["type","source","source-layer","filter","layout"].forEach(function(Te){Te in c&&u.push(new Fe(y,c[Te],'"'+Te+'" is prohibited for ref layers'))}),w.layers.forEach(function(Te){ct(Te.id)===$&&(C=Te)}),C?C.ref?u.push(new Fe(y,c.ref,"ref cannot reference another ref layer")):N=ct(C.type):u.push(new Fe(y,c.ref,'ref layer "'+$+'" not found'));else if("background"!==N)if(c.source){var le=w.sources&&w.sources[c.source],me=le&&ct(le.type);le?"vector"===me&&"raster"===N?u.push(new Fe(y,c.source,'layer "'+c.id+'" requires a raster source')):"raster"===me&&"raster"!==N?u.push(new Fe(y,c.source,'layer "'+c.id+'" requires a vector source')):"vector"!==me||c["source-layer"]?"raster-dem"===me&&"hillshade"!==N?u.push(new Fe(y,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==N||!c.paint||!c.paint["line-gradient"]||"geojson"===me&&le.lineMetrics||u.push(new Fe(y,c,'layer "'+c.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):u.push(new Fe(y,c,'layer "'+c.id+'" must specify a "source-layer"')):u.push(new Fe(y,c.source,'source "'+c.source+'" not found'))}else u.push(new Fe(y,c,'missing required property "source"'));return u=u.concat(Or({key:y,value:c,valueSpec:E.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return _r({key:y+".type",value:c.type,valueSpec:E.layer.type,style:a.style,styleSpec:a.styleSpec,object:c,objectKey:"type"})},filter:ba,layout:function(Te){return Or({layer:c,key:Te.key,value:Te.value,style:Te.style,styleSpec:Te.styleSpec,objectElementValidators:{"*":function(Pe){return yi(Ft({layerType:N},Pe))}}})},paint:function(Te){return Or({layer:c,key:Te.key,value:Te.value,style:Te.style,styleSpec:Te.styleSpec,objectElementValidators:{"*":function(Pe){return Cu(Ft({layerType:N},Pe))}}})}}}))}function ti(a){var u=a.value,c=a.key,y=zn(u);return"string"!==y?[new Fe(c,u,"string expected, "+y+" found")]:[]}var qs={promoteId:function(a){var u=a.key,c=a.value;if("string"===zn(c))return ti({key:u,value:c});var y=[];for(var w in c)y.push.apply(y,ti({key:u+"."+w,value:c[w]}));return y}};function au(a){var u=a.value,c=a.key,y=a.styleSpec,w=a.style;if(!u.type)return[new Fe(c,u,'"type" is required')];var E,C=ct(u.type);switch(C){case"vector":case"raster":case"raster-dem":return Or({key:c,value:u,valueSpec:y["source_"+C.replace("-","_")],style:a.style,styleSpec:y,objectElementValidators:qs});case"geojson":if(E=Or({key:c,value:u,valueSpec:y.source_geojson,style:w,styleSpec:y,objectElementValidators:qs}),u.cluster)for(var N in u.clusterProperties){var $=u.clusterProperties[N],Q=$[0],ne="string"==typeof Q?[Q,["accumulated"],["get",N]]:Q;E.push.apply(E,Ar({key:c+"."+N+".map",value:$[1],expressionContext:"cluster-map"})),E.push.apply(E,Ar({key:c+"."+N+".reduce",value:ne,expressionContext:"cluster-reduce"}))}return E;case"video":return Or({key:c,value:u,valueSpec:y.source_video,style:w,styleSpec:y});case"image":return Or({key:c,value:u,valueSpec:y.source_image,style:w,styleSpec:y});case"canvas":return[new Fe(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return eo({key:c+".type",value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:w,styleSpec:y})}}function Oo(a){var u=a.value,c=a.styleSpec,y=c.light,w=a.style,E=[],C=zn(u);if(void 0===u)return E;if("object"!==C)return E.concat([new Fe("light",u,"object expected, "+C+" found")]);for(var N in u){var $=N.match(/^(.*)-transition$/);E=E.concat($&&y[$[1]]&&y[$[1]].transition?_r({key:N,value:u[N],valueSpec:c.transition,style:w,styleSpec:c}):y[N]?_r({key:N,value:u[N],valueSpec:y[N],style:w,styleSpec:c}):[new Fe(N,u[N],'unknown property "'+N+'"')])}return E}var kr={"*":function(){return[]},array:dr,boolean:function(a){var u=a.value,c=a.key,y=zn(u);return"boolean"!==y?[new Fe(c,u,"boolean expected, "+y+" found")]:[]},number:Ii,color:function(a){var u=a.key,c=a.value,y=zn(c);return"string"!==y?[new Fe(u,c,"color expected, "+y+" found")]:null===Oi(c)?[new Fe(u,c,'color expected, "'+c+'" found')]:[]},constants:Mt,enum:eo,filter:ba,function:Qi,layer:Rr,object:Or,source:au,light:Oo,string:ti,formatted:function(a){return 0===ti(a).length?[]:Ar(a)},resolvedImage:function(a){return 0===ti(a).length?[]:Ar(a)}};function _r(a){var u=a.value,c=a.valueSpec,y=a.styleSpec;return c.expression&&Xo(ct(u))?Qi(a):c.expression&&Su(Et(u))?Ar(a):c.type&&kr[c.type]?kr[c.type](a):Or(Ft({},a,{valueSpec:c.type?y[c.type]:c}))}function Ws(a){var u=a.value,c=a.key,y=ti(a);return y.length||(-1===u.indexOf("{fontstack}")&&y.push(new Fe(c,u,'"glyphs" url must include a "{fontstack}" token')),-1===u.indexOf("{range}")&&y.push(new Fe(c,u,'"glyphs" url must include a "{range}" token'))),y}function vs(a,u){void 0===u&&(u=Ee);var c=[];return c=c.concat(_r({key:"",value:a,valueSpec:u.$root,styleSpec:u,style:a,objectElementValidators:{glyphs:Ws,"*":function(){return[]}}})),a.constants&&(c=c.concat(Mt({key:"constants",value:a.constants,style:a,styleSpec:u}))),tl(c)}function tl(a){return[].concat(a).sort(function(u,c){return u.line-c.line})}function _s(a){return function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];return tl(a.apply(this,u))}}vs.source=_s(au),vs.light=_s(Oo),vs.layer=_s(Rr),vs.filter=_s(ba),vs.paintProperty=_s(Cu),vs.layoutProperty=_s(yi);var Tl=vs,Oc=Tl.light,nl=Tl.paintProperty,rl=Tl.layoutProperty;function $u(a,u){var c=!1;if(u&&u.length)for(var y=0,w=u;y<w.length;y+=1)a.fire(new Xe(new Error(w[y].message))),c=!0;return c}var Qo=wa;function wa(a,u,c){var y=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var w=new Int32Array(this.arrayBuffer);a=w[0],this.d=(u=w[1])+2*(c=w[2]);for(var E=0;E<this.d*this.d;E++){var C=w[3+E],N=w[3+E+1];y.push(C===N?null:w.subarray(C,N))}var $=w[3+y.length+1];this.keys=w.subarray(w[3+y.length],$),this.bboxes=w.subarray($),this.insert=this._insertReadonly}else{this.d=u+2*c;for(var Q=0;Q<this.d*this.d;Q++)y.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=a,this.padding=c,this.scale=u/a,this.uid=0;var ne=c/u*a;this.min=-ne,this.max=a+ne}wa.prototype.insert=function(a,u,c,y,w){this._forEachCell(u,c,y,w,this._insertCell,this.uid++),this.keys.push(a),this.bboxes.push(u),this.bboxes.push(c),this.bboxes.push(y),this.bboxes.push(w)},wa.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},wa.prototype._insertCell=function(a,u,c,y,w,E){this.cells[w].push(E)},wa.prototype.query=function(a,u,c,y,w){var E=this.min,C=this.max;if(a<=E&&u<=E&&C<=c&&C<=y&&!w)return Array.prototype.slice.call(this.keys);var N=[];return this._forEachCell(a,u,c,y,this._queryCell,N,{},w),N},wa.prototype._queryCell=function(a,u,c,y,w,E,C,N){var $=this.cells[w];if(null!==$)for(var Q=this.keys,ne=this.bboxes,re=0;re<$.length;re++){var le=$[re];if(void 0===C[le]){var me=4*le;(N?N(ne[me+0],ne[me+1],ne[me+2],ne[me+3]):a<=ne[me+2]&&u<=ne[me+3]&&c>=ne[me+0]&&y>=ne[me+1])?(C[le]=!0,E.push(Q[le])):C[le]=!1}}},wa.prototype._forEachCell=function(a,u,c,y,w,E,C,N){for(var $=this._convertToCellCoord(a),Q=this._convertToCellCoord(u),ne=this._convertToCellCoord(c),re=this._convertToCellCoord(y),le=$;le<=ne;le++)for(var me=Q;me<=re;me++){var Te=this.d*me+le;if((!N||N(this._convertFromCellCoord(le),this._convertFromCellCoord(me),this._convertFromCellCoord(le+1),this._convertFromCellCoord(me+1)))&&w.call(this,a,u,c,y,Te,E,C,N))return}},wa.prototype._convertFromCellCoord=function(a){return(a-this.padding)/this.scale},wa.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))},wa.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,u=3+this.cells.length+1+1,c=0,y=0;y<this.cells.length;y++)c+=this.cells[y].length;var w=new Int32Array(u+c+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;for(var E=u,C=0;C<a.length;C++){var N=a[C];w[3+C]=E,w.set(N,E),E+=N.length}return w[3+a.length]=E,w.set(this.keys,E),w[3+a.length+1]=E+=this.keys.length,w.set(this.bboxes,E),E+=this.bboxes.length,w.buffer};var ic=F.ImageData,Uo=F.ImageBitmap,Fa={};function dn(a,u,c){void 0===c&&(c={}),Object.defineProperty(u,"_classRegistryKey",{value:a,writeable:!1}),Fa[a]={klass:u,omit:c.omit||[],shallow:c.shallow||[]}}for(var Id in dn("Object",Object),Qo.serialize=function(a,u){var c=a.toArrayBuffer();return u&&u.push(c),{buffer:c}},Qo.deserialize=function(a){return new Qo(a.buffer)},dn("Grid",Qo),dn("Color",er),dn("Error",Error),dn("ResolvedImage",ji),dn("StylePropertyFunction",Dn),dn("StyleExpression",ar,{omit:["_evaluator"]}),dn("ZoomDependentExpression",vt),dn("ZoomConstantExpression",it),dn("CompoundExpression",Ve,{omit:["_evaluate"]}),wu)wu[Id]._classRegistryKey||dn("Expression_"+Id,wu[Id]);function Lc(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&"ArrayBuffer"===a.constructor.name)}function bs(a){return Uo&&a instanceof Uo}function ws(a,u){if(null==a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(Lc(a)||bs(a))return u&&u.push(a),a;if(ArrayBuffer.isView(a)){var c=a;return u&&u.push(c.buffer),c}if(a instanceof ic)return u&&u.push(a.data.buffer),a;if(Array.isArray(a)){for(var y=[],w=0,E=a;w<E.length;w+=1)y.push(ws(E[w],u));return y}if("object"==typeof a){var C=a.constructor,N=C._classRegistryKey;if(!N)throw new Error("can't serialize object of unregistered class");var $=C.serialize?C.serialize(a,u):{};if(!C.serialize){for(var Q in a)if(a.hasOwnProperty(Q)&&!(Fa[N].omit.indexOf(Q)>=0)){var ne=a[Q];$[Q]=Fa[N].shallow.indexOf(Q)>=0?ne:ws(ne,u)}a instanceof Error&&($.message=a.message)}if($.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==N&&($.$name=N),$}throw new Error("can't serialize object of type "+typeof a)}function su(a){if(null==a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||Lc(a)||bs(a)||ArrayBuffer.isView(a)||a instanceof ic)return a;if(Array.isArray(a))return a.map(su);if("object"==typeof a){var u=a.$name||"Object",c=Fa[u].klass;if(!c)throw new Error("can't deserialize unregistered class "+u);if(c.deserialize)return c.deserialize(a);for(var y=Object.create(c.prototype),w=0,E=Object.keys(a);w<E.length;w+=1){var C=E[w];if("$name"!==C){var N=a[C];y[C]=Fa[u].shallow.indexOf(C)>=0?N:su(N)}}return y}throw new Error("can't deserialize object of type "+typeof a)}var za=function(){this.first=!0};za.prototype.update=function(a,u){var c=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=c,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=c,!0):(this.lastFloorZoom>c?(this.lastIntegerZoom=c+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<c&&(this.lastIntegerZoom=c,this.lastIntegerZoomTime=u),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=c,!0))};var fn={"Latin-1 Supplement":function(a){return a>=128&&a<=255},Arabic:function(a){return a>=1536&&a<=1791},"Arabic Supplement":function(a){return a>=1872&&a<=1919},"Arabic Extended-A":function(a){return a>=2208&&a<=2303},"Hangul Jamo":function(a){return a>=4352&&a<=4607},"Unified Canadian Aboriginal Syllabics":function(a){return a>=5120&&a<=5759},Khmer:function(a){return a>=6016&&a<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(a){return a>=6320&&a<=6399},"General Punctuation":function(a){return a>=8192&&a<=8303},"Letterlike Symbols":function(a){return a>=8448&&a<=8527},"Number Forms":function(a){return a>=8528&&a<=8591},"Miscellaneous Technical":function(a){return a>=8960&&a<=9215},"Control Pictures":function(a){return a>=9216&&a<=9279},"Optical Character Recognition":function(a){return a>=9280&&a<=9311},"Enclosed Alphanumerics":function(a){return a>=9312&&a<=9471},"Geometric Shapes":function(a){return a>=9632&&a<=9727},"Miscellaneous Symbols":function(a){return a>=9728&&a<=9983},"Miscellaneous Symbols and Arrows":function(a){return a>=11008&&a<=11263},"CJK Radicals Supplement":function(a){return a>=11904&&a<=12031},"Kangxi Radicals":function(a){return a>=12032&&a<=12255},"Ideographic Description Characters":function(a){return a>=12272&&a<=12287},"CJK Symbols and Punctuation":function(a){return a>=12288&&a<=12351},Hiragana:function(a){return a>=12352&&a<=12447},Katakana:function(a){return a>=12448&&a<=12543},Bopomofo:function(a){return a>=12544&&a<=12591},"Hangul Compatibility Jamo":function(a){return a>=12592&&a<=12687},Kanbun:function(a){return a>=12688&&a<=12703},"Bopomofo Extended":function(a){return a>=12704&&a<=12735},"CJK Strokes":function(a){return a>=12736&&a<=12783},"Katakana Phonetic Extensions":function(a){return a>=12784&&a<=12799},"Enclosed CJK Letters and Months":function(a){return a>=12800&&a<=13055},"CJK Compatibility":function(a){return a>=13056&&a<=13311},"CJK Unified Ideographs Extension A":function(a){return a>=13312&&a<=19903},"Yijing Hexagram Symbols":function(a){return a>=19904&&a<=19967},"CJK Unified Ideographs":function(a){return a>=19968&&a<=40959},"Yi Syllables":function(a){return a>=40960&&a<=42127},"Yi Radicals":function(a){return a>=42128&&a<=42191},"Hangul Jamo Extended-A":function(a){return a>=43360&&a<=43391},"Hangul Syllables":function(a){return a>=44032&&a<=55215},"Hangul Jamo Extended-B":function(a){return a>=55216&&a<=55295},"Private Use Area":function(a){return a>=57344&&a<=63743},"CJK Compatibility Ideographs":function(a){return a>=63744&&a<=64255},"Arabic Presentation Forms-A":function(a){return a>=64336&&a<=65023},"Vertical Forms":function(a){return a>=65040&&a<=65055},"CJK Compatibility Forms":function(a){return a>=65072&&a<=65103},"Small Form Variants":function(a){return a>=65104&&a<=65135},"Arabic Presentation Forms-B":function(a){return a>=65136&&a<=65279},"Halfwidth and Fullwidth Forms":function(a){return a>=65280&&a<=65519}};function Td(a){for(var u=0,c=a;u<c.length;u+=1)if(Nc(c[u].charCodeAt(0)))return!0;return!1}function Nc(a){return!(746!==a&&747!==a&&(a<4352||!(fn["Bopomofo Extended"](a)||fn.Bopomofo(a)||fn["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||fn["CJK Compatibility Ideographs"](a)||fn["CJK Compatibility"](a)||fn["CJK Radicals Supplement"](a)||fn["CJK Strokes"](a)||!(!fn["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||12336===a)||fn["CJK Unified Ideographs Extension A"](a)||fn["CJK Unified Ideographs"](a)||fn["Enclosed CJK Letters and Months"](a)||fn["Hangul Compatibility Jamo"](a)||fn["Hangul Jamo Extended-A"](a)||fn["Hangul Jamo Extended-B"](a)||fn["Hangul Jamo"](a)||fn["Hangul Syllables"](a)||fn.Hiragana(a)||fn["Ideographic Description Characters"](a)||fn.Kanbun(a)||fn["Kangxi Radicals"](a)||fn["Katakana Phonetic Extensions"](a)||fn.Katakana(a)&&12540!==a||!(!fn["Halfwidth and Fullwidth Forms"](a)||65288===a||65289===a||65293===a||a>=65306&&a<=65310||65339===a||65341===a||65343===a||a>=65371&&a<=65503||65507===a||a>=65512&&a<=65519)||!(!fn["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||fn["Unified Canadian Aboriginal Syllabics"](a)||fn["Unified Canadian Aboriginal Syllabics Extended"](a)||fn["Vertical Forms"](a)||fn["Yijing Hexagram Symbols"](a)||fn["Yi Syllables"](a)||fn["Yi Radicals"](a))))}function Ms(a){return!(Nc(a)||(u=a,fn["Latin-1 Supplement"](u)&&(167===u||169===u||174===u||177===u||188===u||189===u||190===u||215===u||247===u)||fn["General Punctuation"](u)&&(8214===u||8224===u||8225===u||8240===u||8241===u||8251===u||8252===u||8258===u||8263===u||8264===u||8265===u||8273===u)||fn["Letterlike Symbols"](u)||fn["Number Forms"](u)||fn["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||9003===u||u>=9085&&u<=9114||u>=9150&&u<=9165||9167===u||u>=9169&&u<=9179||u>=9186&&u<=9215)||fn["Control Pictures"](u)&&9251!==u||fn["Optical Character Recognition"](u)||fn["Enclosed Alphanumerics"](u)||fn["Geometric Shapes"](u)||fn["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||fn["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||fn["CJK Symbols and Punctuation"](u)||fn.Katakana(u)||fn["Private Use Area"](u)||fn["CJK Compatibility Forms"](u)||fn["Small Form Variants"](u)||fn["Halfwidth and Fullwidth Forms"](u)||8734===u||8756===u||8757===u||u>=9984&&u<=10087||u>=10102&&u<=10131||65532===u||65533===u));var u}function es(a){return a>=1424&&a<=2303||fn["Arabic Presentation Forms-A"](a)||fn["Arabic Presentation Forms-B"](a)}function oc(a,u){return!(!u&&es(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||fn.Khmer(a))}function Ph(a){for(var u=0,c=a;u<c.length;u+=1)if(es(c[u].charCodeAt(0)))return!0;return!1}var xs=null,xa="unavailable",il=null,ac=function(a){a&&"string"==typeof a&&a.indexOf("NetworkError")>-1&&(xa="error"),xs&&xs(a)};function gf(){Dh.fire(new $e("pluginStateChange",{pluginStatus:xa,pluginURL:il}))}var Dh=new He,Ti=function(){return xa},Ah=function(){if("deferred"!==xa||!il)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");xa="loading",gf(),il&&Br({url:il},function(a){a?ac(a):(xa="loaded",gf())})},no={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===xa||null!=no.applyArabicShaping},isLoading:function(){return"loading"===xa},setState:function(a){xa=a.pluginStatus,il=a.pluginURL},isParsed:function(){return null!=no.applyArabicShaping&&null!=no.processBidirectionalText&&null!=no.processStyledBidirectionalText},getPluginURL:function(){return il}},Wr=function(a,u){this.zoom=a,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new za,this.transition={})};Wr.prototype.isSupportedScript=function(a){return function(u,c){for(var y=0,w=u;y<w.length;y+=1)if(!oc(w[y].charCodeAt(0),c))return!1;return!0}(a,no.isLoaded())},Wr.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Wr.prototype.getCrossfadeParameters=function(){var a=this.zoom,u=a-Math.floor(a),c=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*c}:{fromScale:.5,toScale:1,t:1-(1-c)*u}};var po=function(a,u){this.property=a,this.value=u,this.expression=function(c,y){if(Xo(c))return new Dn(c,y);if(Su(c)){var w=Ht(c,y);if("error"===w.result)throw new Error(w.value.map(function(C){return C.key+": "+C.message}).join(", "));return w.value}var E=c;return"string"==typeof c&&"color"===y.type&&(E=er.parse(c)),{kind:"constant",evaluate:function(){return E}}}(void 0===u?a.specification.default:u,a.specification)};po.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},po.prototype.possiblyEvaluate=function(a,u,c){return this.property.possiblyEvaluate(this,a,u,c)};var Es=function(a){this.property=a,this.value=new po(a,void 0)};Es.prototype.transitioned=function(a,u){return new Zs(this.property,this.value,u,be({},a.transition,this.transition),a.now)},Es.prototype.untransitioned=function(){return new Zs(this.property,this.value,null,{},0)};var ts=function(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)};ts.prototype.getValue=function(a){return Ue(this._values[a].value.value)},ts.prototype.setValue=function(a,u){this._values.hasOwnProperty(a)||(this._values[a]=new Es(this._values[a].property)),this._values[a].value=new po(this._values[a].property,null===u?void 0:Ue(u))},ts.prototype.getTransition=function(a){return Ue(this._values[a].transition)},ts.prototype.setTransition=function(a,u){this._values.hasOwnProperty(a)||(this._values[a]=new Es(this._values[a].property)),this._values[a].transition=Ue(u)||void 0},ts.prototype.serialize=function(){for(var a={},u=0,c=Object.keys(this._values);u<c.length;u+=1){var y=c[u],w=this.getValue(y);void 0!==w&&(a[y]=w);var E=this.getTransition(y);void 0!==E&&(a[y+"-transition"]=E)}return a},ts.prototype.transitioned=function(a,u){for(var c=new Co(this._properties),y=0,w=Object.keys(this._values);y<w.length;y+=1){var E=w[y];c._values[E]=this._values[E].transitioned(a,u._values[E])}return c},ts.prototype.untransitioned=function(){for(var a=new Co(this._properties),u=0,c=Object.keys(this._values);u<c.length;u+=1){var y=c[u];a._values[y]=this._values[y].untransitioned()}return a};var Zs=function(a,u,c,y,w){this.property=a,this.value=u,this.begin=w+y.delay||0,this.end=this.begin+y.duration||0,a.specification.transition&&(y.delay||y.duration)&&(this.prior=c)};Zs.prototype.possiblyEvaluate=function(a,u,c){var y=a.now||0,w=this.value.possiblyEvaluate(a,u,c),E=this.prior;if(E){if(y>this.end)return this.prior=null,w;if(this.value.isDataDriven())return this.prior=null,w;if(y<this.begin)return E.possiblyEvaluate(a,u,c);var C=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(E.possiblyEvaluate(a,u,c),w,function(N){if(N<=0)return 0;if(N>=1)return 1;var $=N*N,Q=$*N;return 4*(N<.5?Q:3*(N-$)+Q-.75)}(C))}return w};var Co=function(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)};Co.prototype.possiblyEvaluate=function(a,u,c){for(var y=new Pl(this._properties),w=0,E=Object.keys(this._values);w<E.length;w+=1){var C=E[w];y._values[C]=this._values[C].possiblyEvaluate(a,u,c)}return y},Co.prototype.hasTransition=function(){for(var a=0,u=Object.keys(this._values);a<u.length;a+=1)if(this._values[u[a]].prior)return!0;return!1};var qu=function(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)};qu.prototype.getValue=function(a){return Ue(this._values[a].value)},qu.prototype.setValue=function(a,u){this._values[a]=new po(this._values[a].property,null===u?void 0:Ue(u))},qu.prototype.serialize=function(){for(var a={},u=0,c=Object.keys(this._values);u<c.length;u+=1){var y=c[u],w=this.getValue(y);void 0!==w&&(a[y]=w)}return a},qu.prototype.possiblyEvaluate=function(a,u,c){for(var y=new Pl(this._properties),w=0,E=Object.keys(this._values);w<E.length;w+=1){var C=E[w];y._values[C]=this._values[C].possiblyEvaluate(a,u,c)}return y};var ns=function(a,u,c){this.property=a,this.value=u,this.parameters=c};ns.prototype.isConstant=function(){return"constant"===this.value.kind},ns.prototype.constantOr=function(a){return"constant"===this.value.kind?this.value.value:a},ns.prototype.evaluate=function(a,u,c,y){return this.property.evaluate(this.value,this.parameters,a,u,c,y)};var Pl=function(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)};Pl.prototype.get=function(a){return this._values[a]};var Yt=function(a){this.specification=a};Yt.prototype.possiblyEvaluate=function(a,u){return a.expression.evaluate(u)},Yt.prototype.interpolate=function(a,u,c){var y=Re[this.specification.type];return y?y(a,u,c):a};var Un=function(a,u){this.specification=a,this.overrides=u};Un.prototype.possiblyEvaluate=function(a,u,c,y){return new ns(this,"constant"===a.expression.kind||"camera"===a.expression.kind?{kind:"constant",value:a.expression.evaluate(u,null,{},c,y)}:a.expression,u)},Un.prototype.interpolate=function(a,u,c){if("constant"!==a.value.kind||"constant"!==u.value.kind)return a;if(void 0===a.value.value||void 0===u.value.value)return new ns(this,{kind:"constant",value:void 0},a.parameters);var y=Re[this.specification.type];return y?new ns(this,{kind:"constant",value:y(a.value.value,u.value.value,c)},a.parameters):a},Un.prototype.evaluate=function(a,u,c,y,w,E){return"constant"===a.kind?a.value:a.evaluate(u,c,y,w,E)};var Ba=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.possiblyEvaluate=function(c,y,w,E){if(void 0===c.value)return new ns(this,{kind:"constant",value:void 0},y);if("constant"===c.expression.kind){var C=c.expression.evaluate(y,null,{},w,E),N="resolvedImage"===c.property.specification.type&&"string"!=typeof C?C.name:C,$=this._calculate(N,N,N,y);return new ns(this,{kind:"constant",value:$},y)}if("camera"===c.expression.kind){var Q=this._calculate(c.expression.evaluate({zoom:y.zoom-1}),c.expression.evaluate({zoom:y.zoom}),c.expression.evaluate({zoom:y.zoom+1}),y);return new ns(this,{kind:"constant",value:Q},y)}return new ns(this,c.expression,y)},u.prototype.evaluate=function(c,y,w,E,C,N){if("source"===c.kind){var $=c.evaluate(y,w,E,C,N);return this._calculate($,$,$,y)}return"composite"===c.kind?this._calculate(c.evaluate({zoom:Math.floor(y.zoom)-1},w,E),c.evaluate({zoom:Math.floor(y.zoom)},w,E),c.evaluate({zoom:Math.floor(y.zoom)+1},w,E),y):c.value},u.prototype._calculate=function(c,y,w,E){return E.zoom>E.zoomHistory.lastIntegerZoom?{from:c,to:y}:{from:w,to:y}},u.prototype.interpolate=function(c){return c},u}(Un),Jn=function(a){this.specification=a};Jn.prototype.possiblyEvaluate=function(a,u,c,y){if(void 0!==a.value){if("constant"===a.expression.kind){var w=a.expression.evaluate(u,null,{},c,y);return this._calculate(w,w,w,u)}return this._calculate(a.expression.evaluate(new Wr(Math.floor(u.zoom-1),u)),a.expression.evaluate(new Wr(Math.floor(u.zoom),u)),a.expression.evaluate(new Wr(Math.floor(u.zoom+1),u)),u)}},Jn.prototype._calculate=function(a,u,c,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:a,to:u}:{from:c,to:u}},Jn.prototype.interpolate=function(a){return a};var Iu=function(a){this.specification=a};Iu.prototype.possiblyEvaluate=function(a,u,c,y){return!!a.expression.evaluate(u,null,{},c,y)},Iu.prototype.interpolate=function(){return!1};var Os=function(a){for(var u in this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],a){var c=a[u];c.specification.overridable&&this.overridableProperties.push(u);var y=this.defaultPropertyValues[u]=new po(c,void 0),w=this.defaultTransitionablePropertyValues[u]=new Es(c);this.defaultTransitioningPropertyValues[u]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=y.possiblyEvaluate({})}};dn("DataDrivenProperty",Un),dn("DataConstantProperty",Yt),dn("CrossFadedDataDrivenProperty",Ba),dn("CrossFadedProperty",Jn),dn("ColorRampProperty",Iu);var Js=function(a){function u(c,y){if(a.call(this),this.id=c.id,this.type=c.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==c.type&&(this.metadata=c.metadata,this.minzoom=c.minzoom,this.maxzoom=c.maxzoom,"background"!==c.type&&(this.source=c.source,this.sourceLayer=c["source-layer"],this.filter=c.filter),y.layout&&(this._unevaluatedLayout=new qu(y.layout)),y.paint)){for(var w in this._transitionablePaint=new ts(y.paint),c.paint)this.setPaintProperty(w,c.paint[w],{validate:!1});for(var E in c.layout)this.setLayoutProperty(E,c.layout[E],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Pl(y.paint)}}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},u.prototype.getLayoutProperty=function(c){return"visibility"===c?this.visibility:this._unevaluatedLayout.getValue(c)},u.prototype.setLayoutProperty=function(c,y,w){void 0===w&&(w={}),null!=y&&this._validate(rl,"layers."+this.id+".layout."+c,c,y,w)||("visibility"!==c?this._unevaluatedLayout.setValue(c,y):this.visibility=y)},u.prototype.getPaintProperty=function(c){return Ke(c,"-transition")?this._transitionablePaint.getTransition(c.slice(0,-11)):this._transitionablePaint.getValue(c)},u.prototype.setPaintProperty=function(c,y,w){if(void 0===w&&(w={}),null!=y&&this._validate(nl,"layers."+this.id+".paint."+c,c,y,w))return!1;if(Ke(c,"-transition"))return this._transitionablePaint.setTransition(c.slice(0,-11),y||void 0),!1;var E=this._transitionablePaint._values[c],C="cross-faded-data-driven"===E.property.specification["property-type"],N=E.value.isDataDriven(),$=E.value;this._transitionablePaint.setValue(c,y),this._handleSpecialPaintPropertyUpdate(c);var Q=this._transitionablePaint._values[c].value;return Q.isDataDriven()||N||C||this._handleOverridablePaintPropertyUpdate(c,$,Q)},u.prototype._handleSpecialPaintPropertyUpdate=function(c){},u.prototype._handleOverridablePaintPropertyUpdate=function(c,y,w){return!1},u.prototype.isHidden=function(c){return!!(this.minzoom&&c<this.minzoom)||!!(this.maxzoom&&c>=this.maxzoom)||"none"===this.visibility},u.prototype.updateTransitions=function(c){this._transitioningPaint=this._transitionablePaint.transitioned(c,this._transitioningPaint)},u.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},u.prototype.recalculate=function(c,y){c.getCrossfadeParameters&&(this._crossfadeParameters=c.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(c,void 0,y)),this.paint=this._transitioningPaint.possiblyEvaluate(c,void 0,y)},u.prototype.serialize=function(){var c={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(c.layout=c.layout||{},c.layout.visibility=this.visibility),It(c,function(y,w){return!(void 0===y||"layout"===w&&!Object.keys(y).length||"paint"===w&&!Object.keys(y).length)})},u.prototype._validate=function(c,y,w,E,C){return void 0===C&&(C={}),(!C||!1!==C.validate)&&$u(this,c.call(Tl,{key:y,layerType:this.type,objectKey:w,value:E,styleSpec:Ee,style:{glyphs:!0,sprite:!0}}))},u.prototype.is3D=function(){return!1},u.prototype.isTileClipped=function(){return!1},u.prototype.hasOffscreenPass=function(){return!1},u.prototype.resize=function(){},u.prototype.isStateDependent=function(){for(var c in this.paint._values){var y=this.paint.get(c);if(y instanceof ns&&Yo(y.property.specification)&&("source"===y.value.kind||"composite"===y.value.kind)&&y.value.isStateDependent)return!0}return!1},u}(He),um={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Wu=function(a,u){this._structArray=a,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Pi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function ea(a,u){void 0===u&&(u=1);var c=0,y=0;return{members:a.map(function(w){var E=um[w.type].BYTES_PER_ELEMENT,C=c=yf(c,Math.max(u,E)),N=w.components||1;return y=Math.max(y,E),c+=E*N,{name:w.name,type:w.type,components:N,offset:C}}),size:yf(c,Math.max(y,u)),alignment:u}}function yf(a,u){return Math.ceil(a/u)*u}Pi.serialize=function(a,u){return a._trim(),u&&(a.isTransferred=!0,u.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}},Pi.deserialize=function(a){var u=Object.create(this.prototype);return u.arrayBuffer=a.arrayBuffer,u.length=a.length,u.capacity=a.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u},Pi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Pi.prototype.clear=function(){this.length=0},Pi.prototype.resize=function(a){this.reserve(a),this.length=a},Pi.prototype.reserve=function(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}},Pi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var zt=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(c,y){var w=this.length;return this.resize(w+1),this.emplace(w,c,y)},u.prototype.emplace=function(c,y,w){var E=2*c;return this.int16[E+0]=y,this.int16[E+1]=w,c},u}(Pi);zt.prototype.bytesPerElement=4,dn("StructArrayLayout2i4",zt);var Lr=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(c,y,w,E){var C=this.length;return this.resize(C+1),this.emplace(C,c,y,w,E)},u.prototype.emplace=function(c,y,w,E,C){var N=4*c;return this.int16[N+0]=y,this.int16[N+1]=w,this.int16[N+2]=E,this.int16[N+3]=C,c},u}(Pi);Lr.prototype.bytesPerElement=8,dn("StructArrayLayout4i8",Lr);var Ss=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(c,y,w,E,C,N){var $=this.length;return this.resize($+1),this.emplace($,c,y,w,E,C,N)},u.prototype.emplace=function(c,y,w,E,C,N,$){var Q=6*c;return this.int16[Q+0]=y,this.int16[Q+1]=w,this.int16[Q+2]=E,this.int16[Q+3]=C,this.int16[Q+4]=N,this.int16[Q+5]=$,c},u}(Pi);Ss.prototype.bytesPerElement=12,dn("StructArrayLayout2i4i12",Ss);var Pd=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(c,y,w,E,C,N){var $=this.length;return this.resize($+1),this.emplace($,c,y,w,E,C,N)},u.prototype.emplace=function(c,y,w,E,C,N,$){var Q=4*c,ne=8*c;return this.int16[Q+0]=y,this.int16[Q+1]=w,this.uint8[ne+4]=E,this.uint8[ne+5]=C,this.uint8[ne+6]=N,this.uint8[ne+7]=$,c},u}(Pi);Pd.prototype.bytesPerElement=8,dn("StructArrayLayout2i4ub8",Pd);var ro=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(c,y){var w=this.length;return this.resize(w+1),this.emplace(w,c,y)},u.prototype.emplace=function(c,y,w){var E=2*c;return this.float32[E+0]=y,this.float32[E+1]=w,c},u}(Pi);ro.prototype.bytesPerElement=8,dn("StructArrayLayout2f8",ro);var Tu=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(c,y,w,E,C,N,$,Q,ne,re){var le=this.length;return this.resize(le+1),this.emplace(le,c,y,w,E,C,N,$,Q,ne,re)},u.prototype.emplace=function(c,y,w,E,C,N,$,Q,ne,re,le){var me=10*c;return this.uint16[me+0]=y,this.uint16[me+1]=w,this.uint16[me+2]=E,this.uint16[me+3]=C,this.uint16[me+4]=N,this.uint16[me+5]=$,this.uint16[me+6]=Q,this.uint16[me+7]=ne,this.uint16[me+8]=re,this.uint16[me+9]=le,c},u}(Pi);Tu.prototype.bytesPerElement=20,dn("StructArrayLayout10ui20",Tu);var Pu=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(c,y,w,E,C,N,$,Q,ne,re,le,me){var Te=this.length;return this.resize(Te+1),this.emplace(Te,c,y,w,E,C,N,$,Q,ne,re,le,me)},u.prototype.emplace=function(c,y,w,E,C,N,$,Q,ne,re,le,me,Te){var Pe=12*c;return this.int16[Pe+0]=y,this.int16[Pe+1]=w,this.int16[Pe+2]=E,this.int16[Pe+3]=C,this.uint16[Pe+4]=N,this.uint16[Pe+5]=$,this.uint16[Pe+6]=Q,this.uint16[Pe+7]=ne,this.int16[Pe+8]=re,this.int16[Pe+9]=le,this.int16[Pe+10]=me,this.int16[Pe+11]=Te,c},u}(Pi);Pu.prototype.bytesPerElement=24,dn("StructArrayLayout4i4ui4i24",Pu);var Cs=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(c,y,w){var E=this.length;return this.resize(E+1),this.emplace(E,c,y,w)},u.prototype.emplace=function(c,y,w,E){var C=3*c;return this.float32[C+0]=y,this.float32[C+1]=w,this.float32[C+2]=E,c},u}(Pi);Cs.prototype.bytesPerElement=12,dn("StructArrayLayout3f12",Cs);var kc=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(c){var y=this.length;return this.resize(y+1),this.emplace(y,c)},u.prototype.emplace=function(c,y){return this.uint32[1*c+0]=y,c},u}(Pi);kc.prototype.bytesPerElement=4,dn("StructArrayLayout1ul4",kc);var Dl=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(c,y,w,E,C,N,$,Q,ne){var re=this.length;return this.resize(re+1),this.emplace(re,c,y,w,E,C,N,$,Q,ne)},u.prototype.emplace=function(c,y,w,E,C,N,$,Q,ne,re){var le=10*c,me=5*c;return this.int16[le+0]=y,this.int16[le+1]=w,this.int16[le+2]=E,this.int16[le+3]=C,this.int16[le+4]=N,this.int16[le+5]=$,this.uint32[me+3]=Q,this.uint16[le+8]=ne,this.uint16[le+9]=re,c},u}(Pi);Dl.prototype.bytesPerElement=20,dn("StructArrayLayout6i1ul2ui20",Dl);var Al=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(c,y,w,E,C,N){var $=this.length;return this.resize($+1),this.emplace($,c,y,w,E,C,N)},u.prototype.emplace=function(c,y,w,E,C,N,$){var Q=6*c;return this.int16[Q+0]=y,this.int16[Q+1]=w,this.int16[Q+2]=E,this.int16[Q+3]=C,this.int16[Q+4]=N,this.int16[Q+5]=$,c},u}(Pi);Al.prototype.bytesPerElement=12,dn("StructArrayLayout2i2i2i12",Al);var vf=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(c,y,w,E,C){var N=this.length;return this.resize(N+1),this.emplace(N,c,y,w,E,C)},u.prototype.emplace=function(c,y,w,E,C,N){var $=4*c,Q=8*c;return this.float32[$+0]=y,this.float32[$+1]=w,this.float32[$+2]=E,this.int16[Q+6]=C,this.int16[Q+7]=N,c},u}(Pi);vf.prototype.bytesPerElement=16,dn("StructArrayLayout2f1f2i16",vf);var Rh=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(c,y,w,E){var C=this.length;return this.resize(C+1),this.emplace(C,c,y,w,E)},u.prototype.emplace=function(c,y,w,E,C){var N=12*c,$=3*c;return this.uint8[N+0]=y,this.uint8[N+1]=w,this.float32[$+1]=E,this.float32[$+2]=C,c},u}(Pi);Rh.prototype.bytesPerElement=12,dn("StructArrayLayout2ub2f12",Rh);var ja=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(c,y,w){var E=this.length;return this.resize(E+1),this.emplace(E,c,y,w)},u.prototype.emplace=function(c,y,w,E){var C=3*c;return this.uint16[C+0]=y,this.uint16[C+1]=w,this.uint16[C+2]=E,c},u}(Pi);ja.prototype.bytesPerElement=6,dn("StructArrayLayout3ui6",ja);var da=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(c,y,w,E,C,N,$,Q,ne,re,le,me,Te,Pe,We,Be,rt){var st=this.length;return this.resize(st+1),this.emplace(st,c,y,w,E,C,N,$,Q,ne,re,le,me,Te,Pe,We,Be,rt)},u.prototype.emplace=function(c,y,w,E,C,N,$,Q,ne,re,le,me,Te,Pe,We,Be,rt,st){var ht=24*c,gt=12*c,Dt=48*c;return this.int16[ht+0]=y,this.int16[ht+1]=w,this.uint16[ht+2]=E,this.uint16[ht+3]=C,this.uint32[gt+2]=N,this.uint32[gt+3]=$,this.uint32[gt+4]=Q,this.uint16[ht+10]=ne,this.uint16[ht+11]=re,this.uint16[ht+12]=le,this.float32[gt+7]=me,this.float32[gt+8]=Te,this.uint8[Dt+36]=Pe,this.uint8[Dt+37]=We,this.uint8[Dt+38]=Be,this.uint32[gt+10]=rt,this.int16[ht+22]=st,c},u}(Pi);da.prototype.bytesPerElement=48,dn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",da);var rs=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(c,y,w,E,C,N,$,Q,ne,re,le,me,Te,Pe,We,Be,rt,st,ht,gt,Dt,jt,Xt,vn,en,Rn,an,fr){var Fn=this.length;return this.resize(Fn+1),this.emplace(Fn,c,y,w,E,C,N,$,Q,ne,re,le,me,Te,Pe,We,Be,rt,st,ht,gt,Dt,jt,Xt,vn,en,Rn,an,fr)},u.prototype.emplace=function(c,y,w,E,C,N,$,Q,ne,re,le,me,Te,Pe,We,Be,rt,st,ht,gt,Dt,jt,Xt,vn,en,Rn,an,fr,Fn){var hn=34*c,Sr=17*c;return this.int16[hn+0]=y,this.int16[hn+1]=w,this.int16[hn+2]=E,this.int16[hn+3]=C,this.int16[hn+4]=N,this.int16[hn+5]=$,this.int16[hn+6]=Q,this.int16[hn+7]=ne,this.uint16[hn+8]=re,this.uint16[hn+9]=le,this.uint16[hn+10]=me,this.uint16[hn+11]=Te,this.uint16[hn+12]=Pe,this.uint16[hn+13]=We,this.uint16[hn+14]=Be,this.uint16[hn+15]=rt,this.uint16[hn+16]=st,this.uint16[hn+17]=ht,this.uint16[hn+18]=gt,this.uint16[hn+19]=Dt,this.uint16[hn+20]=jt,this.uint16[hn+21]=Xt,this.uint16[hn+22]=vn,this.uint32[Sr+12]=en,this.float32[Sr+13]=Rn,this.float32[Sr+14]=an,this.float32[Sr+15]=fr,this.float32[Sr+16]=Fn,c},u}(Pi);rs.prototype.bytesPerElement=68,dn("StructArrayLayout8i15ui1ul4f68",rs);var Is=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(c){var y=this.length;return this.resize(y+1),this.emplace(y,c)},u.prototype.emplace=function(c,y){return this.float32[1*c+0]=y,c},u}(Pi);Is.prototype.bytesPerElement=4,dn("StructArrayLayout1f4",Is);var ol=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(c,y,w){var E=this.length;return this.resize(E+1),this.emplace(E,c,y,w)},u.prototype.emplace=function(c,y,w,E){var C=3*c;return this.int16[C+0]=y,this.int16[C+1]=w,this.int16[C+2]=E,c},u}(Pi);ol.prototype.bytesPerElement=6,dn("StructArrayLayout3i6",ol);var uu=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(c,y,w){var E=this.length;return this.resize(E+1),this.emplace(E,c,y,w)},u.prototype.emplace=function(c,y,w,E){var C=4*c;return this.uint32[2*c+0]=y,this.uint16[C+2]=w,this.uint16[C+3]=E,c},u}(Pi);uu.prototype.bytesPerElement=8,dn("StructArrayLayout1ul2ui8",uu);var Fc=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(c,y){var w=this.length;return this.resize(w+1),this.emplace(w,c,y)},u.prototype.emplace=function(c,y,w){var E=2*c;return this.uint16[E+0]=y,this.uint16[E+1]=w,c},u}(Pi);Fc.prototype.bytesPerElement=4,dn("StructArrayLayout2ui4",Fc);var zc=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(c){var y=this.length;return this.resize(y+1),this.emplace(y,c)},u.prototype.emplace=function(c,y){return this.uint16[1*c+0]=y,c},u}(Pi);zc.prototype.bytesPerElement=2,dn("StructArrayLayout1ui2",zc);var f=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(c,y,w,E){var C=this.length;return this.resize(C+1),this.emplace(C,c,y,w,E)},u.prototype.emplace=function(c,y,w,E,C){var N=4*c;return this.float32[N+0]=y,this.float32[N+1]=w,this.float32[N+2]=E,this.float32[N+3]=C,c},u}(Pi);f.prototype.bytesPerElement=16,dn("StructArrayLayout4f16",f);var p=function(a){function u(){a.apply(this,arguments)}a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u;var c={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return c.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},c.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},c.x1.get=function(){return this._structArray.int16[this._pos2+2]},c.y1.get=function(){return this._structArray.int16[this._pos2+3]},c.x2.get=function(){return this._structArray.int16[this._pos2+4]},c.y2.get=function(){return this._structArray.int16[this._pos2+5]},c.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},c.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},c.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},c.anchorPoint.get=function(){return new T(this.anchorPointX,this.anchorPointY)},Object.defineProperties(u.prototype,c),u}(Wu);p.prototype.size=20;var h=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.get=function(c){return new p(this,c)},u}(Dl);dn("CollisionBoxArray",h);var v=function(a){function u(){a.apply(this,arguments)}a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u;var c={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return c.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},c.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},c.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},c.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},c.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},c.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},c.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},c.segment.get=function(){return this._structArray.uint16[this._pos2+10]},c.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},c.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},c.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},c.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},c.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},c.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},c.placedOrientation.set=function(y){this._structArray.uint8[this._pos1+37]=y},c.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},c.hidden.set=function(y){this._structArray.uint8[this._pos1+38]=y},c.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},c.crossTileID.set=function(y){this._structArray.uint32[this._pos4+10]=y},c.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(u.prototype,c),u}(Wu);v.prototype.size=48;var S=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.get=function(c){return new v(this,c)},u}(da);dn("PlacedSymbolArray",S);var P=function(a){function u(){a.apply(this,arguments)}a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u;var c={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return c.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},c.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},c.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},c.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},c.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},c.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},c.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},c.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},c.key.get=function(){return this._structArray.uint16[this._pos2+8]},c.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},c.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},c.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},c.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},c.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},c.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},c.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},c.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},c.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},c.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},c.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},c.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},c.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},c.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},c.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},c.crossTileID.set=function(y){this._structArray.uint32[this._pos4+12]=y},c.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},c.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},c.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},c.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(u.prototype,c),u}(Wu);P.prototype.size=68;var M=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.get=function(c){return new P(this,c)},u}(rs);dn("SymbolInstanceArray",M);var H=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.getoffsetX=function(c){return this.float32[1*c+0]},u}(Is);dn("GlyphOffsetArray",H);var te=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.getx=function(c){return this.int16[3*c+0]},u.prototype.gety=function(c){return this.int16[3*c+1]},u.prototype.gettileUnitDistanceFromAnchor=function(c){return this.int16[3*c+2]},u}(ol);dn("SymbolLineVertexArray",te);var ae=function(a){function u(){a.apply(this,arguments)}a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u;var c={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return c.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},c.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},c.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(u.prototype,c),u}(Wu);ae.prototype.size=8;var ge=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.get=function(c){return new ae(this,c)},u}(uu);dn("FeatureIndexArray",ge);var _e=ea([{name:"a_pos",components:2,type:"Int16"}],4).members,ye=function(a){void 0===a&&(a=[]),this.segments=a};function Le(a,u){return 256*(a=pe(Math.floor(a),0,255))+pe(Math.floor(u),0,255)}ye.prototype.prepareSegment=function(a,u,c,y){var w=this.segments[this.segments.length-1];return a>ye.MAX_VERTEX_ARRAY_LENGTH&&O("Max vertices per segment is "+ye.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+a),(!w||w.vertexLength+a>ye.MAX_VERTEX_ARRAY_LENGTH||w.sortKey!==y)&&(w={vertexOffset:u.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0},void 0!==y&&(w.sortKey=y),this.segments.push(w)),w},ye.prototype.get=function(){return this.segments},ye.prototype.destroy=function(){for(var a=0,u=this.segments;a<u.length;a+=1){var c=u[a];for(var y in c.vaos)c.vaos[y].destroy()}},ye.simpleSegment=function(a,u,c,y){return new ye([{vertexOffset:a,primitiveOffset:u,vertexLength:c,primitiveLength:y,vaos:{},sortKey:0}])},ye.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,dn("SegmentVector",ye);var Oe=ea([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Ge=q(function(a){a.exports=function(u,c){var y,w,E,C,N,$,Q,ne;for(w=u.length-(y=3&u.length),E=c,N=3432918353,$=461845907,ne=0;ne<w;)Q=255&u.charCodeAt(ne)|(255&u.charCodeAt(++ne))<<8|(255&u.charCodeAt(++ne))<<16|(255&u.charCodeAt(++ne))<<24,++ne,E=27492+(65535&(C=5*(65535&(E=(E^=Q=(65535&(Q=(Q=(65535&Q)*N+(((Q>>>16)*N&65535)<<16)&4294967295)<<15|Q>>>17))*$+(((Q>>>16)*$&65535)<<16)&4294967295)<<13|E>>>19))+((5*(E>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(Q=0,y){case 3:Q^=(255&u.charCodeAt(ne+2))<<16;case 2:Q^=(255&u.charCodeAt(ne+1))<<8;case 1:E^=Q=(65535&(Q=(Q=(65535&(Q^=255&u.charCodeAt(ne)))*N+(((Q>>>16)*N&65535)<<16)&4294967295)<<15|Q>>>17))*$+(((Q>>>16)*$&65535)<<16)&4294967295}return E^=u.length,E=2246822507*(65535&(E^=E>>>16))+((2246822507*(E>>>16)&65535)<<16)&4294967295,E=3266489909*(65535&(E^=E>>>13))+((3266489909*(E>>>16)&65535)<<16)&4294967295,(E^=E>>>16)>>>0}}),Ie=q(function(a){a.exports=function(u,c){for(var y,w=u.length,E=c^w,C=0;w>=4;)y=1540483477*(65535&(y=255&u.charCodeAt(C)|(255&u.charCodeAt(++C))<<8|(255&u.charCodeAt(++C))<<16|(255&u.charCodeAt(++C))<<24))+((1540483477*(y>>>16)&65535)<<16),E=1540483477*(65535&E)+((1540483477*(E>>>16)&65535)<<16)^(y=1540483477*(65535&(y^=y>>>24))+((1540483477*(y>>>16)&65535)<<16)),w-=4,++C;switch(w){case 3:E^=(255&u.charCodeAt(C+2))<<16;case 2:E^=(255&u.charCodeAt(C+1))<<8;case 1:E=1540483477*(65535&(E^=255&u.charCodeAt(C)))+((1540483477*(E>>>16)&65535)<<16)}return E=1540483477*(65535&(E^=E>>>13))+((1540483477*(E>>>16)&65535)<<16),(E^=E>>>15)>>>0}}),ze=Ge,qe=Ie;ze.murmur3=Ge,ze.murmur2=qe;var ot=function(){this.ids=[],this.positions=[],this.indexed=!1};ot.prototype.add=function(a,u,c,y){this.ids.push(mt(a)),this.positions.push(u,c,y)},ot.prototype.getPositions=function(a){for(var u=mt(a),c=0,y=this.ids.length-1;c<y;){var w=c+y>>1;this.ids[w]>=u?y=w:c=w+1}for(var E=[];this.ids[c]===u;)E.push({index:this.positions[3*c],start:this.positions[3*c+1],end:this.positions[3*c+2]}),c++;return E},ot.serialize=function(a,u){var c=new Float64Array(a.ids),y=new Uint32Array(a.positions);return function w(E,C,N,$){for(;N<$;){for(var Q=E[N+$>>1],ne=N-1,re=$+1;;){do{ne++}while(E[ne]<Q);do{re--}while(E[re]>Q);if(ne>=re)break;_t(E,ne,re),_t(C,3*ne,3*re),_t(C,3*ne+1,3*re+1),_t(C,3*ne+2,3*re+2)}re-N<$-re?(w(E,C,N,re),N=re+1):(w(E,C,re+1,$),$=re)}}(c,y,0,c.length-1),u&&u.push(c.buffer,y.buffer),{ids:c,positions:y}},ot.deserialize=function(a){var u=new ot;return u.ids=a.ids,u.positions=a.positions,u.indexed=!0,u};var yt=Math.pow(2,53)-1;function mt(a){var u=+a;return!isNaN(u)&&u<=yt?u:ze(String(a))}function _t(a,u,c){var y=a[u];a[u]=a[c],a[c]=y}dn("FeaturePositionMap",ot);var Pt=function(a,u){this.gl=a.gl,this.location=u},$t=function(a){function u(c,y){a.call(this,c,y),this.current=0}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.set=function(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))},u}(Pt),kt=function(a){function u(c,y){a.call(this,c,y),this.current=0}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.set=function(c){this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))},u}(Pt),tn=function(a){function u(c,y){a.call(this,c,y),this.current=[0,0]}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.set=function(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))},u}(Pt),wn=function(a){function u(c,y){a.call(this,c,y),this.current=[0,0,0]}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.set=function(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))},u}(Pt),An=function(a){function u(c,y){a.call(this,c,y),this.current=[0,0,0,0]}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.set=function(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3]))},u}(Pt),Cn=function(a){function u(c,y){a.call(this,c,y),this.current=er.transparent}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.set=function(c){c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a))},u}(Pt),Vr=new Float32Array(16),nn=function(a){function u(c,y){a.call(this,c,y),this.current=Vr}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.set=function(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(var y=1;y<16;y++)if(c[y]!==this.current[y]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}},u}(Pt);function Kn(a){return[Le(255*a.r,255*a.g),Le(255*a.b,255*a.a)]}var br=function(a,u,c){this.value=a,this.uniformNames=u.map(function(y){return"u_"+y}),this.type=c};br.prototype.setUniform=function(a,u,c){a.set(c.constantOr(this.value))},br.prototype.getBinding=function(a,u,c){return"color"===this.type?new Cn(a,u):new kt(a,u)};var nr=function(a,u){this.uniformNames=u.map(function(c){return"u_"+c}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};nr.prototype.setConstantPatternPositions=function(a,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=a.tlbr},nr.prototype.setUniform=function(a,u,c,y){var w="u_pattern_to"===y?this.patternTo:"u_pattern_from"===y?this.patternFrom:"u_pixel_ratio_to"===y?this.pixelRatioTo:"u_pixel_ratio_from"===y?this.pixelRatioFrom:null;w&&a.set(w)},nr.prototype.getBinding=function(a,u,c){return"u_pattern"===c.substr(0,9)?new An(a,u):new kt(a,u)};var Hn=function(a,u,c,y){this.expression=a,this.type=c,this.maxValue=0,this.paintVertexAttributes=u.map(function(w){return{name:"a_"+w,type:"Float32",components:"color"===c?2:1,offset:0}}),this.paintVertexArray=new y};Hn.prototype.populatePaintArray=function(a,u,c,y,w){var E=this.paintVertexArray.length,C=this.expression.evaluate(new Wr(0),u,{},y,[],w);this.paintVertexArray.resize(a),this._setPaintValue(E,a,C)},Hn.prototype.updatePaintArray=function(a,u,c,y){var w=this.expression.evaluate({zoom:0},c,y);this._setPaintValue(a,u,w)},Hn.prototype._setPaintValue=function(a,u,c){if("color"===this.type)for(var y=Kn(c),w=a;w<u;w++)this.paintVertexArray.emplace(w,y[0],y[1]);else{for(var E=a;E<u;E++)this.paintVertexArray.emplace(E,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}},Hn.prototype.upload=function(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Hn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var $n=function(a,u,c,y,w,E){this.expression=a,this.uniformNames=u.map(function(C){return"u_"+C+"_t"}),this.type=c,this.useIntegerZoom=y,this.zoom=w,this.maxValue=0,this.paintVertexAttributes=u.map(function(C){return{name:"a_"+C,type:"Float32",components:"color"===c?4:2,offset:0}}),this.paintVertexArray=new E};$n.prototype.populatePaintArray=function(a,u,c,y,w){var E=this.expression.evaluate(new Wr(this.zoom),u,{},y,[],w),C=this.expression.evaluate(new Wr(this.zoom+1),u,{},y,[],w),N=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(N,a,E,C)},$n.prototype.updatePaintArray=function(a,u,c,y){var w=this.expression.evaluate({zoom:this.zoom},c,y),E=this.expression.evaluate({zoom:this.zoom+1},c,y);this._setPaintValue(a,u,w,E)},$n.prototype._setPaintValue=function(a,u,c,y){if("color"===this.type)for(var w=Kn(c),E=Kn(y),C=a;C<u;C++)this.paintVertexArray.emplace(C,w[0],w[1],E[0],E[1]);else{for(var N=a;N<u;N++)this.paintVertexArray.emplace(N,c,y);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(y))}},$n.prototype.upload=function(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},$n.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},$n.prototype.setUniform=function(a,u){var c=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,y=pe(this.expression.interpolationFactor(c,this.zoom,this.zoom+1),0,1);a.set(y)},$n.prototype.getBinding=function(a,u,c){return new kt(a,u)};var qn=function(a,u,c,y,w,E){this.expression=a,this.type=u,this.useIntegerZoom=c,this.zoom=y,this.layerId=E,this.zoomInPaintVertexArray=new w,this.zoomOutPaintVertexArray=new w};qn.prototype.populatePaintArray=function(a,u,c){var y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(y,a,u.patterns&&u.patterns[this.layerId],c)},qn.prototype.updatePaintArray=function(a,u,c,y,w){this._setPaintValues(a,u,c.patterns&&c.patterns[this.layerId],w)},qn.prototype._setPaintValues=function(a,u,c,y){if(y&&c){var w=y[c.min],E=y[c.mid],C=y[c.max];if(w&&E&&C)for(var N=a;N<u;N++)this.zoomInPaintVertexArray.emplace(N,E.tl[0],E.tl[1],E.br[0],E.br[1],w.tl[0],w.tl[1],w.br[0],w.br[1],E.pixelRatio,w.pixelRatio),this.zoomOutPaintVertexArray.emplace(N,E.tl[0],E.tl[1],E.br[0],E.br[1],C.tl[0],C.tl[1],C.br[0],C.br[1],E.pixelRatio,C.pixelRatio)}},qn.prototype.upload=function(a){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,Oe.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,Oe.members,this.expression.isStateDependent))},qn.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ln=function(a,u,c){this.binders={},this._buffers=[];var y=[];for(var w in a.paint._values)if(c(w)){var E=a.paint.get(w);if(E instanceof ns&&Yo(E.property.specification)){var C=Io(w,a.type),N=E.value,$=E.property.specification.type,Q=E.property.useIntegerZoom,ne=E.property.specification["property-type"],re="cross-faded"===ne||"cross-faded-data-driven"===ne;if("constant"===N.kind)this.binders[w]=re?new nr(N.value,C):new br(N.value,C,$),y.push("/u_"+w);else if("source"===N.kind||re){var le=ta(w,$,"source");this.binders[w]=re?new qn(N,$,Q,u,le,a.id):new Hn(N,C,$,le),y.push("/a_"+w)}else{var me=ta(w,$,"composite");this.binders[w]=new $n(N,C,$,Q,u,me),y.push("/z_"+w)}}}this.cacheKey=y.sort().join("")};Ln.prototype.getMaxValue=function(a){var u=this.binders[a];return u instanceof Hn||u instanceof $n?u.maxValue:0},Ln.prototype.populatePaintArrays=function(a,u,c,y,w){for(var E in this.binders){var C=this.binders[E];(C instanceof Hn||C instanceof $n||C instanceof qn)&&C.populatePaintArray(a,u,c,y,w)}},Ln.prototype.setConstantPatternPositions=function(a,u){for(var c in this.binders){var y=this.binders[c];y instanceof nr&&y.setConstantPatternPositions(a,u)}},Ln.prototype.updatePaintArrays=function(a,u,c,y,w){var E=!1;for(var C in a)for(var N=0,$=u.getPositions(C);N<$.length;N+=1){var Q=$[N],ne=c.feature(Q.index);for(var re in this.binders){var le=this.binders[re];if((le instanceof Hn||le instanceof $n||le instanceof qn)&&!0===le.expression.isStateDependent){var me=y.paint.get(re);le.expression=me.value,le.updatePaintArray(Q.start,Q.end,ne,a[C],w),E=!0}}}return E},Ln.prototype.defines=function(){var a=[];for(var u in this.binders){var c=this.binders[u];(c instanceof br||c instanceof nr)&&a.push.apply(a,c.uniformNames.map(function(y){return"#define HAS_UNIFORM_"+y}))}return a},Ln.prototype.getBinderAttributes=function(){var a=[];for(var u in this.binders){var c=this.binders[u];if(c instanceof Hn||c instanceof $n)for(var y=0;y<c.paintVertexAttributes.length;y++)a.push(c.paintVertexAttributes[y].name);else if(c instanceof qn)for(var w=0;w<Oe.members.length;w++)a.push(Oe.members[w].name)}return a},Ln.prototype.getBinderUniforms=function(){var a=[];for(var u in this.binders){var c=this.binders[u];if(c instanceof br||c instanceof nr||c instanceof $n)for(var y=0,w=c.uniformNames;y<w.length;y+=1)a.push(w[y])}return a},Ln.prototype.getPaintVertexBuffers=function(){return this._buffers},Ln.prototype.getUniforms=function(a,u){var c=[];for(var y in this.binders){var w=this.binders[y];if(w instanceof br||w instanceof nr||w instanceof $n)for(var E=0,C=w.uniformNames;E<C.length;E+=1){var N=C[E];if(u[N]){var $=w.getBinding(a,u[N],N);c.push({name:N,property:y,binding:$})}}}return c},Ln.prototype.setUniforms=function(a,u,c,y){for(var w=0,E=u;w<E.length;w+=1){var C=E[w],N=C.name,$=C.property;this.binders[$].setUniform(C.binding,y,c.get($),N)}},Ln.prototype.updatePaintBuffers=function(a){for(var u in this._buffers=[],this.binders){var c=this.binders[u];if(a&&c instanceof qn){var y=2===a.fromScale?c.zoomInPaintVertexBuffer:c.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(c instanceof Hn||c instanceof $n)&&c.paintVertexBuffer&&this._buffers.push(c.paintVertexBuffer)}},Ln.prototype.upload=function(a){for(var u in this.binders){var c=this.binders[u];(c instanceof Hn||c instanceof $n||c instanceof qn)&&c.upload(a)}this.updatePaintBuffers()},Ln.prototype.destroy=function(){for(var a in this.binders){var u=this.binders[a];(u instanceof Hn||u instanceof $n||u instanceof qn)&&u.destroy()}};var Di=function(a,u,c){void 0===c&&(c=function(){return!0}),this.programConfigurations={};for(var y=0,w=a;y<w.length;y+=1){var E=w[y];this.programConfigurations[E.id]=new Ln(E,u,c)}this.needsUpload=!1,this._featureMap=new ot,this._bufferOffset=0};function Io(a,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(u+"-","").replace(/-/g,"_")]}function ta(a,u,c){var w={"line-pattern":{source:Tu,composite:Tu},"fill-pattern":{source:Tu,composite:Tu},"fill-extrusion-pattern":{source:Tu,composite:Tu}}[a];return w&&w[c]||{color:{source:ro,composite:f},number:{source:Is,composite:ro}}[u][c]}Di.prototype.populatePaintArrays=function(a,u,c,y,w,E){for(var C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(a,u,y,w,E);void 0!==u.id&&this._featureMap.add(u.id,c,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0},Di.prototype.updatePaintArrays=function(a,u,c,y){for(var w=0,E=c;w<E.length;w+=1){var C=E[w];this.needsUpload=this.programConfigurations[C.id].updatePaintArrays(a,this._featureMap,u,C,y)||this.needsUpload}},Di.prototype.get=function(a){return this.programConfigurations[a]},Di.prototype.upload=function(a){if(this.needsUpload){for(var u in this.programConfigurations)this.programConfigurations[u].upload(a);this.needsUpload=!1}},Di.prototype.destroy=function(){for(var a in this.programConfigurations)this.programConfigurations[a].destroy()},dn("ConstantBinder",br),dn("CrossFadedConstantBinder",nr),dn("SourceExpressionBinder",Hn),dn("CrossFadedCompositeBinder",qn),dn("CompositeExpressionBinder",$n),dn("ProgramConfiguration",Ln,{omit:["_buffers"]}),dn("ProgramConfigurationSet",Di);var Lo=Math.pow(2,14)-1,No=-Lo-1;function Zi(a){for(var u=8192/a.extent,c=a.loadGeometry(),y=0;y<c.length;y++)for(var w=c[y],E=0;E<w.length;E++){var C=w[E],N=Math.round(C.x*u),$=Math.round(C.y*u);C.x=pe(N,No,Lo),C.y=pe($,No,Lo),(N<C.x||N>C.x+1||$<C.y||$>C.y+1)&&O("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return c}function fa(a,u){return{type:a.type,id:a.id,properties:a.properties,geometry:u?Zi(a):[]}}function lu(a,u,c,y,w){a.emplaceBack(2*u+(y+1)/2,2*c+(w+1)/2)}var ko=function(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(u){return u.id}),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new zt,this.indexArray=new ja,this.segments=new ye,this.programConfigurations=new Di(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(function(u){return u.isStateDependent()}).map(function(u){return u.id})};function Ua(a,u){for(var c=0;c<a.length;c++)if(Du(u,a[c]))return!0;for(var y=0;y<u.length;y++)if(Du(a,u[y]))return!0;return!!Rl(a,u)}function is(a,u,c){return!!Du(a,u)||!!al(u,a,c)}function os(a,u){if(1===a.length)return as(u,a[0]);for(var c=0;c<u.length;c++)for(var y=u[c],w=0;w<y.length;w++)if(Du(a,y[w]))return!0;for(var E=0;E<a.length;E++)if(as(u,a[E]))return!0;for(var C=0;C<u.length;C++)if(Rl(a,u[C]))return!0;return!1}function sc(a,u,c){if(a.length>1){if(Rl(a,u))return!0;for(var y=0;y<u.length;y++)if(al(u[y],a,c))return!0}for(var w=0;w<a.length;w++)if(al(a[w],u,c))return!0;return!1}function Rl(a,u){if(0===a.length||0===u.length)return!1;for(var c=0;c<a.length-1;c++)for(var y=a[c],w=a[c+1],E=0;E<u.length-1;E++)if(Ml(y,w,u[E],u[E+1]))return!0;return!1}function Ml(a,u,c,y){return B(a,c,y)!==B(u,c,y)&&B(a,u,c)!==B(a,u,y)}function al(a,u,c){var y=c*c;if(1===u.length)return a.distSqr(u[0])<y;for(var w=1;w<u.length;w++)if(Bc(a,u[w-1],u[w])<y)return!0;return!1}function Bc(a,u,c){var y=u.distSqr(c);if(0===y)return a.distSqr(u);var w=((a.x-u.x)*(c.x-u.x)+(a.y-u.y)*(c.y-u.y))/y;return a.distSqr(w<0?u:w>1?c:c.sub(u)._mult(w)._add(u))}function as(a,u){for(var c,y,w,E=!1,C=0;C<a.length;C++)for(var N=0,$=(c=a[C]).length-1;N<c.length;$=N++)(y=c[N]).y>u.y!=(w=c[$]).y>u.y&&u.x<(w.x-y.x)*(u.y-y.y)/(w.y-y.y)+y.x&&(E=!E);return E}function Du(a,u){for(var c=!1,y=0,w=a.length-1;y<a.length;w=y++){var E=a[y],C=a[w];E.y>u.y!=C.y>u.y&&u.x<(C.x-E.x)*(u.y-E.y)/(C.y-E.y)+E.x&&(c=!c)}return c}function Au(a,u,c){var y=c[0],w=c[2];if(a.x<y.x&&u.x<y.x||a.x>w.x&&u.x>w.x||a.y<y.y&&u.y<y.y||a.y>w.y&&u.y>w.y)return!1;var E=B(a,u,c[0]);return E!==B(a,u,c[1])||E!==B(a,u,c[2])||E!==B(a,u,c[3])}function mo(a,u,c){var y=u.paint.get(a).value;return"constant"===y.kind?y.value:c.programConfigurations.get(u.id).getMaxValue(a)}function cu(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Ts(a,u,c,y,w){if(!u[0]&&!u[1])return a;var E=T.convert(u)._mult(w);"viewport"===c&&E._rotate(-y);for(var C=[],N=0;N<a.length;N++)C.push(a[N].sub(E));return C}ko.prototype.populate=function(a,u,c){var y=this.layers[0],w=[],E=null,C=!1;"circle"===y.type&&(C=!(E=y.layout.get("circle-sort-key")).isConstant());for(var N=0,$=a;N<$.length;N+=1){var Q=$[N],ne=Q.feature,re=Q.id,le=Q.index,me=Q.sourceLayerIndex,Te=this.layers[0]._featureFilter.needGeometry,Pe=fa(ne,Te);if(this.layers[0]._featureFilter.filter(new Wr(this.zoom),Pe,c)){var We=C?E.evaluate(Pe,{},c):void 0,Be={id:re,properties:ne.properties,type:ne.type,sourceLayerIndex:me,index:le,geometry:Te?Pe.geometry:Zi(ne),patterns:{},sortKey:We};w.push(Be)}}C&&w.sort(function(vn,en){return vn.sortKey-en.sortKey});for(var rt=0,st=w;rt<st.length;rt+=1){var ht=st[rt],gt=ht.geometry,Dt=ht.index,jt=ht.sourceLayerIndex,Xt=a[Dt].feature;this.addFeature(ht,gt,Dt,c),u.featureIndex.insert(Xt,gt,Dt,jt,this.index)}},ko.prototype.update=function(a,u,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,c)},ko.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ko.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ko.prototype.upload=function(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,_e),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0},ko.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ko.prototype.addFeature=function(a,u,c,y){for(var w=0,E=u;w<E.length;w+=1)for(var C=0,N=E[w];C<N.length;C+=1){var $=N[C],Q=$.x,ne=$.y;if(!(Q<0||Q>=8192||ne<0||ne>=8192)){var re=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),le=re.vertexLength;lu(this.layoutVertexArray,Q,ne,-1,-1),lu(this.layoutVertexArray,Q,ne,1,-1),lu(this.layoutVertexArray,Q,ne,1,1),lu(this.layoutVertexArray,Q,ne,-1,1),this.indexArray.emplaceBack(le,le+1,le+2),this.indexArray.emplaceBack(le,le+3,le+2),re.vertexLength+=4,re.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,c,{},y)},dn("CircleBucket",ko,{omit:["layers"]});var Ru=new Os({"circle-sort-key":new Un(Ee.layout_circle["circle-sort-key"])}),go={paint:new Os({"circle-radius":new Un(Ee.paint_circle["circle-radius"]),"circle-color":new Un(Ee.paint_circle["circle-color"]),"circle-blur":new Un(Ee.paint_circle["circle-blur"]),"circle-opacity":new Un(Ee.paint_circle["circle-opacity"]),"circle-translate":new Yt(Ee.paint_circle["circle-translate"]),"circle-translate-anchor":new Yt(Ee.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Yt(Ee.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Yt(Ee.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Un(Ee.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Un(Ee.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Un(Ee.paint_circle["circle-stroke-opacity"])}),layout:Ru},io=typeof Float32Array<"u"?Float32Array:Array;function Ea(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function uc(a,u,c){var y=u[0],w=u[1],E=u[2],C=u[3],N=u[4],$=u[5],Q=u[6],ne=u[7],re=u[8],le=u[9],me=u[10],Te=u[11],Pe=u[12],We=u[13],Be=u[14],rt=u[15],st=c[0],ht=c[1],gt=c[2],Dt=c[3];return a[0]=st*y+ht*N+gt*re+Dt*Pe,a[1]=st*w+ht*$+gt*le+Dt*We,a[2]=st*E+ht*Q+gt*me+Dt*Be,a[3]=st*C+ht*ne+gt*Te+Dt*rt,a[4]=(st=c[4])*y+(ht=c[5])*N+(gt=c[6])*re+(Dt=c[7])*Pe,a[5]=st*w+ht*$+gt*le+Dt*We,a[6]=st*E+ht*Q+gt*me+Dt*Be,a[7]=st*C+ht*ne+gt*Te+Dt*rt,a[8]=(st=c[8])*y+(ht=c[9])*N+(gt=c[10])*re+(Dt=c[11])*Pe,a[9]=st*w+ht*$+gt*le+Dt*We,a[10]=st*E+ht*Q+gt*me+Dt*Be,a[11]=st*C+ht*ne+gt*Te+Dt*rt,a[12]=(st=c[12])*y+(ht=c[13])*N+(gt=c[14])*re+(Dt=c[15])*Pe,a[13]=st*w+ht*$+gt*le+Dt*We,a[14]=st*E+ht*Q+gt*me+Dt*Be,a[15]=st*C+ht*ne+gt*Te+Dt*rt,a}Math.hypot||(Math.hypot=function(){for(var a=arguments,u=0,c=arguments.length;c--;)u+=a[c]*a[c];return Math.sqrt(u)});var jc,a,lm=uc;function Ol(a,u,c){var y=u[0],w=u[1],E=u[2],C=u[3];return a[0]=c[0]*y+c[4]*w+c[8]*E+c[12]*C,a[1]=c[1]*y+c[5]*w+c[9]*E+c[13]*C,a[2]=c[2]*y+c[6]*w+c[10]*E+c[14]*C,a[3]=c[3]*y+c[7]*w+c[11]*E+c[15]*C,a}jc=new io(3),io!=Float32Array&&(jc[0]=0,jc[1]=0,jc[2]=0),a=new io(4),io!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[3]=0);var sl=(function(){var a=new io(2);io!=Float32Array&&(a[0]=0,a[1]=0)}(),function(a){function u(c){a.call(this,c,go)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.createBucket=function(c){return new ko(c)},u.prototype.queryRadius=function(c){var y=c;return mo("circle-radius",this,y)+mo("circle-stroke-width",this,y)+cu(this.paint.get("circle-translate"))},u.prototype.queryIntersectsFeature=function(c,y,w,E,C,N,$,Q){for(var ne=Ts(c,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),N.angle,$),re=this.paint.get("circle-radius").evaluate(y,w)+this.paint.get("circle-stroke-width").evaluate(y,w),le="map"===this.paint.get("circle-pitch-alignment"),me=le?ne:function(jt,Xt){return jt.map(function(vn){return Mh(vn,Xt)})}(ne,Q),Te=le?re*$:re,Pe=0,We=E;Pe<We.length;Pe+=1)for(var Be=0,rt=We[Pe];Be<rt.length;Be+=1){var st=rt[Be],ht=le?st:Mh(st,Q),gt=Te,Dt=Ol([],[st.x,st.y,0,1],Q);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?gt*=Dt[3]/N.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(gt*=N.cameraToCenterDistance/Dt[3]),is(me,ht,gt))return!0}return!1},u}(Js));function Mh(a,u){var c=Ol([],[a.x,a.y,0,1],u);return new T(c[0]/c[3],c[1]/c[3])}var lc=function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u}(ko);function cc(a,u,c,y){var w=u.width,E=u.height;if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==w*E*c)throw new RangeError("mismatched image size")}else y=new Uint8Array(w*E*c);return a.width=w,a.height=E,a.data=y,a}function Uc(a,u,c){var y=u.width,w=u.height;if(y!==a.width||w!==a.height){var E=cc({},{width:y,height:w},c);cm(a,E,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,y),height:Math.min(a.height,w)},c),a.width=y,a.height=w,a.data=E.data}}function cm(a,u,c,y,w,E){if(0===w.width||0===w.height)return u;if(w.width>a.width||w.height>a.height||c.x>a.width-w.width||c.y>a.height-w.height)throw new RangeError("out of range source coordinates for image copy");if(w.width>u.width||w.height>u.height||y.x>u.width-w.width||y.y>u.height-w.height)throw new RangeError("out of range destination coordinates for image copy");for(var C=a.data,N=u.data,$=0;$<w.height;$++)for(var Q=((c.y+$)*a.width+c.x)*E,ne=((y.y+$)*u.width+y.x)*E,re=0;re<w.width*E;re++)N[ne+re]=C[Q+re];return u}dn("HeatmapBucket",lc,{omit:["layers"]});var Vc=function(a,u){cc(this,a,1,u)};Vc.prototype.resize=function(a){Uc(this,a,1)},Vc.prototype.clone=function(){return new Vc({width:this.width,height:this.height},new Uint8Array(this.data))},Vc.copy=function(a,u,c,y,w){cm(a,u,c,y,w,1)};var Va=function(a,u){cc(this,a,4,u)};Va.prototype.resize=function(a){Uc(this,a,4)},Va.prototype.replace=function(a,u){u?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a},Va.prototype.clone=function(){return new Va({width:this.width,height:this.height},new Uint8Array(this.data))},Va.copy=function(a,u,c,y,w){cm(a,u,c,y,w,4)},dn("AlphaImage",Vc),dn("RGBAImage",Va);var x0={paint:new Os({"heatmap-radius":new Un(Ee.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Un(Ee.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Yt(Ee.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Iu(Ee.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Yt(Ee.paint_heatmap["heatmap-opacity"])})};function dm(a){var u={},c=a.resolution||256,y=a.clips?a.clips.length:1,w=a.image||new Va({width:c,height:y}),E=function(Te,Pe,We){u[a.evaluationKey]=We;var Be=a.expression.evaluate(u);w.data[Te+Pe+0]=Math.floor(255*Be.r/Be.a),w.data[Te+Pe+1]=Math.floor(255*Be.g/Be.a),w.data[Te+Pe+2]=Math.floor(255*Be.b/Be.a),w.data[Te+Pe+3]=Math.floor(255*Be.a)};if(a.clips)for(var C=0,N=0;C<y;++C,N+=4*c)for(var $=0,Q=0;$<c;$++,Q+=4){var ne=$/(c-1),re=a.clips[C];E(N,Q,re.start*(1-ne)+re.end*ne)}else for(var le=0,me=0;le<c;le++,me+=4)E(0,me,le/(c-1));return w}var _f=function(a){function u(c){a.call(this,c,x0),this._updateColorRamp()}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.createBucket=function(c){return new lc(c)},u.prototype._handleSpecialPaintPropertyUpdate=function(c){"heatmap-color"===c&&this._updateColorRamp()},u.prototype._updateColorRamp=function(){this.colorRamp=dm({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},u.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},u.prototype.queryRadius=function(){return 0},u.prototype.queryIntersectsFeature=function(){return!1},u.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},u}(Js),Dd={paint:new Os({"hillshade-illumination-direction":new Yt(Ee.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Yt(Ee.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Yt(Ee.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Yt(Ee.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Yt(Ee.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Yt(Ee.paint_hillshade["hillshade-accent-color"])})},Ad=function(a){function u(c){a.call(this,c,Dd)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},u}(Js),Rd=ea([{name:"a_pos",components:2,type:"Int16"}],4).members,Oh=Ll,fm=Ll;function Ll(a,u,c){c=c||2;var y,w,E,C,N,$,Q,ne=u&&u.length,re=ne?u[0]*c:a.length,le=E0(a,0,re,c,!0),me=[];if(!le||le.next===le.prev)return me;if(ne&&(le=function(Pe,We,Be,rt){var st,ht,gt,Dt=[];for(st=0,ht=We.length;st<ht;st++)(gt=E0(Pe,We[st]*rt,st<ht-1?We[st+1]*rt:Pe.length,rt,!1))===gt.next&&(gt.steiner=!0),Dt.push(Yx(gt));for(Dt.sort(Zx),st=0;st<Dt.length;st++)Jx(Dt[st],Be),Be=dc(Be,Be.next);return Be}(a,u,le,c)),a.length>80*c){y=E=a[0],w=C=a[1];for(var Te=c;Te<re;Te+=c)(N=a[Te])<y&&(y=N),($=a[Te+1])<w&&(w=$),N>E&&(E=N),$>C&&(C=$);Q=0!==(Q=Math.max(E-y,C-w))?1/Q:0}return Pr(le,me,c,y,w,Q),me}function E0(a,u,c,y,w){var E,C;if(w===pm(a,u,c,y)>0)for(E=u;E<c;E+=y)C=wf(E,a[E],a[E+1],C);else for(E=c-y;E>=u;E-=y)C=wf(E,a[E],a[E+1],C);return C&&fc(C,C.next)&&(Nl(C),C=C.next),C}function dc(a,u){if(!a)return a;u||(u=a);var c,y=a;do{if(c=!1,y.steiner||!fc(y,y.next)&&0!==yo(y.prev,y,y.next))y=y.next;else{if(Nl(y),(y=u=y.prev)===y.next)break;c=!0}}while(c||y!==u);return u}function Pr(a,u,c,y,w,E,C){if(a){!C&&E&&function(ne,re,le,me){var Te=ne;do{null===Te.z&&(Te.z=Gc(Te.x,Te.y,re,le,me)),Te.prevZ=Te.prev,Te.nextZ=Te.next,Te=Te.next}while(Te!==ne);Te.prevZ.nextZ=null,Te.prevZ=null,function(Pe){var We,Be,rt,st,ht,gt,Dt,jt,Xt=1;do{for(Be=Pe,Pe=null,ht=null,gt=0;Be;){for(gt++,rt=Be,Dt=0,We=0;We<Xt&&(Dt++,rt=rt.nextZ);We++);for(jt=Xt;Dt>0||jt>0&&rt;)0!==Dt&&(0===jt||!rt||Be.z<=rt.z)?(st=Be,Be=Be.nextZ,Dt--):(st=rt,rt=rt.nextZ,jt--),ht?ht.nextZ=st:Pe=st,st.prevZ=ht,ht=st;Be=rt}ht.nextZ=null,Xt*=2}while(gt>1)}(Te)}(a,y,w,E);for(var N,$,Q=a;a.prev!==a.next;)if(N=a.prev,$=a.next,E?$x(a,y,w,E):Hx(a))u.push(N.i/c),u.push(a.i/c),u.push($.i/c),Nl(a),a=$.next,Q=$.next;else if((a=$)===Q){C?1===C?Pr(a=qx(dc(a),u,c),u,c,y,w,E,2):2===C&&Wx(a,u,c,y,w,E):Pr(dc(a),u,c,y,w,E,1);break}}}function Hx(a){var u=a.prev,c=a,y=a.next;if(yo(u,c,y)>=0)return!1;for(var w=a.next.next;w!==a.prev;){if(bf(u.x,u.y,c.x,c.y,y.x,y.y,w.x,w.y)&&yo(w.prev,w,w.next)>=0)return!1;w=w.next}return!0}function $x(a,u,c,y){var w=a.prev,E=a,C=a.next;if(yo(w,E,C)>=0)return!1;for(var N=w.x>E.x?w.x>C.x?w.x:C.x:E.x>C.x?E.x:C.x,$=w.y>E.y?w.y>C.y?w.y:C.y:E.y>C.y?E.y:C.y,Q=Gc(w.x<E.x?w.x<C.x?w.x:C.x:E.x<C.x?E.x:C.x,w.y<E.y?w.y<C.y?w.y:C.y:E.y<C.y?E.y:C.y,u,c,y),ne=Gc(N,$,u,c,y),re=a.prevZ,le=a.nextZ;re&&re.z>=Q&&le&&le.z<=ne;){if(re!==a.prev&&re!==a.next&&bf(w.x,w.y,E.x,E.y,C.x,C.y,re.x,re.y)&&yo(re.prev,re,re.next)>=0||(re=re.prevZ,le!==a.prev&&le!==a.next&&bf(w.x,w.y,E.x,E.y,C.x,C.y,le.x,le.y)&&yo(le.prev,le,le.next)>=0))return!1;le=le.nextZ}for(;re&&re.z>=Q;){if(re!==a.prev&&re!==a.next&&bf(w.x,w.y,E.x,E.y,C.x,C.y,re.x,re.y)&&yo(re.prev,re,re.next)>=0)return!1;re=re.prevZ}for(;le&&le.z<=ne;){if(le!==a.prev&&le!==a.next&&bf(w.x,w.y,E.x,E.y,C.x,C.y,le.x,le.y)&&yo(le.prev,le,le.next)>=0)return!1;le=le.nextZ}return!0}function qx(a,u,c){var y=a;do{var w=y.prev,E=y.next.next;!fc(w,E)&&S0(w,y,y.next,E)&&du(w,E)&&du(E,w)&&(u.push(w.i/c),u.push(y.i/c),u.push(E.i/c),Nl(y),Nl(y.next),y=a=E),y=y.next}while(y!==a);return dc(y)}function Wx(a,u,c,y,w,E){var C=a;do{for(var N=C.next.next;N!==C.prev;){if(C.i!==N.i&&Sa(C,N)){var $=hm(C,N);return C=dc(C,C.next),$=dc($,$.next),Pr(C,u,c,y,w,E),void Pr($,u,c,y,w,E)}N=N.next}C=C.next}while(C!==a)}function Zx(a,u){return a.x-u.x}function Jx(a,u){if(u=function(y,w){var E,C=w,N=y.x,$=y.y,Q=-1/0;do{if($<=C.y&&$>=C.next.y&&C.next.y!==C.y){var ne=C.x+($-C.y)*(C.next.x-C.x)/(C.next.y-C.y);if(ne<=N&&ne>Q){if(Q=ne,ne===N){if($===C.y)return C;if($===C.next.y)return C.next}E=C.x<C.next.x?C:C.next}}C=C.next}while(C!==w);if(!E)return null;if(N===Q)return E;var re,le=E,me=E.x,Te=E.y,Pe=1/0;C=E;do{N>=C.x&&C.x>=me&&N!==C.x&&bf($<Te?N:Q,$,me,Te,$<Te?Q:N,$,C.x,C.y)&&(re=Math.abs($-C.y)/(N-C.x),du(C,y)&&(re<Pe||re===Pe&&(C.x>E.x||C.x===E.x&&Kx(E,C)))&&(E=C,Pe=re)),C=C.next}while(C!==le);return E}(a,u)){var c=hm(u,a);dc(u,u.next),dc(c,c.next)}}function Kx(a,u){return yo(a.prev,a,u.prev)<0&&yo(u.next,a,a.next)<0}function Gc(a,u,c,y,w){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=32767*(a-c)*w)|a<<8))|a<<4))|a<<2))|a<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=32767*(u-y)*w)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function Yx(a){var u=a,c=a;do{(u.x<c.x||u.x===c.x&&u.y<c.y)&&(c=u),u=u.next}while(u!==a);return c}function bf(a,u,c,y,w,E,C,N){return(w-C)*(u-N)-(a-C)*(E-N)>=0&&(a-C)*(y-N)-(c-C)*(u-N)>=0&&(c-C)*(E-N)-(w-C)*(y-N)>=0}function Sa(a,u){return a.next.i!==u.i&&a.prev.i!==u.i&&!function(c,y){var w=c;do{if(w.i!==c.i&&w.next.i!==c.i&&w.i!==y.i&&w.next.i!==y.i&&S0(w,w.next,c,y))return!0;w=w.next}while(w!==c);return!1}(a,u)&&(du(a,u)&&du(u,a)&&function(c,y){var w=c,E=!1,C=(c.x+y.x)/2,N=(c.y+y.y)/2;do{w.y>N!=w.next.y>N&&w.next.y!==w.y&&C<(w.next.x-w.x)*(N-w.y)/(w.next.y-w.y)+w.x&&(E=!E),w=w.next}while(w!==c);return E}(a,u)&&(yo(a.prev,a,u.prev)||yo(a,u.prev,u))||fc(a,u)&&yo(a.prev,a,a.next)>0&&yo(u.prev,u,u.next)>0)}function yo(a,u,c){return(u.y-a.y)*(c.x-u.x)-(u.x-a.x)*(c.y-u.y)}function fc(a,u){return a.x===u.x&&a.y===u.y}function S0(a,u,c,y){var w=Ps(yo(a,u,c)),E=Ps(yo(a,u,y)),C=Ps(yo(c,y,a)),N=Ps(yo(c,y,u));return w!==E&&C!==N||!(0!==w||!Lh(a,c,u))||!(0!==E||!Lh(a,y,u))||!(0!==C||!Lh(c,a,y))||!(0!==N||!Lh(c,u,y))}function Lh(a,u,c){return u.x<=Math.max(a.x,c.x)&&u.x>=Math.min(a.x,c.x)&&u.y<=Math.max(a.y,c.y)&&u.y>=Math.min(a.y,c.y)}function Ps(a){return a>0?1:a<0?-1:0}function du(a,u){return yo(a.prev,a,a.next)<0?yo(a,u,a.next)>=0&&yo(a,a.prev,u)>=0:yo(a,u,a.prev)<0||yo(a,a.next,u)<0}function hm(a,u){var c=new Nh(a.i,a.x,a.y),y=new Nh(u.i,u.x,u.y),w=a.next,E=u.prev;return a.next=u,u.prev=a,c.next=w,w.prev=c,y.next=c,c.prev=y,E.next=y,y.prev=E,y}function wf(a,u,c,y){var w=new Nh(a,u,c);return y?(w.next=y.next,w.prev=y,y.next.prev=w,y.next=w):(w.prev=w,w.next=w),w}function Nl(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Nh(a,u,c){this.i=a,this.x=u,this.y=c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function pm(a,u,c,y){for(var w=0,E=u,C=c-y;E<c;E+=y)w+=(a[C]-a[E])*(a[E+1]+a[C+1]),C=E;return w}function C0(a,u,c,y,w){!function E(C,N,$,Q,ne){for(;Q>$;){if(Q-$>600){var re=Q-$+1,le=N-$+1,me=Math.log(re),Te=.5*Math.exp(2*me/3),Pe=.5*Math.sqrt(me*Te*(re-Te)/re)*(le-re/2<0?-1:1);E(C,N,Math.max($,Math.floor(N-le*Te/re+Pe)),Math.min(Q,Math.floor(N+(re-le)*Te/re+Pe)),ne)}var We=C[N],Be=$,rt=Q;for(kh(C,$,N),ne(C[Q],We)>0&&kh(C,$,Q);Be<rt;){for(kh(C,Be,rt),Be++,rt--;ne(C[Be],We)<0;)Be++;for(;ne(C[rt],We)>0;)rt--}0===ne(C[$],We)?kh(C,$,rt):kh(C,++rt,Q),rt<=N&&($=rt+1),N<=rt&&(Q=rt-1)}}(a,u,c||0,y||a.length-1,w||Xx)}function kh(a,u,c){var y=a[u];a[u]=a[c],a[c]=y}function Xx(a,u){return a<u?-1:a>u?1:0}function Fh(a,u){var c=a.length;if(c<=1)return[a];for(var y,w,E=[],C=0;C<c;C++){var N=j(a[C]);0!==N&&(a[C].area=Math.abs(N),void 0===w&&(w=N<0),w===N<0?(y&&E.push(y),y=[a[C]]):y.push(a[C]))}if(y&&E.push(y),u>1)for(var $=0;$<E.length;$++)E[$].length<=u||(C0(E[$],u,1,E[$].length-1,fu),E[$]=E[$].slice(0,u));return E}function fu(a,u){return u.area-a.area}function xf(a,u,c){for(var y=c.patternDependencies,w=!1,E=0,C=u;E<C.length;E+=1){var N=C[E].paint.get(a+"-pattern");N.isConstant()||(w=!0);var $=N.constantOr(null);$&&(w=!0,y[$.to]=!0,y[$.from]=!0)}return w}function hc(a,u,c,y,w){for(var E=w.patternDependencies,C=0,N=u;C<N.length;C+=1){var $=N[C],Q=$.paint.get(a+"-pattern").value;if("constant"!==Q.kind){var ne=Q.evaluate({zoom:y-1},c,{},w.availableImages),re=Q.evaluate({zoom:y},c,{},w.availableImages),le=Q.evaluate({zoom:y+1},c,{},w.availableImages);re=re&&re.name?re.name:re,le=le&&le.name?le.name:le,E[ne=ne&&ne.name?ne.name:ne]=!0,E[re]=!0,E[le]=!0,c.patterns[$.id]={min:ne,mid:re,max:le}}}return c}Ll.deviation=function(a,u,c,y){var w=u&&u.length,E=Math.abs(pm(a,0,w?u[0]*c:a.length,c));if(w)for(var C=0,N=u.length;C<N;C++)E-=Math.abs(pm(a,u[C]*c,C<N-1?u[C+1]*c:a.length,c));var $=0;for(C=0;C<y.length;C+=3){var Q=y[C]*c,ne=y[C+1]*c,re=y[C+2]*c;$+=Math.abs((a[Q]-a[re])*(a[ne+1]-a[Q+1])-(a[Q]-a[ne])*(a[re+1]-a[Q+1]))}return 0===E&&0===$?0:Math.abs(($-E)/E)},Ll.flatten=function(a){for(var u=a[0][0].length,c={vertices:[],holes:[],dimensions:u},y=0,w=0;w<a.length;w++){for(var E=0;E<a[w].length;E++)for(var C=0;C<u;C++)c.vertices.push(a[w][E][C]);w>0&&c.holes.push(y+=a[w-1].length)}return c},Oh.default=fm;var ul=function(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(u){return u.id}),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new zt,this.indexArray=new ja,this.indexArray2=new Fc,this.programConfigurations=new Di(a.layers,a.zoom),this.segments=new ye,this.segments2=new ye,this.stateDependentLayerIds=this.layers.filter(function(u){return u.isStateDependent()}).map(function(u){return u.id})};ul.prototype.populate=function(a,u,c){this.hasPattern=xf("fill",this.layers,u);for(var y=this.layers[0].layout.get("fill-sort-key"),w=!y.isConstant(),E=[],C=0,N=a;C<N.length;C+=1){var $=N[C],Q=$.feature,ne=$.id,re=$.index,le=$.sourceLayerIndex,me=this.layers[0]._featureFilter.needGeometry,Te=fa(Q,me);if(this.layers[0]._featureFilter.filter(new Wr(this.zoom),Te,c)){var Pe=w?y.evaluate(Te,{},c,u.availableImages):void 0,We={id:ne,properties:Q.properties,type:Q.type,sourceLayerIndex:le,index:re,geometry:me?Te.geometry:Zi(Q),patterns:{},sortKey:Pe};E.push(We)}}w&&E.sort(function(Xt,vn){return Xt.sortKey-vn.sortKey});for(var Be=0,rt=E;Be<rt.length;Be+=1){var st=rt[Be],ht=st.geometry,gt=st.index,Dt=st.sourceLayerIndex;if(this.hasPattern){var jt=hc("fill",this.layers,st,this.zoom,u);this.patternFeatures.push(jt)}else this.addFeature(st,ht,gt,c,{});u.featureIndex.insert(a[gt].feature,ht,gt,Dt,this.index)}},ul.prototype.update=function(a,u,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,c)},ul.prototype.addFeatures=function(a,u,c){for(var y=0,w=this.patternFeatures;y<w.length;y+=1){var E=w[y];this.addFeature(E,E.geometry,E.index,u,c)}},ul.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ul.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ul.prototype.upload=function(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Rd),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0},ul.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ul.prototype.addFeature=function(a,u,c,y,w){for(var E=0,C=Fh(u,500);E<C.length;E+=1){for(var N=C[E],$=0,Q=0,ne=N;Q<ne.length;Q+=1)$+=ne[Q].length;for(var re=this.segments.prepareSegment($,this.layoutVertexArray,this.indexArray),le=re.vertexLength,me=[],Te=[],Pe=0,We=N;Pe<We.length;Pe+=1){var Be=We[Pe];if(0!==Be.length){Be!==N[0]&&Te.push(me.length/2);var rt=this.segments2.prepareSegment(Be.length,this.layoutVertexArray,this.indexArray2),st=rt.vertexLength;this.layoutVertexArray.emplaceBack(Be[0].x,Be[0].y),this.indexArray2.emplaceBack(st+Be.length-1,st),me.push(Be[0].x),me.push(Be[0].y);for(var ht=1;ht<Be.length;ht++)this.layoutVertexArray.emplaceBack(Be[ht].x,Be[ht].y),this.indexArray2.emplaceBack(st+ht-1,st+ht),me.push(Be[ht].x),me.push(Be[ht].y);rt.vertexLength+=Be.length,rt.primitiveLength+=Be.length}}for(var gt=Oh(me,Te),Dt=0;Dt<gt.length;Dt+=3)this.indexArray.emplaceBack(le+gt[Dt],le+gt[Dt+1],le+gt[Dt+2]);re.vertexLength+=$,re.primitiveLength+=gt.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,c,w,y)},dn("FillBucket",ul,{omit:["layers","patternFeatures"]});var cy=new Os({"fill-sort-key":new Un(Ee.layout_fill["fill-sort-key"])}),I0={paint:new Os({"fill-antialias":new Yt(Ee.paint_fill["fill-antialias"]),"fill-opacity":new Un(Ee.paint_fill["fill-opacity"]),"fill-color":new Un(Ee.paint_fill["fill-color"]),"fill-outline-color":new Un(Ee.paint_fill["fill-outline-color"]),"fill-translate":new Yt(Ee.paint_fill["fill-translate"]),"fill-translate-anchor":new Yt(Ee.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ba(Ee.paint_fill["fill-pattern"])}),layout:cy},T0=function(a){function u(c){a.call(this,c,I0)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.recalculate=function(c,y){a.prototype.recalculate.call(this,c,y);var w=this.paint._values["fill-outline-color"];"constant"===w.value.kind&&void 0===w.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},u.prototype.createBucket=function(c){return new ul(c)},u.prototype.queryRadius=function(){return cu(this.paint.get("fill-translate"))},u.prototype.queryIntersectsFeature=function(c,y,w,E,C,N,$){return os(Ts(c,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),N.angle,$),E)},u.prototype.isTileClipped=function(){return!0},u}(Js),P0=ea([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,dy=Md;function Md(a,u,c,y,w){this.properties={},this.extent=c,this.type=0,this._pbf=a,this._geometry=-1,this._keys=y,this._values=w,a.readFields(D0,this,u)}function D0(a,u,c){1==a?u.id=c.readVarint():2==a?function(y,w){for(var E=y.readVarint()+y.pos;y.pos<E;){var C=w._keys[y.readVarint()],N=w._values[y.readVarint()];w.properties[C]=N}}(c,u):3==a?u.type=c.readVarint():4==a&&(u._geometry=c.pos)}function mm(a){for(var u,c,y=0,w=0,E=a.length,C=E-1;w<E;C=w++)y+=((c=a[C]).x-(u=a[w]).x)*(u.y+c.y);return y}Md.types=["Unknown","Point","LineString","Polygon"],Md.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var u,c=a.readVarint()+a.pos,y=1,w=0,E=0,C=0,N=[];a.pos<c;){if(w<=0){var $=a.readVarint();y=7&$,w=$>>3}if(w--,1===y||2===y)E+=a.readSVarint(),C+=a.readSVarint(),1===y&&(u&&N.push(u),u=[]),u.push(new T(E,C));else{if(7!==y)throw new Error("unknown command "+y);u&&u.push(u[0].clone())}}return u&&N.push(u),N},Md.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var u=a.readVarint()+a.pos,c=1,y=0,w=0,E=0,C=1/0,N=-1/0,$=1/0,Q=-1/0;a.pos<u;){if(y<=0){var ne=a.readVarint();c=7&ne,y=ne>>3}if(y--,1===c||2===c)(w+=a.readSVarint())<C&&(C=w),w>N&&(N=w),(E+=a.readSVarint())<$&&($=E),E>Q&&(Q=E);else if(7!==c)throw new Error("unknown command "+c)}return[C,$,N,Q]},Md.prototype.toGeoJSON=function(a,u,c){var y,w,E=this.extent*Math.pow(2,c),C=this.extent*a,N=this.extent*u,$=this.loadGeometry(),Q=Md.types[this.type];function ne(me){for(var Te=0;Te<me.length;Te++){var Pe=me[Te];me[Te]=[360*(Pe.x+C)/E-180,360/Math.PI*Math.atan(Math.exp((180-360*(Pe.y+N)/E)*Math.PI/180))-90]}}switch(this.type){case 1:var re=[];for(y=0;y<$.length;y++)re[y]=$[y][0];ne($=re);break;case 2:for(y=0;y<$.length;y++)ne($[y]);break;case 3:for($=function(me){var Te=me.length;if(Te<=1)return[me];for(var Pe,We,Be=[],rt=0;rt<Te;rt++){var st=mm(me[rt]);0!==st&&(void 0===We&&(We=st<0),We===st<0?(Pe&&Be.push(Pe),Pe=[me[rt]]):Pe.push(me[rt]))}return Pe&&Be.push(Pe),Be}($),y=0;y<$.length;y++)for(w=0;w<$[y].length;w++)ne($[y][w])}1===$.length?$=$[0]:Q="Multi"+Q;var le={type:"Feature",geometry:{type:Q,coordinates:$},properties:this.properties};return"id"in this&&(le.id=this.id),le};var Ef=A0;function A0(a,u){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(Sf,this,u),this.length=this._features.length}function Sf(a,u,c){15===a?u.version=c.readVarint():1===a?u.name=c.readString():5===a?u.extent=c.readVarint():2===a?u._features.push(c.pos):3===a?u._keys.push(c.readString()):4===a&&u._values.push(function(y){for(var w=null,E=y.readVarint()+y.pos;y.pos<E;){var C=y.readVarint()>>3;w=1===C?y.readString():2===C?y.readFloat():3===C?y.readDouble():4===C?y.readVarint64():5===C?y.readVarint():6===C?y.readSVarint():7===C?y.readBoolean():null}return w}(c))}function gm(a,u,c){if(3===a){var y=new Ef(c,c.readVarint()+c.pos);y.length&&(u[y.name]=y)}}A0.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var u=this._pbf.readVarint()+this._pbf.pos;return new dy(this._pbf,u,this.extent,this._keys,this._values)};var kl={VectorTile:function(a,u){this.layers=a.readFields(gm,{},u)},VectorTileFeature:dy,VectorTileLayer:Ef},R0=kl.VectorTileFeature.types,ym=Math.pow(2,13);function Cf(a,u,c,y,w,E,C,N){a.emplaceBack(u,c,2*Math.floor(y*ym)+C,w*ym*2,E*ym*2,Math.round(N))}var Mu=function(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(u){return u.id}),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new Ss,this.indexArray=new ja,this.programConfigurations=new Di(a.layers,a.zoom),this.segments=new ye,this.stateDependentLayerIds=this.layers.filter(function(u){return u.isStateDependent()}).map(function(u){return u.id})};function If(a,u){return a.x===u.x&&(a.x<0||a.x>8192)||a.y===u.y&&(a.y<0||a.y>8192)}Mu.prototype.populate=function(a,u,c){this.features=[],this.hasPattern=xf("fill-extrusion",this.layers,u);for(var y=0,w=a;y<w.length;y+=1){var E=w[y],C=E.feature,N=E.id,$=E.index,Q=E.sourceLayerIndex,ne=this.layers[0]._featureFilter.needGeometry,re=fa(C,ne);if(this.layers[0]._featureFilter.filter(new Wr(this.zoom),re,c)){var le={id:N,sourceLayerIndex:Q,index:$,geometry:ne?re.geometry:Zi(C),properties:C.properties,type:C.type,patterns:{}};this.hasPattern?this.features.push(hc("fill-extrusion",this.layers,le,this.zoom,u)):this.addFeature(le,le.geometry,$,c,{}),u.featureIndex.insert(C,le.geometry,$,Q,this.index,!0)}}},Mu.prototype.addFeatures=function(a,u,c){for(var y=0,w=this.features;y<w.length;y+=1){var E=w[y];this.addFeature(E,E.geometry,E.index,u,c)}},Mu.prototype.update=function(a,u,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,c)},Mu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Mu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Mu.prototype.upload=function(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,P0),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0},Mu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Mu.prototype.addFeature=function(a,u,c,y,w){for(var E=0,C=Fh(u,500);E<C.length;E+=1){for(var N=C[E],$=0,Q=0,ne=N;Q<ne.length;Q+=1)$+=ne[Q].length;for(var re=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),le=0,me=N;le<me.length;le+=1){var Te=me[le];if(0!==Te.length&&!((Sr=Te).every(function(rr){return rr.x<0})||Sr.every(function(rr){return rr.x>8192})||Sr.every(function(rr){return rr.y<0})||Sr.every(function(rr){return rr.y>8192})))for(var Pe=0,We=0;We<Te.length;We++){var Be=Te[We];if(We>=1){var rt=Te[We-1];if(!If(Be,rt)){re.vertexLength+4>ye.MAX_VERTEX_ARRAY_LENGTH&&(re=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var st=Be.sub(rt)._perp()._unit(),ht=rt.dist(Be);Pe+ht>32768&&(Pe=0),Cf(this.layoutVertexArray,Be.x,Be.y,st.x,st.y,0,0,Pe),Cf(this.layoutVertexArray,Be.x,Be.y,st.x,st.y,0,1,Pe),Cf(this.layoutVertexArray,rt.x,rt.y,st.x,st.y,0,0,Pe+=ht),Cf(this.layoutVertexArray,rt.x,rt.y,st.x,st.y,0,1,Pe);var gt=re.vertexLength;this.indexArray.emplaceBack(gt,gt+2,gt+1),this.indexArray.emplaceBack(gt+1,gt+2,gt+3),re.vertexLength+=4,re.primitiveLength+=2}}}}if(re.vertexLength+$>ye.MAX_VERTEX_ARRAY_LENGTH&&(re=this.segments.prepareSegment($,this.layoutVertexArray,this.indexArray)),"Polygon"===R0[a.type]){for(var Dt=[],jt=[],Xt=re.vertexLength,vn=0,en=N;vn<en.length;vn+=1){var Rn=en[vn];if(0!==Rn.length){Rn!==N[0]&&jt.push(Dt.length/2);for(var an=0;an<Rn.length;an++){var fr=Rn[an];Cf(this.layoutVertexArray,fr.x,fr.y,0,0,1,1,0),Dt.push(fr.x),Dt.push(fr.y)}}}for(var Fn=Oh(Dt,jt),hn=0;hn<Fn.length;hn+=3)this.indexArray.emplaceBack(Xt+Fn[hn],Xt+Fn[hn+2],Xt+Fn[hn+1]);re.primitiveLength+=Fn.length/3,re.vertexLength+=$}}var Sr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,c,w,y)},dn("FillExtrusionBucket",Mu,{omit:["layers","features"]});var Od={paint:new Os({"fill-extrusion-opacity":new Yt(Ee["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Un(Ee["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Yt(Ee["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Yt(Ee["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ba(Ee["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Un(Ee["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Un(Ee["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Yt(Ee["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},M0=function(a){function u(c){a.call(this,c,Od)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.createBucket=function(c){return new Mu(c)},u.prototype.queryRadius=function(){return cu(this.paint.get("fill-extrusion-translate"))},u.prototype.is3D=function(){return!0},u.prototype.queryIntersectsFeature=function(c,y,w,E,C,N,$,Q){var ne=Ts(c,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),N.angle,$),re=this.paint.get("fill-extrusion-height").evaluate(y,w),le=this.paint.get("fill-extrusion-base").evaluate(y,w),me=function(Pe,We,Be,rt){for(var st=[],ht=0,gt=Pe;ht<gt.length;ht+=1){var Dt=gt[ht],jt=[Dt.x,Dt.y,0,1];Ol(jt,jt,We),st.push(new T(jt[0]/jt[3],jt[1]/jt[3]))}return st}(ne,Q),Te=function(Pe,We,Be,rt){for(var st=[],ht=[],gt=rt[8]*We,Dt=rt[9]*We,jt=rt[10]*We,Xt=rt[11]*We,vn=rt[8]*Be,en=rt[9]*Be,Rn=rt[10]*Be,an=rt[11]*Be,fr=0,Fn=Pe;fr<Fn.length;fr+=1){for(var hn=[],Sr=[],rr=0,Fr=Fn[fr];rr<Fr.length;rr+=1){var Sn=Fr[rr],Zr=Sn.x,Ni=Sn.y,ki=rt[0]*Zr+rt[4]*Ni+rt[12],oo=rt[1]*Zr+rt[5]*Ni+rt[13],$i=rt[2]*Zr+rt[6]*Ni+rt[14],fo=rt[3]*Zr+rt[7]*Ni+rt[15],Fo=$i+jt,Go=fo+Xt,Ga=ki+vn,ia=oo+en,Ha=$i+Rn,ao=fo+an,oa=new T((ki+gt)/Go,(oo+Dt)/Go);oa.z=Fo/Go,hn.push(oa);var Mr=new T(Ga/ao,ia/ao);Mr.z=Ha/ao,Sr.push(Mr)}st.push(hn),ht.push(Sr)}return[st,ht]}(E,le,re,Q);return function(Pe,We,Be){var rt=1/0;os(Be,We)&&(rt=vm(Be,We[0]));for(var st=0;st<We.length;st++)for(var ht=We[st],gt=Pe[st],Dt=0;Dt<ht.length-1;Dt++){var jt=ht[Dt],Xt=[jt,ht[Dt+1],gt[Dt+1],gt[Dt],jt];Ua(Be,Xt)&&(rt=Math.min(rt,vm(Be,Xt)))}return rt!==1/0&&rt}(Te[0],Te[1],me)},u}(Js);function tr(a,u){return a.x*u.x+a.y*u.y}function vm(a,u){if(1===a.length){for(var c,y=0,w=u[y++];!c||w.equals(c);)if(!(c=u[y++]))return 1/0;for(;y<u.length;y++){var E=u[y],C=a[0],N=c.sub(w),$=E.sub(w),Q=C.sub(w),ne=tr(N,N),re=tr(N,$),le=tr($,$),me=tr(Q,N),Te=tr(Q,$),Pe=ne*le-re*re,We=(le*me-re*Te)/Pe,Be=(ne*Te-re*me)/Pe,rt=w.z*(1-We-Be)+c.z*We+E.z*Be;if(isFinite(rt))return rt}return 1/0}for(var st=1/0,ht=0,gt=u;ht<gt.length;ht+=1)st=Math.min(st,gt[ht].z);return st}var na=ea([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,_m=ea([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Tf=kl.VectorTileFeature.types,O0=Math.cos(Math.PI/180*37.5),fy=Math.pow(2,14)/.5,ss=function(a){var u=this;this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(c){return c.id}),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(c){u.gradients[c.id]={}}),this.layoutVertexArray=new Pd,this.layoutVertexArray2=new ro,this.indexArray=new ja,this.programConfigurations=new Di(a.layers,a.zoom),this.segments=new ye,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(c){return c.isStateDependent()}).map(function(c){return c.id})};ss.prototype.populate=function(a,u,c){this.hasPattern=xf("line",this.layers,u);for(var y=this.layers[0].layout.get("line-sort-key"),w=!y.isConstant(),E=[],C=0,N=a;C<N.length;C+=1){var $=N[C],Q=$.feature,ne=$.id,re=$.index,le=$.sourceLayerIndex,me=this.layers[0]._featureFilter.needGeometry,Te=fa(Q,me);if(this.layers[0]._featureFilter.filter(new Wr(this.zoom),Te,c)){var Pe=w?y.evaluate(Te,{},c):void 0,We={id:ne,properties:Q.properties,type:Q.type,sourceLayerIndex:le,index:re,geometry:me?Te.geometry:Zi(Q),patterns:{},sortKey:Pe};E.push(We)}}w&&E.sort(function(Xt,vn){return Xt.sortKey-vn.sortKey});for(var Be=0,rt=E;Be<rt.length;Be+=1){var st=rt[Be],ht=st.geometry,gt=st.index,Dt=st.sourceLayerIndex;if(this.hasPattern){var jt=hc("line",this.layers,st,this.zoom,u);this.patternFeatures.push(jt)}else this.addFeature(st,ht,gt,c,{});u.featureIndex.insert(a[gt].feature,ht,gt,Dt,this.index)}},ss.prototype.update=function(a,u,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,c)},ss.prototype.addFeatures=function(a,u,c){for(var y=0,w=this.patternFeatures;y<w.length;y+=1){var E=w[y];this.addFeature(E,E.geometry,E.index,u,c)}},ss.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ss.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ss.prototype.upload=function(a){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,_m)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,na),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0},ss.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ss.prototype.lineFeatureClips=function(a){if(a.properties&&a.properties.hasOwnProperty("mapbox_clip_start")&&a.properties.hasOwnProperty("mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}},ss.prototype.addFeature=function(a,u,c,y,w){var E=this.layers[0].layout,C=E.get("line-join").evaluate(a,{}),N=E.get("line-cap"),$=E.get("line-miter-limit"),Q=E.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(var ne=0,re=u;ne<re.length;ne+=1)this.addLine(re[ne],a,C,N,$,Q);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,c,w,y)},ss.prototype.addLine=function(a,u,c,y,w,E){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var C=0;C<a.length-1;C++)this.totalDistance+=a[C].dist(a[C+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var N="Polygon"===Tf[u.type],$=a.length;$>=2&&a[$-1].equals(a[$-2]);)$--;for(var Q=0;Q<$-1&&a[Q].equals(a[Q+1]);)Q++;if(!($<(N?3:2))){"bevel"===c&&(w=1.05);var ne,re=this.overscaling<=16?122880/(512*this.overscaling):0,le=this.segments.prepareSegment(10*$,this.layoutVertexArray,this.indexArray),me=void 0,Te=void 0,Pe=void 0,We=void 0;this.e1=this.e2=-1,N&&(We=a[Q].sub(ne=a[$-2])._unit()._perp());for(var Be=Q;Be<$;Be++)if(!(Te=Be===$-1?N?a[Q+1]:void 0:a[Be+1])||!a[Be].equals(Te)){We&&(Pe=We),ne&&(me=ne),ne=a[Be],We=Te?Te.sub(ne)._unit()._perp():Pe;var rt=(Pe=Pe||We).add(We);0===rt.x&&0===rt.y||rt._unit();var st=Pe.x*We.x+Pe.y*We.y,ht=rt.x*We.x+rt.y*We.y,gt=0!==ht?1/ht:1/0,Dt=2*Math.sqrt(2-2*ht),jt=ht<O0&&me&&Te,Xt=Pe.x*We.y-Pe.y*We.x>0;if(jt&&Be>Q){var vn=ne.dist(me);if(vn>2*re){var en=ne.sub(ne.sub(me)._mult(re/vn)._round());this.updateDistance(me,en),this.addCurrentVertex(en,Pe,0,0,le),me=en}}var Rn=me&&Te,an=Rn?c:N?"butt":y;if(Rn&&"round"===an&&(gt<E?an="miter":gt<=2&&(an="fakeround")),"miter"===an&&gt>w&&(an="bevel"),"bevel"===an&&(gt>2&&(an="flipbevel"),gt<w&&(an="miter")),me&&this.updateDistance(me,ne),"miter"===an)rt._mult(gt),this.addCurrentVertex(ne,rt,0,0,le);else if("flipbevel"===an){if(gt>100)rt=We.mult(-1);else{var fr=gt*Pe.add(We).mag()/Pe.sub(We).mag();rt._perp()._mult(fr*(Xt?-1:1))}this.addCurrentVertex(ne,rt,0,0,le),this.addCurrentVertex(ne,rt.mult(-1),0,0,le)}else if("bevel"===an||"fakeround"===an){var Fn=-Math.sqrt(gt*gt-1),hn=Xt?Fn:0,Sr=Xt?0:Fn;if(me&&this.addCurrentVertex(ne,Pe,hn,Sr,le),"fakeround"===an)for(var rr=Math.round(180*Dt/Math.PI/20),Fr=1;Fr<rr;Fr++){var Sn=Fr/rr;if(.5!==Sn){var Zr=Sn-.5;Sn+=Sn*Zr*(Sn-1)*((1.0904+st*(st*(3.55645-1.43519*st)-3.2452))*Zr*Zr+(.848013+st*(.215638*st-1.06021)))}var Ni=We.sub(Pe)._mult(Sn)._add(Pe)._unit()._mult(Xt?-1:1);this.addHalfVertex(ne,Ni.x,Ni.y,!1,Xt,0,le)}Te&&this.addCurrentVertex(ne,We,-hn,-Sr,le)}else if("butt"===an)this.addCurrentVertex(ne,rt,0,0,le);else if("square"===an){var ki=me?1:-1;this.addCurrentVertex(ne,rt,ki,ki,le)}else"round"===an&&(me&&(this.addCurrentVertex(ne,Pe,0,0,le),this.addCurrentVertex(ne,Pe,1,1,le,!0)),Te&&(this.addCurrentVertex(ne,We,-1,-1,le,!0),this.addCurrentVertex(ne,We,0,0,le)));if(jt&&Be<$-1){var oo=ne.dist(Te);if(oo>2*re){var $i=ne.add(Te.sub(ne)._mult(re/oo)._round());this.updateDistance(ne,$i),this.addCurrentVertex($i,We,0,0,le),ne=$i}}}}},ss.prototype.addCurrentVertex=function(a,u,c,y,w,E){void 0===E&&(E=!1);var C=u.y*y-u.x,N=-u.y-u.x*y;this.addHalfVertex(a,u.x+u.y*c,u.y-u.x*c,E,!1,c,w),this.addHalfVertex(a,C,N,E,!0,-y,w),this.distance>fy/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(a,u,c,y,w,E))},ss.prototype.addHalfVertex=function(a,u,c,y,w,E,C){var N=.5*(this.lineClips?this.scaledDistance*(fy-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a.x<<1)+(y?1:0),(a.y<<1)+(w?1:0),Math.round(63*u)+128,Math.round(63*c)+128,1+(0===E?0:E<0?-1:1)|(63&N)<<2,N>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var $=C.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,$),C.primitiveLength++),w?this.e2=$:this.e1=$},ss.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},ss.prototype.updateDistance=function(a,u){this.distance+=a.dist(u),this.updateScaledDistance()},dn("LineBucket",ss,{omit:["layers","patternFeatures"]});var bm=new Os({"line-cap":new Yt(Ee.layout_line["line-cap"]),"line-join":new Un(Ee.layout_line["line-join"]),"line-miter-limit":new Yt(Ee.layout_line["line-miter-limit"]),"line-round-limit":new Yt(Ee.layout_line["line-round-limit"]),"line-sort-key":new Un(Ee.layout_line["line-sort-key"])}),Ld={paint:new Os({"line-opacity":new Un(Ee.paint_line["line-opacity"]),"line-color":new Un(Ee.paint_line["line-color"]),"line-translate":new Yt(Ee.paint_line["line-translate"]),"line-translate-anchor":new Yt(Ee.paint_line["line-translate-anchor"]),"line-width":new Un(Ee.paint_line["line-width"]),"line-gap-width":new Un(Ee.paint_line["line-gap-width"]),"line-offset":new Un(Ee.paint_line["line-offset"]),"line-blur":new Un(Ee.paint_line["line-blur"]),"line-dasharray":new Jn(Ee.paint_line["line-dasharray"]),"line-pattern":new Ba(Ee.paint_line["line-pattern"]),"line-gradient":new Iu(Ee.paint_line["line-gradient"])}),layout:bm},wm=new(function(a){function u(){a.apply(this,arguments)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.possiblyEvaluate=function(c,y){return y=new Wr(Math.floor(y.zoom),{now:y.now,fadeDuration:y.fadeDuration,zoomHistory:y.zoomHistory,transition:y.transition}),a.prototype.possiblyEvaluate.call(this,c,y)},u.prototype.evaluate=function(c,y,w,E){return y=be({},y,{zoom:Math.floor(y.zoom)}),a.prototype.evaluate.call(this,c,y,w,E)},u}(Un))(Ld.paint.properties["line-width"].specification);wm.useIntegerZoom=!0;var Pf=function(a){function u(c){a.call(this,c,Ld),this.gradientVersion=0}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype._handleSpecialPaintPropertyUpdate=function(c){"line-gradient"===c&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof ga,this.gradientVersion=(this.gradientVersion+1)%Z)},u.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},u.prototype.recalculate=function(c,y){a.prototype.recalculate.call(this,c,y),this.paint._values["line-floorwidth"]=wm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)},u.prototype.createBucket=function(c){return new ss(c)},u.prototype.queryRadius=function(c){var y=c,w=hy(mo("line-width",this,y),mo("line-gap-width",this,y)),E=mo("line-offset",this,y);return w/2+Math.abs(E)+cu(this.paint.get("line-translate"))},u.prototype.queryIntersectsFeature=function(c,y,w,E,C,N,$){var Q=Ts(c,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),N.angle,$),ne=$/2*hy(this.paint.get("line-width").evaluate(y,w),this.paint.get("line-gap-width").evaluate(y,w)),re=this.paint.get("line-offset").evaluate(y,w);return re&&(E=function(le,me){for(var Te=[],Pe=new T(0,0),We=0;We<le.length;We++){for(var Be=le[We],rt=[],st=0;st<Be.length;st++){var ht=Be[st],gt=Be[st+1],Dt=0===st?Pe:ht.sub(Be[st-1])._unit()._perp(),jt=st===Be.length-1?Pe:gt.sub(ht)._unit()._perp(),Xt=Dt._add(jt)._unit();Xt._mult(1/(Xt.x*jt.x+Xt.y*jt.y)),rt.push(Xt._mult(me)._add(ht))}Te.push(rt)}return Te}(E,re*$)),function(le,me,Te){for(var Pe=0;Pe<me.length;Pe++){var We=me[Pe];if(le.length>=3)for(var Be=0;Be<We.length;Be++)if(Du(le,We[Be]))return!0;if(sc(le,We,Te))return!0}return!1}(Q,E,ne)},u.prototype.isTileClipped=function(){return!0},u}(Js);function hy(a,u){return u>0?u+2*a:a}var py=ea([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Df=ea([{name:"a_projected_pos",components:3,type:"Float32"}],4),zh=(ea([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ea([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),xm=(ea([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),ea([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),L0=ea([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function N0(a,u,c){return a.sections.forEach(function(y){var w,C,N;y.text=(w=y.text,C=c,"uppercase"===(N=u.layout.get("text-transform").evaluate(C,{}))?w=w.toLocaleUpperCase():"lowercase"===N&&(w=w.toLocaleLowerCase()),no.applyArabicShaping&&(w=no.applyArabicShaping(w)),w)}),a}ea([{name:"triangle",components:3,type:"Uint16"}]),ea([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ea([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ea([{type:"Float32",name:"offsetX"}]),ea([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ll={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Nd=function(a,u,c,y,w){var E,C,N=8*w-y-1,$=(1<<N)-1,Q=$>>1,ne=-7,re=c?w-1:0,le=c?-1:1,me=a[u+re];for(re+=le,E=me&(1<<-ne)-1,me>>=-ne,ne+=N;ne>0;E=256*E+a[u+re],re+=le,ne-=8);for(C=E&(1<<-ne)-1,E>>=-ne,ne+=y;ne>0;C=256*C+a[u+re],re+=le,ne-=8);if(0===E)E=1-Q;else{if(E===$)return C?NaN:1/0*(me?-1:1);C+=Math.pow(2,y),E-=Q}return(me?-1:1)*C*Math.pow(2,E-y)},my=function(a,u,c,y,w,E){var C,N,$,Q=8*E-w-1,ne=(1<<Q)-1,re=ne>>1,le=23===w?Math.pow(2,-24)-Math.pow(2,-77):0,me=y?0:E-1,Te=y?1:-1,Pe=u<0||0===u&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(N=isNaN(u)?1:0,C=ne):(C=Math.floor(Math.log(u)/Math.LN2),u*($=Math.pow(2,-C))<1&&(C--,$*=2),(u+=C+re>=1?le/$:le*Math.pow(2,1-re))*$>=2&&(C++,$/=2),C+re>=ne?(N=0,C=ne):C+re>=1?(N=(u*$-1)*Math.pow(2,w),C+=re):(N=u*Math.pow(2,re-1)*Math.pow(2,w),C=0));w>=8;a[c+me]=255&N,me+=Te,N/=256,w-=8);for(C=C<<w|N,Q+=w;Q>0;a[c+me]=255&C,me+=Te,C/=256,Q-=8);a[c+me-Te]|=128*Pe},Em=Ai;function Ai(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}Ai.Varint=0,Ai.Fixed64=1,Ai.Bytes=2,Ai.Fixed32=5;var gy=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function pc(a){return a.type===Ai.Bytes?a.readVarint()+a.pos:a.pos+1}function yy(a,u,c){var y=u<=16383?1:u<=2097151?2:u<=268435455?3:Math.floor(Math.log(u)/(7*Math.LN2));c.realloc(y);for(var w=c.pos-1;w>=a;w--)c.buf[w+y]=c.buf[w]}function k0(a,u){for(var c=0;c<a.length;c++)u.writeVarint(a[c])}function Bh(a,u){for(var c=0;c<a.length;c++)u.writeSVarint(a[c])}function vy(a,u){for(var c=0;c<a.length;c++)u.writeFloat(a[c])}function F0(a,u){for(var c=0;c<a.length;c++)u.writeDouble(a[c])}function _y(a,u){for(var c=0;c<a.length;c++)u.writeBoolean(a[c])}function Qx(a,u){for(var c=0;c<a.length;c++)u.writeFixed32(a[c])}function by(a,u){for(var c=0;c<a.length;c++)u.writeSFixed32(a[c])}function eE(a,u){for(var c=0;c<a.length;c++)u.writeFixed64(a[c])}function Sm(a,u){for(var c=0;c<a.length;c++)u.writeSFixed64(a[c])}function jh(a,u){return(a[u]|a[u+1]<<8|a[u+2]<<16)+16777216*a[u+3]}function Hc(a,u,c){a[c]=u,a[c+1]=u>>>8,a[c+2]=u>>>16,a[c+3]=u>>>24}function Af(a,u){return(a[u]|a[u+1]<<8|a[u+2]<<16)+(a[u+3]<<24)}function Cm(a,u,c){1===a&&c.readMessage(Fd,u)}function Fd(a,u,c){if(3===a){var y=c.readMessage(z0,{}),w=y.width,E=y.height,C=y.left,N=y.top,$=y.advance;u.push({id:y.id,bitmap:new Vc({width:w+6,height:E+6},y.bitmap),metrics:{width:w,height:E,left:C,top:N,advance:$}})}}function z0(a,u,c){1===a?u.id=c.readVarint():2===a?u.bitmap=c.readBytes():3===a?u.width=c.readVarint():4===a?u.height=c.readVarint():5===a?u.left=c.readSVarint():6===a?u.top=c.readSVarint():7===a&&(u.advance=c.readVarint())}function wy(a){for(var u=0,c=0,y=0,w=a;y<w.length;y+=1){var E=w[y];u+=E.w*E.h,c=Math.max(c,E.w)}a.sort(function(Pe,We){return We.h-Pe.h});for(var C=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),c),h:1/0}],N=0,$=0,Q=0,ne=a;Q<ne.length;Q+=1)for(var re=ne[Q],le=C.length-1;le>=0;le--){var me=C[le];if(!(re.w>me.w||re.h>me.h)){if(re.x=me.x,re.y=me.y,$=Math.max($,re.y+re.h),N=Math.max(N,re.x+re.w),re.w===me.w&&re.h===me.h){var Te=C.pop();le<C.length&&(C[le]=Te)}else re.h===me.h?(me.x+=re.w,me.w-=re.w):re.w===me.w?(me.y+=re.h,me.h-=re.h):(C.push({x:me.x+re.w,y:me.y,w:me.w-re.w,h:re.h}),me.y+=re.h,me.h-=re.h);break}}return{w:N,h:$,fill:u/(N*$)||0}}Ai.prototype={destroy:function(){this.buf=null},readFields:function(a,u,c){for(c=c||this.length;this.pos<c;){var y=this.readVarint(),w=y>>3,E=this.pos;this.type=7&y,a(w,u,this),this.pos===E&&this.skip(y)}return u},readMessage:function(a,u){return this.readFields(a,u,this.readVarint()+this.pos)},readFixed32:function(){var a=jh(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=Af(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=jh(this.buf,this.pos)+4294967296*jh(this.buf,this.pos+4);return this.pos+=8,a},readSFixed64:function(){var a=jh(this.buf,this.pos)+4294967296*Af(this.buf,this.pos+4);return this.pos+=8,a},readFloat:function(){var a=Nd(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=Nd(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var u,c,y=this.buf;return u=127&(c=y[this.pos++]),c<128?u:(u|=(127&(c=y[this.pos++]))<<7,c<128?u:(u|=(127&(c=y[this.pos++]))<<14,c<128?u:(u|=(127&(c=y[this.pos++]))<<21,c<128?u:function(w,E,C){var N,$,Q=C.buf;if(N=(112&($=Q[C.pos++]))>>4,$<128||(N|=(127&($=Q[C.pos++]))<<3,$<128)||(N|=(127&($=Q[C.pos++]))<<10,$<128)||(N|=(127&($=Q[C.pos++]))<<17,$<128)||(N|=(127&($=Q[C.pos++]))<<24,$<128)||(N|=(1&($=Q[C.pos++]))<<31,$<128))return function kd(a,u,c){return c?4294967296*u+(a>>>0):4294967296*(u>>>0)+(a>>>0)}(w,N,E);throw new Error("Expected varint not more than 10 bytes")}(u|=(15&(c=y[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var a=this.readVarint()+this.pos,u=this.pos;return this.pos=a,a-u>=12&&gy?gy.decode(this.buf.subarray(u,a)):function(c,y,w){for(var E="",C=y;C<w;){var N,$,Q,ne=c[C],re=null,le=ne>239?4:ne>223?3:ne>191?2:1;if(C+le>w)break;1===le?ne<128&&(re=ne):2===le?128==(192&(N=c[C+1]))&&(re=(31&ne)<<6|63&N)<=127&&(re=null):3===le?($=c[C+2],128==(192&(N=c[C+1]))&&128==(192&$)&&((re=(15&ne)<<12|(63&N)<<6|63&$)<=2047||re>=55296&&re<=57343)&&(re=null)):4===le&&($=c[C+2],Q=c[C+3],128==(192&(N=c[C+1]))&&128==(192&$)&&128==(192&Q)&&((re=(15&ne)<<18|(63&N)<<12|(63&$)<<6|63&Q)<=65535||re>=1114112)&&(re=null)),null===re?(re=65533,le=1):re>65535&&(re-=65536,E+=String.fromCharCode(re>>>10&1023|55296),re=56320|1023&re),E+=String.fromCharCode(re),C+=le}return E}(this.buf,u,a)},readBytes:function(){var a=this.readVarint()+this.pos,u=this.buf.subarray(this.pos,a);return this.pos=a,u},readPackedVarint:function(a,u){if(this.type!==Ai.Bytes)return a.push(this.readVarint(u));var c=pc(this);for(a=a||[];this.pos<c;)a.push(this.readVarint(u));return a},readPackedSVarint:function(a){if(this.type!==Ai.Bytes)return a.push(this.readSVarint());var u=pc(this);for(a=a||[];this.pos<u;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==Ai.Bytes)return a.push(this.readBoolean());var u=pc(this);for(a=a||[];this.pos<u;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==Ai.Bytes)return a.push(this.readFloat());var u=pc(this);for(a=a||[];this.pos<u;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==Ai.Bytes)return a.push(this.readDouble());var u=pc(this);for(a=a||[];this.pos<u;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==Ai.Bytes)return a.push(this.readFixed32());var u=pc(this);for(a=a||[];this.pos<u;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==Ai.Bytes)return a.push(this.readSFixed32());var u=pc(this);for(a=a||[];this.pos<u;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==Ai.Bytes)return a.push(this.readFixed64());var u=pc(this);for(a=a||[];this.pos<u;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==Ai.Bytes)return a.push(this.readSFixed64());var u=pc(this);for(a=a||[];this.pos<u;)a.push(this.readSFixed64());return a},skip:function(a){var u=7&a;if(u===Ai.Varint)for(;this.buf[this.pos++]>127;);else if(u===Ai.Bytes)this.pos=this.readVarint()+this.pos;else if(u===Ai.Fixed32)this.pos+=4;else{if(u!==Ai.Fixed64)throw new Error("Unimplemented type: "+u);this.pos+=8}},writeTag:function(a,u){this.writeVarint(a<<3|u)},realloc:function(a){for(var u=this.length||16;u<this.pos+a;)u*=2;if(u!==this.length){var c=new Uint8Array(u);c.set(this.buf),this.buf=c,this.length=u}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),Hc(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),Hc(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),Hc(this.buf,-1&a,this.pos),Hc(this.buf,Math.floor(a*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),Hc(this.buf,-1&a,this.pos),Hc(this.buf,Math.floor(a*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(u,c){var y,w,E,N;if(u>=0?(y=u%4294967296|0,w=u/4294967296|0):(w=~(-u/4294967296),4294967295^(y=~(-u%4294967296))?y=y+1|0:(y=0,w=w+1|0)),u>=0x10000000000000000||u<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");c.realloc(10),E=y,(N=c).buf[N.pos++]=127&E|128,E>>>=7,N.buf[N.pos++]=127&E|128,E>>>=7,N.buf[N.pos++]=127&E|128,E>>>=7,N.buf[N.pos++]=127&E|128,N.buf[N.pos]=127&(E>>>=7),function(E,C){var N=(7&E)<<4;C.buf[C.pos++]|=N|((E>>>=3)?128:0),E&&(C.buf[C.pos++]=127&E|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=127&E|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=127&E|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=127&E|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=127&E)))))}(w,c)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(Boolean(a))},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var u=this.pos;this.pos=function(y,w,E){for(var C,N,$=0;$<w.length;$++){if((C=w.charCodeAt($))>55295&&C<57344){if(!N){C>56319||$+1===w.length?(y[E++]=239,y[E++]=191,y[E++]=189):N=C;continue}if(C<56320){y[E++]=239,y[E++]=191,y[E++]=189,N=C;continue}C=N-55296<<10|C-56320|65536,N=null}else N&&(y[E++]=239,y[E++]=191,y[E++]=189,N=null);C<128?y[E++]=C:(C<2048?y[E++]=C>>6|192:(C<65536?y[E++]=C>>12|224:(y[E++]=C>>18|240,y[E++]=C>>12&63|128),y[E++]=C>>6&63|128),y[E++]=63&C|128)}return E}(this.buf,a,this.pos);var c=this.pos-u;c>=128&&yy(u,c,this),this.pos=u-1,this.writeVarint(c),this.pos+=c},writeFloat:function(a){this.realloc(4),my(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),my(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var u=a.length;this.writeVarint(u),this.realloc(u);for(var c=0;c<u;c++)this.buf[this.pos++]=a[c]},writeRawMessage:function(a,u){this.pos++;var c=this.pos;a(u,this);var y=this.pos-c;y>=128&&yy(c,y,this),this.pos=c-1,this.writeVarint(y),this.pos+=y},writeMessage:function(a,u,c){this.writeTag(a,Ai.Bytes),this.writeRawMessage(u,c)},writePackedVarint:function(a,u){u.length&&this.writeMessage(a,k0,u)},writePackedSVarint:function(a,u){u.length&&this.writeMessage(a,Bh,u)},writePackedBoolean:function(a,u){u.length&&this.writeMessage(a,_y,u)},writePackedFloat:function(a,u){u.length&&this.writeMessage(a,vy,u)},writePackedDouble:function(a,u){u.length&&this.writeMessage(a,F0,u)},writePackedFixed32:function(a,u){u.length&&this.writeMessage(a,Qx,u)},writePackedSFixed32:function(a,u){u.length&&this.writeMessage(a,by,u)},writePackedFixed64:function(a,u){u.length&&this.writeMessage(a,eE,u)},writePackedSFixed64:function(a,u){u.length&&this.writeMessage(a,Sm,u)},writeBytesField:function(a,u){this.writeTag(a,Ai.Bytes),this.writeBytes(u)},writeFixed32Field:function(a,u){this.writeTag(a,Ai.Fixed32),this.writeFixed32(u)},writeSFixed32Field:function(a,u){this.writeTag(a,Ai.Fixed32),this.writeSFixed32(u)},writeFixed64Field:function(a,u){this.writeTag(a,Ai.Fixed64),this.writeFixed64(u)},writeSFixed64Field:function(a,u){this.writeTag(a,Ai.Fixed64),this.writeSFixed64(u)},writeVarintField:function(a,u){this.writeTag(a,Ai.Varint),this.writeVarint(u)},writeSVarintField:function(a,u){this.writeTag(a,Ai.Varint),this.writeSVarint(u)},writeStringField:function(a,u){this.writeTag(a,Ai.Bytes),this.writeString(u)},writeFloatField:function(a,u){this.writeTag(a,Ai.Fixed32),this.writeFloat(u)},writeDoubleField:function(a,u){this.writeTag(a,Ai.Fixed64),this.writeDouble(u)},writeBooleanField:function(a,u){this.writeVarintField(a,Boolean(u))}};var Im=function(a,u){var c=u.pixelRatio,y=u.version,w=u.stretchX,E=u.stretchY,C=u.content;this.paddedRect=a,this.pixelRatio=c,this.stretchX=w,this.stretchY=E,this.content=C,this.version=y},mc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};mc.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},mc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},mc.tlbr.get=function(){return this.tl.concat(this.br)},mc.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Im.prototype,mc);var $c=function(a,u){var c={},y={};this.haveRenderCallbacks=[];var w=[];this.addImages(a,c,w),this.addImages(u,y,w);var E=wy(w),C=new Va({width:E.w||1,height:E.h||1});for(var N in a){var $=a[N],Q=c[N].paddedRect;Va.copy($.data,C,{x:0,y:0},{x:Q.x+1,y:Q.y+1},$.data)}for(var ne in u){var re=u[ne],le=y[ne].paddedRect,me=le.x+1,Te=le.y+1,Pe=re.data.width,We=re.data.height;Va.copy(re.data,C,{x:0,y:0},{x:me,y:Te},re.data),Va.copy(re.data,C,{x:0,y:We-1},{x:me,y:Te-1},{width:Pe,height:1}),Va.copy(re.data,C,{x:0,y:0},{x:me,y:Te+We},{width:Pe,height:1}),Va.copy(re.data,C,{x:Pe-1,y:0},{x:me-1,y:Te},{width:1,height:We}),Va.copy(re.data,C,{x:0,y:0},{x:me+Pe,y:Te},{width:1,height:We})}this.image=C,this.iconPositions=c,this.patternPositions=y};$c.prototype.addImages=function(a,u,c){for(var y in a){var w=a[y],E={x:0,y:0,w:w.data.width+2,h:w.data.height+2};c.push(E),u[y]=new Im(E,w),w.hasRenderCallback&&this.haveRenderCallbacks.push(y)}},$c.prototype.patchUpdatedImages=function(a,u){for(var c in a.dispatchRenderCallbacks(this.haveRenderCallbacks),a.updatedImages)this.patchUpdatedImage(this.iconPositions[c],a.getImage(c),u),this.patchUpdatedImage(this.patternPositions[c],a.getImage(c),u)},$c.prototype.patchUpdatedImage=function(a,u,c){if(a&&u&&a.version!==u.version){a.version=u.version;var y=a.tl;c.update(u.data,void 0,{x:y[0],y:y[1]})}},dn("ImagePosition",Im),dn("ImageAtlas",$c);var Ls={horizontal:1,vertical:2,horizontalOnly:3},qc=function(){this.scale=1,this.fontStack="",this.imageName=null};qc.forText=function(a,u){var c=new qc;return c.scale=a||1,c.fontStack=u,c},qc.forImage=function(a){var u=new qc;return u.imageName=a,u};var Ca=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Rf(a,u,c,y,w,E,C,N,$,Q,ne,re,le,me,Te,Pe){var We,Be=Ca.fromFeature(a,w);re===Ls.vertical&&Be.verticalizePunctuation();var rt=no.processBidirectionalText,st=no.processStyledBidirectionalText;if(rt&&1===Be.sections.length){We=[];for(var ht=0,gt=rt(Be.toString(),Wc(Be,Q,E,u,y,me,Te));ht<gt.length;ht+=1){var Dt=gt[ht],jt=new Ca;jt.text=Dt,jt.sections=Be.sections;for(var Xt=0;Xt<Dt.length;Xt++)jt.sectionIndex.push(0);We.push(jt)}}else if(st){We=[];for(var vn=0,en=st(Be.text,Be.sectionIndex,Wc(Be,Q,E,u,y,me,Te));vn<en.length;vn+=1){var Rn=en[vn],an=new Ca;an.text=Rn[0],an.sectionIndex=Rn[1],an.sections=Be.sections,We.push(an)}}else We=function(hn,Sr){for(var rr=[],Fr=hn.text,Sn=0,Zr=0,Ni=Sr;Zr<Ni.length;Zr+=1){var ki=Ni[Zr];rr.push(hn.substring(Sn,ki)),Sn=ki}return Sn<Fr.length&&rr.push(hn.substring(Sn,Fr.length)),rr}(Be,Wc(Be,Q,E,u,y,me,Te));var fr=[],Fn={positionedLines:fr,text:Be.toString(),top:ne[1],bottom:ne[1],left:ne[0],right:ne[0],writingMode:re,iconsInText:!1,verticalizable:!1};return function(hn,Sr,rr,Fr,Sn,Zr,Ni,ki,oo,$i,fo,Fo){for(var Go=0,Ga=-17,ia=0,Ha=0,ao="right"===ki?1:"left"===ki?0:.5,oa=0,Mr=0,Si=Sn;Mr<Si.length;Mr+=1){var di=Si[Mr];di.trim();var Gr=di.getMaxScale(),us=24*(Gr-1),Ci={positionedGlyphs:[],lineOffset:0};hn.positionedLines[oa]=Ci;var Ri=Ci.positionedGlyphs,vo=0;if(di.length()){for(var aa=0;aa<di.length();aa++){var ir=di.getSection(aa),Ys=di.getSectionIndex(aa),Ds=di.getCharCode(aa),hl=0,_o=null,Ju=null,Lu=null,ed=24,td=!(oo===Ls.horizontal||!fo&&!Nc(Ds)||fo&&(Uh[Ds]||(ls=Ds,fn.Arabic(ls)||fn["Arabic Supplement"](ls)||fn["Arabic Extended-A"](ls)||fn["Arabic Presentation Forms-A"](ls)||fn["Arabic Presentation Forms-B"](ls))));if(ir.imageName){var nd=Fr[ir.imageName];if(!nd)continue;Lu=ir.imageName,hn.iconsInText=hn.iconsInText||!0,Ju=nd.paddedRect;var zl=nd.displaySize;ir.scale=24*ir.scale/Fo,hl=us+(24-zl[1]*ir.scale),ed=(_o={width:zl[0],height:zl[1],left:1,top:-3,advance:td?zl[1]:zl[0]}).advance;var Ud=td?zl[0]*ir.scale-24*Gr:zl[1]*ir.scale-24*Gr;Ud>0&&Ud>vo&&(vo=Ud)}else{var Kh=rr[ir.fontStack],Vd=Kh&&Kh[Ds];if(Vd&&Vd.rect)Ju=Vd.rect,_o=Vd.metrics;else{var Bf=Sr[ir.fontStack],Yh=Bf&&Bf[Ds];if(!Yh)continue;_o=Yh.metrics}hl=24*(Gr-ir.scale)}td?(hn.verticalizable=!0,Ri.push({glyph:Ds,imageName:Lu,x:Go,y:Ga+hl,vertical:td,scale:ir.scale,fontStack:ir.fontStack,sectionIndex:Ys,metrics:_o,rect:Ju}),Go+=ed*ir.scale+$i):(Ri.push({glyph:Ds,imageName:Lu,x:Go,y:Ga+hl,vertical:td,scale:ir.scale,fontStack:ir.fontStack,sectionIndex:Ys,metrics:_o,rect:Ju}),Go+=_o.advance*ir.scale+$i)}0!==Ri.length&&(ia=Math.max(Go-$i,ia),tE(Ri,0,Ri.length-1,ao,vo)),Go=0;var Bl=Zr*Gr+vo;Ci.lineOffset=Math.max(vo,us),Ga+=Bl,Ha=Math.max(Bl,Ha),++oa}else Ga+=Zr,++oa}var ls,jf=Ga- -17,Gd=Tm(Ni),rd=Gd.horizontalAlign,Uf=Gd.verticalAlign;(function(Vf,Um,$a,id,Hd,Gf,$d,Hf,_c){var qd,$f=(Um-$a)*Hd;qd=Gf!==$d?-Hf*id- -17:(-id*_c+.5)*$d;for(var bc=0,od=Vf;bc<od.length;bc+=1)for(var wc=0,Xh=od[bc].positionedGlyphs;wc<Xh.length;wc+=1){var Ku=Xh[wc];Ku.x+=$f,Ku.y+=qd}})(hn.positionedLines,ao,rd,Uf,ia,Ha,Zr,jf,Sn.length),hn.top+=-Uf*jf,hn.bottom=hn.top+jf,hn.left+=-rd*ia,hn.right=hn.left+ia}(Fn,u,c,y,We,C,N,$,re,Q,le,Pe),!function(hn){for(var Sr=0,rr=hn;Sr<rr.length;Sr+=1)if(0!==rr[Sr].positionedGlyphs.length)return!1;return!0}(fr)&&Fn}Ca.fromFeature=function(a,u){for(var c=new Ca,y=0;y<a.sections.length;y++){var w=a.sections[y];w.image?c.addImageSection(w):c.addTextSection(w,u)}return c},Ca.prototype.length=function(){return this.text.length},Ca.prototype.getSection=function(a){return this.sections[this.sectionIndex[a]]},Ca.prototype.getSectionIndex=function(a){return this.sectionIndex[a]},Ca.prototype.getCharCode=function(a){return this.text.charCodeAt(a)},Ca.prototype.verticalizePunctuation=function(){this.text=function(a){for(var u="",c=0;c<a.length;c++){var y=a.charCodeAt(c+1)||null,w=a.charCodeAt(c-1)||null;u+=y&&Ms(y)&&!ll[a[c+1]]||w&&Ms(w)&&!ll[a[c-1]]||!ll[a[c]]?a[c]:ll[a[c]]}return u}(this.text)},Ca.prototype.trim=function(){for(var a=0,u=0;u<this.text.length&&Uh[this.text.charCodeAt(u)];u++)a++;for(var c=this.text.length,y=this.text.length-1;y>=0&&y>=a&&Uh[this.text.charCodeAt(y)];y--)c--;this.text=this.text.substring(a,c),this.sectionIndex=this.sectionIndex.slice(a,c)},Ca.prototype.substring=function(a,u){var c=new Ca;return c.text=this.text.substring(a,u),c.sectionIndex=this.sectionIndex.slice(a,u),c.sections=this.sections,c},Ca.prototype.toString=function(){return this.text},Ca.prototype.getMaxScale=function(){var a=this;return this.sectionIndex.reduce(function(u,c){return Math.max(u,a.sections[c].scale)},0)},Ca.prototype.addTextSection=function(a,u){this.text+=a.text,this.sections.push(qc.forText(a.scale,a.fontStack||u));for(var c=this.sections.length-1,y=0;y<a.text.length;++y)this.sectionIndex.push(c)},Ca.prototype.addImageSection=function(a){var u=a.image?a.image.name:"";if(0!==u.length){var c=this.getNextImageSectionCharCode();c?(this.text+=String.fromCharCode(c),this.sections.push(qc.forImage(u)),this.sectionIndex.push(this.sections.length-1)):O("Reached maximum number of images 6401")}else O("Can't add FormattedSection with an empty image.")},Ca.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Uh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ns={};function xy(a,u,c,y,w,E){if(u.imageName){var C=y[u.imageName];return C?C.displaySize[0]*u.scale*24/E+w:0}var N=c[u.fontStack],$=N&&N[a];return $?$.metrics.advance*u.scale+w:0}function Ey(a,u,c,y){var w=Math.pow(a-u,2);return y?a<u?w/2:2*w:w+Math.abs(c)*c}function B0(a,u,c){var y=0;return 10===a&&(y-=1e4),c&&(y+=150),40!==a&&65288!==a||(y+=50),41!==u&&65289!==u||(y+=50),y}function Fl(a,u,c,y,w,E){for(var C=null,N=Ey(u,c,w,E),$=0,Q=y;$<Q.length;$+=1){var ne=Q[$],re=Ey(u-ne.x,c,w,E)+ne.badness;re<=N&&(C=ne,N=re)}return{index:a,x:u,priorBreak:C,badness:N}}function Wc(a,u,c,y,w,E,C){if("point"!==E)return[];if(!a)return[];for(var N,$=[],Q=function(We,Be,rt,st,ht,gt){for(var Dt=0,jt=0;jt<We.length();jt++){var Xt=We.getSection(jt);Dt+=xy(We.getCharCode(jt),Xt,st,ht,Be,gt)}return Dt/Math.max(1,Math.ceil(Dt/rt))}(a,u,c,y,w,C),ne=a.text.indexOf("\u200b")>=0,re=0,le=0;le<a.length();le++){var me=a.getSection(le),Te=a.getCharCode(le);if(Uh[Te]||(re+=xy(Te,me,y,w,u,C)),le<a.length()-1){var Pe=!((N=Te)<11904||!(fn["Bopomofo Extended"](N)||fn.Bopomofo(N)||fn["CJK Compatibility Forms"](N)||fn["CJK Compatibility Ideographs"](N)||fn["CJK Compatibility"](N)||fn["CJK Radicals Supplement"](N)||fn["CJK Strokes"](N)||fn["CJK Symbols and Punctuation"](N)||fn["CJK Unified Ideographs Extension A"](N)||fn["CJK Unified Ideographs"](N)||fn["Enclosed CJK Letters and Months"](N)||fn["Halfwidth and Fullwidth Forms"](N)||fn.Hiragana(N)||fn["Ideographic Description Characters"](N)||fn["Kangxi Radicals"](N)||fn["Katakana Phonetic Extensions"](N)||fn.Katakana(N)||fn["Vertical Forms"](N)||fn["Yi Radicals"](N)||fn["Yi Syllables"](N)));(Ns[Te]||Pe||me.imageName)&&$.push(Fl(le+1,re,Q,$,B0(Te,a.getCharCode(le+1),Pe&&ne),!1))}}return function We(Be){return Be?We(Be.priorBreak).concat(Be.index):[]}(Fl(a.length(),re,Q,$,0,!0))}function Tm(a){var u=.5,c=.5;switch(a){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:u,verticalAlign:c}}function tE(a,u,c,y,w){if(y||w)for(var E=a[c],C=(a[c].x+E.metrics.advance*E.scale)*y,N=u;N<=c;N++)a[N].x-=C,a[N].y+=w}function j0(a,u,c,y,w,E){var C,N=a.image;if(N.content){var $=N.content,Q=N.pixelRatio||1;C=[$[0]/Q,$[1]/Q,N.displaySize[0]-$[2]/Q,N.displaySize[1]-$[3]/Q]}var ne,re,le,me,Te=u.left*E,Pe=u.right*E;"width"===c||"both"===c?(me=w[0]+Te-y[3],re=w[0]+Pe+y[1]):re=(me=w[0]+(Te+Pe-N.displaySize[0])/2)+N.displaySize[0];var We=u.top*E,Be=u.bottom*E;return"height"===c||"both"===c?(ne=w[1]+We-y[0],le=w[1]+Be+y[2]):le=(ne=w[1]+(We+Be-N.displaySize[1])/2)+N.displaySize[1],{image:N,top:ne,right:re,bottom:le,left:me,collisionPadding:C}}Ns[10]=!0,Ns[32]=!0,Ns[38]=!0,Ns[40]=!0,Ns[41]=!0,Ns[43]=!0,Ns[45]=!0,Ns[47]=!0,Ns[173]=!0,Ns[183]=!0,Ns[8203]=!0,Ns[8208]=!0,Ns[8211]=!0,Ns[8231]=!0;var Mf=function(a){function u(c,y,w,E){a.call(this,c,y),this.angle=w,void 0!==E&&(this.segment=E)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.clone=function(){return new u(this.x,this.y,this.angle,this.segment)},u}(T);function Sy(a,u){var c=u.expression;if("constant"===c.kind)return{kind:"constant",layoutSize:c.evaluate(new Wr(a+1))};if("source"===c.kind)return{kind:"source"};for(var y=c.zoomStops,w=c.interpolationType,E=0;E<y.length&&y[E]<=a;)E++;for(var C=E=Math.max(0,E-1);C<y.length&&y[C]<a+1;)C++;C=Math.min(y.length-1,C);var N=y[E],$=y[C];return"composite"===c.kind?{kind:"composite",minZoom:N,maxZoom:$,interpolationType:w}:{kind:"camera",minZoom:N,maxZoom:$,minSize:c.evaluate(new Wr(N)),maxSize:c.evaluate(new Wr($)),interpolationType:w}}function U0(a,u,c){var y=u.uSize,w=c.lowerSize;return"source"===a.kind?w/128:"composite"===a.kind?Gi(w/128,c.upperSize/128,u.uSizeT):y}function Pm(a,u){var c=0,y=0;if("constant"===a.kind)y=a.layoutSize;else if("source"!==a.kind){var w=a.interpolationType,E=w?pe(ei.interpolationFactor(w,u,a.minZoom,a.maxZoom),0,1):0;"camera"===a.kind?y=Gi(a.minSize,a.maxSize,E):c=E}return{uSizeT:c,uSize:y}}dn("Anchor",Mf);var V0=Object.freeze({__proto__:null,getSizeData:Sy,evaluateSizeForFeature:U0,evaluateSizeForZoom:Pm,SIZE_PACK_FACTOR:128});function Cy(a,u,c,y,w){if(void 0===u.segment)return!0;for(var E=u,C=u.segment+1,N=0;N>-c/2;){if(--C<0)return!1;N-=a[C].dist(E),E=a[C]}N+=a[C].dist(a[C+1]),C++;for(var $=[],Q=0;N<c/2;){var ne=a[C],re=a[C+1];if(!re)return!1;var le=a[C-1].angleTo(ne)-ne.angleTo(re);for(le=Math.abs((le+3*Math.PI)%(2*Math.PI)-Math.PI),$.push({distance:N,angleDelta:le}),Q+=le;N-$[0].distance>y;)Q-=$.shift().angleDelta;if(Q>w)return!1;C++,N+=ne.dist(re)}return!0}function Iy(a){for(var u=0,c=0;c<a.length-1;c++)u+=a[c].dist(a[c+1]);return u}function Ty(a,u,c){return a?.6*u*c:0}function G0(a,u){return Math.max(a?a.right-a.left:0,u?u.right-u.left:0)}function H0(a,u,c,y,w,E){for(var C=Ty(c,w,E),N=G0(c,y)*E,$=0,Q=Iy(a)/2,ne=0;ne<a.length-1;ne++){var re=a[ne],le=a[ne+1],me=re.dist(le);if($+me>Q){var Te=(Q-$)/me,Pe=Gi(re.x,le.x,Te),We=Gi(re.y,le.y,Te),Be=new Mf(Pe,We,le.angleTo(re),ne);return Be._round(),!C||Cy(a,Be,N,C,u)?Be:void 0}$+=me}}function Vh(a,u,c,y,w,E,C,N,$){var Q=Ty(y,E,C),ne=G0(y,w),re=ne*C,le=0===a[0].x||a[0].x===$||0===a[0].y||a[0].y===$;return u-re<u/4&&(u=re+u/4),function me(Te,Pe,We,Be,rt,st,ht,gt,Dt){for(var jt=st/2,Xt=Iy(Te),vn=0,en=Pe-We,Rn=[],an=0;an<Te.length-1;an++){for(var fr=Te[an],Fn=Te[an+1],hn=fr.dist(Fn),Sr=Fn.angleTo(fr);en+We<vn+hn;){var rr=((en+=We)-vn)/hn,Fr=Gi(fr.x,Fn.x,rr),Sn=Gi(fr.y,Fn.y,rr);if(Fr>=0&&Fr<Dt&&Sn>=0&&Sn<Dt&&en-jt>=0&&en+jt<=Xt){var Zr=new Mf(Fr,Sn,Sr,an);Zr._round(),Be&&!Cy(Te,Zr,st,Be,rt)||Rn.push(Zr)}}vn+=hn}return gt||Rn.length||ht||(Rn=me(Te,vn/2,We,Be,rt,st,ht,!0,Dt)),Rn}(a,le?u/2*N%u:(ne/2+2*E)*C*N%u,u,Q,c,re,le,!1,$)}function Dm(a,u,c,y,w){for(var E=[],C=0;C<a.length;C++)for(var N=a[C],$=void 0,Q=0;Q<N.length-1;Q++){var ne=N[Q],re=N[Q+1];ne.x<u&&re.x<u||(ne.x<u?ne=new T(u,ne.y+(u-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round():re.x<u&&(re=new T(u,ne.y+(u-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round()),ne.y<c&&re.y<c||(ne.y<c?ne=new T(ne.x+(c-ne.y)/(re.y-ne.y)*(re.x-ne.x),c)._round():re.y<c&&(re=new T(ne.x+(c-ne.y)/(re.y-ne.y)*(re.x-ne.x),c)._round()),ne.x>=y&&re.x>=y||(ne.x>=y?ne=new T(y,ne.y+(y-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round():re.x>=y&&(re=new T(y,ne.y+(y-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round()),ne.y>=w&&re.y>=w||(ne.y>=w?ne=new T(ne.x+(w-ne.y)/(re.y-ne.y)*(re.x-ne.x),w)._round():re.y>=w&&(re=new T(ne.x+(w-ne.y)/(re.y-ne.y)*(re.x-ne.x),w)._round()),$&&ne.equals($[$.length-1])||E.push($=[ne]),$.push(re)))))}return E}function Zu(a,u,c,y){var w=[],E=a.image,C=E.pixelRatio,N=E.paddedRect.w-2,$=E.paddedRect.h-2,Q=a.right-a.left,ne=a.bottom-a.top,re=E.stretchX||[[0,N]],le=E.stretchY||[[0,$]],me=function(Fr,Sn){return Fr+Sn[1]-Sn[0]},Te=re.reduce(me,0),Pe=le.reduce(me,0),We=N-Te,Be=$-Pe,rt=0,st=Te,ht=0,gt=Pe,Dt=0,jt=We,Xt=0,vn=Be;if(E.content&&y){var en=E.content;rt=gc(re,0,en[0]),ht=gc(le,0,en[1]),st=gc(re,en[0],en[2]),gt=gc(le,en[1],en[3]),Dt=en[0]-rt,Xt=en[1]-ht,jt=en[2]-en[0]-st,vn=en[3]-en[1]-gt}var Rn=function(Fr,Sn,Zr,Ni){var ki=Of(Fr.stretch-rt,st,Q,a.left),oo=Lf(Fr.fixed-Dt,jt,Fr.stretch,Te),$i=Of(Sn.stretch-ht,gt,ne,a.top),fo=Lf(Sn.fixed-Xt,vn,Sn.stretch,Pe),Fo=Of(Zr.stretch-rt,st,Q,a.left),Go=Lf(Zr.fixed-Dt,jt,Zr.stretch,Te),Ga=Of(Ni.stretch-ht,gt,ne,a.top),ia=Lf(Ni.fixed-Xt,vn,Ni.stretch,Pe),Ha=new T(ki,$i),ao=new T(Fo,$i),oa=new T(Fo,Ga),Mr=new T(ki,Ga),Si=new T(oo/C,fo/C),di=new T(Go/C,ia/C),Gr=u*Math.PI/180;if(Gr){var us=Math.sin(Gr),Ci=Math.cos(Gr),Ri=[Ci,-us,us,Ci];Ha._matMult(Ri),ao._matMult(Ri),Mr._matMult(Ri),oa._matMult(Ri)}var vo=Fr.stretch+Fr.fixed,aa=Sn.stretch+Sn.fixed;return{tl:Ha,tr:ao,bl:Mr,br:oa,tex:{x:E.paddedRect.x+1+vo,y:E.paddedRect.y+1+aa,w:Zr.stretch+Zr.fixed-vo,h:Ni.stretch+Ni.fixed-aa},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Si,pixelOffsetBR:di,minFontScaleX:jt/C/Q,minFontScaleY:vn/C/ne,isSDF:c}};if(y&&(E.stretchX||E.stretchY))for(var an=Am(re,We,Te),fr=Am(le,Be,Pe),Fn=0;Fn<an.length-1;Fn++)for(var hn=an[Fn],Sr=an[Fn+1],rr=0;rr<fr.length-1;rr++)w.push(Rn(hn,fr[rr],Sr,fr[rr+1]));else w.push(Rn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:N+1},{fixed:0,stretch:$+1}));return w}function gc(a,u,c){for(var y=0,w=0,E=a;w<E.length;w+=1){var C=E[w];y+=Math.max(u,Math.min(c,C[1]))-Math.max(u,Math.min(c,C[0]))}return y}function Am(a,u,c){for(var y=[{fixed:-1,stretch:0}],w=0,E=a;w<E.length;w+=1){var C=E[w],N=C[0],$=C[1],Q=y[y.length-1];y.push({fixed:N-Q.stretch,stretch:Q.stretch}),y.push({fixed:N-Q.stretch,stretch:Q.stretch+($-N)})}return y.push({fixed:u+1,stretch:c}),y}function Of(a,u,c,y){return a/u*c+y}function Lf(a,u,c,y){return a-u*c/y}var Rm=function(a,u,c,y,w,E,C,N,$,Q){if(this.boxStartIndex=a.length,$){var ne=E.top,re=E.bottom,le=E.collisionPadding;le&&(ne-=le[1],re+=le[3]);var me=re-ne;me>0&&(me=Math.max(10,me),this.circleDiameter=me)}else{var Te=E.top*C-N,Pe=E.bottom*C+N,We=E.left*C-N,Be=E.right*C+N,rt=E.collisionPadding;if(rt&&(We-=rt[0]*C,Te-=rt[1]*C,Be+=rt[2]*C,Pe+=rt[3]*C),Q){var st=new T(We,Te),ht=new T(Be,Te),gt=new T(We,Pe),Dt=new T(Be,Pe),jt=Q*Math.PI/180;st._rotate(jt),ht._rotate(jt),gt._rotate(jt),Dt._rotate(jt),We=Math.min(st.x,ht.x,gt.x,Dt.x),Be=Math.max(st.x,ht.x,gt.x,Dt.x),Te=Math.min(st.y,ht.y,gt.y,Dt.y),Pe=Math.max(st.y,ht.y,gt.y,Dt.y)}a.emplaceBack(u.x,u.y,We,Te,Be,Pe,c,y,w)}this.boxEndIndex=a.length},Nf=function(a,u){if(void 0===a&&(a=[]),void 0===u&&(u=nE),this.data=a,this.length=this.data.length,this.compare=u,this.length>0)for(var c=(this.length>>1)-1;c>=0;c--)this._down(c)};function nE(a,u){return a<u?-1:a>u?1:0}function Mm(a,u,c){void 0===u&&(u=1),void 0===c&&(c=!1);for(var y=1/0,w=1/0,E=-1/0,C=-1/0,N=a[0],$=0;$<N.length;$++){var Q=N[$];(!$||Q.x<y)&&(y=Q.x),(!$||Q.y<w)&&(w=Q.y),(!$||Q.x>E)&&(E=Q.x),(!$||Q.y>C)&&(C=Q.y)}var ne=Math.min(E-y,C-w),re=ne/2,le=new Nf([],Om);if(0===ne)return new T(y,w);for(var me=y;me<E;me+=ne)for(var Te=w;Te<C;Te+=ne)le.push(new yc(me+re,Te+re,re,a));for(var Pe=function(rt){for(var st=0,ht=0,gt=0,Dt=rt[0],jt=0,Xt=Dt.length,vn=Xt-1;jt<Xt;vn=jt++){var en=Dt[jt],Rn=Dt[vn],an=en.x*Rn.y-Rn.x*en.y;ht+=(en.x+Rn.x)*an,gt+=(en.y+Rn.y)*an,st+=3*an}return new yc(ht/st,gt/st,0,rt)}(a),We=le.length;le.length;){var Be=le.pop();(Be.d>Pe.d||!Pe.d)&&(Pe=Be,c&&console.log("found best %d after %d probes",Math.round(1e4*Be.d)/1e4,We)),Be.max-Pe.d<=u||(le.push(new yc(Be.p.x-(re=Be.h/2),Be.p.y-re,re,a)),le.push(new yc(Be.p.x+re,Be.p.y-re,re,a)),le.push(new yc(Be.p.x-re,Be.p.y+re,re,a)),le.push(new yc(Be.p.x+re,Be.p.y+re,re,a)),We+=4)}return c&&(console.log("num probes: "+We),console.log("best distance: "+Pe.d)),Pe.p}function Om(a,u){return u.max-a.max}function yc(a,u,c,y){this.p=new T(a,u),this.h=c,this.d=function(w,E){for(var C=!1,N=1/0,$=0;$<E.length;$++)for(var Q=E[$],ne=0,re=Q.length,le=re-1;ne<re;le=ne++){var me=Q[ne],Te=Q[le];me.y>w.y!=Te.y>w.y&&w.x<(Te.x-me.x)*(w.y-me.y)/(Te.y-me.y)+me.x&&(C=!C),N=Math.min(N,Bc(w,me,Te))}return(C?1:-1)*Math.sqrt(N)}(this.p,y),this.max=this.d+this.h*Math.SQRT2}Nf.prototype.push=function(a){this.data.push(a),this.length++,this._up(this.length-1)},Nf.prototype.pop=function(){if(0!==this.length){var a=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),a}},Nf.prototype.peek=function(){return this.data[0]},Nf.prototype._up=function(a){for(var u=this.data,c=this.compare,y=u[a];a>0;){var w=a-1>>1,E=u[w];if(c(y,E)>=0)break;u[a]=E,a=w}u[a]=y},Nf.prototype._down=function(a){for(var u=this.data,c=this.compare,y=this.length>>1,w=u[a];a<y;){var E=1+(a<<1),C=u[E],N=E+1;if(N<this.length&&c(u[N],C)<0&&(E=N,C=u[N]),c(C,w)>=0)break;u[a]=C,a=E}u[a]=w};var Py=Number.POSITIVE_INFINITY;function $0(a,u){return u[1]!==Py?function(c,y,w){var E=0,C=0;switch(y=Math.abs(y),w=Math.abs(w),c){case"top-right":case"top-left":case"top":C=w-7;break;case"bottom-right":case"bottom-left":case"bottom":C=7-w}switch(c){case"top-right":case"bottom-right":case"right":E=-y;break;case"top-left":case"bottom-left":case"left":E=y}return[E,C]}(a,u[0],u[1]):function(c,y){var w=0,E=0;y<0&&(y=0);var C=y/Math.sqrt(2);switch(c){case"top-right":case"top-left":E=C-7;break;case"bottom-right":case"bottom-left":E=7-C;break;case"bottom":E=7-y;break;case"top":E=y-7}switch(c){case"top-right":case"bottom-right":w=-C;break;case"top-left":case"bottom-left":w=C;break;case"left":w=y;break;case"right":w=-y}return[w,E]}(a,u[0])}function Gh(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Dy(a,u,c,y,w,E,C,N,$,Q,ne,re,le,me,Te){var Pe=function(ht,gt,Dt,jt,Xt,vn,en,Rn){for(var an=jt.layout.get("text-rotate").evaluate(vn,{})*Math.PI/180,fr=[],Fn=0,hn=gt.positionedLines;Fn<hn.length;Fn+=1)for(var Sr=hn[Fn],rr=0,Fr=Sr.positionedGlyphs;rr<Fr.length;rr+=1){var Sn=Fr[rr];if(Sn.rect){var Zr=Sn.rect||{},Ni=4,ki=!0,oo=1,$i=0,fo=(Xt||Rn)&&Sn.vertical,Fo=Sn.metrics.advance*Sn.scale/2;if(Rn&&gt.verticalizable&&($i=Sr.lineOffset/2-(Sn.imageName?-(24-Sn.metrics.width*Sn.scale)/2:24*(Sn.scale-1))),Sn.imageName){var Go=en[Sn.imageName];ki=Go.sdf,Ni=1/(oo=Go.pixelRatio)}var Ga=Xt?[Sn.x+Fo,Sn.y]:[0,0],ia=Xt?[0,0]:[Sn.x+Fo+Dt[0],Sn.y+Dt[1]-$i],Ha=[0,0];fo&&(Ha=ia,ia=[0,0]);var ao=(Sn.metrics.left-Ni)*Sn.scale-Fo+ia[0],oa=(-Sn.metrics.top-Ni)*Sn.scale+ia[1],Mr=ao+Zr.w*Sn.scale/oo,Si=oa+Zr.h*Sn.scale/oo,di=new T(ao,oa),Gr=new T(Mr,oa),us=new T(ao,Si),Ci=new T(Mr,Si);if(fo){var Ri=new T(-Fo,Fo- -17),vo=-Math.PI/2,aa=12-Fo,ir=new T(22-aa,-(Sn.imageName?aa:0)),Ys=new(Function.prototype.bind.apply(T,[null].concat(Ha)));di._rotateAround(vo,Ri)._add(ir)._add(Ys),Gr._rotateAround(vo,Ri)._add(ir)._add(Ys),us._rotateAround(vo,Ri)._add(ir)._add(Ys),Ci._rotateAround(vo,Ri)._add(ir)._add(Ys)}if(an){var Ds=Math.sin(an),hl=Math.cos(an),_o=[hl,-Ds,Ds,hl];di._matMult(_o),Gr._matMult(_o),us._matMult(_o),Ci._matMult(_o)}var Ju=new T(0,0),Lu=new T(0,0);fr.push({tl:di,tr:Gr,bl:us,br:Ci,tex:Zr,writingMode:gt.writingMode,glyphOffset:Ga,sectionIndex:Sn.sectionIndex,isSDF:ki,pixelOffsetTL:Ju,pixelOffsetBR:Lu,minFontScaleX:0,minFontScaleY:0})}}return fr}(0,c,N,w,E,C,y,a.allowVerticalPlacement),We=a.textSizeData,Be=null;"source"===We.kind?(Be=[128*w.layout.get("text-size").evaluate(C,{})])[0]>32640&&O(a.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===We.kind&&((Be=[128*me.compositeTextSizes[0].evaluate(C,{},Te),128*me.compositeTextSizes[1].evaluate(C,{},Te)])[0]>32640||Be[1]>32640)&&O(a.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),a.addSymbols(a.text,Pe,Be,N,E,C,Q,u,$.lineStartIndex,$.lineLength,le,Te);for(var rt=0,st=ne;rt<st.length;rt+=1)re[st[rt]]=a.text.placedSymbolArray.length-1;return 4*Pe.length}function Ay(a){for(var u in a)return a[u];return null}function q0(a,u,c,y){var w=a.compareText;if(u in w){for(var E=w[u],C=E.length-1;C>=0;C--)if(y.dist(E[C])<c)return!0}else w[u]=[];return w[u].push(y),!1}var W0=kl.VectorTileFeature.types,Ry=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Zc(a,u,c,y,w,E,C,N,$,Q,ne,re,le){var me=N?Math.min(32640,Math.round(N[0])):0,Te=N?Math.min(32640,Math.round(N[1])):0;a.emplaceBack(u,c,Math.round(32*y),Math.round(32*w),E,C,(me<<1)+($?1:0),Te,16*Q,16*ne,256*re,256*le)}function Lm(a,u,c){a.emplaceBack(u.x,u.y,c),a.emplaceBack(u.x,u.y,c),a.emplaceBack(u.x,u.y,c),a.emplaceBack(u.x,u.y,c)}function Nm(a){for(var u=0,c=a.sections;u<c.length;u+=1)if(Ph(c[u].text))return!0;return!1}var zd=function(a){this.layoutVertexArray=new Pu,this.indexArray=new ja,this.programConfigurations=a,this.segments=new ye,this.dynamicLayoutVertexArray=new Cs,this.opacityVertexArray=new kc,this.placedSymbolArray=new S};zd.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},zd.prototype.upload=function(a,u,c,y){this.isEmpty()||(c&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,py.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,Df.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,Ry,!0),this.opacityVertexBuffer.itemSize=1),(c||y)&&this.programConfigurations.upload(a))},zd.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},dn("SymbolBuffers",zd);var To=function(a,u,c){this.layoutVertexArray=new a,this.layoutAttributes=u,this.indexArray=new c,this.segments=new ye,this.collisionVertexArray=new Rh};To.prototype.upload=function(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,zh.members,!0)},To.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},dn("CollisionBuffers",To);var wi=function(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(E){return E.id}),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ea([]),this.placementViewportMatrix=Ea([]);var u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Sy(this.zoom,u["text-size"]),this.iconSizeData=Sy(this.zoom,u["icon-size"]);var c=this.layers[0].layout,y=c.get("symbol-sort-key"),w=c.get("symbol-z-order");this.canOverlap=c.get("text-allow-overlap")||c.get("icon-allow-overlap")||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==w&&!y.isConstant(),this.sortFeaturesByY=("viewport-y"===w||"auto"===w&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===c.get("symbol-placement")&&(this.writingModes=c.get("text-writing-mode").map(function(E){return Ls[E]})),this.stateDependentLayerIds=this.layers.filter(function(E){return E.isStateDependent()}).map(function(E){return E.id}),this.sourceID=a.sourceID};wi.prototype.createArrays=function(){this.text=new zd(new Di(this.layers,this.zoom,function(a){return/^text/.test(a)})),this.icon=new zd(new Di(this.layers,this.zoom,function(a){return/^icon/.test(a)})),this.glyphOffsetArray=new H,this.lineVertexArray=new te,this.symbolInstances=new M},wi.prototype.calculateGlyphDependencies=function(a,u,c,y,w){for(var E=0;E<a.length;E++)if(u[a.charCodeAt(E)]=!0,(c||y)&&w){var C=ll[a.charAt(E)];C&&(u[C.charCodeAt(0)]=!0)}},wi.prototype.populate=function(a,u,c){var y=this.layers[0],w=y.layout,E=w.get("text-font"),C=w.get("text-field"),N=w.get("icon-image"),$=("constant"!==C.value.kind||C.value.value instanceof or&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&("constant"!==E.value.kind||E.value.value.length>0),Q="constant"!==N.value.kind||!!N.value.value||Object.keys(N.parameters).length>0,ne=w.get("symbol-sort-key");if(this.features=[],$||Q){for(var re=u.iconDependencies,le=u.glyphDependencies,me=u.availableImages,Te=new Wr(this.zoom),Pe=0,We=a;Pe<We.length;Pe+=1){var Be=We[Pe],rt=Be.feature,st=Be.id,ht=Be.index,gt=Be.sourceLayerIndex,Dt=y._featureFilter.needGeometry,jt=fa(rt,Dt);if(y._featureFilter.filter(Te,jt,c)){Dt||(jt.geometry=Zi(rt));var Xt=void 0;if($){var vn=y.getValueAndResolveTokens("text-field",jt,c,me),en=or.factory(vn);Nm(en)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Ti()||this.hasRTLText&&no.isParsed())&&(Xt=N0(en,y,jt))}var Rn=void 0;if(Q){var an=y.getValueAndResolveTokens("icon-image",jt,c,me);Rn=an instanceof ji?an:ji.fromString(an)}if(Xt||Rn){var fr=this.sortFeaturesByKey?ne.evaluate(jt,{},c):void 0;if(this.features.push({id:st,text:Xt,icon:Rn,index:ht,sourceLayerIndex:gt,geometry:jt.geometry,properties:rt.properties,type:W0[rt.type],sortKey:fr}),Rn&&(re[Rn.name]=!0),Xt){var Fn=E.evaluate(jt,{},c).join(","),hn="map"===w.get("text-rotation-alignment")&&"point"!==w.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ls.vertical)>=0;for(var Sr=0,rr=Xt.sections;Sr<rr.length;Sr+=1){var Fr=rr[Sr];if(Fr.image)re[Fr.image.name]=!0;else{var Sn=Td(Xt.toString()),Zr=Fr.fontStack||Fn,Ni=le[Zr]=le[Zr]||{};this.calculateGlyphDependencies(Fr.text,Ni,hn,this.allowVerticalPlacement,Sn)}}}}}}"line"===w.get("symbol-placement")&&(this.features=function(ki){var oo={},$i={},fo=[],Fo=0;function Go(Ri){fo.push(ki[Ri]),Fo++}function Ga(Ri,vo,aa){var ir=$i[Ri];return delete $i[Ri],$i[vo]=ir,fo[ir].geometry[0].pop(),fo[ir].geometry[0]=fo[ir].geometry[0].concat(aa[0]),ir}function ia(Ri,vo,aa){var ir=oo[vo];return delete oo[vo],oo[Ri]=ir,fo[ir].geometry[0].shift(),fo[ir].geometry[0]=aa[0].concat(fo[ir].geometry[0]),ir}function Ha(Ri,vo,aa){var ir=aa?vo[0][vo[0].length-1]:vo[0][0];return Ri+":"+ir.x+":"+ir.y}for(var ao=0;ao<ki.length;ao++){var oa=ki[ao],Mr=oa.geometry,Si=oa.text?oa.text.toString():null;if(Si){var di=Ha(Si,Mr),Gr=Ha(Si,Mr,!0);if(di in $i&&Gr in oo&&$i[di]!==oo[Gr]){var us=ia(di,Gr,Mr),Ci=Ga(di,Gr,fo[us].geometry);delete oo[di],delete $i[Gr],$i[Ha(Si,fo[Ci].geometry,!0)]=Ci,fo[us].geometry=null}else di in $i?Ga(di,Gr,Mr):Gr in oo?ia(di,Gr,Mr):(Go(ao),oo[di]=Fo-1,$i[Gr]=Fo-1)}else Go(ao)}return fo.filter(function(Ri){return Ri.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(ki,oo){return ki.sortKey-oo.sortKey})}},wi.prototype.update=function(a,u,c){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,u,this.layers,c),this.icon.programConfigurations.updatePaintArrays(a,u,this.layers,c))},wi.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},wi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},wi.prototype.upload=function(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},wi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},wi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},wi.prototype.addToLineVertexArray=function(a,u){var c=this.lineVertexArray.length;if(void 0!==a.segment){for(var y=a.dist(u[a.segment+1]),w=a.dist(u[a.segment]),E={},C=a.segment+1;C<u.length;C++)E[C]={x:u[C].x,y:u[C].y,tileUnitDistanceFromAnchor:y},C<u.length-1&&(y+=u[C+1].dist(u[C]));for(var N=a.segment||0;N>=0;N--)E[N]={x:u[N].x,y:u[N].y,tileUnitDistanceFromAnchor:w},N>0&&(w+=u[N-1].dist(u[N]));for(var $=0;$<u.length;$++){var Q=E[$];this.lineVertexArray.emplaceBack(Q.x,Q.y,Q.tileUnitDistanceFromAnchor)}}return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}},wi.prototype.addSymbols=function(a,u,c,y,w,E,C,N,$,Q,ne,re){for(var le=a.indexArray,me=a.layoutVertexArray,Te=a.segments.prepareSegment(4*u.length,me,le,this.canOverlap?E.sortKey:void 0),Pe=this.glyphOffsetArray.length,We=Te.vertexLength,Be=this.allowVerticalPlacement&&C===Ls.vertical?Math.PI/2:0,rt=E.text&&E.text.sections,st=0;st<u.length;st++){var ht=u[st],gt=ht.tl,Dt=ht.tr,jt=ht.bl,Xt=ht.br,vn=ht.tex,en=ht.pixelOffsetTL,Rn=ht.pixelOffsetBR,an=ht.minFontScaleX,fr=ht.minFontScaleY,Fn=ht.glyphOffset,hn=ht.isSDF,Sr=ht.sectionIndex,rr=Te.vertexLength,Fr=Fn[1];Zc(me,N.x,N.y,gt.x,Fr+gt.y,vn.x,vn.y,c,hn,en.x,en.y,an,fr),Zc(me,N.x,N.y,Dt.x,Fr+Dt.y,vn.x+vn.w,vn.y,c,hn,Rn.x,en.y,an,fr),Zc(me,N.x,N.y,jt.x,Fr+jt.y,vn.x,vn.y+vn.h,c,hn,en.x,Rn.y,an,fr),Zc(me,N.x,N.y,Xt.x,Fr+Xt.y,vn.x+vn.w,vn.y+vn.h,c,hn,Rn.x,Rn.y,an,fr),Lm(a.dynamicLayoutVertexArray,N,Be),le.emplaceBack(rr,rr+1,rr+2),le.emplaceBack(rr+1,rr+2,rr+3),Te.vertexLength+=4,Te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Fn[0]),st!==u.length-1&&Sr===u[st+1].sectionIndex||a.programConfigurations.populatePaintArrays(me.length,E,E.index,{},re,rt&&rt[Sr])}a.placedSymbolArray.emplaceBack(N.x,N.y,Pe,this.glyphOffsetArray.length-Pe,We,$,Q,N.segment,c?c[0]:0,c?c[1]:0,y[0],y[1],C,0,!1,0,ne)},wi.prototype._addCollisionDebugVertex=function(a,u,c,y,w,E){return u.emplaceBack(0,0),a.emplaceBack(c.x,c.y,y,w,Math.round(E.x),Math.round(E.y))},wi.prototype.addCollisionDebugVertices=function(a,u,c,y,w,E,C){var N=w.segments.prepareSegment(4,w.layoutVertexArray,w.indexArray),$=N.vertexLength,Q=w.layoutVertexArray,ne=w.collisionVertexArray,re=C.anchorX,le=C.anchorY;this._addCollisionDebugVertex(Q,ne,E,re,le,new T(a,u)),this._addCollisionDebugVertex(Q,ne,E,re,le,new T(c,u)),this._addCollisionDebugVertex(Q,ne,E,re,le,new T(c,y)),this._addCollisionDebugVertex(Q,ne,E,re,le,new T(a,y)),N.vertexLength+=4;var me=w.indexArray;me.emplaceBack($,$+1),me.emplaceBack($+1,$+2),me.emplaceBack($+2,$+3),me.emplaceBack($+3,$),N.primitiveLength+=4},wi.prototype.addDebugCollisionBoxes=function(a,u,c,y){for(var w=a;w<u;w++){var E=this.collisionBoxArray.get(w);this.addCollisionDebugVertices(E.x1,E.y1,E.x2,E.y2,y?this.textCollisionBox:this.iconCollisionBox,E.anchorPoint,c)}},wi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new To(Al,xm.members,Fc),this.iconCollisionBox=new To(Al,xm.members,Fc);for(var a=0;a<this.symbolInstances.length;a++){var u=this.symbolInstances.get(a);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}},wi.prototype._deserializeCollisionBoxesForSymbol=function(a,u,c,y,w,E,C,N,$){for(var Q={},ne=u;ne<c;ne++){var re=a.get(ne);Q.textBox={x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,anchorPointX:re.anchorPointX,anchorPointY:re.anchorPointY},Q.textFeatureIndex=re.featureIndex;break}for(var le=y;le<w;le++){var me=a.get(le);Q.verticalTextBox={x1:me.x1,y1:me.y1,x2:me.x2,y2:me.y2,anchorPointX:me.anchorPointX,anchorPointY:me.anchorPointY},Q.verticalTextFeatureIndex=me.featureIndex;break}for(var Te=E;Te<C;Te++){var Pe=a.get(Te);Q.iconBox={x1:Pe.x1,y1:Pe.y1,x2:Pe.x2,y2:Pe.y2,anchorPointX:Pe.anchorPointX,anchorPointY:Pe.anchorPointY},Q.iconFeatureIndex=Pe.featureIndex;break}for(var We=N;We<$;We++){var Be=a.get(We);Q.verticalIconBox={x1:Be.x1,y1:Be.y1,x2:Be.x2,y2:Be.y2,anchorPointX:Be.anchorPointX,anchorPointY:Be.anchorPointY},Q.verticalIconFeatureIndex=Be.featureIndex;break}return Q},wi.prototype.deserializeCollisionBoxes=function(a){this.collisionArrays=[];for(var u=0;u<this.symbolInstances.length;u++){var c=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}},wi.prototype.hasTextData=function(){return this.text.segments.get().length>0},wi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},wi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},wi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},wi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},wi.prototype.addIndicesForPlacedSymbol=function(a,u){for(var c=a.placedSymbolArray.get(u),y=c.vertexStartIndex+4*c.numGlyphs,w=c.vertexStartIndex;w<y;w+=4)a.indexArray.emplaceBack(w,w+1,w+2),a.indexArray.emplaceBack(w+1,w+2,w+3)},wi.prototype.getSortedSymbolIndexes=function(a){if(this.sortedAngle===a&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var u=Math.sin(a),c=Math.cos(a),y=[],w=[],E=[],C=0;C<this.symbolInstances.length;++C){E.push(C);var N=this.symbolInstances.get(C);y.push(0|Math.round(u*N.anchorX+c*N.anchorY)),w.push(N.featureIndex)}return E.sort(function($,Q){return y[$]-y[Q]||w[Q]-w[$]}),E},wi.prototype.addToSortKeyRanges=function(a,u){var c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===u?c.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:a,symbolInstanceEnd:a+1})},wi.prototype.sortFeatures=function(a){var u=this;if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var c=0,y=this.symbolInstanceIndexes;c<y.length;c+=1){var w=this.symbolInstances.get(y[c]);this.featureSortOrder.push(w.featureIndex),[w.rightJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.leftJustifiedTextSymbolIndex].forEach(function(E,C,N){E>=0&&N.indexOf(E)===C&&u.addIndicesForPlacedSymbol(u.text,E)}),w.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,w.verticalPlacedTextSymbolIndex),w.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,w.placedIconSymbolIndex),w.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,w.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},dn("SymbolBucket",wi,{omit:["layers","collisionBoxArray","features","compareText"]}),wi.MAX_GLYPHS=65535,wi.addDynamicAttributes=Lm;var Z0=new Os({"symbol-placement":new Yt(Ee.layout_symbol["symbol-placement"]),"symbol-spacing":new Yt(Ee.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Yt(Ee.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Un(Ee.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Yt(Ee.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Yt(Ee.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Yt(Ee.layout_symbol["icon-ignore-placement"]),"icon-optional":new Yt(Ee.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Yt(Ee.layout_symbol["icon-rotation-alignment"]),"icon-size":new Un(Ee.layout_symbol["icon-size"]),"icon-text-fit":new Yt(Ee.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Yt(Ee.layout_symbol["icon-text-fit-padding"]),"icon-image":new Un(Ee.layout_symbol["icon-image"]),"icon-rotate":new Un(Ee.layout_symbol["icon-rotate"]),"icon-padding":new Yt(Ee.layout_symbol["icon-padding"]),"icon-keep-upright":new Yt(Ee.layout_symbol["icon-keep-upright"]),"icon-offset":new Un(Ee.layout_symbol["icon-offset"]),"icon-anchor":new Un(Ee.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Yt(Ee.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Yt(Ee.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Yt(Ee.layout_symbol["text-rotation-alignment"]),"text-field":new Un(Ee.layout_symbol["text-field"]),"text-font":new Un(Ee.layout_symbol["text-font"]),"text-size":new Un(Ee.layout_symbol["text-size"]),"text-max-width":new Un(Ee.layout_symbol["text-max-width"]),"text-line-height":new Yt(Ee.layout_symbol["text-line-height"]),"text-letter-spacing":new Un(Ee.layout_symbol["text-letter-spacing"]),"text-justify":new Un(Ee.layout_symbol["text-justify"]),"text-radial-offset":new Un(Ee.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Yt(Ee.layout_symbol["text-variable-anchor"]),"text-anchor":new Un(Ee.layout_symbol["text-anchor"]),"text-max-angle":new Yt(Ee.layout_symbol["text-max-angle"]),"text-writing-mode":new Yt(Ee.layout_symbol["text-writing-mode"]),"text-rotate":new Un(Ee.layout_symbol["text-rotate"]),"text-padding":new Yt(Ee.layout_symbol["text-padding"]),"text-keep-upright":new Yt(Ee.layout_symbol["text-keep-upright"]),"text-transform":new Un(Ee.layout_symbol["text-transform"]),"text-offset":new Un(Ee.layout_symbol["text-offset"]),"text-allow-overlap":new Yt(Ee.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Yt(Ee.layout_symbol["text-ignore-placement"]),"text-optional":new Yt(Ee.layout_symbol["text-optional"])}),kf={paint:new Os({"icon-opacity":new Un(Ee.paint_symbol["icon-opacity"]),"icon-color":new Un(Ee.paint_symbol["icon-color"]),"icon-halo-color":new Un(Ee.paint_symbol["icon-halo-color"]),"icon-halo-width":new Un(Ee.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Un(Ee.paint_symbol["icon-halo-blur"]),"icon-translate":new Yt(Ee.paint_symbol["icon-translate"]),"icon-translate-anchor":new Yt(Ee.paint_symbol["icon-translate-anchor"]),"text-opacity":new Un(Ee.paint_symbol["text-opacity"]),"text-color":new Un(Ee.paint_symbol["text-color"],{runtimeType:Gn,getOverride:function(a){return a.textColor},hasOverride:function(a){return!!a.textColor}}),"text-halo-color":new Un(Ee.paint_symbol["text-halo-color"]),"text-halo-width":new Un(Ee.paint_symbol["text-halo-width"]),"text-halo-blur":new Un(Ee.paint_symbol["text-halo-blur"]),"text-translate":new Yt(Ee.paint_symbol["text-translate"]),"text-translate-anchor":new Yt(Ee.paint_symbol["text-translate-anchor"])}),layout:Z0},Jc=function(a){this.type=a.property.overrides?a.property.overrides.runtimeType:mn,this.defaultValue=a};Jc.prototype.evaluate=function(a){if(a.formattedSection){var u=this.defaultValue.property.overrides;if(u&&u.hasOverride(a.formattedSection))return u.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default},Jc.prototype.eachChild=function(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)},Jc.prototype.outputDefined=function(){return!1},Jc.prototype.serialize=function(){return null},dn("FormatSectionOverride",Jc,{omit:["defaultValue"]});var J0=function(a){function u(c){a.call(this,c,kf)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.recalculate=function(c,y){if(a.prototype.recalculate.call(this,c,y),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var w=this.layout.get("text-writing-mode");if(w){for(var E=[],C=0,N=w;C<N.length;C+=1){var $=N[C];E.indexOf($)<0&&E.push($)}this.layout._values["text-writing-mode"]=E}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},u.prototype.getValueAndResolveTokens=function(c,y,w,E){var $,C=this.layout.get(c).evaluate(y,{},w,E),N=this._unevaluatedLayout._values[c];return N.isDataDriven()||Su(N.value)||!C?C:($=y.properties,C.replace(/{([^{}]+)}/g,function(ne,re){return re in $?String($[re]):""}))},u.prototype.createBucket=function(c){return new wi(c)},u.prototype.queryRadius=function(){return 0},u.prototype.queryIntersectsFeature=function(){return!1},u.prototype._setPaintOverrides=function(){for(var c=0,y=kf.paint.overridableProperties;c<y.length;c+=1){var w=y[c];if(u.hasPaintOverride(this.layout,w)){var E,C=this.paint.get(w),N=new Jc(C),$=new ar(N,C.property.specification);E="constant"===C.value.kind||"source"===C.value.kind?new it("source",$):new vt("composite",$,C.value.zoomStops,C.value._interpolationType),this.paint._values[w]=new ns(C.property,E,C.parameters)}}},u.prototype._handleOverridablePaintPropertyUpdate=function(c,y,w){return!(!this.layout||y.isDataDriven()||w.isDataDriven())&&u.hasPaintOverride(this.layout,c)},u.hasPaintOverride=function(c,y){var w=c.get("text-field"),E=kf.paint.properties[y],C=!1,N=function(ne){for(var re=0,le=ne;re<le.length;re+=1)if(E.overrides&&E.overrides.hasOverride(le[re]))return void(C=!0)};if("constant"===w.value.kind&&w.value.value instanceof or)N(w.value.value.sections);else if("source"===w.value.kind){var $=function(ne){C||(ne instanceof Tn&&Ui(ne.value)===En?N(ne.value.sections):ne instanceof Ro?N(ne.sections):ne.eachChild($))},Q=w.value;Q._styleExpression&&$(Q._styleExpression.expression)}return C},u}(Js),K0={paint:new Os({"background-color":new Yt(Ee.paint_background["background-color"]),"background-pattern":new Jn(Ee.paint_background["background-pattern"]),"background-opacity":new Yt(Ee.paint_background["background-opacity"])})},Y0=function(a){function u(c){a.call(this,c,K0)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u}(Js),X0={paint:new Os({"raster-opacity":new Yt(Ee.paint_raster["raster-opacity"]),"raster-hue-rotate":new Yt(Ee.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Yt(Ee.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Yt(Ee.paint_raster["raster-brightness-max"]),"raster-saturation":new Yt(Ee.paint_raster["raster-saturation"]),"raster-contrast":new Yt(Ee.paint_raster["raster-contrast"]),"raster-resampling":new Yt(Ee.paint_raster["raster-resampling"]),"raster-fade-duration":new Yt(Ee.paint_raster["raster-fade-duration"])})},Q0=function(a){function u(c){a.call(this,c,X0)}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u}(Js),rE=function(a){function u(c){a.call(this,c,{}),this.implementation=c}return a&&(u.__proto__=a),(u.prototype=Object.create(a&&a.prototype)).constructor=u,u.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},u.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},u.prototype.recalculate=function(){},u.prototype.updateTransitions=function(){},u.prototype.hasTransition=function(){},u.prototype.serialize=function(){},u.prototype.onAdd=function(c){this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},u.prototype.onRemove=function(c){this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},u}(Js),iE={circle:sl,heatmap:_f,hillshade:Ad,fill:T0,"fill-extrusion":M0,line:Pf,symbol:J0,background:Y0,raster:Q0},Bd=F.HTMLImageElement,Hh=F.HTMLCanvasElement,km=F.HTMLVideoElement,Fm=F.ImageData,Ff=F.ImageBitmap,Kc=function(a,u,c,y){this.context=a,this.format=c,this.texture=a.gl.createTexture(),this.update(u,y)};Kc.prototype.update=function(a,u,c){var y=a.width,w=a.height,E=!(this.size&&this.size[0]===y&&this.size[1]===w||c),C=this.context,N=C.gl;if(this.useMipmap=Boolean(u&&u.useMipmap),N.bindTexture(N.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===N.RGBA&&(!u||!1!==u.premultiply)),E)this.size=[y,w],a instanceof Bd||a instanceof Hh||a instanceof km||a instanceof Fm||Ff&&a instanceof Ff?N.texImage2D(N.TEXTURE_2D,0,this.format,this.format,N.UNSIGNED_BYTE,a):N.texImage2D(N.TEXTURE_2D,0,this.format,y,w,0,this.format,N.UNSIGNED_BYTE,a.data);else{var $=c||{x:0,y:0},Q=$.x,ne=$.y;a instanceof Bd||a instanceof Hh||a instanceof km||a instanceof Fm||Ff&&a instanceof Ff?N.texSubImage2D(N.TEXTURE_2D,0,Q,ne,N.RGBA,N.UNSIGNED_BYTE,a):N.texSubImage2D(N.TEXTURE_2D,0,Q,ne,y,w,N.RGBA,N.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&N.generateMipmap(N.TEXTURE_2D)},Kc.prototype.bind=function(a,u,c){var y=this.context.gl;y.bindTexture(y.TEXTURE_2D,this.texture),c!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(c=y.LINEAR),a!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,a),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,c||a),this.filter=a),u!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,u),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,u),this.wrap=u)},Kc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Kc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var $h=function(a){var u=this;this._callback=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){u._triggered=!1,u._callback()})};$h.prototype.trigger=function(){var a=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){a._triggered=!1,a._callback()},0))},$h.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Yc=function(a,u,c){this.target=a,this.parent=u,this.mapId=c,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Se(["receive","process"],this),this.invoker=new $h(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ee()?a:F};function qh(a,u,c){var y=2*Math.PI*6378137/256/Math.pow(2,c);return[a*y-2*Math.PI*6378137/2,u*y-2*Math.PI*6378137/2]}Yc.prototype.send=function(a,u,c,y,w){var E=this;void 0===w&&(w=!1);var C=Math.round(1e18*Math.random()).toString(36).substring(0,10);c&&(this.callbacks[C]=c);var N=Ze(this.globalScope)?void 0:[];return this.target.postMessage({id:C,type:a,hasCallback:!!c,targetMapId:y,mustQueue:w,sourceMapId:this.mapId,data:ws(u,N)},N),{cancel:function(){c&&delete E.callbacks[C],E.target.postMessage({id:C,type:"<cancel>",targetMapId:y,sourceMapId:E.mapId})}}},Yc.prototype.receive=function(a){var u=a.data,c=u.id;if(c&&(!u.targetMapId||this.mapId===u.targetMapId))if("<cancel>"===u.type){delete this.tasks[c];var y=this.cancelCallbacks[c];delete this.cancelCallbacks[c],y&&y()}else ee()||u.mustQueue?(this.tasks[c]=u,this.taskQueue.push(c),this.invoker.trigger()):this.processTask(c,u)},Yc.prototype.process=function(){if(this.taskQueue.length){var a=this.taskQueue.shift(),u=this.tasks[a];delete this.tasks[a],this.taskQueue.length&&this.invoker.trigger(),u&&this.processTask(a,u)}},Yc.prototype.processTask=function(a,u){var c=this;if("<response>"===u.type){var y=this.callbacks[a];delete this.callbacks[a],y&&(u.error?y(su(u.error)):y(null,su(u.data)))}else{var w=!1,E=Ze(this.globalScope)?void 0:[],C=u.hasCallback?function(ne,re){w=!0,delete c.cancelCallbacks[a],c.target.postMessage({id:a,type:"<response>",sourceMapId:c.mapId,error:ne?ws(ne):null,data:ws(re,E)},E)}:function(ne){w=!0},N=null,$=su(u.data);if(this.parent[u.type])N=this.parent[u.type](u.sourceMapId,$,C);else if(this.parent.getWorkerSource){var Q=u.type.split(".");N=this.parent.getWorkerSource(u.sourceMapId,Q[0],$.source)[Q[1]]($,C)}else C(new Error("Could not find function "+u.type));!w&&N&&N.cancel&&(this.cancelCallbacks[a]=N.cancel)}},Yc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Vo=function(a,u){a&&(u?this.setSouthWest(a).setNorthEast(u):4===a.length?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1]))};Vo.prototype.setNorthEast=function(a){return this._ne=a instanceof Hi?new Hi(a.lng,a.lat):Hi.convert(a),this},Vo.prototype.setSouthWest=function(a){return this._sw=a instanceof Hi?new Hi(a.lng,a.lat):Hi.convert(a),this},Vo.prototype.extend=function(a){var u,c,y=this._sw,w=this._ne;if(a instanceof Hi)u=a,c=a;else{if(!(a instanceof Vo))return Array.isArray(a)?4===a.length||a.every(Array.isArray)?this.extend(Vo.convert(a)):this.extend(Hi.convert(a)):this;if(c=a._ne,!(u=a._sw)||!c)return this}return y||w?(y.lng=Math.min(u.lng,y.lng),y.lat=Math.min(u.lat,y.lat),w.lng=Math.max(c.lng,w.lng),w.lat=Math.max(c.lat,w.lat)):(this._sw=new Hi(u.lng,u.lat),this._ne=new Hi(c.lng,c.lat)),this},Vo.prototype.getCenter=function(){return new Hi((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Vo.prototype.getSouthWest=function(){return this._sw},Vo.prototype.getNorthEast=function(){return this._ne},Vo.prototype.getNorthWest=function(){return new Hi(this.getWest(),this.getNorth())},Vo.prototype.getSouthEast=function(){return new Hi(this.getEast(),this.getSouth())},Vo.prototype.getWest=function(){return this._sw.lng},Vo.prototype.getSouth=function(){return this._sw.lat},Vo.prototype.getEast=function(){return this._ne.lng},Vo.prototype.getNorth=function(){return this._ne.lat},Vo.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Vo.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Vo.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Vo.prototype.contains=function(a){var u=Hi.convert(a),c=u.lng,y=u.lat,w=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(w=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=y&&y<=this._ne.lat&&w},Vo.convert=function(a){return!a||a instanceof Vo?a:new Vo(a)};var Hi=function(a,u){if(isNaN(a)||isNaN(u))throw new Error("Invalid LngLat object: ("+a+", "+u+")");if(this.lng=+a,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Hi.prototype.wrap=function(){return new Hi(se(this.lng,-180,180),this.lat)},Hi.prototype.toArray=function(){return[this.lng,this.lat]},Hi.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Hi.prototype.distanceTo=function(a){var u=Math.PI/180,c=this.lat*u,y=a.lat*u,w=Math.sin(c)*Math.sin(y)+Math.cos(c)*Math.cos(y)*Math.cos((a.lng-this.lng)*u);return 6371008.8*Math.acos(Math.min(w,1))},Hi.prototype.toBounds=function(a){void 0===a&&(a=0);var u=360*a/40075017,c=u/Math.cos(Math.PI/180*this.lat);return new Vo(new Hi(this.lng-c,this.lat-u),new Hi(this.lng+c,this.lat+u))},Hi.convert=function(a){if(a instanceof Hi)return a;if(Array.isArray(a)&&(2===a.length||3===a.length))return new Hi(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&"object"==typeof a&&null!==a)return new Hi(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Wh=2*Math.PI*6371008.8;function zm(a){return Wh*Math.cos(a*Math.PI/180)}function Bm(a){return(180+a)/360}function vc(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function My(a,u){return a/zm(u)}function zf(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}var cl=function(a,u,c){void 0===c&&(c=0),this.x=+a,this.y=+u,this.z=+c};cl.fromLngLat=function(a,u){void 0===u&&(u=0);var c=Hi.convert(a);return new cl(Bm(c.lng),vc(c.lat),My(u,c.lat))},cl.prototype.toLngLat=function(){return new Hi(360*this.x-180,zf(this.y))},cl.prototype.toAltitude=function(){return this.z*zm(zf(this.y))},cl.prototype.meterInMercatorCoordinateUnits=function(){return 1/Wh*(a=zf(this.y),1/Math.cos(a*Math.PI/180));var a};var Xc=function(a,u,c){this.z=a,this.x=u,this.y=c,this.key=Ou(0,a,a,u,c)};Xc.prototype.equals=function(a){return this.z===a.z&&this.x===a.x&&this.y===a.y},Xc.prototype.url=function(a,u){var c,y,w,E,C,N=(y=this.y,w=this.z,E=qh(256*(c=this.x),256*(y=Math.pow(2,w)-y-1),w),C=qh(256*(c+1),256*(y+1),w),E[0]+","+E[1]+","+C[0]+","+C[1]),$=function(Q,ne,re){for(var le,me="",Te=Q;Te>0;Te--)me+=(ne&(le=1<<Te-1)?1:0)+(re&le?2:0);return me}(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===u?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",$).replace("{bbox-epsg-3857}",N)},Xc.prototype.getTilePoint=function(a){var u=Math.pow(2,this.z);return new T(8192*(a.x*u-this.x),8192*(a.y*u-this.y))},Xc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Zh=function(a,u){this.wrap=a,this.canonical=u,this.key=Ou(a,u.z,u.z,u.x,u.y)},co=function(a,u,c,y,w){this.overscaledZ=a,this.wrap=u,this.canonical=new Xc(c,+y,+w),this.key=Ou(u,a,c,y,w)};function Ou(a,u,c,y,w){(a*=2)<0&&(a=-1*a-1);var E=1<<c;return(E*E*a+E*w+y).toString(36)+c.toString(36)+u.toString(36)}co.prototype.equals=function(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)},co.prototype.scaledTo=function(a){var u=this.canonical.z-a;return a>this.canonical.z?new co(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new co(a,this.wrap,a,this.canonical.x>>u,this.canonical.y>>u)},co.prototype.calculateScaledKey=function(a,u){var c=this.canonical.z-a;return a>this.canonical.z?Ou(this.wrap*+u,a,this.canonical.z,this.canonical.x,this.canonical.y):Ou(this.wrap*+u,a,a,this.canonical.x>>c,this.canonical.y>>c)},co.prototype.isChildOf=function(a){if(a.wrap!==this.wrap)return!1;var u=this.canonical.z-a.canonical.z;return 0===a.overscaledZ||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>u&&a.canonical.y===this.canonical.y>>u},co.prototype.children=function(a){if(this.overscaledZ>=a)return[new co(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var u=this.canonical.z+1,c=2*this.canonical.x,y=2*this.canonical.y;return[new co(u,this.wrap,u,c,y),new co(u,this.wrap,u,c+1,y),new co(u,this.wrap,u,c,y+1),new co(u,this.wrap,u,c+1,y+1)]},co.prototype.isLessThan=function(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))},co.prototype.wrapped=function(){return new co(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},co.prototype.unwrapTo=function(a){return new co(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)},co.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},co.prototype.toUnwrapped=function(){return new Zh(this.wrap,this.canonical)},co.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},co.prototype.getTilePoint=function(a){return this.canonical.getTilePoint(new cl(a.x-this.wrap,a.y))},dn("CanonicalTileID",Xc),dn("OverscaledTileID",co,{omit:["posMatrix"]});var dl=function(a,u,c){if(this.uid=a,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(c&&"mapbox"!==c&&"terrarium"!==c)return O('"'+c+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=u.height;var y=this.dim=u.height-2;this.data=new Uint32Array(u.data.buffer),this.encoding=c||"mapbox";for(var w=0;w<y;w++)this.data[this._idx(-1,w)]=this.data[this._idx(0,w)],this.data[this._idx(y,w)]=this.data[this._idx(y-1,w)],this.data[this._idx(w,-1)]=this.data[this._idx(w,0)],this.data[this._idx(w,y)]=this.data[this._idx(w,y-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(y,-1)]=this.data[this._idx(y-1,0)],this.data[this._idx(-1,y)]=this.data[this._idx(0,y-1)],this.data[this._idx(y,y)]=this.data[this._idx(y-1,y-1)]};dl.prototype.get=function(a,u){var c=new Uint8Array(this.data.buffer),y=4*this._idx(a,u);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(c[y],c[y+1],c[y+2])},dl.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},dl.prototype._idx=function(a,u){if(a<-1||a>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(a+1)},dl.prototype._unpackMapbox=function(a,u,c){return(256*a*256+256*u+c)/10-1e4},dl.prototype._unpackTerrarium=function(a,u,c){return 256*a+u+c/256-32768},dl.prototype.getPixels=function(){return new Va({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},dl.prototype.backfillBorder=function(a,u,c){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");var y=u*this.dim,w=u*this.dim+this.dim,E=c*this.dim,C=c*this.dim+this.dim;switch(u){case-1:y=w-1;break;case 1:w=y+1}switch(c){case-1:E=C-1;break;case 1:C=E+1}for(var N=-u*this.dim,$=-c*this.dim,Q=E;Q<C;Q++)for(var ne=y;ne<w;ne++)this.data[this._idx(ne,Q)]=a.data[this._idx(ne+N,Q+$)]},dn("DEMData",dl);var jd=function(a){this._stringToNumber={},this._numberToString=[];for(var u=0;u<a.length;u++){var c=a[u];this._stringToNumber[c]=u,this._numberToString[u]=c}};jd.prototype.encode=function(a){return this._stringToNumber[a]},jd.prototype.decode=function(a){return this._numberToString[a]};var Jh=function(a,u,c,y,w){this.type="Feature",this._vectorTileFeature=a,a._z=u,a._x=c,a._y=y,this.properties=a.properties,this.id=w},jm={geometry:{configurable:!0}};jm.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},jm.geometry.set=function(a){this._geometry=a},Jh.prototype.toJSON=function(){var a={geometry:this.geometry};for(var u in this)"_geometry"!==u&&"_vectorTileFeature"!==u&&(a[u]=this[u]);return a},Object.defineProperties(Jh.prototype,jm);var Qc=function(){this.state={},this.stateChanges={},this.deletedStates={}};Qc.prototype.updateState=function(a,u,c){var y=String(u);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][y]=this.stateChanges[a][y]||{},be(this.stateChanges[a][y],c),null===this.deletedStates[a])for(var w in this.deletedStates[a]={},this.state[a])w!==y&&(this.deletedStates[a][w]=null);else if(this.deletedStates[a]&&null===this.deletedStates[a][y])for(var E in this.deletedStates[a][y]={},this.state[a][y])c[E]||(this.deletedStates[a][y][E]=null);else for(var C in c)this.deletedStates[a]&&this.deletedStates[a][y]&&null===this.deletedStates[a][y][C]&&delete this.deletedStates[a][y][C]},Qc.prototype.removeFeatureState=function(a,u,c){if(null!==this.deletedStates[a]){var y=String(u);if(this.deletedStates[a]=this.deletedStates[a]||{},c&&void 0!==u)null!==this.deletedStates[a][y]&&(this.deletedStates[a][y]=this.deletedStates[a][y]||{},this.deletedStates[a][y][c]=null);else if(void 0!==u)if(this.stateChanges[a]&&this.stateChanges[a][y])for(c in this.deletedStates[a][y]={},this.stateChanges[a][y])this.deletedStates[a][y][c]=null;else this.deletedStates[a][y]=null;else this.deletedStates[a]=null}},Qc.prototype.getState=function(a,u){var c=String(u),y=be({},(this.state[a]||{})[c],(this.stateChanges[a]||{})[c]);if(null===this.deletedStates[a])return{};if(this.deletedStates[a]){var w=this.deletedStates[a][u];if(null===w)return{};for(var E in w)delete y[E]}return y},Qc.prototype.initializeTileState=function(a,u){a.setFeatureState(this.state,u)},Qc.prototype.coalesceChanges=function(a,u){var c={};for(var y in this.stateChanges){this.state[y]=this.state[y]||{};var w={};for(var E in this.stateChanges[y])this.state[y][E]||(this.state[y][E]={}),be(this.state[y][E],this.stateChanges[y][E]),w[E]=this.state[y][E];c[y]=w}for(var C in this.deletedStates){this.state[C]=this.state[C]||{};var N={};if(null===this.deletedStates[C])for(var $ in this.state[C])N[$]={},this.state[C][$]={};else for(var Q in this.deletedStates[C]){if(null===this.deletedStates[C][Q])this.state[C][Q]={};else for(var ne=0,re=Object.keys(this.deletedStates[C][Q]);ne<re.length;ne+=1)delete this.state[C][Q][re[ne]];N[Q]=this.state[C][Q]}c[C]=c[C]||{},be(c[C],N)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(c).length)for(var le in a)a[le].setFeatureState(c,u)};var Ks=function(a,u){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new Qo(8192,16,0),this.grid3D=new Qo(8192,16,0),this.featureIndexArray=new ge,this.promoteId=u};function Oy(a,u,c,y,w){return nt(a,function(E,C){var N=u instanceof Pl?u.get(C):null;return N&&N.evaluate?N.evaluate(c,y,w):N})}function Ly(a){for(var u=1/0,c=1/0,y=-1/0,w=-1/0,E=0,C=a;E<C.length;E+=1){var N=C[E];u=Math.min(u,N.x),c=Math.min(c,N.y),y=Math.max(y,N.x),w=Math.max(w,N.y)}return{minX:u,minY:c,maxX:y,maxY:w}}function eb(a,u){return u-a}Ks.prototype.insert=function(a,u,c,y,w,E){var C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,y,w);for(var N=E?this.grid3D:this.grid,$=0;$<u.length;$++){for(var Q=u[$],ne=[1/0,1/0,-1/0,-1/0],re=0;re<Q.length;re++){var le=Q[re];ne[0]=Math.min(ne[0],le.x),ne[1]=Math.min(ne[1],le.y),ne[2]=Math.max(ne[2],le.x),ne[3]=Math.max(ne[3],le.y)}ne[0]<8192&&ne[1]<8192&&ne[2]>=0&&ne[3]>=0&&N.insert(C,ne[0],ne[1],ne[2],ne[3])}},Ks.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new kl.VectorTile(new Em(this.rawTileData)).layers,this.sourceLayerCoder=new jd(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ks.prototype.query=function(a,u,c,y){var w=this;this.loadVTLayers();for(var E=a.params||{},C=8192/a.tileSize/a.scale,N=Na(E.filter),$=a.queryGeometry,Q=a.queryPadding*C,ne=Ly($),re=this.grid.query(ne.minX-Q,ne.minY-Q,ne.maxX+Q,ne.maxY+Q),le=Ly(a.cameraQueryGeometry),Te=0,Pe=this.grid3D.query(le.minX-Q,le.minY-Q,le.maxX+Q,le.maxY+Q,function(ht,gt,Dt,jt){return function(Xt,vn,en,Rn,an){for(var fr=0,Fn=Xt;fr<Fn.length;fr+=1){var hn=Fn[fr];if(vn<=hn.x&&en<=hn.y&&Rn>=hn.x&&an>=hn.y)return!0}var Sr=[new T(vn,en),new T(vn,an),new T(Rn,an),new T(Rn,en)];if(Xt.length>2)for(var rr=0,Fr=Sr;rr<Fr.length;rr+=1)if(Du(Xt,Fr[rr]))return!0;for(var Sn=0;Sn<Xt.length-1;Sn++)if(Au(Xt[Sn],Xt[Sn+1],Sr))return!0;return!1}(a.cameraQueryGeometry,ht-Q,gt-Q,Dt+Q,jt+Q)});Te<Pe.length;Te+=1)re.push(Pe[Te]);re.sort(eb);for(var We,Be={},rt=function(ht){var gt=re[ht];if(gt!==We){We=gt;var Dt=w.featureIndexArray.get(gt),jt=null;w.loadMatchingFeature(Be,Dt.bucketIndex,Dt.sourceLayerIndex,Dt.featureIndex,N,E.layers,E.availableImages,u,c,y,function(Xt,vn,en){return jt||(jt=Zi(Xt)),vn.queryIntersectsFeature($,Xt,en,jt,w.z,a.transform,C,a.pixelPosMatrix)})}},st=0;st<re.length;st++)rt(st);return Be},Ks.prototype.loadMatchingFeature=function(a,u,c,y,w,E,C,N,$,Q,ne){var re=this.bucketLayerIDs[u];if(!E||function(Xt,vn){for(var en=0;en<Xt.length;en++)if(vn.indexOf(Xt[en])>=0)return!0;return!1}(E,re)){var le=this.sourceLayerCoder.decode(c),me=this.vtLayers[le].feature(y);if(w.needGeometry){var Te=fa(me,!0);if(!w.filter(new Wr(this.tileID.overscaledZ),Te,this.tileID.canonical))return}else if(!w.filter(new Wr(this.tileID.overscaledZ),me))return;for(var Pe=this.getId(me,le),We=0;We<re.length;We++){var Be=re[We];if(!(E&&E.indexOf(Be)<0)){var rt=N[Be];if(rt){var st={};void 0!==Pe&&Q&&(st=Q.getState(rt.sourceLayer||"_geojsonTileLayer",Pe));var ht=be({},$[Be]);ht.paint=Oy(ht.paint,rt.paint,me,st,C),ht.layout=Oy(ht.layout,rt.layout,me,st,C);var gt=!ne||ne(me,rt,st);if(gt){var Dt=new Jh(me,this.z,this.x,this.y,Pe);Dt.layer=ht;var jt=a[Be];void 0===jt&&(jt=a[Be]=[]),jt.push({featureIndex:y,feature:Dt,intersectionZ:gt})}}}}}},Ks.prototype.lookupSymbolFeatures=function(a,u,c,y,w,E,C,N){var $={};this.loadVTLayers();for(var Q=Na(w),ne=0,re=a;ne<re.length;ne+=1)this.loadMatchingFeature($,c,y,re[ne],Q,E,C,N,u);return $},Ks.prototype.hasLayer=function(a){for(var u=0,c=this.bucketLayerIDs;u<c.length;u+=1)for(var y=0,w=c[u];y<w.length;y+=1)if(a===w[y])return!0;return!1},Ks.prototype.getId=function(a,u){var c=a.id;return this.promoteId&&"boolean"==typeof(c=a.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[u]])&&(c=Number(c)),c},dn("FeatureIndex",Ks,{omit:["rawTileData","sourceLayerCoder"]});var ra=function(a,u){this.tileID=a,this.uid=Ne(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ra.prototype.registerFadeDuration=function(a){var u=a+this.timeAdded;u<bn.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)},ra.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},ra.prototype.loadVectorData=function(a,u,c){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){for(var y in a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(Q,ne){var re={};if(!ne)return re;for(var le=function(){var Pe=Te[me],We=Pe.layerIds.map(function(st){return ne.getLayer(st)}).filter(Boolean);if(0!==We.length){Pe.layers=We,Pe.stateDependentLayerIds&&(Pe.stateDependentLayers=Pe.stateDependentLayerIds.map(function(st){return We.filter(function(ht){return ht.id===st})[0]}));for(var Be=0,rt=We;Be<rt.length;Be+=1)re[rt[Be].id]=Pe}},me=0,Te=Q;me<Te.length;me+=1)le();return re}(a.buckets,u.style),this.hasSymbolBuckets=!1,this.buckets){var w=this.buckets[y];if(w instanceof wi){if(this.hasSymbolBuckets=!0,!c)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var E in this.buckets){var C=this.buckets[E];if(C instanceof wi&&C.hasRTLText){this.hasRTLText=!0,no.isLoading()||no.isLoaded()||"deferred"!==Ti()||Ah();break}}for(var N in this.queryPadding=0,this.buckets){var $=this.buckets[N];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(N).queryRadius($))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new h},ra.prototype.unloadVectorData=function(){for(var a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ra.prototype.getBucket=function(a){return this.buckets[a.id]},ra.prototype.upload=function(a){for(var u in this.buckets){var c=this.buckets[u];c.uploadPending()&&c.upload(a)}var y=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Kc(a,this.imageAtlas.image,y.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Kc(a,this.glyphAtlasImage,y.ALPHA),this.glyphAtlasImage=null)},ra.prototype.prepare=function(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)},ra.prototype.queryRenderedFeatures=function(a,u,c,y,w,E,C,N,$,Q){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:w,scale:E,tileSize:this.tileSize,pixelPosMatrix:Q,transform:N,params:C,queryPadding:this.queryPadding*$},a,u,c):{}},ra.prototype.querySourceFeatures=function(a,u){var c=this.latestFeatureIndex;if(c&&c.rawTileData){var y=c.loadVTLayers(),w=u?u.sourceLayer:"",E=y._geojsonTileLayer||y[w];if(E)for(var C=Na(u&&u.filter),N=this.tileID.canonical,$=N.z,Q=N.x,ne=N.y,re={z:$,x:Q,y:ne},le=0;le<E.length;le++){var me=E.feature(le);if(C.needGeometry){var Te=fa(me,!0);if(!C.filter(new Wr(this.tileID.overscaledZ),Te,this.tileID.canonical))continue}else if(!C.filter(new Wr(this.tileID.overscaledZ),me))continue;var Pe=c.getId(me,w),We=new Jh(me,$,Q,ne,Pe);We.tile=re,a.push(We)}}},ra.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},ra.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ra.prototype.setExpiryData=function(a){var u=this.expirationTime;if(a.cacheControl){var c=W(a.cacheControl);c["max-age"]&&(this.expirationTime=Date.now()+1e3*c["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){var y=Date.now(),w=!1;if(this.expirationTime>y)w=!1;else if(u)if(this.expirationTime<u)w=!0;else{var E=this.expirationTime-u;E?this.expirationTime=y+Math.max(E,3e4):w=!0}else w=!0;w?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ra.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},ra.prototype.setFeatureState=function(a,u){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(a).length){var c=this.latestFeatureIndex.loadVTLayers();for(var y in this.buckets)if(u.style.hasLayer(y)){var w=this.buckets[y],E=w.layers[0].sourceLayer||"_geojsonTileLayer",C=c[E],N=a[E];if(C&&N&&0!==Object.keys(N).length){w.update(N,C,this.imageAtlas&&this.imageAtlas.patternPositions||{});var $=u&&u.style&&u.style.getLayer(y);$&&(this.queryPadding=Math.max(this.queryPadding,$.queryRadius(w)))}}}},ra.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},ra.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<bn.now()},ra.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ra.prototype.setHoldDuration=function(a){this.symbolFadeHoldUntil=bn.now()+a},ra.prototype.setDependencies=function(a,u){for(var c={},y=0,w=u;y<w.length;y+=1)c[w[y]]=!0;this.dependencies[a]=c},ra.prototype.hasDependency=function(a,u){for(var c=0,y=a;c<y.length;c+=1){var w=this.dependencies[y[c]];if(w)for(var E=0,C=u;E<C.length;E+=1)if(w[C[E]])return!0}return!1};var fl=F.performance,Ny=function(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},fl.mark(this._marks.start)};Ny.prototype.finish=function(){fl.mark(this._marks.end);var a=fl.getEntriesByName(this._marks.measure);return 0===a.length&&(fl.measure(this._marks.measure,this._marks.start,this._marks.end),a=fl.getEntriesByName(this._marks.measure),fl.clearMarks(this._marks.start),fl.clearMarks(this._marks.end),fl.clearMeasures(this._marks.measure)),a},m.Actor=Yc,m.AlphaImage=Vc,m.CanonicalTileID=Xc,m.CollisionBoxArray=h,m.Color=er,m.DEMData=dl,m.DataConstantProperty=Yt,m.DictionaryCoder=jd,m.EXTENT=8192,m.ErrorEvent=Xe,m.EvaluationParameters=Wr,m.Event=$e,m.Evented=He,m.FeatureIndex=Ks,m.FillBucket=ul,m.FillExtrusionBucket=Mu,m.ImageAtlas=$c,m.ImagePosition=Im,m.LineBucket=ss,m.LngLat=Hi,m.LngLatBounds=Vo,m.MercatorCoordinate=cl,m.ONE_EM=24,m.OverscaledTileID=co,m.Point=T,m.Point$1=T,m.Properties=Os,m.Protobuf=Em,m.RGBAImage=Va,m.RequestManager=Vn,m.RequestPerformance=Ny,m.ResourceType=Gu,m.SegmentVector=ye,m.SourceFeatureState=Qc,m.StructArrayLayout1ui2=zc,m.StructArrayLayout2f1f2i16=vf,m.StructArrayLayout2i4=zt,m.StructArrayLayout3ui6=ja,m.StructArrayLayout4i8=Lr,m.SymbolBucket=wi,m.Texture=Kc,m.Tile=ra,m.Transitionable=ts,m.Uniform1f=kt,m.Uniform1i=$t,m.Uniform2f=tn,m.Uniform3f=wn,m.Uniform4f=An,m.UniformColor=Cn,m.UniformMatrix4f=nn,m.UnwrappedTileID=Zh,m.ValidationError=Fe,m.WritingMode=Ls,m.ZoomHistory=za,m.add=function(a,u,c){return a[0]=u[0]+c[0],a[1]=u[1]+c[1],a[2]=u[2]+c[2],a},m.addDynamicAttributes=Lm,m.asyncAll=function(a,u,c){if(!a.length)return c(null,[]);var y=a.length,w=new Array(a.length),E=null;a.forEach(function(C,N){u(C,function($,Q){$&&(E=$),w[N]=Q,0==--y&&c(E,w)})})},m.bezier=Y,m.bindAll=Se,m.browser=bn,m.cacheEntryPossiblyAdded=function(a){++xo>uo&&(a.getActor().send("enforceCacheSizeLimit",ma),xo=0)},m.clamp=pe,m.clearTileCache=function(a){var u=F.caches.delete("mapbox-tiles");a&&u.catch(a).then(function(){return a()})},m.clipLine=Dm,m.clone=function(a){var u=new io(16);return u[0]=a[0],u[1]=a[1],u[2]=a[2],u[3]=a[3],u[4]=a[4],u[5]=a[5],u[6]=a[6],u[7]=a[7],u[8]=a[8],u[9]=a[9],u[10]=a[10],u[11]=a[11],u[12]=a[12],u[13]=a[13],u[14]=a[14],u[15]=a[15],u},m.clone$1=Ue,m.clone$2=function(a){var u=new io(3);return u[0]=a[0],u[1]=a[1],u[2]=a[2],u},m.collisionCircleLayout=L0,m.config=Ct,m.create=function(){var a=new io(16);return io!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},m.create$1=function(){var a=new io(9);return io!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a},m.create$2=function(){var a=new io(4);return io!=Float32Array&&(a[1]=0,a[2]=0),a[0]=1,a[3]=1,a},m.createCommonjsModule=q,m.createExpression=ou,m.createLayout=ea,m.createStyleLayer=function(a){return"custom"===a.type?new rE(a):new iE[a.type](a)},m.cross=function(a,u,c){var y=u[0],w=u[1],E=u[2],C=c[0],N=c[1],$=c[2];return a[0]=w*$-E*N,a[1]=E*C-y*$,a[2]=y*N-w*C,a},m.deepEqual=function a(u,c){if(Array.isArray(u)){if(!Array.isArray(c)||u.length!==c.length)return!1;for(var y=0;y<u.length;y++)if(!a(u[y],c[y]))return!1;return!0}if("object"==typeof u&&null!==u&&null!==c){if("object"!=typeof c||Object.keys(u).length!==Object.keys(c).length)return!1;for(var w in u)if(!a(u[w],c[w]))return!1;return!0}return u===c},m.dot=function(a,u){return a[0]*u[0]+a[1]*u[1]+a[2]*u[2]},m.dot$1=function(a,u){return a[0]*u[0]+a[1]*u[1]+a[2]*u[2]+a[3]*u[3]},m.ease=ie,m.emitValidationErrors=$u,m.endsWith=Ke,m.enforceCacheSizeLimit=function(a){wo(),$r&&$r.then(function(u){u.keys().then(function(c){for(var y=0;y<c.length-a;y++)u.delete(c[y])})})},m.evaluateSizeForFeature=U0,m.evaluateSizeForZoom=Pm,m.evaluateVariableOffset=$0,m.evented=Dh,m.extend=be,m.featureFilter=Na,m.filterObject=It,m.fromRotation=function(a,u){var c=Math.sin(u),y=Math.cos(u);return a[0]=y,a[1]=c,a[2]=0,a[3]=-c,a[4]=y,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},m.getAnchorAlignment=Tm,m.getAnchorJustification=Gh,m.getArrayBuffer=Br,m.getImage=fe,m.getJSON=function(a,u){return tu(be(a,{type:"json"}),u)},m.getRTLTextPluginStatus=Ti,m.getReferrer=Us,m.getVideo=function(a,u){var c,y,w=F.document.createElement("video");w.muted=!0,w.onloadstart=function(){u(null,w)};for(var E=0;E<a.length;E++){var C=F.document.createElement("source");c=a[E],y=void 0,(y=F.document.createElement("a")).href=c,(y.protocol!==F.document.location.protocol||y.host!==F.document.location.host)&&(w.crossOrigin="Anonymous"),C.src=a[E],w.appendChild(C)}return{cancel:function(){}}},m.identity=Ea,m.invert=function(a,u){var c=u[0],y=u[1],w=u[2],E=u[3],C=u[4],N=u[5],$=u[6],Q=u[7],ne=u[8],re=u[9],le=u[10],me=u[11],Te=u[12],Pe=u[13],We=u[14],Be=u[15],rt=c*N-y*C,st=c*$-w*C,ht=c*Q-E*C,gt=y*$-w*N,Dt=y*Q-E*N,jt=w*Q-E*$,Xt=ne*Pe-re*Te,vn=ne*We-le*Te,en=ne*Be-me*Te,Rn=re*We-le*Pe,an=re*Be-me*Pe,fr=le*Be-me*We,Fn=rt*fr-st*an+ht*Rn+gt*en-Dt*vn+jt*Xt;return Fn?(a[0]=(N*fr-$*an+Q*Rn)*(Fn=1/Fn),a[1]=(w*an-y*fr-E*Rn)*Fn,a[2]=(Pe*jt-We*Dt+Be*gt)*Fn,a[3]=(le*Dt-re*jt-me*gt)*Fn,a[4]=($*en-C*fr-Q*vn)*Fn,a[5]=(c*fr-w*en+E*vn)*Fn,a[6]=(We*ht-Te*jt-Be*st)*Fn,a[7]=(ne*jt-le*ht+me*st)*Fn,a[8]=(C*an-N*en+Q*Xt)*Fn,a[9]=(y*en-c*an-E*Xt)*Fn,a[10]=(Te*Dt-Pe*ht+Be*rt)*Fn,a[11]=(re*ht-ne*Dt-me*rt)*Fn,a[12]=(N*vn-C*Rn-$*Xt)*Fn,a[13]=(c*Rn-y*vn+w*Xt)*Fn,a[14]=(Pe*st-Te*gt-We*rt)*Fn,a[15]=(ne*gt-re*st+le*rt)*Fn,a):null},m.isChar=fn,m.isMapboxURL=ur,m.keysDifference=function(a,u){var c=[];for(var y in a)y in u||c.push(y);return c},m.makeRequest=tu,m.mapObject=nt,m.mercatorXfromLng=Bm,m.mercatorYfromLat=vc,m.mercatorZfromAltitude=My,m.mul=lm,m.multiply=uc,m.mvt=kl,m.nextPowerOfTwo=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},m.normalize=function(a,u){var c=u[0],y=u[1],w=u[2],E=c*c+y*y+w*w;return E>0&&(E=1/Math.sqrt(E)),a[0]=u[0]*E,a[1]=u[1]*E,a[2]=u[2]*E,a},m.number=Gi,m.offscreenCanvasSupported=lr,m.ortho=function(a,u,c,y,w,E,C){var N=1/(u-c),$=1/(y-w),Q=1/(E-C);return a[0]=-2*N,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*$,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*Q,a[11]=0,a[12]=(u+c)*N,a[13]=(w+y)*$,a[14]=(C+E)*Q,a[15]=1,a},m.parseGlyphPBF=function(a){return new Em(a).readFields(Cm,[])},m.pbf=Em,m.performSymbolLayout=function(a,u,c,y,w,E,C){a.createArrays(),a.tilePixelRatio=8192/(512*a.overscaling),a.compareText={},a.iconsNeedLinear=!1;var N=a.layers[0].layout,$=a.layers[0]._unevaluatedLayout._values,Q={};if("composite"===a.textSizeData.kind){var ne=a.textSizeData,re=ne.maxZoom;Q.compositeTextSizes=[$["text-size"].possiblyEvaluate(new Wr(ne.minZoom),C),$["text-size"].possiblyEvaluate(new Wr(re),C)]}if("composite"===a.iconSizeData.kind){var le=a.iconSizeData,me=le.maxZoom;Q.compositeIconSizes=[$["icon-size"].possiblyEvaluate(new Wr(le.minZoom),C),$["icon-size"].possiblyEvaluate(new Wr(me),C)]}Q.layoutTextSize=$["text-size"].possiblyEvaluate(new Wr(a.zoom+1),C),Q.layoutIconSize=$["icon-size"].possiblyEvaluate(new Wr(a.zoom+1),C),Q.textMaxSize=$["text-size"].possiblyEvaluate(new Wr(18));for(var Te=24*N.get("text-line-height"),Pe="map"===N.get("text-rotation-alignment")&&"point"!==N.get("symbol-placement"),We=N.get("text-keep-upright"),Be=N.get("text-size"),rt=function(){var gt=ht[st],Dt=N.get("text-font").evaluate(gt,{},C).join(","),jt=Be.evaluate(gt,{},C),Xt=Q.layoutTextSize.evaluate(gt,{},C),vn=Q.layoutIconSize.evaluate(gt,{},C),en={horizontal:{},vertical:void 0},Rn=gt.text,an=[0,0];if(Rn){var fr=Rn.toString(),Fn=24*N.get("text-letter-spacing").evaluate(gt,{},C),hn=function(Mr){for(var Si=0,di=Mr;Si<di.length;Si+=1)if(Gr=di[Si].charCodeAt(0),fn.Arabic(Gr)||fn["Arabic Supplement"](Gr)||fn["Arabic Extended-A"](Gr)||fn["Arabic Presentation Forms-A"](Gr)||fn["Arabic Presentation Forms-B"](Gr))return!1;var Gr;return!0}(fr)?Fn:0,Sr=N.get("text-anchor").evaluate(gt,{},C),rr=N.get("text-variable-anchor");if(!rr){var Fr=N.get("text-radial-offset").evaluate(gt,{},C);an=Fr?$0(Sr,[24*Fr,Py]):N.get("text-offset").evaluate(gt,{},C).map(function(Mr){return 24*Mr})}var Sn=Pe?"center":N.get("text-justify").evaluate(gt,{},C),Zr=N.get("symbol-placement"),Ni="point"===Zr?24*N.get("text-max-width").evaluate(gt,{},C):0,ki=function(){a.allowVerticalPlacement&&Td(fr)&&(en.vertical=Rf(Rn,u,c,w,Dt,Ni,Te,Sr,"left",hn,an,Ls.vertical,!0,Zr,Xt,jt))};if(!Pe&&rr){for(var oo="auto"===Sn?rr.map(function(Mr){return Gh(Mr)}):[Sn],$i=!1,fo=0;fo<oo.length;fo++){var Fo=oo[fo];if(!en.horizontal[Fo])if($i)en.horizontal[Fo]=en.horizontal[0];else{var Go=Rf(Rn,u,c,w,Dt,Ni,Te,"center",Fo,hn,an,Ls.horizontal,!1,Zr,Xt,jt);Go&&(en.horizontal[Fo]=Go,$i=1===Go.positionedLines.length)}}ki()}else{"auto"===Sn&&(Sn=Gh(Sr));var Ga=Rf(Rn,u,c,w,Dt,Ni,Te,Sr,Sn,hn,an,Ls.horizontal,!1,Zr,Xt,jt);Ga&&(en.horizontal[Sn]=Ga),ki(),Td(fr)&&Pe&&We&&(en.vertical=Rf(Rn,u,c,w,Dt,Ni,Te,Sr,Sn,hn,an,Ls.vertical,!1,Zr,Xt,jt))}}var Mr,Si,Gr,us,Ci,ia=void 0,Ha=!1;if(gt.icon&&gt.icon.name){var ao=y[gt.icon.name];ao&&(Mr=w[gt.icon.name],Si=N.get("icon-offset").evaluate(gt,{},C),Gr=Tm(N.get("icon-anchor").evaluate(gt,{},C)),ia={image:Mr,top:Ci=Si[1]-Mr.displaySize[1]*Gr.verticalAlign,bottom:Ci+Mr.displaySize[1],left:us=Si[0]-Mr.displaySize[0]*Gr.horizontalAlign,right:us+Mr.displaySize[0]},Ha=ao.sdf,void 0===a.sdfIcons?a.sdfIcons=ao.sdf:a.sdfIcons!==ao.sdf&&O("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ao.pixelRatio!==a.pixelRatio||0!==N.get("icon-rotate").constantOr(1))&&(a.iconsNeedLinear=!0))}var oa=Ay(en.horizontal)||en.vertical;a.iconsInText=!!oa&&oa.iconsInText,(oa||ia)&&function(Mr,Si,di,Gr,us,Ci,Ri,vo,aa,ir,Ys){var Ds=Ci.textMaxSize.evaluate(Si,{});void 0===Ds&&(Ds=Ri);var hl,_o=Mr.layers[0].layout,Ju=_o.get("icon-offset").evaluate(Si,{},Ys),Lu=Ay(di.horizontal),ed=Ri/24,td=Mr.tilePixelRatio*ed,nd=Mr.tilePixelRatio*Ds/24,zl=Mr.tilePixelRatio*vo,Ud=Mr.tilePixelRatio*_o.get("symbol-spacing"),Kh=_o.get("text-padding")*Mr.tilePixelRatio,Vd=_o.get("icon-padding")*Mr.tilePixelRatio,Bf=_o.get("text-max-angle")/180*Math.PI,Yh="map"===_o.get("text-rotation-alignment")&&"point"!==_o.get("symbol-placement"),Bl="map"===_o.get("icon-rotation-alignment")&&"point"!==_o.get("symbol-placement"),ls=_o.get("symbol-placement"),jf=Ud/2,Gd=_o.get("icon-text-fit");Gr&&"none"!==Gd&&(Mr.allowVerticalPlacement&&di.vertical&&(hl=j0(Gr,di.vertical,Gd,_o.get("icon-text-fit-padding"),Ju,ed)),Lu&&(Gr=j0(Gr,Lu,Gd,_o.get("icon-text-fit-padding"),Ju,ed)));var rd=function(tb,Wf){Wf.x<0||Wf.x>=8192||Wf.y<0||Wf.y>=8192||function(bo,Yu,nb,jl,Zf,$m,Wd,pl,ep,Zd,Jf,ml,tp,qm,Kf,rb,Yf,ky,Wm,Zm,ks,Jd,Jm,hu,np){var Km,Ul,ad,xc,gl,Kd=bo.addToLineVertexArray(Yu,nb),Ym=0,Fy=0,zy=0,Xm=0,Xf=-1,rp=-1,Ec={},Qm=ze(""),eg=0,ip=0;if(void 0===pl._unevaluatedLayout.getValue("text-radial-offset")?(eg=(Km=pl.layout.get("text-offset").evaluate(ks,{},hu).map(function(eh){return 24*eh}))[0],ip=Km[1]):(eg=24*pl.layout.get("text-radial-offset").evaluate(ks,{},hu),ip=Py),bo.allowVerticalPlacement&&jl.vertical){var By=pl.layout.get("text-rotate").evaluate(ks,{},hu)+90;xc=new Rm(ep,Yu,Zd,Jf,ml,jl.vertical,tp,qm,Kf,By),Wd&&(gl=new Rm(ep,Yu,Zd,Jf,ml,Wd,Yf,ky,Kf,By))}if(Zf){var tg=pl.layout.get("icon-rotate").evaluate(ks,{}),Nu="none"!==pl.layout.get("icon-text-fit"),jy=Zu(Zf,tg,Jm,Nu),op=Wd?Zu(Wd,tg,Jm,Nu):void 0;ad=new Rm(ep,Yu,Zd,Jf,ml,Zf,Yf,ky,!1,tg),Ym=4*jy.length;var Uy=bo.iconSizeData,Qf=null;"source"===Uy.kind?(Qf=[128*pl.layout.get("icon-size").evaluate(ks,{})])[0]>32640&&O(bo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===Uy.kind&&((Qf=[128*Jd.compositeIconSizes[0].evaluate(ks,{},hu),128*Jd.compositeIconSizes[1].evaluate(ks,{},hu)])[0]>32640||Qf[1]>32640)&&O(bo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),bo.addSymbols(bo.icon,jy,Qf,Zm,Wm,ks,!1,Yu,Kd.lineStartIndex,Kd.lineLength,-1,hu),Xf=bo.icon.placedSymbolArray.length-1,op&&(Fy=4*op.length,bo.addSymbols(bo.icon,op,Qf,Zm,Wm,ks,Ls.vertical,Yu,Kd.lineStartIndex,Kd.lineLength,-1,hu),rp=bo.icon.placedSymbolArray.length-1)}for(var Vy in jl.horizontal){var ap=jl.horizontal[Vy];if(!Ul){Qm=ze(ap.text);var Gy=pl.layout.get("text-rotate").evaluate(ks,{},hu);Ul=new Rm(ep,Yu,Zd,Jf,ml,ap,tp,qm,Kf,Gy)}var Hy=1===ap.positionedLines.length;if(zy+=Dy(bo,Yu,ap,$m,pl,Kf,ks,rb,Kd,jl.vertical?Ls.horizontal:Ls.horizontalOnly,Hy?Object.keys(jl.horizontal):[Vy],Ec,Xf,Jd,hu),Hy)break}jl.vertical&&(Xm+=Dy(bo,Yu,jl.vertical,$m,pl,Kf,ks,rb,Kd,Ls.vertical,["vertical"],Ec,rp,Jd,hu));var ib=Ul?Ul.boxStartIndex:bo.collisionBoxArray.length,ob=Ul?Ul.boxEndIndex:bo.collisionBoxArray.length,Nr=xc?xc.boxStartIndex:bo.collisionBoxArray.length,ab=xc?xc.boxEndIndex:bo.collisionBoxArray.length,$y=ad?ad.boxStartIndex:bo.collisionBoxArray.length,qy=ad?ad.boxEndIndex:bo.collisionBoxArray.length,sb=gl?gl.boxStartIndex:bo.collisionBoxArray.length,ub=gl?gl.boxEndIndex:bo.collisionBoxArray.length,Xu=-1,sp=function(eh,Wy){return eh&&eh.circleDiameter?Math.max(eh.circleDiameter,Wy):Wy};Xu=sp(Ul,Xu),Xu=sp(xc,Xu),Xu=sp(ad,Xu);var ng=(Xu=sp(gl,Xu))>-1?1:0;ng&&(Xu*=np/24),bo.glyphOffsetArray.length>=wi.MAX_GLYPHS&&O("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==ks.sortKey&&bo.addToSortKeyRanges(bo.symbolInstances.length,ks.sortKey),bo.symbolInstances.emplaceBack(Yu.x,Yu.y,Ec.right>=0?Ec.right:-1,Ec.center>=0?Ec.center:-1,Ec.left>=0?Ec.left:-1,Ec.vertical||-1,Xf,rp,Qm,ib,ob,Nr,ab,$y,qy,sb,ub,Zd,zy,Xm,Ym,Fy,ng,0,tp,eg,ip,Xu)}(Mr,Wf,tb,di,Gr,us,hl,Mr.layers[0],Mr.collisionBoxArray,Si.index,Si.sourceLayerIndex,Mr.index,td,Kh,Yh,aa,zl,Vd,Bl,Ju,Si,Ci,ir,Ys,Ri)};if("line"===ls)for(var Uf=0,Vf=Dm(Si.geometry,0,0,8192,8192);Uf<Vf.length;Uf+=1)for(var Um=Vf[Uf],$a=0,id=Vh(Um,Ud,Bf,di.vertical||Lu,Gr,24,nd,Mr.overscaling,8192);$a<id.length;$a+=1){var Hd=id[$a];Lu&&q0(Mr,Lu.text,jf,Hd)||rd(Um,Hd)}else if("line-center"===ls)for(var Gf=0,$d=Si.geometry;Gf<$d.length;Gf+=1){var Hf=$d[Gf];if(Hf.length>1){var _c=H0(Hf,Bf,di.vertical||Lu,Gr,24,nd);_c&&rd(Hf,_c)}}else if("Polygon"===Si.type)for(var qd=0,$f=Fh(Si.geometry,0);qd<$f.length;qd+=1){var bc=$f[qd],od=Mm(bc,16);rd(bc[0],new Mf(od.x,od.y,0))}else if("LineString"===Si.type)for(var wc=0,Xh=Si.geometry;wc<Xh.length;wc+=1){var Ku=Xh[wc];rd(Ku,new Mf(Ku[0].x,Ku[0].y,0))}else if("Point"===Si.type)for(var qf=0,Vm=Si.geometry;qf<Vm.length;qf+=1)for(var Gm=0,Qh=Vm[qf];Gm<Qh.length;Gm+=1){var Hm=Qh[Gm];rd([Hm],new Mf(Hm.x,Hm.y,0))}}(a,gt,en,ia,y,Q,Xt,vn,an,Ha,C)},st=0,ht=a.features;st<ht.length;st+=1)rt();E&&a.generateCollisionDebugBuffers()},m.perspective=function(a,u,c,y,w){var E,C=1/Math.tan(u/2);return a[0]=C/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=C,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,null!=w&&w!==1/0?(a[10]=(w+y)*(E=1/(y-w)),a[14]=2*w*y*E):(a[10]=-1,a[14]=-2*y),a},m.pick=function(a,u){for(var c={},y=0;y<u.length;y++){var w=u[y];w in a&&(c[w]=a[w])}return c},m.plugin=no,m.polygonIntersectsPolygon=Ua,m.postMapLoadEvent=so,m.postTurnstileEvent=Oa,m.potpack=wy,m.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],m.register=dn,m.registerForPluginStateChange=function(a){return a({pluginStatus:xa,pluginURL:il}),Dh.on("pluginStateChange",a),a},m.renderColorRamp=dm,m.rotate=function(a,u,c){var y=u[0],w=u[1],E=u[2],C=u[3],N=Math.sin(c),$=Math.cos(c);return a[0]=y*$+E*N,a[1]=w*$+C*N,a[2]=y*-N+E*$,a[3]=w*-N+C*$,a},m.rotateX=function(a,u,c){var y=Math.sin(c),w=Math.cos(c),E=u[4],C=u[5],N=u[6],$=u[7],Q=u[8],ne=u[9],re=u[10],le=u[11];return u!==a&&(a[0]=u[0],a[1]=u[1],a[2]=u[2],a[3]=u[3],a[12]=u[12],a[13]=u[13],a[14]=u[14],a[15]=u[15]),a[4]=E*w+Q*y,a[5]=C*w+ne*y,a[6]=N*w+re*y,a[7]=$*w+le*y,a[8]=Q*w-E*y,a[9]=ne*w-C*y,a[10]=re*w-N*y,a[11]=le*w-$*y,a},m.rotateZ=function(a,u,c){var y=Math.sin(c),w=Math.cos(c),E=u[0],C=u[1],N=u[2],$=u[3],Q=u[4],ne=u[5],re=u[6],le=u[7];return u!==a&&(a[8]=u[8],a[9]=u[9],a[10]=u[10],a[11]=u[11],a[12]=u[12],a[13]=u[13],a[14]=u[14],a[15]=u[15]),a[0]=E*w+Q*y,a[1]=C*w+ne*y,a[2]=N*w+re*y,a[3]=$*w+le*y,a[4]=Q*w-E*y,a[5]=ne*w-C*y,a[6]=re*w-N*y,a[7]=le*w-$*y,a},m.scale=function(a,u,c){var y=c[0],w=c[1],E=c[2];return a[0]=u[0]*y,a[1]=u[1]*y,a[2]=u[2]*y,a[3]=u[3]*y,a[4]=u[4]*w,a[5]=u[5]*w,a[6]=u[6]*w,a[7]=u[7]*w,a[8]=u[8]*E,a[9]=u[9]*E,a[10]=u[10]*E,a[11]=u[11]*E,a[12]=u[12],a[13]=u[13],a[14]=u[14],a[15]=u[15],a},m.scale$1=function(a,u,c){return a[0]=u[0]*c,a[1]=u[1]*c,a[2]=u[2]*c,a[3]=u[3]*c,a},m.scale$2=function(a,u,c){return a[0]=u[0]*c,a[1]=u[1]*c,a[2]=u[2]*c,a},m.setCacheLimits=function(a,u){ma=a,uo=u},m.setRTLTextPlugin=function(a,u,c){if(void 0===c&&(c=!1),"deferred"===xa||"loading"===xa||"loaded"===xa)throw new Error("setRTLTextPlugin cannot be called multiple times.");il=bn.resolveURL(a),xa="deferred",xs=u,gf(),c||Ah()},m.sphericalToCartesian=function(a){var u=a[0],c=a[1],y=a[2];return c+=90,c*=Math.PI/180,y*=Math.PI/180,{x:u*Math.cos(c)*Math.sin(y),y:u*Math.sin(c)*Math.sin(y),z:u*Math.cos(y)}},m.sqrLen=function(a){var u=a[0],c=a[1];return u*u+c*c},m.styleSpec=Ee,m.sub=function(a,u,c){return a[0]=u[0]-c[0],a[1]=u[1]-c[1],a[2]=u[2]-c[2],a},m.symbolSize=V0,m.transformMat3=function(a,u,c){var y=u[0],w=u[1],E=u[2];return a[0]=y*c[0]+w*c[3]+E*c[6],a[1]=y*c[1]+w*c[4]+E*c[7],a[2]=y*c[2]+w*c[5]+E*c[8],a},m.transformMat4=Ol,m.translate=function(a,u,c){var y,w,E,C,N,$,Q,ne,re,le,me,Te,Pe=c[0],We=c[1],Be=c[2];return u===a?(a[12]=u[0]*Pe+u[4]*We+u[8]*Be+u[12],a[13]=u[1]*Pe+u[5]*We+u[9]*Be+u[13],a[14]=u[2]*Pe+u[6]*We+u[10]*Be+u[14],a[15]=u[3]*Pe+u[7]*We+u[11]*Be+u[15]):(w=u[1],E=u[2],C=u[3],N=u[4],$=u[5],Q=u[6],ne=u[7],re=u[8],le=u[9],me=u[10],Te=u[11],a[0]=y=u[0],a[1]=w,a[2]=E,a[3]=C,a[4]=N,a[5]=$,a[6]=Q,a[7]=ne,a[8]=re,a[9]=le,a[10]=me,a[11]=Te,a[12]=y*Pe+N*We+re*Be+u[12],a[13]=w*Pe+$*We+le*Be+u[13],a[14]=E*Pe+Q*We+me*Be+u[14],a[15]=C*Pe+ne*We+Te*Be+u[15]),a},m.triggerPluginCompletionEvent=ac,m.uniqueId=Ne,m.validateCustomStyleLayer=function(a){var u=[],c=a.id;return void 0===c&&u.push({message:"layers."+c+': missing required property "id"'}),void 0===a.render&&u.push({message:"layers."+c+': missing required method "render"'}),a.renderingMode&&"2d"!==a.renderingMode&&"3d"!==a.renderingMode&&u.push({message:"layers."+c+': property "renderingMode" must be either "2d" or "3d"'}),u},m.validateLight=Oc,m.validateStyle=Tl,m.values=function(a){var u=[];for(var c in a)u.push(a[c]);return u},m.vectorTile=kl,m.version="1.15.3",m.warnOnce=O,m.webpSupported=xn,m.window=F,m.wrap=se}),X(0,function(m){function q(oe){var ue=typeof oe;if("number"===ue||"boolean"===ue||"string"===ue||null==oe)return JSON.stringify(oe);if(Array.isArray(oe)){for(var fe="[",ve=0,De=oe;ve<De.length;ve+=1)fe+=q(De[ve])+",";return fe+"]"}for(var $e=Object.keys(oe).sort(),Xe="{",He=0;He<$e.length;He++)Xe+=JSON.stringify($e[He])+":"+q(oe[$e[He]])+",";return Xe+"}"}function G(oe){for(var ue="",fe=0,ve=m.refProperties;fe<ve.length;fe+=1)ue+="/"+q(oe[ve[fe]]);return ue}var z=function(oe){this.keyCache={},oe&&this.replace(oe)};z.prototype.replace=function(oe){this._layerConfigs={},this._layers={},this.update(oe,[])},z.prototype.update=function(oe,ue){for(var fe=this,ve=0,De=oe;ve<De.length;ve+=1){var $e=De[ve];this._layerConfigs[$e.id]=$e;var Xe=this._layers[$e.id]=m.createStyleLayer($e);Xe._featureFilter=m.featureFilter(Xe.filter),this.keyCache[$e.id]&&delete this.keyCache[$e.id]}for(var He=0,Ee=ue;He<Ee.length;He+=1){var Fe=Ee[He];delete this.keyCache[Fe],delete this._layerConfigs[Fe],delete this._layers[Fe]}this.familiesBySource={};for(var Mt=0,Ft=function(Ut,Tt){for(var Gn={},jn=0;jn<Ut.length;jn++){var ln=Tt&&Tt[Ut[jn].id]||G(Ut[jn]);Tt&&(Tt[Ut[jn].id]=ln);var ni=Gn[ln];ni||(ni=Gn[ln]=[]),ni.push(Ut[jn])}var En=[];for(var ui in Gn)En.push(Gn[ui]);return En}(m.values(this._layerConfigs),this.keyCache);Mt<Ft.length;Mt+=1){var ct=Ft[Mt].map(function(Ut){return fe._layers[Ut.id]}),Et=ct[0];if("none"!==Et.visibility){var Jt=Et.source||"",Kt=this.familiesBySource[Jt];Kt||(Kt=this.familiesBySource[Jt]={});var mn=Et.sourceLayer||"_geojsonTileLayer",St=Kt[mn];St||(St=Kt[mn]=[]),St.push(ct)}}};var T=function(oe){var ue={},fe=[];for(var ve in oe){var De=oe[ve],$e=ue[ve]={};for(var Xe in De){var He=De[+Xe];if(He&&0!==He.bitmap.width&&0!==He.bitmap.height){var Ee={x:0,y:0,w:He.bitmap.width+2,h:He.bitmap.height+2};fe.push(Ee),$e[Xe]={rect:Ee,metrics:He.metrics}}}}var Fe=m.potpack(fe),Mt=new m.AlphaImage({width:Fe.w||1,height:Fe.h||1});for(var Ft in oe){var ct=oe[Ft];for(var Et in ct){var Jt=ct[+Et];if(Jt&&0!==Jt.bitmap.width&&0!==Jt.bitmap.height){var Kt=ue[Ft][Et].rect;m.AlphaImage.copy(Jt.bitmap,Mt,{x:0,y:0},{x:Kt.x+1,y:Kt.y+1},Jt.bitmap)}}}this.image=Mt,this.positions=ue};m.register("GlyphAtlas",T);var D=function(oe){this.tileID=new m.OverscaledTileID(oe.tileID.overscaledZ,oe.tileID.wrap,oe.tileID.canonical.z,oe.tileID.canonical.x,oe.tileID.canonical.y),this.uid=oe.uid,this.zoom=oe.zoom,this.pixelRatio=oe.pixelRatio,this.tileSize=oe.tileSize,this.source=oe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=oe.showCollisionBoxes,this.collectResourceTiming=!!oe.collectResourceTiming,this.returnDependencies=!!oe.returnDependencies,this.promoteId=oe.promoteId};function F(oe,ue,fe){for(var ve=new m.EvaluationParameters(ue),De=0,$e=oe;De<$e.length;De+=1)$e[De].recalculate(ve,fe)}function Z(oe,ue){var fe=m.getArrayBuffer(oe.request,function(ve,De,$e,Xe){ve?ue(ve):De&&ue(null,{vectorTile:new m.vectorTile.VectorTile(new m.pbf(De)),rawData:De,cacheControl:$e,expires:Xe})});return function(){fe.cancel(),ue()}}D.prototype.parse=function(oe,ue,fe,ve,De){var $e=this;this.status="parsing",this.data=oe,this.collisionBoxArray=new m.CollisionBoxArray;var Xe=new m.DictionaryCoder(Object.keys(oe.layers).sort()),He=new m.FeatureIndex(this.tileID,this.promoteId);He.bucketLayerIDs=[];var Ee,Fe,Mt,Ft,ct={},Et={featureIndex:He,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:fe},Jt=ue.familiesBySource[this.source];for(var Kt in Jt){var mn=oe.layers[Kt];if(mn){1===mn.version&&m.warnOnce('Vector tile source "'+this.source+'" layer "'+Kt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var St=Xe.encode(Kt),Ut=[],Tt=0;Tt<mn.length;Tt++){var Gn=mn.feature(Tt),jn=He.getId(Gn,Kt);Ut.push({feature:Gn,id:jn,index:Tt,sourceLayerIndex:St})}for(var ln=0,ni=Jt[Kt];ln<ni.length;ln+=1){var En=ni[ln],ui=En[0];ui.minzoom&&this.zoom<Math.floor(ui.minzoom)||ui.maxzoom&&this.zoom>=ui.maxzoom||"none"!==ui.visibility&&(F(En,this.zoom,fe),(ct[ui.id]=ui.createBucket({index:He.bucketLayerIDs.length,layers:En,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:St,sourceID:this.source})).populate(Ut,Et,this.tileID.canonical),He.bucketLayerIDs.push(En.map(function(Hr){return Hr.id})))}}}var _i=m.mapObject(Et.glyphDependencies,function(Hr){return Object.keys(Hr).map(Number)});Object.keys(_i).length?ve.send("getGlyphs",{uid:this.uid,stacks:_i},function(Hr,Mn){Ee||(Ee=Hr,Fe=Mn,xi.call($e))}):Fe={};var Ir=Object.keys(Et.iconDependencies);Ir.length?ve.send("getImages",{icons:Ir,source:this.source,tileID:this.tileID,type:"icons"},function(Hr,Mn){Ee||(Ee=Hr,Mt=Mn,xi.call($e))}):Mt={};var Xr=Object.keys(Et.patternDependencies);function xi(){if(Ee)return De(Ee);if(Fe&&Mt&&Ft){var Hr=new T(Fe),Mn=new m.ImageAtlas(Mt,Ft);for(var Oi in ct){var er=ct[Oi];er instanceof m.SymbolBucket?(F(er.layers,this.zoom,fe),m.performSymbolLayout(er,Fe,Hr.positions,Mt,Mn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):er.hasPattern&&(er instanceof m.LineBucket||er instanceof m.FillBucket||er instanceof m.FillExtrusionBucket)&&(F(er.layers,this.zoom,fe),er.addFeatures(Et,this.tileID.canonical,Mn.patternPositions))}this.status="done",De(null,{buckets:m.values(ct).filter(function(ua){return!ua.isEmpty()}),featureIndex:He,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Hr.image,imageAtlas:Mn,glyphMap:this.returnDependencies?Fe:null,iconMap:this.returnDependencies?Mt:null,glyphPositions:this.returnDependencies?Hr.positions:null})}}Xr.length?ve.send("getImages",{icons:Xr,source:this.source,tileID:this.tileID,type:"patterns"},function(Hr,Mn){Ee||(Ee=Hr,Ft=Mn,xi.call($e))}):Ft={},xi.call(this)};var Y=function(oe,ue,fe,ve){this.actor=oe,this.layerIndex=ue,this.availableImages=fe,this.loadVectorData=ve||Z,this.loading={},this.loaded={}};Y.prototype.loadTile=function(oe,ue){var fe=this,ve=oe.uid;this.loading||(this.loading={});var De=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new m.RequestPerformance(oe.request),$e=this.loading[ve]=new D(oe);$e.abort=this.loadVectorData(oe,function(Xe,He){if(delete fe.loading[ve],Xe||!He)return $e.status="done",fe.loaded[ve]=$e,ue(Xe);var Ee=He.rawData,Fe={};He.expires&&(Fe.expires=He.expires),He.cacheControl&&(Fe.cacheControl=He.cacheControl);var Mt={};if(De){var Ft=De.finish();Ft&&(Mt.resourceTiming=JSON.parse(JSON.stringify(Ft)))}$e.vectorTile=He.vectorTile,$e.parse(He.vectorTile,fe.layerIndex,fe.availableImages,fe.actor,function(ct,Et){if(ct||!Et)return ue(ct);ue(null,m.extend({rawTileData:Ee.slice(0)},Et,Fe,Mt))}),fe.loaded=fe.loaded||{},fe.loaded[ve]=$e})},Y.prototype.reloadTile=function(oe,ue){var fe=this,ve=this.loaded,De=oe.uid,$e=this;if(ve&&ve[De]){var Xe=ve[De];Xe.showCollisionBoxes=oe.showCollisionBoxes;var He=function(Ee,Fe){var Mt=Xe.reloadCallback;Mt&&(delete Xe.reloadCallback,Xe.parse(Xe.vectorTile,$e.layerIndex,fe.availableImages,$e.actor,Mt)),ue(Ee,Fe)};"parsing"===Xe.status?Xe.reloadCallback=He:"done"===Xe.status&&(Xe.vectorTile?Xe.parse(Xe.vectorTile,this.layerIndex,this.availableImages,this.actor,He):He())}},Y.prototype.abortTile=function(oe,ue){var fe=this.loading,ve=oe.uid;fe&&fe[ve]&&fe[ve].abort&&(fe[ve].abort(),delete fe[ve]),ue()},Y.prototype.removeTile=function(oe,ue){var fe=this.loaded,ve=oe.uid;fe&&fe[ve]&&delete fe[ve],ue()};var ie=m.window.ImageBitmap,pe=function(){this.loaded={}};function se(oe,ue){if(0!==oe.length){be(oe[0],ue);for(var fe=1;fe<oe.length;fe++)be(oe[fe],!ue)}}function be(oe,ue){for(var fe=0,ve=0,De=oe.length,$e=De-1;ve<De;$e=ve++)fe+=(oe[ve][0]-oe[$e][0])*(oe[$e][1]+oe[ve][1]);fe>=0!=!!ue&&oe.reverse()}pe.prototype.loadTile=function(oe,ue){var fe=oe.uid,ve=oe.encoding,De=oe.rawImageData,$e=ie&&De instanceof ie?this.getImageData(De):De,Xe=new m.DEMData(fe,$e,ve);this.loaded=this.loaded||{},this.loaded[fe]=Xe,ue(null,Xe)},pe.prototype.getImageData=function(oe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(oe.width,oe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=oe.width,this.offscreenCanvas.height=oe.height,this.offscreenCanvasContext.drawImage(oe,0,0,oe.width,oe.height);var ue=this.offscreenCanvasContext.getImageData(-1,-1,oe.width+2,oe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new m.RGBAImage({width:ue.width,height:ue.height},ue.data)},pe.prototype.removeTile=function(oe){var ue=this.loaded,fe=oe.uid;ue&&ue[fe]&&delete ue[fe]};var Me=m.vectorTile.VectorTileFeature.prototype.toGeoJSON,Ne=function(oe){this._feature=oe,this.extent=m.EXTENT,this.type=oe.type,this.properties=oe.tags,"id"in oe&&!isNaN(oe.id)&&(this.id=parseInt(oe.id,10))};Ne.prototype.loadGeometry=function(){if(1===this._feature.type){for(var oe=[],ue=0,fe=this._feature.geometry;ue<fe.length;ue+=1){var ve=fe[ue];oe.push([new m.Point$1(ve[0],ve[1])])}return oe}for(var De=[],$e=0,Xe=this._feature.geometry;$e<Xe.length;$e+=1){for(var He=[],Ee=0,Fe=Xe[$e];Ee<Fe.length;Ee+=1){var Mt=Fe[Ee];He.push(new m.Point$1(Mt[0],Mt[1]))}De.push(He)}return De},Ne.prototype.toGeoJSON=function(oe,ue,fe){return Me.call(this,oe,ue,fe)};var Je=function(oe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=m.EXTENT,this.length=oe.length,this._features=oe};Je.prototype.feature=function(oe){return new Ne(this._features[oe])};var je=m.vectorTile.VectorTileFeature,Se=Ke;function Ke(oe,ue){this.options=ue||{},this.features=oe,this.length=oe.length}function nt(oe,ue){this.id="number"==typeof oe.id?oe.id:void 0,this.type=oe.type,this.rawGeometry=1===oe.type?[oe.geometry]:oe.geometry,this.properties=oe.tags,this.extent=ue||4096}Ke.prototype.feature=function(oe){return new nt(this.features[oe],this.options.extent)},nt.prototype.loadGeometry=function(){var oe=this.rawGeometry;this.geometry=[];for(var ue=0;ue<oe.length;ue++){for(var fe=oe[ue],ve=[],De=0;De<fe.length;De++)ve.push(new m.Point$1(fe[De][0],fe[De][1]));this.geometry.push(ve)}return this.geometry},nt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var oe=this.geometry,ue=1/0,fe=-1/0,ve=1/0,De=-1/0,$e=0;$e<oe.length;$e++)for(var Xe=oe[$e],He=0;He<Xe.length;He++){var Ee=Xe[He];ue=Math.min(ue,Ee.x),fe=Math.max(fe,Ee.x),ve=Math.min(ve,Ee.y),De=Math.max(De,Ee.y)}return[ue,ve,fe,De]},nt.prototype.toGeoJSON=je.prototype.toGeoJSON;var It=A,Ue=Se;function A(oe){var ue=new m.pbf;return function(fe,ve){for(var De in fe.layers)ve.writeMessage(3,O,fe.layers[De])}(oe,ue),ue.finish()}function O(oe,ue){var fe;ue.writeVarintField(15,oe.version||1),ue.writeStringField(1,oe.name||""),ue.writeVarintField(5,oe.extent||4096);var ve={keys:[],values:[],keycache:{},valuecache:{}};for(fe=0;fe<oe.length;fe++)ve.feature=oe.feature(fe),ue.writeMessage(2,B,ve);var De=ve.keys;for(fe=0;fe<De.length;fe++)ue.writeStringField(3,De[fe]);var $e=ve.values;for(fe=0;fe<$e.length;fe++)ue.writeMessage(4,Ze,$e[fe])}function B(oe,ue){var fe=oe.feature;void 0!==fe.id&&ue.writeVarintField(1,fe.id),ue.writeMessage(2,j,oe),ue.writeVarintField(3,fe.type),ue.writeMessage(4,ce,fe)}function j(oe,ue){var fe=oe.feature,ve=oe.keys,De=oe.values,$e=oe.keycache,Xe=oe.valuecache;for(var He in fe.properties){var Ee=$e[He];void 0===Ee&&(ve.push(He),$e[He]=Ee=ve.length-1),ue.writeVarint(Ee);var Fe=fe.properties[He],Mt=typeof Fe;"string"!==Mt&&"boolean"!==Mt&&"number"!==Mt&&(Fe=JSON.stringify(Fe));var Ft=Mt+":"+Fe,ct=Xe[Ft];void 0===ct&&(De.push(Fe),Xe[Ft]=ct=De.length-1),ue.writeVarint(ct)}}function ee(oe,ue){return(ue<<3)+(7&oe)}function W(oe){return oe<<1^oe>>31}function ce(oe,ue){for(var fe=oe.loadGeometry(),ve=oe.type,De=0,$e=0,Xe=fe.length,He=0;He<Xe;He++){var Ee=fe[He],Fe=1;1===ve&&(Fe=Ee.length),ue.writeVarint(ee(1,Fe));for(var Mt=3===ve?Ee.length-1:Ee.length,Ft=0;Ft<Mt;Ft++){1===Ft&&1!==ve&&ue.writeVarint(ee(2,Mt-1));var ct=Ee[Ft].x-De,Et=Ee[Ft].y-$e;ue.writeVarint(W(ct)),ue.writeVarint(W(Et)),De+=ct,$e+=Et}3===ve&&ue.writeVarint(ee(7,1))}}function Ze(oe,ue){var fe=typeof oe;"string"===fe?ue.writeStringField(1,oe):"boolean"===fe?ue.writeBooleanField(7,oe):"number"===fe&&(oe%1!=0?ue.writeDoubleField(3,oe):oe<0?ue.writeSVarintField(6,oe):ue.writeVarintField(5,oe))}function lt(oe,ue,fe,ve){we(oe,fe,ve),we(ue,2*fe,2*ve),we(ue,2*fe+1,2*ve+1)}function we(oe,ue,fe){var ve=oe[ue];oe[ue]=oe[fe],oe[fe]=ve}function wt(oe,ue,fe,ve){var De=oe-fe,$e=ue-ve;return De*De+$e*$e}It.fromVectorTileJs=A,It.fromGeojsonVt=function(oe,ue){ue=ue||{};var fe={};for(var ve in oe)fe[ve]=new Se(oe[ve].features,ue),fe[ve].name=ve,fe[ve].version=ue.version,fe[ve].extent=ue.extent;return A({layers:fe})},It.GeoJSONWrapper=Ue;var bt=function(oe){return oe[0]},Ye=function(oe){return oe[1]},xt=function(oe,ue,fe,ve,De){void 0===ue&&(ue=bt),void 0===fe&&(fe=Ye),void 0===ve&&(ve=64),void 0===De&&(De=Float64Array),this.nodeSize=ve,this.points=oe;for(var $e=oe.length<65536?Uint16Array:Uint32Array,Xe=this.ids=new $e(oe.length),He=this.coords=new De(2*oe.length),Ee=0;Ee<oe.length;Ee++)Xe[Ee]=Ee,He[2*Ee]=ue(oe[Ee]),He[2*Ee+1]=fe(oe[Ee]);!function Fe(Mt,Ft,ct,Et,Jt,Kt){if(!(Jt-Et<=ct)){var mn=Et+Jt>>1;(function St(Ut,Tt,Gn,jn,ln,ni){for(;ln>jn;){if(ln-jn>600){var En=ln-jn+1,ui=Gn-jn+1,_i=Math.log(En),Ir=.5*Math.exp(2*_i/3),Xr=.5*Math.sqrt(_i*Ir*(En-Ir)/En)*(ui-En/2<0?-1:1);St(Ut,Tt,Gn,Math.max(jn,Math.floor(Gn-ui*Ir/En+Xr)),Math.min(ln,Math.floor(Gn+(En-ui)*Ir/En+Xr)),ni)}var xi=Tt[2*Gn+ni],Hr=jn,Mn=ln;for(lt(Ut,Tt,jn,Gn),Tt[2*ln+ni]>xi&&lt(Ut,Tt,jn,ln);Hr<Mn;){for(lt(Ut,Tt,Hr,Mn),Hr++,Mn--;Tt[2*Hr+ni]<xi;)Hr++;for(;Tt[2*Mn+ni]>xi;)Mn--}Tt[2*jn+ni]===xi?lt(Ut,Tt,jn,Mn):lt(Ut,Tt,++Mn,ln),Mn<=Gn&&(jn=Mn+1),Gn<=Mn&&(ln=Mn-1)}})(Mt,Ft,mn,Et,Jt,Kt%2),Fe(Mt,Ft,ct,Et,mn-1,Kt+1),Fe(Mt,Ft,ct,mn+1,Jt,Kt+1)}}(Xe,He,ve,0,Xe.length-1,0)};xt.prototype.range=function(oe,ue,fe,ve){return function(De,$e,Xe,He,Ee,Fe,Mt){for(var Ft,ct,Et=[0,De.length-1,0],Jt=[];Et.length;){var Kt=Et.pop(),mn=Et.pop(),St=Et.pop();if(mn-St<=Mt)for(var Ut=St;Ut<=mn;Ut++)ct=$e[2*Ut+1],(Ft=$e[2*Ut])>=Xe&&Ft<=Ee&&ct>=He&&ct<=Fe&&Jt.push(De[Ut]);else{var Tt=Math.floor((St+mn)/2);ct=$e[2*Tt+1],(Ft=$e[2*Tt])>=Xe&&Ft<=Ee&&ct>=He&&ct<=Fe&&Jt.push(De[Tt]);var Gn=(Kt+1)%2;(0===Kt?Xe<=Ft:He<=ct)&&(Et.push(St),Et.push(Tt-1),Et.push(Gn)),(0===Kt?Ee>=Ft:Fe>=ct)&&(Et.push(Tt+1),Et.push(mn),Et.push(Gn))}}return Jt}(this.ids,this.coords,oe,ue,fe,ve,this.nodeSize)},xt.prototype.within=function(oe,ue,fe){return function(ve,De,$e,Xe,He,Ee){for(var Fe=[0,ve.length-1,0],Mt=[],Ft=He*He;Fe.length;){var ct=Fe.pop(),Et=Fe.pop(),Jt=Fe.pop();if(Et-Jt<=Ee)for(var Kt=Jt;Kt<=Et;Kt++)wt(De[2*Kt],De[2*Kt+1],$e,Xe)<=Ft&&Mt.push(ve[Kt]);else{var mn=Math.floor((Jt+Et)/2),St=De[2*mn],Ut=De[2*mn+1];wt(St,Ut,$e,Xe)<=Ft&&Mt.push(ve[mn]);var Tt=(ct+1)%2;(0===ct?$e-He<=St:Xe-He<=Ut)&&(Fe.push(Jt),Fe.push(mn-1),Fe.push(Tt)),(0===ct?$e+He>=St:Xe+He>=Ut)&&(Fe.push(mn+1),Fe.push(Et),Fe.push(Tt))}}return Mt}(this.ids,this.coords,oe,ue,fe,this.nodeSize)};var yn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(oe){return oe}},Bt=function(oe){this.options=Ce(Object.create(yn),oe),this.trees=new Array(this.options.maxZoom+1)};function bn(oe,ue,fe,ve,De){return{x:oe,y:ue,zoom:1/0,id:fe,parentId:-1,numPoints:ve,properties:De}}function Ct(oe,ue){var fe=oe.geometry.coordinates,ve=fe[1];return{x:Xn(fe[0]),y:Zt(ve),zoom:1/0,index:ue,parentId:-1}}function xn(oe){return{type:"Feature",id:oe.id,properties:pn(oe),geometry:{type:"Point",coordinates:[(ve=oe.x,360*(ve-.5)),(ue=oe.y,fe=(180-360*ue)*Math.PI/180,360*Math.atan(Math.exp(fe))/Math.PI-90)]}};var ue,fe,ve}function pn(oe){var ue=oe.numPoints,fe=ue>=1e4?Math.round(ue/1e3)+"k":ue>=1e3?Math.round(ue/100)/10+"k":ue;return Ce(Ce({},oe.properties),{cluster:!0,cluster_id:oe.id,point_count:ue,point_count_abbreviated:fe})}function Xn(oe){return oe/360+.5}function Zt(oe){var ue=Math.sin(oe*Math.PI/180),fe=.5-.25*Math.log((1+ue)/(1-ue))/Math.PI;return fe<0?0:fe>1?1:fe}function Ce(oe,ue){for(var fe in ue)oe[fe]=ue[fe];return oe}function Vn(oe){return oe.x}function ur(oe){return oe.y}function mi(oe,ue,fe,ve,De,$e){var Xe=De-fe,He=$e-ve;if(0!==Xe||0!==He){var Ee=((oe-fe)*Xe+(ue-ve)*He)/(Xe*Xe+He*He);Ee>1?(fe=De,ve=$e):Ee>0&&(fe+=Xe*Ee,ve+=He*Ee)}return(Xe=oe-fe)*Xe+(He=ue-ve)*He}function Bi(oe,ue,fe,ve){var De={id:void 0===oe?null:oe,type:ue,geometry:fe,tags:ve,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function($e){var Xe=$e.geometry,He=$e.type;if("Point"===He||"MultiPoint"===He||"LineString"===He)Wt($e,Xe);else if("Polygon"===He||"MultiLineString"===He)for(var Ee=0;Ee<Xe.length;Ee++)Wt($e,Xe[Ee]);else if("MultiPolygon"===He)for(Ee=0;Ee<Xe.length;Ee++)for(var Fe=0;Fe<Xe[Ee].length;Fe++)Wt($e,Xe[Ee][Fe])}(De),De}function Wt(oe,ue){for(var fe=0;fe<ue.length;fe+=3)oe.minX=Math.min(oe.minX,ue[fe]),oe.minY=Math.min(oe.minY,ue[fe+1]),oe.maxX=Math.max(oe.maxX,ue[fe]),oe.maxY=Math.max(oe.maxY,ue[fe+1])}function Lt(oe,ue,fe,ve){if(ue.geometry){var De=ue.geometry.coordinates,$e=ue.geometry.type,Xe=Math.pow(fe.tolerance/((1<<fe.maxZoom)*fe.extent),2),He=[],Ee=ue.id;if(fe.promoteId?Ee=ue.properties[fe.promoteId]:fe.generateId&&(Ee=ve||0),"Point"===$e)Ma(De,He);else if("MultiPoint"===$e)for(var Fe=0;Fe<De.length;Fe++)Ma(De[Fe],He);else if("LineString"===$e)pa(De,He,Xe,!1);else if("MultiLineString"===$e){if(fe.lineMetrics){for(Fe=0;Fe<De.length;Fe++)pa(De[Fe],He=[],Xe,!1),oe.push(Bi(Ee,"LineString",He,ue.properties));return}si(De,He,Xe,!1)}else if("Polygon"===$e)si(De,He,Xe,!0);else{if("MultiPolygon"!==$e){if("GeometryCollection"===$e){for(Fe=0;Fe<ue.geometry.geometries.length;Fe++)Lt(oe,{id:Ee,geometry:ue.geometry.geometries[Fe],properties:ue.properties},fe,ve);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Fe=0;Fe<De.length;Fe++){var Mt=[];si(De[Fe],Mt,Xe,!0),He.push(Mt)}}oe.push(Bi(Ee,$e,He,ue.properties))}}function Ma(oe,ue){ue.push($r(oe[0])),ue.push(eu(oe[1])),ue.push(0)}function pa(oe,ue,fe,ve){for(var De,$e,Xe=0,He=0;He<oe.length;He++){var Ee=$r(oe[He][0]),Fe=eu(oe[He][1]);ue.push(Ee),ue.push(Fe),ue.push(0),He>0&&(Xe+=ve?(De*Fe-Ee*$e)/2:Math.sqrt(Math.pow(Ee-De,2)+Math.pow(Fe-$e,2))),De=Ee,$e=Fe}var Mt=ue.length-3;ue[2]=1,function Ft(ct,Et,Jt,Kt){for(var mn,St=Kt,Ut=Jt-Et>>1,Tt=Jt-Et,Gn=ct[Et],jn=ct[Et+1],ln=ct[Jt],ni=ct[Jt+1],En=Et+3;En<Jt;En+=3){var ui=mi(ct[En],ct[En+1],Gn,jn,ln,ni);if(ui>St)mn=En,St=ui;else if(ui===St){var _i=Math.abs(En-Ut);_i<Tt&&(mn=En,Tt=_i)}}St>Kt&&(mn-Et>3&&Ft(ct,Et,mn,Kt),ct[mn+2]=St,Jt-mn>3&&Ft(ct,mn,Jt,Kt))}(ue,0,Mt,fe),ue[Mt+2]=1,ue.size=Math.abs(Xe),ue.start=0,ue.end=ue.size}function si(oe,ue,fe,ve){for(var De=0;De<oe.length;De++){var $e=[];pa(oe[De],$e,fe,ve),ue.push($e)}}function $r(oe){return oe/360+.5}function eu(oe){var ue=Math.sin(oe*Math.PI/180),fe=.5-.25*Math.log((1+ue)/(1-ue))/Math.PI;return fe<0?0:fe>1?1:fe}function Ka(oe,ue,fe,ve,De,$e,Xe,He){if(ve/=ue,$e>=(fe/=ue)&&Xe<ve)return oe;if(Xe<fe||$e>=ve)return null;for(var Ee=[],Fe=0;Fe<oe.length;Fe++){var Mt=oe[Fe],Ft=Mt.geometry,ct=Mt.type,Et=0===De?Mt.minX:Mt.minY,Jt=0===De?Mt.maxX:Mt.maxY;if(Et>=fe&&Jt<ve)Ee.push(Mt);else if(!(Jt<fe||Et>=ve)){var Kt=[];if("Point"===ct||"MultiPoint"===ct)Do(Ft,Kt,fe,ve,De);else if("LineString"===ct)Oa(Ft,Kt,fe,ve,De,!1,He.lineMetrics);else if("MultiLineString"===ct)so(Ft,Kt,fe,ve,De,!1);else if("Polygon"===ct)so(Ft,Kt,fe,ve,De,!0);else if("MultiPolygon"===ct)for(var mn=0;mn<Ft.length;mn++){var St=[];so(Ft[mn],St,fe,ve,De,!0),St.length&&Kt.push(St)}if(Kt.length){if(He.lineMetrics&&"LineString"===ct){for(mn=0;mn<Kt.length;mn++)Ee.push(Bi(Mt.id,ct,Kt[mn],Mt.tags));continue}"LineString"!==ct&&"MultiLineString"!==ct||(1===Kt.length?(ct="LineString",Kt=Kt[0]):ct="MultiLineString"),"Point"!==ct&&"MultiPoint"!==ct||(ct=3===Kt.length?"Point":"MultiPoint"),Ee.push(Bi(Mt.id,ct,Kt,Mt.tags))}}}return Ee.length?Ee:null}function Do(oe,ue,fe,ve,De){for(var $e=0;$e<oe.length;$e+=3){var Xe=oe[$e+De];Xe>=fe&&Xe<=ve&&(ue.push(oe[$e]),ue.push(oe[$e+1]),ue.push(oe[$e+2]))}}function Oa(oe,ue,fe,ve,De,$e,Xe){for(var He,Ee,Fe=ps(oe),Mt=0===De?uo:wo,Ft=oe.start,ct=0;ct<oe.length-3;ct+=3){var Et=oe[ct],Jt=oe[ct+1],Kt=oe[ct+2],mn=oe[ct+3],St=oe[ct+4],Ut=0===De?Et:Jt,Tt=0===De?mn:St,Gn=!1;Xe&&(He=Math.sqrt(Math.pow(Et-mn,2)+Math.pow(Jt-St,2))),Ut<fe?Tt>fe&&(Ee=Mt(Fe,Et,Jt,mn,St,fe),Xe&&(Fe.start=Ft+He*Ee)):Ut>ve?Tt<ve&&(Ee=Mt(Fe,Et,Jt,mn,St,ve),Xe&&(Fe.start=Ft+He*Ee)):ma(Fe,Et,Jt,Kt),Tt<fe&&Ut>=fe&&(Ee=Mt(Fe,Et,Jt,mn,St,fe),Gn=!0),Tt>ve&&Ut<=ve&&(Ee=Mt(Fe,Et,Jt,mn,St,ve),Gn=!0),!$e&&Gn&&(Xe&&(Fe.end=Ft+He*Ee),ue.push(Fe),Fe=ps(oe)),Xe&&(Ft+=He)}var jn=oe.length-3;Et=oe[jn],Jt=oe[jn+1],Kt=oe[jn+2],(Ut=0===De?Et:Jt)>=fe&&Ut<=ve&&ma(Fe,Et,Jt,Kt),jn=Fe.length-3,$e&&jn>=3&&(Fe[jn]!==Fe[0]||Fe[jn+1]!==Fe[1])&&ma(Fe,Fe[0],Fe[1],Fe[2]),Fe.length&&ue.push(Fe)}function ps(oe){var ue=[];return ue.size=oe.size,ue.start=oe.start,ue.end=oe.end,ue}function so(oe,ue,fe,ve,De,$e){for(var Xe=0;Xe<oe.length;Xe++)Oa(oe[Xe],ue,fe,ve,De,$e,!1)}function ma(oe,ue,fe,ve){oe.push(ue),oe.push(fe),oe.push(ve)}function uo(oe,ue,fe,ve,De,$e){var Xe=($e-ue)/(ve-ue);return oe.push($e),oe.push(fe+(De-fe)*Xe),oe.push(1),Xe}function wo(oe,ue,fe,ve,De,$e){var Xe=($e-fe)/(De-fe);return oe.push(ue+(ve-ue)*Xe),oe.push($e),oe.push(1),Xe}function Vu(oe,ue){for(var fe=[],ve=0;ve<oe.length;ve++){var De,$e=oe[ve],Xe=$e.type;if("Point"===Xe||"MultiPoint"===Xe||"LineString"===Xe)De=As($e.geometry,ue);else if("MultiLineString"===Xe||"Polygon"===Xe){De=[];for(var He=0;He<$e.geometry.length;He++)De.push(As($e.geometry[He],ue))}else if("MultiPolygon"===Xe)for(De=[],He=0;He<$e.geometry.length;He++){for(var Ee=[],Fe=0;Fe<$e.geometry[He].length;Fe++)Ee.push(As($e.geometry[He][Fe],ue));De.push(Ee)}fe.push(Bi($e.id,Xe,De,$e.tags))}return fe}function As(oe,ue){var fe=[];fe.size=oe.size,void 0!==oe.start&&(fe.start=oe.start,fe.end=oe.end);for(var ve=0;ve<oe.length;ve+=3)fe.push(oe[ve]+ue,oe[ve+1],oe[ve+2]);return fe}function xo(oe,ue){if(oe.transformed)return oe;var fe,ve,De,$e=1<<oe.z,Xe=oe.x,He=oe.y;for(fe=0;fe<oe.features.length;fe++){var Ee=oe.features[fe],Fe=Ee.geometry,Mt=Ee.type;if(Ee.geometry=[],1===Mt)for(ve=0;ve<Fe.length;ve+=2)Ee.geometry.push(lr(Fe[ve],Fe[ve+1],ue,$e,Xe,He));else for(ve=0;ve<Fe.length;ve++){var Ft=[];for(De=0;De<Fe[ve].length;De+=2)Ft.push(lr(Fe[ve][De],Fe[ve][De+1],ue,$e,Xe,He));Ee.geometry.push(Ft)}}return oe.transformed=!0,oe}function lr(oe,ue,fe,ve,De,$e){return[Math.round(fe*(oe*ve-De)),Math.round(fe*(ue*ve-$e))]}function Gu(oe,ue,fe,ve,De){for(var $e=ue===De.maxZoom?0:De.tolerance/((1<<ue)*De.extent),Xe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:fe,y:ve,z:ue,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},He=0;He<oe.length;He++){Xe.numFeatures++,bu(Xe,oe[He],$e,De);var Ee=oe[He].minX,Fe=oe[He].minY,Mt=oe[He].maxX,Ft=oe[He].maxY;Ee<Xe.minX&&(Xe.minX=Ee),Fe<Xe.minY&&(Xe.minY=Fe),Mt>Xe.maxX&&(Xe.maxX=Mt),Ft>Xe.maxY&&(Xe.maxY=Ft)}return Xe}function bu(oe,ue,fe,ve){var De=ue.geometry,$e=ue.type,Xe=[];if("Point"===$e||"MultiPoint"===$e)for(var He=0;He<De.length;He+=3)Xe.push(De[He]),Xe.push(De[He+1]),oe.numPoints++,oe.numSimplified++;else if("LineString"===$e)Us(Xe,De,oe,fe,!1,!1);else if("MultiLineString"===$e||"Polygon"===$e)for(He=0;He<De.length;He++)Us(Xe,De[He],oe,fe,"Polygon"===$e,0===He);else if("MultiPolygon"===$e)for(var Ee=0;Ee<De.length;Ee++){var Fe=De[Ee];for(He=0;He<Fe.length;He++)Us(Xe,Fe[He],oe,fe,!0,0===He)}if(Xe.length){var Mt=ue.tags||null;if("LineString"===$e&&ve.lineMetrics){for(var Ft in Mt={},ue.tags)Mt[Ft]=ue.tags[Ft];Mt.mapbox_clip_start=De.start/De.size,Mt.mapbox_clip_end=De.end/De.size}var ct={geometry:Xe,type:"Polygon"===$e||"MultiPolygon"===$e?3:"LineString"===$e||"MultiLineString"===$e?2:1,tags:Mt};null!==ue.id&&(ct.id=ue.id),oe.features.push(ct)}}function Us(oe,ue,fe,ve,De,$e){var Xe=ve*ve;if(ve>0&&ue.size<(De?Xe:ve))fe.numPoints+=ue.length/3;else{for(var He=[],Ee=0;Ee<ue.length;Ee+=3)(0===ve||ue[Ee+2]>Xe)&&(fe.numSimplified++,He.push(ue[Ee]),He.push(ue[Ee+1])),fe.numPoints++;De&&function(Fe,Mt){for(var Ft=0,ct=0,Et=Fe.length,Jt=Et-2;ct<Et;Jt=ct,ct+=2)Ft+=(Fe[ct]-Fe[Jt])*(Fe[ct+1]+Fe[Jt+1]);if(Ft>0===Mt)for(ct=0,Et=Fe.length;ct<Et/2;ct+=2){var Kt=Fe[ct],mn=Fe[ct+1];Fe[ct]=Fe[Et-2-ct],Fe[ct+1]=Fe[Et-1-ct],Fe[Et-2-ct]=Kt,Fe[Et-1-ct]=mn}}(He,$e),oe.push(He)}}function Ao(oe,ue){var fe=(ue=this.options=function(De,$e){for(var Xe in $e)De[Xe]=$e[Xe];return De}(Object.create(this.options),ue)).debug;if(fe&&console.time("preprocess data"),ue.maxZoom<0||ue.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ue.promoteId&&ue.generateId)throw new Error("promoteId and generateId cannot be used together.");var De,$e,Xe,He,Ee,Fe,ve=function(De,$e){var Xe=[];if("FeatureCollection"===De.type)for(var He=0;He<De.features.length;He++)Lt(Xe,De.features[He],$e,He);else Lt(Xe,"Feature"===De.type?De:{geometry:De},$e);return Xe}(oe,ue);this.tiles={},this.tileCoords=[],fe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ue.indexMaxZoom,ue.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(De=ve,$e=ue,Xe=$e.buffer/$e.extent,He=De,Ee=Ka(De,1,-1-Xe,Xe,0,-1,2,$e),Fe=Ka(De,1,1-Xe,2+Xe,0,-1,2,$e),(Ee||Fe)&&(He=Ka(De,1,-Xe,1+Xe,0,-1,2,$e)||[],Ee&&(He=Vu(Ee,1).concat(He)),Fe&&(He=He.concat(Vu(Fe,-1)))),ve=He).length&&this.splitTile(ve,0,0,0),fe&&(ve.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ms(oe,ue,fe){return 32*((1<<oe)*fe+ue)+oe}function Yr(oe,ue){var fe=oe.tileID.canonical;if(!this._geoJSONIndex)return ue(null,null);var ve=this._geoJSONIndex.getTile(fe.z,fe.x,fe.y);if(!ve)return ue(null,null);var De=new Je(ve.features),$e=It(De);0===$e.byteOffset&&$e.byteLength===$e.buffer.byteLength||($e=new Uint8Array($e)),ue(null,{vectorTile:De,rawData:$e.buffer})}Bt.prototype.load=function(oe){var ue=this.options,fe=ue.log,ve=ue.minZoom,De=ue.maxZoom,$e=ue.nodeSize;fe&&console.time("total time");var Xe="prepare "+oe.length+" points";fe&&console.time(Xe),this.points=oe;for(var He=[],Ee=0;Ee<oe.length;Ee++)oe[Ee].geometry&&He.push(Ct(oe[Ee],Ee));this.trees[De+1]=new xt(He,Vn,ur,$e,Float32Array),fe&&console.timeEnd(Xe);for(var Fe=De;Fe>=ve;Fe--){var Mt=+Date.now();He=this._cluster(He,Fe),this.trees[Fe]=new xt(He,Vn,ur,$e,Float32Array),fe&&console.log("z%d: %d clusters in %dms",Fe,He.length,+Date.now()-Mt)}return fe&&console.timeEnd("total time"),this},Bt.prototype.getClusters=function(oe,ue){var fe=((oe[0]+180)%360+360)%360-180,ve=Math.max(-90,Math.min(90,oe[1])),De=180===oe[2]?180:((oe[2]+180)%360+360)%360-180,$e=Math.max(-90,Math.min(90,oe[3]));if(oe[2]-oe[0]>=360)fe=-180,De=180;else if(fe>De){var Xe=this.getClusters([fe,ve,180,$e],ue),He=this.getClusters([-180,ve,De,$e],ue);return Xe.concat(He)}for(var Ee=this.trees[this._limitZoom(ue)],Fe=[],Mt=0,Ft=Ee.range(Xn(fe),Zt($e),Xn(De),Zt(ve));Mt<Ft.length;Mt+=1){var ct=Ee.points[Ft[Mt]];Fe.push(ct.numPoints?xn(ct):this.points[ct.index])}return Fe},Bt.prototype.getChildren=function(oe){var ue=this._getOriginId(oe),fe=this._getOriginZoom(oe),ve="No cluster with the specified id.",De=this.trees[fe];if(!De)throw new Error(ve);var $e=De.points[ue];if(!$e)throw new Error(ve);for(var Xe=this.options.radius/(this.options.extent*Math.pow(2,fe-1)),He=[],Ee=0,Fe=De.within($e.x,$e.y,Xe);Ee<Fe.length;Ee+=1){var Mt=De.points[Fe[Ee]];Mt.parentId===oe&&He.push(Mt.numPoints?xn(Mt):this.points[Mt.index])}if(0===He.length)throw new Error(ve);return He},Bt.prototype.getLeaves=function(oe,ue,fe){var ve=[];return this._appendLeaves(ve,oe,ue=ue||10,fe=fe||0,0),ve},Bt.prototype.getTile=function(oe,ue,fe){var ve=this.trees[this._limitZoom(oe)],De=Math.pow(2,oe),$e=this.options,Xe=$e.radius/$e.extent,He=(fe-Xe)/De,Ee=(fe+1+Xe)/De,Fe={features:[]};return this._addTileFeatures(ve.range((ue-Xe)/De,He,(ue+1+Xe)/De,Ee),ve.points,ue,fe,De,Fe),0===ue&&this._addTileFeatures(ve.range(1-Xe/De,He,1,Ee),ve.points,De,fe,De,Fe),ue===De-1&&this._addTileFeatures(ve.range(0,He,Xe/De,Ee),ve.points,-1,fe,De,Fe),Fe.features.length?Fe:null},Bt.prototype.getClusterExpansionZoom=function(oe){for(var ue=this._getOriginZoom(oe)-1;ue<=this.options.maxZoom;){var fe=this.getChildren(oe);if(ue++,1!==fe.length)break;oe=fe[0].properties.cluster_id}return ue},Bt.prototype._appendLeaves=function(oe,ue,fe,ve,De){for(var $e=0,Xe=this.getChildren(ue);$e<Xe.length;$e+=1){var He=Xe[$e],Ee=He.properties;if(Ee&&Ee.cluster?De+Ee.point_count<=ve?De+=Ee.point_count:De=this._appendLeaves(oe,Ee.cluster_id,fe,ve,De):De<ve?De++:oe.push(He),oe.length===fe)break}return De},Bt.prototype._addTileFeatures=function(oe,ue,fe,ve,De,$e){for(var Xe=0,He=oe;Xe<He.length;Xe+=1){var Ee=ue[He[Xe]],Fe=Ee.numPoints,Mt={type:1,geometry:[[Math.round(this.options.extent*(Ee.x*De-fe)),Math.round(this.options.extent*(Ee.y*De-ve))]],tags:Fe?pn(Ee):this.points[Ee.index].properties},Ft=void 0;Fe?Ft=Ee.id:this.options.generateId?Ft=Ee.index:this.points[Ee.index].id&&(Ft=this.points[Ee.index].id),void 0!==Ft&&(Mt.id=Ft),$e.features.push(Mt)}},Bt.prototype._limitZoom=function(oe){return Math.max(this.options.minZoom,Math.min(+oe,this.options.maxZoom+1))},Bt.prototype._cluster=function(oe,ue){for(var fe=[],ve=this.options,De=ve.reduce,$e=ve.minPoints,Xe=ve.radius/(ve.extent*Math.pow(2,ue)),He=0;He<oe.length;He++){var Ee=oe[He];if(!(Ee.zoom<=ue)){Ee.zoom=ue;for(var Fe=this.trees[ue+1],Mt=Fe.within(Ee.x,Ee.y,Xe),Ft=Ee.numPoints||1,ct=Ft,Et=0,Jt=Mt;Et<Jt.length;Et+=1){var Kt=Fe.points[Jt[Et]];Kt.zoom>ue&&(ct+=Kt.numPoints||1)}if(ct>=$e){for(var mn=Ee.x*Ft,St=Ee.y*Ft,Ut=De&&Ft>1?this._map(Ee,!0):null,Tt=(He<<5)+(ue+1)+this.points.length,Gn=0,jn=Mt;Gn<jn.length;Gn+=1){var ln=Fe.points[jn[Gn]];if(!(ln.zoom<=ue)){ln.zoom=ue;var ni=ln.numPoints||1;mn+=ln.x*ni,St+=ln.y*ni,ln.parentId=Tt,De&&(Ut||(Ut=this._map(Ee,!0)),De(Ut,this._map(ln)))}}Ee.parentId=Tt,fe.push(bn(mn/ct,St/ct,Tt,ct,Ut))}else if(fe.push(Ee),ct>1)for(var En=0,ui=Mt;En<ui.length;En+=1){var _i=Fe.points[ui[En]];_i.zoom<=ue||(_i.zoom=ue,fe.push(_i))}}}return fe},Bt.prototype._getOriginId=function(oe){return oe-this.points.length>>5},Bt.prototype._getOriginZoom=function(oe){return(oe-this.points.length)%32},Bt.prototype._map=function(oe,ue){if(oe.numPoints)return ue?Ce({},oe.properties):oe.properties;var fe=this.points[oe.index].properties,ve=this.options.map(fe);return ue&&ve===fe?Ce({},ve):ve},Ao.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ao.prototype.splitTile=function(oe,ue,fe,ve,De,$e,Xe){for(var He=[oe,ue,fe,ve],Ee=this.options,Fe=Ee.debug;He.length;){ve=He.pop(),fe=He.pop(),ue=He.pop(),oe=He.pop();var Mt=1<<ue,Ft=ms(ue,fe,ve),ct=this.tiles[Ft];if(!ct&&(Fe>1&&console.time("creation"),ct=this.tiles[Ft]=Gu(oe,ue,fe,ve,Ee),this.tileCoords.push({z:ue,x:fe,y:ve}),Fe)){Fe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ue,fe,ve,ct.numFeatures,ct.numPoints,ct.numSimplified),console.timeEnd("creation"));var Et="z"+ue;this.stats[Et]=(this.stats[Et]||0)+1,this.total++}if(ct.source=oe,De){if(ue===Ee.maxZoom||ue===De)continue;var Jt=1<<De-ue;if(fe!==Math.floor($e/Jt)||ve!==Math.floor(Xe/Jt))continue}else if(ue===Ee.indexMaxZoom||ct.numPoints<=Ee.indexMaxPoints)continue;if(ct.source=null,0!==oe.length){Fe>1&&console.time("clipping");var Kt,mn,St,Ut,Tt,Gn,jn=.5*Ee.buffer/Ee.extent,ln=.5-jn,ni=.5+jn,En=1+jn;Kt=mn=St=Ut=null,Tt=Ka(oe,Mt,fe-jn,fe+ni,0,ct.minX,ct.maxX,Ee),Gn=Ka(oe,Mt,fe+ln,fe+En,0,ct.minX,ct.maxX,Ee),oe=null,Tt&&(Kt=Ka(Tt,Mt,ve-jn,ve+ni,1,ct.minY,ct.maxY,Ee),mn=Ka(Tt,Mt,ve+ln,ve+En,1,ct.minY,ct.maxY,Ee),Tt=null),Gn&&(St=Ka(Gn,Mt,ve-jn,ve+ni,1,ct.minY,ct.maxY,Ee),Ut=Ka(Gn,Mt,ve+ln,ve+En,1,ct.minY,ct.maxY,Ee),Gn=null),Fe>1&&console.timeEnd("clipping"),He.push(Kt||[],ue+1,2*fe,2*ve),He.push(mn||[],ue+1,2*fe,2*ve+1),He.push(St||[],ue+1,2*fe+1,2*ve),He.push(Ut||[],ue+1,2*fe+1,2*ve+1)}}},Ao.prototype.getTile=function(oe,ue,fe){var ve=this.options,De=ve.extent,$e=ve.debug;if(oe<0||oe>24)return null;var Xe=1<<oe,He=ms(oe,ue=(ue%Xe+Xe)%Xe,fe);if(this.tiles[He])return xo(this.tiles[He],De);$e>1&&console.log("drilling down to z%d-%d-%d",oe,ue,fe);for(var Ee,Fe=oe,Mt=ue,Ft=fe;!Ee&&Fe>0;)Fe--,Mt=Math.floor(Mt/2),Ft=Math.floor(Ft/2),Ee=this.tiles[ms(Fe,Mt,Ft)];return Ee&&Ee.source?($e>1&&console.log("found parent tile z%d-%d-%d",Fe,Mt,Ft),$e>1&&console.time("drilling down"),this.splitTile(Ee.source,Fe,Mt,Ft,oe,ue,fe),$e>1&&console.timeEnd("drilling down"),this.tiles[He]?xo(this.tiles[He],De):null):null};var tu=function(oe){function ue(fe,ve,De,$e){oe.call(this,fe,ve,De,Yr),$e&&(this.loadGeoJSON=$e)}return oe&&(ue.__proto__=oe),(ue.prototype=Object.create(oe&&oe.prototype)).constructor=ue,ue.prototype.loadData=function(fe,ve){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=ve,this._pendingLoadDataParams=fe,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},ue.prototype._loadData=function(){var fe=this;if(this._pendingCallback&&this._pendingLoadDataParams){var ve=this._pendingCallback,De=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var $e=!!(De&&De.request&&De.request.collectResourceTiming)&&new m.RequestPerformance(De.request);this.loadGeoJSON(De,function(Xe,He){if(Xe||!He)return ve(Xe);if("object"!=typeof He)return ve(new Error("Input data given to '"+De.source+"' is not a valid GeoJSON object."));!function ct(Et,Jt){var Kt,mn=Et&&Et.type;if("FeatureCollection"===mn)for(Kt=0;Kt<Et.features.length;Kt++)ct(Et.features[Kt],Jt);else if("GeometryCollection"===mn)for(Kt=0;Kt<Et.geometries.length;Kt++)ct(Et.geometries[Kt],Jt);else if("Feature"===mn)ct(Et.geometry,Jt);else if("Polygon"===mn)se(Et.coordinates,Jt);else if("MultiPolygon"===mn)for(Kt=0;Kt<Et.coordinates.length;Kt++)se(Et.coordinates[Kt],Jt);return Et}(He,!0);try{if(De.filter){var Ee=m.createExpression(De.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===Ee.result)throw new Error(Ee.value.map(function(ct){return ct.key+": "+ct.message}).join(", "));var Fe=He.features.filter(function(ct){return Ee.value.evaluate({zoom:0},ct)});He={type:"FeatureCollection",features:Fe}}fe._geoJSONIndex=De.cluster?new Bt(function(ct){var Et=ct.superclusterOptions,Jt=ct.clusterProperties;if(!Jt||!Et)return Et;for(var Kt={},mn={},St={accumulated:null,zoom:0},Ut={properties:null},Tt=Object.keys(Jt),Gn=0,jn=Tt;Gn<jn.length;Gn+=1){var ln=jn[Gn],ni=Jt[ln],En=ni[0],ui=m.createExpression(ni[1]),_i=m.createExpression("string"==typeof En?[En,["accumulated"],["get",ln]]:En);Kt[ln]=ui.value,mn[ln]=_i.value}return Et.map=function(Ir){Ut.properties=Ir;for(var Xr={},xi=0,Hr=Tt;xi<Hr.length;xi+=1){var Mn=Hr[xi];Xr[Mn]=Kt[Mn].evaluate(St,Ut)}return Xr},Et.reduce=function(Ir,Xr){Ut.properties=Xr;for(var xi=0,Hr=Tt;xi<Hr.length;xi+=1){var Mn=Hr[xi];St.accumulated=Ir[Mn],Ir[Mn]=mn[Mn].evaluate(St,Ut)}},Et}(De)).load(He.features):new Ao(ct=He,De.geojsonVtOptions)}catch(ct){return ve(ct)}var ct;fe.loaded={};var Mt={};if($e){var Ft=$e.finish();Ft&&(Mt.resourceTiming={},Mt.resourceTiming[De.source]=JSON.parse(JSON.stringify(Ft)))}ve(null,Mt)})}},ue.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},ue.prototype.reloadTile=function(fe,ve){var De=this.loaded;return De&&De[fe.uid]?oe.prototype.reloadTile.call(this,fe,ve):this.loadTile(fe,ve)},ue.prototype.loadGeoJSON=function(fe,ve){if(fe.request)m.getJSON(fe.request,ve);else{if("string"!=typeof fe.data)return ve(new Error("Input data given to '"+fe.source+"' is not a valid GeoJSON object."));try{return ve(null,JSON.parse(fe.data))}catch{return ve(new Error("Input data given to '"+fe.source+"' is not a valid GeoJSON object."))}}},ue.prototype.removeSource=function(fe,ve){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ve()},ue.prototype.getClusterExpansionZoom=function(fe,ve){try{ve(null,this._geoJSONIndex.getClusterExpansionZoom(fe.clusterId))}catch(De){ve(De)}},ue.prototype.getClusterChildren=function(fe,ve){try{ve(null,this._geoJSONIndex.getChildren(fe.clusterId))}catch(De){ve(De)}},ue.prototype.getClusterLeaves=function(fe,ve){try{ve(null,this._geoJSONIndex.getLeaves(fe.clusterId,fe.limit,fe.offset))}catch(De){ve(De)}},ue}(Y),Br=function(oe){var ue=this;this.self=oe,this.actor=new m.Actor(oe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Y,geojson:tu},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(fe,ve){if(ue.workerSourceTypes[fe])throw new Error('Worker source with name "'+fe+'" already registered.');ue.workerSourceTypes[fe]=ve},this.self.registerRTLTextPlugin=function(fe){if(m.plugin.isParsed())throw new Error("RTL text plugin already registered.");m.plugin.applyArabicShaping=fe.applyArabicShaping,m.plugin.processBidirectionalText=fe.processBidirectionalText,m.plugin.processStyledBidirectionalText=fe.processStyledBidirectionalText}};return Br.prototype.setReferrer=function(oe,ue){this.referrer=ue},Br.prototype.setImages=function(oe,ue,fe){for(var ve in this.availableImages[oe]=ue,this.workerSources[oe]){var De=this.workerSources[oe][ve];for(var $e in De)De[$e].availableImages=ue}fe()},Br.prototype.setLayers=function(oe,ue,fe){this.getLayerIndex(oe).replace(ue),fe()},Br.prototype.updateLayers=function(oe,ue,fe){this.getLayerIndex(oe).update(ue.layers,ue.removedIds),fe()},Br.prototype.loadTile=function(oe,ue,fe){this.getWorkerSource(oe,ue.type,ue.source).loadTile(ue,fe)},Br.prototype.loadDEMTile=function(oe,ue,fe){this.getDEMWorkerSource(oe,ue.source).loadTile(ue,fe)},Br.prototype.reloadTile=function(oe,ue,fe){this.getWorkerSource(oe,ue.type,ue.source).reloadTile(ue,fe)},Br.prototype.abortTile=function(oe,ue,fe){this.getWorkerSource(oe,ue.type,ue.source).abortTile(ue,fe)},Br.prototype.removeTile=function(oe,ue,fe){this.getWorkerSource(oe,ue.type,ue.source).removeTile(ue,fe)},Br.prototype.removeDEMTile=function(oe,ue){this.getDEMWorkerSource(oe,ue.source).removeTile(ue)},Br.prototype.removeSource=function(oe,ue,fe){if(this.workerSources[oe]&&this.workerSources[oe][ue.type]&&this.workerSources[oe][ue.type][ue.source]){var ve=this.workerSources[oe][ue.type][ue.source];delete this.workerSources[oe][ue.type][ue.source],void 0!==ve.removeSource?ve.removeSource(ue,fe):fe()}},Br.prototype.loadWorkerSource=function(oe,ue,fe){try{this.self.importScripts(ue.url),fe()}catch(ve){fe(ve.toString())}},Br.prototype.syncRTLPluginState=function(oe,ue,fe){try{m.plugin.setState(ue);var ve=m.plugin.getPluginURL();if(m.plugin.isLoaded()&&!m.plugin.isParsed()&&null!=ve){this.self.importScripts(ve);var De=m.plugin.isParsed();fe(De?void 0:new Error("RTL Text Plugin failed to import scripts from "+ve),De)}}catch($e){fe($e.toString())}},Br.prototype.getAvailableImages=function(oe){var ue=this.availableImages[oe];return ue||(ue=[]),ue},Br.prototype.getLayerIndex=function(oe){var ue=this.layerIndexes[oe];return ue||(ue=this.layerIndexes[oe]=new z),ue},Br.prototype.getWorkerSource=function(oe,ue,fe){var ve=this;return this.workerSources[oe]||(this.workerSources[oe]={}),this.workerSources[oe][ue]||(this.workerSources[oe][ue]={}),this.workerSources[oe][ue][fe]||(this.workerSources[oe][ue][fe]=new this.workerSourceTypes[ue]({send:function(De,$e,Xe){ve.actor.send(De,$e,Xe,oe)}},this.getLayerIndex(oe),this.getAvailableImages(oe))),this.workerSources[oe][ue][fe]},Br.prototype.getDEMWorkerSource=function(oe,ue){return this.demWorkerSources[oe]||(this.demWorkerSources[oe]={}),this.demWorkerSources[oe][ue]||(this.demWorkerSources[oe][ue]=new pe),this.demWorkerSources[oe][ue]},Br.prototype.enforceCacheSizeLimit=function(oe,ue){m.enforceCacheSizeLimit(ue)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Br(self)),Br}),X(0,function(m){var q=m.createCommonjsModule(function(f){function p(S){return!h(S)}function h(S){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var M,H,te=new Blob([""],{type:"text/javascript"}),ae=URL.createObjectURL(te);try{H=new Worker(ae),M=!0}catch{M=!1}return H&&H.terminate(),URL.revokeObjectURL(ae),M}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var M=document.createElement("canvas");M.width=M.height=1;var H=M.getContext("2d");if(!H)return!1;var te=H.getImageData(0,0,1,1);return te&&te.width===M.width}()?(void 0===v[P=S&&S.failIfMajorPerformanceCaveat]&&(v[P]=function(M){var ae,ge,_e,H=(ae=M,ge=document.createElement("canvas"),(_e=Object.create(p.webGLContextAttributes)).failIfMajorPerformanceCaveat=ae,ge.probablySupportsContext?ge.probablySupportsContext("webgl",_e)||ge.probablySupportsContext("experimental-webgl",_e):ge.supportsContext?ge.supportsContext("webgl",_e)||ge.supportsContext("experimental-webgl",_e):ge.getContext("webgl",_e)||ge.getContext("experimental-webgl",_e));if(!H)return!1;var te=H.createShader(H.VERTEX_SHADER);return!(!te||H.isContextLost())&&(H.shaderSource(te,"void main() {}"),H.compileShader(te),!0===H.getShaderParameter(te,H.COMPILE_STATUS))}(P)),v[P]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var P}f.exports?f.exports=p:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=p,window.mapboxgl.notSupportedReason=h);var v={};p.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),G={create:function(f,p,h){var v=m.window.document.createElement(f);return void 0!==p&&(v.className=p),h&&h.appendChild(v),v},createNS:function(f,p){return m.window.document.createElementNS(f,p)}},z=m.window.document&&m.window.document.documentElement.style;function T(f){if(!z)return f[0];for(var p=0;p<f.length;p++)if(f[p]in z)return f[p];return f[0]}var D,F=T(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);G.disableDrag=function(){z&&F&&(D=z[F],z[F]="none")},G.enableDrag=function(){z&&F&&(z[F]=D)};var Z=T(["transform","WebkitTransform"]);G.setTransform=function(f,p){f.style[Z]=p};var Y=!1;try{var ie=Object.defineProperty({},"passive",{get:function(){Y=!0}});m.window.addEventListener("test",ie,ie),m.window.removeEventListener("test",ie,ie)}catch{Y=!1}G.addEventListener=function(f,p,h,v){void 0===v&&(v={}),f.addEventListener(p,h,"passive"in v&&Y?v:v.capture)},G.removeEventListener=function(f,p,h,v){void 0===v&&(v={}),f.removeEventListener(p,h,"passive"in v&&Y?v:v.capture)};var pe=function(f){f.preventDefault(),f.stopPropagation(),m.window.removeEventListener("click",pe,!0)};function se(f){var p=f.userImage;return!!(p&&p.render&&p.render())&&(f.data.replace(new Uint8Array(p.data.buffer)),!0)}G.suppressClick=function(){m.window.addEventListener("click",pe,!0),m.window.setTimeout(function(){m.window.removeEventListener("click",pe,!0)},0)},G.mousePos=function(f,p){var h=f.getBoundingClientRect();return new m.Point(p.clientX-h.left-f.clientLeft,p.clientY-h.top-f.clientTop)},G.touchPos=function(f,p){for(var h=f.getBoundingClientRect(),v=[],S=0;S<p.length;S++)v.push(new m.Point(p[S].clientX-h.left-f.clientLeft,p[S].clientY-h.top-f.clientTop));return v},G.mouseButton=function(f){return void 0!==m.window.InstallTrigger&&2===f.button&&f.ctrlKey&&m.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:f.button},G.remove=function(f){f.parentNode&&f.parentNode.removeChild(f)};var be=function(f){function p(){f.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new m.RGBAImage({width:1,height:1}),this.dirty=!0}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.isLoaded=function(){return this.loaded},p.prototype.setLoaded=function(h){if(this.loaded!==h&&(this.loaded=h,h)){for(var v=0,S=this.requestors;v<S.length;v+=1){var P=S[v];this._notify(P.ids,P.callback)}this.requestors=[]}},p.prototype.getImage=function(h){return this.images[h]},p.prototype.addImage=function(h,v){this._validate(h,v)&&(this.images[h]=v)},p.prototype._validate=function(h,v){var S=!0;return this._validateStretch(v.stretchX,v.data&&v.data.width)||(this.fire(new m.ErrorEvent(new Error('Image "'+h+'" has invalid "stretchX" value'))),S=!1),this._validateStretch(v.stretchY,v.data&&v.data.height)||(this.fire(new m.ErrorEvent(new Error('Image "'+h+'" has invalid "stretchY" value'))),S=!1),this._validateContent(v.content,v)||(this.fire(new m.ErrorEvent(new Error('Image "'+h+'" has invalid "content" value'))),S=!1),S},p.prototype._validateStretch=function(h,v){if(!h)return!0;for(var S=0,P=0,M=h;P<M.length;P+=1){var H=M[P];if(H[0]<S||H[1]<H[0]||v<H[1])return!1;S=H[1]}return!0},p.prototype._validateContent=function(h,v){return!(h&&(4!==h.length||h[0]<0||v.data.width<h[0]||h[1]<0||v.data.height<h[1]||h[2]<0||v.data.width<h[2]||h[3]<0||v.data.height<h[3]||h[2]<h[0]||h[3]<h[1]))},p.prototype.updateImage=function(h,v){v.version=this.images[h].version+1,this.images[h]=v,this.updatedImages[h]=!0},p.prototype.removeImage=function(h){var v=this.images[h];delete this.images[h],delete this.patterns[h],v.userImage&&v.userImage.onRemove&&v.userImage.onRemove()},p.prototype.listImages=function(){return Object.keys(this.images)},p.prototype.getImages=function(h,v){var S=!0;if(!this.isLoaded())for(var P=0,M=h;P<M.length;P+=1)this.images[M[P]]||(S=!1);this.isLoaded()||S?this._notify(h,v):this.requestors.push({ids:h,callback:v})},p.prototype._notify=function(h,v){for(var S={},P=0,M=h;P<M.length;P+=1){var H=M[P];this.images[H]||this.fire(new m.Event("styleimagemissing",{id:H}));var te=this.images[H];te?S[H]={data:te.data.clone(),pixelRatio:te.pixelRatio,sdf:te.sdf,version:te.version,stretchX:te.stretchX,stretchY:te.stretchY,content:te.content,hasRenderCallback:Boolean(te.userImage&&te.userImage.render)}:m.warnOnce('Image "'+H+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}v(null,S)},p.prototype.getPixelSize=function(){var h=this.atlasImage;return{width:h.width,height:h.height}},p.prototype.getPattern=function(h){var v=this.patterns[h],S=this.getImage(h);if(!S)return null;if(v&&v.position.version===S.version)return v.position;if(v)v.position.version=S.version;else{var P={w:S.data.width+2,h:S.data.height+2,x:0,y:0},M=new m.ImagePosition(P,S);this.patterns[h]={bin:P,position:M}}return this._updatePatternAtlas(),this.patterns[h].position},p.prototype.bind=function(h){var v=h.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new m.Texture(h,this.atlasImage,v.RGBA),this.atlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE)},p.prototype._updatePatternAtlas=function(){var h=[];for(var v in this.patterns)h.push(this.patterns[v].bin);var S=m.potpack(h),P=S.w,M=S.h,H=this.atlasImage;for(var te in H.resize({width:P||1,height:M||1}),this.patterns){var ae=this.patterns[te].bin,ge=ae.x+1,_e=ae.y+1,ye=this.images[te].data,Le=ye.width,Oe=ye.height;m.RGBAImage.copy(ye,H,{x:0,y:0},{x:ge,y:_e},{width:Le,height:Oe}),m.RGBAImage.copy(ye,H,{x:0,y:Oe-1},{x:ge,y:_e-1},{width:Le,height:1}),m.RGBAImage.copy(ye,H,{x:0,y:0},{x:ge,y:_e+Oe},{width:Le,height:1}),m.RGBAImage.copy(ye,H,{x:Le-1,y:0},{x:ge-1,y:_e},{width:1,height:Oe}),m.RGBAImage.copy(ye,H,{x:0,y:0},{x:ge+Le,y:_e},{width:1,height:Oe})}this.dirty=!0},p.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},p.prototype.dispatchRenderCallbacks=function(h){for(var v=0,S=h;v<S.length;v+=1){var P=S[v];if(!this.callbackDispatchedThisFrame[P]){this.callbackDispatchedThisFrame[P]=!0;var M=this.images[P];se(M)&&this.updateImage(P,M)}}},p}(m.Evented),Me=je,Ne=je,Je=1e20;function je(f,p,h,v,S,P){this.fontSize=f||24,this.buffer=void 0===p?3:p,this.cutoff=v||.25,this.fontFamily=S||"sans-serif",this.fontWeight=P||"normal",this.radius=h||8;var M=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=M,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(M*M),this.gridInner=new Float64Array(M*M),this.f=new Float64Array(M),this.d=new Float64Array(M),this.z=new Float64Array(M+1),this.v=new Int16Array(M),this.middle=Math.round(M/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Se(f,p,h,v,S,P,M){for(var H=0;H<p;H++){for(var te=0;te<h;te++)v[te]=f[te*p+H];for(Ke(v,S,P,M,h),te=0;te<h;te++)f[te*p+H]=S[te]}for(te=0;te<h;te++){for(H=0;H<p;H++)v[H]=f[te*p+H];for(Ke(v,S,P,M,p),H=0;H<p;H++)f[te*p+H]=Math.sqrt(S[H])}}function Ke(f,p,h,v,S){h[0]=0,v[0]=-Je,v[1]=+Je;for(var P=1,M=0;P<S;P++){for(var H=(f[P]+P*P-(f[h[M]]+h[M]*h[M]))/(2*P-2*h[M]);H<=v[M];)M--,H=(f[P]+P*P-(f[h[M]]+h[M]*h[M]))/(2*P-2*h[M]);h[++M]=P,v[M]=H,v[M+1]=+Je}for(P=0,M=0;P<S;P++){for(;v[M+1]<P;)M++;p[P]=(P-h[M])*(P-h[M])+f[h[M]]}}je.prototype.draw=function(f){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(f,this.buffer,this.middle);for(var p=this.ctx.getImageData(0,0,this.size,this.size),h=new Uint8ClampedArray(this.size*this.size),v=0;v<this.size*this.size;v++){var S=p.data[4*v+3]/255;this.gridOuter[v]=1===S?0:0===S?Je:Math.pow(Math.max(0,.5-S),2),this.gridInner[v]=1===S?Je:0===S?0:Math.pow(Math.max(0,S-.5),2)}for(Se(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Se(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),v=0;v<this.size*this.size;v++)h[v]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[v]-this.gridInner[v])/this.radius+this.cutoff))));return h},Me.default=Ne;var nt=function(f,p){this.requestManager=f,this.localIdeographFontFamily=p,this.entries={}};nt.prototype.setURL=function(f){this.url=f},nt.prototype.getGlyphs=function(f,p){var h=this,v=[];for(var S in f)for(var P=0,M=f[S];P<M.length;P+=1)v.push({stack:S,id:M[P]});m.asyncAll(v,function(H,te){var ae=H.stack,ge=H.id,_e=h.entries[ae];_e||(_e=h.entries[ae]={glyphs:{},requests:{},ranges:{}});var ye=_e.glyphs[ge];if(void 0===ye){if(ye=h._tinySDF(_e,ae,ge))return _e.glyphs[ge]=ye,void te(null,{stack:ae,id:ge,glyph:ye});var Le=Math.floor(ge/256);if(256*Le>65535)te(new Error("glyphs > 65535 not supported"));else if(_e.ranges[Le])te(null,{stack:ae,id:ge,glyph:ye});else{var Oe=_e.requests[Le];Oe||(Oe=_e.requests[Le]=[],nt.loadGlyphRange(ae,Le,h.url,h.requestManager,function(Ge,Ie){if(Ie){for(var ze in Ie)h._doesCharSupportLocalGlyph(+ze)||(_e.glyphs[+ze]=Ie[+ze]);_e.ranges[Le]=!0}for(var qe=0,ot=Oe;qe<ot.length;qe+=1)(0,ot[qe])(Ge,Ie);delete _e.requests[Le]})),Oe.push(function(Ge,Ie){Ge?te(Ge):Ie&&te(null,{stack:ae,id:ge,glyph:Ie[ge]||null})})}}else te(null,{stack:ae,id:ge,glyph:ye})},function(H,te){if(H)p(H);else if(te){for(var ae={},ge=0,_e=te;ge<_e.length;ge+=1){var ye=_e[ge],Le=ye.stack,Oe=ye.id,Ge=ye.glyph;(ae[Le]||(ae[Le]={}))[Oe]=Ge&&{id:Ge.id,bitmap:Ge.bitmap.clone(),metrics:Ge.metrics}}p(null,ae)}})},nt.prototype._doesCharSupportLocalGlyph=function(f){return!!this.localIdeographFontFamily&&(m.isChar["CJK Unified Ideographs"](f)||m.isChar["Hangul Syllables"](f)||m.isChar.Hiragana(f)||m.isChar.Katakana(f))},nt.prototype._tinySDF=function(f,p,h){var v=this.localIdeographFontFamily;if(v&&this._doesCharSupportLocalGlyph(h)){var S=f.tinySDF;if(!S){var P="400";/bold/i.test(p)?P="900":/medium/i.test(p)?P="500":/light/i.test(p)&&(P="200"),S=f.tinySDF=new nt.TinySDF(24,3,8,.25,v,P)}return{id:h,bitmap:new m.AlphaImage({width:30,height:30},S.draw(String.fromCharCode(h))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},nt.loadGlyphRange=function(f,p,h,v,S){var P=256*p,M=P+255,H=v.transformRequest(v.normalizeGlyphsURL(h).replace("{fontstack}",f).replace("{range}",P+"-"+M),m.ResourceType.Glyphs);m.getArrayBuffer(H,function(te,ae){if(te)S(te);else if(ae){for(var ge={},_e=0,ye=m.parseGlyphPBF(ae);_e<ye.length;_e+=1){var Le=ye[_e];ge[Le.id]=Le}S(null,ge)}})},nt.TinySDF=Me;var It=function(){this.specification=m.styleSpec.light.position};It.prototype.possiblyEvaluate=function(f,p){return m.sphericalToCartesian(f.expression.evaluate(p))},It.prototype.interpolate=function(f,p,h){return{x:m.number(f.x,p.x,h),y:m.number(f.y,p.y,h),z:m.number(f.z,p.z,h)}};var Ue=new m.Properties({anchor:new m.DataConstantProperty(m.styleSpec.light.anchor),position:new It,color:new m.DataConstantProperty(m.styleSpec.light.color),intensity:new m.DataConstantProperty(m.styleSpec.light.intensity)}),A=function(f){function p(h){f.call(this),this._transitionable=new m.Transitionable(Ue),this.setLight(h),this._transitioning=this._transitionable.untransitioned()}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getLight=function(){return this._transitionable.serialize()},p.prototype.setLight=function(h,v){if(void 0===v&&(v={}),!this._validate(m.validateLight,h,v))for(var S in h){var P=h[S];m.endsWith(S,"-transition")?this._transitionable.setTransition(S.slice(0,-11),P):this._transitionable.setValue(S,P)}},p.prototype.updateTransitions=function(h){this._transitioning=this._transitionable.transitioned(h,this._transitioning)},p.prototype.hasTransition=function(){return this._transitioning.hasTransition()},p.prototype.recalculate=function(h){this.properties=this._transitioning.possiblyEvaluate(h)},p.prototype._validate=function(h,v,S){return(!S||!1!==S.validate)&&m.emitValidationErrors(this,h.call(m.validateStyle,m.extend({value:v,style:{glyphs:!0,sprite:!0},styleSpec:m.styleSpec})))},p}(m.Evented),O=function(f,p){this.width=f,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};O.prototype.getDash=function(f,p){var h=f.join(",")+String(p);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(f,p)),this.dashEntry[h]},O.prototype.getDashRanges=function(f,p,h){var v=[],S=f.length%2==1?-f[f.length-1]*h:0,P=f[0]*h,M=!0;v.push({left:S,right:P,isDash:M,zeroLength:0===f[0]});for(var H=f[0],te=1;te<f.length;te++){var ae=f[te];v.push({left:S=H*h,right:P=(H+=ae)*h,isDash:M=!M,zeroLength:0===ae})}return v},O.prototype.addRoundDash=function(f,p,h){for(var v=p/2,S=-h;S<=h;S++)for(var P=this.width*(this.nextRow+h+S),M=0,H=f[M],te=0;te<this.width;te++){te/H.right>1&&(H=f[++M]);var ae=Math.abs(te-H.left),ge=Math.abs(te-H.right),_e=Math.min(ae,ge),ye=void 0,Le=S/h*(v+1);if(H.isDash){var Oe=v-Math.abs(Le);ye=Math.sqrt(_e*_e+Oe*Oe)}else ye=v-Math.sqrt(_e*_e+Le*Le);this.data[P+te]=Math.max(0,Math.min(255,ye+128))}},O.prototype.addRegularDash=function(f){for(var p=f.length-1;p>=0;--p){var h=f[p],v=f[p+1];h.zeroLength?f.splice(p,1):v&&v.isDash===h.isDash&&(v.left=h.left,f.splice(p,1))}var S=f[0],P=f[f.length-1];S.isDash===P.isDash&&(S.left=P.left-this.width,P.right=S.right+this.width);for(var M=this.width*this.nextRow,H=0,te=f[H],ae=0;ae<this.width;ae++){ae/te.right>1&&(te=f[++H]);var ge=Math.abs(ae-te.left),_e=Math.abs(ae-te.right),ye=Math.min(ge,_e);this.data[M+ae]=Math.max(0,Math.min(255,(te.isDash?ye:-ye)+128))}},O.prototype.addDash=function(f,p){var h=p?7:0,v=2*h+1;if(this.nextRow+v>this.height)return m.warnOnce("LineAtlas out of space"),null;for(var S=0,P=0;P<f.length;P++)S+=f[P];if(0!==S){var M=this.width/S,H=this.getDashRanges(f,this.width,M);p?this.addRoundDash(H,M,h):this.addRegularDash(H)}var te={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:S};return this.nextRow+=v,this.dirty=!0,te},O.prototype.bind=function(f){var p=f.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))};var B=function f(p,h){this.workerPool=p,this.actors=[],this.currentActor=0,this.id=m.uniqueId();for(var v=this.workerPool.acquire(this.id),S=0;S<v.length;S++){var P=new f.Actor(v[S],h,this.id);P.name="Worker "+S,this.actors.push(P)}};function j(f,p,h){var v=function(S,P){if(S)return h(S);if(P){var M=m.pick(m.extend(P,f),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);P.vector_layers&&(M.vectorLayers=P.vector_layers,M.vectorLayerIds=M.vectorLayers.map(function(H){return H.id})),M.tiles=p.canonicalizeTileset(M,f.url),h(null,M)}};return f.url?m.getJSON(p.transformRequest(p.normalizeSourceURL(f.url),m.ResourceType.Source),v):m.browser.frame(function(){return v(null,f)})}B.prototype.broadcast=function(f,p,h){m.asyncAll(this.actors,function(v,S){v.send(f,p,S)},h=h||function(){})},B.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},B.prototype.remove=function(){this.actors.forEach(function(f){f.remove()}),this.actors=[],this.workerPool.release(this.id)},B.Actor=m.Actor;var ee=function(f,p,h){this.bounds=m.LngLatBounds.convert(this.validateBounds(f)),this.minzoom=p||0,this.maxzoom=h||24};ee.prototype.validateBounds=function(f){return Array.isArray(f)&&4===f.length?[Math.max(-180,f[0]),Math.max(-90,f[1]),Math.min(180,f[2]),Math.min(90,f[3])]:[-180,-90,180,90]},ee.prototype.contains=function(f){var p=Math.pow(2,f.z),h=Math.floor(m.mercatorXfromLng(this.bounds.getWest())*p),v=Math.floor(m.mercatorYfromLat(this.bounds.getNorth())*p),S=Math.ceil(m.mercatorXfromLng(this.bounds.getEast())*p),P=Math.ceil(m.mercatorYfromLat(this.bounds.getSouth())*p);return f.x>=h&&f.x<S&&f.y>=v&&f.y<P};var W=function(f){function p(h,v,S,P){if(f.call(this),this.id=h,this.dispatcher=S,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,m.extend(this,m.pick(v,["url","scheme","tileSize","promoteId"])),this._options=m.extend({type:"vector"},v),this._collectResourceTiming=v.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(P)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.load=function(){var h=this;this._loaded=!1,this.fire(new m.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=j(this._options,this.map._requestManager,function(v,S){h._tileJSONRequest=null,h._loaded=!0,v?h.fire(new m.ErrorEvent(v)):S&&(m.extend(h,S),S.bounds&&(h.tileBounds=new ee(S.bounds,h.minzoom,h.maxzoom)),m.postTurnstileEvent(S.tiles,h.map._requestManager._customAccessToken),m.postMapLoadEvent(S.tiles,h.map._getMapId(),h.map._requestManager._skuToken,h.map._requestManager._customAccessToken),h.fire(new m.Event("data",{dataType:"source",sourceDataType:"metadata"})),h.fire(new m.Event("data",{dataType:"source",sourceDataType:"content"})))})},p.prototype.loaded=function(){return this._loaded},p.prototype.hasTile=function(h){return!this.tileBounds||this.tileBounds.contains(h.canonical)},p.prototype.onAdd=function(h){this.map=h,this.load()},p.prototype.setSourceProperty=function(h){this._tileJSONRequest&&this._tileJSONRequest.cancel(),h(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},p.prototype.setTiles=function(h){var v=this;return this.setSourceProperty(function(){v._options.tiles=h}),this},p.prototype.setUrl=function(h){var v=this;return this.setSourceProperty(function(){v.url=h,v._options.url=h}),this},p.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},p.prototype.serialize=function(){return m.extend({},this._options)},p.prototype.loadTile=function(h,v){var S=this.map._requestManager.normalizeTileURL(h.tileID.canonical.url(this.tiles,this.scheme)),P={request:this.map._requestManager.transformRequest(S,m.ResourceType.Tile),uid:h.uid,tileID:h.tileID,zoom:h.tileID.overscaledZ,tileSize:this.tileSize*h.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:m.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function M(H,te){return delete h.request,h.aborted?v(null):H&&404!==H.status?v(H):(te&&te.resourceTiming&&(h.resourceTiming=te.resourceTiming),this.map._refreshExpiredTiles&&te&&h.setExpiryData(te),h.loadVectorData(te,this.map.painter),m.cacheEntryPossiblyAdded(this.dispatcher),v(null),void(h.reloadCallback&&(this.loadTile(h,h.reloadCallback),h.reloadCallback=null)))}P.request.collectResourceTiming=this._collectResourceTiming,h.actor&&"expired"!==h.state?"loading"===h.state?h.reloadCallback=v:h.request=h.actor.send("reloadTile",P,M.bind(this)):(h.actor=this.dispatcher.getActor(),h.request=h.actor.send("loadTile",P,M.bind(this)))},p.prototype.abortTile=function(h){h.request&&(h.request.cancel(),delete h.request),h.actor&&h.actor.send("abortTile",{uid:h.uid,type:this.type,source:this.id},void 0)},p.prototype.unloadTile=function(h){h.unloadVectorData(),h.actor&&h.actor.send("removeTile",{uid:h.uid,type:this.type,source:this.id},void 0)},p.prototype.hasTransition=function(){return!1},p}(m.Evented),ce=function(f){function p(h,v,S,P){f.call(this),this.id=h,this.dispatcher=S,this.setEventedParent(P),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=m.extend({type:"raster"},v),m.extend(this,m.pick(v,["url","scheme","tileSize"]))}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.load=function(){var h=this;this._loaded=!1,this.fire(new m.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=j(this._options,this.map._requestManager,function(v,S){h._tileJSONRequest=null,h._loaded=!0,v?h.fire(new m.ErrorEvent(v)):S&&(m.extend(h,S),S.bounds&&(h.tileBounds=new ee(S.bounds,h.minzoom,h.maxzoom)),m.postTurnstileEvent(S.tiles),m.postMapLoadEvent(S.tiles,h.map._getMapId(),h.map._requestManager._skuToken),h.fire(new m.Event("data",{dataType:"source",sourceDataType:"metadata"})),h.fire(new m.Event("data",{dataType:"source",sourceDataType:"content"})))})},p.prototype.loaded=function(){return this._loaded},p.prototype.onAdd=function(h){this.map=h,this.load()},p.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},p.prototype.serialize=function(){return m.extend({},this._options)},p.prototype.hasTile=function(h){return!this.tileBounds||this.tileBounds.contains(h.canonical)},p.prototype.loadTile=function(h,v){var S=this,P=this.map._requestManager.normalizeTileURL(h.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);h.request=m.getImage(this.map._requestManager.transformRequest(P,m.ResourceType.Tile),function(M,H){if(delete h.request,h.aborted)h.state="unloaded",v(null);else if(M)h.state="errored",v(M);else if(H){S.map._refreshExpiredTiles&&h.setExpiryData(H),delete H.cacheControl,delete H.expires;var te=S.map.painter.context,ae=te.gl;h.texture=S.map.painter.getTileTexture(H.width),h.texture?h.texture.update(H,{useMipmap:!0}):(h.texture=new m.Texture(te,H,ae.RGBA,{useMipmap:!0}),h.texture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE,ae.LINEAR_MIPMAP_NEAREST),te.extTextureFilterAnisotropic&&ae.texParameterf(ae.TEXTURE_2D,te.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,te.extTextureFilterAnisotropicMax)),h.state="loaded",m.cacheEntryPossiblyAdded(S.dispatcher),v(null)}})},p.prototype.abortTile=function(h,v){h.request&&(h.request.cancel(),delete h.request),v()},p.prototype.unloadTile=function(h,v){h.texture&&this.map.painter.saveTileTexture(h.texture),v()},p.prototype.hasTransition=function(){return!1},p}(m.Evented),Ze=function(f){function p(h,v,S,P){f.call(this,h,v,S,P),this.type="raster-dem",this.maxzoom=22,this._options=m.extend({type:"raster-dem"},v),this.encoding=v.encoding||"mapbox"}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},p.prototype.loadTile=function(h,v){var S=this.map._requestManager.normalizeTileURL(h.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function P(M,H){M&&(h.state="errored",v(M)),H&&(h.dem=H,h.needsHillshadePrepare=!0,h.state="loaded",v(null))}h.request=m.getImage(this.map._requestManager.transformRequest(S,m.ResourceType.Tile),function(M,H){if(delete h.request,h.aborted)h.state="unloaded",v(null);else if(M)h.state="errored",v(M);else if(H){this.map._refreshExpiredTiles&&h.setExpiryData(H),delete H.cacheControl,delete H.expires;var te=m.window.ImageBitmap&&H instanceof m.window.ImageBitmap&&m.offscreenCanvasSupported()?H:m.browser.getImageData(H,1),ae={uid:h.uid,coord:h.tileID,source:this.id,rawImageData:te,encoding:this.encoding};h.actor&&"expired"!==h.state||(h.actor=this.dispatcher.getActor(),h.actor.send("loadDEMTile",ae,P.bind(this)))}}.bind(this)),h.neighboringTiles=this._getNeighboringTiles(h.tileID)},p.prototype._getNeighboringTiles=function(h){var v=h.canonical,S=Math.pow(2,v.z),P=(v.x-1+S)%S,M=0===v.x?h.wrap-1:h.wrap,H=(v.x+1+S)%S,te=v.x+1===S?h.wrap+1:h.wrap,ae={};return ae[new m.OverscaledTileID(h.overscaledZ,M,v.z,P,v.y).key]={backfilled:!1},ae[new m.OverscaledTileID(h.overscaledZ,te,v.z,H,v.y).key]={backfilled:!1},v.y>0&&(ae[new m.OverscaledTileID(h.overscaledZ,M,v.z,P,v.y-1).key]={backfilled:!1},ae[new m.OverscaledTileID(h.overscaledZ,h.wrap,v.z,v.x,v.y-1).key]={backfilled:!1},ae[new m.OverscaledTileID(h.overscaledZ,te,v.z,H,v.y-1).key]={backfilled:!1}),v.y+1<S&&(ae[new m.OverscaledTileID(h.overscaledZ,M,v.z,P,v.y+1).key]={backfilled:!1},ae[new m.OverscaledTileID(h.overscaledZ,h.wrap,v.z,v.x,v.y+1).key]={backfilled:!1},ae[new m.OverscaledTileID(h.overscaledZ,te,v.z,H,v.y+1).key]={backfilled:!1}),ae},p.prototype.unloadTile=function(h){h.demTexture&&this.map.painter.saveTileTexture(h.demTexture),h.fbo&&(h.fbo.destroy(),delete h.fbo),h.dem&&delete h.dem,delete h.neighboringTiles,h.state="unloaded",h.actor&&h.actor.send("removeDEMTile",{uid:h.uid,source:this.id})},p}(ce),lt=function(f){function p(h,v,S,P){f.call(this),this.id=h,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=S.getActor(),this.setEventedParent(P),this._data=v.data,this._options=m.extend({},v),this._collectResourceTiming=v.collectResourceTiming,this._resourceTiming=[],void 0!==v.maxzoom&&(this.maxzoom=v.maxzoom),v.type&&(this.type=v.type),v.attribution&&(this.attribution=v.attribution),this.promoteId=v.promoteId;var M=m.EXTENT/this.tileSize;this.workerOptions=m.extend({source:this.id,cluster:v.cluster||!1,geojsonVtOptions:{buffer:(void 0!==v.buffer?v.buffer:128)*M,tolerance:(void 0!==v.tolerance?v.tolerance:.375)*M,extent:m.EXTENT,maxZoom:this.maxzoom,lineMetrics:v.lineMetrics||!1,generateId:v.generateId||!1},superclusterOptions:{maxZoom:void 0!==v.clusterMaxZoom?Math.min(v.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,v.clusterMinPoints||2),extent:m.EXTENT,radius:(v.clusterRadius||50)*M,log:!1,generateId:v.generateId||!1},clusterProperties:v.clusterProperties,filter:v.filter},v.workerOptions)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.load=function(){var h=this;this.fire(new m.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(v){if(v)h.fire(new m.ErrorEvent(v));else{var S={dataType:"source",sourceDataType:"metadata"};h._collectResourceTiming&&h._resourceTiming&&h._resourceTiming.length>0&&(S.resourceTiming=h._resourceTiming,h._resourceTiming=[]),h.fire(new m.Event("data",S))}})},p.prototype.onAdd=function(h){this.map=h,this.load()},p.prototype.setData=function(h){var v=this;return this._data=h,this.fire(new m.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(S){if(S)v.fire(new m.ErrorEvent(S));else{var P={dataType:"source",sourceDataType:"content"};v._collectResourceTiming&&v._resourceTiming&&v._resourceTiming.length>0&&(P.resourceTiming=v._resourceTiming,v._resourceTiming=[]),v.fire(new m.Event("data",P))}}),this},p.prototype.getClusterExpansionZoom=function(h,v){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:h,source:this.id},v),this},p.prototype.getClusterChildren=function(h,v){return this.actor.send("geojson.getClusterChildren",{clusterId:h,source:this.id},v),this},p.prototype.getClusterLeaves=function(h,v,S,P){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:h,limit:v,offset:S},P),this},p.prototype._updateWorkerData=function(h){var v=this;this._loaded=!1;var S=m.extend({},this.workerOptions),P=this._data;"string"==typeof P?(S.request=this.map._requestManager.transformRequest(m.browser.resolveURL(P),m.ResourceType.Source),S.request.collectResourceTiming=this._collectResourceTiming):S.data=JSON.stringify(P),this.actor.send(this.type+".loadData",S,function(M,H){v._removed||H&&H.abandoned||(v._loaded=!0,H&&H.resourceTiming&&H.resourceTiming[v.id]&&(v._resourceTiming=H.resourceTiming[v.id].slice(0)),v.actor.send(v.type+".coalesce",{source:S.source},null),h(M))})},p.prototype.loaded=function(){return this._loaded},p.prototype.loadTile=function(h,v){var S=this,P=h.actor?"reloadTile":"loadTile";h.actor=this.actor,h.request=this.actor.send(P,{type:this.type,uid:h.uid,tileID:h.tileID,zoom:h.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:m.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(M,H){return delete h.request,h.unloadVectorData(),h.aborted?v(null):M?v(M):(h.loadVectorData(H,S.map.painter,"reloadTile"===P),v(null))})},p.prototype.abortTile=function(h){h.request&&(h.request.cancel(),delete h.request),h.aborted=!0},p.prototype.unloadTile=function(h){h.unloadVectorData(),this.actor.send("removeTile",{uid:h.uid,type:this.type,source:this.id})},p.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},p.prototype.serialize=function(){return m.extend({},this._options,{type:this.type,data:this._data})},p.prototype.hasTransition=function(){return!1},p}(m.Evented),we=m.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),wt=function(f){function p(h,v,S,P){f.call(this),this.id=h,this.dispatcher=S,this.coordinates=v.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(P),this.options=v}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.load=function(h,v){var S=this;this._loaded=!1,this.fire(new m.Event("dataloading",{dataType:"source"})),this.url=this.options.url,m.getImage(this.map._requestManager.transformRequest(this.url,m.ResourceType.Image),function(P,M){S._loaded=!0,P?S.fire(new m.ErrorEvent(P)):M&&(S.image=M,h&&(S.coordinates=h),v&&v(),S._finishLoading())})},p.prototype.loaded=function(){return this._loaded},p.prototype.updateImage=function(h){var v=this;return this.image&&h.url?(this.options.url=h.url,this.load(h.coordinates,function(){v.texture=null}),this):this},p.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new m.Event("data",{dataType:"source",sourceDataType:"metadata"})))},p.prototype.onAdd=function(h){this.map=h,this.load()},p.prototype.setCoordinates=function(h){var v=this;this.coordinates=h;var S=h.map(m.MercatorCoordinate.fromLngLat);this.tileID=function(M){for(var H=1/0,te=1/0,ae=-1/0,ge=-1/0,_e=0,ye=M;_e<ye.length;_e+=1){var Le=ye[_e];H=Math.min(H,Le.x),te=Math.min(te,Le.y),ae=Math.max(ae,Le.x),ge=Math.max(ge,Le.y)}var Oe=Math.max(ae-H,ge-te),Ge=Math.max(0,Math.floor(-Math.log(Oe)/Math.LN2)),Ie=Math.pow(2,Ge);return new m.CanonicalTileID(Ge,Math.floor((H+ae)/2*Ie),Math.floor((te+ge)/2*Ie))}(S),this.minzoom=this.maxzoom=this.tileID.z;var P=S.map(function(M){return v.tileID.getTilePoint(M)._round()});return this._boundsArray=new m.StructArrayLayout4i8,this._boundsArray.emplaceBack(P[0].x,P[0].y,0,0),this._boundsArray.emplaceBack(P[1].x,P[1].y,m.EXTENT,0),this._boundsArray.emplaceBack(P[3].x,P[3].y,0,m.EXTENT),this._boundsArray.emplaceBack(P[2].x,P[2].y,m.EXTENT,m.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new m.Event("data",{dataType:"source",sourceDataType:"content"})),this},p.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var h=this.map.painter.context,v=h.gl;for(var S in this.boundsBuffer||(this.boundsBuffer=h.createVertexBuffer(this._boundsArray,we.members)),this.boundsSegments||(this.boundsSegments=m.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new m.Texture(h,this.image,v.RGBA),this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE)),this.tiles){var P=this.tiles[S];"loaded"!==P.state&&(P.state="loaded",P.texture=this.texture)}}},p.prototype.loadTile=function(h,v){this.tileID&&this.tileID.equals(h.tileID.canonical)?(this.tiles[String(h.tileID.wrap)]=h,h.buckets={},v(null)):(h.state="errored",v(null))},p.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},p.prototype.hasTransition=function(){return!1},p}(m.Evented),bt=function(f){function p(h,v,S,P){f.call(this,h,v,S,P),this.roundZoom=!0,this.type="video",this.options=v}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.load=function(){var h=this;this._loaded=!1;var v=this.options;this.urls=[];for(var S=0,P=v.urls;S<P.length;S+=1)this.urls.push(this.map._requestManager.transformRequest(P[S],m.ResourceType.Source).url);m.getVideo(this.urls,function(M,H){h._loaded=!0,M?h.fire(new m.ErrorEvent(M)):H&&(h.video=H,h.video.loop=!0,h.video.addEventListener("playing",function(){h.map.triggerRepaint()}),h.map&&h.video.play(),h._finishLoading())})},p.prototype.pause=function(){this.video&&this.video.pause()},p.prototype.play=function(){this.video&&this.video.play()},p.prototype.seek=function(h){if(this.video){var v=this.video.seekable;h<v.start(0)||h>v.end(0)?this.fire(new m.ErrorEvent(new m.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+v.start(0)+" and "+v.end(0)+"-second mark."))):this.video.currentTime=h}},p.prototype.getVideo=function(){return this.video},p.prototype.onAdd=function(h){this.map||(this.map=h,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},p.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var h=this.map.painter.context,v=h.gl;for(var S in this.boundsBuffer||(this.boundsBuffer=h.createVertexBuffer(this._boundsArray,we.members)),this.boundsSegments||(this.boundsSegments=m.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE),v.texSubImage2D(v.TEXTURE_2D,0,0,0,v.RGBA,v.UNSIGNED_BYTE,this.video)):(this.texture=new m.Texture(h,this.video,v.RGBA),this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE)),this.tiles){var P=this.tiles[S];"loaded"!==P.state&&(P.state="loaded",P.texture=this.texture)}}},p.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},p.prototype.hasTransition=function(){return this.video&&!this.video.paused},p}(wt),Ye=function(f){function p(h,v,S,P){f.call(this,h,v,S,P),v.coordinates?Array.isArray(v.coordinates)&&4===v.coordinates.length&&!v.coordinates.some(function(M){return!Array.isArray(M)||2!==M.length||M.some(function(H){return"number"!=typeof H})})||this.fire(new m.ErrorEvent(new m.ValidationError("sources."+h,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new m.ErrorEvent(new m.ValidationError("sources."+h,null,'missing required property "coordinates"'))),v.animate&&"boolean"!=typeof v.animate&&this.fire(new m.ErrorEvent(new m.ValidationError("sources."+h,null,'optional "animate" property must be a boolean value'))),v.canvas?"string"==typeof v.canvas||v.canvas instanceof m.window.HTMLCanvasElement||this.fire(new m.ErrorEvent(new m.ValidationError("sources."+h,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new m.ErrorEvent(new m.ValidationError("sources."+h,null,'missing required property "canvas"'))),this.options=v,this.animate=void 0===v.animate||v.animate}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof m.window.HTMLCanvasElement?this.options.canvas:m.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new m.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},p.prototype.getCanvas=function(){return this.canvas},p.prototype.onAdd=function(h){this.map=h,this.load(),this.canvas&&this.animate&&this.play()},p.prototype.onRemove=function(){this.pause()},p.prototype.prepare=function(){var h=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,h=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,h=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var v=this.map.painter.context,S=v.gl;for(var P in this.boundsBuffer||(this.boundsBuffer=v.createVertexBuffer(this._boundsArray,we.members)),this.boundsSegments||(this.boundsSegments=m.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(h||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new m.Texture(v,this.canvas,S.RGBA,{premultiply:!0}),this.tiles){var M=this.tiles[P];"loaded"!==M.state&&(M.state="loaded",M.texture=this.texture)}}},p.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},p.prototype.hasTransition=function(){return this._playing},p.prototype._hasInvalidDimensions=function(){for(var h=0,v=[this.canvas.width,this.canvas.height];h<v.length;h+=1){var S=v[h];if(isNaN(S)||S<=0)return!0}return!1},p}(wt),xt={vector:W,raster:ce,"raster-dem":Ze,geojson:lt,video:bt,image:wt,canvas:Ye};function yn(f,p){var h=m.identity([]);return m.translate(h,h,[1,1,0]),m.scale(h,h,[.5*f.width,.5*f.height,1]),m.multiply(h,h,f.calculatePosMatrix(p.toUnwrapped()))}function Bt(f,p,h,v,S,P){var M=function(Ge,Ie,ze){if(Ge)for(var qe=0,ot=Ge;qe<ot.length;qe+=1){var yt=Ie[ot[qe]];if(yt&&yt.source===ze&&"fill-extrusion"===yt.type)return!0}else for(var mt in Ie){var _t=Ie[mt];if(_t.source===ze&&"fill-extrusion"===_t.type)return!0}return!1}(S&&S.layers,p,f.id),H=P.maxPitchScaleFactor(),te=f.tilesIn(v,H,M);te.sort(bn);for(var ae=[],ge=0,_e=te;ge<_e.length;ge+=1){var ye=_e[ge];ae.push({wrappedTileID:ye.tileID.wrapped().key,queryResults:ye.tile.queryRenderedFeatures(p,h,f._state,ye.queryGeometry,ye.cameraQueryGeometry,ye.scale,S,P,H,yn(f.transform,ye.tileID))})}var Le=function(Ge){for(var Ie={},ze={},qe=0,ot=Ge;qe<ot.length;qe+=1){var yt=ot[qe],mt=yt.queryResults,_t=yt.wrappedTileID,Pt=ze[_t]=ze[_t]||{};for(var $t in mt)for(var kt=mt[$t],tn=Pt[$t]=Pt[$t]||{},wn=Ie[$t]=Ie[$t]||[],An=0,Cn=kt;An<Cn.length;An+=1){var Vr=Cn[An];tn[Vr.featureIndex]||(tn[Vr.featureIndex]=!0,wn.push(Vr))}}return Ie}(ae);for(var Oe in Le)Le[Oe].forEach(function(Ge){var Ie=Ge.feature,ze=f.getFeatureState(Ie.layer["source-layer"],Ie.id);Ie.source=Ie.layer.source,Ie.layer["source-layer"]&&(Ie.sourceLayer=Ie.layer["source-layer"]),Ie.state=ze});return Le}function bn(f,p){var h=f.tileID,v=p.tileID;return h.overscaledZ-v.overscaledZ||h.canonical.y-v.canonical.y||h.wrap-v.wrap||h.canonical.x-v.canonical.x}var Ct=function(f,p){this.max=f,this.onRemove=p,this.reset()};Ct.prototype.reset=function(){for(var f in this.data)for(var p=0,h=this.data[f];p<h.length;p+=1){var v=h[p];v.timeout&&clearTimeout(v.timeout),this.onRemove(v.value)}return this.data={},this.order=[],this},Ct.prototype.add=function(f,p,h){var v=this,S=f.wrapped().key;void 0===this.data[S]&&(this.data[S]=[]);var P={value:p,timeout:void 0};if(void 0!==h&&(P.timeout=setTimeout(function(){v.remove(f,P)},h)),this.data[S].push(P),this.order.push(S),this.order.length>this.max){var M=this._getAndRemoveByKey(this.order[0]);M&&this.onRemove(M)}return this},Ct.prototype.has=function(f){return f.wrapped().key in this.data},Ct.prototype.getAndRemove=function(f){return this.has(f)?this._getAndRemoveByKey(f.wrapped().key):null},Ct.prototype._getAndRemoveByKey=function(f){var p=this.data[f].shift();return p.timeout&&clearTimeout(p.timeout),0===this.data[f].length&&delete this.data[f],this.order.splice(this.order.indexOf(f),1),p.value},Ct.prototype.getByKey=function(f){var p=this.data[f];return p?p[0].value:null},Ct.prototype.get=function(f){return this.has(f)?this.data[f.wrapped().key][0].value:null},Ct.prototype.remove=function(f,p){if(!this.has(f))return this;var h=f.wrapped().key,v=void 0===p?0:this.data[h].indexOf(p),S=this.data[h][v];return this.data[h].splice(v,1),S.timeout&&clearTimeout(S.timeout),0===this.data[h].length&&delete this.data[h],this.onRemove(S.value),this.order.splice(this.order.indexOf(h),1),this},Ct.prototype.setMaxSize=function(f){for(this.max=f;this.order.length>this.max;){var p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this},Ct.prototype.filter=function(f){var p=[];for(var h in this.data)for(var v=0,S=this.data[h];v<S.length;v+=1){var P=S[v];f(P.value)||p.push(P)}for(var M=0,H=p;M<H.length;M+=1){var te=H[M];this.remove(te.value.tileID,te)}};var xn=function(f,p,h){this.context=f;var v=f.gl;this.buffer=v.createBuffer(),this.dynamicDraw=Boolean(h),this.context.unbindVAO(),f.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer};xn.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},xn.prototype.updateData=function(f){var p=this.context.gl;this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,f.arrayBuffer)},xn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var pn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Xn=function(f,p,h,v){this.length=p.length,this.attributes=h,this.itemSize=p.bytesPerElement,this.dynamicDraw=v,this.context=f;var S=f.gl;this.buffer=S.createBuffer(),f.bindVertexBuffer.set(this.buffer),S.bufferData(S.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer};Xn.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Xn.prototype.updateData=function(f){var p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,f.arrayBuffer)},Xn.prototype.enableAttributes=function(f,p){for(var h=0;h<this.attributes.length;h++){var v=p.attributes[this.attributes[h].name];void 0!==v&&f.enableVertexAttribArray(v)}},Xn.prototype.setVertexAttribPointers=function(f,p,h){for(var v=0;v<this.attributes.length;v++){var S=this.attributes[v],P=p.attributes[S.name];void 0!==P&&f.vertexAttribPointer(P,S.components,f[pn[S.type]],!1,this.itemSize,S.offset+this.itemSize*(h||0))}},Xn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Zt=function(f){this.gl=f.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Zt.prototype.get=function(){return this.current},Zt.prototype.set=function(f){},Zt.prototype.getDefault=function(){return this.default},Zt.prototype.setDefault=function(){this.set(this.default)};var Ce=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return m.Color.transparent},p.prototype.set=function(h){var v=this.current;(h.r!==v.r||h.g!==v.g||h.b!==v.b||h.a!==v.a||this.dirty)&&(this.gl.clearColor(h.r,h.g,h.b,h.a),this.current=h,this.dirty=!1)},p}(Zt),Vn=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return 1},p.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.clearDepth(h),this.current=h,this.dirty=!1)},p}(Zt),ur=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return 0},p.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.clearStencil(h),this.current=h,this.dirty=!1)},p}(Zt),mi=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return[!0,!0,!0,!0]},p.prototype.set=function(h){var v=this.current;(h[0]!==v[0]||h[1]!==v[1]||h[2]!==v[2]||h[3]!==v[3]||this.dirty)&&(this.gl.colorMask(h[0],h[1],h[2],h[3]),this.current=h,this.dirty=!1)},p}(Zt),Bi=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return!0},p.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.depthMask(h),this.current=h,this.dirty=!1)},p}(Zt),Wt=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return 255},p.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.stencilMask(h),this.current=h,this.dirty=!1)},p}(Zt),Lt=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},p.prototype.set=function(h){var v=this.current;(h.func!==v.func||h.ref!==v.ref||h.mask!==v.mask||this.dirty)&&(this.gl.stencilFunc(h.func,h.ref,h.mask),this.current=h,this.dirty=!1)},p}(Zt),Ma=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){var h=this.gl;return[h.KEEP,h.KEEP,h.KEEP]},p.prototype.set=function(h){var v=this.current;(h[0]!==v[0]||h[1]!==v[1]||h[2]!==v[2]||this.dirty)&&(this.gl.stencilOp(h[0],h[1],h[2]),this.current=h,this.dirty=!1)},p}(Zt),pa=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;h?v.enable(v.STENCIL_TEST):v.disable(v.STENCIL_TEST),this.current=h,this.dirty=!1}},p}(Zt),si=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return[0,1]},p.prototype.set=function(h){var v=this.current;(h[0]!==v[0]||h[1]!==v[1]||this.dirty)&&(this.gl.depthRange(h[0],h[1]),this.current=h,this.dirty=!1)},p}(Zt),$r=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;h?v.enable(v.DEPTH_TEST):v.disable(v.DEPTH_TEST),this.current=h,this.dirty=!1}},p}(Zt),eu=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.LESS},p.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.depthFunc(h),this.current=h,this.dirty=!1)},p}(Zt),Ka=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;h?v.enable(v.BLEND):v.disable(v.BLEND),this.current=h,this.dirty=!1}},p}(Zt),Do=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){var h=this.gl;return[h.ONE,h.ZERO]},p.prototype.set=function(h){var v=this.current;(h[0]!==v[0]||h[1]!==v[1]||this.dirty)&&(this.gl.blendFunc(h[0],h[1]),this.current=h,this.dirty=!1)},p}(Zt),Oa=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return m.Color.transparent},p.prototype.set=function(h){var v=this.current;(h.r!==v.r||h.g!==v.g||h.b!==v.b||h.a!==v.a||this.dirty)&&(this.gl.blendColor(h.r,h.g,h.b,h.a),this.current=h,this.dirty=!1)},p}(Zt),ps=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.FUNC_ADD},p.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.blendEquation(h),this.current=h,this.dirty=!1)},p}(Zt),so=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;h?v.enable(v.CULL_FACE):v.disable(v.CULL_FACE),this.current=h,this.dirty=!1}},p}(Zt),ma=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.BACK},p.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.cullFace(h),this.current=h,this.dirty=!1)},p}(Zt),uo=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.CCW},p.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.frontFace(h),this.current=h,this.dirty=!1)},p}(Zt),wo=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.useProgram(h),this.current=h,this.dirty=!1)},p}(Zt),Vu=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.TEXTURE0},p.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.activeTexture(h),this.current=h,this.dirty=!1)},p}(Zt),As=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){var h=this.gl;return[0,0,h.drawingBufferWidth,h.drawingBufferHeight]},p.prototype.set=function(h){var v=this.current;(h[0]!==v[0]||h[1]!==v[1]||h[2]!==v[2]||h[3]!==v[3]||this.dirty)&&(this.gl.viewport(h[0],h[1],h[2],h[3]),this.current=h,this.dirty=!1)},p}(Zt),xo=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;v.bindFramebuffer(v.FRAMEBUFFER,h),this.current=h,this.dirty=!1}},p}(Zt),lr=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;v.bindRenderbuffer(v.RENDERBUFFER,h),this.current=h,this.dirty=!1}},p}(Zt),Gu=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;v.bindTexture(v.TEXTURE_2D,h),this.current=h,this.dirty=!1}},p}(Zt),bu=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;v.bindBuffer(v.ARRAY_BUFFER,h),this.current=h,this.dirty=!1}},p}(Zt),Us=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(h){var v=this.gl;v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,h),this.current=h,this.dirty=!1},p}(Zt),Ao=function(f){function p(h){f.call(this,h),this.vao=h.extVertexArrayObject}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(h){this.vao&&(h!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(h),this.current=h,this.dirty=!1)},p}(Zt),ms=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return 4},p.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;v.pixelStorei(v.UNPACK_ALIGNMENT,h),this.current=h,this.dirty=!1}},p}(Zt),Yr=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h),this.current=h,this.dirty=!1}},p}(Zt),tu=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,h),this.current=h,this.dirty=!1}},p}(Zt),Br=function(f){function p(h,v){f.call(this,h),this.context=h,this.parent=v}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p}(Zt),oe=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.setDirty=function(){this.dirty=!0},p.prototype.set=function(h){if(h!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var v=this.gl;v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,h,0),this.current=h,this.dirty=!1}},p}(Br),ue=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.set=function(h){if(h!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var v=this.gl;v.framebufferRenderbuffer(v.FRAMEBUFFER,v.DEPTH_ATTACHMENT,v.RENDERBUFFER,h),this.current=h,this.dirty=!1}},p}(Br),fe=function(f,p,h,v){this.context=f,this.width=p,this.height=h;var S=this.framebuffer=f.gl.createFramebuffer();this.colorAttachment=new oe(f,S),v&&(this.depthAttachment=new ue(f,S))};fe.prototype.destroy=function(){var f=this.context.gl,p=this.colorAttachment.get();if(p&&f.deleteTexture(p),this.depthAttachment){var h=this.depthAttachment.get();h&&f.deleteRenderbuffer(h)}f.deleteFramebuffer(this.framebuffer)};var ve=function(f,p,h){this.func=f,this.mask=p,this.range=h};ve.ReadOnly=!1,ve.ReadWrite=!0,ve.disabled=new ve(519,ve.ReadOnly,[0,1]);var De=function(f,p,h,v,S,P){this.test=f,this.ref=p,this.mask=h,this.fail=v,this.depthFail=S,this.pass=P};De.disabled=new De({func:519,mask:0},0,0,7680,7680,7680);var $e=function(f,p,h){this.blendFunction=f,this.blendColor=p,this.mask=h};$e.disabled=new $e($e.Replace=[1,0],m.Color.transparent,[!1,!1,!1,!1]),$e.unblended=new $e($e.Replace,m.Color.transparent,[!0,!0,!0,!0]),$e.alphaBlended=new $e([1,771],m.Color.transparent,[!0,!0,!0,!0]);var Xe=function(f,p,h){this.enable=f,this.mode=p,this.frontFace=h};Xe.disabled=new Xe(!1,1029,2305),Xe.backCCW=new Xe(!0,1029,2305);var He=function(f){this.gl=f,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ce(this),this.clearDepth=new Vn(this),this.clearStencil=new ur(this),this.colorMask=new mi(this),this.depthMask=new Bi(this),this.stencilMask=new Wt(this),this.stencilFunc=new Lt(this),this.stencilOp=new Ma(this),this.stencilTest=new pa(this),this.depthRange=new si(this),this.depthTest=new $r(this),this.depthFunc=new eu(this),this.blend=new Ka(this),this.blendFunc=new Do(this),this.blendColor=new Oa(this),this.blendEquation=new ps(this),this.cullFace=new so(this),this.cullFaceSide=new ma(this),this.frontFace=new uo(this),this.program=new wo(this),this.activeTexture=new Vu(this),this.viewport=new As(this),this.bindFramebuffer=new xo(this),this.bindRenderbuffer=new lr(this),this.bindTexture=new Gu(this),this.bindVertexBuffer=new bu(this),this.bindElementBuffer=new Us(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ao(this),this.pixelStoreUnpack=new ms(this),this.pixelStoreUnpackPremultiplyAlpha=new Yr(this),this.pixelStoreUnpackFlipY=new tu(this),this.extTextureFilterAnisotropic=f.getExtension("EXT_texture_filter_anisotropic")||f.getExtension("MOZ_EXT_texture_filter_anisotropic")||f.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=f.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=f.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(f.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=f.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=f.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=f.getParameter(f.MAX_TEXTURE_SIZE)};He.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},He.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},He.prototype.createIndexBuffer=function(f,p){return new xn(this,f,p)},He.prototype.createVertexBuffer=function(f,p,h){return new Xn(this,f,p,h)},He.prototype.createRenderbuffer=function(f,p,h){var v=this.gl,S=v.createRenderbuffer();return this.bindRenderbuffer.set(S),v.renderbufferStorage(v.RENDERBUFFER,f,p,h),this.bindRenderbuffer.set(null),S},He.prototype.createFramebuffer=function(f,p,h){return new fe(this,f,p,h)},He.prototype.clear=function(f){var p=f.color,h=f.depth,v=this.gl,S=0;p&&(S|=v.COLOR_BUFFER_BIT,this.clearColor.set(p),this.colorMask.set([!0,!0,!0,!0])),void 0!==h&&(S|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),v.clear(S)},He.prototype.setCullFace=function(f){!1===f.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(f.mode),this.frontFace.set(f.frontFace))},He.prototype.setDepthMode=function(f){f.func!==this.gl.ALWAYS||f.mask?(this.depthTest.set(!0),this.depthFunc.set(f.func),this.depthMask.set(f.mask),this.depthRange.set(f.range)):this.depthTest.set(!1)},He.prototype.setStencilMode=function(f){f.test.func!==this.gl.ALWAYS||f.mask?(this.stencilTest.set(!0),this.stencilMask.set(f.mask),this.stencilOp.set([f.fail,f.depthFail,f.pass]),this.stencilFunc.set({func:f.test.func,ref:f.ref,mask:f.test.mask})):this.stencilTest.set(!1)},He.prototype.setColorMode=function(f){m.deepEqual(f.blendFunction,$e.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(f.blendFunction),this.blendColor.set(f.blendColor)),this.colorMask.set(f.mask)},He.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ee=function(f){function p(h,v,S){var P=this;f.call(this),this.id=h,this.dispatcher=S,this.on("data",function(M){"source"===M.dataType&&"metadata"===M.sourceDataType&&(P._sourceLoaded=!0),P._sourceLoaded&&!P._paused&&"source"===M.dataType&&"content"===M.sourceDataType&&(P.reload(),P.transform&&P.update(P.transform))}),this.on("error",function(){P._sourceErrored=!0}),this._source=function(M,H,te,ae){var ge=new xt[H.type](M,H,te,ae);if(ge.id!==M)throw new Error("Expected Source id to be "+M+" instead of "+ge.id);return m.bindAll(["load","abort","unload","serialize","prepare"],ge),ge}(h,v,S,this),this._tiles={},this._cache=new Ct(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new m.SourceFeatureState}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.onAdd=function(h){this.map=h,this._maxTileCacheSize=h?h._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(h)},p.prototype.onRemove=function(h){this._source&&this._source.onRemove&&this._source.onRemove(h)},p.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var h in this._tiles){var v=this._tiles[h];if("loaded"!==v.state&&"errored"!==v.state)return!1}return!0},p.prototype.getSource=function(){return this._source},p.prototype.pause=function(){this._paused=!0},p.prototype.resume=function(){if(this._paused){var h=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,h&&this.reload(),this.transform&&this.update(this.transform)}},p.prototype._loadTile=function(h,v){return this._source.loadTile(h,v)},p.prototype._unloadTile=function(h){if(this._source.unloadTile)return this._source.unloadTile(h,function(){})},p.prototype._abortTile=function(h){if(this._source.abortTile)return this._source.abortTile(h,function(){})},p.prototype.serialize=function(){return this._source.serialize()},p.prototype.prepare=function(h){for(var v in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var S=this._tiles[v];S.upload(h),S.prepare(this.map.style.imageManager)}},p.prototype.getIds=function(){return m.values(this._tiles).map(function(h){return h.tileID}).sort(Fe).map(function(h){return h.key})},p.prototype.getRenderableIds=function(h){var v=this,S=[];for(var P in this._tiles)this._isIdRenderable(P,h)&&S.push(this._tiles[P]);return h?S.sort(function(M,H){var te=M.tileID,ae=H.tileID,ge=new m.Point(te.canonical.x,te.canonical.y)._rotate(v.transform.angle),_e=new m.Point(ae.canonical.x,ae.canonical.y)._rotate(v.transform.angle);return te.overscaledZ-ae.overscaledZ||_e.y-ge.y||_e.x-ge.x}).map(function(M){return M.tileID.key}):S.map(function(M){return M.tileID}).sort(Fe).map(function(M){return M.key})},p.prototype.hasRenderableParent=function(h){var v=this.findLoadedParent(h,0);return!!v&&this._isIdRenderable(v.tileID.key)},p.prototype._isIdRenderable=function(h,v){return this._tiles[h]&&this._tiles[h].hasData()&&!this._coveredTiles[h]&&(v||!this._tiles[h].holdingForFade())},p.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var h in this._cache.reset(),this._tiles)"errored"!==this._tiles[h].state&&this._reloadTile(h,"reloading")},p.prototype._reloadTile=function(h,v){var S=this._tiles[h];S&&("loading"!==S.state&&(S.state=v),this._loadTile(S,this._tileLoaded.bind(this,S,h,v)))},p.prototype._tileLoaded=function(h,v,S,P){if(P)return h.state="errored",void(404!==P.status?this._source.fire(new m.ErrorEvent(P,{tile:h})):this.update(this.transform));h.timeAdded=m.browser.now(),"expired"===S&&(h.refreshedUponExpiration=!0),this._setTileReloadTimer(v,h),"raster-dem"===this.getSource().type&&h.dem&&this._backfillDEM(h),this._state.initializeTileState(h,this.map?this.map.painter:null),this._source.fire(new m.Event("data",{dataType:"source",tile:h,coord:h.tileID}))},p.prototype._backfillDEM=function(h){for(var v=this.getRenderableIds(),S=0;S<v.length;S++){var P=v[S];if(h.neighboringTiles&&h.neighboringTiles[P]){var M=this.getTileByID(P);H(h,M),H(M,h)}}function H(te,ae){te.needsHillshadePrepare=!0;var ge=ae.tileID.canonical.x-te.tileID.canonical.x,_e=ae.tileID.canonical.y-te.tileID.canonical.y,ye=Math.pow(2,te.tileID.canonical.z),Le=ae.tileID.key;0===ge&&0===_e||Math.abs(_e)>1||(Math.abs(ge)>1&&(1===Math.abs(ge+ye)?ge+=ye:1===Math.abs(ge-ye)&&(ge-=ye)),ae.dem&&te.dem&&(te.dem.backfillBorder(ae.dem,ge,_e),te.neighboringTiles&&te.neighboringTiles[Le]&&(te.neighboringTiles[Le].backfilled=!0)))}},p.prototype.getTile=function(h){return this.getTileByID(h.key)},p.prototype.getTileByID=function(h){return this._tiles[h]},p.prototype._retainLoadedChildren=function(h,v,S,P){for(var M in this._tiles){var H=this._tiles[M];if(!(P[M]||!H.hasData()||H.tileID.overscaledZ<=v||H.tileID.overscaledZ>S)){for(var te=H.tileID;H&&H.tileID.overscaledZ>v+1;){var ae=H.tileID.scaledTo(H.tileID.overscaledZ-1);(H=this._tiles[ae.key])&&H.hasData()&&(te=ae)}for(var ge=te;ge.overscaledZ>v;)if(h[(ge=ge.scaledTo(ge.overscaledZ-1)).key]){P[te.key]=te;break}}}},p.prototype.findLoadedParent=function(h,v){if(h.key in this._loadedParentTiles){var S=this._loadedParentTiles[h.key];return S&&S.tileID.overscaledZ>=v?S:null}for(var P=h.overscaledZ-1;P>=v;P--){var M=h.scaledTo(P),H=this._getLoadedTile(M);if(H)return H}},p.prototype._getLoadedTile=function(h){var v=this._tiles[h.key];return v&&v.hasData()?v:this._cache.getByKey(h.wrapped().key)},p.prototype.updateCacheSize=function(h){var v=Math.ceil(h.width/this._source.tileSize)+1,S=Math.ceil(h.height/this._source.tileSize)+1,P=Math.floor(v*S*5),M="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,P):P;this._cache.setMaxSize(M)},p.prototype.handleWrapJump=function(h){var v=Math.round((h-(void 0===this._prevLng?h:this._prevLng))/360);if(this._prevLng=h,v){var S={};for(var P in this._tiles){var M=this._tiles[P];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+v),S[M.tileID.key]=M}for(var H in this._tiles=S,this._timers)clearTimeout(this._timers[H]),delete this._timers[H];for(var te in this._tiles)this._setTileReloadTimer(te,this._tiles[te])}},p.prototype.update=function(h){var v=this;if(this.transform=h,this._sourceLoaded&&!this._paused){var S;this.updateCacheSize(h),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?S=h.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Pt){return new m.OverscaledTileID(Pt.canonical.z,Pt.wrap,Pt.canonical.z,Pt.canonical.x,Pt.canonical.y)}):(S=h.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(S=S.filter(function(Pt){return v._source.hasTile(Pt)}))):S=[];var P=h.coveringZoomLevel(this._source),M=Math.max(P-p.maxOverzooming,this._source.minzoom),H=Math.max(P+p.maxUnderzooming,this._source.minzoom),te=this._updateRetainedTiles(S,P);if(Mt(this._source.type)){for(var ae={},ge={},_e=0,ye=Object.keys(te);_e<ye.length;_e+=1){var Le=ye[_e],Oe=te[Le],Ge=this._tiles[Le];if(Ge&&!(Ge.fadeEndTime&&Ge.fadeEndTime<=m.browser.now())){var Ie=this.findLoadedParent(Oe,M);Ie&&(this._addTile(Ie.tileID),ae[Ie.tileID.key]=Ie.tileID),ge[Le]=Oe}}for(var ze in this._retainLoadedChildren(ge,P,H,te),ae)te[ze]||(this._coveredTiles[ze]=!0,te[ze]=ae[ze])}for(var qe in te)this._tiles[qe].clearFadeHold();for(var ot=0,yt=m.keysDifference(this._tiles,te);ot<yt.length;ot+=1){var mt=yt[ot],_t=this._tiles[mt];_t.hasSymbolBuckets&&!_t.holdingForFade()?_t.setHoldDuration(this.map._fadeDuration):_t.hasSymbolBuckets&&!_t.symbolFadeFinished()||this._removeTile(mt)}this._updateLoadedParentTileCache()}},p.prototype.releaseSymbolFadeTiles=function(){for(var h in this._tiles)this._tiles[h].holdingForFade()&&this._removeTile(h)},p.prototype._updateRetainedTiles=function(h,v){for(var S={},P={},M=Math.max(v-p.maxOverzooming,this._source.minzoom),H=Math.max(v+p.maxUnderzooming,this._source.minzoom),te={},ae=0,ge=h;ae<ge.length;ae+=1){var _e=ge[ae],ye=this._addTile(_e);S[_e.key]=_e,ye.hasData()||v<this._source.maxzoom&&(te[_e.key]=_e)}this._retainLoadedChildren(te,v,H,S);for(var Le=0,Oe=h;Le<Oe.length;Le+=1){var Ge=Oe[Le],Ie=this._tiles[Ge.key];if(!Ie.hasData()){if(v+1>this._source.maxzoom){var ze=Ge.children(this._source.maxzoom)[0],qe=this.getTile(ze);if(qe&&qe.hasData()){S[ze.key]=ze;continue}}else{var ot=Ge.children(this._source.maxzoom);if(S[ot[0].key]&&S[ot[1].key]&&S[ot[2].key]&&S[ot[3].key])continue}for(var yt=Ie.wasRequested(),mt=Ge.overscaledZ-1;mt>=M;--mt){var _t=Ge.scaledTo(mt);if(P[_t.key]||(P[_t.key]=!0,!(Ie=this.getTile(_t))&&yt&&(Ie=this._addTile(_t)),Ie&&(S[_t.key]=_t,yt=Ie.wasRequested(),Ie.hasData())))break}}}return S},p.prototype._updateLoadedParentTileCache=function(){for(var h in this._loadedParentTiles={},this._tiles){for(var v=[],S=void 0,P=this._tiles[h].tileID;P.overscaledZ>0;){if(P.key in this._loadedParentTiles){S=this._loadedParentTiles[P.key];break}v.push(P.key);var M=P.scaledTo(P.overscaledZ-1);if(S=this._getLoadedTile(M))break;P=M}for(var H=0,te=v;H<te.length;H+=1)this._loadedParentTiles[te[H]]=S}},p.prototype._addTile=function(h){var v=this._tiles[h.key];if(v)return v;(v=this._cache.getAndRemove(h))&&(this._setTileReloadTimer(h.key,v),v.tileID=h,this._state.initializeTileState(v,this.map?this.map.painter:null),this._cacheTimers[h.key]&&(clearTimeout(this._cacheTimers[h.key]),delete this._cacheTimers[h.key],this._setTileReloadTimer(h.key,v)));var S=Boolean(v);return S||(v=new m.Tile(h,this._source.tileSize*h.overscaleFactor()),this._loadTile(v,this._tileLoaded.bind(this,v,h.key,v.state))),v?(v.uses++,this._tiles[h.key]=v,S||this._source.fire(new m.Event("dataloading",{tile:v,coord:v.tileID,dataType:"source"})),v):null},p.prototype._setTileReloadTimer=function(h,v){var S=this;h in this._timers&&(clearTimeout(this._timers[h]),delete this._timers[h]);var P=v.getExpiryTimeout();P&&(this._timers[h]=setTimeout(function(){S._reloadTile(h,"expired"),delete S._timers[h]},P))},p.prototype._removeTile=function(h){var v=this._tiles[h];v&&(v.uses--,delete this._tiles[h],this._timers[h]&&(clearTimeout(this._timers[h]),delete this._timers[h]),v.uses>0||(v.hasData()&&"reloading"!==v.state?this._cache.add(v.tileID,v,v.getExpiryTimeout()):(v.aborted=!0,this._abortTile(v),this._unloadTile(v))))},p.prototype.clearTiles=function(){for(var h in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(h);this._cache.reset()},p.prototype.tilesIn=function(h,v,S){var P=this,M=[],H=this.transform;if(!H)return M;for(var te=S?H.getCameraQueryGeometry(h):h,ae=h.map(function(mt){return H.pointCoordinate(mt)}),ge=te.map(function(mt){return H.pointCoordinate(mt)}),_e=this.getIds(),ye=1/0,Le=1/0,Oe=-1/0,Ge=-1/0,Ie=0,ze=ge;Ie<ze.length;Ie+=1){var qe=ze[Ie];ye=Math.min(ye,qe.x),Le=Math.min(Le,qe.y),Oe=Math.max(Oe,qe.x),Ge=Math.max(Ge,qe.y)}for(var ot=function(mt){var _t=P._tiles[_e[mt]];if(!_t.holdingForFade()){var Pt=_t.tileID,$t=Math.pow(2,H.zoom-_t.tileID.overscaledZ),kt=v*_t.queryPadding*m.EXTENT/_t.tileSize/$t,tn=[Pt.getTilePoint(new m.MercatorCoordinate(ye,Le)),Pt.getTilePoint(new m.MercatorCoordinate(Oe,Ge))];if(tn[0].x-kt<m.EXTENT&&tn[0].y-kt<m.EXTENT&&tn[1].x+kt>=0&&tn[1].y+kt>=0){var wn=ae.map(function(Cn){return Pt.getTilePoint(Cn)}),An=ge.map(function(Cn){return Pt.getTilePoint(Cn)});M.push({tile:_t,tileID:Pt,queryGeometry:wn,cameraQueryGeometry:An,scale:$t})}}},yt=0;yt<_e.length;yt++)ot(yt);return M},p.prototype.getVisibleCoordinates=function(h){for(var v=this,S=this.getRenderableIds(h).map(function(te){return v._tiles[te].tileID}),P=0,M=S;P<M.length;P+=1){var H=M[P];H.posMatrix=this.transform.calculatePosMatrix(H.toUnwrapped())}return S},p.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Mt(this._source.type))for(var h in this._tiles){var v=this._tiles[h];if(void 0!==v.fadeEndTime&&v.fadeEndTime>=m.browser.now())return!0}return!1},p.prototype.setFeatureState=function(h,v,S){this._state.updateState(h=h||"_geojsonTileLayer",v,S)},p.prototype.removeFeatureState=function(h,v,S){this._state.removeFeatureState(h=h||"_geojsonTileLayer",v,S)},p.prototype.getFeatureState=function(h,v){return this._state.getState(h=h||"_geojsonTileLayer",v)},p.prototype.setDependencies=function(h,v,S){var P=this._tiles[h];P&&P.setDependencies(v,S)},p.prototype.reloadTilesForDependencies=function(h,v){for(var S in this._tiles)this._tiles[S].hasDependency(h,v)&&this._reloadTile(S,"reloading");this._cache.filter(function(P){return!P.hasDependency(h,v)})},p}(m.Evented);function Fe(f,p){var h=Math.abs(2*f.wrap)-+(f.wrap<0),v=Math.abs(2*p.wrap)-+(p.wrap<0);return f.overscaledZ-p.overscaledZ||v-h||p.canonical.y-f.canonical.y||p.canonical.x-f.canonical.x}function Mt(f){return"raster"===f||"image"===f||"video"===f}function Ft(){return new m.window.Worker(zc.workerUrl)}Ee.maxOverzooming=10,Ee.maxUnderzooming=3;var ct="mapboxgl_preloaded_worker_pool",Et=function(){this.active={}};Et.prototype.acquire=function(f){if(!this.workers)for(this.workers=[];this.workers.length<Et.workerCount;)this.workers.push(new Ft);return this.active[f]=!0,this.workers.slice()},Et.prototype.release=function(f){delete this.active[f],0===this.numActive()&&(this.workers.forEach(function(p){p.terminate()}),this.workers=null)},Et.prototype.isPreloaded=function(){return!!this.active[ct]},Et.prototype.numActive=function(){return Object.keys(this.active).length};var Jt,Kt=Math.floor(m.browser.hardwareConcurrency/2);function mn(){return Jt||(Jt=new Et),Jt}function St(f,p){var h={};for(var v in f)"ref"!==v&&(h[v]=f[v]);return m.refProperties.forEach(function(S){S in p&&(h[S]=p[S])}),h}function Ut(f){f=f.slice();for(var p=Object.create(null),h=0;h<f.length;h++)p[f[h].id]=f[h];for(var v=0;v<f.length;v++)"ref"in f[v]&&(f[v]=St(f[v],p[f[v].ref]));return f}Et.workerCount=Math.max(Math.min(Kt,6),1);var Tt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Gn(f,p,h){h.push({command:Tt.addSource,args:[f,p[f]]})}function jn(f,p,h){p.push({command:Tt.removeSource,args:[f]}),h[f]=!0}function ln(f,p,h,v){jn(f,h,v),Gn(f,p,h)}function ni(f,p,h){var v;for(v in f[h])if(f[h].hasOwnProperty(v)&&"data"!==v&&!m.deepEqual(f[h][v],p[h][v]))return!1;for(v in p[h])if(p[h].hasOwnProperty(v)&&"data"!==v&&!m.deepEqual(f[h][v],p[h][v]))return!1;return!0}function En(f,p,h,v,S,P){var M;for(M in p=p||{},f=f||{})f.hasOwnProperty(M)&&(m.deepEqual(f[M],p[M])||h.push({command:P,args:[v,M,p[M],S]}));for(M in p)p.hasOwnProperty(M)&&!f.hasOwnProperty(M)&&(m.deepEqual(f[M],p[M])||h.push({command:P,args:[v,M,p[M],S]}))}function ui(f){return f.id}function _i(f,p){return f[p.id]=p,f}var Ir=function(f,p){this.reset(f,p)};Ir.prototype.reset=function(f,p){this.points=f||[],this._distances=[0];for(var h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Ir.prototype.lerp=function(f){if(1===this.points.length)return this.points[0];f=m.clamp(f,0,1);for(var p=1,h=this._distances[p],v=f*this.paddedLength+this.padding;h<v&&p<this._distances.length;)h=this._distances[++p];var S=p-1,P=this._distances[S],M=h-P,H=M>0?(v-P)/M:0;return this.points[S].mult(1-H).add(this.points[p].mult(H))};var Xr=function(f,p,h){var v=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(f/h),this.yCellCount=Math.ceil(p/h);for(var P=0;P<this.xCellCount*this.yCellCount;P++)v.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=f,this.height=p,this.xScale=this.xCellCount/f,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0};function xi(f,p,h,v,S){var P=m.create();return p?(m.scale(P,P,[1/S,1/S,1]),h||m.rotateZ(P,P,v.angle)):m.multiply(P,v.labelPlaneMatrix,f),P}function Hr(f,p,h,v,S){if(p){var P=m.clone(f);return m.scale(P,P,[S,S,1]),h||m.rotateZ(P,P,-v.angle),P}return v.glCoordMatrix}function Mn(f,p){var h=[f.x,f.y,0,1];Tn(h,h,p);var v=h[3];return{point:new m.Point(h[0]/v,h[1]/v),signedDistanceFromCamera:v}}function Oi(f,p){return.5+f/p*.5}function er(f,p){var h=f[0]/f[3],v=f[1]/f[3];return h>=-p[0]&&h<=p[0]&&v>=-p[1]&&v<=p[1]}function ua(f,p,h,v,S,P,M,H){var te=v?f.textSizeData:f.iconSizeData,ae=m.evaluateSizeForZoom(te,h.transform.zoom),ge=[256/h.width*2+1,256/h.height*2+1],_e=v?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;_e.clear();for(var ye=f.lineVertexArray,Le=v?f.text.placedSymbolArray:f.icon.placedSymbolArray,Oe=h.transform.width/h.transform.height,Ge=!1,Ie=0;Ie<Le.length;Ie++){var ze=Le.get(Ie);if(ze.hidden||ze.writingMode===m.WritingMode.vertical&&!Ge)La(ze.numGlyphs,_e);else{Ge=!1;var qe=[ze.anchorX,ze.anchorY,0,1];if(m.transformMat4(qe,qe,p),er(qe,ge)){var ot=Oi(h.transform.cameraToCenterDistance,qe[3]),yt=m.evaluateSizeForFeature(te,ae,ze),mt=M?yt/ot:yt*ot,_t=new m.Point(ze.anchorX,ze.anchorY),Pt=Mn(_t,S).point,$t={},kt=ji(ze,mt,!1,H,p,S,P,f.glyphOffsetArray,ye,_e,Pt,_t,$t,Oe);Ge=kt.useVertical,(kt.notEnoughRoom||Ge||kt.needsFlipping&&ji(ze,mt,!0,H,p,S,P,f.glyphOffsetArray,ye,_e,Pt,_t,$t,Oe).notEnoughRoom)&&La(ze.numGlyphs,_e)}else La(ze.numGlyphs,_e)}}v?f.text.dynamicLayoutVertexBuffer.updateData(_e):f.icon.dynamicLayoutVertexBuffer.updateData(_e)}function qo(f,p,h,v,S,P,M,H,te,ae,ge){var _e=H.glyphStartIndex+H.numGlyphs,ye=H.lineStartIndex,Le=H.lineStartIndex+H.lineLength,Oe=p.getoffsetX(H.glyphStartIndex),Ge=p.getoffsetX(_e-1),Ie=gs(f*Oe,h,v,S,P,M,H.segment,ye,Le,te,ae,ge);if(!Ie)return null;var ze=gs(f*Ge,h,v,S,P,M,H.segment,ye,Le,te,ae,ge);return ze?{first:Ie,last:ze}:null}function or(f,p,h,v){return f===m.WritingMode.horizontal&&Math.abs(h.y-p.y)>Math.abs(h.x-p.x)*v?{useVertical:!0}:(f===m.WritingMode.vertical?p.y<h.y:p.x>h.x)?{needsFlipping:!0}:null}function ji(f,p,h,v,S,P,M,H,te,ae,ge,_e,ye,Le){var Oe,Ge=p/24,Ie=f.lineOffsetX*Ge,ze=f.lineOffsetY*Ge;if(f.numGlyphs>1){var qe=f.glyphStartIndex+f.numGlyphs,ot=f.lineStartIndex,yt=f.lineStartIndex+f.lineLength,mt=qo(Ge,H,Ie,ze,h,ge,_e,f,te,P,ye);if(!mt)return{notEnoughRoom:!0};var _t=Mn(mt.first.point,M).point,Pt=Mn(mt.last.point,M).point;if(v&&!h){var $t=or(f.writingMode,_t,Pt,Le);if($t)return $t}Oe=[mt.first];for(var kt=f.glyphStartIndex+1;kt<qe-1;kt++)Oe.push(gs(Ge*H.getoffsetX(kt),Ie,ze,h,ge,_e,f.segment,ot,yt,te,P,ye));Oe.push(mt.last)}else{if(v&&!h){var tn=Mn(_e,S).point,wn=f.lineStartIndex+f.segment+1,An=new m.Point(te.getx(wn),te.gety(wn)),Cn=Mn(An,S),Vr=Cn.signedDistanceFromCamera>0?Cn.point:jr(_e,An,tn,1,S),nn=or(f.writingMode,tn,Vr,Le);if(nn)return nn}var Kn=gs(Ge*H.getoffsetX(f.glyphStartIndex),Ie,ze,h,ge,_e,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,te,P,ye);if(!Kn)return{notEnoughRoom:!0};Oe=[Kn]}for(var br=0,nr=Oe;br<nr.length;br+=1){var Hn=nr[br];m.addDynamicAttributes(ae,Hn.point,Hn.angle)}return{}}function jr(f,p,h,v,S){var P=Mn(f.add(f.sub(p)._unit()),S).point,M=h.sub(P);return h.add(M._mult(v/M.mag()))}function gs(f,p,h,v,S,P,M,H,te,ae,ge,_e){var ye=v?f-p:f+p,Le=ye>0?1:-1,Oe=0;v&&(Le*=-1,Oe=Math.PI),Le<0&&(Oe+=Math.PI);for(var Ge=Le>0?H+M:H+M+1,Ie=S,ze=S,qe=0,ot=0,yt=Math.abs(ye),mt=[];qe+ot<=yt;){if((Ge+=Le)<H||Ge>=te)return null;if(ze=Ie,mt.push(Ie),void 0===(Ie=_e[Ge])){var _t=new m.Point(ae.getx(Ge),ae.gety(Ge)),Pt=Mn(_t,ge);if(Pt.signedDistanceFromCamera>0)Ie=_e[Ge]=Pt.point;else{var $t=Ge-Le;Ie=jr(0===qe?P:new m.Point(ae.getx($t),ae.gety($t)),_t,ze,yt-qe+1,ge)}}qe+=ot,ot=ze.dist(Ie)}var kt=(yt-qe)/ot,tn=Ie.sub(ze),wn=tn.mult(kt)._add(ze);wn._add(tn._unit()._perp()._mult(h*Le));var An=Oe+Math.atan2(Ie.y-ze.y,Ie.x-ze.x);return mt.push(wn),{point:wn,angle:An,path:mt}}Xr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Xr.prototype.insert=function(f,p,h,v,S){this._forEachCell(p,h,v,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(f),this.bboxes.push(p),this.bboxes.push(h),this.bboxes.push(v),this.bboxes.push(S)},Xr.prototype.insertCircle=function(f,p,h,v){this._forEachCell(p-v,h-v,p+v,h+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(f),this.circles.push(p),this.circles.push(h),this.circles.push(v)},Xr.prototype._insertBoxCell=function(f,p,h,v,S,P){this.boxCells[S].push(P)},Xr.prototype._insertCircleCell=function(f,p,h,v,S,P){this.circleCells[S].push(P)},Xr.prototype._query=function(f,p,h,v,S,P){if(h<0||f>this.width||v<0||p>this.height)return!S&&[];var M=[];if(f<=0&&p<=0&&this.width<=h&&this.height<=v){if(S)return!0;for(var H=0;H<this.boxKeys.length;H++)M.push({key:this.boxKeys[H],x1:this.bboxes[4*H],y1:this.bboxes[4*H+1],x2:this.bboxes[4*H+2],y2:this.bboxes[4*H+3]});for(var te=0;te<this.circleKeys.length;te++){var ae=this.circles[3*te],ge=this.circles[3*te+1],_e=this.circles[3*te+2];M.push({key:this.circleKeys[te],x1:ae-_e,y1:ge-_e,x2:ae+_e,y2:ge+_e})}return P?M.filter(P):M}return this._forEachCell(f,p,h,v,this._queryCell,M,{hitTest:S,seenUids:{box:{},circle:{}}},P),S?M.length>0:M},Xr.prototype._queryCircle=function(f,p,h,v,S){var P=f-h,M=f+h,H=p-h,te=p+h;if(M<0||P>this.width||te<0||H>this.height)return!v&&[];var ae=[];return this._forEachCell(P,H,M,te,this._queryCellCircle,ae,{hitTest:v,circle:{x:f,y:p,radius:h},seenUids:{box:{},circle:{}}},S),v?ae.length>0:ae},Xr.prototype.query=function(f,p,h,v,S){return this._query(f,p,h,v,!1,S)},Xr.prototype.hitTest=function(f,p,h,v,S){return this._query(f,p,h,v,!0,S)},Xr.prototype.hitTestCircle=function(f,p,h,v){return this._queryCircle(f,p,h,!0,v)},Xr.prototype._queryCell=function(f,p,h,v,S,P,M,H){var te=M.seenUids,ae=this.boxCells[S];if(null!==ae)for(var ge=this.bboxes,_e=0,ye=ae;_e<ye.length;_e+=1){var Le=ye[_e];if(!te.box[Le]){te.box[Le]=!0;var Oe=4*Le;if(f<=ge[Oe+2]&&p<=ge[Oe+3]&&h>=ge[Oe+0]&&v>=ge[Oe+1]&&(!H||H(this.boxKeys[Le]))){if(M.hitTest)return P.push(!0),!0;P.push({key:this.boxKeys[Le],x1:ge[Oe],y1:ge[Oe+1],x2:ge[Oe+2],y2:ge[Oe+3]})}}}var Ge=this.circleCells[S];if(null!==Ge)for(var Ie=this.circles,ze=0,qe=Ge;ze<qe.length;ze+=1){var ot=qe[ze];if(!te.circle[ot]){te.circle[ot]=!0;var yt=3*ot;if(this._circleAndRectCollide(Ie[yt],Ie[yt+1],Ie[yt+2],f,p,h,v)&&(!H||H(this.circleKeys[ot]))){if(M.hitTest)return P.push(!0),!0;var mt=Ie[yt],_t=Ie[yt+1],Pt=Ie[yt+2];P.push({key:this.circleKeys[ot],x1:mt-Pt,y1:_t-Pt,x2:mt+Pt,y2:_t+Pt})}}}},Xr.prototype._queryCellCircle=function(f,p,h,v,S,P,M,H){var te=M.circle,ae=M.seenUids,ge=this.boxCells[S];if(null!==ge)for(var _e=this.bboxes,ye=0,Le=ge;ye<Le.length;ye+=1){var Oe=Le[ye];if(!ae.box[Oe]){ae.box[Oe]=!0;var Ge=4*Oe;if(this._circleAndRectCollide(te.x,te.y,te.radius,_e[Ge+0],_e[Ge+1],_e[Ge+2],_e[Ge+3])&&(!H||H(this.boxKeys[Oe])))return P.push(!0),!0}}var Ie=this.circleCells[S];if(null!==Ie)for(var ze=this.circles,qe=0,ot=Ie;qe<ot.length;qe+=1){var yt=ot[qe];if(!ae.circle[yt]){ae.circle[yt]=!0;var mt=3*yt;if(this._circlesCollide(ze[mt],ze[mt+1],ze[mt+2],te.x,te.y,te.radius)&&(!H||H(this.circleKeys[yt])))return P.push(!0),!0}}},Xr.prototype._forEachCell=function(f,p,h,v,S,P,M,H){for(var te=this._convertToXCellCoord(f),ae=this._convertToYCellCoord(p),ge=this._convertToXCellCoord(h),_e=this._convertToYCellCoord(v),ye=te;ye<=ge;ye++)for(var Le=ae;Le<=_e;Le++)if(S.call(this,f,p,h,v,this.xCellCount*Le+ye,P,M,H))return},Xr.prototype._convertToXCellCoord=function(f){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(f*this.xScale)))},Xr.prototype._convertToYCellCoord=function(f){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(f*this.yScale)))},Xr.prototype._circlesCollide=function(f,p,h,v,S,P){var M=v-f,H=S-p,te=h+P;return te*te>M*M+H*H},Xr.prototype._circleAndRectCollide=function(f,p,h,v,S,P,M){var H=(P-v)/2,te=Math.abs(f-(v+H));if(te>H+h)return!1;var ae=(M-S)/2,ge=Math.abs(p-(S+ae));if(ge>ae+h)return!1;if(te<=H||ge<=ae)return!0;var _e=te-H,ye=ge-ae;return _e*_e+ye*ye<=h*h};var Ui=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function La(f,p){for(var h=0;h<f;h++){var v=p.length;p.resize(v+4),p.float32.set(Ui,3*v)}}function Tn(f,p,h){var v=p[0],S=p[1];return f[0]=h[0]*v+h[4]*S+h[12],f[1]=h[1]*v+h[5]*S+h[13],f[3]=h[3]*v+h[7]*S+h[15],f}var ri=function(f,p,h){void 0===p&&(p=new Xr(f.width+200,f.height+200,25)),void 0===h&&(h=new Xr(f.width+200,f.height+200,25)),this.transform=f,this.grid=p,this.ignoredGrid=h,this.pitchfactor=Math.cos(f._pitch)*f.cameraToCenterDistance,this.screenRightBoundary=f.width+100,this.screenBottomBoundary=f.height+100,this.gridRightBoundary=f.width+200,this.gridBottomBoundary=f.height+200};function Wo(f,p,h){return p*(m.EXTENT/(f.tileSize*Math.pow(2,h-f.tileID.overscaledZ)))}ri.prototype.placeCollisionBox=function(f,p,h,v,S){var P=this.projectAndGetPerspectiveRatio(v,f.anchorPointX,f.anchorPointY),M=h*P.perspectiveRatio,H=f.x1*M+P.point.x,te=f.y1*M+P.point.y,ae=f.x2*M+P.point.x,ge=f.y2*M+P.point.y;return!this.isInsideGrid(H,te,ae,ge)||!p&&this.grid.hitTest(H,te,ae,ge,S)?{box:[],offscreen:!1}:{box:[H,te,ae,ge],offscreen:this.isOffscreen(H,te,ae,ge)}},ri.prototype.placeCollisionCircles=function(f,p,h,v,S,P,M,H,te,ae,ge,_e,ye){var Le=[],Oe=new m.Point(p.anchorX,p.anchorY),Ge=Mn(Oe,P),Ie=Oi(this.transform.cameraToCenterDistance,Ge.signedDistanceFromCamera),ze=(ae?S/Ie:S*Ie)/m.ONE_EM,qe=Mn(Oe,M).point,ot=qo(ze,v,p.lineOffsetX*ze,p.lineOffsetY*ze,!1,qe,Oe,p,h,M,{}),yt=!1,mt=!1,_t=!0;if(ot){for(var Pt=.5*_e*Ie+ye,$t=new m.Point(-100,-100),kt=new m.Point(this.screenRightBoundary,this.screenBottomBoundary),tn=new Ir,wn=ot.first,An=ot.last,Cn=[],Vr=wn.path.length-1;Vr>=1;Vr--)Cn.push(wn.path[Vr]);for(var nn=1;nn<An.path.length;nn++)Cn.push(An.path[nn]);var Kn=2.5*Pt;if(H){var br=Cn.map(function(os){return Mn(os,H)});Cn=br.some(function(os){return os.signedDistanceFromCamera<=0})?[]:br.map(function(os){return os.point})}var nr=[];if(Cn.length>0){for(var Hn=Cn[0].clone(),$n=Cn[0].clone(),qn=1;qn<Cn.length;qn++)Hn.x=Math.min(Hn.x,Cn[qn].x),Hn.y=Math.min(Hn.y,Cn[qn].y),$n.x=Math.max($n.x,Cn[qn].x),$n.y=Math.max($n.y,Cn[qn].y);nr=Hn.x>=$t.x&&$n.x<=kt.x&&Hn.y>=$t.y&&$n.y<=kt.y?[Cn]:$n.x<$t.x||Hn.x>kt.x||$n.y<$t.y||Hn.y>kt.y?[]:m.clipLine([Cn],$t.x,$t.y,kt.x,kt.y)}for(var Ln=0,Di=nr;Ln<Di.length;Ln+=1){var Io;tn.reset(Di[Ln],.25*Pt),Io=tn.length<=.5*Pt?1:Math.ceil(tn.paddedLength/Kn)+1;for(var ta=0;ta<Io;ta++){var Lo=ta/Math.max(Io-1,1),No=tn.lerp(Lo),Zi=No.x+100,fa=No.y+100;Le.push(Zi,fa,Pt,0);var lu=Zi-Pt,ko=fa-Pt,Ua=Zi+Pt,is=fa+Pt;if(_t=_t&&this.isOffscreen(lu,ko,Ua,is),mt=mt||this.isInsideGrid(lu,ko,Ua,is),!f&&this.grid.hitTestCircle(Zi,fa,Pt,ge)&&(yt=!0,!te))return{circles:[],offscreen:!1,collisionDetected:yt}}}}return{circles:!te&&yt||!mt?[]:Le,offscreen:_t,collisionDetected:yt}},ri.prototype.queryRenderedSymbols=function(f){if(0===f.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var p=[],h=1/0,v=1/0,S=-1/0,P=-1/0,M=0,H=f;M<H.length;M+=1){var te=H[M],ae=new m.Point(te.x+100,te.y+100);h=Math.min(h,ae.x),v=Math.min(v,ae.y),S=Math.max(S,ae.x),P=Math.max(P,ae.y),p.push(ae)}for(var ge={},_e={},ye=0,Le=this.grid.query(h,v,S,P).concat(this.ignoredGrid.query(h,v,S,P));ye<Le.length;ye+=1){var Oe=Le[ye],Ge=Oe.key;if(void 0===ge[Ge.bucketInstanceId]&&(ge[Ge.bucketInstanceId]={}),!ge[Ge.bucketInstanceId][Ge.featureIndex]){var Ie=[new m.Point(Oe.x1,Oe.y1),new m.Point(Oe.x2,Oe.y1),new m.Point(Oe.x2,Oe.y2),new m.Point(Oe.x1,Oe.y2)];m.polygonIntersectsPolygon(p,Ie)&&(ge[Ge.bucketInstanceId][Ge.featureIndex]=!0,void 0===_e[Ge.bucketInstanceId]&&(_e[Ge.bucketInstanceId]=[]),_e[Ge.bucketInstanceId].push(Ge.featureIndex))}}return _e},ri.prototype.insertCollisionBox=function(f,p,h,v,S){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:h,featureIndex:v,collisionGroupID:S},f[0],f[1],f[2],f[3])},ri.prototype.insertCollisionCircles=function(f,p,h,v,S){for(var P=p?this.ignoredGrid:this.grid,M={bucketInstanceId:h,featureIndex:v,collisionGroupID:S},H=0;H<f.length;H+=4)P.insertCircle(M,f[H],f[H+1],f[H+2])},ri.prototype.projectAndGetPerspectiveRatio=function(f,p,h){var v=[p,h,0,1];return Tn(v,v,f),{point:new m.Point((v[0]/v[3]+1)/2*this.transform.width+100,(-v[1]/v[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/v[3]*.5}},ri.prototype.isOffscreen=function(f,p,h,v){return h<100||f>=this.screenRightBoundary||v<100||p>this.screenBottomBoundary},ri.prototype.isInsideGrid=function(f,p,h,v){return h>=0&&f<this.gridRightBoundary&&v>=0&&p<this.gridBottomBoundary},ri.prototype.getViewportMatrix=function(){var f=m.identity([]);return m.translate(f,f,[-100,-100,0]),f};var un=function(f,p,h,v){this.opacity=f?Math.max(0,Math.min(1,f.opacity+(f.placed?p:-p))):v&&h?1:0,this.placed=h};un.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Ro=function(f,p,h,v,S){this.text=new un(f?f.text:null,p,h,S),this.icon=new un(f?f.icon:null,p,v,S)};Ro.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Wn=function(f,p,h){this.text=f,this.icon=p,this.skipFade=h},Qr=function(){this.invProjMatrix=m.create(),this.viewportMatrix=m.create(),this.circles=[]},L=function(f,p,h,v,S){this.bucketInstanceId=f,this.featureIndex=p,this.sourceLayerIndex=h,this.bucketIndex=v,this.tileID=S},K=function(f){this.crossSourceCollisions=f,this.maxGroupID=0,this.collisionGroups={}};function de(f,p,h,v,S){var P=m.getAnchorAlignment(f),M=-(P.horizontalAlign-.5)*p,H=-(P.verticalAlign-.5)*h,te=m.evaluateVariableOffset(f,v);return new m.Point(M+te[0]*S,H+te[1]*S)}function Ve(f,p,h,v,S,P){var M=f.x1,H=f.x2,te=f.y1,ae=f.y2,ge=f.anchorPointX,_e=f.anchorPointY,ye=new m.Point(p,h);return v&&ye._rotate(S?P:-P),{x1:M+ye.x,y1:te+ye.y,x2:H+ye.x,y2:ae+ye.y,anchorPointX:ge,anchorPointY:_e}}K.prototype.get=function(f){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[f]){var p=++this.maxGroupID;this.collisionGroups[f]={ID:p,predicate:function(h){return h.collisionGroupID===p}}}return this.collisionGroups[f]};var Qe=function(f,p,h,v){this.transform=f.clone(),this.collisionIndex=new ri(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new K(h),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}};function tt(f,p,h,v,S){f.emplaceBack(p?1:0,h?1:0,v||0,S||0),f.emplaceBack(p?1:0,h?1:0,v||0,S||0),f.emplaceBack(p?1:0,h?1:0,v||0,S||0),f.emplaceBack(p?1:0,h?1:0,v||0,S||0)}Qe.prototype.getBucketParts=function(f,p,h,v){var S=h.getBucket(p),P=h.latestFeatureIndex;if(S&&P&&p.id===S.layerIds[0]){var M=h.collisionBoxArray,H=S.layers[0].layout,te=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),ae=h.tileSize/m.EXTENT,ge=this.transform.calculatePosMatrix(h.tileID.toUnwrapped()),_e="map"===H.get("text-pitch-alignment"),ye="map"===H.get("text-rotation-alignment"),Le=Wo(h,1,this.transform.zoom),Oe=xi(ge,_e,ye,this.transform,Le),Ge=null;if(_e){var Ie=Hr(ge,_e,ye,this.transform,Le);Ge=m.multiply([],this.transform.labelPlaneMatrix,Ie)}this.retainedQueryData[S.bucketInstanceId]=new L(S.bucketInstanceId,P,S.sourceLayerIndex,S.index,h.tileID);var ze={bucket:S,layout:H,posMatrix:ge,textLabelPlaneMatrix:Oe,labelToScreenMatrix:Ge,scale:te,textPixelRatio:ae,holdingForFade:h.holdingForFade(),collisionBoxArray:M,partiallyEvaluatedTextSize:m.evaluateSizeForZoom(S.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(S.sourceID)};if(v)for(var qe=0,ot=S.sortKeyRanges;qe<ot.length;qe+=1){var yt=ot[qe];f.push({sortKey:yt.sortKey,symbolInstanceStart:yt.symbolInstanceStart,symbolInstanceEnd:yt.symbolInstanceEnd,parameters:ze})}else f.push({symbolInstanceStart:0,symbolInstanceEnd:S.symbolInstances.length,parameters:ze})}},Qe.prototype.attemptAnchorPlacement=function(f,p,h,v,S,P,M,H,te,ae,ge,_e,ye,Le,Oe){var Ge,Ie=[_e.textOffset0,_e.textOffset1],ze=de(f,h,v,Ie,S),qe=this.collisionIndex.placeCollisionBox(Ve(p,ze.x,ze.y,P,M,this.transform.angle),ge,H,te,ae.predicate);if(!Oe||0!==this.collisionIndex.placeCollisionBox(Ve(Oe,ze.x,ze.y,P,M,this.transform.angle),ge,H,te,ae.predicate).box.length)return qe.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[_e.crossTileID]&&this.prevPlacement.placements[_e.crossTileID]&&this.prevPlacement.placements[_e.crossTileID].text&&(Ge=this.prevPlacement.variableOffsets[_e.crossTileID].anchor),this.variableOffsets[_e.crossTileID]={textOffset:Ie,width:h,height:v,anchor:f,textBoxScale:S,prevAnchor:Ge},this.markUsedJustification(ye,f,_e,Le),ye.allowVerticalPlacement&&(this.markUsedOrientation(ye,Le,_e),this.placedOrientations[_e.crossTileID]=Le),{shift:ze,placedGlyphBoxes:qe}):void 0},Qe.prototype.placeLayerBucketPart=function(f,p,h){var v=this,S=f.parameters,P=S.bucket,M=S.layout,H=S.posMatrix,te=S.textLabelPlaneMatrix,ae=S.labelToScreenMatrix,ge=S.textPixelRatio,_e=S.holdingForFade,ye=S.collisionBoxArray,Le=S.partiallyEvaluatedTextSize,Oe=S.collisionGroup,Ge=M.get("text-optional"),Ie=M.get("icon-optional"),ze=M.get("text-allow-overlap"),qe=M.get("icon-allow-overlap"),ot="map"===M.get("text-rotation-alignment"),yt="map"===M.get("text-pitch-alignment"),mt="none"!==M.get("icon-text-fit"),_t="viewport-y"===M.get("symbol-z-order"),Pt=ze&&(qe||!P.hasIconData()||Ie),$t=qe&&(ze||!P.hasTextData()||Ge);!P.collisionArrays&&ye&&P.deserializeCollisionBoxes(ye);var kt=function(nn,Kn){if(!p[nn.crossTileID])if(_e)v.placements[nn.crossTileID]=new Wn(!1,!1,!1);else{var br,nr=!1,Hn=!1,$n=!0,qn=null,Ln={box:null,offscreen:null},Di={box:null,offscreen:null},Io=null,ta=null,Lo=0,No=0,Zi=0;Kn.textFeatureIndex?Lo=Kn.textFeatureIndex:nn.useRuntimeCollisionCircles&&(Lo=nn.featureIndex),Kn.verticalTextFeatureIndex&&(No=Kn.verticalTextFeatureIndex);var fa=Kn.textBox;if(fa){var lu=function(go){var io=m.WritingMode.horizontal;if(P.allowVerticalPlacement&&!go&&v.prevPlacement){var Ea=v.prevPlacement.placedOrientations[nn.crossTileID];Ea&&(v.placedOrientations[nn.crossTileID]=Ea,v.markUsedOrientation(P,io=Ea,nn))}return io},ko=function(go,io){if(P.allowVerticalPlacement&&nn.numVerticalGlyphVertices>0&&Kn.verticalTextBox)for(var Ea=0,uc=P.writingModes;Ea<uc.length&&(uc[Ea]===m.WritingMode.vertical?(Ln=io(),Di=Ln):Ln=go(),!(Ln&&Ln.box&&Ln.box.length));Ea+=1);else Ln=go()};if(M.get("text-variable-anchor")){var Ua=M.get("text-variable-anchor");if(v.prevPlacement&&v.prevPlacement.variableOffsets[nn.crossTileID]){var is=v.prevPlacement.variableOffsets[nn.crossTileID];Ua.indexOf(is.anchor)>0&&(Ua=Ua.filter(function(go){return go!==is.anchor})).unshift(is.anchor)}var os=function(go,io,Ea){for(var uc=go.x2-go.x1,jc=go.y2-go.y1,lm=nn.textBoxScale,Ol=mt&&!qe?io:null,sl={box:[],offscreen:!1},Mh=ze?2*Ua.length:Ua.length,lc=0;lc<Mh;++lc){var cc=v.attemptAnchorPlacement(Ua[lc%Ua.length],go,uc,jc,lm,ot,yt,ge,H,Oe,lc>=Ua.length,nn,P,Ea,Ol);if(cc&&(sl=cc.placedGlyphBoxes)&&sl.box&&sl.box.length){nr=!0,qn=cc.shift;break}}return sl};ko(function(){return os(fa,Kn.iconBox,m.WritingMode.horizontal)},function(){var go=Kn.verticalTextBox;return P.allowVerticalPlacement&&!(Ln&&Ln.box&&Ln.box.length)&&nn.numVerticalGlyphVertices>0&&go?os(go,Kn.verticalIconBox,m.WritingMode.vertical):{box:null,offscreen:null}}),Ln&&(nr=Ln.box,$n=Ln.offscreen);var sc=lu(Ln&&Ln.box);if(!nr&&v.prevPlacement){var Rl=v.prevPlacement.variableOffsets[nn.crossTileID];Rl&&(v.variableOffsets[nn.crossTileID]=Rl,v.markUsedJustification(P,Rl.anchor,nn,sc))}}else{var Ml=function(go,io){var Ea=v.collisionIndex.placeCollisionBox(go,ze,ge,H,Oe.predicate);return Ea&&Ea.box&&Ea.box.length&&(v.markUsedOrientation(P,io,nn),v.placedOrientations[nn.crossTileID]=io),Ea};ko(function(){return Ml(fa,m.WritingMode.horizontal)},function(){var go=Kn.verticalTextBox;return P.allowVerticalPlacement&&nn.numVerticalGlyphVertices>0&&go?Ml(go,m.WritingMode.vertical):{box:null,offscreen:null}}),lu(Ln&&Ln.box&&Ln.box.length)}}if(nr=(br=Ln)&&br.box&&br.box.length>0,$n=br&&br.offscreen,nn.useRuntimeCollisionCircles){var al=P.text.placedSymbolArray.get(nn.centerJustifiedTextSymbolIndex),Bc=m.evaluateSizeForFeature(P.textSizeData,Le,al),as=M.get("text-padding");Io=v.collisionIndex.placeCollisionCircles(ze,al,P.lineVertexArray,P.glyphOffsetArray,Bc,H,te,ae,h,yt,Oe.predicate,nn.collisionCircleDiameter,as),nr=ze||Io.circles.length>0&&!Io.collisionDetected,$n=$n&&Io.offscreen}if(Kn.iconFeatureIndex&&(Zi=Kn.iconFeatureIndex),Kn.iconBox){var Du=function(go){var io=mt&&qn?Ve(go,qn.x,qn.y,ot,yt,v.transform.angle):go;return v.collisionIndex.placeCollisionBox(io,qe,ge,H,Oe.predicate)};Hn=Di&&Di.box&&Di.box.length&&Kn.verticalIconBox?(ta=Du(Kn.verticalIconBox)).box.length>0:(ta=Du(Kn.iconBox)).box.length>0,$n=$n&&ta.offscreen}var Au=Ge||0===nn.numHorizontalGlyphVertices&&0===nn.numVerticalGlyphVertices,mo=Ie||0===nn.numIconVertices;if(Au||mo?mo?Au||(Hn=Hn&&nr):nr=Hn&&nr:Hn=nr=Hn&&nr,nr&&br&&br.box&&v.collisionIndex.insertCollisionBox(br.box,M.get("text-ignore-placement"),P.bucketInstanceId,Di&&Di.box&&No?No:Lo,Oe.ID),Hn&&ta&&v.collisionIndex.insertCollisionBox(ta.box,M.get("icon-ignore-placement"),P.bucketInstanceId,Zi,Oe.ID),Io&&(nr&&v.collisionIndex.insertCollisionCircles(Io.circles,M.get("text-ignore-placement"),P.bucketInstanceId,Lo,Oe.ID),h)){var cu=P.bucketInstanceId,Ts=v.collisionCircleArrays[cu];void 0===Ts&&(Ts=v.collisionCircleArrays[cu]=new Qr);for(var Ru=0;Ru<Io.circles.length;Ru+=4)Ts.circles.push(Io.circles[Ru+0]),Ts.circles.push(Io.circles[Ru+1]),Ts.circles.push(Io.circles[Ru+2]),Ts.circles.push(Io.collisionDetected?1:0)}v.placements[nn.crossTileID]=new Wn(nr||Pt,Hn||$t,$n||P.justReloaded),p[nn.crossTileID]=!0}};if(_t)for(var tn=P.getSortedSymbolIndexes(this.transform.angle),wn=tn.length-1;wn>=0;--wn){var An=tn[wn];kt(P.symbolInstances.get(An),P.collisionArrays[An])}else for(var Cn=f.symbolInstanceStart;Cn<f.symbolInstanceEnd;Cn++)kt(P.symbolInstances.get(Cn),P.collisionArrays[Cn]);if(h&&P.bucketInstanceId in this.collisionCircleArrays){var Vr=this.collisionCircleArrays[P.bucketInstanceId];m.invert(Vr.invProjMatrix,H),Vr.viewportMatrix=this.collisionIndex.getViewportMatrix()}P.justReloaded=!1},Qe.prototype.markUsedJustification=function(f,p,h,v){var S;S=v===m.WritingMode.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[m.getAnchorJustification(p)];for(var P=0,M=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];P<M.length;P+=1){var H=M[P];H>=0&&(f.text.placedSymbolArray.get(H).crossTileID=S>=0&&H!==S?0:h.crossTileID)}},Qe.prototype.markUsedOrientation=function(f,p,h){for(var v=p===m.WritingMode.horizontal||p===m.WritingMode.horizontalOnly?p:0,S=p===m.WritingMode.vertical?p:0,P=0,M=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];P<M.length;P+=1)f.text.placedSymbolArray.get(M[P]).placedOrientation=v;h.verticalPlacedTextSymbolIndex&&(f.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=S)},Qe.prototype.commit=function(f){this.commitTime=f,this.zoomAtLastRecencyCheck=this.transform.zoom;var p=this.prevPlacement,h=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;var v=p?p.symbolFadeChange(f):1,S=p?p.opacities:{},P=p?p.variableOffsets:{},M=p?p.placedOrientations:{};for(var H in this.placements){var te=this.placements[H],ae=S[H];ae?(this.opacities[H]=new Ro(ae,v,te.text,te.icon),h=h||te.text!==ae.text.placed||te.icon!==ae.icon.placed):(this.opacities[H]=new Ro(null,v,te.text,te.icon,te.skipFade),h=h||te.text||te.icon)}for(var ge in S){var _e=S[ge];if(!this.opacities[ge]){var ye=new Ro(_e,v,!1,!1);ye.isHidden()||(this.opacities[ge]=ye,h=h||_e.text.placed||_e.icon.placed)}}for(var Le in P)this.variableOffsets[Le]||!this.opacities[Le]||this.opacities[Le].isHidden()||(this.variableOffsets[Le]=P[Le]);for(var Oe in M)this.placedOrientations[Oe]||!this.opacities[Oe]||this.opacities[Oe].isHidden()||(this.placedOrientations[Oe]=M[Oe]);h?this.lastPlacementChangeTime=f:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:f)},Qe.prototype.updateLayerOpacities=function(f,p){for(var h={},v=0,S=p;v<S.length;v+=1){var P=S[v],M=P.getBucket(f);M&&P.latestFeatureIndex&&f.id===M.layerIds[0]&&this.updateBucketOpacities(M,h,P.collisionBoxArray)}},Qe.prototype.updateBucketOpacities=function(f,p,h){var v=this;f.hasTextData()&&f.text.opacityVertexArray.clear(),f.hasIconData()&&f.icon.opacityVertexArray.clear(),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexArray.clear(),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexArray.clear();var S=f.layers[0].layout,P=new Ro(null,0,!1,!1,!0),M=S.get("text-allow-overlap"),H=S.get("icon-allow-overlap"),te=S.get("text-variable-anchor"),ae="map"===S.get("text-rotation-alignment"),ge="map"===S.get("text-pitch-alignment"),_e="none"!==S.get("icon-text-fit"),ye=new Ro(null,0,M&&(H||!f.hasIconData()||S.get("icon-optional")),H&&(M||!f.hasTextData()||S.get("text-optional")),!0);!f.collisionArrays&&h&&(f.hasIconCollisionBoxData()||f.hasTextCollisionBoxData())&&f.deserializeCollisionBoxes(h);for(var Le=function(ze,qe,ot){for(var yt=0;yt<qe/4;yt++)ze.opacityVertexArray.emplaceBack(ot)},Oe=function(ze){var qe=f.symbolInstances.get(ze),ot=qe.numHorizontalGlyphVertices,yt=qe.numVerticalGlyphVertices,mt=qe.crossTileID,_t=v.opacities[mt];p[mt]?_t=P:_t||(v.opacities[mt]=_t=ye),p[mt]=!0;var Pt=qe.numIconVertices>0,$t=v.placedOrientations[qe.crossTileID],kt=$t===m.WritingMode.vertical,tn=$t===m.WritingMode.horizontal||$t===m.WritingMode.horizontalOnly;if(ot>0||yt>0){var wn=Nn(_t.text);Le(f.text,ot,kt?kn:wn),Le(f.text,yt,tn?kn:wn);var An=_t.text.isHidden();[qe.rightJustifiedTextSymbolIndex,qe.centerJustifiedTextSymbolIndex,qe.leftJustifiedTextSymbolIndex].forEach(function(Ln){Ln>=0&&(f.text.placedSymbolArray.get(Ln).hidden=An||kt?1:0)}),qe.verticalPlacedTextSymbolIndex>=0&&(f.text.placedSymbolArray.get(qe.verticalPlacedTextSymbolIndex).hidden=An||tn?1:0);var Cn=v.variableOffsets[qe.crossTileID];Cn&&v.markUsedJustification(f,Cn.anchor,qe,$t);var Vr=v.placedOrientations[qe.crossTileID];Vr&&(v.markUsedJustification(f,"left",qe,Vr),v.markUsedOrientation(f,Vr,qe))}if(Pt){var nn=Nn(_t.icon),Kn=!(_e&&qe.verticalPlacedIconSymbolIndex&&kt);qe.placedIconSymbolIndex>=0&&(Le(f.icon,qe.numIconVertices,Kn?nn:kn),f.icon.placedSymbolArray.get(qe.placedIconSymbolIndex).hidden=_t.icon.isHidden()),qe.verticalPlacedIconSymbolIndex>=0&&(Le(f.icon,qe.numVerticalIconVertices,Kn?kn:nn),f.icon.placedSymbolArray.get(qe.verticalPlacedIconSymbolIndex).hidden=_t.icon.isHidden())}if(f.hasIconCollisionBoxData()||f.hasTextCollisionBoxData()){var br=f.collisionArrays[ze];if(br){var nr=new m.Point(0,0);if(br.textBox||br.verticalTextBox){var Hn=!0;if(te){var $n=v.variableOffsets[mt];$n?(nr=de($n.anchor,$n.width,$n.height,$n.textOffset,$n.textBoxScale),ae&&nr._rotate(ge?v.transform.angle:-v.transform.angle)):Hn=!1}br.textBox&&tt(f.textCollisionBox.collisionVertexArray,_t.text.placed,!Hn||kt,nr.x,nr.y),br.verticalTextBox&&tt(f.textCollisionBox.collisionVertexArray,_t.text.placed,!Hn||tn,nr.x,nr.y)}var qn=Boolean(!tn&&br.verticalIconBox);br.iconBox&&tt(f.iconCollisionBox.collisionVertexArray,_t.icon.placed,qn,_e?nr.x:0,_e?nr.y:0),br.verticalIconBox&&tt(f.iconCollisionBox.collisionVertexArray,_t.icon.placed,!qn,_e?nr.x:0,_e?nr.y:0)}}},Ge=0;Ge<f.symbolInstances.length;Ge++)Oe(Ge);if(f.sortFeatures(this.transform.angle),this.retainedQueryData[f.bucketInstanceId]&&(this.retainedQueryData[f.bucketInstanceId].featureSortOrder=f.featureSortOrder),f.hasTextData()&&f.text.opacityVertexBuffer&&f.text.opacityVertexBuffer.updateData(f.text.opacityVertexArray),f.hasIconData()&&f.icon.opacityVertexBuffer&&f.icon.opacityVertexBuffer.updateData(f.icon.opacityVertexArray),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexBuffer&&f.iconCollisionBox.collisionVertexBuffer.updateData(f.iconCollisionBox.collisionVertexArray),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexBuffer&&f.textCollisionBox.collisionVertexBuffer.updateData(f.textCollisionBox.collisionVertexArray),f.bucketInstanceId in this.collisionCircleArrays){var Ie=this.collisionCircleArrays[f.bucketInstanceId];f.placementInvProjMatrix=Ie.invProjMatrix,f.placementViewportMatrix=Ie.viewportMatrix,f.collisionCircleArray=Ie.circles,delete this.collisionCircleArrays[f.bucketInstanceId]}},Qe.prototype.symbolFadeChange=function(f){return 0===this.fadeDuration?1:(f-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Qe.prototype.zoomAdjustment=function(f){return Math.max(0,(this.transform.zoom-f)/1.5)},Qe.prototype.hasTransitions=function(f){return this.stale||f-this.lastPlacementChangeTime<this.fadeDuration},Qe.prototype.stillRecent=function(f,p){var h=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*h>f},Qe.prototype.setStale=function(){this.stale=!0};var dt=Math.pow(2,25),Vt=Math.pow(2,24),Rt=Math.pow(2,17),cn=Math.pow(2,16),pt=Math.pow(2,9),rn=Math.pow(2,8),gn=Math.pow(2,1);function Nn(f){if(0===f.opacity&&!f.placed)return 0;if(1===f.opacity&&f.placed)return 4294967295;var p=f.placed?1:0,h=Math.floor(127*f.opacity);return h*dt+p*Vt+h*Rt+p*cn+h*pt+p*rn+h*gn+p}var kn=0,Li=function(f){this._sortAcrossTiles="viewport-y"!==f.layout.get("symbol-z-order")&&!f.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Li.prototype.continuePlacement=function(f,p,h,v,S){for(var P=this._bucketParts;this._currentTileIndex<f.length;)if(p.getBucketParts(P,v,f[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort(function(M,H){return M.sortKey-H.sortKey}));this._currentPartIndex<P.length;)if(p.placeLayerBucketPart(P[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,S())return!0;return!1};var At=function(f,p,h,v,S,P,M){this.placement=new Qe(f,S,P,M),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=h,this._showCollisionBoxes=v,this._done=!1};At.prototype.isDone=function(){return this._done},At.prototype.continuePlacement=function(f,p,h){for(var v=this,S=m.browser.now(),P=function(){var te=m.browser.now()-S;return!v._forceFullPlacement&&te>2};this._currentPlacementIndex>=0;){var M=p[f[this._currentPlacementIndex]],H=this.placement.collisionIndex.transform.zoom;if("symbol"===M.type&&(!M.minzoom||M.minzoom<=H)&&(!M.maxzoom||M.maxzoom>H)){if(this._inProgressLayer||(this._inProgressLayer=new Li(M)),this._inProgressLayer.continuePlacement(h[M.source],this.placement,this._showCollisionBoxes,M,P))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},At.prototype.commit=function(f){return this.placement.commit(f),this.placement};var Qt=512/m.EXTENT/2,On=function(f,p,h){this.tileID=f,this.indexedSymbolInstances={},this.bucketInstanceId=h;for(var v=0;v<p.length;v++){var S=p.get(v),P=S.key;this.indexedSymbolInstances[P]||(this.indexedSymbolInstances[P]=[]),this.indexedSymbolInstances[P].push({crossTileID:S.crossTileID,coord:this.getScaledCoordinates(S,f)})}};On.prototype.getScaledCoordinates=function(f,p){var h=Qt/Math.pow(2,p.canonical.z-this.tileID.canonical.z);return{x:Math.floor((p.canonical.x*m.EXTENT+f.anchorX)*h),y:Math.floor((p.canonical.y*m.EXTENT+f.anchorY)*h)}},On.prototype.findMatches=function(f,p,h){for(var v=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z),S=0;S<f.length;S++){var P=f.get(S);if(!P.crossTileID){var M=this.indexedSymbolInstances[P.key];if(M)for(var H=this.getScaledCoordinates(P,p),te=0,ae=M;te<ae.length;te+=1){var ge=ae[te];if(Math.abs(ge.coord.x-H.x)<=v&&Math.abs(ge.coord.y-H.y)<=v&&!h[ge.crossTileID]){h[ge.crossTileID]=!0,P.crossTileID=ge.crossTileID;break}}}}};var qr=function(){this.maxCrossTileID=0};qr.prototype.generate=function(){return++this.maxCrossTileID};var zr=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};zr.prototype.handleWrapJump=function(f){var p=Math.round((f-this.lng)/360);if(0!==p)for(var h in this.indexes){var v=this.indexes[h],S={};for(var P in v){var M=v[P];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+p),S[M.tileID.key]=M}this.indexes[h]=S}this.lng=f},zr.prototype.addBucket=function(f,p,h){if(this.indexes[f.overscaledZ]&&this.indexes[f.overscaledZ][f.key]){if(this.indexes[f.overscaledZ][f.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(f.overscaledZ,this.indexes[f.overscaledZ][f.key])}for(var v=0;v<p.symbolInstances.length;v++)p.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[f.overscaledZ]||(this.usedCrossTileIDs[f.overscaledZ]={});var S=this.usedCrossTileIDs[f.overscaledZ];for(var P in this.indexes){var M=this.indexes[P];if(Number(P)>f.overscaledZ)for(var H in M){var te=M[H];te.tileID.isChildOf(f)&&te.findMatches(p.symbolInstances,f,S)}else{var ae=M[f.scaledTo(Number(P)).key];ae&&ae.findMatches(p.symbolInstances,f,S)}}for(var ge=0;ge<p.symbolInstances.length;ge++){var _e=p.symbolInstances.get(ge);_e.crossTileID||(_e.crossTileID=h.generate(),S[_e.crossTileID]=!0)}return void 0===this.indexes[f.overscaledZ]&&(this.indexes[f.overscaledZ]={}),this.indexes[f.overscaledZ][f.key]=new On(f,p.symbolInstances,p.bucketInstanceId),!0},zr.prototype.removeBucketCrossTileIDs=function(f,p){for(var h in p.indexedSymbolInstances)for(var v=0,S=p.indexedSymbolInstances[h];v<S.length;v+=1)delete this.usedCrossTileIDs[f][S[v].crossTileID]},zr.prototype.removeStaleBuckets=function(f){var p=!1;for(var h in this.indexes){var v=this.indexes[h];for(var S in v)f[v[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,v[S]),delete v[S],p=!0)}return p};var Pn=function(){this.layerIndexes={},this.crossTileIDs=new qr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Pn.prototype.addLayer=function(f,p,h){var v=this.layerIndexes[f.id];void 0===v&&(v=this.layerIndexes[f.id]=new zr);var S=!1,P={};v.handleWrapJump(h);for(var M=0,H=p;M<H.length;M+=1){var te=H[M],ae=te.getBucket(f);ae&&f.id===ae.layerIds[0]&&(ae.bucketInstanceId||(ae.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(te.tileID,ae,this.crossTileIDs)&&(S=!0),P[ae.bucketInstanceId]=!0)}return v.removeStaleBuckets(P)&&(S=!0),S},Pn.prototype.pruneUnusedLayers=function(f){var p={};for(var h in f.forEach(function(v){p[v]=!0}),this.layerIndexes)p[h]||delete this.layerIndexes[h]};var Zn=function(f,p){return m.emitValidationErrors(f,p&&p.filter(function(h){return"source.canvas"!==h.identifier}))},Ya=m.pick(Tt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Qn=m.pick(Tt,["setCenter","setZoom","setBearing","setPitch"]),Ji=function(){var f={},p=m.styleSpec.$version;for(var h in m.styleSpec.$root){var v,S=m.styleSpec.$root[h];S.required&&null!=(v="version"===h?p:"array"===S.type?[]:{})&&(f[h]=v)}return f}(),Vi=function(f){function p(h,v){var S=this;void 0===v&&(v={}),f.call(this),this.map=h,this.dispatcher=new B(mn(),this),this.imageManager=new be,this.imageManager.setEventedParent(this),this.glyphManager=new nt(h._requestManager,v.localIdeographFontFamily),this.lineAtlas=new O(256,512),this.crossTileSymbolIndex=new Pn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new m.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",m.getReferrer());var P=this;this._rtlTextPluginCallback=p.registerForPluginStateChange(function(M){P.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:M.pluginStatus,pluginURL:M.pluginURL},function(H,te){if(m.triggerPluginCompletionEvent(H),te&&te.every(function(ge){return ge}))for(var ae in P.sourceCaches)P.sourceCaches[ae].reload()})}),this.on("data",function(M){if("source"===M.dataType&&"metadata"===M.sourceDataType){var H=S.sourceCaches[M.sourceId];if(H){var te=H.getSource();if(te&&te.vectorLayerIds)for(var ae in S._layers){var ge=S._layers[ae];ge.source===te.id&&S._validateLayer(ge)}}}})}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.loadURL=function(h,v){var S=this;void 0===v&&(v={}),this.fire(new m.Event("dataloading",{dataType:"style"}));var P="boolean"==typeof v.validate?v.validate:!m.isMapboxURL(h);h=this.map._requestManager.normalizeStyleURL(h,v.accessToken);var M=this.map._requestManager.transformRequest(h,m.ResourceType.Style);this._request=m.getJSON(M,function(H,te){S._request=null,H?S.fire(new m.ErrorEvent(H)):te&&S._load(te,P)})},p.prototype.loadJSON=function(h,v){var S=this;void 0===v&&(v={}),this.fire(new m.Event("dataloading",{dataType:"style"})),this._request=m.browser.frame(function(){S._request=null,S._load(h,!1!==v.validate)})},p.prototype.loadEmpty=function(){this.fire(new m.Event("dataloading",{dataType:"style"})),this._load(Ji,!1)},p.prototype._load=function(h,v){if(!v||!Zn(this,m.validateStyle(h))){for(var S in this._loaded=!0,this.stylesheet=h,h.sources)this.addSource(S,h.sources[S],{validate:!1});h.sprite?this._loadSprite(h.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(h.glyphs);var P=Ut(this.stylesheet.layers);this._order=P.map(function(ae){return ae.id}),this._layers={},this._serializedLayers={};for(var M=0,H=P;M<H.length;M+=1){var te=H[M];(te=m.createStyleLayer(te)).setEventedParent(this,{layer:{id:te.id}}),this._layers[te.id]=te,this._serializedLayers[te.id]=te.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new A(this.stylesheet.light),this.fire(new m.Event("data",{dataType:"style"})),this.fire(new m.Event("style.load"))}},p.prototype._loadSprite=function(h){var v=this;this._spriteRequest=function(S,P,M){var H,te,ae,ge=m.browser.devicePixelRatio>1?"@2x":"",_e=m.getJSON(P.transformRequest(P.normalizeSpriteURL(S,ge,".json"),m.ResourceType.SpriteJSON),function(Oe,Ge){_e=null,ae||(ae=Oe,H=Ge,Le())}),ye=m.getImage(P.transformRequest(P.normalizeSpriteURL(S,ge,".png"),m.ResourceType.SpriteImage),function(Oe,Ge){ye=null,ae||(ae=Oe,te=Ge,Le())});function Le(){if(ae)M(ae);else if(H&&te){var Oe=m.browser.getImageData(te),Ge={};for(var Ie in H){var ze=H[Ie],qe=ze.width,ot=ze.height,yt=ze.x,mt=ze.y,_t=ze.sdf,Pt=ze.pixelRatio,$t=ze.stretchX,kt=ze.stretchY,tn=ze.content,wn=new m.RGBAImage({width:qe,height:ot});m.RGBAImage.copy(Oe,wn,{x:yt,y:mt},{x:0,y:0},{width:qe,height:ot}),Ge[Ie]={data:wn,pixelRatio:Pt,sdf:_t,stretchX:$t,stretchY:kt,content:tn}}M(null,Ge)}}return{cancel:function(){_e&&(_e.cancel(),_e=null),ye&&(ye.cancel(),ye=null)}}}(h,this.map._requestManager,function(S,P){if(v._spriteRequest=null,S)v.fire(new m.ErrorEvent(S));else if(P)for(var M in P)v.imageManager.addImage(M,P[M]);v.imageManager.setLoaded(!0),v._availableImages=v.imageManager.listImages(),v.dispatcher.broadcast("setImages",v._availableImages),v.fire(new m.Event("data",{dataType:"style"}))})},p.prototype._validateLayer=function(h){var v=this.sourceCaches[h.source];if(v){var S=h.sourceLayer;if(S){var P=v.getSource();("geojson"===P.type||P.vectorLayerIds&&-1===P.vectorLayerIds.indexOf(S))&&this.fire(new m.ErrorEvent(new Error('Source layer "'+S+'" does not exist on source "'+P.id+'" as specified by style layer "'+h.id+'"')))}}},p.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var h in this.sourceCaches)if(!this.sourceCaches[h].loaded())return!1;return!!this.imageManager.isLoaded()},p.prototype._serializeLayers=function(h){for(var v=[],S=0,P=h;S<P.length;S+=1){var M=this._layers[P[S]];"custom"!==M.type&&v.push(M.serialize())}return v},p.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var h in this.sourceCaches)if(this.sourceCaches[h].hasTransition())return!0;for(var v in this._layers)if(this._layers[v].hasTransition())return!0;return!1},p.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},p.prototype.update=function(h){if(this._loaded){var v=this._changed;if(this._changed){var S=Object.keys(this._updatedLayers),P=Object.keys(this._removedLayers);for(var M in(S.length||P.length)&&this._updateWorkerLayers(S,P),this._updatedSources){var H=this._updatedSources[M];"reload"===H?this._reloadSource(M):"clear"===H&&this._clearSource(M)}for(var te in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[te].updateTransitions(h);this.light.updateTransitions(h),this._resetUpdates()}var ae={};for(var ge in this.sourceCaches){var _e=this.sourceCaches[ge];ae[ge]=_e.used,_e.used=!1}for(var ye=0,Le=this._order;ye<Le.length;ye+=1){var Oe=this._layers[Le[ye]];Oe.recalculate(h,this._availableImages),!Oe.isHidden(h.zoom)&&Oe.source&&(this.sourceCaches[Oe.source].used=!0)}for(var Ge in ae){var Ie=this.sourceCaches[Ge];ae[Ge]!==Ie.used&&Ie.fire(new m.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Ge}))}this.light.recalculate(h),this.z=h.zoom,v&&this.fire(new m.Event("data",{dataType:"style"}))}},p.prototype._updateTilesForChangedImages=function(){var h=Object.keys(this._changedImages);if(h.length){for(var v in this.sourceCaches)this.sourceCaches[v].reloadTilesForDependencies(["icons","patterns"],h);this._changedImages={}}},p.prototype._updateWorkerLayers=function(h,v){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(h),removedIds:v})},p.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},p.prototype.setState=function(h){var v=this;if(this._checkLoaded(),Zn(this,m.validateStyle(h)))return!1;(h=m.clone$1(h)).layers=Ut(h.layers);var S=function(M,H){if(!M)return[{command:Tt.setStyle,args:[H]}];var te=[];try{if(!m.deepEqual(M.version,H.version))return[{command:Tt.setStyle,args:[H]}];m.deepEqual(M.center,H.center)||te.push({command:Tt.setCenter,args:[H.center]}),m.deepEqual(M.zoom,H.zoom)||te.push({command:Tt.setZoom,args:[H.zoom]}),m.deepEqual(M.bearing,H.bearing)||te.push({command:Tt.setBearing,args:[H.bearing]}),m.deepEqual(M.pitch,H.pitch)||te.push({command:Tt.setPitch,args:[H.pitch]}),m.deepEqual(M.sprite,H.sprite)||te.push({command:Tt.setSprite,args:[H.sprite]}),m.deepEqual(M.glyphs,H.glyphs)||te.push({command:Tt.setGlyphs,args:[H.glyphs]}),m.deepEqual(M.transition,H.transition)||te.push({command:Tt.setTransition,args:[H.transition]}),m.deepEqual(M.light,H.light)||te.push({command:Tt.setLight,args:[H.light]});var ae={},ge=[];!function(ye,Le,Oe,Ge){var Ie;for(Ie in Le=Le||{},ye=ye||{})ye.hasOwnProperty(Ie)&&(Le.hasOwnProperty(Ie)||jn(Ie,Oe,Ge));for(Ie in Le)Le.hasOwnProperty(Ie)&&(ye.hasOwnProperty(Ie)?m.deepEqual(ye[Ie],Le[Ie])||("geojson"===ye[Ie].type&&"geojson"===Le[Ie].type&&ni(ye,Le,Ie)?Oe.push({command:Tt.setGeoJSONSourceData,args:[Ie,Le[Ie].data]}):ln(Ie,Le,Oe,Ge)):Gn(Ie,Le,Oe))}(M.sources,H.sources,ge,ae);var _e=[];M.layers&&M.layers.forEach(function(ye){ae[ye.source]?te.push({command:Tt.removeLayer,args:[ye.id]}):_e.push(ye)}),te=te.concat(ge),function(ye,Le,Oe){Le=Le||[];var Ge,Ie,ze,qe,ot,yt,mt,_t=(ye=ye||[]).map(ui),Pt=Le.map(ui),$t=ye.reduce(_i,{}),kt=Le.reduce(_i,{}),tn=_t.slice(),wn=Object.create(null);for(Ge=0,Ie=0;Ge<_t.length;Ge++)kt.hasOwnProperty(ze=_t[Ge])?Ie++:(Oe.push({command:Tt.removeLayer,args:[ze]}),tn.splice(tn.indexOf(ze,Ie),1));for(Ge=0,Ie=0;Ge<Pt.length;Ge++)tn[tn.length-1-Ge]!==(ze=Pt[Pt.length-1-Ge])&&($t.hasOwnProperty(ze)?(Oe.push({command:Tt.removeLayer,args:[ze]}),tn.splice(tn.lastIndexOf(ze,tn.length-Ie),1)):Ie++,Oe.push({command:Tt.addLayer,args:[kt[ze],yt=tn[tn.length-Ge]]}),tn.splice(tn.length-Ge,0,ze),wn[ze]=!0);for(Ge=0;Ge<Pt.length;Ge++)if(qe=$t[ze=Pt[Ge]],ot=kt[ze],!wn[ze]&&!m.deepEqual(qe,ot))if(m.deepEqual(qe.source,ot.source)&&m.deepEqual(qe["source-layer"],ot["source-layer"])&&m.deepEqual(qe.type,ot.type)){for(mt in En(qe.layout,ot.layout,Oe,ze,null,Tt.setLayoutProperty),En(qe.paint,ot.paint,Oe,ze,null,Tt.setPaintProperty),m.deepEqual(qe.filter,ot.filter)||Oe.push({command:Tt.setFilter,args:[ze,ot.filter]}),m.deepEqual(qe.minzoom,ot.minzoom)&&m.deepEqual(qe.maxzoom,ot.maxzoom)||Oe.push({command:Tt.setLayerZoomRange,args:[ze,ot.minzoom,ot.maxzoom]}),qe)qe.hasOwnProperty(mt)&&"layout"!==mt&&"paint"!==mt&&"filter"!==mt&&"metadata"!==mt&&"minzoom"!==mt&&"maxzoom"!==mt&&(0===mt.indexOf("paint.")?En(qe[mt],ot[mt],Oe,ze,mt.slice(6),Tt.setPaintProperty):m.deepEqual(qe[mt],ot[mt])||Oe.push({command:Tt.setLayerProperty,args:[ze,mt,ot[mt]]}));for(mt in ot)ot.hasOwnProperty(mt)&&!qe.hasOwnProperty(mt)&&"layout"!==mt&&"paint"!==mt&&"filter"!==mt&&"metadata"!==mt&&"minzoom"!==mt&&"maxzoom"!==mt&&(0===mt.indexOf("paint.")?En(qe[mt],ot[mt],Oe,ze,mt.slice(6),Tt.setPaintProperty):m.deepEqual(qe[mt],ot[mt])||Oe.push({command:Tt.setLayerProperty,args:[ze,mt,ot[mt]]}))}else Oe.push({command:Tt.removeLayer,args:[ze]}),yt=tn[tn.lastIndexOf(ze)+1],Oe.push({command:Tt.addLayer,args:[ot,yt]})}(_e,H.layers,te)}catch(ye){console.warn("Unable to compute style diff:",ye),te=[{command:Tt.setStyle,args:[H]}]}return te}(this.serialize(),h).filter(function(M){return!(M.command in Qn)});if(0===S.length)return!1;var P=S.filter(function(M){return!(M.command in Ya)});if(P.length>0)throw new Error("Unimplemented: "+P.map(function(M){return M.command}).join(", ")+".");return S.forEach(function(M){"setTransition"!==M.command&&v[M.command].apply(v,M.args)}),this.stylesheet=h,!0},p.prototype.addImage=function(h,v){if(this.getImage(h))return this.fire(new m.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(h,v),this._afterImageUpdated(h)},p.prototype.updateImage=function(h,v){this.imageManager.updateImage(h,v)},p.prototype.getImage=function(h){return this.imageManager.getImage(h)},p.prototype.removeImage=function(h){if(!this.getImage(h))return this.fire(new m.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(h),this._afterImageUpdated(h)},p.prototype._afterImageUpdated=function(h){this._availableImages=this.imageManager.listImages(),this._changedImages[h]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new m.Event("data",{dataType:"style"}))},p.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},p.prototype.addSource=function(h,v,S){var P=this;if(void 0===S&&(S={}),this._checkLoaded(),void 0!==this.sourceCaches[h])throw new Error("There is already a source with this ID");if(!v.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(v).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(v.type)>=0&&this._validate(m.validateStyle.source,"sources."+h,v,null,S))){this.map&&this.map._collectResourceTiming&&(v.collectResourceTiming=!0);var M=this.sourceCaches[h]=new Ee(h,v,this.dispatcher);M.style=this,M.setEventedParent(this,function(){return{isSourceLoaded:P.loaded(),source:M.serialize(),sourceId:h}}),M.onAdd(this.map),this._changed=!0}},p.prototype.removeSource=function(h){if(this._checkLoaded(),void 0===this.sourceCaches[h])throw new Error("There is no source with this ID");for(var v in this._layers)if(this._layers[v].source===h)return this.fire(new m.ErrorEvent(new Error('Source "'+h+'" cannot be removed while layer "'+v+'" is using it.')));var S=this.sourceCaches[h];delete this.sourceCaches[h],delete this._updatedSources[h],S.fire(new m.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:h})),S.setEventedParent(null),S.clearTiles(),S.onRemove&&S.onRemove(this.map),this._changed=!0},p.prototype.setGeoJSONSourceData=function(h,v){this._checkLoaded(),this.sourceCaches[h].getSource().setData(v),this._changed=!0},p.prototype.getSource=function(h){return this.sourceCaches[h]&&this.sourceCaches[h].getSource()},p.prototype.addLayer=function(h,v,S){void 0===S&&(S={}),this._checkLoaded();var P=h.id;if(this.getLayer(P))this.fire(new m.ErrorEvent(new Error('Layer with id "'+P+'" already exists on this map')));else{var M;if("custom"===h.type){if(Zn(this,m.validateCustomStyleLayer(h)))return;M=m.createStyleLayer(h)}else{if("object"==typeof h.source&&(this.addSource(P,h.source),h=m.clone$1(h),h=m.extend(h,{source:P})),this._validate(m.validateStyle.layer,"layers."+P,h,{arrayIndex:-1},S))return;M=m.createStyleLayer(h),this._validateLayer(M),M.setEventedParent(this,{layer:{id:P}}),this._serializedLayers[M.id]=M.serialize()}var H=v?this._order.indexOf(v):this._order.length;if(v&&-1===H)this.fire(new m.ErrorEvent(new Error('Layer with id "'+v+'" does not exist on this map.')));else{if(this._order.splice(H,0,P),this._layerOrderChanged=!0,this._layers[P]=M,this._removedLayers[P]&&M.source&&"custom"!==M.type){var te=this._removedLayers[P];delete this._removedLayers[P],te.type!==M.type?this._updatedSources[M.source]="clear":(this._updatedSources[M.source]="reload",this.sourceCaches[M.source].pause())}this._updateLayer(M),M.onAdd&&M.onAdd(this.map)}}},p.prototype.moveLayer=function(h,v){if(this._checkLoaded(),this._changed=!0,this._layers[h]){if(h!==v){var S=this._order.indexOf(h);this._order.splice(S,1);var P=v?this._order.indexOf(v):this._order.length;v&&-1===P?this.fire(new m.ErrorEvent(new Error('Layer with id "'+v+'" does not exist on this map.'))):(this._order.splice(P,0,h),this._layerOrderChanged=!0)}}else this.fire(new m.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot be moved.")))},p.prototype.removeLayer=function(h){this._checkLoaded();var v=this._layers[h];if(v){v.setEventedParent(null);var S=this._order.indexOf(h);this._order.splice(S,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[h]=v,delete this._layers[h],delete this._serializedLayers[h],delete this._updatedLayers[h],delete this._updatedPaintProps[h],v.onRemove&&v.onRemove(this.map)}else this.fire(new m.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot be removed.")))},p.prototype.getLayer=function(h){return this._layers[h]},p.prototype.hasLayer=function(h){return h in this._layers},p.prototype.setLayerZoomRange=function(h,v,S){this._checkLoaded();var P=this.getLayer(h);P?P.minzoom===v&&P.maxzoom===S||(null!=v&&(P.minzoom=v),null!=S&&(P.maxzoom=S),this._updateLayer(P)):this.fire(new m.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot have zoom extent.")))},p.prototype.setFilter=function(h,v,S){void 0===S&&(S={}),this._checkLoaded();var P=this.getLayer(h);if(P){if(!m.deepEqual(P.filter,v))return null==v?(P.filter=void 0,void this._updateLayer(P)):void(this._validate(m.validateStyle.filter,"layers."+P.id+".filter",v,null,S)||(P.filter=m.clone$1(v),this._updateLayer(P)))}else this.fire(new m.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot be filtered.")))},p.prototype.getFilter=function(h){return m.clone$1(this.getLayer(h).filter)},p.prototype.setLayoutProperty=function(h,v,S,P){void 0===P&&(P={}),this._checkLoaded();var M=this.getLayer(h);M?m.deepEqual(M.getLayoutProperty(v),S)||(M.setLayoutProperty(v,S,P),this._updateLayer(M)):this.fire(new m.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot be styled.")))},p.prototype.getLayoutProperty=function(h,v){var S=this.getLayer(h);if(S)return S.getLayoutProperty(v);this.fire(new m.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style.")))},p.prototype.setPaintProperty=function(h,v,S,P){void 0===P&&(P={}),this._checkLoaded();var M=this.getLayer(h);M?m.deepEqual(M.getPaintProperty(v),S)||(M.setPaintProperty(v,S,P)&&this._updateLayer(M),this._changed=!0,this._updatedPaintProps[h]=!0):this.fire(new m.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot be styled.")))},p.prototype.getPaintProperty=function(h,v){return this.getLayer(h).getPaintProperty(v)},p.prototype.setFeatureState=function(h,v){this._checkLoaded();var S=h.source,P=h.sourceLayer,M=this.sourceCaches[S];if(void 0!==M){var H=M.getSource().type;"geojson"===H&&P?this.fire(new m.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==H||P?(void 0===h.id&&this.fire(new m.ErrorEvent(new Error("The feature id parameter must be provided."))),M.setFeatureState(P,h.id,v)):this.fire(new m.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new m.ErrorEvent(new Error("The source '"+S+"' does not exist in the map's style.")))},p.prototype.removeFeatureState=function(h,v){this._checkLoaded();var S=h.source,P=this.sourceCaches[S];if(void 0!==P){var M=P.getSource().type,H="vector"===M?h.sourceLayer:void 0;"vector"!==M||H?v&&"string"!=typeof h.id&&"number"!=typeof h.id?this.fire(new m.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):P.removeFeatureState(H,h.id,v):this.fire(new m.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new m.ErrorEvent(new Error("The source '"+S+"' does not exist in the map's style.")))},p.prototype.getFeatureState=function(h){this._checkLoaded();var v=h.source,S=h.sourceLayer,P=this.sourceCaches[v];if(void 0!==P){if("vector"!==P.getSource().type||S)return void 0===h.id&&this.fire(new m.ErrorEvent(new Error("The feature id parameter must be provided."))),P.getFeatureState(S,h.id);this.fire(new m.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new m.ErrorEvent(new Error("The source '"+v+"' does not exist in the map's style.")))},p.prototype.getTransition=function(){return m.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},p.prototype.serialize=function(){return m.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:m.mapObject(this.sourceCaches,function(h){return h.serialize()}),layers:this._serializeLayers(this._order)},function(h){return void 0!==h})},p.prototype._updateLayer=function(h){this._updatedLayers[h.id]=!0,h.source&&!this._updatedSources[h.source]&&"raster"!==this.sourceCaches[h.source].getSource().type&&(this._updatedSources[h.source]="reload",this.sourceCaches[h.source].pause()),this._changed=!0},p.prototype._flattenAndSortRenderedFeatures=function(h){for(var v=this,S=function($t){return"fill-extrusion"===v._layers[$t].type},P={},M=[],H=this._order.length-1;H>=0;H--){var te=this._order[H];if(S(te)){P[te]=H;for(var ae=0,ge=h;ae<ge.length;ae+=1){var _e=ge[ae][te];if(_e)for(var ye=0,Le=_e;ye<Le.length;ye+=1)M.push(Le[ye])}}}M.sort(function($t,kt){return kt.intersectionZ-$t.intersectionZ});for(var Oe=[],Ge=this._order.length-1;Ge>=0;Ge--){var Ie=this._order[Ge];if(S(Ie))for(var ze=M.length-1;ze>=0;ze--){var qe=M[ze].feature;if(P[qe.layer.id]<Ge)break;Oe.push(qe),M.pop()}else for(var ot=0,yt=h;ot<yt.length;ot+=1){var mt=yt[ot][Ie];if(mt)for(var _t=0,Pt=mt;_t<Pt.length;_t+=1)Oe.push(Pt[_t].feature)}}return Oe},p.prototype.queryRenderedFeatures=function(h,v,S){v&&v.filter&&this._validate(m.validateStyle.filter,"queryRenderedFeatures.filter",v.filter,null,v);var P={};if(v&&v.layers){if(!Array.isArray(v.layers))return this.fire(new m.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var M=0,H=v.layers;M<H.length;M+=1){var te=H[M],ae=this._layers[te];if(!ae)return this.fire(new m.ErrorEvent(new Error("The layer '"+te+"' does not exist in the map's style and cannot be queried for features."))),[];P[ae.source]=!0}}var ge=[];for(var _e in v.availableImages=this._availableImages,this.sourceCaches)v.layers&&!P[_e]||ge.push(Bt(this.sourceCaches[_e],this._layers,this._serializedLayers,h,v,S));return this.placement&&ge.push(function(ye,Le,Oe,Ge,Ie,ze,qe){for(var ot={},yt=ze.queryRenderedSymbols(Ge),mt=[],_t=0,Pt=Object.keys(yt).map(Number);_t<Pt.length;_t+=1)mt.push(qe[Pt[_t]]);mt.sort(bn);for(var $t=function(){var Cn=tn[kt],Vr=Cn.featureIndex.lookupSymbolFeatures(yt[Cn.bucketInstanceId],Le,Cn.bucketIndex,Cn.sourceLayerIndex,Ie.filter,Ie.layers,Ie.availableImages,ye);for(var nn in Vr){var Kn=ot[nn]=ot[nn]||[],br=Vr[nn];br.sort(function($n,qn){var Ln=Cn.featureSortOrder;if(Ln){var Di=Ln.indexOf($n.featureIndex);return Ln.indexOf(qn.featureIndex)-Di}return qn.featureIndex-$n.featureIndex});for(var nr=0,Hn=br;nr<Hn.length;nr+=1)Kn.push(Hn[nr])}},kt=0,tn=mt;kt<tn.length;kt+=1)$t();var wn=function(Cn){ot[Cn].forEach(function(Vr){var nn=Vr.feature,Kn=Oe[ye[Cn].source].getFeatureState(nn.layer["source-layer"],nn.id);nn.source=nn.layer.source,nn.layer["source-layer"]&&(nn.sourceLayer=nn.layer["source-layer"]),nn.state=Kn})};for(var An in ot)wn(An);return ot}(this._layers,this._serializedLayers,this.sourceCaches,h,v,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ge)},p.prototype.querySourceFeatures=function(h,v){v&&v.filter&&this._validate(m.validateStyle.filter,"querySourceFeatures.filter",v.filter,null,v);var S=this.sourceCaches[h];return S?function(P,M){for(var H=P.getRenderableIds().map(function(Le){return P.getTileByID(Le)}),te=[],ae={},ge=0;ge<H.length;ge++){var _e=H[ge],ye=_e.tileID.canonical.key;ae[ye]||(ae[ye]=!0,_e.querySourceFeatures(te,M))}return te}(S,v):[]},p.prototype.addSourceType=function(h,v,S){return p.getSourceType(h)?S(new Error('A source type called "'+h+'" already exists.')):(p.setSourceType(h,v),v.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:h,url:v.workerSourceURL},S):S(null,null))},p.prototype.getLight=function(){return this.light.getLight()},p.prototype.setLight=function(h,v){void 0===v&&(v={}),this._checkLoaded();var S=this.light.getLight(),P=!1;for(var M in h)if(!m.deepEqual(h[M],S[M])){P=!0;break}if(P){var H={now:m.browser.now(),transition:m.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(h,v),this.light.updateTransitions(H)}},p.prototype._validate=function(h,v,S,P,M){return void 0===M&&(M={}),(!M||!1!==M.validate)&&Zn(this,h.call(m.validateStyle,m.extend({key:v,style:this.serialize(),value:S,styleSpec:m.styleSpec},P)))},p.prototype._remove=function(){for(var h in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),m.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[h].setEventedParent(null);for(var v in this.sourceCaches)this.sourceCaches[v].clearTiles(),this.sourceCaches[v].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},p.prototype._clearSource=function(h){this.sourceCaches[h].clearTiles()},p.prototype._reloadSource=function(h){this.sourceCaches[h].resume(),this.sourceCaches[h].reload()},p.prototype._updateSources=function(h){for(var v in this.sourceCaches)this.sourceCaches[v].update(h)},p.prototype._generateCollisionBoxes=function(){for(var h in this.sourceCaches)this._reloadSource(h)},p.prototype._updatePlacement=function(h,v,S,P,M){void 0===M&&(M=!1);for(var H=!1,te=!1,ae={},ge=0,_e=this._order;ge<_e.length;ge+=1){var ye=this._layers[_e[ge]];if("symbol"===ye.type){if(!ae[ye.source]){var Le=this.sourceCaches[ye.source];ae[ye.source]=Le.getRenderableIds(!0).map(function(qe){return Le.getTileByID(qe)}).sort(function(qe,ot){return ot.tileID.overscaledZ-qe.tileID.overscaledZ||(qe.tileID.isLessThan(ot.tileID)?-1:1)})}var Oe=this.crossTileSymbolIndex.addLayer(ye,ae[ye.source],h.center.lng);H=H||Oe}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((M=M||this._layerOrderChanged||0===S)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(m.browser.now(),h.zoom))&&(this.pauseablePlacement=new At(h,this._order,M,v,S,P,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ae),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(m.browser.now()),te=!0),H&&this.pauseablePlacement.placement.setStale()),te||H)for(var Ge=0,Ie=this._order;Ge<Ie.length;Ge+=1){var ze=this._layers[Ie[Ge]];"symbol"===ze.type&&this.placement.updateLayerOpacities(ze,ae[ze.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(m.browser.now())},p.prototype._releaseSymbolFadeTiles=function(){for(var h in this.sourceCaches)this.sourceCaches[h].releaseSymbolFadeTiles()},p.prototype.getImages=function(h,v,S){this.imageManager.getImages(v.icons,S),this._updateTilesForChangedImages();var P=this.sourceCaches[v.source];P&&P.setDependencies(v.tileID.key,v.type,v.icons)},p.prototype.getGlyphs=function(h,v,S){this.glyphManager.getGlyphs(v.stacks,S)},p.prototype.getResource=function(h,v,S){return m.makeRequest(v,S)},p}(m.Evented);Vi.getSourceType=function(f){return xt[f]},Vi.setSourceType=function(f,p){xt[f]=p},Vi.registerForPluginStateChange=m.registerForPluginStateChange;var ga=m.createLayout([{name:"a_pos",type:"Int16",components:2}]),Gi=Ur("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Re=Ur("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),at=Ur("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Nt=Ur("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),_n=Ur("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),bi=Ur("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),qt=Ur("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ei=Ur("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ki=Ur("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),gi=Ur("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ii=Ur("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),ya=Ur("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),qi=Ur("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),li=Ur("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),la=Ur("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),ei=Ur("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Yi=Ur("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),cr=Ur("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Zo=Ur("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Xa=Ur("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Jo=Ur("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Tr=Ur("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),Vs=Ur("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),nu=Ur("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),Gs=Ur("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),nc=Ur("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function Ur(f,p){var h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=p.match(/attribute ([\w]+) ([\w]+)/g),S=f.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=P?P.concat(S):S,H={};return{fragmentSource:f=f.replace(h,function(te,ae,ge,_e,ye){return H[ye]=!0,"define"===ae?"\n#ifndef HAS_UNIFORM_u_"+ye+"\nvarying "+ge+" "+_e+" "+ye+";\n#else\nuniform "+ge+" "+_e+" u_"+ye+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+ye+"\n    "+ge+" "+_e+" "+ye+" = u_"+ye+";\n#endif\n"}),vertexSource:p=p.replace(h,function(te,ae,ge,_e,ye){var Le="float"===_e?"vec2":"vec4",Oe=ye.match(/color/)?"color":Le;return H[ye]?"define"===ae?"\n#ifndef HAS_UNIFORM_u_"+ye+"\nuniform lowp float u_"+ye+"_t;\nattribute "+ge+" "+Le+" a_"+ye+";\nvarying "+ge+" "+_e+" "+ye+";\n#else\nuniform "+ge+" "+_e+" u_"+ye+";\n#endif\n":"vec4"===Oe?"\n#ifndef HAS_UNIFORM_u_"+ye+"\n    "+ye+" = a_"+ye+";\n#else\n    "+ge+" "+_e+" "+ye+" = u_"+ye+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+ye+"\n    "+ye+" = unpack_mix_"+Oe+"(a_"+ye+", u_"+ye+"_t);\n#else\n    "+ge+" "+_e+" "+ye+" = u_"+ye+";\n#endif\n":"define"===ae?"\n#ifndef HAS_UNIFORM_u_"+ye+"\nuniform lowp float u_"+ye+"_t;\nattribute "+ge+" "+Le+" a_"+ye+";\n#else\nuniform "+ge+" "+_e+" u_"+ye+";\n#endif\n":"vec4"===Oe?"\n#ifndef HAS_UNIFORM_u_"+ye+"\n    "+ge+" "+_e+" "+ye+" = a_"+ye+";\n#else\n    "+ge+" "+_e+" "+ye+" = u_"+ye+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+ye+"\n    "+ge+" "+_e+" "+ye+" = unpack_mix_"+Oe+"(a_"+ye+", u_"+ye+"_t);\n#else\n    "+ge+" "+_e+" "+ye+" = u_"+ye+";\n#endif\n"}),staticAttributes:v,staticUniforms:M}}var ca=Object.freeze({__proto__:null,prelude:Gi,background:Re,backgroundPattern:at,circle:Nt,clippingMask:_n,heatmap:bi,heatmapTexture:qt,collisionBox:Ei,collisionCircle:Ki,debug:gi,fill:ii,fillOutline:ya,fillOutlinePattern:qi,fillPattern:li,fillExtrusion:la,fillExtrusionPattern:ei,hillshadePrepare:Yi,hillshade:cr,line:Zo,lineGradient:Xa,linePattern:Jo,lineSDF:Tr,raster:Vs,symbolIcon:nu,symbolSDF:Gs,symbolTextAndIcon:nc}),ys=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Rs(f){for(var p=[],h=0;h<f.length;h++)if(null!==f[h]){var v=f[h].split(" ");p.push(v.pop())}return p}ys.prototype.bind=function(f,p,h,v,S,P,M,H){this.context=f;for(var te=this.boundPaintVertexBuffers.length!==v.length,ae=0;!te&&ae<v.length;ae++)this.boundPaintVertexBuffers[ae]!==v[ae]&&(te=!0);f.extVertexArrayObject&&this.vao&&this.boundProgram===p&&this.boundLayoutVertexBuffer===h&&!te&&this.boundIndexBuffer===S&&this.boundVertexOffset===P&&this.boundDynamicVertexBuffer===M&&this.boundDynamicVertexBuffer2===H?(f.bindVertexArrayOES.set(this.vao),M&&M.bind(),S&&S.dynamicDraw&&S.bind(),H&&H.bind()):this.freshBind(p,h,v,S,P,M,H)},ys.prototype.freshBind=function(f,p,h,v,S,P,M){var H,te=f.numAttributes,ae=this.context,ge=ae.gl;if(ae.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ae.extVertexArrayObject.createVertexArrayOES(),ae.bindVertexArrayOES.set(this.vao),H=0,this.boundProgram=f,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=v,this.boundVertexOffset=S,this.boundDynamicVertexBuffer=P,this.boundDynamicVertexBuffer2=M;else{H=ae.currentNumAttributes||0;for(var _e=te;_e<H;_e++)ge.disableVertexAttribArray(_e)}p.enableAttributes(ge,f);for(var ye=0,Le=h;ye<Le.length;ye+=1)Le[ye].enableAttributes(ge,f);P&&P.enableAttributes(ge,f),M&&M.enableAttributes(ge,f),p.bind(),p.setVertexAttribPointers(ge,f,S);for(var Oe=0,Ge=h;Oe<Ge.length;Oe+=1){var Ie=Ge[Oe];Ie.bind(),Ie.setVertexAttribPointers(ge,f,S)}P&&(P.bind(),P.setVertexAttribPointers(ge,f,S)),v&&v.bind(),M&&(M.bind(),M.setVertexAttribPointers(ge,f,S)),ae.currentNumAttributes=te},ys.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Cl=function(f,p,h,v,S,P){var M=f.gl;this.program=M.createProgram();for(var H=Rs(h.staticAttributes),te=v?v.getBinderAttributes():[],ae=H.concat(te),ge=h.staticUniforms?Rs(h.staticUniforms):[],_e=v?v.getBinderUniforms():[],ye=[],Le=0,Oe=ge.concat(_e);Le<Oe.length;Le+=1){var Ge=Oe[Le];ye.indexOf(Ge)<0&&ye.push(Ge)}var Ie=v?v.defines():[];P&&Ie.push("#define OVERDRAW_INSPECTOR;");var ze=Ie.concat(Gi.fragmentSource,h.fragmentSource).join("\n"),qe=Ie.concat(Gi.vertexSource,h.vertexSource).join("\n"),ot=M.createShader(M.FRAGMENT_SHADER);if(M.isContextLost())this.failedToCreate=!0;else{M.shaderSource(ot,ze),M.compileShader(ot),M.attachShader(this.program,ot);var yt=M.createShader(M.VERTEX_SHADER);if(M.isContextLost())this.failedToCreate=!0;else{M.shaderSource(yt,qe),M.compileShader(yt),M.attachShader(this.program,yt),this.attributes={};var mt={};this.numAttributes=ae.length;for(var _t=0;_t<this.numAttributes;_t++)ae[_t]&&(M.bindAttribLocation(this.program,_t,ae[_t]),this.attributes[ae[_t]]=_t);M.linkProgram(this.program),M.deleteShader(yt),M.deleteShader(ot);for(var Pt=0;Pt<ye.length;Pt++){var $t=ye[Pt];if($t&&!mt[$t]){var kt=M.getUniformLocation(this.program,$t);kt&&(mt[$t]=kt)}}this.fixedUniforms=S(f,mt),this.binderUniforms=v?v.getUniforms(f,mt):[]}}};function Hs(f,p,h){var v=1/Wo(h,1,p.transform.tileZoom),S=Math.pow(2,h.tileID.overscaledZ),P=h.tileSize*Math.pow(2,p.transform.tileZoom)/S,M=P*(h.tileID.canonical.x+h.tileID.wrap*S),H=P*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[v,f.fromScale,f.toScale],u_fade:f.t,u_pixel_coord_upper:[M>>16,H>>16],u_pixel_coord_lower:[65535&M,65535&H]}}Cl.prototype.draw=function(f,p,h,v,S,P,M,H,te,ae,ge,_e,ye,Le,Oe,Ge){var Ie,ze=f.gl;if(!this.failedToCreate){for(var qe in f.program.set(this.program),f.setDepthMode(h),f.setStencilMode(v),f.setColorMode(S),f.setCullFace(P),this.fixedUniforms)this.fixedUniforms[qe].set(M[qe]);Le&&Le.setUniforms(f,this.binderUniforms,_e,{zoom:ye});for(var ot=(Ie={},Ie[ze.LINES]=2,Ie[ze.TRIANGLES]=3,Ie[ze.LINE_STRIP]=1,Ie)[p],yt=0,mt=ge.get();yt<mt.length;yt+=1){var _t=mt[yt],Pt=_t.vaos||(_t.vaos={});(Pt[H]||(Pt[H]=new ys)).bind(f,this,te,Le?Le.getPaintVertexBuffers():[],ae,_t.vertexOffset,Oe,Ge),ze.drawElements(p,_t.primitiveLength*ot,ze.UNSIGNED_SHORT,_t.primitiveOffset*ot*2)}}};var Mc=function(f,p,h,v){var S=p.style.light,P=S.properties.get("position"),M=[P.x,P.y,P.z],H=m.create$1();"viewport"===S.properties.get("anchor")&&m.fromRotation(H,-p.transform.angle),m.transformMat3(M,M,H);var te=S.properties.get("color");return{u_matrix:f,u_lightpos:M,u_lightintensity:S.properties.get("intensity"),u_lightcolor:[te.r,te.g,te.b],u_vertical_gradient:+h,u_opacity:v}},rc=function(f,p,h,v,S,P,M){return m.extend(Mc(f,p,h,v),Hs(P,p,M),{u_height_factor:-Math.pow(2,S.overscaledZ)/M.tileSize/8})},jo=function(f){return{u_matrix:f}},ru=function(f,p,h,v){return m.extend(jo(f),Hs(h,p,v))},wu=function(f,p){return{u_matrix:f,u_world:p}},Ko=function(f,p,h,v,S){return m.extend(ru(f,p,h,v),{u_world:S})},va=function(f,p,h,v){var S,P,M=f.transform;if("map"===v.paint.get("circle-pitch-alignment")){var H=Wo(h,1,M.zoom);S=!0,P=[H,H]}else S=!1,P=M.pixelsToGLUnits;return{u_camera_to_center_distance:M.cameraToCenterDistance,u_scale_with_map:+("map"===v.paint.get("circle-pitch-scale")),u_matrix:f.translatePosMatrix(p.posMatrix,h,v.paint.get("circle-translate"),v.paint.get("circle-translate-anchor")),u_pitch_with_map:+S,u_device_pixel_ratio:m.browser.devicePixelRatio,u_extrude_scale:P}},ci=function(f,p,h){var v=Wo(h,1,p.zoom),S=Math.pow(2,p.zoom-h.tileID.overscaledZ),P=h.tileID.overscaleFactor();return{u_matrix:f,u_camera_to_center_distance:p.cameraToCenterDistance,u_pixels_to_tile_units:v,u_extrude_scale:[p.pixelsToGLUnits[0]/(v*S),p.pixelsToGLUnits[1]/(v*S)],u_overscale_factor:P}},lo=function(f,p,h){return{u_matrix:f,u_inv_matrix:p,u_camera_to_center_distance:h.cameraToCenterDistance,u_viewport_size:[h.width,h.height]}},Eo=function(f,p,h){return void 0===h&&(h=1),{u_matrix:f,u_color:p,u_overlay:0,u_overlay_scale:h}},Wi=function(f){return{u_matrix:f}},Yo=function(f,p,h,v){return{u_matrix:f,u_extrude_scale:Wo(p,1,h),u_intensity:v}},sn=function(f,p,h){var v=f.transform;return{u_matrix:zi(f,p,h),u_ratio:1/Wo(p,1,v.zoom),u_device_pixel_ratio:m.browser.devicePixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},Er=function(f,p,h,v){return m.extend(sn(f,p,h),{u_image:0,u_image_height:v})},zn=function(f,p,h,v){var S=f.transform,P=xu(p,S);return{u_matrix:zi(f,p,h),u_texsize:p.imageAtlasTexture.size,u_ratio:1/Wo(p,1,S.zoom),u_device_pixel_ratio:m.browser.devicePixelRatio,u_image:0,u_scale:[P,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},Xo=function(f,p,h,v,S){var P=f.lineAtlas,M=xu(p,f.transform),H="round"===h.layout.get("line-cap"),te=P.getDash(v.from,H),ae=P.getDash(v.to,H),ge=te.width*S.fromScale,_e=ae.width*S.toScale;return m.extend(sn(f,p,h),{u_patternscale_a:[M/ge,-te.height/2],u_patternscale_b:[M/_e,-ae.height/2],u_sdfgamma:P.width/(256*Math.min(ge,_e)*m.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:te.y,u_tex_y_b:ae.y,u_mix:S.t})};function xu(f,p){return 1/Wo(f,1,p.tileZoom)}function zi(f,p,h){return f.translatePosMatrix(p.tileID.posMatrix,p,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}var iu=function(f,p,h,v,S){return{u_matrix:f,u_tl_parent:p,u_scale_parent:h,u_buffer_scale:1,u_fade_t:v.mix,u_opacity:v.opacity*S.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:S.paint.get("raster-brightness-min"),u_brightness_high:S.paint.get("raster-brightness-max"),u_saturation_factor:(M=S.paint.get("raster-saturation"),M>0?1-1/(1.001-M):-M),u_contrast_factor:(P=S.paint.get("raster-contrast"),P>0?1/(1-P):1+P),u_spin_weights:Xi(S.paint.get("raster-hue-rotate"))};var P,M};function Xi(f){f*=Math.PI/180;var p=Math.sin(f),h=Math.cos(f);return[(2*h+1)/3,(-Math.sqrt(3)*p-h+1)/3,(Math.sqrt(3)*p-h+1)/3]}var $s,Eu=function(f,p,h,v,S,P,M,H,te,ae){var ge=S.transform;return{u_is_size_zoom_constant:+("constant"===f||"source"===f),u_is_size_feature_constant:+("constant"===f||"camera"===f),u_size_t:p?p.uSizeT:0,u_size:p?p.uSize:0,u_camera_to_center_distance:ge.cameraToCenterDistance,u_pitch:ge.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:ge.width/ge.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:P,u_label_plane_matrix:M,u_coord_matrix:H,u_is_text:+te,u_pitch_with_map:+v,u_texsize:ae,u_texture:0}},ar=function(f,p,h,v,S,P,M,H,te,ae,ge){var _e=S.transform;return m.extend(Eu(f,p,h,v,S,P,M,H,te,ae),{u_gamma_scale:v?Math.cos(_e._pitch)*_e.cameraToCenterDistance:1,u_device_pixel_ratio:m.browser.devicePixelRatio,u_is_halo:+ge})},Su=function(f,p,h,v,S,P,M,H,te,ae){return m.extend(ar(f,p,h,v,S,P,M,H,!0,te,!0),{u_texsize_icon:ae,u_texture_icon:1})},ou=function(f,p,h){return{u_matrix:f,u_opacity:p,u_color:h}},it=function(f,p,h,v,S,P){return m.extend((H=P,ae=S,ge=(te=h).imageManager.getPattern((M=v).from.toString()),_e=te.imageManager.getPattern(M.to.toString()),Le=(ye=te.imageManager.getPixelSize()).width,Oe=ye.height,Ge=Math.pow(2,ae.tileID.overscaledZ),ze=(Ie=ae.tileSize*Math.pow(2,te.transform.tileZoom)/Ge)*(ae.tileID.canonical.x+ae.tileID.wrap*Ge),qe=Ie*ae.tileID.canonical.y,{u_image:0,u_pattern_tl_a:ge.tl,u_pattern_br_a:ge.br,u_pattern_tl_b:_e.tl,u_pattern_br_b:_e.br,u_texsize:[Le,Oe],u_mix:H.t,u_pattern_size_a:ge.displaySize,u_pattern_size_b:_e.displaySize,u_scale_a:H.fromScale,u_scale_b:H.toScale,u_tile_units_to_pixels:1/Wo(ae,1,te.transform.tileZoom),u_pixel_coord_upper:[ze>>16,qe>>16],u_pixel_coord_lower:[65535&ze,65535&qe]}),{u_matrix:f,u_opacity:p});var M,H,te,ae,ge,_e,ye,Le,Oe,Ge,Ie,ze,qe},vt={fillExtrusion:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_lightpos:new m.Uniform3f(f,p.u_lightpos),u_lightintensity:new m.Uniform1f(f,p.u_lightintensity),u_lightcolor:new m.Uniform3f(f,p.u_lightcolor),u_vertical_gradient:new m.Uniform1f(f,p.u_vertical_gradient),u_opacity:new m.Uniform1f(f,p.u_opacity)}},fillExtrusionPattern:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_lightpos:new m.Uniform3f(f,p.u_lightpos),u_lightintensity:new m.Uniform1f(f,p.u_lightintensity),u_lightcolor:new m.Uniform3f(f,p.u_lightcolor),u_vertical_gradient:new m.Uniform1f(f,p.u_vertical_gradient),u_height_factor:new m.Uniform1f(f,p.u_height_factor),u_image:new m.Uniform1i(f,p.u_image),u_texsize:new m.Uniform2f(f,p.u_texsize),u_pixel_coord_upper:new m.Uniform2f(f,p.u_pixel_coord_upper),u_pixel_coord_lower:new m.Uniform2f(f,p.u_pixel_coord_lower),u_scale:new m.Uniform3f(f,p.u_scale),u_fade:new m.Uniform1f(f,p.u_fade),u_opacity:new m.Uniform1f(f,p.u_opacity)}},fill:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix)}},fillPattern:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_image:new m.Uniform1i(f,p.u_image),u_texsize:new m.Uniform2f(f,p.u_texsize),u_pixel_coord_upper:new m.Uniform2f(f,p.u_pixel_coord_upper),u_pixel_coord_lower:new m.Uniform2f(f,p.u_pixel_coord_lower),u_scale:new m.Uniform3f(f,p.u_scale),u_fade:new m.Uniform1f(f,p.u_fade)}},fillOutline:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_world:new m.Uniform2f(f,p.u_world)}},fillOutlinePattern:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_world:new m.Uniform2f(f,p.u_world),u_image:new m.Uniform1i(f,p.u_image),u_texsize:new m.Uniform2f(f,p.u_texsize),u_pixel_coord_upper:new m.Uniform2f(f,p.u_pixel_coord_upper),u_pixel_coord_lower:new m.Uniform2f(f,p.u_pixel_coord_lower),u_scale:new m.Uniform3f(f,p.u_scale),u_fade:new m.Uniform1f(f,p.u_fade)}},circle:function(f,p){return{u_camera_to_center_distance:new m.Uniform1f(f,p.u_camera_to_center_distance),u_scale_with_map:new m.Uniform1i(f,p.u_scale_with_map),u_pitch_with_map:new m.Uniform1i(f,p.u_pitch_with_map),u_extrude_scale:new m.Uniform2f(f,p.u_extrude_scale),u_device_pixel_ratio:new m.Uniform1f(f,p.u_device_pixel_ratio),u_matrix:new m.UniformMatrix4f(f,p.u_matrix)}},collisionBox:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_camera_to_center_distance:new m.Uniform1f(f,p.u_camera_to_center_distance),u_pixels_to_tile_units:new m.Uniform1f(f,p.u_pixels_to_tile_units),u_extrude_scale:new m.Uniform2f(f,p.u_extrude_scale),u_overscale_factor:new m.Uniform1f(f,p.u_overscale_factor)}},collisionCircle:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_inv_matrix:new m.UniformMatrix4f(f,p.u_inv_matrix),u_camera_to_center_distance:new m.Uniform1f(f,p.u_camera_to_center_distance),u_viewport_size:new m.Uniform2f(f,p.u_viewport_size)}},debug:function(f,p){return{u_color:new m.UniformColor(f,p.u_color),u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_overlay:new m.Uniform1i(f,p.u_overlay),u_overlay_scale:new m.Uniform1f(f,p.u_overlay_scale)}},clippingMask:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix)}},heatmap:function(f,p){return{u_extrude_scale:new m.Uniform1f(f,p.u_extrude_scale),u_intensity:new m.Uniform1f(f,p.u_intensity),u_matrix:new m.UniformMatrix4f(f,p.u_matrix)}},heatmapTexture:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_world:new m.Uniform2f(f,p.u_world),u_image:new m.Uniform1i(f,p.u_image),u_color_ramp:new m.Uniform1i(f,p.u_color_ramp),u_opacity:new m.Uniform1f(f,p.u_opacity)}},hillshade:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_image:new m.Uniform1i(f,p.u_image),u_latrange:new m.Uniform2f(f,p.u_latrange),u_light:new m.Uniform2f(f,p.u_light),u_shadow:new m.UniformColor(f,p.u_shadow),u_highlight:new m.UniformColor(f,p.u_highlight),u_accent:new m.UniformColor(f,p.u_accent)}},hillshadePrepare:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_image:new m.Uniform1i(f,p.u_image),u_dimension:new m.Uniform2f(f,p.u_dimension),u_zoom:new m.Uniform1f(f,p.u_zoom),u_unpack:new m.Uniform4f(f,p.u_unpack)}},line:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_ratio:new m.Uniform1f(f,p.u_ratio),u_device_pixel_ratio:new m.Uniform1f(f,p.u_device_pixel_ratio),u_units_to_pixels:new m.Uniform2f(f,p.u_units_to_pixels)}},lineGradient:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_ratio:new m.Uniform1f(f,p.u_ratio),u_device_pixel_ratio:new m.Uniform1f(f,p.u_device_pixel_ratio),u_units_to_pixels:new m.Uniform2f(f,p.u_units_to_pixels),u_image:new m.Uniform1i(f,p.u_image),u_image_height:new m.Uniform1f(f,p.u_image_height)}},linePattern:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_texsize:new m.Uniform2f(f,p.u_texsize),u_ratio:new m.Uniform1f(f,p.u_ratio),u_device_pixel_ratio:new m.Uniform1f(f,p.u_device_pixel_ratio),u_image:new m.Uniform1i(f,p.u_image),u_units_to_pixels:new m.Uniform2f(f,p.u_units_to_pixels),u_scale:new m.Uniform3f(f,p.u_scale),u_fade:new m.Uniform1f(f,p.u_fade)}},lineSDF:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_ratio:new m.Uniform1f(f,p.u_ratio),u_device_pixel_ratio:new m.Uniform1f(f,p.u_device_pixel_ratio),u_units_to_pixels:new m.Uniform2f(f,p.u_units_to_pixels),u_patternscale_a:new m.Uniform2f(f,p.u_patternscale_a),u_patternscale_b:new m.Uniform2f(f,p.u_patternscale_b),u_sdfgamma:new m.Uniform1f(f,p.u_sdfgamma),u_image:new m.Uniform1i(f,p.u_image),u_tex_y_a:new m.Uniform1f(f,p.u_tex_y_a),u_tex_y_b:new m.Uniform1f(f,p.u_tex_y_b),u_mix:new m.Uniform1f(f,p.u_mix)}},raster:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_tl_parent:new m.Uniform2f(f,p.u_tl_parent),u_scale_parent:new m.Uniform1f(f,p.u_scale_parent),u_buffer_scale:new m.Uniform1f(f,p.u_buffer_scale),u_fade_t:new m.Uniform1f(f,p.u_fade_t),u_opacity:new m.Uniform1f(f,p.u_opacity),u_image0:new m.Uniform1i(f,p.u_image0),u_image1:new m.Uniform1i(f,p.u_image1),u_brightness_low:new m.Uniform1f(f,p.u_brightness_low),u_brightness_high:new m.Uniform1f(f,p.u_brightness_high),u_saturation_factor:new m.Uniform1f(f,p.u_saturation_factor),u_contrast_factor:new m.Uniform1f(f,p.u_contrast_factor),u_spin_weights:new m.Uniform3f(f,p.u_spin_weights)}},symbolIcon:function(f,p){return{u_is_size_zoom_constant:new m.Uniform1i(f,p.u_is_size_zoom_constant),u_is_size_feature_constant:new m.Uniform1i(f,p.u_is_size_feature_constant),u_size_t:new m.Uniform1f(f,p.u_size_t),u_size:new m.Uniform1f(f,p.u_size),u_camera_to_center_distance:new m.Uniform1f(f,p.u_camera_to_center_distance),u_pitch:new m.Uniform1f(f,p.u_pitch),u_rotate_symbol:new m.Uniform1i(f,p.u_rotate_symbol),u_aspect_ratio:new m.Uniform1f(f,p.u_aspect_ratio),u_fade_change:new m.Uniform1f(f,p.u_fade_change),u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_label_plane_matrix:new m.UniformMatrix4f(f,p.u_label_plane_matrix),u_coord_matrix:new m.UniformMatrix4f(f,p.u_coord_matrix),u_is_text:new m.Uniform1i(f,p.u_is_text),u_pitch_with_map:new m.Uniform1i(f,p.u_pitch_with_map),u_texsize:new m.Uniform2f(f,p.u_texsize),u_texture:new m.Uniform1i(f,p.u_texture)}},symbolSDF:function(f,p){return{u_is_size_zoom_constant:new m.Uniform1i(f,p.u_is_size_zoom_constant),u_is_size_feature_constant:new m.Uniform1i(f,p.u_is_size_feature_constant),u_size_t:new m.Uniform1f(f,p.u_size_t),u_size:new m.Uniform1f(f,p.u_size),u_camera_to_center_distance:new m.Uniform1f(f,p.u_camera_to_center_distance),u_pitch:new m.Uniform1f(f,p.u_pitch),u_rotate_symbol:new m.Uniform1i(f,p.u_rotate_symbol),u_aspect_ratio:new m.Uniform1f(f,p.u_aspect_ratio),u_fade_change:new m.Uniform1f(f,p.u_fade_change),u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_label_plane_matrix:new m.UniformMatrix4f(f,p.u_label_plane_matrix),u_coord_matrix:new m.UniformMatrix4f(f,p.u_coord_matrix),u_is_text:new m.Uniform1i(f,p.u_is_text),u_pitch_with_map:new m.Uniform1i(f,p.u_pitch_with_map),u_texsize:new m.Uniform2f(f,p.u_texsize),u_texture:new m.Uniform1i(f,p.u_texture),u_gamma_scale:new m.Uniform1f(f,p.u_gamma_scale),u_device_pixel_ratio:new m.Uniform1f(f,p.u_device_pixel_ratio),u_is_halo:new m.Uniform1i(f,p.u_is_halo)}},symbolTextAndIcon:function(f,p){return{u_is_size_zoom_constant:new m.Uniform1i(f,p.u_is_size_zoom_constant),u_is_size_feature_constant:new m.Uniform1i(f,p.u_is_size_feature_constant),u_size_t:new m.Uniform1f(f,p.u_size_t),u_size:new m.Uniform1f(f,p.u_size),u_camera_to_center_distance:new m.Uniform1f(f,p.u_camera_to_center_distance),u_pitch:new m.Uniform1f(f,p.u_pitch),u_rotate_symbol:new m.Uniform1i(f,p.u_rotate_symbol),u_aspect_ratio:new m.Uniform1f(f,p.u_aspect_ratio),u_fade_change:new m.Uniform1f(f,p.u_fade_change),u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_label_plane_matrix:new m.UniformMatrix4f(f,p.u_label_plane_matrix),u_coord_matrix:new m.UniformMatrix4f(f,p.u_coord_matrix),u_is_text:new m.Uniform1i(f,p.u_is_text),u_pitch_with_map:new m.Uniform1i(f,p.u_pitch_with_map),u_texsize:new m.Uniform2f(f,p.u_texsize),u_texsize_icon:new m.Uniform2f(f,p.u_texsize_icon),u_texture:new m.Uniform1i(f,p.u_texture),u_texture_icon:new m.Uniform1i(f,p.u_texture_icon),u_gamma_scale:new m.Uniform1f(f,p.u_gamma_scale),u_device_pixel_ratio:new m.Uniform1f(f,p.u_device_pixel_ratio),u_is_halo:new m.Uniform1i(f,p.u_is_halo)}},background:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_opacity:new m.Uniform1f(f,p.u_opacity),u_color:new m.UniformColor(f,p.u_color)}},backgroundPattern:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_opacity:new m.Uniform1f(f,p.u_opacity),u_image:new m.Uniform1i(f,p.u_image),u_pattern_tl_a:new m.Uniform2f(f,p.u_pattern_tl_a),u_pattern_br_a:new m.Uniform2f(f,p.u_pattern_br_a),u_pattern_tl_b:new m.Uniform2f(f,p.u_pattern_tl_b),u_pattern_br_b:new m.Uniform2f(f,p.u_pattern_br_b),u_texsize:new m.Uniform2f(f,p.u_texsize),u_mix:new m.Uniform1f(f,p.u_mix),u_pattern_size_a:new m.Uniform2f(f,p.u_pattern_size_a),u_pattern_size_b:new m.Uniform2f(f,p.u_pattern_size_b),u_scale_a:new m.Uniform1f(f,p.u_scale_a),u_scale_b:new m.Uniform1f(f,p.u_scale_b),u_pixel_coord_upper:new m.Uniform2f(f,p.u_pixel_coord_upper),u_pixel_coord_lower:new m.Uniform2f(f,p.u_pixel_coord_lower),u_tile_units_to_pixels:new m.Uniform1f(f,p.u_tile_units_to_pixels)}}};function Ht(f,p,h,v,S,P,M){for(var H=f.context,te=H.gl,ae=f.useProgram("collisionBox"),ge=[],_e=0,ye=0,Le=0;Le<v.length;Le++){var Oe=v[Le],Ge=p.getTile(Oe),Ie=Ge.getBucket(h);if(Ie){var ze=Oe.posMatrix;0===S[0]&&0===S[1]||(ze=f.translatePosMatrix(Oe.posMatrix,Ge,S,P));var qe=M?Ie.textCollisionBox:Ie.iconCollisionBox,ot=Ie.collisionCircleArray;if(ot.length>0){var yt=m.create(),mt=ze;m.mul(yt,Ie.placementInvProjMatrix,f.transform.glCoordMatrix),m.mul(yt,yt,Ie.placementViewportMatrix),ge.push({circleArray:ot,circleOffset:ye,transform:mt,invTransform:yt}),ye=_e+=ot.length/4}qe&&ae.draw(H,te.LINES,ve.disabled,De.disabled,f.colorModeForRenderPass(),Xe.disabled,ci(ze,f.transform,Ge),h.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,null,f.transform.zoom,null,null,qe.collisionVertexBuffer)}}if(M&&ge.length){var _t=f.useProgram("collisionCircle"),Pt=new m.StructArrayLayout2f1f2i16;Pt.resize(4*_e),Pt._trim();for(var $t=0,kt=0,tn=ge;kt<tn.length;kt+=1)for(var wn=tn[kt],An=0;An<wn.circleArray.length/4;An++){var Cn=4*An,Vr=wn.circleArray[Cn+0],nn=wn.circleArray[Cn+1],Kn=wn.circleArray[Cn+2],br=wn.circleArray[Cn+3];Pt.emplace($t++,Vr,nn,Kn,br,0),Pt.emplace($t++,Vr,nn,Kn,br,1),Pt.emplace($t++,Vr,nn,Kn,br,2),Pt.emplace($t++,Vr,nn,Kn,br,3)}(!$s||$s.length<2*_e)&&($s=function(Io){var ta=2*Io,Lo=new m.StructArrayLayout3ui6;Lo.resize(ta),Lo._trim();for(var No=0;No<ta;No++){var Zi=6*No;Lo.uint16[Zi+0]=4*No+0,Lo.uint16[Zi+1]=4*No+1,Lo.uint16[Zi+2]=4*No+2,Lo.uint16[Zi+3]=4*No+2,Lo.uint16[Zi+4]=4*No+3,Lo.uint16[Zi+5]=4*No+0}return Lo}(_e));for(var nr=H.createIndexBuffer($s,!0),Hn=H.createVertexBuffer(Pt,m.collisionCircleLayout.members,!0),$n=0,qn=ge;$n<qn.length;$n+=1){var Ln=qn[$n],Di=lo(Ln.transform,Ln.invTransform,f.transform);_t.draw(H,te.TRIANGLES,ve.disabled,De.disabled,f.colorModeForRenderPass(),Xe.disabled,Di,h.id,Hn,nr,m.SegmentVector.simpleSegment(0,2*Ln.circleOffset,Ln.circleArray.length,Ln.circleArray.length/2),null,f.transform.zoom,null,null,null)}Hn.destroy(),nr.destroy()}}var Dn=m.identity(new Float32Array(16));function Or(f,p,h,v,S,P){var M=m.getAnchorAlignment(f),H=-(M.horizontalAlign-.5)*p,te=-(M.verticalAlign-.5)*h,ae=m.evaluateVariableOffset(f,v);return new m.Point((H/S+ae[0])*P,(te/S+ae[1])*P)}function dr(f,p,h,v,S,P,M,H,te,ae,ge){var _e=f.text.placedSymbolArray,ye=f.text.dynamicLayoutVertexArray,Le=f.icon.dynamicLayoutVertexArray,Oe={};ye.clear();for(var Ge=0;Ge<_e.length;Ge++){var Ie=_e.get(Ge),ze=Ie.hidden||!Ie.crossTileID||f.allowVerticalPlacement&&!Ie.placedOrientation?null:v[Ie.crossTileID];if(ze){var qe=new m.Point(Ie.anchorX,Ie.anchorY),ot=Mn(qe,h?H:M),yt=Oi(P.cameraToCenterDistance,ot.signedDistanceFromCamera),mt=S.evaluateSizeForFeature(f.textSizeData,ae,Ie)*yt/m.ONE_EM;h&&(mt*=f.tilePixelRatio/te);for(var _t=Or(ze.anchor,ze.width,ze.height,ze.textOffset,ze.textBoxScale,mt),Pt=h?Mn(qe.add(_t),M).point:ot.point.add(p?_t.rotate(-P.angle):_t),$t=f.allowVerticalPlacement&&Ie.placedOrientation===m.WritingMode.vertical?Math.PI/2:0,kt=0;kt<Ie.numGlyphs;kt++)m.addDynamicAttributes(ye,Pt,$t);ge&&Ie.associatedIconIndex>=0&&(Oe[Ie.associatedIconIndex]={shiftedAnchor:Pt,angle:$t})}else La(Ie.numGlyphs,ye)}if(ge){Le.clear();for(var tn=f.icon.placedSymbolArray,wn=0;wn<tn.length;wn++){var An=tn.get(wn);if(An.hidden)La(An.numGlyphs,Le);else{var Cn=Oe[wn];if(Cn)for(var Vr=0;Vr<An.numGlyphs;Vr++)m.addDynamicAttributes(Le,Cn.shiftedAnchor,Cn.angle);else La(An.numGlyphs,Le)}}f.icon.dynamicLayoutVertexBuffer.updateData(Le)}f.text.dynamicLayoutVertexBuffer.updateData(ye)}function Ii(f,p,h){return h.iconsInText&&p?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function Qi(f,p,h,v,S,P,M,H,te,ae,ge,_e){for(var ye=f.context,Le=ye.gl,Oe=f.transform,Ge="map"===H,Ie="map"===te,ze=Ge&&"point"!==h.layout.get("symbol-placement"),qe=Ge&&!Ie&&!ze,ot=!h.layout.get("symbol-sort-key").isConstant(),yt=!1,mt=f.depthModeForSublayer(0,ve.ReadOnly),_t=h.layout.get("text-variable-anchor"),Pt=[],$t=0,kt=v;$t<kt.length;$t+=1){var tn=kt[$t],wn=p.getTile(tn),An=wn.getBucket(h);if(An){var Cn=S?An.text:An.icon;if(Cn&&Cn.segments.get().length){var Vr=Cn.programConfigurations.get(h.id),nn=S||An.sdfIcons,Kn=S?An.textSizeData:An.iconSizeData,br=Ie||0!==Oe.pitch,nr=f.useProgram(Ii(nn,S,An),Vr),Hn=m.evaluateSizeForZoom(Kn,Oe.zoom),$n=void 0,qn=[0,0],Ln=void 0,Di=void 0,Io=null,ta=void 0;if(S)Ln=wn.glyphAtlasTexture,Di=Le.LINEAR,$n=wn.glyphAtlasTexture.size,An.iconsInText&&(qn=wn.imageAtlasTexture.size,Io=wn.imageAtlasTexture,ta=br||f.options.rotating||f.options.zooming||"composite"===Kn.kind||"camera"===Kn.kind?Le.LINEAR:Le.NEAREST);else{var Lo=1!==h.layout.get("icon-size").constantOr(0)||An.iconsNeedLinear;Ln=wn.imageAtlasTexture,Di=nn||f.options.rotating||f.options.zooming||Lo||br?Le.LINEAR:Le.NEAREST,$n=wn.imageAtlasTexture.size}var No=Wo(wn,1,f.transform.zoom),Zi=xi(tn.posMatrix,Ie,Ge,f.transform,No),fa=Hr(tn.posMatrix,Ie,Ge,f.transform,No),lu=_t&&An.hasTextData(),ko="none"!==h.layout.get("icon-text-fit")&&lu&&An.hasIconData();ze&&ua(An,tn.posMatrix,f,S,Zi,fa,Ie,ae);var Ua=f.translatePosMatrix(tn.posMatrix,wn,P,M),is=ze||S&&_t||ko?Dn:Zi,os=f.translatePosMatrix(fa,wn,P,M,!0),sc=nn&&0!==h.paint.get(S?"text-halo-width":"icon-halo-width").constantOr(1),Rl={program:nr,buffers:Cn,uniformValues:nn?An.iconsInText?Su(Kn.kind,Hn,qe,Ie,f,Ua,is,os,$n,qn):ar(Kn.kind,Hn,qe,Ie,f,Ua,is,os,S,$n,!0):Eu(Kn.kind,Hn,qe,Ie,f,Ua,is,os,S,$n),atlasTexture:Ln,atlasTextureIcon:Io,atlasInterpolation:Di,atlasInterpolationIcon:ta,isSDF:nn,hasHalo:sc};if(ot&&An.canOverlap){yt=!0;for(var Ml=0,al=Cn.segments.get();Ml<al.length;Ml+=1){var Bc=al[Ml];Pt.push({segments:new m.SegmentVector([Bc]),sortKey:Bc.sortKey,state:Rl})}}else Pt.push({segments:Cn.segments,sortKey:0,state:Rl})}}}yt&&Pt.sort(function(Ts,Ru){return Ts.sortKey-Ru.sortKey});for(var as=0,Du=Pt;as<Du.length;as+=1){var Au=Du[as],mo=Au.state;if(ye.activeTexture.set(Le.TEXTURE0),mo.atlasTexture.bind(mo.atlasInterpolation,Le.CLAMP_TO_EDGE),mo.atlasTextureIcon&&(ye.activeTexture.set(Le.TEXTURE1),mo.atlasTextureIcon&&mo.atlasTextureIcon.bind(mo.atlasInterpolationIcon,Le.CLAMP_TO_EDGE)),mo.isSDF){var cu=mo.uniformValues;mo.hasHalo&&(cu.u_is_halo=1,Ar(mo.buffers,Au.segments,h,f,mo.program,mt,ge,_e,cu)),cu.u_is_halo=0}Ar(mo.buffers,Au.segments,h,f,mo.program,mt,ge,_e,mo.uniformValues)}}function Ar(f,p,h,v,S,P,M,H,te){var ae=v.context;S.draw(ae,ae.gl.TRIANGLES,P,M,H,Xe.disabled,te,h.id,f.layoutVertexBuffer,f.indexBuffer,p,h.paint,v.transform.zoom,f.programConfigurations.get(h.id),f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer)}function eo(f,p,h,v,S,P,M){var H,te,ae,ge,_e,ye=f.context.gl,Le=h.paint.get("fill-pattern"),Oe=Le&&Le.constantOr(1),Ge=h.getCrossfadeParameters();M?(te=Oe&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",H=ye.LINES):(te=Oe?"fillPattern":"fill",H=ye.TRIANGLES);for(var Ie=0,ze=v;Ie<ze.length;Ie+=1){var qe=ze[Ie],ot=p.getTile(qe);if(!Oe||ot.patternsLoaded()){var yt=ot.getBucket(h);if(yt){var mt=yt.programConfigurations.get(h.id),_t=f.useProgram(te,mt);Oe&&(f.context.activeTexture.set(ye.TEXTURE0),ot.imageAtlasTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),mt.updatePaintBuffers(Ge));var Pt=Le.constantOr(null);if(Pt&&ot.imageAtlas){var $t=ot.imageAtlas,kt=$t.patternPositions[Pt.to.toString()],tn=$t.patternPositions[Pt.from.toString()];kt&&tn&&mt.setConstantPatternPositions(kt,tn)}var wn=f.translatePosMatrix(qe.posMatrix,ot,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(M){ge=yt.indexBuffer2,_e=yt.segments2;var An=[ye.drawingBufferWidth,ye.drawingBufferHeight];ae="fillOutlinePattern"===te&&Oe?Ko(wn,f,Ge,ot,An):wu(wn,An)}else ge=yt.indexBuffer,_e=yt.segments,ae=Oe?ru(wn,f,Ge,ot):jo(wn);_t.draw(f.context,H,S,f.stencilModeForClipping(qe),P,Xe.disabled,ae,h.id,yt.layoutVertexBuffer,ge,_e,h.paint,f.transform.zoom,mt)}}}}function to(f,p,h,v,S,P,M){for(var H=f.context,te=H.gl,ae=h.paint.get("fill-extrusion-pattern"),ge=ae.constantOr(1),_e=h.getCrossfadeParameters(),ye=h.paint.get("fill-extrusion-opacity"),Le=0,Oe=v;Le<Oe.length;Le+=1){var Ge=Oe[Le],Ie=p.getTile(Ge),ze=Ie.getBucket(h);if(ze){var qe=ze.programConfigurations.get(h.id),ot=f.useProgram(ge?"fillExtrusionPattern":"fillExtrusion",qe);ge&&(f.context.activeTexture.set(te.TEXTURE0),Ie.imageAtlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE),qe.updatePaintBuffers(_e));var yt=ae.constantOr(null);if(yt&&Ie.imageAtlas){var mt=Ie.imageAtlas,_t=mt.patternPositions[yt.to.toString()],Pt=mt.patternPositions[yt.from.toString()];_t&&Pt&&qe.setConstantPatternPositions(_t,Pt)}var $t=f.translatePosMatrix(Ge.posMatrix,Ie,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),kt=h.paint.get("fill-extrusion-vertical-gradient"),tn=ge?rc($t,f,kt,ye,Ge,_e,Ie):Mc($t,f,kt,ye);ot.draw(H,H.gl.TRIANGLES,S,P,M,Xe.backCCW,tn,h.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,h.paint,f.transform.zoom,qe)}}}function Qa(f,p,h,v,S,P){var M=f.context,H=M.gl,te=p.fbo;if(te){var ae=f.useProgram("hillshade");M.activeTexture.set(H.TEXTURE0),H.bindTexture(H.TEXTURE_2D,te.colorAttachment.get());var ge=function(_e,ye,Le){var Oe=Le.paint.get("hillshade-shadow-color"),Ge=Le.paint.get("hillshade-highlight-color"),Ie=Le.paint.get("hillshade-accent-color"),ze=Le.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Le.paint.get("hillshade-illumination-anchor")&&(ze-=_e.transform.angle);var qe,ot,yt,mt=!_e.options.moving;return{u_matrix:_e.transform.calculatePosMatrix(ye.tileID.toUnwrapped(),mt),u_image:0,u_latrange:(qe=ye.tileID,ot=Math.pow(2,qe.canonical.z),yt=qe.canonical.y,[new m.MercatorCoordinate(0,yt/ot).toLngLat().lat,new m.MercatorCoordinate(0,(yt+1)/ot).toLngLat().lat]),u_light:[Le.paint.get("hillshade-exaggeration"),ze],u_shadow:Oe,u_highlight:Ge,u_accent:Ie}}(f,p,h);ae.draw(M,H.TRIANGLES,v,S,P,Xe.disabled,ge,h.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}}function Na(f,p,h,v,S,P){var Ge,Ie,ze,qe,M=f.context,H=M.gl,te=p.dem;if(te&&te.data){var ae=te.dim,ge=te.stride,_e=te.getPixels();if(M.activeTexture.set(H.TEXTURE1),M.pixelStoreUnpackPremultiplyAlpha.set(!1),p.demTexture=p.demTexture||f.getTileTexture(ge),p.demTexture){var ye=p.demTexture;ye.update(_e,{premultiply:!1}),ye.bind(H.NEAREST,H.CLAMP_TO_EDGE)}else p.demTexture=new m.Texture(M,_e,H.RGBA,{premultiply:!1}),p.demTexture.bind(H.NEAREST,H.CLAMP_TO_EDGE);M.activeTexture.set(H.TEXTURE0);var Le=p.fbo;if(!Le){var Oe=new m.Texture(M,{width:ae,height:ae,data:null},H.RGBA);Oe.bind(H.LINEAR,H.CLAMP_TO_EDGE),(Le=p.fbo=M.createFramebuffer(ae,ae,!0)).colorAttachment.set(Oe.texture)}M.bindFramebuffer.set(Le.framebuffer),M.viewport.set([0,0,ae,ae]),f.useProgram("hillshadePrepare").draw(M,H.TRIANGLES,v,S,P,Xe.disabled,(Ge=p.tileID,ze=(Ie=te).stride,qe=m.create(),m.ortho(qe,0,m.EXTENT,-m.EXTENT,0,0,1),m.translate(qe,qe,[0,-m.EXTENT,0]),{u_matrix:qe,u_image:1,u_dimension:[ze,ze],u_zoom:Ge.overscaledZ,u_unpack:Ie.getUnpackVector()}),h.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments),p.needsHillshadePrepare=!1}}function Mo(f,p,h,v,S){var P=v.paint.get("raster-fade-duration");if(P>0){var M=m.browser.now(),H=(M-f.timeAdded)/P,te=p?(M-p.timeAdded)/P:-1,ae=h.getSource(),ge=S.coveringZoomLevel({tileSize:ae.tileSize,roundZoom:ae.roundZoom}),_e=!p||Math.abs(p.tileID.overscaledZ-ge)>Math.abs(f.tileID.overscaledZ-ge),ye=_e&&f.refreshedUponExpiration?1:m.clamp(_e?H:1-te,0,1);return f.refreshedUponExpiration&&H>=1&&(f.refreshedUponExpiration=!1),p?{opacity:1,mix:1-ye}:{opacity:ye,mix:0}}return{opacity:1,mix:0}}var _a=new m.Color(1,0,0,1),ka=new m.Color(0,1,0,1),So=new m.Color(0,0,1,1),Hu=new m.Color(1,0,1,1),ho=new m.Color(0,1,1,1);function ba(f,p,h,v){Cu(f,0,p+h/2,f.transform.width,h,v)}function Il(f,p,h,v){Cu(f,p-h/2,0,h,f.transform.height,v)}function Cu(f,p,h,v,S,P){var M=f.context,H=M.gl;H.enable(H.SCISSOR_TEST),H.scissor(p*m.browser.devicePixelRatio,h*m.browser.devicePixelRatio,v*m.browser.devicePixelRatio,S*m.browser.devicePixelRatio),M.clear({color:P}),H.disable(H.SCISSOR_TEST)}function yi(f,p,h){var v=f.context,S=v.gl,P=h.posMatrix,M=f.useProgram("debug"),H=ve.disabled,te=De.disabled,ae=f.colorModeForRenderPass();v.activeTexture.set(S.TEXTURE0),f.emptyTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),M.draw(v,S.LINE_STRIP,H,te,ae,Xe.disabled,Eo(P,m.Color.red),"$debug",f.debugBuffer,f.tileBorderIndexBuffer,f.debugSegments);var ge=p.getTileByID(h.key).latestRawTileData,_e=Math.floor((ge&&ge.byteLength||0)/1024),ye=p.getTile(h).tileSize,Le=512/Math.min(ye,512)*(h.overscaledZ/f.transform.zoom)*.5,Oe=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(Oe+=" => "+h.overscaledZ),function(Ge,Ie){Ge.initDebugOverlayCanvas();var ze=Ge.debugOverlayCanvas,qe=Ge.context.gl,ot=Ge.debugOverlayCanvas.getContext("2d");ot.clearRect(0,0,ze.width,ze.height),ot.shadowColor="white",ot.shadowBlur=2,ot.lineWidth=1.5,ot.strokeStyle="white",ot.textBaseline="top",ot.font="bold 36px Open Sans, sans-serif",ot.fillText(Ie,5,5),ot.strokeText(Ie,5,5),Ge.debugOverlayTexture.update(ze),Ge.debugOverlayTexture.bind(qe.LINEAR,qe.CLAMP_TO_EDGE)}(f,Oe+" "+_e+"kb"),M.draw(v,S.TRIANGLES,H,te,$e.alphaBlended,Xe.disabled,Eo(P,m.Color.transparent,Le),"$debug",f.debugBuffer,f.quadTriangleIndexBuffer,f.debugSegments)}var Rr={symbol:function(f,p,h,v,S){if("translucent"===f.renderPass){var P=De.disabled,M=f.colorModeForRenderPass();h.layout.get("text-variable-anchor")&&function(H,te,ae,ge,_e,ye,Le){for(var Oe=te.transform,Ge="map"===_e,Ie="map"===ye,ze=0,qe=H;ze<qe.length;ze+=1){var ot=qe[ze],yt=ge.getTile(ot),mt=yt.getBucket(ae);if(mt&&mt.text&&mt.text.segments.get().length){var _t=m.evaluateSizeForZoom(mt.textSizeData,Oe.zoom),Pt=Wo(yt,1,te.transform.zoom),$t=xi(ot.posMatrix,Ie,Ge,te.transform,Pt),kt="none"!==ae.layout.get("icon-text-fit")&&mt.hasIconData();if(_t){var tn=Math.pow(2,Oe.zoom-yt.tileID.overscaledZ);dr(mt,Ge,Ie,Le,m.symbolSize,Oe,$t,ot.posMatrix,tn,_t,kt)}}}}(v,f,h,p,h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),S),0!==h.paint.get("icon-opacity").constantOr(1)&&Qi(f,p,h,v,!1,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),h.layout.get("icon-rotation-alignment"),h.layout.get("icon-pitch-alignment"),h.layout.get("icon-keep-upright"),P,M),0!==h.paint.get("text-opacity").constantOr(1)&&Qi(f,p,h,v,!0,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),h.layout.get("text-keep-upright"),P,M),p.map.showCollisionBoxes&&(Ht(f,p,h,v,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),!0),Ht(f,p,h,v,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),!1))}},circle:function(f,p,h,v){if("translucent"===f.renderPass){var S=h.paint.get("circle-opacity"),P=h.paint.get("circle-stroke-width"),M=h.paint.get("circle-stroke-opacity"),H=!h.layout.get("circle-sort-key").isConstant();if(0!==S.constantOr(1)||0!==P.constantOr(1)&&0!==M.constantOr(1)){for(var te=f.context,ae=te.gl,ge=f.depthModeForSublayer(0,ve.ReadOnly),_e=De.disabled,ye=f.colorModeForRenderPass(),Le=[],Oe=0;Oe<v.length;Oe++){var Ge=v[Oe],Ie=p.getTile(Ge),ze=Ie.getBucket(h);if(ze){var qe=ze.programConfigurations.get(h.id),ot={programConfiguration:qe,program:f.useProgram("circle",qe),layoutVertexBuffer:ze.layoutVertexBuffer,indexBuffer:ze.indexBuffer,uniformValues:va(f,Ge,Ie,h)};if(H)for(var yt=0,mt=ze.segments.get();yt<mt.length;yt+=1){var _t=mt[yt];Le.push({segments:new m.SegmentVector([_t]),sortKey:_t.sortKey,state:ot})}else Le.push({segments:ze.segments,sortKey:0,state:ot})}}H&&Le.sort(function(wn,An){return wn.sortKey-An.sortKey});for(var Pt=0,$t=Le;Pt<$t.length;Pt+=1){var kt=$t[Pt],tn=kt.state;tn.program.draw(te,ae.TRIANGLES,ge,_e,ye,Xe.disabled,tn.uniformValues,h.id,tn.layoutVertexBuffer,tn.indexBuffer,kt.segments,h.paint,f.transform.zoom,tn.programConfiguration)}}}},heatmap:function(f,p,h,v){if(0!==h.paint.get("heatmap-opacity"))if("offscreen"===f.renderPass){var S=f.context,P=S.gl,M=De.disabled,H=new $e([P.ONE,P.ONE],m.Color.transparent,[!0,!0,!0,!0]);(function(Le,Oe,Ge){var Ie=Le.gl;Le.activeTexture.set(Ie.TEXTURE1),Le.viewport.set([0,0,Oe.width/4,Oe.height/4]);var ot,yt,mt,_t,Pt,ze=Ge.heatmapFbo;if(ze)Ie.bindTexture(Ie.TEXTURE_2D,ze.colorAttachment.get()),Le.bindFramebuffer.set(ze.framebuffer);else{var qe=Ie.createTexture();Ie.bindTexture(Ie.TEXTURE_2D,qe),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_WRAP_S,Ie.CLAMP_TO_EDGE),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_WRAP_T,Ie.CLAMP_TO_EDGE),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_MIN_FILTER,Ie.LINEAR),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_MAG_FILTER,Ie.LINEAR),mt=qe,_t=ze=Ge.heatmapFbo=Le.createFramebuffer(Oe.width/4,Oe.height/4,!1),(Pt=(ot=Le).gl).texImage2D(Pt.TEXTURE_2D,0,Pt.RGBA,(yt=Oe).width/4,yt.height/4,0,Pt.RGBA,ot.extRenderToTextureHalfFloat?ot.extTextureHalfFloat.HALF_FLOAT_OES:Pt.UNSIGNED_BYTE,null),_t.colorAttachment.set(mt)}})(S,f,h),S.clear({color:m.Color.transparent});for(var te=0;te<v.length;te++){var ae=v[te];if(!p.hasRenderableParent(ae)){var ge=p.getTile(ae),_e=ge.getBucket(h);if(_e){var ye=_e.programConfigurations.get(h.id);f.useProgram("heatmap",ye).draw(S,P.TRIANGLES,ve.disabled,M,H,Xe.disabled,Yo(ae.posMatrix,ge,f.transform.zoom,h.paint.get("heatmap-intensity")),h.id,_e.layoutVertexBuffer,_e.indexBuffer,_e.segments,h.paint,f.transform.zoom,ye)}}}S.viewport.set([0,0,f.width,f.height])}else"translucent"===f.renderPass&&(f.context.setColorMode(f.colorModeForRenderPass()),function(Le,Oe){var Ge=Le.context,Ie=Ge.gl,ze=Oe.heatmapFbo;if(ze){Ge.activeTexture.set(Ie.TEXTURE0),Ie.bindTexture(Ie.TEXTURE_2D,ze.colorAttachment.get()),Ge.activeTexture.set(Ie.TEXTURE1);var qe=Oe.colorRampTexture;qe||(qe=Oe.colorRampTexture=new m.Texture(Ge,Oe.colorRamp,Ie.RGBA)),qe.bind(Ie.LINEAR,Ie.CLAMP_TO_EDGE),Le.useProgram("heatmapTexture").draw(Ge,Ie.TRIANGLES,ve.disabled,De.disabled,Le.colorModeForRenderPass(),Xe.disabled,function(ot,yt,mt,_t){var Pt=m.create();m.ortho(Pt,0,ot.width,ot.height,0,0,1);var $t=ot.context.gl;return{u_matrix:Pt,u_world:[$t.drawingBufferWidth,$t.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:yt.paint.get("heatmap-opacity")}}(Le,Oe),Oe.id,Le.viewportBuffer,Le.quadTriangleIndexBuffer,Le.viewportSegments,Oe.paint,Le.transform.zoom)}}(f,h))},line:function(f,p,h,v){if("translucent"===f.renderPass){var S=h.paint.get("line-opacity"),P=h.paint.get("line-width");if(0!==S.constantOr(1)&&0!==P.constantOr(1))for(var M=f.depthModeForSublayer(0,ve.ReadOnly),H=f.colorModeForRenderPass(),te=h.paint.get("line-dasharray"),ae=h.paint.get("line-pattern"),ge=ae.constantOr(1),_e=h.paint.get("line-gradient"),ye=h.getCrossfadeParameters(),Le=ge?"linePattern":te?"lineSDF":_e?"lineGradient":"line",Oe=f.context,Ge=Oe.gl,Ie=!0,ze=0,qe=v;ze<qe.length;ze+=1){var ot=qe[ze],yt=p.getTile(ot);if(!ge||yt.patternsLoaded()){var mt=yt.getBucket(h);if(mt){var _t=mt.programConfigurations.get(h.id),Pt=f.context.program.get(),$t=f.useProgram(Le,_t),kt=Ie||$t.program!==Pt,tn=ae.constantOr(null);if(tn&&yt.imageAtlas){var wn=yt.imageAtlas,An=wn.patternPositions[tn.to.toString()],Cn=wn.patternPositions[tn.from.toString()];An&&Cn&&_t.setConstantPatternPositions(An,Cn)}var Vr=ge?zn(f,yt,h,ye):te?Xo(f,yt,h,te,ye):_e?Er(f,yt,h,mt.lineClipsArray.length):sn(f,yt,h);if(ge)Oe.activeTexture.set(Ge.TEXTURE0),yt.imageAtlasTexture.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE),_t.updatePaintBuffers(ye);else if(te&&(kt||f.lineAtlas.dirty))Oe.activeTexture.set(Ge.TEXTURE0),f.lineAtlas.bind(Oe);else if(_e){var nn=mt.gradients[h.id],Kn=nn.texture;if(h.gradientVersion!==nn.version){var br=256;if(h.stepInterpolant){var nr=p.getSource().maxzoom,Hn=ot.canonical.z===nr?Math.ceil(1<<f.transform.maxZoom-ot.canonical.z):1;br=m.clamp(m.nextPowerOfTwo(mt.maxLineLength/m.EXTENT*1024*Hn),256,Oe.maxTextureSize)}nn.gradient=m.renderColorRamp({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:br,image:nn.gradient||void 0,clips:mt.lineClipsArray}),nn.texture?nn.texture.update(nn.gradient):nn.texture=new m.Texture(Oe,nn.gradient,Ge.RGBA),nn.version=h.gradientVersion,Kn=nn.texture}Oe.activeTexture.set(Ge.TEXTURE0),Kn.bind(h.stepInterpolant?Ge.NEAREST:Ge.LINEAR,Ge.CLAMP_TO_EDGE)}$t.draw(Oe,Ge.TRIANGLES,M,f.stencilModeForClipping(ot),H,Xe.disabled,Vr,h.id,mt.layoutVertexBuffer,mt.indexBuffer,mt.segments,h.paint,f.transform.zoom,_t,mt.layoutVertexBuffer2),Ie=!1}}}}},fill:function(f,p,h,v){var S=h.paint.get("fill-color"),P=h.paint.get("fill-opacity");if(0!==P.constantOr(1)){var M=f.colorModeForRenderPass(),H=h.paint.get("fill-pattern"),te=f.opaquePassEnabledForLayer()&&!H.constantOr(1)&&1===S.constantOr(m.Color.transparent).a&&1===P.constantOr(0)?"opaque":"translucent";if(f.renderPass===te){var ae=f.depthModeForSublayer(1,"opaque"===f.renderPass?ve.ReadWrite:ve.ReadOnly);eo(f,p,h,v,ae,M,!1)}if("translucent"===f.renderPass&&h.paint.get("fill-antialias")){var ge=f.depthModeForSublayer(h.getPaintProperty("fill-outline-color")?2:0,ve.ReadOnly);eo(f,p,h,v,ge,M,!0)}}},"fill-extrusion":function(f,p,h,v){var S=h.paint.get("fill-extrusion-opacity");if(0!==S&&"translucent"===f.renderPass){var P=new ve(f.context.gl.LEQUAL,ve.ReadWrite,f.depthRangeFor3D);if(1!==S||h.paint.get("fill-extrusion-pattern").constantOr(1))to(f,p,h,v,P,De.disabled,$e.disabled),to(f,p,h,v,P,f.stencilModeFor3D(),f.colorModeForRenderPass());else{var M=f.colorModeForRenderPass();to(f,p,h,v,P,De.disabled,M)}}},hillshade:function(f,p,h,v){if("offscreen"===f.renderPass||"translucent"===f.renderPass){for(var S=f.context,P=f.depthModeForSublayer(0,ve.ReadOnly),M=f.colorModeForRenderPass(),H="translucent"===f.renderPass?f.stencilConfigForOverlap(v):[{},v],te=H[0],ae=0,ge=H[1];ae<ge.length;ae+=1){var _e=ge[ae],ye=p.getTile(_e);ye.needsHillshadePrepare&&"offscreen"===f.renderPass?Na(f,ye,h,P,De.disabled,M):"translucent"===f.renderPass&&Qa(f,ye,h,P,te[_e.overscaledZ],M)}S.viewport.set([0,0,f.width,f.height])}},raster:function(f,p,h,v){if("translucent"===f.renderPass&&0!==h.paint.get("raster-opacity")&&v.length)for(var S=f.context,P=S.gl,M=p.getSource(),H=f.useProgram("raster"),te=f.colorModeForRenderPass(),ae=M instanceof wt?[{},v]:f.stencilConfigForOverlap(v),ge=ae[0],_e=ae[1],ye=_e[_e.length-1].overscaledZ,Le=!f.options.moving,Oe=0,Ge=_e;Oe<Ge.length;Oe+=1){var Ie=Ge[Oe],ze=f.depthModeForSublayer(Ie.overscaledZ-ye,1===h.paint.get("raster-opacity")?ve.ReadWrite:ve.ReadOnly,P.LESS),qe=p.getTile(Ie),ot=f.transform.calculatePosMatrix(Ie.toUnwrapped(),Le);qe.registerFadeDuration(h.paint.get("raster-fade-duration"));var yt=p.findLoadedParent(Ie,0),mt=Mo(qe,yt,p,h,f.transform),_t=void 0,Pt=void 0,$t="nearest"===h.paint.get("raster-resampling")?P.NEAREST:P.LINEAR;S.activeTexture.set(P.TEXTURE0),qe.texture.bind($t,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST),S.activeTexture.set(P.TEXTURE1),yt?(yt.texture.bind($t,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST),_t=Math.pow(2,yt.tileID.overscaledZ-qe.tileID.overscaledZ),Pt=[qe.tileID.canonical.x*_t%1,qe.tileID.canonical.y*_t%1]):qe.texture.bind($t,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST);var kt=iu(ot,Pt||[0,0],_t||1,mt,h);M instanceof wt?H.draw(S,P.TRIANGLES,ze,De.disabled,te,Xe.disabled,kt,h.id,M.boundsBuffer,f.quadTriangleIndexBuffer,M.boundsSegments):H.draw(S,P.TRIANGLES,ze,ge[Ie.overscaledZ],te,Xe.disabled,kt,h.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}},background:function(f,p,h){var v=h.paint.get("background-color"),S=h.paint.get("background-opacity");if(0!==S){var P=f.context,M=P.gl,H=f.transform,te=H.tileSize,ae=h.paint.get("background-pattern");if(!f.isPatternMissing(ae)){var ge=!ae&&1===v.a&&1===S&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass===ge){var _e=De.disabled,ye=f.depthModeForSublayer(0,"opaque"===ge?ve.ReadWrite:ve.ReadOnly),Le=f.colorModeForRenderPass(),Oe=f.useProgram(ae?"backgroundPattern":"background"),Ge=H.coveringTiles({tileSize:te});ae&&(P.activeTexture.set(M.TEXTURE0),f.imageManager.bind(f.context));for(var Ie=h.getCrossfadeParameters(),ze=0,qe=Ge;ze<qe.length;ze+=1){var ot=qe[ze],yt=f.transform.calculatePosMatrix(ot.toUnwrapped()),mt=ae?it(yt,S,f,ae,{tileID:ot,tileSize:te},Ie):ou(yt,S,v);Oe.draw(P,M.TRIANGLES,ye,_e,Le,Xe.disabled,mt,h.id,f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}}}}},debug:function(f,p,h){for(var v=0;v<h.length;v++)yi(f,p,h[v])},custom:function(f,p,h){var v=f.context,S=h.implementation;if("offscreen"===f.renderPass){var P=S.prerender;P&&(f.setCustomLayerDefaults(),v.setColorMode(f.colorModeForRenderPass()),P.call(S,v.gl,f.transform.customLayerMatrix()),v.setDirty(),f.setBaseState())}else if("translucent"===f.renderPass){f.setCustomLayerDefaults(),v.setColorMode(f.colorModeForRenderPass()),v.setStencilMode(De.disabled);var M="3d"===S.renderingMode?new ve(f.context.gl.LEQUAL,ve.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,ve.ReadOnly);v.setDepthMode(M),S.render(v.gl,f.transform.customLayerMatrix()),v.setDirty(),f.setBaseState(),v.bindFramebuffer.set(null)}}},ti=function(f,p){this.context=new He(f),this.transform=p,this._tileTextures={},this.setup(),this.numSublayers=Ee.maxUnderzooming+Ee.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Pn,this.gpuTimers={}};ti.prototype.resize=function(f,p){if(this.width=f*m.browser.devicePixelRatio,this.height=p*m.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var h=0,v=this.style._order;h<v.length;h+=1)this.style._layers[v[h]].resize()},ti.prototype.setup=function(){var f=this.context,p=new m.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(m.EXTENT,0),p.emplaceBack(0,m.EXTENT),p.emplaceBack(m.EXTENT,m.EXTENT),this.tileExtentBuffer=f.createVertexBuffer(p,ga.members),this.tileExtentSegments=m.SegmentVector.simpleSegment(0,0,4,2);var h=new m.StructArrayLayout2i4;h.emplaceBack(0,0),h.emplaceBack(m.EXTENT,0),h.emplaceBack(0,m.EXTENT),h.emplaceBack(m.EXTENT,m.EXTENT),this.debugBuffer=f.createVertexBuffer(h,ga.members),this.debugSegments=m.SegmentVector.simpleSegment(0,0,4,5);var v=new m.StructArrayLayout4i8;v.emplaceBack(0,0,0,0),v.emplaceBack(m.EXTENT,0,m.EXTENT,0),v.emplaceBack(0,m.EXTENT,0,m.EXTENT),v.emplaceBack(m.EXTENT,m.EXTENT,m.EXTENT,m.EXTENT),this.rasterBoundsBuffer=f.createVertexBuffer(v,we.members),this.rasterBoundsSegments=m.SegmentVector.simpleSegment(0,0,4,2);var S=new m.StructArrayLayout2i4;S.emplaceBack(0,0),S.emplaceBack(1,0),S.emplaceBack(0,1),S.emplaceBack(1,1),this.viewportBuffer=f.createVertexBuffer(S,ga.members),this.viewportSegments=m.SegmentVector.simpleSegment(0,0,4,2);var P=new m.StructArrayLayout1ui2;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=f.createIndexBuffer(P);var M=new m.StructArrayLayout3ui6;M.emplaceBack(0,1,2),M.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=f.createIndexBuffer(M),this.emptyTexture=new m.Texture(f,{width:1,height:1,data:new Uint8Array([0,0,0,0])},f.gl.RGBA);var H=this.context.gl;this.stencilClearMode=new De({func:H.ALWAYS,mask:0},0,255,H.ZERO,H.ZERO,H.ZERO)},ti.prototype.clearStencil=function(){var f=this.context,p=f.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var h=m.create();m.ortho(h,0,this.width,this.height,0,0,1),m.scale(h,h,[p.drawingBufferWidth,p.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(f,p.TRIANGLES,ve.disabled,this.stencilClearMode,$e.disabled,Xe.disabled,Wi(h),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ti.prototype._renderTileClippingMasks=function(f,p){if(this.currentStencilSource!==f.source&&f.isTileClipped()&&p&&p.length){this.currentStencilSource=f.source;var h=this.context,v=h.gl;this.nextStencilID+p.length>256&&this.clearStencil(),h.setColorMode($e.disabled),h.setDepthMode(ve.disabled);var S=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var P=0,M=p;P<M.length;P+=1){var H=M[P],te=this._tileClippingMaskIDs[H.key]=this.nextStencilID++;S.draw(h,v.TRIANGLES,ve.disabled,new De({func:v.ALWAYS,mask:0},te,255,v.KEEP,v.KEEP,v.REPLACE),$e.disabled,Xe.disabled,Wi(H.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ti.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var f=this.nextStencilID++,p=this.context.gl;return new De({func:p.NOTEQUAL,mask:255},f,255,p.KEEP,p.KEEP,p.REPLACE)},ti.prototype.stencilModeForClipping=function(f){var p=this.context.gl;return new De({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[f.key],0,p.KEEP,p.KEEP,p.REPLACE)},ti.prototype.stencilConfigForOverlap=function(f){var p,h=this.context.gl,v=f.sort(function(te,ae){return ae.overscaledZ-te.overscaledZ}),S=v[v.length-1].overscaledZ,P=v[0].overscaledZ-S+1;if(P>1){this.currentStencilSource=void 0,this.nextStencilID+P>256&&this.clearStencil();for(var M={},H=0;H<P;H++)M[H+S]=new De({func:h.GEQUAL,mask:255},H+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=P,[M,v]}return[(p={},p[S]=De.disabled,p),v]},ti.prototype.colorModeForRenderPass=function(){var f=this.context.gl;return this._showOverdrawInspector?new $e([f.CONSTANT_COLOR,f.ONE],new m.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?$e.unblended:$e.alphaBlended},ti.prototype.depthModeForSublayer=function(f,p,h){if(!this.opaquePassEnabledForLayer())return ve.disabled;var v=1-((1+this.currentLayer)*this.numSublayers+f)*this.depthEpsilon;return new ve(h||this.context.gl.LEQUAL,p,[v,v])},ti.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ti.prototype.render=function(f,p){var h=this;this.style=f,this.options=p,this.lineAtlas=f.lineAtlas,this.imageManager=f.imageManager,this.glyphManager=f.glyphManager,this.symbolFadeChange=f.placement.symbolFadeChange(m.browser.now()),this.imageManager.beginFrame();var v=this.style._order,S=this.style.sourceCaches;for(var P in S){var M=S[P];M.used&&M.prepare(this.context)}var H,te,ae={},ge={},_e={};for(var ye in S){var Le=S[ye];ae[ye]=Le.getVisibleCoordinates(),ge[ye]=ae[ye].slice().reverse(),_e[ye]=Le.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Oe=0;Oe<v.length;Oe++)if(this.style._layers[v[Oe]].is3D()){this.opaquePassCutoff=Oe;break}this.renderPass="offscreen";for(var Ge=0,Ie=v;Ge<Ie.length;Ge+=1){var ze=this.style._layers[Ie[Ge]];if(ze.hasOffscreenPass()&&!ze.isHidden(this.transform.zoom)){var qe=ge[ze.source];("custom"===ze.type||qe.length)&&this.renderLayer(this,S[ze.source],ze,qe)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?m.Color.black:m.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(f._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){var ot=this.style._layers[v[this.currentLayer]],yt=S[ot.source],mt=ae[ot.source];this._renderTileClippingMasks(ot,mt),this.renderLayer(this,yt,ot,mt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){var _t=this.style._layers[v[this.currentLayer]],Pt=S[_t.source],$t=("symbol"===_t.type?_e:ge)[_t.source];this._renderTileClippingMasks(_t,ae[_t.source]),this.renderLayer(this,Pt,_t,$t)}this.options.showTileBoundaries&&(m.values(this.style._layers).forEach(function(kt){kt.source&&!kt.isHidden(h.transform.zoom)&&(kt.source!==(te&&te.id)&&(te=h.style.sourceCaches[kt.source]),(!H||H.getSource().maxzoom<te.getSource().maxzoom)&&(H=te))}),H&&Rr.debug(this,H,H.getVisibleCoordinates())),this.options.showPadding&&function(kt){var tn=kt.transform.padding;ba(kt,kt.transform.height-(tn.top||0),3,_a),ba(kt,tn.bottom||0,3,ka),Il(kt,tn.left||0,3,So),Il(kt,kt.transform.width-(tn.right||0),3,Hu);var An,Cn,Vr,nn,wn=kt.transform.centerPoint;Cu(An=kt,(Cn=wn.x)-1,(Vr=kt.transform.height-wn.y)-10,2,20,nn=ho),Cu(An,Cn-10,Vr-1,20,2,nn)}(this),this.context.setDefault()},ti.prototype.renderLayer=function(f,p,h,v){h.isHidden(this.transform.zoom)||("background"===h.type||"custom"===h.type||v.length)&&(this.id=h.id,this.gpuTimingStart(h),Rr[h.type](f,p,h,v,this.style.placement.variableOffsets),this.gpuTimingEnd())},ti.prototype.gpuTimingStart=function(f){if(this.options.gpuTiming){var p=this.context.extTimerQuery,h=this.gpuTimers[f.id];h||(h=this.gpuTimers[f.id]={calls:0,cpuTime:0,query:p.createQueryEXT()}),h.calls++,p.beginQueryEXT(p.TIME_ELAPSED_EXT,h.query)}},ti.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var f=this.context.extTimerQuery;f.endQueryEXT(f.TIME_ELAPSED_EXT)}},ti.prototype.collectGpuTimers=function(){var f=this.gpuTimers;return this.gpuTimers={},f},ti.prototype.queryGpuTimers=function(f){var p={};for(var h in f){var v=f[h],S=this.context.extTimerQuery,P=S.getQueryObjectEXT(v.query,S.QUERY_RESULT_EXT)/1e6;S.deleteQueryEXT(v.query),p[h]=P}return p},ti.prototype.translatePosMatrix=function(f,p,h,v,S){if(!h[0]&&!h[1])return f;var P=S?"map"===v?this.transform.angle:0:"viewport"===v?-this.transform.angle:0;if(P){var M=Math.sin(P),H=Math.cos(P);h=[h[0]*H-h[1]*M,h[0]*M+h[1]*H]}var te=[S?h[0]:Wo(p,h[0],this.transform.zoom),S?h[1]:Wo(p,h[1],this.transform.zoom),0],ae=new Float32Array(16);return m.translate(ae,f,te),ae},ti.prototype.saveTileTexture=function(f){var p=this._tileTextures[f.size[0]];p?p.push(f):this._tileTextures[f.size[0]]=[f]},ti.prototype.getTileTexture=function(f){var p=this._tileTextures[f];return p&&p.length>0?p.pop():null},ti.prototype.isPatternMissing=function(f){if(!f)return!1;if(!f.from||!f.to)return!0;var p=this.imageManager.getPattern(f.from.toString()),h=this.imageManager.getPattern(f.to.toString());return!p||!h},ti.prototype.useProgram=function(f,p){this.cache=this.cache||{};var h=""+f+(p?p.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[h]||(this.cache[h]=new Cl(this.context,f,ca[f],p,vt[f],this._showOverdrawInspector)),this.cache[h]},ti.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ti.prototype.setBaseState=function(){var f=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(f.FUNC_ADD)},ti.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=m.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new m.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},ti.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var qs=function(f,p){this.points=f,this.planes=p};qs.fromInvProjectionMatrix=function(f,p,h){var v=Math.pow(2,h),S=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(M){return m.transformMat4([],M,f)}).map(function(M){return m.scale$1([],M,1/M[3]/p*v)}),P=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(M){var H=m.sub([],S[M[0]],S[M[1]]),te=m.sub([],S[M[2]],S[M[1]]),ae=m.normalize([],m.cross([],H,te)),ge=-m.dot(ae,S[M[1]]);return ae.concat(ge)});return new qs(S,P)};var au=function(f,p){this.min=f,this.max=p,this.center=m.scale$2([],m.add([],this.min,this.max),.5)};au.prototype.quadrant=function(f){for(var p=[f%2==0,f<2],h=m.clone$2(this.min),v=m.clone$2(this.max),S=0;S<p.length;S++)h[S]=p[S]?this.min[S]:this.center[S],v[S]=p[S]?this.center[S]:this.max[S];return v[2]=this.max[2],new au(h,v)},au.prototype.distanceX=function(f){return Math.max(Math.min(this.max[0],f[0]),this.min[0])-f[0]},au.prototype.distanceY=function(f){return Math.max(Math.min(this.max[1],f[1]),this.min[1])-f[1]},au.prototype.intersects=function(f){for(var p=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],h=!0,v=0;v<f.planes.length;v++){for(var S=f.planes[v],P=0,M=0;M<p.length;M++)P+=m.dot$1(S,p[M])>=0;if(0===P)return 0;P!==p.length&&(h=!1)}if(h)return 2;for(var H=0;H<3;H++){for(var te=Number.MAX_VALUE,ae=-Number.MAX_VALUE,ge=0;ge<f.points.length;ge++){var _e=f.points[ge][H]-this.min[H];te=Math.min(te,_e),ae=Math.max(ae,_e)}if(ae<0||te>this.max[H]-this.min[H])return 0}return 1};var Oo=function(f,p,h,v){if(void 0===f&&(f=0),void 0===p&&(p=0),void 0===h&&(h=0),void 0===v&&(v=0),isNaN(f)||f<0||isNaN(p)||p<0||isNaN(h)||h<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=f,this.bottom=p,this.left=h,this.right=v};Oo.prototype.interpolate=function(f,p,h){return null!=p.top&&null!=f.top&&(this.top=m.number(f.top,p.top,h)),null!=p.bottom&&null!=f.bottom&&(this.bottom=m.number(f.bottom,p.bottom,h)),null!=p.left&&null!=f.left&&(this.left=m.number(f.left,p.left,h)),null!=p.right&&null!=f.right&&(this.right=m.number(f.right,p.right,h)),this},Oo.prototype.getCenter=function(f,p){var h=m.clamp((this.left+f-this.right)/2,0,f),v=m.clamp((this.top+p-this.bottom)/2,0,p);return new m.Point(h,v)},Oo.prototype.equals=function(f){return this.top===f.top&&this.bottom===f.bottom&&this.left===f.left&&this.right===f.right},Oo.prototype.clone=function(){return new Oo(this.top,this.bottom,this.left,this.right)},Oo.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var kr=function(f,p,h,v,S){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===S||S,this._minZoom=f||0,this._maxZoom=p||22,this._minPitch=h??0,this._maxPitch=v??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new m.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Oo,this._posMatrixCache={},this._alignedPosMatrixCache={}},_r={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};kr.prototype.clone=function(){var f=new kr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return f.tileSize=this.tileSize,f.latRange=this.latRange,f.width=this.width,f.height=this.height,f._center=this._center,f.zoom=this.zoom,f.angle=this.angle,f._fov=this._fov,f._pitch=this._pitch,f._unmodified=this._unmodified,f._edgeInsets=this._edgeInsets.clone(),f._calcMatrices(),f},_r.minZoom.get=function(){return this._minZoom},_r.minZoom.set=function(f){this._minZoom!==f&&(this._minZoom=f,this.zoom=Math.max(this.zoom,f))},_r.maxZoom.get=function(){return this._maxZoom},_r.maxZoom.set=function(f){this._maxZoom!==f&&(this._maxZoom=f,this.zoom=Math.min(this.zoom,f))},_r.minPitch.get=function(){return this._minPitch},_r.minPitch.set=function(f){this._minPitch!==f&&(this._minPitch=f,this.pitch=Math.max(this.pitch,f))},_r.maxPitch.get=function(){return this._maxPitch},_r.maxPitch.set=function(f){this._maxPitch!==f&&(this._maxPitch=f,this.pitch=Math.min(this.pitch,f))},_r.renderWorldCopies.get=function(){return this._renderWorldCopies},_r.renderWorldCopies.set=function(f){void 0===f?f=!0:null===f&&(f=!1),this._renderWorldCopies=f},_r.worldSize.get=function(){return this.tileSize*this.scale},_r.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},_r.size.get=function(){return new m.Point(this.width,this.height)},_r.bearing.get=function(){return-this.angle/Math.PI*180},_r.bearing.set=function(f){var p=-m.wrap(f,-180,180)*Math.PI/180;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=m.create$2(),m.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},_r.pitch.get=function(){return this._pitch/Math.PI*180},_r.pitch.set=function(f){var p=m.clamp(f,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())},_r.fov.get=function(){return this._fov/Math.PI*180},_r.fov.set=function(f){f=Math.max(.01,Math.min(60,f)),this._fov!==f&&(this._unmodified=!1,this._fov=f/180*Math.PI,this._calcMatrices())},_r.zoom.get=function(){return this._zoom},_r.zoom.set=function(f){var p=Math.min(Math.max(f,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this.scale=this.zoomScale(p),this.tileZoom=Math.floor(p),this.zoomFraction=p-this.tileZoom,this._constrain(),this._calcMatrices())},_r.center.get=function(){return this._center},_r.center.set=function(f){f.lat===this._center.lat&&f.lng===this._center.lng||(this._unmodified=!1,this._center=f,this._constrain(),this._calcMatrices())},_r.padding.get=function(){return this._edgeInsets.toJSON()},_r.padding.set=function(f){this._edgeInsets.equals(f)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,f,1),this._calcMatrices())},_r.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},kr.prototype.isPaddingEqual=function(f){return this._edgeInsets.equals(f)},kr.prototype.interpolatePadding=function(f,p,h){this._unmodified=!1,this._edgeInsets.interpolate(f,p,h),this._constrain(),this._calcMatrices()},kr.prototype.coveringZoomLevel=function(f){var p=(f.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/f.tileSize));return Math.max(0,p)},kr.prototype.getVisibleUnwrappedCoordinates=function(f){var p=[new m.UnwrappedTileID(0,f)];if(this._renderWorldCopies)for(var h=this.pointCoordinate(new m.Point(0,0)),v=this.pointCoordinate(new m.Point(this.width,0)),S=this.pointCoordinate(new m.Point(this.width,this.height)),P=this.pointCoordinate(new m.Point(0,this.height)),M=Math.floor(Math.min(h.x,v.x,S.x,P.x)),H=Math.floor(Math.max(h.x,v.x,S.x,P.x)),te=M-1;te<=H+1;te++)0!==te&&p.push(new m.UnwrappedTileID(te,f));return p},kr.prototype.coveringTiles=function(f){var p=this.coveringZoomLevel(f),h=p;if(void 0!==f.minzoom&&p<f.minzoom)return[];void 0!==f.maxzoom&&p>f.maxzoom&&(p=f.maxzoom);var v=m.MercatorCoordinate.fromLngLat(this.center),S=Math.pow(2,p),P=[S*v.x,S*v.y,0],M=qs.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,p),H=f.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(H=p);var te=function(kt){return{aabb:new au([kt*S,0,0],[(kt+1)*S,S,0]),zoom:0,x:0,y:0,wrap:kt,fullyVisible:!1}},ae=[],ge=[],_e=p,ye=f.reparseOverscaled?h:p;if(this._renderWorldCopies)for(var Le=1;Le<=3;Le++)ae.push(te(-Le)),ae.push(te(Le));for(ae.push(te(0));ae.length>0;){var Oe=ae.pop(),Ge=Oe.x,Ie=Oe.y,ze=Oe.fullyVisible;if(!ze){var qe=Oe.aabb.intersects(M);if(0===qe)continue;ze=2===qe}var ot=Oe.aabb.distanceX(P),yt=Oe.aabb.distanceY(P),mt=Math.max(Math.abs(ot),Math.abs(yt));if(Oe.zoom===_e||mt>3+(1<<_e-Oe.zoom)-2&&Oe.zoom>=H)ge.push({tileID:new m.OverscaledTileID(Oe.zoom===_e?ye:Oe.zoom,Oe.wrap,Oe.zoom,Ge,Ie),distanceSq:m.sqrLen([P[0]-.5-Ge,P[1]-.5-Ie])});else for(var _t=0;_t<4;_t++){var Pt=(Ge<<1)+_t%2,$t=(Ie<<1)+(_t>>1);ae.push({aabb:Oe.aabb.quadrant(_t),zoom:Oe.zoom+1,x:Pt,y:$t,wrap:Oe.wrap,fullyVisible:ze})}}return ge.sort(function(kt,tn){return kt.distanceSq-tn.distanceSq}).map(function(kt){return kt.tileID})},kr.prototype.resize=function(f,p){this.width=f,this.height=p,this.pixelsToGLUnits=[2/f,-2/p],this._constrain(),this._calcMatrices()},_r.unmodified.get=function(){return this._unmodified},kr.prototype.zoomScale=function(f){return Math.pow(2,f)},kr.prototype.scaleZoom=function(f){return Math.log(f)/Math.LN2},kr.prototype.project=function(f){var p=m.clamp(f.lat,-this.maxValidLatitude,this.maxValidLatitude);return new m.Point(m.mercatorXfromLng(f.lng)*this.worldSize,m.mercatorYfromLat(p)*this.worldSize)},kr.prototype.unproject=function(f){return new m.MercatorCoordinate(f.x/this.worldSize,f.y/this.worldSize).toLngLat()},_r.point.get=function(){return this.project(this.center)},kr.prototype.setLocationAtPoint=function(f,p){var h=this.pointCoordinate(p),v=this.pointCoordinate(this.centerPoint),S=this.locationCoordinate(f),P=new m.MercatorCoordinate(S.x-(h.x-v.x),S.y-(h.y-v.y));this.center=this.coordinateLocation(P),this._renderWorldCopies&&(this.center=this.center.wrap())},kr.prototype.locationPoint=function(f){return this.coordinatePoint(this.locationCoordinate(f))},kr.prototype.pointLocation=function(f){return this.coordinateLocation(this.pointCoordinate(f))},kr.prototype.locationCoordinate=function(f){return m.MercatorCoordinate.fromLngLat(f)},kr.prototype.coordinateLocation=function(f){return f.toLngLat()},kr.prototype.pointCoordinate=function(f){var p=[f.x,f.y,0,1],h=[f.x,f.y,1,1];m.transformMat4(p,p,this.pixelMatrixInverse),m.transformMat4(h,h,this.pixelMatrixInverse);var v=p[3],S=h[3],P=p[1]/v,M=h[1]/S,H=p[2]/v,te=h[2]/S,ae=H===te?0:(0-H)/(te-H);return new m.MercatorCoordinate(m.number(p[0]/v,h[0]/S,ae)/this.worldSize,m.number(P,M,ae)/this.worldSize)},kr.prototype.coordinatePoint=function(f){var p=[f.x*this.worldSize,f.y*this.worldSize,0,1];return m.transformMat4(p,p,this.pixelMatrix),new m.Point(p[0]/p[3],p[1]/p[3])},kr.prototype.getBounds=function(){return(new m.LngLatBounds).extend(this.pointLocation(new m.Point(0,0))).extend(this.pointLocation(new m.Point(this.width,0))).extend(this.pointLocation(new m.Point(this.width,this.height))).extend(this.pointLocation(new m.Point(0,this.height)))},kr.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new m.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},kr.prototype.setMaxBounds=function(f){f?(this.lngRange=[f.getWest(),f.getEast()],this.latRange=[f.getSouth(),f.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},kr.prototype.calculatePosMatrix=function(f,p){void 0===p&&(p=!1);var h=f.key,v=p?this._alignedPosMatrixCache:this._posMatrixCache;if(v[h])return v[h];var S=f.canonical,P=this.worldSize/this.zoomScale(S.z),M=S.x+Math.pow(2,S.z)*f.wrap,H=m.identity(new Float64Array(16));return m.translate(H,H,[M*P,S.y*P,0]),m.scale(H,H,[P/m.EXTENT,P/m.EXTENT,1]),m.multiply(H,p?this.alignedProjMatrix:this.projMatrix,H),v[h]=new Float32Array(H),v[h]},kr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},kr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var f,p,h,v,S=-90,P=90,M=-180,H=180,te=this.size,ae=this._unmodified;if(this.latRange){var ge=this.latRange;S=m.mercatorYfromLat(ge[1])*this.worldSize,f=(P=m.mercatorYfromLat(ge[0])*this.worldSize)-S<te.y?te.y/(P-S):0}if(this.lngRange){var _e=this.lngRange;M=m.mercatorXfromLng(_e[0])*this.worldSize,p=(H=m.mercatorXfromLng(_e[1])*this.worldSize)-M<te.x?te.x/(H-M):0}var ye=this.point,Le=Math.max(p||0,f||0);if(Le)return this.center=this.unproject(new m.Point(p?(H+M)/2:ye.x,f?(P+S)/2:ye.y)),this.zoom+=this.scaleZoom(Le),this._unmodified=ae,void(this._constraining=!1);if(this.latRange){var Oe=ye.y,Ge=te.y/2;Oe-Ge<S&&(v=S+Ge),Oe+Ge>P&&(v=P-Ge)}if(this.lngRange){var Ie=ye.x,ze=te.x/2;Ie-ze<M&&(h=M+ze),Ie+ze>H&&(h=H-ze)}void 0===h&&void 0===v||(this.center=this.unproject(new m.Point(void 0!==h?h:ye.x,void 0!==v?v:ye.y))),this._unmodified=ae,this._constraining=!1}},kr.prototype._calcMatrices=function(){if(this.height){var f=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var p=Math.PI/2+this._pitch,h=this._fov*(.5+f.y/this.height),v=Math.sin(h)*this.cameraToCenterDistance/Math.sin(m.clamp(Math.PI-p-h,.01,Math.PI-.01)),S=this.point,P=S.x,M=S.y,H=1.01*(Math.cos(Math.PI/2-this._pitch)*v+this.cameraToCenterDistance),te=this.height/50,ae=new Float64Array(16);m.perspective(ae,this._fov,this.width/this.height,te,H),ae[8]=2*-f.x/this.width,ae[9]=2*f.y/this.height,m.scale(ae,ae,[1,-1,1]),m.translate(ae,ae,[0,0,-this.cameraToCenterDistance]),m.rotateX(ae,ae,this._pitch),m.rotateZ(ae,ae,this.angle),m.translate(ae,ae,[-P,-M,0]),this.mercatorMatrix=m.scale([],ae,[this.worldSize,this.worldSize,this.worldSize]),m.scale(ae,ae,[1,1,m.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=ae,this.invProjMatrix=m.invert([],this.projMatrix);var ge=this.width%2/2,_e=this.height%2/2,ye=Math.cos(this.angle),Le=Math.sin(this.angle),Oe=P-Math.round(P)+ye*ge+Le*_e,Ge=M-Math.round(M)+ye*_e+Le*ge,Ie=new Float64Array(ae);if(m.translate(Ie,Ie,[Oe>.5?Oe-1:Oe,Ge>.5?Ge-1:Ge,0]),this.alignedProjMatrix=Ie,ae=m.create(),m.scale(ae,ae,[this.width/2,-this.height/2,1]),m.translate(ae,ae,[1,-1,0]),this.labelPlaneMatrix=ae,ae=m.create(),m.scale(ae,ae,[1,-1,1]),m.translate(ae,ae,[-1,-1,0]),m.scale(ae,ae,[2/this.width,2/this.height,1]),this.glCoordMatrix=ae,this.pixelMatrix=m.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(ae=m.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=ae,this._posMatrixCache={},this._alignedPosMatrixCache={}}},kr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var f=this.pointCoordinate(new m.Point(0,0)),p=[f.x*this.worldSize,f.y*this.worldSize,0,1];return m.transformMat4(p,p,this.pixelMatrix)[3]/this.cameraToCenterDistance},kr.prototype.getCameraPoint=function(){var f=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new m.Point(0,f))},kr.prototype.getCameraQueryGeometry=function(f){var p=this.getCameraPoint();if(1===f.length)return[f[0],p];for(var h=p.x,v=p.y,S=p.x,P=p.y,M=0,H=f;M<H.length;M+=1){var te=H[M];h=Math.min(h,te.x),v=Math.min(v,te.y),S=Math.max(S,te.x),P=Math.max(P,te.y)}return[new m.Point(h,v),new m.Point(S,v),new m.Point(S,P),new m.Point(h,P),new m.Point(h,v)]},Object.defineProperties(kr.prototype,_r);var Ws=function(f){var p,h,v,S;this._hashName=f&&encodeURIComponent(f),m.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(p=this._updateHashUnthrottled.bind(this),h=!1,v=null,S=function(){v=null,h&&(p(),v=setTimeout(S,300),h=!1)},function(){return h=!0,v||S(),v})};Ws.prototype.addTo=function(f){return this._map=f,m.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ws.prototype.remove=function(){return m.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ws.prototype.getHashString=function(f){var p=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,v=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,v),P=Math.round(p.lng*S)/S,M=Math.round(p.lat*S)/S,H=this._map.getBearing(),te=this._map.getPitch(),ae="";if(ae+=f?"/"+P+"/"+M+"/"+h:h+"/"+M+"/"+P,(H||te)&&(ae+="/"+Math.round(10*H)/10),te&&(ae+="/"+Math.round(te)),this._hashName){var ge=this._hashName,_e=!1,ye=m.window.location.hash.slice(1).split("&").map(function(Le){var Oe=Le.split("=")[0];return Oe===ge?(_e=!0,Oe+"="+ae):Le}).filter(function(Le){return Le});return _e||ye.push(ge+"="+ae),"#"+ye.join("&")}return"#"+ae},Ws.prototype._getCurrentHash=function(){var f,p=this,h=m.window.location.hash.replace("#","");return this._hashName?(h.split("&").map(function(v){return v.split("=")}).forEach(function(v){v[0]===p._hashName&&(f=v)}),(f&&f[1]||"").split("/")):h.split("/")},Ws.prototype._onHashChange=function(){var f=this._getCurrentHash();if(f.length>=3&&!f.some(function(h){return isNaN(h)})){var p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(f[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:p,pitch:+(f[4]||0)}),!0}return!1},Ws.prototype._updateHashUnthrottled=function(){var f=m.window.location.href.replace(/(#.+)?$/,this.getHashString());try{m.window.history.replaceState(m.window.history.state,null,f)}catch{}};var vs={linearity:.3,easing:m.bezier(0,0,.3,1)},tl=m.extend({deceleration:2500,maxSpeed:1400},vs),_s=m.extend({deceleration:20,maxSpeed:1400},vs),Tl=m.extend({deceleration:1e3,maxSpeed:360},vs),Oc=m.extend({deceleration:1e3,maxSpeed:90},vs),nl=function(f){this._map=f,this.clear()};function rl(f,p){(!f.duration||f.duration<p.duration)&&(f.duration=p.duration,f.easing=p.easing)}function $u(f,p,h){var v=h.maxSpeed,S=h.linearity,P=h.deceleration,M=m.clamp(f*S/(p/1e3),-v,v),H=Math.abs(M)/(P*S);return{easing:h.easing,duration:1e3*H,amount:M*(H/2)}}nl.prototype.clear=function(){this._inertiaBuffer=[]},nl.prototype.record=function(f){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:m.browser.now(),settings:f})},nl.prototype._drainInertiaBuffer=function(){for(var f=this._inertiaBuffer,p=m.browser.now();f.length>0&&p-f[0].time>160;)f.shift()},nl.prototype._onMoveEnd=function(f){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var p={zoom:0,bearing:0,pitch:0,pan:new m.Point(0,0),pinchAround:void 0,around:void 0},h=0,v=this._inertiaBuffer;h<v.length;h+=1){var S=v[h].settings;p.zoom+=S.zoomDelta||0,p.bearing+=S.bearingDelta||0,p.pitch+=S.pitchDelta||0,S.panDelta&&p.pan._add(S.panDelta),S.around&&(p.around=S.around),S.pinchAround&&(p.pinchAround=S.pinchAround)}var P=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,M={};if(p.pan.mag()){var H=$u(p.pan.mag(),P,m.extend({},tl,f||{}));M.offset=p.pan.mult(H.amount/p.pan.mag()),M.center=this._map.transform.center,rl(M,H)}if(p.zoom){var te=$u(p.zoom,P,_s);M.zoom=this._map.transform.zoom+te.amount,rl(M,te)}if(p.bearing){var ae=$u(p.bearing,P,Tl);M.bearing=this._map.transform.bearing+m.clamp(ae.amount,-179,179),rl(M,ae)}if(p.pitch){var ge=$u(p.pitch,P,Oc);M.pitch=this._map.transform.pitch+ge.amount,rl(M,ge)}if(M.zoom||M.bearing){var _e=void 0===p.pinchAround?p.around:p.pinchAround;M.around=_e?this._map.unproject(_e):this._map.getCenter()}return this.clear(),m.extend(M,{noMoveStart:!0})}};var Qo=function(f){function p(v,S,P,M){void 0===M&&(M={});var H=G.mousePos(S.getCanvasContainer(),P),te=S.unproject(H);f.call(this,v,m.extend({point:H,lngLat:te,originalEvent:P},M)),this._defaultPrevented=!1,this.target=S}f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p;var h={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},h.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,h),p}(m.Event),wa=function(f){function p(v,S,P){var M="touchend"===v?P.changedTouches:P.touches,H=G.touchPos(S.getCanvasContainer(),M),te=H.map(function(_e){return S.unproject(_e)}),ae=H.reduce(function(_e,ye,Le,Oe){return _e.add(ye.div(Oe.length))},new m.Point(0,0)),ge=S.unproject(ae);f.call(this,v,{points:H,point:ae,lngLats:te,lngLat:ge,originalEvent:P}),this._defaultPrevented=!1}f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p;var h={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},h.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,h),p}(m.Event),ic=function(f){function p(v,S,P){f.call(this,v,{originalEvent:P}),this._defaultPrevented=!1}f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p;var h={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},h.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,h),p}(m.Event),Uo=function(f,p){this._map=f,this._clickTolerance=p.clickTolerance};Uo.prototype.reset=function(){delete this._mousedownPos},Uo.prototype.wheel=function(f){return this._firePreventable(new ic(f.type,this._map,f))},Uo.prototype.mousedown=function(f,p){return this._mousedownPos=p,this._firePreventable(new Qo(f.type,this._map,f))},Uo.prototype.mouseup=function(f){this._map.fire(new Qo(f.type,this._map,f))},Uo.prototype.click=function(f,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new Qo(f.type,this._map,f))},Uo.prototype.dblclick=function(f){return this._firePreventable(new Qo(f.type,this._map,f))},Uo.prototype.mouseover=function(f){this._map.fire(new Qo(f.type,this._map,f))},Uo.prototype.mouseout=function(f){this._map.fire(new Qo(f.type,this._map,f))},Uo.prototype.touchstart=function(f){return this._firePreventable(new wa(f.type,this._map,f))},Uo.prototype.touchmove=function(f){this._map.fire(new wa(f.type,this._map,f))},Uo.prototype.touchend=function(f){this._map.fire(new wa(f.type,this._map,f))},Uo.prototype.touchcancel=function(f){this._map.fire(new wa(f.type,this._map,f))},Uo.prototype._firePreventable=function(f){if(this._map.fire(f),f.defaultPrevented)return{}},Uo.prototype.isEnabled=function(){return!0},Uo.prototype.isActive=function(){return!1},Uo.prototype.enable=function(){},Uo.prototype.disable=function(){};var Fa=function(f){this._map=f};Fa.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Fa.prototype.mousemove=function(f){this._map.fire(new Qo(f.type,this._map,f))},Fa.prototype.mousedown=function(){this._delayContextMenu=!0},Fa.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Qo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Fa.prototype.contextmenu=function(f){this._delayContextMenu?this._contextMenuEvent=f:this._map.fire(new Qo(f.type,this._map,f)),this._map.listens("contextmenu")&&f.preventDefault()},Fa.prototype.isEnabled=function(){return!0},Fa.prototype.isActive=function(){return!1},Fa.prototype.enable=function(){},Fa.prototype.disable=function(){};var dn=function(f,p){this._map=f,this._el=f.getCanvasContainer(),this._container=f.getContainer(),this._clickTolerance=p.clickTolerance||1};function Id(f,p){for(var h={},v=0;v<f.length;v++)h[f[v].identifier]=p[v];return h}dn.prototype.isEnabled=function(){return!!this._enabled},dn.prototype.isActive=function(){return!!this._active},dn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},dn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},dn.prototype.mousedown=function(f,p){this.isEnabled()&&f.shiftKey&&0===f.button&&(G.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)},dn.prototype.mousemoveWindow=function(f,p){if(this._active){var h=p;if(!(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)){var v=this._startPos;this._lastPos=h,this._box||(this._box=G.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",f));var S=Math.min(v.x,h.x),P=Math.max(v.x,h.x),M=Math.min(v.y,h.y),H=Math.max(v.y,h.y);G.setTransform(this._box,"translate("+S+"px,"+M+"px)"),this._box.style.width=P-S+"px",this._box.style.height=H-M+"px"}}},dn.prototype.mouseupWindow=function(f,p){var h=this;if(this._active&&0===f.button){var v=this._startPos,S=p;if(this.reset(),G.suppressClick(),v.x!==S.x||v.y!==S.y)return this._map.fire(new m.Event("boxzoomend",{originalEvent:f})),{cameraAnimation:function(P){return P.fitScreenCoordinates(v,S,h._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",f)}},dn.prototype.keydown=function(f){this._active&&27===f.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",f))},dn.prototype.reset=function(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(G.remove(this._box),this._box=null),G.enableDrag(),delete this._startPos,delete this._lastPos},dn.prototype._fireEvent=function(f,p){return this._map.fire(new m.Event(f,{originalEvent:p}))};var Lc=function(f){this.reset(),this.numTouches=f.numTouches};Lc.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Lc.prototype.touchstart=function(f,p,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=f.timeStamp),h.length===this.numTouches&&(this.centroid=function(v){for(var S=new m.Point(0,0),P=0,M=v;P<M.length;P+=1)S._add(M[P]);return S.div(v.length)}(p),this.touches=Id(h,p)))},Lc.prototype.touchmove=function(f,p,h){if(!this.aborted&&this.centroid){var v=Id(h,p);for(var S in this.touches){var P=v[S];(!P||P.dist(this.touches[S])>30)&&(this.aborted=!0)}}},Lc.prototype.touchend=function(f,p,h){if((!this.centroid||f.timeStamp-this.startTime>500)&&(this.aborted=!0),0===h.length){var v=!this.aborted&&this.centroid;if(this.reset(),v)return v}};var bs=function(f){this.singleTap=new Lc(f),this.numTaps=f.numTaps,this.reset()};bs.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},bs.prototype.touchstart=function(f,p,h){this.singleTap.touchstart(f,p,h)},bs.prototype.touchmove=function(f,p,h){this.singleTap.touchmove(f,p,h)},bs.prototype.touchend=function(f,p,h){var v=this.singleTap.touchend(f,p,h);if(v){var S=f.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(v)<30;if(S&&P||this.reset(),this.count++,this.lastTime=f.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}};var ws=function(){this._zoomIn=new bs({numTouches:1,numTaps:2}),this._zoomOut=new bs({numTouches:2,numTaps:1}),this.reset()};ws.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ws.prototype.touchstart=function(f,p,h){this._zoomIn.touchstart(f,p,h),this._zoomOut.touchstart(f,p,h)},ws.prototype.touchmove=function(f,p,h){this._zoomIn.touchmove(f,p,h),this._zoomOut.touchmove(f,p,h)},ws.prototype.touchend=function(f,p,h){var v=this,S=this._zoomIn.touchend(f,p,h),P=this._zoomOut.touchend(f,p,h);return S?(this._active=!0,f.preventDefault(),setTimeout(function(){return v.reset()},0),{cameraAnimation:function(M){return M.easeTo({duration:300,zoom:M.getZoom()+1,around:M.unproject(S)},{originalEvent:f})}}):P?(this._active=!0,f.preventDefault(),setTimeout(function(){return v.reset()},0),{cameraAnimation:function(M){return M.easeTo({duration:300,zoom:M.getZoom()-1,around:M.unproject(P)},{originalEvent:f})}}):void 0},ws.prototype.touchcancel=function(){this.reset()},ws.prototype.enable=function(){this._enabled=!0},ws.prototype.disable=function(){this._enabled=!1,this.reset()},ws.prototype.isEnabled=function(){return this._enabled},ws.prototype.isActive=function(){return this._active};var su={0:1,2:2},za=function(f){this.reset(),this._clickTolerance=f.clickTolerance||1};za.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},za.prototype._correctButton=function(f,p){return!1},za.prototype._move=function(f,p){return{}},za.prototype.mousedown=function(f,p){if(!this._lastPoint){var h=G.mouseButton(f);this._correctButton(f,h)&&(this._lastPoint=p,this._eventButton=h)}},za.prototype.mousemoveWindow=function(f,p){var v,P,h=this._lastPoint;if(h)if(f.preventDefault(),P=su[this._eventButton],void 0===(v=f).buttons||(v.buttons&P)!==P)this.reset();else if(this._moved||!(p.dist(h)<this._clickTolerance))return this._moved=!0,this._lastPoint=p,this._move(h,p)},za.prototype.mouseupWindow=function(f){this._lastPoint&&G.mouseButton(f)===this._eventButton&&(this._moved&&G.suppressClick(),this.reset())},za.prototype.enable=function(){this._enabled=!0},za.prototype.disable=function(){this._enabled=!1,this.reset()},za.prototype.isEnabled=function(){return this._enabled},za.prototype.isActive=function(){return this._active};var fn=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.mousedown=function(h,v){f.prototype.mousedown.call(this,h,v),this._lastPoint&&(this._active=!0)},p.prototype._correctButton=function(h,v){return 0===v&&!h.ctrlKey},p.prototype._move=function(h,v){return{around:v,panDelta:v.sub(h)}},p}(za),Td=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype._correctButton=function(h,v){return 0===v&&h.ctrlKey||2===v},p.prototype._move=function(h,v){var S=.8*(v.x-h.x);if(S)return this._active=!0,{bearingDelta:S}},p.prototype.contextmenu=function(h){h.preventDefault()},p}(za),Nc=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype._correctButton=function(h,v){return 0===v&&h.ctrlKey||2===v},p.prototype._move=function(h,v){var S=-.5*(v.y-h.y);if(S)return this._active=!0,{pitchDelta:S}},p.prototype.contextmenu=function(h){h.preventDefault()},p}(za),Ms=function(f){this._minTouches=1,this._clickTolerance=f.clickTolerance||1,this.reset()};Ms.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new m.Point(0,0)},Ms.prototype.touchstart=function(f,p,h){return this._calculateTransform(f,p,h)},Ms.prototype.touchmove=function(f,p,h){if(this._active&&!(h.length<this._minTouches))return f.preventDefault(),this._calculateTransform(f,p,h)},Ms.prototype.touchend=function(f,p,h){this._calculateTransform(f,p,h),this._active&&h.length<this._minTouches&&this.reset()},Ms.prototype.touchcancel=function(){this.reset()},Ms.prototype._calculateTransform=function(f,p,h){h.length>0&&(this._active=!0);var v=Id(h,p),S=new m.Point(0,0),P=new m.Point(0,0),M=0;for(var H in v){var te=v[H],ae=this._touches[H];ae&&(S._add(te),P._add(te.sub(ae)),M++,v[H]=te)}if(this._touches=v,!(M<this._minTouches)&&P.mag()){var ge=P.div(M);if(this._sum._add(ge),!(this._sum.mag()<this._clickTolerance))return{around:S.div(M),panDelta:ge}}},Ms.prototype.enable=function(){this._enabled=!0},Ms.prototype.disable=function(){this._enabled=!1,this.reset()},Ms.prototype.isEnabled=function(){return this._enabled},Ms.prototype.isActive=function(){return this._active};var es=function(){this.reset()};function oc(f,p,h){for(var v=0;v<f.length;v++)if(f[v].identifier===h)return p[v]}function Ph(f,p){return Math.log(f/p)/Math.LN2}es.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},es.prototype._start=function(f){},es.prototype._move=function(f,p,h){return{}},es.prototype.touchstart=function(f,p,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([p[0],p[1]]))},es.prototype.touchmove=function(f,p,h){if(this._firstTwoTouches){f.preventDefault();var v=this._firstTwoTouches,S=v[1],P=oc(h,p,v[0]),M=oc(h,p,S);if(P&&M){var H=this._aroundCenter?null:P.add(M).div(2);return this._move([P,M],H,f)}}},es.prototype.touchend=function(f,p,h){if(this._firstTwoTouches){var v=this._firstTwoTouches,S=v[1],P=oc(h,p,v[0]),M=oc(h,p,S);P&&M||(this._active&&G.suppressClick(),this.reset())}},es.prototype.touchcancel=function(){this.reset()},es.prototype.enable=function(f){this._enabled=!0,this._aroundCenter=!!f&&"center"===f.around},es.prototype.disable=function(){this._enabled=!1,this.reset()},es.prototype.isEnabled=function(){return this._enabled},es.prototype.isActive=function(){return this._active};var xs=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.reset=function(){f.prototype.reset.call(this),delete this._distance,delete this._startDistance},p.prototype._start=function(h){this._startDistance=this._distance=h[0].dist(h[1])},p.prototype._move=function(h,v){var S=this._distance;if(this._distance=h[0].dist(h[1]),this._active||!(Math.abs(Ph(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ph(this._distance,S),pinchAround:v}},p}(es);function xa(f,p){return 180*f.angleWith(p)/Math.PI}var il=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.reset=function(){f.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},p.prototype._start=function(h){this._startVector=this._vector=h[0].sub(h[1]),this._minDiameter=h[0].dist(h[1])},p.prototype._move=function(h,v){var S=this._vector;if(this._vector=h[0].sub(h[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:xa(this._vector,S),pinchAround:v}},p.prototype._isBelowThreshold=function(h){this._minDiameter=Math.min(this._minDiameter,h.mag());var v=25/(Math.PI*this._minDiameter)*360,S=xa(h,this._startVector);return Math.abs(S)<v},p}(es);function ac(f){return Math.abs(f.y)>Math.abs(f.x)}var gf=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.reset=function(){f.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},p.prototype._start=function(h){this._lastPoints=h,ac(h[0].sub(h[1]))&&(this._valid=!1)},p.prototype._move=function(h,v,S){var P=h[0].sub(this._lastPoints[0]),M=h[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(P,M,S.timeStamp),this._valid)return this._lastPoints=h,this._active=!0,{pitchDelta:(P.y+M.y)/2*-.5}},p.prototype.gestureBeginsVertically=function(h,v,S){if(void 0!==this._valid)return this._valid;var P=h.mag()>=2,M=v.mag()>=2;if(P||M){if(!P||!M)return void 0===this._firstMove&&(this._firstMove=S),S-this._firstMove<100&&void 0;var H=h.y>0==v.y>0;return ac(h)&&ac(v)&&H}},p}(es),Dh={panStep:100,bearingStep:15,pitchStep:10},Ti=function(){var f=Dh;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1};function Ah(f){return f*(2-f)}Ti.prototype.reset=function(){this._active=!1},Ti.prototype.keydown=function(f){var p=this;if(!(f.altKey||f.ctrlKey||f.metaKey)){var h=0,v=0,S=0,P=0,M=0;switch(f.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:f.shiftKey?v=-1:(f.preventDefault(),P=-1);break;case 39:f.shiftKey?v=1:(f.preventDefault(),P=1);break;case 38:f.shiftKey?S=1:(f.preventDefault(),M=-1);break;case 40:f.shiftKey?S=-1:(f.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(v=0,S=0),{cameraAnimation:function(H){var te=H.getZoom();H.easeTo({duration:300,easeId:"keyboardHandler",easing:Ah,zoom:h?Math.round(te)+h*(f.shiftKey?2:1):te,bearing:H.getBearing()+v*p._bearingStep,pitch:H.getPitch()+S*p._pitchStep,offset:[-P*p._panStep,-M*p._panStep],center:H.getCenter()},{originalEvent:f})}}}},Ti.prototype.enable=function(){this._enabled=!0},Ti.prototype.disable=function(){this._enabled=!1,this.reset()},Ti.prototype.isEnabled=function(){return this._enabled},Ti.prototype.isActive=function(){return this._active},Ti.prototype.disableRotation=function(){this._rotationDisabled=!0},Ti.prototype.enableRotation=function(){this._rotationDisabled=!1};var no=function(f,p){this._map=f,this._el=f.getCanvasContainer(),this._handler=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,m.bindAll(["_onTimeout"],this)};no.prototype.setZoomRate=function(f){this._defaultZoomRate=f},no.prototype.setWheelZoomRate=function(f){this._wheelZoomRate=f},no.prototype.isEnabled=function(){return!!this._enabled},no.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},no.prototype.isZooming=function(){return!!this._zooming},no.prototype.enable=function(f){this.isEnabled()||(this._enabled=!0,this._aroundCenter=f&&"center"===f.around)},no.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},no.prototype.wheel=function(f){if(this.isEnabled()){var p=f.deltaMode===m.window.WheelEvent.DOM_DELTA_LINE?40*f.deltaY:f.deltaY,h=m.browser.now(),v=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,0!==p&&p%4.000244140625==0?this._type="wheel":0!==p&&Math.abs(p)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,f)):this._type||(this._type=Math.abs(v*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),f.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=f,this._delta-=p,this._active||this._start(f)),f.preventDefault()}},no.prototype._onTimeout=function(f){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},no.prototype._start=function(f){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var p=G.mousePos(this._el,f);this._around=m.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(p)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},no.prototype.renderFrame=function(){var f=this;if(this._frameId&&(this._frameId=null,this.isActive())){var p=this._map.transform;if(0!==this._delta){var h="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,v=2/(1+Math.exp(-Math.abs(this._delta*h)));this._delta<0&&0!==v&&(v=1/v);var S="number"==typeof this._targetZoom?p.zoomScale(this._targetZoom):p.scale;this._targetZoom=Math.min(p.maxZoom,Math.max(p.minZoom,p.scaleZoom(S*v))),"wheel"===this._type&&(this._startZoom=p.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var P,M="number"==typeof this._targetZoom?this._targetZoom:p.zoom,H=this._startZoom,te=this._easing,ae=!1;if("wheel"===this._type&&H&&te){var ge=Math.min((m.browser.now()-this._lastWheelEventTime)/200,1),_e=te(ge);P=m.number(H,M,_e),ge<1?this._frameId||(this._frameId=!0):ae=!0}else P=M,ae=!0;return this._active=!0,ae&&(this._active=!1,this._finishTimeout=setTimeout(function(){f._zooming=!1,f._handler._triggerRenderFrame(),delete f._targetZoom,delete f._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ae,zoomDelta:P-p.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},no.prototype._smoothOutEasing=function(f){var p=m.ease;if(this._prevEase){var h=this._prevEase,v=(m.browser.now()-h.start)/h.duration,S=h.easing(v+.01)-h.easing(v),P=.27/Math.sqrt(S*S+1e-4)*.01,M=Math.sqrt(.0729-P*P);p=m.bezier(P,M,.25,1)}return this._prevEase={start:m.browser.now(),duration:f,easing:p},p},no.prototype.reset=function(){this._active=!1};var Wr=function(f,p){this._clickZoom=f,this._tapZoom=p};Wr.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Wr.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Wr.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Wr.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var po=function(){this.reset()};po.prototype.reset=function(){this._active=!1},po.prototype.dblclick=function(f,p){return f.preventDefault(),{cameraAnimation:function(h){h.easeTo({duration:300,zoom:h.getZoom()+(f.shiftKey?-1:1),around:h.unproject(p)},{originalEvent:f})}}},po.prototype.enable=function(){this._enabled=!0},po.prototype.disable=function(){this._enabled=!1,this.reset()},po.prototype.isEnabled=function(){return this._enabled},po.prototype.isActive=function(){return this._active};var Es=function(){this._tap=new bs({numTouches:1,numTaps:1}),this.reset()};Es.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Es.prototype.touchstart=function(f,p,h){this._swipePoint||(this._tapTime&&f.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?h.length>0&&(this._swipePoint=p[0],this._swipeTouch=h[0].identifier):this._tap.touchstart(f,p,h))},Es.prototype.touchmove=function(f,p,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;var v=p[0],S=v.y-this._swipePoint.y;return this._swipePoint=v,f.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(f,p,h)},Es.prototype.touchend=function(f,p,h){this._tapTime?this._swipePoint&&0===h.length&&this.reset():this._tap.touchend(f,p,h)&&(this._tapTime=f.timeStamp)},Es.prototype.touchcancel=function(){this.reset()},Es.prototype.enable=function(){this._enabled=!0},Es.prototype.disable=function(){this._enabled=!1,this.reset()},Es.prototype.isEnabled=function(){return this._enabled},Es.prototype.isActive=function(){return this._active};var ts=function(f,p,h){this._el=f,this._mousePan=p,this._touchPan=h};ts.prototype.enable=function(f){this._inertiaOptions=f||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")},ts.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")},ts.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},ts.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Zs=function(f,p,h){this._pitchWithRotate=f.pitchWithRotate,this._mouseRotate=p,this._mousePitch=h};Zs.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Zs.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Zs.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Zs.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Co=function(f,p,h,v){this._el=f,this._touchZoom=p,this._touchRotate=h,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0};Co.prototype.enable=function(f){this._touchZoom.enable(f),this._rotationDisabled||this._touchRotate.enable(f),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")},Co.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")},Co.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Co.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Co.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Co.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var qu=function(f){return f.zoom||f.drag||f.pitch||f.rotate},ns=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p}(m.Event);function Pl(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}var Yt=function(f,p){this._map=f,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new nl(f),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p),m.bindAll(["handleEvent","handleWindowEvent"],this);var h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[m.window.document,"mousemove",{capture:!0}],[m.window.document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[m.window,"blur",void 0]];for(var v=0,S=this._listeners;v<S.length;v+=1){var P=S[v],M=P[0];G.addEventListener(M,P[1],M===m.window.document?this.handleWindowEvent:this.handleEvent,P[2])}};Yt.prototype.destroy=function(){for(var f=0,p=this._listeners;f<p.length;f+=1){var h=p[f],v=h[0];G.removeEventListener(v,h[1],v===m.window.document?this.handleWindowEvent:this.handleEvent,h[2])}},Yt.prototype._addDefaultHandlers=function(f){var p=this._map,h=p.getCanvasContainer();this._add("mapEvent",new Uo(p,f));var v=p.boxZoom=new dn(p,f);this._add("boxZoom",v);var S=new ws,P=new po;p.doubleClickZoom=new Wr(P,S),this._add("tapZoom",S),this._add("clickZoom",P);var M=new Es;this._add("tapDragZoom",M);var H=p.touchPitch=new gf;this._add("touchPitch",H);var te=new Td(f),ae=new Nc(f);p.dragRotate=new Zs(f,te,ae),this._add("mouseRotate",te,["mousePitch"]),this._add("mousePitch",ae,["mouseRotate"]);var ge=new fn(f),_e=new Ms(f);p.dragPan=new ts(h,ge,_e),this._add("mousePan",ge),this._add("touchPan",_e,["touchZoom","touchRotate"]);var ye=new il,Le=new xs;p.touchZoomRotate=new Co(h,Le,ye,M),this._add("touchRotate",ye,["touchPan","touchZoom"]),this._add("touchZoom",Le,["touchPan","touchRotate"]);var Oe=p.scrollZoom=new no(p,this);this._add("scrollZoom",Oe,["mousePan"]);var Ge=p.keyboard=new Ti;this._add("keyboard",Ge),this._add("blockableMapEvent",new Fa(p));for(var Ie=0,ze=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Ie<ze.length;Ie+=1){var qe=ze[Ie];f.interactive&&f[qe]&&p[qe].enable(f[qe])}},Yt.prototype._add=function(f,p,h){this._handlers.push({handlerName:f,handler:p,allowed:h}),this._handlersById[f]=p},Yt.prototype.stop=function(f){if(!this._updatingCamera){for(var p=0,h=this._handlers;p<h.length;p+=1)h[p].handler.reset();this._inertia.clear(),this._fireEvents({},{},f),this._changes=[]}},Yt.prototype.isActive=function(){for(var f=0,p=this._handlers;f<p.length;f+=1)if(p[f].handler.isActive())return!0;return!1},Yt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Yt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Yt.prototype.isMoving=function(){return Boolean(qu(this._eventsInProgress))||this.isZooming()},Yt.prototype._blockedByActive=function(f,p,h){for(var v in f)if(v!==h&&(!p||p.indexOf(v)<0))return!0;return!1},Yt.prototype.handleWindowEvent=function(f){this.handleEvent(f,f.type+"Window")},Yt.prototype._getMapTouches=function(f){for(var p=[],h=0,v=f;h<v.length;h+=1){var S=v[h];this._el.contains(S.target)&&p.push(S)}return p},Yt.prototype.handleEvent=function(f,p){if("blur"!==f.type){this._updatingCamera=!0;for(var h="renderFrame"===f.type?void 0:f,v={needsRenderFrame:!1},S={},P={},M=f.touches?this._getMapTouches(f.touches):void 0,H=M?G.touchPos(this._el,M):G.mousePos(this._el,f),te=0,ae=this._handlers;te<ae.length;te+=1){var ge=ae[te],_e=ge.handlerName,ye=ge.handler,Le=ge.allowed;if(ye.isEnabled()){var Oe=void 0;this._blockedByActive(P,Le,_e)?ye.reset():ye[p||f.type]&&(Oe=ye[p||f.type](f,H,M),this.mergeHandlerResult(v,S,Oe,_e,h),Oe&&Oe.needsRenderFrame&&this._triggerRenderFrame()),(Oe||ye.isActive())&&(P[_e]=ye)}}var Ge={};for(var Ie in this._previousActiveHandlers)P[Ie]||(Ge[Ie]=h);this._previousActiveHandlers=P,(Object.keys(Ge).length||Pl(v))&&(this._changes.push([v,S,Ge]),this._triggerRenderFrame()),(Object.keys(P).length||Pl(v))&&this._map._stop(!0),this._updatingCamera=!1;var ze=v.cameraAnimation;ze&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ze(this._map))}else this.stop(!0)},Yt.prototype.mergeHandlerResult=function(f,p,h,v,S){if(h){m.extend(f,h);var P={handlerName:v,originalEvent:h.originalEvent||S};void 0!==h.zoomDelta&&(p.zoom=P),void 0!==h.panDelta&&(p.drag=P),void 0!==h.pitchDelta&&(p.pitch=P),void 0!==h.bearingDelta&&(p.rotate=P)}},Yt.prototype._applyChanges=function(){for(var f={},p={},h={},v=0,S=this._changes;v<S.length;v+=1){var P=S[v],M=P[0],H=P[1],te=P[2];M.panDelta&&(f.panDelta=(f.panDelta||new m.Point(0,0))._add(M.panDelta)),M.zoomDelta&&(f.zoomDelta=(f.zoomDelta||0)+M.zoomDelta),M.bearingDelta&&(f.bearingDelta=(f.bearingDelta||0)+M.bearingDelta),M.pitchDelta&&(f.pitchDelta=(f.pitchDelta||0)+M.pitchDelta),void 0!==M.around&&(f.around=M.around),void 0!==M.pinchAround&&(f.pinchAround=M.pinchAround),M.noInertia&&(f.noInertia=M.noInertia),m.extend(p,H),m.extend(h,te)}this._updateMapTransform(f,p,h),this._changes=[]},Yt.prototype._updateMapTransform=function(f,p,h){var v=this._map,S=v.transform;if(!Pl(f))return this._fireEvents(p,h,!0);var P=f.panDelta,M=f.zoomDelta,H=f.bearingDelta,te=f.pitchDelta,ae=f.around,ge=f.pinchAround;void 0!==ge&&(ae=ge),v._stop(!0),ae=ae||v.transform.centerPoint;var _e=S.pointLocation(P?ae.sub(P):ae);H&&(S.bearing+=H),te&&(S.pitch+=te),M&&(S.zoom+=M),S.setLocationAtPoint(_e,ae),this._map._update(),f.noInertia||this._inertia.record(f),this._fireEvents(p,h,!0)},Yt.prototype._fireEvents=function(f,p,h){var v=this,S=qu(this._eventsInProgress),P=qu(f),M={};for(var H in f)this._eventsInProgress[H]||(M[H+"start"]=f[H].originalEvent),this._eventsInProgress[H]=f[H];for(var te in!S&&P&&this._fireEvent("movestart",P.originalEvent),M)this._fireEvent(te,M[te]);for(var ae in P&&this._fireEvent("move",P.originalEvent),f)this._fireEvent(ae,f[ae].originalEvent);var ge,_e={};for(var ye in this._eventsInProgress){var Le=this._eventsInProgress[ye],Oe=Le.handlerName,Ge=Le.originalEvent;this._handlersById[Oe].isActive()||(delete this._eventsInProgress[ye],_e[ye+"end"]=ge=p[Oe]||Ge)}for(var Ie in _e)this._fireEvent(Ie,_e[Ie]);var ze=qu(this._eventsInProgress);if(h&&(S||P)&&!ze){this._updatingCamera=!0;var qe=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ot=function(yt){return 0!==yt&&-v._bearingSnap<yt&&yt<v._bearingSnap};qe?(ot(qe.bearing||this._map.getBearing())&&(qe.bearing=0),this._map.easeTo(qe,{originalEvent:ge})):(this._map.fire(new m.Event("moveend",{originalEvent:ge})),ot(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Yt.prototype._fireEvent=function(f,p){this._map.fire(new m.Event(f,p?{originalEvent:p}:{}))},Yt.prototype._requestFrame=function(){var f=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(p){delete f._frameId,f.handleEvent(new ns("renderFrame",{timeStamp:p})),f._applyChanges()})},Yt.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var Un=function(f){function p(h,v){f.call(this),this._moving=!1,this._zooming=!1,this.transform=h,this._bearingSnap=v.bearingSnap,m.bindAll(["_renderFrameCallback"],this)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getCenter=function(){return new m.LngLat(this.transform.center.lng,this.transform.center.lat)},p.prototype.setCenter=function(h,v){return this.jumpTo({center:h},v)},p.prototype.panBy=function(h,v,S){return h=m.Point.convert(h).mult(-1),this.panTo(this.transform.center,m.extend({offset:h},v),S)},p.prototype.panTo=function(h,v,S){return this.easeTo(m.extend({center:h},v),S)},p.prototype.getZoom=function(){return this.transform.zoom},p.prototype.setZoom=function(h,v){return this.jumpTo({zoom:h},v),this},p.prototype.zoomTo=function(h,v,S){return this.easeTo(m.extend({zoom:h},v),S)},p.prototype.zoomIn=function(h,v){return this.zoomTo(this.getZoom()+1,h,v),this},p.prototype.zoomOut=function(h,v){return this.zoomTo(this.getZoom()-1,h,v),this},p.prototype.getBearing=function(){return this.transform.bearing},p.prototype.setBearing=function(h,v){return this.jumpTo({bearing:h},v),this},p.prototype.getPadding=function(){return this.transform.padding},p.prototype.setPadding=function(h,v){return this.jumpTo({padding:h},v),this},p.prototype.rotateTo=function(h,v,S){return this.easeTo(m.extend({bearing:h},v),S)},p.prototype.resetNorth=function(h,v){return this.rotateTo(0,m.extend({duration:1e3},h),v),this},p.prototype.resetNorthPitch=function(h,v){return this.easeTo(m.extend({bearing:0,pitch:0,duration:1e3},h),v),this},p.prototype.snapToNorth=function(h,v){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(h,v):this},p.prototype.getPitch=function(){return this.transform.pitch},p.prototype.setPitch=function(h,v){return this.jumpTo({pitch:h},v),this},p.prototype.cameraForBounds=function(h,v){h=m.LngLatBounds.convert(h);var S=v&&v.bearing||0;return this._cameraForBoxAndBearing(h.getNorthWest(),h.getSouthEast(),S,v)},p.prototype._cameraForBoxAndBearing=function(h,v,S,P){var M={top:0,bottom:0,right:0,left:0};if("number"==typeof(P=m.extend({padding:M,offset:[0,0],maxZoom:this.transform.maxZoom},P)).padding){var H=P.padding;P.padding={top:H,bottom:H,right:H,left:H}}P.padding=m.extend(M,P.padding);var te=this.transform,ae=te.padding,ge=te.project(m.LngLat.convert(h)),_e=te.project(m.LngLat.convert(v)),ye=ge.rotate(-S*Math.PI/180),Le=_e.rotate(-S*Math.PI/180),Oe=new m.Point(Math.max(ye.x,Le.x),Math.max(ye.y,Le.y)),Ge=new m.Point(Math.min(ye.x,Le.x),Math.min(ye.y,Le.y)),Ie=Oe.sub(Ge),ze=(te.width-(ae.left+ae.right+P.padding.left+P.padding.right))/Ie.x,qe=(te.height-(ae.top+ae.bottom+P.padding.top+P.padding.bottom))/Ie.y;if(!(qe<0||ze<0)){var ot=Math.min(te.scaleZoom(te.scale*Math.min(ze,qe)),P.maxZoom),yt="number"==typeof P.offset.x?new m.Point(P.offset.x,P.offset.y):m.Point.convert(P.offset),mt=new m.Point((P.padding.left-P.padding.right)/2,(P.padding.top-P.padding.bottom)/2).rotate(S*Math.PI/180),_t=yt.add(mt).mult(te.scale/te.zoomScale(ot));return{center:te.unproject(ge.add(_e).div(2).sub(_t)),zoom:ot,bearing:S}}m.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},p.prototype.fitBounds=function(h,v,S){return this._fitInternal(this.cameraForBounds(h,v),v,S)},p.prototype.fitScreenCoordinates=function(h,v,S,P,M){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(m.Point.convert(h)),this.transform.pointLocation(m.Point.convert(v)),S,P),P,M)},p.prototype._fitInternal=function(h,v,S){return h?(delete(v=m.extend(h,v)).padding,v.linear?this.easeTo(v,S):this.flyTo(v,S)):this},p.prototype.jumpTo=function(h,v){this.stop();var S=this.transform,P=!1,M=!1,H=!1;return"zoom"in h&&S.zoom!==+h.zoom&&(P=!0,S.zoom=+h.zoom),void 0!==h.center&&(S.center=m.LngLat.convert(h.center)),"bearing"in h&&S.bearing!==+h.bearing&&(M=!0,S.bearing=+h.bearing),"pitch"in h&&S.pitch!==+h.pitch&&(H=!0,S.pitch=+h.pitch),null==h.padding||S.isPaddingEqual(h.padding)||(S.padding=h.padding),this.fire(new m.Event("movestart",v)).fire(new m.Event("move",v)),P&&this.fire(new m.Event("zoomstart",v)).fire(new m.Event("zoom",v)).fire(new m.Event("zoomend",v)),M&&this.fire(new m.Event("rotatestart",v)).fire(new m.Event("rotate",v)).fire(new m.Event("rotateend",v)),H&&this.fire(new m.Event("pitchstart",v)).fire(new m.Event("pitch",v)).fire(new m.Event("pitchend",v)),this.fire(new m.Event("moveend",v))},p.prototype.easeTo=function(h,v){var S=this;this._stop(!1,h.easeId),(!1===(h=m.extend({offset:[0,0],duration:500,easing:m.ease},h)).animate||!h.essential&&m.browser.prefersReducedMotion)&&(h.duration=0);var P=this.transform,M=this.getZoom(),H=this.getBearing(),te=this.getPitch(),ae=this.getPadding(),ge="zoom"in h?+h.zoom:M,_e="bearing"in h?this._normalizeBearing(h.bearing,H):H,ye="pitch"in h?+h.pitch:te,Le="padding"in h?h.padding:P.padding,Oe=m.Point.convert(h.offset),Ge=P.centerPoint.add(Oe),Ie=P.pointLocation(Ge),ze=m.LngLat.convert(h.center||Ie);this._normalizeCenter(ze);var qe,ot,yt=P.project(Ie),mt=P.project(ze).sub(yt),_t=P.zoomScale(ge-M);h.around&&(qe=m.LngLat.convert(h.around),ot=P.locationPoint(qe));var Pt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ge!==M,this._rotating=this._rotating||H!==_e,this._pitching=this._pitching||ye!==te,this._padding=!P.isPaddingEqual(Le),this._easeId=h.easeId,this._prepareEase(v,h.noMoveStart,Pt),this._ease(function($t){if(S._zooming&&(P.zoom=m.number(M,ge,$t)),S._rotating&&(P.bearing=m.number(H,_e,$t)),S._pitching&&(P.pitch=m.number(te,ye,$t)),S._padding&&(P.interpolatePadding(ae,Le,$t),Ge=P.centerPoint.add(Oe)),qe)P.setLocationAtPoint(qe,ot);else{var kt=P.zoomScale(P.zoom-M),tn=ge>M?Math.min(2,_t):Math.max(.5,_t),wn=Math.pow(tn,1-$t),An=P.unproject(yt.add(mt.mult($t*wn)).mult(kt));P.setLocationAtPoint(P.renderWorldCopies?An.wrap():An,Ge)}S._fireMoveEvents(v)},function($t){S._afterEase(v,$t)},h),this},p.prototype._prepareEase=function(h,v,S){void 0===S&&(S={}),this._moving=!0,v||S.moving||this.fire(new m.Event("movestart",h)),this._zooming&&!S.zooming&&this.fire(new m.Event("zoomstart",h)),this._rotating&&!S.rotating&&this.fire(new m.Event("rotatestart",h)),this._pitching&&!S.pitching&&this.fire(new m.Event("pitchstart",h))},p.prototype._fireMoveEvents=function(h){this.fire(new m.Event("move",h)),this._zooming&&this.fire(new m.Event("zoom",h)),this._rotating&&this.fire(new m.Event("rotate",h)),this._pitching&&this.fire(new m.Event("pitch",h))},p.prototype._afterEase=function(h,v){if(!this._easeId||!v||this._easeId!==v){delete this._easeId;var S=this._zooming,P=this._rotating,M=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,S&&this.fire(new m.Event("zoomend",h)),P&&this.fire(new m.Event("rotateend",h)),M&&this.fire(new m.Event("pitchend",h)),this.fire(new m.Event("moveend",h))}},p.prototype.flyTo=function(h,v){var S=this;if(!h.essential&&m.browser.prefersReducedMotion){var P=m.pick(h,["center","zoom","bearing","pitch","around"]);return this.jumpTo(P,v)}this.stop(),h=m.extend({offset:[0,0],speed:1.2,curve:1.42,easing:m.ease},h);var M=this.transform,H=this.getZoom(),te=this.getBearing(),ae=this.getPitch(),ge=this.getPadding(),_e="zoom"in h?m.clamp(+h.zoom,M.minZoom,M.maxZoom):H,ye="bearing"in h?this._normalizeBearing(h.bearing,te):te,Le="pitch"in h?+h.pitch:ae,Oe="padding"in h?h.padding:M.padding,Ge=M.zoomScale(_e-H),Ie=m.Point.convert(h.offset),ze=M.centerPoint.add(Ie),qe=M.pointLocation(ze),ot=m.LngLat.convert(h.center||qe);this._normalizeCenter(ot);var yt=M.project(qe),mt=M.project(ot).sub(yt),_t=h.curve,Pt=Math.max(M.width,M.height),$t=Pt/Ge,kt=mt.mag();if("minZoom"in h){var tn=m.clamp(Math.min(h.minZoom,H,_e),M.minZoom,M.maxZoom),wn=Pt/M.zoomScale(tn-H);_t=Math.sqrt(wn/kt*2)}var An=_t*_t;function Cn(qn){var Ln=($t*$t-Pt*Pt+(qn?-1:1)*An*An*kt*kt)/(2*(qn?$t:Pt)*An*kt);return Math.log(Math.sqrt(Ln*Ln+1)-Ln)}function Vr(qn){return(Math.exp(qn)-Math.exp(-qn))/2}function nn(qn){return(Math.exp(qn)+Math.exp(-qn))/2}var Kn=Cn(0),br=function(qn){return nn(Kn)/nn(Kn+_t*qn)},nr=function(qn){return Pt*((nn(Kn)*(Vr(Ln=Kn+_t*qn)/nn(Ln))-Vr(Kn))/An)/kt;var Ln},Hn=(Cn(1)-Kn)/_t;if(Math.abs(kt)<1e-6||!isFinite(Hn)){if(Math.abs(Pt-$t)<1e-6)return this.easeTo(h,v);var $n=$t<Pt?-1:1;Hn=Math.abs(Math.log($t/Pt))/_t,nr=function(){return 0},br=function(qn){return Math.exp($n*_t*qn)}}return h.duration="duration"in h?+h.duration:1e3*Hn/("screenSpeed"in h?+h.screenSpeed/_t:+h.speed),h.maxDuration&&h.duration>h.maxDuration&&(h.duration=0),this._zooming=!0,this._rotating=te!==ye,this._pitching=Le!==ae,this._padding=!M.isPaddingEqual(Oe),this._prepareEase(v,!1),this._ease(function(qn){var Ln=qn*Hn,Di=1/br(Ln);M.zoom=1===qn?_e:H+M.scaleZoom(Di),S._rotating&&(M.bearing=m.number(te,ye,qn)),S._pitching&&(M.pitch=m.number(ae,Le,qn)),S._padding&&(M.interpolatePadding(ge,Oe,qn),ze=M.centerPoint.add(Ie));var Io=1===qn?ot:M.unproject(yt.add(mt.mult(nr(Ln))).mult(Di));M.setLocationAtPoint(M.renderWorldCopies?Io.wrap():Io,ze),S._fireMoveEvents(v)},function(){return S._afterEase(v)},h),this},p.prototype.isEasing=function(){return!!this._easeFrameId},p.prototype.stop=function(){return this._stop()},p.prototype._stop=function(h,v){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var S=this._onEaseEnd;delete this._onEaseEnd,S.call(this,v)}if(!h){var P=this.handlers;P&&P.stop(!1)}return this},p.prototype._ease=function(h,v,S){!1===S.animate||0===S.duration?(h(1),v()):(this._easeStart=m.browser.now(),this._easeOptions=S,this._onEaseFrame=h,this._onEaseEnd=v,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},p.prototype._renderFrameCallback=function(){var h=Math.min((m.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(h)),h<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},p.prototype._normalizeBearing=function(h,v){h=m.wrap(h,-180,180);var S=Math.abs(h-v);return Math.abs(h-360-v)<S&&(h-=360),Math.abs(h+360-v)<S&&(h+=360),h},p.prototype._normalizeCenter=function(h){var v=this.transform;if(v.renderWorldCopies&&!v.lngRange){var S=h.lng-v.center.lng;h.lng+=S>180?-360:S<-180?360:0}},p}(m.Evented),Ba=function(f){void 0===f&&(f={}),this.options=f,m.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Ba.prototype.getDefaultPosition=function(){return"bottom-right"},Ba.prototype.onAdd=function(f){var p=this.options&&this.options.compact;return this._map=f,this._container=G.create("div","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=G.create("button","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.type="button",this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=G.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),p&&this._container.classList.add("maplibregl-compact","mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===p&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ba.prototype.onRemove=function(){G.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ba.prototype._setElementTitle=function(f,p){var h=this._map._getUIString("AttributionControl."+p);f.title=h,f.setAttribute("aria-label",h)},Ba.prototype._toggleAttribution=function(){this._container.classList.contains("maplibregl-compact-show")||this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Ba.prototype._updateEditLink=function(){var f=this._editLink;f||(f=this._editLink=this._container.querySelector(".mapbox-improve-map"));var p=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||m.config.ACCESS_TOKEN}];if(f){var h=p.reduce(function(v,S,P){return S.value&&(v+=S.key+"="+S.value+(P<p.length-1?"&":"")),v},"?");f.href=m.config.FEEDBACK_URL+"/"+h+(this._map._hash?this._map._hash.getHashString(!0):""),f.rel="noopener nofollow",this._setElementTitle(f,"MapFeedback")}},Ba.prototype._updateData=function(f){!f||"metadata"!==f.sourceDataType&&"visibility"!==f.sourceDataType&&"style"!==f.dataType||(this._updateAttributions(),this._updateEditLink())},Ba.prototype._updateAttributions=function(){if(this._map.style){var f=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?f=f.concat(this.options.customAttribution.map(function(H){return"string"!=typeof H?"":H})):"string"==typeof this.options.customAttribution&&f.push(this.options.customAttribution)),this._map.style.stylesheet){var p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}var h=this._map.style.sourceCaches;for(var v in h){var S=h[v];if(S.used){var P=S.getSource();P.attribution&&f.indexOf(P.attribution)<0&&f.push(P.attribution)}}f.sort(function(H,te){return H.length-te.length});var M=(f=f.filter(function(H,te){for(var ae=te+1;ae<f.length;ae++)if(f[ae].indexOf(H)>=0)return!1;return!0})).join(" | ");M!==this._attribHTML&&(this._attribHTML=M,f.length?(this._innerContainer.innerHTML=M,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._editLink=null)}},Ba.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("maplibregl-compact","mapboxgl-compact"):this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show")};var Jn=function(){m.bindAll(["_updateLogo"],this),m.bindAll(["_updateCompact"],this)};Jn.prototype.onAdd=function(f){this._map=f,this._container=G.create("div","maplibregl-ctrl mapboxgl-ctrl");var p=G.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Jn.prototype.onRemove=function(){G.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Jn.prototype.getDefaultPosition=function(){return"bottom-left"},Jn.prototype._updateLogo=function(f){f&&"metadata"!==f.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Jn.prototype._logoRequired=function(){if(this._map.style){var f=this._map.style.sourceCaches;for(var p in f)if(f[p].getSource().mapbox_logo)return!0;return!1}},Jn.prototype._updateCompact=function(){var f=this._container.children;if(f.length){var p=f[0];this._map.getCanvasContainer().offsetWidth<250?p.classList.add("maplibregl-compact","mapboxgl-compact"):p.classList.remove("maplibregl-compact","mapboxgl-compact")}};var Iu=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Iu.prototype.add=function(f){var p=++this._id;return this._queue.push({callback:f,id:p,cancelled:!1}),p},Iu.prototype.remove=function(f){for(var p=this._currentlyRunning,h=0,v=p?this._queue.concat(p):this._queue;h<v.length;h+=1){var S=v[h];if(S.id===f)return void(S.cancelled=!0)}},Iu.prototype.run=function(f){void 0===f&&(f=0);var p=this._currentlyRunning=this._queue;this._queue=[];for(var h=0,v=p;h<v.length;h+=1){var S=v[h];if(!S.cancelled&&(S.callback(f),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Iu.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Os={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Js=m.window.HTMLImageElement,um=m.window.HTMLElement,Wu=m.window.ImageBitmap,Pi={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},ea=function(f){function p(v){var S=this;if(null!=(v=m.extend({},Pi,v)).minZoom&&null!=v.maxZoom&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=v.minPitch&&null!=v.maxPitch&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=v.minPitch&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=v.maxPitch&&v.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var P=new kr(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies);if(f.call(this,P,v),this._interactive=v.interactive,this._maxTileCacheSize=v.maxTileCacheSize,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._crossSourceCollisions=v.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=v.collectResourceTiming,this._renderTaskQueue=new Iu,this._controls=[],this._mapId=m.uniqueId(),this._locale=m.extend({},Os,v.locale),this._clickTolerance=v.clickTolerance,this._requestManager=new m.RequestManager(v.transformRequest,v.accessToken),"string"==typeof v.container){if(this._container=m.window.document.getElementById(v.container),!this._container)throw new Error("Container '"+v.container+"' not found.")}else{if(!(v.container instanceof um))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(v.maxBounds&&this.setMaxBounds(v.maxBounds),m.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return S._update(!1)}),this.on("moveend",function(){return S._update(!1)}),this.on("zoom",function(){return S._update(!0)}),void 0!==m.window&&(m.window.addEventListener("online",this._onWindowOnline,!1),m.window.addEventListener("resize",this._onWindowResize,!1),m.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Yt(this,v),this._hash=v.hash&&new Ws("string"==typeof v.hash&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,m.extend({},v.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=v.localIdeographFontFamily,v.style&&this.setStyle(v.style,{localIdeographFontFamily:v.localIdeographFontFamily}),v.attributionControl&&this.addControl(new Ba({customAttribution:v.customAttribution})),this.addControl(new Jn,v.logoPosition),this.on("style.load",function(){S.transform.unmodified&&S.jumpTo(S.style.stylesheet)}),this.on("data",function(M){S._update("style"===M.dataType),S.fire(new m.Event(M.dataType+"data",M))}),this.on("dataloading",function(M){S.fire(new m.Event(M.dataType+"dataloading",M))})}f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p;var h={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return p.prototype._getMapId=function(){return this._mapId},p.prototype.addControl=function(v,S){if(void 0===S&&(S=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new m.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var P=v.onAdd(this);this._controls.push(v);var M=this._controlPositions[S];return-1!==S.indexOf("bottom")?M.insertBefore(P,M.firstChild):M.appendChild(P),this},p.prototype.removeControl=function(v){if(!v||!v.onRemove)return this.fire(new m.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var S=this._controls.indexOf(v);return S>-1&&this._controls.splice(S,1),v.onRemove(this),this},p.prototype.hasControl=function(v){return this._controls.indexOf(v)>-1},p.prototype.resize=function(v){var S=this._containerDimensions(),P=S[0],M=S[1];this._resizeCanvas(P,M),this.transform.resize(P,M),this.painter.resize(P,M);var H=!this._moving;return H&&(this.stop(),this.fire(new m.Event("movestart",v)).fire(new m.Event("move",v))),this.fire(new m.Event("resize",v)),H&&this.fire(new m.Event("moveend",v)),this},p.prototype.getBounds=function(){return this.transform.getBounds()},p.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},p.prototype.setMaxBounds=function(v){return this.transform.setMaxBounds(m.LngLatBounds.convert(v)),this._update()},p.prototype.setMinZoom=function(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},p.prototype.getMinZoom=function(){return this.transform.minZoom},p.prototype.setMaxZoom=function(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")},p.prototype.getMaxZoom=function(){return this.transform.maxZoom},p.prototype.setMinPitch=function(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},p.prototype.getMinPitch=function(){return this.transform.minPitch},p.prototype.setMaxPitch=function(v){if((v=v??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")},p.prototype.getMaxPitch=function(){return this.transform.maxPitch},p.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},p.prototype.setRenderWorldCopies=function(v){return this.transform.renderWorldCopies=v,this._update()},p.prototype.project=function(v){return this.transform.locationPoint(m.LngLat.convert(v))},p.prototype.unproject=function(v){return this.transform.pointLocation(m.Point.convert(v))},p.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},p.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},p.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},p.prototype._createDelegatedListener=function(v,S,P){var M,H=this;if("mouseenter"===v||"mouseover"===v){var te=!1;return{layer:S,listener:P,delegates:{mousemove:function(ge){var _e=H.getLayer(S)?H.queryRenderedFeatures(ge.point,{layers:[S]}):[];_e.length?te||(te=!0,P.call(H,new Qo(v,H,ge.originalEvent,{features:_e}))):te=!1},mouseout:function(){te=!1}}}}if("mouseleave"===v||"mouseout"===v){var ae=!1;return{layer:S,listener:P,delegates:{mousemove:function(ge){(H.getLayer(S)?H.queryRenderedFeatures(ge.point,{layers:[S]}):[]).length?ae=!0:ae&&(ae=!1,P.call(H,new Qo(v,H,ge.originalEvent)))},mouseout:function(ge){ae&&(ae=!1,P.call(H,new Qo(v,H,ge.originalEvent)))}}}}return{layer:S,listener:P,delegates:(M={},M[v]=function(ge){var _e=H.getLayer(S)?H.queryRenderedFeatures(ge.point,{layers:[S]}):[];_e.length&&(ge.features=_e,P.call(H,ge),delete ge.features)},M)}},p.prototype.on=function(v,S,P){if(void 0===P)return f.prototype.on.call(this,v,S);var M=this._createDelegatedListener(v,S,P);for(var H in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(M),M.delegates)this.on(H,M.delegates[H]);return this},p.prototype.once=function(v,S,P){if(void 0===P)return f.prototype.once.call(this,v,S);var M=this._createDelegatedListener(v,S,P);for(var H in M.delegates)this.once(H,M.delegates[H]);return this},p.prototype.off=function(v,S,P){var M=this;return void 0===P?f.prototype.off.call(this,v,S):(this._delegatedListeners&&this._delegatedListeners[v]&&function(H){for(var te=H[v],ae=0;ae<te.length;ae++){var ge=te[ae];if(ge.layer===S&&ge.listener===P){for(var _e in ge.delegates)M.off(_e,ge.delegates[_e]);return te.splice(ae,1),M}}}(this._delegatedListeners),this)},p.prototype.queryRenderedFeatures=function(v,S){if(!this.style)return[];var P;if(void 0!==S||void 0===v||v instanceof m.Point||Array.isArray(v)||(S=v,v=void 0),S=S||{},(v=v||[[0,0],[this.transform.width,this.transform.height]])instanceof m.Point||"number"==typeof v[0])P=[m.Point.convert(v)];else{var M=m.Point.convert(v[0]),H=m.Point.convert(v[1]);P=[M,new m.Point(H.x,M.y),H,new m.Point(M.x,H.y),M]}return this.style.queryRenderedFeatures(P,S,this.transform)},p.prototype.querySourceFeatures=function(v,S){return this.style.querySourceFeatures(v,S)},p.prototype.setStyle=function(v,S){return!1!==(S=m.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},S)).diff&&S.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,S),this):(this._localIdeographFontFamily=S.localIdeographFontFamily,this._updateStyle(v,S))},p.prototype.setTransformRequest=function(v){return this._requestManager.setTransformRequest(v),this},p.prototype._getUIString=function(v){var S=this._locale[v];if(null==S)throw new Error("Missing UI string '"+v+"'");return S},p.prototype._updateStyle=function(v,S){return this.style&&(this.style.setEventedParent(null),this.style._remove()),v?(this.style=new Vi(this,S||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof v?this.style.loadURL(v):this.style.loadJSON(v),this):(delete this.style,this)},p.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Vi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},p.prototype._diffStyle=function(v,S){var P=this;if("string"==typeof v){var M=this._requestManager.normalizeStyleURL(v),H=this._requestManager.transformRequest(M,m.ResourceType.Style);m.getJSON(H,function(te,ae){te?P.fire(new m.ErrorEvent(te)):ae&&P._updateDiff(ae,S)})}else"object"==typeof v&&this._updateDiff(v,S)},p.prototype._updateDiff=function(v,S){try{this.style.setState(v)&&this._update(!0)}catch(P){m.warnOnce("Unable to perform style diff: "+(P.message||P.error||P)+".  Rebuilding the style from scratch."),this._updateStyle(v,S)}},p.prototype.getStyle=function(){if(this.style)return this.style.serialize()},p.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():m.warnOnce("There is no style added to the map.")},p.prototype.addSource=function(v,S){return this._lazyInitEmptyStyle(),this.style.addSource(v,S),this._update(!0)},p.prototype.isSourceLoaded=function(v){var S=this.style&&this.style.sourceCaches[v];if(void 0!==S)return S.loaded();this.fire(new m.ErrorEvent(new Error("There is no source with ID '"+v+"'")))},p.prototype.areTilesLoaded=function(){var v=this.style&&this.style.sourceCaches;for(var S in v){var P=v[S]._tiles;for(var M in P){var H=P[M];if("loaded"!==H.state&&"errored"!==H.state)return!1}}return!0},p.prototype.addSourceType=function(v,S,P){return this._lazyInitEmptyStyle(),this.style.addSourceType(v,S,P)},p.prototype.removeSource=function(v){return this.style.removeSource(v),this._update(!0)},p.prototype.getSource=function(v){return this.style.getSource(v)},p.prototype.addImage=function(v,S,P){void 0===P&&(P={});var M=P.pixelRatio;void 0===M&&(M=1);var H=P.sdf;void 0===H&&(H=!1);var te=P.stretchX,ae=P.stretchY,ge=P.content;if(this._lazyInitEmptyStyle(),S instanceof Js||Wu&&S instanceof Wu){var _e=m.browser.getImageData(S);this.style.addImage(v,{data:new m.RGBAImage({width:_e.width,height:_e.height},_e.data),pixelRatio:M,stretchX:te,stretchY:ae,content:ge,sdf:H,version:0})}else{if(void 0===S.width||void 0===S.height)return this.fire(new m.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var ye=S;this.style.addImage(v,{data:new m.RGBAImage({width:S.width,height:S.height},new Uint8Array(S.data)),pixelRatio:M,stretchX:te,stretchY:ae,content:ge,sdf:H,version:0,userImage:ye}),ye.onAdd&&ye.onAdd(this,v)}},p.prototype.updateImage=function(v,S){var P=this.style.getImage(v);if(!P)return this.fire(new m.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var M=S instanceof Js||Wu&&S instanceof Wu?m.browser.getImageData(S):S,H=M.width,te=M.height,ae=M.data;return void 0===H||void 0===te?this.fire(new m.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):H!==P.data.width||te!==P.data.height?this.fire(new m.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(P.data.replace(ae,!(S instanceof Js||Wu&&S instanceof Wu)),void this.style.updateImage(v,P))},p.prototype.hasImage=function(v){return v?!!this.style.getImage(v):(this.fire(new m.ErrorEvent(new Error("Missing required image id"))),!1)},p.prototype.removeImage=function(v){this.style.removeImage(v)},p.prototype.loadImage=function(v,S){m.getImage(this._requestManager.transformRequest(v,m.ResourceType.Image),S)},p.prototype.listImages=function(){return this.style.listImages()},p.prototype.addLayer=function(v,S){return this._lazyInitEmptyStyle(),this.style.addLayer(v,S),this._update(!0)},p.prototype.moveLayer=function(v,S){return this.style.moveLayer(v,S),this._update(!0)},p.prototype.removeLayer=function(v){return this.style.removeLayer(v),this._update(!0)},p.prototype.getLayer=function(v){return this.style.getLayer(v)},p.prototype.setLayerZoomRange=function(v,S,P){return this.style.setLayerZoomRange(v,S,P),this._update(!0)},p.prototype.setFilter=function(v,S,P){return void 0===P&&(P={}),this.style.setFilter(v,S,P),this._update(!0)},p.prototype.getFilter=function(v){return this.style.getFilter(v)},p.prototype.setPaintProperty=function(v,S,P,M){return void 0===M&&(M={}),this.style.setPaintProperty(v,S,P,M),this._update(!0)},p.prototype.getPaintProperty=function(v,S){return this.style.getPaintProperty(v,S)},p.prototype.setLayoutProperty=function(v,S,P,M){return void 0===M&&(M={}),this.style.setLayoutProperty(v,S,P,M),this._update(!0)},p.prototype.getLayoutProperty=function(v,S){return this.style.getLayoutProperty(v,S)},p.prototype.setLight=function(v,S){return void 0===S&&(S={}),this._lazyInitEmptyStyle(),this.style.setLight(v,S),this._update(!0)},p.prototype.getLight=function(){return this.style.getLight()},p.prototype.setFeatureState=function(v,S){return this.style.setFeatureState(v,S),this._update()},p.prototype.removeFeatureState=function(v,S){return this.style.removeFeatureState(v,S),this._update()},p.prototype.getFeatureState=function(v){return this.style.getFeatureState(v)},p.prototype.getContainer=function(){return this._container},p.prototype.getCanvasContainer=function(){return this._canvasContainer},p.prototype.getCanvas=function(){return this._canvas},p.prototype._containerDimensions=function(){var v=0,S=0;return this._container&&(v=this._container.clientWidth||400,S=this._container.clientHeight||300),[v,S]},p.prototype._setupContainer=function(){var v=this._container;v.classList.add("maplibregl-map","mapboxgl-map");var S=this._canvasContainer=G.create("div","maplibregl-canvas-container mapboxgl-canvas-container",v);this._interactive&&S.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=G.create("canvas","maplibregl-canvas mapboxgl-canvas",S),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var P=this._containerDimensions();this._resizeCanvas(P[0],P[1]);var M=this._controlContainer=G.create("div","maplibregl-control-container mapboxgl-control-container",v),H=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(te){H[te]=G.create("div","maplibregl-ctrl-"+te+" mapboxgl-ctrl-"+te,M)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},p.prototype._resizeCanvas=function(v,S){var P=m.browser.devicePixelRatio||1;this._canvas.width=P*v,this._canvas.height=P*S,this._canvas.style.width=v+"px",this._canvas.style.height=S+"px"},p.prototype._setupPainter=function(){var v=m.extend({},q.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),S=this._canvas.getContext("webgl",v)||this._canvas.getContext("experimental-webgl",v);S?(this.painter=new ti(S,this.transform),m.webpSupported.testSupport(S)):this.fire(new m.ErrorEvent(new Error("Failed to initialize WebGL")))},p.prototype._contextLost=function(v){v.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new m.Event("webglcontextlost",{originalEvent:v}))},p.prototype._contextRestored=function(v){this._setupPainter(),this.resize(),this._update(),this.fire(new m.Event("webglcontextrestored",{originalEvent:v}))},p.prototype._onMapScroll=function(v){if(v.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},p.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},p.prototype._update=function(v){return this.style?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this},p.prototype._requestRenderFrame=function(v){return this._update(),this._renderTaskQueue.add(v)},p.prototype._cancelRenderFrame=function(v){this._renderTaskQueue.remove(v)},p.prototype._render=function(v){var S,P=this,M=0,H=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(S=H.createQueryEXT(),H.beginQueryEXT(H.TIME_ELAPSED_EXT,S),M=m.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),!this._removed){var te=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var ae=this.transform.zoom,ge=m.browser.now();this.style.zoomHistory.update(ae,ge);var _e=new m.EvaluationParameters(ae,{now:ge,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ye=_e.crossFadingFactor();1===ye&&ye===this._crossFadingFactor||(te=!0,this._crossFadingFactor=ye),this.style.update(_e)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new m.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new m.Event("load"))),this.style&&(this.style.hasTransitions()||te)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Le=m.browser.now()-M;H.endQueryEXT(H.TIME_ELAPSED_EXT,S),setTimeout(function(){var Ie=H.getQueryObjectEXT(S,H.QUERY_RESULT_EXT)/1e6;H.deleteQueryEXT(S),P.fire(new m.Event("gpu-timing-frame",{cpuTime:Le,gpuTime:Ie}))},50)}if(this.listens("gpu-timing-layer")){var Oe=this.painter.collectGpuTimers();setTimeout(function(){var Ie=P.painter.queryGpuTimers(Oe);P.fire(new m.Event("gpu-timing-layer",{layerTimes:Ie}))},50)}var Ge=this._sourcesDirty||this._styleDirty||this._placementDirty;return Ge||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new m.Event("idle")),!this._loaded||this._fullyLoaded||Ge||(this._fullyLoaded=!0),this}},p.prototype.remove=function(){this._hash&&this._hash.remove();for(var v=0,S=this._controls;v<S.length;v+=1)S[v].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==m.window&&(m.window.removeEventListener("resize",this._onWindowResize,!1),m.window.removeEventListener("orientationchange",this._onWindowResize,!1),m.window.removeEventListener("online",this._onWindowOnline,!1));var P=this.painter.context.gl.getExtension("WEBGL_lose_context");P&&P.loseContext(),yf(this._canvasContainer),yf(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),this._removed=!0,this.fire(new m.Event("remove"))},p.prototype.triggerRepaint=function(){var v=this;this.style&&!this._frame&&(this._frame=m.browser.frame(function(S){v._frame=null,v._render(S)}))},p.prototype._onWindowOnline=function(){this._update()},p.prototype._onWindowResize=function(v){this._trackResize&&this.resize({originalEvent:v})._update()},h.showTileBoundaries.get=function(){return!!this._showTileBoundaries},h.showTileBoundaries.set=function(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())},h.showPadding.get=function(){return!!this._showPadding},h.showPadding.set=function(v){this._showPadding!==v&&(this._showPadding=v,this._update())},h.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},h.showCollisionBoxes.set=function(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())},h.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},h.showOverdrawInspector.set=function(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())},h.repaint.get=function(){return!!this._repaint},h.repaint.set=function(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())},h.vertices.get=function(){return!!this._vertices},h.vertices.set=function(v){this._vertices=v,this._update()},p.prototype._setCacheLimits=function(v,S){m.setCacheLimits(v,S)},h.version.get=function(){return m.version},Object.defineProperties(p.prototype,h),p}(Un);function yf(f){f.parentNode&&f.parentNode.removeChild(f)}var zt={showCompass:!0,showZoom:!0,visualizePitch:!1},Lr=function(f){var p=this;this.options=m.extend({},zt,f),this._container=G.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(h){return h.preventDefault()}),this.options.showZoom&&(m.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",function(h){return p._map.zoomIn({},{originalEvent:h})}),G.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",function(h){return p._map.zoomOut({},{originalEvent:h})}),G.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(m.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",function(h){p.options.visualizePitch?p._map.resetNorthPitch({},{originalEvent:h}):p._map.resetNorth({},{originalEvent:h})}),this._compassIcon=G.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Lr.prototype._updateZoomButtons=function(){var f=this._map.getZoom(),p=f===this._map.getMaxZoom(),h=f===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=h,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",h.toString())},Lr.prototype._rotateCompassArrow=function(){var f=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=f},Lr.prototype.onAdd=function(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ss(this._map,this._compass,this.options.visualizePitch)),this._container},Lr.prototype.onRemove=function(){G.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Lr.prototype._createButton=function(f,p){var h=G.create("button",f,this._container);return h.type="button",h.addEventListener("click",p),h},Lr.prototype._setButtonTitle=function(f,p){var h=this._map._getUIString("NavigationControl."+p);f.title=h,f.setAttribute("aria-label",h)};var Ss=function(f,p,h){void 0===h&&(h=!1),this._clickTolerance=10,this.element=p,this.mouseRotate=new Td({clickTolerance:f.dragRotate._mouseRotate._clickTolerance}),this.map=f,h&&(this.mousePitch=new Nc({clickTolerance:f.dragRotate._mousePitch._clickTolerance})),m.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),G.addEventListener(p,"mousedown",this.mousedown),G.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),G.addEventListener(p,"touchmove",this.touchmove),G.addEventListener(p,"touchend",this.touchend),G.addEventListener(p,"touchcancel",this.reset)};function Pd(f,p,h){if(f=new m.LngLat(f.lng,f.lat),p){var v=new m.LngLat(f.lng-360,f.lat),S=new m.LngLat(f.lng+360,f.lat),P=h.locationPoint(f).distSqr(p);h.locationPoint(v).distSqr(p)<P?f=v:h.locationPoint(S).distSqr(p)<P&&(f=S)}for(;Math.abs(f.lng-h.center.lng)>180;){var M=h.locationPoint(f);if(M.x>=0&&M.y>=0&&M.x<=h.width&&M.y<=h.height)break;f.lng>h.center.lng?f.lng-=360:f.lng+=360}return f}Ss.prototype.down=function(f,p){this.mouseRotate.mousedown(f,p),this.mousePitch&&this.mousePitch.mousedown(f,p),G.disableDrag()},Ss.prototype.move=function(f,p){var h=this.map,v=this.mouseRotate.mousemoveWindow(f,p);if(v&&v.bearingDelta&&h.setBearing(h.getBearing()+v.bearingDelta),this.mousePitch){var S=this.mousePitch.mousemoveWindow(f,p);S&&S.pitchDelta&&h.setPitch(h.getPitch()+S.pitchDelta)}},Ss.prototype.off=function(){var f=this.element;G.removeEventListener(f,"mousedown",this.mousedown),G.removeEventListener(f,"touchstart",this.touchstart,{passive:!1}),G.removeEventListener(f,"touchmove",this.touchmove),G.removeEventListener(f,"touchend",this.touchend),G.removeEventListener(f,"touchcancel",this.reset),this.offTemp()},Ss.prototype.offTemp=function(){G.enableDrag(),G.removeEventListener(m.window,"mousemove",this.mousemove),G.removeEventListener(m.window,"mouseup",this.mouseup)},Ss.prototype.mousedown=function(f){this.down(m.extend({},f,{ctrlKey:!0,preventDefault:function(){return f.preventDefault()}}),G.mousePos(this.element,f)),G.addEventListener(m.window,"mousemove",this.mousemove),G.addEventListener(m.window,"mouseup",this.mouseup)},Ss.prototype.mousemove=function(f){this.move(f,G.mousePos(this.element,f))},Ss.prototype.mouseup=function(f){this.mouseRotate.mouseupWindow(f),this.mousePitch&&this.mousePitch.mouseupWindow(f),this.offTemp()},Ss.prototype.touchstart=function(f){1!==f.targetTouches.length?this.reset():(this._startPos=this._lastPos=G.touchPos(this.element,f.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return f.preventDefault()}},this._startPos))},Ss.prototype.touchmove=function(f){1!==f.targetTouches.length?this.reset():(this._lastPos=G.touchPos(this.element,f.targetTouches)[0],this.move({preventDefault:function(){return f.preventDefault()}},this._lastPos))},Ss.prototype.touchend=function(f){0===f.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Ss.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var ro={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Tu(f,p,h){var v=f.classList;for(var S in ro)v.remove("maplibregl-"+h+"-anchor-"+S,"mapboxgl-"+h+"-anchor-"+S);v.add("maplibregl-"+h+"-anchor-"+p,"mapboxgl-"+h+"-anchor-"+p)}var Pu,Cs=function(f){function p(h,v){if(f.call(this),(h instanceof m.window.HTMLElement||v)&&(h=m.extend({element:h},v)),m.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=h&&h.anchor||"center",this._color=h&&h.color||"#3FB1CE",this._scale=h&&h.scale||1,this._draggable=h&&h.draggable||!1,this._clickTolerance=h&&h.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=h&&h.rotation||0,this._rotationAlignment=h&&h.rotationAlignment||"auto",this._pitchAlignment=h&&h.pitchAlignment&&"auto"!==h.pitchAlignment?h.pitchAlignment:this._rotationAlignment,h&&h.element)this._element=h.element,this._offset=m.Point.convert(h&&h.offset||[0,0]);else{this._defaultMarker=!0,this._element=G.create("div"),this._element.setAttribute("aria-label","Map marker");var S=G.createNS("http://www.w3.org/2000/svg","svg");S.setAttributeNS(null,"display","block"),S.setAttributeNS(null,"height","41px"),S.setAttributeNS(null,"width","27px"),S.setAttributeNS(null,"viewBox","0 0 27 41");var P=G.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"stroke","none"),P.setAttributeNS(null,"stroke-width","1"),P.setAttributeNS(null,"fill","none"),P.setAttributeNS(null,"fill-rule","evenodd");var M=G.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"fill-rule","nonzero");var H=G.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"transform","translate(3.0, 29.0)"),H.setAttributeNS(null,"fill","#000000");for(var te=0,ae=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];te<ae.length;te+=1){var ge=ae[te],_e=G.createNS("http://www.w3.org/2000/svg","ellipse");_e.setAttributeNS(null,"opacity","0.04"),_e.setAttributeNS(null,"cx","10.5"),_e.setAttributeNS(null,"cy","5.80029008"),_e.setAttributeNS(null,"rx",ge.rx),_e.setAttributeNS(null,"ry",ge.ry),H.appendChild(_e)}var ye=G.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"fill",this._color);var Le=G.createNS("http://www.w3.org/2000/svg","path");Le.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ye.appendChild(Le);var Oe=G.createNS("http://www.w3.org/2000/svg","g");Oe.setAttributeNS(null,"opacity","0.25"),Oe.setAttributeNS(null,"fill","#000000");var Ge=G.createNS("http://www.w3.org/2000/svg","path");Ge.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Oe.appendChild(Ge);var Ie=G.createNS("http://www.w3.org/2000/svg","g");Ie.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ie.setAttributeNS(null,"fill","#FFFFFF");var ze=G.createNS("http://www.w3.org/2000/svg","g");ze.setAttributeNS(null,"transform","translate(8.0, 8.0)");var qe=G.createNS("http://www.w3.org/2000/svg","circle");qe.setAttributeNS(null,"fill","#000000"),qe.setAttributeNS(null,"opacity","0.25"),qe.setAttributeNS(null,"cx","5.5"),qe.setAttributeNS(null,"cy","5.5"),qe.setAttributeNS(null,"r","5.4999962");var ot=G.createNS("http://www.w3.org/2000/svg","circle");ot.setAttributeNS(null,"fill","#FFFFFF"),ot.setAttributeNS(null,"cx","5.5"),ot.setAttributeNS(null,"cy","5.5"),ot.setAttributeNS(null,"r","5.4999962"),ze.appendChild(qe),ze.appendChild(ot),M.appendChild(H),M.appendChild(ye),M.appendChild(Oe),M.appendChild(Ie),M.appendChild(ze),S.appendChild(M),S.setAttributeNS(null,"height",41*this._scale+"px"),S.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(S),this._offset=m.Point.convert(h&&h.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",function(yt){yt.preventDefault()}),this._element.addEventListener("mousedown",function(yt){yt.preventDefault()}),Tu(this._element,this._anchor,"marker"),this._popup=null}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.addTo=function(h){return this.remove(),this._map=h,h.getCanvasContainer().appendChild(this._element),h.on("move",this._update),h.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},p.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),G.remove(this._element),this._popup&&this._popup.remove(),this},p.prototype.getLngLat=function(){return this._lngLat},p.prototype.setLngLat=function(h){return this._lngLat=m.LngLat.convert(h),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},p.prototype.getElement=function(){return this._element},p.prototype.setPopup=function(h){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),h){if(!("offset"in h.options)){var v=Math.sqrt(Math.pow(13.5,2)/2);h.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(24.6+v)],"bottom-right":[-v,-1*(24.6+v)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=h,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},p.prototype._onKeyPress=function(h){var v=h.code,S=h.charCode||h.keyCode;"Space"!==v&&"Enter"!==v&&32!==S&&13!==S||this.togglePopup()},p.prototype._onMapClick=function(h){var v=h.originalEvent.target,S=this._element;this._popup&&(v===S||S.contains(v))&&this.togglePopup()},p.prototype.getPopup=function(){return this._popup},p.prototype.togglePopup=function(){var h=this._popup;return h?(h.isOpen()?h.remove():h.addTo(this._map),this):this},p.prototype._update=function(h){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Pd(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var v="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?v="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(v="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var S="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?S="rotateX(0deg)":"map"===this._pitchAlignment&&(S="rotateX("+this._map.getPitch()+"deg)"),h&&"moveend"!==h.type||(this._pos=this._pos.round()),G.setTransform(this._element,ro[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+S+" "+v)}},p.prototype.getOffset=function(){return this._offset},p.prototype.setOffset=function(h){return this._offset=m.Point.convert(h),this._update(),this},p.prototype._onMove=function(h){if(!this._isDragging){var v=this._clickTolerance||this._map._clickTolerance;this._isDragging=h.point.dist(this._pointerdownPos)>=v}this._isDragging&&(this._pos=h.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new m.Event("dragstart"))),this.fire(new m.Event("drag")))},p.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new m.Event("dragend")),this._state="inactive"},p.prototype._addDragHandler=function(h){this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(this._pos).add(this._offset),this._pointerdownPos=h.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},p.prototype.setDraggable=function(h){return this._draggable=!!h,this._map&&(h?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},p.prototype.isDraggable=function(){return this._draggable},p.prototype.setRotation=function(h){return this._rotation=h||0,this._update(),this},p.prototype.getRotation=function(){return this._rotation},p.prototype.setRotationAlignment=function(h){return this._rotationAlignment=h||"auto",this._update(),this},p.prototype.getRotationAlignment=function(){return this._rotationAlignment},p.prototype.setPitchAlignment=function(h){return this._pitchAlignment=h&&"auto"!==h?h:this._rotationAlignment,this._update(),this},p.prototype.getPitchAlignment=function(){return this._pitchAlignment},p}(m.Evented),kc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Dl=0,Al=!1,vf=function(f){function p(h){f.call(this),this.options=m.extend({},kc,h),m.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.onAdd=function(h){var v;return this._map=h,this._container=G.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),v=this._setupUI,void 0!==Pu?v(Pu):void 0!==m.window.navigator.permissions?m.window.navigator.permissions.query({name:"geolocation"}).then(function(S){v(Pu="denied"!==S.state)}):v(Pu=!!m.window.navigator.geolocation),this._container},p.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(m.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),G.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Dl=0,Al=!1},p.prototype._isOutOfMapMaxBounds=function(h){var v=this._map.getMaxBounds(),S=h.coords;return v&&(S.longitude<v.getWest()||S.longitude>v.getEast()||S.latitude<v.getSouth()||S.latitude>v.getNorth())},p.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}},p.prototype._onSuccess=function(h){if(this._map){if(this._isOutOfMapMaxBounds(h))return this._setErrorState(),this.fire(new m.Event("outofmaxbounds",h)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=h,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(h),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(h),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new m.Event("geolocate",h)),this._finish()}},p.prototype._updateCamera=function(h){var v=new m.LngLat(h.coords.longitude,h.coords.latitude),S=h.coords.accuracy,P=this._map.getBearing(),M=m.extend({bearing:P},this.options.fitBoundsOptions);this._map.fitBounds(v.toBounds(S),M,{geolocateSource:!0})},p.prototype._updateMarker=function(h){if(h){var v=new m.LngLat(h.coords.longitude,h.coords.latitude);this._accuracyCircleMarker.setLngLat(v).addTo(this._map),this._userLocationDotMarker.setLngLat(v).addTo(this._map),this._accuracy=h.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},p.prototype._updateCircleRadius=function(){var h=this._map._container.clientHeight/2,v=this._map.unproject([0,h]),S=this._map.unproject([1,h]),P=v.distanceTo(S),M=Math.ceil(2*this._accuracy/P);this._circleElement.style.width=M+"px",this._circleElement.style.height=M+"px"},p.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},p.prototype._onError=function(h){if(this._map){if(this.options.trackUserLocation)if(1===h.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var v=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=v,this._geolocateButton.setAttribute("aria-label",v),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===h.code&&Al)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new m.Event("error",h)),this._finish()}},p.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},p.prototype._setupUI=function(h){var v=this;if(this._container.addEventListener("contextmenu",function(M){return M.preventDefault()}),this._geolocateButton=G.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),G.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===h){m.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var S=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=S,this._geolocateButton.setAttribute("aria-label",S)}else{var P=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=P,this._geolocateButton.setAttribute("aria-label",P)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=G.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Cs(this._dotElement),this._circleElement=G.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Cs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(M){M.geolocateSource||"ACTIVE_LOCK"!==v._watchState||M.originalEvent&&"resize"===M.originalEvent.type||(v._watchState="BACKGROUND",v._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),v._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),v.fire(new m.Event("trackuserlocationend")))})},p.prototype.trigger=function(){if(!this._setup)return m.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new m.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Dl--,Al=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new m.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new m.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var h;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Dl>1?(h={maximumAge:6e5,timeout:0},Al=!0):(h=this.options.positionOptions,Al=!1),this._geolocationWatchID=m.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,h)}}else m.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},p.prototype._clearWatch=function(){m.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},p}(m.Evented),Rh={maxWidth:100,unit:"metric"},ja=function(f){this.options=m.extend({},Rh,f),m.bindAll(["_onMove","setUnit"],this)};function da(f,p,h){var v=h&&h.maxWidth||100,S=f._container.clientHeight/2,P=f.unproject([0,S]),M=f.unproject([v,S]),H=P.distanceTo(M);if(h&&"imperial"===h.unit){var te=3.2808*H;te>5280?rs(p,v,te/5280,f._getUIString("ScaleControl.Miles")):rs(p,v,te,f._getUIString("ScaleControl.Feet"))}else h&&"nautical"===h.unit?rs(p,v,H/1852,f._getUIString("ScaleControl.NauticalMiles")):H>=1e3?rs(p,v,H/1e3,f._getUIString("ScaleControl.Kilometers")):rs(p,v,H,f._getUIString("ScaleControl.Meters"))}function rs(f,p,h,v){var S,P,M,te,ae,H=(S=h,(P=Math.pow(10,(""+Math.floor(S)).length-1))*(M=(M=S/P)>=10?10:M>=5?5:M>=3?3:M>=2?2:M>=1?1:(te=M,ae=Math.pow(10,Math.ceil(-Math.log(te)/Math.LN10)),Math.round(te*ae)/ae)));f.style.width=p*(H/h)+"px",f.innerHTML=H+"&nbsp;"+v}ja.prototype.getDefaultPosition=function(){return"bottom-left"},ja.prototype._onMove=function(){da(this._map,this._container,this.options)},ja.prototype.onAdd=function(f){return this._map=f,this._container=G.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ja.prototype.onRemove=function(){G.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ja.prototype.setUnit=function(f){this.options.unit=f,da(this._map,this._container,this.options)};var Is=function(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof m.window.HTMLElement?this._container=f.container:m.warnOnce("Full screen control 'container' must be a DOM element.")),m.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in m.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in m.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in m.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in m.window.document&&(this._fullscreenchange="MSFullscreenChange")};Is.prototype.onAdd=function(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=G.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",m.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Is.prototype.onRemove=function(){G.remove(this._controlContainer),this._map=null,m.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Is.prototype._checkFullscreenSupport=function(){return!!(m.window.document.fullscreenEnabled||m.window.document.mozFullScreenEnabled||m.window.document.msFullscreenEnabled||m.window.document.webkitFullscreenEnabled)},Is.prototype._setupUI=function(){var f=this._fullscreenButton=G.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);G.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",f).setAttribute("aria-hidden",!0),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),m.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Is.prototype._updateTitle=function(){var f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.title=f},Is.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Is.prototype._isFullscreen=function(){return this._fullscreen},Is.prototype._changeIcon=function(){(m.window.document.fullscreenElement||m.window.document.mozFullScreenElement||m.window.document.webkitFullscreenElement||m.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Is.prototype._onClickFullscreen=function(){this._isFullscreen()?m.window.document.exitFullscreen?m.window.document.exitFullscreen():m.window.document.mozCancelFullScreen?m.window.document.mozCancelFullScreen():m.window.document.msExitFullscreen?m.window.document.msExitFullscreen():m.window.document.webkitCancelFullScreen&&m.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var ol={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},uu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Fc=function(f){function p(h){f.call(this),this.options=m.extend(Object.create(ol),h),m.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.addTo=function(h){return this._map&&this.remove(),this._map=h,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new m.Event("open")),this},p.prototype.isOpen=function(){return!!this._map},p.prototype.remove=function(){return this._content&&G.remove(this._content),this._container&&(G.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new m.Event("close")),this},p.prototype.getLngLat=function(){return this._lngLat},p.prototype.setLngLat=function(h){return this._lngLat=m.LngLat.convert(h),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this},p.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this},p.prototype.getElement=function(){return this._container},p.prototype.setText=function(h){return this.setDOMContent(m.window.document.createTextNode(h))},p.prototype.setHTML=function(h){var v,S=m.window.document.createDocumentFragment(),P=m.window.document.createElement("body");for(P.innerHTML=h;v=P.firstChild;)S.appendChild(v);return this.setDOMContent(S)},p.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},p.prototype.setMaxWidth=function(h){return this.options.maxWidth=h,this._update(),this},p.prototype.setDOMContent=function(h){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=G.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(h),this._createCloseButton(),this._update(),this._focusFirstElement(),this},p.prototype.addClassName=function(h){this._container&&this._container.classList.add(h)},p.prototype.removeClassName=function(h){this._container&&this._container.classList.remove(h)},p.prototype.setOffset=function(h){return this.options.offset=h,this._update(),this},p.prototype.toggleClassName=function(h){if(this._container)return this._container.classList.toggle(h)},p.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=G.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},p.prototype._onMouseUp=function(h){this._update(h.point)},p.prototype._onMouseMove=function(h){this._update(h.point)},p.prototype._onDrag=function(h){this._update(h.point)},p.prototype._update=function(h){var v=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=G.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=G.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(_e){return v._container.classList.add(_e)}),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Pd(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||h)){var S=this._pos=this._trackPointer&&h?h:this._map.project(this._lngLat),P=this.options.anchor,M=function _e(ye){if(ye){if("number"==typeof ye){var Le=Math.round(Math.sqrt(.5*Math.pow(ye,2)));return{center:new m.Point(0,0),top:new m.Point(0,ye),"top-left":new m.Point(Le,Le),"top-right":new m.Point(-Le,Le),bottom:new m.Point(0,-ye),"bottom-left":new m.Point(Le,-Le),"bottom-right":new m.Point(-Le,-Le),left:new m.Point(ye,0),right:new m.Point(-ye,0)}}if(ye instanceof m.Point||Array.isArray(ye)){var Oe=m.Point.convert(ye);return{center:Oe,top:Oe,"top-left":Oe,"top-right":Oe,bottom:Oe,"bottom-left":Oe,"bottom-right":Oe,left:Oe,right:Oe}}return{center:m.Point.convert(ye.center||[0,0]),top:m.Point.convert(ye.top||[0,0]),"top-left":m.Point.convert(ye["top-left"]||[0,0]),"top-right":m.Point.convert(ye["top-right"]||[0,0]),bottom:m.Point.convert(ye.bottom||[0,0]),"bottom-left":m.Point.convert(ye["bottom-left"]||[0,0]),"bottom-right":m.Point.convert(ye["bottom-right"]||[0,0]),left:m.Point.convert(ye.left||[0,0]),right:m.Point.convert(ye.right||[0,0])}}return _e(new m.Point(0,0))}(this.options.offset);if(!P){var H,te=this._container.offsetWidth,ae=this._container.offsetHeight;H=S.y+M.bottom.y<ae?["top"]:S.y>this._map.transform.height-ae?["bottom"]:[],S.x<te/2?H.push("left"):S.x>this._map.transform.width-te/2&&H.push("right"),P=0===H.length?"bottom":H.join("-")}var ge=S.add(M[P]).round();G.setTransform(this._container,ro[P]+" translate("+ge.x+"px,"+ge.y+"px)"),Tu(this._container,P,"popup")}},p.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var h=this._container.querySelector(uu);h&&h.focus()}},p.prototype._onClose=function(){this.remove()},p}(m.Evented),zc={version:m.version,supported:q,setRTLTextPlugin:m.setRTLTextPlugin,getRTLTextPluginStatus:m.getRTLTextPluginStatus,Map:ea,NavigationControl:Lr,GeolocateControl:vf,AttributionControl:Ba,ScaleControl:ja,FullscreenControl:Is,Popup:Fc,Marker:Cs,Style:Vi,LngLat:m.LngLat,LngLatBounds:m.LngLatBounds,Point:m.Point,MercatorCoordinate:m.MercatorCoordinate,Evented:m.Evented,config:m.config,prewarm:function(){mn().acquire(ct)},clearPrewarmedResources:function(){var f=Jt;f&&(f.isPreloaded()&&1===f.numActive()?(f.release(ct),Jt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return m.config.ACCESS_TOKEN},set accessToken(f){m.config.ACCESS_TOKEN=f},get baseApiUrl(){return m.config.API_URL},set baseApiUrl(f){m.config.API_URL=f},get workerCount(){return Et.workerCount},set workerCount(f){Et.workerCount=f},get maxParallelImageRequests(){return m.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){m.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage:function(f){m.clearTileCache(f)},workerUrl:"",addProtocol:function(f,p){m.config.REGISTERED_PROTOCOLS[f]=p},removeProtocol:function(f){delete m.config.REGISTERED_PROTOCOLS[f]}};return zc}),V}()},7150:(Ae,J)=>{J.printMsg=function(){console.log("This is a message from the demo package")}},6117:function(Ae,J,U){var V;Ae=U.nmd(Ae),function(X){"object"==typeof global&&global;var z,T=2147483647,D=36,Me=/^xn--/,Ne=/[^\x20-\x7E]/,Je=/[\x2E\u3002\uFF0E\uFF61]/g,je={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ke=Math.floor,nt=String.fromCharCode;function Ue(bt){throw RangeError(je[bt])}function A(bt,Ye){for(var xt=bt.length,yn=[];xt--;)yn[xt]=Ye(bt[xt]);return yn}function O(bt,Ye){var xt=bt.split("@"),yn="";return xt.length>1&&(yn=xt[0]+"@",bt=xt[1]),yn+A((bt=bt.replace(Je,".")).split("."),Ye).join(".")}function B(bt){for(var Bt,bn,Ye=[],xt=0,yn=bt.length;xt<yn;)(Bt=bt.charCodeAt(xt++))>=55296&&Bt<=56319&&xt<yn?56320==(64512&(bn=bt.charCodeAt(xt++)))?Ye.push(((1023&Bt)<<10)+(1023&bn)+65536):(Ye.push(Bt),xt--):Ye.push(Bt);return Ye}function j(bt){return A(bt,function(Ye){var xt="";return Ye>65535&&(xt+=nt((Ye-=65536)>>>10&1023|55296),Ye=56320|1023&Ye),xt+nt(Ye)}).join("")}function ee(bt){return bt-48<10?bt-22:bt-65<26?bt-65:bt-97<26?bt-97:D}function W(bt,Ye){return bt+22+75*(bt<26)-((0!=Ye)<<5)}function ce(bt,Ye,xt){var yn=0;for(bt=xt?Ke(bt/700):bt>>1,bt+=Ke(bt/Ye);bt>455;yn+=D)bt=Ke(bt/35);return Ke(yn+36*bt/(bt+38))}function Ze(bt){var yn,xn,pn,Xn,Zt,Ce,Vn,ur,mi,Bi,Ye=[],xt=bt.length,Bt=0,bn=128,Ct=72;for((xn=bt.lastIndexOf("-"))<0&&(xn=0),pn=0;pn<xn;++pn)bt.charCodeAt(pn)>=128&&Ue("not-basic"),Ye.push(bt.charCodeAt(pn));for(Xn=xn>0?xn+1:0;Xn<xt;){for(Zt=Bt,Ce=1,Vn=D;Xn>=xt&&Ue("invalid-input"),((ur=ee(bt.charCodeAt(Xn++)))>=D||ur>Ke((T-Bt)/Ce))&&Ue("overflow"),Bt+=ur*Ce,!(ur<(mi=Vn<=Ct?1:Vn>=Ct+26?26:Vn-Ct));Vn+=D)Ce>Ke(T/(Bi=D-mi))&&Ue("overflow"),Ce*=Bi;Ct=ce(Bt-Zt,yn=Ye.length+1,0==Zt),Ke(Bt/yn)>T-bn&&Ue("overflow"),bn+=Ke(Bt/yn),Bt%=yn,Ye.splice(Bt++,0,bn)}return j(Ye)}function lt(bt){var Ye,xt,yn,Bt,bn,Ct,xn,pn,Xn,Zt,Ce,ur,mi,Bi,Wt,Vn=[];for(ur=(bt=B(bt)).length,Ye=128,xt=0,bn=72,Ct=0;Ct<ur;++Ct)(Ce=bt[Ct])<128&&Vn.push(nt(Ce));for(yn=Bt=Vn.length,Bt&&Vn.push("-");yn<ur;){for(xn=T,Ct=0;Ct<ur;++Ct)(Ce=bt[Ct])>=Ye&&Ce<xn&&(xn=Ce);for(xn-Ye>Ke((T-xt)/(mi=yn+1))&&Ue("overflow"),xt+=(xn-Ye)*mi,Ye=xn,Ct=0;Ct<ur;++Ct)if((Ce=bt[Ct])<Ye&&++xt>T&&Ue("overflow"),Ce==Ye){for(pn=xt,Xn=D;!(pn<(Zt=Xn<=bn?1:Xn>=bn+26?26:Xn-bn));Xn+=D)Vn.push(nt(W(Zt+(Wt=pn-Zt)%(Bi=D-Zt),0))),pn=Ke(Wt/Bi);Vn.push(nt(W(pn,0))),bn=ce(xt,mi,yn==Bt),xt=0,++yn}++xt,++Ye}return Vn.join("")}z={version:"1.3.2",ucs2:{decode:B,encode:j},decode:Ze,encode:lt,toASCII:function wt(bt){return O(bt,function(Ye){return Ne.test(Ye)?"xn--"+lt(Ye):Ye})},toUnicode:function we(bt){return O(bt,function(Ye){return Me.test(Ye)?Ze(Ye.slice(4).toLowerCase()):Ye})}},void 0!==(V=function(){return z}.call(J,U,J,Ae))&&(Ae.exports=V)}()},516:Ae=>{"use strict";function J(U,V){return Object.prototype.hasOwnProperty.call(U,V)}Ae.exports=function(U,V,X,m){X=X||"=";var q={};if("string"!=typeof U||0===U.length)return q;var G=/\+/g;U=U.split(V=V||"&");var z=1e3;m&&"number"==typeof m.maxKeys&&(z=m.maxKeys);var T=U.length;z>0&&T>z&&(T=z);for(var D=0;D<T;++D){var Y,ie,pe,se,F=U[D].replace(G,"%20"),Z=F.indexOf(X);Z>=0?(Y=F.substr(0,Z),ie=F.substr(Z+1)):(Y=F,ie=""),pe=decodeURIComponent(Y),se=decodeURIComponent(ie),J(q,pe)?Array.isArray(q[pe])?q[pe].push(se):q[pe]=[q[pe],se]:q[pe]=se}return q}},5776:Ae=>{"use strict";var J=function(U){switch(typeof U){case"string":return U;case"boolean":return U?"true":"false";case"number":return isFinite(U)?U:"";default:return""}};Ae.exports=function(U,V,X,m){return V=V||"&",X=X||"=",null===U&&(U=void 0),"object"==typeof U?Object.keys(U).map(function(q){var G=encodeURIComponent(J(q))+X;return Array.isArray(U[q])?U[q].map(function(z){return G+encodeURIComponent(J(z))}).join(V):G+encodeURIComponent(J(U[q]))}).join(V):m?encodeURIComponent(J(m))+X+encodeURIComponent(J(U)):""}},7137:(Ae,J,U)=>{"use strict";J.decode=J.parse=U(516),J.encode=J.stringify=U(5776)},7231:Ae=>{"use strict";class J{constructor(V={}){if(!(V.maxSize&&V.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=V.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(V,X){this.cache.set(V,X),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(V){if(this.cache.has(V))return this.cache.get(V);if(this.oldCache.has(V)){const X=this.oldCache.get(V);return this.oldCache.delete(V),this._set(V,X),X}}set(V,X){return this.cache.has(V)?this.cache.set(V,X):this._set(V,X),this}has(V){return this.cache.has(V)||this.oldCache.has(V)}peek(V){return this.cache.has(V)?this.cache.get(V):this.oldCache.has(V)?this.oldCache.get(V):void 0}delete(V){const X=this.cache.delete(V);return X&&this._size--,this.oldCache.delete(V)||X}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[V]of this)yield V}*values(){for(const[,V]of this)yield V}*[Symbol.iterator](){for(const V of this.cache)yield V;for(const V of this.oldCache){const[X]=V;this.cache.has(X)||(yield V)}}get size(){let V=0;for(const X of this.oldCache.keys())this.cache.has(X)||V++;return this._size+V}}Ae.exports=J},6775:function(Ae){var V;V=function(){var U=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function V(z){return z.match(U)||[]}function m(z){return{language:(z=V(z))[1]||"",extlang:z[2]||"",script:z[3]||"",region:z[4]||""}}function q(z,T,D){Object.defineProperty(z,T,{value:D,enumerable:!0})}function G(z,T,D){function F(Z){return V(Z)[z]||""}q(F,"pattern",T),q(m,D,F)}return G(1,/^[a-zA-Z]{2,3}$/,"language"),G(2,/^[a-zA-Z]{3}$/,"extlang"),G(3,/^[a-zA-Z]{4}$/,"script"),G(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),q(m,"split",function X(z){return V(z).filter(function(T,D){return T&&D})}),m},Ae.exports?Ae.exports=V():this.subtag=V()},4208:(Ae,J,U)=>{"use strict";var V=U(8526);Ae.exports=V,typeof window<"u"&&(window.Suggestions=V)},4861:Ae=>{"use strict";var J=function(U){return this.component=U,this.items=[],this.active=U.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,U.el.parentNode.insertBefore(this.wrapper,U.el.nextSibling),this};J.prototype.show=function(){this.element.style.display="block"},J.prototype.hide=function(){this.element.style.display="none"},J.prototype.add=function(U){this.items.push(U)},J.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},J.prototype.isEmpty=function(){return!this.items.length},J.prototype.isVisible=function(){return"block"===this.element.style.display},J.prototype.draw=function(){if(this.element.innerHTML="",0!==this.items.length){for(var U=0;U<this.items.length;U++)this.drawItem(this.items[U],this.active===U);this.show()}else this.hide()},J.prototype.drawItem=function(U,V){var X=document.createElement("li"),m=document.createElement("a");V&&(X.className+=" active"),m.innerHTML=U.string,X.appendChild(m),this.element.appendChild(X),X.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),X.addEventListener("mouseup",function(){this.handleMouseUp.call(this,U)}.bind(this))},J.prototype.handleMouseUp=function(U){this.selectingListItem=!1,this.component.value(U.original),this.clear(),this.draw()},J.prototype.move=function(U){this.active=U,this.draw()},J.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},J.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},J.prototype.drawError=function(U){var V=document.createElement("li");V.innerHTML=U,this.element.appendChild(V),this.show()},Ae.exports=J},8526:(Ae,J,U)=>{"use strict";var V=U(4703),X=U(5780),m=U(4861),q=function(G,z,T){return this.options=V({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},T=T||{}),this.el=G,this.data=z||[],this.list=new m(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(D){this.handleKeyUp(D.keyCode,D)}.bind(this),!1),this.el.addEventListener("keydown",function(D){this.handleKeyDown(D)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(D){this.handlePaste(D)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};q.prototype.handleKeyUp=function(G,z){if(40!==G&&38!==G&&27!==G&&9!==G){if(13===G)return void(this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),z.stopPropagation()));this.handleInputChange(this.el.value)}},q.prototype.handleKeyDown=function(G){switch(G.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&G.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},q.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},q.prototype.handlePaste=function(G){if(G.clipboardData)this.handleInputChange(G.clipboardData.getData("Text"));else{var z=this;setTimeout(function(){z.handleInputChange(G.target.value)},100)}},q.prototype.handleInputChange=function(G){this.query=this.normalize(G),this.list.clear(),this.query.length<this.options.minLength?this.list.draw():this.getCandidates(function(z){for(var T=0;T<z.length&&(this.list.add(z[T]),T!==this.options.limit-1);T++);this.list.draw()}.bind(this))},q.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},q.prototype.update=function(G){this.data=G,this.handleKeyUp()},q.prototype.clear=function(){this.data=[],this.list.clear()},q.prototype.normalize=function(G){return G.toLowerCase()},q.prototype.match=function(G,z){return G.indexOf(z)>-1},q.prototype.value=function(G){if(this.selected=G,this.el.value=this.getItemValue(G||{place_name:this.query}),document.createEvent){var z=document.createEvent("HTMLEvents");z.initEvent("change",!0,!1),this.el.dispatchEvent(z)}else this.el.fireEvent("onchange")},q.prototype.getCandidates=function(G){var z={pre:"<strong>",post:"</strong>",extract:function(D){return this.getItemValue(D)}.bind(this)};G(this.options.filter?X.filter(this.query,this.data,z).map(function(D){return{original:D.original,string:this.render(D.original,D.string)}}.bind(this)):this.data.map(function(D){return{original:D,string:this.render(D)}}.bind(this)))},q.prototype.getItemValue=function(G){return G},q.prototype.render=function(G,z){if(z)return z;for(var T=this.getItemValue(G.original?G.original:G),D=this.normalize(T),F=D.lastIndexOf(this.query);F>-1;){var Z=F+this.query.length;T=T.slice(0,F)+"<strong>"+T.slice(F,Z)+"</strong>"+T.slice(Z),F=D.slice(0,F).lastIndexOf(this.query)}return T},q.prototype.renderError=function(G){this.list.drawError(G)},Ae.exports=q},5080:Ae=>{var J=Ae.exports=function(se){return new U(se)};function U(se){this.value=se}function V(se,be,Me){var Ne=[],Je=[],je=!0;return function Se(Ke){var nt=Me?X(Ke):Ke,It={},Ue=!0,A={node:nt,node_:Ke,path:[].concat(Ne),parent:Je[Je.length-1],parents:Je,key:Ne.slice(-1)[0],isRoot:0===Ne.length,level:Ne.length,circular:null,update:function(j,ee){A.isRoot||(A.parent.node[A.key]=j),A.node=j,ee&&(Ue=!1)},delete:function(j){delete A.parent.node[A.key],j&&(Ue=!1)},remove:function(j){Y(A.parent.node)?A.parent.node.splice(A.key,1):delete A.parent.node[A.key],j&&(Ue=!1)},keys:null,before:function(j){It.before=j},after:function(j){It.after=j},pre:function(j){It.pre=j},post:function(j){It.post=j},stop:function(){je=!1},block:function(){Ue=!1}};if(!je)return A;function O(){if("object"==typeof A.node&&null!==A.node){(!A.keys||A.node_!==A.node)&&(A.keys=m(A.node)),A.isLeaf=0==A.keys.length;for(var j=0;j<Je.length;j++)if(Je[j].node_===Ke){A.circular=Je[j];break}}else A.isLeaf=!0,A.keys=null;A.notLeaf=!A.isLeaf,A.notRoot=!A.isRoot}O();var B=be.call(A,A.node);return void 0!==B&&A.update&&A.update(B),It.before&&It.before.call(A,A.node),Ue&&("object"==typeof A.node&&null!==A.node&&!A.circular&&(Je.push(A),O(),ie(A.keys,function(j,ee){Ne.push(j),It.pre&&It.pre.call(A,A.node[j],j);var W=Se(A.node[j]);Me&&pe.call(A.node,j)&&(A.node[j]=W.node),W.isLast=ee==A.keys.length-1,W.isFirst=0==ee,It.post&&It.post.call(A,W),Ne.pop()}),Je.pop()),It.after&&It.after.call(A,A.node)),A}(se).node}function X(se){if("object"==typeof se&&null!==se){var be;if(Y(se))be=[];else if(function G(se){return"[object Date]"===q(se)}(se))be=new Date(se.getTime?se.getTime():se);else if(function z(se){return"[object RegExp]"===q(se)}(se))be=new RegExp(se);else if(function T(se){return"[object Error]"===q(se)}(se))be={message:se.message};else if(function D(se){return"[object Boolean]"===q(se)}(se))be=new Boolean(se);else if(function F(se){return"[object Number]"===q(se)}(se))be=new Number(se);else if(function Z(se){return"[object String]"===q(se)}(se))be=new String(se);else if(Object.create&&Object.getPrototypeOf)be=Object.create(Object.getPrototypeOf(se));else if(se.constructor===Object)be={};else{var Ne=function(){};Ne.prototype=se.constructor&&se.constructor.prototype||se.__proto__||{},be=new Ne}return ie(m(se),function(Je){be[Je]=se[Je]}),be}return se}U.prototype.get=function(se){for(var be=this.value,Me=0;Me<se.length;Me++){var Ne=se[Me];if(!be||!pe.call(be,Ne)){be=void 0;break}be=be[Ne]}return be},U.prototype.has=function(se){for(var be=this.value,Me=0;Me<se.length;Me++){var Ne=se[Me];if(!be||!pe.call(be,Ne))return!1;be=be[Ne]}return!0},U.prototype.set=function(se,be){for(var Me=this.value,Ne=0;Ne<se.length-1;Ne++){var Je=se[Ne];pe.call(Me,Je)||(Me[Je]={}),Me=Me[Je]}return Me[se[Ne]]=be,be},U.prototype.map=function(se){return V(this.value,se,!0)},U.prototype.forEach=function(se){return this.value=V(this.value,se,!1),this.value},U.prototype.reduce=function(se,be){var Me=1===arguments.length,Ne=Me?this.value:be;return this.forEach(function(Je){(!this.isRoot||!Me)&&(Ne=se.call(this,Ne,Je))}),Ne},U.prototype.paths=function(){var se=[];return this.forEach(function(be){se.push(this.path)}),se},U.prototype.nodes=function(){var se=[];return this.forEach(function(be){se.push(this.node)}),se},U.prototype.clone=function(){var se=[],be=[];return function Me(Ne){for(var Je=0;Je<se.length;Je++)if(se[Je]===Ne)return be[Je];if("object"==typeof Ne&&null!==Ne){var je=X(Ne);return se.push(Ne),be.push(je),ie(m(Ne),function(Se){je[Se]=Me(Ne[Se])}),se.pop(),be.pop(),je}return Ne}(this.value)};var m=Object.keys||function(be){var Me=[];for(var Ne in be)Me.push(Ne);return Me};function q(se){return Object.prototype.toString.call(se)}var Y=Array.isArray||function(be){return"[object Array]"===Object.prototype.toString.call(be)},ie=function(se,be){if(se.forEach)return se.forEach(be);for(var Me=0;Me<se.length;Me++)be(se[Me],Me,se)};ie(m(U.prototype),function(se){J[se]=function(be){var Me=[].slice.call(arguments,1),Ne=new U(be);return Ne[se].apply(Ne,Me)}});var pe=Object.hasOwnProperty||function(se,be){return be in se}},8762:(Ae,J,U)=>{"use strict";var X=U(6117),m=U(796);function q(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}J.Qc=Se,J.WU=function Ke(Ue){return m.isString(Ue)&&(Ue=Se(Ue)),Ue instanceof q?Ue.format():q.prototype.format.call(Ue)};var G=/^([a-z0-9.+-]+:)/i,z=/:[0-9]*$/,T=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,F=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Z=["'"].concat(F),Y=["%","/","?",";","#"].concat(Z),ie=["/","?","#"],se=/^[+a-z0-9A-Z_-]{0,63}$/,be=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Me={javascript:!0,"javascript:":!0},Ne={javascript:!0,"javascript:":!0},Je={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},je=U(7137);function Se(Ue,A,O){if(Ue&&m.isObject(Ue)&&Ue instanceof q)return Ue;var B=new q;return B.parse(Ue,A,O),B}q.prototype.parse=function(Ue,A,O){if(!m.isString(Ue))throw new TypeError("Parameter 'url' must be a string, not "+typeof Ue);var B=Ue.indexOf("?"),j=-1!==B&&B<Ue.indexOf("#")?"?":"#",ee=Ue.split(j);ee[0]=ee[0].replace(/\\/g,"/");var ce=Ue=ee.join(j);if(ce=ce.trim(),!O&&1===Ue.split("#").length){var Ze=T.exec(ce);if(Ze)return this.path=ce,this.href=ce,this.pathname=Ze[1],Ze[2]?(this.search=Ze[2],this.query=A?je.parse(this.search.substr(1)):this.search.substr(1)):A&&(this.search="",this.query={}),this}var lt=G.exec(ce);if(lt){var we=(lt=lt[0]).toLowerCase();this.protocol=we,ce=ce.substr(lt.length)}if(O||lt||ce.match(/^\/\/[^@\/]+@[^@\/]+/)){var wt="//"===ce.substr(0,2);wt&&(!lt||!Ne[lt])&&(ce=ce.substr(2),this.slashes=!0)}if(!Ne[lt]&&(wt||lt&&!Je[lt])){for(var bt=-1,Ye=0;Ye<ie.length;Ye++)-1!==(xt=ce.indexOf(ie[Ye]))&&(-1===bt||xt<bt)&&(bt=xt);var yn,Bt;for(-1!==(Bt=-1===bt?ce.lastIndexOf("@"):ce.lastIndexOf("@",bt))&&(yn=ce.slice(0,Bt),ce=ce.slice(Bt+1),this.auth=decodeURIComponent(yn)),bt=-1,Ye=0;Ye<Y.length;Ye++){var xt;-1!==(xt=ce.indexOf(Y[Ye]))&&(-1===bt||xt<bt)&&(bt=xt)}-1===bt&&(bt=ce.length),this.host=ce.slice(0,bt),ce=ce.slice(bt),this.parseHost(),this.hostname=this.hostname||"";var bn="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!bn)for(var Ct=this.hostname.split(/\./),xn=(Ye=0,Ct.length);Ye<xn;Ye++){var pn=Ct[Ye];if(pn&&!pn.match(se)){for(var Xn="",Zt=0,Ce=pn.length;Zt<Ce;Zt++)pn.charCodeAt(Zt)>127?Xn+="x":Xn+=pn[Zt];if(!Xn.match(se)){var Vn=Ct.slice(0,Ye),ur=Ct.slice(Ye+1),mi=pn.match(be);mi&&(Vn.push(mi[1]),ur.unshift(mi[2])),ur.length&&(ce="/"+ur.join(".")+ce),this.hostname=Vn.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),bn||(this.hostname=X.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,bn&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==ce[0]&&(ce="/"+ce))}if(!Me[we])for(Ye=0,xn=Z.length;Ye<xn;Ye++){var Lt=Z[Ye];if(-1!==ce.indexOf(Lt)){var Ma=encodeURIComponent(Lt);Ma===Lt&&(Ma=escape(Lt)),ce=ce.split(Lt).join(Ma)}}var pa=ce.indexOf("#");-1!==pa&&(this.hash=ce.substr(pa),ce=ce.slice(0,pa));var si=ce.indexOf("?");return-1!==si?(this.search=ce.substr(si),this.query=ce.substr(si+1),A&&(this.query=je.parse(this.query)),ce=ce.slice(0,si)):A&&(this.search="",this.query={}),ce&&(this.pathname=ce),Je[we]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},q.prototype.format=function(){var Ue=this.auth||"";Ue&&(Ue=(Ue=encodeURIComponent(Ue)).replace(/%3A/i,":"),Ue+="@");var A=this.protocol||"",O=this.pathname||"",B=this.hash||"",j=!1,ee="";this.host?j=Ue+this.host:this.hostname&&(j=Ue+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(j+=":"+this.port)),this.query&&m.isObject(this.query)&&Object.keys(this.query).length&&(ee=je.stringify(this.query));var W=this.search||ee&&"?"+ee||"";return A&&":"!==A.substr(-1)&&(A+=":"),this.slashes||(!A||Je[A])&&!1!==j?(j="//"+(j||""),O&&"/"!==O.charAt(0)&&(O="/"+O)):j||(j=""),B&&"#"!==B.charAt(0)&&(B="#"+B),W&&"?"!==W.charAt(0)&&(W="?"+W),A+j+(O=O.replace(/[?#]/g,function(ce){return encodeURIComponent(ce)}))+(W=W.replace("#","%23"))+B},q.prototype.resolve=function(Ue){return this.resolveObject(Se(Ue,!1,!0)).format()},q.prototype.resolveObject=function(Ue){if(m.isString(Ue)){var A=new q;A.parse(Ue,!1,!0),Ue=A}for(var O=new q,B=Object.keys(this),j=0;j<B.length;j++){var ee=B[j];O[ee]=this[ee]}if(O.hash=Ue.hash,""===Ue.href)return O.href=O.format(),O;if(Ue.slashes&&!Ue.protocol){for(var W=Object.keys(Ue),ce=0;ce<W.length;ce++){var Ze=W[ce];"protocol"!==Ze&&(O[Ze]=Ue[Ze])}return Je[O.protocol]&&O.hostname&&!O.pathname&&(O.path=O.pathname="/"),O.href=O.format(),O}if(Ue.protocol&&Ue.protocol!==O.protocol){if(!Je[Ue.protocol]){for(var lt=Object.keys(Ue),we=0;we<lt.length;we++){var wt=lt[we];O[wt]=Ue[wt]}return O.href=O.format(),O}if(O.protocol=Ue.protocol,Ue.host||Ne[Ue.protocol])O.pathname=Ue.pathname;else{for(var xn=(Ue.pathname||"").split("/");xn.length&&!(Ue.host=xn.shift()););Ue.host||(Ue.host=""),Ue.hostname||(Ue.hostname=""),""!==xn[0]&&xn.unshift(""),xn.length<2&&xn.unshift(""),O.pathname=xn.join("/")}return O.search=Ue.search,O.query=Ue.query,O.host=Ue.host||"",O.auth=Ue.auth,O.hostname=Ue.hostname||Ue.host,O.port=Ue.port,(O.pathname||O.search)&&(O.path=(O.pathname||"")+(O.search||"")),O.slashes=O.slashes||Ue.slashes,O.href=O.format(),O}var xt=O.pathname&&"/"===O.pathname.charAt(0),yn=Ue.host||Ue.pathname&&"/"===Ue.pathname.charAt(0),Bt=yn||xt||O.host&&Ue.pathname,bn=Bt,Ct=O.pathname&&O.pathname.split("/")||[],pn=(xn=Ue.pathname&&Ue.pathname.split("/")||[],O.protocol&&!Je[O.protocol]);if(pn&&(O.hostname="",O.port=null,O.host&&(""===Ct[0]?Ct[0]=O.host:Ct.unshift(O.host)),O.host="",Ue.protocol&&(Ue.hostname=null,Ue.port=null,Ue.host&&(""===xn[0]?xn[0]=Ue.host:xn.unshift(Ue.host)),Ue.host=null),Bt=Bt&&(""===xn[0]||""===Ct[0])),yn)O.host=Ue.host||""===Ue.host?Ue.host:O.host,O.hostname=Ue.hostname||""===Ue.hostname?Ue.hostname:O.hostname,O.search=Ue.search,O.query=Ue.query,Ct=xn;else if(xn.length)Ct||(Ct=[]),Ct.pop(),Ct=Ct.concat(xn),O.search=Ue.search,O.query=Ue.query;else if(!m.isNullOrUndefined(Ue.search))return pn&&(O.hostname=O.host=Ct.shift(),(Xn=!!(O.host&&O.host.indexOf("@")>0)&&O.host.split("@"))&&(O.auth=Xn.shift(),O.host=O.hostname=Xn.shift())),O.search=Ue.search,O.query=Ue.query,(!m.isNull(O.pathname)||!m.isNull(O.search))&&(O.path=(O.pathname?O.pathname:"")+(O.search?O.search:"")),O.href=O.format(),O;if(!Ct.length)return O.pathname=null,O.path=O.search?"/"+O.search:null,O.href=O.format(),O;for(var Zt=Ct.slice(-1)[0],Ce=(O.host||Ue.host||Ct.length>1)&&("."===Zt||".."===Zt)||""===Zt,Vn=0,ur=Ct.length;ur>=0;ur--)"."===(Zt=Ct[ur])?Ct.splice(ur,1):".."===Zt?(Ct.splice(ur,1),Vn++):Vn&&(Ct.splice(ur,1),Vn--);if(!Bt&&!bn)for(;Vn--;Vn)Ct.unshift("..");Bt&&""!==Ct[0]&&(!Ct[0]||"/"!==Ct[0].charAt(0))&&Ct.unshift(""),Ce&&"/"!==Ct.join("/").substr(-1)&&Ct.push("");var Xn,mi=""===Ct[0]||Ct[0]&&"/"===Ct[0].charAt(0);return pn&&(O.hostname=O.host=mi?"":Ct.length?Ct.shift():"",(Xn=!!(O.host&&O.host.indexOf("@")>0)&&O.host.split("@"))&&(O.auth=Xn.shift(),O.host=O.hostname=Xn.shift())),(Bt=Bt||O.host&&Ct.length)&&!mi&&Ct.unshift(""),Ct.length?O.pathname=Ct.join("/"):(O.pathname=null,O.path=null),(!m.isNull(O.pathname)||!m.isNull(O.search))&&(O.path=(O.pathname?O.pathname:"")+(O.search?O.search:"")),O.auth=Ue.auth||O.auth,O.slashes=O.slashes||Ue.slashes,O.href=O.format(),O},q.prototype.parseHost=function(){var Ue=this.host,A=z.exec(Ue);A&&(":"!==(A=A[0])&&(this.port=A.substr(1)),Ue=Ue.substr(0,Ue.length-A.length)),Ue&&(this.hostname=Ue)}},796:Ae=>{"use strict";Ae.exports={isString:function(J){return"string"==typeof J},isObject:function(J){return"object"==typeof J&&null!==J},isNull:function(J){return null===J},isNullOrUndefined:function(J){return null==J}}},9444:(Ae,J,U)=>{var V=U(4542),X=U(6926),m=X;m.v1=V,m.v4=X,Ae.exports=m},7805:Ae=>{for(var J=[],U=0;U<256;++U)J[U]=(U+256).toString(16).substr(1);Ae.exports=function V(X,m){var q=m||0;return[J[X[q++]],J[X[q++]],J[X[q++]],J[X[q++]],"-",J[X[q++]],J[X[q++]],"-",J[X[q++]],J[X[q++]],"-",J[X[q++]],J[X[q++]],"-",J[X[q++]],J[X[q++]],J[X[q++]],J[X[q++]],J[X[q++]],J[X[q++]]].join("")}},7142:Ae=>{var J=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(J){var U=new Uint8Array(16);Ae.exports=function(){return J(U),U}}else{var V=new Array(16);Ae.exports=function(){for(var q,m=0;m<16;m++)0==(3&m)&&(q=4294967296*Math.random()),V[m]=q>>>((3&m)<<3)&255;return V}}},4542:(Ae,J,U)=>{var m,q,V=U(7142),X=U(7805),G=0,z=0;Ae.exports=function T(D,F,Z){var Y=F&&Z||0,ie=F||[],pe=(D=D||{}).node||m,se=void 0!==D.clockseq?D.clockseq:q;if(null==pe||null==se){var be=V();null==pe&&(pe=m=[1|be[0],be[1],be[2],be[3],be[4],be[5]]),null==se&&(se=q=16383&(be[6]<<8|be[7]))}var Me=void 0!==D.msecs?D.msecs:(new Date).getTime(),Ne=void 0!==D.nsecs?D.nsecs:z+1,Je=Me-G+(Ne-z)/1e4;if(Je<0&&void 0===D.clockseq&&(se=se+1&16383),(Je<0||Me>G)&&void 0===D.nsecs&&(Ne=0),Ne>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");G=Me,z=Ne,q=se;var je=(1e4*(268435455&(Me+=122192928e5))+Ne)%4294967296;ie[Y++]=je>>>24&255,ie[Y++]=je>>>16&255,ie[Y++]=je>>>8&255,ie[Y++]=255&je;var Se=Me/4294967296*1e4&268435455;ie[Y++]=Se>>>8&255,ie[Y++]=255&Se,ie[Y++]=Se>>>24&15|16,ie[Y++]=Se>>>16&255,ie[Y++]=se>>>8|128,ie[Y++]=255&se;for(var Ke=0;Ke<6;++Ke)ie[Y+Ke]=pe[Ke];return F||X(ie)}},6926:(Ae,J,U)=>{var V=U(7142),X=U(7805);Ae.exports=function m(q,G,z){var T=G&&z||0;"string"==typeof q&&(G="binary"===q?new Array(16):null,q=null);var D=(q=q||{}).random||(q.rng||V)();if(D[6]=15&D[6]|64,D[8]=63&D[8]|128,G)for(var F=0;F<16;++F)G[T+F]=D[F];return G||X(D)}},7265:Ae=>{Ae.exports.RADIUS=6378137,Ae.exports.FLATTENING=1/298.257223563,Ae.exports.POLAR_RADIUS=6356752.3142},4703:Ae=>{Ae.exports=function U(){for(var V={},X=0;X<arguments.length;X++){var m=arguments[X];for(var q in m)J.call(m,q)&&(V[q]=m[q])}return V};var J=Object.prototype.hasOwnProperty},1980:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{__assign:()=>m,__asyncDelegator:()=>Je,__asyncGenerator:()=>Ne,__asyncValues:()=>je,__await:()=>Me,__awaiter:()=>D,__classPrivateFieldGet:()=>It,__classPrivateFieldSet:()=>Ue,__createBinding:()=>Z,__decorate:()=>G,__exportStar:()=>Y,__extends:()=>X,__generator:()=>F,__importDefault:()=>nt,__importStar:()=>Ke,__makeTemplateObject:()=>Se,__metadata:()=>T,__param:()=>z,__read:()=>pe,__rest:()=>q,__spread:()=>se,__spreadArrays:()=>be,__values:()=>ie});var V=function(A,O){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,j){B.__proto__=j}||function(B,j){for(var ee in j)j.hasOwnProperty(ee)&&(B[ee]=j[ee])})(A,O)};function X(A,O){function B(){this.constructor=A}V(A,O),A.prototype=null===O?Object.create(O):(B.prototype=O.prototype,new B)}var m=function(){return m=Object.assign||function(O){for(var B,j=1,ee=arguments.length;j<ee;j++)for(var W in B=arguments[j])Object.prototype.hasOwnProperty.call(B,W)&&(O[W]=B[W]);return O},m.apply(this,arguments)};function q(A,O){var B={};for(var j in A)Object.prototype.hasOwnProperty.call(A,j)&&O.indexOf(j)<0&&(B[j]=A[j]);if(null!=A&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(j=Object.getOwnPropertySymbols(A);ee<j.length;ee++)O.indexOf(j[ee])<0&&Object.prototype.propertyIsEnumerable.call(A,j[ee])&&(B[j[ee]]=A[j[ee]])}return B}function G(A,O,B,j){var ce,ee=arguments.length,W=ee<3?O:null===j?j=Object.getOwnPropertyDescriptor(O,B):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(A,O,B,j);else for(var Ze=A.length-1;Ze>=0;Ze--)(ce=A[Ze])&&(W=(ee<3?ce(W):ee>3?ce(O,B,W):ce(O,B))||W);return ee>3&&W&&Object.defineProperty(O,B,W),W}function z(A,O){return function(B,j){O(B,j,A)}}function T(A,O){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(A,O)}function D(A,O,B,j){return new(B||(B=Promise))(function(W,ce){function Ze(wt){try{we(j.next(wt))}catch(bt){ce(bt)}}function lt(wt){try{we(j.throw(wt))}catch(bt){ce(bt)}}function we(wt){wt.done?W(wt.value):function ee(W){return W instanceof B?W:new B(function(ce){ce(W)})}(wt.value).then(Ze,lt)}we((j=j.apply(A,O||[])).next())})}function F(A,O){var j,ee,W,ce,B={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ce={next:Ze(0),throw:Ze(1),return:Ze(2)},"function"==typeof Symbol&&(ce[Symbol.iterator]=function(){return this}),ce;function Ze(we){return function(wt){return function lt(we){if(j)throw new TypeError("Generator is already executing.");for(;B;)try{if(j=1,ee&&(W=2&we[0]?ee.return:we[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,we[1])).done)return W;switch(ee=0,W&&(we=[2&we[0],W.value]),we[0]){case 0:case 1:W=we;break;case 4:return B.label++,{value:we[1],done:!1};case 5:B.label++,ee=we[1],we=[0];continue;case 7:we=B.ops.pop(),B.trys.pop();continue;default:if(!(W=(W=B.trys).length>0&&W[W.length-1])&&(6===we[0]||2===we[0])){B=0;continue}if(3===we[0]&&(!W||we[1]>W[0]&&we[1]<W[3])){B.label=we[1];break}if(6===we[0]&&B.label<W[1]){B.label=W[1],W=we;break}if(W&&B.label<W[2]){B.label=W[2],B.ops.push(we);break}W[2]&&B.ops.pop(),B.trys.pop();continue}we=O.call(A,B)}catch(wt){we=[6,wt],ee=0}finally{j=W=0}if(5&we[0])throw we[1];return{value:we[0]?we[1]:void 0,done:!0}}([we,wt])}}}function Z(A,O,B,j){void 0===j&&(j=B),A[j]=O[B]}function Y(A,O){for(var B in A)"default"!==B&&!O.hasOwnProperty(B)&&(O[B]=A[B])}function ie(A){var O="function"==typeof Symbol&&Symbol.iterator,B=O&&A[O],j=0;if(B)return B.call(A);if(A&&"number"==typeof A.length)return{next:function(){return A&&j>=A.length&&(A=void 0),{value:A&&A[j++],done:!A}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")}function pe(A,O){var B="function"==typeof Symbol&&A[Symbol.iterator];if(!B)return A;var ee,ce,j=B.call(A),W=[];try{for(;(void 0===O||O-- >0)&&!(ee=j.next()).done;)W.push(ee.value)}catch(Ze){ce={error:Ze}}finally{try{ee&&!ee.done&&(B=j.return)&&B.call(j)}finally{if(ce)throw ce.error}}return W}function se(){for(var A=[],O=0;O<arguments.length;O++)A=A.concat(pe(arguments[O]));return A}function be(){for(var A=0,O=0,B=arguments.length;O<B;O++)A+=arguments[O].length;var j=Array(A),ee=0;for(O=0;O<B;O++)for(var W=arguments[O],ce=0,Ze=W.length;ce<Ze;ce++,ee++)j[ee]=W[ce];return j}function Me(A){return this instanceof Me?(this.v=A,this):new Me(A)}function Ne(A,O,B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,j=B.apply(A,O||[]),W=[];return ee={},ce("next"),ce("throw"),ce("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ce(Ye){j[Ye]&&(ee[Ye]=function(xt){return new Promise(function(yn,Bt){W.push([Ye,xt,yn,Bt])>1||Ze(Ye,xt)})})}function Ze(Ye,xt){try{!function lt(Ye){Ye.value instanceof Me?Promise.resolve(Ye.value.v).then(we,wt):bt(W[0][2],Ye)}(j[Ye](xt))}catch(yn){bt(W[0][3],yn)}}function we(Ye){Ze("next",Ye)}function wt(Ye){Ze("throw",Ye)}function bt(Ye,xt){Ye(xt),W.shift(),W.length&&Ze(W[0][0],W[0][1])}}function Je(A){var O,B;return O={},j("next"),j("throw",function(ee){throw ee}),j("return"),O[Symbol.iterator]=function(){return this},O;function j(ee,W){O[ee]=A[ee]?function(ce){return(B=!B)?{value:Me(A[ee](ce)),done:"return"===ee}:W?W(ce):ce}:W}}function je(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B,O=A[Symbol.asyncIterator];return O?O.call(A):(A=ie(A),B={},j("next"),j("throw"),j("return"),B[Symbol.asyncIterator]=function(){return this},B);function j(W){B[W]=A[W]&&function(ce){return new Promise(function(Ze,lt){!function ee(W,ce,Ze,lt){Promise.resolve(lt).then(function(we){W({value:we,done:Ze})},ce)}(Ze,lt,(ce=A[W](ce)).done,ce.value)})}}}function Se(A,O){return Object.defineProperty?Object.defineProperty(A,"raw",{value:O}):A.raw=O,A}function Ke(A){if(A&&A.__esModule)return A;var O={};if(null!=A)for(var B in A)Object.hasOwnProperty.call(A,B)&&(O[B]=A[B]);return O.default=A,O}function nt(A){return A&&A.__esModule?A:{default:A}}function It(A,O){if(!O.has(A))throw new TypeError("attempted to get private field on non-instance");return O.get(A)}function Ue(A,O,B){if(!O.has(A))throw new TypeError("attempted to set private field on non-instance");return O.set(A,B),B}},5789:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{__assign:()=>m,__asyncDelegator:()=>Je,__asyncGenerator:()=>Ne,__asyncValues:()=>je,__await:()=>Me,__awaiter:()=>D,__classPrivateFieldGet:()=>It,__classPrivateFieldSet:()=>Ue,__createBinding:()=>Z,__decorate:()=>G,__exportStar:()=>Y,__extends:()=>X,__generator:()=>F,__importDefault:()=>nt,__importStar:()=>Ke,__makeTemplateObject:()=>Se,__metadata:()=>T,__param:()=>z,__read:()=>pe,__rest:()=>q,__spread:()=>se,__spreadArrays:()=>be,__values:()=>ie});var V=function(A,O){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,j){B.__proto__=j}||function(B,j){for(var ee in j)j.hasOwnProperty(ee)&&(B[ee]=j[ee])})(A,O)};function X(A,O){function B(){this.constructor=A}V(A,O),A.prototype=null===O?Object.create(O):(B.prototype=O.prototype,new B)}var m=function(){return m=Object.assign||function(O){for(var B,j=1,ee=arguments.length;j<ee;j++)for(var W in B=arguments[j])Object.prototype.hasOwnProperty.call(B,W)&&(O[W]=B[W]);return O},m.apply(this,arguments)};function q(A,O){var B={};for(var j in A)Object.prototype.hasOwnProperty.call(A,j)&&O.indexOf(j)<0&&(B[j]=A[j]);if(null!=A&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(j=Object.getOwnPropertySymbols(A);ee<j.length;ee++)O.indexOf(j[ee])<0&&Object.prototype.propertyIsEnumerable.call(A,j[ee])&&(B[j[ee]]=A[j[ee]])}return B}function G(A,O,B,j){var ce,ee=arguments.length,W=ee<3?O:null===j?j=Object.getOwnPropertyDescriptor(O,B):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(A,O,B,j);else for(var Ze=A.length-1;Ze>=0;Ze--)(ce=A[Ze])&&(W=(ee<3?ce(W):ee>3?ce(O,B,W):ce(O,B))||W);return ee>3&&W&&Object.defineProperty(O,B,W),W}function z(A,O){return function(B,j){O(B,j,A)}}function T(A,O){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(A,O)}function D(A,O,B,j){return new(B||(B=Promise))(function(W,ce){function Ze(wt){try{we(j.next(wt))}catch(bt){ce(bt)}}function lt(wt){try{we(j.throw(wt))}catch(bt){ce(bt)}}function we(wt){wt.done?W(wt.value):function ee(W){return W instanceof B?W:new B(function(ce){ce(W)})}(wt.value).then(Ze,lt)}we((j=j.apply(A,O||[])).next())})}function F(A,O){var j,ee,W,ce,B={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ce={next:Ze(0),throw:Ze(1),return:Ze(2)},"function"==typeof Symbol&&(ce[Symbol.iterator]=function(){return this}),ce;function Ze(we){return function(wt){return function lt(we){if(j)throw new TypeError("Generator is already executing.");for(;B;)try{if(j=1,ee&&(W=2&we[0]?ee.return:we[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,we[1])).done)return W;switch(ee=0,W&&(we=[2&we[0],W.value]),we[0]){case 0:case 1:W=we;break;case 4:return B.label++,{value:we[1],done:!1};case 5:B.label++,ee=we[1],we=[0];continue;case 7:we=B.ops.pop(),B.trys.pop();continue;default:if(!(W=(W=B.trys).length>0&&W[W.length-1])&&(6===we[0]||2===we[0])){B=0;continue}if(3===we[0]&&(!W||we[1]>W[0]&&we[1]<W[3])){B.label=we[1];break}if(6===we[0]&&B.label<W[1]){B.label=W[1],W=we;break}if(W&&B.label<W[2]){B.label=W[2],B.ops.push(we);break}W[2]&&B.ops.pop(),B.trys.pop();continue}we=O.call(A,B)}catch(wt){we=[6,wt],ee=0}finally{j=W=0}if(5&we[0])throw we[1];return{value:we[0]?we[1]:void 0,done:!0}}([we,wt])}}}function Z(A,O,B,j){void 0===j&&(j=B),A[j]=O[B]}function Y(A,O){for(var B in A)"default"!==B&&!O.hasOwnProperty(B)&&(O[B]=A[B])}function ie(A){var O="function"==typeof Symbol&&Symbol.iterator,B=O&&A[O],j=0;if(B)return B.call(A);if(A&&"number"==typeof A.length)return{next:function(){return A&&j>=A.length&&(A=void 0),{value:A&&A[j++],done:!A}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")}function pe(A,O){var B="function"==typeof Symbol&&A[Symbol.iterator];if(!B)return A;var ee,ce,j=B.call(A),W=[];try{for(;(void 0===O||O-- >0)&&!(ee=j.next()).done;)W.push(ee.value)}catch(Ze){ce={error:Ze}}finally{try{ee&&!ee.done&&(B=j.return)&&B.call(j)}finally{if(ce)throw ce.error}}return W}function se(){for(var A=[],O=0;O<arguments.length;O++)A=A.concat(pe(arguments[O]));return A}function be(){for(var A=0,O=0,B=arguments.length;O<B;O++)A+=arguments[O].length;var j=Array(A),ee=0;for(O=0;O<B;O++)for(var W=arguments[O],ce=0,Ze=W.length;ce<Ze;ce++,ee++)j[ee]=W[ce];return j}function Me(A){return this instanceof Me?(this.v=A,this):new Me(A)}function Ne(A,O,B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,j=B.apply(A,O||[]),W=[];return ee={},ce("next"),ce("throw"),ce("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ce(Ye){j[Ye]&&(ee[Ye]=function(xt){return new Promise(function(yn,Bt){W.push([Ye,xt,yn,Bt])>1||Ze(Ye,xt)})})}function Ze(Ye,xt){try{!function lt(Ye){Ye.value instanceof Me?Promise.resolve(Ye.value.v).then(we,wt):bt(W[0][2],Ye)}(j[Ye](xt))}catch(yn){bt(W[0][3],yn)}}function we(Ye){Ze("next",Ye)}function wt(Ye){Ze("throw",Ye)}function bt(Ye,xt){Ye(xt),W.shift(),W.length&&Ze(W[0][0],W[0][1])}}function Je(A){var O,B;return O={},j("next"),j("throw",function(ee){throw ee}),j("return"),O[Symbol.iterator]=function(){return this},O;function j(ee,W){O[ee]=A[ee]?function(ce){return(B=!B)?{value:Me(A[ee](ce)),done:"return"===ee}:W?W(ce):ce}:W}}function je(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B,O=A[Symbol.asyncIterator];return O?O.call(A):(A=ie(A),B={},j("next"),j("throw"),j("return"),B[Symbol.asyncIterator]=function(){return this},B);function j(W){B[W]=A[W]&&function(ce){return new Promise(function(Ze,lt){!function ee(W,ce,Ze,lt){Promise.resolve(lt).then(function(we){W({value:we,done:Ze})},ce)}(Ze,lt,(ce=A[W](ce)).done,ce.value)})}}}function Se(A,O){return Object.defineProperty?Object.defineProperty(A,"raw",{value:O}):A.raw=O,A}function Ke(A){if(A&&A.__esModule)return A;var O={};if(null!=A)for(var B in A)Object.hasOwnProperty.call(A,B)&&(O[B]=A[B]);return O.default=A,O}function nt(A){return A&&A.__esModule?A:{default:A}}function It(A,O){if(!O.has(A))throw new TypeError("attempted to get private field on non-instance");return O.get(A)}function Ue(A,O,B){if(!O.has(A))throw new TypeError("attempted to set private field on non-instance");return O.set(A,B),B}},3541:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{__assign:()=>m,__asyncDelegator:()=>Je,__asyncGenerator:()=>Ne,__asyncValues:()=>je,__await:()=>Me,__awaiter:()=>D,__classPrivateFieldGet:()=>It,__classPrivateFieldSet:()=>Ue,__createBinding:()=>Z,__decorate:()=>G,__exportStar:()=>Y,__extends:()=>X,__generator:()=>F,__importDefault:()=>nt,__importStar:()=>Ke,__makeTemplateObject:()=>Se,__metadata:()=>T,__param:()=>z,__read:()=>pe,__rest:()=>q,__spread:()=>se,__spreadArrays:()=>be,__values:()=>ie});var V=function(A,O){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,j){B.__proto__=j}||function(B,j){for(var ee in j)j.hasOwnProperty(ee)&&(B[ee]=j[ee])})(A,O)};function X(A,O){function B(){this.constructor=A}V(A,O),A.prototype=null===O?Object.create(O):(B.prototype=O.prototype,new B)}var m=function(){return m=Object.assign||function(O){for(var B,j=1,ee=arguments.length;j<ee;j++)for(var W in B=arguments[j])Object.prototype.hasOwnProperty.call(B,W)&&(O[W]=B[W]);return O},m.apply(this,arguments)};function q(A,O){var B={};for(var j in A)Object.prototype.hasOwnProperty.call(A,j)&&O.indexOf(j)<0&&(B[j]=A[j]);if(null!=A&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(j=Object.getOwnPropertySymbols(A);ee<j.length;ee++)O.indexOf(j[ee])<0&&Object.prototype.propertyIsEnumerable.call(A,j[ee])&&(B[j[ee]]=A[j[ee]])}return B}function G(A,O,B,j){var ce,ee=arguments.length,W=ee<3?O:null===j?j=Object.getOwnPropertyDescriptor(O,B):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(A,O,B,j);else for(var Ze=A.length-1;Ze>=0;Ze--)(ce=A[Ze])&&(W=(ee<3?ce(W):ee>3?ce(O,B,W):ce(O,B))||W);return ee>3&&W&&Object.defineProperty(O,B,W),W}function z(A,O){return function(B,j){O(B,j,A)}}function T(A,O){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(A,O)}function D(A,O,B,j){return new(B||(B=Promise))(function(W,ce){function Ze(wt){try{we(j.next(wt))}catch(bt){ce(bt)}}function lt(wt){try{we(j.throw(wt))}catch(bt){ce(bt)}}function we(wt){wt.done?W(wt.value):function ee(W){return W instanceof B?W:new B(function(ce){ce(W)})}(wt.value).then(Ze,lt)}we((j=j.apply(A,O||[])).next())})}function F(A,O){var j,ee,W,ce,B={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ce={next:Ze(0),throw:Ze(1),return:Ze(2)},"function"==typeof Symbol&&(ce[Symbol.iterator]=function(){return this}),ce;function Ze(we){return function(wt){return function lt(we){if(j)throw new TypeError("Generator is already executing.");for(;B;)try{if(j=1,ee&&(W=2&we[0]?ee.return:we[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,we[1])).done)return W;switch(ee=0,W&&(we=[2&we[0],W.value]),we[0]){case 0:case 1:W=we;break;case 4:return B.label++,{value:we[1],done:!1};case 5:B.label++,ee=we[1],we=[0];continue;case 7:we=B.ops.pop(),B.trys.pop();continue;default:if(!(W=(W=B.trys).length>0&&W[W.length-1])&&(6===we[0]||2===we[0])){B=0;continue}if(3===we[0]&&(!W||we[1]>W[0]&&we[1]<W[3])){B.label=we[1];break}if(6===we[0]&&B.label<W[1]){B.label=W[1],W=we;break}if(W&&B.label<W[2]){B.label=W[2],B.ops.push(we);break}W[2]&&B.ops.pop(),B.trys.pop();continue}we=O.call(A,B)}catch(wt){we=[6,wt],ee=0}finally{j=W=0}if(5&we[0])throw we[1];return{value:we[0]?we[1]:void 0,done:!0}}([we,wt])}}}function Z(A,O,B,j){void 0===j&&(j=B),A[j]=O[B]}function Y(A,O){for(var B in A)"default"!==B&&!O.hasOwnProperty(B)&&(O[B]=A[B])}function ie(A){var O="function"==typeof Symbol&&Symbol.iterator,B=O&&A[O],j=0;if(B)return B.call(A);if(A&&"number"==typeof A.length)return{next:function(){return A&&j>=A.length&&(A=void 0),{value:A&&A[j++],done:!A}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")}function pe(A,O){var B="function"==typeof Symbol&&A[Symbol.iterator];if(!B)return A;var ee,ce,j=B.call(A),W=[];try{for(;(void 0===O||O-- >0)&&!(ee=j.next()).done;)W.push(ee.value)}catch(Ze){ce={error:Ze}}finally{try{ee&&!ee.done&&(B=j.return)&&B.call(j)}finally{if(ce)throw ce.error}}return W}function se(){for(var A=[],O=0;O<arguments.length;O++)A=A.concat(pe(arguments[O]));return A}function be(){for(var A=0,O=0,B=arguments.length;O<B;O++)A+=arguments[O].length;var j=Array(A),ee=0;for(O=0;O<B;O++)for(var W=arguments[O],ce=0,Ze=W.length;ce<Ze;ce++,ee++)j[ee]=W[ce];return j}function Me(A){return this instanceof Me?(this.v=A,this):new Me(A)}function Ne(A,O,B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,j=B.apply(A,O||[]),W=[];return ee={},ce("next"),ce("throw"),ce("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ce(Ye){j[Ye]&&(ee[Ye]=function(xt){return new Promise(function(yn,Bt){W.push([Ye,xt,yn,Bt])>1||Ze(Ye,xt)})})}function Ze(Ye,xt){try{!function lt(Ye){Ye.value instanceof Me?Promise.resolve(Ye.value.v).then(we,wt):bt(W[0][2],Ye)}(j[Ye](xt))}catch(yn){bt(W[0][3],yn)}}function we(Ye){Ze("next",Ye)}function wt(Ye){Ze("throw",Ye)}function bt(Ye,xt){Ye(xt),W.shift(),W.length&&Ze(W[0][0],W[0][1])}}function Je(A){var O,B;return O={},j("next"),j("throw",function(ee){throw ee}),j("return"),O[Symbol.iterator]=function(){return this},O;function j(ee,W){O[ee]=A[ee]?function(ce){return(B=!B)?{value:Me(A[ee](ce)),done:"return"===ee}:W?W(ce):ce}:W}}function je(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B,O=A[Symbol.asyncIterator];return O?O.call(A):(A=ie(A),B={},j("next"),j("throw"),j("return"),B[Symbol.asyncIterator]=function(){return this},B);function j(W){B[W]=A[W]&&function(ce){return new Promise(function(Ze,lt){!function ee(W,ce,Ze,lt){Promise.resolve(lt).then(function(we){W({value:we,done:Ze})},ce)}(Ze,lt,(ce=A[W](ce)).done,ce.value)})}}}function Se(A,O){return Object.defineProperty?Object.defineProperty(A,"raw",{value:O}):A.raw=O,A}function Ke(A){if(A&&A.__esModule)return A;var O={};if(null!=A)for(var B in A)Object.hasOwnProperty.call(A,B)&&(O[B]=A[B]);return O.default=A,O}function nt(A){return A&&A.__esModule?A:{default:A}}function It(A,O){if(!O.has(A))throw new TypeError("attempted to get private field on non-instance");return O.get(A)}function Ue(A,O,B){if(!O.has(A))throw new TypeError("attempted to set private field on non-instance");return O.set(A,B),B}},7840:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{__assign:()=>m,__asyncDelegator:()=>Je,__asyncGenerator:()=>Ne,__asyncValues:()=>je,__await:()=>Me,__awaiter:()=>D,__classPrivateFieldGet:()=>It,__classPrivateFieldSet:()=>Ue,__createBinding:()=>Z,__decorate:()=>G,__exportStar:()=>Y,__extends:()=>X,__generator:()=>F,__importDefault:()=>nt,__importStar:()=>Ke,__makeTemplateObject:()=>Se,__metadata:()=>T,__param:()=>z,__read:()=>pe,__rest:()=>q,__spread:()=>se,__spreadArrays:()=>be,__values:()=>ie});var V=function(A,O){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,j){B.__proto__=j}||function(B,j){for(var ee in j)j.hasOwnProperty(ee)&&(B[ee]=j[ee])})(A,O)};function X(A,O){function B(){this.constructor=A}V(A,O),A.prototype=null===O?Object.create(O):(B.prototype=O.prototype,new B)}var m=function(){return m=Object.assign||function(O){for(var B,j=1,ee=arguments.length;j<ee;j++)for(var W in B=arguments[j])Object.prototype.hasOwnProperty.call(B,W)&&(O[W]=B[W]);return O},m.apply(this,arguments)};function q(A,O){var B={};for(var j in A)Object.prototype.hasOwnProperty.call(A,j)&&O.indexOf(j)<0&&(B[j]=A[j]);if(null!=A&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(j=Object.getOwnPropertySymbols(A);ee<j.length;ee++)O.indexOf(j[ee])<0&&Object.prototype.propertyIsEnumerable.call(A,j[ee])&&(B[j[ee]]=A[j[ee]])}return B}function G(A,O,B,j){var ce,ee=arguments.length,W=ee<3?O:null===j?j=Object.getOwnPropertyDescriptor(O,B):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(A,O,B,j);else for(var Ze=A.length-1;Ze>=0;Ze--)(ce=A[Ze])&&(W=(ee<3?ce(W):ee>3?ce(O,B,W):ce(O,B))||W);return ee>3&&W&&Object.defineProperty(O,B,W),W}function z(A,O){return function(B,j){O(B,j,A)}}function T(A,O){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(A,O)}function D(A,O,B,j){return new(B||(B=Promise))(function(W,ce){function Ze(wt){try{we(j.next(wt))}catch(bt){ce(bt)}}function lt(wt){try{we(j.throw(wt))}catch(bt){ce(bt)}}function we(wt){wt.done?W(wt.value):function ee(W){return W instanceof B?W:new B(function(ce){ce(W)})}(wt.value).then(Ze,lt)}we((j=j.apply(A,O||[])).next())})}function F(A,O){var j,ee,W,ce,B={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ce={next:Ze(0),throw:Ze(1),return:Ze(2)},"function"==typeof Symbol&&(ce[Symbol.iterator]=function(){return this}),ce;function Ze(we){return function(wt){return function lt(we){if(j)throw new TypeError("Generator is already executing.");for(;B;)try{if(j=1,ee&&(W=2&we[0]?ee.return:we[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,we[1])).done)return W;switch(ee=0,W&&(we=[2&we[0],W.value]),we[0]){case 0:case 1:W=we;break;case 4:return B.label++,{value:we[1],done:!1};case 5:B.label++,ee=we[1],we=[0];continue;case 7:we=B.ops.pop(),B.trys.pop();continue;default:if(!(W=(W=B.trys).length>0&&W[W.length-1])&&(6===we[0]||2===we[0])){B=0;continue}if(3===we[0]&&(!W||we[1]>W[0]&&we[1]<W[3])){B.label=we[1];break}if(6===we[0]&&B.label<W[1]){B.label=W[1],W=we;break}if(W&&B.label<W[2]){B.label=W[2],B.ops.push(we);break}W[2]&&B.ops.pop(),B.trys.pop();continue}we=O.call(A,B)}catch(wt){we=[6,wt],ee=0}finally{j=W=0}if(5&we[0])throw we[1];return{value:we[0]?we[1]:void 0,done:!0}}([we,wt])}}}function Z(A,O,B,j){void 0===j&&(j=B),A[j]=O[B]}function Y(A,O){for(var B in A)"default"!==B&&!O.hasOwnProperty(B)&&(O[B]=A[B])}function ie(A){var O="function"==typeof Symbol&&Symbol.iterator,B=O&&A[O],j=0;if(B)return B.call(A);if(A&&"number"==typeof A.length)return{next:function(){return A&&j>=A.length&&(A=void 0),{value:A&&A[j++],done:!A}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")}function pe(A,O){var B="function"==typeof Symbol&&A[Symbol.iterator];if(!B)return A;var ee,ce,j=B.call(A),W=[];try{for(;(void 0===O||O-- >0)&&!(ee=j.next()).done;)W.push(ee.value)}catch(Ze){ce={error:Ze}}finally{try{ee&&!ee.done&&(B=j.return)&&B.call(j)}finally{if(ce)throw ce.error}}return W}function se(){for(var A=[],O=0;O<arguments.length;O++)A=A.concat(pe(arguments[O]));return A}function be(){for(var A=0,O=0,B=arguments.length;O<B;O++)A+=arguments[O].length;var j=Array(A),ee=0;for(O=0;O<B;O++)for(var W=arguments[O],ce=0,Ze=W.length;ce<Ze;ce++,ee++)j[ee]=W[ce];return j}function Me(A){return this instanceof Me?(this.v=A,this):new Me(A)}function Ne(A,O,B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,j=B.apply(A,O||[]),W=[];return ee={},ce("next"),ce("throw"),ce("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ce(Ye){j[Ye]&&(ee[Ye]=function(xt){return new Promise(function(yn,Bt){W.push([Ye,xt,yn,Bt])>1||Ze(Ye,xt)})})}function Ze(Ye,xt){try{!function lt(Ye){Ye.value instanceof Me?Promise.resolve(Ye.value.v).then(we,wt):bt(W[0][2],Ye)}(j[Ye](xt))}catch(yn){bt(W[0][3],yn)}}function we(Ye){Ze("next",Ye)}function wt(Ye){Ze("throw",Ye)}function bt(Ye,xt){Ye(xt),W.shift(),W.length&&Ze(W[0][0],W[0][1])}}function Je(A){var O,B;return O={},j("next"),j("throw",function(ee){throw ee}),j("return"),O[Symbol.iterator]=function(){return this},O;function j(ee,W){O[ee]=A[ee]?function(ce){return(B=!B)?{value:Me(A[ee](ce)),done:"return"===ee}:W?W(ce):ce}:W}}function je(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B,O=A[Symbol.asyncIterator];return O?O.call(A):(A=ie(A),B={},j("next"),j("throw"),j("return"),B[Symbol.asyncIterator]=function(){return this},B);function j(W){B[W]=A[W]&&function(ce){return new Promise(function(Ze,lt){!function ee(W,ce,Ze,lt){Promise.resolve(lt).then(function(we){W({value:we,done:Ze})},ce)}(Ze,lt,(ce=A[W](ce)).done,ce.value)})}}}function Se(A,O){return Object.defineProperty?Object.defineProperty(A,"raw",{value:O}):A.raw=O,A}function Ke(A){if(A&&A.__esModule)return A;var O={};if(null!=A)for(var B in A)Object.hasOwnProperty.call(A,B)&&(O[B]=A[B]);return O.default=A,O}function nt(A){return A&&A.__esModule?A:{default:A}}function It(A,O){if(!O.has(A))throw new TypeError("attempted to get private field on non-instance");return O.get(A)}function Ue(A,O,B){if(!O.has(A))throw new TypeError("attempted to set private field on non-instance");return O.set(A,B),B}},4806:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{__assign:()=>m,__asyncDelegator:()=>Je,__asyncGenerator:()=>Ne,__asyncValues:()=>je,__await:()=>Me,__awaiter:()=>D,__classPrivateFieldGet:()=>It,__classPrivateFieldSet:()=>Ue,__createBinding:()=>Z,__decorate:()=>G,__exportStar:()=>Y,__extends:()=>X,__generator:()=>F,__importDefault:()=>nt,__importStar:()=>Ke,__makeTemplateObject:()=>Se,__metadata:()=>T,__param:()=>z,__read:()=>pe,__rest:()=>q,__spread:()=>se,__spreadArrays:()=>be,__values:()=>ie});var V=function(A,O){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,j){B.__proto__=j}||function(B,j){for(var ee in j)j.hasOwnProperty(ee)&&(B[ee]=j[ee])})(A,O)};function X(A,O){function B(){this.constructor=A}V(A,O),A.prototype=null===O?Object.create(O):(B.prototype=O.prototype,new B)}var m=function(){return m=Object.assign||function(O){for(var B,j=1,ee=arguments.length;j<ee;j++)for(var W in B=arguments[j])Object.prototype.hasOwnProperty.call(B,W)&&(O[W]=B[W]);return O},m.apply(this,arguments)};function q(A,O){var B={};for(var j in A)Object.prototype.hasOwnProperty.call(A,j)&&O.indexOf(j)<0&&(B[j]=A[j]);if(null!=A&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(j=Object.getOwnPropertySymbols(A);ee<j.length;ee++)O.indexOf(j[ee])<0&&Object.prototype.propertyIsEnumerable.call(A,j[ee])&&(B[j[ee]]=A[j[ee]])}return B}function G(A,O,B,j){var ce,ee=arguments.length,W=ee<3?O:null===j?j=Object.getOwnPropertyDescriptor(O,B):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(A,O,B,j);else for(var Ze=A.length-1;Ze>=0;Ze--)(ce=A[Ze])&&(W=(ee<3?ce(W):ee>3?ce(O,B,W):ce(O,B))||W);return ee>3&&W&&Object.defineProperty(O,B,W),W}function z(A,O){return function(B,j){O(B,j,A)}}function T(A,O){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(A,O)}function D(A,O,B,j){return new(B||(B=Promise))(function(W,ce){function Ze(wt){try{we(j.next(wt))}catch(bt){ce(bt)}}function lt(wt){try{we(j.throw(wt))}catch(bt){ce(bt)}}function we(wt){wt.done?W(wt.value):function ee(W){return W instanceof B?W:new B(function(ce){ce(W)})}(wt.value).then(Ze,lt)}we((j=j.apply(A,O||[])).next())})}function F(A,O){var j,ee,W,ce,B={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ce={next:Ze(0),throw:Ze(1),return:Ze(2)},"function"==typeof Symbol&&(ce[Symbol.iterator]=function(){return this}),ce;function Ze(we){return function(wt){return function lt(we){if(j)throw new TypeError("Generator is already executing.");for(;B;)try{if(j=1,ee&&(W=2&we[0]?ee.return:we[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,we[1])).done)return W;switch(ee=0,W&&(we=[2&we[0],W.value]),we[0]){case 0:case 1:W=we;break;case 4:return B.label++,{value:we[1],done:!1};case 5:B.label++,ee=we[1],we=[0];continue;case 7:we=B.ops.pop(),B.trys.pop();continue;default:if(!(W=(W=B.trys).length>0&&W[W.length-1])&&(6===we[0]||2===we[0])){B=0;continue}if(3===we[0]&&(!W||we[1]>W[0]&&we[1]<W[3])){B.label=we[1];break}if(6===we[0]&&B.label<W[1]){B.label=W[1],W=we;break}if(W&&B.label<W[2]){B.label=W[2],B.ops.push(we);break}W[2]&&B.ops.pop(),B.trys.pop();continue}we=O.call(A,B)}catch(wt){we=[6,wt],ee=0}finally{j=W=0}if(5&we[0])throw we[1];return{value:we[0]?we[1]:void 0,done:!0}}([we,wt])}}}function Z(A,O,B,j){void 0===j&&(j=B),A[j]=O[B]}function Y(A,O){for(var B in A)"default"!==B&&!O.hasOwnProperty(B)&&(O[B]=A[B])}function ie(A){var O="function"==typeof Symbol&&Symbol.iterator,B=O&&A[O],j=0;if(B)return B.call(A);if(A&&"number"==typeof A.length)return{next:function(){return A&&j>=A.length&&(A=void 0),{value:A&&A[j++],done:!A}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")}function pe(A,O){var B="function"==typeof Symbol&&A[Symbol.iterator];if(!B)return A;var ee,ce,j=B.call(A),W=[];try{for(;(void 0===O||O-- >0)&&!(ee=j.next()).done;)W.push(ee.value)}catch(Ze){ce={error:Ze}}finally{try{ee&&!ee.done&&(B=j.return)&&B.call(j)}finally{if(ce)throw ce.error}}return W}function se(){for(var A=[],O=0;O<arguments.length;O++)A=A.concat(pe(arguments[O]));return A}function be(){for(var A=0,O=0,B=arguments.length;O<B;O++)A+=arguments[O].length;var j=Array(A),ee=0;for(O=0;O<B;O++)for(var W=arguments[O],ce=0,Ze=W.length;ce<Ze;ce++,ee++)j[ee]=W[ce];return j}function Me(A){return this instanceof Me?(this.v=A,this):new Me(A)}function Ne(A,O,B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,j=B.apply(A,O||[]),W=[];return ee={},ce("next"),ce("throw"),ce("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ce(Ye){j[Ye]&&(ee[Ye]=function(xt){return new Promise(function(yn,Bt){W.push([Ye,xt,yn,Bt])>1||Ze(Ye,xt)})})}function Ze(Ye,xt){try{!function lt(Ye){Ye.value instanceof Me?Promise.resolve(Ye.value.v).then(we,wt):bt(W[0][2],Ye)}(j[Ye](xt))}catch(yn){bt(W[0][3],yn)}}function we(Ye){Ze("next",Ye)}function wt(Ye){Ze("throw",Ye)}function bt(Ye,xt){Ye(xt),W.shift(),W.length&&Ze(W[0][0],W[0][1])}}function Je(A){var O,B;return O={},j("next"),j("throw",function(ee){throw ee}),j("return"),O[Symbol.iterator]=function(){return this},O;function j(ee,W){O[ee]=A[ee]?function(ce){return(B=!B)?{value:Me(A[ee](ce)),done:"return"===ee}:W?W(ce):ce}:W}}function je(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B,O=A[Symbol.asyncIterator];return O?O.call(A):(A=ie(A),B={},j("next"),j("throw"),j("return"),B[Symbol.asyncIterator]=function(){return this},B);function j(W){B[W]=A[W]&&function(ce){return new Promise(function(Ze,lt){!function ee(W,ce,Ze,lt){Promise.resolve(lt).then(function(we){W({value:we,done:Ze})},ce)}(Ze,lt,(ce=A[W](ce)).done,ce.value)})}}}function Se(A,O){return Object.defineProperty?Object.defineProperty(A,"raw",{value:O}):A.raw=O,A}function Ke(A){if(A&&A.__esModule)return A;var O={};if(null!=A)for(var B in A)Object.hasOwnProperty.call(A,B)&&(O[B]=A[B]);return O.default=A,O}function nt(A){return A&&A.__esModule?A:{default:A}}function It(A,O){if(!O.has(A))throw new TypeError("attempted to get private field on non-instance");return O.get(A)}function Ue(A,O,B){if(!O.has(A))throw new TypeError("attempted to set private field on non-instance");return O.set(A,B),B}},5955:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{__assign:()=>m,__asyncDelegator:()=>Je,__asyncGenerator:()=>Ne,__asyncValues:()=>je,__await:()=>Me,__awaiter:()=>D,__classPrivateFieldGet:()=>It,__classPrivateFieldSet:()=>Ue,__createBinding:()=>Z,__decorate:()=>G,__exportStar:()=>Y,__extends:()=>X,__generator:()=>F,__importDefault:()=>nt,__importStar:()=>Ke,__makeTemplateObject:()=>Se,__metadata:()=>T,__param:()=>z,__read:()=>pe,__rest:()=>q,__spread:()=>se,__spreadArrays:()=>be,__values:()=>ie});var V=function(A,O){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,j){B.__proto__=j}||function(B,j){for(var ee in j)j.hasOwnProperty(ee)&&(B[ee]=j[ee])})(A,O)};function X(A,O){function B(){this.constructor=A}V(A,O),A.prototype=null===O?Object.create(O):(B.prototype=O.prototype,new B)}var m=function(){return m=Object.assign||function(O){for(var B,j=1,ee=arguments.length;j<ee;j++)for(var W in B=arguments[j])Object.prototype.hasOwnProperty.call(B,W)&&(O[W]=B[W]);return O},m.apply(this,arguments)};function q(A,O){var B={};for(var j in A)Object.prototype.hasOwnProperty.call(A,j)&&O.indexOf(j)<0&&(B[j]=A[j]);if(null!=A&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(j=Object.getOwnPropertySymbols(A);ee<j.length;ee++)O.indexOf(j[ee])<0&&Object.prototype.propertyIsEnumerable.call(A,j[ee])&&(B[j[ee]]=A[j[ee]])}return B}function G(A,O,B,j){var ce,ee=arguments.length,W=ee<3?O:null===j?j=Object.getOwnPropertyDescriptor(O,B):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(A,O,B,j);else for(var Ze=A.length-1;Ze>=0;Ze--)(ce=A[Ze])&&(W=(ee<3?ce(W):ee>3?ce(O,B,W):ce(O,B))||W);return ee>3&&W&&Object.defineProperty(O,B,W),W}function z(A,O){return function(B,j){O(B,j,A)}}function T(A,O){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(A,O)}function D(A,O,B,j){return new(B||(B=Promise))(function(W,ce){function Ze(wt){try{we(j.next(wt))}catch(bt){ce(bt)}}function lt(wt){try{we(j.throw(wt))}catch(bt){ce(bt)}}function we(wt){wt.done?W(wt.value):function ee(W){return W instanceof B?W:new B(function(ce){ce(W)})}(wt.value).then(Ze,lt)}we((j=j.apply(A,O||[])).next())})}function F(A,O){var j,ee,W,ce,B={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ce={next:Ze(0),throw:Ze(1),return:Ze(2)},"function"==typeof Symbol&&(ce[Symbol.iterator]=function(){return this}),ce;function Ze(we){return function(wt){return function lt(we){if(j)throw new TypeError("Generator is already executing.");for(;B;)try{if(j=1,ee&&(W=2&we[0]?ee.return:we[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,we[1])).done)return W;switch(ee=0,W&&(we=[2&we[0],W.value]),we[0]){case 0:case 1:W=we;break;case 4:return B.label++,{value:we[1],done:!1};case 5:B.label++,ee=we[1],we=[0];continue;case 7:we=B.ops.pop(),B.trys.pop();continue;default:if(!(W=(W=B.trys).length>0&&W[W.length-1])&&(6===we[0]||2===we[0])){B=0;continue}if(3===we[0]&&(!W||we[1]>W[0]&&we[1]<W[3])){B.label=we[1];break}if(6===we[0]&&B.label<W[1]){B.label=W[1],W=we;break}if(W&&B.label<W[2]){B.label=W[2],B.ops.push(we);break}W[2]&&B.ops.pop(),B.trys.pop();continue}we=O.call(A,B)}catch(wt){we=[6,wt],ee=0}finally{j=W=0}if(5&we[0])throw we[1];return{value:we[0]?we[1]:void 0,done:!0}}([we,wt])}}}function Z(A,O,B,j){void 0===j&&(j=B),A[j]=O[B]}function Y(A,O){for(var B in A)"default"!==B&&!O.hasOwnProperty(B)&&(O[B]=A[B])}function ie(A){var O="function"==typeof Symbol&&Symbol.iterator,B=O&&A[O],j=0;if(B)return B.call(A);if(A&&"number"==typeof A.length)return{next:function(){return A&&j>=A.length&&(A=void 0),{value:A&&A[j++],done:!A}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")}function pe(A,O){var B="function"==typeof Symbol&&A[Symbol.iterator];if(!B)return A;var ee,ce,j=B.call(A),W=[];try{for(;(void 0===O||O-- >0)&&!(ee=j.next()).done;)W.push(ee.value)}catch(Ze){ce={error:Ze}}finally{try{ee&&!ee.done&&(B=j.return)&&B.call(j)}finally{if(ce)throw ce.error}}return W}function se(){for(var A=[],O=0;O<arguments.length;O++)A=A.concat(pe(arguments[O]));return A}function be(){for(var A=0,O=0,B=arguments.length;O<B;O++)A+=arguments[O].length;var j=Array(A),ee=0;for(O=0;O<B;O++)for(var W=arguments[O],ce=0,Ze=W.length;ce<Ze;ce++,ee++)j[ee]=W[ce];return j}function Me(A){return this instanceof Me?(this.v=A,this):new Me(A)}function Ne(A,O,B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,j=B.apply(A,O||[]),W=[];return ee={},ce("next"),ce("throw"),ce("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ce(Ye){j[Ye]&&(ee[Ye]=function(xt){return new Promise(function(yn,Bt){W.push([Ye,xt,yn,Bt])>1||Ze(Ye,xt)})})}function Ze(Ye,xt){try{!function lt(Ye){Ye.value instanceof Me?Promise.resolve(Ye.value.v).then(we,wt):bt(W[0][2],Ye)}(j[Ye](xt))}catch(yn){bt(W[0][3],yn)}}function we(Ye){Ze("next",Ye)}function wt(Ye){Ze("throw",Ye)}function bt(Ye,xt){Ye(xt),W.shift(),W.length&&Ze(W[0][0],W[0][1])}}function Je(A){var O,B;return O={},j("next"),j("throw",function(ee){throw ee}),j("return"),O[Symbol.iterator]=function(){return this},O;function j(ee,W){O[ee]=A[ee]?function(ce){return(B=!B)?{value:Me(A[ee](ce)),done:"return"===ee}:W?W(ce):ce}:W}}function je(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B,O=A[Symbol.asyncIterator];return O?O.call(A):(A=ie(A),B={},j("next"),j("throw"),j("return"),B[Symbol.asyncIterator]=function(){return this},B);function j(W){B[W]=A[W]&&function(ce){return new Promise(function(Ze,lt){!function ee(W,ce,Ze,lt){Promise.resolve(lt).then(function(we){W({value:we,done:Ze})},ce)}(Ze,lt,(ce=A[W](ce)).done,ce.value)})}}}function Se(A,O){return Object.defineProperty?Object.defineProperty(A,"raw",{value:O}):A.raw=O,A}function Ke(A){if(A&&A.__esModule)return A;var O={};if(null!=A)for(var B in A)Object.hasOwnProperty.call(A,B)&&(O[B]=A[B]);return O.default=A,O}function nt(A){return A&&A.__esModule?A:{default:A}}function It(A,O){if(!O.has(A))throw new TypeError("attempted to get private field on non-instance");return O.get(A)}function Ue(A,O,B){if(!O.has(A))throw new TypeError("attempted to set private field on non-instance");return O.set(A,B),B}},2960:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{__assign:()=>m,__asyncDelegator:()=>Je,__asyncGenerator:()=>Ne,__asyncValues:()=>je,__await:()=>Me,__awaiter:()=>D,__classPrivateFieldGet:()=>It,__classPrivateFieldSet:()=>Ue,__createBinding:()=>Z,__decorate:()=>G,__exportStar:()=>Y,__extends:()=>X,__generator:()=>F,__importDefault:()=>nt,__importStar:()=>Ke,__makeTemplateObject:()=>Se,__metadata:()=>T,__param:()=>z,__read:()=>pe,__rest:()=>q,__spread:()=>se,__spreadArrays:()=>be,__values:()=>ie});var V=function(A,O){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,j){B.__proto__=j}||function(B,j){for(var ee in j)j.hasOwnProperty(ee)&&(B[ee]=j[ee])})(A,O)};function X(A,O){function B(){this.constructor=A}V(A,O),A.prototype=null===O?Object.create(O):(B.prototype=O.prototype,new B)}var m=function(){return m=Object.assign||function(O){for(var B,j=1,ee=arguments.length;j<ee;j++)for(var W in B=arguments[j])Object.prototype.hasOwnProperty.call(B,W)&&(O[W]=B[W]);return O},m.apply(this,arguments)};function q(A,O){var B={};for(var j in A)Object.prototype.hasOwnProperty.call(A,j)&&O.indexOf(j)<0&&(B[j]=A[j]);if(null!=A&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(j=Object.getOwnPropertySymbols(A);ee<j.length;ee++)O.indexOf(j[ee])<0&&Object.prototype.propertyIsEnumerable.call(A,j[ee])&&(B[j[ee]]=A[j[ee]])}return B}function G(A,O,B,j){var ce,ee=arguments.length,W=ee<3?O:null===j?j=Object.getOwnPropertyDescriptor(O,B):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(A,O,B,j);else for(var Ze=A.length-1;Ze>=0;Ze--)(ce=A[Ze])&&(W=(ee<3?ce(W):ee>3?ce(O,B,W):ce(O,B))||W);return ee>3&&W&&Object.defineProperty(O,B,W),W}function z(A,O){return function(B,j){O(B,j,A)}}function T(A,O){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(A,O)}function D(A,O,B,j){return new(B||(B=Promise))(function(W,ce){function Ze(wt){try{we(j.next(wt))}catch(bt){ce(bt)}}function lt(wt){try{we(j.throw(wt))}catch(bt){ce(bt)}}function we(wt){wt.done?W(wt.value):function ee(W){return W instanceof B?W:new B(function(ce){ce(W)})}(wt.value).then(Ze,lt)}we((j=j.apply(A,O||[])).next())})}function F(A,O){var j,ee,W,ce,B={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ce={next:Ze(0),throw:Ze(1),return:Ze(2)},"function"==typeof Symbol&&(ce[Symbol.iterator]=function(){return this}),ce;function Ze(we){return function(wt){return function lt(we){if(j)throw new TypeError("Generator is already executing.");for(;B;)try{if(j=1,ee&&(W=2&we[0]?ee.return:we[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,we[1])).done)return W;switch(ee=0,W&&(we=[2&we[0],W.value]),we[0]){case 0:case 1:W=we;break;case 4:return B.label++,{value:we[1],done:!1};case 5:B.label++,ee=we[1],we=[0];continue;case 7:we=B.ops.pop(),B.trys.pop();continue;default:if(!(W=(W=B.trys).length>0&&W[W.length-1])&&(6===we[0]||2===we[0])){B=0;continue}if(3===we[0]&&(!W||we[1]>W[0]&&we[1]<W[3])){B.label=we[1];break}if(6===we[0]&&B.label<W[1]){B.label=W[1],W=we;break}if(W&&B.label<W[2]){B.label=W[2],B.ops.push(we);break}W[2]&&B.ops.pop(),B.trys.pop();continue}we=O.call(A,B)}catch(wt){we=[6,wt],ee=0}finally{j=W=0}if(5&we[0])throw we[1];return{value:we[0]?we[1]:void 0,done:!0}}([we,wt])}}}function Z(A,O,B,j){void 0===j&&(j=B),A[j]=O[B]}function Y(A,O){for(var B in A)"default"!==B&&!O.hasOwnProperty(B)&&(O[B]=A[B])}function ie(A){var O="function"==typeof Symbol&&Symbol.iterator,B=O&&A[O],j=0;if(B)return B.call(A);if(A&&"number"==typeof A.length)return{next:function(){return A&&j>=A.length&&(A=void 0),{value:A&&A[j++],done:!A}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")}function pe(A,O){var B="function"==typeof Symbol&&A[Symbol.iterator];if(!B)return A;var ee,ce,j=B.call(A),W=[];try{for(;(void 0===O||O-- >0)&&!(ee=j.next()).done;)W.push(ee.value)}catch(Ze){ce={error:Ze}}finally{try{ee&&!ee.done&&(B=j.return)&&B.call(j)}finally{if(ce)throw ce.error}}return W}function se(){for(var A=[],O=0;O<arguments.length;O++)A=A.concat(pe(arguments[O]));return A}function be(){for(var A=0,O=0,B=arguments.length;O<B;O++)A+=arguments[O].length;var j=Array(A),ee=0;for(O=0;O<B;O++)for(var W=arguments[O],ce=0,Ze=W.length;ce<Ze;ce++,ee++)j[ee]=W[ce];return j}function Me(A){return this instanceof Me?(this.v=A,this):new Me(A)}function Ne(A,O,B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,j=B.apply(A,O||[]),W=[];return ee={},ce("next"),ce("throw"),ce("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ce(Ye){j[Ye]&&(ee[Ye]=function(xt){return new Promise(function(yn,Bt){W.push([Ye,xt,yn,Bt])>1||Ze(Ye,xt)})})}function Ze(Ye,xt){try{!function lt(Ye){Ye.value instanceof Me?Promise.resolve(Ye.value.v).then(we,wt):bt(W[0][2],Ye)}(j[Ye](xt))}catch(yn){bt(W[0][3],yn)}}function we(Ye){Ze("next",Ye)}function wt(Ye){Ze("throw",Ye)}function bt(Ye,xt){Ye(xt),W.shift(),W.length&&Ze(W[0][0],W[0][1])}}function Je(A){var O,B;return O={},j("next"),j("throw",function(ee){throw ee}),j("return"),O[Symbol.iterator]=function(){return this},O;function j(ee,W){O[ee]=A[ee]?function(ce){return(B=!B)?{value:Me(A[ee](ce)),done:"return"===ee}:W?W(ce):ce}:W}}function je(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B,O=A[Symbol.asyncIterator];return O?O.call(A):(A=ie(A),B={},j("next"),j("throw"),j("return"),B[Symbol.asyncIterator]=function(){return this},B);function j(W){B[W]=A[W]&&function(ce){return new Promise(function(Ze,lt){!function ee(W,ce,Ze,lt){Promise.resolve(lt).then(function(we){W({value:we,done:Ze})},ce)}(Ze,lt,(ce=A[W](ce)).done,ce.value)})}}}function Se(A,O){return Object.defineProperty?Object.defineProperty(A,"raw",{value:O}):A.raw=O,A}function Ke(A){if(A&&A.__esModule)return A;var O={};if(null!=A)for(var B in A)Object.hasOwnProperty.call(A,B)&&(O[B]=A[B]);return O.default=A,O}function nt(A){return A&&A.__esModule?A:{default:A}}function It(A,O){if(!O.has(A))throw new TypeError("attempted to get private field on non-instance");return O.get(A)}function Ue(A,O,B){if(!O.has(A))throw new TypeError("attempted to set private field on non-instance");return O.set(A,B),B}},9077:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{__assign:()=>m,__asyncDelegator:()=>Je,__asyncGenerator:()=>Ne,__asyncValues:()=>je,__await:()=>Me,__awaiter:()=>D,__classPrivateFieldGet:()=>It,__classPrivateFieldSet:()=>Ue,__createBinding:()=>Z,__decorate:()=>G,__exportStar:()=>Y,__extends:()=>X,__generator:()=>F,__importDefault:()=>nt,__importStar:()=>Ke,__makeTemplateObject:()=>Se,__metadata:()=>T,__param:()=>z,__read:()=>pe,__rest:()=>q,__spread:()=>se,__spreadArrays:()=>be,__values:()=>ie});var V=function(A,O){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,j){B.__proto__=j}||function(B,j){for(var ee in j)j.hasOwnProperty(ee)&&(B[ee]=j[ee])})(A,O)};function X(A,O){function B(){this.constructor=A}V(A,O),A.prototype=null===O?Object.create(O):(B.prototype=O.prototype,new B)}var m=function(){return m=Object.assign||function(O){for(var B,j=1,ee=arguments.length;j<ee;j++)for(var W in B=arguments[j])Object.prototype.hasOwnProperty.call(B,W)&&(O[W]=B[W]);return O},m.apply(this,arguments)};function q(A,O){var B={};for(var j in A)Object.prototype.hasOwnProperty.call(A,j)&&O.indexOf(j)<0&&(B[j]=A[j]);if(null!=A&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(j=Object.getOwnPropertySymbols(A);ee<j.length;ee++)O.indexOf(j[ee])<0&&Object.prototype.propertyIsEnumerable.call(A,j[ee])&&(B[j[ee]]=A[j[ee]])}return B}function G(A,O,B,j){var ce,ee=arguments.length,W=ee<3?O:null===j?j=Object.getOwnPropertyDescriptor(O,B):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(A,O,B,j);else for(var Ze=A.length-1;Ze>=0;Ze--)(ce=A[Ze])&&(W=(ee<3?ce(W):ee>3?ce(O,B,W):ce(O,B))||W);return ee>3&&W&&Object.defineProperty(O,B,W),W}function z(A,O){return function(B,j){O(B,j,A)}}function T(A,O){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(A,O)}function D(A,O,B,j){return new(B||(B=Promise))(function(W,ce){function Ze(wt){try{we(j.next(wt))}catch(bt){ce(bt)}}function lt(wt){try{we(j.throw(wt))}catch(bt){ce(bt)}}function we(wt){wt.done?W(wt.value):function ee(W){return W instanceof B?W:new B(function(ce){ce(W)})}(wt.value).then(Ze,lt)}we((j=j.apply(A,O||[])).next())})}function F(A,O){var j,ee,W,ce,B={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ce={next:Ze(0),throw:Ze(1),return:Ze(2)},"function"==typeof Symbol&&(ce[Symbol.iterator]=function(){return this}),ce;function Ze(we){return function(wt){return function lt(we){if(j)throw new TypeError("Generator is already executing.");for(;B;)try{if(j=1,ee&&(W=2&we[0]?ee.return:we[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,we[1])).done)return W;switch(ee=0,W&&(we=[2&we[0],W.value]),we[0]){case 0:case 1:W=we;break;case 4:return B.label++,{value:we[1],done:!1};case 5:B.label++,ee=we[1],we=[0];continue;case 7:we=B.ops.pop(),B.trys.pop();continue;default:if(!(W=(W=B.trys).length>0&&W[W.length-1])&&(6===we[0]||2===we[0])){B=0;continue}if(3===we[0]&&(!W||we[1]>W[0]&&we[1]<W[3])){B.label=we[1];break}if(6===we[0]&&B.label<W[1]){B.label=W[1],W=we;break}if(W&&B.label<W[2]){B.label=W[2],B.ops.push(we);break}W[2]&&B.ops.pop(),B.trys.pop();continue}we=O.call(A,B)}catch(wt){we=[6,wt],ee=0}finally{j=W=0}if(5&we[0])throw we[1];return{value:we[0]?we[1]:void 0,done:!0}}([we,wt])}}}function Z(A,O,B,j){void 0===j&&(j=B),A[j]=O[B]}function Y(A,O){for(var B in A)"default"!==B&&!O.hasOwnProperty(B)&&(O[B]=A[B])}function ie(A){var O="function"==typeof Symbol&&Symbol.iterator,B=O&&A[O],j=0;if(B)return B.call(A);if(A&&"number"==typeof A.length)return{next:function(){return A&&j>=A.length&&(A=void 0),{value:A&&A[j++],done:!A}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")}function pe(A,O){var B="function"==typeof Symbol&&A[Symbol.iterator];if(!B)return A;var ee,ce,j=B.call(A),W=[];try{for(;(void 0===O||O-- >0)&&!(ee=j.next()).done;)W.push(ee.value)}catch(Ze){ce={error:Ze}}finally{try{ee&&!ee.done&&(B=j.return)&&B.call(j)}finally{if(ce)throw ce.error}}return W}function se(){for(var A=[],O=0;O<arguments.length;O++)A=A.concat(pe(arguments[O]));return A}function be(){for(var A=0,O=0,B=arguments.length;O<B;O++)A+=arguments[O].length;var j=Array(A),ee=0;for(O=0;O<B;O++)for(var W=arguments[O],ce=0,Ze=W.length;ce<Ze;ce++,ee++)j[ee]=W[ce];return j}function Me(A){return this instanceof Me?(this.v=A,this):new Me(A)}function Ne(A,O,B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,j=B.apply(A,O||[]),W=[];return ee={},ce("next"),ce("throw"),ce("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ce(Ye){j[Ye]&&(ee[Ye]=function(xt){return new Promise(function(yn,Bt){W.push([Ye,xt,yn,Bt])>1||Ze(Ye,xt)})})}function Ze(Ye,xt){try{!function lt(Ye){Ye.value instanceof Me?Promise.resolve(Ye.value.v).then(we,wt):bt(W[0][2],Ye)}(j[Ye](xt))}catch(yn){bt(W[0][3],yn)}}function we(Ye){Ze("next",Ye)}function wt(Ye){Ze("throw",Ye)}function bt(Ye,xt){Ye(xt),W.shift(),W.length&&Ze(W[0][0],W[0][1])}}function Je(A){var O,B;return O={},j("next"),j("throw",function(ee){throw ee}),j("return"),O[Symbol.iterator]=function(){return this},O;function j(ee,W){O[ee]=A[ee]?function(ce){return(B=!B)?{value:Me(A[ee](ce)),done:"return"===ee}:W?W(ce):ce}:W}}function je(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B,O=A[Symbol.asyncIterator];return O?O.call(A):(A=ie(A),B={},j("next"),j("throw"),j("return"),B[Symbol.asyncIterator]=function(){return this},B);function j(W){B[W]=A[W]&&function(ce){return new Promise(function(Ze,lt){!function ee(W,ce,Ze,lt){Promise.resolve(lt).then(function(we){W({value:we,done:Ze})},ce)}(Ze,lt,(ce=A[W](ce)).done,ce.value)})}}}function Se(A,O){return Object.defineProperty?Object.defineProperty(A,"raw",{value:O}):A.raw=O,A}function Ke(A){if(A&&A.__esModule)return A;var O={};if(null!=A)for(var B in A)Object.hasOwnProperty.call(A,B)&&(O[B]=A[B]);return O.default=A,O}function nt(A){return A&&A.__esModule?A:{default:A}}function It(A,O){if(!O.has(A))throw new TypeError("attempted to get private field on non-instance");return O.get(A)}function Ue(A,O,B){if(!O.has(A))throw new TypeError("attempted to set private field on non-instance");return O.set(A,B),B}}},Ae=>{Ae(Ae.s=2919)}]);
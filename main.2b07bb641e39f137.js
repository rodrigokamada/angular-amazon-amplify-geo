var rse=Object.defineProperty,o3=Object.getOwnPropertySymbols,ise=Object.prototype.hasOwnProperty,ose=Object.prototype.propertyIsEnumerable,a3=(He,J,G)=>J in He?rse(He,J,{enumerable:!0,configurable:!0,writable:!0,value:G}):He[J]=G,UC=(He,J)=>{for(var G in J||(J={}))ise.call(J,G)&&a3(He,G,J[G]);if(o3)for(var G of o3(J))ose.call(J,G)&&a3(He,G,J[G]);return He};(self.webpackChunkangular_map_amazon=self.webpackChunkangular_map_amazon||[]).push([[179],{2242:function(He){He.exports=function(J){var G={};function U(ie){if(G[ie])return G[ie].exports;var b=G[ie]={i:ie,l:!1,exports:{}};return J[ie].call(b.exports,b,b.exports,U),b.l=!0,b.exports}return U.m=J,U.c=G,U.d=function(ie,b,H){U.o(ie,b)||Object.defineProperty(ie,b,{enumerable:!0,get:H})},U.r=function(ie){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(ie,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ie,"__esModule",{value:!0})},U.t=function(ie,b){if(1&b&&(ie=U(ie)),8&b||4&b&&"object"==typeof ie&&ie&&ie.__esModule)return ie;var H=Object.create(null);if(U.r(H),Object.defineProperty(H,"default",{enumerable:!0,value:ie}),2&b&&"string"!=typeof ie)for(var X in ie)U.d(H,X,function(z){return ie[z]}.bind(null,X));return H},U.n=function(ie){var b=ie&&ie.__esModule?function(){return ie.default}:function(){return ie};return U.d(b,"a",b),b},U.o=function(ie,b){return Object.prototype.hasOwnProperty.call(ie,b)},U.p="",U(U.s=0)}([function(J,G,U){"use strict";function ie(b){for(var H in b)G.hasOwnProperty(H)||(G[H]=b[H])}Object.defineProperty(G,"__esModule",{value:!0}),ie(U(1)),ie(U(2)),ie(U(3)),ie(U(4)),ie(U(5)),ie(U(6)),ie(U(7)),ie(U(8)),ie(U(9)),ie(U(10)),ie(U(11)),ie(U(12)),ie(U(13))},function(J,G,U){J.exports={a:"Anchor__a___1_Iz8"}},function(J,G,U){J.exports={button:"Button__button___vS7Mv",signInButton:"Button__signInButton___3bUH-",googleSignInButton:"Button__googleSignInButton___1YiCu",signInButtonIcon:"Button__signInButtonIcon___ihN75",auth0SignInButton:"Button__auth0SignInButton___znnCj",facebookSignInButton:"Button__facebookSignInButton___34Txh",amazonSignInButton:"Button__amazonSignInButton___2EMtl",oAuthSignInButton:"Button__oAuthSignInButton___3UGOl",signInButtonContent:"Button__signInButtonContent___xqTXJ"}},function(J,G,U){J.exports={formContainer:"Form__formContainer___1GA3x",formSection:"Form__formSection___1PPvW",formField:"Form__formField___38Ikl",formRow:"Form__formRow___2mwRs"}},function(J,G,U){J.exports={hint:"Hint__hint___2XngB"}},function(J,G,U){J.exports={input:"Input__input___3e_bf",inputLabel:"Input__inputLabel___3VF0S",label:"Input__label___23sO8",radio:"Input__radio___2hllK"}},function(J,G,U){J.exports={navBar:"Nav__navBar___xtCFA",navRight:"Nav__navRight___1QG2J",nav:"Nav__nav___2Dx2Y",navItem:"Nav__navItem___1LtFQ"}},function(J,G,U){J.exports={photoPickerButton:"PhotoPicker__photoPickerButton___2XdVn",photoPlaceholder:"PhotoPicker__photoPlaceholder___2JXO4",photoPlaceholderIcon:"PhotoPicker__photoPlaceholderIcon___3Et71"}},function(J,G,U){J.exports={container:"Section__container___3YYTG",actionRow:"Section__actionRow___2LWSU",sectionHeader:"Section__sectionHeader___2djyg",sectionHeaderHint:"Section__sectionHeaderHint___3Wxdc",sectionBody:"Section__sectionBody___ihqqd",sectionHeaderContent:"Section__sectionHeaderContent___1UCqa",sectionFooter:"Section__sectionFooter___1T54C",sectionFooterPrimaryContent:"Section__sectionFooterPrimaryContent___2r9ZX",sectionFooterSecondaryContent:"Section__sectionFooterSecondaryContent___Nj41Q"}},function(J,G,U){J.exports={selectInput:"SelectInput__selectInput___3efO4"}},function(J,G,U){J.exports={strike:"Strike__strike___1XV1b",strikeContent:"Strike__strikeContent___10gLb"}},function(J,G,U){J.exports={toast:"Toast__toast___XXr3v",toastClose:"Toast__toastClose___18lU4"}},function(J,G,U){J.exports={totpQrcode:"Totp__totpQrcode___1crLx"}},function(J,G,U){J.exports={sumerianSceneContainer:"XR__sumerianSceneContainer___3nVMt",sumerianScene:"XR__sumerianScene___2Tt7-",loadingOverlay:"XR__loadingOverlay___IbqcI",loadingContainer:"XR__loadingContainer___2Itxb",loadingLogo:"XR__loadingLogo___Ub7xQ",loadingSceneName:"XR__loadingSceneName___3__ne",loadingBar:"XR__loadingBar___2vcke",loadingBarFill:"XR__loadingBarFill___3M-D9",sceneErrorText:"XR__sceneErrorText___2y0tp",sceneBar:"XR__sceneBar___2ShrP",sceneName:"XR__sceneName___1ApHr",sceneActions:"XR__sceneActions___7plGs",actionButton:"XR__actionButton___2poIM",tooltip:"XR__tooltip___UYyhn",actionIcon:"XR__actionIcon___2qnd2",autoShowTooltip:"XR__autoShowTooltip___V1QH7"}}])},3050:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.AwsCrc32=void 0;var U=G(2717),ie=G(7736),b=G(1979),H=function(){function X(){this.crc32=new b.Crc32}return X.prototype.update=function(z){(0,ie.isEmptyData)(z)||this.crc32.update((0,ie.convertToBuffer)(z))},X.prototype.digest=function(){return(0,U.__awaiter)(this,void 0,void 0,function(){return(0,U.__generator)(this,function(z){return[2,(0,ie.numToUint8)(this.crc32.digest())]})})},X}();J.AwsCrc32=H},1979:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.AwsCrc32=J.Crc32=J.crc32=void 0;var U=G(2717),ie=G(7736);J.crc32=function b(L){return(new H).update(L).digest()};var H=function(){function L(){this.checksum=4294967295}return L.prototype.update=function(B){var W,ee;try{for(var ue=(0,U.__values)(B),fe=ue.next();!fe.done;fe=ue.next())this.checksum=this.checksum>>>8^z[255&(this.checksum^fe.value)]}catch(ge){W={error:ge}}finally{try{fe&&!fe.done&&(ee=ue.return)&&ee.call(ue)}finally{if(W)throw W.error}}return this},L.prototype.digest=function(){return(4294967295^this.checksum)>>>0},L}();J.Crc32=H;var z=(0,ie.uint32ArrayFrom)([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),M=G(3050);Object.defineProperty(J,"AwsCrc32",{enumerable:!0,get:function(){return M.AwsCrc32}})},4285:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},7487:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},9984:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},2093:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},4849:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.isMsWindow=void 0;var G=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];J.isMsWindow=function ie(b){if(function U(b){return"MSInputMethodContext"in b&&"msCrypto"in b}(b)&&void 0!==b.msCrypto.subtle){var H=b.msCrypto,X=H.getRandomValues,z=H.subtle;return G.map(function(M){return z[M]}).concat(X).every(function(M){return"function"==typeof M})}return!1}},1806:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});var U=G(1980);U.__exportStar(G(4285),J),U.__exportStar(G(7487),J),U.__exportStar(G(9984),J),U.__exportStar(G(2093),J),U.__exportStar(G(4849),J)},9760:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.EMPTY_DATA_SHA_256=J.SHA_256_HMAC_ALGO=J.SHA_256_HASH=void 0,J.SHA_256_HASH={name:"SHA-256"},J.SHA_256_HMAC_ALGO={name:"HMAC",hash:J.SHA_256_HASH},J.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},7895:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var U=G(9121),ie=G(5139),b=G(5979),H=G(710),X=G(1806),z=G(2521),M=function(){function L(B){this.hash=(0,H.supportsWebCrypto)((0,z.locateWindow)())?new ie.Sha256(B):(0,X.isMsWindow)((0,z.locateWindow)())?new U.Sha256(B):new b.Sha256(B)}return L.prototype.update=function(B,W){this.hash.update(B,W)},L.prototype.digest=function(){return this.hash.digest()},L}();J.Sha256=M},9121:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var U=G(5200),ie=G(9760),b=G(2622),H=G(2521),X=function(){function L(B){B?(this.operation=function z(L){return new Promise(function(B,W){var ee=(0,H.locateWindow)().msCrypto.subtle.importKey("raw",M(L),ie.SHA_256_HMAC_ALGO,!1,["sign"]);ee.oncomplete=function(){ee.result&&B(ee.result),W(new Error("ImportKey completed without importing key."))},ee.onerror=function(){W(new Error("ImportKey failed to import key."))}})}(B).then(function(W){return(0,H.locateWindow)().msCrypto.subtle.sign(ie.SHA_256_HMAC_ALGO,W)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,H.locateWindow)().msCrypto.subtle.digest("SHA-256"))}return L.prototype.update=function(B){var W=this;(0,U.isEmptyData)(B)||(this.operation=this.operation.then(function(ee){return ee.onerror=function(){W.operation=Promise.reject(new Error("Error encountered updating hash"))},ee.process(M(B)),ee}),this.operation.catch(function(){}))},L.prototype.digest=function(){return this.operation.then(function(B){return new Promise(function(W,ee){B.onerror=function(){ee(new Error("Error encountered finalizing hash"))},B.oncomplete=function(){B.result&&W(new Uint8Array(B.result)),ee(new Error("Error encountered finalizing hash"))},B.finish()})})},L}();function M(L){return"string"==typeof L?(0,b.fromUtf8)(L):ArrayBuffer.isView(L)?new Uint8Array(L.buffer,L.byteOffset,L.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(L)}J.Sha256=X},9801:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.WebCryptoSha256=J.Ie11Sha256=void 0,(0,G(5789).__exportStar)(G(7895),J);var ie=G(9121);Object.defineProperty(J,"Ie11Sha256",{enumerable:!0,get:function(){return ie.Sha256}});var b=G(5139);Object.defineProperty(J,"WebCryptoSha256",{enumerable:!0,get:function(){return b.Sha256}})},5200:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.isEmptyData=void 0,J.isEmptyData=function G(U){return"string"==typeof U?0===U.length:0===U.byteLength}},5139:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var U=G(7736),ie=G(9760),b=G(2521),H=function(){function X(z){this.toHash=new Uint8Array(0),void 0!==z&&(this.key=new Promise(function(M,L){(0,b.locateWindow)().crypto.subtle.importKey("raw",(0,U.convertToBuffer)(z),ie.SHA_256_HMAC_ALGO,!1,["sign"]).then(M,L)}),this.key.catch(function(){}))}return X.prototype.update=function(z){if(!(0,U.isEmptyData)(z)){var M=(0,U.convertToBuffer)(z),L=new Uint8Array(this.toHash.byteLength+M.byteLength);L.set(this.toHash,0),L.set(M,this.toHash.byteLength),this.toHash=L}},X.prototype.digest=function(){var z=this;return this.key?this.key.then(function(M){return(0,b.locateWindow)().crypto.subtle.sign(ie.SHA_256_HMAC_ALGO,M,z.toHash).then(function(L){return new Uint8Array(L)})}):(0,U.isEmptyData)(this.toHash)?Promise.resolve(ie.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,b.locateWindow)().crypto.subtle.digest(ie.SHA_256_HASH,z.toHash)}).then(function(M){return Promise.resolve(new Uint8Array(M))})},X}();J.Sha256=H},6521:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.RawSha256=void 0;var U=G(154),ie=function(){function b(){this.state=Int32Array.from(U.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return b.prototype.update=function(H){if(this.finished)throw new Error("Attempted to update an already finished hash.");var X=0,z=H.byteLength;if(this.bytesHashed+=z,8*this.bytesHashed>U.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;z>0;)this.buffer[this.bufferLength++]=H[X++],z--,this.bufferLength===U.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},b.prototype.digest=function(){if(!this.finished){var H=8*this.bytesHashed,X=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),z=this.bufferLength;if(X.setUint8(this.bufferLength++,128),z%U.BLOCK_SIZE>=U.BLOCK_SIZE-8){for(var M=this.bufferLength;M<U.BLOCK_SIZE;M++)X.setUint8(M,0);this.hashBuffer(),this.bufferLength=0}for(M=this.bufferLength;M<U.BLOCK_SIZE-8;M++)X.setUint8(M,0);X.setUint32(U.BLOCK_SIZE-8,Math.floor(H/4294967296),!0),X.setUint32(U.BLOCK_SIZE-4,H),this.hashBuffer(),this.finished=!0}var L=new Uint8Array(U.DIGEST_LENGTH);for(M=0;M<8;M++)L[4*M]=this.state[M]>>>24&255,L[4*M+1]=this.state[M]>>>16&255,L[4*M+2]=this.state[M]>>>8&255,L[4*M+3]=this.state[M]>>>0&255;return L},b.prototype.hashBuffer=function(){for(var X=this.buffer,z=this.state,M=z[0],L=z[1],B=z[2],W=z[3],ee=z[4],ue=z[5],fe=z[6],we=z[7],ge=0;ge<U.BLOCK_SIZE;ge++){if(ge<16)this.temp[ge]=(255&X[4*ge])<<24|(255&X[4*ge+1])<<16|(255&X[4*ge+2])<<8|255&X[4*ge+3];else{var Ie=this.temp[ge-2];this.temp[ge]=(((Ie>>>17|Ie<<15)^(Ie>>>19|Ie<<13)^Ie>>>10)+this.temp[ge-7]|0)+((((Ie=this.temp[ge-15])>>>7|Ie<<25)^(Ie>>>18|Ie<<14)^Ie>>>3)+this.temp[ge-16]|0)}var he=(((ee>>>6|ee<<26)^(ee>>>11|ee<<21)^(ee>>>25|ee<<7))+(ee&ue^~ee&fe)|0)+(we+(U.KEY[ge]+this.temp[ge]|0)|0)|0,Te=((M>>>2|M<<30)^(M>>>13|M<<19)^(M>>>22|M<<10))+(M&L^M&B^L&B)|0;we=fe,fe=ue,ue=ee,ee=W+he|0,W=B,B=L,L=M,M=he+Te|0}z[0]+=M,z[1]+=L,z[2]+=B,z[3]+=W,z[4]+=ee,z[5]+=ue,z[6]+=fe,z[7]+=we},b}();J.RawSha256=ie},154:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.MAX_HASHABLE_LENGTH=J.INIT=J.KEY=J.DIGEST_LENGTH=J.BLOCK_SIZE=void 0,J.BLOCK_SIZE=64,J.DIGEST_LENGTH=32,J.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),J.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],J.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},5979:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),(0,G(5789).__exportStar)(G(9235),J)},9235:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var U=G(5789),ie=G(154),b=G(6521),H=G(7736),X=function(){function M(L){if(this.hash=new b.RawSha256,L){this.outer=new b.RawSha256;var B=function z(M){var L=(0,H.convertToBuffer)(M);if(L.byteLength>ie.BLOCK_SIZE){var B=new b.RawSha256;B.update(L),L=B.digest()}var W=new Uint8Array(ie.BLOCK_SIZE);return W.set(L),W}(L),W=new Uint8Array(ie.BLOCK_SIZE);W.set(B);for(var ee=0;ee<ie.BLOCK_SIZE;ee++)B[ee]^=54,W[ee]^=92;for(this.hash.update(B),this.outer.update(W),ee=0;ee<B.byteLength;ee++)B[ee]=0}}return M.prototype.update=function(L){if(!(0,H.isEmptyData)(L)&&!this.error)try{this.hash.update((0,H.convertToBuffer)(L))}catch(B){this.error=B}},M.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},M.prototype.digest=function(){return(0,U.__awaiter)(this,void 0,void 0,function(){return(0,U.__generator)(this,function(L){return[2,this.digestSync()]})})},M}();J.Sha256=X},6516:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});var U=G(4022),ie=function(){function b(){this.state=Int32Array.from(U.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return b.prototype.update=function(H){if(this.finished)throw new Error("Attempted to update an already finished hash.");var X=0,z=H.byteLength;if(this.bytesHashed+=z,8*this.bytesHashed>U.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;z>0;)this.buffer[this.bufferLength++]=H[X++],z--,this.bufferLength===U.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},b.prototype.digest=function(){if(!this.finished){var H=8*this.bytesHashed,X=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),z=this.bufferLength;if(X.setUint8(this.bufferLength++,128),z%U.BLOCK_SIZE>=U.BLOCK_SIZE-8){for(var M=this.bufferLength;M<U.BLOCK_SIZE;M++)X.setUint8(M,0);this.hashBuffer(),this.bufferLength=0}for(M=this.bufferLength;M<U.BLOCK_SIZE-8;M++)X.setUint8(M,0);X.setUint32(U.BLOCK_SIZE-8,Math.floor(H/4294967296),!0),X.setUint32(U.BLOCK_SIZE-4,H),this.hashBuffer(),this.finished=!0}var L=new Uint8Array(U.DIGEST_LENGTH);for(M=0;M<8;M++)L[4*M]=this.state[M]>>>24&255,L[4*M+1]=this.state[M]>>>16&255,L[4*M+2]=this.state[M]>>>8&255,L[4*M+3]=this.state[M]>>>0&255;return L},b.prototype.hashBuffer=function(){for(var X=this.buffer,z=this.state,M=z[0],L=z[1],B=z[2],W=z[3],ee=z[4],ue=z[5],fe=z[6],we=z[7],ge=0;ge<U.BLOCK_SIZE;ge++){if(ge<16)this.temp[ge]=(255&X[4*ge])<<24|(255&X[4*ge+1])<<16|(255&X[4*ge+2])<<8|255&X[4*ge+3];else{var Ie=this.temp[ge-2];this.temp[ge]=(((Ie>>>17|Ie<<15)^(Ie>>>19|Ie<<13)^Ie>>>10)+this.temp[ge-7]|0)+((((Ie=this.temp[ge-15])>>>7|Ie<<25)^(Ie>>>18|Ie<<14)^Ie>>>3)+this.temp[ge-16]|0)}var he=(((ee>>>6|ee<<26)^(ee>>>11|ee<<21)^(ee>>>25|ee<<7))+(ee&ue^~ee&fe)|0)+(we+(U.KEY[ge]+this.temp[ge]|0)|0)|0,Te=((M>>>2|M<<30)^(M>>>13|M<<19)^(M>>>22|M<<10))+(M&L^M&B^L&B)|0;we=fe,fe=ue,ue=ee,ee=W+he|0,W=B,B=L,L=M,M=he+Te|0}z[0]+=M,z[1]+=L,z[2]+=B,z[3]+=W,z[4]+=ee,z[5]+=ue,z[6]+=fe,z[7]+=we},b}();J.RawSha256=ie},4022:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.BLOCK_SIZE=64,J.DIGEST_LENGTH=32,J.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),J.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],J.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},4578:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),G(3541).__exportStar(G(3039),J)},3039:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});var U=G(3541),ie=G(4022),b=G(6516),H=G(2622),X=function(){function B(W){if(this.hash=new b.RawSha256,W){this.outer=new b.RawSha256;var ee=function z(B){var W=L(B);if(W.byteLength>ie.BLOCK_SIZE){var ee=new b.RawSha256;ee.update(W),W=ee.digest()}var ue=new Uint8Array(ie.BLOCK_SIZE);return ue.set(W),ue}(W),ue=new Uint8Array(ie.BLOCK_SIZE);ue.set(ee);for(var fe=0;fe<ie.BLOCK_SIZE;fe++)ee[fe]^=54,ue[fe]^=92;for(this.hash.update(ee),this.outer.update(ue),fe=0;fe<ee.byteLength;fe++)ee[fe]=0}}return B.prototype.update=function(W){if(!function M(B){return"string"==typeof B?0===B.length:0===B.byteLength}(W)&&!this.error)try{this.hash.update(L(W))}catch(ee){this.error=ee}},B.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},B.prototype.digest=function(){return U.__awaiter(this,void 0,void 0,function(){return U.__generator(this,function(W){return[2,this.digestSync()]})})},B}();function L(B){return"string"==typeof B?H.fromUtf8(B):ArrayBuffer.isView(B)?new Uint8Array(B.buffer,B.byteOffset,B.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(B)}J.Sha256=X},710:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),G(7840).__exportStar(G(933),J)},933:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.supportsZeroByteGCM=J.supportsSubtleCrypto=J.supportsSecureRandom=J.supportsWebCrypto=void 0;var U=G(7840),ie=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function H(M){return"object"==typeof M&&"object"==typeof M.crypto&&"function"==typeof M.crypto.getRandomValues}function X(M){return M&&ie.every(function(L){return"function"==typeof M[L]})}J.supportsWebCrypto=function b(M){return!(!H(M)||"object"!=typeof M.crypto.subtle)&&X(M.crypto.subtle)},J.supportsSecureRandom=H,J.supportsSubtleCrypto=X,J.supportsZeroByteGCM=function z(M){return U.__awaiter(this,void 0,void 0,function(){var L;return U.__generator(this,function(ee){switch(ee.label){case 0:if(!X(M))return[2,!1];ee.label=1;case 1:return ee.trys.push([1,4,,5]),[4,M.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return L=ee.sent(),[4,M.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},L,new Uint8Array(0))];case 3:return[2,16===ee.sent().byteLength];case 4:return ee.sent(),[2,!1];case 5:return[2]}})})}},2862:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.convertToBuffer=void 0;var U=G(4004),ie="undefined"!=typeof Buffer&&Buffer.from?function(H){return Buffer.from(H,"utf8")}:U.fromUtf8;J.convertToBuffer=function b(H){return H instanceof Uint8Array?H:"string"==typeof H?ie(H):ArrayBuffer.isView(H)?new Uint8Array(H.buffer,H.byteOffset,H.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(H)}},7736:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.uint32ArrayFrom=J.numToUint8=J.isEmptyData=J.convertToBuffer=void 0;var U=G(2862);Object.defineProperty(J,"convertToBuffer",{enumerable:!0,get:function(){return U.convertToBuffer}});var ie=G(5516);Object.defineProperty(J,"isEmptyData",{enumerable:!0,get:function(){return ie.isEmptyData}});var b=G(5183);Object.defineProperty(J,"numToUint8",{enumerable:!0,get:function(){return b.numToUint8}});var H=G(6777);Object.defineProperty(J,"uint32ArrayFrom",{enumerable:!0,get:function(){return H.uint32ArrayFrom}})},5516:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.isEmptyData=void 0,J.isEmptyData=function G(U){return"string"==typeof U?0===U.length:0===U.byteLength}},5183:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.numToUint8=void 0,J.numToUint8=function G(U){return new Uint8Array([(4278190080&U)>>24,(16711680&U)>>16,(65280&U)>>8,255&U])}},6777:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.uint32ArrayFrom=void 0,J.uint32ArrayFrom=function G(U){if(!Array.from){for(var ie=new Uint32Array(U.length);0<U.length;)ie[0]=U[0];return ie}return Uint32Array.from(U)}},4004:(He,J,G)=>{"use strict";G.r(J),G.d(J,{fromUtf8:()=>X,toUtf8:()=>z});var X=function(M){return"function"==typeof TextEncoder?function b(M){return(new TextEncoder).encode(M)}(M):function(M){for(var L=[],B=0,W=M.length;B<W;B++){var ee=M.charCodeAt(B);if(ee<128)L.push(ee);else if(ee<2048)L.push(ee>>6|192,63&ee|128);else if(B+1<M.length&&55296==(64512&ee)&&56320==(64512&M.charCodeAt(B+1))){var ue=65536+((1023&ee)<<10)+(1023&M.charCodeAt(++B));L.push(ue>>18|240,ue>>12&63|128,ue>>6&63|128,63&ue|128)}else L.push(ee>>12|224,ee>>6&63|128,63&ee|128)}return Uint8Array.from(L)}(M)},z=function(M){return"function"==typeof TextDecoder?function H(M){return new TextDecoder("utf-8").decode(M)}(M):function(M){for(var L="",B=0,W=M.length;B<W;B++){var ee=M[B];if(ee<128)L+=String.fromCharCode(ee);else if(192<=ee&&ee<224){var ue=M[++B];L+=String.fromCharCode((31&ee)<<6|63&ue)}else if(240<=ee&&ee<365){var we="%"+[ee,M[++B],M[++B],M[++B]].map(function(ge){return ge.toString(16)}).join("%");L+=decodeURIComponent(we)}else L+=String.fromCharCode((15&ee)<<12|(63&M[++B])<<6|63&M[++B])}return L}(M)}},9684:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},7593:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},5243:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},883:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},2625:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.isMsWindow=void 0;var G=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];J.isMsWindow=function ie(b){if(function U(b){return"MSInputMethodContext"in b&&"msCrypto"in b}(b)&&void 0!==b.msCrypto.subtle){var H=b.msCrypto,X=H.getRandomValues,z=H.subtle;return G.map(function(M){return z[M]}).concat(X).every(function(M){return"function"==typeof M})}return!1}},5657:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});var U=G(4806);(0,U.__exportStar)(G(9684),J),(0,U.__exportStar)(G(7593),J),(0,U.__exportStar)(G(5243),J),(0,U.__exportStar)(G(883),J),(0,U.__exportStar)(G(2625),J)},7655:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.EMPTY_DATA_SHA_256=J.SHA_256_HMAC_ALGO=J.SHA_256_HASH=void 0,J.SHA_256_HASH={name:"SHA-256"},J.SHA_256_HMAC_ALGO={name:"HMAC",hash:J.SHA_256_HASH},J.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},1198:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var U=G(7273),ie=G(157),b=G(5415),H=G(463),X=G(5657),z=G(2521),M=function(){function L(B){this.hash=(0,H.supportsWebCrypto)((0,z.locateWindow)())?new ie.Sha256(B):(0,X.isMsWindow)((0,z.locateWindow)())?new U.Sha256(B):new b.Sha256(B)}return L.prototype.update=function(B,W){this.hash.update(B,W)},L.prototype.digest=function(){return this.hash.digest()},L}();J.Sha256=M},7273:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var U=G(1739),ie=G(7655),b=G(4456),H=G(2521),X=function(){function L(B){B?(this.operation=function z(L){return new Promise(function(B,W){var ee=(0,H.locateWindow)().msCrypto.subtle.importKey("raw",M(L),ie.SHA_256_HMAC_ALGO,!1,["sign"]);ee.oncomplete=function(){ee.result&&B(ee.result),W(new Error("ImportKey completed without importing key."))},ee.onerror=function(){W(new Error("ImportKey failed to import key."))}})}(B).then(function(W){return(0,H.locateWindow)().msCrypto.subtle.sign(ie.SHA_256_HMAC_ALGO,W)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,H.locateWindow)().msCrypto.subtle.digest("SHA-256"))}return L.prototype.update=function(B){var W=this;(0,U.isEmptyData)(B)||(this.operation=this.operation.then(function(ee){return ee.onerror=function(){W.operation=Promise.reject(new Error("Error encountered updating hash"))},ee.process(M(B)),ee}),this.operation.catch(function(){}))},L.prototype.digest=function(){return this.operation.then(function(B){return new Promise(function(W,ee){B.onerror=function(){ee(new Error("Error encountered finalizing hash"))},B.oncomplete=function(){B.result&&W(new Uint8Array(B.result)),ee(new Error("Error encountered finalizing hash"))},B.finish()})})},L}();function M(L){return"string"==typeof L?(0,b.fromUtf8)(L):ArrayBuffer.isView(L)?new Uint8Array(L.buffer,L.byteOffset,L.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(L)}J.Sha256=X},2518:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.WebCryptoSha256=J.Ie11Sha256=void 0,(0,G(5955).__exportStar)(G(1198),J);var ie=G(7273);Object.defineProperty(J,"Ie11Sha256",{enumerable:!0,get:function(){return ie.Sha256}});var b=G(157);Object.defineProperty(J,"WebCryptoSha256",{enumerable:!0,get:function(){return b.Sha256}})},1739:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.isEmptyData=void 0,J.isEmptyData=function G(U){return"string"==typeof U?0===U.length:0===U.byteLength}},157:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var U=G(5512),ie=G(7655),b=G(2521),H=function(){function X(z){this.toHash=new Uint8Array(0),void 0!==z&&(this.key=new Promise(function(M,L){(0,b.locateWindow)().crypto.subtle.importKey("raw",(0,U.convertToBuffer)(z),ie.SHA_256_HMAC_ALGO,!1,["sign"]).then(M,L)}),this.key.catch(function(){}))}return X.prototype.update=function(z){if(!(0,U.isEmptyData)(z)){var M=(0,U.convertToBuffer)(z),L=new Uint8Array(this.toHash.byteLength+M.byteLength);L.set(this.toHash,0),L.set(M,this.toHash.byteLength),this.toHash=L}},X.prototype.digest=function(){var z=this;return this.key?this.key.then(function(M){return(0,b.locateWindow)().crypto.subtle.sign(ie.SHA_256_HMAC_ALGO,M,z.toHash).then(function(L){return new Uint8Array(L)})}):(0,U.isEmptyData)(this.toHash)?Promise.resolve(ie.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,b.locateWindow)().crypto.subtle.digest(ie.SHA_256_HASH,z.toHash)}).then(function(M){return Promise.resolve(new Uint8Array(M))})},X}();J.Sha256=H},1934:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.RawSha256=void 0;var U=G(268),ie=function(){function b(){this.state=Int32Array.from(U.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return b.prototype.update=function(H){if(this.finished)throw new Error("Attempted to update an already finished hash.");var X=0,z=H.byteLength;if(this.bytesHashed+=z,8*this.bytesHashed>U.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;z>0;)this.buffer[this.bufferLength++]=H[X++],z--,this.bufferLength===U.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},b.prototype.digest=function(){if(!this.finished){var H=8*this.bytesHashed,X=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),z=this.bufferLength;if(X.setUint8(this.bufferLength++,128),z%U.BLOCK_SIZE>=U.BLOCK_SIZE-8){for(var M=this.bufferLength;M<U.BLOCK_SIZE;M++)X.setUint8(M,0);this.hashBuffer(),this.bufferLength=0}for(M=this.bufferLength;M<U.BLOCK_SIZE-8;M++)X.setUint8(M,0);X.setUint32(U.BLOCK_SIZE-8,Math.floor(H/4294967296),!0),X.setUint32(U.BLOCK_SIZE-4,H),this.hashBuffer(),this.finished=!0}var L=new Uint8Array(U.DIGEST_LENGTH);for(M=0;M<8;M++)L[4*M]=this.state[M]>>>24&255,L[4*M+1]=this.state[M]>>>16&255,L[4*M+2]=this.state[M]>>>8&255,L[4*M+3]=this.state[M]>>>0&255;return L},b.prototype.hashBuffer=function(){for(var X=this.buffer,z=this.state,M=z[0],L=z[1],B=z[2],W=z[3],ee=z[4],ue=z[5],fe=z[6],we=z[7],ge=0;ge<U.BLOCK_SIZE;ge++){if(ge<16)this.temp[ge]=(255&X[4*ge])<<24|(255&X[4*ge+1])<<16|(255&X[4*ge+2])<<8|255&X[4*ge+3];else{var Ie=this.temp[ge-2];this.temp[ge]=(((Ie>>>17|Ie<<15)^(Ie>>>19|Ie<<13)^Ie>>>10)+this.temp[ge-7]|0)+((((Ie=this.temp[ge-15])>>>7|Ie<<25)^(Ie>>>18|Ie<<14)^Ie>>>3)+this.temp[ge-16]|0)}var he=(((ee>>>6|ee<<26)^(ee>>>11|ee<<21)^(ee>>>25|ee<<7))+(ee&ue^~ee&fe)|0)+(we+(U.KEY[ge]+this.temp[ge]|0)|0)|0,Te=((M>>>2|M<<30)^(M>>>13|M<<19)^(M>>>22|M<<10))+(M&L^M&B^L&B)|0;we=fe,fe=ue,ue=ee,ee=W+he|0,W=B,B=L,L=M,M=he+Te|0}z[0]+=M,z[1]+=L,z[2]+=B,z[3]+=W,z[4]+=ee,z[5]+=ue,z[6]+=fe,z[7]+=we},b}();J.RawSha256=ie},268:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.MAX_HASHABLE_LENGTH=J.INIT=J.KEY=J.DIGEST_LENGTH=J.BLOCK_SIZE=void 0,J.BLOCK_SIZE=64,J.DIGEST_LENGTH=32,J.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),J.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],J.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},5415:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),(0,G(2960).__exportStar)(G(316),J)},316:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var U=G(2960),ie=G(268),b=G(1934),H=G(5512),X=function(){function M(L){if(this.hash=new b.RawSha256,L){this.outer=new b.RawSha256;var B=function z(M){var L=(0,H.convertToBuffer)(M);if(L.byteLength>ie.BLOCK_SIZE){var B=new b.RawSha256;B.update(L),L=B.digest()}var W=new Uint8Array(ie.BLOCK_SIZE);return W.set(L),W}(L),W=new Uint8Array(ie.BLOCK_SIZE);W.set(B);for(var ee=0;ee<ie.BLOCK_SIZE;ee++)B[ee]^=54,W[ee]^=92;for(this.hash.update(B),this.outer.update(W),ee=0;ee<B.byteLength;ee++)B[ee]=0}}return M.prototype.update=function(L){if(!(0,H.isEmptyData)(L)&&!this.error)try{this.hash.update((0,H.convertToBuffer)(L))}catch(B){this.error=B}},M.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},M.prototype.digest=function(){return(0,U.__awaiter)(this,void 0,void 0,function(){return(0,U.__generator)(this,function(L){return[2,this.digestSync()]})})},M}();J.Sha256=X},463:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),(0,G(9077).__exportStar)(G(7053),J)},7053:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.supportsZeroByteGCM=J.supportsSubtleCrypto=J.supportsSecureRandom=J.supportsWebCrypto=void 0;var U=G(9077),ie=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function H(M){return"object"==typeof M&&"object"==typeof M.crypto&&"function"==typeof M.crypto.getRandomValues}function X(M){return M&&ie.every(function(L){return"function"==typeof M[L]})}J.supportsWebCrypto=function b(M){return!(!H(M)||"object"!=typeof M.crypto.subtle)&&X(M.crypto.subtle)},J.supportsSecureRandom=H,J.supportsSubtleCrypto=X,J.supportsZeroByteGCM=function z(M){return(0,U.__awaiter)(this,void 0,void 0,function(){var L;return(0,U.__generator)(this,function(ee){switch(ee.label){case 0:if(!X(M))return[2,!1];ee.label=1;case 1:return ee.trys.push([1,4,,5]),[4,M.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return L=ee.sent(),[4,M.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},L,new Uint8Array(0))];case 3:return[2,16===ee.sent().byteLength];case 4:return ee.sent(),[2,!1];case 5:return[2]}})})}},4389:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.convertToBuffer=void 0;var U=G(4456),ie="undefined"!=typeof Buffer&&Buffer.from?function(H){return Buffer.from(H,"utf8")}:U.fromUtf8;J.convertToBuffer=function b(H){return H instanceof Uint8Array?H:"string"==typeof H?ie(H):ArrayBuffer.isView(H)?new Uint8Array(H.buffer,H.byteOffset,H.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(H)}},5512:(He,J,G)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.uint32ArrayFrom=J.numToUint8=J.isEmptyData=J.convertToBuffer=void 0;var U=G(4389);Object.defineProperty(J,"convertToBuffer",{enumerable:!0,get:function(){return U.convertToBuffer}});var ie=G(3666);Object.defineProperty(J,"isEmptyData",{enumerable:!0,get:function(){return ie.isEmptyData}});var b=G(1268);Object.defineProperty(J,"numToUint8",{enumerable:!0,get:function(){return b.numToUint8}});var H=G(491);Object.defineProperty(J,"uint32ArrayFrom",{enumerable:!0,get:function(){return H.uint32ArrayFrom}})},3666:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.isEmptyData=void 0,J.isEmptyData=function G(U){return"string"==typeof U?0===U.length:0===U.byteLength}},1268:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.numToUint8=void 0,J.numToUint8=function G(U){return new Uint8Array([(4278190080&U)>>24,(16711680&U)>>16,(65280&U)>>8,255&U])}},491:(He,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.uint32ArrayFrom=void 0,J.uint32ArrayFrom=function G(U){if(!Uint32Array.from){for(var ie=new Uint32Array(U.length),b=0;b<U.length;)ie[b]=U[b],b+=1;return ie}return Uint32Array.from(U)}},4456:(He,J,G)=>{"use strict";G.r(J),G.d(J,{fromUtf8:()=>X,toUtf8:()=>z});var X=function(M){return"function"==typeof TextEncoder?function b(M){return(new TextEncoder).encode(M)}(M):function(M){for(var L=[],B=0,W=M.length;B<W;B++){var ee=M.charCodeAt(B);if(ee<128)L.push(ee);else if(ee<2048)L.push(ee>>6|192,63&ee|128);else if(B+1<M.length&&55296==(64512&ee)&&56320==(64512&M.charCodeAt(B+1))){var ue=65536+((1023&ee)<<10)+(1023&M.charCodeAt(++B));L.push(ue>>18|240,ue>>12&63|128,ue>>6&63|128,63&ue|128)}else L.push(ee>>12|224,ee>>6&63|128,63&ee|128)}return Uint8Array.from(L)}(M)},z=function(M){return"function"==typeof TextDecoder?function H(M){return new TextDecoder("utf-8").decode(M)}(M):function(M){for(var L="",B=0,W=M.length;B<W;B++){var ee=M[B];if(ee<128)L+=String.fromCharCode(ee);else if(192<=ee&&ee<224){var ue=M[++B];L+=String.fromCharCode((31&ee)<<6|63&ue)}else if(240<=ee&&ee<365){var we="%"+[ee,M[++B],M[++B],M[++B]].map(function(ge){return ge.toString(16)}).join("%");L+=decodeURIComponent(we)}else L+=String.fromCharCode((15&ee)<<12|(63&M[++B])<<6|63&M[++B])}return L}(M)}},4920:(He,J,G)=>{var U=G(2533),ie=G(3345),b=ie;b.v1=U,b.v4=ie,He.exports=b},2131:He=>{for(var J=[],G=0;G<256;++G)J[G]=(G+256).toString(16).substr(1);He.exports=function U(ie,b){var H=b||0;return[J[ie[H++]],J[ie[H++]],J[ie[H++]],J[ie[H++]],"-",J[ie[H++]],J[ie[H++]],"-",J[ie[H++]],J[ie[H++]],"-",J[ie[H++]],J[ie[H++]],"-",J[ie[H++]],J[ie[H++]],J[ie[H++]],J[ie[H++]],J[ie[H++]],J[ie[H++]]].join("")}},3088:He=>{var J="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(J){var G=new Uint8Array(16);He.exports=function(){return J(G),G}}else{var U=new Array(16);He.exports=function(){for(var H,b=0;b<16;b++)0==(3&b)&&(H=4294967296*Math.random()),U[b]=H>>>((3&b)<<3)&255;return U}}},2533:(He,J,G)=>{var b,H,U=G(3088),ie=G(2131),X=0,z=0;He.exports=function M(L,B,W){var ee=B&&W||0,ue=B||[],fe=(L=L||{}).node||b,we=void 0!==L.clockseq?L.clockseq:H;if(null==fe||null==we){var ge=U();null==fe&&(fe=b=[1|ge[0],ge[1],ge[2],ge[3],ge[4],ge[5]]),null==we&&(we=H=16383&(ge[6]<<8|ge[7]))}var Ie=void 0!==L.msecs?L.msecs:(new Date).getTime(),Xe=void 0!==L.nsecs?L.nsecs:z+1,pe=Ie-X+(Xe-z)/1e4;if(pe<0&&void 0===L.clockseq&&(we=we+1&16383),(pe<0||Ie>X)&&void 0===L.nsecs&&(Xe=0),Xe>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");X=Ie,z=Xe,H=we;var he=(1e4*(268435455&(Ie+=122192928e5))+Xe)%4294967296;ue[ee++]=he>>>24&255,ue[ee++]=he>>>16&255,ue[ee++]=he>>>8&255,ue[ee++]=255&he;var Te=Ie/4294967296*1e4&268435455;ue[ee++]=Te>>>8&255,ue[ee++]=255&Te,ue[ee++]=Te>>>24&15|16,ue[ee++]=Te>>>16&255,ue[ee++]=we>>>8|128,ue[ee++]=255&we;for(var Fe=0;Fe<6;++Fe)ue[ee+Fe]=fe[Fe];return B||ie(ue)}},3345:(He,J,G)=>{var U=G(3088),ie=G(2131);He.exports=function b(H,X,z){var M=X&&z||0;"string"==typeof H&&(X="binary"===H?new Array(16):null,H=null);var L=(H=H||{}).random||(H.rng||U)();if(L[6]=15&L[6]|64,L[8]=63&L[8]|128,X)for(var B=0;B<16;++B)X[M+B]=L[B];return X||ie(L)}},2521:(He,J,G)=>{"use strict";G.r(J),G.d(J,{locateWindow:()=>ie});var U={};function ie(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:U}},2622:(He,J,G)=>{"use strict";G.r(J),G.d(J,{fromUtf8:()=>X,toUtf8:()=>z});var X=function(M){return"function"==typeof TextEncoder?function b(M){return(new TextEncoder).encode(M)}(M):function(M){for(var L=[],B=0,W=M.length;B<W;B++){var ee=M.charCodeAt(B);if(ee<128)L.push(ee);else if(ee<2048)L.push(ee>>6|192,63&ee|128);else if(B+1<M.length&&55296==(64512&ee)&&56320==(64512&M.charCodeAt(B+1))){var ue=65536+((1023&ee)<<10)+(1023&M.charCodeAt(++B));L.push(ue>>18|240,ue>>12&63|128,ue>>6&63|128,63&ue|128)}else L.push(ee>>12|224,ee>>6&63|128,63&ee|128)}return Uint8Array.from(L)}(M)},z=function(M){return"function"==typeof TextDecoder?function H(M){return new TextDecoder("utf-8").decode(M)}(M):function(M){for(var L="",B=0,W=M.length;B<W;B++){var ee=M[B];if(ee<128)L+=String.fromCharCode(ee);else if(192<=ee&&ee<224){var ue=M[++B];L+=String.fromCharCode((31&ee)<<6|63&ue)}else if(240<=ee&&ee<365){var we="%"+[ee,M[++B],M[++B],M[++B]].map(function(ge){return ge.toString(16)}).join("%");L+=decodeURIComponent(we)}else L+=String.fromCharCode((15&ee)<<12|(63&M[++B])<<6|63&M[++B])}return L}(M)}},1077:He=>{He.exports={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}},8407:(He,J,G)=>{"use strict";var U=G(4208),ie=G(3082),b=G(4703),H=G(9069).EventEmitter,X=G(1077),z=G(5765),M=G(6775);function L(B,W){this._eventEmitter=new H,this.options=b({},this.options,W),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geocoderApi=B}L.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,getItemValue:function(B){return"string"==typeof B?B:B.place_name},render:function(B){if("string"==typeof B){var W=B.split(","),ee=W[0].toLowerCase().indexOf(this.query.toLowerCase()),ue=this.query.length;return'<div class="mapboxgl-ctrl-geocoder--suggestion maplibregl-ctrl-geocoder--suggestion"><svg class="mapboxgl-ctrl-geocoder--suggestion-icon maplibre-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="mapboxgl-ctrl-geocoder--suggestion-info maplibregl-ctrl-geocoder--suggestion-info"><div class="mapboxgl-ctrl-geocoder--suggestion-title maplibregl-ctrl-geocoder--suggestion-title">'+W[0].substring(0,ee)+'<span class="mapboxgl-ctrl-geocoder--suggestion-match maplibregl-ctrl-geocoder--suggestion-match">'+W[0].substring(ee,ee+ue)+"</span>"+W[0].substring(ee+ue)+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address maplibregl-ctrl-geocoder--suggestion-address">'+W.splice(1,W.length).join(",")+"</div></div></div>"}var Ie=B.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--result maplibregl-ctrl-geocoder--result"><svg class="mapboxgl-ctrl-geocoder--result-icon maplibre-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="mapboxgl-ctrl-geocoder--result-title maplibregl-ctrl-geocoder--result-title">'+Ie[0]+'</div><div class="mapboxgl-ctrl-geocoder--result-address maplibregl-ctrl-geocoder--result-address">'+Ie.splice(1,Ie.length).join(",")+"</div></div></div>"},popupRender:function(B){var W=B.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion maplibre-ctrl-geocoder--suggestion popup-suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title maplibre-ctrl-geocoder--suggestion-title popup-suggestion-title">'+W[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address maplibre-ctrl-geocoder--suggestion-address popup-suggestion-address">'+W.splice(1,W.length).join(",")+"</div></div>"},processResults:function(B,W,ee){if(!W||0===W.length)return B;var ue=B.map(function(pe){return pe.place_name}),fe=W.filter(function(pe){return!ue.includes(pe)});if(fe.length+B.length>ee){for(var we=Math.min(fe.length,Math.floor(ee/2));B.length+we<ee;)we++;for(var ge=[],Ie=0;Ie<we;Ie++)ge.push(fe[Ie]);for(var Xe=0;Xe<ee-we;Xe++)ge.push(B[Xe]);return ge}return fe.length>0?fe.concat(B):B},showResultMarkers:!0,debounceSearch:200},addTo:function(B){function W(ue,fe){if(!document.body.contains(fe))throw new Error("Element provided to #addTo() exists, but is not in the DOM");var we=ue.onAdd();fe.appendChild(we)}if(B._controlContainer)B.addControl(this);else if(B instanceof HTMLElement)W(this,B);else{if("string"!=typeof B)throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element");var ee=document.querySelectorAll(B);if(0===ee.length)throw new Error("Element ",B,"not found.");if(ee.length>1)throw new Error("Geocoder can only be added to a single html element");W(this,ee[0])}},onAdd:function(B){if(B&&"string"!=typeof B&&(this._map=B),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);var W=this.container=document.createElement("div");W.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";var ee=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",ie(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);var ue=document.createElement("div");ue.classList.add("mapboxgl-ctrl-geocoder--pin-right","maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button maplibregl-ctrl-geocoder--button";var fe=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(fe),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),ue.appendChild(this._clearEl),ue.appendChild(this._loadingEl),W.appendChild(ee),W.appendChild(this._inputEl),W.appendChild(ue),this._typeahead=new U(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),W},createIcon:function(B,W){var ee=document.createElementNS("http://www.w3.org/2000/svg","svg");if(ee.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+B+" maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+B),ee.setAttribute("viewBox","0 0 18 18"),ee.setAttribute("xml:space","preserve"),ee.setAttribute("width",18),ee.setAttribute("height",18),"innerHTML"in ee)ee.innerHTML=W;else{var ue=document.createElement("div");ue.innerHTML="<svg>"+W.valueOf().toString()+"</svg>",ee.appendChild(ue.firstChild.firstChild)}return ee},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_onPaste:function(B){var W=(B.clipboardData||window.clipboardData).getData("text");W.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(W)},_onKeyDown:function(B){var W=27,ee=9;if(B.keyCode===W&&this.options.clearAndBlurOnEsc)return this._clear(B),this._inputEl.blur();var ue=B.target&&B.target.shadowRoot?B.target.shadowRoot.activeElement:B.target;if(!ue||!ue.value)return this.fresh=!0,B.keyCode!==ee&&this.clear(B),this._clearEl.style.display="none";if(!B.metaKey&&-1===[ee,W,37,39,38,40].indexOf(B.keyCode)){if(13===B.keyCode){if(this.options.showResultsWhileTyping)return void(null==this._typeahead.selected&&this.geocoderApi.getSuggestions?this._geocode(ue.value,!0):null==this._typeahead.selected&&this.options.showResultMarkers&&this._fitBoundsForMarkers());this._typeahead.selected||this._geocode(ue.value)}ue.value.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(ue.value)}},_showButton:function(){this._typeahead.selected&&(this._clearEl.style.display="block")},_hideButton:function(){this._typeahead.selected&&(this._clearEl.style.display="none")},_onBlur:function(B){this.options.clearOnBlur&&this._clearOnBlur(B),this.options.collapsed&&this._collapse()},_onChange:function(){var B=this._typeahead.selected;if(B&&"string"==typeof B)this._geocode(B,!0);else if(B&&JSON.stringify(B)!==this.lastSelected){var W;if(this._clearEl.style.display="none",this.options.flyTo)if(this._removeResultMarkers(),B.properties&&X[B.properties.short_code])W=b({},this.options.flyTo),this._map&&this._map.fitBounds(X[B.properties.short_code].bbox,W);else if(B.bbox){var ee=B.bbox;W=b({},this.options.flyTo),this._map&&this._map.fitBounds([[ee[0],ee[1]],[ee[2],ee[3]]],W)}else W=b({},{zoom:this.options.zoom},this.options.flyTo),B.center?W.center=B.center:B.geometry&&B.geometry.type&&"Point"===B.geometry.type&&B.geometry.coordinates&&(W.center=B.geometry.coordinates),this._map&&this._map.flyTo(W);this.options.marker&&this._maplibregl&&this._handleMarker(B),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(B),this._eventEmitter.emit("result",{result:B})}},_getConfigForRequest:function(){var W=this;return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce(function(ue,fe){return W.options[fe]&&(ue[fe]=["countries","types","language"].indexOf(fe)>-1?W.options[fe].split(/[\s,]+/):W.options[fe],"proximity"===fe&&W.options[fe]&&"number"==typeof W.options[fe].longitude&&"number"==typeof W.options[fe].latitude&&(ue[fe]=[W.options[fe].longitude,W.options[fe].latitude])),ue},{})},_geocode:function(B,W){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:B}),this.inputString=B;var fe,ee=null,ue=this._getConfigForRequest();if(this.options.localGeocoderOnly)fe=Promise.resolve();else if(this.options.reverseGeocode&&/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/.test(B)){var we=B.split(/[\s(,)?]+/).map(function(pe){return parseFloat(pe,10)}).reverse();"proximity"in(ue=b(ue,{query:we,limit:1}))&&delete ue.proximity,fe=this.geocoderApi.reverseGeocode(ue)}else ue=b(ue,{query:B}),fe=this.geocoderApi.forwardGeocode(ue);var ge=[];this.options.localGeocoder&&((ge=this.options.localGeocoder(B))||(ge=[]));var Ie=[];return fe.catch(function(pe){ee=pe}.bind(this)).then(function(pe){this._loadingEl.style.display="none";var he={};return(he=pe||{type:"FeatureCollection",features:[]}).config=ue,this.fresh&&(this.fresh=!1),he.features=he.features?ge.concat(he.features):ge,this.options.externalGeocoder?(Ie=this.options.externalGeocoder(B,he.features,ue)||[]).then(function(Te){return he.features=he.features?Te.concat(he.features):Te,he},function(){return he}):this.geocoderApi.getSuggestions&&!W?(this._getSuggestions(B)||[]).then(function(Te){return Te.length>0&&(he.suggestions=Te),he},function(){return he}):he}.bind(this)).then(function(pe){if(ee)throw ee;if(this.options.filter&&pe.features.length&&(pe.features=pe.features.filter(this.options.filter)),pe.features.length){this._clearEl.style.display="block",this._eventEmitter.emit("results",pe);var he=this.options.processResults(pe.features,pe.suggestions,this.options.limit);this._eventEmitter.emit("processedResults",he),this._typeahead.update(he),(!this.options.showResultsWhileTyping||W)&&this.options.showResultMarkers&&this._fitBoundsForMarkers()}else this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",pe)}.bind(this)).catch(function(pe){this._loadingEl.style.display="none",ge.length&&this.options.localGeocoder||Ie.length&&this.options.externalGeocoder?(this._clearEl.style.display="block",this._typeahead.update(ge)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:ge}),this._eventEmitter.emit("error",{error:pe})}.bind(this)),fe},_getSuggestions:function(B){return new Promise(function(W,ee){this.geocoderApi.getSuggestions||ee(),this._eventEmitter.emit("loadingSuggestions",{query:B});var ue=null,fe=[],we=this._getConfigForRequest();we=b(we,{query:B}),this.geocoderApi.getSuggestions(we).catch(function(Ie){ue=Ie}.bind(this)).then(function(Ie){if(ue)throw ue;Ie.suggestions.length&&(fe=Ie.suggestions),W(fe),this._eventEmitter.emit("resultsSuggestions",Ie)}.bind(this)).catch(function(Ie){this._eventEmitter.emit("error",{error:Ie})}.bind(this))}.bind(this))},_clear:function(B){B&&B.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(B){this._clear(B),this._inputEl.focus()},_clearOnBlur:function(B){B.relatedTarget&&this._clear(B)},_onQueryResult:function(B){if(B.features.length){var ee=B.features[0];this._typeahead.selected=ee,this._inputEl.value=ee.place_name,this._onChange()}},_updateProximity:function(){if(this._map)if(this._map.getZoom()>9){var B=this._map.getCenter().wrap();this.setProximity({longitude:B.lng,latitude:B.lat})}else this.setProximity(null)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed","maplibregl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed","maplibregl-ctrl-geocoder--collapsed")},query:function(B){return this._geocode(B).then(this._onQueryResult),this},_renderError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error maplibre-gl-geocoder--error'>There was an error reaching the server</div>")},_renderNoResults:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>No results found</div>")},_renderMessage:function(B){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(B)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var B=this.options.language.split(",")[0],W=M.language(B),ee=z.placeholder[W];if(ee)return ee}return"Search"},_fitBoundsForMarkers:function(){if(!(this._typeahead.data.length<1)){var B=this._typeahead.data.filter(function(fe){return"string"!=typeof fe}).slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){var ee=b({},{padding:100},this.options.flyTo),ue=new this._maplibregl.LngLatBounds;B.forEach(function(fe){ue.extend(fe.geometry.coordinates)}),this._map.fitBounds(ue,ee)}return B.length>0&&this._maplibregl&&this._handleResultMarkers(B),this}},setInput:function(B){return this._inputEl.value=B,this._typeahead.selected=null,this._typeahead.clear(),B.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(B),this},setProximity:function(B){return this.options.proximity=B,this},getProximity:function(){return this.options.proximity},setRenderFunction:function(B){return B&&"function"==typeof B&&(this._typeahead.render=B),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(B){var W=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=B||this.options.language||W,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(B){return this.options.zoom=B,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(B){return this.options.flyTo=B,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(B){return this.placeholder=B||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(B){return this.options.bbox=B,this},getCountries:function(){return this.options.countries},setCountries:function(B){return this.options.countries=B,this},getTypes:function(){return this.options.types},setTypes:function(B){return this.options.types=B,this},getMinLength:function(){return this.options.minLength},setMinLength:function(B){return this.options.minLength=B,this._typeahead&&(this._typeahead.options.minLength=B),this},getLimit:function(){return this.options.limit},setLimit:function(B){return this.options.limit=B,this._typeahead&&(this._typeahead.options.limit=B),this},getFilter:function(){return this.options.filter},setFilter:function(B){return this.options.filter=B,this},setGeocoderApi:function(B){return this.geocoderApi=B,this},getGeocoderApi:function(){return this.geocoderApi},_handleMarker:function(B){if(this._map){this._removeMarker();var ue,ee=b({},{color:"#4668F2"},this.options.marker);if(this.mapMarker=new this._maplibregl.Marker(ee),this.options.popup){var we=b({},{},this.options.popup);ue=new this._maplibregl.Popup(we).setHTML(this.options.popupRender(B))}return B.center?(this.mapMarker.setLngLat(B.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(ue)):B.geometry&&B.geometry.type&&"Point"===B.geometry.type&&B.geometry.coordinates&&(this.mapMarker.setLngLat(B.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(ue)),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},_handleResultMarkers:function(B){if(this._map){this._removeResultMarkers();var ee=b({},{color:"#4668F2"},this.options.showResultMarkers);return B.forEach(function(ue){if(this.options.showResultMarkers&&this.options.showResultMarkers.element){var fe=this.options.showResultMarkers.element.cloneNode(!0);ee=b(ee,{element:fe})}var ge,we=new this._maplibregl.Marker(b({},ee,{element:fe}));if(this.options.popup){var Xe=b({},{},this.options.popup);ge=new this._maplibregl.Popup(Xe).setHTML(this.options.popupRender(ue))}ue.center?(we.setLngLat(ue.center).addTo(this._map),this.options.popup&&we.setPopup(ge)):ue.geometry&&ue.geometry.type&&"Point"===ue.geometry.type&&ue.geometry.coordinates&&(we.setLngLat(ue.geometry.coordinates).addTo(this._map),this.options.popup&&we.setPopup(ge)),this.resultMarkers.push(we)}.bind(this)),this}},_removeResultMarkers:function(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(B){B.remove()}),this.resultMarkers=[])},on:function(B,W){return this._eventEmitter.on(B,W),this},off:function(B,W){return this._eventEmitter.removeListener(B,W),this}},He.exports=L},5765:He=>{"use strict";He.exports={placeholder:{de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05dc\u05d7\u05e4\u05e9",ja:"\u30b5\u30fc\u30c1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041f\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641c\u7d22",cs:"Vyhled\xe1v\xe1n\xed",hu:"Keres\xe9s",ka:"\u10eb\u10d8\u10d4\u10d1\u10d0",nb:"S\xf8ke",sk:"Vyh\u013ead\xe1vanie",th:"\u0e04\u0e49\u0e19\u0e2b\u0e32",fi:"Hae",is:"Leita",ko:"\uc218\uc0c9",pl:"Szukaj",sl:"Iskanje",fa:"\u062c\u0633\u062a\u062c\u0648",ru:"\u041f\u043e\u0438\u0441\u043a"}}},4580:(He,J,G)=>{"use strict";function U(e){return"function"==typeof e}function ie(e){const t=e(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const b=ie(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function H(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class X{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(U(r))try{r()}catch(o){n=o instanceof b?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{L(o)}catch(a){n=null!=n?n:[],a instanceof b?n=[...n,...a.errors]:n.push(a)}}if(n)throw new b(n)}}add(n){var t;if(n&&n!==this)if(this.closed)L(n);else{if(n instanceof X){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&H(t,n)}remove(n){const{_finalizers:t}=this;t&&H(t,n),n instanceof X&&n._removeParent(this)}}X.EMPTY=(()=>{const e=new X;return e.closed=!0,e})();const z=X.EMPTY;function M(e){return e instanceof X||e&&"closed"in e&&U(e.remove)&&U(e.add)&&U(e.unsubscribe)}function L(e){U(e)?e():e.unsubscribe()}const B={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},W={setTimeout(e,n,...t){const{delegate:r}=W;return(null==r?void 0:r.setTimeout)?r.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){const{delegate:n}=W;return((null==n?void 0:n.clearTimeout)||clearTimeout)(e)},delegate:void 0};function ee(e){W.setTimeout(()=>{const{onUnhandledError:n}=B;if(!n)throw e;n(e)})}function ue(){}const fe=Ie("C",void 0,void 0);function Ie(e,n,t){return{kind:e,value:n,error:t}}let Xe=null;function pe(e){if(B.useDeprecatedSynchronousErrorHandling){const n=!Xe;if(n&&(Xe={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:r}=Xe;if(Xe=null,t)throw r}}else e()}class Te extends X{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,M(n)&&n.add(this)):this.destination=V}static create(n,t,r){return new Ge(n,t,r)}next(n){this.isStopped?N(function ge(e){return Ie("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?N(function we(e){return Ie("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?N(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Fe=Function.prototype.bind;function at(e,n){return Fe.call(e,n)}class Ye{constructor(n){this.partialObserver=n}next(n){const{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(r){P(r)}}error(n){const{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(r){P(r)}else P(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){P(t)}}}class Ge extends Te{constructor(n,t,r){let i;if(super(),U(n)||!n)i={next:null!=n?n:void 0,error:null!=t?t:void 0,complete:null!=r?r:void 0};else{let o;this&&B.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),i={next:n.next&&at(n.next,o),error:n.error&&at(n.error,o),complete:n.complete&&at(n.complete,o)}):i=n}this.destination=new Ye(i)}}function P(e){B.useDeprecatedSynchronousErrorHandling?function he(e){B.useDeprecatedSynchronousErrorHandling&&Xe&&(Xe.errorThrown=!0,Xe.error=e)}(e):ee(e)}function N(e,n){const{onStoppedNotification:t}=B;t&&W.setTimeout(()=>t(e,n))}const V={closed:!0,next:ue,error:function D(e){throw e},complete:ue},Z="function"==typeof Symbol&&Symbol.observable||"@@observable";function j(e){return e}let _t=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function vt(e){return e&&e instanceof Te||function pt(e){return e&&U(e.next)&&U(e.error)&&U(e.complete)}(e)&&M(e)}(t)?t:new Ge(t,r,i);return pe(()=>{const{operator:a,source:u}=this;o.add(a?a.call(o,u):u?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=xe(r))((i,o)=>{const a=new Ge({next:u=>{try{t(u)}catch(d){o(d),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Z](){return this}pipe(...t){return function $e(e){return 0===e.length?j:1===e.length?e[0]:function(t){return e.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=xe(t))((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return e.create=n=>new e(n),e})();function xe(e){var n;return null!==(n=null!=e?e:B.Promise)&&void 0!==n?n:Promise}const We=ie(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let yt=(()=>{class e extends _t{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new Kt(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new We}next(t){pe(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){pe(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){pe(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?z:(this.currentObservers=null,o.push(t),new X(()=>{this.currentObservers=null,H(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new _t;return t.source=this,t}}return e.create=(n,t)=>new Kt(n,t),e})();class Kt extends yt{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,n)}error(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==r?r:z}}function tn(e){return U(null==e?void 0:e.lift)}function Sn(e){return n=>{if(tn(n))return n.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function xt(e,n,t,r,i){return new Cn(e,n,t,r,i)}class Cn extends Te{constructor(n,t,r,i,o,a){super(n),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=t?function(u){try{t(u)}catch(d){n.error(d)}}:super._next,this._error=i?function(u){try{i(u)}catch(d){n.error(d)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(u){n.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function gn(e,n){return Sn((t,r)=>{let i=0;t.subscribe(xt(r,o=>{r.next(e.call(n,o,i++))}))})}var sr=function(e,n){return(sr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])})(e,n)};function Ut(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}sr(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}var K=function(){return K=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},K.apply(this,arguments)};function rr(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}function wt(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}function bt(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}function te(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function ne(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}function Rt(e,n,t){if(t||2===arguments.length)for(var o,r=0,i=n.length;r<i;r++)(o||!(r in n))&&(o||(o=Array.prototype.slice.call(n,0,r)),o[r]=n[r]);return e.concat(o||Array.prototype.slice.call(n))}function Mt(e){return this instanceof Mt?(this.v=e,this):new Mt(e)}function hr(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(e,n||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(m){r[m]&&(i[m]=function(E){return new Promise(function(A,I){o.push([m,E,A,I])>1||u(m,E)})})}function u(m,E){try{!function d(m){m.value instanceof Mt?Promise.resolve(m.value.v).then(l,f):_(o[0][2],m)}(r[m](E))}catch(A){_(o[0][3],A)}}function l(m){u("next",m)}function f(m){u("throw",m)}function _(m,E){m(E),o.shift(),o.length&&u(o[0][0],o[0][1])}}const Tc=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function gu(e){return U(null==e?void 0:e.then)}function vu(e){return U(e[Z])}function Zs(e){return Symbol.asyncIterator&&U(null==e?void 0:e[Symbol.asyncIterator])}function _u(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ui=function Gl(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function oe(e){return U(null==e?void 0:e[ui])}function ce(e){return hr(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:r,done:i}=yield Mt(t.read());if(i)return yield Mt(void 0);yield yield Mt(r)}}finally{t.releaseLock()}})}function ve(e){return U(null==e?void 0:e.getReader)}function Se(e){if(e instanceof _t)return e;if(null!=e){if(vu(e))return function Le(e){return new _t(n=>{const t=e[Z]();if(U(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Tc(e))return function Je(e){return new _t(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(gu(e))return function et(e){return new _t(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,ee)})}(e);if(Zs(e))return Pe(e);if(oe(e))return function Ke(e){return new _t(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(ve(e))return function je(e){return Pe(ce(e))}(e)}throw _u(e)}function Pe(e){return new _t(n=>{(function Dt(e,n){var t,r,i,o;return wt(this,void 0,void 0,function*(){try{for(t=function jr(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=te(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=e[o]&&function(a){return new Promise(function(u,d){!function i(o,a,u,d){Promise.resolve(d).then(function(l){o({value:l,done:u})},a)}(u,d,(a=e[o](a)).done,a.value)})}}}(e);!(r=yield t.next()).done;)if(n.next(r.value),n.closed)return}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function Bt(e,n,t,r=0,i=!1){const o=n.schedule(function(){t(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function Et(e,n,t=1/0){return U(n)?Et((r,i)=>gn((o,a)=>n(r,o,i,a))(Se(e(r,i))),t):("number"==typeof n&&(t=n),Sn((r,i)=>function lt(e,n,t,r,i,o,a,u){const d=[];let l=0,f=0,_=!1;const m=()=>{_&&!d.length&&!l&&n.complete()},E=I=>l<r?A(I):d.push(I),A=I=>{o&&n.next(I),l++;let se=!1;Se(t(I,f++)).subscribe(xt(n,me=>{null==i||i(me),o?E(me):n.next(me)},()=>{se=!0},void 0,()=>{if(se)try{for(l--;d.length&&l<r;){const me=d.shift();a?Bt(n,a,()=>A(me)):A(me)}m()}catch(me){n.error(me)}}))};return e.subscribe(xt(n,E,()=>{_=!0,m()})),()=>{null==u||u()}}(r,i,e,t)))}function Jt(e=1/0){return Et(j,e)}const Ht=new _t(e=>e.complete());function It(e){return e[e.length-1]}function Tn(e){return function qt(e){return e&&U(e.schedule)}(It(e))?e.pop():void 0}function Fr(e,n=0){return Sn((t,r)=>{t.subscribe(xt(r,i=>Bt(r,e,()=>r.next(i),n),()=>Bt(r,e,()=>r.complete(),n),i=>Bt(r,e,()=>r.error(i),n)))})}function $n(e,n=0){return Sn((t,r)=>{r.add(e.schedule(()=>t.subscribe(r),n))})}function li(e,n){if(!e)throw new Error("Iterable cannot be null");return new _t(t=>{Bt(t,n,()=>{const r=e[Symbol.asyncIterator]();Bt(t,n,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Di(e,n){return n?function Kn(e,n){if(null!=e){if(vu(e))return function Xr(e,n){return Se(e).pipe($n(n),Fr(n))}(e,n);if(Tc(e))return function pr(e,n){return new _t(t=>{let r=0;return n.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}(e,n);if(gu(e))return function ei(e,n){return Se(e).pipe($n(n),Fr(n))}(e,n);if(Zs(e))return li(e,n);if(oe(e))return function Vr(e,n){return new _t(t=>{let r;return Bt(t,n,()=>{r=e[ui](),Bt(t,n,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){return void t.error(a)}o?t.complete():t.next(i)},0,!0)}),()=>U(null==r?void 0:r.return)&&r.return()})}(e,n);if(ve(e))return function Gr(e,n){return li(ce(e),n)}(e,n)}throw _u(e)}(e,n):Se(e)}function Rs(e){return e<=0?()=>Ht:Sn((n,t)=>{let r=0;n.subscribe(xt(t,i=>{++r<=e&&(t.next(i),e<=r&&t.complete())}))})}function Ui(e,n,...t){return!0===n?(e(),null):!1===n?null:n(...t).pipe(Rs(1)).subscribe(()=>e())}function ur(e){for(let n in e)if(e[n]===ur)return n;throw Error("Could not find renamed property on target object.")}function Sr(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Sr).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}function Oi(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const Ds=ur({__forward_ref__:ur});function pa(e){return e.__forward_ref__=pa,e.toString=function(){return Sr(this())},e}function dn(e){return function Bo(e){return"function"==typeof e&&e.hasOwnProperty(Ds)&&e.__forward_ref__===pa}(e)?e():e}class Zn extends Error{constructor(n,t){super(function rs(e,n){return`NG0${Math.abs(e)}${n?": "+n:""}`}(n,t)),this.code=n}}function ti(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function Yn(e){return"string"==typeof e?e:null==e?"":String(e)}(e)}function yi(e,n){const t=n?` in ${n}`:"";throw new Zn(-201,`No provider for ${ti(e)} found${t}`)}function jo(e,n){null==e&&function oi(e,n,t,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${t} ${r} ${n} <=Actual]`))}(n,e,null,"!=")}function yr(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Zo(e){return{providers:e.providers||[],imports:e.imports||[]}}function os(e){return Ba(e,Rd)||Ba(e,Dd)}function Ba(e,n){return e.hasOwnProperty(n)?e[n]:null}function Yf(e){return e&&(e.hasOwnProperty(Qf)||e.hasOwnProperty(eh))?e[Qf]:null}const Rd=ur({\u0275prov:ur}),Qf=ur({\u0275inj:ur}),Dd=ur({ngInjectableDef:ur}),eh=ur({ngInjectorDef:ur});var Vn=(()=>((Vn=Vn||{})[Vn.Default=0]="Default",Vn[Vn.Host=1]="Host",Vn[Vn.Self=2]="Self",Vn[Vn.SkipSelf=4]="SkipSelf",Vn[Vn.Optional=8]="Optional",Vn))();let Ac;function Ys(e){const n=Ac;return Ac=e,n}function Sp(e,n,t){const r=os(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Vn.Optional?null:void 0!==n?n:void yi(Sr(e),"Injector")}function za(e){return{toString:e}.toString()}var ja=(()=>((ja=ja||{})[ja.OnPush=0]="OnPush",ja[ja.Default=1]="Default",ja))(),mo=(()=>{return(e=mo||(mo={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",mo;var e})();const bu="undefined"!=typeof globalThis&&globalThis,Yu="undefined"!=typeof window&&window,Qu="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Tr=bu||"undefined"!=typeof global&&global||Yu||Qu,nl={},An=[],Qs=ur({\u0275cmp:ur}),Kl=ur({\u0275dir:ur}),kd=ur({\u0275pipe:ur}),th=ur({\u0275mod:ur}),Os=ur({\u0275fac:ur}),Xl=ur({__NG_ELEMENT_ID__:ur});let dg=0;function as(e){return za(()=>{const t={},r={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===ja.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||An,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||mo.Emulated,id:"c",styles:e.styles||An,_:null,setInput:null,schemas:e.schemas||null,tView:null},i=e.directives,o=e.features,a=e.pipes;return r.id+=dg++,r.inputs=Md(e.inputs,t),r.outputs=Md(e.outputs),o&&o.forEach(u=>u(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(rl):null,r.pipeDefs=a?()=>("function"==typeof a?a():a).map(nh):null,r})}function rl(e){return no(e)||function ks(e){return e[Kl]||null}(e)}function nh(e){return function Cr(e){return e[kd]||null}(e)}const rh={};function eu(e){return za(()=>{const n={type:e.type,bootstrap:e.bootstrap||An,declarations:e.declarations||An,imports:e.imports||An,exports:e.exports||An,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(rh[e.id]=e.type),n})}function Md(e,n){if(null==e)return nl;const t={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,n&&(n[i]=o)}return t}const Mi=as;function no(e){return e[Qs]||null}function Yo(e,n){const t=e[th]||null;if(!t&&!0===n)throw new Error(`Type ${Sr(e)} does not have '\u0275mod' property.`);return t}function ga(e){return Array.isArray(e)&&"object"==typeof e[1]}function qa(e){return Array.isArray(e)&&!0===e[1]}function Oc(e){return 0!=(8&e.flags)}function Pr(e){return 2==(2&e.flags)}function _o(e){return null!==e.template}function Cu(e){return 0!=(512&e[2])}function qi(e,n){return e.hasOwnProperty(Os)?e[Os]:null}class Qt{constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Mc(e){return e.type.prototype.ngOnChanges&&(e.setInput=ta),Ga}function Ga(){const e=ah(this),n=null==e?void 0:e.current;if(n){const t=e.previous;if(t===nl)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function ta(e,n,t,r){const i=ah(e)||function sh(e,n){return e[Nc]=n}(e,{previous:nl,current:null}),o=i.current||(i.current={}),a=i.previous,u=this.declaredInputs[t],d=a[u];o[u]=new Qt(d&&d.currentValue,n,a===nl),e[r]=n}const Nc="__ngSimpleChanges__";function ah(e){return e[Nc]||null}let Er;function ri(e){return!!e.listen}const ls={createRenderer:(e,n)=>function Uo(){return void 0!==Er?Er:"undefined"!=typeof document?document:void 0}()};function Nr(e){for(;Array.isArray(e);)e=e[0];return e}function pi(e,n){return Nr(n[e.index])}function bi(e,n){const t=n[e];return ga(t)?t:t[0]}function ds(e){return 128==(128&e[2])}function di(e,n){return null==n?null:e[n]}function Ud(e){e[18]=0}function fl(e,n){e[5]+=n;let t=e,r=e[3];for(;null!==r&&(1===n&&1===t[5]||-1===n&&0===t[5]);)r[5]+=n,t=r,r=r[3]}const In={lFrame:Qe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function pl(){return In.bindingsEnabled}function Nt(){return In.lFrame.lView}function lr(){return In.lFrame.tView}function Vi(){let e=va();for(;null!==e&&64===e.type;)e=e.parent;return e}function va(){return In.lFrame.currentTNode}function qo(e,n){const t=In.lFrame;t.currentTNode=e,t.isParent=n}function ra(){return In.lFrame.isParent}function ml(){return In.isInCheckNoChangesMode}function p(e){In.isInCheckNoChangesMode=e}function Y(e,n){const t=In.lFrame;t.bindingIndex=t.bindingRootIndex=e,be(n)}function be(e){In.lFrame.currentDirectiveIndex=e}function Ne(e){In.lFrame.currentQueryIndex=e}function ke(e){const n=e[1];return 2===n.type?n.declTNode:1===n.type?e[6]:null}function Ve(e,n,t){if(t&Vn.SkipSelf){let i=n,o=e;for(;!(i=i.parent,null!==i||t&Vn.Host||(i=ke(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;n=i,e=o}const r=In.lFrame=qe();return r.currentTNode=n,r.lView=e,!0}function De(e){const n=qe(),t=e[1];In.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function qe(){const e=In.lFrame,n=null===e?null:e.child;return null===n?Qe(e):n}function Qe(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function rt(){const e=In.lFrame;return In.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const ht=rt;function dt(){const e=rt();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Ot(e){In.lFrame.selectedIndex=e}function Mn(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){const o=e.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:u,ngAfterViewInit:d,ngAfterViewChecked:l,ngOnDestroy:f}=o;a&&(e.contentHooks||(e.contentHooks=[])).push(-t,a),u&&((e.contentHooks||(e.contentHooks=[])).push(t,u),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(t,u)),d&&(e.viewHooks||(e.viewHooks=[])).push(-t,d),l&&((e.viewHooks||(e.viewHooks=[])).push(t,l),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(t,l)),null!=f&&(e.destroyHooks||(e.destroyHooks=[])).push(t,f)}}function Pn(e,n,t){bn(e,n,3,t)}function xn(e,n,t,r){(3&e[2])===t&&bn(e,n,t,r)}function En(e,n){let t=e[2];(3&t)===n&&(t&=2047,t+=1,e[2]=t)}function bn(e,n,t,r){const o=null!=r?r:-1,a=n.length-1;let u=0;for(let d=void 0!==r?65535&e[18]:0;d<a;d++)if("number"==typeof n[d+1]){if(u=n[d],null!=r&&u>=r)break}else n[d]<0&&(e[18]+=65536),(u<o||-1==o)&&(mn(e,t,n,d),e[18]=(4294901760&e[18])+d+2),d++}function mn(e,n,t,r){const i=t[r]<0,o=t[r+1],u=e[i?-t[r]:t[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===n){e[2]+=2048;try{o.call(u)}finally{}}}else try{o.call(u)}finally{}}class ai{constructor(n,t,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Pa(e,n,t){const r=ri(e);let i=0;for(;i<t.length;){const o=t[i];if("number"==typeof o){if(0!==o)break;i++;const a=t[i++],u=t[i++],d=t[i++];r?e.setAttribute(n,u,d,a):n.setAttributeNS(a,u,d)}else{const a=o,u=t[++i];Fc(a)?r&&e.setProperty(n,a,u):r?e.setAttribute(n,a,u):n.setAttribute(a,u),i++}}return i}function _a(e){return 3===e||4===e||6===e}function Fc(e){return 64===e.charCodeAt(0)}function fs(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){const i=n[r];"number"==typeof i?t=i:0===t||gl(e,t,i,null,-1===t||2===t?n[++r]:null)}}return e}function gl(e,n,t,r,i){let o=0,a=e.length;if(-1===n)a=-1;else for(;o<e.length;){const u=e[o++];if("number"==typeof u){if(u===n){a=-1;break}if(u>n){a=o-1;break}}}for(;o<e.length;){const u=e[o];if("number"==typeof u)break;if(u===t){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==a&&(e.splice(a,0,n),o=a+1),e.splice(o++,0,t),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function Ru(e){return-1!==e}function Ls(e){return 32767&e}function aa(e,n){let t=function ec(e){return e>>16}(e),r=n;for(;t>0;)r=r[15],t--;return r}let Du=!0;function xi(e){const n=Du;return Du=e,n}let Ti=0;function Zi(e,n){const t=tc(e,n);if(-1!==t)return t;const r=n[1];r.firstCreatePass&&(e.injectorIndex=n.length,vl(r.data,e),vl(n,null),vl(r.blueprint,null));const i=Vd(e,n),o=e.injectorIndex;if(Ru(i)){const a=Ls(i),u=aa(i,n),d=u[1].data;for(let l=0;l<8;l++)n[o+l]=u[a+l]|d[a+l]}return n[o+8]=i,o}function vl(e,n){e.push(0,0,0,0,0,0,0,0,n)}function tc(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function Vd(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,r=null,i=n;for(;null!==i;){const o=i[1],a=o.type;if(r=2===a?o.declTNode:1===a?i[6]:null,null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function _l(e,n,t){!function Ei(e,n,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Xl)&&(r=t[Xl]),null==r&&(r=t[Xl]=Ti++);const i=255&r;n.data[e+(i>>5)]|=1<<i}(e,n,t)}function dh(e,n,t){if(t&Vn.Optional)return e;yi(n,"NodeInjector")}function nc(e,n,t,r){if(t&Vn.Optional&&void 0===r&&(r=null),0==(t&(Vn.Self|Vn.Host))){const i=e[9],o=Ys(void 0);try{return i?i.get(n,r,t&Vn.Optional):Sp(n,r,t&Vn.Optional)}finally{Ys(o)}}return dh(r,n,t)}function rc(e,n,t,r=Vn.Default,i){if(null!==e){const o=function y_(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(Xl)?e[Xl]:void 0;return"number"==typeof n?n>=0?255&n:mg:n}(t);if("function"==typeof o){if(!Ve(n,e,r))return r&Vn.Host?dh(i,t,r):nc(n,t,r,i);try{const a=o(r);if(null!=a||r&Vn.Optional)return a;yi(t)}finally{ht()}}else if("number"==typeof o){let a=null,u=tc(e,n),d=-1,l=r&Vn.Host?n[16][6]:null;for((-1===u||r&Vn.SkipSelf)&&(d=-1===u?Vd(e,n):n[u+8],-1!==d&&w_(r,!1)?(a=n[1],u=Ls(d),n=aa(d,n)):u=-1);-1!==u;){const f=n[1];if(b_(o,u,f.data)){const _=Uc(u,n,t,a,r,l);if(_!==pg)return _}d=n[u+8],-1!==d&&w_(r,n[1].data[u+8]===l)&&b_(o,u,n)?(a=f,u=Ls(d),n=aa(d,n)):u=-1}}}return nc(n,t,r,i)}const pg={};function mg(){return new Hd(Vi(),Nt())}function Uc(e,n,t,r,i,o){const a=n[1],u=a.data[e+8],f=function wo(e,n,t,r,i){const o=e.providerIndexes,a=n.data,u=1048575&o,d=e.directiveStart,f=o>>20,m=i?u+f:e.directiveEnd;for(let E=r?u:u+f;E<m;E++){const A=a[E];if(E<d&&t===A||E>=d&&A.type===t)return E}if(i){const E=a[d];if(E&&_o(E)&&E.type===t)return d}return null}(u,a,t,null==r?Pr(u)&&Du:r!=a&&0!=(3&u.type),i&Vn.Host&&o===u);return null!==f?fh(n,a,f,u):pg}function fh(e,n,t,r){let i=e[t];const o=n.data;if(function Vo(e){return e instanceof ai}(i)){const a=i;a.resolving&&function wp(e,n){const t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new Zn(-200,`Circular dependency in DI detected for ${e}${t}`)}(ti(o[t]));const u=xi(a.canSeeViewProviders);a.resolving=!0;const d=a.injectImpl?Ys(a.injectImpl):null;Ve(e,r,Vn.Default);try{i=e[t]=a.factory(void 0,o,e,r),n.firstCreatePass&&t>=r.directiveStart&&function Rn(e,n,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=n.type.prototype;if(r){const a=Mc(n);(t.preOrderHooks||(t.preOrderHooks=[])).push(e,a),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,a)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-e,i),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,o))}(t,o[t],n)}finally{null!==d&&Ys(d),xi(u),a.resolving=!1,ht()}}return i}function b_(e,n,t){return!!(t[n+(e>>5)]&1<<e)}function w_(e,n){return!(e&Vn.Self||e&Vn.Host&&n)}class Hd{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return rc(this._tNode,this._lView,n,r,t)}}const qc="__parameters__";function Kd(e,n,t){return za(()=>{const r=function gg(e){return function(...t){if(e){const r=e(...t);for(const i in r)this[i]=r[i]}}}(n);function i(...o){if(this instanceof i)return r.apply(this,o),this;const a=new i(...o);return u.annotation=a,u;function u(d,l,f){const _=d.hasOwnProperty(qc)?d[qc]:Object.defineProperty(d,qc,{value:[]})[qc];for(;_.length<=f;)_.push(null);return(_[f]=_[f]||[]).push(a),d}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class qr{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=yr({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Nw=new qr("AnalyzeForEntryComponents");function Bs(e,n){e.forEach(t=>Array.isArray(t)?Bs(t,n):n(t))}function Ap(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function Rp(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}const Vc={},Gc="__NG_DI_FLAG__",Wa="ngTempTokenPath",qw=/\n/gm,Zd="__source",R_=ur({provide:String,useValue:ur});let gh;function D_(e){const n=gh;return gh=e,n}function Gw(e,n=Vn.Default){if(void 0===gh)throw new Zn(203,"");return null===gh?Sp(e,void 0,n):gh.get(e,n&Vn.Optional?null:void 0,n)}function Hn(e,n=Vn.Default){return(function Ep(){return Ac}()||Gw)(dn(e),n)}const sa=Hn;function xg(e){const n=[];for(let t=0;t<e.length;t++){const r=dn(e[t]);if(Array.isArray(r)){if(0===r.length)throw new Zn(900,"");let i,o=Vn.Default;for(let a=0;a<r.length;a++){const u=r[a],d=O_(u);"number"==typeof d?-1===d?i=u.token:o|=d:i=u}n.push(Hn(i,o))}else n.push(Hn(r))}return n}function Yd(e,n){return e[Gc]=n,e.prototype[Gc]=n,e}function O_(e){return e[Gc]}const Dp=Yd(Kd("Inject",e=>({token:e})),-1),oc=Yd(Kd("Optional"),8),Qd=Yd(Kd("SkipSelf"),4),J_="__ngContext__";function ua(e,n){e[J_]=n}function jp(e){const n=function hf(e){return e[J_]||null}(e);return n?Array.isArray(n)?n:n.lView:null}function qp(e){return e.ngOriginalError}function Wc(e,...n){e.error(...n)}class ou{constructor(){this._console=console}handleError(n){const t=this._findOriginalError(n),r=function zg(e){return e&&e.ngErrorLogger||Wc}(n);r(this._console,"ERROR",n),t&&r(this._console,"ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&qp(n);for(;t&&qp(t);)t=qp(t);return t||null}}const iy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Tr))();function s(e){return e instanceof Function?e():e}var S=(()=>((S=S||{})[S.Important=1]="Important",S[S.DashCase=2]="DashCase",S))();function k(e,n){return undefined(e,n)}function Q(e){const n=e[3];return qa(n)?n[3]:n}function _e(e){return Oe(e[13])}function Ae(e){return Oe(e[4])}function Oe(e){for(;null!==e&&!qa(e);)e=e[4];return e}function Ue(e,n,t,r,i){if(null!=r){let o,a=!1;qa(r)?o=r:ga(r)&&(a=!0,r=r[0]);const u=Nr(r);0===e&&null!==t?null==i?ii(n,t,u):tr(n,t,u,i||null,!0):1===e&&null!==t?tr(n,t,u,i||null,!0):2===e?function Ir(e,n,t){const r=Hr(e,n);r&&function vi(e,n,t,r){ri(e)?e.removeChild(n,t,r):n.removeChild(t)}(e,r,n,t)}(n,u,a):3===e&&n.destroyNode(u),null!=o&&function zi(e,n,t,r,i){const o=t[7];o!==Nr(t)&&Ue(n,e,r,o,i);for(let u=10;u<t.length;u++){const d=t[u];oo(d[1],d,e,n,r,o)}}(n,e,o,t,i)}}function ft(e,n,t){if(ri(e))return e.createElement(n,t);{const r=null!==t?function ci(e){const n=e.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(t):null;return null===r?e.createElement(n):e.createElementNS(r,n)}}function $t(e,n){const t=e[9],r=t.indexOf(n),i=n[3];1024&n[2]&&(n[2]&=-1025,fl(i,-1)),t.splice(r,1)}function Nn(e,n){if(e.length<=10)return;const t=10+n,r=e[t];if(r){const i=r[17];null!==i&&i!==e&&$t(i,r),n>0&&(e[t-1][4]=r[4]);const o=Rp(e,10+n);!function St(e,n){oo(e,n,n[11],2,null,null),n[0]=null,n[6]=null}(r[1],r);const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function _n(e,n){if(!(256&n[2])){const t=n[11];ri(t)&&t.destroyNode&&oo(e,n,t,3,null,null),function an(e){let n=e[13];if(!n)return rn(e[1],e);for(;n;){let t=null;if(ga(n))t=n[13];else{const r=n[10];r&&(t=r)}if(!t){for(;n&&!n[4]&&n!==e;)ga(n)&&rn(n[1],n),n=n[3];null===n&&(n=e),ga(n)&&rn(n[1],n),t=n&&n[4]}n=t}}(n)}}function rn(e,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function kn(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let r=0;r<t.length;r+=2){const i=n[t[r]];if(!(i instanceof ai)){const o=t[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){const u=i[o[a]],d=o[a+1];try{d.call(u)}finally{}}else try{o.call(i)}finally{}}}}(e,n),function Wn(e,n){const t=e.cleanup,r=n[7];let i=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const a=t[o+1],u="function"==typeof a?a(n):Nr(n[a]),d=r[i=t[o+2]],l=t[o+3];"boolean"==typeof l?u.removeEventListener(t[o],d,l):l>=0?r[i=l]():r[i=-l].unsubscribe(),o+=2}else{const a=r[i=t[o+1]];t[o].call(a)}if(null!==r){for(let o=i+1;o<r.length;o++)r[o]();n[7]=null}}(e,n),1===n[1].type&&ri(n[11])&&n[11].destroy();const t=n[17];if(null!==t&&qa(n[3])){t!==n[3]&&$t(t,n);const r=n[19];null!==r&&r.detachView(e)}}}function cr(e,n,t){return function ln(e,n,t){let r=n;for(;null!==r&&40&r.type;)r=(n=r).parent;if(null===r)return t[0];if(2&r.flags){const i=e.data[r.directiveStart].encapsulation;if(i===mo.None||i===mo.Emulated)return null}return pi(r,t)}(e,n.parent,t)}function tr(e,n,t,r,i){ri(e)?e.insertBefore(n,t,r,i):n.insertBefore(t,r,i)}function ii(e,n,t){ri(e)?e.appendChild(n,t):n.appendChild(t)}function gi(e,n,t,r,i){null!==r?tr(e,n,t,r,i):ii(e,n,t)}function Hr(e,n){return ri(e)?e.parentNode(n):n.parentNode}let Eo=function $i(e,n,t){return 40&e.type?pi(e,t):null};function fi(e,n,t,r){const i=cr(e,r,n),o=n[11],u=function Hi(e,n,t){return Eo(e,n,t)}(r.parent||n[6],r,n);if(null!=i)if(Array.isArray(t))for(let d=0;d<t.length;d++)gi(o,i,t[d],u,!1);else gi(o,i,t,u,!1)}function Bi(e,n){if(null!==n){const t=n.type;if(3&t)return pi(n,e);if(4&t)return kr(-1,e[n.index]);if(8&t){const r=n.child;if(null!==r)return Bi(e,r);{const i=e[n.index];return qa(i)?kr(-1,i):Nr(i)}}if(32&t)return k(n,e)()||Nr(e[n.index]);{const r=Qn(e,n);return null!==r?Array.isArray(r)?r[0]:Bi(Q(e[16]),r):Bi(e,n.next)}}return null}function Qn(e,n){return null!==n?e[16][6].projection[n.projection]:null}function kr(e,n){const t=10+e+1;if(t<n.length){const r=n[t],i=r[1].firstChild;if(null!==i)return Bi(r,i)}return n[7]}function dr(e,n,t,r,i,o,a){for(;null!=t;){const u=r[t.index],d=t.type;if(a&&0===n&&(u&&ua(Nr(u),r),t.flags|=4),64!=(64&t.flags))if(8&d)dr(e,n,t.child,r,i,o,!1),Ue(n,e,i,u,o);else if(32&d){const l=k(t,r);let f;for(;f=l();)Ue(n,e,i,f,o);Ue(n,e,i,u,o)}else 16&d?Qr(e,n,r,t,i,o):Ue(n,e,i,u,o);t=a?t.projectionNext:t.next}}function oo(e,n,t,r,i,o){dr(t,r,e.firstChild,n,i,o,!1)}function Qr(e,n,t,r,i,o){const a=t[16],d=a[6].projection[r.projection];if(Array.isArray(d))for(let l=0;l<d.length;l++)Ue(n,e,i,d[l],o);else dr(e,n,d,a[3],i,o,!0)}function _r(e,n,t){ri(e)?e.setAttribute(n,"style",t):n.style.cssText=t}function js(e,n,t){ri(e)?""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t):n.className=t}function Aa(e,n,t){let r=e.length;for(;;){const i=e.indexOf(n,t);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=n.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}t=i+1}}const Ci="ng-template";function Mu(e,n,t){let r=0;for(;r<e.length;){let i=e[r++];if(t&&"class"===i){if(i=e[r],-1!==Aa(i.toLowerCase(),n,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===n)return!0;return!1}}return!1}function gs(e){return 4===e.type&&e.value!==Ci}function mf(e,n,t){return n===(4!==e.type||t?e.value:Ci)}function Zc(e,n,t){let r=4;const i=e.attrs||[],o=function gf(e){for(let n=0;n<e.length;n++)if(_a(e[n]))return n;return e.length}(i);let a=!1;for(let u=0;u<n.length;u++){const d=n[u];if("number"!=typeof d){if(!a)if(4&r){if(r=2|1&r,""!==d&&!mf(e,d,t)||""===d&&1===n.length){if(ba(r))return!1;a=!0}}else{const l=8&r?d:n[++u];if(8&r&&null!==e.attrs){if(!Mu(e.attrs,l,t)){if(ba(r))return!1;a=!0}continue}const _=Tl(8&r?"class":d,i,gs(e),t);if(-1===_){if(ba(r))return!1;a=!0;continue}if(""!==l){let m;m=_>o?"":i[_+1].toLowerCase();const E=8&r?m:null;if(E&&-1!==Aa(E,l,0)||2&r&&l!==m){if(ba(r))return!1;a=!0}}}}else{if(!a&&!ba(r)&&!ba(d))return!1;if(a&&ba(d))continue;a=!1,r=d|1&r}}return ba(r)||a}function ba(e){return 0==(1&e)}function Tl(e,n,t,r){if(null===n)return-1;let i=0;if(r||!t){let o=!1;for(;i<n.length;){const a=n[i];if(a===e)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){let u=n[++i];for(;"string"==typeof u;)u=n[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function Ph(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const r=e[t];if("number"==typeof r)return-1;if(r===n)return t;t++}return-1}(n,e)}function Yc(e,n,t=!1){for(let r=0;r<n.length;r++)if(Zc(e,n[r],t))return!0;return!1}function Ih(e,n){return e?":not("+n.trim()+")":n}function Pl(e){let n=e[0],t=1,r=2,i="",o=!1;for(;t<e.length;){let a=e[t];if("string"==typeof a)if(2&r){const u=e[++t];i+="["+a+(u.length>0?'="'+u+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""!==i&&!ba(a)&&(n+=Ih(o,i),i=""),r=a,o=o||!ba(r);t++}return""!==i&&(n+=Ih(o,i)),n}const Bn={};function Hg(e,n){const t=e.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],o=t[r+1];if(-1!==o){const a=e.data[o];Ne(i),a.contentQueries(2,n[o],o)}}}function rd(e,n,t,r,i,o,a,u,d,l){const f=n.blueprint.slice();return f[0]=i,f[2]=140|r,Ud(f),f[3]=f[15]=e,f[8]=t,f[10]=a||e&&e[10],f[11]=u||e&&e[11],f[12]=d||e&&e[12]||null,f[9]=l||e&&e[9]||null,f[6]=o,f[16]=2==n.type?e[16]:f,f}function fc(e,n,t,r,i){let o=e.data[n];if(null===o)o=function au(e,n,t,r,i){const o=va(),a=ra(),d=e.data[n]=function g1(e,n,t,r,i,o){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,t,n,r,i);return null===e.firstChild&&(e.firstChild=d),null!==o&&(a?null==o.child&&null!==d.parent&&(o.child=d):null===o.next&&(o.next=d)),d}(e,n,t,r,i),function O(){return In.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const a=function Au(){const e=In.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();o.injectorIndex=null===a?-1:a.injectorIndex}return qo(o,!0),o}function id(e,n,t,r){if(0===t)return-1;const i=n.length;for(let o=0;o<t;o++)n.push(r),e.blueprint.push(r),e.data.push(null);return i}function od(e,n,t){De(n);try{const r=e.viewQuery;null!==r&&P1(1,r,t);const i=e.template;null!==i&&Zp(e,n,i,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Hg(e,n),e.staticViewQueries&&P1(2,e.viewQuery,t);const o=e.components;null!==o&&function cy(e,n){for(let t=0;t<n.length;t++)y3(e,n[t])}(n,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[2]&=-5,dt()}}function hc(e,n,t,r){const i=n[2];if(256==(256&i))return;De(n);const o=ml();try{Ud(n),function w(e){return In.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&Zp(e,n,t,2,r);const a=3==(3&i);if(!o)if(a){const l=e.preOrderCheckHooks;null!==l&&Pn(n,l,null)}else{const l=e.preOrderHooks;null!==l&&xn(n,l,0,null),En(n,0)}if(function v3(e){for(let n=_e(e);null!==n;n=Ae(n)){if(!n[2])continue;const t=n[9];for(let r=0;r<t.length;r++){const i=t[r],o=i[3];0==(1024&i[2])&&fl(o,1),i[2]|=1024}}}(n),function g3(e){for(let n=_e(e);null!==n;n=Ae(n))for(let t=10;t<n.length;t++){const r=n[t],i=r[1];ds(r)&&hc(i,r,i.template,r[8])}}(n),null!==e.contentQueries&&Hg(e,n),!o)if(a){const l=e.contentCheckHooks;null!==l&&Pn(n,l)}else{const l=e.contentHooks;null!==l&&xn(n,l,1),En(n,1)}!function uy(e,n){const t=e.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Ot(~i);else{const o=i,a=t[++r],u=t[++r];Y(a,o),u(2,n[o])}}}finally{Ot(-1)}}(e,n);const u=e.components;null!==u&&function ly(e,n){for(let t=0;t<n.length;t++)_3(e,n[t])}(n,u);const d=e.viewQuery;if(null!==d&&P1(2,d,r),!o)if(a){const l=e.viewCheckHooks;null!==l&&Pn(n,l)}else{const l=e.viewHooks;null!==l&&xn(n,l,2),En(n,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),o||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,fl(n[3],-1))}finally{dt()}}function dy(e,n,t,r){const i=n[10],o=!ml(),a=function Pp(e){return 4==(4&e[2])}(n);try{o&&!a&&i.begin&&i.begin(),a&&od(e,n,r),hc(e,n,t,r)}finally{o&&!a&&i.end&&i.end()}}function Zp(e,n,t,r,i){const o=function kt(){return In.lFrame.selectedIndex}(),a=2&r;try{Ot(-1),a&&n.length>20&&function Rh(e,n,t,r){if(!r)if(3==(3&n[2])){const o=e.preOrderCheckHooks;null!==o&&Pn(n,o,t)}else{const o=e.preOrderHooks;null!==o&&xn(n,o,0,t)}Ot(t)}(e,n,20,ml()),t(r,i)}finally{Ot(o)}}function Kg(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=pc(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):n}function pc(e,n,t,r,i,o,a,u,d,l){const f=20+r,_=f+i,m=function fy(e,n){const t=[];for(let r=0;r<n;r++)t.push(r<e?null:Bn);return t}(f,_),E="function"==typeof l?l():l;return m[1]={type:e,blueprint:m,template:t,queries:null,viewQuery:u,declTNode:n,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:d,consts:E,incompleteFirstPass:!1}}function py(e,n,t){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(n,i):t[r]=[n,i]}return t}function tT(e,n,t,r,i,o){const a=o.hostBindings;if(a){let u=e.hostBindingOpCodes;null===u&&(u=e.hostBindingOpCodes=[]);const d=~n.index;(function s3(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(u)!=d&&u.push(d),u.push(r,i,a)}}function nT(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function rT(e,n){n.flags|=2,(e.components||(e.components=[])).push(n.index)}function f3(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;_o(n)&&(t[""]=e)}}function iT(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}function oT(e,n,t,r,i){e.data[r]=i;const o=i.factory||(i.factory=qi(i.type)),a=new ai(o,_o(i),null);e.blueprint[r]=a,t[r]=a,tT(e,n,0,r,id(e,t,i.hostVars,Bn),i)}function h3(e,n,t){const r=pi(n,e),i=Kg(t),o=e[10],a=gy(e,rd(e,i,null,t.onPush?64:16,r,n,o,o.createRenderer(r,t),null,null));e[n.index]=a}function p3(e,n,t,r,i,o){const a=o[n];if(null!==a){const u=r.setInput;for(let d=0;d<a.length;){const l=a[d++],f=a[d++],_=a[d++];null!==u?r.setInput(t,_,l,f):t[f]=_}}}function m3(e,n){let t=null,r=0;for(;r<n.length;){const i=n[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,e[i],n[r+1])),r+=2}else r+=2;else r+=4}return t}function _3(e,n){const t=bi(n,e);if(ds(t)){const r=t[1];80&t[2]?hc(r,t,r.template,t[8]):t[5]>0&&E1(t)}}function E1(e){for(let r=_e(e);null!==r;r=Ae(r))for(let i=10;i<r.length;i++){const o=r[i];if(1024&o[2]){const a=o[1];hc(a,o,a.template,o[8])}else o[5]>0&&E1(o)}const t=e[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=bi(t[r],e);ds(i)&&i[5]>0&&E1(i)}}function y3(e,n){const t=bi(n,e),r=t[1];(function b3(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])})(r,t),od(r,t,t[8])}function gy(e,n){return e[13]?e[14][4]=n:e[13]=n,e[14]=n,n}function T1(e,n,t){const r=n[10];r.begin&&r.begin();try{hc(e,n,e.template,t)}catch(i){throw function dT(e,n){const t=e[9],r=t?t.get(ou,null):null;r&&r.handleError(n)}(n,i),i}finally{r.end&&r.end()}}function sT(e){!function C1(e){for(let n=0;n<e.components.length;n++){const t=e.components[n],r=jp(t),i=r[1];dy(i,r,i.template,t)}}(e[8])}function P1(e,n,t){Ne(0),n(e,t)}const S3=(()=>Promise.resolve(null))();function vy(e,n,t){let r=t?e.styles:null,i=t?e.classes:null,o=0;if(null!==n)for(let a=0;a<n.length;a++){const u=n[a];"number"==typeof u?o=u:1==o?i=Oi(i,u):2==o&&(r=Oi(r,u+": "+n[++a]+";"))}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=i:e.classesWithoutHost=i}const I1=new qr("INJECTOR",-1);class hT{get(n,t=Vc){if(t===Vc){const r=new Error(`NullInjectorError: No provider for ${Sr(n)}!`);throw r.name="NullInjectorError",r}return t}}const A1=new qr("Set Injector scope."),Zg={},P3={};let R1;function pT(){return void 0===R1&&(R1=new hT),R1}function mT(e,n=null,t=null,r){const i=gT(e,n,t,r);return i._resolveInjectorDefTypes(),i}function gT(e,n=null,t=null,r){return new I3(e,t,n||pT(),r)}class I3{constructor(n,t,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const o=[];t&&Bs(t,u=>this.processProvider(u,n,t)),Bs([n],u=>this.processInjectorType(u,[],o)),this.records.set(I1,em(void 0,this));const a=this.records.get(A1);this.scope=null!=a?a.value:null,this.source=i||("object"==typeof n?null:Sr(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,t=Vc,r=Vn.Default){this.assertNotDestroyed();const i=D_(this),o=Ys(void 0);try{if(!(r&Vn.SkipSelf)){let u=this.records.get(n);if(void 0===u){const d=function L3(e){return"function"==typeof e||"object"==typeof e&&e instanceof qr}(n)&&os(n);u=d&&this.injectableDefInScope(d)?em(D1(n),Zg):null,this.records.set(n,u)}if(null!=u)return this.hydrate(n,u)}return(r&Vn.Self?pT():this.parent).get(n,t=r&Vn.Optional&&t===Vc?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Wa]=a[Wa]||[]).unshift(Sr(n)),i)throw a;return function Hw(e,n,t,r){const i=e[Wa];throw n[Zd]&&i.unshift(n[Zd]),e.message=function k_(e,n,t,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=Sr(n);if(Array.isArray(n))i=n.map(Sr).join(" -> ");else if("object"==typeof n){let o=[];for(let a in n)if(n.hasOwnProperty(a)){let u=n[a];o.push(a+":"+("string"==typeof u?JSON.stringify(u):Sr(u)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${e.replace(qw,"\n  ")}`}("\n"+e.message,i,t,r),e.ngTokenPath=i,e[Wa]=null,e}(a,n,"R3InjectorError",this.source)}throw a}finally{Ys(o),D_(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((r,i)=>n.push(Sr(i))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Zn(205,!1)}processInjectorType(n,t,r){if(!(n=dn(n)))return!1;let i=Yf(n);const o=null==i&&n.ngModule||void 0,a=void 0===o?n:o,u=-1!==r.indexOf(a);if(void 0!==o&&(i=Yf(o)),null==i)return!1;if(null!=i.imports&&!u){let f;r.push(a);try{Bs(i.imports,_=>{this.processInjectorType(_,t,r)&&(void 0===f&&(f=[]),f.push(_))})}finally{}if(void 0!==f)for(let _=0;_<f.length;_++){const{ngModule:m,providers:E}=f[_];Bs(E,A=>this.processProvider(A,m,E||An))}}this.injectorDefTypes.add(a);const d=qi(a)||(()=>new a);this.records.set(a,em(d,Zg));const l=i.providers;if(null!=l&&!u){const f=n;Bs(l,_=>this.processProvider(_,f,l))}return void 0!==o&&void 0!==n.providers}processProvider(n,t,r){let i=tm(n=dn(n))?n:dn(n&&n.provide);const o=function R3(e,n,t){return _T(e)?em(void 0,e.useValue):em(function vT(e,n,t){let r;if(tm(e)){const i=dn(e);return qi(i)||D1(i)}if(_T(e))r=()=>dn(e.useValue);else if(function O3(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...xg(e.deps||[]));else if(function D3(e){return!(!e||!e.useExisting)}(e))r=()=>Hn(dn(e.useExisting));else{const i=dn(e&&(e.useClass||e.provide));if(!function M3(e){return!!e.deps}(e))return qi(i)||D1(i);r=()=>new i(...xg(e.deps))}return r}(e),Zg)}(n);if(tm(n)||!0!==n.multi)this.records.get(i);else{let a=this.records.get(i);a||(a=em(void 0,Zg,!0),a.factory=()=>xg(a.multi),this.records.set(i,a)),i=n,a.multi.push(n)}this.records.set(i,o)}hydrate(n,t){return t.value===Zg&&(t.value=P3,t.value=t.factory()),"object"==typeof t.value&&t.value&&function N3(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(n){if(!n.providedIn)return!1;const t=dn(n.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function D1(e){const n=os(e),t=null!==n?n.factory:qi(e);if(null!==t)return t;if(e instanceof qr)throw new Zn(204,!1);if(e instanceof Function)return function A3(e){const n=e.length;if(n>0)throw function wl(e,n){const t=[];for(let r=0;r<e;r++)t.push(n);return t}(n,"?"),new Zn(204,!1);const t=function ki(e){const n=e&&(e[Rd]||e[Dd]);if(n){const t=function Ad(e){if(e.hasOwnProperty("name"))return e.name;const n=(""+e).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),n}return null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new Zn(204,!1)}function em(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function _T(e){return null!==e&&"object"==typeof e&&R_ in e}function tm(e){return"function"==typeof e}let su=(()=>{class e{static create(t,r){var i;if(Array.isArray(t))return mT({name:""},r,t,"");{const o=null!==(i=t.name)&&void 0!==i?i:"";return mT({name:o},t.parent,t.providers,o)}}}return e.THROW_IF_NOT_FOUND=Vc,e.NULL=new hT,e.\u0275prov=yr({token:e,providedIn:"any",factory:()=>Hn(I1)}),e.__NG_ELEMENT_ID__=-1,e})();function G3(e,n){Mn(jp(e)[1],Vi())}function Ln(e,n=Vn.Default){const t=Nt();return null===t?Hn(e,n):rc(Vi(),t,dn(e),n)}function U1(){throw new Error("invalid")}function q1(e,n,t,r,i){const a=i?"class":"style";!function fT(e,n,t,r,i){for(let o=0;o<t.length;){const a=t[o++],u=t[o++],d=n[a],l=e.data[a];null!==l.setInput?l.setInput(d,i,r,u):d[u]=i}}(e,t,n.inputs[a],a,r)}function wy(e,n,t,r){const i=Nt(),o=lr(),a=20+e,u=i[11],d=i[a]=ft(u,n,function en(){return In.lFrame.currentNamespace}()),l=o.firstCreatePass?function SN(e,n,t,r,i,o,a){const u=n.consts,l=fc(n,e,2,i,di(u,o));return function w1(e,n,t,r){let i=!1;if(pl()){const o=function c3(e,n,t){const r=e.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const a=r[o];Yc(t,a.selectors,!1)&&(i||(i=[]),_l(Zi(t,n),e,a.type),_o(a)?(rT(e,t),i.unshift(a)):i.push(a))}return i}(e,n,t),a=null===r?null:{"":-1};if(null!==o){i=!0,iT(t,e.data.length,o.length);for(let f=0;f<o.length;f++){const _=o[f];_.providersResolver&&_.providersResolver(_)}let u=!1,d=!1,l=id(e,n,o.length,null);for(let f=0;f<o.length;f++){const _=o[f];t.mergedAttrs=fs(t.mergedAttrs,_.hostAttrs),oT(e,t,n,l,_),f3(l,_,a),null!==_.contentQueries&&(t.flags|=8),(null!==_.hostBindings||null!==_.hostAttrs||0!==_.hostVars)&&(t.flags|=128);const m=_.type.prototype;!u&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t.index),u=!0),!d&&(m.ngOnChanges||m.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t.index),d=!0),l++}!function v1(e,n){const r=n.directiveEnd,i=e.data,o=n.attrs,a=[];let u=null,d=null;for(let l=n.directiveStart;l<r;l++){const f=i[l],_=f.inputs,m=null===o||gs(n)?null:m3(_,o);a.push(m),u=py(_,l,u),d=py(f.outputs,l,d)}null!==u&&(u.hasOwnProperty("class")&&(n.flags|=16),u.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=a,n.inputs=u,n.outputs=d}(e,t)}a&&function d3(e,n,t){if(n){const r=e.localNames=[];for(let i=0;i<n.length;i+=2){const o=t[n[i+1]];if(null==o)throw new Zn(-301,!1);r.push(n[i],o)}}}(t,r,a)}return t.mergedAttrs=fs(t.mergedAttrs,t.attrs),i}(n,t,l,di(u,a)),null!==l.attrs&&vy(l,l.attrs,!1),null!==l.mergedAttrs&&vy(l,l.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,l),l}(a,o,i,0,n,t,r):o.data[a];qo(l,!0);const f=l.mergedAttrs;null!==f&&Pa(u,d,f);const _=l.classes;null!==_&&js(u,d,_);const m=l.styles;return null!==m&&_r(u,d,m),64!=(64&l.flags)&&fi(o,i,d,l),0===function qd(){return In.lFrame.elementDepthCount}()&&ua(d,i),function hl(){In.lFrame.elementDepthCount++}(),function ul(e){return 1==(1&e.flags)}(l)&&(function Yp(e,n,t){!pl()||(function u3(e,n,t,r){const i=t.directiveStart,o=t.directiveEnd;e.firstCreatePass||Zi(t,n),ua(r,n);const a=t.initialInputs;for(let u=i;u<o;u++){const d=e.data[u],l=_o(d);l&&h3(n,t,d);const f=fh(n,e,u,t);ua(f,n),null!==a&&p3(0,u-i,f,d,0,a),l&&(bi(t.index,n)[8]=f)}}(e,n,t,pi(t,n)),128==(128&t.flags)&&function l3(e,n,t){const r=t.directiveStart,i=t.directiveEnd,a=t.index,u=function ae(){return In.lFrame.currentDirectiveIndex}();try{Ot(a);for(let d=r;d<i;d++){const l=e.data[d],f=n[d];be(d),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&nT(l,f)}}finally{Ot(-1),be(u)}}(e,n,t))}(o,i,l),function $g(e,n,t){if(Oc(n)){const i=n.directiveEnd;for(let o=n.directiveStart;o<i;o++){const a=e.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}}(o,l,i)),null!==r&&function jh(e,n,t=pi){const r=n.localNames;if(null!==r){let i=n.index+1;for(let o=0;o<r.length;o+=2){const a=r[o+1],u=-1===a?t(n,e):e[a];e[i++]=u}}}(i,l),wy}function ev(){let e=Vi();ra()?function zc(){In.lFrame.isParent=!1}():(e=e.parent,qo(e,!1));const n=e;!function nu(){In.lFrame.elementDepthCount--}();const t=lr();return t.firstCreatePass&&(Mn(t,e),Oc(e)&&t.queries.elementEnd(e)),null!=n.classesWithoutHost&&function bo(e){return 0!=(16&e.flags)}(n)&&q1(t,n,Nt(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function Ns(e){return 0!=(32&e.flags)}(n)&&q1(t,n,Nt(),n.stylesWithoutHost,!1),ev}function xy(e,n,t,r){return wy(e,n,t,r),ev(),xy}function Ey(e){return!!e&&"function"==typeof e.then}const eP=function QT(e){return!!e&&"function"==typeof e.subscribe};function IP(e,n=""){const t=Nt(),r=lr(),i=e+20,o=r.firstCreatePass?fc(r,i,1,n,null):r.data[i],a=t[i]=function nt(e,n){return ri(e)?e.createText(n):e.createTextNode(n)}(t[11],n);fi(r,t,a,o),qo(o,!1)}const Ty="en-US";let ZP=Ty;class xI{}class _B{resolveComponentFactory(n){throw function vB(e){const n=Error(`No component factory found for ${Sr(e)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=e,n}(n)}}let av=(()=>{class e{}return e.NULL=new _B,e})();function yB(){return gm(Vi(),Nt())}function gm(e,n){return new Cf(pi(e,n))}let Cf=(()=>{class e{constructor(t){this.nativeElement=t}}return e.__NG_ELEMENT_ID__=yB,e})();class SI{}let EB=(()=>{class e{}return e.\u0275prov=yr({token:e,providedIn:"root",factory:()=>null}),e})();class Oy{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const SB=new Oy("13.3.4"),tx={};function ky(e,n,t,r,i=!1){for(;null!==t;){const o=n[t.index];if(null!==o&&r.push(Nr(o)),qa(o))for(let u=10;u<o.length;u++){const d=o[u],l=d[1].firstChild;null!==l&&ky(d[1],d,l,r)}const a=t.type;if(8&a)ky(e,n,t.child,r);else if(32&a){const u=k(t,n);let d;for(;d=u();)r.push(d)}else if(16&a){const u=Qn(n,t);if(Array.isArray(u))r.push(...u);else{const d=Q(n[16]);ky(d[1],d,u,r,!0)}}t=i?t.projectionNext:t.next}return r}class sv{constructor(n,t){this._lView=n,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,t=n[1];return ky(t,n,t.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(qa(n)){const t=n[8],r=t?t.indexOf(this):-1;r>-1&&(Nn(n,r),Rp(t,r))}this._attachedToViewContainer=!1}_n(this._lView[1],this._lView)}onDestroy(n){!function hy(e,n,t,r){const i=function uT(e){return e[7]||(e[7]=[])}(n);null===t?i.push(r):(i.push(t),e.firstCreatePass&&function lT(e){return e.cleanup||(e.cleanup=[])}(e).push(r,i.length-1))}(this._lView[1],this._lView,null,n)}markForCheck(){!function S1(e){for(;e;){e[2]|=64;const n=Q(e);if(Cu(e)&&!n)return e;e=n}return null}(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){T1(this._lView[1],this._lView,this.context)}checkNoChanges(){!function x3(e,n,t){p(!0);try{T1(e,n,t)}finally{p(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Zn(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ft(e,n){oo(e,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Zn(902,"");this._appRef=n}}class CB extends sv{constructor(n){super(n),this._view=n}detectChanges(){sT(this._view)}checkNoChanges(){!function E3(e){p(!0);try{sT(e)}finally{p(!1)}}(this._view)}get context(){return null}}class CI extends av{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=no(n);return new nx(t,this.ngModule)}}function TI(e){const n=[];for(let t in e)e.hasOwnProperty(t)&&n.push({propName:e[t],templateName:t});return n}class nx extends xI{constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function Ah(e){return e.map(Pl).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return TI(this.componentDef.inputs)}get outputs(){return TI(this.componentDef.outputs)}create(n,t,r,i){const o=(i=i||this.ngModule)?function PB(e,n){return{get:(t,r,i)=>{const o=e.get(t,tx,i);return o!==tx||r===tx?o:n.get(t,r,i)}}}(n,i.injector):n,a=o.get(SI,ls),u=o.get(EB,null),d=a.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",f=r?function Xg(e,n,t){if(ri(e))return e.selectRootElement(n,t===mo.ShadowDom);let r="string"==typeof n?e.querySelector(n):n;return r.textContent="",r}(d,r,this.componentDef.encapsulation):ft(a.createRenderer(null,this.componentDef),l,function TB(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(l)),_=this.componentDef.onPush?576:528,m=function AT(e,n){return{components:[],scheduler:e||iy,clean:S3,playerHandler:n||null,flags:0}}(),E=pc(0,null,null,1,0,null,null,null,null,null),A=rd(null,E,m,_,null,null,a,d,u,o);let I,se;De(A);try{const me=function PT(e,n,t,r,i,o){const a=t[1];t[20]=e;const d=fc(a,20,2,"#host",null),l=d.mergedAttrs=n.hostAttrs;null!==l&&(vy(d,l,!0),null!==e&&(Pa(i,e,l),null!==d.classes&&js(i,e,d.classes),null!==d.styles&&_r(i,e,d.styles)));const f=r.createRenderer(e,n),_=rd(t,Kg(n),null,n.onPush?64:16,t[20],d,r,f,o||null,null);return a.firstCreatePass&&(_l(Zi(d,t),a,n.type),rT(a,d),iT(d,t.length,1)),gy(t,_),t[20]=_}(f,this.componentDef,A,a,d);if(f)if(r)Pa(d,f,["ng-version",SB.full]);else{const{attrs:Re,classes:it}=function vf(e){const n=[],t=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&n.push(o,e[++r]):8===i&&t.push(o);else{if(!ba(i))break;i=o}r++}return{attrs:n,classes:t}}(this.componentDef.selectors[0]);Re&&Pa(d,f,Re),it&&it.length>0&&js(d,f,it.join(" "))}if(se=function cs(e,n){return e.data[n]}(E,20),void 0!==t){const Re=se.projection=[];for(let it=0;it<this.ngContentSelectors.length;it++){const gt=t[it];Re.push(null!=gt?Array.from(gt):null)}}I=function IT(e,n,t,r,i){const o=t[1],a=function my(e,n,t){const r=Vi();e.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),oT(e,r,n,id(e,n,1,null),t));const i=fh(n,e,r.directiveStart,r);ua(i,n);const o=pi(r,n);return o&&ua(o,n),i}(o,t,n);if(r.components.push(a),e[8]=a,i&&i.forEach(d=>d(a,n)),n.contentQueries){const d=Vi();n.contentQueries(1,a,d.directiveStart)}const u=Vi();return!o.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(Ot(u.index),tT(t[1],u,0,u.directiveStart,u.directiveEnd,n),nT(n,a)),a}(me,this.componentDef,A,m,[G3]),od(E,A,null)}finally{dt()}return new AB(this.componentType,I,gm(se,A),A,se)}}class AB extends class gB{}{constructor(n,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new CB(i),this.componentType=n}get injector(){return new Hd(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}class sd{}class PI{}const vm=new Map;class RI extends sd{constructor(n,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new CI(this);const r=Yo(n);this._bootstrapComponents=s(r.bootstrap),this._r3Injector=gT(n,t,[{provide:sd,useValue:this},{provide:av,useValue:this.componentFactoryResolver}],Sr(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,t=su.THROW_IF_NOT_FOUND,r=Vn.Default){return n===su||n===sd||n===I1?this:this._r3Injector.get(n,t,r)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class rx extends PI{constructor(n){super(),this.moduleType=n,null!==Yo(n)&&function DB(e){const n=new Set;!function t(r){const i=Yo(r,!0),o=i.id;null!==o&&(function II(e,n,t){if(n&&n!==t)throw new Error(`Duplicate module registered for ${e} - ${Sr(n)} vs ${Sr(n.name)}`)}(o,vm.get(o),r),vm.set(o,r));const a=s(i.imports);for(const u of a)n.has(u)||(n.add(u),t(u))}(e)}(n)}create(n){return new RI(this.moduleType,n)}}function ix(e){return n=>{setTimeout(e,void 0,n)}}const ws=class WB extends yt{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,t,r){var i,o,a;let u=n,d=t||(()=>null),l=r;if(n&&"object"==typeof n){const _=n;u=null===(i=_.next)||void 0===i?void 0:i.bind(_),d=null===(o=_.error)||void 0===o?void 0:o.bind(_),l=null===(a=_.complete)||void 0===a?void 0:a.bind(_)}this.__isAsync&&(d=ix(d),u&&(u=ix(u)),l&&(l=ix(l)));const f=super.subscribe({next:u,error:d,complete:l});return n instanceof X&&n.add(f),f}};Symbol;let Ml=(()=>{class e{}return e.__NG_ELEMENT_ID__=ez,e})();function ez(){return function zI(e,n){let t;const r=n[e.index];if(qa(r))t=r;else{let i;if(8&e.type)i=Nr(r);else{const o=n[11];i=o.createComment("");const a=pi(e,n);tr(o,Hr(o,a),i,function Si(e,n){return ri(e)?e.nextSibling(n):n.nextSibling}(o,a),!1)}n[e.index]=t=function aT(e,n,t,r){return new Array(e,!0,!1,n,null,0,r,t,null,null)}(r,n,i,e),gy(n,t)}return new LI(t,e,n)}(Vi(),Nt())}const tz=Ml,LI=class extends tz{constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return gm(this._hostTNode,this._hostLView)}get injector(){return new Hd(this._hostTNode,this._hostLView)}get parentInjector(){const n=Vd(this._hostTNode,this._hostLView);if(Ru(n)){const t=aa(n,this._hostLView),r=Ls(n);return new Hd(t[1].data[r+8],t)}return new Hd(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=BI(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,t,r){const i=n.createEmbeddedView(t||{});return this.insert(i,r),i}createComponent(n,t,r,i,o){const a=n&&!function bl(e){return"function"==typeof e}(n);let u;if(a)u=t;else{const _=t||{};u=_.index,r=_.injector,i=_.projectableNodes,o=_.ngModuleRef}const d=a?n:new nx(no(n)),l=r||this.parentInjector;if(!o&&null==d.ngModule){const m=(a?l:this.parentInjector).get(sd,null);m&&(o=m)}const f=d.create(l,i,void 0,o);return this.insert(f.hostView,u),f}insert(n,t){const r=n._lView,i=r[1];if(function Zr(e){return qa(e[3])}(r)){const f=this.indexOf(n);if(-1!==f)this.detach(f);else{const _=r[3],m=new LI(_,_[6],_[3]);m.detach(m.indexOf(n))}}const o=this._adjustIndex(t),a=this._lContainer;!function Gt(e,n,t,r){const i=10+r,o=t.length;r>0&&(t[i-1][4]=n),r<o-10?(n[4]=t[i],Ap(t,10+r,n)):(t.push(n),n[4]=null),n[3]=t;const a=n[17];null!==a&&t!==a&&function un(e,n){const t=e[9];n[16]!==n[3][3][16]&&(e[2]=!0),null===t?e[9]=[n]:t.push(n)}(a,n);const u=n[19];null!==u&&u.insertView(e),n[2]|=128}(i,r,a,o);const u=kr(o,a),d=r[11],l=Hr(d,a[7]);return null!==l&&function zt(e,n,t,r,i,o){r[0]=i,r[6]=n,oo(e,r,t,1,i,o)}(i,a[6],d,r,l,u),n.attachToViewContainerRef(),Ap(ax(a),o,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=BI(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),r=Nn(this._lContainer,t);r&&(Rp(ax(this._lContainer),t),_n(r[1],r))}detach(n){const t=this._adjustIndex(n,-1),r=Nn(this._lContainer,t);return r&&null!=Rp(ax(this._lContainer),t)?new sv(r):null}_adjustIndex(n,t=0){return null==n?this.length+t:n}};function BI(e){return e[8]}function ax(e){return e[8]||(e[8]=[])}function By(...e){}const bx=new qr("Application Initializer");let wx=(()=>{class e{constructor(t){this.appInits=t,this.resolve=By,this.reject=By,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Ey(o))t.push(o);else if(eP(o)){const a=new Promise((u,d)=>{o.subscribe({complete:u,error:d})});t.push(a)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Hn(bx,8))},e.\u0275prov=yr({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const dv=new qr("AppId",{providedIn:"root",factory:function aA(){return`${xx()}${xx()}${xx()}`}});function xx(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const sA=new qr("Platform Initializer"),uA=new qr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),lA=new qr("appBootstrapListener");let Iz=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yr({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Tf=new qr("LocaleId",{providedIn:"root",factory:()=>sa(Tf,Vn.Optional|Vn.SkipSelf)||function Az(){return"undefined"!=typeof $localize&&$localize.locale||Ty}()});class Dz{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}}let cA=(()=>{class e{compileModuleSync(t){return new rx(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=s(Yo(t).declarations).reduce((a,u)=>{const d=no(u);return d&&a.push(new nx(d)),a},[]);return new Dz(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yr({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const kz=(()=>Promise.resolve(0))();function Ex(e){"undefined"==typeof Zone?kz.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Da{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ws(!1),this.onMicrotaskEmpty=new ws(!1),this.onStable=new ws(!1),this.onError=new ws(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function Mz(){let e=Tr.requestAnimationFrame,n=Tr.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&n){const t=e[Zone.__symbol__("OriginalDelegate")];t&&(e=t);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function Bz(e){const n=()=>{!function Lz(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Tr,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Cx(e),e.isCheckStableRunning=!0,Sx(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Cx(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,a,u)=>{try{return dA(e),t.invokeTask(i,o,a,u)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&n(),fA(e)}},onInvoke:(t,r,i,o,a,u,d)=>{try{return dA(e),t.invoke(i,o,a,u,d)}finally{e.shouldCoalesceRunChangeDetection&&n(),fA(e)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,Cx(e),Sx(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Da.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Da.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,i){const o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,n,Nz,By,By);try{return o.runTask(a,t,r)}finally{o.cancelTask(a)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}}const Nz={};function Sx(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Cx(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function dA(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function fA(e){e._nesting--,Sx(e)}class zz{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ws,this.onMicrotaskEmpty=new ws,this.onStable=new ws,this.onError=new ws}run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,i){return n.apply(t,r)}}let Tx=(()=>{class e{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Da.assertNotInAngularZone(),Ex(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ex(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,r,i){return[]}}return e.\u0275fac=function(t){return new(t||e)(Hn(Da))},e.\u0275prov=yr({token:e,factory:e.\u0275fac}),e})(),jz=(()=>{class e{constructor(){this._applications=new Map,Px.addToWindow(this)}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Px.findTestabilityInTree(this,t,r)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yr({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();class Fz{addToWindow(n){}findTestabilityInTree(n,t,r){return null}}let Px=new Fz,Vh=null;const hA=new qr("AllowMultipleToken"),pA=new qr("PlatformOnDestroy");class mA{constructor(n,t){this.name=n,this.token=t}}function gA(e,n,t=[]){const r=`Platform: ${n}`,i=new qr(r);return(o=[])=>{let a=Ix();if(!a||a.injector.get(hA,!1)){const u=[...t,...o,{provide:i,useValue:!0}];e?e(u):function Gz(e){if(Vh&&!Vh.get(hA,!1))throw new Zn(400,"");Vh=e;const n=e.get(vA),t=e.get(sA,null);t&&t.forEach(r=>r())}(function $z(e=[],n){return su.create({name:n,providers:[{provide:A1,useValue:"platform"},{provide:pA,useValue:()=>Vh=null},...e]})}(u,r))}return function Hz(e){const n=Ix();if(!n)throw new Zn(401,"");return n}()}}function Ix(){var e;return null!==(e=null==Vh?void 0:Vh.get(vA))&&void 0!==e?e:null}let vA=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const u=function Kz(e,n){let t;return t="noop"===e?new zz:("zone.js"===e?void 0:e)||new Da({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),t}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),d=[{provide:Da,useValue:u}];return u.run(()=>{const l=su.create({providers:d,parent:this.injector,name:t.moduleType.name}),f=t.create(l),_=f.injector.get(ou,null);if(!_)throw new Zn(402,"");return u.runOutsideAngular(()=>{const m=u.onError.subscribe({next:E=>{_.handleError(E)}});f.onDestroy(()=>{Rx(this._modules,f),m.unsubscribe()})}),function Xz(e,n,t){try{const r=t();return Ey(r)?r.catch(i=>{throw n.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>e.handleError(r)),r}}(_,u,()=>{const m=f.injector.get(wx);return m.runInitializers(),m.donePromise.then(()=>(function bL(e){jo(e,"Expected localeId to be defined"),"string"==typeof e&&(ZP=e.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Tf,Ty)||Ty),this._moduleDoBootstrap(f),f))})})}bootstrapModule(t,r=[]){const i=_A({},r);return function qz(e,n,t){const r=new rx(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(Ax);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new Zn(403,"");t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Zn(404,"");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(pA,null);null==t||t(),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Hn(su))},e.\u0275prov=yr({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function _A(e,n){return Array.isArray(n)?n.reduce(_A,e):Object.assign(Object.assign({},e),n)}let Ax=(()=>{class e{constructor(t,r,i,o){this._zone=t,this._injector=r,this._exceptionHandler=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new _t(d=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{d.next(this._stable),d.complete()})}),u=new _t(d=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{Da.assertNotInAngularZone(),Ex(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,d.next(!0))})})});const f=this._zone.onUnstable.subscribe(()=>{Da.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{d.next(!1)}))});return()=>{l.unsubscribe(),f.unsubscribe()}});this.isStable=function ir(...e){const n=Tn(e),t=function nn(e,n){return"number"==typeof It(e)?e.pop():n}(e,1/0),r=e;return r.length?1===r.length?Se(r[0]):Jt(t)(Di(r,n)):Ht}(a,u.pipe(function Pd(e={}){const{connector:n=(()=>new yt),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let a=null,u=null,d=null,l=0,f=!1,_=!1;const m=()=>{null==u||u.unsubscribe(),u=null},E=()=>{m(),a=d=null,f=_=!1},A=()=>{const I=a;E(),null==I||I.unsubscribe()};return Sn((I,se)=>{l++,!_&&!f&&m();const me=d=null!=d?d:n();se.add(()=>{l--,0===l&&!_&&!f&&(u=Ui(A,i))}),me.subscribe(se),a||(a=new Ge({next:Re=>me.next(Re),error:Re=>{_=!0,m(),u=Ui(E,t,Re),me.error(Re)},complete:()=>{f=!0,m(),u=Ui(E,r),me.complete()}}),Di(I).subscribe(a))})(o)}}()))}bootstrap(t,r){if(!this._initStatus.done)throw new Zn(405,"");let i;i=t instanceof xI?t:this._injector.get(av).resolveComponentFactory(t),this.componentTypes.push(i.componentType);const o=function Vz(e){return e.isBoundToModule}(i)?void 0:this._injector.get(sd),u=i.create(su.NULL,[],r||i.selector,o),d=u.location.nativeElement,l=u.injector.get(Tx,null),f=l&&u.injector.get(jz);return l&&f&&f.registerApplication(d,l),u.onDestroy(()=>{this.detachView(u.hostView),Rx(this.components,u),f&&f.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new Zn(101,"");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Rx(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(lA,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(Hn(Da),Hn(su),Hn(ou),Hn(wx))},e.\u0275prov=yr({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Rx(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}let bA=!0,Dx=(()=>{class e{}return e.__NG_ELEMENT_ID__=Zz,e})();function Zz(e){return function Yz(e,n,t){if(Pr(e)&&!t){const r=bi(e.index,n);return new sv(r,r)}return 47&e.type?new sv(n[16],n):null}(Vi(),Nt(),16==(16&e))}const d4=gA(null,"core",[]);let f4=(()=>{class e{constructor(t){}}return e.\u0275fac=function(t){return new(t||e)(Hn(Ax))},e.\u0275mod=eu({type:e}),e.\u0275inj=Zo({}),e})(),Uy=null;function Pf(){return Uy}const Bu=new qr("DocumentToken");let Hh=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yr({token:e,factory:function(){return function g4(){return Hn(DA)}()},providedIn:"platform"}),e})();const v4=new qr("Location Initialized");let DA=(()=>{class e extends Hh{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pf().getBaseHref(this._doc)}onPopState(t){const r=Pf().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Pf().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){OA()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){OA()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(Hn(Bu))},e.\u0275prov=yr({token:e,factory:function(){return function _4(){return new DA(Hn(Bu))}()},providedIn:"platform"}),e})();function OA(){return!!window.history.pushState}function Lx(e,n){if(0==e.length)return n;if(0==n.length)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n}function kA(e){const n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)}function ld(e){return e&&"?"!==e[0]?"?"+e:e}let ym=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yr({token:e,factory:function(){return function y4(e){const n=Hn(Bu).location;return new MA(Hn(Hh),n&&n.origin||"")}()},providedIn:"root"}),e})();const Bx=new qr("appBaseHref");let MA=(()=>{class e extends ym{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Lx(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ld(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const a=this.prepareExternalUrl(i+ld(o));this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){const a=this.prepareExternalUrl(i+ld(o));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return e.\u0275fac=function(t){return new(t||e)(Hn(Hh),Hn(Bx,8))},e.\u0275prov=yr({token:e,factory:e.\u0275fac}),e})(),b4=(()=>{class e extends ym{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Lx(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let a=this.prepareExternalUrl(i+ld(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){let a=this.prepareExternalUrl(i+ld(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return e.\u0275fac=function(t){return new(t||e)(Hn(Hh),Hn(Bx,8))},e.\u0275prov=yr({token:e,factory:e.\u0275fac}),e})(),zx=(()=>{class e{constructor(t,r){this._subject=new ws,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=kA(NA(i)),this._platformStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ld(r))}normalize(t){return e.stripTrailingSlash(function x4(e,n){return e&&n.startsWith(e)?n.substring(e.length):n}(this._baseHref,NA(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ld(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ld(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return e.normalizeQueryParams=ld,e.joinWithSlash=Lx,e.stripTrailingSlash=kA,e.\u0275fac=function(t){return new(t||e)(Hn(ym),Hn(Hh))},e.\u0275prov=yr({token:e,factory:function(){return function w4(){return new zx(Hn(ym),Hn(Hh))}()},providedIn:"root"}),e})();function NA(e){return e.replace(/\/index.html$/,"")}let zj=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=eu({type:e}),e.\u0275inj=Zo({}),e})();let qj=(()=>{class e{}return e.\u0275prov=yr({token:e,providedIn:"root",factory:()=>new Vj(Hn(Bu),window)}),e})();class Vj{constructor(n,t){this.document=n,this.window=t,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const t=function Gj(e,n){const t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const a=o.getElementById(n)||o.querySelector(`[name="${n}"]`);if(a)return a}i=r.nextNode()}}return null}(this.document,n);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=n)}}scrollToElement(n){const t=n.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=WA(this.window.history)||WA(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch(n){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(n){return!1}}}function WA(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class Yx extends class $j extends class m4{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function p4(e){Uy||(Uy=e)}(new Yx)}onAndCancel(n,t,r){return n.addEventListener(t,r,!1),()=>{n.removeEventListener(t,r,!1)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function Kj(){return mv=mv||document.querySelector("base"),mv?mv.getAttribute("href"):null}();return null==t?null:function Xj(e){Zy=Zy||document.createElement("a"),Zy.setAttribute("href",e);const n=Zy.pathname;return"/"===n.charAt(0)?n:`/${n}`}(t)}resetBaseElement(){mv=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function oj(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===n)return decodeURIComponent(o)}return null}(document.cookie,n)}}let Zy,mv=null;const JA=new qr("TRANSITION_ID"),Jj=[{provide:bx,useFactory:function Wj(e,n,t){return()=>{t.get(wx).donePromise.then(()=>{const r=Pf(),i=n.querySelectorAll(`style[ng-transition="${e}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[JA,Bu,su],multi:!0}];class Qx{static init(){!function Uz(e){Px=e}(new Qx)}addToWindow(n){Tr.getAngularTestability=(r,i=!0)=>{const o=n.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},Tr.getAllAngularTestabilities=()=>n.getAllTestabilities(),Tr.getAllAngularRootElements=()=>n.getAllRootElements(),Tr.frameworkStabilizers||(Tr.frameworkStabilizers=[]),Tr.frameworkStabilizers.push(r=>{const i=Tr.getAllAngularTestabilities();let o=i.length,a=!1;const u=function(d){a=a||d,o--,0==o&&r(a)};i.forEach(function(d){d.whenStable(u)})})}findTestabilityInTree(n,t,r){if(null==t)return null;const i=n.getTestability(t);return null!=i?i:r?Pf().isShadowRoot(t)?this.findTestabilityInTree(n,t.host,!0):this.findTestabilityInTree(n,t.parentElement,!0):null}}let Zj=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yr({token:e,factory:e.\u0275fac}),e})();const Yy=new qr("EventManagerPlugins");let Qy=(()=>{class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const a=i[o];if(a.supports(t))return this._eventNameToPlugin.set(t,a),a}throw new Error(`No event manager plugin found for event ${t}`)}}return e.\u0275fac=function(t){return new(t||e)(Hn(Yy),Hn(Da))},e.\u0275prov=yr({token:e,factory:e.\u0275fac}),e})();class ZA{constructor(n){this._doc=n}addGlobalEventListener(n,t,r){const i=Pf().getGlobalEventTarget(this._doc,n);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let YA=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yr({token:e,factory:e.\u0275fac}),e})(),gv=(()=>{class e extends YA{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const a=this._doc.createElement("style");a.textContent=o,i.push(r.appendChild(a))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(QA),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(QA))}}return e.\u0275fac=function(t){return new(t||e)(Hn(Bu))},e.\u0275prov=yr({token:e,factory:e.\u0275fac}),e})();function QA(e){Pf().remove(e)}const eE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},tE=/%COMP%/g;function e0(e,n,t){for(let r=0;r<n.length;r++){let i=n[r];Array.isArray(i)?e0(e,i,t):(i=i.replace(tE,e),t.push(i))}return t}function nR(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&(n.preventDefault(),n.returnValue=!1)}}let nE=(()=>{class e{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new rE(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case mo.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new rF(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case mo.ShadowDom:return new iF(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=e0(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(Hn(Qy),Hn(gv),Hn(dv))},e.\u0275prov=yr({token:e,factory:e.\u0275fac}),e})();class rE{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,t){return t?document.createElementNS(eE[t]||t,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,t){n.appendChild(t)}insertBefore(n,t,r){n&&n.insertBefore(t,r)}removeChild(n,t){n&&n.removeChild(t)}selectRootElement(n,t){let r="string"==typeof n?document.querySelector(n):n;if(!r)throw new Error(`The selector "${n}" did not match any elements`);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,i){if(i){t=i+":"+t;const o=eE[i];o?n.setAttributeNS(o,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){const i=eE[r];i?n.removeAttributeNS(i,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,i){i&(S.DashCase|S.Important)?n.style.setProperty(t,r,i&S.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&S.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){n[t]=r}setValue(n,t){n.nodeValue=t}listen(n,t,r){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,t,nR(r)):this.eventManager.addEventListener(n,t,nR(r))}}class rF extends rE{constructor(n,t,r,i){super(n),this.component=r;const o=e0(i+"-"+r.id,r.styles,[]);t.addStyles(o),this.contentAttr=function eF(e){return"_ngcontent-%COMP%".replace(tE,e)}(i+"-"+r.id),this.hostAttr=function tF(e){return"_nghost-%COMP%".replace(tE,e)}(i+"-"+r.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,t){const r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}}class iF extends rE{constructor(n,t,r,i){super(n),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=e0(i.id,i.styles,[]);for(let a=0;a<o.length;a++){const u=document.createElement("style");u.textContent=o[a],this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(this.nodeOrShadowRoot(n),t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let oF=(()=>{class e extends ZA{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return e.\u0275fac=function(t){return new(t||e)(Hn(Bu))},e.\u0275prov=yr({token:e,factory:e.\u0275fac}),e})();const iR=["alt","control","meta","shift"],sF={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},oR={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},uF={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let lF=(()=>{class e extends ZA{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,r,i){const o=e.parseEventName(r),a=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pf().onAndCancel(t,o.domEventName,a))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let a="";if(iR.forEach(d=>{const l=r.indexOf(d);l>-1&&(r.splice(l,1),a+=d+".")}),a+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=a,u}static getEventFullKey(t){let r="",i=function cF(e){let n=e.key;if(null==n){if(n=e.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===e.location&&oR.hasOwnProperty(n)&&(n=oR[n]))}return sF[n]||n}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),iR.forEach(o=>{o!=i&&uF[o](t)&&(r+=o+".")}),r+=i,r}static eventCallback(t,r,i){return o=>{e.getEventFullKey(o)===t&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return e.\u0275fac=function(t){return new(t||e)(Hn(Bu))},e.\u0275prov=yr({token:e,factory:e.\u0275fac}),e})();const pF=gA(d4,"browser",[{provide:uA,useValue:"browser"},{provide:sA,useValue:function dF(){Yx.makeCurrent(),Qx.init()},multi:!0},{provide:Bu,useFactory:function hF(){return function Ha(e){Er=e}(document),document},deps:[]}]),mF=[{provide:A1,useValue:"root"},{provide:ou,useFactory:function fF(){return new ou},deps:[]},{provide:Yy,useClass:oF,multi:!0,deps:[Bu,Da,uA]},{provide:Yy,useClass:lF,multi:!0,deps:[Bu]},{provide:nE,useClass:nE,deps:[Qy,gv,dv]},{provide:SI,useExisting:nE},{provide:YA,useExisting:gv},{provide:gv,useClass:gv,deps:[Bu]},{provide:Tx,useClass:Tx,deps:[Da]},{provide:Qy,useClass:Qy,deps:[Yy,Da]},{provide:class Hj{},useClass:Zj,deps:[]}];let gF=(()=>{class e{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:dv,useValue:t.appId},{provide:JA,useExisting:dv},Jj]}}}return e.\u0275fac=function(t){return new(t||e)(Hn(e,12))},e.\u0275mod=eu({type:e}),e.\u0275inj=Zo({providers:mF,imports:[zj,f4]}),e})();function wr(...e){return Di(e,Tn(e))}"undefined"!=typeof window&&window;class Bl extends yt{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:r}=this;if(n)throw t;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}}const{isArray:PF}=Array,{getPrototypeOf:IF,prototype:AF,keys:RF}=Object;const{isArray:kF}=Array;function BF(...e){const n=Tn(e),t=function On(e){return U(It(e))?e.pop():void 0}(e),{args:r,keys:i}=function DF(e){if(1===e.length){const n=e[0];if(PF(n))return{args:n,keys:null};if(function OF(e){return e&&"object"==typeof e&&IF(e)===AF}(n)){const t=RF(n);return{args:t.map(r=>n[r]),keys:t}}}return{args:e,keys:null}}(e);if(0===r.length)return Di([],n);const o=new _t(function zF(e,n,t=j){return r=>{uR(n,()=>{const{length:i}=e,o=new Array(i);let a=i,u=i;for(let d=0;d<i;d++)uR(n,()=>{const l=Di(e[d],n);let f=!1;l.subscribe(xt(r,_=>{o[d]=_,f||(f=!0,u--),u||r.next(t(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}(r,n,i?a=>function LF(e,n){return e.reduce((t,r,i)=>(t[r]=n[i],t),{})}(i,a):j));return t?o.pipe(function NF(e){return gn(n=>function MF(e,n){return kF(n)?e(...n):e(n)}(e,n))}(t)):o}function uR(e,n,t){e?Bt(t,e,n):n()}function t0(e,n){const t=U(e)?e:()=>e,r=i=>i.error(t());return new _t(n?i=>n.schedule(r,0,i):r)}const n0=ie(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function oE(...e){return function jF(){return Jt(1)}()(Di(e,Tn(e)))}function lR(e){return new _t(n=>{Se(e()).subscribe(n)})}function cR(){return Sn((e,n)=>{let t=null;e._refCount++;const r=xt(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(t=null);const i=e._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),n.unsubscribe()});e.subscribe(r),r.closed||(t=e.connect())})}class FF extends _t{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,tn(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,null==n||n.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new X;const t=this.getSubject();n.add(this.source.subscribe(xt(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=X.EMPTY)}return n}refCount(){return cR()(this)}}function $h(e,n){return Sn((t,r)=>{let i=null,o=0,a=!1;const u=()=>a&&!i&&r.complete();t.subscribe(xt(r,d=>{null==i||i.unsubscribe();let l=0;const f=o++;Se(e(d,f)).subscribe(i=xt(r,_=>r.next(n?n(d,_,f,l++):_),()=>{i=null,u()}))},()=>{a=!0,u()}))})}function qF(e,n,t,r,i){return(o,a)=>{let u=t,d=n,l=0;o.subscribe(xt(a,f=>{const _=l++;d=u?e(d,f,_):(u=!0,f),r&&a.next(d)},i&&(()=>{u&&a.next(d),a.complete()})))}}function dR(e,n){return Sn(qF(e,n,arguments.length>=2,!0))}function bm(e,n){return Sn((t,r)=>{let i=0;t.subscribe(xt(r,o=>e.call(n,o,i++)&&r.next(o)))})}function Af(e){return Sn((n,t)=>{let o,r=null,i=!1;r=n.subscribe(xt(t,void 0,void 0,a=>{o=Se(e(a,Af(e)(n))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function vv(e,n){return U(n)?Et(e,n,1):Et(e,1)}function aE(e){return e<=0?()=>Ht:Sn((n,t)=>{let r=[];n.subscribe(xt(t,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function fR(e=VF){return Sn((n,t)=>{let r=!1;n.subscribe(xt(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(e())))})}function VF(){return new n0}function hR(e){return Sn((n,t)=>{let r=!1;n.subscribe(xt(t,i=>{r=!0,t.next(i)},()=>{r||t.next(e),t.complete()}))})}function wm(e,n){const t=arguments.length>=2;return r=>r.pipe(e?bm((i,o)=>e(i,o,r)):j,Rs(1),t?hR(n):fR(()=>new n0))}function uu(e,n,t){const r=U(e)||n||t?{next:e,error:n,complete:t}:e;return r?Sn((i,o)=>{var a;null===(a=r.subscribe)||void 0===a||a.call(r);let u=!0;i.subscribe(xt(o,d=>{var l;null===(l=r.next)||void 0===l||l.call(r,d),o.next(d)},()=>{var d;u=!1,null===(d=r.complete)||void 0===d||d.call(r),o.complete()},d=>{var l;u=!1,null===(l=r.error)||void 0===l||l.call(r,d),o.error(d)},()=>{var d,l;u&&(null===(d=r.unsubscribe)||void 0===d||d.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):j}class dd{constructor(n,t){this.id=n,this.url=t}}class sE extends dd{constructor(n,t,r="imperative",i=null){super(n,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _v extends dd{constructor(n,t,r){super(n,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class pR extends dd{constructor(n,t,r){super(n,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $F extends dd{constructor(n,t,r){super(n,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class KF extends dd{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XF extends dd{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WF extends dd{constructor(n,t,r,i,o){super(n,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class JF extends dd{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ZF extends dd{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mR{constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class gR{constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class YF{constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QF{constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eU{constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tU{constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vR{constructor(n,t,r){this.routerEvent=n,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ar="primary";class nU{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function xm(e){return new nU(e)}const _R="ngNavigationCancelingError";function uE(e){const n=Error("NavigationCancelingError: "+e);return n[_R]=!0,n}function iU(e,n,t){const r=t.path.split("/");if(r.length>e.length||"full"===t.pathMatch&&(n.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const a=r[o],u=e[o];if(a.startsWith(":"))i[a.substring(1)]=u;else if(a!==u.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function yc(e,n){const t=e?Object.keys(e):void 0,r=n?Object.keys(n):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!yR(e[i],n[i]))return!1;return!0}function yR(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const t=[...e].sort(),r=[...n].sort();return t.every((i,o)=>r[o]===i)}return e===n}function bR(e){return Array.prototype.concat.apply([],e)}function wR(e){return e.length>0?e[e.length-1]:null}function Oa(e,n){for(const t in e)e.hasOwnProperty(t)&&n(e[t],t)}function bc(e){return eP(e)?e:Ey(e)?Di(Promise.resolve(e)):wr(e)}const sU={exact:function SR(e,n,t){if(!Xh(e.segments,n.segments)||!r0(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!e.children[r]||!SR(e.children[r],n.children[r],t))return!1;return!0},subset:CR},xR={exact:function uU(e,n){return yc(e,n)},subset:function lU(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>yR(e[t],n[t]))},ignored:()=>!0};function ER(e,n,t){return sU[t.paths](e.root,n.root,t.matrixParams)&&xR[t.queryParams](e.queryParams,n.queryParams)&&!("exact"===t.fragment&&e.fragment!==n.fragment)}function CR(e,n,t){return TR(e,n,n.segments,t)}function TR(e,n,t,r){if(e.segments.length>t.length){const i=e.segments.slice(0,t.length);return!(!Xh(i,t)||n.hasChildren()||!r0(i,t,r))}if(e.segments.length===t.length){if(!Xh(e.segments,t)||!r0(e.segments,t,r))return!1;for(const i in n.children)if(!e.children[i]||!CR(e.children[i],n.children[i],r))return!1;return!0}{const i=t.slice(0,e.segments.length),o=t.slice(e.segments.length);return!!(Xh(e.segments,i)&&r0(e.segments,i,r)&&e.children[Ar])&&TR(e.children[Ar],n,o,r)}}function r0(e,n,t){return n.every((r,i)=>xR[t](e[i].parameters,r.parameters))}class Kh{constructor(n,t,r){this.root=n,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xm(this.queryParams)),this._queryParamMap}toString(){return fU.serialize(this)}}class Br{constructor(n,t){this.segments=n,this.children=t,this.parent=null,Oa(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return o0(this)}}class yv{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=xm(this.parameters)),this._parameterMap}toString(){return DR(this)}}function Xh(e,n){return e.length===n.length&&e.every((t,r)=>t.path===n[r].path)}class PR{}class IR{parse(n){const t=new wU(n);return new Kh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){const t=`/${bv(n.root,!0)}`,r=function mU(e){const n=Object.keys(e).map(t=>{const r=e[t];return Array.isArray(r)?r.map(i=>`${a0(t)}=${a0(i)}`).join("&"):`${a0(t)}=${a0(r)}`}).filter(t=>!!t);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${t}${r}${"string"==typeof n.fragment?`#${function hU(e){return encodeURI(e)}(n.fragment)}`:""}`}}const fU=new IR;function o0(e){return e.segments.map(n=>DR(n)).join("/")}function bv(e,n){if(!e.hasChildren())return o0(e);if(n){const t=e.children[Ar]?bv(e.children[Ar],!1):"",r=[];return Oa(e.children,(i,o)=>{o!==Ar&&r.push(`${o}:${bv(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function dU(e,n){let t=[];return Oa(e.children,(r,i)=>{i===Ar&&(t=t.concat(n(r,i)))}),Oa(e.children,(r,i)=>{i!==Ar&&(t=t.concat(n(r,i)))}),t}(e,(r,i)=>i===Ar?[bv(e.children[Ar],!1)]:[`${i}:${bv(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[Ar]?`${o0(e)}/${t[0]}`:`${o0(e)}/(${t.join("//")})`}}function AR(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function a0(e){return AR(e).replace(/%3B/gi,";")}function lE(e){return AR(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function s0(e){return decodeURIComponent(e)}function RR(e){return s0(e.replace(/\+/g,"%20"))}function DR(e){return`${lE(e.path)}${function pU(e){return Object.keys(e).map(n=>`;${lE(n)}=${lE(e[n])}`).join("")}(e.parameters)}`}const gU=/^[^\/()?;=#]+/;function u0(e){const n=e.match(gU);return n?n[0]:""}const vU=/^[^=?&#]+/,yU=/^[^&#]+/;class wU{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Br([],{}):new Br([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(r[Ar]=new Br(n,t)),r}parseSegment(){const n=u0(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(n),new yv(s0(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const t=u0(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=u0(this.remaining);i&&(r=i,this.capture(r))}n[s0(t)]=s0(r)}parseQueryParam(n){const t=function _U(e){const n=e.match(vU);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const a=function bU(e){const n=e.match(yU);return n?n[0]:""}(this.remaining);a&&(r=a,this.capture(r))}const i=RR(t),o=RR(r);if(n.hasOwnProperty(i)){let a=n[i];Array.isArray(a)||(a=[a],n[i]=a),a.push(o)}else n[i]=o}parseParens(n){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=u0(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let o;r.indexOf(":")>-1?(o=r.substr(0,r.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=Ar);const a=this.parseChildren();t[o]=1===Object.keys(a).length?a[Ar]:new Br([],a),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Error(`Expected "${n}".`)}}class OR{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){const t=cE(n,this._root);return t?t.children.map(r=>r.value):[]}firstChild(n){const t=cE(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){const t=dE(n,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return dE(n,this._root).map(t=>t.value)}}function cE(e,n){if(e===n.value)return n;for(const t of n.children){const r=cE(e,t);if(r)return r}return null}function dE(e,n){if(e===n.value)return[n];for(const t of n.children){const r=dE(e,t);if(r.length)return r.unshift(n),r}return[]}class fd{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}}function Em(e){const n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}class kR extends OR{constructor(n,t){super(n),this.snapshot=t,fE(this,n)}toString(){return this.snapshot.toString()}}function MR(e,n){const t=function xU(e,n){const a=new l0([],{},{},"",{},Ar,n,null,e.root,-1,{});return new LR("",new fd(a,[]))}(e,n),r=new Bl([new yv("",{})]),i=new Bl({}),o=new Bl({}),a=new Bl({}),u=new Bl(""),d=new Sm(r,i,a,u,o,Ar,n,t.root);return d.snapshot=t.root,new kR(new fd(d,[]),t)}class Sm{constructor(n,t,r,i,o,a,u,d){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=u,this._futureSnapshot=d}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(gn(n=>xm(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(gn(n=>xm(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function NR(e,n="emptyOnly"){const t=e.pathFromRoot;let r=0;if("always"!==n)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function EU(e){return e.reduce((n,t)=>({params:Object.assign(Object.assign({},n.params),t.params),data:Object.assign(Object.assign({},n.data),t.data),resolve:Object.assign(Object.assign({},n.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class l0{constructor(n,t,r,i,o,a,u,d,l,f,_){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=u,this.routeConfig=d,this._urlSegment=l,this._lastPathIndex=f,this._resolve=_}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=xm(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xm(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class LR extends OR{constructor(n,t){super(t),this.url=n,fE(this,t)}toString(){return BR(this._root)}}function fE(e,n){n.value._routerState=e,n.children.forEach(t=>fE(e,t))}function BR(e){const n=e.children.length>0?` { ${e.children.map(BR).join(", ")} } `:"";return`${e.value}${n}`}function hE(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,yc(n.queryParams,t.queryParams)||e.queryParams.next(t.queryParams),n.fragment!==t.fragment&&e.fragment.next(t.fragment),yc(n.params,t.params)||e.params.next(t.params),function oU(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!yc(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.url.next(t.url),yc(n.data,t.data)||e.data.next(t.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function pE(e,n){const t=yc(e.params,n.params)&&function cU(e,n){return Xh(e,n)&&e.every((t,r)=>yc(t.parameters,n[r].parameters))}(e.url,n.url);return t&&!(!e.parent!=!n.parent)&&(!e.parent||pE(e.parent,n.parent))}function wv(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=n.value;const i=function CU(e,n,t){return n.children.map(r=>{for(const i of t.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return wv(e,r,i);return wv(e,r)})}(e,n,t);return new fd(r,i)}{if(e.shouldAttach(n.value)){const o=e.retrieve(n.value);if(null!==o){const a=o.route;return a.value._futureSnapshot=n.value,a.children=n.children.map(u=>wv(e,u)),a}}const r=function TU(e){return new Sm(new Bl(e.url),new Bl(e.params),new Bl(e.queryParams),new Bl(e.fragment),new Bl(e.data),e.outlet,e.component,e)}(n.value),i=n.children.map(o=>wv(e,o));return new fd(r,i)}}function c0(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function xv(e){return"object"==typeof e&&null!=e&&e.outlets}function mE(e,n,t,r,i){let o={};if(r&&Oa(r,(u,d)=>{o[d]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`}),e===n)return new Kh(t,o,i);const a=zR(e,n,t);return new Kh(a,o,i)}function zR(e,n,t){const r={};return Oa(e.children,(i,o)=>{r[o]=i===n?t:zR(i,n,t)}),new Br(e.segments,r)}class jR{constructor(n,t,r){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=r,n&&r.length>0&&c0(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(xv);if(i&&i!==wR(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gE{constructor(n,t,r){this.segmentGroup=n,this.processChildren=t,this.index=r}}function FR(e,n,t){if(e||(e=new Br([],{})),0===e.segments.length&&e.hasChildren())return d0(e,n,t);const r=function OU(e,n,t){let r=0,i=n;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=t.length)return o;const a=e.segments[i],u=t[r];if(xv(u))break;const d=`${u}`,l=r<t.length-1?t[r+1]:null;if(i>0&&void 0===d)break;if(d&&l&&"object"==typeof l&&void 0===l.outlets){if(!qR(d,l,a))return o;r+=2}else{if(!qR(d,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,n,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const o=new Br(e.segments.slice(0,r.pathIndex),{});return o.children[Ar]=new Br(e.segments.slice(r.pathIndex),e.children),d0(o,0,i)}return r.match&&0===i.length?new Br(e.segments,{}):r.match&&!e.hasChildren()?vE(e,n,t):r.match?d0(e,0,i):vE(e,n,t)}function d0(e,n,t){if(0===t.length)return new Br(e.segments,{});{const r=function DU(e){return xv(e[0])?e[0].outlets:{[Ar]:e}}(t),i={};return Oa(r,(o,a)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[a]=FR(e.children[a],n,o))}),Oa(e.children,(o,a)=>{void 0===r[a]&&(i[a]=o)}),new Br(e.segments,i)}}function vE(e,n,t){const r=e.segments.slice(0,n);let i=0;for(;i<t.length;){const o=t[i];if(xv(o)){const d=kU(o.outlets);return new Br(r,d)}if(0===i&&c0(t[0])){r.push(new yv(e.segments[n].path,UR(t[0]))),i++;continue}const a=xv(o)?o.outlets[Ar]:`${o}`,u=i<t.length-1?t[i+1]:null;a&&u&&c0(u)?(r.push(new yv(a,UR(u))),i+=2):(r.push(new yv(a,{})),i++)}return new Br(r,{})}function kU(e){const n={};return Oa(e,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(n[r]=vE(new Br([],{}),0,t))}),n}function UR(e){const n={};return Oa(e,(t,r)=>n[r]=`${t}`),n}function qR(e,n,t){return e==t.path&&yc(n,t.parameters)}class NU{constructor(n,t,r,i){this.routeReuseStrategy=n,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(n){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,n),hE(this.futureState.root),this.activateChildRoutes(t,r,n)}deactivateChildRoutes(n,t,r){const i=Em(t);n.children.forEach(o=>{const a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),Oa(i,(o,a)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(n,t,r){const i=n.value,o=t?t.value:null;if(i===o)if(i.component){const a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(n,t,a.children)}else this.deactivateChildRoutes(n,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=Em(n);for(const a of Object.keys(o))this.deactivateRouteAndItsChildren(o[a],i);if(r&&r.outlet){const a=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:a,route:n,contexts:u})}}deactivateRouteAndOutlet(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=Em(n);for(const a of Object.keys(o))this.deactivateRouteAndItsChildren(o[a],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(n,t,r){const i=Em(t);n.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new tU(o.value.snapshot))}),n.children.length&&this.forwardEvent(new QF(n.value.snapshot))}activateRoutes(n,t,r){const i=n.value,o=t?t.value:null;if(hE(i),i===o)if(i.component){const a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,t,a.children)}else this.activateChildRoutes(n,t,r);else if(i.component){const a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const u=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(u.contexts),a.attachRef=u.componentRef,a.route=u.route.value,a.outlet&&a.outlet.attach(u.componentRef,u.route.value),hE(u.route.value),this.activateChildRoutes(n,null,a.children)}else{const u=function LU(e){for(let n=e.parent;n;n=n.parent){const t=n.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),d=u?u.module.componentFactoryResolver:null;a.attachRef=null,a.route=i,a.resolver=d,a.outlet&&a.outlet.activateWith(i,d),this.activateChildRoutes(n,null,a.children)}}else this.activateChildRoutes(n,null,r)}}class _E{constructor(n,t){this.routes=n,this.module=t}}function Rf(e){return"function"==typeof e}function Wh(e){return e instanceof Kh}const Ev=Symbol("INITIAL_VALUE");function Sv(){return $h(e=>BF(e.map(n=>n.pipe(Rs(1),function UF(...e){const n=Tn(e);return Sn((t,r)=>{(n?oE(e,t,n):oE(e,t)).subscribe(r)})}(Ev)))).pipe(dR((n,t)=>{let r=!1;return t.reduce((i,o,a)=>i!==Ev?i:(o===Ev&&(r=!0),r||!1!==o&&a!==t.length-1&&!Wh(o)?i:o),n)},Ev),bm(n=>n!==Ev),gn(n=>Wh(n)?n:!0===n),Rs(1)))}class qU{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Cv,this.attachRef=null}}class Cv{constructor(){this.contexts=new Map}onChildOutletCreated(n,t){const r=this.getOrCreateContext(n);r.outlet=t,this.contexts.set(n,r)}onChildOutletDestroyed(n){const t=this.getContext(n);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let t=this.getContext(n);return t||(t=new qU,this.contexts.set(n,t)),t}getContext(n){return this.contexts.get(n)||null}}let VR=(()=>{class e{constructor(t,r,i,o,a){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new ws,this.deactivateEvents=new ws,this.attachEvents=new ws,this.detachEvents=new ws,this.name=o||Ar,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const a=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),u=this.parentContexts.getOrCreateContext(this.name).children,d=new VU(t,u,this.location.injector);this.activated=this.location.createComponent(a,this.location.length,d),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(Ln(Cv),Ln(Ml),Ln(av),function ph(e){return function Gd(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const t=e.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(_a(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===n)return t[i+1];i+=2}}}return null}(Vi(),e)}("name"),Ln(Dx))},e.\u0275dir=Mi({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),e})();class VU{constructor(n,t,r){this.route=n,this.childContexts=t,this.parent=r}get(n,t){return n===Sm?this.route:n===Cv?this.childContexts:this.parent.get(n,t)}}let GR=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=as({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&xy(0,"router-outlet")},directives:[VR],encapsulation:2}),e})();function HR(e,n=""){for(let t=0;t<e.length;t++){const r=e[t];GU(r,HU(n,r))}}function GU(e,n){e.children&&HR(e.children,n)}function HU(e,n){return n?e||n.path?e&&!n.path?`${e}/`:!e&&n.path?n.path:`${e}/${n.path}`:"":e}function yE(e){const n=e.children&&e.children.map(yE),t=n?Object.assign(Object.assign({},e),{children:n}):Object.assign({},e);return!t.component&&(n||t.loadChildren)&&t.outlet&&t.outlet!==Ar&&(t.component=GR),t}function Fu(e){return e.outlet||Ar}function $R(e,n){const t=e.filter(r=>Fu(r)===n);return t.push(...e.filter(r=>Fu(r)!==n)),t}const KR={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function f0(e,n,t){var r;if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?Object.assign({},KR):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(n.matcher||iU)(t,e,n);if(!o)return Object.assign({},KR);const a={};Oa(o.posParams,(d,l)=>{a[l]=d.path});const u=o.consumed.length>0?Object.assign(Object.assign({},a),o.consumed[o.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:u,positionalParamSegments:null!==(r=o.posParams)&&void 0!==r?r:{}}}function h0(e,n,t,r,i="corrected"){if(t.length>0&&function XU(e,n,t){return t.some(r=>p0(e,n,r)&&Fu(r)!==Ar)}(e,t,r)){const a=new Br(n,function KU(e,n,t,r){const i={};i[Ar]=r,r._sourceSegment=e,r._segmentIndexShift=n.length;for(const o of t)if(""===o.path&&Fu(o)!==Ar){const a=new Br([],{});a._sourceSegment=e,a._segmentIndexShift=n.length,i[Fu(o)]=a}return i}(e,n,r,new Br(t,e.children)));return a._sourceSegment=e,a._segmentIndexShift=n.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function WU(e,n,t){return t.some(r=>p0(e,n,r))}(e,t,r)){const a=new Br(e.segments,function $U(e,n,t,r,i,o){const a={};for(const u of r)if(p0(e,t,u)&&!i[Fu(u)]){const d=new Br([],{});d._sourceSegment=e,d._segmentIndexShift="legacy"===o?e.segments.length:n.length,a[Fu(u)]=d}return Object.assign(Object.assign({},i),a)}(e,n,t,r,e.children,i));return a._sourceSegment=e,a._segmentIndexShift=n.length,{segmentGroup:a,slicedSegments:t}}const o=new Br(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:t}}function p0(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path}function XR(e,n,t,r){return!!(Fu(e)===r||r!==Ar&&p0(n,t,e))&&("**"===e.path||f0(n,e,t).matched)}function WR(e,n,t){return 0===n.length&&!e.children[t]}class m0{constructor(n){this.segmentGroup=n||null}}class JR{constructor(n){this.urlTree=n}}function Tv(e){return t0(new m0(e))}function ZR(e){return t0(new JR(e))}class QU{constructor(n,t,r,i,o){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=n.get(sd)}apply(){const n=h0(this.urlTree.root,[],[],this.config).segmentGroup,t=new Br(n.segments,n.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ar).pipe(gn(o=>this.createUrlTree(bE(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Af(o=>{if(o instanceof JR)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof m0?this.noMatchError(o):o}))}match(n){return this.expandSegmentGroup(this.ngModule,this.config,n.root,Ar).pipe(gn(i=>this.createUrlTree(bE(i),n.queryParams,n.fragment))).pipe(Af(i=>{throw i instanceof m0?this.noMatchError(i):i}))}noMatchError(n){return new Error(`Cannot match any routes. URL Segment: '${n.segmentGroup}'`)}createUrlTree(n,t,r){const i=n.segments.length>0?new Br([],{[Ar]:n}):n;return new Kh(i,t,r)}expandSegmentGroup(n,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(n,t,r).pipe(gn(o=>new Br([],o))):this.expandSegment(n,r,t,r.segments,i,!0)}expandChildren(n,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return Di(i).pipe(vv(o=>{const a=r.children[o],u=$R(t,o);return this.expandSegmentGroup(n,u,a,o).pipe(gn(d=>({segment:d,outlet:o})))}),dR((o,a)=>(o[a.outlet]=a.segment,o),{}),function GF(e,n){const t=arguments.length>=2;return r=>r.pipe(e?bm((i,o)=>e(i,o,r)):j,aE(1),t?hR(n):fR(()=>new n0))}())}expandSegment(n,t,r,i,o,a){return Di(r).pipe(vv(u=>this.expandSegmentAgainstRoute(n,t,r,u,i,o,a).pipe(Af(l=>{if(l instanceof m0)return wr(null);throw l}))),wm(u=>!!u),Af((u,d)=>{if(u instanceof n0||"EmptyError"===u.name)return WR(t,i,o)?wr(new Br([],{})):Tv(t);throw u}))}expandSegmentAgainstRoute(n,t,r,i,o,a,u){return XR(i,t,o,a)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(n,t,i,o,a):u&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,t,r,i,o,a):Tv(t):Tv(t)}expandSegmentAgainstRouteUsingRedirect(n,t,r,i,o,a){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,i,a):this.expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,i,o,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ZR(o):this.lineralizeSegments(r,o).pipe(Et(a=>{const u=new Br(a,{});return this.expandSegment(n,u,t,a,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,i,o,a){const{matched:u,consumedSegments:d,remainingSegments:l,positionalParamSegments:f}=f0(t,i,o);if(!u)return Tv(t);const _=this.applyRedirectCommands(d,i.redirectTo,f);return i.redirectTo.startsWith("/")?ZR(_):this.lineralizeSegments(i,_).pipe(Et(m=>this.expandSegment(n,t,r,m.concat(l),a,!1)))}matchSegmentAgainstRoute(n,t,r,i,o){if("**"===r.path)return r.loadChildren?(r._loadedConfig?wr(r._loadedConfig):this.configLoader.load(n.injector,r)).pipe(gn(_=>(r._loadedConfig=_,new Br(i,{})))):wr(new Br(i,{}));const{matched:a,consumedSegments:u,remainingSegments:d}=f0(t,r,i);return a?this.getChildConfig(n,r,i).pipe(Et(f=>{const _=f.module,m=f.routes,{segmentGroup:E,slicedSegments:A}=h0(t,u,d,m),I=new Br(E.segments,E.children);if(0===A.length&&I.hasChildren())return this.expandChildren(_,m,I).pipe(gn(it=>new Br(u,it)));if(0===m.length&&0===A.length)return wr(new Br(u,{}));const se=Fu(r)===o;return this.expandSegment(_,I,m,A,se?Ar:o,!0).pipe(gn(Re=>new Br(u.concat(Re.segments),Re.children)))})):Tv(t)}getChildConfig(n,t,r){return t.children?wr(new _E(t.children,n)):t.loadChildren?void 0!==t._loadedConfig?wr(t._loadedConfig):this.runCanLoadGuards(n.injector,t,r).pipe(Et(i=>i?this.configLoader.load(n.injector,t).pipe(gn(o=>(t._loadedConfig=o,o))):function ZU(e){return t0(uE(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`))}(t))):wr(new _E([],n))}runCanLoadGuards(n,t,r){const i=t.canLoad;return i&&0!==i.length?wr(i.map(a=>{const u=n.get(a);let d;if(function zU(e){return e&&Rf(e.canLoad)}(u))d=u.canLoad(t,r);else{if(!Rf(u))throw new Error("Invalid CanLoad guard");d=u(t,r)}return bc(d)})).pipe(Sv(),uu(a=>{if(!Wh(a))return;const u=uE(`Redirecting to "${this.urlSerializer.serialize(a)}"`);throw u.url=a,u}),gn(a=>!0===a)):wr(!0)}lineralizeSegments(n,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return wr(r);if(i.numberOfChildren>1||!i.children[Ar])return t0(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n.redirectTo}'`));i=i.children[Ar]}}applyRedirectCommands(n,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),n,r)}applyRedirectCreatreUrlTree(n,t,r,i){const o=this.createSegmentGroup(n,t.root,r,i);return new Kh(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){const r={};return Oa(n,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const u=i.substring(1);r[o]=t[u]}else r[o]=i}),r}createSegmentGroup(n,t,r,i){const o=this.createSegments(n,t.segments,r,i);let a={};return Oa(t.children,(u,d)=>{a[d]=this.createSegmentGroup(n,u,r,i)}),new Br(o,a)}createSegments(n,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(n,o,i):this.findOrReturn(o,r))}findPosParam(n,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${n}'. Cannot find '${t.path}'.`);return i}findOrReturn(n,t){let r=0;for(const i of t){if(i.path===n.path)return t.splice(r),i;r++}return n}}function bE(e){const n={};for(const r of Object.keys(e.children)){const o=bE(e.children[r]);(o.segments.length>0||o.hasChildren())&&(n[r]=o)}return function e6(e){if(1===e.numberOfChildren&&e.children[Ar]){const n=e.children[Ar];return new Br(e.segments.concat(n.segments),n.children)}return e}(new Br(e.segments,n))}class YR{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class g0{constructor(n,t){this.component=n,this.route=t}}function n6(e,n,t){const r=e._root;return Pv(r,n?n._root:null,t,[r.value])}function v0(e,n,t){const r=function i6(e){if(!e)return null;for(let n=e.parent;n;n=n.parent){const t=n.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(n);return(r?r.module.injector:t).get(e)}function Pv(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Em(n);return e.children.forEach(a=>{(function o6(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,a=n?n.value:null,u=t?t.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const d=function a6(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!Xh(e.url,n.url);case"pathParamsOrQueryParamsChange":return!Xh(e.url,n.url)||!yc(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pE(e,n)||!yc(e.queryParams,n.queryParams);default:return!pE(e,n)}}(a,o,o.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new YR(r)):(o.data=a.data,o._resolvedData=a._resolvedData),Pv(e,n,o.component?u?u.children:null:t,r,i),d&&u&&u.outlet&&u.outlet.isActivated&&i.canDeactivateChecks.push(new g0(u.outlet.component,a))}else a&&Iv(n,u,i),i.canActivateChecks.push(new YR(r)),Pv(e,null,o.component?u?u.children:null:t,r,i)})(a,o[a.value.outlet],t,r.concat([a.value]),i),delete o[a.value.outlet]}),Oa(o,(a,u)=>Iv(a,t.getContext(u),i)),i}function Iv(e,n,t){const r=Em(e),i=e.value;Oa(r,(o,a)=>{Iv(o,i.component?n?n.children.getContext(a):null:n,t)}),t.canDeactivateChecks.push(new g0(i.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,i))}class m6{}function QR(e){return new _t(n=>n.error(e))}class v6{constructor(n,t,r,i,o,a){this.rootComponentType=n,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a}recognize(){const n=h0(this.urlTree.root,[],[],this.config.filter(a=>void 0===a.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,n,Ar);if(null===t)return null;const r=new l0([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ar,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new fd(r,t),o=new LR(this.url,i);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(n){const t=n.value,r=NR(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),n.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(n,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(n,t):this.processSegment(n,t,t.segments,r)}processChildren(n,t){const r=[];for(const o of Object.keys(t.children)){const a=t.children[o],u=$R(n,o),d=this.processSegmentGroup(u,a,o);if(null===d)return null;r.push(...d)}const i=e2(r);return function _6(e){e.sort((n,t)=>n.value.outlet===Ar?-1:t.value.outlet===Ar?1:n.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(n,t,r,i){for(const o of n){const a=this.processSegmentAgainstRoute(o,t,r,i);if(null!==a)return a}return WR(t,r,i)?[]:null}processSegmentAgainstRoute(n,t,r,i){if(n.redirectTo||!XR(n,t,r,i))return null;let o,a=[],u=[];if("**"===n.path){const E=r.length>0?wR(r).parameters:{};o=new l0(r,E,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,r2(n),Fu(n),n.component,n,t2(t),n2(t)+r.length,i2(n))}else{const E=f0(t,n,r);if(!E.matched)return null;a=E.consumedSegments,u=E.remainingSegments,o=new l0(a,E.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,r2(n),Fu(n),n.component,n,t2(t),n2(t)+a.length,i2(n))}const d=function y6(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(n),{segmentGroup:l,slicedSegments:f}=h0(t,a,u,d.filter(E=>void 0===E.redirectTo),this.relativeLinkResolution);if(0===f.length&&l.hasChildren()){const E=this.processChildren(d,l);return null===E?null:[new fd(o,E)]}if(0===d.length&&0===f.length)return[new fd(o,[])];const _=Fu(n)===i,m=this.processSegment(d,l,f,_?Ar:i);return null===m?null:[new fd(o,m)]}}function b6(e){const n=e.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function e2(e){const n=[],t=new Set;for(const r of e){if(!b6(r)){n.push(r);continue}const i=n.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):n.push(r)}for(const r of t){const i=e2(r.children);n.push(new fd(r.value,i))}return n.filter(r=>!t.has(r))}function t2(e){let n=e;for(;n._sourceSegment;)n=n._sourceSegment;return n}function n2(e){let n=e,t=n._segmentIndexShift?n._segmentIndexShift:0;for(;n._sourceSegment;)n=n._sourceSegment,t+=n._segmentIndexShift?n._segmentIndexShift:0;return t-1}function r2(e){return e.data||{}}function i2(e){return e.resolve||{}}function o2(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function wE(e){return $h(n=>{const t=e(n);return t?Di(t).pipe(gn(()=>n)):wr(n)})}class I6 extends class P6{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}}{}const xE=new qr("ROUTES");class a2{constructor(n,t,r,i){this.injector=n,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(n,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe(gn(o=>{this.onLoadEndListener&&this.onLoadEndListener(t);const a=o.create(n);return new _E(bR(a.injector.get(xE,void 0,Vn.Self|Vn.Optional)).map(yE),a)}),Af(o=>{throw t._loader$=void 0,o}));return t._loader$=new FF(i,()=>new yt).pipe(cR()),t._loader$}loadModuleFactory(n){return bc(n()).pipe(Et(t=>t instanceof PI?wr(t):Di(this.compiler.compileModuleAsync(t))))}}class R6{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,t){return n}}function D6(e){throw e}function O6(e,n,t){return n.parse("/")}function s2(e,n){return wr(null)}const k6={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},M6={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let lu=(()=>{class e{constructor(t,r,i,o,a,u,d){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=d,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new yt,this.errorHandler=D6,this.malformedUriErrorHandler=O6,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:s2,afterPreactivation:s2},this.urlHandlingStrategy=new R6,this.routeReuseStrategy=new I6,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=a.get(sd),this.console=a.get(Iz);const _=a.get(Da);this.isNgZoneEnabled=_ instanceof Da&&Da.isInAngularZone(),this.resetConfig(d),this.currentUrlTree=function aU(){return new Kh(new Br([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new a2(a,u,m=>this.triggerEvent(new mR(m)),m=>this.triggerEvent(new gR(m))),this.routerState=MR(this.currentUrlTree,this.rootComponentType),this.transitions=new Bl({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(bm(i=>0!==i.id),gn(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),$h(i=>{let o=!1,a=!1;return wr(i).pipe(uu(u=>{this.currentNavigation={id:u.id,initialUrl:u.currentRawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),$h(u=>{const d=this.browserUrlTree.toString(),l=!this.navigated||u.extractedUrl.toString()!==d||d!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||l)&&this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return u2(u.source)&&(this.browserUrlTree=u.extractedUrl),wr(u).pipe($h(_=>{const m=this.transitions.getValue();return r.next(new sE(_.id,this.serializeUrl(_.extractedUrl),_.source,_.restoredState)),m!==this.transitions.getValue()?Ht:Promise.resolve(_)}),function t6(e,n,t,r){return $h(i=>function YU(e,n,t,r,i){return new QU(e,n,t,r,i).apply()}(e,n,t,i.extractedUrl,r).pipe(gn(o=>Object.assign(Object.assign({},i),{urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),uu(_=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:_.urlAfterRedirects})}),function w6(e,n,t,r,i){return Et(o=>function g6(e,n,t,r,i="emptyOnly",o="legacy"){try{const a=new v6(e,n,t,r,i,o).recognize();return null===a?QR(new m6):wr(a)}catch(a){return QR(a)}}(e,n,o.urlAfterRedirects,t(o.urlAfterRedirects),r,i).pipe(gn(a=>Object.assign(Object.assign({},o),{targetSnapshot:a}))))}(this.rootComponentType,this.config,_=>this.serializeUrl(_),this.paramsInheritanceStrategy,this.relativeLinkResolution),uu(_=>{if("eager"===this.urlUpdateStrategy){if(!_.extras.skipLocationChange){const E=this.urlHandlingStrategy.merge(_.urlAfterRedirects,_.rawUrl);this.setBrowserUrl(E,_)}this.browserUrlTree=_.urlAfterRedirects}const m=new KF(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);r.next(m)}));if(l&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:m,extractedUrl:E,source:A,restoredState:I,extras:se}=u,me=new sE(m,this.serializeUrl(E),A,I);r.next(me);const Re=MR(E,this.rootComponentType).snapshot;return wr(Object.assign(Object.assign({},u),{targetSnapshot:Re,urlAfterRedirects:E,extras:Object.assign(Object.assign({},se),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=u.rawUrl,u.resolve(null),Ht}),wE(u=>{const{targetSnapshot:d,id:l,extractedUrl:f,rawUrl:_,extras:{skipLocationChange:m,replaceUrl:E}}=u;return this.hooks.beforePreactivation(d,{navigationId:l,appliedUrlTree:f,rawUrlTree:_,skipLocationChange:!!m,replaceUrl:!!E})}),uu(u=>{const d=new XF(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(d)}),gn(u=>Object.assign(Object.assign({},u),{guards:n6(u.targetSnapshot,u.currentSnapshot,this.rootContexts)})),function s6(e,n){return Et(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return 0===a.length&&0===o.length?wr(Object.assign(Object.assign({},t),{guardsResult:!0})):function u6(e,n,t,r){return Di(e).pipe(Et(i=>function p6(e,n,t,r,i){const o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return o&&0!==o.length?wr(o.map(u=>{const d=v0(u,n,i);let l;if(function UU(e){return e&&Rf(e.canDeactivate)}(d))l=bc(d.canDeactivate(e,n,t,r));else{if(!Rf(d))throw new Error("Invalid CanDeactivate guard");l=bc(d(e,n,t,r))}return l.pipe(wm())})).pipe(Sv()):wr(!0)}(i.component,i.route,t,n,r)),wm(i=>!0!==i,!0))}(a,r,i,e).pipe(Et(u=>u&&function BU(e){return"boolean"==typeof e}(u)?function l6(e,n,t,r){return Di(n).pipe(vv(i=>oE(function d6(e,n){return null!==e&&n&&n(new YF(e)),wr(!0)}(i.route.parent,r),function c6(e,n){return null!==e&&n&&n(new eU(e)),wr(!0)}(i.route,r),function h6(e,n,t){const r=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(a=>function r6(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(a)).filter(a=>null!==a).map(a=>lR(()=>wr(a.guards.map(d=>{const l=v0(d,a.node,t);let f;if(function FU(e){return e&&Rf(e.canActivateChild)}(l))f=bc(l.canActivateChild(r,e));else{if(!Rf(l))throw new Error("Invalid CanActivateChild guard");f=bc(l(r,e))}return f.pipe(wm())})).pipe(Sv())));return wr(o).pipe(Sv())}(e,i.path,t),function f6(e,n,t){const r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||0===r.length)return wr(!0);const i=r.map(o=>lR(()=>{const a=v0(o,n,t);let u;if(function jU(e){return e&&Rf(e.canActivate)}(a))u=bc(a.canActivate(n,e));else{if(!Rf(a))throw new Error("Invalid CanActivate guard");u=bc(a(n,e))}return u.pipe(wm())}));return wr(i).pipe(Sv())}(e,i.route,t))),wm(i=>!0!==i,!0))}(r,o,e,n):wr(u)),gn(u=>Object.assign(Object.assign({},t),{guardsResult:u})))})}(this.ngModule.injector,u=>this.triggerEvent(u)),uu(u=>{if(Wh(u.guardsResult)){const l=uE(`Redirecting to "${this.serializeUrl(u.guardsResult)}"`);throw l.url=u.guardsResult,l}const d=new WF(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.triggerEvent(d)}),bm(u=>!!u.guardsResult||(this.restoreHistory(u),this.cancelNavigationTransition(u,""),!1)),wE(u=>{if(u.guards.canActivateChecks.length)return wr(u).pipe(uu(d=>{const l=new JF(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(l)}),$h(d=>{let l=!1;return wr(d).pipe(function x6(e,n){return Et(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return wr(t);let o=0;return Di(i).pipe(vv(a=>function E6(e,n,t,r){return function S6(e,n,t,r){const i=o2(e);if(0===i.length)return wr({});const o={};return Di(i).pipe(Et(a=>function C6(e,n,t,r){const i=v0(e,n,r);return bc(i.resolve?i.resolve(n,t):i(n,t))}(e[a],n,t,r).pipe(uu(u=>{o[a]=u}))),aE(1),Et(()=>o2(o).length===i.length?wr(o):Ht))}(e._resolve,e,n,r).pipe(gn(o=>(e._resolvedData=o,e.data=Object.assign(Object.assign({},e.data),NR(e,t).resolve),null)))}(a.route,r,e,n)),uu(()=>o++),aE(1),Et(a=>o===i.length?wr(t):Ht))})}(this.paramsInheritanceStrategy,this.ngModule.injector),uu({next:()=>l=!0,complete:()=>{l||(this.restoreHistory(d),this.cancelNavigationTransition(d,"At least one route resolver didn't emit any value."))}}))}),uu(d=>{const l=new ZF(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(l)}))}),wE(u=>{const{targetSnapshot:d,id:l,extractedUrl:f,rawUrl:_,extras:{skipLocationChange:m,replaceUrl:E}}=u;return this.hooks.afterPreactivation(d,{navigationId:l,appliedUrlTree:f,rawUrlTree:_,skipLocationChange:!!m,replaceUrl:!!E})}),gn(u=>{const d=function SU(e,n,t){const r=wv(e,n._root,t?t._root:void 0);return new kR(r,n)}(this.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return Object.assign(Object.assign({},u),{targetRouterState:d})}),uu(u=>{this.currentUrlTree=u.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl),this.routerState=u.targetRouterState,"deferred"===this.urlUpdateStrategy&&(u.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,u),this.browserUrlTree=u.urlAfterRedirects)}),((e,n,t)=>gn(r=>(new NU(n,r.targetRouterState,r.currentRouterState,t).activate(e),r)))(this.rootContexts,this.routeReuseStrategy,u=>this.triggerEvent(u)),uu({next(){o=!0},complete(){o=!0}}),function HF(e){return Sn((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}(()=>{var u;o||a||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(u=this.currentNavigation)||void 0===u?void 0:u.id)===i.id&&(this.currentNavigation=null)}),Af(u=>{if(a=!0,function rU(e){return e&&e[_R]}(u)){const d=Wh(u.url);d||(this.navigated=!0,this.restoreHistory(i,!0));const l=new pR(i.id,this.serializeUrl(i.extractedUrl),u.message);r.next(l),d?setTimeout(()=>{const f=this.urlHandlingStrategy.merge(u.url,this.rawUrlTree),_={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||u2(i.source)};this.scheduleNavigation(f,"imperative",null,_,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const d=new $F(i.id,this.serializeUrl(i.extractedUrl),u);r.next(d);try{i.resolve(this.errorHandler(u))}catch(l){i.reject(l)}}return Ht}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const o={replaceUrl:!0},a=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(a){const d=Object.assign({},a);delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(o.state=d)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,a,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){HR(t),this.config=t.map(yE),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:d}=r,l=i||this.routerState.root,f=d?this.currentUrlTree.fragment:a;let _=null;switch(u){case"merge":_=Object.assign(Object.assign({},this.currentUrlTree.queryParams),o);break;case"preserve":_=this.currentUrlTree.queryParams;break;default:_=o||null}return null!==_&&(_=this.removeEmptyProps(_)),function PU(e,n,t,r,i){if(0===t.length)return mE(n.root,n.root,n.root,r,i);const o=function IU(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new jR(!0,0,e);let n=0,t=!1;const r=e.reduce((i,o,a)=>{if("object"==typeof o&&null!=o){if(o.outlets){const u={};return Oa(o.outlets,(d,l)=>{u[l]="string"==typeof d?d.split("/"):d}),[...i,{outlets:u}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===a?(o.split("/").forEach((u,d)=>{0==d&&"."===u||(0==d&&""===u?t=!0:".."===u?n++:""!=u&&i.push(u))}),i):[...i,o]},[]);return new jR(t,n,r)}(t);if(o.toRoot())return mE(n.root,n.root,new Br([],{}),r,i);const a=function AU(e,n,t){if(e.isAbsolute)return new gE(n.root,!0,0);if(-1===t.snapshot._lastPathIndex){const o=t.snapshot._urlSegment;return new gE(o,o===n.root,0)}const r=c0(e.commands[0])?0:1;return function RU(e,n,t){let r=e,i=n,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new gE(r,!1,i-o)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(o,n,e),u=a.processChildren?d0(a.segmentGroup,a.index,o.commands):FR(a.segmentGroup,a.index,o.commands);return mE(n.root,a.segmentGroup,u,r,i)}(l,this.currentUrlTree,t,_,null!=f?f:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Wh(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function N6(e){for(let n=0;n<e.length;n++){const t=e[n];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${n}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},k6):!1===r?Object.assign({},M6):r,Wh(t))return ER(this.currentUrlTree,t,i);const o=this.parseUrl(t);return ER(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new _v(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,o,a){var u,d;if(this.disposed)return Promise.resolve(!1);let l,f,_;a?(l=a.resolve,f=a.reject,_=a.promise):_=new Promise((A,I)=>{l=A,f=I});const m=++this.navigationId;let E;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),E=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?null!==(u=this.browserPageId)&&void 0!==u?u:0:(null!==(d=this.browserPageId)&&void 0!==d?d:0)+1):E=0,this.setTransition({id:m,targetPageId:E,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:l,reject:f,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(A=>Promise.reject(A))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){var i,o;if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===a?this.currentUrlTree===(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(a)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new pR(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return e.\u0275fac=function(t){U1()},e.\u0275prov=yr({token:e,factory:e.\u0275fac}),e})();function u2(e){return"imperative"!==e}class l2{}class c2{preload(n,t){return wr(null)}}let d2=(()=>{class e{constructor(t,r,i,o){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=new a2(i,r,d=>t.triggerEvent(new mR(d)),d=>t.triggerEvent(new gR(d)))}setUpPreloading(){this.subscription=this.router.events.pipe(bm(t=>t instanceof _v),vv(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(sd);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r)if(o.loadChildren&&!o.canLoad&&o._loadedConfig){const a=o._loadedConfig;i.push(this.processRoutes(a.module,a.routes))}else o.loadChildren&&!o.canLoad?i.push(this.preloadConfig(t,o)):o.children&&i.push(this.processRoutes(t,o.children));return Di(i).pipe(Jt(),gn(o=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?wr(r._loadedConfig):this.loader.load(t.injector,r)).pipe(Et(o=>(r._loadedConfig=o,this.processRoutes(o.module,o.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(Hn(lu),Hn(cA),Hn(su),Hn(l2))},e.\u0275prov=yr({token:e,factory:e.\u0275fac}),e})(),CE=(()=>{class e{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof sE?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof _v&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vR&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new vR(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){U1()},e.\u0275prov=yr({token:e,factory:e.\u0275fac}),e})();const Jh=new qr("ROUTER_CONFIGURATION"),f2=new qr("ROUTER_FORROOT_GUARD"),j6=[zx,{provide:PR,useClass:IR},{provide:lu,useFactory:function G6(e,n,t,r,i,o,a={},u,d){const l=new lu(null,e,n,t,r,i,bR(o));return u&&(l.urlHandlingStrategy=u),d&&(l.routeReuseStrategy=d),function H6(e,n){e.errorHandler&&(n.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(n.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(n.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(n.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(n.urlUpdateStrategy=e.urlUpdateStrategy),e.canceledNavigationResolution&&(n.canceledNavigationResolution=e.canceledNavigationResolution)}(a,l),a.enableTracing&&l.events.subscribe(f=>{var _,m;null===(_=console.group)||void 0===_||_.call(console,`Router Event: ${f.constructor.name}`),console.log(f.toString()),console.log(f),null===(m=console.groupEnd)||void 0===m||m.call(console)}),l},deps:[PR,Cv,zx,su,cA,xE,Jh,[class A6{},new oc],[class T6{},new oc]]},Cv,{provide:Sm,useFactory:function $6(e){return e.routerState.root},deps:[lu]},d2,c2,class z6{preload(n,t){return t().pipe(Af(()=>wr(null)))}},{provide:Jh,useValue:{enableTracing:!1}}];function F6(){return new mA("Router",lu)}let h2=(()=>{class e{constructor(t,r){}static forRoot(t,r){return{ngModule:e,providers:[j6,p2(t),{provide:f2,useFactory:V6,deps:[[lu,new oc,new Qd]]},{provide:Jh,useValue:r||{}},{provide:ym,useFactory:q6,deps:[Hh,[new Dp(Bx),new oc],Jh]},{provide:CE,useFactory:U6,deps:[lu,qj,Jh]},{provide:l2,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:c2},{provide:mA,multi:!0,useFactory:F6},[TE,{provide:bx,multi:!0,useFactory:K6,deps:[TE]},{provide:m2,useFactory:X6,deps:[TE]},{provide:lA,multi:!0,useExisting:m2}]]}}static forChild(t){return{ngModule:e,providers:[p2(t)]}}}return e.\u0275fac=function(t){return new(t||e)(Hn(f2,8),Hn(lu,8))},e.\u0275mod=eu({type:e}),e.\u0275inj=Zo({}),e})();function U6(e,n,t){return t.scrollOffset&&n.setOffset(t.scrollOffset),new CE(e,n,t)}function q6(e,n,t={}){return t.useHash?new b4(e,n):new MA(e,n)}function V6(e){return"guarded"}function p2(e){return[{provide:Nw,multi:!0,useValue:e},{provide:xE,multi:!0,useValue:e}]}let TE=(()=>{class e{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new yt}appInitializer(){return this.injector.get(v4,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(u=>r=u),o=this.injector.get(lu),a=this.injector.get(Jh);return"disabled"===a.initialNavigation?(o.setUpLocationChangeListener(),r(!0)):"enabled"===a.initialNavigation||"enabledBlocking"===a.initialNavigation?(o.hooks.afterPreactivation=()=>this.initNavigation?wr(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),o.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Jh),i=this.injector.get(d2),o=this.injector.get(CE),a=this.injector.get(lu),u=this.injector.get(Ax);t===u.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&a.initialNavigation(),i.setUpPreloading(),o.init(),a.resetRootComponentType(u.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return e.\u0275fac=function(t){return new(t||e)(Hn(su))},e.\u0275prov=yr({token:e,factory:e.\u0275fac}),e})();function K6(e){return e.appInitializer.bind(e)}function X6(e){return e.bootstrapListener.bind(e)}const m2=new qr("Router Initializer"),J6=[];let Z6=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=eu({type:e}),e.\u0275inj=Zo({imports:[[h2.forRoot(J6)],h2]}),e})();var Q6=function(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},e5=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Tm=function(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(e5(arguments[n]));return e},g2={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5},Uu=(()=>{return(e=Uu||(Uu={})).DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",Uu;var e})(),eo=function(){function e(n,t){void 0===t&&(t=Uu.WARN),this.name=n,this.level=t,this._pluggables=[]}return e.prototype._padding=function(n){return n<10?"0"+n:""+n},e.prototype._ts=function(){var n=new Date;return[this._padding(n.getMinutes()),this._padding(n.getSeconds())].join(":")+"."+n.getMilliseconds()},e.prototype.configure=function(n){return n?(this._config=n,this._config):this._config},e.prototype._log=function(n){for(var t,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var a=this.level;e.LOG_LEVEL&&(a=e.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(a=window.LOG_LEVEL);var u=g2[a],d=g2[n];if(d>=u){var l=console.log.bind(console);n===Uu.ERROR&&console.error&&(l=console.error.bind(console)),n===Uu.WARN&&console.warn&&(l=console.warn.bind(console));var f="["+n+"] "+this._ts()+" "+this.name,_="";if(1===i.length&&"string"==typeof i[0])l(_=f+" - "+i[0]);else if(1===i.length)_=f+" "+i[0],l(f,i[0]);else if("string"==typeof i[0]){var m=i.slice(1);1===m.length&&(m=m[0]),_=f+" - "+i[0]+" "+m,l(f+" - "+i[0],m)}else _=f+" "+i,l(f,i);try{for(var E=Q6(this._pluggables),A=E.next();!A.done;A=E.next()){var I=A.value,se={message:_,timestamp:Date.now()};I.pushLogs([se])}}catch(me){t={error:me}}finally{try{A&&!A.done&&(r=E.return)&&r.call(E)}finally{if(t)throw t.error}}}},e.prototype.log=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._log.apply(this,Tm([Uu.INFO],n))},e.prototype.info=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._log.apply(this,Tm([Uu.INFO],n))},e.prototype.warn=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._log.apply(this,Tm([Uu.WARN],n))},e.prototype.error=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._log.apply(this,Tm([Uu.ERROR],n))},e.prototype.debug=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._log.apply(this,Tm([Uu.DEBUG],n))},e.prototype.verbose=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._log.apply(this,Tm([Uu.VERBOSE],n))},e.prototype.addPluggable=function(n){n&&"Logging"===n.getCategoryName()&&(this._pluggables.push(n),n.configure(this._config))},e.prototype.listPluggables=function(){return this._pluggables},e.LOG_LEVEL=null,e}(),PE=new eo("Amplify"),n5=function(){function e(){this._components=[],this._config={},this._modules={},this.Auth=null,this.Analytics=null,this.API=null,this.Credentials=null,this.Storage=null,this.I18n=null,this.Cache=null,this.PubSub=null,this.Interactions=null,this.Pushnotification=null,this.UI=null,this.XR=null,this.Predictions=null,this.DataStore=null,this.Geo=null,this.Logger=eo,this.ServiceWorker=null}return e.prototype.register=function(n){PE.debug("component registered in amplify",n),this._components.push(n),"function"==typeof n.getModuleName?(this._modules[n.getModuleName()]=n,this[n.getModuleName()]=n):PE.debug("no getModuleName method for component",n),n.configure(this._config)},e.prototype.configure=function(n){var t=this;return n?(this._config=Object.assign(this._config,n),PE.debug("amplify config",this._config),Object.entries(this._modules).forEach(function(r){var i=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}(r,2),a=i[1];Object.keys(a).forEach(function(u){t._modules[u]&&(a[u]=t._modules[u])})}),this._components.map(function(r){r.configure(t._config)}),this._config):this._config},e.prototype.addPluggable=function(n){n&&n.getCategory&&"function"==typeof n.getCategory&&this._components.map(function(t){t.addPluggable&&"function"==typeof t.addPluggable&&t.addPluggable(n)})},e}(),Es=new n5,r5=[{type:"text/plain",ext:"txt"},{type:"text/html",ext:"html"},{type:"text/javascript",ext:"js"},{type:"text/css",ext:"css"},{type:"text/csv",ext:"csv"},{type:"text/yaml",ext:"yml"},{type:"text/yaml",ext:"yaml"},{type:"text/calendar",ext:"ics"},{type:"text/calendar",ext:"ical"},{type:"image/apng",ext:"apng"},{type:"image/bmp",ext:"bmp"},{type:"image/gif",ext:"gif"},{type:"image/x-icon",ext:"ico"},{type:"image/x-icon",ext:"cur"},{type:"image/jpeg",ext:"jpg"},{type:"image/jpeg",ext:"jpeg"},{type:"image/jpeg",ext:"jfif"},{type:"image/jpeg",ext:"pjp"},{type:"image/jpeg",ext:"pjpeg"},{type:"image/png",ext:"png"},{type:"image/svg+xml",ext:"svg"},{type:"image/tiff",ext:"tif"},{type:"image/tiff",ext:"tiff"},{type:"image/webp",ext:"webp"},{type:"application/json",ext:"json"},{type:"application/xml",ext:"xml"},{type:"application/x-sh",ext:"sh"},{type:"application/zip",ext:"zip"},{type:"application/x-rar-compressed",ext:"rar"},{type:"application/x-tar",ext:"tar"},{type:"application/x-bzip",ext:"bz"},{type:"application/x-bzip2",ext:"bz2"},{type:"application/pdf",ext:"pdf"},{type:"application/java-archive",ext:"jar"},{type:"application/msword",ext:"doc"},{type:"application/vnd.ms-excel",ext:"xls"},{type:"application/vnd.ms-excel",ext:"xlsx"},{type:"message/rfc822",ext:"eml"}],i5=function(e){return void 0===e&&(e={}),0===Object.keys(e).length},o5=function(e,n,t){if(!e||!e.sort)return!1;var r=t&&"desc"===t?-1:1;return e.sort(function(i,o){var a=i[n],u=o[n];return void 0===u?void 0===a?0:1*r:void 0===a||a<u?-1*r:a>u?1*r:0}),!0},a5=function(e,n){var t=Object.assign({},e);return n&&("string"==typeof n?delete t[n]:n.forEach(function(r){delete t[r]})),t},s5=function(e,n){void 0===n&&(n="application/octet-stream");var t=e.toLowerCase(),r=r5.filter(function(i){return t.endsWith("."+i.ext)});return r.length>0?r[0].type:n},u5=function(e){var n=e.toLowerCase();return!!n.startsWith("text/")||"application/json"===n||"application/xml"===n||"application/sh"===n},l5=function(){for(var e="",n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",t=32;t>0;t-=1)e+=n[Math.floor(Math.random()*n.length)];return e},v2=function(e){if(e.isResolved)return e;var n=!0,t=!1,r=!1,i=e.then(function(o){return r=!0,n=!1,o},function(o){throw t=!0,n=!1,o});return i.isFullfilled=function(){return r},i.isPending=function(){return n},i.isRejected=function(){return t},i},c5=function(){if("undefined"==typeof self)return!1;var e=self;return void 0!==e.WorkerGlobalScope&&self instanceof e.WorkerGlobalScope},Zh=function(){return{isBrowser:"undefined"!=typeof window&&void 0!==window.document,isNode:"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node}},_2=function(e,n,t){if(void 0===n&&(n=[]),void 0===t&&(t=[]),!IE(e))return e;var r={};for(var i in e)e.hasOwnProperty(i)&&(r[n.includes(i)?i:i[0].toLowerCase()+i.slice(1)]=t.includes(i)?e[i]:_2(e[i],n,t));return r},y2=function(e,n,t){if(void 0===n&&(n=[]),void 0===t&&(t=[]),!IE(e))return e;var r={};for(var i in e)e.hasOwnProperty(i)&&(r[n.includes(i)?i:i[0].toUpperCase()+i.slice(1)]=t.includes(i)?e[i]:y2(e[i],n,t));return r},IE=function(e){return!(!(e instanceof Object)||e instanceof Array||e instanceof Function||e instanceof Number||e instanceof String||e instanceof Boolean)},_0=function(){function e(){}return e.isEmpty=i5,e.sortByField=o5,e.objectLessAttributes=a5,e.filenameToContentType=s5,e.isTextFile=u5,e.generateRandomString=l5,e.makeQuerablePromise=v2,e.isWebWorker=c5,e.browserOrNode=Zh,e.transferKeyToLowerCase=_2,e.transferKeyToUpperCase=y2,e.isStrictObject=IE,e}(),d5=function(){function e(){this._logger=new eo("ServiceWorker")}return Object.defineProperty(e.prototype,"serviceWorker",{get:function(){return this._serviceWorker},enumerable:!0,configurable:!0}),e.prototype.register=function(n,t){var r=this;return void 0===n&&(n="/service-worker.js"),void 0===t&&(t="/"),this._logger.debug("registering "+n),this._logger.debug("registering service worker with scope "+t),new Promise(function(i,o){if(!navigator||!("serviceWorker"in navigator))return o(new Error("Service Worker not available"));navigator.serviceWorker.register(n,{scope:t}).then(function(a){return a.installing?r._serviceWorker=a.installing:a.waiting?r._serviceWorker=a.waiting:a.active&&(r._serviceWorker=a.active),r._registration=a,r._setupListeners(),r._logger.debug("Service Worker Registration Success: "+a),i(a)}).catch(function(a){return r._logger.debug("Service Worker Registration Failed "+a),o(a)})})},e.prototype.enablePush=function(n){var t=this;if(!this._registration)throw new Error("Service Worker not registered");return this._publicKey=n,new Promise(function(r,i){if(!Zh().isBrowser)return i(new Error("Service Worker not available"));t._registration.pushManager.getSubscription().then(function(o){if(!o)return t._logger.debug("User is NOT subscribed to push"),t._registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t._urlB64ToUint8Array(n)}).then(function(a){t._subscription=a,t._logger.debug("User subscribed: "+JSON.stringify(a)),r(a)}).catch(function(a){t._logger.error(a)});t._subscription=o,t._logger.debug("User is subscribed to push: "+JSON.stringify(o)),r(o)})})},e.prototype._urlB64ToUint8Array=function(n){for(var r=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),i=window.atob(r),o=new Uint8Array(i.length),a=0;a<i.length;++a)o[a]=i.charCodeAt(a);return o},e.prototype.send=function(n){this._serviceWorker&&this._serviceWorker.postMessage("object"==typeof n?JSON.stringify(n):n)},e.prototype._setupListeners=function(){var n=this;this._serviceWorker.addEventListener("statechange",function(t){var r=n._serviceWorker.state;n._logger.debug("ServiceWorker statechange: "+r),Es.Analytics&&"function"==typeof Es.Analytics.record&&Es.Analytics.record({name:"ServiceWorker",attributes:{state:r}})}),this._serviceWorker.addEventListener("message",function(t){n._logger.debug("ServiceWorker message event: "+t)})},e}(),Av=(()=>{return(e=Av||(Av={})).Cognito="COGNITO",e.Google="Google",e.Facebook="Facebook",e.Amazon="LoginWithAmazon",e.Apple="SignInWithApple",Av;var e})();function AE(e){return e&&!!["provider"].find(function(t){return e.hasOwnProperty(t)})}function Yh(e){return void 0!==e.redirectSignIn}var e,hi=(()=>{return(e=hi||(hi={})).NoConfig="noConfig",e.MissingAuthConfig="missingAuthConfig",e.EmptyUsername="emptyUsername",e.InvalidUsername="invalidUsername",e.EmptyPassword="emptyPassword",e.EmptyCode="emptyCode",e.SignUpError="signUpError",e.NoMFA="noMFA",e.InvalidMFA="invalidMFA",e.EmptyChallengeResponse="emptyChallengeResponse",e.NoUserSession="noUserSession",e.Default="default",e.DeviceConfig="deviceConfig",e.NetworkError="networkError",hi;var e})(),Rv=function(){return Rv=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Rv.apply(this,arguments)},b2=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},w2=function(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(b2(arguments[n]));return e},hd=new eo("Hub"),m5="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",v5=function(){function e(n){this.listeners=[],this.patterns=[],this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=n}return e.prototype.remove=function(n,t){if(n instanceof RegExp){var r=this.patterns.find(function(o){return o.pattern.source===n.source});if(!r)return void hd.warn("No listeners for "+n);this.patterns=w2(this.patterns.filter(function(o){return o!==r}))}else{var i=this.listeners[n];if(!i)return void hd.warn("No listeners for "+n);this.listeners[n]=w2(i.filter(function(o){return o.callback!==t}))}},e.prototype.dispatch=function(n,t,r,i){void 0===r&&(r=""),this.protectedChannels.indexOf(n)>-1&&(i===m5||hd.warn("WARNING: "+n+" is protected and dispatching on it can have unintended consequences"));var a={channel:n,payload:Rv({},t),source:r,patternInfo:[]};try{this._toListeners(a)}catch(u){hd.error(u)}},e.prototype.listen=function(n,t,r){var o,i=this;if(void 0===r&&(r="noname"),function g5(e){return void 0!==e.onHubCapsule}(t))hd.warn("WARNING onHubCapsule is Deprecated. Please pass in a callback."),o=t.onHubCapsule.bind(t);else{if("function"!=typeof t)throw new Error("No callback supplied to Hub");o=t}if(n instanceof RegExp)this.patterns.push({pattern:n,callback:o});else{var a=this.listeners[n];a||(this.listeners[n]=a=[]),a.push({name:r,callback:o})}return function(){i.remove(n,o)}},e.prototype._toListeners=function(n){var t=n.channel,r=n.payload,i=this.listeners[t];if(i&&i.forEach(function(a){hd.debug("Dispatching to "+t+" with ",r);try{a.callback(n)}catch(u){hd.error(u)}}),this.patterns.length>0){if(!r.message)return void hd.warn("Cannot perform pattern matching without a message key");var o=r.message;this.patterns.forEach(function(a){var u=o.match(a.pattern);if(u){var l=b2(u).slice(1),f=Rv(Rv({},n),{patternInfo:l});try{a.callback(f)}catch(_){hd.error(_)}}})}},e}(),pd=new v5("__default__"),Qh={},_5=function(){function e(){}return e.setItem=function(n,t){return Qh[n]=t,Qh[n]},e.getItem=function(n){return Object.prototype.hasOwnProperty.call(Qh,n)?Qh[n]:void 0},e.removeItem=function(n){return delete Qh[n]},e.clear=function(){return Qh={}},e}(),y0=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.amplify.test-ls",1),this.storageWindow.removeItem("aws.amplify.test-ls")}catch(n){this.storageWindow=_5}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),y5=(e=function(n,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(n,t)},function(n,t){function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),x5=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},E5=function(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(x5(arguments[n]));return e},b0=new eo("Util"),ep=function(e){function n(t){var r=e.call(this,t)||this;return r.nonRetryable=!0,r}return y5(n,e),n}(Error);function x2(e,n,t,r){return void 0===r&&(r=1),function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function(){var i,o;return function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(a){switch(a.label){case 0:if("function"!=typeof e)throw Error("functionToRetry must be a function");b0.debug(e.name+" attempt #"+r+" with this vars: "+JSON.stringify(n)),a.label=1;case 1:return a.trys.push([1,3,,8]),[4,e.apply(void 0,E5(n))];case 2:return[2,a.sent()];case 3:if(i=a.sent(),b0.debug("error on "+e.name,i),function(e){return e&&e.nonRetryable}(i))throw b0.debug(e.name+" non retryable error",i),i;return o=t(r,n,i),b0.debug(e.name+" retrying in "+o+" ms"),!1===o?[3,6]:[4,new Promise(function(u){return setTimeout(u,o)})];case 4:return a.sent(),[4,x2(e,n,t,r+1)];case 5:return[2,a.sent()];case 6:throw i;case 7:return[3,8];case 8:return[2]}})})}var S2=function(e,n,t){return void 0===t&&(t=3e5),x2(e,n,function C5(e){return void 0===e&&(e=3e5),function(r){var i=100*Math.pow(2,r)+100*Math.random();return!(i>e)&&i}}(t))},Df=new eo("CognitoCredentials"),I5=new Promise(function(e,n){return Zh().isBrowser?window.gapi&&window.gapi.auth2&&window.gapi.auth2?(Df.debug("google api already loaded"),e()):void setTimeout(function(){return e()},2e3):(Df.debug("not in the browser, directly resolved"),e())}),A5=function(){function e(){this.initialized=!1,this.refreshGoogleToken=this.refreshGoogleToken.bind(this),this._refreshGoogleTokenImpl=this._refreshGoogleTokenImpl.bind(this)}return e.prototype.refreshGoogleToken=function(){return function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function(){return function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(n){switch(n.label){case 0:return this.initialized?[3,2]:(Df.debug("need to wait for the Google SDK loaded"),[4,I5]);case 1:n.sent(),this.initialized=!0,Df.debug("finish waiting"),n.label=2;case 2:return[2,this._refreshGoogleTokenImpl()]}})})},e.prototype._refreshGoogleTokenImpl=function(){var n=null;return Zh().isBrowser&&(n=window.gapi&&window.gapi.auth2?window.gapi.auth2:null),n?new Promise(function(t,r){n.getAuthInstance().then(function(i){i||(Df.debug("google Auth undefined"),r(new ep("google Auth undefined")));var o=i.currentUser.get();o.isSignedIn()?(Df.debug("refreshing the google access token"),o.reloadAuthResponse().then(function(a){t({token:a.id_token,expires_at:a.expires_at})}).catch(function(a){r(a&&"network_error"===a.error?"Network error reloading google auth response":new ep("Failed to reload google auth response"))})):r(new ep("User is not signed in with Google"))}).catch(function(i){Df.debug("Failed to refresh google token",i),r(new ep("Failed to refresh google token"))})}):(Df.debug("no gapi auth2 available"),Promise.reject("no gapi auth2 available"))},e}(),tp=new eo("CognitoCredentials"),O5=new Promise(function(e,n){return Zh().isBrowser?window.FB?(tp.debug("FB SDK already loaded"),e()):void setTimeout(function(){return e()},2e3):(tp.debug("not in the browser, directly resolved"),e())}),k5=function(){function e(){this.initialized=!1,this.refreshFacebookToken=this.refreshFacebookToken.bind(this),this._refreshFacebookTokenImpl=this._refreshFacebookTokenImpl.bind(this)}return e.prototype.refreshFacebookToken=function(){return function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function(){return function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(n){switch(n.label){case 0:return this.initialized?[3,2]:(tp.debug("need to wait for the Facebook SDK loaded"),[4,O5]);case 1:n.sent(),this.initialized=!0,tp.debug("finish waiting"),n.label=2;case 2:return[2,this._refreshFacebookTokenImpl()]}})})},e.prototype._refreshFacebookTokenImpl=function(){var n=null;if(Zh().isBrowser&&(n=window.FB),!n){var t="no fb sdk available";return tp.debug(t),Promise.reject(new ep(t))}return new Promise(function(r,i){n.getLoginStatus(function(o){if(o&&o.authResponse){var u=o.authResponse,d=u.accessToken,_=1e3*u.expiresIn+(new Date).getTime();d||(tp.debug(a="the jwtToken is undefined"),i(new ep(a))),r({token:d,expires_at:_})}else{var a;tp.debug(a="no response from facebook when refreshing the jwt token"),i(new ep(a))}},{scope:"public_profile,email"})})},e}(),M5=new A5,N5=new k5,RE="aws-amplify/4.5.1",Of={userAgent:RE+" js",product:"",navigator:null,isReactNative:!1};"undefined"!=typeof navigator&&navigator.product&&("ReactNative"===(Of.product=navigator.product||"",Of.navigator=navigator||null,navigator.product)?(Of.userAgent=RE+" react-native",Of.isReactNative=!0):(Of.userAgent=RE+" js",Of.isReactNative=!1));var zl=function(){return Of.userAgent};function OE(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}function kE(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}var x0=(()=>(function(e){e.filterSensitiveLog=function(n){return K({},n)}}(x0||(x0={})),x0))(),E0=(()=>(function(e){e.filterSensitiveLog=function(n){return K({},n)}}(E0||(E0={})),E0))(),S0=(()=>(function(e){e.filterSensitiveLog=function(n){return K({},n)}}(S0||(S0={})),S0))(),C0=(()=>(function(e){e.filterSensitiveLog=function(n){return K({},n)}}(C0||(C0={})),C0))(),Dv=function(){function e(n){this.statusCode=n.statusCode,this.headers=n.headers||{},this.body=n.body}return e.isInstance=function(n){return!!n&&("number"==typeof n.statusCode&&"object"==typeof n.headers)},e}(),np=function(){return np=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},np.apply(this,arguments)};function B5(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}var Io=function(){function e(n){this.method=n.method||"GET",this.hostname=n.hostname||"localhost",this.port=n.port,this.query=n.query||{},this.headers=n.headers||{},this.body=n.body,this.protocol=n.protocol?":"!==n.protocol.substr(-1)?n.protocol+":":n.protocol:"https:",this.path=n.path?"/"!==n.path.charAt(0)?"/"+n.path:n.path:"/"}return e.isInstance=function(n){return!!n&&("method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&"object"==typeof n.query&&"object"==typeof n.headers)},e.prototype.clone=function(){var n=new e(np(np({},this),{headers:np({},this.headers)}));return n.query&&(n.query=function j5(e){return Object.keys(e).reduce(function(n,t){var r,i=e[t];return np(np({},n),((r={})[t]=Array.isArray(i)?function z5(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(B5(arguments[n]));return e}(i):i,r))},{})}(n.query)),n},e}(),X5=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,u,d,l,f,_,m,E,A,I,se,me;return bt(this,function(Re){switch(Re.label){case 0:return r=[K({},e)],me={},[4,Rr(e.body,n)];case 1:switch(t=K.apply(void 0,r.concat([(me.body=Re.sent(),me)])),o="UnknownError",o=ko(e,t.body)){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":return[3,6];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return u=[{}],[4,P0(t,n)];case 3:return i=K.apply(void 0,[K.apply(void 0,u.concat([Re.sent()])),{name:o,$metadata:st(e)}]),[3,19];case 4:return d=[{}],[4,Ao(t,n)];case 5:return i=K.apply(void 0,[K.apply(void 0,d.concat([Re.sent()])),{name:o,$metadata:st(e)}]),[3,19];case 6:return l=[{}],[4,f8(t,n)];case 7:return i=K.apply(void 0,[K.apply(void 0,l.concat([Re.sent()])),{name:o,$metadata:st(e)}]),[3,19];case 8:return f=[{}],[4,Ro(t,n)];case 9:return i=K.apply(void 0,[K.apply(void 0,f.concat([Re.sent()])),{name:o,$metadata:st(e)}]),[3,19];case 10:return _=[{}],[4,Ko(t,n)];case 11:return i=K.apply(void 0,[K.apply(void 0,_.concat([Re.sent()])),{name:o,$metadata:st(e)}]),[3,19];case 12:return m=[{}],[4,qu(t,n)];case 13:return i=K.apply(void 0,[K.apply(void 0,m.concat([Re.sent()])),{name:o,$metadata:st(e)}]),[3,19];case 14:return E=[{}],[4,da(t,n)];case 15:return i=K.apply(void 0,[K.apply(void 0,E.concat([Re.sent()])),{name:o,$metadata:st(e)}]),[3,19];case 16:return A=[{}],[4,Do(t,n)];case 17:return i=K.apply(void 0,[K.apply(void 0,A.concat([Re.sent()])),{name:o,$metadata:st(e)}]),[3,19];case 18:o=(I=t.body).code||I.Code||o,i=K(K({},I),{name:""+o,message:I.message||I.Message||o,$fault:"client",$metadata:st(e)}),Re.label=19;case 19:return i.message=se=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(se),i))]}})})},J5=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,u,d,l,f,_,m,E,A,I,se,me;return bt(this,function(Re){switch(Re.label){case 0:return r=[K({},e)],me={},[4,Rr(e.body,n)];case 1:switch(t=K.apply(void 0,r.concat([(me.body=Re.sent(),me)])),o="UnknownError",o=ko(e,t.body)){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return u=[{}],[4,P0(t,n)];case 3:return i=K.apply(void 0,[K.apply(void 0,u.concat([Re.sent()])),{name:o,$metadata:st(e)}]),[3,19];case 4:return d=[{}],[4,Ao(t,n)];case 5:return i=K.apply(void 0,[K.apply(void 0,d.concat([Re.sent()])),{name:o,$metadata:st(e)}]),[3,19];case 6:return l=[{}],[4,Ro(t,n)];case 7:return i=K.apply(void 0,[K.apply(void 0,l.concat([Re.sent()])),{name:o,$metadata:st(e)}]),[3,19];case 8:return f=[{}],[4,NE(t,n)];case 9:return i=K.apply(void 0,[K.apply(void 0,f.concat([Re.sent()])),{name:o,$metadata:st(e)}]),[3,19];case 10:return _=[{}],[4,Ko(t,n)];case 11:return i=K.apply(void 0,[K.apply(void 0,_.concat([Re.sent()])),{name:o,$metadata:st(e)}]),[3,19];case 12:return m=[{}],[4,qu(t,n)];case 13:return i=K.apply(void 0,[K.apply(void 0,m.concat([Re.sent()])),{name:o,$metadata:st(e)}]),[3,19];case 14:return E=[{}],[4,da(t,n)];case 15:return i=K.apply(void 0,[K.apply(void 0,E.concat([Re.sent()])),{name:o,$metadata:st(e)}]),[3,19];case 16:return A=[{}],[4,Do(t,n)];case 17:return i=K.apply(void 0,[K.apply(void 0,A.concat([Re.sent()])),{name:o,$metadata:st(e)}]),[3,19];case 18:o=(I=t.body).code||I.Code||o,i=K(K({},I),{name:""+o,message:I.message||I.Message||o,$fault:"client",$metadata:st(e)}),Re.label=19;case 19:return i.message=se=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(se),i))]}})})},P0=function(e,n){return wt(void 0,void 0,void 0,function(){var r;return bt(this,function(o){return r=Z8(e.body,n),[2,K({name:"ExternalServiceException",$fault:"client",$metadata:st(e)},r)]})})},Ao=function(e,n){return wt(void 0,void 0,void 0,function(){var r;return bt(this,function(o){return r=sq(e.body,n),[2,K({name:"InternalErrorException",$fault:"server",$metadata:st(e)},r)]})})},f8=function(e,n){return wt(void 0,void 0,void 0,function(){var r;return bt(this,function(o){return r=uq(e.body,n),[2,K({name:"InvalidIdentityPoolConfigurationException",$fault:"client",$metadata:st(e)},r)]})})},Ro=function(e,n){return wt(void 0,void 0,void 0,function(){var r;return bt(this,function(o){return r=lq(e.body,n),[2,K({name:"InvalidParameterException",$fault:"client",$metadata:st(e)},r)]})})},NE=function(e,n){return wt(void 0,void 0,void 0,function(){var r;return bt(this,function(o){return r=cq(e.body,n),[2,K({name:"LimitExceededException",$fault:"client",$metadata:st(e)},r)]})})},Ko=function(e,n){return wt(void 0,void 0,void 0,function(){var r;return bt(this,function(o){return r=yq(e.body,n),[2,K({name:"NotAuthorizedException",$fault:"client",$metadata:st(e)},r)]})})},qu=function(e,n){return wt(void 0,void 0,void 0,function(){var r;return bt(this,function(o){return r=wq(e.body,n),[2,K({name:"ResourceConflictException",$fault:"client",$metadata:st(e)},r)]})})},da=function(e,n){return wt(void 0,void 0,void 0,function(){var r;return bt(this,function(o){return r=xq(e.body,n),[2,K({name:"ResourceNotFoundException",$fault:"client",$metadata:st(e)},r)]})})},Do=function(e,n){return wt(void 0,void 0,void 0,function(){var r;return bt(this,function(o){return r=Aq(e.body,n),[2,K({name:"TooManyRequestsException",$fault:"client",$metadata:st(e)},r)]})})},Ov=function(e,n){return Object.entries(e).reduce(function(t,r){var i,o=ne(r,2),a=o[0],u=o[1];return null===u?t:K(K({},t),((i={})[a]=u,i))},{})},K8=function(e,n){return{AccessKeyId:null!=e.AccessKeyId?e.AccessKeyId:void 0,Expiration:null!=e.Expiration?new Date(Math.round(1e3*e.Expiration)):void 0,SecretKey:null!=e.SecretKey?e.SecretKey:void 0,SessionToken:null!=e.SessionToken?e.SessionToken:void 0}},Z8=function(e,n){return{message:null!=e.message?e.message:void 0}},sq=function(e,n){return{message:null!=e.message?e.message:void 0}},uq=function(e,n){return{message:null!=e.message?e.message:void 0}},lq=function(e,n){return{message:null!=e.message?e.message:void 0}},cq=function(e,n){return{message:null!=e.message?e.message:void 0}},yq=function(e,n){return{message:null!=e.message?e.message:void 0}},wq=function(e,n){return{message:null!=e.message?e.message:void 0}},xq=function(e,n){return{message:null!=e.message?e.message:void 0}},Aq=function(e,n){return{message:null!=e.message?e.message:void 0}},st=function(e){var n;return{httpStatusCode:e.statusCode,requestId:null!==(n=e.headers["x-amzn-requestid"])&&void 0!==n?n:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},Oo=function(e,n,t,r,i){return wt(void 0,void 0,void 0,function(){var o,u,f;return bt(this,function(_){switch(_.label){case 0:return[4,e.endpoint()];case 1:return o=_.sent(),f={protocol:void 0===(u=o.protocol)?"https":u,hostname:o.hostname,port:o.port,method:"POST",path:t,headers:n},void 0!==r&&(f.hostname=r),void 0!==i&&(f.body=i),[2,new Io(f)]}})})},Rr=function(e,n){return function(e,n){return function(e,n){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):n.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,n).then(function(t){return n.utf8Encoder(t)})}(e,n).then(function(t){return t.length?JSON.parse(t):{}})},ko=function(e,n){var r=function(o){var a=o;return a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},i=("x-amzn-errortype",Object.keys(e.headers).find(function(u){return u.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==i?r(e.headers[i]):void 0!==n.code?r(n.code):void 0!==n.__type?r(n.__type):""},I0=function(){return I0=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},I0.apply(this,arguments)};function L2(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}function B2(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}var Bq={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},zq={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function cu(e,n,t){return{applyToStack:function(r){r.add(function(e,n){return function(t,r){return function(i){return L2(void 0,void 0,void 0,function(){var o,a;return B2(this,function(u){switch(u.label){case 0:return[4,t(i)];case 1:return o=u.sent().response,[4,n(o,e)];case 2:return a=u.sent(),[2,{response:o,output:a}]}})})}}}(e,t),Bq),r.add(function(e,n){return function(t,r){return function(i){return L2(void 0,void 0,void 0,function(){var o;return B2(this,function(a){switch(a.label){case 0:return[4,n(i.input,e)];case 1:return o=a.sent(),[2,t(I0(I0({},i),{request:o}))]}})})}}}(e,n),zq)}}}var wc=function(){return wc=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},wc.apply(this,arguments)};function jq(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}function UE(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(jq(arguments[n]));return e}var D0=function(){var e=[],n=[],t=new Set,a=function(f){return e.forEach(function(_){f.add(_.middleware,wc({},_))}),n.forEach(function(_){f.addRelativeTo(_.middleware,wc({},_))}),f},u=function(f){var _=[];return f.before.forEach(function(m){0===m.before.length&&0===m.after.length?_.push(m):_.push.apply(_,UE(u(m)))}),_.push(f),f.after.reverse().forEach(function(m){0===m.before.length&&0===m.after.length?_.push(m):_.push.apply(_,UE(u(m)))}),_},l={add:function(f,_){void 0===_&&(_={});var m=_.name,E=_.override,A=wc({step:"initialize",priority:"normal",middleware:f},_);if(m){if(t.has(m)){if(!E)throw new Error("Duplicate middleware name '"+m+"'");var I=e.findIndex(function(me){return me.name===m}),se=e[I];if(se.step!==A.step||se.priority!==A.priority)throw new Error('"'+m+'" middleware with '+se.priority+" priority in "+se.step+" step cannot be overridden by same-name middleware with "+A.priority+" priority in "+A.step+" step.");e.splice(I,1)}t.add(m)}e.push(A)},addRelativeTo:function(f,_){var m=_.name,E=_.override,A=wc({middleware:f},_);if(m){if(t.has(m)){if(!E)throw new Error("Duplicate middleware name '"+m+"'");var I=n.findIndex(function(me){return me.name===m}),se=n[I];if(se.toMiddleware!==A.toMiddleware||se.relation!==A.relation)throw new Error('"'+m+'" middleware '+se.relation+' "'+se.toMiddleware+'" middleware cannot be overridden by same-name middleware '+A.relation+' "'+A.toMiddleware+'" middleware.');n.splice(I,1)}t.add(m)}n.push(A)},clone:function(){return a(D0())},use:function(f){f.applyToStack(l)},remove:function(f){return"string"==typeof f?function(f){var _=!1,m=function(E){return!E.name||E.name!==f||(_=!0,t.delete(f),!1)};return e=e.filter(m),n=n.filter(m),_}(f):function(f){var _=!1,m=function(E){return E.middleware!==f||(_=!0,E.name&&t.delete(E.name),!1)};return e=e.filter(m),n=n.filter(m),_}(f)},removeByTag:function(f){var _=!1,m=function(E){var A=E.tags,I=E.name;return!A||!A.includes(f)||(I&&t.delete(I),_=!0,!1)};return e=e.filter(m),n=n.filter(m),_},concat:function(f){var _=a(D0());return _.use(f),_},applyToStack:a,resolve:function(f,_){var m,E;try{for(var A=function FE(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(function(){var f=[],_=[],m={};e.forEach(function(A){var I=wc(wc({},A),{before:[],after:[]});I.name&&(m[I.name]=I),f.push(I)}),n.forEach(function(A){var I=wc(wc({},A),{before:[],after:[]});I.name&&(m[I.name]=I),_.push(I)}),_.forEach(function(A){if(A.toMiddleware){var I=m[A.toMiddleware];if(void 0===I)throw new Error(A.toMiddleware+" is not found when adding "+(A.name||"anonymous")+" middleware "+A.relation+" "+A.toMiddleware);"after"===A.relation&&I.after.push(A),"before"===A.relation&&I.before.push(A)}});var E=function(f){return f.sort(function(_,m){return j2[m.step]-j2[_.step]||F2[m.priority||"normal"]-F2[_.priority||"normal"]})}(f).map(u).reduce(function(A,I){return A.push.apply(A,UE(I)),A},[]);return E.map(function(A){return A.middleware})}().reverse()),I=A.next();!I.done;I=A.next())f=(0,I.value)(f,_)}catch(me){m={error:me}}finally{try{I&&!I.done&&(E=A.return)&&E.call(A)}finally{if(m)throw m.error}}return f}};return l},j2={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},F2={high:3,normal:2,low:1},U2=function(){function e(n){this.middlewareStack=D0(),this.config=n}return e.prototype.send=function(n,t,r){var o="function"==typeof t?t:r,a=n.resolveMiddleware(this.middlewareStack,this.config,"function"!=typeof t?t:void 0);if(!o)return a(n).then(function(u){return u.output});a(n).then(function(u){return o(null,u.output)},function(u){return o(u)}).catch(function(){})},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),du=function e(){this.middlewareStack=D0()};function Xo(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(n){return"%"+n.charCodeAt(0).toString(16)})}var Mv=function(e){return Array.isArray(e)?e:[e]},q2=function(e){var n="#text";for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t][n]?e[t]=e[t][n]:"object"==typeof e[t]&&null!==e[t]&&(e[t]=q2(e[t]));return e},qE=function(e,n){return(qE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(e,n)};function Uq(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}function qq(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(Uq(arguments[n]));return e}var k0=function(){var e=Object.getPrototypeOf(this).constructor,n=Function.bind.apply(String,qq([null],arguments)),t=new n;return Object.setPrototypeOf(t,e.prototype),t};k0.prototype=Object.create(String.prototype,{constructor:{value:k0,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(k0,String),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}(function Fq(e,n){function t(){this.constructor=e}qE(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)})(n,e),n.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},n.prototype.toJSON=function(){return e.prototype.toString.call(this)},n.fromObject=function(t){return t instanceof n?t:new n(t instanceof String||"string"==typeof t?t:JSON.stringify(t))}}(k0);var Vq=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Gq=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function rp(e){var n=e.getUTCFullYear(),t=e.getUTCMonth(),r=e.getUTCDay(),i=e.getUTCDate(),o=e.getUTCHours(),a=e.getUTCMinutes(),u=e.getUTCSeconds();return Vq[r]+", "+(i<10?"0"+i:""+i)+" "+Gq[t]+" "+n+" "+(o<10?"0"+o:""+o)+":"+(a<10?"0"+a:""+a)+":"+(u<10?"0"+u:""+u)+" GMT"}var Mo="***SensitiveInformation***",VE=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Ut(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(cu(r,this.serialize,this.deserialize));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"CognitoIdentityClient",commandName:"GetCredentialsForIdentityCommand",inputFilterSensitiveLog:x0.filterSensitiveLog,outputFilterSensitiveLog:E0.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r;return bt(this,function(i){return t={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetCredentialsForIdentity"},r=JSON.stringify(function(e,n){return K(K(K({},null!=e.CustomRoleArn&&{CustomRoleArn:e.CustomRoleArn}),null!=e.IdentityId&&{IdentityId:e.IdentityId}),null!=e.Logins&&{Logins:Ov(e.Logins,n)})}(e,n)),[2,Oo(n,t,"/",void 0,r)]})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i;return bt(this,function(o){switch(o.label){case 0:return e.statusCode>=300?[2,X5(e,n)]:[4,Rr(e.body,n)];case 1:return t=o.sent(),r=function(e,n){return{Credentials:null!=e.Credentials?K8(e.Credentials):void 0,IdentityId:null!=e.IdentityId?e.IdentityId:void 0}}(t),i=K({$metadata:st(e)},r),[2,Promise.resolve(i)]}})})}(t,r)},n}(du),GE=function(e,n){return(GE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(e,n)},N0=function(e){function n(t,r){void 0===r&&(r=!0);var i=e.call(this,t)||this;return i.tryNextLink=r,i}return function Hq(e,n){function t(){this.constructor=e}GE(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}(n,e),n}(Error);function K2(e){return Promise.all(Object.keys(e).reduce(function(n,t){var r=e[t];return n.push("string"==typeof r?[t,r]:r().then(function(i){return[t,i]})),n},[])).then(function(n){return n.reduce(function(t,r){var i=function P2(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}(r,2);return t[i[0]]=i[1],t},{})})}function Nv(e){var n=this;return function(){return OE(n,void 0,void 0,function(){var t,r,i,o,a,u,d,f,_,m,E,A;return kE(this,function(I){switch(I.label){case 0:return _=(f=e.client).send,m=VE.bind,A={CustomRoleArn:e.customRoleArn,IdentityId:e.identityId},e.logins?[4,K2(e.logins)]:[3,2];case 1:return E=I.sent(),[3,3];case 2:E=void 0,I.label=3;case 3:return[4,_.apply(f,[new(m.apply(VE,[void 0,(A.Logins=E,A)]))])];case 4:return t=I.sent().Credentials,r=void 0===t?function Xq(){throw new N0("Response from Amazon Cognito contained no credentials")}():t,o=void 0===(i=r.AccessKeyId)?function Kq(){throw new N0("Response from Amazon Cognito contained no access key ID")}():i,a=r.Expiration,d=void 0===(u=r.SecretKey)?function Wq(){throw new N0("Response from Amazon Cognito contained no secret key")}():u,[2,{identityId:e.identityId,accessKeyId:o,secretAccessKey:d,sessionToken:r.SessionToken,expiration:a}]}})})}}var Lv=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Ut(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(cu(r,this.serialize,this.deserialize));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"CognitoIdentityClient",commandName:"GetIdCommand",inputFilterSensitiveLog:S0.filterSensitiveLog,outputFilterSensitiveLog:C0.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r;return bt(this,function(i){return t={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetId"},r=JSON.stringify(function(e,n){return K(K(K({},null!=e.AccountId&&{AccountId:e.AccountId}),null!=e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId}),null!=e.Logins&&{Logins:Ov(e.Logins,n)})}(e,n)),[2,Oo(n,t,"/",void 0,r)]})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i;return bt(this,function(o){switch(o.label){case 0:return e.statusCode>=300?[2,J5(e,n)]:[4,Rr(e.body,n)];case 1:return t=o.sent(),r=function(e,n){return{IdentityId:null!=e.IdentityId?e.IdentityId:void 0}}(t),i=K({$metadata:st(e)},r),[2,Promise.resolve(i)]}})})}(t,r)},n}(du),HE="IdentityIds",Jq=function(){function e(n){void 0===n&&(n="aws:cognito-identity-ids"),this.dbName=n}return e.prototype.getItem=function(n){return this.withObjectStore("readonly",function(t){var r=t.get(n);return new Promise(function(i){r.onerror=function(){return i(null)},r.onsuccess=function(){return i(r.result?r.result.value:null)}})}).catch(function(){return null})},e.prototype.removeItem=function(n){return this.withObjectStore("readwrite",function(t){var r=t.delete(n);return new Promise(function(i,o){r.onerror=function(){return o(r.error)},r.onsuccess=function(){return i()}})})},e.prototype.setItem=function(n,t){return this.withObjectStore("readwrite",function(r){var i=r.put({id:n,value:t});return new Promise(function(o,a){i.onerror=function(){return a(i.error)},i.onsuccess=function(){return o()}})})},e.prototype.getDb=function(){var n=self.indexedDB.open(this.dbName,1);return new Promise(function(t,r){n.onsuccess=function(){t(n.result)},n.onerror=function(){r(n.error)},n.onblocked=function(){r(new Error("Unable to access DB"))},n.onupgradeneeded=function(){var i=n.result;i.onerror=function(){r(new Error("Failed to create object store"))},i.createObjectStore(HE,{keyPath:"id"})}})},e.prototype.withObjectStore=function(n,t){return this.getDb().then(function(r){var i=r.transaction(HE,n);return i.oncomplete=function(){return r.close()},new Promise(function(o,a){i.onerror=function(){return a(i.error)},o(t(i.objectStore(HE)))}).catch(function(o){throw r.close(),o})})},e}(),Zq=function(){function e(n){void 0===n&&(n={}),this.store=n}return e.prototype.getItem=function(n){return n in this.store?this.store[n]:null},e.prototype.removeItem=function(n){delete this.store[n]},e.prototype.setItem=function(n,t){this.store[n]=t},e}(),Yq=new Zq;var X2=G(9801);function J2(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}function Z2(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}var ip=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,oV)},oV=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function JE(e){var n,t,r=[];try{for(var i=function WE(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var a=o.value,u=e[a];if(a=ip(a),Array.isArray(u))for(var d=0,l=u.length;d<l;d++)r.push(a+"="+ip(u[d]));else{var f=a;(u||"string"==typeof u)&&(f+="="+ip(u)),r.push(f)}}}catch(_){n={error:_}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(n)throw n.error}}return r.join("&")}function aV(e){return void 0===e&&(e=0),new Promise(function(n,t){e&&setTimeout(function(){var r=new Error("Request did not complete within "+e+" ms");r.name="TimeoutError",t(r)},e)})}for(var Q2=function(){function e(n){this.requestTimeout=(void 0===n?{}:n).requestTimeout}return e.prototype.destroy=function(){},e.prototype.handle=function(n,t){var i=(void 0===t?{}:t).abortSignal,o=this.requestTimeout;if(null==i?void 0:i.aborted){var a=new Error("Request aborted");return a.name="AbortError",Promise.reject(a)}var u=n.path;if(n.query){var d=JE(n.query);d&&(u+="?"+d)}var l=n.port,f=n.method,_=n.protocol+"//"+n.hostname+(l?":"+l:"")+u,E={body:"GET"===f||"HEAD"===f?void 0:n.body,headers:new Headers(n.headers),method:f};"undefined"!=typeof AbortController&&(E.signal=i);var A=new Request(_,E),I=[fetch(A).then(function(se){var me,Re,it=se.headers,gt={};try{for(var At=function KE(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(it.entries()),Vt=At.next();!Vt.done;Vt=At.next()){var wn=Vt.value;gt[wn[0]]=wn[1]}}catch(ar){me={error:ar}}finally{try{Vt&&!Vt.done&&(Re=At.return)&&Re.call(At)}finally{if(me)throw me.error}}return void 0!==se.body?{response:new Dv({headers:gt,statusCode:se.status,body:se.body})}:se.blob().then(function(ar){return{response:new Dv({headers:gt,statusCode:se.status,body:ar})}})}),aV(o)];return i&&I.push(new Promise(function(se,me){i.onabort=function(){var Re=new Error("Request aborted");Re.name="AbortError",me(Re)}})),Promise.race(I)},e}(),op={},Pm=new Array(64),ka=0,Bv="A".charCodeAt(0),ZE="Z".charCodeAt(0);ka+Bv<=ZE;ka++){var kf=String.fromCharCode(ka+Bv);op[kf]=ka,Pm[ka]=kf}for(ka=0,Bv="a".charCodeAt(0),ZE="z".charCodeAt(0);ka+Bv<=ZE;ka++)kf=String.fromCharCode(ka+Bv),op[kf]=zv=ka+26,Pm[zv]=kf;for(ka=0;ka<10;ka++){var zv;op[ka.toString(10)]=ka+52,kf=ka.toString(10),op[kf]=zv=ka+52,Pm[zv]=kf}function YE(e){var n=e.length/4*3;"=="===e.substr(-2)?n-=2:"="===e.substr(-1)&&n--;for(var t=new ArrayBuffer(n),r=new DataView(t),i=0;i<e.length;i+=4){for(var o=0,a=0,u=i,d=i+3;u<=d;u++)"="!==e[u]?(o|=op[e[u]]<<6*(d-u),a+=6):o>>=6;var l=i/4*3;o>>=a%8;for(var f=Math.floor(a/8),_=0;_<f;_++){var m=8*(f-_-1);r.setUint8(l+_,(o&255<<m)>>m)}}return new Uint8Array(t)}function eD(e){for(var n="",t=0;t<e.length;t+=3){for(var r=0,i=0,o=t,a=Math.min(t+3,e.length);o<a;o++)r|=e[o]<<8*(a-o-1),i+=8;var u=Math.ceil(i/6);r<<=6*u-i;for(var d=1;d<=u;d++){var l=6*(u-d);n+=Pm[(r&63<<l)>>l]}n+="==".slice(0,4-u)}return n}op["+"]=62,Pm[62]="+",op["/"]=63,Pm[63]="/";var tD=function(e){return"function"==typeof Blob&&e instanceof Blob?function uV(e){return J2(this,void 0,void 0,function(){var n,t;return Z2(this,function(r){switch(r.label){case 0:return[4,cV(e)];case 1:return n=r.sent(),t=YE(n),[2,new Uint8Array(t)]}})})}(e):function lV(e){return J2(this,void 0,void 0,function(){var n,t,r,i,o,a,u;return Z2(this,function(d){switch(d.label){case 0:n=new Uint8Array(0),t=e.getReader(),r=!1,d.label=1;case 1:return r?[3,3]:[4,t.read()];case 2:return i=d.sent(),o=i.done,(a=i.value)&&(u=n,(n=new Uint8Array(u.length+a.length)).set(u),n.set(a,u.length)),r=o,[3,1];case 3:return[2,n]}})})}(e)};function cV(e){return new Promise(function(n,t){var r=new FileReader;r.onloadend=function(){var i;if(2!==r.readyState)return t(new Error("Reader aborted too early"));var o=null!==(i=r.result)&&void 0!==i?i:"",a=o.indexOf(",");n(o.substring(a>-1?a+1:o.length))},r.onabort=function(){return t(new Error("Read aborted"))},r.onerror=function(){return t(r.error)},r.readAsDataURL(e)})}var nD=function(e){return function(){return Promise.reject(e)}},z0=function(){return z0=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},z0.apply(this,arguments)};function eS(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}function j0(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}function dV(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}var pV={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},iD=function(e){return{applyToStack:function(n){n.add(function(e){return function(n,t){return function(r){return eS(void 0,void 0,void 0,function(){var i;return j0(this,function(o){return(null===(i=null==e?void 0:e.retryStrategy)||void 0===i?void 0:i.mode)&&(t.userAgent=function fV(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(dV(arguments[n]));return e}(t.userAgent||[],[["cfg/retry-mode",e.retryStrategy.mode]])),[2,e.retryStrategy.retry(n,r)]})})}}}(e),pV)}}},vV=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],_V=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],yV=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],bV=[500,502,503,504],oD=function(e){var n,t;return 429===(null===(n=e.$metadata)||void 0===n?void 0:n.httpStatusCode)||_V.includes(e.name)||1==(null===(t=e.$retryable)||void 0===t?void 0:t.throttling)},SV=G(4920),NV=function(e,n){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,n)*e))},LV=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return vV.includes(e.name)}(e)||oD(e)||function(e){var n;return yV.includes(e.name)||bV.includes((null===(n=e.$metadata)||void 0===n?void 0:n.httpStatusCode)||0)}(e))},BV=function(){function e(n,t){var r,i,o;this.maxAttemptsProvider=n,this.mode="standard",this.retryDecider=null!==(r=null==t?void 0:t.retryDecider)&&void 0!==r?r:LV,this.delayDecider=null!==(i=null==t?void 0:t.delayDecider)&&void 0!==i?i:NV,this.retryQuota=null!==(o=null==t?void 0:t.retryQuota)&&void 0!==o?o:function(e){var t=500,r=function(u){return"TimeoutError"===u.name?10:5},i=function(u){return r(u)<=t};return Object.freeze({hasRetryTokens:i,retrieveRetryTokens:function(u){if(!i(u))throw new Error("No retry token available");var d=r(u);return t-=d,d},releaseRetryTokens:function(u){t+=null!=u?u:1,t=Math.min(t,500)}})}()}return e.prototype.shouldRetry=function(n,t,r){return t<r&&this.retryDecider(n)&&this.retryQuota.hasRetryTokens(n)},e.prototype.getMaxAttempts=function(){return eS(this,void 0,void 0,function(){var n;return j0(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return n=r.sent(),[3,3];case 2:return r.sent(),n=3,[3,3];case 3:return[2,n]}})})},e.prototype.retry=function(n,t){return eS(this,void 0,void 0,function(){var r,i,o,a,u,d,l,f;return j0(this,function(_){switch(_.label){case 0:return i=0,o=0,[4,this.getMaxAttempts()];case 1:a=_.sent(),Io.isInstance(u=t.request)&&(u.headers["amz-sdk-invocation-id"]=(0,SV.v4)()),d=function(){var m,E,A,I,se;return j0(this,function(me){switch(me.label){case 0:return me.trys.push([0,2,,5]),Io.isInstance(u)&&(u.headers["amz-sdk-request"]="attempt="+(i+1)+"; max="+a),[4,n(t)];case 1:return m=me.sent(),E=m.response,A=m.output,l.retryQuota.releaseRetryTokens(r),A.$metadata.attempts=i+1,A.$metadata.totalRetryDelay=o,[2,{value:{response:E,output:A}}];case 2:return I=me.sent(),i++,l.shouldRetry(I,i,a)?(r=l.retryQuota.retrieveRetryTokens(I),se=l.delayDecider(oD(I)?500:100,i),o+=se,[4,new Promise(function(Re){return setTimeout(Re,se)})]):[3,4];case 3:return me.sent(),[2,"continue"];case 4:throw I.$metadata||(I.$metadata={}),I.$metadata.attempts=i,I.$metadata.totalRetryDelay=o,I;case 5:return[2]}})},l=this,_.label=2;case 2:return[5,d()];case 3:return"object"==typeof(f=_.sent())?[2,f.value]:[3,2];case 4:return[2]}})})},e}(),lD=function(e){var n=zV(e.maxAttempts);return z0(z0({},e),{maxAttempts:n,retryStrategy:e.retryStrategy||new BV(n)})},zV=function(e){if(void 0===e&&(e=3),"number"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e};function cD(e){if("string"==typeof e){for(var n=e.length,t=n-1;t>=0;t--){var r=e.charCodeAt(t);r>127&&r<=2047?n++:r>2047&&r<=65535&&(n+=2)}return n}return"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:void 0}var GV=G(7230),nS=G.n(GV),hD=function(e){var n=e.serviceId,t=e.clientVersion;return function(){return function UV(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}(void 0,void 0,void 0,function(){var r,i,o,a,u,d,l,f,_;return function qV(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(m){return r=(null===(o=null==window?void 0:window.navigator)||void 0===o?void 0:o.userAgent)?nS().parse(window.navigator.userAgent):void 0,i=[["aws-sdk-js",t],["os/"+((null===(a=null==r?void 0:r.os)||void 0===a?void 0:a.name)||"other"),null===(u=null==r?void 0:r.os)||void 0===u?void 0:u.version],["lang/js"],["md/browser",(null!==(l=null===(d=null==r?void 0:r.browser)||void 0===d?void 0:d.name)&&void 0!==l?l:"unknown")+"_"+(null!==(_=null===(f=null==r?void 0:r.browser)||void 0===f?void 0:f.version)&&void 0!==_?_:"unknown")]],n&&i.push(["api/"+n,t]),[2,i]})})}},pD="cognito-identity.{region}.amazonaws.com",tG=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),nG=new Set(["cn-north-1","cn-northwest-1"]),rG=new Set(["us-iso-east-1"]),iG=new Set(["us-isob-east-1"]),oG=new Set(["us-gov-east-1","us-gov-west-1"]);function gD(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}var vD=function(e){var u,n=new URL(e),t=n.hostname,r=n.pathname,i=n.port,o=n.protocol,a=n.search;return a&&(u=function sG(e){var n,t,r={};if(e=e.replace(/^\?/,""))try{for(var i=function iS(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e.split("&")),o=i.next();!o.done;o=i.next()){var u=gD(o.value.split("="),2),d=u[0],l=u[1],f=void 0===l?null:l;d=decodeURIComponent(d),f&&(f=decodeURIComponent(f)),d in r?Array.isArray(r[d])?r[d].push(f):r[d]=[r[d],f]:r[d]=f}}catch(_){n={error:_}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(n)throw n.error}}return r}(a)),{hostname:t,port:i?parseInt(i):void 0,protocol:o,path:r,query:u}},_D={apiVersion:"2014-06-30",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,n){var t=void 0;switch(e){case"ap-northeast-1":t={hostname:"cognito-identity.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":t={hostname:"cognito-identity.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":t={hostname:"cognito-identity.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":t={hostname:"cognito-identity.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":t={hostname:"cognito-identity.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":t={hostname:"cognito-identity.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":t={hostname:"cognito-identity.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":t={hostname:"cognito-identity.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":t={hostname:"cognito-identity.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":t={hostname:"cognito-identity.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":t={hostname:"cognito-identity.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":t={hostname:"cognito-identity.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-east-1":t={hostname:"cognito-identity-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-east-2":t={hostname:"cognito-identity-fips.us-east-2.amazonaws.com",partition:"aws",signingRegion:"us-east-2"};break;case"fips-us-gov-west-1":t={hostname:"cognito-identity-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"fips-us-west-2":t={hostname:"cognito-identity-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"sa-east-1":t={hostname:"cognito-identity.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":t={hostname:"cognito-identity.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":t={hostname:"cognito-identity.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-west-1":t={hostname:"cognito-identity.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-west-1":t={hostname:"cognito-identity.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":t={hostname:"cognito-identity.us-west-2.amazonaws.com",partition:"aws"};break;default:tG.has(e)&&(t={hostname:pD.replace("{region}",e),partition:"aws"}),nG.has(e)&&(t={hostname:"cognito-identity.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),rG.has(e)&&(t={hostname:"cognito-identity.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),iG.has(e)&&(t={hostname:"cognito-identity.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),oG.has(e)&&(t={hostname:"cognito-identity.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===t&&(t={hostname:pD.replace("{region}",e),partition:"aws"})}return Promise.resolve(K({signingService:"cognito-identity"},t))},serviceId:"Cognito Identity",urlParser:vD},uG=K(K({},_D),{runtime:"browser",base64Decoder:YE,base64Encoder:eD,bodyLengthChecker:cD,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:hD({serviceId:_D.serviceId,clientVersion:"3.6.1"}),maxAttempts:3,region:nD("Region is missing"),requestHandler:new Q2,sha256:X2.Sha256,streamCollector:tD,utf8Decoder:function(e){return"function"==typeof TextEncoder?function KV(e){return(new TextEncoder).encode(e)}(e):function(e){for(var n=[],t=0,r=e.length;t<r;t++){var i=e.charCodeAt(t);if(i<128)n.push(i);else if(i<2048)n.push(i>>6|192,63&i|128);else if(t+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(t+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++t));n.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else n.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(n)}(e)},utf8Encoder:function(e){return"function"==typeof TextDecoder?function XV(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var n="",t=0,r=e.length;t<r;t++){var i=e[t];if(i<128)n+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++t];n+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var u="%"+[i,e[++t],e[++t],e[++t]].map(function(d){return d.toString(16)}).join("%");n+=decodeURIComponent(u)}else n+=String.fromCharCode((15&i)<<12|(63&e[++t])<<6|63&e[++t])}return n}(e)}}),Am=function(){return Am=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},Am.apply(this,arguments)};var bD=function(e){var n;return Am(Am({},e),{tls:null===(n=e.tls)||void 0===n||n,endpoint:e.endpoint?fG(e):function(){return hG(e)},isCustomEndpoint:!!e.endpoint})},fG=function(e){var n=e.endpoint;if("string"==typeof n){var r=Promise.resolve((0,e.urlParser)(n));return function(){return r}}if("object"==typeof n){var i=Promise.resolve(n);return function(){return i}}return n},hG=function(e){return function lG(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}(void 0,void 0,void 0,function(){var n,t,r,o,a;return function cG(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(u){switch(u.label){case 0:return t=void 0===(n=e.tls)||n,[4,e.region()];case 1:if(r=u.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");return[4,e.regionInfoProvider(r)];case 2:if(!(o=(null!==(a=u.sent())&&void 0!==a?a:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((t?"https:":"http:")+"//"+o)]}})})},wD=function(e){if(!e.region)throw new Error("Region is missing");return Am(Am({},e),{region:gG(e.region)})},gG=function(e){if("string"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e},Rm=function(){return Rm=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},Rm.apply(this,arguments)};var ED="content-length",wG={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},SD=function(e){return{applyToStack:function(n){n.add(function bG(e){var n=this;return function(t){return function(r){return function vG(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}(n,void 0,void 0,function(){var i,o,a,u,d;return function _G(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(l){return Io.isInstance(i=r.request)&&(a=i.headers,(o=i.body)&&-1===Object.keys(a).map(function(f){return f.toLowerCase()}).indexOf(ED)&&void 0!==(u=e(o))&&(i.headers=Rm(Rm({},i.headers),((d={})[ED]=String(u),d)))),[2,t(Rm(Rm({},r),{request:i}))]})})}}}(e.bodyLengthChecker),wG)}}};var TG={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},PD=function(e){return{applyToStack:function(n){n.add(function(e){return function(n){return function(t){return function xG(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}(void 0,void 0,void 0,function(){var r,i;return function EG(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(a){return Io.isInstance(t.request)?(r=t.request,(void 0===(i=(e.requestHandler.metadata||{}).handlerProtocol)?"":i).indexOf("h2")>=0&&!r.headers[":authority"]?(delete r.headers.host,r.headers[":authority"]=""):r.headers.host||(r.headers.host=r.hostname),[2,n(t)]):[2,n(t)]})})}}}(e),TG)}}};var DG=function(){return function(e,n){return function(t){return function IG(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}(void 0,void 0,void 0,function(){var r,i,o,a,u,d,l,f,_;return function AG(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(m){switch(m.label){case 0:return r=n.clientName,i=n.commandName,o=n.inputFilterSensitiveLog,a=n.logger,u=n.outputFilterSensitiveLog,[4,e(t)];case 1:return d=m.sent(),a?("function"==typeof a.info&&(f=(l=d.output).$metadata,_=function PG(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}(l,["$metadata"]),a.info({clientName:r,commandName:i,input:o(t.input),output:u(_),metadata:f})),[2,d]):[2,d]}})})}}},OG={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},RD=function(e){return{applyToStack:function(n){n.add(DG(),OG)}}},Dm=function(){return Dm=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},Dm.apply(this,arguments)};function DD(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}function OD(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}var md=function(){return md=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},md.apply(this,arguments)};function gd(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}function vd(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}function _d(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function MG(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}for(var ND={},dS={},Uv=0;Uv<256;Uv++){var qv=Uv.toString(16).toLowerCase();1===qv.length&&(qv="0"+qv),ND[Uv]=qv,dS[qv]=Uv}function Vs(e){for(var n="",t=0;t<e.byteLength;t++)n+=ND[e[t]];return n}var LD="X-Amz-Date",BD="X-Amz-Signature",zD="X-Amz-Security-Token",jD="authorization",FD=LD.toLowerCase(),qG=[jD,FD,"date"],VG=BD.toLowerCase(),fS="x-amz-content-sha256",GG=zD.toLowerCase(),HG={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},$G=/^proxy-/,KG=/^sec-/,hS="AWS4-HMAC-SHA256",XG="AWS4-HMAC-SHA256-PAYLOAD",UD="aws4_request",Om={},W0=[];function pS(e,n,t){return e+"/"+n+"/"+t+"/"+UD}function qD(e,n,t){var r=new e(n);return r.update(t),r.digest()}function VD(e,n,t){var r,i,o=e.headers,a={};try{for(var u=_d(Object.keys(o).sort()),d=u.next();!d.done;d=u.next()){var l=d.value,f=l.toLowerCase();(f in HG||(null==n?void 0:n.has(f))||$G.test(f)||KG.test(f))&&(!t||t&&!t.has(f))||(a[f]=o[l].trim().replace(/\s+/g," "))}}catch(_){r={error:_}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a}function mS(e,n){var t=e.headers,r=e.body;return gd(this,void 0,void 0,function(){var i,o,a,u,d,l,f;return vd(this,function(_){switch(_.label){case 0:try{for(i=_d(Object.keys(t)),o=i.next();!o.done;o=i.next())if((a=o.value).toLowerCase()===fS)return[2,t[a]]}catch(m){l={error:m}}finally{try{o&&!o.done&&(f=i.return)&&f.call(i)}finally{if(l)throw l.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||function(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)}(r)?((u=new n).update(r),d=Vs,[4,u.digest()]):[3,3];case 2:return[2,d.apply(void 0,[_.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}})})}function GD(e){var n=e.headers,t=e.query,r=function kG(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}(e,["headers","query"]);return md(md({},r),{headers:md({},n),query:t?nH(t):void 0})}function nH(e){return Object.keys(e).reduce(function(n,t){var r,i=e[t];return md(md({},n),((r={})[t]=Array.isArray(i)?function NG(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(MG(arguments[n]));return e}(i):i,r))},{})}function HD(e){var n,t;e="function"==typeof e.clone?e.clone():GD(e);try{for(var r=_d(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;qG.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(a){n={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(n)throw n.error}}return e}var $D=function(){function e(n){var t=n.applyChecksum,r=n.credentials,i=n.region,a=n.sha256,u=n.uriEscapePath,d=void 0===u||u;this.service=n.service,this.sha256=a,this.uriEscapePath=d,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=aH(i),this.credentialProvider=sH(r)}return e.prototype.presign=function(n,t){return void 0===t&&(t={}),gd(this,void 0,void 0,function(){var r,i,o,a,u,d,l,f,_,m,E,A,I,se,me,Re,it,gt,At,Vt,wn,yn,ar,Or;return vd(this,function(Dn){switch(Dn.label){case 0:return i=void 0===(r=t.signingDate)?new Date:r,a=void 0===(o=t.expiresIn)?3600:o,u=t.unsignableHeaders,d=t.unhoistableHeaders,l=t.signableHeaders,f=t.signingRegion,_=t.signingService,[4,this.credentialProvider()];case 1:return m=Dn.sent(),null==f?[3,2]:(A=f,[3,4]);case 2:return[4,this.regionProvider()];case 3:A=Dn.sent(),Dn.label=4;case 4:return E=A,I=J0(i),se=I.longDate,me=I.shortDate,a>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(Re=pS(me,E,null!=_?_:this.service),it=function rH(e,n){var t,r,i;void 0===n&&(n={});var o="function"==typeof e.clone?e.clone():GD(e),a=o.headers,u=o.query,d=void 0===u?{}:u;try{for(var l=_d(Object.keys(a)),f=l.next();!f.done;f=l.next()){var _=f.value,m=_.toLowerCase();"x-amz-"===m.substr(0,6)&&!(null===(i=n.unhoistableHeaders)||void 0===i?void 0:i.has(m))&&(d[_]=a[_],delete a[_])}}catch(E){t={error:E}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return md(md({},e),{headers:a,query:d})}(HD(n),{unhoistableHeaders:d}),m.sessionToken&&(it.query[zD]=m.sessionToken),it.query["X-Amz-Algorithm"]=hS,it.query["X-Amz-Credential"]=m.accessKeyId+"/"+Re,it.query[LD]=se,it.query["X-Amz-Expires"]=a.toString(10),gt=VD(it,u,l),it.query["X-Amz-SignedHeaders"]=KD(gt),At=it.query,Vt=BD,wn=this.getSignature,yn=[se,Re,this.getSigningKey(m,E,me,_)],ar=this.createCanonicalRequest,Or=[it,gt],[4,mS(n,this.sha256)]);case 5:return[4,wn.apply(this,yn.concat([ar.apply(this,Or.concat([Dn.sent()]))]))];case 6:return At[Vt]=Dn.sent(),[2,it]}})})},e.prototype.sign=function(n,t){return gd(this,void 0,void 0,function(){return vd(this,function(r){return"string"==typeof n?[2,this.signString(n,t)]:n.headers&&n.payload?[2,this.signEvent(n,t)]:[2,this.signRequest(n,t)]})})},e.prototype.signEvent=function(n,t){var r=n.headers,i=n.payload,o=t.signingDate,a=void 0===o?new Date:o,u=t.priorSignature,d=t.signingRegion,l=t.signingService;return gd(this,void 0,void 0,function(){var f,_,m,A,I,se,me,Re,it,gt;return vd(this,function(At){switch(At.label){case 0:return null==d?[3,1]:(_=d,[3,3]);case 1:return[4,this.regionProvider()];case 2:_=At.sent(),At.label=3;case 3:return f=_,m=J0(a),A=m.longDate,I=pS(m.shortDate,f,null!=l?l:this.service),[4,mS({headers:{},body:i},this.sha256)];case 4:return se=At.sent(),(me=new this.sha256).update(r),it=Vs,[4,me.digest()];case 5:return Re=it.apply(void 0,[At.sent()]),gt=[XG,A,I,u,Re,se].join("\n"),[2,this.signString(gt,{signingDate:a,signingRegion:f,signingService:l})]}})})},e.prototype.signString=function(n,t){var r=void 0===t?{}:t,i=r.signingDate,o=void 0===i?new Date:i,a=r.signingRegion,u=r.signingService;return gd(this,void 0,void 0,function(){var d,l,f,_,m,E,A,I;return vd(this,function(se){switch(se.label){case 0:return[4,this.credentialProvider()];case 1:return d=se.sent(),null==a?[3,2]:(f=a,[3,4]);case 2:return[4,this.regionProvider()];case 3:f=se.sent(),se.label=4;case 4:return l=f,_=J0(o).shortDate,A=(E=this.sha256).bind,[4,this.getSigningKey(d,l,_,u)];case 5:return(m=new(A.apply(E,[void 0,se.sent()]))).update(n),I=Vs,[4,m.digest()];case 6:return[2,I.apply(void 0,[se.sent()])]}})})},e.prototype.signRequest=function(n,t){var r=void 0===t?{}:t,i=r.signingDate,o=void 0===i?new Date:i,a=r.signableHeaders,u=r.unsignableHeaders,d=r.signingRegion,l=r.signingService;return gd(this,void 0,void 0,function(){var f,_,m,E,A,I,se,me,Re,it,gt;return vd(this,function(At){switch(At.label){case 0:return[4,this.credentialProvider()];case 1:return f=At.sent(),null==d?[3,2]:(m=d,[3,4]);case 2:return[4,this.regionProvider()];case 3:m=At.sent(),At.label=4;case 4:return _=m,E=HD(n),A=J0(o),I=A.longDate,me=pS(se=A.shortDate,_,null!=l?l:this.service),E.headers[FD]=I,f.sessionToken&&(E.headers[GG]=f.sessionToken),[4,mS(E,this.sha256)];case 5:return Re=At.sent(),!function tH(e,n){var t,r;e=e.toLowerCase();try{for(var i=_d(Object.keys(n)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return!1}(fS,E.headers)&&this.applyChecksum&&(E.headers[fS]=Re),it=VD(E,u,a),[4,this.getSignature(I,me,this.getSigningKey(f,_,se,l),this.createCanonicalRequest(E,it,Re))];case 6:return gt=At.sent(),E.headers[jD]=hS+" Credential="+f.accessKeyId+"/"+me+", SignedHeaders="+KD(it)+", Signature="+gt,[2,E]}})})},e.prototype.createCanonicalRequest=function(n,t,r){var i=Object.keys(t).sort();return n.method+"\n"+this.getCanonicalPath(n)+"\n"+function QG(e){var n,t,r=e.query,i=void 0===r?{}:r,o=[],a={},u=function(_){if(_.toLowerCase()===VG)return"continue";o.push(_);var m=i[_];"string"==typeof m?a[_]=ip(_)+"="+ip(m):Array.isArray(m)&&(a[_]=m.slice(0).sort().reduce(function(E,A){return E.concat([ip(_)+"="+ip(A)])},[]).join("&"))};try{for(var d=_d(Object.keys(i).sort()),l=d.next();!l.done;l=d.next())u(l.value)}catch(_){n={error:_}}finally{try{l&&!l.done&&(t=d.return)&&t.call(d)}finally{if(n)throw n.error}}return o.map(function(_){return a[_]}).filter(function(_){return _}).join("&")}(n)+"\n"+i.map(function(o){return o+":"+t[o]}).join("\n")+"\n\n"+i.join(";")+"\n"+r},e.prototype.createStringToSign=function(n,t,r){return gd(this,void 0,void 0,function(){var i,o;return vd(this,function(a){switch(a.label){case 0:return(i=new this.sha256).update(r),[4,i.digest()];case 1:return o=a.sent(),[2,hS+"\n"+n+"\n"+t+"\n"+Vs(o)]}})})},e.prototype.getCanonicalPath=function(n){var t=n.path;return this.uriEscapePath?"/"+encodeURIComponent(t.replace(/^\//,"")).replace(/%2F/g,"/"):t},e.prototype.getSignature=function(n,t,r,i){return gd(this,void 0,void 0,function(){var o,a,u,d,l;return vd(this,function(f){switch(f.label){case 0:return[4,this.createStringToSign(n,t,i)];case 1:return o=f.sent(),d=(u=this.sha256).bind,[4,r];case 2:return(a=new(d.apply(u,[void 0,f.sent()]))).update(o),l=Vs,[4,a.digest()];case 3:return[2,l.apply(void 0,[f.sent()])]}})})},e.prototype.getSigningKey=function(n,t,r,i){return function(e,n,t,r,i){return gd(void 0,void 0,void 0,function(){var o,a,u,d,l,_,m,E;return vd(this,function(A){switch(A.label){case 0:return[4,qD(e,n.secretAccessKey,n.accessKeyId)];case 1:if(o=A.sent(),(a=t+":"+r+":"+i+":"+Vs(o)+":"+n.sessionToken)in Om)return[2,Om[a]];for(W0.push(a);W0.length>50;)delete Om[W0.shift()];u="AWS4"+n.secretAccessKey,A.label=2;case 2:A.trys.push([2,7,8,9]),d=_d([t,r,i,UD]),l=d.next(),A.label=3;case 3:return l.done?[3,6]:[4,qD(e,u,l.value)];case 4:u=A.sent(),A.label=5;case 5:return l=d.next(),[3,3];case 6:return[3,9];case 7:return _=A.sent(),m={error:_},[3,9];case 8:try{l&&!l.done&&(E=d.return)&&E.call(d)}finally{if(m)throw m.error}return[7];case 9:return[2,Om[a]=u]}})})}(this.sha256,n,r,t,i||this.service)},e}(),J0=function(e){var n=function iH(e){return function oH(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}(e).replace(/[\-:]/g,"");return{longDate:n,shortDate:n.substr(0,8)}},KD=function(e){return Object.keys(e).sort().join(";")},aH=function(e){if("string"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e},sH=function(e){if("object"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e};function XD(e){var l,n=this,r=gS(e.credentials||e.credentialDefaultProvider(e)),i=e.signingEscapePath,o=void 0===i||i,a=e.systemClockOffset,u=void 0===a?e.systemClockOffset||0:a,d=e.sha256;return l=e.signer?gS(e.signer):function(){return gS(e.region)().then(function(f){return DD(n,void 0,void 0,function(){return OD(this,function(_){switch(_.label){case 0:return[4,e.regionInfoProvider(f)];case 1:return[2,[_.sent()||{},f]]}})})}).then(function(f){var _=function MD(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}(f,2),m=_[0],I=m.signingService;return e.signingRegion=e.signingRegion||m.signingRegion||_[1],e.signingName=e.signingName||I||e.serviceId,new $D({credentials:r,region:e.signingRegion,service:e.signingName,sha256:d,uriEscapePath:o})})},Dm(Dm({},e),{systemClockOffset:u,signingEscapePath:o,credentials:r,signer:l})}function gS(e){if("object"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e}function cH(e){return function(n,t){return function(r){return DD(this,void 0,void 0,function(){var i,o,a,u,d,l,f,_,m;return OD(this,function(E){switch(E.label){case 0:return Io.isInstance(r.request)?"function"!=typeof e.signer?[3,2]:[4,e.signer()]:[2,n(r)];case 1:return o=E.sent(),[3,3];case 2:o=e.signer,E.label=3;case 3:return i=o,u=n,d=[Dm({},r)],m={},[4,i.sign(r.request,{signingDate:new Date(Date.now()+e.systemClockOffset),signingRegion:t.signing_region,signingService:t.signing_service})];case 4:return[4,u.apply(void 0,[Dm.apply(void 0,d.concat([(m.request=E.sent(),m)]))])];case 5:return a=E.sent(),(f=(l=a.response.headers)&&(l.date||l.Date))&&function(e,n){return Math.abs(function(e){return new Date(Date.now()+e)}(n).getTime()-e)>=3e5}(_=Date.parse(f),e.systemClockOffset)&&(e.systemClockOffset=_-Date.now()),[2,a]}})})}}}var dH={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},km=function(){return km=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},km.apply(this,arguments)};function JD(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}function ZD(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(JD(arguments[n]));return e}function YD(e){return km(km({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}var _S="user-agent",gH=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,yS=function(e){var n=JD(e,2),t=n[0],r=n[1],i=t.indexOf("/"),o=t.substring(0,i),a=t.substring(i+1);return"api"===o&&(a=a.toLowerCase()),[o,a,r].filter(function(u){return u&&u.length>0}).map(function(u){return null==u?void 0:u.replace(gH,"_")}).join("/")},_H={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},eO=function(e){return{applyToStack:function(n){n.add(function(e){return function(n,t){return function(r){return function hH(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}(void 0,void 0,void 0,function(){var i,o,a,u,d,l,f,_;return function pH(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(m){switch(m.label){case 0:return Io.isInstance(i=r.request)?(o=i.headers,a=(null===(f=null==t?void 0:t.userAgent)||void 0===f?void 0:f.map(yS))||[],[4,e.defaultUserAgentProvider()]):[2,n(r)];case 1:return u=m.sent().map(yS),d=(null===(_=null==e?void 0:e.customUserAgent)||void 0===_?void 0:_.map(yS))||[],o["x-amz-user-agent"]=ZD(u,a,d).join(" "),l=ZD(u.filter(function(E){return E.startsWith("aws-sdk-")}),d).join(" "),"browser"!==e.runtime&&l&&(o[_S]=o[_S]?o[_S]+" "+l:l),[2,n(km(km({},r),{request:i}))]}})})}}}(e),_H)}}},bS=function(e){function n(t){var r=this,i=K(K({},uG),t),o=wD(i),u=XD(bD(o)),f=YD(lD(u));return(r=e.call(this,f)||this).config=f,r.middlewareStack.use(iD(r.config)),r.middlewareStack.use(SD(r.config)),r.middlewareStack.use(PD(r.config)),r.middlewareStack.use(RD()),r.middlewareStack.use(eO(r.config)),r}return Ut(n,e),n.prototype.destroy=function(){e.prototype.destroy.call(this)},n}(U2),Y0=function(){return Y0=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Y0.apply(this,arguments)},Gs=function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})},Hs=function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},Dr=new eo("Credentials"),wH=function(){function e(n){this._gettingCredPromise=null,this._refreshHandlers={},this.Auth=void 0,this.configure(n),this._refreshHandlers.google=M5.refreshGoogleToken,this._refreshHandlers.facebook=N5.refreshFacebookToken}return e.prototype.getModuleName=function(){return"Credentials"},e.prototype.getCredSource=function(){return this._credentials_source},e.prototype.configure=function(n){if(!n)return this._config||{};this._config=Object.assign({},this._config,n);var t=this._config.refreshHandlers;return t&&(this._refreshHandlers=Y0(Y0({},this._refreshHandlers),t)),this._storage=this._config.storage,this._storage||(this._storage=(new y0).getStorage()),this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),this._config},e.prototype.get=function(){return Dr.debug("getting credentials"),this._pickupCredentials()},e.prototype._getCognitoIdentityIdStorageKey=function(n){return"CognitoIdentityId-"+n},e.prototype._pickupCredentials=function(){return Dr.debug("picking up credentials"),this._gettingCredPromise&&this._gettingCredPromise.isPending()?Dr.debug("getting old cred promise"):(Dr.debug("getting new cred promise"),this._gettingCredPromise=v2(this._keepAlive())),this._gettingCredPromise},e.prototype._keepAlive=function(){return Gs(this,void 0,void 0,function(){var n,t,r,i,o,a,d;return Hs(this,function(l){switch(l.label){case 0:if(Dr.debug("checking if credentials exists and not expired"),(n=this._credentials)&&!this._isExpired(n)&&!this._isPastTTL())return Dr.debug("credentials not changed and not expired, directly return"),[2,Promise.resolve(n)];if(Dr.debug("need to get a new credential or refresh the existing one"),!(r=void 0===(t=this.Auth)?Es.Auth:t)||"function"!=typeof r.currentUserCredentials)return[2,Promise.reject("No Auth module registered in Amplify")];if(this._isExpired(n)||!this._isPastTTL())return[3,6];Dr.debug("ttl has passed but token is not yet expired"),l.label=1;case 1:return l.trys.push([1,5,,6]),[4,r.currentUserPoolUser()];case 2:return i=l.sent(),[4,r.currentSession()];case 3:return o=l.sent(),a=o.refreshToken,[4,new Promise(function(f,_){i.refreshSession(a,function(m,E){return m?_(m):f(E)})})];case 4:return l.sent(),[3,6];case 5:return d=l.sent(),Dr.debug("Error attempting to refreshing the session",d),[3,6];case 6:return[2,r.currentUserCredentials()]}})})},e.prototype.refreshFederatedToken=function(n){Dr.debug("Getting federated credentials");var t=n.provider,r=n.user,i=n.token,o=n.identity_id,a=n.expires_at;a=1970===new Date(a).getFullYear()?1e3*a:a;var u=this;return Dr.debug("checking if federated jwt token expired"),a>(new Date).getTime()?(Dr.debug("token not expired"),this._setCredentialsFromFederation({provider:t,token:i,user:r,identity_id:o,expires_at:a})):u._refreshHandlers[t]&&"function"==typeof u._refreshHandlers[t]?(Dr.debug("getting refreshed jwt token from federation provider"),this._providerRefreshWithRetry({refreshHandler:u._refreshHandlers[t],provider:t,user:r})):(Dr.debug("no refresh handler for provider:",t),this.clear(),Promise.reject("no refresh handler for provider"))},e.prototype._providerRefreshWithRetry=function(n){var t=this,i=n.provider,o=n.user;return S2(n.refreshHandler,[],1e4).then(function(u){return Dr.debug("refresh federated token sucessfully",u),t._setCredentialsFromFederation({provider:i,token:u.token,user:o,identity_id:u.identity_id,expires_at:u.expires_at})}).catch(function(u){return"string"==typeof u&&0===u.toLowerCase().lastIndexOf("network error",u.length)||t.clear(),Dr.debug("refresh federated token failed",u),Promise.reject("refreshing federation token failed: "+u)})},e.prototype._isExpired=function(n){if(!n)return Dr.debug("no credentials for expiration check"),!0;Dr.debug("are these credentials expired?",n);var t=Date.now();return n.expiration.getTime()<=t},e.prototype._isPastTTL=function(){return this._nextCredentialsRefresh<=Date.now()},e.prototype._setCredentialsForGuest=function(){return Gs(this,void 0,void 0,function(){var n,t,r,o,a,u,d,_=this;return Hs(this,function(m){switch(m.label){case 0:return Dr.debug("setting credentials for guest"),t=(n=this._config).identityPoolId,r=n.region,n.mandatorySignIn?[2,Promise.reject("cannot get guest credentials when mandatory signin enabled")]:t?r?(a=this,[4,this._getGuestIdentityId()]):(Dr.debug("region is not configured for getting the credentials"),[2,Promise.reject("region is not configured for getting the credentials")]):(Dr.debug("No Cognito Identity pool provided for unauthenticated access"),[2,Promise.reject("No Cognito Identity pool provided for unauthenticated access")]);case 1:return o=a._identityId=m.sent(),u=new bS({region:r,customUserAgent:zl()}),d=void 0,d=o?Nv({identityId:o,client:u})():Gs(_,void 0,void 0,function(){var E;return Hs(this,function(se){switch(se.label){case 0:return[4,u.send(new Lv({IdentityPoolId:t}))];case 1:return E=se.sent().IdentityId,this._identityId=E,[2,Nv({client:u,identityId:E})()]}})}).catch(function(E){return Gs(_,void 0,void 0,function(){return Hs(this,function(A){throw E})})}),[2,this._loadCredentials(d,"guest",!1,null).then(function(E){return E}).catch(function(E){return Gs(_,void 0,void 0,function(){var I=this;return Hs(this,function(se){switch(se.label){case 0:return"ResourceNotFoundException"===E.name&&E.message==="Identity '"+o+"' not found."?(Dr.debug("Failed to load guest credentials"),[4,this._removeGuestIdentityId()]):[3,2];case 1:return se.sent(),d=Gs(I,void 0,void 0,function(){var me;return Hs(this,function(gt){switch(gt.label){case 0:return[4,u.send(new Lv({IdentityPoolId:t}))];case 1:return me=gt.sent().IdentityId,this._identityId=me,[2,Nv({client:u,identityId:me})()]}})}).catch(function(me){return Gs(I,void 0,void 0,function(){return Hs(this,function(Re){throw me})})}),[2,this._loadCredentials(d,"guest",!1,null)];case 2:return[2,E]}})})})]}})})},e.prototype._setCredentialsFromFederation=function(n){var t=n.provider,r=n.token,i=n.identity_id,a={google:"accounts.google.com",facebook:"graph.facebook.com",amazon:"www.amazon.com",developer:"cognito-identity.amazonaws.com"}[t]||t;if(!a)return Promise.reject("You must specify a federated provider");var u={};u[a]=r;var d=this._config,l=d.identityPoolId,f=d.region;if(!l)return Dr.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!f)return Dr.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var _=new bS({region:f,customUserAgent:zl()}),m=void 0;return m=i?Nv({identityId:i,logins:u,client:_})():function eV(e){var n=this,t=e.accountId,r=e.cache,i=void 0===r?function Qq(){return"object"==typeof self&&self.indexedDB?new Jq:"object"==typeof window&&window.localStorage?window.localStorage:Yq}():r,o=e.client,a=e.customRoleArn,u=e.identityPoolId,d=e.logins,l=e.userIdentifier,f=void 0===l?d&&0!==Object.keys(d).length?void 0:"ANONYMOUS":l,_=f?"aws:cognito-identity-credentials:"+u+":"+f:void 0,m=function(){return OE(n,void 0,void 0,function(){var E,A,I,se,me,Re,it,gt,At;return kE(this,function(Vt){switch(Vt.label){case 0:return(A=_)?[4,i.getItem(_)]:[3,2];case 1:A=Vt.sent(),Vt.label=2;case 2:return(E=A)?[3,7]:(Re=(me=o).send,it=Lv.bind,At={AccountId:t,IdentityPoolId:u},d?[4,K2(d)]:[3,4]);case 3:return gt=Vt.sent(),[3,5];case 4:gt=void 0,Vt.label=5;case 5:return[4,Re.apply(me,[new(it.apply(Lv,[void 0,(At.Logins=gt,At)]))])];case 6:I=Vt.sent().IdentityId,se=void 0===I?function tV(){throw new N0("Response from Amazon Cognito contained no identity ID")}():I,E=se,_&&Promise.resolve(i.setItem(_,E)).catch(function(){}),Vt.label=7;case 7:return[2,(m=Nv({client:o,customRoleArn:a,logins:d,identityId:E}))()]}})})};return function(){return m().catch(function(E){return OE(n,void 0,void 0,function(){return kE(this,function(A){throw _&&Promise.resolve(i.removeItem(_)).catch(function(){}),E})})})}}({logins:u,identityPoolId:l,client:_})(),this._loadCredentials(m,"federated",!0,n)},e.prototype._setCredentialsFromSession=function(n){var t=this;Dr.debug("set credentials from session");var r=n.getIdToken().getJwtToken(),i=this._config,o=i.region,a=i.userPoolId,u=i.identityPoolId;if(!u)return Dr.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!o)return Dr.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var l={};l["cognito-idp."+o+".amazonaws.com/"+a]=r;var f=new bS({region:o,customUserAgent:zl()}),m=Gs(t,void 0,void 0,function(){var E,A,I,se,me,Re,it,gt,At,Vt;return Hs(this,function(wn){switch(wn.label){case 0:return[4,this._getGuestIdentityId()];case 1:return(E=wn.sent())?[3,3]:[4,f.send(new Lv({IdentityPoolId:u,Logins:l}))];case 2:I=wn.sent().IdentityId,A=I,wn.label=3;case 3:return[4,f.send(new VE({IdentityId:E||A,Logins:l}))];case 4:return se=wn.sent(),Re=(me=se.Credentials).AccessKeyId,it=me.Expiration,gt=me.SecretKey,At=me.SessionToken,this._identityId=Vt=se.IdentityId,E?(Dr.debug("The guest identity "+E+" has been successfully linked to the logins"),E===Vt&&Dr.debug("The guest identity "+E+" has become the primary identity"),[4,this._removeGuestIdentityId()]):[3,6];case 5:wn.sent(),wn.label=6;case 6:return[2,{accessKeyId:Re,secretAccessKey:gt,sessionToken:At,expiration:it,identityId:Vt}]}})}).catch(function(E){return Gs(t,void 0,void 0,function(){return Hs(this,function(A){throw E})})});return this._loadCredentials(m,"userPool",!0,null)},e.prototype._loadCredentials=function(n,t,r,i){var o=this,a=this;return new Promise(function(u,d){n.then(function(l){return Gs(o,void 0,void 0,function(){var f,_,m,E,A;return Hs(this,function(I){switch(I.label){case 0:if(Dr.debug("Load credentials successfully",l),this._identityId&&!l.identityId&&(l.identityId=this._identityId),a._credentials=l,a._credentials.authenticated=r,a._credentials_source=t,a._nextCredentialsRefresh=(new Date).getTime()+3e6,"federated"===t){f=Object.assign({id:this._credentials.identityId},i.user),_=i.provider,m=i.token,E=i.expires_at,A=i.identity_id;try{this._storage.setItem("aws-amplify-federatedInfo",JSON.stringify({provider:_,token:m,user:f,expires_at:E,identity_id:A}))}catch(se){Dr.debug("Failed to put federated info into auth storage",se)}}return"guest"!==t?[3,2]:[4,this._setGuestIdentityId(l.identityId)];case 1:I.sent(),I.label=2;case 2:return u(a._credentials),[2]}})})}).catch(function(l){if(l)return Dr.debug("Failed to load credentials",n),Dr.debug("Error loading credentials",l),void d(l)})})},e.prototype.set=function(n,t){return"session"===t?this._setCredentialsFromSession(n):"federation"===t?this._setCredentialsFromFederation(n):"guest"===t?this._setCredentialsForGuest():(Dr.debug("no source specified for setting credentials"),Promise.reject("invalid source"))},e.prototype.clear=function(){return Gs(this,void 0,void 0,function(){return Hs(this,function(n){return this._credentials=null,this._credentials_source=null,Dr.debug("removing aws-amplify-federatedInfo from storage"),this._storage.removeItem("aws-amplify-federatedInfo"),[2]})})},e.prototype._getGuestIdentityId=function(){return Gs(this,void 0,void 0,function(){var n,t;return Hs(this,function(r){switch(r.label){case 0:n=this._config.identityPoolId,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._storageSync];case 2:return r.sent(),[2,this._storage.getItem(this._getCognitoIdentityIdStorageKey(n))];case 3:return t=r.sent(),Dr.debug("Failed to get the cached guest identityId",t),[3,4];case 4:return[2]}})})},e.prototype._setGuestIdentityId=function(n){return Gs(this,void 0,void 0,function(){var t,r;return Hs(this,function(i){switch(i.label){case 0:t=this._config.identityPoolId,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._storageSync];case 2:return i.sent(),this._storage.setItem(this._getCognitoIdentityIdStorageKey(t),n),[3,4];case 3:return r=i.sent(),Dr.debug("Failed to cache guest identityId",r),[3,4];case 4:return[2]}})})},e.prototype._removeGuestIdentityId=function(){return Gs(this,void 0,void 0,function(){var n;return Hs(this,function(t){return Dr.debug("removing "+this._getCognitoIdentityIdStorageKey(n=this._config.identityPoolId)+" from storage"),this._storage.removeItem(this._getCognitoIdentityIdStorageKey(n)),[2]})})},e.prototype.shear=function(n){return{accessKeyId:n.accessKeyId,sessionToken:n.sessionToken,secretAccessKey:n.secretAccessKey,identityId:n.identityId,authenticated:n.authenticated}},e}(),Vu=new wH(null);Es.register(Vu);var Q0=function(){return Q0=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Q0.apply(this,arguments)},xH=new eo("Parser"),tO=function(e){var r,n={};return e.aws_mobile_analytics_app_id&&(n.Analytics={AWSPinpoint:{appId:e.aws_mobile_analytics_app_id,region:e.aws_mobile_analytics_app_region}}),(e.aws_cognito_identity_pool_id||e.aws_user_pools_id)&&(n.Auth={userPoolId:e.aws_user_pools_id,userPoolWebClientId:e.aws_user_pools_web_client_id,region:e.aws_cognito_region,identityPoolId:e.aws_cognito_identity_pool_id,identityPoolRegion:e.aws_cognito_region,mandatorySignIn:"enable"===e.aws_mandatory_sign_in}),r=e.aws_user_files_s3_bucket?{AWSS3:{bucket:e.aws_user_files_s3_bucket,region:e.aws_user_files_s3_bucket_region,dangerouslyConnectToHttpEndpointForTesting:e.aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing}}:e?e.Storage||e:{},e.Logging&&(n.Logging=Q0(Q0({},e.Logging),{region:e.aws_project_region})),e.geo&&(n.Geo=Object.assign({},e.geo),e.geo.amazon_location_service&&(n.Geo={AmazonLocationService:e.geo.amazon_location_service})),n.Analytics=Object.assign({},n.Analytics,e.Analytics),n.Auth=Object.assign({},n.Auth,e.Auth),n.Storage=Object.assign({},r),n.Logging=Object.assign({},n.Logging,e.Logging),xH.debug("parse config",e,"to amplifyconfig",n),n},wS=function(){function e(){}return e.parseMobilehubConfig=tO,e}(),eb=G(3555);function nO(e,n){void 0===n&&(n={});var t=function TH(e){return e&&"j"===e[0]&&":"===e[1]?e.substr(2):e}(e);if(function CH(e,n){return void 0===n&&(n=!e||"{"!==e[0]&&"["!==e[0]&&'"'!==e[0]),!n}(t,n.doNotParse))try{return JSON.parse(t)}catch(r){}return e}var ap=function(){return ap=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},ap.apply(this,arguments)},PH=function(){function e(n,t){var r=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function SH(e,n){return"string"==typeof e?eb.Q(e,n):"object"==typeof e&&null!==e?e:{}}(n,t),new Promise(function(){r.HAS_DOCUMENT_COOKIE=function EH(){return"object"==typeof document&&"string"==typeof document.cookie}()}).catch(function(){})}return e.prototype._updateBrowserValues=function(n){!this.HAS_DOCUMENT_COOKIE||(this.cookies=eb.Q(document.cookie,n))},e.prototype._emitChange=function(n){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](n)},e.prototype.get=function(n,t,r){return void 0===t&&(t={}),this._updateBrowserValues(r),nO(this.cookies[n],t)},e.prototype.getAll=function(n,t){void 0===n&&(n={}),this._updateBrowserValues(t);var r={};for(var i in this.cookies)r[i]=nO(this.cookies[i],n);return r},e.prototype.set=function(n,t,r){var i;"object"==typeof t&&(t=JSON.stringify(t)),this.cookies=ap(ap({},this.cookies),((i={})[n]=t,i)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=eb.q(n,t,r)),this._emitChange({name:n,value:t,options:r})},e.prototype.remove=function(n,t){var r=t=ap(ap({},t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=ap({},this.cookies),delete this.cookies[n],this.HAS_DOCUMENT_COOKIE&&(document.cookie=eb.q(n,"",r)),this._emitChange({name:n,value:void 0,options:t})},e.prototype.addChangeListener=function(n){this.changeListeners.push(n)},e.prototype.removeChangeListener=function(n){var t=this.changeListeners.indexOf(n);t>=0&&this.changeListeners.splice(t,1)},e}();const xS=PH;var Gu,rO=Zh().isBrowser,IH=function(){function e(n){void 0===n&&(n={}),this.cookies=new xS,this.store=rO?window.localStorage:Object.create(null),this.cookies=n.req?new xS(n.req.headers.cookie):new xS,Object.assign(this.store,this.cookies.getAll())}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.entries(this.store).length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){var n=this;Array.from(new Array(this.length)).map(function(t,r){return n.key(r)}).forEach(function(t){return n.removeItem(t)})},e.prototype.getItem=function(n){return this.getLocalItem(n)},e.prototype.getLocalItem=function(n){return Object.prototype.hasOwnProperty.call(this.store,n)?this.store[n]:null},e.prototype.getUniversalItem=function(n){return this.cookies.get(n)},e.prototype.key=function(n){return Object.keys(this.store)[n]},e.prototype.removeItem=function(n){this.removeLocalItem(n),this.removeUniversalItem(n)},e.prototype.removeLocalItem=function(n){delete this.store[n]},e.prototype.removeUniversalItem=function(n){this.cookies.remove(n,{path:"/"})},e.prototype.setItem=function(n,t){switch(this.setLocalItem(n,t),n.split(".").pop()){case"LastAuthUser":case"accessToken":case"refreshToken":case"idToken":rO?this.setUniversalItem(n,t):this.setLocalItem(n,t)}},e.prototype.setLocalItem=function(n,t){this.store[n]=t},e.prototype.setUniversalItem=function(n,t){this.cookies.set(n,t,{path:"/",sameSite:!0,secure:"localhost"!==window.location.hostname})},e}(),DH=function(){function e(t){var r=t||{},o=r.Username,a=r.Password,u=r.AuthParameters,d=r.ClientMetadata;this.validationData=r.ValidationData||{},this.authParameters=u||{},this.clientMetadata=d||{},this.username=o,this.password=a}var n=e.prototype;return n.getUsername=function(){return this.username},n.getPassword=function(){return this.password},n.getValidationData=function(){return this.validationData},n.getAuthParameters=function(){return this.authParameters},n.getClientMetadata=function(){return this.clientMetadata},e}(),Fi=G(3172),OH=G(7585),Mf=G.n(OH),kH=(G(7412),G(1817)),iO=G.n(kH),MH=G(6135),tb=G.n(MH);if("undefined"!=typeof window&&window.crypto&&(Gu=window.crypto),!Gu&&"undefined"!=typeof window&&window.msCrypto&&(Gu=window.msCrypto),!Gu&&"undefined"!=typeof global&&global.crypto&&(Gu=global.crypto),!Gu)try{Gu=G(6249)}catch(e){}function NH(){if(Gu){if("function"==typeof Gu.getRandomValues)try{return Gu.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof Gu.randomBytes)try{return Gu.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}var BH=function(){function e(t,r){t=this.words=t||[],this.sigBytes=null!=r?r:4*t.length}var n=e.prototype;return n.random=function(r){for(var i=[],o=0;o<r;o+=4)i.push(NH());return new e(i,r)},n.toString=function(){return function LH(e){for(var n=e.words,t=e.sigBytes,r=[],i=0;i<t;i++){var o=n[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")}(this)},e}();const fa=nr;function nr(e,n){null!=e&&this.fromString(e,n)}function Ss(){return new nr(null)}var Nf,aO="undefined"!=typeof navigator;aO&&"Microsoft Internet Explorer"==navigator.appName?(nr.prototype.am=function FH(e,n,t,r,i,o){for(var a=32767&n,u=n>>15;--o>=0;){var d=32767&this[e],l=this[e++]>>15,f=u*d+l*a;i=((d=a*d+((32767&f)<<15)+t[r]+(1073741823&i))>>>30)+(f>>>15)+u*l+(i>>>30),t[r++]=1073741823&d}return i},Nf=30):aO&&"Netscape"!=navigator.appName?(nr.prototype.am=function jH(e,n,t,r,i,o){for(;--o>=0;){var a=n*this[e++]+t[r]+i;i=Math.floor(a/67108864),t[r++]=67108863&a}return i},Nf=26):(nr.prototype.am=function UH(e,n,t,r,i,o){for(var a=16383&n,u=n>>14;--o>=0;){var d=16383&this[e],l=this[e++]>>14,f=u*d+l*a;i=((d=a*d+((16383&f)<<14)+t[r]+i)>>28)+(f>>14)+u*l,t[r++]=268435455&d}return i},Nf=28),nr.prototype.DB=Nf,nr.prototype.DM=(1<<Nf)-1,nr.prototype.DV=1<<Nf,nr.prototype.FV=Math.pow(2,52),nr.prototype.F1=52-Nf,nr.prototype.F2=2*Nf-52;var Mm,Hu,nb=new Array;for(Mm="0".charCodeAt(0),Hu=0;Hu<=9;++Hu)nb[Mm++]=Hu;for(Mm="a".charCodeAt(0),Hu=10;Hu<36;++Hu)nb[Mm++]=Hu;for(Mm="A".charCodeAt(0),Hu=10;Hu<36;++Hu)nb[Mm++]=Hu;function sO(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function VH(e,n){var t=nb[e.charCodeAt(n)];return null==t?-1:t}function SS(e){var n=Ss();return n.fromInt(e),n}function CS(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function Nm(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function TS(e){return Fi.lW.from((new BH).random(e).toString(),"hex")}Nm.prototype.convert=function m7(e){var n=Ss();return e.abs().dlShiftTo(this.m.t,n),n.divRemTo(this.m,null,n),e.s<0&&n.compareTo(nr.ZERO)>0&&this.m.subTo(n,n),n},Nm.prototype.revert=function g7(e){var n=Ss();return e.copyTo(n),this.reduce(n),n},Nm.prototype.reduce=function v7(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var n=0;n<this.m.t;++n){var t=32767&e[n],r=t*this.mpl+((t*this.mph+(e[n]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[t=n+this.m.t]+=this.m.am(0,r,e,n,0,this.m.t);e[t]>=e.DV;)e[t]-=e.DV,e[++t]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},Nm.prototype.mulTo=function y7(e,n,t){e.multiplyTo(n,t),this.reduce(t)},Nm.prototype.sqrTo=function _7(e,n){e.squareTo(n),this.reduce(n)},nr.prototype.copyTo=function GH(e){for(var n=this.t-1;n>=0;--n)e[n]=this[n];e.t=this.t,e.s=this.s},nr.prototype.fromInt=function HH(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},nr.prototype.fromString=function $H(e,n){var t;if(16==n)t=4;else if(8==n)t=3;else if(2==n)t=1;else if(32==n)t=5;else{if(4!=n)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}this.t=0,this.s=0;for(var r=e.length,i=!1,o=0;--r>=0;){var a=VH(e,r);a<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=a:o+t>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,(o+=t)>=this.DB&&(o-=this.DB))}this.clamp(),i&&nr.ZERO.subTo(this,this)},nr.prototype.clamp=function KH(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},nr.prototype.dlShiftTo=function QH(e,n){var t;for(t=this.t-1;t>=0;--t)n[t+e]=this[t];for(t=e-1;t>=0;--t)n[t]=0;n.t=this.t+e,n.s=this.s},nr.prototype.drShiftTo=function e7(e,n){for(var t=e;t<this.t;++t)n[t-e]=this[t];n.t=Math.max(this.t-e,0),n.s=this.s},nr.prototype.lShiftTo=function t7(e,n){var u,t=e%this.DB,r=this.DB-t,i=(1<<r)-1,o=Math.floor(e/this.DB),a=this.s<<t&this.DM;for(u=this.t-1;u>=0;--u)n[u+o+1]=this[u]>>r|a,a=(this[u]&i)<<t;for(u=o-1;u>=0;--u)n[u]=0;n[o]=a,n.t=this.t+o+1,n.s=this.s,n.clamp()},nr.prototype.rShiftTo=function n7(e,n){n.s=this.s;var t=Math.floor(e/this.DB);if(t>=this.t)n.t=0;else{var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;n[0]=this[t]>>r;for(var a=t+1;a<this.t;++a)n[a-t-1]|=(this[a]&o)<<i,n[a-t]=this[a]>>r;r>0&&(n[this.t-t-1]|=(this.s&o)<<i),n.t=this.t-t,n.clamp()}},nr.prototype.subTo=function r7(e,n){for(var t=0,r=0,i=Math.min(e.t,this.t);t<i;)r+=this[t]-e[t],n[t++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;t<this.t;)r+=this[t],n[t++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;t<e.t;)r-=e[t],n[t++]=r&this.DM,r>>=this.DB;r-=e.s}n.s=r<0?-1:0,r<-1?n[t++]=this.DV+r:r>0&&(n[t++]=r),n.t=t,n.clamp()},nr.prototype.multiplyTo=function i7(e,n){var t=this.abs(),r=e.abs(),i=t.t;for(n.t=i+r.t;--i>=0;)n[i]=0;for(i=0;i<r.t;++i)n[i+t.t]=t.am(0,r[i],n,i,0,t.t);n.s=0,n.clamp(),this.s!=e.s&&nr.ZERO.subTo(n,n)},nr.prototype.squareTo=function o7(e){for(var n=this.abs(),t=e.t=2*n.t;--t>=0;)e[t]=0;for(t=0;t<n.t-1;++t){var r=n.am(t,n[t],e,2*t,0,1);(e[t+n.t]+=n.am(t+1,2*n[t],e,2*t+1,r,n.t-t-1))>=n.DV&&(e[t+n.t]-=n.DV,e[t+n.t+1]=1)}e.t>0&&(e[e.t-1]+=n.am(t,n[t],e,2*t,0,1)),e.s=0,e.clamp()},nr.prototype.divRemTo=function a7(e,n,t){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=n&&n.fromInt(0),void(null!=t&&this.copyTo(t));null==t&&(t=Ss());var o=Ss(),a=this.s,u=e.s,d=this.DB-CS(r[r.t-1]);d>0?(r.lShiftTo(d,o),i.lShiftTo(d,t)):(r.copyTo(o),i.copyTo(t));var l=o.t,f=o[l-1];if(0!=f){var _=f*(1<<this.F1)+(l>1?o[l-2]>>this.F2:0),m=this.FV/_,E=(1<<this.F1)/_,A=1<<this.F2,I=t.t,se=I-l,me=null==n?Ss():n;for(o.dlShiftTo(se,me),t.compareTo(me)>=0&&(t[t.t++]=1,t.subTo(me,t)),nr.ONE.dlShiftTo(l,me),me.subTo(o,o);o.t<l;)o[o.t++]=0;for(;--se>=0;){var Re=t[--I]==f?this.DM:Math.floor(t[I]*m+(t[I-1]+A)*E);if((t[I]+=o.am(0,Re,t,se,0,l))<Re)for(o.dlShiftTo(se,me),t.subTo(me,t);t[I]<--Re;)t.subTo(me,t)}null!=n&&(t.drShiftTo(l,n),a!=u&&nr.ZERO.subTo(n,n)),t.t=l,t.clamp(),d>0&&t.rShiftTo(d,t),a<0&&nr.ZERO.subTo(t,t)}}},nr.prototype.invDigit=function u7(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var n=3&e;return(n=(n=(n=(n=n*(2-(15&e)*n)&15)*(2-(255&e)*n)&255)*(2-((65535&e)*n&65535))&65535)*(2-e*n%this.DV)%this.DV)>0?this.DV-n:-n},nr.prototype.addTo=function c7(e,n){for(var t=0,r=0,i=Math.min(e.t,this.t);t<i;)r+=this[t]+e[t],n[t++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;t<this.t;)r+=this[t],n[t++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;t<e.t;)r+=e[t],n[t++]=r&this.DM,r>>=this.DB;r+=e.s}n.s=r<0?-1:0,r>0?n[t++]=r:r<-1&&(n[t++]=this.DV+r),n.t=t,n.clamp()},nr.prototype.toString=function XH(e){if(this.s<0)return"-"+this.negate().toString(e);var n;if(16==e)n=4;else if(8==e)n=3;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}var r,t=(1<<n)-1,i=!1,o="",a=this.t,u=this.DB-a*this.DB%n;if(a-- >0)for(u<this.DB&&(r=this[a]>>u)>0&&(i=!0,o=sO(r));a>=0;)u<n?(r=(this[a]&(1<<u)-1)<<n-u,r|=this[--a]>>(u+=this.DB-n)):(r=this[a]>>(u-=n)&t,u<=0&&(u+=this.DB,--a)),r>0&&(i=!0),i&&(o+=sO(r));return i?o:"0"},nr.prototype.negate=function WH(){var e=Ss();return nr.ZERO.subTo(this,e),e},nr.prototype.abs=function JH(){return this.s<0?this.negate():this},nr.prototype.compareTo=function ZH(e){var n=this.s-e.s;if(0!=n)return n;var t=this.t;if(0!=(n=t-e.t))return this.s<0?-n:n;for(;--t>=0;)if(0!=(n=this[t]-e[t]))return n;return 0},nr.prototype.bitLength=function YH(){return this.t<=0?0:this.DB*(this.t-1)+CS(this[this.t-1]^this.s&this.DM)},nr.prototype.mod=function s7(e){var n=Ss();return this.abs().divRemTo(e,null,n),this.s<0&&n.compareTo(nr.ZERO)>0&&e.subTo(n,n),n},nr.prototype.equals=function l7(e){return 0==this.compareTo(e)},nr.prototype.add=function d7(e){var n=Ss();return this.addTo(e,n),n},nr.prototype.subtract=function f7(e){var n=Ss();return this.subTo(e,n),n},nr.prototype.multiply=function h7(e){var n=Ss();return this.multiplyTo(e,n),n},nr.prototype.divide=function p7(e){var n=Ss();return this.divRemTo(e,n,null),n},nr.prototype.modPow=function b7(e,n,t){var i,r=e.bitLength(),o=SS(1),a=new Nm(n);if(r<=0)return o;i=r<18?1:r<48?3:r<144?4:r<768?5:6;var u=new Array,d=3,l=i-1,f=(1<<i)-1;if(u[1]=a.convert(this),i>1){var _=Ss();for(a.sqrTo(u[1],_);d<=f;)u[d]=Ss(),a.mulTo(_,u[d-2],u[d]),d+=2}var E,se,m=e.t-1,A=!0,I=Ss();for(r=CS(e[m])-1;m>=0;){for(r>=l?E=e[m]>>r-l&f:(E=(e[m]&(1<<r+1)-1)<<l-r,m>0&&(E|=e[m-1]>>this.DB+r-l)),d=i;0==(1&E);)E>>=1,--d;if((r-=d)<0&&(r+=this.DB,--m),A)u[E].copyTo(o),A=!1;else{for(;d>1;)a.sqrTo(o,I),a.sqrTo(I,o),d-=2;d>0?a.sqrTo(o,I):(se=o,o=I,I=se),a.mulTo(I,u[E],o)}for(;m>=0&&0==(e[m]&1<<r);)a.sqrTo(o,I),se=o,o=I,I=se,--r<0&&(r=this.DB-1,--m)}var me=a.revert(o);return t(null,me),me},nr.ZERO=SS(0),nr.ONE=SS(1);var w7=/^[89a-f]/i,Lm=function(){function e(t){this.N=new fa("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new fa("2",16),this.k=new fa(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=Fi.lW.from("Caldera Derived Key","utf8"),this.poolName=t}var n=e.prototype;return n.getSmallAValue=function(){return this.smallAValue},n.getLargeAValue=function(r){var i=this;this.largeAValue?r(null,this.largeAValue):this.calculateA(this.smallAValue,function(o,a){o&&r(o,null),i.largeAValue=a,r(null,i.largeAValue)})},n.generateRandomSmallA=function(){var r=TS(128).toString("hex");return new fa(r,16)},n.generateRandomString=function(){return TS(40).toString("base64")},n.getRandomPassword=function(){return this.randomPassword},n.getSaltDevices=function(){return this.SaltToHashDevices},n.getVerifierDevices=function(){return this.verifierDevices},n.generateHashDevice=function(r,i,o){var a=this;this.randomPassword=this.generateRandomString();var d=this.hash(""+r+i+":"+this.randomPassword),l=TS(16).toString("hex");this.SaltToHashDevices=this.padHex(new fa(l,16)),this.g.modPow(new fa(this.hexHash(this.SaltToHashDevices+d),16),this.N,function(f,_){f&&o(f,null),a.verifierDevices=a.padHex(_),o(null,null)})},n.calculateA=function(r,i){var o=this;this.g.modPow(r,this.N,function(a,u){a&&i(a,null),u.mod(o.N).equals(fa.ZERO)&&i(new Error("Illegal paramater. A mod N cannot be 0."),null),i(null,u)})},n.calculateU=function(r,i){return this.UHexHash=this.hexHash(this.padHex(r)+this.padHex(i)),new fa(this.UHexHash,16)},n.hash=function(r){var i=r instanceof Fi.lW?Mf().lib.WordArray.create(r):r,o=iO()(i).toString();return new Array(64-o.length).join("0")+o},n.hexHash=function(r){return this.hash(Fi.lW.from(r,"hex"))},n.computehkdf=function(r,i){var o=Mf().lib.WordArray.create(Fi.lW.concat([this.infoBits,Fi.lW.from(String.fromCharCode(1),"utf8")])),a=r instanceof Fi.lW?Mf().lib.WordArray.create(r):r,u=i instanceof Fi.lW?Mf().lib.WordArray.create(i):i,d=tb()(a,u),l=tb()(o,d);return Fi.lW.from(l.toString(),"hex").slice(0,16)},n.getPasswordAuthenticationKey=function(r,i,o,a,u){var d=this;if(o.mod(this.N).equals(fa.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,o),this.UValue.equals(fa.ZERO))throw new Error("U cannot be zero.");var f=this.hash(""+this.poolName+r+":"+i),_=new fa(this.hexHash(this.padHex(a)+f),16);this.calculateS(_,o,function(m,E){m&&u(m,null);var A=d.computehkdf(Fi.lW.from(d.padHex(E),"hex"),Fi.lW.from(d.padHex(d.UValue),"hex"));u(null,A)})},n.calculateS=function(r,i,o){var a=this;this.g.modPow(r,this.N,function(u,d){u&&o(u,null),i.subtract(a.k.multiply(d)).modPow(a.smallAValue.add(a.UValue.multiply(r)),a.N,function(f,_){f&&o(f,null),o(null,_.mod(a.N))})})},n.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},n.padHex=function(r){if(!(r instanceof fa))throw new Error("Not a BigInteger");var i=r.compareTo(fa.ZERO)<0,o=r.abs().toString(16);if(o=w7.test(o=o.length%2!=0?"0"+o:o)?"00"+o:o,i){var a=o.split("").map(function(d){var l=15&~parseInt(d,16);return"0123456789ABCDEF".charAt(l)}).join("");(o=new fa(a,16).add(fa.ONE).toString(16)).toUpperCase().startsWith("FF8")&&(o=o.substring(2))}return o},e}(),uO=function(){function e(t){this.jwtToken=t||"",this.payload=this.decodePayload()}var n=e.prototype;return n.getJwtToken=function(){return this.jwtToken},n.getExpiration=function(){return this.payload.exp},n.getIssuedAt=function(){return this.payload.iat},n.decodePayload=function(){var r=this.jwtToken.split(".")[1];try{return JSON.parse(Fi.lW.from(r,"base64").toString("utf8"))}catch(i){return{}}},e}();function PS(e,n){return(PS=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r})(e,n)}var IS=function(e){function n(t){return e.call(this,(void 0===t?{}:t).AccessToken||"")||this}return function S7(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,PS(e,n)}(n,e),n}(uO);function AS(e,n){return(AS=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r})(e,n)}var RS=function(e){function n(t){return e.call(this,(void 0===t?{}:t).IdToken||"")||this}return function C7(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,AS(e,n)}(n,e),n}(uO),DS=function(){function e(t){this.token=(void 0===t?{}:t).RefreshToken||""}return e.prototype.getToken=function(){return this.token},e}(),T7=G(8319),OS=G.n(T7),kS=function(){function e(t){var r=void 0===t?{}:t,i=r.IdToken,o=r.RefreshToken,a=r.AccessToken,u=r.ClockDrift;if(null==a||null==i)throw new Error("Id token and Access Token must be present.");this.idToken=i,this.refreshToken=o,this.accessToken=a,this.clockDrift=void 0===u?this.calculateClockDrift():u}var n=e.prototype;return n.getIdToken=function(){return this.idToken},n.getRefreshToken=function(){return this.refreshToken},n.getAccessToken=function(){return this.accessToken},n.getClockDrift=function(){return this.clockDrift},n.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},n.isValid=function(){var i=Math.floor(new Date/1e3)-this.clockDrift;return i<this.accessToken.getExpiration()&&i<this.idToken.getExpiration()},e}(),P7=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],I7=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],lO=function(){function e(){}return e.prototype.getNowString=function(){var r=new Date,i=I7[r.getUTCDay()],o=P7[r.getUTCMonth()],a=r.getUTCDate(),u=r.getUTCHours();u<10&&(u="0"+u);var d=r.getUTCMinutes();d<10&&(d="0"+d);var l=r.getUTCSeconds();return l<10&&(l="0"+l),i+" "+o+" "+a+" "+u+":"+d+":"+l+" UTC "+r.getUTCFullYear()},e}(),Bm=function(){function e(t){var r=void 0===t?{}:t,o=r.Value;this.Name=r.Name||"",this.Value=o||""}var n=e.prototype;return n.getValue=function(){return this.Value},n.setValue=function(r){return this.Value=r,this},n.getName=function(){return this.Name},n.setName=function(r){return this.Name=r,this},n.toString=function(){return JSON.stringify(this)},n.toJSON=function(){return{Name:this.Name,Value:this.Value}},e}(),sp={},A7=function(){function e(){}return e.setItem=function(t,r){return sp[t]=r,sp[t]},e.getItem=function(t){return Object.prototype.hasOwnProperty.call(sp,t)?sp[t]:void 0},e.removeItem=function(t){return delete sp[t]},e.clear=function(){return sp={}},e}(),cO=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(t){this.storageWindow=A7}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),dO="undefined"!=typeof navigator?navigator.userAgent:"nodejs",MS=function(){function e(t){if(null==t||null==t.Username||null==t.Pool)throw new Error("Username and Pool information are required.");this.username=t.Username||"",this.pool=t.Pool,this.Session=null,this.client=t.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=t.Storage||(new cO).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var n=e.prototype;return n.setSignInUserSession=function(r){this.clearCachedUserData(),this.signInUserSession=r,this.cacheTokens()},n.getSignInUserSession=function(){return this.signInUserSession},n.getUsername=function(){return this.username},n.getAuthenticationFlowType=function(){return this.authenticationFlowType},n.setAuthenticationFlowType=function(r){this.authenticationFlowType=r},n.initiateAuth=function(r,i){var o=this,a=r.getAuthParameters();a.USERNAME=this.username;var u=0!==Object.keys(r.getValidationData()).length?r.getValidationData():r.getClientMetadata(),d={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:a,ClientMetadata:u};this.getUserContextData()&&(d.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",d,function(l,f){if(l)return i.onFailure(l);var m=f.ChallengeParameters;return"CUSTOM_CHALLENGE"===f.ChallengeName?(o.Session=f.Session,i.customChallenge(m)):(o.signInUserSession=o.getCognitoUserSession(f.AuthenticationResult),o.cacheTokens(),i.onSuccess(o.signInUserSession))})},n.authenticateUser=function(r,i){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(r,i):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(r,i):i.onFailure(new Error("Authentication flow type is invalid."))},n.authenticateUserDefaultAuth=function(r,i){var d,l,o=this,a=new Lm(this.pool.getUserPoolId().split("_")[1]),u=new lO,f={};null!=this.deviceKey&&(f.DEVICE_KEY=this.deviceKey),f.USERNAME=this.username,a.getLargeAValue(function(_,m){_&&i.onFailure(_),f.SRP_A=m.toString(16),"CUSTOM_AUTH"===o.authenticationFlowType&&(f.CHALLENGE_NAME="SRP_A");var E=0!==Object.keys(r.getValidationData()).length?r.getValidationData():r.getClientMetadata(),A={AuthFlow:o.authenticationFlowType,ClientId:o.pool.getClientId(),AuthParameters:f,ClientMetadata:E};o.getUserContextData(o.username)&&(A.UserContextData=o.getUserContextData(o.username)),o.client.request("InitiateAuth",A,function(I,se){if(I)return i.onFailure(I);var me=se.ChallengeParameters;o.username=me.USER_ID_FOR_SRP,o.userDataKey=o.keyPrefix+"."+o.username+".userData",d=new fa(me.SRP_B,16),l=new fa(me.SALT,16),o.getCachedDeviceKeyAndPassword(),a.getPasswordAuthenticationKey(o.username,r.getPassword(),d,l,function(Re,it){Re&&i.onFailure(Re);var gt=u.getNowString(),At=Mf().lib.WordArray.create(Fi.lW.concat([Fi.lW.from(o.pool.getUserPoolId().split("_")[1],"utf8"),Fi.lW.from(o.username,"utf8"),Fi.lW.from(me.SECRET_BLOCK,"base64"),Fi.lW.from(gt,"utf8")])),Vt=Mf().lib.WordArray.create(it),wn=OS().stringify(tb()(At,Vt)),yn={};yn.USERNAME=o.username,yn.PASSWORD_CLAIM_SECRET_BLOCK=me.SECRET_BLOCK,yn.TIMESTAMP=gt,yn.PASSWORD_CLAIM_SIGNATURE=wn,null!=o.deviceKey&&(yn.DEVICE_KEY=o.deviceKey);var Or={ChallengeName:"PASSWORD_VERIFIER",ClientId:o.pool.getClientId(),ChallengeResponses:yn,Session:se.Session,ClientMetadata:E};o.getUserContextData()&&(Or.UserContextData=o.getUserContextData()),function Dn(Jo,No){return o.client.request("RespondToAuthChallenge",Jo,function(Lo,ns){return Lo&&"ResourceNotFoundException"===Lo.code&&-1!==Lo.message.toLowerCase().indexOf("device")?(yn.DEVICE_KEY=null,o.deviceKey=null,o.randomPassword=null,o.deviceGroupKey=null,o.clearCachedDeviceKeyAndPassword(),Dn(Jo,No)):No(Lo,ns)})}(Or,function(Dn,Jo){return Dn?i.onFailure(Dn):o.authenticateUserInternal(Jo,a,i)})})})})},n.authenticateUserPlainUsernamePassword=function(r,i){var o=this,a={};if(a.USERNAME=this.username,a.PASSWORD=r.getPassword(),a.PASSWORD){var u=new Lm(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(a.DEVICE_KEY=this.deviceKey);var d=0!==Object.keys(r.getValidationData()).length?r.getValidationData():r.getClientMetadata(),l={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:a,ClientMetadata:d};this.getUserContextData(this.username)&&(l.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",l,function(f,_){return f?i.onFailure(f):o.authenticateUserInternal(_,u,i)})}else i.onFailure(new Error("PASSWORD parameter is required"))},n.authenticateUserInternal=function(r,i,o){var a=this,u=r.ChallengeName,d=r.ChallengeParameters;if("SMS_MFA"===u)return this.Session=r.Session,o.mfaRequired(u,d);if("SELECT_MFA_TYPE"===u)return this.Session=r.Session,o.selectMFAType(u,d);if("MFA_SETUP"===u)return this.Session=r.Session,o.mfaSetup(u,d);if("SOFTWARE_TOKEN_MFA"===u)return this.Session=r.Session,o.totpRequired(u,d);if("CUSTOM_CHALLENGE"===u)return this.Session=r.Session,o.customChallenge(d);if("NEW_PASSWORD_REQUIRED"===u){this.Session=r.Session;var l=null,f=null,_=[],m=i.getNewPasswordRequiredChallengeUserAttributePrefix();if(d&&(l=JSON.parse(r.ChallengeParameters.userAttributes),f=JSON.parse(r.ChallengeParameters.requiredAttributes)),f)for(var E=0;E<f.length;E++)_[E]=f[E].substr(m.length);return o.newPasswordRequired(l,_)}if("DEVICE_SRP_AUTH"===u)return this.Session=r.Session,void this.getDeviceResponse(o);this.signInUserSession=this.getCognitoUserSession(r.AuthenticationResult),this.challengeName=u,this.cacheTokens();var A=r.AuthenticationResult.NewDeviceMetadata;if(null==A)return o.onSuccess(this.signInUserSession);i.generateHashDevice(r.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,r.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(I){if(I)return o.onFailure(I);var se={Salt:Fi.lW.from(i.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:Fi.lW.from(i.getVerifierDevices(),"hex").toString("base64")};a.verifierDevices=se.PasswordVerifier,a.deviceGroupKey=A.DeviceGroupKey,a.randomPassword=i.getRandomPassword(),a.client.request("ConfirmDevice",{DeviceKey:A.DeviceKey,AccessToken:a.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:se,DeviceName:dO},function(me,Re){return me?o.onFailure(me):(a.deviceKey=r.AuthenticationResult.NewDeviceMetadata.DeviceKey,a.cacheDeviceKeyAndPassword(),!0===Re.UserConfirmationNecessary?o.onSuccess(a.signInUserSession,Re.UserConfirmationNecessary):o.onSuccess(a.signInUserSession))})})},n.completeNewPasswordChallenge=function(r,i,o,a){var u=this;if(!r)return o.onFailure(new Error("New password is required."));var d=new Lm(this.pool.getUserPoolId().split("_")[1]),l=d.getNewPasswordRequiredChallengeUserAttributePrefix(),f={};i&&Object.keys(i).forEach(function(m){f[l+m]=i[m]}),f.NEW_PASSWORD=r,f.USERNAME=this.username;var _={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:f,Session:this.Session,ClientMetadata:a};this.getUserContextData()&&(_.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",_,function(m,E){return m?o.onFailure(m):u.authenticateUserInternal(E,d,o)})},n.getDeviceResponse=function(r,i){var o=this,a=new Lm(this.deviceGroupKey),u=new lO,d={};d.USERNAME=this.username,d.DEVICE_KEY=this.deviceKey,a.getLargeAValue(function(l,f){l&&r.onFailure(l),d.SRP_A=f.toString(16);var _={ChallengeName:"DEVICE_SRP_AUTH",ClientId:o.pool.getClientId(),ChallengeResponses:d,ClientMetadata:i,Session:o.Session};o.getUserContextData()&&(_.UserContextData=o.getUserContextData()),o.client.request("RespondToAuthChallenge",_,function(m,E){if(m)return r.onFailure(m);var A=E.ChallengeParameters,I=new fa(A.SRP_B,16),se=new fa(A.SALT,16);a.getPasswordAuthenticationKey(o.deviceKey,o.randomPassword,I,se,function(me,Re){if(me)return r.onFailure(me);var it=u.getNowString(),gt=Mf().lib.WordArray.create(Fi.lW.concat([Fi.lW.from(o.deviceGroupKey,"utf8"),Fi.lW.from(o.deviceKey,"utf8"),Fi.lW.from(A.SECRET_BLOCK,"base64"),Fi.lW.from(it,"utf8")])),At=Mf().lib.WordArray.create(Re),Vt=OS().stringify(tb()(gt,At)),wn={};wn.USERNAME=o.username,wn.PASSWORD_CLAIM_SECRET_BLOCK=A.SECRET_BLOCK,wn.TIMESTAMP=it,wn.PASSWORD_CLAIM_SIGNATURE=Vt,wn.DEVICE_KEY=o.deviceKey;var yn={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:o.pool.getClientId(),ChallengeResponses:wn,Session:E.Session};o.getUserContextData()&&(yn.UserContextData=o.getUserContextData()),o.client.request("RespondToAuthChallenge",yn,function(ar,Or){return ar?r.onFailure(ar):(o.signInUserSession=o.getCognitoUserSession(Or.AuthenticationResult),o.cacheTokens(),r.onSuccess(o.signInUserSession))})})})})},n.confirmRegistration=function(r,i,o,a){var u={ClientId:this.pool.getClientId(),ConfirmationCode:r,Username:this.username,ForceAliasCreation:i,ClientMetadata:a};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",u,function(d){return d?o(d,null):o(null,"SUCCESS")})},n.sendCustomChallengeAnswer=function(r,i,o){var a=this,u={};u.USERNAME=this.username,u.ANSWER=r;var d=new Lm(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(u.DEVICE_KEY=this.deviceKey);var l={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:u,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:o};this.getUserContextData()&&(l.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",l,function(f,_){return f?i.onFailure(f):a.authenticateUserInternal(_,d,i)})},n.sendMFACode=function(r,i,o,a){var u=this,d={};d.USERNAME=this.username,d.SMS_MFA_CODE=r;var l=o||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===l&&(d.SOFTWARE_TOKEN_MFA_CODE=r),null!=this.deviceKey&&(d.DEVICE_KEY=this.deviceKey);var f={ChallengeName:l,ChallengeResponses:d,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:a};this.getUserContextData()&&(f.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",f,function(_,m){if(_)return i.onFailure(_);if("DEVICE_SRP_AUTH"!==m.ChallengeName){if(u.signInUserSession=u.getCognitoUserSession(m.AuthenticationResult),u.cacheTokens(),null==m.AuthenticationResult.NewDeviceMetadata)return i.onSuccess(u.signInUserSession);var A=new Lm(u.pool.getUserPoolId().split("_")[1]);A.generateHashDevice(m.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,m.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(I){if(I)return i.onFailure(I);var se={Salt:Fi.lW.from(A.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:Fi.lW.from(A.getVerifierDevices(),"hex").toString("base64")};u.verifierDevices=se.PasswordVerifier,u.deviceGroupKey=m.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,u.randomPassword=A.getRandomPassword(),u.client.request("ConfirmDevice",{DeviceKey:m.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:u.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:se,DeviceName:dO},function(me,Re){return me?i.onFailure(me):(u.deviceKey=m.AuthenticationResult.NewDeviceMetadata.DeviceKey,u.cacheDeviceKeyAndPassword(),!0===Re.UserConfirmationNecessary?i.onSuccess(u.signInUserSession,Re.UserConfirmationNecessary):i.onSuccess(u.signInUserSession))})})}else u.getDeviceResponse(i)})},n.changePassword=function(r,i,o,a){if(null==this.signInUserSession||!this.signInUserSession.isValid())return o(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:r,ProposedPassword:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:a},function(u){return u?o(u,null):o(null,"SUCCESS")})},n.enableMFA=function(r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return r(new Error("User is not authenticated"),null);var i=[];i.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?r(a,null):r(null,"SUCCESS")})},n.setUserMfaPreference=function(r,i,o){if(null==this.signInUserSession||!this.signInUserSession.isValid())return o(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:r,SoftwareTokenMfaSettings:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?o(a,null):o(null,"SUCCESS")})},n.disableMFA=function(r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return r(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(o){return o?r(o,null):r(null,"SUCCESS")})},n.deleteUser=function(r,i){var o=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return r(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:i},function(a){return a?r(a,null):(o.clearCachedUser(),r(null,"SUCCESS"))})},n.updateAttributes=function(r,i,o){var a=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:r,ClientMetadata:o},function(u){return u?i(u,null):a.getUserData(function(){return i(null,"SUCCESS")},{bypassCache:!0})})},n.getUserAttributes=function(r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return r(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(i,o){if(i)return r(i,null);for(var a=[],u=0;u<o.UserAttributes.length;u++){var l=new Bm({Name:o.UserAttributes[u].Name,Value:o.UserAttributes[u].Value});a.push(l)}return r(null,a)})},n.getMFAOptions=function(r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return r(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(i,o){return i?r(i,null):r(null,o.MFAOptions)})},n.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},n.refreshSessionIfPossible=function(r){var i=this;return void 0===r&&(r={}),new Promise(function(o){var a=i.signInUserSession.getRefreshToken();a&&a.getToken()?i.refreshSession(a,o,r.clientMetadata):o()})},n.getUserData=function(r,i){var o=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),r(new Error("User is not authenticated"),null);var a=this.getUserDataFromCache();if(a)if(this.isFetchUserDataAndTokenRequired(i))this.fetchUserData().then(function(u){return o.refreshSessionIfPossible(i).then(function(){return u})}).then(function(u){return r(null,u)}).catch(r);else try{return void r(null,JSON.parse(a))}catch(u){return this.clearCachedUserData(),void r(u,null)}else this.fetchUserData().then(function(u){r(null,u)}).catch(r)},n.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},n.isFetchUserDataAndTokenRequired=function(r){var o=(r||{}).bypassCache;return void 0!==o&&o},n.fetchUserData=function(){var r=this;return this.createGetUserRequest().then(function(i){return r.cacheUserData(i),i})},n.deleteAttributes=function(r,i){var o=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?i(a,null):o.getUserData(function(){return i(null,"SUCCESS")},{bypassCache:!0})})},n.resendConfirmationCode=function(r,i){var o={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:i};this.client.request("ResendConfirmationCode",o,function(a,u){return a?r(a,null):r(null,u)})},n.getSession=function(r,i){if(void 0===i&&(i={}),null==this.username)return r(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return r(null,this.signInUserSession);var o="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,a=o+".idToken",u=o+".accessToken",d=o+".refreshToken",l=o+".clockDrift";if(this.storage.getItem(a)){var f=new RS({IdToken:this.storage.getItem(a)}),_=new IS({AccessToken:this.storage.getItem(u)}),m=new DS({RefreshToken:this.storage.getItem(d)}),E=parseInt(this.storage.getItem(l),0)||0,I=new kS({IdToken:f,AccessToken:_,RefreshToken:m,ClockDrift:E});if(I.isValid())return this.signInUserSession=I,r(null,this.signInUserSession);if(!m.getToken())return r(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(m,r,i.clientMetadata)}else r(new Error("Local storage is missing an ID Token, Please authenticate"),null)},n.refreshSession=function(r,i,o){var a=this,u=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(i):i,d={};d.REFRESH_TOKEN=r.getToken();var l="CognitoIdentityServiceProvider."+this.pool.getClientId(),f=l+".LastAuthUser";this.storage.getItem(f)&&(this.username=this.storage.getItem(f),this.deviceKey=this.storage.getItem(l+"."+this.username+".deviceKey"),d.DEVICE_KEY=this.deviceKey);var m={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:d,ClientMetadata:o};this.getUserContextData()&&(m.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",m,function(E,A){if(E)return"NotAuthorizedException"===E.code&&a.clearCachedUser(),u(E,null);if(A){var I=A.AuthenticationResult;return Object.prototype.hasOwnProperty.call(I,"RefreshToken")||(I.RefreshToken=r.getToken()),a.signInUserSession=a.getCognitoUserSession(I),a.cacheTokens(),u(null,a.signInUserSession)}})},n.cacheTokens=function(){var r="CognitoIdentityServiceProvider."+this.pool.getClientId(),o=r+"."+this.username+".accessToken",a=r+"."+this.username+".refreshToken",u=r+"."+this.username+".clockDrift",d=r+".LastAuthUser";this.storage.setItem(r+"."+this.username+".idToken",this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(o,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(a,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(u,""+this.signInUserSession.getClockDrift()),this.storage.setItem(d,this.username)},n.cacheUserData=function(r){this.storage.setItem(this.userDataKey,JSON.stringify(r))},n.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},n.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},n.cacheDeviceKeyAndPassword=function(){var r="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,o=r+".randomPasswordKey",a=r+".deviceGroupKey";this.storage.setItem(r+".deviceKey",this.deviceKey),this.storage.setItem(o,this.randomPassword),this.storage.setItem(a,this.deviceGroupKey)},n.getCachedDeviceKeyAndPassword=function(){var r="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,i=r+".deviceKey",o=r+".randomPasswordKey",a=r+".deviceGroupKey";this.storage.getItem(i)&&(this.deviceKey=this.storage.getItem(i),this.randomPassword=this.storage.getItem(o),this.deviceGroupKey=this.storage.getItem(a))},n.clearCachedDeviceKeyAndPassword=function(){var r="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,o=r+".randomPasswordKey",a=r+".deviceGroupKey";this.storage.removeItem(r+".deviceKey"),this.storage.removeItem(o),this.storage.removeItem(a)},n.clearCachedTokens=function(){var r="CognitoIdentityServiceProvider."+this.pool.getClientId(),o=r+"."+this.username+".accessToken",a=r+"."+this.username+".refreshToken",u=r+".LastAuthUser",d=r+"."+this.username+".clockDrift";this.storage.removeItem(r+"."+this.username+".idToken"),this.storage.removeItem(o),this.storage.removeItem(a),this.storage.removeItem(u),this.storage.removeItem(d)},n.getCognitoUserSession=function(r){var i=new RS(r),o=new IS(r),a=new DS(r);return new kS({IdToken:i,AccessToken:o,RefreshToken:a})},n.forgotPassword=function(r,i){var o={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:i};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",o,function(a,u){return a?r.onFailure(a):"function"==typeof r.inputVerificationCode?r.inputVerificationCode(u):r.onSuccess(u)})},n.confirmPassword=function(r,i,o,a){var u={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:r,Password:i,ClientMetadata:a};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",u,function(d){return d?o.onFailure(d):o.onSuccess("SUCCESS")})},n.getAttributeVerificationCode=function(r,i,o){if(null==this.signInUserSession||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:o},function(a,u){return a?i.onFailure(a):"function"==typeof i.inputVerificationCode?i.inputVerificationCode(u):i.onSuccess("SUCCESS")})},n.verifyAttribute=function(r,i,o){if(null==this.signInUserSession||!this.signInUserSession.isValid())return o.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:r,Code:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?o.onFailure(a):o.onSuccess("SUCCESS")})},n.getDevice=function(r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(i,o){return i?r.onFailure(i):r.onSuccess(o)})},n.forgetSpecificDevice=function(r,i){if(null==this.signInUserSession||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:r},function(o){return o?i.onFailure(o):i.onSuccess("SUCCESS")})},n.forgetDevice=function(r){var i=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:r.onFailure,onSuccess:function(a){return i.deviceKey=null,i.deviceGroupKey=null,i.randomPassword=null,i.clearCachedDeviceKeyAndPassword(),r.onSuccess(a)}})},n.setDeviceStatusRemembered=function(r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(i){return i?r.onFailure(i):r.onSuccess("SUCCESS")})},n.setDeviceStatusNotRemembered=function(r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(i){return i?r.onFailure(i):r.onSuccess("SUCCESS")})},n.listDevices=function(r,i,o){if(null==this.signInUserSession||!this.signInUserSession.isValid())return o.onFailure(new Error("User is not authenticated"));var a={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:r};i&&(a.PaginationToken=i),this.client.request("ListDevices",a,function(u,d){return u?o.onFailure(u):o.onSuccess(d)})},n.globalSignOut=function(r){var i=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(o){return o?r.onFailure(o):(i.clearCachedUser(),r.onSuccess("SUCCESS"))})},n.signOut=function(r){var i=this;r&&"function"==typeof r?this.getSession(function(o,a){if(o)return r(o);i.revokeTokens(function(u){i.cleanClientData(),r(u)})}):this.cleanClientData()},n.revokeTokens=function(r){if(void 0===r&&(r=function(){}),"function"!=typeof r)throw new Error("Invalid revokeTokenCallback. It should be a function.");if(!this.signInUserSession)return r(new Error("User is not authenticated"));if(!this.signInUserSession.getAccessToken())return r(new Error("No Access token available"));var u=this.signInUserSession.getRefreshToken().getToken(),d=this.signInUserSession.getAccessToken();if(this.isSessionRevocable(d)&&u)return this.revokeToken({token:u,callback:r});r()},n.isSessionRevocable=function(r){if(r&&"function"==typeof r.decodePayload)try{return!!r.decodePayload().origin_jti}catch(a){}return!1},n.cleanClientData=function(){this.signInUserSession=null,this.clearCachedUser()},n.revokeToken=function(r){var o=r.callback;this.client.requestWithRetry("RevokeToken",{Token:r.token,ClientId:this.pool.getClientId()},function(a){if(a)return o(a);o()})},n.sendMFASelectionAnswer=function(r,i){var o=this,a={};a.USERNAME=this.username,a.ANSWER=r;var u={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:a,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",u,function(d,l){return d?i.onFailure(d):(o.Session=l.Session,"SMS_MFA"===r?i.mfaRequired(l.ChallengeName,l.ChallengeParameters):"SOFTWARE_TOKEN_MFA"===r?i.totpRequired(l.ChallengeName,l.ChallengeParameters):void 0)})},n.getUserContextData=function(){return this.pool.getUserContextData(this.username)},n.associateSoftwareToken=function(r){var i=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(o,a){return o?r.onFailure(o):r.associateSecretCode(a.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(o,a){return o?r.onFailure(o):(i.Session=a.Session,r.associateSecretCode(a.SecretCode))})},n.verifySoftwareToken=function(r,i,o){var a=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:r,FriendlyDeviceName:i},function(u,d){return u?o.onFailure(u):o.onSuccess(d)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:r,FriendlyDeviceName:i},function(u,d){if(u)return o.onFailure(u);a.Session=d.Session;var l={};l.USERNAME=a.username;var f={ChallengeName:"MFA_SETUP",ClientId:a.pool.getClientId(),ChallengeResponses:l,Session:a.Session};a.getUserContextData()&&(f.UserContextData=a.getUserContextData()),a.client.request("RespondToAuthChallenge",f,function(_,m){return _?o.onFailure(_):(a.signInUserSession=a.getCognitoUserSession(m.AuthenticationResult),a.cacheTokens(),o.onSuccess(a.signInUserSession))})})},e}(),NS=(G(3024),"aws-amplify/5.0.4"),up={userAgent:NS+" js",product:"",navigator:null,isReactNative:!1};function yd(){}"undefined"!=typeof navigator&&navigator.product&&("ReactNative"===(up.product=navigator.product||"",up.navigator=navigator||null,navigator.product)?(up.userAgent=NS+" react-native",up.isReactNative=!0):(up.userAgent=NS+" js",up.isReactNative=!1)),yd.prototype.userAgent=up.userAgent;const k7=yd;function rb(e){var n="function"==typeof Map?new Map:void 0;return rb=function(r){if(null===r||!function N7(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(r))return r;if("function"!=typeof r)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(r))return n.get(r);n.set(r,i)}function i(){return ib(r,arguments,LS(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Vv(i,r)},rb(e)}function ib(e,n,t){return(ib=M7()?Reflect.construct:function(i,o,a){var u=[null];u.push.apply(u,o);var l=new(Function.bind.apply(i,u));return a&&Vv(l,a.prototype),l}).apply(null,arguments)}function M7(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Vv(e,n){return(Vv=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r})(e,n)}function LS(e){return(LS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var L7=function(e){function n(t,r,i,o){var a;return(a=e.call(this,t)||this).code=r,a.name=i,a.statusCode=o,a}return function fO(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,Vv(e,n)}(n,e),n}(rb(Error)),B7=function(){function e(t,r,i){this.endpoint=r||"https://cognito-idp."+t+".amazonaws.com/";var a=(i||{}).credentials;this.fetchOptions=a?{credentials:a}:{}}var n=e.prototype;return n.promisifyRequest=function(r,i){var o=this;return new Promise(function(a,u){o.request(r,i,function(d,l){d?u(new L7(d.message,d.code,d.name,d.statusCode)):a(l)})})},n.requestWithRetry=function(r,i,o){var a=this;(function U7(e,n,t){return void 0===t&&(t=3e5),hO(e,n,function j7(e){return function(r){var i=100*Math.pow(2,r)+100*Math.random();return!(i>e)&&i}}(t))})(function(d){return new Promise(function(l,f){a.request(r,d,function(_,m){_?f(_):l(m)})})},[i],5e3).then(function(d){return o(null,d)}).catch(function(d){return o(d)})},n.request=function(r,i,o){var d,u=Object.assign({},this.fetchOptions,{headers:{"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+r,"X-Amz-User-Agent":k7.prototype.userAgent},method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(i)});fetch(this.endpoint,u).then(function(f){return d=f,f},function(f){throw f instanceof TypeError?new Error("Network error"):f}).then(function(f){return f.json().catch(function(){return{}})}).then(function(f){if(d.ok)return o(null,f);var _=(f.__type||f.code).split("#").pop(),m=new Error(f.message||f.Message||null);return m.name=_,m.code=_,o(m)}).catch(function(f){if(d&&d.headers&&d.headers.get("x-amzn-errortype"))try{var _=d.headers.get("x-amzn-errortype").split(":")[0],m=new Error(d.status?d.status.toString():null);return m.code=_,m.name=_,m.statusCode=d.status,o(m)}catch(E){return o(f)}else f instanceof Error&&"Network error"===f.message&&(f.code="NetworkError");return o(f)})},e}();function hO(e,n,t,r){if(void 0===r&&(r=1),"function"!=typeof e)throw Error("functionToRetry must be a function");return JSON.stringify(n),e.apply(void 0,n).catch(function(i){if(function(n){return n&&n.nonRetryable}(i))throw i;var o=t(r,n,i);if(!1!==o)return new Promise(function(a){return setTimeout(a,o)}).then(function(){return hO(e,n,t,r+1)});throw i})}Error;var V7=function(){function e(t,r){var i=t||{},o=i.UserPoolId,a=i.ClientId,u=i.endpoint,d=i.fetchOptions,l=i.AdvancedSecurityDataCollectionFlag;if(!o||!a)throw new Error("Both UserPoolId and ClientId are required.");if(o.length>55||!/^[\w-]+_[0-9a-zA-Z]+$/.test(o))throw new Error("Invalid UserPoolId format.");var f=o.split("_")[0];this.userPoolId=o,this.clientId=a,this.client=new B7(f,u,d),this.advancedSecurityDataCollectionFlag=!1!==l,this.storage=t.Storage||(new cO).getStorage(),r&&(this.wrapRefreshSessionCallback=r)}var n=e.prototype;return n.getUserPoolId=function(){return this.userPoolId},n.getClientId=function(){return this.clientId},n.signUp=function(r,i,o,a,u,d){var l=this,f={ClientId:this.clientId,Username:r,Password:i,UserAttributes:o,ValidationData:a,ClientMetadata:d};this.getUserContextData(r)&&(f.UserContextData=this.getUserContextData(r)),this.client.request("SignUp",f,function(_,m){if(_)return u(_,null);var A={user:new MS({Username:r,Pool:l,Storage:l.storage}),userConfirmed:m.UserConfirmed,userSub:m.UserSub,codeDeliveryDetails:m.CodeDeliveryDetails};return u(null,A)})},n.getCurrentUser=function(){var i=this.storage.getItem("CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser");return i?new MS({Username:i,Pool:this,Storage:this.storage}):null},n.getUserContextData=function(r){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var i=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var o=i.getData(r,this.userPoolId,this.clientId);if(o)return{EncodedData:o}}return{}}},e}(),Gv=G(7355),G7=function(){function e(t){if(!t.domain)throw new Error("The domain of cookieStorage can not be undefined.");if(this.domain=t.domain,this.path=t.path?t.path:"/",this.expires=Object.prototype.hasOwnProperty.call(t,"expires")?t.expires:365,this.secure=!Object.prototype.hasOwnProperty.call(t,"secure")||t.secure,Object.prototype.hasOwnProperty.call(t,"sameSite")){if(!["strict","lax","none"].includes(t.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===t.sameSite&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=t.sameSite}else this.sameSite=null}var n=e.prototype;return n.setItem=function(r,i){var o={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(o.sameSite=this.sameSite),Gv.set(r,i,o),Gv.get(r)},n.getItem=function(r){return Gv.get(r)},n.removeItem=function(r){var i={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(i.sameSite=this.sameSite),Gv.remove(r,i)},n.clear=function(){for(var r=Gv.get(),i=Object.keys(r).length,o=0;o<i;++o)this.removeItem(Object.keys(r)[o]);return{}},e}(),Cs=G(8762),$7=function(e){var n=window.open(e,"_self");return n?Promise.resolve(n):Promise.reject()},Ts=function(){return Ts=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Ts.apply(this,arguments)},ab=function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})},sb=function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},lp=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Z7="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",BS=function(e,n,t){pd.dispatch("auth",{event:e,data:n,message:t},"Auth",Z7)},zm=new eo("OAuth"),Y7=function(){function e(n){var t=n.config,r=n.cognitoClientId,i=n.scopes,o=void 0===i?[]:i;if(this._urlOpener=t.urlOpener||$7,this._config=t,this._cognitoClientId=r,!this.isValidScopes(o))throw Error("scopes must be a String Array");this._scopes=o}return e.prototype.isValidScopes=function(n){return Array.isArray(n)&&n.every(function(t){return"string"==typeof t})},e.prototype.oauthSignIn=function(n,t,r,i,o,a){void 0===n&&(n="code"),void 0===o&&(o=Av.Cognito);var u=this._generateState(32),d=a?u+"-"+function AH(e){return e.split("").map(function(n){return n.charCodeAt(0).toString(16).padStart(2,"0")}).join("")}(a):u;!function(e){window.sessionStorage.setItem("oauth_state",e)}(d);var l=this._generateRandom(128);!function(e){window.sessionStorage.setItem("ouath_pkce_key",e)}(l);var f=this._generateChallenge(l),m=this._scopes.join(" "),A="https://"+t+"/oauth2/authorize?"+Object.entries(Ts(Ts({redirect_uri:r,response_type:n,client_id:i,identity_provider:o,scope:m,state:d},"code"===n?{code_challenge:f}:{}),"code"===n?{code_challenge_method:"S256"}:{})).map(function(I){var se=lp(I,2),Re=se[1];return encodeURIComponent(se[0])+"="+encodeURIComponent(Re)}).join("&");zm.debug("Redirecting to "+A),this._urlOpener(A,r)},e.prototype._handleCodeFlow=function(n){return ab(this,void 0,void 0,function(){var t,r,i,o,a,u,d,l,f,_,m,E,A,I;return sb(this,function(se){switch(se.label){case 0:return t=((0,Cs.Qc)(n).query||"").split("&").map(function(me){return me.split("=")}).reduce(function(me,Re){var it,gt=lp(Re,2),At=gt[0],Vt=gt[1];return Ts(Ts({},me),((it={})[At]=Vt,it))},{code:void 0}).code,r=(0,Cs.Qc)(n).pathname||"/",i=(0,Cs.Qc)(this._config.redirectSignIn).pathname||"/",t&&r===i?(BS("codeFlow",{},"Retrieving tokens from "+(o="https://"+this._config.domain+"/oauth2/token")),a=Yh(this._config)?this._cognitoClientId:this._config.clientID,u=Yh(this._config)?this._config.redirectSignIn:this._config.redirectUri,d=function(){var e=window.sessionStorage.getItem("ouath_pkce_key");return window.sessionStorage.removeItem("ouath_pkce_key"),e}(),l=Ts({grant_type:"authorization_code",code:t,client_id:a,redirect_uri:u},d?{code_verifier:d}:{}),zm.debug("Calling token endpoint: "+o+" with",l),f=Object.entries(l).map(function(me){var Re=lp(me,2),gt=Re[1];return encodeURIComponent(Re[0])+"="+encodeURIComponent(gt)}).join("&"),[4,fetch(o,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:f})]):[2];case 1:return[4,se.sent().json()];case 2:if(_=se.sent(),m=_.access_token,E=_.refresh_token,A=_.id_token,I=_.error)throw new Error(I);return[2,{accessToken:m,refreshToken:E,idToken:A}]}})})},e.prototype._handleImplicitFlow=function(n){return ab(this,void 0,void 0,function(){var t,r,i;return sb(this,function(o){return t=((0,Cs.Qc)(n).hash||"#").substr(1).split("&").map(function(a){return a.split("=")}).reduce(function(a,u){var d,l=lp(u,2),f=l[0],_=l[1];return Ts(Ts({},a),((d={})[f]=_,d))},{id_token:void 0,access_token:void 0}),r=t.id_token,i=t.access_token,BS("implicitFlow",{},"Got tokens from "+n),zm.debug("Retrieving implicit tokens from "+n+" with"),[2,{accessToken:i,idToken:r,refreshToken:null}]})})},e.prototype.handleAuthResponse=function(n){return ab(this,void 0,void 0,function(){var t,i,o,a,u,d;return sb(this,function(l){switch(l.label){case 0:if(l.trys.push([0,5,,6]),t=n?Ts(Ts({},((0,Cs.Qc)(n).hash||"#").substr(1).split("&").map(function(f){return f.split("=")}).reduce(function(f,_){var m=lp(_,2);return f[m[0]]=m[1],f},{})),((0,Cs.Qc)(n).query||"").split("&").map(function(f){return f.split("=")}).reduce(function(f,_){var m=lp(_,2);return f[m[0]]=m[1],f},{})):{},i=t.error_description,t.error)throw new Error(i);return o=this._validateState(t),zm.debug("Starting "+this._config.responseType+" flow with "+n),"code"!==this._config.responseType?[3,2]:(a=[{}],[4,this._handleCodeFlow(n)]);case 1:return[2,Ts.apply(void 0,[Ts.apply(void 0,a.concat([l.sent()])),{state:o}])];case 2:return u=[{}],[4,this._handleImplicitFlow(n)];case 3:return[2,Ts.apply(void 0,[Ts.apply(void 0,u.concat([l.sent()])),{state:o}])];case 4:return[3,6];case 5:throw d=l.sent(),zm.error("Error handling auth response.",d),d;case 6:return[2]}})})},e.prototype._validateState=function(n){if(n){var t=function(){var e=window.sessionStorage.getItem("oauth_state");return window.sessionStorage.removeItem("oauth_state"),e}(),r=n.state;if(t&&t!==r)throw new Error("Invalid state in OAuth flow");return r}},e.prototype.signOut=function(){return ab(this,void 0,void 0,function(){var n,t,r;return sb(this,function(i){return n="https://"+this._config.domain+"/logout?",t=Yh(this._config)?this._cognitoClientId:this._config.oauth.clientID,r=Yh(this._config)?this._config.redirectSignOut:this._config.returnTo,n+=Object.entries({client_id:t,logout_uri:encodeURIComponent(r)}).map(function(o){var a=lp(o,2);return a[0]+"="+a[1]}).join("&"),BS("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+n),zm.debug("Signing out from "+n),[2,this._urlOpener(n,r)]})})},e.prototype._generateState=function(n){for(var t="",r=n,i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";r>0;--r)t+=i[Math.round(Math.random()*(i.length-1))];return t},e.prototype._generateChallenge=function(n){return this._base64URL(iO()(n))},e.prototype._base64URL=function(n){return n.toString(OS()).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},e.prototype._generateRandom=function(n){var r=new Uint8Array(n);if("undefined"!=typeof window&&window.crypto)window.crypto.getRandomValues(r);else for(var i=0;i<n;i+=1)r[i]=Math.random()*"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~".length|0;return this._bufferToString(r)},e.prototype._bufferToString=function(n){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=[],i=0;i<n.byteLength;i+=1)r.push(t[n[i]%t.length]);return r.join("")},e}();const Q7=Y7;var Ma=(()=>(function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool"}(Ma||(Ma={})),Ma))(),pO=function(){var e=function(n,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(n,t)};return function(n,t){function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),t$=new eo("AuthError"),Lf=function(e){function n(t){var r=this,i=r$[t],o=i.message,a=i.log;return(r=e.call(this,o)||this).constructor=n,Object.setPrototypeOf(r,n.prototype),r.name="AuthError",r.log=a||o,t$.error(r.log),r}return pO(n,e),n}(Error),n$=function(e){function n(t){var r=e.call(this,t)||this;return r.constructor=n,Object.setPrototypeOf(r,n.prototype),r.name="NoUserPoolError",r}return pO(n,e),n}(Lf),r$={noConfig:{message:Ma.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of amplify packages in your node_modules.\n\t\t\t\tRefer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)\n        "},missingAuthConfig:{message:Ma.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties.\n            This error is typically caused by one of the following scenarios:\n\n            1. Did you run `amplify push` after adding auth via `amplify add auth`?\n                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n\n            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.\n        "},emptyUsername:{message:Ma.EMPTY_USERNAME},invalidUsername:{message:Ma.INVALID_USERNAME},emptyPassword:{message:Ma.EMPTY_PASSWORD},emptyCode:{message:Ma.EMPTY_CODE},signUpError:{message:Ma.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:Ma.NO_MFA},invalidMFA:{message:Ma.INVALID_MFA},emptyChallengeResponse:{message:Ma.EMPTY_CHALLENGE},noUserSession:{message:Ma.NO_USER_SESSION},deviceConfig:{message:Ma.DEVICE_CONFIG},networkError:{message:Ma.NETWORK_ERROR},default:{message:Ma.DEFAULT_MSG}},ub=function(){return ub=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},ub.apply(this,arguments)},Ii=function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})},Ai=function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},mO=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},jt=new eo("AuthClass"),gO="aws.cognito.signin.user.admin",o$="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Ri=function(e,n,t){pd.dispatch("auth",{event:e,data:n,message:t},"Auth",o$)},s$=function(){function e(n){var t=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.Credentials=Vu,this.wrapRefreshSessionCallback=function(r){return function(o,a){return a?Ri("tokenRefresh",void 0,"New token retrieved"):Ri("tokenRefresh_failure",o,"Failed to retrieve new token"),r(o,a)}},this.configure(n),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),pd.listen("auth",function(r){switch(r.payload.event){case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true")}})}return e.prototype.getModuleName=function(){return"Auth"},e.prototype.configure=function(n){var t=this;if(!n)return this._config||{};jt.debug("configure Auth");var r=Object.assign({},this._config,wS.parseMobilehubConfig(n).Auth,n);this._config=r;var i=this._config,o=i.userPoolId,a=i.userPoolWebClientId,u=i.cookieStorage,d=i.oauth,l=i.region,f=i.identityPoolId,_=i.mandatorySignIn,m=i.refreshHandlers,E=i.identityPoolRegion,A=i.clientMetadata,I=i.endpoint;if(this._config.storage){if(!this._isValidAuthStorage(this._config.storage))throw jt.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=this._config.storage}else this._storage=u?new G7(u):n.ssr?new IH:(new y0).getStorage();if(this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),o){var se={UserPoolId:o,ClientId:a,endpoint:I};se.Storage=this._storage,this.userPool=new V7(se,this.wrapRefreshSessionCallback)}this.Credentials.configure({mandatorySignIn:_,region:E||l,userPoolId:o,identityPoolId:f,refreshHandlers:m,storage:this._storage});var me=d?Yh(this._config.oauth)?d:d.awsCognito:void 0;if(me){var Re=Object.assign({cognitoClientId:a,UserPoolId:o,domain:me.domain,scopes:me.scope,redirectSignIn:me.redirectSignIn,redirectSignOut:me.redirectSignOut,responseType:me.responseType,Storage:this._storage,urlOpener:me.urlOpener,clientMetadata:A},me.options);this._oAuthHandler=new Q7({scopes:Re.scopes,config:Re,cognitoClientId:Re.cognitoClientId});var it={};!function(e){if(_0.browserOrNode().isBrowser&&window.location)gt={url:window.location.href},it[At=gt.url]||(it[At]=!0,t._handleAuthResponse(At));else if(!_0.browserOrNode().isNode)throw new Error("Not supported");var gt,At}()}return Ri("configured",null,"The Auth category has been configured successfully"),this._config},e.prototype.signUp=function(n){for(var t=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];if(!this.userPool)return this.rejectNoUserPool();var l,o=null,a=null,u=[],d=null;if(n&&"string"==typeof n){o=n,a=r?r[0]:null;var f=r?r[1]:null,_=r?r[2]:null;f&&u.push(new Bm({Name:"email",Value:f})),_&&u.push(new Bm({Name:"phone_number",Value:_}))}else{if(!n||"object"!=typeof n)return this.rejectAuthError(hi.SignUpError);o=n.username,a=n.password,n&&n.clientMetadata?l=n.clientMetadata:this._config.clientMetadata&&(l=this._config.clientMetadata);var m=n.attributes;m&&Object.keys(m).map(function(A){u.push(new Bm({Name:A,Value:m[A]}))});var E=n.validationData;E&&(d=[],Object.keys(E).map(function(A){d.push(new Bm({Name:A,Value:E[A]}))}))}return o?a?(jt.debug("signUp attrs:",u),jt.debug("signUp validation data:",d),new Promise(function(A,I){t.userPool.signUp(o,a,u,d,function(se,me){se?(Ri("signUp_failure",se,o+" failed to signup"),I(se)):(Ri("signUp",me,o+" has signed up successfully"),A(me))},l)})):this.rejectAuthError(hi.EmptyPassword):this.rejectAuthError(hi.EmptyUsername)},e.prototype.confirmSignUp=function(n,t,r){if(!this.userPool)return this.rejectNoUserPool();if(!n)return this.rejectAuthError(hi.EmptyUsername);if(!t)return this.rejectAuthError(hi.EmptyCode);var a,i=this.createCognitoUser(n),o=!r||"boolean"!=typeof r.forceAliasCreation||r.forceAliasCreation;return r&&r.clientMetadata?a=r.clientMetadata:this._config.clientMetadata&&(a=this._config.clientMetadata),new Promise(function(u,d){i.confirmRegistration(t,o,function(l,f){l?d(l):u(f)},a)})},e.prototype.resendSignUp=function(n,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!n)return this.rejectAuthError(hi.EmptyUsername);var r=this.createCognitoUser(n);return new Promise(function(i,o){r.resendConfirmationCode(function(a,u){a?o(a):i(u)},t)})},e.prototype.signIn=function(n,t,r){if(void 0===r&&(r=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var i=null,o=null,a={};if("string"==typeof n)i=n,o=t;else{if(!function p5(e){return!!e.username}(n))return this.rejectAuthError(hi.InvalidUsername);void 0!==t&&jt.warn("The password should be defined under the first parameter object!"),i=n.username,o=n.password,a=n.validationData}if(!i)return this.rejectAuthError(hi.EmptyUsername);var u=new DH({Username:i,Password:o,ValidationData:a,ClientMetadata:r});return o?this.signInWithPassword(u):this.signInWithoutPassword(u)},e.prototype.authCallbacks=function(n,t,r){var i=this,o=this;return{onSuccess:function(a){return Ii(i,void 0,void 0,function(){var u,d,l,f;return Ai(this,function(_){switch(_.label){case 0:jt.debug(a),delete n.challengeName,delete n.challengeParam,_.label=1;case 1:return _.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return _.sent(),[4,this.Credentials.set(a,"session")];case 3:return u=_.sent(),jt.debug("succeed to get cognito credentials",u),[3,9];case 4:return d=_.sent(),jt.debug("cannot get cognito credentials",d),[3,9];case 5:return _.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return l=_.sent(),o.user=l,Ri("signIn",l,"A user "+n.getUsername()+" has been signed in"),t(l),[3,8];case 7:return f=_.sent(),jt.error("Failed to get the signed in user",f),r(f),[3,8];case 8:return[7];case 9:return[2]}})})},onFailure:function(a){jt.debug("signIn failure",a),Ri("signIn_failure",a,n.getUsername()+" failed to signin"),r(a)},customChallenge:function(a){jt.debug("signIn custom challenge answer required"),n.challengeName="CUSTOM_CHALLENGE",n.challengeParam=a,t(n)},mfaRequired:function(a,u){jt.debug("signIn MFA required"),n.challengeName=a,n.challengeParam=u,t(n)},mfaSetup:function(a,u){jt.debug("signIn mfa setup",a),n.challengeName=a,n.challengeParam=u,t(n)},newPasswordRequired:function(a,u){jt.debug("signIn new password"),n.challengeName="NEW_PASSWORD_REQUIRED",n.challengeParam={userAttributes:a,requiredAttributes:u},t(n)},totpRequired:function(a,u){jt.debug("signIn totpRequired"),n.challengeName=a,n.challengeParam=u,t(n)},selectMFAType:function(a,u){jt.debug("signIn selectMFAType",a),n.challengeName=a,n.challengeParam=u,t(n)}}},e.prototype.signInWithPassword=function(n){var t=this;if(this.pendingSignIn)throw new Error("Pending sign-in attempt already in progress");var r=this.createCognitoUser(n.getUsername());return this.pendingSignIn=new Promise(function(i,o){r.authenticateUser(n,t.authCallbacks(r,function(a){t.pendingSignIn=null,i(a)},function(a){t.pendingSignIn=null,o(a)}))}),this.pendingSignIn},e.prototype.signInWithoutPassword=function(n){var t=this,r=this.createCognitoUser(n.getUsername());return r.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise(function(i,o){r.initiateAuth(n,t.authCallbacks(r,i,o))})},e.prototype.getMFAOptions=function(n){return new Promise(function(t,r){n.getMFAOptions(function(i,o){if(i)return jt.debug("get MFA Options failed",i),void r(i);jt.debug("get MFA options success",o),t(o)})})},e.prototype.getPreferredMFA=function(n,t){var r=this,i=this;return new Promise(function(o,a){n.getUserData(function(l,f){return Ii(r,void 0,void 0,function(){var _,m;return Ai(this,function(E){switch(E.label){case 0:if(!l)return[3,5];if(jt.debug("getting preferred mfa failed",l),!this.isSessionInvalid(l))return[3,4];E.label=1;case 1:return E.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(n)];case 2:return E.sent(),[3,4];case 3:return _=E.sent(),a(new Error("Session is invalid due to: "+l.message+" and failed to clean up invalid session: "+_.message)),[2];case 4:return a(l),[2];case 5:return(m=i._getMfaTypeFromUserData(f))?(o(m),[2]):(a("invalid MFA Type"),[2])}})})},{bypassCache:!!t&&t.bypassCache,clientMetadata:r._config.clientMetadata})})},e.prototype._getMfaTypeFromUserData=function(n){var t=null,r=n.PreferredMfaSetting;if(r)t=r;else{var i=n.UserMFASettingList;i?0===i.length?t="NOMFA":jt.debug("invalid case for getPreferredMFA",n):t=n.MFAOptions?"SMS_MFA":"NOMFA"}return t},e.prototype._getUserData=function(n,t){var r=this;return new Promise(function(i,o){n.getUserData(function(a,u){return Ii(r,void 0,void 0,function(){var d;return Ai(this,function(l){switch(l.label){case 0:if(!a)return[3,5];if(jt.debug("getting user data failed",a),!this.isSessionInvalid(a))return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(n)];case 2:return l.sent(),[3,4];case 3:return d=l.sent(),o(new Error("Session is invalid due to: "+a.message+" and failed to clean up invalid session: "+d.message)),[2];case 4:return o(a),[2];case 5:i(u),l.label=6;case 6:return[2]}})})},t)})},e.prototype.setPreferredMFA=function(n,t){return Ii(this,void 0,void 0,function(){var r,i,o,a,d,l,_=this;return Ai(this,function(m){switch(m.label){case 0:return[4,this._getUserData(n,{bypassCache:!0,clientMetadata:r=this._config.clientMetadata})];case 1:switch(i=m.sent(),o=null,a=null,t){case"TOTP":case"SOFTWARE_TOKEN_MFA":return[3,2];case"SMS":case"SMS_MFA":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return a={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return o={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return d=i.UserMFASettingList,[4,this._getMfaTypeFromUserData(i)];case 5:if("NOMFA"===(l=m.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===l)o={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==l)return[2,this.rejectAuthError(hi.InvalidMFA)];a={PreferredMfa:!1,Enabled:!1}}return d&&0!==d.length&&d.forEach(function(E){"SMS_MFA"===E?o={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===E&&(a={PreferredMfa:!1,Enabled:!1})}),[3,7];case 6:return jt.debug("no validmfa method provided"),[2,this.rejectAuthError(hi.NoMFA)];case 7:return[2,new Promise(function(E,A){n.setUserMfaPreference(o,a,function(I,se){if(I)return jt.debug("Set user mfa preference error",I),A(I);jt.debug("Set user mfa success",se),jt.debug("Caching the latest user data into local"),n.getUserData(function(me,Re){return Ii(_,void 0,void 0,function(){var it;return Ai(this,function(gt){switch(gt.label){case 0:if(!me)return[3,5];if(jt.debug("getting user data failed",me),!this.isSessionInvalid(me))return[3,4];gt.label=1;case 1:return gt.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(n)];case 2:return gt.sent(),[3,4];case 3:return it=gt.sent(),A(new Error("Session is invalid due to: "+me.message+" and failed to clean up invalid session: "+it.message)),[2];case 4:return[2,A(me)];case 5:return[2,E(se)]}})})},{bypassCache:!0,clientMetadata:r})})})]}})})},e.prototype.disableSMS=function(n){return new Promise(function(t,r){n.disableMFA(function(i,o){if(i)return jt.debug("disable mfa failed",i),void r(i);jt.debug("disable mfa succeed",o),t(o)})})},e.prototype.enableSMS=function(n){return new Promise(function(t,r){n.enableMFA(function(i,o){if(i)return jt.debug("enable mfa failed",i),void r(i);jt.debug("enable mfa succeed",o),t(o)})})},e.prototype.setupTOTP=function(n){return new Promise(function(t,r){n.associateSoftwareToken({onFailure:function(i){jt.debug("associateSoftwareToken failed",i),r(i)},associateSecretCode:function(i){jt.debug("associateSoftwareToken sucess",i),t(i)}})})},e.prototype.verifyTotpToken=function(n,t){return jt.debug("verification totp token",n,t),new Promise(function(r,i){n.verifySoftwareToken(t,"My TOTP device",{onFailure:function(o){jt.debug("verifyTotpToken failed",o),i(o)},onSuccess:function(o){Ri("signIn",n,"A user "+n.getUsername()+" has been signed in"),jt.debug("verifyTotpToken success",o),r(o)}})})},e.prototype.confirmSignIn=function(n,t,r,i){var o=this;if(void 0===i&&(i=this._config.clientMetadata),!t)return this.rejectAuthError(hi.EmptyCode);var a=this;return new Promise(function(u,d){n.sendMFACode(t,{onSuccess:function(l){return Ii(o,void 0,void 0,function(){var f,_;return Ai(this,function(m){switch(m.label){case 0:jt.debug(l),m.label=1;case 1:return m.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return m.sent(),[4,this.Credentials.set(l,"session")];case 3:return f=m.sent(),jt.debug("succeed to get cognito credentials",f),[3,6];case 4:return _=m.sent(),jt.debug("cannot get cognito credentials",_),[3,6];case 5:return a.user=n,Ri("signIn",n,"A user "+n.getUsername()+" has been signed in"),u(n),[7];case 6:return[2]}})})},onFailure:function(l){jt.debug("confirm signIn failure",l),d(l)}},r,i)})},e.prototype.completeNewPassword=function(n,t,r,i){var o=this;if(void 0===r&&(r={}),void 0===i&&(i=this._config.clientMetadata),!t)return this.rejectAuthError(hi.EmptyPassword);var a=this;return new Promise(function(u,d){n.completeNewPasswordChallenge(t,r,{onSuccess:function(l){return Ii(o,void 0,void 0,function(){var f,_;return Ai(this,function(m){switch(m.label){case 0:jt.debug(l),m.label=1;case 1:return m.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return m.sent(),[4,this.Credentials.set(l,"session")];case 3:return f=m.sent(),jt.debug("succeed to get cognito credentials",f),[3,6];case 4:return _=m.sent(),jt.debug("cannot get cognito credentials",_),[3,6];case 5:return a.user=n,Ri("signIn",n,"A user "+n.getUsername()+" has been signed in"),u(n),[7];case 6:return[2]}})})},onFailure:function(l){jt.debug("completeNewPassword failure",l),Ri("completeNewPassword_failure",l,o.user+" failed to complete the new password flow"),d(l)},mfaRequired:function(l,f){jt.debug("signIn MFA required"),n.challengeName=l,n.challengeParam=f,u(n)},mfaSetup:function(l,f){jt.debug("signIn mfa setup",l),n.challengeName=l,n.challengeParam=f,u(n)},totpRequired:function(l,f){jt.debug("signIn mfa setup",l),n.challengeName=l,n.challengeParam=f,u(n)}},i)})},e.prototype.sendCustomChallengeAnswer=function(n,t,r){var i=this;return void 0===r&&(r=this._config.clientMetadata),this.userPool?t?new Promise(function(a,u){n.sendCustomChallengeAnswer(t,i.authCallbacks(n,a,u),r)}):this.rejectAuthError(hi.EmptyChallengeResponse):this.rejectNoUserPool()},e.prototype.deleteUserAttributes=function(n,t){var r=this;return new Promise(function(i,o){r.userSession(n).then(function(a){n.deleteAttributes(t,function(u,d){return u?o(u):i(d)})})})},e.prototype.deleteUser=function(){return Ii(this,void 0,void 0,function(){var n,t,r=this;return Ai(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._storageSync];case 1:return i.sent(),[3,3];case 2:throw n=i.sent(),jt.debug("Failed to sync cache info into memory",n),new Error(n);case 3:return t=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise(function(o,a){return Ii(r,void 0,void 0,function(){var u,d=this;return Ai(this,function(l){if(this.userPool){if(!(u=this.userPool.getCurrentUser()))return jt.debug("Failed to get user from user pool"),[2,a(new Error("No current user."))];u.getSession(function(f,_){return Ii(d,void 0,void 0,function(){var m,E=this;return Ai(this,function(A){switch(A.label){case 0:if(!f)return[3,5];if(jt.debug("Failed to get the user session",f),!this.isSessionInvalid(f))return[3,4];A.label=1;case 1:return A.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(u)];case 2:return A.sent(),[3,4];case 3:return m=A.sent(),a(new Error("Session is invalid due to: "+f.message+" and failed to clean up invalid session: "+m.message)),[2];case 4:return[2,a(f)];case 5:u.deleteUser(function(I,se){if(I)a(I);else{Ri("userDeleted",se,"The authenticated user has been deleted."),u.signOut(),E.user=null;try{E.cleanCachedItems()}catch(me){jt.debug("failed to clear cached items")}t?E.oAuthSignOutRedirect(o,a):(Ri("signOut",E.user,"A user has been signed out"),o(se))}}),A.label=6;case 6:return[2]}})})})}else jt.debug("no Congito User pool"),a(new Error("Cognito User pool does not exist"));return[2]})})})]}})})},e.prototype.updateUserAttributes=function(n,t,r){void 0===r&&(r=this._config.clientMetadata);var i=[],o=this;return new Promise(function(a,u){o.userSession(n).then(function(d){for(var l in t)"sub"!==l&&l.indexOf("_verified")<0&&i.push({Name:l,Value:t[l]});n.updateAttributes(i,function(_,m){return _?u(_):a(m)},r)})})},e.prototype.userAttributes=function(n){var t=this;return new Promise(function(r,i){t.userSession(n).then(function(o){n.getUserAttributes(function(a,u){a?i(a):r(u)})})})},e.prototype.verifiedContact=function(n){var t=this;return this.userAttributes(n).then(function(r){var i=t.attributesToObject(r),o={},a={};return i.email&&(i.email_verified?a.email=i.email:o.email=i.email),i.phone_number&&(i.phone_number_verified?a.phone_number=i.phone_number:o.phone_number=i.phone_number),{verified:a,unverified:o}})},e.prototype.isErrorWithMessage=function(n){return"object"==typeof n&&Object.prototype.hasOwnProperty.call(n,"message")},e.prototype.isTokenRevokedError=function(n){return this.isErrorWithMessage(n)&&"Access Token has been revoked"===n.message},e.prototype.isRefreshTokenRevokedError=function(n){return this.isErrorWithMessage(n)&&"Refresh Token has been revoked"===n.message},e.prototype.isUserDisabledError=function(n){return this.isErrorWithMessage(n)&&"User is disabled."===n.message},e.prototype.isUserDoesNotExistError=function(n){return this.isErrorWithMessage(n)&&"User does not exist."===n.message},e.prototype.isRefreshTokenExpiredError=function(n){return this.isErrorWithMessage(n)&&"Refresh Token has expired"===n.message},e.prototype.isSignedInHostedUI=function(){return this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI")},e.prototype.isSessionInvalid=function(n){return this.isUserDisabledError(n)||this.isUserDoesNotExistError(n)||this.isTokenRevokedError(n)||this.isRefreshTokenRevokedError(n)||this.isRefreshTokenExpiredError(n)},e.prototype.cleanUpInvalidSession=function(n){return Ii(this,void 0,void 0,function(){var r=this;return Ai(this,function(i){switch(i.label){case 0:n.signOut(),this.user=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.cleanCachedItems()];case 2:return i.sent(),[3,4];case 3:return i.sent(),jt.debug("failed to clear cached items"),[3,4];case 4:return this.isSignedInHostedUI()?[2,new Promise(function(o,a){r.oAuthSignOutRedirect(o,a)})]:(Ri("signOut",this.user,"A user has been signed out"),[2])}})})},e.prototype.currentUserPoolUser=function(n){var t=this;return this.userPool?new Promise(function(r,i){t._storageSync.then(function(){return Ii(t,void 0,void 0,function(){var o,u=this;return Ai(this,function(d){switch(d.label){case 0:return this.isOAuthInProgress()?(jt.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise(function(l){var f=setTimeout(function(){jt.debug("OAuth signIn in progress timeout"),pd.remove("auth",_),l()},1e4);function _(m){var A=m.payload.event;("cognitoHostedUI"===A||"cognitoHostedUI_failure"===A)&&(jt.debug("OAuth signIn resolved: "+A),clearTimeout(f),pd.remove("auth",_),l())}pd.listen("auth",_)})]):[3,2];case 1:d.sent(),d.label=2;case 2:return(o=this.userPool.getCurrentUser())?(o.getSession(function(l,f){return Ii(u,void 0,void 0,function(){var _,m,E,A,se=this;return Ai(this,function(me){switch(me.label){case 0:if(!l)return[3,5];if(jt.debug("Failed to get the user session",l),!this.isSessionInvalid(l))return[3,4];me.label=1;case 1:return me.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(o)];case 2:return me.sent(),[3,4];case 3:return _=me.sent(),i(new Error("Session is invalid due to: "+l.message+" and failed to clean up invalid session: "+_.message)),[2];case 4:return i(l),[2];case 5:return(m=!!n&&n.bypassCache)?[4,this.Credentials.clear()]:[3,7];case 6:me.sent(),me.label=7;case 7:return E=this._config.clientMetadata,(void 0===(A=f.getAccessToken().decodePayload().scope)?"":A).split(" ").includes(gO)?(o.getUserData(function(Re,it){return Ii(se,void 0,void 0,function(){var gt,At,Vt,wn,ar,Or;return Ai(this,function(Dn){switch(Dn.label){case 0:if(!Re)return[3,7];if(jt.debug("getting user data failed",Re),!this.isSessionInvalid(Re))return[3,5];Dn.label=1;case 1:return Dn.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(o)];case 2:return Dn.sent(),[3,4];case 3:return gt=Dn.sent(),i(new Error("Session is invalid due to: "+Re.message+" and failed to clean up invalid session: "+gt.message)),[2];case 4:return i(Re),[3,6];case 5:r(o),Dn.label=6;case 6:return[2];case 7:for(At=it.PreferredMfaSetting||"NOMFA",Vt=[],wn=0;wn<it.UserAttributes.length;wn++)ar=new Bm({Name:it.UserAttributes[wn].Name,Value:it.UserAttributes[wn].Value}),Vt.push(ar);return Or=this.attributesToObject(Vt),Object.assign(o,{attributes:Or,preferredMFA:At}),[2,r(o)]}})})},{bypassCache:m,clientMetadata:E}),[2]):(jt.debug("Unable to get the user data because the "+gO+" is not in the scopes of the access token"),[2,r(o)])}})})},{clientMetadata:this._config.clientMetadata}),[2]):(jt.debug("Failed to get user from user pool"),i("No current user"),[2])}})})}).catch(function(o){return jt.debug("Failed to sync cache info into memory",o),i(o)})}):this.rejectNoUserPool()},e.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},e.prototype.currentAuthenticatedUser=function(n){return Ii(this,void 0,void 0,function(){var t,r,i,o,a;return Ai(this,function(u){switch(u.label){case 0:jt.debug("getting current authenticated user"),t=null,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this._storageSync];case 2:return u.sent(),[3,4];case 3:throw r=u.sent(),jt.debug("Failed to sync cache info into memory",r),r;case 4:try{(i=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")))&&(t=ub(ub({},i.user),{token:i.token}))}catch(d){jt.debug("cannot load federated user from auth storage")}return t?(this.user=t,jt.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:jt.debug("get current authenticated userpool user"),o=null,u.label=6;case 6:return u.trys.push([6,8,,9]),[4,this.currentUserPoolUser(n)];case 7:return o=u.sent(),[3,9];case 8:return"No userPool"===(a=u.sent())&&jt.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),jt.debug("The user is not authenticated by the error",a),[2,Promise.reject("The user is not authenticated")];case 9:return this.user=o,[2,this.user]}})})},e.prototype.currentSession=function(){var n=this;return jt.debug("Getting current session"),this.userPool?new Promise(function(t,r){n.currentUserPoolUser().then(function(i){n.userSession(i).then(function(o){t(o)}).catch(function(o){jt.debug("Failed to get the current session",o),r(o)})}).catch(function(i){jt.debug("Failed to get the current user",i),r(i)})}):this.rejectNoUserPool()},e.prototype.userSession=function(n){var t=this;if(!n)return jt.debug("the user is null"),this.rejectAuthError(hi.NoUserSession);var r=this._config.clientMetadata;return new Promise(function(i,o){jt.debug("Getting the session from this user:",n),n.getSession(function(a,u){return Ii(t,void 0,void 0,function(){var d;return Ai(this,function(l){switch(l.label){case 0:if(!a)return[3,5];if(jt.debug("Failed to get the session from user",n),!this.isSessionInvalid(a))return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(n)];case 2:return l.sent(),[3,4];case 3:return d=l.sent(),o(new Error("Session is invalid due to: "+a.message+" and failed to clean up invalid session: "+d.message)),[2];case 4:return o(a),[2];case 5:return jt.debug("Succeed to get the user session",u),i(u),[2]}})})},{clientMetadata:r})})},e.prototype.currentUserCredentials=function(){return Ii(this,void 0,void 0,function(){var n,t,r=this;return Ai(this,function(i){switch(i.label){case 0:jt.debug("Getting current user credentials"),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._storageSync];case 2:return i.sent(),[3,4];case 3:throw n=i.sent(),jt.debug("Failed to sync cache info into memory",n),n;case 4:t=null;try{t=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(o){jt.debug("failed to get or parse item aws-amplify-federatedInfo",o)}return t?[2,this.Credentials.refreshFederatedToken(t)]:[2,this.currentSession().then(function(o){return jt.debug("getting session success",o),r.Credentials.set(o,"session")}).catch(function(){return jt.debug("getting guest credentials"),r.Credentials.set(null,"guest")})]}})})},e.prototype.currentCredentials=function(){return jt.debug("getting current credentials"),this.Credentials.get()},e.prototype.verifyUserAttribute=function(n,t,r){return void 0===r&&(r=this._config.clientMetadata),new Promise(function(i,o){n.getAttributeVerificationCode(t,{onSuccess:function(a){return i(a)},onFailure:function(a){return o(a)}},r)})},e.prototype.verifyUserAttributeSubmit=function(n,t,r){return r?new Promise(function(i,o){n.verifyAttribute(t,r,{onSuccess:function(a){i(a)},onFailure:function(a){o(a)}})}):this.rejectAuthError(hi.EmptyCode)},e.prototype.verifyCurrentUserAttribute=function(n){var t=this;return t.currentUserPoolUser().then(function(r){return t.verifyUserAttribute(r,n)})},e.prototype.verifyCurrentUserAttributeSubmit=function(n,t){var r=this;return r.currentUserPoolUser().then(function(i){return r.verifyUserAttributeSubmit(i,n,t)})},e.prototype.cognitoIdentitySignOut=function(n,t){return Ii(this,void 0,void 0,function(){var r,i,o=this;return Ai(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this._storageSync];case 1:return a.sent(),[3,3];case 2:throw r=a.sent(),jt.debug("Failed to sync cache info into memory",r),r;case 3:return i=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise(function(u,d){n&&n.global?(jt.debug("user global sign out",t),t.getSession(function(f,_){return Ii(o,void 0,void 0,function(){var m,E=this;return Ai(this,function(A){switch(A.label){case 0:if(!f)return[3,5];if(jt.debug("failed to get the user session",f),!this.isSessionInvalid(f))return[3,4];A.label=1;case 1:return A.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(t)];case 2:return A.sent(),[3,4];case 3:return m=A.sent(),d(new Error("Session is invalid due to: "+f.message+" and failed to clean up invalid session: "+m.message)),[2];case 4:return[2,d(f)];case 5:return t.globalSignOut({onSuccess:function(I){if(jt.debug("global sign out success"),!i)return u();E.oAuthSignOutRedirect(u,d)},onFailure:function(I){return jt.debug("global sign out failed",I),d(I)}}),[2]}})})},{clientMetadata:o._config.clientMetadata})):(jt.debug("user sign out",t),t.signOut(function(){if(!i)return u();o.oAuthSignOutRedirect(u,d)}))})]}})})},e.prototype.oAuthSignOutRedirect=function(n,t){_0.browserOrNode().isBrowser?this.oAuthSignOutRedirectOrReject(t):this.oAuthSignOutAndResolve(n)},e.prototype.oAuthSignOutAndResolve=function(n){this._oAuthHandler.signOut(),n()},e.prototype.oAuthSignOutRedirectOrReject=function(n){this._oAuthHandler.signOut(),setTimeout(function(){return n(Error("Signout timeout fail"))},3e3)},e.prototype.signOut=function(n){return Ii(this,void 0,void 0,function(){var r;return Ai(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return i.sent(),[3,3];case 2:return i.sent(),jt.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(r=this.userPool.getCurrentUser())?[4,this.cognitoIdentitySignOut(n,r)]:[3,5]:[3,7];case 4:return i.sent(),[3,6];case 5:jt.debug("no current Cognito user"),i.label=6;case 6:return[3,8];case 7:jt.debug("no Cognito User pool"),i.label=8;case 8:return Ri("signOut",this.user,"A user has been signed out"),this.user=null,[2]}})})},e.prototype.cleanCachedItems=function(){return Ii(this,void 0,void 0,function(){return Ai(this,function(n){switch(n.label){case 0:return[4,this.Credentials.clear()];case 1:return n.sent(),[2]}})})},e.prototype.changePassword=function(n,t,r,i){var o=this;return void 0===i&&(i=this._config.clientMetadata),new Promise(function(a,u){o.userSession(n).then(function(d){n.changePassword(t,r,function(l,f){return l?(jt.debug("change password failure",l),u(l)):a(f)},i)})})},e.prototype.forgotPassword=function(n,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!n)return this.rejectAuthError(hi.EmptyUsername);var r=this.createCognitoUser(n);return new Promise(function(i,o){r.forgotPassword({onSuccess:function(){i()},onFailure:function(a){jt.debug("forgot password failure",a),Ri("forgotPassword_failure",a,n+" forgotPassword failed"),o(a)},inputVerificationCode:function(a){Ri("forgotPassword",r,n+" has initiated forgot password flow"),i(a)}},t)})},e.prototype.forgotPasswordSubmit=function(n,t,r,i){if(void 0===i&&(i=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!n)return this.rejectAuthError(hi.EmptyUsername);if(!t)return this.rejectAuthError(hi.EmptyCode);if(!r)return this.rejectAuthError(hi.EmptyPassword);var o=this.createCognitoUser(n);return new Promise(function(a,u){o.confirmPassword(t,r,{onSuccess:function(d){Ri("forgotPasswordSubmit",o,n+" forgotPasswordSubmit successful"),a(d)},onFailure:function(d){Ri("forgotPasswordSubmit_failure",d,n+" forgotPasswordSubmit failed"),u(d)}},i)})},e.prototype.currentUserInfo=function(){return Ii(this,void 0,void 0,function(){var n,t,r,i,o,u,d;return Ai(this,function(l){switch(l.label){case 0:return(n=this.Credentials.getCredSource())&&"aws"!==n&&"userPool"!==n?[3,9]:[4,this.currentUserPoolUser().catch(function(f){return jt.error(f)})];case 1:if(!(d=l.sent()))return[2,null];l.label=2;case 2:return l.trys.push([2,8,,9]),[4,this.userAttributes(d)];case 3:t=l.sent(),r=this.attributesToObject(t),i=null,l.label=4;case 4:return l.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return i=l.sent(),[3,7];case 6:return o=l.sent(),jt.debug("Failed to retrieve credentials while getting current user info",o),[3,7];case 7:return[2,{id:i?i.identityId:void 0,username:d.getUsername(),attributes:r}];case 8:return u=l.sent(),jt.error("currentUserInfo error",u),[2,{}];case 9:return"federated"===n?[2,(d=this.user)||{}]:[2]}})})},e.prototype.federatedSignIn=function(n,t,r){return Ii(this,void 0,void 0,function(){var i,o,a,u,d,l,E,A;return Ai(this,function(I){switch(I.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(void 0===n&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return AE(n)||function f5(e){return e&&!!["customProvider"].find(function(t){return e.hasOwnProperty(t)})}(n)||function h5(e){return e&&!!["customState"].find(function(t){return e.hasOwnProperty(t)})}(n)||void 0===n?(d=AE(i=n||{provider:Av.Cognito})?i.provider:i.customProvider,AE(i),o=i.customState,this._config.userPoolId&&(a=Yh(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,u=Yh(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,u,a,d,o)),[3,4]):[3,1];case 1:d=n;try{(l=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&jt.warn("There is already a signed in user: "+l+" in your app.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch(se){}return[4,this.Credentials.set({provider:d,token:t.token,identity_id:t.identity_id,user:r,expires_at:t.expires_at},"federation")];case 2:return E=I.sent(),[4,this.currentAuthenticatedUser()];case 3:return A=I.sent(),Ri("signIn",A,"A user "+A.username+" has been signed in"),jt.debug("federated sign in credentials",E),[2,E];case 4:return[2]}})})},e.prototype._handleAuthResponse=function(n){return Ii(this,void 0,void 0,function(){var t,r,i,o,a,d,l,f,_,m,E,A,I;return Ai(this,function(se){switch(se.label){case 0:if(this.oAuthFlowInProgress)return jt.debug("Skipping URL "+n+" current flow in progress"),[2];se.label=1;case 1:if(se.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(Ri("parsingCallbackUrl",{url:n},"The callback url is being parsed"),t=n||(_0.browserOrNode().isBrowser?window.location.href:""),r=!!((0,Cs.Qc)(t).query||"").split("&").map(function(me){return me.split("=")}).find(function(me){var it=mO(me,1)[0];return"code"===it||"error"===it}),i=!!((0,Cs.Qc)(t).hash||"#").substr(1).split("&").map(function(me){return me.split("=")}).find(function(me){var it=mO(me,1)[0];return"access_token"===it||"error"===it}),!r&&!i)return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),se.label=2;case 2:return se.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(t)];case 3:return o=se.sent(),a=o.accessToken,d=o.refreshToken,l=o.state,f=new kS({IdToken:new RS({IdToken:o.idToken}),RefreshToken:new DS({RefreshToken:d}),AccessToken:new IS({AccessToken:a})}),_=void 0,this._config.identityPoolId?[4,this.Credentials.set(f,"session")]:[3,5];case 4:_=se.sent(),jt.debug("AWS credentials",_),se.label=5;case 5:return m=/-/.test(l),(E=this.createCognitoUser(f.getIdToken().decodePayload()["cognito:username"])).setSignInUserSession(f),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),Ri("signIn",E,"A user "+E.getUsername()+" has been signed in"),Ri("cognitoHostedUI",E,"A user "+E.getUsername()+" has been signed in via Cognito Hosted UI"),m&&(A=l.split("-").splice(1).join("-"),Ri("customOAuthState",function RH(e){return e.match(/.{2}/g).map(function(n){return String.fromCharCode(parseInt(n,16))}).join("")}(A),"State for user "+E.getUsername())),[2,_];case 6:return I=se.sent(),jt.debug("Error in cognito hosted auth response",I),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),Ri("signIn_failure",I,"The OAuth response flow failed"),Ri("cognitoHostedUI_failure",I,"A failure occurred when returning to the Cognito Hosted UI"),Ri("customState_failure",I,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}})})},e.prototype.essentialCredentials=function(n){return{accessKeyId:n.accessKeyId,sessionToken:n.sessionToken,secretAccessKey:n.secretAccessKey,identityId:n.identityId,authenticated:n.authenticated}},e.prototype.attributesToObject=function(n){var t=this,r={};return n&&n.map(function(i){r[i.Name]="email_verified"===i.Name||"phone_number_verified"===i.Name?t.isTruthyString(i.Value)||!0===i.Value:i.Value}),r},e.prototype.isTruthyString=function(n){return"function"==typeof n.toLowerCase&&"true"===n.toLowerCase()},e.prototype.createCognitoUser=function(n){var t={Username:n,Pool:this.userPool};t.Storage=this._storage;var r=this._config.authenticationFlowType,i=new MS(t);return r&&i.setAuthenticationFlowType(r),i},e.prototype._isValidAuthStorage=function(n){return!!n&&"function"==typeof n.getItem&&"function"==typeof n.setItem&&"function"==typeof n.removeItem&&"function"==typeof n.clear},e.prototype.noUserPoolErrorHandler=function(n){return!n||n.userPoolId&&n.identityPoolId?hi.NoConfig:hi.MissingAuthConfig},e.prototype.rejectAuthError=function(n){return Promise.reject(new Lf(n))},e.prototype.rejectNoUserPool=function(){var n=this.noUserPoolErrorHandler(this._config);return Promise.reject(new n$(n))},e.prototype.rememberDevice=function(){return Ii(this,void 0,void 0,function(){var n,t;return Ai(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return n=r.sent(),[3,3];case 2:return t=r.sent(),jt.debug("The user is not authenticated by the error",t),[2,Promise.reject("The user is not authenticated")];case 3:return n.getCachedDeviceKeyAndPassword(),[2,new Promise(function(i,o){n.setDeviceStatusRemembered({onSuccess:function(a){i(a)},onFailure:function(a){o("InvalidParameterException"===a.code?new Lf(hi.DeviceConfig):"NetworkError"===a.code?new Lf(hi.NetworkError):a)}})})]}})})},e.prototype.forgetDevice=function(){return Ii(this,void 0,void 0,function(){var n,t;return Ai(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return n=r.sent(),[3,3];case 2:return t=r.sent(),jt.debug("The user is not authenticated by the error",t),[2,Promise.reject("The user is not authenticated")];case 3:return n.getCachedDeviceKeyAndPassword(),[2,new Promise(function(i,o){n.forgetDevice({onSuccess:function(a){i(a)},onFailure:function(a){o("InvalidParameterException"===a.code?new Lf(hi.DeviceConfig):"NetworkError"===a.code?new Lf(hi.NetworkError):a)}})})]}})})},e.prototype.fetchDevices=function(){return Ii(this,void 0,void 0,function(){var n,t;return Ai(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return n=r.sent(),[3,3];case 2:throw t=r.sent(),jt.debug("The user is not authenticated by the error",t),new Error("The user is not authenticated");case 3:return n.getCachedDeviceKeyAndPassword(),[2,new Promise(function(i,o){n.listDevices(60,null,{onSuccess:function(u){var d=u.Devices.map(function(l){var f=l.DeviceAttributes.find(function(m){return"device_name"===m.Name})||{};return{id:l.DeviceKey,name:f.Value}});i(d)},onFailure:function(u){o("InvalidParameterException"===u.code?new Lf(hi.DeviceConfig):"NetworkError"===u.code?new Lf(hi.NetworkError):u)}})})]}})})},e}(),vO=new s$(null);Es.register(vO);var jl={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new y0).getStorage()};function _O(e){var n=0;n=e.length;for(var t=e.length;t>=0;t-=1){var r=e.charCodeAt(t);r>127&&r<=2047?n+=1:r>2047&&r<=65535&&(n+=2),r>=56320&&r<=57343&&(t-=1)}return n}function jm(){return(new Date).getTime()}function lb(e){return Number.isInteger?Number.isInteger(e):function u$(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}(e)}var cb={},bd=(function(){function e(){}e.clear=function(){cb={}},e.getItem=function(n){return cb[n]||null},e.setItem=function(n,t){cb[n]=t},e.removeItem=function(n){delete cb[n]}}(),new eo("StorageCache")),l$=function(){function e(n){this.config=Object.assign({},n),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}return e.prototype.getModuleName=function(){return"Cache"},e.prototype.checkConfig=function(){lb(this.config.capacityInBytes)||(bd.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=jl.capacityInBytes),lb(this.config.itemMaxSize)||(bd.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=jl.itemMaxSize),lb(this.config.defaultTTL)||(bd.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=jl.defaultTTL),lb(this.config.defaultPriority)||(bd.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=jl.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(bd.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=jl.itemMaxSize),(this.config.defaultPriority>5||this.config.defaultPriority<1)&&(bd.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=jl.defaultPriority),(Number(this.config.warningThreshold)>1||Number(this.config.warningThreshold)<0)&&(bd.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=jl.warningThreshold),this.config.capacityInBytes>5242880&&(bd.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=jl.capacityInBytes)},e.prototype.fillCacheItem=function(n,t,r){var i={key:n,data:t,timestamp:jm(),visitedTime:jm(),priority:r.priority,expires:r.expires,type:typeof t,byteSize:0};return i.byteSize=_O(JSON.stringify(i)),i.byteSize=_O(JSON.stringify(i)),i},e.prototype.configure=function(n){return n?(n.keyPrefix&&bd.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,n,n.Cache),this.checkConfig(),this.config):this.config},e}(),c$=function(){var e=function(n,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(n,t)};return function(n,t){function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ps=new eo("Cache"),d$=function(e){function n(t){var r=this,i=t?Object.assign({},jl,t):jl;return(r=e.call(this,i)||this).config.storage=i.storage,r.getItem=r.getItem.bind(r),r.setItem=r.setItem.bind(r),r.removeItem=r.removeItem.bind(r),r}return c$(n,e),n.prototype._decreaseCurSizeInBytes=function(t){var r=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(r-t).toString())},n.prototype._increaseCurSizeInBytes=function(t){var r=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(r+t).toString())},n.prototype._refreshItem=function(t,r){return t.visitedTime=jm(),this.config.storage.setItem(r,JSON.stringify(t)),t},n.prototype._isExpired=function(t){var r=this.config.storage.getItem(t),i=JSON.parse(r);return jm()>=i.expires},n.prototype._removeItem=function(t,r){var i=r||JSON.parse(this.config.storage.getItem(t)).byteSize;this._decreaseCurSizeInBytes(i),this.config.storage.removeItem(t)},n.prototype._setItem=function(t,r){this._increaseCurSizeInBytes(r.byteSize);try{this.config.storage.setItem(t,JSON.stringify(r))}catch(i){this._decreaseCurSizeInBytes(r.byteSize),Ps.error("Failed to set item "+i)}},n.prototype._sizeToPop=function(t){var r=this.getCacheCurSize()+t-this.config.capacityInBytes,i=(1-this.config.warningThreshold)*this.config.capacityInBytes;return r>i?r:i},n.prototype._isCacheFull=function(t){return t+this.getCacheCurSize()>this.config.capacityInBytes},n.prototype._findValidKeys=function(){for(var t=[],r=[],i=0;i<this.config.storage.length;i+=1)r.push(this.config.storage.key(i));for(i=0;i<r.length;i+=1){var o=r[i];0===o.indexOf(this.config.keyPrefix)&&o!==this.cacheCurSizeKey&&(this._isExpired(o)?this._removeItem(o):t.push(o))}return t},n.prototype._popOutItems=function(t,r){for(var i=[],o=r,a=0;a<t.length;a+=1){var u=this.config.storage.getItem(t[a]);if(null!=u){var d=JSON.parse(u);i.push(d)}}for(i.sort(function(l,f){return l.priority>f.priority?-1:l.priority<f.priority?1:l.visitedTime<f.visitedTime?-1:1}),a=0;a<i.length;a+=1)if(this._removeItem(i[a].key,i[a].byteSize),(o-=i[a].byteSize)<=0)return},n.prototype.setItem=function(t,r,i){Ps.log("Set item: key is "+t+", value is "+r+" with options: "+i);var o=this.config.keyPrefix+t;if(o!==this.config.keyPrefix&&o!==this.cacheCurSizeKey)if(void 0!==r){var a={priority:i&&void 0!==i.priority?i.priority:this.config.defaultPriority,expires:i&&void 0!==i.expires?i.expires:this.config.defaultTTL+jm()};if(a.priority<1||a.priority>5)Ps.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else{var u=this.fillCacheItem(o,r,a);if(u.byteSize>this.config.itemMaxSize)Ps.warn("Item with key: "+t+" you are trying to put into is too big!");else try{var d=this.config.storage.getItem(o);if(d&&this._removeItem(o,JSON.parse(d).byteSize),this._isCacheFull(u.byteSize)){var l=this._findValidKeys();if(this._isCacheFull(u.byteSize)){var f=this._sizeToPop(u.byteSize);this._popOutItems(l,f)}}this._setItem(o,u)}catch(_){Ps.warn("setItem failed! "+_)}}}else Ps.warn("The value of item should not be undefined!");else Ps.warn("Invalid key: should not be empty or 'CurSize'")},n.prototype.getItem=function(t,r){Ps.log("Get item: key is "+t+" with options "+r);var i=null,o=this.config.keyPrefix+t;if(o===this.config.keyPrefix||o===this.cacheCurSizeKey)return Ps.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(i=this.config.storage.getItem(o))){if(!this._isExpired(o)){var a=JSON.parse(i);return(a=this._refreshItem(a,o)).data}this._removeItem(o,JSON.parse(i).byteSize),i=null}if(r&&void 0!==r.callback){var u=r.callback();return null!==u&&this.setItem(t,u,r),u}return null}catch(d){return Ps.warn("getItem failed! "+d),null}},n.prototype.removeItem=function(t){Ps.log("Remove item: key is "+t);var r=this.config.keyPrefix+t;if(r!==this.config.keyPrefix&&r!==this.cacheCurSizeKey)try{var i=this.config.storage.getItem(r);i&&this._removeItem(r,JSON.parse(i).byteSize)}catch(o){Ps.warn("removeItem failed! "+o)}},n.prototype.clear=function(){Ps.log("Clear Cache");for(var t=[],r=0;r<this.config.storage.length;r+=1){var i=this.config.storage.key(r);0===i.indexOf(this.config.keyPrefix)&&t.push(i)}try{for(r=0;r<t.length;r+=1)this.config.storage.removeItem(t[r])}catch(o){Ps.warn("clear failed! "+o)}},n.prototype.getAllKeys=function(){for(var t=[],r=0;r<this.config.storage.length;r+=1){var i=this.config.storage.key(r);0===i.indexOf(this.config.keyPrefix)&&i!==this.cacheCurSizeKey&&t.push(i.substring(this.config.keyPrefix.length))}return t},n.prototype.getCacheCurSize=function(){var t=this.config.storage.getItem(this.cacheCurSizeKey);return t||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),t="0"),Number(t)},n.prototype.createInstance=function(t){return(!t.keyPrefix||t.keyPrefix===jl.keyPrefix)&&(Ps.error("invalid keyPrefix, setting keyPrefix with timeStamp"),t.keyPrefix=jm.toString()),new n(t)},n}(l$),yO=new d$;const f$=yO;Es.register(yO);var db=(()=>(function(e){e.filterSensitiveLog=function(n){return K({},n)}}(db||(db={})),db))(),fb=(()=>(function(e){e.filterSensitiveLog=function(n){return K({},n)}}(fb||(fb={})),fb))(),hb=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K({},n),n.SSEKMSKeyId&&{SSEKMSKeyId:Mo})}}(hb||(hb={})),hb))(),pb=(()=>(function(e){e.filterSensitiveLog=function(n){return K({},n)}}(pb||(pb={})),pb))(),mb=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K(K({},n),n.SSEKMSKeyId&&{SSEKMSKeyId:Mo}),n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Mo})}}(mb||(mb={})),mb))(),gb=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K(K(K(K({},n),n.SSECustomerKey&&{SSECustomerKey:Mo}),n.SSEKMSKeyId&&{SSEKMSKeyId:Mo}),n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Mo}),n.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:Mo})}}(gb||(gb={})),gb))(),vb=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K(K({},n),n.SSEKMSKeyId&&{SSEKMSKeyId:Mo}),n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Mo})}}(vb||(vb={})),vb))(),_b=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K(K(K({},n),n.SSECustomerKey&&{SSECustomerKey:Mo}),n.SSEKMSKeyId&&{SSEKMSKeyId:Mo}),n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Mo})}}(_b||(_b={})),_b))(),yb=(()=>(function(e){e.filterSensitiveLog=function(n){return K({},n)}}(yb||(yb={})),yb))(),bb=(()=>(function(e){e.filterSensitiveLog=function(n){return K({},n)}}(bb||(bb={})),bb))(),wb=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K({},n),n.SSEKMSKeyId&&{SSEKMSKeyId:Mo})}}(wb||(wb={})),wb))(),xb=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K({},n),n.SSECustomerKey&&{SSECustomerKey:Mo})}}(xb||(xb={})),xb))(),Eb=(()=>(function(e){e.filterSensitiveLog=function(n){return K({},n)}}(Eb||(Eb={})),Eb))(),Sb=(()=>(function(e){e.filterSensitiveLog=function(n){return K({},n)}}(Sb||(Sb={})),Sb))(),Cb=(()=>(function(e){e.filterSensitiveLog=function(n){return K({},n)}}(Cb||(Cb={})),Cb))(),Tb=(()=>(function(e){e.filterSensitiveLog=function(n){return K({},n)}}(Tb||(Tb={})),Tb))(),Pb=(()=>(function(e){e.filterSensitiveLog=function(n){return K({},n)}}(Pb||(Pb={})),Pb))(),Ib=(()=>(function(e){e.filterSensitiveLog=function(n){return K({},n)}}(Ib||(Ib={})),Ib))(),Ab=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K(K({},n),n.SSEKMSKeyId&&{SSEKMSKeyId:Mo}),n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Mo})}}(Ab||(Ab={})),Ab))(),Rb=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K(K(K({},n),n.SSECustomerKey&&{SSECustomerKey:Mo}),n.SSEKMSKeyId&&{SSEKMSKeyId:Mo}),n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Mo})}}(Rb||(Rb={})),Rb))();function p$(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var Ob=function(){function e(n,t){void 0===t&&(t=[]),this.name=n,this.children=t,this.attributes={}}return e.prototype.withName=function(n){return this.name=n,this},e.prototype.addAttribute=function(n,t){return this.attributes[n]=t,this},e.prototype.addChildNode=function(n){return this.children.push(n),this},e.prototype.removeAttribute=function(n){return delete this.attributes[n],this},e.prototype.toString=function(){var n,t,r=Boolean(this.children.length),i="<"+this.name,o=this.attributes;try{for(var a=function jS(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.keys(o)),u=a.next();!u.done;u=a.next()){var d=u.value,l=o[d];null!=l&&(i+=" "+d+'="'+p$(""+l)+'"')}}catch(f){n={error:f}}finally{try{u&&!u.done&&(t=a.return)&&t.call(a)}finally{if(n)throw n.error}}return i+(r?">"+this.children.map(function(f){return f.toString()}).join("")+"</"+this.name+">":"/>")},e}(),wO=function(){function e(n){this.value=n}return e.prototype.toString=function(){return function m$(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(""+this.value)},e}(),g$=G(6705),A$=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,u,d,l,f;return bt(this,function(_){switch(_.label){case 0:return r=[K({},e)],f={},[4,Ct(e.body,n)];case 1:switch(t=K.apply(void 0,r.concat([(f.body=_.sent(),f)])),o="UnknownError",o=Xt(e,t.body)){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return u=[{}],[4,DK(t,n)];case 3:return i=K.apply(void 0,[K.apply(void 0,u.concat([_.sent()])),{name:o,$metadata:tt(e)}]),[3,5];case 4:o=(d=t.body).code||d.Code||o,i=K(K({},d),{name:""+o,message:d.message||d.Message||o,$fault:"client",$metadata:tt(e)}),_.label=5;case 5:return i.message=l=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}})})},D$=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,a,u,d;return bt(this,function(l){switch(l.label){case 0:return r=[K({},e)],d={},[4,Ct(e.body,n)];case 1:return t=K.apply(void 0,r.concat([(d.body=l.sent(),d)])),o="UnknownError",o=Xt(e,t.body),o=(a=t.body).code||a.Code||o,(i=K(K({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:tt(e)})).message=u=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},k$=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,u,d,l,f;return bt(this,function(_){switch(_.label){case 0:return r=[K({},e)],f={},[4,Ct(e.body,n)];case 1:switch(t=K.apply(void 0,r.concat([(f.body=_.sent(),f)])),o="UnknownError",o=Xt(e,t.body)){case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":return[3,2]}return[3,4];case 2:return u=[{}],[4,kK(t,n)];case 3:return i=K.apply(void 0,[K.apply(void 0,u.concat([_.sent()])),{name:o,$metadata:tt(e)}]),[3,5];case 4:o=(d=t.body).code||d.Code||o,i=K(K({},d),{name:""+o,message:d.message||d.Message||o,$fault:"client",$metadata:tt(e)}),_.label=5;case 5:return i.message=l=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}})})},L$=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,a,u,d;return bt(this,function(l){switch(l.label){case 0:return r=[K({},e)],d={},[4,Ct(e.body,n)];case 1:return t=K.apply(void 0,r.concat([(d.body=l.sent(),d)])),o="UnknownError",o=Xt(e,t.body),o=(a=t.body).code||a.Code||o,(i=K(K({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:tt(e)})).message=u=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},Z$=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,a,u,d;return bt(this,function(l){switch(l.label){case 0:return r=[K({},e)],d={},[4,Ct(e.body,n)];case 1:return t=K.apply(void 0,r.concat([(d.body=l.sent(),d)])),o="UnknownError",o=Xt(e,t.body),o=(a=t.body).code||a.Code||o,(i=K(K({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:tt(e)})).message=u=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},x9=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,u,d,l,f,_;return bt(this,function(m){switch(m.label){case 0:return r=[K({},e)],_={},[4,Ct(e.body,n)];case 1:switch(t=K.apply(void 0,r.concat([(_.body=m.sent(),_)])),o="UnknownError",o=Xt(e,t.body)){case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":return[3,2];case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,4]}return[3,6];case 2:return u=[{}],[4,RK(t,n)];case 3:return i=K.apply(void 0,[K.apply(void 0,u.concat([m.sent()])),{name:o,$metadata:tt(e)}]),[3,7];case 4:return d=[{}],[4,kb(t,n)];case 5:return i=K.apply(void 0,[K.apply(void 0,d.concat([m.sent()])),{name:o,$metadata:tt(e)}]),[3,7];case 6:o=(l=t.body).code||l.Code||o,i=K(K({},l),{name:""+o,message:l.message||l.Message||o,$fault:"client",$metadata:tt(e)}),m.label=7;case 7:return i.message=f=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(f),i))]}})})},j9=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,u,d,l,f;return bt(this,function(_){switch(_.label){case 0:return r=[K({},e)],f={},[4,Ct(e.body,n)];case 1:switch(t=K.apply(void 0,r.concat([(f.body=_.sent(),f)])),o="UnknownError",o=Xt(e,t.body)){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return u=[{}],[4,FS(t,n)];case 3:return i=K.apply(void 0,[K.apply(void 0,u.concat([_.sent()])),{name:o,$metadata:tt(e)}]),[3,5];case 4:o=(d=t.body).code||d.Code||o,i=K(K({},d),{name:""+o,message:d.message||d.Message||o,$fault:"client",$metadata:tt(e)}),_.label=5;case 5:return i.message=l=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}})})},U9=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,u,d,l,f;return bt(this,function(_){switch(_.label){case 0:return r=[K({},e)],f={},[4,Ct(e.body,n)];case 1:switch(t=K.apply(void 0,r.concat([(f.body=_.sent(),f)])),o="UnknownError",o=Xt(e,t.body)){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return u=[{}],[4,FS(t,n)];case 3:return i=K.apply(void 0,[K.apply(void 0,u.concat([_.sent()])),{name:o,$metadata:tt(e)}]),[3,5];case 4:o=(d=t.body).code||d.Code||o,i=K(K({},d),{name:""+o,message:d.message||d.Message||o,$fault:"client",$metadata:tt(e)}),_.label=5;case 5:return i.message=l=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}})})},G9=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,a,u,d;return bt(this,function(l){switch(l.label){case 0:return r=[K({},e)],d={},[4,Ct(e.body,n)];case 1:return t=K.apply(void 0,r.concat([(d.body=l.sent(),d)])),o="UnknownError",o=Xt(e,t.body),o=(a=t.body).code||a.Code||o,(i=K(K({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:tt(e)})).message=u=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},cK=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,a,u,d;return bt(this,function(l){switch(l.label){case 0:return r=[K({},e)],d={},[4,Ct(e.body,n)];case 1:return t=K.apply(void 0,r.concat([(d.body=l.sent(),d)])),o="UnknownError",o=Xt(e,t.body),o=(a=t.body).code||a.Code||o,(i=K(K({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:tt(e)})).message=u=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},bK=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,a,u,d;return bt(this,function(l){switch(l.label){case 0:return r=[K({},e)],d={},[4,Ct(e.body,n)];case 1:return t=K.apply(void 0,r.concat([(d.body=l.sent(),d)])),o="UnknownError",o=Xt(e,t.body),o=(a=t.body).code||a.Code||o,(i=K(K({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:tt(e)})).message=u=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},RK=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r;return bt(this,function(i){return t={name:"InvalidObjectState",$fault:"client",$metadata:tt(e),AccessTier:void 0,StorageClass:void 0},void 0!==(r=e.body).AccessTier&&(t.AccessTier=r.AccessTier),void 0!==r.StorageClass&&(t.StorageClass=r.StorageClass),[2,t]})})},FS=function(e,n){return wt(void 0,void 0,void 0,function(){return bt(this,function(i){return[2,{name:"NoSuchBucket",$fault:"client",$metadata:tt(e)}]})})},kb=function(e,n){return wt(void 0,void 0,void 0,function(){return bt(this,function(i){return[2,{name:"NoSuchKey",$fault:"client",$metadata:tt(e)}]})})},DK=function(e,n){return wt(void 0,void 0,void 0,function(){return bt(this,function(i){return[2,{name:"NoSuchUpload",$fault:"client",$metadata:tt(e)}]})})},kK=function(e,n){return wt(void 0,void 0,void 0,function(){return bt(this,function(i){return[2,{name:"ObjectNotInActiveTierError",$fault:"client",$metadata:tt(e)}]})})},WK=function(e,n){return e.filter(function(t){return null!=t}).map(function(t){if(null===t)return null;var r=function(e,n){var t=new Ob("CompletedPart");if(null!=e.ETag){var r=new Ob("ETag").addChildNode(new wO(e.ETag)).withName("ETag");t.addChildNode(r)}return null!=e.PartNumber&&(r=new Ob("PartNumber").addChildNode(new wO(String(e.PartNumber))).withName("PartNumber"),t.addChildNode(r)),t}(t);return r.withName("member")})},Mb=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){var t={Prefix:void 0};return void 0!==e.Prefix&&(t.Prefix=e.Prefix),t}(t)})},NO=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){var t={Key:void 0,LastModified:void 0,ETag:void 0,Size:void 0,StorageClass:void 0,Owner:void 0};return void 0!==e.Key&&(t.Key=e.Key),void 0!==e.LastModified&&(t.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(t.ETag=e.ETag),void 0!==e.Size&&(t.Size=parseInt(e.Size)),void 0!==e.StorageClass&&(t.StorageClass=e.StorageClass),void 0!==e.Owner&&(t.Owner=Bf(e.Owner,n)),t}(t,n)})},Bf=function(e,n){var t={DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(t.DisplayName=e.DisplayName),void 0!==e.ID&&(t.ID=e.ID),t},tt=function(e){var n;return{httpStatusCode:e.statusCode,requestId:null!==(n=e.headers["x-amzn-requestid"])&&void 0!==n?n:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},er=function(e,n){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):n.streamCollector(e)||Promise.resolve(new Uint8Array)},Be=function(e){return!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)},Ct=function(e,n){return function(e,n){return er(e,n).then(function(t){return n.utf8Encoder(t)})}(e,n).then(function(t){if(t.length){var r=(0,g$.parse)(t,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:function(u,d){return function(e){return e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")}(u)}}),i="#text",o=Object.keys(r)[0],a=r[o];return a[i]&&(a[o]=a[i],delete a[i]),q2(a)}return{}})},Xt=function(e,n){return void 0!==n.Code?n.Code:404==e.statusCode?"NotFound":""},xc=function(){return xc=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},xc.apply(this,arguments)};function Hv(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}var UO=function(e){return"string"==typeof e&&0===e.indexOf("arn:")&&e.split(":").length>=6},ZZ=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,YZ=/(\d+\.){3}\d+/,QZ=/\.\./,qO=/\./,eY=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,VO=/^s3(-external-1)?\.amazonaws\.com$/,XS="amazonaws.com",Bb=function(e){return WS(e)?e.replace(/fips-|-fips/,""):e},GO=function(e){var n=e.match(eY);return[n[2],e.replace(new RegExp("^"+n[0]),"")]},WS=function(e){return e.startsWith("fips-")||e.endsWith("-fips")},HO=function(e,n){return e===n||Bb(e)===n||e===Bb(n)},$O=function(e,n){if(void 0===n&&(n={tlsCompatible:!0}),e.length>=64||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||(null==n?void 0:n.tlsCompatible)&&qO.test(e))throw new Error("Invalid DNS label "+e)},KO=function(e){var n=e.isCustomEndpoint,i=e.accelerateEndpoint;if(n){if(e.dualstackEndpoint)throw new Error("Dualstack endpoint is not supported with custom endpoint");if(i)throw new Error("Accelerate endpoint is not supported with custom endpoint")}return function(e){return"string"==typeof e.bucketName}(e)?gY(xc(xc({},e),{isCustomEndpoint:n})):mY(xc(xc({},e),{isCustomEndpoint:n}))},mY=function(e){var n=e.isCustomEndpoint,t=e.baseHostname,r=Hv(n?[e.clientRegion,t]:function(e){return VO.test(e)?[e.replace("."+XS,""),XS]:GO(e)}(t),2),i=r[0],o=r[1],u=e.dualstackEndpoint,d=void 0!==u&&u,l=e.accelerateEndpoint,_=e.tlsCompatible,m=void 0===_||_,E=e.useArnRegion,A=e.bucketName,I=e.clientPartition,se=void 0===I?"aws":I,me=e.clientSigningRegion,Re=void 0===me?i:me;!function(e){if(e.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!e.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")}({pathStyleEndpoint:e.pathStyleEndpoint,accelerateEndpoint:void 0!==l&&l,tlsCompatible:m});var it=A.service,gt=A.partition,At=A.accountId,Vt=A.region,wn=A.resource;(function(e){if("s3"!==e&&"s3-outposts"!==e)throw new Error("Expect 's3' or 's3-outposts' in ARN service component")})(it),function(e,n){if(e!==n.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+e+'" but expected "'+n.clientPartition+'"')}(gt,{clientPartition:se}),function(e){if(!/[0-9]{12}/.exec(e))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(At),function(e,n){if(""===e)throw new Error("ARN region is empty");if(!n.useArnRegion&&!HO(e,n.clientRegion)&&!HO(e,n.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+n.clientRegion);if(n.useArnRegion&&WS(e))throw new Error("Endpoint does not support FIPS region")}(Vt,{useArnRegion:E,clientRegion:i,clientSigningRegion:Re});var yn=function(e){var n=e.includes(":")?":":"/",t=Hv(e.split(n)),r=t[0],i=t.slice(1);if("accesspoint"===r){if(1!==i.length||""===i[0])throw new Error("Access Point ARN should have one resource accesspoint"+n+"{accesspointname}");return{accesspointName:i[0]}}if("outpost"===r){if(!i[0]||"accesspoint"!==i[1]||!i[2]||3!==i.length)throw new Error("Outpost ARN should have resource outpost"+n+"{outpostId}"+n+"accesspoint"+n+"{accesspointName}");var o=Hv(i,3);return{outpostId:o[0],accesspointName:o[2]}}throw new Error("ARN resource should begin with 'accesspoint"+n+"' or 'outpost"+n+"'")}(wn),ar=yn.accesspointName,Or=yn.outpostId;$O(ar+"-"+At,{tlsCompatible:m});var Dn=E?Vt:i,Jo=E?Vt:Re;return Or?(function(e){if("s3-outposts"!==e)throw new Error("Expect 's3-posts' in Outpost ARN service component")}(it),$O(Or,{tlsCompatible:m}),function(e){if(e)throw new Error("Dualstack endpoint is not supported with Outpost")}(d),function(e){if(WS(null!=e?e:""))throw new Error("FIPS region is not supported with Outpost, got "+e)}(Dn),{bucketEndpoint:!0,hostname:ar+"-"+At+"."+Or+(n?"":".s3-outposts."+Dn)+"."+o,signingRegion:Jo,signingService:"s3-outposts"}):(function(e){if("s3"!==e)throw new Error("Expect 's3' in Accesspoint ARN service component")}(it),{bucketEndpoint:!0,hostname:ar+"-"+At+(n?"":".s3-accesspoint"+(d?".dualstack":"")+"."+Dn)+"."+o,signingRegion:Jo})},gY=function(e){var n=e.accelerateEndpoint,t=void 0!==n&&n,i=e.baseHostname,o=e.bucketName,a=e.dualstackEndpoint,u=void 0!==a&&a,d=e.pathStyleEndpoint,l=void 0!==d&&d,f=e.tlsCompatible,_=void 0===f||f,m=e.isCustomEndpoint,A=Hv(void 0!==m&&m?[e.clientRegion,i]:function(e){return VO.test(e)?["us-east-1",XS]:GO(e)}(i),2),I=A[0],se=A[1];return l||!function(e){return ZZ.test(e)&&!YZ.test(e)&&!QZ.test(e)}(o)||_&&qO.test(o)?{bucketEndpoint:!1,hostname:u?"s3.dualstack."+I+"."+se:i}:(t?i="s3-accelerate"+(u?".dualstack":"")+"."+se:u&&(i="s3.dualstack."+I+"."+se),{bucketEndpoint:!0,hostname:o+"."+i})},vY=function(e){return function(n,t){return function(r){return function XZ(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}(void 0,void 0,void 0,function(){var i,o,a,u,d,l,f,_,m,E,A,I,se,me,Re,it,gt,At;return function WZ(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(Vt){switch(Vt.label){case 0:return i=r.input.Bucket,o=e.bucketEndpoint,Io.isInstance(a=r.request)?e.bucketEndpoint?(a.hostname=i,[3,7]):[3,1]:[3,8];case 1:return UO(i)?(u=function(e){var n=e.split(":");if(n.length<6||"arn"!==n[0])throw new Error("Malformed ARN");var t=function FO(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}(n);return{partition:t[1],service:t[2],region:t[3],accountId:t[4],resource:t.slice(5).join(":")}}(i),d=Bb,[4,e.region()]):[3,5];case 2:return me=d.apply(void 0,[Vt.sent()]),[4,e.regionInfoProvider(me)];case 3:return l=Vt.sent()||{},f=l.partition,m=void 0===(_=l.signingRegion)?me:_,[4,e.useArnRegion()];case 4:return E=Vt.sent(),A=KO({bucketName:u,baseHostname:a.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===a.protocol,useArnRegion:E,clientPartition:f,clientSigningRegion:m,clientRegion:me,isCustomEndpoint:e.isCustomEndpoint}),gt=A.hostname,At=A.bucketEndpoint,se=A.signingService,(I=A.signingRegion)&&I!==m&&(t.signing_region=I),se&&"s3"!==se&&(t.signing_service=se),a.hostname=gt,o=At,[3,7];case 5:return Re=Bb,[4,e.region()];case 6:me=Re.apply(void 0,[Vt.sent()]),it=KO({bucketName:i,clientRegion:me,baseHostname:a.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===a.protocol,isCustomEndpoint:e.isCustomEndpoint}),At=it.bucketEndpoint,a.hostname=gt=it.hostname,o=At,Vt.label=7;case 7:o&&(a.path=a.path.replace(/^(\/)?[^\/]+/,""),""===a.path&&(a.path="/")),Vt.label=8;case 8:return[2,n(xc(xc({},r),{request:a}))]}})})}}},_Y={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware",override:!0},Fl=function(e){return{applyToStack:function(n){n.addRelativeTo(vY(e),_Y)}}},Xv=function(){return Xv=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},Xv.apply(this,arguments)};function ZS(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}function YS(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}var xY={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},CY={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware",override:!0},WO=function(e,n){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):n.streamCollector(e)||Promise.resolve(new Uint8Array)},IY=function(e,n){return WO(e,n).then(function(t){return n.utf8Encoder(t)})},AY={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},JO=function(e){return{applyToStack:function(n){n.addRelativeTo(function(e){return function(n){return function(t){return ZS(void 0,void 0,void 0,function(){var r,i,o,a,u,d,l;return YS(this,function(f){switch(f.label){case 0:return[4,n(t)];case 1:return r=f.sent(),Dv.isInstance(i=r.response)?(a=i.body,(o=i.statusCode)<200&&o>=300?[2,r]:[4,WO(a,e)]):[2,r];case 2:return u=f.sent(),[4,IY(u,e)];case 3:if(d=f.sent(),0===u.length)throw(l=new Error("S3 aborted request")).name="InternalError",l;return d&&d.match("<Error>")&&(i.statusCode=400),i.body=u,[2,r]}})})}}}(e),AY)}}},dp=function(){return dp=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},dp.apply(this,arguments)};var MY={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Wv=function(e){return{applyToStack:function(n){n.add(function kY(e){var n=this;return function(t){return function(r){return function RY(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}(n,void 0,void 0,function(){var i,o,a,u,d,l,f,_,m,E,A,I,se,me,Re,it,gt;return function DY(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(At){switch(At.label){case 0:i=dp({},r.input),o=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],At.label=1;case 1:At.trys.push([1,6,7,8]),a=function eC(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),u=a.next(),At.label=2;case 2:return u.done?[3,5]:(l=i[(d=u.value).target])?(f=ArrayBuffer.isView(l)?new Uint8Array(l.buffer,l.byteOffset,l.byteLength):"string"==typeof l?e.utf8Decoder(l):new Uint8Array(l),_=e.base64Encoder(f),(m=new e.md5).update(f),E=[dp({},i)],(gt={})[d.target]=_,A=d.hash,se=(I=e).base64Encoder,[4,m.digest()]):[3,4];case 3:i=dp.apply(void 0,E.concat([(gt[A]=se.apply(I,[At.sent()]),gt)])),At.label=4;case 4:return u=a.next(),[3,2];case 5:return[3,8];case 6:return me=At.sent(),Re={error:me},[3,8];case 7:try{u&&!u.done&&(it=a.return)&&it.call(a)}finally{if(Re)throw Re.error}return[7];case 8:return[2,t(dp(dp({},r),{input:i}))]}})})}}}(e),MY)}}},NY=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Ut(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(cu(r,this.serialize,this.deserialize)),this.middlewareStack.use(JO(r)),this.middlewareStack.use(Wv(r)),this.middlewareStack.use(Fl(r));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"S3Client",commandName:"CopyObjectCommand",inputFilterSensitiveLog:gb.filterSensitiveLog,outputFilterSensitiveLog:mb.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,u,l;return bt(this,function(m){switch(m.label){case 0:if(t=K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K({},Be(e.ACL)&&{"x-amz-acl":e.ACL}),Be(e.CacheControl)&&{"cache-control":e.CacheControl}),Be(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),Be(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),Be(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),Be(e.ContentType)&&{"content-type":e.ContentType}),Be(e.CopySource)&&{"x-amz-copy-source":e.CopySource}),Be(e.CopySourceIfMatch)&&{"x-amz-copy-source-if-match":e.CopySourceIfMatch}),Be(e.CopySourceIfModifiedSince)&&{"x-amz-copy-source-if-modified-since":rp(e.CopySourceIfModifiedSince).toString()}),Be(e.CopySourceIfNoneMatch)&&{"x-amz-copy-source-if-none-match":e.CopySourceIfNoneMatch}),Be(e.CopySourceIfUnmodifiedSince)&&{"x-amz-copy-source-if-unmodified-since":rp(e.CopySourceIfUnmodifiedSince).toString()}),Be(e.Expires)&&{expires:rp(e.Expires).toString()}),Be(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),Be(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),Be(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),Be(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),Be(e.MetadataDirective)&&{"x-amz-metadata-directive":e.MetadataDirective}),Be(e.TaggingDirective)&&{"x-amz-tagging-directive":e.TaggingDirective}),Be(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),Be(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),Be(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),Be(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Be(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),Be(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),Be(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),Be(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),Be(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),Be(e.CopySourceSSECustomerAlgorithm)&&{"x-amz-copy-source-server-side-encryption-customer-algorithm":e.CopySourceSSECustomerAlgorithm}),Be(e.CopySourceSSECustomerKey)&&{"x-amz-copy-source-server-side-encryption-customer-key":e.CopySourceSSECustomerKey}),Be(e.CopySourceSSECustomerKeyMD5)&&{"x-amz-copy-source-server-side-encryption-customer-key-md5":e.CopySourceSSECustomerKeyMD5}),Be(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Be(e.Tagging)&&{"x-amz-tagging":e.Tagging}),Be(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),Be(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),Be(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),Be(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),Be(e.ExpectedSourceBucketOwner)&&{"x-amz-source-expected-bucket-owner":e.ExpectedSourceBucketOwner}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce(function(E,A){var I;return K(K({},E),((I={})["x-amz-meta-"+A.toLowerCase()]=e.Metadata[A],I))},{})),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Xo(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(E){return Xo(E)}).join("/")),o={"x-id":"CopyObject"},[4,n.endpoint()];case 1:return u=m.sent(),[2,new Io({protocol:void 0===(l=u.protocol)?"https":l,hostname:u.hostname,port:u.port,method:"PUT",headers:t,path:r,query:o,body:void 0})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r;return bt(this,function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,k$(e,n)]:(t={$metadata:tt(e),BucketKeyEnabled:void 0,CopyObjectResult:void 0,CopySourceVersionId:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(t.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-copy-source-version-id"]&&(t.CopySourceVersionId=e.headers["x-amz-copy-source-version-id"]),void 0!==e.headers["x-amz-version-id"]&&(t.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(t.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ct(e.body,n)]);case 1:return r=i.sent(),t.CopyObjectResult=function(e,n){var t={ETag:void 0,LastModified:void 0};return void 0!==e.ETag&&(t.ETag=e.ETag),void 0!==e.LastModified&&(t.LastModified=new Date(e.LastModified)),t}(r),[2,Promise.resolve(t)]}})})}(t,r)},n}(du),ZO=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Ut(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(cu(r,this.serialize,this.deserialize)),this.middlewareStack.use(Wv(r)),this.middlewareStack.use(Fl(r));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"S3Client",commandName:"GetObjectCommand",inputFilterSensitiveLog:xb.filterSensitiveLog,outputFilterSensitiveLog:wb.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,u,l;return bt(this,function(m){switch(m.label){case 0:if(t=K(K(K(K(K(K(K(K(K(K({},Be(e.IfMatch)&&{"if-match":e.IfMatch}),Be(e.IfModifiedSince)&&{"if-modified-since":rp(e.IfModifiedSince).toString()}),Be(e.IfNoneMatch)&&{"if-none-match":e.IfNoneMatch}),Be(e.IfUnmodifiedSince)&&{"if-unmodified-since":rp(e.IfUnmodifiedSince).toString()}),Be(e.Range)&&{range:e.Range}),Be(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Be(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),Be(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),Be(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Be(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Xo(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(E){return Xo(E)}).join("/")),o=K(K(K(K(K(K(K(K({"x-id":"GetObject"},void 0!==e.ResponseCacheControl&&{"response-cache-control":e.ResponseCacheControl}),void 0!==e.ResponseContentDisposition&&{"response-content-disposition":e.ResponseContentDisposition}),void 0!==e.ResponseContentEncoding&&{"response-content-encoding":e.ResponseContentEncoding}),void 0!==e.ResponseContentLanguage&&{"response-content-language":e.ResponseContentLanguage}),void 0!==e.ResponseContentType&&{"response-content-type":e.ResponseContentType}),void 0!==e.ResponseExpires&&{"response-expires":(e.ResponseExpires.toISOString().split(".")[0]+"Z").toString()}),void 0!==e.VersionId&&{versionId:e.VersionId}),void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()}),[4,n.endpoint()];case 1:return u=m.sent(),[2,new Io({protocol:void 0===(l=u.protocol)?"https":l,hostname:u.hostname,port:u.port,method:"GET",headers:t,path:r,query:o,body:void 0})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t;return bt(this,function(i){return 200!==e.statusCode&&e.statusCode>=300?[2,x9(e,n)]:(t={$metadata:tt(e),AcceptRanges:void 0,Body:void 0,BucketKeyEnabled:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==e.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===e.headers["x-amz-delete-marker"]),void 0!==e.headers["accept-ranges"]&&(t.AcceptRanges=e.headers["accept-ranges"]),void 0!==e.headers["x-amz-expiration"]&&(t.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-restore"]&&(t.Restore=e.headers["x-amz-restore"]),void 0!==e.headers["last-modified"]&&(t.LastModified=new Date(e.headers["last-modified"])),void 0!==e.headers["content-length"]&&(t.ContentLength=parseInt(e.headers["content-length"],10)),void 0!==e.headers.etag&&(t.ETag=e.headers.etag),void 0!==e.headers["x-amz-missing-meta"]&&(t.MissingMeta=parseInt(e.headers["x-amz-missing-meta"],10)),void 0!==e.headers["x-amz-version-id"]&&(t.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["cache-control"]&&(t.CacheControl=e.headers["cache-control"]),void 0!==e.headers["content-disposition"]&&(t.ContentDisposition=e.headers["content-disposition"]),void 0!==e.headers["content-encoding"]&&(t.ContentEncoding=e.headers["content-encoding"]),void 0!==e.headers["content-language"]&&(t.ContentLanguage=e.headers["content-language"]),void 0!==e.headers["content-range"]&&(t.ContentRange=e.headers["content-range"]),void 0!==e.headers["content-type"]&&(t.ContentType=e.headers["content-type"]),void 0!==e.headers.expires&&(t.Expires=new Date(e.headers.expires)),void 0!==e.headers["x-amz-website-redirect-location"]&&(t.WebsiteRedirectLocation=e.headers["x-amz-website-redirect-location"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-storage-class"]&&(t.StorageClass=e.headers["x-amz-storage-class"]),void 0!==e.headers["x-amz-request-charged"]&&(t.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-replication-status"]&&(t.ReplicationStatus=e.headers["x-amz-replication-status"]),void 0!==e.headers["x-amz-mp-parts-count"]&&(t.PartsCount=parseInt(e.headers["x-amz-mp-parts-count"],10)),void 0!==e.headers["x-amz-tagging-count"]&&(t.TagCount=parseInt(e.headers["x-amz-tagging-count"],10)),void 0!==e.headers["x-amz-object-lock-mode"]&&(t.ObjectLockMode=e.headers["x-amz-object-lock-mode"]),void 0!==e.headers["x-amz-object-lock-retain-until-date"]&&(t.ObjectLockRetainUntilDate=new Date(e.headers["x-amz-object-lock-retain-until-date"])),void 0!==e.headers["x-amz-object-lock-legal-hold"]&&(t.ObjectLockLegalHoldStatus=e.headers["x-amz-object-lock-legal-hold"]),Object.keys(e.headers).forEach(function(o){void 0===t.Metadata&&(t.Metadata={}),o.startsWith("x-amz-meta-")&&(t.Metadata[o.substring(11)]=e.headers[o])}),t.Body=e.body,[2,Promise.resolve(t)])})})}(t,r)},n}(du),LY=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Ut(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(cu(r,this.serialize,this.deserialize)),this.middlewareStack.use(Fl(r));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"S3Client",commandName:"DeleteObjectCommand",inputFilterSensitiveLog:bb.filterSensitiveLog,outputFilterSensitiveLog:yb.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,u,l;return bt(this,function(m){switch(m.label){case 0:if(t=K(K(K(K({},Be(e.MFA)&&{"x-amz-mfa":e.MFA}),Be(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Be(e.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":e.BypassGovernanceRetention.toString()}),Be(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Xo(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(E){return Xo(E)}).join("/")),o=K({"x-id":"DeleteObject"},void 0!==e.VersionId&&{versionId:e.VersionId}),[4,n.endpoint()];case 1:return u=m.sent(),[2,new Io({protocol:void 0===(l=u.protocol)?"https":l,hostname:u.hostname,port:u.port,method:"DELETE",headers:t,path:r,query:o,body:void 0})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t;return bt(this,function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Z$(e,n)]:(t={$metadata:tt(e),DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},void 0!==e.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===e.headers["x-amz-delete-marker"]),void 0!==e.headers["x-amz-version-id"]&&(t.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-request-charged"]&&(t.RequestCharged=e.headers["x-amz-request-charged"]),[4,er(e.body,n)]);case 1:return r.sent(),[2,Promise.resolve(t)]}})})}(t,r)},n}(du),BY=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Ut(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(cu(r,this.serialize,this.deserialize)),this.middlewareStack.use(Fl(r));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"S3Client",commandName:"ListObjectsCommand",inputFilterSensitiveLog:Sb.filterSensitiveLog,outputFilterSensitiveLog:Eb.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,u,l;return bt(this,function(m){switch(m.label){case 0:if(t=K(K({},Be(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Be(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",Xo(i)),o=K(K(K(K(K({},void 0!==e.Delimiter&&{delimiter:e.Delimiter}),void 0!==e.EncodingType&&{"encoding-type":e.EncodingType}),void 0!==e.Marker&&{marker:e.Marker}),void 0!==e.MaxKeys&&{"max-keys":e.MaxKeys.toString()}),void 0!==e.Prefix&&{prefix:e.Prefix}),[4,n.endpoint()];case 1:return u=m.sent(),[2,new Io({protocol:void 0===(l=u.protocol)?"https":l,hostname:u.hostname,port:u.port,method:"GET",headers:t,path:r,query:o,body:void 0})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r;return bt(this,function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,j9(e,n)]:(t={$metadata:tt(e),CommonPrefixes:void 0,Contents:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,Marker:void 0,MaxKeys:void 0,Name:void 0,NextMarker:void 0,Prefix:void 0},[4,Ct(e.body,n)]);case 1:return""===(r=i.sent()).CommonPrefixes&&(t.CommonPrefixes=[]),void 0!==r.CommonPrefixes&&(t.CommonPrefixes=Mb(Mv(r.CommonPrefixes))),""===r.Contents&&(t.Contents=[]),void 0!==r.Contents&&(t.Contents=NO(Mv(r.Contents),n)),void 0!==r.Delimiter&&(t.Delimiter=r.Delimiter),void 0!==r.EncodingType&&(t.EncodingType=r.EncodingType),void 0!==r.IsTruncated&&(t.IsTruncated="true"==r.IsTruncated),void 0!==r.Marker&&(t.Marker=r.Marker),void 0!==r.MaxKeys&&(t.MaxKeys=parseInt(r.MaxKeys)),void 0!==r.Name&&(t.Name=r.Name),void 0!==r.NextMarker&&(t.NextMarker=r.NextMarker),void 0!==r.Prefix&&(t.Prefix=r.Prefix),[2,Promise.resolve(t)]}})})}(t,r)},n}(du);function zY(e){var n=e.port,t=e.query,r=e.protocol,i=e.path,o=e.hostname;r&&":"!==r.substr(-1)&&(r+=":"),n&&(o+=":"+n),i&&"/"!==i.charAt(0)&&(i="/"+i);var a=t?JE(t):"";return a&&"?"!==a[0]&&(a="?"+a),r+"//"+o+i+a}function QO(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}function ek(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}function FY(e,n){return QO(this,void 0,void 0,function(){var t,r,o=this;return ek(this,function(a){switch(a.label){case 0:return t=function(u){return function(d){return QO(o,void 0,void 0,function(){return ek(this,function(l){return[2,{output:{request:d.request},response:void 0}]})})}},(r=e.middlewareStack.clone()).add(t,{step:"build",priority:"low"}),[4,n.resolveMiddleware(r,e.config,void 0)(n).then(function(u){return u.output.request})];case 1:return[2,a.sent()]}})})}var Ub=function(){return Ub=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},Ub.apply(this,arguments)};var KY=function(){function e(n){var t=Ub({service:n.signingName||n.service||"s3",uriEscapePath:n.uriEscapePath||!1},n);this.signer=new $D(t)}return e.prototype.presign=function(n,t){void 0===t&&(t={});var r=t.unsignableHeaders,i=void 0===r?new Set:r,o=t.unhoistableHeaders,a=void 0===o?new Set:o,u=function UY(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}(t,["unsignableHeaders","unhoistableHeaders"]);return function qY(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function(){return function VY(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(d){return i.add("content-type"),Object.keys(n.headers).map(function(l){return l.toLowerCase()}).filter(function(l){return l.startsWith("x-amz-server-side-encryption")}).forEach(function(l){a.add(l)}),n.headers["X-Amz-Content-Sha256"]="UNSIGNED-PAYLOAD",n.headers.host||(n.headers.host=n.hostname),[2,this.signer.presign(n,Ub({expiresIn:900,unsignableHeaders:i,unhoistableHeaders:a},u))]})})},e}(),XY=G(3014),zf=G.n(XY),Ec=(()=>(function(e){e.NO_CREDENTIALS="No credentials",e.NO_SRC_KEY='source param should be an object with the property "key" with value of type string',e.NO_DEST_KEY='destination param should be an object with the property "key" with value of type string',e.INVALID_BLOB="Object must be an instance of Blob"}(Ec||(Ec={})),Ec))(),Vm=(()=>(function(e){e.UPLOAD_PAUSED_MESSAGE="paused"}(Vm||(Vm={})),Vm))(),JY=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},rC=new eo("axios-http-handler"),Jv="sendUploadProgress",Vb="sendDownloadProgress",rk=function(e,n){var t,r;try{for(var i=function(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.entries(e)),o=i.next();!o.done;o=i.next()){var a=JY(o.value,2),u=a[0],d=a[1];u!==n&&u.toUpperCase()===n.toUpperCase()&&(e[n]=d,delete e[u])}}catch(l){t={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},QY=[function(e,n){return function ZY(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)?(rk(n,"Content-Type"),rk(n,"Accept"),e):zf().defaults.transformRequest[0].call(null,e,n)}],eQ=function(){function e(n,t,r){void 0===n&&(n={}),this.httpOptions=n,this.emitter=t,this.cancelTokenSource=r}return e.prototype.destroy=function(){},e.prototype.handle=function(n,t){var r=this.httpOptions.requestTimeout,i=t.emitter||this.emitter,o=n.path;if(n.query){var a=JE(n.query);a&&(o+="?"+a)}var u=n.port,l={};l.url=n.protocol+"//"+n.hostname+(u?":"+u:"")+o,l.method=n.method,l.headers=n.headers,delete l.headers.host,n.body?l.data=n.body:l.headers[Object.keys(l.headers).find(function(_){return"content-type"===_.toLowerCase()})]&&(l.data=null),i&&(l.onUploadProgress=function(_){i.emit(Jv,_),rC.debug(_)},l.onDownloadProgress=function(_){i.emit(Vb,_),rC.debug(_)}),this.cancelTokenSource&&(l.cancelToken=this.cancelTokenSource.token),t.cancelTokenSource&&(l.cancelToken=t.cancelTokenSource.token),l.responseType="blob",Of.isReactNative&&(l.transformRequest=QY);var f=[zf().request(l).then(function(_){return{response:new Dv({headers:_.headers,statusCode:_.status,body:_.data})}}).catch(function(_){var m,E;if(_.message!==Vm.UPLOAD_PAUSED_MESSAGE&&rC.error(_.message),zf().isCancel(_)||!function YY(e){return void 0!==e&&Object.prototype.hasOwnProperty.call(e,"response")&&void 0!==e.response&&Object.prototype.hasOwnProperty.call(e.response,"status")&&"number"==typeof e.response.status}(_))throw _;return{response:new Dv({statusCode:_.response.status,body:null===(m=_.response)||void 0===m?void 0:m.data,headers:null===(E=_.response)||void 0===E?void 0:E.headers})}}),tQ(r)];return Promise.race(f)},e}();function tQ(e){return void 0===e&&(e=0),new Promise(function(n,t){e&&setTimeout(function(){var r=new Error("Request did not complete within "+e+" ms");r.name="TimeoutError",t(r)},e)})}var nQ="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",ik="contentLengthMiddleware",Zv="__uploadInProgress",fu=function(e,n,t,r,i){if(e){var o={attrs:t};r&&(o.metrics=r),pd.dispatch("storage",{event:n,data:o,message:i},"Storage",nQ)}},ok=G(1979);function Gb(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}var oC=function(){function e(n){if(this.bytes=n,8!==n.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}return e.fromNumber=function(n){if(n>0x8000000000000000||n<-0x8000000000000000)throw new Error(n+" is too large (or, if negative, too small) to represent as an Int64");for(var t=new Uint8Array(8),r=7,i=Math.abs(Math.round(n));r>-1&&i>0;r--,i/=256)t[r]=i;return n<0&&sk(t),new e(t)},e.prototype.valueOf=function(){var n=this.bytes.slice(0),t=128&n[0];return t&&sk(n),parseInt(Vs(n),16)*(t?-1:1)},e.prototype.toString=function(){return String(this.valueOf())},e}();function sk(e){for(var n=0;n<8;n++)e[n]^=255;for(n=7;n>-1&&(e[n]++,0===e[n]);n--);}var cQ=function(){function e(n,t){this.toUtf8=n,this.fromUtf8=t}return e.prototype.format=function(n){var t,r,i,o,a=[];try{for(var u=Gb(Object.keys(n)),d=u.next();!d.done;d=u.next()){var l=d.value,f=this.fromUtf8(l);a.push(Uint8Array.from([f.byteLength]),f,this.formatHeaderValue(n[l]))}}catch(se){t={error:se}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}var _=new Uint8Array(a.reduce(function(se,me){return se+me.byteLength},0)),m=0;try{for(var E=Gb(a),A=E.next();!A.done;A=E.next()){var I=A.value;_.set(I,m),m+=I.byteLength}}catch(se){i={error:se}}finally{try{A&&!A.done&&(o=E.return)&&o.call(E)}finally{if(i)throw i.error}}return _},e.prototype.formatHeaderValue=function(n){switch(n.type){case"boolean":return Uint8Array.from([n.value?0:1]);case"byte":return Uint8Array.from([2,n.value]);case"short":var t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,n.value,!1),new Uint8Array(t.buffer);case"integer":var r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,n.value,!1),new Uint8Array(r.buffer);case"long":var i=new Uint8Array(9);return i[0]=5,i.set(n.value.bytes,1),i;case"binary":var o=new DataView(new ArrayBuffer(3+n.value.byteLength));o.setUint8(0,6),o.setUint16(1,n.value.byteLength,!1);var a=new Uint8Array(o.buffer);return a.set(n.value,3),a;case"string":var u=this.fromUtf8(n.value),d=new DataView(new ArrayBuffer(3+u.byteLength));d.setUint8(0,7),d.setUint16(1,u.byteLength,!1);var l=new Uint8Array(d.buffer);return l.set(u,3),l;case"timestamp":var f=new Uint8Array(9);return f[0]=8,f.set(oC.fromNumber(n.value.valueOf()).bytes,1),f;case"uuid":if(!yQ.test(n.value))throw new Error("Invalid UUID received: "+n.value);var _=new Uint8Array(17);return _[0]=9,_.set(function LG(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var n=new Uint8Array(e.length/2),t=0;t<e.length;t+=2){var r=e.substr(t,2).toLowerCase();if(!(r in dS))throw new Error("Cannot decode unrecognized sequence "+r+" as hexadecimal");n[t/2]=dS[r]}return n}(n.value.replace(/\-/g,"")),1),_}},e.prototype.parse=function(n){for(var t={},r=0;r<n.byteLength;){var i=n.getUint8(r++),o=this.toUtf8(new Uint8Array(n.buffer,n.byteOffset+r,i));switch(r+=i,n.getUint8(r++)){case 0:t[o]={type:uk,value:!0};break;case 1:t[o]={type:uk,value:!1};break;case 2:t[o]={type:dQ,value:n.getInt8(r++)};break;case 3:t[o]={type:fQ,value:n.getInt16(r,!1)},r+=2;break;case 4:t[o]={type:hQ,value:n.getInt32(r,!1)},r+=4;break;case 5:t[o]={type:pQ,value:new oC(new Uint8Array(n.buffer,n.byteOffset+r,8))},r+=8;break;case 6:var a=n.getUint16(r,!1);r+=2,t[o]={type:mQ,value:new Uint8Array(n.buffer,n.byteOffset+r,a)},r+=a;break;case 7:var u=n.getUint16(r,!1);r+=2,t[o]={type:gQ,value:this.toUtf8(new Uint8Array(n.buffer,n.byteOffset+r,u))},r+=u;break;case 8:t[o]={type:vQ,value:new Date(new oC(new Uint8Array(n.buffer,n.byteOffset+r,8)).valueOf())},r+=8;break;case 9:var d=new Uint8Array(n.buffer,n.byteOffset+r,16);r+=16,t[o]={type:_Q,value:Vs(d.subarray(0,4))+"-"+Vs(d.subarray(4,6))+"-"+Vs(d.subarray(6,8))+"-"+Vs(d.subarray(8,10))+"-"+Vs(d.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return t},e}(),uk="boolean",dQ="byte",fQ="short",hQ="integer",pQ="long",mQ="binary",gQ="string",vQ="timestamp",_Q="uuid",yQ=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,ck=function(){function e(n,t){this.headerMarshaller=new cQ(n,t)}return e.prototype.marshall=function(n){var r=n.body,i=this.headerMarshaller.format(n.headers),o=i.byteLength+r.byteLength+16,a=new Uint8Array(o),u=new DataView(a.buffer,a.byteOffset,a.byteLength),d=new ok.Crc32;return u.setUint32(0,o,!1),u.setUint32(4,i.byteLength,!1),u.setUint32(8,d.update(a.subarray(0,8)).digest(),!1),a.set(i,12),a.set(r,i.byteLength+12),u.setUint32(o-4,d.update(a.subarray(8,o-4)).digest(),!1),a},e.prototype.unmarshall=function(n){var t=function wQ(e){var n=e.byteLength,t=e.byteOffset,r=e.buffer;if(n<16)throw new Error("Provided message too short to accommodate event stream message overhead");var i=new DataView(r,t,n),o=i.getUint32(0,!1);if(n!==o)throw new Error("Reported message length does not match received message length");var a=i.getUint32(4,!1),u=i.getUint32(8,!1),d=i.getUint32(n-4,!1),l=(new ok.Crc32).update(new Uint8Array(r,t,8));if(u!==l.digest())throw new Error("The prelude checksum specified in the message ("+u+") does not match the calculated CRC32 checksum ("+l.digest()+")");if(l.update(new Uint8Array(r,t+8,n-12)),d!==l.digest())throw new Error("The message checksum ("+l.digest()+") did not match the expected value of "+d);return{headers:new DataView(r,t+8+4,a),body:new Uint8Array(r,t+8+4+a,o-a-16)}}(n),i=t.body;return{headers:this.headerMarshaller.parse(t.headers),body:i}},e.prototype.formatHeaders=function(n){return this.headerMarshaller.format(n)},e}();function sC(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}function xa(e){return this instanceof xa?(this.v=e,this):new xa(e)}function uC(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(e,n||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(m){r[m]&&(i[m]=function(E){return new Promise(function(A,I){o.push([m,E,A,I])>1||u(m,E)})})}function u(m,E){try{!function d(m){m.value instanceof xa?Promise.resolve(m.value.v).then(l,f):_(o[0][2],m)}(r[m](E))}catch(A){_(o[0][3],A)}}function l(m){u("next",m)}function f(m){u("throw",m)}function _(m,E){m(E),o.shift(),o.length&&u(o[0][0],o[0][1])}}function hk(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function fk(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=e[o]&&function(a){return new Promise(function(u,d){!function i(o,a,u,d){Promise.resolve(d).then(function(l){o({value:l,done:u})},a)}(u,d,(a=e[o](a)).done,a.value)})}}}var CQ=function(){function e(n){var t=n.utf8Encoder;this.eventMarshaller=new ck(t,n.utf8Decoder),this.utfEncoder=t}return e.prototype.deserialize=function(n,t){var r=function EQ(e){var n,t=0,r=0,i=null,o=null,a=function(d){if("number"!=typeof d)throw new Error("Attempted to allocate an event message where size was not a number: "+d);t=d,r=4,i=new Uint8Array(d),new DataView(i.buffer).setUint32(0,d,!1)};return(n={})[Symbol.asyncIterator]=function(){return uC(this,arguments,function(){var d,l,f,m,E,A,I,se;return sC(this,function(me){switch(me.label){case 0:d=e[Symbol.asyncIterator](),me.label=1;case 1:return[4,xa(d.next())];case 2:return l=me.sent(),f=l.value,l.done?t?[3,4]:[4,xa(void 0)]:[3,10];case 3:return[2,me.sent()];case 4:return t!==r?[3,7]:[4,xa(i)];case 5:return[4,me.sent()];case 6:return me.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,xa(void 0)];case 9:return[2,me.sent()];case 10:m=f.length,E=0,me.label=11;case 11:if(!(E<m))return[3,15];if(!i){if(A=m-E,o||(o=new Uint8Array(4)),I=Math.min(4-r,A),o.set(f.slice(E,E+I),r),E+=I,(r+=I)<4)return[3,15];a(new DataView(o.buffer).getUint32(0,!1)),o=null}return se=Math.min(t-r,m-E),i.set(f.slice(E,E+se),r),r+=se,E+=se,t&&t===r?[4,xa(i)]:[3,14];case 12:return[4,me.sent()];case 13:me.sent(),i=null,t=0,r=0,me.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}})})},n}(n),i=function SQ(e,n){var t;return(t={})[Symbol.asyncIterator]=function(){return uC(this,arguments,function(){var r,i,a,u,d,l,_,m,A,I,se,me,Re,it;return sC(this,function(gt){switch(gt.label){case 0:gt.trys.push([0,12,13,18]),r=hk(e),gt.label=1;case 1:return[4,xa(r.next())];case 2:if((i=gt.sent()).done)return[3,11];if(a=n.eventMarshaller.unmarshall(i.value),"error"!==(u=a.headers[":message-type"].value))return[3,3];throw(d=new Error(a.headers[":error-message"].value||"UnknownError")).name=a.headers[":error-code"].value,d;case 3:return"exception"!==u?[3,5]:((se={})[l=a.headers[":exception-type"].value]=a,[4,xa(n.deserializer(se))]);case 4:throw(_=gt.sent()).$unknown?((m=new Error(n.toUtf8(a.body))).name=l,m):_[l];case 5:return"event"!==u?[3,9]:((me={})[a.headers[":event-type"].value]=a,[4,xa(n.deserializer(me))]);case 6:return(A=gt.sent()).$unknown?[3,10]:[4,xa(A)];case 7:return[4,gt.sent()];case 8:return gt.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+a.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return I=gt.sent(),Re={error:I},[3,18];case 13:return gt.trys.push([13,,16,17]),i&&!i.done&&(it=r.return)?[4,xa(it.call(r))]:[3,15];case 14:gt.sent(),gt.label=15;case 15:return[3,17];case 16:if(Re)throw Re.error;return[7];case 17:return[7];case 18:return[2]}})})},t}(r,{eventMarshaller:this.eventMarshaller,deserializer:t,toUtf8:this.utfEncoder});return i},e.prototype.serialize=function(n,t){var r,i=this;return(r={})[Symbol.asyncIterator]=function(){return uC(this,arguments,function(){var a,u,f,_,m;return sC(this,function(E){switch(E.label){case 0:E.trys.push([0,7,8,13]),a=hk(n),E.label=1;case 1:return[4,xa(a.next())];case 2:return(u=E.sent()).done?[3,6]:[4,xa(i.eventMarshaller.marshall(t(u.value)))];case 3:return[4,E.sent()];case 4:E.sent(),E.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return f=E.sent(),_={error:f},[3,13];case 8:return E.trys.push([8,,11,12]),u&&!u.done&&(m=a.return)?[4,xa(m.call(a))]:[3,10];case 9:E.sent(),E.label=10;case 10:return[3,12];case 11:if(_)throw _.error;return[7];case 12:return[7];case 13:return[4,xa(new Uint8Array(0))];case 14:return[4,E.sent()];case 15:return E.sent(),[2]}})})},r},e}();function mk(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}function hp(e){return this instanceof hp?(this.v=e,this):new hp(e)}function IQ(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(e,n||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(m){r[m]&&(i[m]=function(E){return new Promise(function(A,I){o.push([m,E,A,I])>1||u(m,E)})})}function u(m,E){try{!function d(m){m.value instanceof hp?Promise.resolve(m.value.v).then(l,f):_(o[0][2],m)}(r[m](E))}catch(A){_(o[0][3],A)}}function l(m){u("next",m)}function f(m){u("throw",m)}function _(m,E){m(E),o.shift(),o.length&&u(o[0][0],o[0][1])}}var DQ=function(){function e(n){var t=n.utf8Encoder,r=n.utf8Decoder;this.eventMarshaller=new ck(t,r),this.universalMarshaller=new CQ({utf8Decoder:r,utf8Encoder:t})}return e.prototype.deserialize=function(n,t){var r=OQ(n)?function(e){var n;return(n={})[Symbol.asyncIterator]=function(){return IQ(this,arguments,function(){var t,r,o;return mk(this,function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,hp(t.read())];case 3:return r=a.sent(),o=r.value,r.done?[4,hp(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,hp(o)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})},n}(n):n;return this.universalMarshaller.deserialize(r,t)},e.prototype.serialize=function(n,t){var r=this.universalMarshaller.serialize(n,t);return"function"==typeof ReadableStream?function(e){var n=e[Symbol.asyncIterator]();return new ReadableStream({pull:function(t){return function TQ(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function(){var r,o;return mk(this,function(a){switch(a.label){case 0:return[4,n.next()];case 1:return r=a.sent(),o=r.value,r.done?[2,t.close()]:(t.enqueue(o),[2])}})})}})}(r):r},e}(),OQ=function(e){return"function"==typeof ReadableStream&&e instanceof ReadableStream};function BQ(e,n,t){return void 0===t&&(t=1048576),new Promise(function(r,i){var o=new FileReader;o.addEventListener("error",i),o.addEventListener("abort",i);var a=e.size,u=0;function d(){u>=a?r():o.readAsArrayBuffer(e.slice(u,Math.min(a,u+t)))}o.addEventListener("load",function(l){var f=l.target.result;n(new Uint8Array(f)),u+=f.byteLength,d()}),d()})}var $Q=[1732584193,4023233417,2562383102,271733878],KQ=function(){function e(){this.state=Uint32Array.from($Q),this.buffer=new DataView(new ArrayBuffer(64)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(n){if(!function XQ(e){return"string"==typeof e?0===e.length:0===e.byteLength}(n)){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=function WQ(e){return"string"==typeof e?function(e){return"function"==typeof TextEncoder?function VQ(e){return(new TextEncoder).encode(e)}(e):function(e){for(var n=[],t=0,r=e.length;t<r;t++){var i=e.charCodeAt(t);if(i<128)n.push(i);else if(i<2048)n.push(i>>6|192,63&i|128);else if(t+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(t+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++t));n.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else n.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(n)}(e)}(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}(n),r=0,i=t.byteLength;for(this.bytesHashed+=i;i>0;)this.buffer.setUint8(this.bufferLength++,t[r++]),i--,64===this.bufferLength&&(this.hashBuffer(),this.bufferLength=0)}},e.prototype.digest=function(){return function jQ(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function(){var n,t,r,o,a,u;return function FQ(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(d){if(!this.finished){if(r=(n=this).bufferLength,o=8*n.bytesHashed,(t=n.buffer).setUint8(this.bufferLength++,128),r%64>=56){for(u=this.bufferLength;u<64;u++)t.setUint8(u,0);this.hashBuffer(),this.bufferLength=0}for(u=this.bufferLength;u<56;u++)t.setUint8(u,0);t.setUint32(56,o>>>0,!0),t.setUint32(60,Math.floor(o/4294967296),!0),this.hashBuffer(),this.finished=!0}for(a=new DataView(new ArrayBuffer(16)),u=0;u<4;u++)a.setUint32(4*u,this.state[u],!0);return[2,new Uint8Array(a.buffer,a.byteOffset,a.byteLength)]})})},e.prototype.hashBuffer=function(){var t=this.buffer,r=this.state,i=r[0],o=r[1],a=r[2],u=r[3];i=Ya(i,o,a,u,t.getUint32(0,!0),7,3614090360),u=Ya(u,i,o,a,t.getUint32(4,!0),12,3905402710),a=Ya(a,u,i,o,t.getUint32(8,!0),17,606105819),o=Ya(o,a,u,i,t.getUint32(12,!0),22,3250441966),i=Ya(i,o,a,u,t.getUint32(16,!0),7,4118548399),u=Ya(u,i,o,a,t.getUint32(20,!0),12,1200080426),a=Ya(a,u,i,o,t.getUint32(24,!0),17,2821735955),o=Ya(o,a,u,i,t.getUint32(28,!0),22,4249261313),i=Ya(i,o,a,u,t.getUint32(32,!0),7,1770035416),u=Ya(u,i,o,a,t.getUint32(36,!0),12,2336552879),a=Ya(a,u,i,o,t.getUint32(40,!0),17,4294925233),o=Ya(o,a,u,i,t.getUint32(44,!0),22,2304563134),i=Ya(i,o,a,u,t.getUint32(48,!0),7,1804603682),u=Ya(u,i,o,a,t.getUint32(52,!0),12,4254626195),a=Ya(a,u,i,o,t.getUint32(56,!0),17,2792965006),i=Qa(i,o=Ya(o,a,u,i,t.getUint32(60,!0),22,1236535329),a,u,t.getUint32(4,!0),5,4129170786),u=Qa(u,i,o,a,t.getUint32(24,!0),9,3225465664),a=Qa(a,u,i,o,t.getUint32(44,!0),14,643717713),o=Qa(o,a,u,i,t.getUint32(0,!0),20,3921069994),i=Qa(i,o,a,u,t.getUint32(20,!0),5,3593408605),u=Qa(u,i,o,a,t.getUint32(40,!0),9,38016083),a=Qa(a,u,i,o,t.getUint32(60,!0),14,3634488961),o=Qa(o,a,u,i,t.getUint32(16,!0),20,3889429448),i=Qa(i,o,a,u,t.getUint32(36,!0),5,568446438),u=Qa(u,i,o,a,t.getUint32(56,!0),9,3275163606),a=Qa(a,u,i,o,t.getUint32(12,!0),14,4107603335),o=Qa(o,a,u,i,t.getUint32(32,!0),20,1163531501),i=Qa(i,o,a,u,t.getUint32(52,!0),5,2850285829),u=Qa(u,i,o,a,t.getUint32(8,!0),9,4243563512),a=Qa(a,u,i,o,t.getUint32(28,!0),14,1735328473),i=es(i,o=Qa(o,a,u,i,t.getUint32(48,!0),20,2368359562),a,u,t.getUint32(20,!0),4,4294588738),u=es(u,i,o,a,t.getUint32(32,!0),11,2272392833),a=es(a,u,i,o,t.getUint32(44,!0),16,1839030562),o=es(o,a,u,i,t.getUint32(56,!0),23,4259657740),i=es(i,o,a,u,t.getUint32(4,!0),4,2763975236),u=es(u,i,o,a,t.getUint32(16,!0),11,1272893353),a=es(a,u,i,o,t.getUint32(28,!0),16,4139469664),o=es(o,a,u,i,t.getUint32(40,!0),23,3200236656),i=es(i,o,a,u,t.getUint32(52,!0),4,681279174),u=es(u,i,o,a,t.getUint32(0,!0),11,3936430074),a=es(a,u,i,o,t.getUint32(12,!0),16,3572445317),o=es(o,a,u,i,t.getUint32(24,!0),23,76029189),i=es(i,o,a,u,t.getUint32(36,!0),4,3654602809),u=es(u,i,o,a,t.getUint32(48,!0),11,3873151461),a=es(a,u,i,o,t.getUint32(60,!0),16,530742520),i=ts(i,o=es(o,a,u,i,t.getUint32(8,!0),23,3299628645),a,u,t.getUint32(0,!0),6,4096336452),u=ts(u,i,o,a,t.getUint32(28,!0),10,1126891415),a=ts(a,u,i,o,t.getUint32(56,!0),15,2878612391),o=ts(o,a,u,i,t.getUint32(20,!0),21,4237533241),i=ts(i,o,a,u,t.getUint32(48,!0),6,1700485571),u=ts(u,i,o,a,t.getUint32(12,!0),10,2399980690),a=ts(a,u,i,o,t.getUint32(40,!0),15,4293915773),o=ts(o,a,u,i,t.getUint32(4,!0),21,2240044497),i=ts(i,o,a,u,t.getUint32(32,!0),6,1873313359),u=ts(u,i,o,a,t.getUint32(60,!0),10,4264355552),a=ts(a,u,i,o,t.getUint32(24,!0),15,2734768916),o=ts(o,a,u,i,t.getUint32(52,!0),21,1309151649),i=ts(i,o,a,u,t.getUint32(16,!0),6,4149444226),u=ts(u,i,o,a,t.getUint32(44,!0),10,3174756917),a=ts(a,u,i,o,t.getUint32(8,!0),15,718787259),o=ts(o,a,u,i,t.getUint32(36,!0),21,3951481745),r[0]=i+r[0]&4294967295,r[1]=o+r[1]&4294967295,r[2]=a+r[2]&4294967295,r[3]=u+r[3]&4294967295},e}();function Xb(e,n,t,r,i,o){return((n=(n+e&4294967295)+(r+o&4294967295)&4294967295)<<i|n>>>32-i)+t&4294967295}function Ya(e,n,t,r,i,o,a){return Xb(n&t|~n&r,e,n,i,o,a)}function Qa(e,n,t,r,i,o,a){return Xb(n&r|t&~r,e,n,i,o,a)}function es(e,n,t,r,i,o,a){return Xb(n^t^r,e,n,i,o,a)}function ts(e,n,t,r,i,o,a){return Xb(t^(n|~r),e,n,i,o,a)}var wk="s3.{region}.amazonaws.com",aee=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),see=new Set(["cn-north-1","cn-northwest-1"]),uee=new Set(["us-iso-east-1"]),lee=new Set(["us-isob-east-1"]),cee=new Set(["us-gov-east-1","us-gov-west-1"]),xk={apiVersion:"2006-03-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,n){var t=void 0;switch(e){case"af-south-1":t={hostname:"s3.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":t={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":t={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":t={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":t={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":t={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":t={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"aws-global":t={hostname:"s3.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"ca-central-1":t={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":t={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":t={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":t={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":t={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":t={hostname:"s3.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":t={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":t={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":t={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":t={hostname:"s3-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":t={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":t={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":t={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":t={hostname:"s3.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":t={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":t={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":t={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":t={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":t={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":t={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":t={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:aee.has(e)&&(t={hostname:wk.replace("{region}",e),partition:"aws"}),see.has(e)&&(t={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),uee.has(e)&&(t={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),lee.has(e)&&(t={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),cee.has(e)&&(t={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===t&&(t={hostname:wk.replace("{region}",e),partition:"aws"})}return Promise.resolve(K({signingService:"s3"},t))},serviceId:"S3",signingEscapePath:!1,urlParser:vD,useArnRegion:!1},fee=K(K({},xk),{runtime:"browser",base64Decoder:YE,base64Encoder:eD,bodyLengthChecker:cD,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:hD({serviceId:xk.serviceId,clientVersion:"3.6.1"}),eventStreamSerdeProvider:function(e){return new DQ(e)},maxAttempts:3,md5:KQ,region:nD("Region is missing"),requestHandler:new Q2,sha256:X2.Sha256,streamCollector:tD,streamHasher:function(n,t){return function MQ(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function(){var r;return function NQ(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(i){switch(i.label){case 0:return r=new n,[4,BQ(t,function(o){r.update(o)})];case 1:return i.sent(),[2,r.digest()]}})})},utf8Decoder:function(e){return"function"==typeof TextEncoder?function YQ(e){return(new TextEncoder).encode(e)}(e):function(e){for(var n=[],t=0,r=e.length;t<r;t++){var i=e.charCodeAt(t);if(i<128)n.push(i);else if(i<2048)n.push(i>>6|192,63&i|128);else if(t+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(t+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++t));n.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else n.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(n)}(e)},utf8Encoder:function(e){return"function"==typeof TextDecoder?function QQ(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var n="",t=0,r=e.length;t<r;t++){var i=e[t];if(i<128)n+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++t];n+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var u="%"+[i,e[++t],e[++t],e[++t]].map(function(d){return d.toString(16)}).join("%");n+=decodeURIComponent(u)}else n+=String.fromCharCode((15&i)<<12|(63&e[++t])<<6|63&e[++t])}return n}(e)}}),Wb=function(){return Wb=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},Wb.apply(this,arguments)},Gm=function(){return Gm=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},Gm.apply(this,arguments)};var yee={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},bee=function(e){return{applyToStack:function(n){n.add(function _ee(e){var n=this;return function(t){return function(r){return function mee(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})}(n,void 0,void 0,function(){var i;return function gee(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(o){return Io.isInstance(i=r.request)&&i.body&&"node"===e.runtime&&(i.headers=Gm(Gm({},i.headers),{Expect:"100-continue"})),[2,t(Gm(Gm({},r),{request:i}))]})})}}}(e),yee)}}},wee=function(e){function n(t){var r=this,i=K(K({},fee),t),o=wD(i),u=XD(bD(o)),f=function yY(e){var n=e.bucketEndpoint,t=void 0!==n&&n,r=e.forcePathStyle,i=void 0!==r&&r,o=e.useAccelerateEndpoint,a=void 0!==o&&o,u=e.useDualstackEndpoint,d=void 0!==u&&u,l=e.useArnRegion,f=void 0!==l&&l;return xc(xc({},e),{bucketEndpoint:t,forcePathStyle:i,useAccelerateEndpoint:a,useDualstackEndpoint:d,useArnRegion:"function"==typeof f?f:function(){return Promise.resolve(f)}})}(lD(u)),m=function(e){return Wb(Wb({},e),{eventStreamMarshaller:e.eventStreamSerdeProvider(e)})}(YD(f));return(r=e.call(this,m)||this).config=m,r.middlewareStack.use(function(e){return{applyToStack:function(n){n.addRelativeTo(cH(e),dH)}}}(r.config)),r.middlewareStack.use(iD(r.config)),r.middlewareStack.use(SD(r.config)),r.middlewareStack.use(PD(r.config)),r.middlewareStack.use(RD()),r.middlewareStack.use({applyToStack:function(n){n.add(function wY(){var e=this;return function(n){return function(t){return ZS(e,void 0,void 0,function(){var r,i;return YS(this,function(o){if("string"==typeof(r=t.input.Bucket)&&!UO(r)&&r.indexOf("/")>=0)throw(i=new Error("Bucket name shouldn't contain '/', received '"+r+"'")).name="InvalidBucketName",i;return[2,n(Xv({},t))]})})}}}(),xY)}}),r.middlewareStack.use(function(e){return{applyToStack:function(n){n.add(function(e){return function(n){return function(t){return ZS(void 0,void 0,void 0,function(){var r,i;return YS(this,function(o){switch(o.label){case 0:return!Io.isInstance(r=t.request)||e.isCustomEndpoint?[2,n(Xv({},t))]:"s3.amazonaws.com"!==r.hostname?[3,1]:(r.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return i="aws-global",[4,e.region()];case 2:i===o.sent()&&(r.hostname="s3.amazonaws.com"),o.label=3;case 3:return[2,n(Xv({},t))]}})})}}}(e),CY)}}}(r.config)),r.middlewareStack.use(bee(r.config)),r.middlewareStack.use(eO(r.config)),r}return Ut(n,e),n.prototype.destroy=function(){e.prototype.destroy.call(this)},n}(U2),Hm=function(){return Hm=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Hm.apply(this,arguments)},pC=function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})},mC=function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},Ck=new eo("S3ClientUtils"),Tk={accessKeyId:"",secretAccessKey:""},Pk=function(e){var o=e.customPrefix||{},a=e.identityId||e.credentials.identityId,u=(void 0!==o.private?o.private:"private/")+a+"/",d=(void 0!==o.protected?o.protected:"protected/")+a+"/",l=void 0!==o.public?o.public:"public/";switch(e.level){case"private":return u;case"protected":return d;default:return l}},Ik=function(e,n){return function(t,r){return function(i){return pC(void 0,void 0,void 0,function(){var o,a,u,d;return mC(this,function(f){switch(f.label){case 0:return[4,Vu.get()];case 1:return o=f.sent(),a=Vu.shear(o),u=Pk(Hm(Hm({},e),{credentials:a})),d=Object.assign({},i.input),Object.prototype.hasOwnProperty.call(i.input,"Key")?(d.Key=u+n,i.input=d):Object.prototype.hasOwnProperty.call(i.input,"Prefix")&&(d.Prefix=u+n,i.input=d),[2,t(i)]}})})}}},Ak=function(e){return function(n,t){return function(r){return pC(void 0,void 0,void 0,function(){var i,o;return mC(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,n(r)];case 1:return[2,a.sent()];case 2:throw function(e){return e.ServerTime&&"string"==typeof e.Code&&"RequestTimeTooSkewed"===e.Code}(i=a.sent())&&(o=new Date(i.ServerTime),e.systemClockOffset=o.getTime()-Date.now()),i;case 3:return[2]}})})}}},Rk={step:"finalizeRequest",name:"autoAdjustClockskewMiddleware"},Dk={step:"initialize",name:"addPrefixMiddleware"},Eee=function(){return pC(void 0,void 0,void 0,function(){var e,n,t;return mC(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Vu.get()];case 1:return(e=r.sent())?(n=Vu.shear(e),Ck.debug("credentials provider get credentials",n),[2,n]):[2,Tk];case 2:return t=r.sent(),Ck.warn("credentials provider error",t),[2,Tk];case 3:return[2]}})})},Ok=function(e,n){var r=e.cancelTokenSource,o=e.useAccelerateEndpoint,a={};e.dangerouslyConnectToHttpEndpointForTesting&&(a={endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0});var u=new wee(Hm(Hm({region:e.region,credentials:Eee,customUserAgent:zl()},a),{requestHandler:new eQ({},n,r),useAccelerateEndpoint:o}));return u.middlewareStack.remove(ik),u},See=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Ut(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(cu(r,this.serialize,this.deserialize)),this.middlewareStack.use(Wv(r)),this.middlewareStack.use(Fl(r));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:Rb.filterSensitiveLog,outputFilterSensitiveLog:Ab.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,a,d,f;return bt(this,function(E){switch(E.label){case 0:if(t=K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K({"content-type":"application/octet-stream"},Be(e.ACL)&&{"x-amz-acl":e.ACL}),Be(e.CacheControl)&&{"cache-control":e.CacheControl}),Be(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),Be(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),Be(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),Be(e.ContentLength)&&{"content-length":e.ContentLength.toString()}),Be(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Be(e.ContentType)&&{"content-type":e.ContentType}),Be(e.Expires)&&{expires:rp(e.Expires).toString()}),Be(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),Be(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),Be(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),Be(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),Be(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),Be(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),Be(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),Be(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Be(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),Be(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),Be(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),Be(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),Be(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),Be(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Be(e.Tagging)&&{"x-amz-tagging":e.Tagging}),Be(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),Be(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),Be(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),Be(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce(function(A,I){var se;return K(K({},A),((se={})["x-amz-meta-"+I.toLowerCase()]=e.Metadata[I],se))},{})),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Xo(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(A){return Xo(A)}).join("/")),o={"x-id":"PutObject"},void 0!==e.Body&&(a=e.Body),[4,n.endpoint()];case 1:return d=E.sent(),[2,new Io({protocol:void 0===(f=d.protocol)?"https":f,hostname:d.hostname,port:d.port,method:"PUT",headers:t,path:r,query:o,body:a})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t;return bt(this,function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,cK(e,n)]:(t={$metadata:tt(e),BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(t.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers.etag&&(t.ETag=e.headers.etag),void 0!==e.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-version-id"]&&(t.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(t.RequestCharged=e.headers["x-amz-request-charged"]),[4,er(e.body,n)]);case 1:return r.sent(),[2,Promise.resolve(t)]}})})}(t,r)},n}(du),kk=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Ut(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(cu(r,this.serialize,this.deserialize)),this.middlewareStack.use(Wv(r)),this.middlewareStack.use(Fl(r));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"S3Client",commandName:"CreateMultipartUploadCommand",inputFilterSensitiveLog:_b.filterSensitiveLog,outputFilterSensitiveLog:vb.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,u,l;return bt(this,function(m){switch(m.label){case 0:if(t=K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K(K({},Be(e.ACL)&&{"x-amz-acl":e.ACL}),Be(e.CacheControl)&&{"cache-control":e.CacheControl}),Be(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),Be(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),Be(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),Be(e.ContentType)&&{"content-type":e.ContentType}),Be(e.Expires)&&{expires:rp(e.Expires).toString()}),Be(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),Be(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),Be(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),Be(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),Be(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),Be(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),Be(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),Be(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Be(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),Be(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),Be(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),Be(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),Be(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),Be(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Be(e.Tagging)&&{"x-amz-tagging":e.Tagging}),Be(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),Be(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),Be(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),Be(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce(function(E,A){var I;return K(K({},E),((I={})["x-amz-meta-"+A.toLowerCase()]=e.Metadata[A],I))},{})),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Xo(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(E){return Xo(E)}).join("/")),o={uploads:""},[4,n.endpoint()];case 1:return u=m.sent(),[2,new Io({protocol:void 0===(l=u.protocol)?"https":l,hostname:u.hostname,port:u.port,method:"POST",headers:t,path:r,query:o,body:void 0})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r;return bt(this,function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,L$(e,n)]:(t={$metadata:tt(e),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,BucketKeyEnabled:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==e.headers["x-amz-abort-date"]&&(t.AbortDate=new Date(e.headers["x-amz-abort-date"])),void 0!==e.headers["x-amz-abort-rule-id"]&&(t.AbortRuleId=e.headers["x-amz-abort-rule-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(t.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ct(e.body,n)]);case 1:return void 0!==(r=i.sent()).Bucket&&(t.Bucket=r.Bucket),void 0!==r.Key&&(t.Key=r.Key),void 0!==r.UploadId&&(t.UploadId=r.UploadId),[2,Promise.resolve(t)]}})})}(t,r)},n}(du),Yb=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K({},n),n.SSEKMSKeyId&&{SSEKMSKeyId:Mo})}}(Yb||(Yb={})),Yb))(),Qb=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K({},n),n.SSECustomerKey&&{SSECustomerKey:Mo})}}(Qb||(Qb={})),Qb))(),Mk=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Ut(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(cu(r,this.serialize,this.deserialize)),this.middlewareStack.use(Wv(r)),this.middlewareStack.use(Fl(r));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"S3Client",commandName:"UploadPartCommand",inputFilterSensitiveLog:Qb.filterSensitiveLog,outputFilterSensitiveLog:Yb.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,a,d,f;return bt(this,function(E){switch(E.label){case 0:if(t=K(K(K(K(K(K(K({"content-type":"application/octet-stream"},Be(e.ContentLength)&&{"content-length":e.ContentLength.toString()}),Be(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Be(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Be(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),Be(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),Be(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Be(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Xo(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(A){return Xo(A)}).join("/")),o=K(K({"x-id":"UploadPart"},void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()}),void 0!==e.UploadId&&{uploadId:e.UploadId}),void 0!==e.Body&&(a=e.Body),[4,n.endpoint()];case 1:return d=E.sent(),[2,new Io({protocol:void 0===(f=d.protocol)?"https":f,hostname:d.hostname,port:d.port,method:"PUT",headers:t,path:r,query:o,body:a})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t;return bt(this,function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,bK(e,n)]:(t={$metadata:tt(e),BucketKeyEnabled:void 0,ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==e.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers.etag&&(t.ETag=e.headers.etag),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(t.RequestCharged=e.headers["x-amz-request-charged"]),[4,er(e.body,n)]);case 1:return r.sent(),[2,Promise.resolve(t)]}})})}(t,r)},n}(du),Nk=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Ut(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(cu(r,this.serialize,this.deserialize)),this.middlewareStack.use(JO(r)),this.middlewareStack.use(Fl(r));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"S3Client",commandName:"CompleteMultipartUploadCommand",inputFilterSensitiveLog:pb.filterSensitiveLog,outputFilterSensitiveLog:hb.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,a,u,d,f;return bt(this,function(E){switch(E.label){case 0:if(t=K(K({"content-type":"application/xml"},Be(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Be(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Xo(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(A){return Xo(A)}).join("/")),o=K({},void 0!==e.UploadId&&{uploadId:e.UploadId}),void 0!==e.MultipartUpload&&(u=function(e,n){var t=new Ob("CompletedMultipartUpload");return null!=e.Parts&&WK(e.Parts,n).map(function(i){i=i.withName("Part"),t.addChildNode(i)}),t}(e.MultipartUpload,n),a='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=u.toString()),[4,n.endpoint()];case 1:return d=E.sent(),[2,new Io({protocol:void 0===(f=d.protocol)?"https":f,hostname:d.hostname,port:d.port,method:"POST",headers:t,path:r,query:o,body:a})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r;return bt(this,function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,D$(e,n)]:(t={$metadata:tt(e),Bucket:void 0,BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(t.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-version-id"]&&(t.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(t.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ct(e.body,n)]);case 1:return void 0!==(r=i.sent()).Bucket&&(t.Bucket=r.Bucket),void 0!==r.ETag&&(t.ETag=r.ETag),void 0!==r.Key&&(t.Key=r.Key),void 0!==r.Location&&(t.Location=r.Location),[2,Promise.resolve(t)]}})})}(t,r)},n}(du),Lk=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Ut(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(cu(r,this.serialize,this.deserialize)),this.middlewareStack.use(Fl(r));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"S3Client",commandName:"AbortMultipartUploadCommand",inputFilterSensitiveLog:fb.filterSensitiveLog,outputFilterSensitiveLog:db.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,u,l;return bt(this,function(m){switch(m.label){case 0:if(t=K(K({},Be(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Be(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Xo(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(E){return Xo(E)}).join("/")),o=K({"x-id":"AbortMultipartUpload"},void 0!==e.UploadId&&{uploadId:e.UploadId}),[4,n.endpoint()];case 1:return u=m.sent(),[2,new Io({protocol:void 0===(l=u.protocol)?"https":l,hostname:u.hostname,port:u.port,method:"DELETE",headers:t,path:r,query:o,body:void 0})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t;return bt(this,function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,A$(e,n)]:(t={$metadata:tt(e),RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(t.RequestCharged=e.headers["x-amz-request-charged"]),[4,er(e.body,n)]);case 1:return r.sent(),[2,Promise.resolve(t)]}})})}(t,r)},n}(du),Bk=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Ut(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(cu(r,this.serialize,this.deserialize)),this.middlewareStack.use(Fl(r));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"S3Client",commandName:"ListPartsCommand",inputFilterSensitiveLog:Ib.filterSensitiveLog,outputFilterSensitiveLog:Pb.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,u,l;return bt(this,function(m){switch(m.label){case 0:if(t=K(K({},Be(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Be(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Xo(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(E){return Xo(E)}).join("/")),o=K(K(K({"x-id":"ListParts"},void 0!==e.MaxParts&&{"max-parts":e.MaxParts.toString()}),void 0!==e.PartNumberMarker&&{"part-number-marker":e.PartNumberMarker}),void 0!==e.UploadId&&{uploadId:e.UploadId}),[4,n.endpoint()];case 1:return u=m.sent(),[2,new Io({protocol:void 0===(l=u.protocol)?"https":l,hostname:u.hostname,port:u.port,method:"GET",headers:t,path:r,query:o,body:void 0})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r;return bt(this,function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,G9(e,n)]:(t={$metadata:tt(e),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},void 0!==e.headers["x-amz-abort-date"]&&(t.AbortDate=new Date(e.headers["x-amz-abort-date"])),void 0!==e.headers["x-amz-abort-rule-id"]&&(t.AbortRuleId=e.headers["x-amz-abort-rule-id"]),void 0!==e.headers["x-amz-request-charged"]&&(t.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ct(e.body,n)]);case 1:return void 0!==(r=i.sent()).Bucket&&(t.Bucket=r.Bucket),void 0!==r.Initiator&&(t.Initiator=function(e,n){var t={ID:void 0,DisplayName:void 0};return void 0!==e.ID&&(t.ID=e.ID),void 0!==e.DisplayName&&(t.DisplayName=e.DisplayName),t}(r.Initiator)),void 0!==r.IsTruncated&&(t.IsTruncated="true"==r.IsTruncated),void 0!==r.Key&&(t.Key=r.Key),void 0!==r.MaxParts&&(t.MaxParts=parseInt(r.MaxParts)),void 0!==r.NextPartNumberMarker&&(t.NextPartNumberMarker=r.NextPartNumberMarker),void 0!==r.Owner&&(t.Owner=Bf(r.Owner,n)),void 0!==r.PartNumberMarker&&(t.PartNumberMarker=r.PartNumberMarker),""===r.Part&&(t.Parts=[]),void 0!==r.Part&&(t.Parts=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){var t={PartNumber:void 0,LastModified:void 0,ETag:void 0,Size:void 0};return void 0!==e.PartNumber&&(t.PartNumber=parseInt(e.PartNumber)),void 0!==e.LastModified&&(t.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(t.ETag=e.ETag),void 0!==e.Size&&(t.Size=parseInt(e.Size)),t}(t)})}(Mv(r.Part))),void 0!==r.StorageClass&&(t.StorageClass=r.StorageClass),void 0!==r.UploadId&&(t.UploadId=r.UploadId),[2,Promise.resolve(t)]}})})}(t,r)},n}(du),gC=G(9069),Yv=function(){return Yv=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Yv.apply(this,arguments)},Uf=function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})},qf=function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},vC=new eo("AWSS3ProviderManagedUpload"),Cee=function(){function e(n,t,r){this.minPartSize=5242880,this.queueSize=4,this.body=null,this.params=null,this.opts=null,this.completedParts=[],this.cancel=!1,this.bytesUploaded=0,this.totalBytesToUpload=0,this.emitter=null,this.params=n,this.opts=t,this.emitter=r,this.s3client=this._createNewS3Client(t,r)}return e.prototype.upload=function(){return Uf(this,void 0,void 0,function(){var n,t,r,i,o,a,u=this;return qf(this,function(d){switch(d.label){case 0:return n=this,[4,this.validateAndSanitizeBody(this.params.Body)];case 1:return n.body=d.sent(),this.totalBytesToUpload=this.byteLength(this.body),this.totalBytesToUpload<=this.minPartSize?(this.params.Body=this.body,t=new See(this.params),[2,this.s3client.send(t)]):[3,2];case 2:return[4,this.createMultiPartUpload()];case 3:r=d.sent(),i=Math.ceil(this.totalBytesToUpload/this.minPartSize),o=this.createParts(),a=0,d.label=4;case 4:return a<i?[4,this.checkIfUploadCancelled(r)]:[3,9];case 5:return d.sent(),[4,this.uploadParts(r,o.slice(a,a+this.queueSize))];case 6:return d.sent(),[4,this.checkIfUploadCancelled(r)];case 7:d.sent(),d.label=8;case 8:return a+=this.queueSize,[3,4];case 9:return o.map(function(l){u.removeEventListener(l)}),[4,this.finishMultiPartUpload(r)];case 10:return[2,d.sent()]}})})},e.prototype.createParts=function(){for(var n=[],t=0;t<this.totalBytesToUpload;){var r=Math.min(t+this.minPartSize,this.totalBytesToUpload);n.push({bodyPart:this.body.slice(t,r),partNumber:n.length+1,emitter:new gC.EventEmitter,_lastUploadedBytes:0}),t+=this.minPartSize}return n},e.prototype.createMultiPartUpload=function(){return Uf(this,void 0,void 0,function(){var n,t;return qf(this,function(r){switch(r.label){case 0:return n=new kk(this.params),[4,this.s3client.send(n)];case 1:return t=r.sent(),vC.debug(t.UploadId),[2,t.UploadId]}})})},e.prototype.uploadParts=function(n,t){return Uf(this,void 0,void 0,function(){var r,i,o,a=this;return qf(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Promise.all(t.map(function(d){return Uf(a,void 0,void 0,function(){var l,f,E,A,I;return qf(this,function(me){switch(me.label){case 0:return this.setupEventListener(d),l={emitter:d.emitter},A=(f=this.params).SSECustomerKey,I=f.SSECustomerKeyMD5,[4,this.s3client.send(new Mk(Yv(Yv(Yv({PartNumber:d.partNumber,Body:d.bodyPart,UploadId:n,Key:f.Key,Bucket:f.Bucket},(E=f.SSECustomerAlgorithm)&&{SSECustomerAlgorithm:E}),A&&{SSECustomerKey:A}),I&&{SSECustomerKeyMD5:I})),l)];case 1:return[2,me.sent()]}})})}))];case 1:for(r=u.sent(),i=0;i<r.length;i++)this.completedParts.push({PartNumber:t[i].partNumber,ETag:r[i].ETag});return[3,3];case 2:return o=u.sent(),vC.error("error happened while uploading a part. Cancelling the multipart upload",o),this.cancelUpload(),[2];case 3:return[2]}})})},e.prototype.finishMultiPartUpload=function(n){return Uf(this,void 0,void 0,function(){var r,o;return qf(this,function(a){switch(a.label){case 0:r=new Nk({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:n,MultipartUpload:{Parts:this.completedParts}}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.s3client.send(r)];case 2:return[2,a.sent().Key];case 3:return o=a.sent(),vC.error("error happened while finishing the upload. Cancelling the multipart upload",o),this.cancelUpload(),[2];case 4:return[2]}})})},e.prototype.checkIfUploadCancelled=function(n){return Uf(this,void 0,void 0,function(){var t,r;return qf(this,function(i){switch(i.label){case 0:if(!this.cancel)return[3,5];t="Upload was cancelled.",i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.cleanup(n)];case 2:return i.sent(),[3,4];case 3:return r=i.sent(),t+=" "+r.message,[3,4];case 4:throw new Error(t);case 5:return[2]}})})},e.prototype.cancelUpload=function(){this.cancel=!0},e.prototype.cleanup=function(n){return Uf(this,void 0,void 0,function(){var t,r;return qf(this,function(i){switch(i.label){case 0:return this.body=null,this.completedParts=[],this.bytesUploaded=0,this.totalBytesToUpload=0,[4,this.s3client.send(new Lk(t={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:n}))];case 1:return i.sent(),[4,this.s3client.send(new Bk(t))];case 2:if((r=i.sent())&&r.Parts&&r.Parts.length>0)throw new Error("Multi Part upload clean up failed");return[2]}})})},e.prototype.removeEventListener=function(n){n.emitter.removeAllListeners(Jv),n.emitter.removeAllListeners(Vb)},e.prototype.setupEventListener=function(n){var t=this;n.emitter.on(Jv,function(r){t.progressChanged(n.partNumber,r.loaded-n._lastUploadedBytes),n._lastUploadedBytes=r.loaded})},e.prototype.progressChanged=function(n,t){this.bytesUploaded+=t,this.emitter.emit(Jv,{loaded:this.bytesUploaded,total:this.totalBytesToUpload,part:n,key:this.params.Key})},e.prototype.byteLength=function(n){if(null==n)return 0;if("number"==typeof n.byteLength)return n.byteLength;if("number"==typeof n.length)return n.length;if("number"==typeof n.size)return n.size;if("string"!=typeof n.path)throw new Error("Cannot determine length of "+n)},e.prototype.validateAndSanitizeBody=function(n){return Uf(this,void 0,void 0,function(){return qf(this,function(t){return this.isGenericObject(n)?[2,JSON.stringify(n)]:[2,n]})})},e.prototype.isGenericObject=function(n){if(null!==n&&"object"==typeof n)try{return!(this.byteLength(n)>=0)}catch(t){return!0}return!1},e.prototype._createNewS3Client=function(n,t){var r=Ok(n,t);return r.middlewareStack.add(Ik(this.opts,this.params.Key),Dk),r.middlewareStack.add(Ak(r.config),Rk),r},e}(),Tee=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Ut(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(cu(r,this.serialize,this.deserialize)),this.middlewareStack.use(Fl(r));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"S3Client",commandName:"ListObjectsV2Command",inputFilterSensitiveLog:Tb.filterSensitiveLog,outputFilterSensitiveLog:Cb.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,u,l;return bt(this,function(m){switch(m.label){case 0:if(t=K(K({},Be(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Be(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",Xo(i)),o=K(K(K(K(K(K(K({"list-type":"2"},void 0!==e.Delimiter&&{delimiter:e.Delimiter}),void 0!==e.EncodingType&&{"encoding-type":e.EncodingType}),void 0!==e.MaxKeys&&{"max-keys":e.MaxKeys.toString()}),void 0!==e.Prefix&&{prefix:e.Prefix}),void 0!==e.ContinuationToken&&{"continuation-token":e.ContinuationToken}),void 0!==e.FetchOwner&&{"fetch-owner":e.FetchOwner.toString()}),void 0!==e.StartAfter&&{"start-after":e.StartAfter}),[4,n.endpoint()];case 1:return u=m.sent(),[2,new Io({protocol:void 0===(l=u.protocol)?"https":l,hostname:u.hostname,port:u.port,method:"GET",headers:t,path:r,query:o,body:void 0})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r;return bt(this,function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,U9(e,n)]:(t={$metadata:tt(e),CommonPrefixes:void 0,Contents:void 0,ContinuationToken:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,KeyCount:void 0,MaxKeys:void 0,Name:void 0,NextContinuationToken:void 0,Prefix:void 0,StartAfter:void 0},[4,Ct(e.body,n)]);case 1:return""===(r=i.sent()).CommonPrefixes&&(t.CommonPrefixes=[]),void 0!==r.CommonPrefixes&&(t.CommonPrefixes=Mb(Mv(r.CommonPrefixes))),""===r.Contents&&(t.Contents=[]),void 0!==r.Contents&&(t.Contents=NO(Mv(r.Contents),n)),void 0!==r.ContinuationToken&&(t.ContinuationToken=r.ContinuationToken),void 0!==r.Delimiter&&(t.Delimiter=r.Delimiter),void 0!==r.EncodingType&&(t.EncodingType=r.EncodingType),void 0!==r.IsTruncated&&(t.IsTruncated="true"==r.IsTruncated),void 0!==r.KeyCount&&(t.KeyCount=parseInt(r.KeyCount)),void 0!==r.MaxKeys&&(t.MaxKeys=parseInt(r.MaxKeys)),void 0!==r.Name&&(t.Name=r.Name),void 0!==r.NextContinuationToken&&(t.NextContinuationToken=r.NextContinuationToken),void 0!==r.Prefix&&(t.Prefix=r.Prefix),void 0!==r.StartAfter&&(t.StartAfter=r.StartAfter),[2,Promise.resolve(t)]}})})}(t,r)},n}(du),hu=function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})},pu=function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},Pee=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},$s=new eo("AWSS3UploadTask"),ho=(()=>(function(e){e[e.INIT=0]="INIT",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.PAUSED=2]="PAUSED",e[e.CANCELLED=3]="CANCELLED",e[e.COMPLETED=4]="COMPLETED"}(ho||(ho={})),ho))(),$u=(()=>(function(e){e.CANCEL="cancel",e.UPLOAD_COMPLETE="uploadComplete",e.UPLOAD_PROGRESS="uploadPartProgress",e.ERROR="error"}($u||($u={})),$u))();function Dee(e,n){return e.PartNumber-n.PartNumber}var jk=function(){function e(n){var t=n.s3Client,r=n.file,i=n.emitter,o=n.storage,a=n.params,u=n.level,d=n.prefixPromise;this.partSize=5242880,this.queueSize=4,this.inProgress=[],this.completedParts=[],this.queued=[],this.bytesUploaded=0,this.totalBytes=0,this.state=ho.INIT,this.prefixPromise=d,this.s3client=t,this.s3client.middlewareStack.remove(ik),this.storage=o,this.storageSync=Promise.resolve(),"function"==typeof this.storage.sync&&(this.storageSync=this.storage.sync()),this.params=a,this.file=r,this.totalBytes=this.file.size,this.bytesUploaded=0,this.emitter=i,this.queued=[],this.fileId=this._getFileId(u),this._validateParams(),this.emitter.on($u.ERROR,function(){})}return Object.defineProperty(e.prototype,"percent",{get:function(){return this.bytesUploaded/this.totalBytes*100},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInProgress",{get:function(){return this.state===ho.IN_PROGRESS},enumerable:!0,configurable:!0}),e.prototype._listSingleFile=function(n){var t=n.key,r=n.bucket;return hu(this,void 0,void 0,function(){var i,o,a,u;return pu(this,function(l){switch(l.label){case 0:return[4,this.s3client.send(new Tee({Bucket:r,Prefix:t}))];case 1:return i=l.sent(),a=void 0===(o=i.Contents)?[]:o,[4,this.prefixPromise];case 2:return u=l.sent(),[2,a.find(function(f){return f.Key===""+u+t})]}})})},e.prototype._getFileId=function(n){return function(e){return void 0!==e&&e instanceof File}(this.file)?[this.file.name,this.file.lastModified,this.file.size,this.file.type,this.params.Bucket,n,this.params.Key].join("-"):[this.file.size,this.file.type,this.params.Bucket,n,this.params.Key].join("-")},e.prototype._findCachedUploadParts=function(){return hu(this,void 0,void 0,function(){var n,t;return pu(this,function(i){switch(i.label){case 0:return[4,this._listCachedUploadTasks()];case 1:return n=i.sent(),0!==Object.keys(n).length&&Object.prototype.hasOwnProperty.call(n,this.fileId)?((t=n[this.fileId]).lastTouched=Date.now(),this.storage.setItem(Zv,JSON.stringify(n)),[4,this.s3client.send(new Bk({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:t.uploadId}))]):[2,{parts:[],uploadId:null}];case 2:return[2,{parts:i.sent().Parts||[],uploadId:t.uploadId}]}})})},e.prototype._emitEvent=function(n,t){this.emitter.emit(n,t)},e.prototype._validateParams=function(){if(this.file.size/this.partSize>1e4)throw new Error("Too many parts. Number of parts is "+this.file.size/this.partSize+", maximum is 10000.")},e.prototype._listCachedUploadTasks=function(){return hu(this,void 0,void 0,function(){var n;return pu(this,function(t){switch(t.label){case 0:return[4,this.storageSync];case 1:return t.sent(),n=this.storage.getItem(Zv)||"{}",[2,JSON.parse(n)]}})})},e.prototype._cache=function(n){return hu(this,void 0,void 0,function(){var t;return pu(this,function(r){switch(r.label){case 0:return[4,this._listCachedUploadTasks()];case 1:return(t=r.sent())[this.fileId]=n,this.storage.setItem(Zv,JSON.stringify(t)),[2]}})})},e.prototype._isCached=function(){return hu(this,void 0,void 0,function(){var n,t;return pu(this,function(r){switch(r.label){case 0:return t=(n=Object.prototype.hasOwnProperty).call,[4,this._listCachedUploadTasks()];case 1:return[2,t.apply(n,[r.sent(),this.fileId])]}})})},e.prototype._removeFromCache=function(){return hu(this,void 0,void 0,function(){var n;return pu(this,function(t){switch(t.label){case 0:return[4,this._listCachedUploadTasks()];case 1:return delete(n=t.sent())[this.fileId],this.storage.setItem(Zv,JSON.stringify(n)),[2]}})})},e.prototype._onPartUploadCompletion=function(n){var t=n.eTag,r=n.partNumber,i=n.chunk;return hu(this,void 0,void 0,function(){return pu(this,function(o){return this.completedParts.push({ETag:t,PartNumber:r}),this.bytesUploaded+=function(e){if("string"==typeof e)return e.length;if(function(e){return void 0!==e&&e instanceof ArrayBuffer}(e))return e.byteLength;if(function(e){return void 0!==e&&e instanceof Blob}(e))return e.size;throw new Error("Cannot determine byte length of "+e)}(i),this._emitEvent($u.UPLOAD_PROGRESS,{loaded:this.bytesUploaded,total:this.totalBytes}),this.inProgress=this.inProgress.filter(function(a){return a.uploadPartInput.PartNumber!==r}),this.queued.length&&this.state!==ho.PAUSED&&this._startNextPart(),this._isDone()&&this._completeUpload(),[2]})})},e.prototype._completeUpload=function(){return hu(this,void 0,void 0,function(){var n;return pu(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.s3client.send(new Nk({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:this.uploadId,MultipartUpload:{Parts:this.completedParts.sort(Dee)}}))];case 1:return t.sent(),this._verifyFileSize(),this._emitEvent($u.UPLOAD_COMPLETE,{key:this.params.Bucket+"/"+this.params.Key}),this._removeFromCache(),this.state=ho.COMPLETED,[3,3];case 2:return n=t.sent(),$s.error("error completing upload",n),this._emitEvent($u.ERROR,n),[3,3];case 3:return[2]}})})},e.prototype._makeUploadPartRequest=function(n,t){return hu(this,void 0,void 0,function(){var r,i;return pu(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this.s3client.send(new Mk(n),{cancelTokenSource:t})];case 1:return r=o.sent(),[4,this._onPartUploadCompletion({eTag:r.ETag,partNumber:n.PartNumber,chunk:n.Body})];case 2:return o.sent(),[3,4];case 3:return i=o.sent(),this.state===ho.PAUSED?$s.log("upload paused"):this.state===ho.CANCELLED?$s.log("upload aborted"):$s.error("error starting next part of upload: ",i),!zf().isCancel(i)&&i.message!==Vm.UPLOAD_PAUSED_MESSAGE&&(this._emitEvent($u.ERROR,i),this.pause()),[3,4];case 4:return[2]}})})},e.prototype._startNextPart=function(){if(this.queued.length>0&&this.state!==ho.PAUSED){var n=zf().CancelToken.source(),t=this.queued.shift();this.inProgress.push({uploadPartInput:t,s3Request:this._makeUploadPartRequest(t,n),cancel:n.cancel})}},e.prototype._verifyFileSize=function(){return hu(this,void 0,void 0,function(){var n,t;return pu(this,function(r){switch(r.label){case 0:return[4,this._listSingleFile({key:this.params.Key,bucket:this.params.Bucket})];case 1:if(n=r.sent(),!(t=Boolean(n&&n.Size===this.file.size)))throw new Error("File size does not match between local file and file on s3");return[2,t]}})})},e.prototype._isDone=function(){return!this.queued.length&&!this.inProgress.length&&this.bytesUploaded===this.totalBytes},e.prototype._createParts=function(){for(var n=this.file.size,t=[],r=0;r<n;){var i=Math.min(r+this.partSize,n);t.push({Body:this.file.slice(r,i),Key:this.params.Key,Bucket:this.params.Bucket,PartNumber:t.length+1,UploadId:this.uploadId}),r+=this.partSize}return t},e.prototype._initCachedUploadParts=function(n){this.bytesUploaded+=n.reduce(function(r,i){return r+i.Size},0);var t=new Set(n.map(function(r){return r.PartNumber}));this.queued=this.queued.filter(function(r){return!t.has(r.PartNumber)}),this.completedParts=n.map(function(r){return{PartNumber:r.PartNumber,ETag:r.ETag}}),this._emitEvent($u.UPLOAD_PROGRESS,{loaded:this.bytesUploaded,total:this.totalBytes})},e.prototype._initMultipartUpload=function(){return hu(this,void 0,void 0,function(){var n;return pu(this,function(t){switch(t.label){case 0:return[4,this.s3client.send(new kk(this.params))];case 1:return n=t.sent(),this._cache({uploadId:n.UploadId,lastTouched:Date.now(),bucket:this.params.Bucket,key:this.params.Key,fileName:this.file instanceof File?this.file.name:""}),[2,n.UploadId]}})})},e.prototype._initializeUploadTask=function(){return hu(this,void 0,void 0,function(){var n,t,r,i;return pu(this,function(o){switch(o.label){case 0:this.state=ho.IN_PROGRESS,o.label=1;case 1:return o.trys.push([1,7,,8]),[4,this._isCached()];case 2:return o.sent()?[4,this._findCachedUploadParts()]:[3,4];case 3:return n=o.sent(),t=n.parts,this.uploadId=r=n.uploadId,this.queued=this._createParts(),this._initCachedUploadParts(t),this._startUpload(),[3,6];case 4:return this.uploadId?[3,6]:[4,this._initMultipartUpload()];case 5:r=o.sent(),this.uploadId=r,this.queued=this._createParts(),this._startUpload(),o.label=6;case 6:return[3,8];case 7:return i=o.sent(),zf().isCancel(i)||$s.error("Error initializing the upload task",i),[3,8];case 8:return[2]}})})},e.prototype.resume=function(){this.state===ho.CANCELLED?$s.warn("This task has already been cancelled"):this.state===ho.COMPLETED?$s.warn("This task has already been completed"):this.state===ho.IN_PROGRESS?$s.warn("Upload task already in progress"):this.uploadId?this._startUpload():this._initializeUploadTask()},e.prototype._startUpload=function(){this.state=ho.IN_PROGRESS;for(var n=0;n<this.queueSize;n++)this._startNextPart()},e.prototype._cancel=function(){return hu(this,void 0,void 0,function(){var n;return pu(this,function(t){switch(t.label){case 0:return this.state!==ho.CANCELLED?[3,1]:($s.warn("This task has already been cancelled"),[2,!1]);case 1:return this.state!==ho.COMPLETED?[3,2]:($s.warn("This task has already been completed"),[2,!1]);case 2:this.pause(),this.queued=[],this.completedParts=[],this.bytesUploaded=0,this.state=ho.CANCELLED,t.label=3;case 3:return t.trys.push([3,6,,7]),[4,this.s3client.send(new Lk({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:this.uploadId}))];case 4:return t.sent(),[4,this._removeFromCache()];case 5:return t.sent(),[2,!0];case 6:return n=t.sent(),$s.error("Error cancelling upload task",n),[2,!1];case 7:return[2]}})})},e.prototype.pause=function(){var n;this.state===ho.CANCELLED?$s.warn("This task has already been cancelled"):this.state===ho.COMPLETED?$s.warn("This task has already been completed"):this.state===ho.PAUSED&&$s.warn("This task is already paused"),this.state=ho.PAUSED;var t=this.inProgress.splice(0,this.inProgress.length);t.forEach(function(r){r.cancel(Vm.UPLOAD_PAUSED_MESSAGE)}),(n=this.queued).unshift.apply(n,function(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(Pee(arguments[n]));return e}(t.map(function(r){return r.uploadPartInput})))},e}(),Sc=function(){return Sc=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Sc.apply(this,arguments)},Qv=function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})},e_=function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},Wo=new eo("AWSS3Provider"),kee=function(){function e(n){var t=this;this._config=n||{},this._storage=(new y0).getStorage(),pd.listen("auth",function(r){var i=r.payload;("signOut"===i.event||"signIn"===i.event)&&t._storage.removeItem(Zv)}),Wo.debug("Storage Options",this._config)}return e.prototype.getCategory=function(){return e.CATEGORY},e.prototype.getProviderName=function(){return e.PROVIDER_NAME},e.prototype.configure=function(n){if(Wo.debug("configure Storage",n),!n)return this._config;var t=wS.parseMobilehubConfig(n);return this._config=Object.assign({},this._config,t.Storage),this._config.bucket||Wo.debug("Do not have bucket yet"),this._config},e.prototype.startResumableUpload=function(n,t){var r=n.s3Client,i=n.emitter,o=n.key,a=n.file,u=n.params,d=t.progressCallback,l=t.completeCallback,f=t.errorCallback,_=t.track,m=void 0!==_&&_;if(!(a instanceof Blob))throw new Error(Ec.INVALID_BLOB);i.on($u.UPLOAD_PROGRESS,function(I){d&&("function"==typeof d?d(I):Wo.warn("progressCallback should be a function, not a "+typeof d))}),i.on($u.UPLOAD_COMPLETE,function(I){l&&("function"==typeof l?l(I):Wo.warn("completeCallback should be a function, not a "+typeof l))}),i.on($u.ERROR,function(I){f&&("function"==typeof f?f(I):Wo.warn("errorCallback should be a function, not a "+typeof f))});var E=Vu.get().then(function(I){var se=Vu.shear(I);return Pk(Sc(Sc({},t),{credentials:se}))}),A=new jk({s3Client:r,file:a,emitter:i,level:t.level,storage:this._storage,params:u,prefixPromise:E});return fu(m,"upload",{method:"put",result:"success"},null,"Upload Task created successfully for "+o),A.resume(),A},e.prototype.copy=function(n,t,r){return Qv(this,void 0,void 0,function(){var o,a,u,d,l,f,_,m,E,A,I,se,me,Re,it,gt,At,Vt,wn,yn,ar,Or,Dn,Jo,No;return e_(this,function(Lo){switch(Lo.label){case 0:return[4,this._ensureCredentials()];case 1:if(!Lo.sent()||!this._isWithCredentials(this._config))throw new Error(Ec.NO_CREDENTIALS);if(o=Object.assign({},this._config,r),a=o.acl,u=o.bucket,d=o.cacheControl,l=o.expires,f=o.track,_=o.serverSideEncryption,m=o.SSECustomerAlgorithm,E=o.SSECustomerKey,A=o.SSECustomerKeyMD5,I=o.SSEKMSKeyId,me=void 0===(se=n.level)?"public":se,Re=n.identityId,At=void 0===(gt=t.level)?"public":gt,Vt=t.key,!(it=n.key)||"string"!=typeof it)throw new Error(Ec.NO_SRC_KEY);if(!Vt||"string"!=typeof Vt)throw new Error(Ec.NO_DEST_KEY);"protected"!==me&&Re&&Wo.warn('You may copy files from another user if the source level is "protected", currently it\'s '+me),wn=this._prefix(Sc(Sc(Sc({},o),{level:me}),Re&&{identityId:Re})),yn=this._prefix(Sc(Sc({},o),{level:At})),Wo.debug("copying "+(ar=u+"/"+wn+it)+" to "+(Or=""+yn+Vt)),Dn={Bucket:u,CopySource:ar,Key:Or,MetadataDirective:"COPY"},d&&(Dn.CacheControl=d),l&&(Dn.Expires=l),_&&(Dn.ServerSideEncryption=_),m&&(Dn.SSECustomerAlgorithm=m),E&&(Dn.SSECustomerKey=E),A&&(Dn.SSECustomerKeyMD5=A),I&&(Dn.SSEKMSKeyId=I),a&&(Dn.ACL=a),Jo=this._createNewS3Client(o),Lo.label=2;case 2:return Lo.trys.push([2,4,,5]),[4,Jo.send(new NY(Dn))];case 3:return Lo.sent(),fu(f,"copy",{method:"copy",result:"success"},null,"Copy success from "+it+" to "+Vt),[2,{key:Vt}];case 4:throw No=Lo.sent(),fu(f,"copy",{method:"copy",result:"failed"},null,"Copy failed from "+it+" to "+Vt),No;case 5:return[2]}})})},e.prototype.get=function(n,t){return Qv(this,void 0,void 0,function(){var i,o,a,u,d,l,f,_,m,E,A,I,se,me,Re,it,gt,At,Vt,wn,yn,ar,Or,Dn,Jo,No,Lo;return e_(this,function(ns){switch(ns.label){case 0:return[4,this._ensureCredentials()];case 1:if(!ns.sent()||!this._isWithCredentials(this._config))throw new Error(Ec.NO_CREDENTIALS);if(i=Object.assign({},this._config,t),o=i.bucket,a=i.download,u=i.cacheControl,d=i.contentDisposition,l=i.contentEncoding,f=i.contentLanguage,_=i.contentType,m=i.expires,E=i.track,A=i.SSECustomerAlgorithm,I=i.SSECustomerKey,se=i.SSECustomerKeyMD5,me=i.progressCallback,Re=this._prefix(i),it=Re+n,gt=new gC.EventEmitter,At=this._createNewS3Client(i,gt),Wo.debug("get "+n+" from "+it),Vt={Bucket:o,Key:it},u&&(Vt.ResponseCacheControl=u),d&&(Vt.ResponseContentDisposition=d),l&&(Vt.ResponseContentEncoding=l),f&&(Vt.ResponseContentLanguage=f),_&&(Vt.ResponseContentType=_),A&&(Vt.SSECustomerAlgorithm=A),I&&(Vt.SSECustomerKey=I),se&&(Vt.SSECustomerKeyMD5=se),!0!==a)return[3,5];wn=new ZO(Vt),ns.label=2;case 2:return ns.trys.push([2,4,,5]),me&&("function"==typeof me?gt.on(Vb,function(p_){me(p_)}):Wo.warn("progressCallback should be a function, not a "+typeof me)),[4,At.send(wn)];case 3:return yn=ns.sent(),gt.removeAllListeners(Vb),fu(E,"download",{method:"get",result:"success"},{fileSize:Number(yn.Body.size||yn.Body.length)},"Download success for "+n),[2,yn];case 4:throw ar=ns.sent(),fu(E,"download",{method:"get",result:"failed"},null,"Download failed with "+ar.message),ar;case 5:return ns.trys.push([5,8,,9]),Or=new KY(Sc({},At.config)),[4,FY(At,new ZO(Vt))];case 6:return Dn=ns.sent(),No=zY,[4,Or.presign(Dn,{expiresIn:m||900})];case 7:return Jo=No.apply(void 0,[ns.sent()]),fu(E,"getSignedUrl",{method:"get",result:"success"},null,"Signed URL: "+Jo),[2,Jo];case 8:throw Lo=ns.sent(),Wo.warn("get signed url error",Lo),fu(E,"getSignedUrl",{method:"get",result:"failed"},null,"Could not get a signed URL for "+n),Lo;case 9:return[2]}})})},e.prototype.put=function(n,t,r){var i=Object.assign({},this._config,r),o=i.bucket,a=i.track,u=i.progressCallback,d=i.level,l=i.resumable,_=i.contentDisposition,m=i.contentEncoding,E=i.cacheControl,A=i.expires,I=i.metadata,se=i.tagging,me=i.acl,Re=i.serverSideEncryption,it=i.SSECustomerAlgorithm,gt=i.SSECustomerKey,At=i.SSECustomerKeyMD5,Vt=i.SSEKMSKeyId,yn={Bucket:o,Key:n,Body:t,ContentType:i.contentType||"binary/octet-stream"};E&&(yn.CacheControl=E),_&&(yn.ContentDisposition=_),m&&(yn.ContentEncoding=m),A&&(yn.Expires=A),I&&(yn.Metadata=I),se&&(yn.Tagging=se),Re&&(yn.ServerSideEncryption=Re),it&&(yn.SSECustomerAlgorithm=it),gt&&(yn.SSECustomerKey=gt),At&&(yn.SSECustomerKeyMD5=At),Vt&&(yn.SSEKMSKeyId=Vt);var ar=new gC.EventEmitter,Or=new Cee(yn,i,ar);if(me&&(yn.ACL=me),!0===l){var Dn=this._createNewS3Client(i);return Dn.middlewareStack.add(Ik(i,n),Dk),this.startResumableUpload({bucket:o,key:n,s3Client:Dn,file:t,emitter:ar,accessLevel:d,params:yn},r)}try{return u&&("function"==typeof u?ar.on(Jv,function(No){u(No)}):Wo.warn("progressCallback should be a function, not a "+typeof u)),Or.upload().then(function(No){return Wo.debug("upload result",No),fu(a,"upload",{method:"put",result:"success"},null,"Upload success for "+n),{key:n}})}catch(No){throw Wo.warn("error uploading",No),fu(a,"upload",{method:"put",result:"failed"},null,"Error uploading "+n),No}},e.prototype.remove=function(n,t){return Qv(this,void 0,void 0,function(){var i,o,a,u,d,l,_,m,E;return e_(this,function(A){switch(A.label){case 0:return[4,this._ensureCredentials()];case 1:if(!A.sent()||!this._isWithCredentials(this._config))throw new Error(Ec.NO_CREDENTIALS);i=Object.assign({},this._config,t),o=i.bucket,a=i.track,u=this._prefix(i),d=u+n,l=this._createNewS3Client(i),Wo.debug("remove "+n+" from "+d),_=new LY({Bucket:o,Key:d}),A.label=2;case 2:return A.trys.push([2,4,,5]),[4,l.send(_)];case 3:return m=A.sent(),fu(a,"delete",{method:"remove",result:"success"},null,"Deleted "+n+" successfully"),[2,m];case 4:throw E=A.sent(),fu(a,"delete",{method:"remove",result:"failed"},null,"Deletion of "+n+" failed with "+E),E;case 5:return[2]}})})},e.prototype.list=function(n,t){return Qv(this,void 0,void 0,function(){var i,o,a,u,d,l,f,m,E,A,I;return e_(this,function(se){switch(se.label){case 0:return[4,this._ensureCredentials()];case 1:if(!se.sent()||!this._isWithCredentials(this._config))throw new Error(Ec.NO_CREDENTIALS);i=Object.assign({},this._config,t),o=i.bucket,a=i.track,u=i.maxKeys,d=this._prefix(i),l=d+n,f=this._createNewS3Client(i),Wo.debug("list "+n+" from "+l),m=new BY({Bucket:o,Prefix:l,MaxKeys:u}),se.label=2;case 2:return se.trys.push([2,4,,5]),[4,f.send(m)];case 3:return E=se.sent(),A=[],E&&E.Contents&&(A=E.Contents.map(function(me){return{key:me.Key.substr(d.length),eTag:me.ETag,lastModified:me.LastModified,size:me.Size}})),fu(a,"list",{method:"list",result:"success"},null,A.length+" items returned from list operation"),Wo.debug("list",A),[2,A];case 4:throw I=se.sent(),Wo.warn("list error",I),fu(a,"list",{method:"list",result:"failed"},null,"Listing items failed: "+I.message),I;case 5:return[2]}})})},e.prototype._ensureCredentials=function(){return Qv(this,void 0,void 0,function(){var n,t,r;return e_(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Vu.get()];case 1:return(n=i.sent())?(t=Vu.shear(n),Wo.debug("set credentials for storage",t),this._config.credentials=t,[2,!0]):[2,!1];case 2:return r=i.sent(),Wo.warn("ensure credentials error",r),[2,!1];case 3:return[2]}})})},e.prototype._isWithCredentials=function(n){return"object"==typeof n&&n.hasOwnProperty("credentials")},e.prototype._prefix=function(n){var i=n.customPrefix||{},o=n.identityId||n.credentials.identityId,a=(void 0!==i.private?i.private:"private/")+o+"/",u=(void 0!==i.protected?i.protected:"protected/")+o+"/",d=void 0!==i.public?i.public:"public/";switch(n.level){case"private":return a;case"protected":return u;default:return d}},e.prototype._createNewS3Client=function(n,t){var r=Ok(n,t);return r.middlewareStack.add(Ak(r.config),Rk),r},e.CATEGORY="Storage",e.PROVIDER_NAME="AWSS3",e}(),Cc=function(){return Cc=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Cc.apply(this,arguments)},wd=new eo("StorageClass"),Vf="AWSS3",Uk=function(){function e(){this._config={},this._pluggables=[],this._cancelTokenSourceMap=new WeakMap,wd.debug("Storage Options",this._config),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.list=this.list.bind(this)}return e.prototype.getModuleName=function(){return"Storage"},e.prototype.addPluggable=function(n){if(n&&"Storage"===n.getCategory())return this._pluggables.push(n),n.configure(this._config[n.getProviderName()])},e.prototype.getPluggable=function(n){var t=this._pluggables.find(function(r){return r.getProviderName()===n});return void 0===t?(wd.debug("No plugin found with providerName",n),null):t},e.prototype.removePluggable=function(n){this._pluggables=this._pluggables.filter(function(t){return t.getProviderName()!==n})},e.prototype.configure=function(n){var t=this;if(wd.debug("configure Storage"),!n)return this._config;var r=wS.parseMobilehubConfig(n),i=Object.keys(r.Storage),o=["bucket","region","level","track","customPrefix","serverSideEncryption","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId"],a=function(d){return o.some(function(l){return l===d})};return i&&i.find(function(l){return a(l)})&&!r.Storage[Vf]&&(r.Storage[Vf]={}),Object.entries(r.Storage).map(function(d){var l=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}(d,2),f=l[0],_=l[1];f&&a(f)&&void 0!==_&&(r.Storage[Vf][f]=_,delete r.Storage[f])}),Object.keys(r.Storage).forEach(function(d){"string"!=typeof r.Storage[d]&&(t._config[d]=Cc(Cc({},t._config[d]),r.Storage[d]))}),this._pluggables.forEach(function(d){d.configure(t._config[d.getProviderName()])}),0===this._pluggables.length&&this.addPluggable(new kee),this._config},e.prototype.getCancellableTokenSource=function(){return zf().CancelToken.source()},e.prototype.updateRequestToBeCancellable=function(n,t){this._cancelTokenSourceMap.set(n,t)},e.prototype.isUploadTask=function(n){return void 0!==n&&"function"==typeof n.pause&&"function"==typeof n.resume},e.prototype.cancel=function(n,t){if(n instanceof jk)return n._cancel();var r=this._cancelTokenSourceMap.get(n);r?r.cancel(t):wd.debug("The request does not map to any cancel token")},e.prototype.copy=function(n,t,r){var i=(null==r?void 0:r.provider)||Vf,o=this._pluggables.find(function(d){return d.getProviderName()===i});if(void 0===o)return wd.debug("No plugin found with providerName",i),Promise.reject("No plugin found in Storage for the provider");var a=this.getCancellableTokenSource();if("function"!=typeof o.copy)return Promise.reject(".copy is not implemented on provider "+o.getProviderName());var u=o.copy(n,t,Cc(Cc({},r),{cancelTokenSource:a}));return this.updateRequestToBeCancellable(u,a),u},e.prototype.get=function(n,t){var r=(null==t?void 0:t.provider)||Vf,i=this._pluggables.find(function(u){return u.getProviderName()===r});if(void 0===i)return wd.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider");var o=this.getCancellableTokenSource(),a=i.get(n,Cc(Cc({},t),{cancelTokenSource:o}));return this.updateRequestToBeCancellable(a,o),a},e.prototype.isCancelError=function(n){return zf().isCancel(n)},e.prototype.put=function(n,t,r){var i=(null==r?void 0:r.provider)||Vf,o=this._pluggables.find(function(d){return d.getProviderName()===i});if(void 0===o)return wd.debug("No plugin found with providerName",i),Promise.reject("No plugin found in Storage for the provider");var a=this.getCancellableTokenSource(),u=o.put(n,t,Cc(Cc({},r),{cancelTokenSource:a}));return this.isUploadTask(u)||this.updateRequestToBeCancellable(u,a),u},e.prototype.remove=function(n,t){var r=(null==t?void 0:t.provider)||Vf,i=this._pluggables.find(function(o){return o.getProviderName()===r});return void 0===i?(wd.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider")):i.remove(n,t)},e.prototype.list=function(n,t){var r=(null==t?void 0:t.provider)||Vf,i=this._pluggables.find(function(o){return o.getProviderName()===r});return void 0===i?(wd.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider")):i.list(n,t)},e}(),t_=function(){return t_=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},t_.apply(this,arguments)},_C=new eo("Storage"),xd=null,Lee=function(){if(xd)return xd;_C.debug("Create Storage Instance, debug"),(xd=new Uk).vault=new Uk;var e=xd.configure;return xd.configure=function(n){_C.debug("storage configure called");var t=t_({},e.call(xd,n));Object.keys(t).forEach(function(r){"string"!=typeof t[r]&&(t[r]=t_(t_({},t[r]),{level:"private"}))}),_C.debug("storage vault configure called"),xd.vault.configure(t)},xd}();Es.register(Lee),G(2242),Es.Auth=vO,Es.Cache=f$,Es.ServiceWorker=d5;const Bee=Es;var qk=G(4578),Gf={clockOffset:0,getDateWithClockOffset:function(){return Gf.clockOffset?new Date((new Date).getTime()+Gf.clockOffset):new Date},getClockOffset:function(){return Gf.clockOffset},getHeaderStringFromDate:function(e){return void 0===e&&(e=Gf.getDateWithClockOffset()),e.toISOString().replace(/[:\-]|\.\d{3}/g,"")},getDateFromHeaderString:function(e){var n=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}(e.match(/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2}).+/),7),r=n[2],i=n[3],o=n[4],a=n[5],u=n[6];return new Date(Date.UTC(Number(n[1]),Number(r)-1,Number(i),Number(o),Number(a),Number(u)))},isClockSkewed:function(e){return Math.abs(e.getTime()-Gf.getDateWithClockOffset().getTime())>=3e5},isClockSkewError:function(e){if(!e.response||!e.response.headers)return!1;var n=e.response.headers;return Boolean(["BadRequestException","InvalidSignatureException"].includes(n["x-amzn-errortype"])&&(n.date||n.Date))},setClockOffset:function(e){Gf.clockOffset=e}},mu=function(){return mu=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},mu.apply(this,arguments)},Vk=new eo("Signer"),ew="AWS4-HMAC-SHA256",n_=function(e,n){var t=new qk.Sha256(e);return t.update(n),t.digestSync()},Gk=function(e){var n=e||"",t=new qk.Sha256;return t.update(n),Vs(t.digestSync())},Vee=function(e){return e&&0!==e.length?e.split("&").map(function(n){var t=n.split("=");if(1===t.length)return n;var r=function(e){return e.replace(/[!'()*]/g,function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})}(t[1]);return t[0]+"="+r}).sort(function(n,t){var r=n.split("=")[0],i=t.split("=")[0];return r===i?n<t?-1:1:r<i?-1:1}).join("&"):""},Gee=function(e){return e&&0!==Object.keys(e).length?Object.keys(e).map(function(n){return{key:n.toLowerCase(),value:e[n]?e[n].trim().replace(/\s+/g," "):""}}).sort(function(n,t){return n.key<t.key?-1:1}).map(function(n){return n.key+":"+n.value}).join("\n")+"\n":""},Hk=function(e){return Object.keys(e).map(function(n){return n.toLowerCase()}).sort().join(";")},$k=function(e){var n=(0,Cs.Qc)(e.url);return[e.method||"/",encodeURIComponent(n.pathname).replace(/%2F/gi,"/"),Vee(n.query),Gee(e.headers),Hk(e.headers),Gk(e.data)].join("\n")},Kk=function(e){var i=((0,Cs.Qc)(e.url).host.match(/([^\.]+)\.(?:([^\.]*)\.)?amazonaws\.com$/)||[]).slice(1,3);return"es"===i[1]&&(i=i.reverse()),{service:e.service||i[0],region:e.region||i[1]}},Xk=function(e,n,t){return[e,n,t,"aws4_request"].join("/")},Wk=function(e,n,t,r){return[e,t,r,Gk(n)].join("\n")},Jk=function(e,n,t){Vk.debug(t);var i=n_("AWS4"+e,n),o=n_(i,t.region),a=n_(o,t.service);return n_(a,"aws4_request")},Zk=function(e,n){return Vs(n_(e,n))},$ee=function(){function e(){}return e.sign=function(n,t,r){void 0===r&&(r=null),n.headers=n.headers||{};var o=Gf.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),a=o.substr(0,8),u=(0,Cs.Qc)(n.url);n.headers.host=u.host,n.headers["x-amz-date"]=o,t.session_token&&(n.headers["X-Amz-Security-Token"]=t.session_token);var d=$k(n);Vk.debug(d);var l=r||Kk(n),f=Xk(a,l.region,l.service),_=Wk(ew,d,o,f),m=Jk(t.secret_key,a,l),E=Zk(m,_),A=function(e,n,t,r,i){return["AWS4-HMAC-SHA256 Credential="+n+"/"+t,"SignedHeaders="+r,"Signature="+i].join(", ")}(0,t.access_key,f,Hk(n.headers),E);return n.headers.Authorization=A,n},e.signUrl=function(n,t,r,i){var o="object"==typeof n?n.url:n,a="object"==typeof n?n.method:"GET",u="object"==typeof n?n.body:void 0,d=Gf.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),l=d.substr(0,8),m=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}((0,Cs.Qc)(o,!0,!0),["search"]),A={host:m.host},I=r||Kk({url:(0,Cs.WU)(m)}),se=I.region,me=I.service,Re=Xk(l,se,me),it=t.session_token&&"iotdevicegateway"!==me,gt=mu(mu(mu({"X-Amz-Algorithm":ew,"X-Amz-Credential":[t.access_key,Re].join("/"),"X-Amz-Date":d.substr(0,16)},it?{"X-Amz-Security-Token":""+t.session_token}:{}),i?{"X-Amz-Expires":""+i}:{}),{"X-Amz-SignedHeaders":Object.keys(A).join(",")}),At=$k({method:a,url:(0,Cs.WU)(mu(mu({},m),{query:mu(mu({},m.query),gt)})),headers:A,data:u}),Vt=Wk(ew,At,d,Re),wn=Jk(t.secret_key,l,{region:se,service:me}),yn=Zk(wn,Vt),ar=mu({"X-Amz-Signature":yn},t.session_token&&{"X-Amz-Security-Token":t.session_token});return(0,Cs.WU)({protocol:m.protocol,slashes:!0,hostname:m.hostname,port:m.port,pathname:m.pathname,query:mu(mu(mu({},m.query),gt),ar)})},e}(),Kee=G(7691),Yk=G.n(Kee),nte=function(e){var n=e.endpoint;if("string"==typeof n){var r=Promise.resolve((0,e.urlParser)(n));return function(){return r}}if("object"==typeof n){var i=Promise.resolve(n);return function(){return i}}return n},Qk=function(e){return"string"==typeof e&&(e.startsWith("fips-")||e.endsWith("-fips"))},eM=function(e){return Qk(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e},tM=function(e,n){var t;void 0===e&&(e=[]);var r=n.useFipsEndpoint,i=n.useDualstackEndpoint;return null===(t=e.find(function(o){var a=o.tags;return r===a.includes("fips")&&i===a.includes("dualstack")}))||void 0===t?void 0:t.hostname},cte=function(e,n){var t,r,i,o,a,u,d=n.useFipsEndpoint,l=void 0!==d&&d,f=n.useDualstackEndpoint,_=void 0!==f&&f,m=n.signingService,E=n.regionHash,A=n.partitionHash,I=function(e,n){var t,r=n.partitionHash;return null!==(t=Object.keys(r||{}).find(function(i){return r[i].regions.includes(e)}))&&void 0!==t?t:"aws"}(e,{partitionHash:A}),se=e in E?e:null!==(r=null===(t=A[I])||void 0===t?void 0:t.endpoint)&&void 0!==r?r:e,me={useFipsEndpoint:l,useDualstackEndpoint:_},gt=function(e,n){var r=n.partitionHostname;return n.regionHostname||(r?r.replace("{region}",e):void 0)}(se,{regionHostname:tM(null===(i=E[se])||void 0===i?void 0:i.variants,me),partitionHostname:tM(null===(o=A[I])||void 0===o?void 0:o.variants,me)});if(void 0===gt)throw new Error("Endpoint resolution failed for: "+{resolvedRegion:se,useFipsEndpoint:l,useDualstackEndpoint:_});var At=function(e,n){var t=n.signingRegion;if(t)return t;if(n.useFipsEndpoint){var o=n.regionRegex.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),a=e.match(o);if(a)return a[0].slice(1,-1)}}(gt,{signingRegion:null===(a=E[se])||void 0===a?void 0:a.signingRegion,regionRegex:A[I].regionRegex,useFipsEndpoint:l});return K(K({partition:I,signingService:m,hostname:gt},At&&{signingRegion:At}),(null===(u=E[se])||void 0===u?void 0:u.signingService)&&{signingService:E[se].signingService})},Ku=function(){function e(n){this.method=n.method||"GET",this.hostname=n.hostname||"localhost",this.port=n.port,this.query=n.query||{},this.headers=n.headers||{},this.body=n.body,this.protocol=n.protocol?":"!==n.protocol.substr(-1)?n.protocol+":":n.protocol:"https:",this.path=n.path?"/"!==n.path.charAt(0)?"/"+n.path:n.path:"/"}return e.isInstance=function(n){return!!n&&("method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&"object"==typeof n.query&&"object"==typeof n.headers)},e.prototype.clone=function(){var n=new e(K(K({},this),{headers:K({},this.headers)}));return n.query&&(n.query=function dte(e){return Object.keys(e).reduce(function(n,t){var r,i=e[t];return K(K({},n),((r={})[t]=Array.isArray(i)?Rt([],ne(i)):i,r))},{})}(n.query)),n},e}(),yC=function(){function e(n){this.statusCode=n.statusCode,this.headers=n.headers||{},this.body=n.body}return e.isInstance=function(n){return!!n&&("number"==typeof n.statusCode&&"object"==typeof n.headers)},e}();function $m(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}var rw,nM="content-length",hte={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},gte={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},yte={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},mp=(()=>(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"}(mp||(mp={})),mp))(),rM=mp.STANDARD,wte=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],xte=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Ete=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],Ste=[500,502,503,504],bC=function(e){var n,t;return 429===(null===(n=e.$metadata)||void 0===n?void 0:n.httpStatusCode)||xte.includes(e.name)||1==(null===(t=e.$retryable)||void 0===t?void 0:t.throttling)},Ite=function(){function e(n){var t,r,i,o,a;this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=null!==(t=null==n?void 0:n.beta)&&void 0!==t?t:.7,this.minCapacity=null!==(r=null==n?void 0:n.minCapacity)&&void 0!==r?r:1,this.minFillRate=null!==(i=null==n?void 0:n.minFillRate)&&void 0!==i?i:.5,this.scaleConstant=null!==(o=null==n?void 0:n.scaleConstant)&&void 0!==o?o:.4,this.smooth=null!==(a=null==n?void 0:n.smooth)&&void 0!==a?a:.8;var u=this.getCurrentTimeInSeconds();this.lastThrottleTime=u,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}return e.prototype.getCurrentTimeInSeconds=function(){return Date.now()/1e3},e.prototype.getSendToken=function(){return wt(this,void 0,void 0,function(){return bt(this,function(n){return[2,this.acquireTokenBucket(1)]})})},e.prototype.acquireTokenBucket=function(n){return wt(this,void 0,void 0,function(){var t;return bt(this,function(r){switch(r.label){case 0:return this.enabled?(this.refillTokenBucket(),n>this.currentCapacity?(t=(n-this.currentCapacity)/this.fillRate*1e3,[4,new Promise(function(i){return setTimeout(i,t)})]):[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return this.currentCapacity=this.currentCapacity-n,[2]}})})},e.prototype.refillTokenBucket=function(){var n=this.getCurrentTimeInSeconds();this.lastTimestamp?(this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+(n-this.lastTimestamp)*this.fillRate),this.lastTimestamp=n):this.lastTimestamp=n},e.prototype.updateClientSendingRate=function(n){var t;if(this.updateMeasuredRate(),bC(n)){var r=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=r,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),t=this.cubicThrottle(r),this.enableTokenBucket()}else this.calculateTimeWindow(),t=this.cubicSuccess(this.getCurrentTimeInSeconds());var i=Math.min(t,2*this.measuredTxRate);this.updateTokenBucketRate(i)},e.prototype.calculateTimeWindow=function(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))},e.prototype.cubicThrottle=function(n){return this.getPrecise(n*this.beta)},e.prototype.cubicSuccess=function(n){return this.getPrecise(this.scaleConstant*Math.pow(n-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)},e.prototype.enableTokenBucket=function(){this.enabled=!0},e.prototype.updateTokenBucketRate=function(n){this.refillTokenBucket(),this.fillRate=Math.max(n,this.minFillRate),this.maxCapacity=Math.max(n,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)},e.prototype.updateMeasuredRate=function(){var n=this.getCurrentTimeInSeconds(),t=Math.floor(2*n)/2;this.requestCount++,t>this.lastTxRateBucket&&(this.measuredTxRate=this.getPrecise(this.requestCount/(t-this.lastTxRateBucket)*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=t)},e.prototype.getPrecise=function(n){return parseFloat(n.toFixed(8))},e}(),Ate=new Uint8Array(16);function Rte(){if(!rw&&!(rw="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rw(Ate)}const Dte=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,kte=function Ote(e){return"string"==typeof e&&Dte.test(e)};for(var Na=[],wC=0;wC<256;++wC)Na.push((wC+256).toString(16).substr(1));const Bte=function Lte(e,n,t){var r=(e=e||{}).random||(e.rng||Rte)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){t=t||0;for(var i=0;i<16;++i)n[t+i]=r[i];return n}return function Mte(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(Na[e[n+0]]+Na[e[n+1]]+Na[e[n+2]]+Na[e[n+3]]+"-"+Na[e[n+4]]+Na[e[n+5]]+"-"+Na[e[n+6]]+Na[e[n+7]]+"-"+Na[e[n+8]]+Na[e[n+9]]+"-"+Na[e[n+10]]+Na[e[n+11]]+Na[e[n+12]]+Na[e[n+13]]+Na[e[n+14]]+Na[e[n+15]]).toLowerCase();if(!kte(t))throw TypeError("Stringified UUID is invalid");return t}(r)};var Xte=function(e,n){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,n)*e))},Wte=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return wte.includes(e.name)}(e)||bC(e)||function(e){var n;return Ete.includes(e.name)||Ste.includes((null===(n=e.$metadata)||void 0===n?void 0:n.httpStatusCode)||0)}(e))},iM=function(){function e(n,t){var r,i,o,a,u,d,l,f,_;this.maxAttemptsProvider=n,this.mode=mp.STANDARD,this.retryDecider=null!==(r=null==t?void 0:t.retryDecider)&&void 0!==r?r:Wte,this.delayDecider=null!==(i=null==t?void 0:t.delayDecider)&&void 0!==i?i:Xte,this.retryQuota=null!==(o=null==t?void 0:t.retryQuota)&&void 0!==o?o:(a=1,u=5,d=10,l=500,f=function(A){return"TimeoutError"===A.name?d:u},_=function(A){return f(A)<=l},Object.freeze({hasRetryTokens:_,retrieveRetryTokens:function(A){if(!_(A))throw new Error("No retry token available");var I=f(A);return l-=I,I},releaseRetryTokens:function(A){l+=null!=A?A:a,l=Math.min(l,500)}}))}return e.prototype.shouldRetry=function(n,t,r){return t<r&&this.retryDecider(n)&&this.retryQuota.hasRetryTokens(n)},e.prototype.getMaxAttempts=function(){return wt(this,void 0,void 0,function(){var n;return bt(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return n=r.sent(),[3,3];case 2:return r.sent(),n=3,[3,3];case 3:return[2,n]}})})},e.prototype.retry=function(n,t,r){return wt(this,void 0,void 0,function(){var i,o,a,u,d,l,f,_;return bt(this,function(m){switch(m.label){case 0:return o=0,a=0,[4,this.getMaxAttempts()];case 1:u=m.sent(),Ku.isInstance(d=t.request)&&(d.headers["amz-sdk-invocation-id"]=Bte()),l=function(){var E,A,I,se,me,Re;return bt(this,function(it){switch(it.label){case 0:return it.trys.push([0,4,,7]),Ku.isInstance(d)&&(d.headers["amz-sdk-request"]="attempt="+(o+1)+"; max="+u),(null==r?void 0:r.beforeRequest)?[4,r.beforeRequest()]:[3,2];case 1:it.sent(),it.label=2;case 2:return[4,n(t)];case 3:return E=it.sent(),A=E.response,I=E.output,(null==r?void 0:r.afterRequest)&&r.afterRequest(A),f.retryQuota.releaseRetryTokens(i),I.$metadata.attempts=o+1,I.$metadata.totalRetryDelay=a,[2,{value:{response:A,output:I}}];case 4:return se=it.sent(),me=Jte(se),o++,f.shouldRetry(me,o,u)?(i=f.retryQuota.retrieveRetryTokens(me),Re=f.delayDecider(bC(me)?500:100,o),a+=Re,[4,new Promise(function(gt){return setTimeout(gt,Re)})]):[3,6];case 5:return it.sent(),[2,"continue"];case 6:throw me.$metadata||(me.$metadata={}),me.$metadata.attempts=o,me.$metadata.totalRetryDelay=a,me;case 7:return[2]}})},f=this,m.label=2;case 2:return[5,l()];case 3:return"object"==typeof(_=m.sent())?[2,_.value]:[3,2];case 4:return[2]}})})},e}(),Jte=function(e){return e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):"string"==typeof e?new Error(e):new Error("AWS SDK error wrapper for "+e)},Zte=function(e){function n(t,r){var i=this,o=null!=r?r:{},a=o.rateLimiter,u=rr(o,["rateLimiter"]);return(i=e.call(this,t,u)||this).rateLimiter=null!=a?a:new Ite,i.mode=mp.ADAPTIVE,i}return Ut(n,e),n.prototype.retry=function(t,r){return wt(this,void 0,void 0,function(){var i=this;return bt(this,function(o){return[2,e.prototype.retry.call(this,t,r,{beforeRequest:function(){return wt(i,void 0,void 0,function(){return bt(this,function(a){return[2,this.rateLimiter.getSendToken()]})})},afterRequest:function(a){i.rateLimiter.updateClientSendingRate(a)}})]})})},n}(iM),Qte=function(e){return wt(void 0,void 0,void 0,function(){return bt(this,function(n){switch(n.label){case 0:return"string"==typeof e?[2,e]:[4,e()];case 1:return[2,n.sent()]}})})},ane={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0};(function(e){function n(t,r){void 0===r&&(r=!0);var i=e.call(this,t)||this;return i.tryNextLink=r,i}Ut(n,e),n.from=function(t,r){return void 0===r&&(r=!0),Object.defineProperty(t,"tryNextLink",{value:r,configurable:!1,enumerable:!1,writable:!1}),t}})(Error),function(e){function n(t,r){void 0===r&&(r=!0);var i=e.call(this,t)||this;return i.tryNextLink=r,i.name="CredentialsProviderError",i}Ut(n,e),n.from=function(t,r){return void 0===r&&(r=!0),Object.defineProperty(t,"tryNextLink",{value:r,configurable:!1,enumerable:!1,writable:!1}),t}}(Error);for(var sM={},xC={},r_=0;r_<256;r_++){var i_=r_.toString(16).toLowerCase();1===i_.length&&(i_="0"+i_),sM[r_]=i_,xC[i_]=r_}function Km(e){for(var n="",t=0;t<e.byteLength;t++)n+=sM[e[t]];return n}var uM="X-Amz-Date",lM="X-Amz-Signature",cM="X-Amz-Security-Token",dM="authorization",fM=uM.toLowerCase(),pne=[dM,fM,"date"],mne=lM.toLowerCase(),EC="x-amz-content-sha256",gne=cM.toLowerCase(),vne={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},_ne=/^proxy-/,yne=/^sec-/,SC="AWS4-HMAC-SHA256",bne="AWS4-HMAC-SHA256-PAYLOAD",hM="aws4_request",Xm={},iw=[],CC=function(e,n,t){return e+"/"+n+"/"+t+"/"+hM},pM=function(e,n,t){var r=new e(n);return r.update(t),r.digest()},mM=function(e,n,t){var r,i,o=e.headers,a={};try{for(var u=te(Object.keys(o).sort()),d=u.next();!d.done;d=u.next()){var l=d.value,f=l.toLowerCase();(f in vne||(null==n?void 0:n.has(f))||_ne.test(f)||yne.test(f))&&(!t||t&&!t.has(f))||(a[f]=o[l].trim().replace(/\s+/g," "))}}catch(_){r={error:_}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},gp=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,Cne)},Cne=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()},TC=function(e,n){var t=e.headers,r=e.body;return wt(void 0,void 0,void 0,function(){var i,o,a,u,d,l,f;return bt(this,function(_){switch(_.label){case 0:try{for(i=te(Object.keys(t)),o=i.next();!o.done;o=i.next())if((a=o.value).toLowerCase()===EC)return[2,t[a]]}catch(m){l={error:m}}finally{try{o&&!o.done&&(f=i.return)&&f.call(i)}finally{if(l)throw l.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||function(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)}(r)?((u=new n).update(r),d=Km,[4,u.digest()]):[3,3];case 2:return[2,d.apply(void 0,[_.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}})})},gM=function(e){var n=e.headers,t=e.query,r=rr(e,["headers","query"]);return K(K({},r),{headers:K({},n),query:t?Ane(t):void 0})},Ane=function(e){return Object.keys(e).reduce(function(n,t){var r,i=e[t];return K(K({},n),((r={})[t]=Array.isArray(i)?Rt([],ne(i)):i,r))},{})},vM=function(e){var n,t;e="function"==typeof e.clone?e.clone():gM(e);try{for(var r=te(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;pne.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(a){n={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(n)throw n.error}}return e},Nne=function(){function e(n){var t=n.applyChecksum,r=n.credentials,i=n.region,a=n.sha256,u=n.uriEscapePath,d=void 0===u||u;this.service=n.service,this.sha256=a,this.uriEscapePath=d,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=function(e){if("string"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e}(i),this.credentialProvider=function(e){if("object"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e}(r)}return e.prototype.presign=function(n,t){return void 0===t&&(t={}),wt(this,void 0,void 0,function(){var r,i,o,a,u,d,l,f,_,m,E,A,I,se,me,Re,it,gt,At,Vt,wn,yn,ar,Or;return bt(this,function(Dn){switch(Dn.label){case 0:return i=void 0===(r=t.signingDate)?new Date:r,a=void 0===(o=t.expiresIn)?3600:o,u=t.unsignableHeaders,d=t.unhoistableHeaders,l=t.signableHeaders,f=t.signingRegion,_=t.signingService,[4,this.credentialProvider()];case 1:return m=Dn.sent(),null==f?[3,2]:(A=f,[3,4]);case 2:return[4,this.regionProvider()];case 3:A=Dn.sent(),Dn.label=4;case 4:return E=A,I=ow(i),se=I.longDate,me=I.shortDate,a>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(Re=CC(me,E,null!=_?_:this.service),it=function(e,n){var t,r,i;void 0===n&&(n={});var o="function"==typeof e.clone?e.clone():gM(e),a=o.headers,u=o.query,d=void 0===u?{}:u;try{for(var l=te(Object.keys(a)),f=l.next();!f.done;f=l.next()){var _=f.value,m=_.toLowerCase();"x-amz-"===m.substr(0,6)&&!(null===(i=n.unhoistableHeaders)||void 0===i?void 0:i.has(m))&&(d[_]=a[_],delete a[_])}}catch(E){t={error:E}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return K(K({},e),{headers:a,query:d})}(vM(n),{unhoistableHeaders:d}),m.sessionToken&&(it.query[cM]=m.sessionToken),it.query["X-Amz-Algorithm"]=SC,it.query["X-Amz-Credential"]=m.accessKeyId+"/"+Re,it.query[uM]=se,it.query["X-Amz-Expires"]=a.toString(10),gt=mM(it,u,l),it.query["X-Amz-SignedHeaders"]=_M(gt),At=it.query,Vt=lM,wn=this.getSignature,yn=[se,Re,this.getSigningKey(m,E,me,_)],ar=this.createCanonicalRequest,Or=[it,gt],[4,TC(n,this.sha256)]);case 5:return[4,wn.apply(this,yn.concat([ar.apply(this,Or.concat([Dn.sent()]))]))];case 6:return At[Vt]=Dn.sent(),[2,it]}})})},e.prototype.sign=function(n,t){return wt(this,void 0,void 0,function(){return bt(this,function(r){return"string"==typeof n?[2,this.signString(n,t)]:n.headers&&n.payload?[2,this.signEvent(n,t)]:[2,this.signRequest(n,t)]})})},e.prototype.signEvent=function(n,t){var r=n.headers,i=n.payload,o=t.signingDate,a=void 0===o?new Date:o,u=t.priorSignature,d=t.signingRegion,l=t.signingService;return wt(this,void 0,void 0,function(){var f,_,m,A,I,se,me,Re,it,gt;return bt(this,function(At){switch(At.label){case 0:return null==d?[3,1]:(_=d,[3,3]);case 1:return[4,this.regionProvider()];case 2:_=At.sent(),At.label=3;case 3:return f=_,m=ow(a),A=m.longDate,I=CC(m.shortDate,f,null!=l?l:this.service),[4,TC({headers:{},body:i},this.sha256)];case 4:return se=At.sent(),(me=new this.sha256).update(r),it=Km,[4,me.digest()];case 5:return Re=it.apply(void 0,[At.sent()]),gt=[bne,A,I,u,Re,se].join("\n"),[2,this.signString(gt,{signingDate:a,signingRegion:f,signingService:l})]}})})},e.prototype.signString=function(n,t){var r=void 0===t?{}:t,i=r.signingDate,o=void 0===i?new Date:i,a=r.signingRegion,u=r.signingService;return wt(this,void 0,void 0,function(){var d,l,f,_,m,E,A,I;return bt(this,function(se){switch(se.label){case 0:return[4,this.credentialProvider()];case 1:return d=se.sent(),null==a?[3,2]:(f=a,[3,4]);case 2:return[4,this.regionProvider()];case 3:f=se.sent(),se.label=4;case 4:return l=f,_=ow(o).shortDate,A=(E=this.sha256).bind,[4,this.getSigningKey(d,l,_,u)];case 5:return(m=new(A.apply(E,[void 0,se.sent()]))).update(n),I=Km,[4,m.digest()];case 6:return[2,I.apply(void 0,[se.sent()])]}})})},e.prototype.signRequest=function(n,t){var r=void 0===t?{}:t,i=r.signingDate,o=void 0===i?new Date:i,a=r.signableHeaders,u=r.unsignableHeaders,d=r.signingRegion,l=r.signingService;return wt(this,void 0,void 0,function(){var f,_,m,E,A,I,se,me,Re,it,gt;return bt(this,function(At){switch(At.label){case 0:return[4,this.credentialProvider()];case 1:return f=At.sent(),null==d?[3,2]:(m=d,[3,4]);case 2:return[4,this.regionProvider()];case 3:m=At.sent(),At.label=4;case 4:return _=m,E=vM(n),A=ow(o),I=A.longDate,me=CC(se=A.shortDate,_,null!=l?l:this.service),E.headers[fM]=I,f.sessionToken&&(E.headers[gne]=f.sessionToken),[4,TC(E,this.sha256)];case 5:return Re=At.sent(),!function(e,n){var t,r;e=e.toLowerCase();try{for(var i=te(Object.keys(n)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return!1}(EC,E.headers)&&this.applyChecksum&&(E.headers[EC]=Re),it=mM(E,u,a),[4,this.getSignature(I,me,this.getSigningKey(f,_,se,l),this.createCanonicalRequest(E,it,Re))];case 6:return gt=At.sent(),E.headers[dM]=SC+" Credential="+f.accessKeyId+"/"+me+", SignedHeaders="+_M(it)+", Signature="+gt,[2,E]}})})},e.prototype.createCanonicalRequest=function(n,t,r){var i=Object.keys(t).sort();return n.method+"\n"+this.getCanonicalPath(n)+"\n"+function(e){var n,t,r=e.query,i=void 0===r?{}:r,o=[],a={},u=function(_){if(_.toLowerCase()===mne)return"continue";o.push(_);var m=i[_];"string"==typeof m?a[_]=gp(_)+"="+gp(m):Array.isArray(m)&&(a[_]=m.slice(0).sort().reduce(function(E,A){return E.concat([gp(_)+"="+gp(A)])},[]).join("&"))};try{for(var d=te(Object.keys(i).sort()),l=d.next();!l.done;l=d.next())u(l.value)}catch(_){n={error:_}}finally{try{l&&!l.done&&(t=d.return)&&t.call(d)}finally{if(n)throw n.error}}return o.map(function(_){return a[_]}).filter(function(_){return _}).join("&")}(n)+"\n"+i.map(function(o){return o+":"+t[o]}).join("\n")+"\n\n"+i.join(";")+"\n"+r},e.prototype.createStringToSign=function(n,t,r){return wt(this,void 0,void 0,function(){var i,o;return bt(this,function(a){switch(a.label){case 0:return(i=new this.sha256).update(r),[4,i.digest()];case 1:return o=a.sent(),[2,SC+"\n"+n+"\n"+t+"\n"+Km(o)]}})})},e.prototype.getCanonicalPath=function(n){var t=n.path;return this.uriEscapePath?"/"+encodeURIComponent(t.replace(/^\//,"")).replace(/%2F/g,"/"):t},e.prototype.getSignature=function(n,t,r,i){return wt(this,void 0,void 0,function(){var o,a,u,d,l;return bt(this,function(f){switch(f.label){case 0:return[4,this.createStringToSign(n,t,i)];case 1:return o=f.sent(),d=(u=this.sha256).bind,[4,r];case 2:return(a=new(d.apply(u,[void 0,f.sent()]))).update(o),l=Km,[4,a.digest()];case 3:return[2,l.apply(void 0,[f.sent()])]}})})},e.prototype.getSigningKey=function(n,t,r,i){return function(e,n,t,r,i){return wt(void 0,void 0,void 0,function(){var o,a,u,d,l,_,m,E;return bt(this,function(A){switch(A.label){case 0:return[4,pM(e,n.secretAccessKey,n.accessKeyId)];case 1:if(o=A.sent(),(a=t+":"+r+":"+i+":"+Km(o)+":"+n.sessionToken)in Xm)return[2,Xm[a]];for(iw.push(a);iw.length>50;)delete Xm[iw.shift()];u="AWS4"+n.secretAccessKey,A.label=2;case 2:A.trys.push([2,7,8,9]),d=te([t,r,i,hM]),l=d.next(),A.label=3;case 3:return l.done?[3,6]:[4,pM(e,u,l.value)];case 4:u=A.sent(),A.label=5;case 5:return l=d.next(),[3,3];case 6:return[3,9];case 7:return _=A.sent(),m={error:_},[3,9];case 8:try{l&&!l.done&&(E=d.return)&&E.call(d)}finally{if(m)throw m.error}return[7];case 9:return[2,Xm[a]=u]}})})}(this.sha256,n,r,t,i||this.service)},e}(),ow=function(e){var n=function(e){return function(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}(e).replace(/[\-:]/g,"");return{longDate:n,shortDate:n.substr(0,8)}},_M=function(e){return Object.keys(e).sort().join(";")},o_=function(e){if("object"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e},bM=function(e){return new Date(Date.now()+e)},wM=function(e,n){var t=Date.parse(e);return function(e,n){return Math.abs(bM(n).getTime()-e)>=3e5}(t,n)?t-Date.now():n},xM=function(e){var n,t,r;return yC.isInstance(e)?null!==(t=null===(n=e.headers)||void 0===n?void 0:n.date)&&void 0!==t?t:null===(r=e.headers)||void 0===r?void 0:r.Date:void 0},Fne={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},EM="user-agent",PC="x-amz-user-agent",Vne=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,IC=function(e){var n=ne(e,2),t=n[0],r=n[1],i=t.indexOf("/"),o=t.substring(0,i),a=t.substring(i+1);return"api"===o&&(a=a.toLowerCase()),[o,a,r].filter(function(u){return u&&u.length>0}).map(function(u){return null==u?void 0:u.replace(Vne,"_")}).join("/")},Hne={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},aw=function(){var e=[],n=[],t=new Set,a=function(f){return e.forEach(function(_){f.add(_.middleware,K({},_))}),n.forEach(function(_){f.addRelativeTo(_.middleware,K({},_))}),f},u=function(f){var _=[];return f.before.forEach(function(m){0===m.before.length&&0===m.after.length?_.push(m):_.push.apply(_,Rt([],ne(u(m))))}),_.push(f),f.after.reverse().forEach(function(m){0===m.before.length&&0===m.after.length?_.push(m):_.push.apply(_,Rt([],ne(u(m))))}),_},l={add:function(f,_){void 0===_&&(_={});var m=_.name,E=_.override,A=K({step:"initialize",priority:"normal",middleware:f},_);if(m){if(t.has(m)){if(!E)throw new Error("Duplicate middleware name '"+m+"'");var I=e.findIndex(function(me){return me.name===m}),se=e[I];if(se.step!==A.step||se.priority!==A.priority)throw new Error('"'+m+'" middleware with '+se.priority+" priority in "+se.step+" step cannot be overridden by same-name middleware with "+A.priority+" priority in "+A.step+" step.");e.splice(I,1)}t.add(m)}e.push(A)},addRelativeTo:function(f,_){var m=_.name,E=_.override,A=K({middleware:f},_);if(m){if(t.has(m)){if(!E)throw new Error("Duplicate middleware name '"+m+"'");var I=n.findIndex(function(me){return me.name===m}),se=n[I];if(se.toMiddleware!==A.toMiddleware||se.relation!==A.relation)throw new Error('"'+m+'" middleware '+se.relation+' "'+se.toMiddleware+'" middleware cannot be overridden by same-name middleware '+A.relation+' "'+A.toMiddleware+'" middleware.');n.splice(I,1)}t.add(m)}n.push(A)},clone:function(){return a(aw())},use:function(f){f.applyToStack(l)},remove:function(f){return"string"==typeof f?function(f){var _=!1,m=function(E){return!E.name||E.name!==f||(_=!0,t.delete(f),!1)};return e=e.filter(m),n=n.filter(m),_}(f):function(f){var _=!1,m=function(E){return E.middleware!==f||(_=!0,E.name&&t.delete(E.name),!1)};return e=e.filter(m),n=n.filter(m),_}(f)},removeByTag:function(f){var _=!1,m=function(E){var A=E.tags,I=E.name;return!A||!A.includes(f)||(I&&t.delete(I),_=!0,!1)};return e=e.filter(m),n=n.filter(m),_},concat:function(f){var _=a(aw());return _.use(f),_},applyToStack:a,resolve:function(f,_){var m,E;try{for(var A=te(function(){var f=[],_=[],m={};e.forEach(function(A){var I=K(K({},A),{before:[],after:[]});I.name&&(m[I.name]=I),f.push(I)}),n.forEach(function(A){var I=K(K({},A),{before:[],after:[]});I.name&&(m[I.name]=I),_.push(I)}),_.forEach(function(A){if(A.toMiddleware){var I=m[A.toMiddleware];if(void 0===I)throw new Error(A.toMiddleware+" is not found when adding "+(A.name||"anonymous")+" middleware "+A.relation+" "+A.toMiddleware);"after"===A.relation&&I.after.push(A),"before"===A.relation&&I.before.push(A)}});var E=function(f){return f.sort(function(_,m){return CM[m.step]-CM[_.step]||TM[m.priority||"normal"]-TM[_.priority||"normal"]})}(f).map(u).reduce(function(A,I){return A.push.apply(A,Rt([],ne(I))),A},[]);return E.map(function(A){return A.middleware})}().reverse()),I=A.next();!I.done;I=A.next())f=(0,I.value)(f,_)}catch(me){m={error:me}}finally{try{I&&!I.done&&(E=A.return)&&E.call(A)}finally{if(m)throw m.error}}return f}};return l},CM={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},TM={high:3,normal:2,low:1},Kne=function(){function e(n){this.middlewareStack=aw(),this.config=n}return e.prototype.send=function(n,t,r){var o="function"==typeof t?t:r,a=n.resolveMiddleware(this.middlewareStack,this.config,"function"!=typeof t?t:void 0);if(!o)return a(n).then(function(u){return u.output});a(n).then(function(u){return o(null,u.output)},function(u){return o(u)}).catch(function(){})},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),Wm=function e(){this.middlewareStack=aw()},Ul="***SensitiveInformation***",Xne=function(e){if(null!=e){if("boolean"==typeof e)return e;throw new TypeError("Expected boolean, got "+typeof e)}},sw=function(e){if(null!=e){if("number"==typeof e)return e;throw new TypeError("Expected number, got "+typeof e)}},Wne=Math.ceil(Math.pow(2,127)*(2-Math.pow(2,-23))),a_=function(e){return DC(e,32)},DC=function(e,n){var t=function(e){if(null!=e){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError("Expected integer, got "+typeof e)}}(e);if(void 0!==t&&Jne(t,n)!==t)throw new TypeError("Expected "+n+"-bit integer, got "+e);return t},Jne=function(e,n){switch(n){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},Xu=function(e,n){if(null==e)throw n?new TypeError("Expected a non-null value for "+n):new TypeError("Expected a non-null value");return e},vp=function(e){if(null!=e){if("object"==typeof e&&!Array.isArray(e))return e;throw new TypeError("Expected object, got "+typeof e)}},$r=function(e){if(null!=e){if("string"==typeof e)return e;throw new TypeError("Expected string, got "+typeof e)}},Yne=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Jm=function(e){var n=e.match(Yne);if(null===n||n[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},s_=function(e){return"string"==typeof e?AM(e):sw(e)},AM=function(e){switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error("Unable to parse float value: "+e)}},OC=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],nre=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),Zm=function(e){if(null!=e){if("string"!=typeof e)throw new TypeError("RFC-3339 date-times must be expressed as strings");var n=nre.exec(e);if(!n)throw new TypeError("Invalid RFC-3339 date-time value");var t=ne(n,8),o=t[2],a=t[3],u=t[4],d=t[5],l=t[6],f=t[7],_=function(e){return function(e){return DC(e,16)}("string"==typeof e?Jm(e):e)}(u_(t[1])),m=Hf(o,"month",1,12),E=Hf(a,"day",1,31);return uw(_,m,E,{hours:u,minutes:d,seconds:l,fractionalMilliseconds:f})}},uw=function(e,n,t,r){var i=n-1;return cre(e,i,t),new Date(Date.UTC(e,i,t,Hf(r.hours,"hour",0,23),Hf(r.minutes,"minute",0,59),Hf(r.seconds,"seconds",0,60),fre(r.fractionalMilliseconds)))},lre=[31,28,31,30,31,30,31,31,30,31,30,31],cre=function(e,n,t){var r=lre[n];if(1===n&&dre(e)&&(r=29),t>r)throw new TypeError("Invalid day for "+OC[n]+" in "+e+": "+t)},dre=function(e){return e%4==0&&(e%100!=0||e%400==0)},Hf=function(e,n,t,r){var i=function(e){return function(e){return DC(e,8)}("string"==typeof e?Jm(e):e)}(u_(e));if(i<t||i>r)throw new TypeError(n+" must be between "+t+" and "+r+", inclusive");return i},fre=function(e){return null==e?0:1e3*function(e){return function(e){var n=sw(e);if(void 0!==n&&!Number.isNaN(n)&&n!==1/0&&n!==-1/0&&Math.abs(n)>Wne)throw new TypeError("Expected 32-bit float, got "+e);return n}("string"==typeof e?Jm(e):e)}("0."+e)},u_=function(e){for(var n=0;n<e.length-1&&"0"===e.charAt(n);)n++;return 0===n?e:e.slice(n)},hre=function(e){switch(e){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};function _p(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})}var lw=function(){var e=Object.getPrototypeOf(this).constructor,n=Function.bind.apply(String,Rt([null],ne(arguments))),t=new n;return Object.setPrototypeOf(t,e.prototype),t};lw.prototype=Object.create(String.prototype,{constructor:{value:lw,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(lw,String),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}Ut(n,e),n.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},n.prototype.toJSON=function(){return e.prototype.toString.call(this)},n.fromObject=function(t){return t instanceof n?t:new n(t instanceof String||"string"==typeof t?t:JSON.stringify(t))}}(lw);var RM=function(e){if(e!=e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}};var mre=G(2518);function vre(e){return void 0===e&&(e=0),new Promise(function(n,t){e&&setTimeout(function(){var r=new Error("Request did not complete within "+e+" ms");r.name="TimeoutError",t(r)},e)})}for(var _re=function(){function e(n){var t=this;"function"==typeof n?this.configProvider=function(){return wt(t,void 0,void 0,function(){return bt(this,function(r){switch(r.label){case 0:return[4,n()];case 1:return[2,r.sent()||{}]}})})}:this.config=null!=n?n:{}}return e.prototype.destroy=function(){},e.prototype.handle=function(n,t){var i=(void 0===t?{}:t).abortSignal;return wt(this,void 0,void 0,function(){var o,a,u,d,l,f,_,m,A,I,se;return bt(this,function(me){switch(me.label){case 0:return!this.config&&this.configProvider?(o=this,[4,this.configProvider()]):[3,2];case 1:o.config=me.sent(),me.label=2;case 2:return a=this.config.requestTimeout,(null==i?void 0:i.aborted)?((u=new Error("Request aborted")).name="AbortError",[2,Promise.reject(u)]):(d=n.path,n.query&&(l=function gre(e){var n,t,r=[];try{for(var i=te(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var a=o.value,u=e[a];if(a=gp(a),Array.isArray(u))for(var d=0,l=u.length;d<l;d++)r.push(a+"="+gp(u[d]));else{var f=a;(u||"string"==typeof u)&&(f+="="+gp(u)),r.push(f)}}}catch(_){n={error:_}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(n)throw n.error}}return r.join("&")}(n.query),l&&(d+="?"+l)),m=n.protocol+"//"+n.hostname+((f=n.port)?":"+f:"")+d,A={body:"GET"===(_=n.method)||"HEAD"===_?void 0:n.body,headers:new Headers(n.headers),method:_},"undefined"!=typeof AbortController&&(A.signal=i),I=new Request(m,A),se=[fetch(I).then(function(Re){var it,gt,At=Re.headers,Vt={};try{for(var wn=te(At.entries()),yn=wn.next();!yn.done;yn=wn.next()){var ar=yn.value;Vt[ar[0]]=ar[1]}}catch(Dn){it={error:Dn}}finally{try{yn&&!yn.done&&(gt=wn.return)&&gt.call(wn)}finally{if(it)throw it.error}}return void 0!==Re.body?{response:new yC({headers:Vt,statusCode:Re.status,body:Re.body})}:Re.blob().then(function(Dn){return{response:new yC({headers:Vt,statusCode:Re.status,body:Dn})}})}),vre(a)],i&&se.push(new Promise(function(Re,it){i.onabort=function(){var gt=new Error("Request aborted");gt.name="AbortError",it(gt)}})),[2,Promise.race(se)])}})})},e}(),$f={},Ym=new Array(64),La=0,l_="A".charCodeAt(0),MC="Z".charCodeAt(0);La+l_<=MC;La++){var Kf=String.fromCharCode(La+l_);$f[Kf]=La,Ym[La]=Kf}for(La=0,l_="a".charCodeAt(0),MC="z".charCodeAt(0);La+l_<=MC;La++)Kf=String.fromCharCode(La+l_),$f[Kf]=c_=La+26,Ym[c_]=Kf;for(La=0;La<10;La++){var c_;$f[La.toString(10)]=La+52,Kf=La.toString(10),$f[Kf]=c_=La+52,Ym[c_]=Kf}function DM(e){var n=e.length/4*3;"=="===e.substr(-2)?n-=2:"="===e.substr(-1)&&n--;for(var t=new ArrayBuffer(n),r=new DataView(t),i=0;i<e.length;i+=4){for(var o=0,a=0,u=i,d=i+3;u<=d;u++)if("="!==e[u]){if(!(e[u]in $f))throw new TypeError("Invalid character "+e[u]+" in base64 string.");o|=$f[e[u]]<<6*(d-u),a+=6}else o>>=6;var l=i/4*3;o>>=a%8;for(var f=Math.floor(a/8),_=0;_<f;_++){var m=8*(f-_-1);r.setUint8(l+_,(o&255<<m)>>m)}}return new Uint8Array(t)}function bre(e){for(var n="",t=0;t<e.length;t+=3){for(var r=0,i=0,o=t,a=Math.min(t+3,e.length);o<a;o++)r|=e[o]<<8*(a-o-1),i+=8;var u=Math.ceil(i/6);r<<=6*u-i;for(var d=1;d<=u;d++){var l=6*(u-d);n+=Ym[(r&63<<l)>>l]}n+="==".slice(0,4-u)}return n}$f["+"]=62,Ym[62]="+",$f["/"]=63,Ym[63]="/";var wre=function(e){return"function"==typeof Blob&&e instanceof Blob?function xre(e){return wt(this,void 0,void 0,function(){var n,t;return bt(this,function(r){switch(r.label){case 0:return[4,Sre(e)];case 1:return n=r.sent(),t=DM(n),[2,new Uint8Array(t)]}})})}(e):function Ere(e){return wt(this,void 0,void 0,function(){var n,t,r,i,o,a,u;return bt(this,function(d){switch(d.label){case 0:n=new Uint8Array(0),t=e.getReader(),r=!1,d.label=1;case 1:return r?[3,3]:[4,t.read()];case 2:return i=d.sent(),o=i.done,(a=i.value)&&(u=n,(n=new Uint8Array(u.length+a.length)).set(u),n.set(a,u.length)),r=o,[3,1];case 3:return[2,n]}})})}(e)};function Sre(e){return new Promise(function(n,t){var r=new FileReader;r.onloadend=function(){var i;if(2!==r.readyState)return t(new Error("Reader aborted too early"));var o=null!==(i=r.result)&&void 0!==i?i:"",a=o.indexOf(",");n(o.substring(a>-1?a+1:o.length))},r.onabort=function(){return t(new Error("Read aborted"))},r.onerror=function(){return t(r.error)},r.readAsDataURL(e)})}var Cre=function(e){return function(){return Promise.reject(e)}};function Tre(e){if("string"==typeof e){for(var n=e.length,t=n-1;t>=0;t--){var r=e.charCodeAt(t);r>127&&r<=2047?n++:r>2047&&r<=65535&&(n+=2)}return n}return"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:void 0}var Pre=function(e){var n=e.serviceId,t=e.clientVersion;return function(){return wt(void 0,void 0,void 0,function(){var r,i,o,a,u,d,l,f,_;return bt(this,function(m){return r="undefined"!=typeof window&&(null===(o=null==window?void 0:window.navigator)||void 0===o?void 0:o.userAgent)?nS().parse(window.navigator.userAgent):void 0,i=[["aws-sdk-js",t],["os/"+((null===(a=null==r?void 0:r.os)||void 0===a?void 0:a.name)||"other"),null===(u=null==r?void 0:r.os)||void 0===u?void 0:u.version],["lang/js"],["md/browser",(null!==(l=null===(d=null==r?void 0:r.browser)||void 0===d?void 0:d.name)&&void 0!==l?l:"unknown")+"_"+(null!==(_=null===(f=null==r?void 0:r.browser)||void 0===f?void 0:f.version)&&void 0!==_?_:"unknown")]],n&&i.push(["api/"+n,t]),[2,i]})})}},OM=G(4456),Are=function(e){var u,n=new URL(e),t=n.hostname,r=n.pathname,i=n.port,o=n.protocol,a=n.search;return a&&(u=function Ire(e){var n,t,r={};if(e=e.replace(/^\?/,""))try{for(var i=te(e.split("&")),o=i.next();!o.done;o=i.next()){var u=ne(o.value.split("="),2),d=u[0],l=u[1],f=void 0===l?null:l;d=decodeURIComponent(d),f&&(f=decodeURIComponent(f)),d in r?Array.isArray(r[d])?r[d].push(f):r[d]=[r[d],f]:r[d]=f}}catch(_){n={error:_}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(n)throw n.error}}return r}(a)),{hostname:t,port:i?parseInt(i):void 0,protocol:o,path:r,query:u}},Rre={},Dre={aws:{regions:["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-southeast-1","ap-southeast-2","ap-southeast-3","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"],regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.amazonaws.com",tags:[]},{hostname:"geo-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"geo-fips.{region}.api.aws",tags:["dualstack","fips"]},{hostname:"geo.{region}.api.aws",tags:["dualstack"]}]},"aws-cn":{regions:["cn-north-1","cn-northwest-1"],regionRegex:"^cn\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.amazonaws.com.cn",tags:[]},{hostname:"geo-fips.{region}.amazonaws.com.cn",tags:["fips"]},{hostname:"geo-fips.{region}.api.amazonwebservices.com.cn",tags:["dualstack","fips"]},{hostname:"geo.{region}.api.amazonwebservices.com.cn",tags:["dualstack"]}]},"aws-iso":{regions:["us-iso-east-1","us-iso-west-1"],regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.c2s.ic.gov",tags:[]},{hostname:"geo-fips.{region}.c2s.ic.gov",tags:["fips"]}]},"aws-iso-b":{regions:["us-isob-east-1"],regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.sc2s.sgov.gov",tags:[]},{hostname:"geo-fips.{region}.sc2s.sgov.gov",tags:["fips"]}]},"aws-us-gov":{regions:["us-gov-east-1","us-gov-west-1"],regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.amazonaws.com",tags:[]},{hostname:"geo-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"geo-fips.{region}.api.aws",tags:["dualstack","fips"]},{hostname:"geo.{region}.api.aws",tags:["dualstack"]}]}},Ore=function(e,n){return wt(void 0,void 0,void 0,function(){return bt(this,function(t){return[2,cte(e,K(K({},n),{signingService:"geo",regionHash:Rre,partitionHash:Dre}))]})})};(function(e){function n(t,r){void 0===r&&(r=!0);var i=e.call(this,t)||this;return i.tryNextLink=r,i}Ut(n,e),n.from=function(t,r){return void 0===r&&(r=!0),Object.defineProperty(t,"tryNextLink",{value:r,configurable:!1,enumerable:!1,writable:!1}),t}})(Error),function(e){function n(t,r){void 0===r&&(r=!0);var i=e.call(this,t)||this;return i.tryNextLink=r,i.name="CredentialsProviderError",i}Ut(n,e),n.from=function(t,r){return void 0===r&&(r=!0),Object.defineProperty(t,"tryNextLink",{value:r,configurable:!1,enumerable:!1,writable:!1}),t}}(Error);var Nre=["in-region","cross-region","mobile","standard","legacy"],Bre=function(){var e,n,t="undefined"!=typeof window&&(null===(e=null==window?void 0:window.navigator)||void 0===e?void 0:e.userAgent)?nS().parse(window.navigator.userAgent):void 0,r=null===(n=null==t?void 0:t.platform)||void 0===n?void 0:n.type;return"tablet"===r||"mobile"===r},zre=function(e){var n,t,r,i,o,a,u,d,l,f,_,m,E,A,I,se=function(e){var t=(void 0===e?{}:e).defaultsMode;return function(e,n,t){var r,i,o,a=function(){return wt(void 0,void 0,void 0,function(){return bt(this,function(d){switch(d.label){case 0:i||(i=e()),d.label=1;case 1:return d.trys.push([1,,3,4]),[4,i];case 2:return r=d.sent(),o=!0,[3,4];case 3:return i=void 0,[7];case 4:return[2,r]}})})};return function(){return wt(void 0,void 0,void 0,function(){return bt(this,function(d){switch(d.label){case 0:return o?[3,2]:[4,a()];case 1:r=d.sent(),d.label=2;case 2:return[2,r]}})})}}(function(){return wt(void 0,void 0,void 0,function(){var r,i;return bt(this,function(o){switch(o.label){case 0:return"function"!=typeof t?[3,2]:[4,t()];case 1:return i=o.sent(),[3,3];case 2:i=t,o.label=3;case 3:switch(null==(r=i)?void 0:r.toLowerCase()){case"auto":return[2,Promise.resolve(Bre()?"mobile":"standard")];case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return[2,Promise.resolve(null==r?void 0:r.toLocaleLowerCase())];case void 0:return[2,Promise.resolve("legacy")];default:throw new Error('Invalid parameter for "defaultsMode", expect '+Nre.join(", ")+", got "+r)}return[2]}})})})}(e),me=function(){return se().then(hre)},Re=function(e){var n,t,r,i,o;return{apiVersion:"2020-11-19",disableHostPrefix:null!==(n=null==e?void 0:e.disableHostPrefix)&&void 0!==n&&n,logger:null!==(t=null==e?void 0:e.logger)&&void 0!==t?t:{},regionInfoProvider:null!==(r=null==e?void 0:e.regionInfoProvider)&&void 0!==r?r:Ore,serviceId:null!==(i=null==e?void 0:e.serviceId)&&void 0!==i?i:"Location",urlParser:null!==(o=null==e?void 0:e.urlParser)&&void 0!==o?o:Are}}(e);return K(K(K({},Re),e),{runtime:"browser",defaultsMode:se,base64Decoder:null!==(n=null==e?void 0:e.base64Decoder)&&void 0!==n?n:DM,base64Encoder:null!==(t=null==e?void 0:e.base64Encoder)&&void 0!==t?t:bre,bodyLengthChecker:null!==(r=null==e?void 0:e.bodyLengthChecker)&&void 0!==r?r:Tre,credentialDefaultProvider:null!==(i=null==e?void 0:e.credentialDefaultProvider)&&void 0!==i?i:function(it){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:null!==(o=null==e?void 0:e.defaultUserAgentProvider)&&void 0!==o?o:Pre({serviceId:Re.serviceId,clientVersion:"3.48.0"}),maxAttempts:null!==(a=null==e?void 0:e.maxAttempts)&&void 0!==a?a:3,region:null!==(u=null==e?void 0:e.region)&&void 0!==u?u:Cre("Region is missing"),requestHandler:null!==(d=null==e?void 0:e.requestHandler)&&void 0!==d?d:new _re(me),retryMode:null!==(l=null==e?void 0:e.retryMode)&&void 0!==l?l:function(){return wt(void 0,void 0,void 0,function(){return bt(this,function(it){switch(it.label){case 0:return[4,me()];case 1:return[2,it.sent().retryMode||rM]}})})},sha256:null!==(f=null==e?void 0:e.sha256)&&void 0!==f?f:mre.Sha256,streamCollector:null!==(_=null==e?void 0:e.streamCollector)&&void 0!==_?_:wre,useDualstackEndpoint:null!==(m=null==e?void 0:e.useDualstackEndpoint)&&void 0!==m?m:function(){return Promise.resolve(!1)},useFipsEndpoint:null!==(E=null==e?void 0:e.useFipsEndpoint)&&void 0!==E?E:function(){return Promise.resolve(!1)},utf8Decoder:null!==(A=null==e?void 0:e.utf8Decoder)&&void 0!==A?A:OM.fromUtf8,utf8Encoder:null!==(I=null==e?void 0:e.utf8Encoder)&&void 0!==I?I:OM.toUtf8})},eg=function(e){function n(t){var r=this,o=function(e){var n=e.region,t=e.useFipsEndpoint;if(!n)throw new Error("Region is missing");return K(K({},e),{region:function(){return wt(void 0,void 0,void 0,function(){var r;return bt(this,function(i){switch(i.label){case 0:return"string"==typeof n?[2,eM(n)]:[4,n()];case 1:return r=i.sent(),[2,eM(r)]}})})},useFipsEndpoint:function(){return wt(void 0,void 0,void 0,function(){var i;return bt(this,function(o){switch(o.label){case 0:return"string"!=typeof n?[3,1]:(i=n,[3,3]);case 1:return[4,n()];case 2:i=o.sent(),o.label=3;case 3:return Qk(i)?[2,!0]:[2,"boolean"==typeof t?Promise.resolve(t):t()]}})})}})}(zre(t)),u=function(e){var n=function(e){if(void 0===e&&(e=3),"number"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e}(e.maxAttempts);return K(K({},e),{maxAttempts:n,retryStrategy:function(){return wt(void 0,void 0,void 0,function(){return bt(this,function(r){switch(r.label){case 0:return e.retryStrategy?[2,e.retryStrategy]:[4,Qte(e.retryMode)];case 1:return r.sent()===mp.ADAPTIVE?[2,new Zte(n)]:[2,new iM(n)]}})})}})}(function(e){var n,t=function(e){if("boolean"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e}(e.useDualstackEndpoint),r=e.endpoint,i=e.useFipsEndpoint;return K(K({},e),{tls:null===(n=e.tls)||void 0===n||n,endpoint:r?nte(K(K({},e),{endpoint:r})):function(){return function(e){return wt(void 0,void 0,void 0,function(){var n,t,r,o,a,u,d;return bt(this,function(l){switch(l.label){case 0:return t=void 0===(n=e.tls)||n,[4,e.region()];case 1:if(r=l.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");return[4,e.useDualstackEndpoint()];case 2:return o=l.sent(),[4,e.useFipsEndpoint()];case 3:return a=l.sent(),[4,e.regionInfoProvider(r,{useDualstackEndpoint:o,useFipsEndpoint:a})];case 4:if(!(u=(null!==(d=l.sent())&&void 0!==d?d:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((t?"https:":"http:")+"//"+u)]}})})}(K(K({},e),{useDualstackEndpoint:t,useFipsEndpoint:i}))},isCustomEndpoint:!!r,useDualstackEndpoint:t})}(o)),l=function(e){var u,n=e.credentials?function(e){return"function"==typeof e?function(e,n,t){var r,i,o,a=function(){return wt(void 0,void 0,void 0,function(){return bt(this,function(d){switch(d.label){case 0:i||(i=e()),d.label=1;case 1:return d.trys.push([1,,3,4]),[4,i];case 2:return r=d.sent(),o=!0,[3,4];case 3:return i=void 0,[7];case 4:return[2,r]}})})};if(void 0===n)return function(){return wt(void 0,void 0,void 0,function(){return bt(this,function(d){switch(d.label){case 0:return o?[3,2]:[4,a()];case 1:r=d.sent(),d.label=2;case 2:return[2,r]}})})};var u=!1;return function(){return wt(void 0,void 0,void 0,function(){return bt(this,function(d){switch(d.label){case 0:return o?[3,2]:[4,a()];case 1:r=d.sent(),d.label=2;case 2:return u?[2,r]:t&&!t(r)?(u=!0,[2,r]):n(r)?[4,a()]:[3,4];case 3:return d.sent(),[2,r];case 4:return[2,r]}})})}}(e,function(n){return void 0!==n.expiration&&n.expiration.getTime()-Date.now()<3e5},function(n){return void 0!==n.expiration}):o_(e)}(e.credentials):e.credentialDefaultProvider(e),t=e.signingEscapePath,r=void 0===t||t,i=e.systemClockOffset,o=void 0===i?e.systemClockOffset||0:i,a=e.sha256;return u=e.signer?o_(e.signer):function(){return o_(e.region)().then(function(d){return wt(void 0,void 0,void 0,function(){var l,f,_,m;return bt(this,function(E){switch(E.label){case 0:return f=(l=e).regionInfoProvider,_=[d],m={},[4,e.useFipsEndpoint()];case 1:return m.useFipsEndpoint=E.sent(),[4,e.useDualstackEndpoint()];case 2:return[4,f.apply(l,_.concat([(m.useDualstackEndpoint=E.sent(),m)]))];case 3:return[2,[E.sent()||{},d]]}})})}).then(function(d){var l=ne(d,2),f=l[0],E=f.signingService;e.signingRegion=e.signingRegion||f.signingRegion||l[1],e.signingName=e.signingName||E||e.serviceId;var A=K(K({},e),{credentials:n,region:e.signingRegion,service:e.signingName,sha256:a,uriEscapePath:r});return new(e.signerConstructor||Nne)(A)})},K(K({},e),{systemClockOffset:o,signingEscapePath:r,credentials:n,signer:u})}(u),f=function qne(e){return K(K({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}(l);return(r=e.call(this,f)||this).config=f,r.middlewareStack.use(function(e){return{applyToStack:function(n){n.add(function(e){return function(n,t){return function(r){return wt(void 0,void 0,void 0,function(){var i;return bt(this,function(o){switch(o.label){case 0:return[4,e.retryStrategy()];case 1:return(null==(i=o.sent())?void 0:i.mode)&&(t.userAgent=Rt(Rt([],ne(t.userAgent||[])),[["cfg/retry-mode",i.mode]])),[2,i.retry(n,r)]}})})}}}(e),ane)}}}(r.config)),r.middlewareStack.use(function(e){return{applyToStack:function(n){n.add(function fte(e){var n=this;return function(t){return function(r){return wt(n,void 0,void 0,function(){var i,o,a,u,d;return bt(this,function(l){return Ku.isInstance(i=r.request)&&(a=i.headers,(o=i.body)&&-1===Object.keys(a).map(function(f){return f.toLowerCase()}).indexOf(nM)&&void 0!==(u=e(o))&&(i.headers=K(K({},i.headers),((d={})[nM]=String(u),d)))),[2,t(K(K({},r),{request:i}))]})})}}}(e.bodyLengthChecker),hte)}}}(r.config)),r.middlewareStack.use(function(e){return{applyToStack:function(n){n.add(function(e){return function(n){return function(t){return wt(void 0,void 0,void 0,function(){var r,i;return bt(this,function(a){return Ku.isInstance(t.request)?(r=t.request,(void 0===(i=(e.requestHandler.metadata||{}).handlerProtocol)?"":i).indexOf("h2")>=0&&!r.headers[":authority"]?(delete r.headers.host,r.headers[":authority"]=""):r.headers.host||(r.headers.host=r.hostname),[2,n(t)]):[2,n(t)]})})}}}(e),gte)}}}(r.config)),r.middlewareStack.use({applyToStack:function(n){n.add(function(e,n){return function(t){return wt(void 0,void 0,void 0,function(){var r,i,o,a,u,d,l,f,_;return bt(this,function(m){switch(m.label){case 0:return r=n.clientName,i=n.commandName,o=n.inputFilterSensitiveLog,a=n.logger,u=n.outputFilterSensitiveLog,[4,e(t)];case 1:return d=m.sent(),a?("function"==typeof a.info&&(f=(l=d.output).$metadata,_=rr(l,["$metadata"]),a.info({clientName:r,commandName:i,input:o(t.input),output:u(_),metadata:f})),[2,d]):[2,d]}})})}},yte)}}),r.middlewareStack.use(function(e){return{applyToStack:function(n){n.addRelativeTo(function(e){return function(n,t){return function(r){return wt(this,void 0,void 0,function(){var i,o,a,u,d,l;return bt(this,function(f){switch(f.label){case 0:return Ku.isInstance(r.request)?[4,e.signer()]:[2,n(r)];case 1:return i=f.sent(),a=n,u=[K({},r)],l={},[4,i.sign(r.request,{signingDate:bM(e.systemClockOffset),signingRegion:t.signing_region,signingService:t.signing_service})];case 2:return[4,a.apply(void 0,[K.apply(void 0,u.concat([(l.request=f.sent(),l)]))]).catch(function(_){var m,E=null!==(m=_.ServerTime)&&void 0!==m?m:xM(_.$response);throw E&&(e.systemClockOffset=wM(E,e.systemClockOffset)),_})];case 3:return o=f.sent(),(d=xM(o.response))&&(e.systemClockOffset=wM(d,e.systemClockOffset)),[2,o]}})})}}}(e),Fne)}}}(r.config)),r.middlewareStack.use(function(e){return{applyToStack:function(n){n.add(function(e){return function(n,t){return function(r){return wt(void 0,void 0,void 0,function(){var i,o,a,u,d,l,f,_,m;return bt(this,function(E){switch(E.label){case 0:return Ku.isInstance(i=r.request)?(o=i.headers,a=(null===(_=null==t?void 0:t.userAgent)||void 0===_?void 0:_.map(IC))||[],[4,e.defaultUserAgentProvider()]):[2,n(r)];case 1:return u=E.sent().map(IC),d=(null===(m=null==e?void 0:e.customUserAgent)||void 0===m?void 0:m.map(IC))||[],l=Rt(Rt(Rt([],ne(u)),ne(a)),ne(d)).join(" "),f=Rt(Rt([],ne(u.filter(function(A){return A.startsWith("aws-sdk-")}))),ne(d)).join(" "),"browser"!==e.runtime?(f&&(o[PC]=o[PC]?o[EM]+" "+f:f),o[EM]=l):o[PC]=l,[2,n(K(K({},r),{request:i}))]}})})}}}(e),Hne)}}}(r.config)),r}return Ut(n,e),n.prototype.destroy=function(){e.prototype.destroy.call(this)},n}(Kne),Ure={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},qre={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function tg(e,n,t){return{applyToStack:function(r){r.add(function(e,n){return function(t,r){return function(i){return wt(void 0,void 0,void 0,function(){var o,a,u;return bt(this,function(d){switch(d.label){case 0:return[4,t(i)];case 1:o=d.sent().response,d.label=2;case 2:return d.trys.push([2,4,,5]),[4,n(o,e)];case 3:return a=d.sent(),[2,{response:o,output:a}];case 4:throw u=d.sent(),Object.assign(u,{$response:o});case 5:return[2]}})})}}}(e,t),Ure),r.add(function(e,n){return function(t,r){return function(i){return wt(void 0,void 0,void 0,function(){var o;return bt(this,function(a){switch(a.label){case 0:return[4,n(i.input,e)];case 1:return o=a.sent(),[2,t(K(K({},i),{request:o}))]}})})}}}(e,n),qre)}}}var cw=(()=>(function(e){e.filterSensitiveLog=function(n){return K({},n)}}(cw||(cw={})),cw))(),dw=(()=>(function(e){e.filterSensitiveLog=function(n){return K({},n)}}(dw||(dw={})),dw))(),ng=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K({},n),n.Polygon&&{Polygon:n.Polygon.map(function(t){return Ul})})}}(ng||(ng={})),ng))(),fw=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K({},n),n.Geometry&&{Geometry:ng.filterSensitiveLog(n.Geometry)})}}(fw||(fw={})),fw))(),hw=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K({},n),n.Entries&&{Entries:n.Entries.map(function(t){return fw.filterSensitiveLog(t)})})}}(hw||(hw={})),hw))(),pw=(()=>(function(e){e.filterSensitiveLog=function(n){return K({},n)}}(pw||(pw={})),pw))(),mw=(()=>(function(e){e.filterSensitiveLog=function(n){return K({},n)}}(mw||(mw={})),mw))(),gw=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K({},n),n.Geometry&&{Geometry:ng.filterSensitiveLog(n.Geometry)})}}(gw||(gw={})),gw))(),vw=(()=>(function(e){e.filterSensitiveLog=function(n){return K({},n)}}(vw||(vw={})),vw))(),_w=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K({},n),n.Geometry&&{Geometry:ng.filterSensitiveLog(n.Geometry)})}}(_w||(_w={})),_w))(),yw=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K({},n),n.Entries&&{Entries:n.Entries.map(function(t){return _w.filterSensitiveLog(t)})})}}(yw||(yw={})),yw))(),bw=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K({},n),n.Position&&{Position:Ul})}}(bw||(bw={})),bw))(),ww=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K({},n),n.Point&&{Point:Ul})}}(ww||(ww={})),ww))(),f_=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K({},n),n.Geometry&&{Geometry:ww.filterSensitiveLog(n.Geometry)})}}(f_||(f_={})),f_))(),xw=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K({},n),n.Place&&{Place:f_.filterSensitiveLog(n.Place)})}}(xw||(xw={})),xw))(),Ew=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K({},n),n.Position&&{Position:Ul})}}(Ew||(Ew={})),Ew))(),Sw=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K(K({},n),n.Summary&&{Summary:Ew.filterSensitiveLog(n.Summary)}),n.Results&&{Results:n.Results.map(function(t){return xw.filterSensitiveLog(t)})})}}(Sw||(Sw={})),Sw))(),Cw=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K(K(K({},n),n.Text&&{Text:Ul}),n.BiasPosition&&{BiasPosition:Ul}),n.FilterBBox&&{FilterBBox:Ul})}}(Cw||(Cw={})),Cw))(),Tw=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K({},n),n.Place&&{Place:f_.filterSensitiveLog(n.Place)})}}(Tw||(Tw={})),Tw))(),Pw=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K(K(K(K({},n),n.Text&&{Text:Ul}),n.BiasPosition&&{BiasPosition:Ul}),n.FilterBBox&&{FilterBBox:Ul}),n.ResultBBox&&{ResultBBox:Ul})}}(Pw||(Pw={})),Pw))(),Iw=(()=>(function(e){e.filterSensitiveLog=function(n){return K(K(K({},n),n.Summary&&{Summary:Pw.filterSensitiveLog(n.Summary)}),n.Results&&{Results:n.Results.map(function(t){return Tw.filterSensitiveLog(t)})})}}(Iw||(Iw={})),Iw))(),Yre=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,u,d,l,f,_,m,E,A;return bt(this,function(I){switch(I.label){case 0:return r=[K({},e)],A={},[4,Wt(e.body,n)];case 1:switch(t=K.apply(void 0,r.concat([(A.body=I.sent(),A)])),o="UnknownError",o=qn(e,t.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return u=[{}],[4,zn(t,n)];case 3:return i=K.apply(void 0,[K.apply(void 0,u.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 4:return d=[{}],[4,jn(t,n)];case 5:return i=K.apply(void 0,[K.apply(void 0,d.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 6:return l=[{}],[4,xr(t,n)];case 7:return i=K.apply(void 0,[K.apply(void 0,l.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 8:return f=[{}],[4,Fn(t,n)];case 9:return i=K.apply(void 0,[K.apply(void 0,f.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 10:return _=[{}],[4,Un(t,n)];case 11:return i=K.apply(void 0,[K.apply(void 0,_.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 12:o=(m=t.body).code||m.Code||o,i=K(K({},m),{name:""+o,message:m.message||m.Message||o,$fault:"client",$metadata:ye(e)}),I.label=13;case 13:return i.message=E=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(E),i))]}})})},nie=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,u,d,l,f,_,m,E,A;return bt(this,function(I){switch(I.label){case 0:return r=[K({},e)],A={},[4,Wt(e.body,n)];case 1:switch(t=K.apply(void 0,r.concat([(A.body=I.sent(),A)])),o="UnknownError",o=qn(e,t.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return u=[{}],[4,zn(t,n)];case 3:return i=K.apply(void 0,[K.apply(void 0,u.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 4:return d=[{}],[4,jn(t,n)];case 5:return i=K.apply(void 0,[K.apply(void 0,d.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 6:return l=[{}],[4,xr(t,n)];case 7:return i=K.apply(void 0,[K.apply(void 0,l.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 8:return f=[{}],[4,Fn(t,n)];case 9:return i=K.apply(void 0,[K.apply(void 0,f.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 10:return _=[{}],[4,Un(t,n)];case 11:return i=K.apply(void 0,[K.apply(void 0,_.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 12:o=(m=t.body).code||m.Code||o,i=K(K({},m),{name:""+o,message:m.message||m.Message||o,$fault:"client",$metadata:ye(e)}),I.label=13;case 13:return i.message=E=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(E),i))]}})})},Cie=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,u,d,l,f,_,m,E,A;return bt(this,function(I){switch(I.label){case 0:return r=[K({},e)],A={},[4,Wt(e.body,n)];case 1:switch(t=K.apply(void 0,r.concat([(A.body=I.sent(),A)])),o="UnknownError",o=qn(e,t.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return u=[{}],[4,zn(t,n)];case 3:return i=K.apply(void 0,[K.apply(void 0,u.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 4:return d=[{}],[4,jn(t,n)];case 5:return i=K.apply(void 0,[K.apply(void 0,d.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 6:return l=[{}],[4,xr(t,n)];case 7:return i=K.apply(void 0,[K.apply(void 0,l.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 8:return f=[{}],[4,Fn(t,n)];case 9:return i=K.apply(void 0,[K.apply(void 0,f.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 10:return _=[{}],[4,Un(t,n)];case 11:return i=K.apply(void 0,[K.apply(void 0,_.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 12:o=(m=t.body).code||m.Code||o,i=K(K({},m),{name:""+o,message:m.message||m.Message||o,$fault:"client",$metadata:ye(e)}),I.label=13;case 13:return i.message=E=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(E),i))]}})})},kie=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,u,d,l,f,_,m,E,A;return bt(this,function(I){switch(I.label){case 0:return r=[K({},e)],A={},[4,Wt(e.body,n)];case 1:switch(t=K.apply(void 0,r.concat([(A.body=I.sent(),A)])),o="UnknownError",o=qn(e,t.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return u=[{}],[4,zn(t,n)];case 3:return i=K.apply(void 0,[K.apply(void 0,u.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 4:return d=[{}],[4,jn(t,n)];case 5:return i=K.apply(void 0,[K.apply(void 0,d.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 6:return l=[{}],[4,xr(t,n)];case 7:return i=K.apply(void 0,[K.apply(void 0,l.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 8:return f=[{}],[4,Fn(t,n)];case 9:return i=K.apply(void 0,[K.apply(void 0,f.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 10:return _=[{}],[4,Un(t,n)];case 11:return i=K.apply(void 0,[K.apply(void 0,_.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 12:o=(m=t.body).code||m.Code||o,i=K(K({},m),{name:""+o,message:m.message||m.Message||o,$fault:"client",$metadata:ye(e)}),I.label=13;case 13:return i.message=E=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(E),i))]}})})},qie=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,u,d,l,f,_,m,E,A;return bt(this,function(I){switch(I.label){case 0:return r=[K({},e)],A={},[4,Wt(e.body,n)];case 1:switch(t=K.apply(void 0,r.concat([(A.body=I.sent(),A)])),o="UnknownError",o=qn(e,t.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return u=[{}],[4,zn(t,n)];case 3:return i=K.apply(void 0,[K.apply(void 0,u.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 4:return d=[{}],[4,jn(t,n)];case 5:return i=K.apply(void 0,[K.apply(void 0,d.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 6:return l=[{}],[4,xr(t,n)];case 7:return i=K.apply(void 0,[K.apply(void 0,l.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 8:return f=[{}],[4,Fn(t,n)];case 9:return i=K.apply(void 0,[K.apply(void 0,f.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 10:return _=[{}],[4,Un(t,n)];case 11:return i=K.apply(void 0,[K.apply(void 0,_.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 12:o=(m=t.body).code||m.Code||o,i=K(K({},m),{name:""+o,message:m.message||m.Message||o,$fault:"client",$metadata:ye(e)}),I.label=13;case 13:return i.message=E=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(E),i))]}})})},Hie=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o,u,d,l,f,_,m,E,A;return bt(this,function(I){switch(I.label){case 0:return r=[K({},e)],A={},[4,Wt(e.body,n)];case 1:switch(t=K.apply(void 0,r.concat([(A.body=I.sent(),A)])),o="UnknownError",o=qn(e,t.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return u=[{}],[4,zn(t,n)];case 3:return i=K.apply(void 0,[K.apply(void 0,u.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 4:return d=[{}],[4,jn(t,n)];case 5:return i=K.apply(void 0,[K.apply(void 0,d.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 6:return l=[{}],[4,xr(t,n)];case 7:return i=K.apply(void 0,[K.apply(void 0,l.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 8:return f=[{}],[4,Fn(t,n)];case 9:return i=K.apply(void 0,[K.apply(void 0,f.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 10:return _=[{}],[4,Un(t,n)];case 11:return i=K.apply(void 0,[K.apply(void 0,_.concat([I.sent()])),{name:o,$metadata:ye(e)}]),[3,13];case 12:o=(m=t.body).code||m.Code||o,i=K(K({},m),{name:""+o,message:m.message||m.Message||o,$fault:"client",$metadata:ye(e)}),I.label=13;case 13:return i.message=E=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(E),i))]}})})},zn=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r;return bt(this,function(i){return t={name:"AccessDeniedException",$fault:"client",$metadata:ye(e),Message:void 0},null!=(r=e.body).message&&(t.Message=$r(r.message)),[2,t]})})},jn=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r;return bt(this,function(i){return t={name:"InternalServerException",$fault:"server",$retryable:{},$metadata:ye(e),Message:void 0},null!=(r=e.body).message&&(t.Message=$r(r.message)),[2,t]})})},xr=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r;return bt(this,function(i){return t={name:"ResourceNotFoundException",$fault:"client",$metadata:ye(e),Message:void 0},null!=(r=e.body).message&&(t.Message=$r(r.message)),[2,t]})})},Fn=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r;return bt(this,function(i){return t={name:"ThrottlingException",$fault:"client",$retryable:{},$metadata:ye(e),Message:void 0},null!=(r=e.body).message&&(t.Message=$r(r.message)),[2,t]})})},Un=function(e,n){return wt(void 0,void 0,void 0,function(){var t,r;return bt(this,function(i){return t={name:"ValidationException",$fault:"client",$metadata:ye(e),FieldList:void 0,Message:void 0,Reason:void 0},null!=(r=e.body).fieldList&&(t.FieldList=gae(r.fieldList,n)),null!=r.message&&(t.Message=$r(r.message)),null!=r.reason&&(t.Reason=$r(r.reason)),[2,t]})})},toe=function(e,n){return e.filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){return K(K({},null!=e.GeofenceId&&{GeofenceId:e.GeofenceId}),null!=e.Geometry&&{Geometry:jM(e.Geometry,n)})}(t,n)})},kM=function(e,n){return e.filter(function(t){return null!=t}).map(function(t){return null===t?null:RM(t)})},LM=function(e,n){return e.filter(function(t){return null!=t}).map(function(t){return null===t?null:t})},jM=function(e,n){return K({},null!=e.Polygon&&{Polygon:ooe(e.Polygon,n)})},FM=function(e,n){return e.filter(function(t){return null!=t}).map(function(t){return null===t?null:t})},ooe=function(e,n){return e.filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){return e.filter(function(t){return null!=t}).map(function(t){return null===t?null:Ed(t,n)})}(t,n)})},Ed=function(e,n){return e.filter(function(t){return null!=t}).map(function(t){return null===t?null:RM(t)})},ig=function(e,n){return{Code:$r(e.Code),Message:$r(e.Message)}},Aw=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:s_(t)})},qM=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:$r(t)})},GM=function(e,n){return{Polygon:null!=e.Polygon?Noe(e.Polygon,n):void 0}},Noe=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:Ks(t,n)})}(t,n)})},HM=function(e,n){return{AddressNumber:$r(e.AddressNumber),Country:$r(e.Country),Geometry:null!=e.Geometry?Yoe(e.Geometry,n):void 0,Interpolated:Xne(e.Interpolated),Label:$r(e.Label),Municipality:$r(e.Municipality),Neighborhood:$r(e.Neighborhood),PostalCode:$r(e.PostalCode),Region:$r(e.Region),Street:$r(e.Street),SubRegion:$r(e.SubRegion),TimeZone:null!=e.TimeZone?pae(e.TimeZone,n):void 0}},Yoe=function(e,n){return{Point:null!=e.Point?Ks(e.Point,n):void 0}},Ks=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:s_(t)})},pae=function(e,n){return{Name:$r(e.Name),Offset:a_(e.Offset)}},gae=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){return{Message:$r(e.message),Name:$r(e.name)}}(t)})},ye=function(e){var n;return{httpStatusCode:e.statusCode,requestId:null!==(n=e.headers["x-amzn-requestid"])&&void 0!==n?n:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},Wt=function(e,n){return function(e,n){return function(e,n){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):n.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,n).then(function(t){return n.utf8Encoder(t)})}(e,n).then(function(t){return t.length?JSON.parse(t):{}})},qn=function(e,n){var r=function(o){var a=o;return a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},i=("x-amzn-errortype",Object.keys(e.headers).find(function(u){return u.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==i?r(e.headers[i]):void 0!==n.code?r(n.code):void 0!==n.__type?r(n.__type):""},_ae=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Ut(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(tg(r,this.serialize,this.deserialize));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"SearchPlaceIndexForTextCommand",inputFilterSensitiveLog:Cw.filterSensitiveLog,outputFilterSensitiveLog:Iw.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,i,o,a,u,d,l,f,_,m;return bt(this,function(E){switch(E.label){case 0:return[4,n.endpoint()];case 1:if(t=E.sent(),o=void 0===(i=t.protocol)?"https":i,a=t.port,d={"content-type":"application/json"},l=((null==(u=t.path)?void 0:u.endsWith("/"))?u.slice(0,-1):u||"")+"/places/v0/indexes/{IndexName}/search/text",void 0===e.IndexName)throw new Error("No value provided for input HTTP label: IndexName.");if((f=e.IndexName).length<=0)throw new Error("Empty value provided for input HTTP label: IndexName.");return l=l.replace("{IndexName}",_p(f)),_=JSON.stringify(K(K(K(K(K(K({},null!=e.BiasPosition&&{BiasPosition:Ed(e.BiasPosition,n)}),null!=e.FilterBBox&&{FilterBBox:kM(e.FilterBBox)}),null!=e.FilterCountries&&{FilterCountries:LM(e.FilterCountries)}),null!=e.Language&&{Language:e.Language}),null!=e.MaxResults&&{MaxResults:e.MaxResults}),null!=e.Text&&{Text:e.Text})),[4,n.endpoint()];case 2:if(m=E.sent().hostname,!0!==n.disableHostPrefix&&!$m(m="places."+m))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new Ku({protocol:o,hostname:m,port:a,method:"POST",headers:d,path:l,body:_})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o;return bt(this,function(a){switch(a.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Hie(e,n)]:(t={$metadata:ye(e),Results:void 0,Summary:void 0},i=Xu,o=vp,[4,Wt(e.body,n)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[a.sent()]),"body"])).Results&&(t.Results=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){return{Distance:s_(e.Distance),Place:null!=e.Place?HM(e.Place,n):void 0,Relevance:s_(e.Relevance)}}(t,n)})}(r.Results,n)),null!=r.Summary&&(t.Summary=function(e,n){return{BiasPosition:null!=e.BiasPosition?Ks(e.BiasPosition,n):void 0,DataSource:$r(e.DataSource),FilterBBox:null!=e.FilterBBox?Aw(e.FilterBBox):void 0,FilterCountries:null!=e.FilterCountries?qM(e.FilterCountries):void 0,Language:$r(e.Language),MaxResults:a_(e.MaxResults),ResultBBox:null!=e.ResultBBox?Aw(e.ResultBBox):void 0,Text:$r(e.Text)}}(r.Summary,n)),[2,Promise.resolve(t)]}})})}(t,r)},n}(Wm),yae=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Ut(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(tg(r,this.serialize,this.deserialize));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"SearchPlaceIndexForPositionCommand",inputFilterSensitiveLog:bw.filterSensitiveLog,outputFilterSensitiveLog:Sw.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,i,o,a,u,d,l,f,_,m;return bt(this,function(E){switch(E.label){case 0:return[4,n.endpoint()];case 1:if(t=E.sent(),o=void 0===(i=t.protocol)?"https":i,a=t.port,d={"content-type":"application/json"},l=((null==(u=t.path)?void 0:u.endsWith("/"))?u.slice(0,-1):u||"")+"/places/v0/indexes/{IndexName}/search/position",void 0===e.IndexName)throw new Error("No value provided for input HTTP label: IndexName.");if((f=e.IndexName).length<=0)throw new Error("Empty value provided for input HTTP label: IndexName.");return l=l.replace("{IndexName}",_p(f)),_=JSON.stringify(K(K(K({},null!=e.Language&&{Language:e.Language}),null!=e.MaxResults&&{MaxResults:e.MaxResults}),null!=e.Position&&{Position:Ed(e.Position,n)})),[4,n.endpoint()];case 2:if(m=E.sent().hostname,!0!==n.disableHostPrefix&&!$m(m="places."+m))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new Ku({protocol:o,hostname:m,port:a,method:"POST",headers:d,path:l,body:_})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o;return bt(this,function(a){switch(a.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,qie(e,n)]:(t={$metadata:ye(e),Results:void 0,Summary:void 0},i=Xu,o=vp,[4,Wt(e.body,n)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[a.sent()]),"body"])).Results&&(t.Results=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){return{Distance:s_(e.Distance),Place:null!=e.Place?HM(e.Place,n):void 0}}(t,n)})}(r.Results,n)),null!=r.Summary&&(t.Summary=function(e,n){return{DataSource:$r(e.DataSource),Language:$r(e.Language),MaxResults:a_(e.MaxResults),Position:null!=e.Position?Ks(e.Position,n):void 0}}(r.Summary,n)),[2,Promise.resolve(t)]}})})}(t,r)},n}(Wm),bae=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Ut(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(tg(r,this.serialize,this.deserialize));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"GetGeofenceCommand",inputFilterSensitiveLog:mw.filterSensitiveLog,outputFilterSensitiveLog:gw.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,i,o,a,u,d,l,f,m;return bt(this,function(E){switch(E.label){case 0:return[4,n.endpoint()];case 1:if(t=E.sent(),o=void 0===(i=t.protocol)?"https":i,a=t.port,d={},l=((null==(u=t.path)?void 0:u.endsWith("/"))?u.slice(0,-1):u||"")+"/geofencing/v0/collections/{CollectionName}/geofences/{GeofenceId}",void 0===e.CollectionName)throw new Error("No value provided for input HTTP label: CollectionName.");if((f=e.CollectionName).length<=0)throw new Error("Empty value provided for input HTTP label: CollectionName.");if(l=l.replace("{CollectionName}",_p(f)),void 0===e.GeofenceId)throw new Error("No value provided for input HTTP label: GeofenceId.");if((f=e.GeofenceId).length<=0)throw new Error("Empty value provided for input HTTP label: GeofenceId.");return l=l.replace("{GeofenceId}",_p(f)),[4,n.endpoint()];case 2:if(m=E.sent().hostname,!0!==n.disableHostPrefix&&!$m(m="geofencing."+m))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new Ku({protocol:o,hostname:m,port:a,method:"GET",headers:d,path:l,body:void 0})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o;return bt(this,function(a){switch(a.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Cie(e,n)]:(t={$metadata:ye(e),CreateTime:void 0,GeofenceId:void 0,Geometry:void 0,Status:void 0,UpdateTime:void 0},i=Xu,o=vp,[4,Wt(e.body,n)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[a.sent()]),"body"])).CreateTime&&(t.CreateTime=Xu(Zm(r.CreateTime))),null!=r.GeofenceId&&(t.GeofenceId=$r(r.GeofenceId)),null!=r.Geometry&&(t.Geometry=GM(r.Geometry,n)),null!=r.Status&&(t.Status=$r(r.Status)),null!=r.UpdateTime&&(t.UpdateTime=Xu(Zm(r.UpdateTime))),[2,Promise.resolve(t)]}})})}(t,r)},n}(Wm),wae=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Ut(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(tg(r,this.serialize,this.deserialize));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"ListGeofencesCommand",inputFilterSensitiveLog:vw.filterSensitiveLog,outputFilterSensitiveLog:yw.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,i,o,a,u,d,l,f,_,m;return bt(this,function(E){switch(E.label){case 0:return[4,n.endpoint()];case 1:if(t=E.sent(),o=void 0===(i=t.protocol)?"https":i,a=t.port,d={"content-type":"application/json"},l=((null==(u=t.path)?void 0:u.endsWith("/"))?u.slice(0,-1):u||"")+"/geofencing/v0/collections/{CollectionName}/list-geofences",void 0===e.CollectionName)throw new Error("No value provided for input HTTP label: CollectionName.");if((f=e.CollectionName).length<=0)throw new Error("Empty value provided for input HTTP label: CollectionName.");return l=l.replace("{CollectionName}",_p(f)),_=JSON.stringify(K({},null!=e.NextToken&&{NextToken:e.NextToken})),[4,n.endpoint()];case 2:if(m=E.sent().hostname,!0!==n.disableHostPrefix&&!$m(m="geofencing."+m))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new Ku({protocol:o,hostname:m,port:a,method:"POST",headers:d,path:l,body:_})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o;return bt(this,function(a){switch(a.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,kie(e,n)]:(t={$metadata:ye(e),Entries:void 0,NextToken:void 0},i=Xu,o=vp,[4,Wt(e.body,n)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[a.sent()]),"body"])).Entries&&(t.Entries=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){return{CreateTime:null!=e.CreateTime?Xu(Zm(e.CreateTime)):void 0,GeofenceId:$r(e.GeofenceId),Geometry:null!=e.Geometry?GM(e.Geometry,n):void 0,Status:$r(e.Status),UpdateTime:null!=e.UpdateTime?Xu(Zm(e.UpdateTime)):void 0}}(t,n)})}(r.Entries,n)),null!=r.NextToken&&(t.NextToken=$r(r.NextToken)),[2,Promise.resolve(t)]}})})}(t,r)},n}(Wm),xae=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Ut(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(tg(r,this.serialize,this.deserialize));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"BatchPutGeofenceCommand",inputFilterSensitiveLog:hw.filterSensitiveLog,outputFilterSensitiveLog:pw.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,i,o,a,u,d,l,f,_,m;return bt(this,function(E){switch(E.label){case 0:return[4,n.endpoint()];case 1:if(t=E.sent(),o=void 0===(i=t.protocol)?"https":i,a=t.port,d={"content-type":"application/json"},l=((null==(u=t.path)?void 0:u.endsWith("/"))?u.slice(0,-1):u||"")+"/geofencing/v0/collections/{CollectionName}/put-geofences",void 0===e.CollectionName)throw new Error("No value provided for input HTTP label: CollectionName.");if((f=e.CollectionName).length<=0)throw new Error("Empty value provided for input HTTP label: CollectionName.");return l=l.replace("{CollectionName}",_p(f)),_=JSON.stringify(K({},null!=e.Entries&&{Entries:toe(e.Entries,n)})),[4,n.endpoint()];case 2:if(m=E.sent().hostname,!0!==n.disableHostPrefix&&!$m(m="geofencing."+m))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new Ku({protocol:o,hostname:m,port:a,method:"POST",headers:d,path:l,body:_})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o;return bt(this,function(a){switch(a.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,nie(e,n)]:(t={$metadata:ye(e),Errors:void 0,Successes:void 0},i=Xu,o=vp,[4,Wt(e.body,n)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[a.sent()]),"body"])).Errors&&(t.Errors=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){return{Error:null!=e.Error?ig(e.Error,n):void 0,GeofenceId:$r(e.GeofenceId)}}(t,n)})}(r.Errors,n)),null!=r.Successes&&(t.Successes=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){return{CreateTime:null!=e.CreateTime?Xu(Zm(e.CreateTime)):void 0,GeofenceId:$r(e.GeofenceId),UpdateTime:null!=e.UpdateTime?Xu(Zm(e.UpdateTime)):void 0}}(t)})}(r.Successes)),[2,Promise.resolve(t)]}})})}(t,r)},n}(Wm),Eae=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Ut(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(tg(r,this.serialize,this.deserialize));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"BatchDeleteGeofenceCommand",inputFilterSensitiveLog:cw.filterSensitiveLog,outputFilterSensitiveLog:dw.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,i,o,a,u,d,l,f,_,m;return bt(this,function(E){switch(E.label){case 0:return[4,n.endpoint()];case 1:if(t=E.sent(),o=void 0===(i=t.protocol)?"https":i,a=t.port,d={"content-type":"application/json"},l=((null==(u=t.path)?void 0:u.endsWith("/"))?u.slice(0,-1):u||"")+"/geofencing/v0/collections/{CollectionName}/delete-geofences",void 0===e.CollectionName)throw new Error("No value provided for input HTTP label: CollectionName.");if((f=e.CollectionName).length<=0)throw new Error("Empty value provided for input HTTP label: CollectionName.");return l=l.replace("{CollectionName}",_p(f)),_=JSON.stringify(K({},null!=e.GeofenceIds&&{GeofenceIds:FM(e.GeofenceIds)})),[4,n.endpoint()];case 2:if(m=E.sent().hostname,!0!==n.disableHostPrefix&&!$m(m="geofencing."+m))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new Ku({protocol:o,hostname:m,port:a,method:"POST",headers:d,path:l,body:_})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return wt(void 0,void 0,void 0,function(){var t,r,i,o;return bt(this,function(a){switch(a.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Yre(e,n)]:(t={$metadata:ye(e),Errors:void 0},i=Xu,o=vp,[4,Wt(e.body,n)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[a.sent()]),"body"])).Errors&&(t.Errors=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){return{Error:null!=e.Error?ig(e.Error,n):void 0,GeofenceId:$r(e.GeofenceId)}}(t,n)})}(r.Errors,n)),[2,Promise.resolve(t)]}})})}(t,r)},n}(Wm);var jC=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o};function QM(e,n){if(!Number.isFinite(e)||!Number.isFinite(n))throw new Error("Invalid coordinates: ["+e+","+n+"]");if(n<-90||90<n)throw new Error("Latitude must be between -90 and 90 degrees inclusive.");if(e<-180||180<e)throw new Error("Longitude must be between -180 and 180 degrees inclusive.")}function FC(e){if(!/^[-._\p{L}\p{N}]+$/iu.test(e))throw new Error("Invalid geofenceId: '"+e+"' - IDs can only contain alphanumeric characters, hyphens, underscores and periods.")}function e3(e,n){var t=n?n+": ":"";if(e.length<4)throw new Error(t+"LinearRing must contain 4 or more coordinates.");var r=[];if(e.forEach(function(f){try{QM(f[0],f[1])}catch(_){r.push({coordinates:f,error:_.message})}}),r.length>0)throw new Error(t+"One or more of the coordinates in the Polygon LinearRing are not valid: "+JSON.stringify(r));var i=jC(e[0],2),o=i[0],a=i[1],u=jC(e[e.length-1],2);if(o!==u[0]||a!==u[1])throw new Error(t+"LinearRing's first and last coordinates are not the same");if(function Dae(e){for(var i,o,n=function Aae(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(e),t=0,r=1;r<n.length;)i=o||n[0],t+=((o=n[r])[0]-i[0])*(o[1]+i[1]),r++;return t>0}(e))throw new Error(t+"LinearRing coordinates must be wound counterclockwise")}var ql=function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})},Vl=function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},Mae=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},As=new eo("AmazonLocationServiceProvider"),Lae=function(){function e(n){this._config=n||{},As.debug("Geo Options",this._config)}return e.prototype.getCategory=function(){return e.CATEGORY},e.prototype.getProviderName=function(){return e.PROVIDER_NAME},e.prototype.configure=function(n){return As.debug("configure Amazon Location Service Provider",n),n?(this._config=Object.assign({},this._config,n),this._config):this._config},e.prototype.getAvailableMaps=function(){this._verifyMapResources();var n=[],t=this._config.maps.items,r=this._config.region;for(var i in t)n.push({mapName:i,style:t[i].style,region:r});return n},e.prototype.getDefaultMap=function(){this._verifyMapResources();var n=this._config.maps.default;return{mapName:n,style:this._config.maps.items[n].style,region:this._config.region}},e.prototype.searchByText=function(n,t){return ql(this,void 0,void 0,function(){var i,o,a,u,d,l;return Vl(this,function(_){switch(_.label){case 0:return[4,this._ensureCredentials()];case 1:if(!_.sent())throw new Error("No credentials");if(this._verifySearchIndex(null==t?void 0:t.searchIndexName),i={Text:n,IndexName:this._config.search_indices.default},t){if(i.FilterCountries=t.countries,i.MaxResults=t.maxResults,t.searchIndexName&&(i.IndexName=t.searchIndexName),t.biasPosition&&t.searchAreaConstraints)throw new Error("BiasPosition and SearchAreaConstraints are mutually exclusive, please remove one or the other from the options object");t.biasPosition&&(i.BiasPosition=t.biasPosition),t.searchAreaConstraints&&(i.FilterBBox=t.searchAreaConstraints)}o=new eg({credentials:this._config.credentials,region:this._config.region,customUserAgent:zl()}),a=new _ae(i),_.label=2;case 2:return _.trys.push([2,4,,5]),[4,o.send(a)];case 3:return u=_.sent(),[3,5];case 4:throw d=_.sent(),As.debug(d),d;case 5:return l=u.Results.map(function(m){return m.Place}),[2,Yk()(l,{deep:!0})]}})})},e.prototype.searchByCoordinates=function(n,t){return ql(this,void 0,void 0,function(){var i,o,a,u,d,l;return Vl(this,function(_){switch(_.label){case 0:return[4,this._ensureCredentials()];case 1:if(!_.sent())throw new Error("No credentials");this._verifySearchIndex(null==t?void 0:t.searchIndexName),i={Position:n,IndexName:this._config.search_indices.default},t&&(t.searchIndexName&&(i.IndexName=t.searchIndexName),i.MaxResults=t.maxResults),o=new eg({credentials:this._config.credentials,region:this._config.region,customUserAgent:zl()}),a=new yae(i),_.label=2;case 2:return _.trys.push([2,4,,5]),[4,o.send(a)];case 3:return u=_.sent(),[3,5];case 4:throw d=_.sent(),As.debug(d),d;case 5:return l=u.Results.map(function(m){return m.Place}),[2,Yk()(l[0],{deep:!0})]}})})},e.prototype.saveGeofences=function(n,t){return ql(this,void 0,void 0,function(){var i,o,a,d=this;return Vl(this,function(l){switch(l.label){case 0:if(n.length<1)throw new Error("Geofence input array is empty");return[4,this._ensureCredentials()];case 1:if(!l.sent())throw new Error("No credentials");try{this._verifyGeofenceCollections(null==t?void 0:t.collectionName)}catch(f){throw As.debug(f),f}for(function kae(e){var n={};e.forEach(function(t){if(!t.geofenceId)throw new Error("Geofence '"+t+"' is missing geofenceId");var r=t.geofenceId;if(FC(r),n[r])throw new Error("Duplicate geofenceId: "+r);if(n[r]=!0,!t.geometry)throw new Error("Geofence '"+r+"' is missing geometry");var i=t.geometry;if(!i.polygon)throw new Error("Geofence '"+r+"' is missing geometry.polygon");var o=i.polygon;try{!function Oae(e,n){var t=n?n+": ":"";if(!Array.isArray(e))throw new Error(t+"Polygon is of incorrect structure. It should be an array of LinearRings");if(e.length<1)throw new Error(t+"Polygon must have a single LinearRing array.");if(e.length>1)throw new Error(t+"Polygon must have a single LinearRing array. Note: We do not currently support polygons with holes, multipolygons, polygons that are wound clockwise, or that cross the antimeridian.");if(e.reduce(function(i,o){return i+o.length},0)>1e3)throw new Error(t+"Polygon has more than the maximum 1000 vertices.");e.forEach(function(i){e3(i,n)})}(o,r)}catch(d){if(d.message.includes("Polygon has more than the maximum 1000 vertices."))throw new Error("Geofence '"+r+"' has more than the maximum of 1000 vertices")}e3(jC(o,1)[0],r)})}(n),i=n.map(function(f){return{GeofenceId:f.geofenceId,Geometry:{Polygon:f.geometry.polygon}}}),o={successes:[],errors:[]},a=[];i.length>0;)a.push(i.splice(0,10));return[4,Promise.all(a.map(function(f){return ql(d,void 0,void 0,function(){var _,m;return Vl(this,function(E){switch(E.label){case 0:return E.trys.push([0,2,,3]),[4,this._AmazonLocationServiceBatchPutGeofenceCall(f,(null==t?void 0:t.collectionName)||this._config.geofenceCollections.default)];case 1:return _=E.sent(),[3,3];case 2:return m=E.sent(),f.forEach(function(A){o.errors.push({geofenceId:A.GeofenceId,error:{code:"APIConnectionError",message:m.message}})}),[2];case 3:return _.Successes.forEach(function(A){o.successes.push({geofenceId:A.GeofenceId,createTime:A.CreateTime,updateTime:A.UpdateTime})}),_.Errors.forEach(function(A){var I=A.Error;o.errors.push({error:{code:I.Code,message:I.Message},geofenceId:A.GeofenceId})}),[2]}})})}))];case 2:return l.sent(),[2,o]}})})},e.prototype.getGeofence=function(n,t){return ql(this,void 0,void 0,function(){var i,a,u,d;return Vl(this,function(I){switch(I.label){case 0:return[4,this._ensureCredentials()];case 1:if(!I.sent())throw new Error("No credentials");try{this._verifyGeofenceCollections(null==t?void 0:t.collectionName)}catch(se){throw As.debug(se),se}FC(n),i=new eg({credentials:this._config.credentials,region:this._config.region,customUserAgent:zl()}),a=new bae({GeofenceId:n,CollectionName:(null==t?void 0:t.collectionName)||this._config.geofenceCollections.default}),I.label=2;case 2:return I.trys.push([2,4,,5]),[4,i.send(a)];case 3:return u=I.sent(),[3,5];case 4:throw d=I.sent(),As.debug(d),d;case 5:return[2,{createTime:u.CreateTime,geofenceId:u.GeofenceId,geometry:{polygon:u.Geometry.Polygon},status:u.Status,updateTime:u.UpdateTime}]}})})},e.prototype.listGeofences=function(n){return ql(this,void 0,void 0,function(){var r,o,a,u,d;return Vl(this,function(_){switch(_.label){case 0:return[4,this._ensureCredentials()];case 1:if(!_.sent())throw new Error("No credentials");try{this._verifyGeofenceCollections(null==n?void 0:n.collectionName)}catch(m){throw As.debug(m),m}r=new eg({credentials:this._config.credentials,region:this._config.region,customUserAgent:zl()}),o=new wae({NextToken:null==n?void 0:n.nextToken,CollectionName:(null==n?void 0:n.collectionName)||this._config.geofenceCollections.default}),_.label=2;case 2:return _.trys.push([2,4,,5]),[4,r.send(o)];case 3:return a=_.sent(),[3,5];case 4:throw u=_.sent(),As.debug(u),u;case 5:return d=a.NextToken,[2,{entries:a.Entries.map(function(m){return{geofenceId:m.GeofenceId,createTime:m.CreateTime,updateTime:m.UpdateTime,status:m.Status,geometry:{polygon:m.Geometry.Polygon}}}),nextToken:d}]}})})},e.prototype.deleteGeofences=function(n,t){return ql(this,void 0,void 0,function(){var i,o,a,u,d=this;return Vl(this,function(l){switch(l.label){case 0:if(n.length<1)throw new Error("GeofenceId input array is empty");return[4,this._ensureCredentials()];case 1:if(!l.sent())throw new Error("No credentials");if(this._verifyGeofenceCollections(null==t?void 0:t.collectionName),(i=n.filter(function(f){try{FC(f)}catch(_){return!0}})).length>0)throw new Error("Invalid geofence ids: "+i.join(", "));for(o={successes:[],errors:[]},a=[],u=0;u<n.length;)a.push(n.slice(u,u+=10));return[4,Promise.all(a.map(function(f){return ql(d,void 0,void 0,function(){var _,m,E,A;return Vl(this,function(I){switch(I.label){case 0:return I.trys.push([0,2,,3]),[4,this._AmazonLocationServiceBatchDeleteGeofenceCall(f,(null==t?void 0:t.collectionName)||this._config.geofenceCollections.default)];case 1:return _=I.sent(),[3,3];case 2:return m=I.sent(),f.forEach(function(se){o.errors.push({geofenceId:se,error:{code:m.message,message:m.message}})}),[2];case 3:return E=_.Errors.map(function(se){return se.geofenceId}),(A=o.successes).push.apply(A,function(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(Mae(arguments[n]));return e}(f.filter(function(se){return!E.includes(se)}))),[2]}})})}))];case 2:return l.sent(),[2,o]}})})},e.prototype._ensureCredentials=function(){return ql(this,void 0,void 0,function(){var n,t,r;return Vl(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Vu.get()];case 1:return(n=i.sent())?(t=Vu.shear(n),As.debug("Set credentials for storage. Credentials are:",t),this._config.credentials=t,[2,!0]):[2,!1];case 2:return r=i.sent(),As.debug("Ensure credentials error. Credentials are:",r),[2,!1];case 3:return[2]}})})},e.prototype._verifyMapResources=function(){var n;if(!this._config.maps)throw As.debug(n="No map resources found in amplify config, run 'amplify add geo' to create one and run `amplify push` after"),new Error(n);if(!this._config.maps.default)throw As.debug(n="No default map resource found in amplify config, run 'amplify add geo' to create one and run `amplify push` after"),new Error(n)},e.prototype._verifySearchIndex=function(n){if(!(this._config.search_indices&&this._config.search_indices.default||n)){var t="No Search Index found in amplify config, please run `amplify add geo` to create one and run `amplify push` after.";throw As.debug(t),new Error(t)}},e.prototype._verifyGeofenceCollections=function(n){if(!(this._config.geofenceCollections&&this._config.geofenceCollections.default||n)){var t="No Geofence Collections found, please run `amplify add geo` to create one and run `amplify push` after.";throw As.debug(t),new Error(t)}},e.prototype._AmazonLocationServiceBatchPutGeofenceCall=function(n,t){return ql(this,void 0,void 0,function(){var r,i,o,a;return Vl(this,function(d){switch(d.label){case 0:r={Entries:n,CollectionName:t||this._config.geofenceCollections.default},i=new eg({credentials:this._config.credentials,region:this._config.region,customUserAgent:zl()}),o=new xae(r),d.label=1;case 1:return d.trys.push([1,3,,4]),[4,i.send(o)];case 2:return a=d.sent(),[3,4];case 3:throw d.sent();case 4:return[2,a]}})})},e.prototype._AmazonLocationServiceBatchDeleteGeofenceCall=function(n,t){return ql(this,void 0,void 0,function(){var r,i,o,a;return Vl(this,function(d){switch(d.label){case 0:r={GeofenceIds:n,CollectionName:t||this._config.geofenceCollections.default},i=new eg({credentials:this._config.credentials,region:this._config.region,customUserAgent:zl()}),o=new Eae(r),d.label=1;case 1:return d.trys.push([1,3,,4]),[4,i.send(o)];case 2:return a=d.sent(),[3,4];case 3:throw d.sent();case 4:return[2,a]}})})},e.CATEGORY="Geo",e.PROVIDER_NAME="AmazonLocationService",e}(),ag=function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})},sg=function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},Sd=new eo("Geo"),Xf="AmazonLocationService",zae=function(){function e(){this._config={},this._pluggables=[],Sd.debug("Geo Options",this._config)}return e.prototype.getModuleName=function(){return e.MODULE},e.prototype.addPluggable=function(n){if(n&&"Geo"===n.getCategory())return this._pluggables.push(n),n.configure(this._config[n.getProviderName()])},e.prototype.getPluggable=function(n){var t=this._pluggables.find(function(r){return r.getProviderName()===n});if(void 0===t)throw Sd.debug("No plugin found with providerName",n),new Error("No plugin found in Geo for the provider");return t},e.prototype.removePluggable=function(n){this._pluggables=this._pluggables.filter(function(t){return t.getProviderName()!==n})},e.prototype.configure=function(n){var t=this;if(Sd.debug("configure Geo"),!n)return this._config;var r=tO(n);return this._config=Object.assign({},this._config,r.Geo,n),this._pluggables.forEach(function(i){i.configure(t._config[i.getProviderName()])}),0===this._pluggables.length&&this.addPluggable(new Lae),this._config},e.prototype.getAvailableMaps=function(n){return void 0===n&&(n=Xf),this.getPluggable(n).getAvailableMaps()},e.prototype.getDefaultMap=function(n){return void 0===n&&(n=Xf),this.getPluggable(n).getDefaultMap()},e.prototype.searchByText=function(n,t){return ag(this,void 0,void 0,function(){var r,o,a;return sg(this,function(u){switch(u.label){case 0:o=this.getPluggable(void 0===(r=(t||{}).providerName)?Xf:r),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,o.searchByText(n,t)];case 2:return[2,u.sent()];case 3:throw a=u.sent(),Sd.debug(a),a;case 4:return[2]}})})},e.prototype.searchByCoordinates=function(n,t){return ag(this,void 0,void 0,function(){var r,o,a,u,d,l;return sg(this,function(f){switch(f.label){case 0:o=this.getPluggable(void 0===(r=(t||{}).providerName)?Xf:r),a=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}(n,2),u=a[0],d=a[1],f.label=1;case 1:return f.trys.push([1,3,,4]),QM(u,d),[4,o.searchByCoordinates(n,t)];case 2:return[2,f.sent()];case 3:throw l=f.sent(),Sd.debug(l),l;case 4:return[2]}})})},e.prototype.saveGeofences=function(n,t){return ag(this,void 0,void 0,function(){var r,o,a,u;return sg(this,function(d){switch(d.label){case 0:o=this.getPluggable(void 0===(r=(t||{}).providerName)?Xf:r),a=Array.isArray(n)?n:[n],d.label=1;case 1:return d.trys.push([1,3,,4]),[4,o.saveGeofences(a,t)];case 2:return[2,d.sent()];case 3:throw u=d.sent(),Sd.debug(u),u;case 4:return[2]}})})},e.prototype.getGeofence=function(n,t){return ag(this,void 0,void 0,function(){var r,o,a;return sg(this,function(u){switch(u.label){case 0:o=this.getPluggable(void 0===(r=(t||{}).providerName)?Xf:r),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,o.getGeofence(n,t)];case 2:return[2,u.sent()];case 3:throw a=u.sent(),Sd.debug(a),a;case 4:return[2]}})})},e.prototype.listGeofences=function(n){return ag(this,void 0,void 0,function(){var t,i,o;return sg(this,function(a){switch(a.label){case 0:i=this.getPluggable(void 0===(t=(n||{}).providerName)?Xf:t),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,i.listGeofences(n)];case 2:return[2,a.sent()];case 3:throw o=a.sent(),Sd.debug(o),o;case 4:return[2]}})})},e.prototype.deleteGeofences=function(n,t){return ag(this,void 0,void 0,function(){var r,o,a,u;return sg(this,function(d){switch(d.label){case 0:o=this.getPluggable(void 0===(r=(t||{}).providerName)?Xf:r),a=Array.isArray(n)?n:[n],d.label=1;case 1:return d.trys.push([1,3,,4]),[4,o.deleteGeofences(a,t)];case 2:return[2,d.sent()];case 3:throw u=d.sent(),Sd.debug(u),u;case 4:return[2]}})})},e.MODULE="Geo",e}(),Rw=new zae;Es.register(Rw);var h_=G(4987),Dw=function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function u(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(u,d)}l((r=r.apply(e,n||[])).next())})};class Ow{constructor(n,t){this.refreshCredentials=()=>Dw(this,void 0,void 0,function*(){try{this.credentials=yield Es.Auth.currentCredentials()}catch(r){throw console.error(`Failed to refresh credentials: ${r}`),r}}),this.refreshCredentialsWithRetry=()=>Dw(this,void 0,void 0,function*(){try{yield S2(this.refreshCredentials,[],3e5),this.activeTimeout&&clearTimeout(this.activeTimeout);const o=new Date(this.credentials.expiration).getTime()-(new Date).getTime()-1e4;this.activeTimeout=window.setTimeout(this.refreshCredentialsWithRetry,o)}catch(r){console.error(`Failed to refresh credentials: ${r}`)}}),this.transformRequest=(r,i)=>{if("Style"===i&&!r.includes("://")){if(null==this.region)throw new Error("AWS region for map is undefined. Please verify that the region is set in aws-exports.js or that you are providing an AWS region parameter to createMap");r=`https://maps.geo.${this.region}.amazonaws.com/maps/v0/maps/${r}/style-descriptor`}if(r.includes("amazonaws.com")){const o=r+`?x-amz-user-agent=${encodeURIComponent((e=>e.replace(/\./g,"%2E"))(zl()))}`;return{url:$ee.signUrl(o,{access_key:this.credentials.accessKeyId,secret_key:this.credentials.secretAccessKey,session_token:this.credentials.sessionToken})}}},this.credentials=n,this.region=t,this.activeTimeout=null,this.refreshCredentialsWithRetry(),pd.listen("auth",r=>{switch(r.payload.event){case"signIn":case"signOut":case"tokenRefresh":this.refreshCredentialsWithRetry()}})}}Ow.createMapLibreMap=e=>Dw(void 0,void 0,void 0,function*(){const{region:n,mapConstructor:t=h_.Map}=e,r=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}(e,["region","mapConstructor"]),i=Rw.getDefaultMap(),a=new Ow(yield Es.Auth.currentCredentials(),n||i.region).transformRequest;return new t(Object.assign(Object.assign({},r),{style:e.style||i.mapName,transformRequest:a}))}),G(8407);const i3_amplify={Auth:{identityPoolId:"us-east-1:57a33aaf-0026-44e3-908c-7fb9d5730b9f",region:"us-east-1"},geo:{AmazonLocationService:{maps:{items:{AmazonMap:{style:"Default style"}},default:"AmazonMap"},region:"us-east-1"}}};let tse=(()=>{class e{constructor(){Bee.configure(i3_amplify)}ngAfterViewInit(){this.loadMap()}getCurrentPosition(){return new _t(t=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(r=>{t.next({latitude:r.coords.latitude,longitude:r.coords.longitude}),t.complete()}):t.error()})}loadMap(){(e=>Dw(void 0,void 0,void 0,function*(){return Ow.createMapLibreMap(e)}))({container:"map",center:[0,0],zoom:0}).then(t=>{this.map=t,this.map.addControl(new h_.NavigationControl),this.map.addControl(new h_.GeolocateControl),this.getCurrentPosition().subscribe(r=>{this.map.flyTo({center:[r.latitude,r.longitude],zoom:13});const i=new h_.Marker;i.setLngLat([r.latitude,r.longitude]),i.setPopup((new h_.Popup).setHTML("Angular Amazon Map")),i.addTo(this.map)})})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=as({type:e,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container-fluid","py-3"],["id","map"]],template:function(t,r){1&t&&(wy(0,"div",0)(1,"h1"),IP(2,"Angular Map Amazon"),ev(),xy(3,"div",1),ev())},styles:["#map[_ngcontent-%COMP%]{height:400px;width:100%;max-width:600px}"]}),e})(),nse=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=eu({type:e,bootstrap:[tse]}),e.\u0275inj=Zo({providers:[],imports:[[gF,Z6]]}),e})();(function Jz(){bA=!1})(),pF().bootstrapModule(nse).catch(e=>console.error(e))},3014:(He,J,G)=>{He.exports=G(7114)},7729:(He,J,G)=>{"use strict";var U=G(4701),ie=G(858),b=G(5738),H=G(1625),X=G(5215),z=G(2099),M=G(6100),L=G(5593);He.exports=function(W){return new Promise(function(ue,fe){var we=W.data,ge=W.headers,Ie=W.responseType;U.isFormData(we)&&delete ge["Content-Type"];var Xe=new XMLHttpRequest;if(W.auth){var pe=W.auth.username||"",he=W.auth.password?unescape(encodeURIComponent(W.auth.password)):"";ge.Authorization="Basic "+btoa(pe+":"+he)}var Te=X(W.baseURL,W.url);function Fe(){if(Xe){var Ye="getAllResponseHeaders"in Xe?z(Xe.getAllResponseHeaders()):null;ie(ue,fe,{data:Ie&&"text"!==Ie&&"json"!==Ie?Xe.response:Xe.responseText,status:Xe.status,statusText:Xe.statusText,headers:Ye,config:W,request:Xe}),Xe=null}}if(Xe.open(W.method.toUpperCase(),H(Te,W.params,W.paramsSerializer),!0),Xe.timeout=W.timeout,"onloadend"in Xe?Xe.onloadend=Fe:Xe.onreadystatechange=function(){!Xe||4!==Xe.readyState||0===Xe.status&&(!Xe.responseURL||0!==Xe.responseURL.indexOf("file:"))||setTimeout(Fe)},Xe.onabort=function(){!Xe||(fe(L("Request aborted",W,"ECONNABORTED",Xe)),Xe=null)},Xe.onerror=function(){fe(L("Network Error",W,null,Xe)),Xe=null},Xe.ontimeout=function(){var Ge="timeout of "+W.timeout+"ms exceeded";W.timeoutErrorMessage&&(Ge=W.timeoutErrorMessage),fe(L(Ge,W,W.transitional&&W.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",Xe)),Xe=null},U.isStandardBrowserEnv()){var at=(W.withCredentials||M(Te))&&W.xsrfCookieName?b.read(W.xsrfCookieName):void 0;at&&(ge[W.xsrfHeaderName]=at)}"setRequestHeader"in Xe&&U.forEach(ge,function(Ge,P){void 0===we&&"content-type"===P.toLowerCase()?delete ge[P]:Xe.setRequestHeader(P,Ge)}),U.isUndefined(W.withCredentials)||(Xe.withCredentials=!!W.withCredentials),Ie&&"json"!==Ie&&(Xe.responseType=W.responseType),"function"==typeof W.onDownloadProgress&&Xe.addEventListener("progress",W.onDownloadProgress),"function"==typeof W.onUploadProgress&&Xe.upload&&Xe.upload.addEventListener("progress",W.onUploadProgress),W.cancelToken&&W.cancelToken.promise.then(function(Ge){!Xe||(Xe.abort(),fe(Ge),Xe=null)}),we||(we=null),Xe.send(we)})}},7114:(He,J,G)=>{"use strict";var U=G(4701),ie=G(2414),b=G(6490),H=G(2971);function z(L){var B=new b(L),W=ie(b.prototype.request,B);return U.extend(W,b.prototype,B),U.extend(W,B),W}var M=z(G(3324));M.Axios=b,M.create=function(B){return z(H(M.defaults,B))},M.Cancel=G(1413),M.CancelToken=G(3056),M.isCancel=G(8827),M.all=function(B){return Promise.all(B)},M.spread=G(9211),M.isAxiosError=G(4603),He.exports=M,He.exports.default=M},1413:He=>{"use strict";function J(G){this.message=G}J.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},J.prototype.__CANCEL__=!0,He.exports=J},3056:(He,J,G)=>{"use strict";var U=G(1413);function ie(b){if("function"!=typeof b)throw new TypeError("executor must be a function.");var H;this.promise=new Promise(function(M){H=M});var X=this;b(function(M){X.reason||(X.reason=new U(M),H(X.reason))})}ie.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},ie.source=function(){var H;return{token:new ie(function(M){H=M}),cancel:H}},He.exports=ie},8827:He=>{"use strict";He.exports=function(G){return!(!G||!G.__CANCEL__)}},6490:(He,J,G)=>{"use strict";var U=G(4701),ie=G(1625),b=G(607),H=G(957),X=G(2971),z=G(4828),M=z.validators;function L(B){this.defaults=B,this.interceptors={request:new b,response:new b}}L.prototype.request=function(W){"string"==typeof W?(W=arguments[1]||{}).url=arguments[0]:W=W||{},(W=X(this.defaults,W)).method=W.method?W.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var ee=W.transitional;void 0!==ee&&z.assertOptions(ee,{silentJSONParsing:M.transitional(M.boolean,"1.0.0"),forcedJSONParsing:M.transitional(M.boolean,"1.0.0"),clarifyTimeoutError:M.transitional(M.boolean,"1.0.0")},!1);var ue=[],fe=!0;this.interceptors.request.forEach(function(Fe){"function"==typeof Fe.runWhen&&!1===Fe.runWhen(W)||(fe=fe&&Fe.synchronous,ue.unshift(Fe.fulfilled,Fe.rejected))});var ge,we=[];if(this.interceptors.response.forEach(function(Fe){we.push(Fe.fulfilled,Fe.rejected)}),!fe){var Ie=[H,void 0];for(Array.prototype.unshift.apply(Ie,ue),Ie=Ie.concat(we),ge=Promise.resolve(W);Ie.length;)ge=ge.then(Ie.shift(),Ie.shift());return ge}for(var Xe=W;ue.length;){var pe=ue.shift(),he=ue.shift();try{Xe=pe(Xe)}catch(Te){he(Te);break}}try{ge=H(Xe)}catch(Te){return Promise.reject(Te)}for(;we.length;)ge=ge.then(we.shift(),we.shift());return ge},L.prototype.getUri=function(W){return W=X(this.defaults,W),ie(W.url,W.params,W.paramsSerializer).replace(/^\?/,"")},U.forEach(["delete","get","head","options"],function(W){L.prototype[W]=function(ee,ue){return this.request(X(ue||{},{method:W,url:ee,data:(ue||{}).data}))}}),U.forEach(["post","put","patch"],function(W){L.prototype[W]=function(ee,ue,fe){return this.request(X(fe||{},{method:W,url:ee,data:ue}))}}),He.exports=L},607:(He,J,G)=>{"use strict";var U=G(4701);function ie(){this.handlers=[]}ie.prototype.use=function(H,X,z){return this.handlers.push({fulfilled:H,rejected:X,synchronous:!!z&&z.synchronous,runWhen:z?z.runWhen:null}),this.handlers.length-1},ie.prototype.eject=function(H){this.handlers[H]&&(this.handlers[H]=null)},ie.prototype.forEach=function(H){U.forEach(this.handlers,function(z){null!==z&&H(z)})},He.exports=ie},5215:(He,J,G)=>{"use strict";var U=G(8692),ie=G(4554);He.exports=function(H,X){return H&&!U(X)?ie(H,X):X}},5593:(He,J,G)=>{"use strict";var U=G(5124);He.exports=function(b,H,X,z,M){var L=new Error(b);return U(L,H,X,z,M)}},957:(He,J,G)=>{"use strict";var U=G(4701),ie=G(5134),b=G(8827),H=G(3324);function X(z){z.cancelToken&&z.cancelToken.throwIfRequested()}He.exports=function(M){return X(M),M.headers=M.headers||{},M.data=ie.call(M,M.data,M.headers,M.transformRequest),M.headers=U.merge(M.headers.common||{},M.headers[M.method]||{},M.headers),U.forEach(["delete","get","head","post","put","patch","common"],function(W){delete M.headers[W]}),(M.adapter||H.adapter)(M).then(function(W){return X(M),W.data=ie.call(M,W.data,W.headers,M.transformResponse),W},function(W){return b(W)||(X(M),W&&W.response&&(W.response.data=ie.call(M,W.response.data,W.response.headers,M.transformResponse))),Promise.reject(W)})}},5124:He=>{"use strict";He.exports=function(G,U,ie,b,H){return G.config=U,ie&&(G.code=ie),G.request=b,G.response=H,G.isAxiosError=!0,G.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},G}},2971:(He,J,G)=>{"use strict";var U=G(4701);He.exports=function(b,H){H=H||{};var X={},z=["url","method","data"],M=["headers","auth","proxy","params"],L=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],B=["validateStatus"];function W(we,ge){return U.isPlainObject(we)&&U.isPlainObject(ge)?U.merge(we,ge):U.isPlainObject(ge)?U.merge({},ge):U.isArray(ge)?ge.slice():ge}function ee(we){U.isUndefined(H[we])?U.isUndefined(b[we])||(X[we]=W(void 0,b[we])):X[we]=W(b[we],H[we])}U.forEach(z,function(ge){U.isUndefined(H[ge])||(X[ge]=W(void 0,H[ge]))}),U.forEach(M,ee),U.forEach(L,function(ge){U.isUndefined(H[ge])?U.isUndefined(b[ge])||(X[ge]=W(void 0,b[ge])):X[ge]=W(void 0,H[ge])}),U.forEach(B,function(ge){ge in H?X[ge]=W(b[ge],H[ge]):ge in b&&(X[ge]=W(void 0,b[ge]))});var ue=z.concat(M).concat(L).concat(B),fe=Object.keys(b).concat(Object.keys(H)).filter(function(ge){return-1===ue.indexOf(ge)});return U.forEach(fe,ee),X}},858:(He,J,G)=>{"use strict";var U=G(5593);He.exports=function(b,H,X){var z=X.config.validateStatus;X.status&&z&&!z(X.status)?H(U("Request failed with status code "+X.status,X.config,null,X.request,X)):b(X)}},5134:(He,J,G)=>{"use strict";var U=G(4701),ie=G(3324);He.exports=function(H,X,z){var M=this||ie;return U.forEach(z,function(B){H=B.call(M,H,X)}),H}},3324:(He,J,G)=>{"use strict";var U=G(4701),ie=G(5620),b=G(5124),H={"Content-Type":"application/x-www-form-urlencoded"};function X(B,W){!U.isUndefined(B)&&U.isUndefined(B["Content-Type"])&&(B["Content-Type"]=W)}var L={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function z(){var B;return("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(B=G(7729)),B}(),transformRequest:[function(W,ee){return ie(ee,"Accept"),ie(ee,"Content-Type"),U.isFormData(W)||U.isArrayBuffer(W)||U.isBuffer(W)||U.isStream(W)||U.isFile(W)||U.isBlob(W)?W:U.isArrayBufferView(W)?W.buffer:U.isURLSearchParams(W)?(X(ee,"application/x-www-form-urlencoded;charset=utf-8"),W.toString()):U.isObject(W)||ee&&"application/json"===ee["Content-Type"]?(X(ee,"application/json"),function M(B,W,ee){if(U.isString(B))try{return(W||JSON.parse)(B),U.trim(B)}catch(ue){if("SyntaxError"!==ue.name)throw ue}return(ee||JSON.stringify)(B)}(W)):W}],transformResponse:[function(W){var ee=this.transitional,we=!(ee&&ee.silentJSONParsing)&&"json"===this.responseType;if(we||ee&&ee.forcedJSONParsing&&U.isString(W)&&W.length)try{return JSON.parse(W)}catch(ge){if(we)throw"SyntaxError"===ge.name?b(ge,this,"E_JSON_PARSE"):ge}return W}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(W){return W>=200&&W<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};U.forEach(["delete","get","head"],function(W){L.headers[W]={}}),U.forEach(["post","put","patch"],function(W){L.headers[W]=U.merge(H)}),He.exports=L},2414:He=>{"use strict";He.exports=function(G,U){return function(){for(var b=new Array(arguments.length),H=0;H<b.length;H++)b[H]=arguments[H];return G.apply(U,b)}}},1625:(He,J,G)=>{"use strict";var U=G(4701);function ie(b){return encodeURIComponent(b).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}He.exports=function(H,X,z){if(!X)return H;var M;if(z)M=z(X);else if(U.isURLSearchParams(X))M=X.toString();else{var L=[];U.forEach(X,function(ee,ue){null==ee||(U.isArray(ee)?ue+="[]":ee=[ee],U.forEach(ee,function(we){U.isDate(we)?we=we.toISOString():U.isObject(we)&&(we=JSON.stringify(we)),L.push(ie(ue)+"="+ie(we))}))}),M=L.join("&")}if(M){var B=H.indexOf("#");-1!==B&&(H=H.slice(0,B)),H+=(-1===H.indexOf("?")?"?":"&")+M}return H}},4554:He=>{"use strict";He.exports=function(G,U){return U?G.replace(/\/+$/,"")+"/"+U.replace(/^\/+/,""):G}},5738:(He,J,G)=>{"use strict";var U=G(4701);He.exports=U.isStandardBrowserEnv()?{write:function(H,X,z,M,L,B){var W=[];W.push(H+"="+encodeURIComponent(X)),U.isNumber(z)&&W.push("expires="+new Date(z).toGMTString()),U.isString(M)&&W.push("path="+M),U.isString(L)&&W.push("domain="+L),!0===B&&W.push("secure"),document.cookie=W.join("; ")},read:function(H){var X=document.cookie.match(new RegExp("(^|;\\s*)("+H+")=([^;]*)"));return X?decodeURIComponent(X[3]):null},remove:function(H){this.write(H,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},8692:He=>{"use strict";He.exports=function(G){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(G)}},4603:He=>{"use strict";He.exports=function(G){return"object"==typeof G&&!0===G.isAxiosError}},6100:(He,J,G)=>{"use strict";var U=G(4701);He.exports=U.isStandardBrowserEnv()?function(){var X,b=/(msie|trident)/i.test(navigator.userAgent),H=document.createElement("a");function z(M){var L=M;return b&&(H.setAttribute("href",L),L=H.href),H.setAttribute("href",L),{href:H.href,protocol:H.protocol?H.protocol.replace(/:$/,""):"",host:H.host,search:H.search?H.search.replace(/^\?/,""):"",hash:H.hash?H.hash.replace(/^#/,""):"",hostname:H.hostname,port:H.port,pathname:"/"===H.pathname.charAt(0)?H.pathname:"/"+H.pathname}}return X=z(window.location.href),function(L){var B=U.isString(L)?z(L):L;return B.protocol===X.protocol&&B.host===X.host}}():function(){return!0}},5620:(He,J,G)=>{"use strict";var U=G(4701);He.exports=function(b,H){U.forEach(b,function(z,M){M!==H&&M.toUpperCase()===H.toUpperCase()&&(b[H]=z,delete b[M])})}},2099:(He,J,G)=>{"use strict";var U=G(4701),ie=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];He.exports=function(H){var z,M,L,X={};return H&&U.forEach(H.split("\n"),function(W){if(L=W.indexOf(":"),z=U.trim(W.substr(0,L)).toLowerCase(),M=U.trim(W.substr(L+1)),z){if(X[z]&&ie.indexOf(z)>=0)return;X[z]="set-cookie"===z?(X[z]?X[z]:[]).concat([M]):X[z]?X[z]+", "+M:M}}),X}},9211:He=>{"use strict";He.exports=function(G){return function(ie){return G.apply(null,ie)}}},4828:(He,J,G)=>{"use strict";var U=G(8593),ie={};["object","boolean","number","function","string","symbol"].forEach(function(M,L){ie[M]=function(W){return typeof W===M||"a"+(L<1?"n ":" ")+M}});var b={},H=U.version.split(".");function X(M,L){for(var B=L?L.split("."):H,W=M.split("."),ee=0;ee<3;ee++){if(B[ee]>W[ee])return!0;if(B[ee]<W[ee])return!1}return!1}ie.transitional=function(L,B,W){var ee=B&&X(B);function ue(fe,we){return"[Axios v"+U.version+"] Transitional option '"+fe+"'"+we+(W?". "+W:"")}return function(fe,we,ge){if(!1===L)throw new Error(ue(we," has been removed in "+B));return ee&&!b[we]&&(b[we]=!0,console.warn(ue(we," has been deprecated since v"+B+" and will be removed in the near future"))),!L||L(fe,we,ge)}},He.exports={isOlderVersion:X,assertOptions:function z(M,L,B){if("object"!=typeof M)throw new TypeError("options must be an object");for(var W=Object.keys(M),ee=W.length;ee-- >0;){var ue=W[ee],fe=L[ue];if(fe){var we=M[ue],ge=void 0===we||fe(we,ue,M);if(!0!==ge)throw new TypeError("option "+ue+" must be "+ge)}else if(!0!==B)throw Error("Unknown option "+ue)}},validators:ie}},4701:(He,J,G)=>{"use strict";var U=G(2414),ie=Object.prototype.toString;function b(P){return"[object Array]"===ie.call(P)}function H(P){return void 0===P}function ee(P){return null!==P&&"object"==typeof P}function ue(P){if("[object Object]"!==ie.call(P))return!1;var D=Object.getPrototypeOf(P);return null===D||D===Object.prototype}function Ie(P){return"[object Function]"===ie.call(P)}function Fe(P,D){if(null!=P)if("object"!=typeof P&&(P=[P]),b(P))for(var N=0,V=P.length;N<V;N++)D.call(null,P[N],N,P);else for(var Z in P)Object.prototype.hasOwnProperty.call(P,Z)&&D.call(null,P[Z],Z,P)}He.exports={isArray:b,isArrayBuffer:function z(P){return"[object ArrayBuffer]"===ie.call(P)},isBuffer:function X(P){return null!==P&&!H(P)&&null!==P.constructor&&!H(P.constructor)&&"function"==typeof P.constructor.isBuffer&&P.constructor.isBuffer(P)},isFormData:function M(P){return"undefined"!=typeof FormData&&P instanceof FormData},isArrayBufferView:function L(P){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(P):P&&P.buffer&&P.buffer instanceof ArrayBuffer},isString:function B(P){return"string"==typeof P},isNumber:function W(P){return"number"==typeof P},isObject:ee,isPlainObject:ue,isUndefined:H,isDate:function fe(P){return"[object Date]"===ie.call(P)},isFile:function we(P){return"[object File]"===ie.call(P)},isBlob:function ge(P){return"[object Blob]"===ie.call(P)},isFunction:Ie,isStream:function Xe(P){return ee(P)&&Ie(P.pipe)},isURLSearchParams:function pe(P){return"undefined"!=typeof URLSearchParams&&P instanceof URLSearchParams},isStandardBrowserEnv:function Te(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:Fe,merge:function at(){var P={};function D(Z,j){P[j]=ue(P[j])&&ue(Z)?at(P[j],Z):ue(Z)?at({},Z):b(Z)?Z.slice():Z}for(var N=0,V=arguments.length;N<V;N++)Fe(arguments[N],D);return P},extend:function Ye(P,D,N){return Fe(D,function(Z,j){P[j]=N&&"function"==typeof Z?U(Z,N):Z}),P},trim:function he(P){return P.trim?P.trim():P.replace(/^\s+|\s+$/g,"")},stripBOM:function Ge(P){return 65279===P.charCodeAt(0)&&(P=P.slice(1)),P}}},5343:(He,J)=>{"use strict";J.byteLength=function M(fe){var we=z(fe),Ie=we[1];return 3*(we[0]+Ie)/4-Ie},J.toByteArray=function B(fe){var we,Fe,ge=z(fe),Ie=ge[0],Xe=ge[1],pe=new ie(function L(fe,we,ge){return 3*(we+ge)/4-ge}(0,Ie,Xe)),he=0,Te=Xe>0?Ie-4:Ie;for(Fe=0;Fe<Te;Fe+=4)we=U[fe.charCodeAt(Fe)]<<18|U[fe.charCodeAt(Fe+1)]<<12|U[fe.charCodeAt(Fe+2)]<<6|U[fe.charCodeAt(Fe+3)],pe[he++]=we>>16&255,pe[he++]=we>>8&255,pe[he++]=255&we;return 2===Xe&&(we=U[fe.charCodeAt(Fe)]<<2|U[fe.charCodeAt(Fe+1)]>>4,pe[he++]=255&we),1===Xe&&(we=U[fe.charCodeAt(Fe)]<<10|U[fe.charCodeAt(Fe+1)]<<4|U[fe.charCodeAt(Fe+2)]>>2,pe[he++]=we>>8&255,pe[he++]=255&we),pe},J.fromByteArray=function ue(fe){for(var we,ge=fe.length,Ie=ge%3,Xe=[],he=0,Te=ge-Ie;he<Te;he+=16383)Xe.push(ee(fe,he,he+16383>Te?Te:he+16383));return 1===Ie?Xe.push(G[(we=fe[ge-1])>>2]+G[we<<4&63]+"=="):2===Ie&&Xe.push(G[(we=(fe[ge-2]<<8)+fe[ge-1])>>10]+G[we>>4&63]+G[we<<2&63]+"="),Xe.join("")};for(var G=[],U=[],ie="undefined"!=typeof Uint8Array?Uint8Array:Array,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",H=0,X=b.length;H<X;++H)G[H]=b[H],U[b.charCodeAt(H)]=H;function z(fe){var we=fe.length;if(we%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ge=fe.indexOf("=");return-1===ge&&(ge=we),[ge,ge===we?0:4-ge%4]}function W(fe){return G[fe>>18&63]+G[fe>>12&63]+G[fe>>6&63]+G[63&fe]}function ee(fe,we,ge){for(var Xe=[],pe=we;pe<ge;pe+=3)Xe.push(W((fe[pe]<<16&16711680)+(fe[pe+1]<<8&65280)+(255&fe[pe+2])));return Xe.join("")}U["-".charCodeAt(0)]=62,U["_".charCodeAt(0)]=63},7230:function(He){He.exports=function(J){var G={};function U(ie){if(G[ie])return G[ie].exports;var b=G[ie]={i:ie,l:!1,exports:{}};return J[ie].call(b.exports,b,b.exports,U),b.l=!0,b.exports}return U.m=J,U.c=G,U.d=function(ie,b,H){U.o(ie,b)||Object.defineProperty(ie,b,{enumerable:!0,get:H})},U.r=function(ie){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(ie,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ie,"__esModule",{value:!0})},U.t=function(ie,b){if(1&b&&(ie=U(ie)),8&b||4&b&&"object"==typeof ie&&ie&&ie.__esModule)return ie;var H=Object.create(null);if(U.r(H),Object.defineProperty(H,"default",{enumerable:!0,value:ie}),2&b&&"string"!=typeof ie)for(var X in ie)U.d(H,X,function(z){return ie[z]}.bind(null,X));return H},U.n=function(ie){var b=ie&&ie.__esModule?function(){return ie.default}:function(){return ie};return U.d(b,"a",b),b},U.o=function(ie,b){return Object.prototype.hasOwnProperty.call(ie,b)},U.p="",U(U.s=90)}({17:function(J,G,U){"use strict";G.__esModule=!0,G.default=void 0;var ie=U(18),b=function(){function H(){}return H.getFirstMatch=function(X,z){var M=z.match(X);return M&&M.length>0&&M[1]||""},H.getSecondMatch=function(X,z){var M=z.match(X);return M&&M.length>1&&M[2]||""},H.matchAndReturnConst=function(X,z,M){if(X.test(z))return M},H.getWindowsVersionName=function(X){switch(X){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},H.getMacOSVersionName=function(X){var z=X.split(".").splice(0,2).map(function(M){return parseInt(M,10)||0});if(z.push(0),10===z[0])switch(z[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},H.getAndroidVersionName=function(X){var z=X.split(".").splice(0,2).map(function(M){return parseInt(M,10)||0});if(z.push(0),!(1===z[0]&&z[1]<5))return 1===z[0]&&z[1]<6?"Cupcake":1===z[0]&&z[1]>=6?"Donut":2===z[0]&&z[1]<2?"Eclair":2===z[0]&&2===z[1]?"Froyo":2===z[0]&&z[1]>2?"Gingerbread":3===z[0]?"Honeycomb":4===z[0]&&z[1]<1?"Ice Cream Sandwich":4===z[0]&&z[1]<4?"Jelly Bean":4===z[0]&&z[1]>=4?"KitKat":5===z[0]?"Lollipop":6===z[0]?"Marshmallow":7===z[0]?"Nougat":8===z[0]?"Oreo":9===z[0]?"Pie":void 0},H.getVersionPrecision=function(X){return X.split(".").length},H.compareVersions=function(X,z,M){void 0===M&&(M=!1);var L=H.getVersionPrecision(X),B=H.getVersionPrecision(z),W=Math.max(L,B),ee=0,ue=H.map([X,z],function(fe){var we=W-H.getVersionPrecision(fe),ge=fe+new Array(we+1).join(".0");return H.map(ge.split("."),function(Ie){return new Array(20-Ie.length).join("0")+Ie}).reverse()});for(M&&(ee=W-Math.min(L,B)),W-=1;W>=ee;){if(ue[0][W]>ue[1][W])return 1;if(ue[0][W]===ue[1][W]){if(W===ee)return 0;W-=1}else if(ue[0][W]<ue[1][W])return-1}},H.map=function(X,z){var M,L=[];if(Array.prototype.map)return Array.prototype.map.call(X,z);for(M=0;M<X.length;M+=1)L.push(z(X[M]));return L},H.find=function(X,z){var M,L;if(Array.prototype.find)return Array.prototype.find.call(X,z);for(M=0,L=X.length;M<L;M+=1){var B=X[M];if(z(B,M))return B}},H.assign=function(X){for(var z,M,L=X,B=arguments.length,W=new Array(B>1?B-1:0),ee=1;ee<B;ee++)W[ee-1]=arguments[ee];if(Object.assign)return Object.assign.apply(Object,[X].concat(W));var ue=function(){var fe=W[z];"object"==typeof fe&&null!==fe&&Object.keys(fe).forEach(function(we){L[we]=fe[we]})};for(z=0,M=W.length;z<M;z+=1)ue();return X},H.getBrowserAlias=function(X){return ie.BROWSER_ALIASES_MAP[X]},H.getBrowserTypeByAlias=function(X){return ie.BROWSER_MAP[X]||""},H}();G.default=b,J.exports=G.default},18:function(J,G,U){"use strict";G.__esModule=!0,G.ENGINE_MAP=G.OS_MAP=G.PLATFORMS_MAP=G.BROWSER_MAP=G.BROWSER_ALIASES_MAP=void 0,G.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},G.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},G.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},G.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},G.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(J,G,U){"use strict";G.__esModule=!0,G.default=void 0;var ie,b=(ie=U(91))&&ie.__esModule?ie:{default:ie},H=U(18);function X(M,L){for(var B=0;B<L.length;B++){var W=L[B];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(M,W.key,W)}}var z=function(){function M(){}var L,W;return M.getParser=function(ee,ue){if(void 0===ue&&(ue=!1),"string"!=typeof ee)throw new Error("UserAgent should be a string");return new b.default(ee,ue)},M.parse=function(ee){return new b.default(ee).getResult()},L=M,W=[{key:"BROWSER_MAP",get:function(){return H.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return H.ENGINE_MAP}},{key:"OS_MAP",get:function(){return H.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return H.PLATFORMS_MAP}}],null&&X(L.prototype,null),W&&X(L,W),M}();G.default=z,J.exports=G.default},91:function(J,G,U){"use strict";G.__esModule=!0,G.default=void 0;var ie=M(U(92)),b=M(U(93)),H=M(U(94)),X=M(U(95)),z=M(U(17));function M(B){return B&&B.__esModule?B:{default:B}}var L=function(){function B(ee,ue){if(void 0===ue&&(ue=!1),null==ee||""===ee)throw new Error("UserAgent parameter can't be empty");this._ua=ee,this.parsedResult={},!0!==ue&&this.parse()}var W=B.prototype;return W.getUA=function(){return this._ua},W.test=function(ee){return ee.test(this._ua)},W.parseBrowser=function(){var ee=this;this.parsedResult.browser={};var ue=z.default.find(ie.default,function(fe){if("function"==typeof fe.test)return fe.test(ee);if(fe.test instanceof Array)return fe.test.some(function(we){return ee.test(we)});throw new Error("Browser's test function is not valid")});return ue&&(this.parsedResult.browser=ue.describe(this.getUA())),this.parsedResult.browser},W.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},W.getBrowserName=function(ee){return ee?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},W.getBrowserVersion=function(){return this.getBrowser().version},W.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},W.parseOS=function(){var ee=this;this.parsedResult.os={};var ue=z.default.find(b.default,function(fe){if("function"==typeof fe.test)return fe.test(ee);if(fe.test instanceof Array)return fe.test.some(function(we){return ee.test(we)});throw new Error("Browser's test function is not valid")});return ue&&(this.parsedResult.os=ue.describe(this.getUA())),this.parsedResult.os},W.getOSName=function(ee){var ue=this.getOS().name;return ee?String(ue).toLowerCase()||"":ue||""},W.getOSVersion=function(){return this.getOS().version},W.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},W.getPlatformType=function(ee){void 0===ee&&(ee=!1);var ue=this.getPlatform().type;return ee?String(ue).toLowerCase()||"":ue||""},W.parsePlatform=function(){var ee=this;this.parsedResult.platform={};var ue=z.default.find(H.default,function(fe){if("function"==typeof fe.test)return fe.test(ee);if(fe.test instanceof Array)return fe.test.some(function(we){return ee.test(we)});throw new Error("Browser's test function is not valid")});return ue&&(this.parsedResult.platform=ue.describe(this.getUA())),this.parsedResult.platform},W.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},W.getEngineName=function(ee){return ee?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},W.parseEngine=function(){var ee=this;this.parsedResult.engine={};var ue=z.default.find(X.default,function(fe){if("function"==typeof fe.test)return fe.test(ee);if(fe.test instanceof Array)return fe.test.some(function(we){return ee.test(we)});throw new Error("Browser's test function is not valid")});return ue&&(this.parsedResult.engine=ue.describe(this.getUA())),this.parsedResult.engine},W.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},W.getResult=function(){return z.default.assign({},this.parsedResult)},W.satisfies=function(ee){var ue=this,fe={},we=0,ge={},Ie=0;if(Object.keys(ee).forEach(function(Ge){var P=ee[Ge];"string"==typeof P?(ge[Ge]=P,Ie+=1):"object"==typeof P&&(fe[Ge]=P,we+=1)}),we>0){var Xe=Object.keys(fe),pe=z.default.find(Xe,function(Ge){return ue.isOS(Ge)});if(pe){var he=this.satisfies(fe[pe]);if(void 0!==he)return he}var Te=z.default.find(Xe,function(Ge){return ue.isPlatform(Ge)});if(Te){var Fe=this.satisfies(fe[Te]);if(void 0!==Fe)return Fe}}if(Ie>0){var at=Object.keys(ge),Ye=z.default.find(at,function(Ge){return ue.isBrowser(Ge,!0)});if(void 0!==Ye)return this.compareVersion(ge[Ye])}},W.isBrowser=function(ee,ue){void 0===ue&&(ue=!1);var fe=this.getBrowserName().toLowerCase(),we=ee.toLowerCase(),ge=z.default.getBrowserTypeByAlias(we);return ue&&ge&&(we=ge.toLowerCase()),we===fe},W.compareVersion=function(ee){var ue=[0],fe=ee,we=!1,ge=this.getBrowserVersion();if("string"==typeof ge)return">"===ee[0]||"<"===ee[0]?(fe=ee.substr(1),"="===ee[1]?(we=!0,fe=ee.substr(2)):ue=[],ue.push(">"===ee[0]?1:-1)):"="===ee[0]?fe=ee.substr(1):"~"===ee[0]&&(we=!0,fe=ee.substr(1)),ue.indexOf(z.default.compareVersions(ge,fe,we))>-1},W.isOS=function(ee){return this.getOSName(!0)===String(ee).toLowerCase()},W.isPlatform=function(ee){return this.getPlatformType(!0)===String(ee).toLowerCase()},W.isEngine=function(ee){return this.getEngineName(!0)===String(ee).toLowerCase()},W.is=function(ee,ue){return void 0===ue&&(ue=!1),this.isBrowser(ee,ue)||this.isOS(ee)||this.isPlatform(ee)},W.some=function(ee){var ue=this;return void 0===ee&&(ee=[]),ee.some(function(fe){return ue.is(fe)})},B}();G.default=L,J.exports=G.default},92:function(J,G,U){"use strict";G.__esModule=!0,G.default=void 0;var ie,b=(ie=U(17))&&ie.__esModule?ie:{default:ie},H=/version\/(\d+(\.?_?\d+)+)/i;G.default=[{test:[/googlebot/i],describe:function(z){var M={name:"Googlebot"},L=b.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,z)||b.default.getFirstMatch(H,z);return L&&(M.version=L),M}},{test:[/opera/i],describe:function(z){var M={name:"Opera"},L=b.default.getFirstMatch(H,z)||b.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/opr\/|opios/i],describe:function(z){var M={name:"Opera"},L=b.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,z)||b.default.getFirstMatch(H,z);return L&&(M.version=L),M}},{test:[/SamsungBrowser/i],describe:function(z){var M={name:"Samsung Internet for Android"},L=b.default.getFirstMatch(H,z)||b.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/Whale/i],describe:function(z){var M={name:"NAVER Whale Browser"},L=b.default.getFirstMatch(H,z)||b.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/MZBrowser/i],describe:function(z){var M={name:"MZ Browser"},L=b.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,z)||b.default.getFirstMatch(H,z);return L&&(M.version=L),M}},{test:[/focus/i],describe:function(z){var M={name:"Focus"},L=b.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,z)||b.default.getFirstMatch(H,z);return L&&(M.version=L),M}},{test:[/swing/i],describe:function(z){var M={name:"Swing"},L=b.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,z)||b.default.getFirstMatch(H,z);return L&&(M.version=L),M}},{test:[/coast/i],describe:function(z){var M={name:"Opera Coast"},L=b.default.getFirstMatch(H,z)||b.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(z){var M={name:"Opera Touch"},L=b.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,z)||b.default.getFirstMatch(H,z);return L&&(M.version=L),M}},{test:[/yabrowser/i],describe:function(z){var M={name:"Yandex Browser"},L=b.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,z)||b.default.getFirstMatch(H,z);return L&&(M.version=L),M}},{test:[/ucbrowser/i],describe:function(z){var M={name:"UC Browser"},L=b.default.getFirstMatch(H,z)||b.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/Maxthon|mxios/i],describe:function(z){var M={name:"Maxthon"},L=b.default.getFirstMatch(H,z)||b.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/epiphany/i],describe:function(z){var M={name:"Epiphany"},L=b.default.getFirstMatch(H,z)||b.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/puffin/i],describe:function(z){var M={name:"Puffin"},L=b.default.getFirstMatch(H,z)||b.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/sleipnir/i],describe:function(z){var M={name:"Sleipnir"},L=b.default.getFirstMatch(H,z)||b.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/k-meleon/i],describe:function(z){var M={name:"K-Meleon"},L=b.default.getFirstMatch(H,z)||b.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/micromessenger/i],describe:function(z){var M={name:"WeChat"},L=b.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,z)||b.default.getFirstMatch(H,z);return L&&(M.version=L),M}},{test:[/qqbrowser/i],describe:function(z){var M={name:/qqbrowserlite/i.test(z)?"QQ Browser Lite":"QQ Browser"},L=b.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,z)||b.default.getFirstMatch(H,z);return L&&(M.version=L),M}},{test:[/msie|trident/i],describe:function(z){var M={name:"Internet Explorer"},L=b.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/\sedg\//i],describe:function(z){var M={name:"Microsoft Edge"},L=b.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/edg([ea]|ios)/i],describe:function(z){var M={name:"Microsoft Edge"},L=b.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/vivaldi/i],describe:function(z){var M={name:"Vivaldi"},L=b.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/seamonkey/i],describe:function(z){var M={name:"SeaMonkey"},L=b.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/sailfish/i],describe:function(z){var M={name:"Sailfish"},L=b.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,z);return L&&(M.version=L),M}},{test:[/silk/i],describe:function(z){var M={name:"Amazon Silk"},L=b.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/phantom/i],describe:function(z){var M={name:"PhantomJS"},L=b.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/slimerjs/i],describe:function(z){var M={name:"SlimerJS"},L=b.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(z){var M={name:"BlackBerry"},L=b.default.getFirstMatch(H,z)||b.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/(web|hpw)[o0]s/i],describe:function(z){var M={name:"WebOS Browser"},L=b.default.getFirstMatch(H,z)||b.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/bada/i],describe:function(z){var M={name:"Bada"},L=b.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/tizen/i],describe:function(z){var M={name:"Tizen"},L=b.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,z)||b.default.getFirstMatch(H,z);return L&&(M.version=L),M}},{test:[/qupzilla/i],describe:function(z){var M={name:"QupZilla"},L=b.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,z)||b.default.getFirstMatch(H,z);return L&&(M.version=L),M}},{test:[/firefox|iceweasel|fxios/i],describe:function(z){var M={name:"Firefox"},L=b.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/electron/i],describe:function(z){var M={name:"Electron"},L=b.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/MiuiBrowser/i],describe:function(z){var M={name:"Miui"},L=b.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/chromium/i],describe:function(z){var M={name:"Chromium"},L=b.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,z)||b.default.getFirstMatch(H,z);return L&&(M.version=L),M}},{test:[/chrome|crios|crmo/i],describe:function(z){var M={name:"Chrome"},L=b.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/GSA/i],describe:function(z){var M={name:"Google Search"},L=b.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:function(z){var M=!z.test(/like android/i),L=z.test(/android/i);return M&&L},describe:function(z){var M={name:"Android Browser"},L=b.default.getFirstMatch(H,z);return L&&(M.version=L),M}},{test:[/playstation 4/i],describe:function(z){var M={name:"PlayStation 4"},L=b.default.getFirstMatch(H,z);return L&&(M.version=L),M}},{test:[/safari|applewebkit/i],describe:function(z){var M={name:"Safari"},L=b.default.getFirstMatch(H,z);return L&&(M.version=L),M}},{test:[/.*/i],describe:function(z){var M=-1!==z.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:b.default.getFirstMatch(M,z),version:b.default.getSecondMatch(M,z)}}}],J.exports=G.default},93:function(J,G,U){"use strict";G.__esModule=!0,G.default=void 0;var ie,b=(ie=U(17))&&ie.__esModule?ie:{default:ie},H=U(18);G.default=[{test:[/Roku\/DVP/],describe:function(z){var M=b.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,z);return{name:H.OS_MAP.Roku,version:M}}},{test:[/windows phone/i],describe:function(z){var M=b.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,z);return{name:H.OS_MAP.WindowsPhone,version:M}}},{test:[/windows /i],describe:function(z){var M=b.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,z),L=b.default.getWindowsVersionName(M);return{name:H.OS_MAP.Windows,version:M,versionName:L}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(z){var M={name:H.OS_MAP.iOS},L=b.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,z);return L&&(M.version=L),M}},{test:[/macintosh/i],describe:function(z){var M=b.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,z).replace(/[_\s]/g,"."),L=b.default.getMacOSVersionName(M),B={name:H.OS_MAP.MacOS,version:M};return L&&(B.versionName=L),B}},{test:[/(ipod|iphone|ipad)/i],describe:function(z){var M=b.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,z).replace(/[_\s]/g,".");return{name:H.OS_MAP.iOS,version:M}}},{test:function(z){var M=!z.test(/like android/i),L=z.test(/android/i);return M&&L},describe:function(z){var M=b.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,z),L=b.default.getAndroidVersionName(M),B={name:H.OS_MAP.Android,version:M};return L&&(B.versionName=L),B}},{test:[/(web|hpw)[o0]s/i],describe:function(z){var M=b.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,z),L={name:H.OS_MAP.WebOS};return M&&M.length&&(L.version=M),L}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(z){var M=b.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,z)||b.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,z)||b.default.getFirstMatch(/\bbb(\d+)/i,z);return{name:H.OS_MAP.BlackBerry,version:M}}},{test:[/bada/i],describe:function(z){var M=b.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,z);return{name:H.OS_MAP.Bada,version:M}}},{test:[/tizen/i],describe:function(z){var M=b.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,z);return{name:H.OS_MAP.Tizen,version:M}}},{test:[/linux/i],describe:function(){return{name:H.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:H.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(z){var M=b.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,z);return{name:H.OS_MAP.PlayStation4,version:M}}}],J.exports=G.default},94:function(J,G,U){"use strict";G.__esModule=!0,G.default=void 0;var ie,b=(ie=U(17))&&ie.__esModule?ie:{default:ie},H=U(18);G.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(z){var M=b.default.getFirstMatch(/(can-l01)/i,z)&&"Nova",L={type:H.PLATFORMS_MAP.mobile,vendor:"Huawei"};return M&&(L.model=M),L}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:H.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:H.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:H.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:H.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:H.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:H.PLATFORMS_MAP.tablet}}},{test:function(z){var M=z.test(/ipod|iphone/i),L=z.test(/like (ipod|iphone)/i);return M&&!L},describe:function(z){var M=b.default.getFirstMatch(/(ipod|iphone)/i,z);return{type:H.PLATFORMS_MAP.mobile,vendor:"Apple",model:M}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:H.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:H.PLATFORMS_MAP.mobile}}},{test:function(z){return"blackberry"===z.getBrowserName(!0)},describe:function(){return{type:H.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(z){return"bada"===z.getBrowserName(!0)},describe:function(){return{type:H.PLATFORMS_MAP.mobile}}},{test:function(z){return"windows phone"===z.getBrowserName()},describe:function(){return{type:H.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(z){var M=Number(String(z.getOSVersion()).split(".")[0]);return"android"===z.getOSName(!0)&&M>=3},describe:function(){return{type:H.PLATFORMS_MAP.tablet}}},{test:function(z){return"android"===z.getOSName(!0)},describe:function(){return{type:H.PLATFORMS_MAP.mobile}}},{test:function(z){return"macos"===z.getOSName(!0)},describe:function(){return{type:H.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(z){return"windows"===z.getOSName(!0)},describe:function(){return{type:H.PLATFORMS_MAP.desktop}}},{test:function(z){return"linux"===z.getOSName(!0)},describe:function(){return{type:H.PLATFORMS_MAP.desktop}}},{test:function(z){return"playstation 4"===z.getOSName(!0)},describe:function(){return{type:H.PLATFORMS_MAP.tv}}},{test:function(z){return"roku"===z.getOSName(!0)},describe:function(){return{type:H.PLATFORMS_MAP.tv}}}],J.exports=G.default},95:function(J,G,U){"use strict";G.__esModule=!0,G.default=void 0;var ie,b=(ie=U(17))&&ie.__esModule?ie:{default:ie},H=U(18);G.default=[{test:function(z){return"microsoft edge"===z.getBrowserName(!0)},describe:function(z){if(/\sedg\//i.test(z))return{name:H.ENGINE_MAP.Blink};var M=b.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,z);return{name:H.ENGINE_MAP.EdgeHTML,version:M}}},{test:[/trident/i],describe:function(z){var M={name:H.ENGINE_MAP.Trident},L=b.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:function(z){return z.test(/presto/i)},describe:function(z){var M={name:H.ENGINE_MAP.Presto},L=b.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:function(z){var M=z.test(/gecko/i),L=z.test(/like gecko/i);return M&&!L},describe:function(z){var M={name:H.ENGINE_MAP.Gecko},L=b.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:H.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(z){var M={name:H.ENGINE_MAP.WebKit},L=b.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,z);return L&&(M.version=L),M}}],J.exports=G.default}})},3172:(He,J,G)=>{"use strict";var ie=G(5343),b=G(8461),H=G(6425);function z(){return L.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function M(Me,te){if(z()<te)throw new RangeError("Invalid typed array length");return L.TYPED_ARRAY_SUPPORT?(Me=new Uint8Array(te)).__proto__=L.prototype:(null===Me&&(Me=new L(te)),Me.length=te),Me}function L(Me,te,ne){if(!(L.TYPED_ARRAY_SUPPORT||this instanceof L))return new L(Me,te,ne);if("number"==typeof Me){if("string"==typeof te)throw new Error("If encoding is specified then the first argument must be a string");return ue(this,Me)}return B(this,Me,te,ne)}function B(Me,te,ne,ze){if("number"==typeof te)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&te instanceof ArrayBuffer?function ge(Me,te,ne,ze){if(ne<0||te.byteLength<ne)throw new RangeError("'offset' is out of bounds");if(te.byteLength<ne+(ze||0))throw new RangeError("'length' is out of bounds");return te=void 0===ne&&void 0===ze?new Uint8Array(te):void 0===ze?new Uint8Array(te,ne):new Uint8Array(te,ne,ze),L.TYPED_ARRAY_SUPPORT?(Me=te).__proto__=L.prototype:Me=we(Me,te),Me}(Me,te,ne,ze):"string"==typeof te?function fe(Me,te,ne){if(("string"!=typeof ne||""===ne)&&(ne="utf8"),!L.isEncoding(ne))throw new TypeError('"encoding" must be a valid string encoding');var ze=0|he(te,ne),ut=(Me=M(Me,ze)).write(te,ne);return ut!==ze&&(Me=Me.slice(0,ut)),Me}(Me,te,ne):function Ie(Me,te){if(L.isBuffer(te)){var ne=0|Xe(te.length);return 0===(Me=M(Me,ne)).length||te.copy(Me,0,0,ne),Me}if(te){if("undefined"!=typeof ArrayBuffer&&te.buffer instanceof ArrayBuffer||"length"in te)return"number"!=typeof te.length||function ha(Me){return Me!=Me}(te.length)?M(Me,0):we(Me,te);if("Buffer"===te.type&&H(te.data))return we(Me,te.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(Me,te)}function W(Me){if("number"!=typeof Me)throw new TypeError('"size" argument must be a number');if(Me<0)throw new RangeError('"size" argument must not be negative')}function ue(Me,te){if(W(te),Me=M(Me,te<0?0:0|Xe(te)),!L.TYPED_ARRAY_SUPPORT)for(var ne=0;ne<te;++ne)Me[ne]=0;return Me}function we(Me,te){var ne=te.length<0?0:0|Xe(te.length);Me=M(Me,ne);for(var ze=0;ze<ne;ze+=1)Me[ze]=255&te[ze];return Me}function Xe(Me){if(Me>=z())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+z().toString(16)+" bytes");return 0|Me}function he(Me,te){if(L.isBuffer(Me))return Me.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(Me)||Me instanceof ArrayBuffer))return Me.byteLength;"string"!=typeof Me&&(Me=""+Me);var ne=Me.length;if(0===ne)return 0;for(var ze=!1;;)switch(te){case"ascii":case"latin1":case"binary":return ne;case"utf8":case"utf-8":case void 0:return fr(Me).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ne;case"hex":return ne>>>1;case"base64":return wt(Me).length;default:if(ze)return fr(Me).length;te=(""+te).toLowerCase(),ze=!0}}function Te(Me,te,ne){var ze=!1;if((void 0===te||te<0)&&(te=0),te>this.length||((void 0===ne||ne>this.length)&&(ne=this.length),ne<=0)||(ne>>>=0)<=(te>>>=0))return"";for(Me||(Me="utf8");;)switch(Me){case"hex":return vt(this,te,ne);case"utf8":case"utf-8":return de(this,te,ne);case"ascii":return xe(this,te,ne);case"latin1":case"binary":return pt(this,te,ne);case"base64":return j(this,te,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return We(this,te,ne);default:if(ze)throw new TypeError("Unknown encoding: "+Me);Me=(Me+"").toLowerCase(),ze=!0}}function Fe(Me,te,ne){var ze=Me[te];Me[te]=Me[ne],Me[ne]=ze}function at(Me,te,ne,ze,ut){if(0===Me.length)return-1;if("string"==typeof ne?(ze=ne,ne=0):ne>2147483647?ne=2147483647:ne<-2147483648&&(ne=-2147483648),ne=+ne,isNaN(ne)&&(ne=ut?0:Me.length-1),ne<0&&(ne=Me.length+ne),ne>=Me.length){if(ut)return-1;ne=Me.length-1}else if(ne<0){if(!ut)return-1;ne=0}if("string"==typeof te&&(te=L.from(te,ze)),L.isBuffer(te))return 0===te.length?-1:Ye(Me,te,ne,ze,ut);if("number"==typeof te)return te&=255,L.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?ut?Uint8Array.prototype.indexOf.call(Me,te,ne):Uint8Array.prototype.lastIndexOf.call(Me,te,ne):Ye(Me,[te],ne,ze,ut);throw new TypeError("val must be string, number or Buffer")}function Ye(Me,te,ne,ze,ut){var jr,Rt=1,Mt=Me.length,hr=te.length;if(void 0!==ze&&("ucs2"===(ze=String(ze).toLowerCase())||"ucs-2"===ze||"utf16le"===ze||"utf-16le"===ze)){if(Me.length<2||te.length<2)return-1;Rt=2,Mt/=2,hr/=2,ne/=2}function zr(Js,Wu){return 1===Rt?Js[Wu]:Js.readUInt16BE(Wu*Rt)}if(ut){var Wi=-1;for(jr=ne;jr<Mt;jr++)if(zr(Me,jr)===zr(te,-1===Wi?0:jr-Wi)){if(-1===Wi&&(Wi=jr),jr-Wi+1===hr)return Wi*Rt}else-1!==Wi&&(jr-=jr-Wi),Wi=-1}else for(ne+hr>Mt&&(ne=Mt-hr),jr=ne;jr>=0;jr--){for(var Kr=!0,Ws=0;Ws<hr;Ws++)if(zr(Me,jr+Ws)!==zr(te,Ws)){Kr=!1;break}if(Kr)return jr}return-1}function Ge(Me,te,ne,ze){ne=Number(ne)||0;var ut=Me.length-ne;ze?(ze=Number(ze))>ut&&(ze=ut):ze=ut;var Rt=te.length;if(Rt%2!=0)throw new TypeError("Invalid hex string");ze>Rt/2&&(ze=Rt/2);for(var Mt=0;Mt<ze;++Mt){var hr=parseInt(te.substr(2*Mt,2),16);if(isNaN(hr))return Mt;Me[ne+Mt]=hr}return Mt}function P(Me,te,ne,ze){return bt(fr(te,Me.length-ne),Me,ne,ze)}function D(Me,te,ne,ze){return bt(function Xi(Me){for(var te=[],ne=0;ne<Me.length;++ne)te.push(255&Me.charCodeAt(ne));return te}(te),Me,ne,ze)}function N(Me,te,ne,ze){return D(Me,te,ne,ze)}function V(Me,te,ne,ze){return bt(wt(te),Me,ne,ze)}function Z(Me,te,ne,ze){return bt(function _i(Me,te){for(var ne,ze,Rt=[],Mt=0;Mt<Me.length&&!((te-=2)<0);++Mt)ze=(ne=Me.charCodeAt(Mt))>>8,Rt.push(ne%256),Rt.push(ze);return Rt}(te,Me.length-ne),Me,ne,ze)}function j(Me,te,ne){return ie.fromByteArray(0===te&&ne===Me.length?Me:Me.slice(te,ne))}function de(Me,te,ne){ne=Math.min(Me.length,ne);for(var ze=[],ut=te;ut<ne;){var zr,jr,Wi,Kr,Rt=Me[ut],Mt=null,hr=Rt>239?4:Rt>223?3:Rt>191?2:1;if(ut+hr<=ne)switch(hr){case 1:Rt<128&&(Mt=Rt);break;case 2:128==(192&(zr=Me[ut+1]))&&(Kr=(31&Rt)<<6|63&zr)>127&&(Mt=Kr);break;case 3:jr=Me[ut+2],128==(192&(zr=Me[ut+1]))&&128==(192&jr)&&(Kr=(15&Rt)<<12|(63&zr)<<6|63&jr)>2047&&(Kr<55296||Kr>57343)&&(Mt=Kr);break;case 4:jr=Me[ut+2],Wi=Me[ut+3],128==(192&(zr=Me[ut+1]))&&128==(192&jr)&&128==(192&Wi)&&(Kr=(15&Rt)<<18|(63&zr)<<12|(63&jr)<<6|63&Wi)>65535&&Kr<1114112&&(Mt=Kr)}null===Mt?(Mt=65533,hr=1):Mt>65535&&(ze.push((Mt-=65536)>>>10&1023|55296),Mt=56320|1023&Mt),ze.push(Mt),ut+=hr}return function _t(Me){var te=Me.length;if(te<=4096)return String.fromCharCode.apply(String,Me);for(var ne="",ze=0;ze<te;)ne+=String.fromCharCode.apply(String,Me.slice(ze,ze+=4096));return ne}(ze)}function xe(Me,te,ne){var ze="";ne=Math.min(Me.length,ne);for(var ut=te;ut<ne;++ut)ze+=String.fromCharCode(127&Me[ut]);return ze}function pt(Me,te,ne){var ze="";ne=Math.min(Me.length,ne);for(var ut=te;ut<ne;++ut)ze+=String.fromCharCode(Me[ut]);return ze}function vt(Me,te,ne){var ze=Me.length;(!te||te<0)&&(te=0),(!ne||ne<0||ne>ze)&&(ne=ze);for(var ut="",Rt=te;Rt<ne;++Rt)ut+=rr(Me[Rt]);return ut}function We(Me,te,ne){for(var ze=Me.slice(te,ne),ut="",Rt=0;Rt<ze.length;Rt+=2)ut+=String.fromCharCode(ze[Rt]+256*ze[Rt+1]);return ut}function yt(Me,te,ne){if(Me%1!=0||Me<0)throw new RangeError("offset is not uint");if(Me+te>ne)throw new RangeError("Trying to access beyond buffer length")}function Kt(Me,te,ne,ze,ut,Rt){if(!L.isBuffer(Me))throw new TypeError('"buffer" argument must be a Buffer instance');if(te>ut||te<Rt)throw new RangeError('"value" argument is out of bounds');if(ne+ze>Me.length)throw new RangeError("Index out of range")}function tn(Me,te,ne,ze){te<0&&(te=65535+te+1);for(var ut=0,Rt=Math.min(Me.length-ne,2);ut<Rt;++ut)Me[ne+ut]=(te&255<<8*(ze?ut:1-ut))>>>8*(ze?ut:1-ut)}function Sn(Me,te,ne,ze){te<0&&(te=4294967295+te+1);for(var ut=0,Rt=Math.min(Me.length-ne,4);ut<Rt;++ut)Me[ne+ut]=te>>>8*(ze?ut:3-ut)&255}function xt(Me,te,ne,ze,ut,Rt){if(ne+ze>Me.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("Index out of range")}function Cn(Me,te,ne,ze,ut){return ut||xt(Me,0,ne,4),b.write(Me,te,ne,ze,23,4),ne+4}function gn(Me,te,ne,ze,ut){return ut||xt(Me,0,ne,8),b.write(Me,te,ne,ze,52,8),ne+8}J.lW=L,J.h2=50,L.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:function X(){try{var Me=new Uint8Array(1);return Me.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===Me.foo()&&"function"==typeof Me.subarray&&0===Me.subarray(1,1).byteLength}catch(te){return!1}}(),z(),L.poolSize=8192,L._augment=function(Me){return Me.__proto__=L.prototype,Me},L.from=function(Me,te,ne){return B(null,Me,te,ne)},L.TYPED_ARRAY_SUPPORT&&(L.prototype.__proto__=Uint8Array.prototype,L.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&L[Symbol.species]===L&&Object.defineProperty(L,Symbol.species,{value:null,configurable:!0})),L.alloc=function(Me,te,ne){return function ee(Me,te,ne,ze){return W(te),te<=0?M(Me,te):void 0!==ne?"string"==typeof ze?M(Me,te).fill(ne,ze):M(Me,te).fill(ne):M(Me,te)}(null,Me,te,ne)},L.allocUnsafe=function(Me){return ue(null,Me)},L.allocUnsafeSlow=function(Me){return ue(null,Me)},L.isBuffer=function(te){return!(null==te||!te._isBuffer)},L.compare=function(te,ne){if(!L.isBuffer(te)||!L.isBuffer(ne))throw new TypeError("Arguments must be Buffers");if(te===ne)return 0;for(var ze=te.length,ut=ne.length,Rt=0,Mt=Math.min(ze,ut);Rt<Mt;++Rt)if(te[Rt]!==ne[Rt]){ze=te[Rt],ut=ne[Rt];break}return ze<ut?-1:ut<ze?1:0},L.isEncoding=function(te){switch(String(te).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},L.concat=function(te,ne){if(!H(te))throw new TypeError('"list" argument must be an Array of Buffers');if(0===te.length)return L.alloc(0);var ze;if(void 0===ne)for(ne=0,ze=0;ze<te.length;++ze)ne+=te[ze].length;var ut=L.allocUnsafe(ne),Rt=0;for(ze=0;ze<te.length;++ze){var Mt=te[ze];if(!L.isBuffer(Mt))throw new TypeError('"list" argument must be an Array of Buffers');Mt.copy(ut,Rt),Rt+=Mt.length}return ut},L.byteLength=he,L.prototype._isBuffer=!0,L.prototype.swap16=function(){var te=this.length;if(te%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ne=0;ne<te;ne+=2)Fe(this,ne,ne+1);return this},L.prototype.swap32=function(){var te=this.length;if(te%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ne=0;ne<te;ne+=4)Fe(this,ne,ne+3),Fe(this,ne+1,ne+2);return this},L.prototype.swap64=function(){var te=this.length;if(te%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ne=0;ne<te;ne+=8)Fe(this,ne,ne+7),Fe(this,ne+1,ne+6),Fe(this,ne+2,ne+5),Fe(this,ne+3,ne+4);return this},L.prototype.toString=function(){var te=0|this.length;return 0===te?"":0===arguments.length?de(this,0,te):Te.apply(this,arguments)},L.prototype.equals=function(te){if(!L.isBuffer(te))throw new TypeError("Argument must be a Buffer");return this===te||0===L.compare(this,te)},L.prototype.inspect=function(){var te="",ne=J.h2;return this.length>0&&(te=this.toString("hex",0,ne).match(/.{2}/g).join(" "),this.length>ne&&(te+=" ... ")),"<Buffer "+te+">"},L.prototype.compare=function(te,ne,ze,ut,Rt){if(!L.isBuffer(te))throw new TypeError("Argument must be a Buffer");if(void 0===ne&&(ne=0),void 0===ze&&(ze=te?te.length:0),void 0===ut&&(ut=0),void 0===Rt&&(Rt=this.length),ne<0||ze>te.length||ut<0||Rt>this.length)throw new RangeError("out of range index");if(ut>=Rt&&ne>=ze)return 0;if(ut>=Rt)return-1;if(ne>=ze)return 1;if(this===te)return 0;for(var Mt=(Rt>>>=0)-(ut>>>=0),hr=(ze>>>=0)-(ne>>>=0),zr=Math.min(Mt,hr),jr=this.slice(ut,Rt),Wi=te.slice(ne,ze),Kr=0;Kr<zr;++Kr)if(jr[Kr]!==Wi[Kr]){Mt=jr[Kr],hr=Wi[Kr];break}return Mt<hr?-1:hr<Mt?1:0},L.prototype.includes=function(te,ne,ze){return-1!==this.indexOf(te,ne,ze)},L.prototype.indexOf=function(te,ne,ze){return at(this,te,ne,ze,!0)},L.prototype.lastIndexOf=function(te,ne,ze){return at(this,te,ne,ze,!1)},L.prototype.write=function(te,ne,ze,ut){if(void 0===ne)ut="utf8",ze=this.length,ne=0;else if(void 0===ze&&"string"==typeof ne)ut=ne,ze=this.length,ne=0;else{if(!isFinite(ne))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ne|=0,isFinite(ze)?(ze|=0,void 0===ut&&(ut="utf8")):(ut=ze,ze=void 0)}var Rt=this.length-ne;if((void 0===ze||ze>Rt)&&(ze=Rt),te.length>0&&(ze<0||ne<0)||ne>this.length)throw new RangeError("Attempt to write outside buffer bounds");ut||(ut="utf8");for(var Mt=!1;;)switch(ut){case"hex":return Ge(this,te,ne,ze);case"utf8":case"utf-8":return P(this,te,ne,ze);case"ascii":return D(this,te,ne,ze);case"latin1":case"binary":return N(this,te,ne,ze);case"base64":return V(this,te,ne,ze);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,te,ne,ze);default:if(Mt)throw new TypeError("Unknown encoding: "+ut);ut=(""+ut).toLowerCase(),Mt=!0}},L.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},L.prototype.slice=function(te,ne){var ut,ze=this.length;if((te=~~te)<0?(te+=ze)<0&&(te=0):te>ze&&(te=ze),(ne=void 0===ne?ze:~~ne)<0?(ne+=ze)<0&&(ne=0):ne>ze&&(ne=ze),ne<te&&(ne=te),L.TYPED_ARRAY_SUPPORT)(ut=this.subarray(te,ne)).__proto__=L.prototype;else{var Rt=ne-te;ut=new L(Rt,void 0);for(var Mt=0;Mt<Rt;++Mt)ut[Mt]=this[Mt+te]}return ut},L.prototype.readUIntLE=function(te,ne,ze){te|=0,ne|=0,ze||yt(te,ne,this.length);for(var ut=this[te],Rt=1,Mt=0;++Mt<ne&&(Rt*=256);)ut+=this[te+Mt]*Rt;return ut},L.prototype.readUIntBE=function(te,ne,ze){te|=0,ne|=0,ze||yt(te,ne,this.length);for(var ut=this[te+--ne],Rt=1;ne>0&&(Rt*=256);)ut+=this[te+--ne]*Rt;return ut},L.prototype.readUInt8=function(te,ne){return ne||yt(te,1,this.length),this[te]},L.prototype.readUInt16LE=function(te,ne){return ne||yt(te,2,this.length),this[te]|this[te+1]<<8},L.prototype.readUInt16BE=function(te,ne){return ne||yt(te,2,this.length),this[te]<<8|this[te+1]},L.prototype.readUInt32LE=function(te,ne){return ne||yt(te,4,this.length),(this[te]|this[te+1]<<8|this[te+2]<<16)+16777216*this[te+3]},L.prototype.readUInt32BE=function(te,ne){return ne||yt(te,4,this.length),16777216*this[te]+(this[te+1]<<16|this[te+2]<<8|this[te+3])},L.prototype.readIntLE=function(te,ne,ze){te|=0,ne|=0,ze||yt(te,ne,this.length);for(var ut=this[te],Rt=1,Mt=0;++Mt<ne&&(Rt*=256);)ut+=this[te+Mt]*Rt;return ut>=(Rt*=128)&&(ut-=Math.pow(2,8*ne)),ut},L.prototype.readIntBE=function(te,ne,ze){te|=0,ne|=0,ze||yt(te,ne,this.length);for(var ut=ne,Rt=1,Mt=this[te+--ut];ut>0&&(Rt*=256);)Mt+=this[te+--ut]*Rt;return Mt>=(Rt*=128)&&(Mt-=Math.pow(2,8*ne)),Mt},L.prototype.readInt8=function(te,ne){return ne||yt(te,1,this.length),128&this[te]?-1*(255-this[te]+1):this[te]},L.prototype.readInt16LE=function(te,ne){ne||yt(te,2,this.length);var ze=this[te]|this[te+1]<<8;return 32768&ze?4294901760|ze:ze},L.prototype.readInt16BE=function(te,ne){ne||yt(te,2,this.length);var ze=this[te+1]|this[te]<<8;return 32768&ze?4294901760|ze:ze},L.prototype.readInt32LE=function(te,ne){return ne||yt(te,4,this.length),this[te]|this[te+1]<<8|this[te+2]<<16|this[te+3]<<24},L.prototype.readInt32BE=function(te,ne){return ne||yt(te,4,this.length),this[te]<<24|this[te+1]<<16|this[te+2]<<8|this[te+3]},L.prototype.readFloatLE=function(te,ne){return ne||yt(te,4,this.length),b.read(this,te,!0,23,4)},L.prototype.readFloatBE=function(te,ne){return ne||yt(te,4,this.length),b.read(this,te,!1,23,4)},L.prototype.readDoubleLE=function(te,ne){return ne||yt(te,8,this.length),b.read(this,te,!0,52,8)},L.prototype.readDoubleBE=function(te,ne){return ne||yt(te,8,this.length),b.read(this,te,!1,52,8)},L.prototype.writeUIntLE=function(te,ne,ze,ut){te=+te,ne|=0,ze|=0,ut||Kt(this,te,ne,ze,Math.pow(2,8*ze)-1,0);var Mt=1,hr=0;for(this[ne]=255&te;++hr<ze&&(Mt*=256);)this[ne+hr]=te/Mt&255;return ne+ze},L.prototype.writeUIntBE=function(te,ne,ze,ut){te=+te,ne|=0,ze|=0,ut||Kt(this,te,ne,ze,Math.pow(2,8*ze)-1,0);var Mt=ze-1,hr=1;for(this[ne+Mt]=255&te;--Mt>=0&&(hr*=256);)this[ne+Mt]=te/hr&255;return ne+ze},L.prototype.writeUInt8=function(te,ne,ze){return te=+te,ne|=0,ze||Kt(this,te,ne,1,255,0),L.TYPED_ARRAY_SUPPORT||(te=Math.floor(te)),this[ne]=255&te,ne+1},L.prototype.writeUInt16LE=function(te,ne,ze){return te=+te,ne|=0,ze||Kt(this,te,ne,2,65535,0),L.TYPED_ARRAY_SUPPORT?(this[ne]=255&te,this[ne+1]=te>>>8):tn(this,te,ne,!0),ne+2},L.prototype.writeUInt16BE=function(te,ne,ze){return te=+te,ne|=0,ze||Kt(this,te,ne,2,65535,0),L.TYPED_ARRAY_SUPPORT?(this[ne]=te>>>8,this[ne+1]=255&te):tn(this,te,ne,!1),ne+2},L.prototype.writeUInt32LE=function(te,ne,ze){return te=+te,ne|=0,ze||Kt(this,te,ne,4,4294967295,0),L.TYPED_ARRAY_SUPPORT?(this[ne+3]=te>>>24,this[ne+2]=te>>>16,this[ne+1]=te>>>8,this[ne]=255&te):Sn(this,te,ne,!0),ne+4},L.prototype.writeUInt32BE=function(te,ne,ze){return te=+te,ne|=0,ze||Kt(this,te,ne,4,4294967295,0),L.TYPED_ARRAY_SUPPORT?(this[ne]=te>>>24,this[ne+1]=te>>>16,this[ne+2]=te>>>8,this[ne+3]=255&te):Sn(this,te,ne,!1),ne+4},L.prototype.writeIntLE=function(te,ne,ze,ut){if(te=+te,ne|=0,!ut){var Rt=Math.pow(2,8*ze-1);Kt(this,te,ne,ze,Rt-1,-Rt)}var Mt=0,hr=1,zr=0;for(this[ne]=255&te;++Mt<ze&&(hr*=256);)te<0&&0===zr&&0!==this[ne+Mt-1]&&(zr=1),this[ne+Mt]=(te/hr>>0)-zr&255;return ne+ze},L.prototype.writeIntBE=function(te,ne,ze,ut){if(te=+te,ne|=0,!ut){var Rt=Math.pow(2,8*ze-1);Kt(this,te,ne,ze,Rt-1,-Rt)}var Mt=ze-1,hr=1,zr=0;for(this[ne+Mt]=255&te;--Mt>=0&&(hr*=256);)te<0&&0===zr&&0!==this[ne+Mt+1]&&(zr=1),this[ne+Mt]=(te/hr>>0)-zr&255;return ne+ze},L.prototype.writeInt8=function(te,ne,ze){return te=+te,ne|=0,ze||Kt(this,te,ne,1,127,-128),L.TYPED_ARRAY_SUPPORT||(te=Math.floor(te)),te<0&&(te=255+te+1),this[ne]=255&te,ne+1},L.prototype.writeInt16LE=function(te,ne,ze){return te=+te,ne|=0,ze||Kt(this,te,ne,2,32767,-32768),L.TYPED_ARRAY_SUPPORT?(this[ne]=255&te,this[ne+1]=te>>>8):tn(this,te,ne,!0),ne+2},L.prototype.writeInt16BE=function(te,ne,ze){return te=+te,ne|=0,ze||Kt(this,te,ne,2,32767,-32768),L.TYPED_ARRAY_SUPPORT?(this[ne]=te>>>8,this[ne+1]=255&te):tn(this,te,ne,!1),ne+2},L.prototype.writeInt32LE=function(te,ne,ze){return te=+te,ne|=0,ze||Kt(this,te,ne,4,2147483647,-2147483648),L.TYPED_ARRAY_SUPPORT?(this[ne]=255&te,this[ne+1]=te>>>8,this[ne+2]=te>>>16,this[ne+3]=te>>>24):Sn(this,te,ne,!0),ne+4},L.prototype.writeInt32BE=function(te,ne,ze){return te=+te,ne|=0,ze||Kt(this,te,ne,4,2147483647,-2147483648),te<0&&(te=4294967295+te+1),L.TYPED_ARRAY_SUPPORT?(this[ne]=te>>>24,this[ne+1]=te>>>16,this[ne+2]=te>>>8,this[ne+3]=255&te):Sn(this,te,ne,!1),ne+4},L.prototype.writeFloatLE=function(te,ne,ze){return Cn(this,te,ne,!0,ze)},L.prototype.writeFloatBE=function(te,ne,ze){return Cn(this,te,ne,!1,ze)},L.prototype.writeDoubleLE=function(te,ne,ze){return gn(this,te,ne,!0,ze)},L.prototype.writeDoubleBE=function(te,ne,ze){return gn(this,te,ne,!1,ze)},L.prototype.copy=function(te,ne,ze,ut){if(ze||(ze=0),!ut&&0!==ut&&(ut=this.length),ne>=te.length&&(ne=te.length),ne||(ne=0),ut>0&&ut<ze&&(ut=ze),ut===ze||0===te.length||0===this.length)return 0;if(ne<0)throw new RangeError("targetStart out of bounds");if(ze<0||ze>=this.length)throw new RangeError("sourceStart out of bounds");if(ut<0)throw new RangeError("sourceEnd out of bounds");ut>this.length&&(ut=this.length),te.length-ne<ut-ze&&(ut=te.length-ne+ze);var Mt,Rt=ut-ze;if(this===te&&ze<ne&&ne<ut)for(Mt=Rt-1;Mt>=0;--Mt)te[Mt+ne]=this[Mt+ze];else if(Rt<1e3||!L.TYPED_ARRAY_SUPPORT)for(Mt=0;Mt<Rt;++Mt)te[Mt+ne]=this[Mt+ze];else Uint8Array.prototype.set.call(te,this.subarray(ze,ze+Rt),ne);return Rt},L.prototype.fill=function(te,ne,ze,ut){if("string"==typeof te){if("string"==typeof ne?(ut=ne,ne=0,ze=this.length):"string"==typeof ze&&(ut=ze,ze=this.length),1===te.length){var Rt=te.charCodeAt(0);Rt<256&&(te=Rt)}if(void 0!==ut&&"string"!=typeof ut)throw new TypeError("encoding must be a string");if("string"==typeof ut&&!L.isEncoding(ut))throw new TypeError("Unknown encoding: "+ut)}else"number"==typeof te&&(te&=255);if(ne<0||this.length<ne||this.length<ze)throw new RangeError("Out of range index");if(ze<=ne)return this;var Mt;if(ne>>>=0,ze=void 0===ze?this.length:ze>>>0,te||(te=0),"number"==typeof te)for(Mt=ne;Mt<ze;++Mt)this[Mt]=te;else{var hr=L.isBuffer(te)?te:fr(new L(te,ut).toString()),zr=hr.length;for(Mt=0;Mt<ze-ne;++Mt)this[Mt+ne]=hr[Mt%zr]}return this};var sr=/[^+\/0-9A-Za-z-_]/g;function rr(Me){return Me<16?"0"+Me.toString(16):Me.toString(16)}function fr(Me,te){te=te||1/0;for(var ne,ze=Me.length,ut=null,Rt=[],Mt=0;Mt<ze;++Mt){if((ne=Me.charCodeAt(Mt))>55295&&ne<57344){if(!ut){if(ne>56319){(te-=3)>-1&&Rt.push(239,191,189);continue}if(Mt+1===ze){(te-=3)>-1&&Rt.push(239,191,189);continue}ut=ne;continue}if(ne<56320){(te-=3)>-1&&Rt.push(239,191,189),ut=ne;continue}ne=65536+(ut-55296<<10|ne-56320)}else ut&&(te-=3)>-1&&Rt.push(239,191,189);if(ut=null,ne<128){if((te-=1)<0)break;Rt.push(ne)}else if(ne<2048){if((te-=2)<0)break;Rt.push(ne>>6|192,63&ne|128)}else if(ne<65536){if((te-=3)<0)break;Rt.push(ne>>12|224,ne>>6&63|128,63&ne|128)}else{if(!(ne<1114112))throw new Error("Invalid code point");if((te-=4)<0)break;Rt.push(ne>>18|240,ne>>12&63|128,ne>>6&63|128,63&ne|128)}}return Rt}function wt(Me){return ie.toByteArray(function Ut(Me){if((Me=function K(Me){return Me.trim?Me.trim():Me.replace(/^\s+|\s+$/g,"")}(Me).replace(sr,"")).length<2)return"";for(;Me.length%4!=0;)Me+="=";return Me}(Me))}function bt(Me,te,ne,ze){for(var ut=0;ut<ze&&!(ut+ne>=te.length||ut>=Me.length);++ut)te[ut+ne]=Me[ut];return ut}},7691:(He,J,G)=>{"use strict";const U=G(1395),ie=G(3724),X=new(G(7231))({maxSize:1e5}),z=L=>!("object"!=typeof L||null===L||L instanceof RegExp||L instanceof Error||L instanceof Date),M=(L,B)=>{if(!z(L))return L;B=UC({deep:!1,pascalCase:!1},B);const{exclude:W,pascalCase:ee,stopPaths:ue,deep:fe}=B,we=new Set(ue),ge=Ie=>(Xe,pe)=>{if(fe&&z(pe)){const he=void 0===Ie?Xe:`${Ie}.${Xe}`;we.has(he)||(pe=U(pe,ge(he)))}if(!W||!((L,B)=>L.some(W=>"string"==typeof W?W===B:(W.lastIndex=0,W.test(B))))(W,Xe)){const he=ee?`${Xe}_`:Xe;if(X.has(he))Xe=X.get(he);else{const Te=ie(Xe,{pascalCase:ee});Xe.length<100&&X.set(he,Te),Xe=Te}}return[Xe,pe]};return U(L,ge(void 0))};He.exports=(L,B)=>Array.isArray(L)?Object.keys(L).map(W=>M(L[W],B)):M(L,B)},3724:He=>{"use strict";const G=(U,ie)=>{if("string"!=typeof U&&!Array.isArray(U))throw new TypeError("Expected the input to be `string | string[]`");return ie=Object.assign({pascalCase:!1},ie),U=Array.isArray(U)?U.map(X=>X.trim()).filter(X=>X.length).join("-"):U.trim(),0===U.length?"":1===U.length?ie.pascalCase?U.toUpperCase():U.toLowerCase():(U!==U.toLowerCase()&&(U=(U=>{let ie=!1,b=!1,H=!1;for(let X=0;X<U.length;X++){const z=U[X];ie&&/[a-zA-Z]/.test(z)&&z.toUpperCase()===z?(U=U.slice(0,X)+"-"+U.slice(X),ie=!1,H=b,b=!0,X++):b&&H&&/[a-zA-Z]/.test(z)&&z.toLowerCase()===z?(U=U.slice(0,X-1)+"-"+U.slice(X-1),H=b,b=!1,ie=!0):(ie=z.toLowerCase()===z&&z.toUpperCase()!==z,H=b,b=z.toUpperCase()===z&&z.toLowerCase()!==z)}return U})(U)),U=U.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(X,z)=>z.toUpperCase()).replace(/\d+(\w|$)/g,X=>X.toUpperCase()),X=U,ie.pascalCase?X.charAt(0).toUpperCase()+X.slice(1):X);var X};He.exports=G,He.exports.default=G},3555:(He,J)=>{"use strict";J.Q=function b(z,M){if("string"!=typeof z)throw new TypeError("argument str must be a string");for(var L={},B=M||{},W=z.split(";"),ee=B.decode||G,ue=0;ue<W.length;ue++){var fe=W[ue],we=fe.indexOf("=");if(!(we<0)){var ge=fe.substring(0,we).trim();if(null==L[ge]){var Ie=fe.substring(we+1,fe.length).trim();'"'===Ie[0]&&(Ie=Ie.slice(1,-1)),L[ge]=X(Ie,ee)}}}return L},J.q=function H(z,M,L){var B=L||{},W=B.encode||U;if("function"!=typeof W)throw new TypeError("option encode is invalid");if(!ie.test(z))throw new TypeError("argument name is invalid");var ee=W(M);if(ee&&!ie.test(ee))throw new TypeError("argument val is invalid");var ue=z+"="+ee;if(null!=B.maxAge){var fe=B.maxAge-0;if(isNaN(fe)||!isFinite(fe))throw new TypeError("option maxAge is invalid");ue+="; Max-Age="+Math.floor(fe)}if(B.domain){if(!ie.test(B.domain))throw new TypeError("option domain is invalid");ue+="; Domain="+B.domain}if(B.path){if(!ie.test(B.path))throw new TypeError("option path is invalid");ue+="; Path="+B.path}if(B.expires){if("function"!=typeof B.expires.toUTCString)throw new TypeError("option expires is invalid");ue+="; Expires="+B.expires.toUTCString()}if(B.httpOnly&&(ue+="; HttpOnly"),B.secure&&(ue+="; Secure"),B.sameSite)switch("string"==typeof B.sameSite?B.sameSite.toLowerCase():B.sameSite){case!0:ue+="; SameSite=Strict";break;case"lax":ue+="; SameSite=Lax";break;case"strict":ue+="; SameSite=Strict";break;case"none":ue+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return ue};var G=decodeURIComponent,U=encodeURIComponent,ie=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function X(z,M){try{return M(z)}catch(L){return z}}},7585:function(He,J,G){var U;He.exports=(U=U||function(ie,b){var H;if("undefined"!=typeof window&&window.crypto&&(H=window.crypto),"undefined"!=typeof self&&self.crypto&&(H=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(H=globalThis.crypto),!H&&"undefined"!=typeof window&&window.msCrypto&&(H=window.msCrypto),!H&&"undefined"!=typeof global&&global.crypto&&(H=global.crypto),!H)try{H=G(2480)}catch(pe){}var X=function(){if(H){if("function"==typeof H.getRandomValues)try{return H.getRandomValues(new Uint32Array(1))[0]}catch(pe){}if("function"==typeof H.randomBytes)try{return H.randomBytes(4).readInt32LE()}catch(pe){}}throw new Error("Native crypto module could not be used to get secure random number.")},z=Object.create||function(){function pe(){}return function(he){var Te;return pe.prototype=he,Te=new pe,pe.prototype=null,Te}}(),M={},L=M.lib={},B=L.Base={extend:function(pe){var he=z(this);return pe&&he.mixIn(pe),(!he.hasOwnProperty("init")||this.init===he.init)&&(he.init=function(){he.$super.init.apply(this,arguments)}),he.init.prototype=he,he.$super=this,he},create:function(){var pe=this.extend();return pe.init.apply(pe,arguments),pe},init:function(){},mixIn:function(pe){for(var he in pe)pe.hasOwnProperty(he)&&(this[he]=pe[he]);pe.hasOwnProperty("toString")&&(this.toString=pe.toString)},clone:function(){return this.init.prototype.extend(this)}},W=L.WordArray=B.extend({init:function(pe,he){pe=this.words=pe||[],this.sigBytes=null!=he?he:4*pe.length},toString:function(pe){return(pe||ue).stringify(this)},concat:function(pe){var he=this.words,Te=pe.words,Fe=this.sigBytes,at=pe.sigBytes;if(this.clamp(),Fe%4)for(var Ye=0;Ye<at;Ye++)he[Fe+Ye>>>2]|=(Te[Ye>>>2]>>>24-Ye%4*8&255)<<24-(Fe+Ye)%4*8;else for(var P=0;P<at;P+=4)he[Fe+P>>>2]=Te[P>>>2];return this.sigBytes+=at,this},clamp:function(){var pe=this.words,he=this.sigBytes;pe[he>>>2]&=4294967295<<32-he%4*8,pe.length=ie.ceil(he/4)},clone:function(){var pe=B.clone.call(this);return pe.words=this.words.slice(0),pe},random:function(pe){for(var he=[],Te=0;Te<pe;Te+=4)he.push(X());return new W.init(he,pe)}}),ee=M.enc={},ue=ee.Hex={stringify:function(pe){for(var he=pe.words,Te=pe.sigBytes,Fe=[],at=0;at<Te;at++){var Ye=he[at>>>2]>>>24-at%4*8&255;Fe.push((Ye>>>4).toString(16)),Fe.push((15&Ye).toString(16))}return Fe.join("")},parse:function(pe){for(var he=pe.length,Te=[],Fe=0;Fe<he;Fe+=2)Te[Fe>>>3]|=parseInt(pe.substr(Fe,2),16)<<24-Fe%8*4;return new W.init(Te,he/2)}},fe=ee.Latin1={stringify:function(pe){for(var he=pe.words,Te=pe.sigBytes,Fe=[],at=0;at<Te;at++)Fe.push(String.fromCharCode(he[at>>>2]>>>24-at%4*8&255));return Fe.join("")},parse:function(pe){for(var he=pe.length,Te=[],Fe=0;Fe<he;Fe++)Te[Fe>>>2]|=(255&pe.charCodeAt(Fe))<<24-Fe%4*8;return new W.init(Te,he)}},we=ee.Utf8={stringify:function(pe){try{return decodeURIComponent(escape(fe.stringify(pe)))}catch(he){throw new Error("Malformed UTF-8 data")}},parse:function(pe){return fe.parse(unescape(encodeURIComponent(pe)))}},ge=L.BufferedBlockAlgorithm=B.extend({reset:function(){this._data=new W.init,this._nDataBytes=0},_append:function(pe){"string"==typeof pe&&(pe=we.parse(pe)),this._data.concat(pe),this._nDataBytes+=pe.sigBytes},_process:function(pe){var he,Te=this._data,Fe=Te.words,at=Te.sigBytes,Ye=this.blockSize,P=at/(4*Ye),D=(P=pe?ie.ceil(P):ie.max((0|P)-this._minBufferSize,0))*Ye,N=ie.min(4*D,at);if(D){for(var V=0;V<D;V+=Ye)this._doProcessBlock(Fe,V);he=Fe.splice(0,D),Te.sigBytes-=N}return new W.init(he,N)},clone:function(){var pe=B.clone.call(this);return pe._data=this._data.clone(),pe},_minBufferSize:0}),Xe=(L.Hasher=ge.extend({cfg:B.extend(),init:function(pe){this.cfg=this.cfg.extend(pe),this.reset()},reset:function(){ge.reset.call(this),this._doReset()},update:function(pe){return this._append(pe),this._process(),this},finalize:function(pe){return pe&&this._append(pe),this._doFinalize()},blockSize:16,_createHelper:function(pe){return function(he,Te){return new pe.init(Te).finalize(he)}},_createHmacHelper:function(pe){return function(he,Te){return new Xe.HMAC.init(pe,Te).finalize(he)}}}),M.algo={});return M}(Math),U)},8319:function(He,J,G){var U,H;He.exports=(U=G(7585),H=U.lib.WordArray,U.enc.Base64={stringify:function(L){var B=L.words,W=L.sigBytes,ee=this._map;L.clamp();for(var ue=[],fe=0;fe<W;fe+=3)for(var Xe=(B[fe>>>2]>>>24-fe%4*8&255)<<16|(B[fe+1>>>2]>>>24-(fe+1)%4*8&255)<<8|B[fe+2>>>2]>>>24-(fe+2)%4*8&255,pe=0;pe<4&&fe+.75*pe<W;pe++)ue.push(ee.charAt(Xe>>>6*(3-pe)&63));var he=ee.charAt(64);if(he)for(;ue.length%4;)ue.push(he);return ue.join("")},parse:function(L){var B=L.length,W=this._map,ee=this._reverseMap;if(!ee){ee=this._reverseMap=[];for(var ue=0;ue<W.length;ue++)ee[W.charCodeAt(ue)]=ue}var fe=W.charAt(64);if(fe){var we=L.indexOf(fe);-1!==we&&(B=we)}return function M(L,B,W){for(var ee=[],ue=0,fe=0;fe<B;fe++)if(fe%4){var we=W[L.charCodeAt(fe-1)]<<fe%4*2,ge=W[L.charCodeAt(fe)]>>>6-fe%4*2;ee[ue>>>2]|=(we|ge)<<24-ue%4*8,ue++}return H.create(ee,ue)}(L,B,ee)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},U.enc.Base64)},6135:function(He,J,G){var U;He.exports=(U=G(7585),G(1817),G(3764),U.HmacSHA256)},3764:function(He,J,G){var U,z;He.exports=(U=G(7585),z=U.enc.Utf8,void(U.algo.HMAC=U.lib.Base.extend({init:function(B,W){B=this._hasher=new B.init,"string"==typeof W&&(W=z.parse(W));var ee=B.blockSize,ue=4*ee;W.sigBytes>ue&&(W=B.finalize(W)),W.clamp();for(var fe=this._oKey=W.clone(),we=this._iKey=W.clone(),ge=fe.words,Ie=we.words,Xe=0;Xe<ee;Xe++)ge[Xe]^=1549556828,Ie[Xe]^=909522486;fe.sigBytes=we.sigBytes=ue,this.reset()},reset:function(){var B=this._hasher;B.reset(),B.update(this._iKey)},update:function(B){return this._hasher.update(B),this},finalize:function(B){var W=this._hasher,ee=W.finalize(B);return W.reset(),W.finalize(this._oKey.clone().concat(ee))}})))},7412:function(He,J,G){var U;He.exports=(U=G(7585),function(){if("function"==typeof ArrayBuffer){var H=U.lib.WordArray,X=H.init,z=H.init=function(M){if(M instanceof ArrayBuffer&&(M=new Uint8Array(M)),(M instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&M instanceof Uint8ClampedArray||M instanceof Int16Array||M instanceof Uint16Array||M instanceof Int32Array||M instanceof Uint32Array||M instanceof Float32Array||M instanceof Float64Array)&&(M=new Uint8Array(M.buffer,M.byteOffset,M.byteLength)),M instanceof Uint8Array){for(var L=M.byteLength,B=[],W=0;W<L;W++)B[W>>>2]|=M[W]<<24-W%4*8;X.call(this,B,L)}else X.apply(this,arguments)};z.prototype=H}}(),U.lib.WordArray)},1817:function(He,J,G){var U;He.exports=(U=G(7585),function(ie){var b=U,H=b.lib,X=H.WordArray,z=H.Hasher,M=b.algo,L=[],B=[];!function(){function ue(Ie){for(var Xe=ie.sqrt(Ie),pe=2;pe<=Xe;pe++)if(!(Ie%pe))return!1;return!0}function fe(Ie){return 4294967296*(Ie-(0|Ie))|0}for(var we=2,ge=0;ge<64;)ue(we)&&(ge<8&&(L[ge]=fe(ie.pow(we,.5))),B[ge]=fe(ie.pow(we,1/3)),ge++),we++}();var W=[],ee=M.SHA256=z.extend({_doReset:function(){this._hash=new X.init(L.slice(0))},_doProcessBlock:function(ue,fe){for(var we=this._hash.words,ge=we[0],Ie=we[1],Xe=we[2],pe=we[3],he=we[4],Te=we[5],Fe=we[6],at=we[7],Ye=0;Ye<64;Ye++){if(Ye<16)W[Ye]=0|ue[fe+Ye];else{var Ge=W[Ye-15],D=W[Ye-2];W[Ye]=((Ge<<25|Ge>>>7)^(Ge<<14|Ge>>>18)^Ge>>>3)+W[Ye-7]+((D<<15|D>>>17)^(D<<13|D>>>19)^D>>>10)+W[Ye-16]}var Z=ge&Ie^ge&Xe^Ie&Xe,$e=at+((he<<26|he>>>6)^(he<<21|he>>>11)^(he<<7|he>>>25))+(he&Te^~he&Fe)+B[Ye]+W[Ye];at=Fe,Fe=Te,Te=he,he=pe+$e|0,pe=Xe,Xe=Ie,Ie=ge,ge=$e+(((ge<<30|ge>>>2)^(ge<<19|ge>>>13)^(ge<<10|ge>>>22))+Z)|0}we[0]=we[0]+ge|0,we[1]=we[1]+Ie|0,we[2]=we[2]+Xe|0,we[3]=we[3]+pe|0,we[4]=we[4]+he|0,we[5]=we[5]+Te|0,we[6]=we[6]+Fe|0,we[7]=we[7]+at|0},_doFinalize:function(){var ue=this._data,fe=ue.words,we=8*this._nDataBytes,ge=8*ue.sigBytes;return fe[ge>>>5]|=128<<24-ge%32,fe[14+(ge+64>>>9<<4)]=ie.floor(we/4294967296),fe[15+(ge+64>>>9<<4)]=we,ue.sigBytes=4*fe.length,this._process(),this._hash},clone:function(){var ue=z.clone.call(this);return ue._hash=this._hash.clone(),ue}});b.SHA256=z._createHelper(ee),b.HmacSHA256=z._createHmacHelper(ee)}(Math),U.SHA256)},9069:He=>{"use strict";var U,J="object"==typeof Reflect?Reflect:null,G=J&&"function"==typeof J.apply?J.apply:function(Te,Fe,at){return Function.prototype.apply.call(Te,Fe,at)};U=J&&"function"==typeof J.ownKeys?J.ownKeys:Object.getOwnPropertySymbols?function(Te){return Object.getOwnPropertyNames(Te).concat(Object.getOwnPropertySymbols(Te))}:function(Te){return Object.getOwnPropertyNames(Te)};var b=Number.isNaN||function(Te){return Te!=Te};function H(){H.init.call(this)}He.exports=H,He.exports.once=function Ie(he,Te){return new Promise(function(Fe,at){function Ye(P){he.removeListener(Te,Ge),at(P)}function Ge(){"function"==typeof he.removeListener&&he.removeListener("error",Ye),Fe([].slice.call(arguments))}pe(he,Te,Ge,{once:!0}),"error"!==Te&&function Xe(he,Te,Fe){"function"==typeof he.on&&pe(he,"error",Te,Fe)}(he,Ye,{once:!0})})},H.EventEmitter=H,H.prototype._events=void 0,H.prototype._eventsCount=0,H.prototype._maxListeners=void 0;var X=10;function z(he){if("function"!=typeof he)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof he)}function M(he){return void 0===he._maxListeners?H.defaultMaxListeners:he._maxListeners}function L(he,Te,Fe,at){var Ye,Ge,P;if(z(Fe),void 0===(Ge=he._events)?(Ge=he._events=Object.create(null),he._eventsCount=0):(void 0!==Ge.newListener&&(he.emit("newListener",Te,Fe.listener?Fe.listener:Fe),Ge=he._events),P=Ge[Te]),void 0===P)P=Ge[Te]=Fe,++he._eventsCount;else if("function"==typeof P?P=Ge[Te]=at?[Fe,P]:[P,Fe]:at?P.unshift(Fe):P.push(Fe),(Ye=M(he))>0&&P.length>Ye&&!P.warned){P.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(Te)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=he,D.type=Te,D.count=P.length,function ie(he){console&&console.warn&&console.warn(he)}(D)}return he}function B(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function W(he,Te,Fe){var at={fired:!1,wrapFn:void 0,target:he,type:Te,listener:Fe},Ye=B.bind(at);return Ye.listener=Fe,at.wrapFn=Ye,Ye}function ee(he,Te,Fe){var at=he._events;if(void 0===at)return[];var Ye=at[Te];return void 0===Ye?[]:"function"==typeof Ye?Fe?[Ye.listener||Ye]:[Ye]:Fe?function ge(he){for(var Te=new Array(he.length),Fe=0;Fe<Te.length;++Fe)Te[Fe]=he[Fe].listener||he[Fe];return Te}(Ye):fe(Ye,Ye.length)}function ue(he){var Te=this._events;if(void 0!==Te){var Fe=Te[he];if("function"==typeof Fe)return 1;if(void 0!==Fe)return Fe.length}return 0}function fe(he,Te){for(var Fe=new Array(Te),at=0;at<Te;++at)Fe[at]=he[at];return Fe}function pe(he,Te,Fe,at){if("function"==typeof he.on)at.once?he.once(Te,Fe):he.on(Te,Fe);else{if("function"!=typeof he.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof he);he.addEventListener(Te,function Ye(Ge){at.once&&he.removeEventListener(Te,Ye),Fe(Ge)})}}Object.defineProperty(H,"defaultMaxListeners",{enumerable:!0,get:function(){return X},set:function(he){if("number"!=typeof he||he<0||b(he))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+he+".");X=he}}),H.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},H.prototype.setMaxListeners=function(Te){if("number"!=typeof Te||Te<0||b(Te))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Te+".");return this._maxListeners=Te,this},H.prototype.getMaxListeners=function(){return M(this)},H.prototype.emit=function(Te){for(var Fe=[],at=1;at<arguments.length;at++)Fe.push(arguments[at]);var Ye="error"===Te,Ge=this._events;if(void 0!==Ge)Ye=Ye&&void 0===Ge.error;else if(!Ye)return!1;if(Ye){var P;if(Fe.length>0&&(P=Fe[0]),P instanceof Error)throw P;var D=new Error("Unhandled error."+(P?" ("+P.message+")":""));throw D.context=P,D}var N=Ge[Te];if(void 0===N)return!1;if("function"==typeof N)G(N,this,Fe);else{var V=N.length,Z=fe(N,V);for(at=0;at<V;++at)G(Z[at],this,Fe)}return!0},H.prototype.on=H.prototype.addListener=function(Te,Fe){return L(this,Te,Fe,!1)},H.prototype.prependListener=function(Te,Fe){return L(this,Te,Fe,!0)},H.prototype.once=function(Te,Fe){return z(Fe),this.on(Te,W(this,Te,Fe)),this},H.prototype.prependOnceListener=function(Te,Fe){return z(Fe),this.prependListener(Te,W(this,Te,Fe)),this},H.prototype.off=H.prototype.removeListener=function(Te,Fe){var at,Ye,Ge,P,D;if(z(Fe),void 0===(Ye=this._events))return this;if(void 0===(at=Ye[Te]))return this;if(at===Fe||at.listener===Fe)0==--this._eventsCount?this._events=Object.create(null):(delete Ye[Te],Ye.removeListener&&this.emit("removeListener",Te,at.listener||Fe));else if("function"!=typeof at){for(Ge=-1,P=at.length-1;P>=0;P--)if(at[P]===Fe||at[P].listener===Fe){D=at[P].listener,Ge=P;break}if(Ge<0)return this;0===Ge?at.shift():function we(he,Te){for(;Te+1<he.length;Te++)he[Te]=he[Te+1];he.pop()}(at,Ge),1===at.length&&(Ye[Te]=at[0]),void 0!==Ye.removeListener&&this.emit("removeListener",Te,D||Fe)}return this},H.prototype.removeAllListeners=function(Te){var Fe,at,Ye;if(void 0===(at=this._events))return this;if(void 0===at.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==at[Te]&&(0==--this._eventsCount?this._events=Object.create(null):delete at[Te]),this;if(0===arguments.length){var P,Ge=Object.keys(at);for(Ye=0;Ye<Ge.length;++Ye)"removeListener"!==(P=Ge[Ye])&&this.removeAllListeners(P);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Fe=at[Te]))this.removeListener(Te,Fe);else if(void 0!==Fe)for(Ye=Fe.length-1;Ye>=0;Ye--)this.removeListener(Te,Fe[Ye]);return this},H.prototype.listeners=function(Te){return ee(this,Te,!0)},H.prototype.rawListeners=function(Te){return ee(this,Te,!1)},H.listenerCount=function(he,Te){return"function"==typeof he.listenerCount?he.listenerCount(Te):ue.call(he,Te)},H.prototype.listenerCount=ue,H.prototype.eventNames=function(){return this._eventsCount>0?U(this._events):[]}},8107:(He,J,G)=>{"use strict";const U=G(1919).buildOptions,ie={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(we){return we},attrValueProcessor:function(we){return we}},b=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function H(we){this.options=U(we,ie,b),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=ue),this.isCDATA=this.options.cdataTagName?fe:function(){return!1},this.replaceCDATAstr=X,this.replaceCDATAarr=z,this.options.format?(this.indentate=ee,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=W,this.buildObjNode=L):(this.buildTextNode=B,this.buildObjNode=M),this.buildTextValNode=B,this.buildObjectNode=M}function X(we,ge){return we=this.options.tagValueProcessor(""+we),""===this.options.cdataPositionChar||""===we?we+"<![CDATA["+ge+"]]"+this.tagEndChar:we.replace(this.options.cdataPositionChar,"<![CDATA["+ge+"]]"+this.tagEndChar)}function z(we,ge){if(we=this.options.tagValueProcessor(""+we),""===this.options.cdataPositionChar||""===we)return we+"<![CDATA["+ge.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let Ie in ge)we=we.replace(this.options.cdataPositionChar,"<![CDATA["+ge[Ie]+"]]>");return we+this.newLine}function M(we,ge,Ie,Xe){return Ie&&!we.includes("<")?this.indentate(Xe)+"<"+ge+Ie+">"+we+"</"+ge+this.tagEndChar:this.indentate(Xe)+"<"+ge+Ie+this.tagEndChar+we+this.indentate(Xe)+"</"+ge+this.tagEndChar}function L(we,ge,Ie,Xe){return""!==we?this.buildObjectNode(we,ge,Ie,Xe):this.indentate(Xe)+"<"+ge+Ie+"/"+this.tagEndChar}function B(we,ge,Ie,Xe){return this.indentate(Xe)+"<"+ge+Ie+">"+this.options.tagValueProcessor(we)+"</"+ge+this.tagEndChar}function W(we,ge,Ie,Xe){return""!==we?this.buildTextValNode(we,ge,Ie,Xe):this.indentate(Xe)+"<"+ge+Ie+"/"+this.tagEndChar}function ee(we){return this.options.indentBy.repeat(we)}function ue(we){return!!we.startsWith(this.options.attributeNamePrefix)&&we.substr(this.attrPrefixLen)}function fe(we){return we===this.options.cdataTagName}H.prototype.parse=function(we){return this.j2x(we,0).val},H.prototype.j2x=function(we,ge){let Ie="",Xe="";const pe=Object.keys(we),he=pe.length;for(let Te=0;Te<he;Te++){const Fe=pe[Te];if(void 0!==we[Fe])if(null===we[Fe])Xe+=this.indentate(ge)+"<"+Fe+"/"+this.tagEndChar;else if(we[Fe]instanceof Date)Xe+=this.buildTextNode(we[Fe],Fe,"",ge);else if("object"!=typeof we[Fe]){const at=this.isAttribute(Fe);at?Ie+=" "+at+'="'+this.options.attrValueProcessor(""+we[Fe])+'"':this.isCDATA(Fe)?Xe+=this.replaceCDATAstr(we[this.options.textNodeName]?we[this.options.textNodeName]:"",we[Fe]):Fe===this.options.textNodeName?we[this.options.cdataTagName]||(Xe+=this.options.tagValueProcessor(""+we[Fe])):Xe+=this.buildTextNode(we[Fe],Fe,"",ge)}else if(Array.isArray(we[Fe]))if(this.isCDATA(Fe))Xe+=this.indentate(ge),Xe+=this.replaceCDATAarr(we[this.options.textNodeName]?we[this.options.textNodeName]:"",we[Fe]);else{const at=we[Fe].length;for(let Ye=0;Ye<at;Ye++){const Ge=we[Fe][Ye];if(void 0!==Ge)if(null===Ge)Xe+=this.indentate(ge)+"<"+Fe+"/"+this.tagEndChar;else if("object"==typeof Ge){const P=this.j2x(Ge,ge+1);Xe+=this.buildObjNode(P.val,Fe,P.attrStr,ge)}else Xe+=this.buildTextNode(Ge,Fe,"",ge)}}else if(this.options.attrNodeName&&Fe===this.options.attrNodeName){const at=Object.keys(we[Fe]),Ye=at.length;for(let Ge=0;Ge<Ye;Ge++)Ie+=" "+at[Ge]+'="'+this.options.attrValueProcessor(""+we[Fe][at[Ge]])+'"'}else{const at=this.j2x(we[Fe],ge+1);Xe+=this.buildObjNode(at.val,Fe,at.attrStr,ge)}}return{attrStr:Ie,val:Xe}},He.exports=H},6242:(He,J,G)=>{"use strict";const U=function(ue){return String.fromCharCode(ue)},ie={nilChar:U(176),missingChar:U(201),nilPremitive:U(175),missingPremitive:U(200),emptyChar:U(178),emptyValue:U(177),boundryChar:U(179),objStart:U(198),arrStart:U(204),arrayEnd:U(185)},b=[ie.nilChar,ie.nilPremitive,ie.missingChar,ie.missingPremitive,ie.boundryChar,ie.emptyChar,ie.emptyValue,ie.arrayEnd,ie.objStart,ie.arrStart],H=function(ue,fe,we){if("string"==typeof fe)return X(ue&&ue[0]&&void 0!==ue[0].val?ue[0].val:ue,fe);{const ge=function L(ue){return void 0===ue?ie.missingChar:null===ue?ie.nilChar:!(ue.child&&0===Object.keys(ue.child).length&&(!ue.attrsMap||0===Object.keys(ue.attrsMap).length))||ie.emptyChar}(ue);if(!0===ge){let Ie="";if(Array.isArray(fe)){Ie+=ie.arrStart;const Xe=fe[0],pe=ue.length;if("string"==typeof Xe)for(let he=0;he<pe;he++){const Te=X(ue[he].val,Xe);Ie=z(Ie,Te)}else for(let he=0;he<pe;he++){const Te=H(ue[he],Xe,we);Ie=z(Ie,Te)}Ie+=ie.arrayEnd}else{Ie+=ie.objStart;const Xe=Object.keys(fe);Array.isArray(ue)&&(ue=ue[0]);for(let pe in Xe){const he=Xe[pe];let Te;Te=H(!we.ignoreAttributes&&ue.attrsMap&&ue.attrsMap[he]?ue.attrsMap[he]:he===we.textNodeName?ue.val:ue.child[he],fe[he],we),Ie=z(Ie,Te)}}return Ie}return ge}},X=function(ue){switch(ue){case void 0:return ie.missingPremitive;case null:return ie.nilPremitive;case"":return ie.emptyValue;default:return ue}},z=function(ue,fe){return!M(fe[0])&&!M(ue[ue.length-1])&&(ue+=ie.boundryChar),ue+fe},M=function(ue){return-1!==b.indexOf(ue)},B=G(2664),W=G(1919).buildOptions;J.convert2nimn=function(ue,fe,we){return we=W(we,B.defaultOptions,B.props),H(ue,fe,we)}},5847:(He,J,G)=>{"use strict";const U=G(1919),ie=function(b,H,X){const z={};if((!b.child||U.isEmptyObject(b.child))&&(!b.attrsMap||U.isEmptyObject(b.attrsMap)))return U.isExist(b.val)?b.val:"";if(U.isExist(b.val)&&("string"!=typeof b.val||""!==b.val&&b.val!==H.cdataPositionChar)){const L=U.isTagNameInArrayMode(b.tagname,H.arrayMode,X);z[H.textNodeName]=L?[b.val]:b.val}U.merge(z,b.attrsMap,H.arrayMode);const M=Object.keys(b.child);for(let L=0;L<M.length;L++){const B=M[L];if(b.child[B]&&b.child[B].length>1){z[B]=[];for(let W in b.child[B])b.child[B].hasOwnProperty(W)&&z[B].push(ie(b.child[B][W],H,B))}else{const W=ie(b.child[B][0],H,B),ee=!0===H.arrayMode&&"object"==typeof W||U.isTagNameInArrayMode(B,H.arrayMode,X);z[B]=ee?[W]:W}}return z};J.convertToJson=ie},1207:(He,J,G)=>{"use strict";const U=G(1919),ie=G(1919).buildOptions,b=G(2664),X=function(L,B,W){let ee="{";const ue=Object.keys(L.child);for(let ge=0;ge<ue.length;ge++){var fe=ue[ge];if(L.child[fe]&&L.child[fe].length>1){for(var we in ee+='"'+fe+'" : [ ',L.child[fe])ee+=X(L.child[fe][we],B)+" , ";ee=ee.substr(0,ee.length-1)+" ] "}else ee+='"'+fe+'" : '+X(L.child[fe][0],B)+" ,"}return U.merge(ee,L.attrsMap),U.isEmptyObject(ee)?U.isExist(L.val)?L.val:"":(U.isExist(L.val)&&("string"==typeof L.val&&(""===L.val||L.val===B.cdataPositionChar)||(ee+='"'+B.textNodeName+'" : '+function z(L){return!0!==L&&!1!==L&&isNaN(L)?'"'+L+'"':L}(L.val))),","===ee[ee.length-1]&&(ee=ee.substr(0,ee.length-2)),ee+"}")};J.convertToJsonString=function(L,B){return(B=ie(B,b.defaultOptions,b.props)).indentBy=B.indentBy||"",X(L,B,0)}},6705:(He,J,G)=>{"use strict";const U=G(5847),ie=G(2664),b=G(2664),H=G(1919).buildOptions,X=G(7370);J.parse=function(M,L,B){if(B){!0===B&&(B={});const ee=X.validate(M,B);if(!0!==ee)throw Error(ee.err.msg)}L=H(L,b.defaultOptions,b.props);const W=ie.getTraversalObj(M,L);return U.convertToJson(W,L)},J.convertTonimn=G(6242).convert2nimn,J.getTraversalObj=ie.getTraversalObj,J.convertToJson=U.convertToJson,J.convertToJsonString=G(1207).convertToJsonString,J.validate=X.validate,J.j2xParser=G(8107),J.parseToNimn=function(M,L,B){return J.convertTonimn(J.getTraversalObj(M,B),L,B)}},1919:(He,J)=>{"use strict";const ie="[:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",b=new RegExp("^"+ie+"$");J.isExist=function(z){return void 0!==z},J.isEmptyObject=function(z){return 0===Object.keys(z).length},J.merge=function(z,M,L){if(M){const B=Object.keys(M),W=B.length;for(let ee=0;ee<W;ee++)z[B[ee]]="strict"===L?[M[B[ee]]]:M[B[ee]]}},J.getValue=function(z){return J.isExist(z)?z:""},J.buildOptions=function(z,M,L){var B={};if(!z)return M;for(let W=0;W<L.length;W++)B[L[W]]=void 0!==z[L[W]]?z[L[W]]:M[L[W]];return B},J.isTagNameInArrayMode=function(z,M,L){return!1!==M&&(M instanceof RegExp?M.test(z):"function"==typeof M?!!M(z,L):"strict"===M)},J.isName=function(z){return!(null==b.exec(z))},J.getAllMatches=function(z,M){const L=[];let B=M.exec(z);for(;B;){const W=[],ee=B.length;for(let ue=0;ue<ee;ue++)W.push(B[ue]);L.push(W),B=M.exec(z)}return L},J.nameRegexp=ie},7370:(He,J,G)=>{"use strict";const U=G(1919),ie={allowBooleanAttributes:!1},b=["allowBooleanAttributes"];function H(pe,he){for(var Te=he;he<pe.length;he++)if("?"==pe[he]||" "==pe[he]){var Fe=pe.substr(Te,he-Te);if(he>5&&"xml"===Fe)return fe("InvalidXml","XML declaration allowed only at the start of the document.",Ie(pe,he));if("?"==pe[he]&&">"==pe[he+1]){he++;break}continue}return he}function X(pe,he){if(pe.length>he+5&&"-"===pe[he+1]&&"-"===pe[he+2]){for(he+=3;he<pe.length;he++)if("-"===pe[he]&&"-"===pe[he+1]&&">"===pe[he+2]){he+=2;break}}else if(pe.length>he+8&&"D"===pe[he+1]&&"O"===pe[he+2]&&"C"===pe[he+3]&&"T"===pe[he+4]&&"Y"===pe[he+5]&&"P"===pe[he+6]&&"E"===pe[he+7]){let Te=1;for(he+=8;he<pe.length;he++)if("<"===pe[he])Te++;else if(">"===pe[he]&&(Te--,0===Te))break}else if(pe.length>he+9&&"["===pe[he+1]&&"C"===pe[he+2]&&"D"===pe[he+3]&&"A"===pe[he+4]&&"T"===pe[he+5]&&"A"===pe[he+6]&&"["===pe[he+7])for(he+=8;he<pe.length;he++)if("]"===pe[he]&&"]"===pe[he+1]&&">"===pe[he+2]){he+=2;break}return he}function L(pe,he){let Te="",Fe="",at=!1;for(;he<pe.length;he++){if('"'===pe[he]||"'"===pe[he])if(""===Fe)Fe=pe[he];else{if(Fe!==pe[he])continue;Fe=""}else if(">"===pe[he]&&""===Fe){at=!0;break}Te+=pe[he]}return""===Fe&&{value:Te,index:he,tagClosed:at}}J.validate=function(pe,he){he=U.buildOptions(he,ie,b);const Te=[];let Fe=!1,at=!1;"\ufeff"===pe[0]&&(pe=pe.substr(1));for(let Ye=0;Ye<pe.length;Ye++)if("<"===pe[Ye]&&"?"===pe[Ye+1]){if(Ye+=2,Ye=H(pe,Ye),Ye.err)return Ye}else{if("<"!==pe[Ye]){if(" "===pe[Ye]||"\t"===pe[Ye]||"\n"===pe[Ye]||"\r"===pe[Ye])continue;return fe("InvalidChar","char '"+pe[Ye]+"' is not expected.",Ie(pe,Ye))}if(Ye++,"!"===pe[Ye]){Ye=X(pe,Ye);continue}{let Ge=!1;"/"===pe[Ye]&&(Ge=!0,Ye++);let P="";for(;Ye<pe.length&&">"!==pe[Ye]&&" "!==pe[Ye]&&"\t"!==pe[Ye]&&"\n"!==pe[Ye]&&"\r"!==pe[Ye];Ye++)P+=pe[Ye];if(P=P.trim(),"/"===P[P.length-1]&&(P=P.substring(0,P.length-1),Ye--),!ge(P)){let V;return V=0===P.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '"+P+"' is an invalid name.",fe("InvalidTag",V,Ie(pe,Ye))}const D=L(pe,Ye);if(!1===D)return fe("InvalidAttr","Attributes for '"+P+"' have open quote.",Ie(pe,Ye));let N=D.value;if(Ye=D.index,"/"===N[N.length-1]){N=N.substring(0,N.length-1);const V=W(N,he);if(!0!==V)return fe(V.err.code,V.err.msg,Ie(pe,Ye-N.length+V.err.line));Fe=!0}else if(Ge){if(!D.tagClosed)return fe("InvalidTag","Closing tag '"+P+"' doesn't have proper closing.",Ie(pe,Ye));if(N.trim().length>0)return fe("InvalidTag","Closing tag '"+P+"' can't have attributes or invalid starting.",Ie(pe,Ye));{const V=Te.pop();if(P!==V)return fe("InvalidTag","Closing tag '"+V+"' is expected inplace of '"+P+"'.",Ie(pe,Ye));0==Te.length&&(at=!0)}}else{const V=W(N,he);if(!0!==V)return fe(V.err.code,V.err.msg,Ie(pe,Ye-N.length+V.err.line));if(!0===at)return fe("InvalidXml","Multiple possible root nodes found.",Ie(pe,Ye));Te.push(P),Fe=!0}for(Ye++;Ye<pe.length;Ye++)if("<"===pe[Ye]){if("!"===pe[Ye+1]){Ye++,Ye=X(pe,Ye);continue}if("?"!==pe[Ye+1])break;if(Ye=H(pe,++Ye),Ye.err)return Ye}else if("&"===pe[Ye]){const V=ue(pe,Ye);if(-1==V)return fe("InvalidChar","char '&' is not expected.",Ie(pe,Ye));Ye=V}"<"===pe[Ye]&&Ye--}}return Fe?!(Te.length>0)||fe("InvalidXml","Invalid '"+JSON.stringify(Te,null,4).replace(/\r?\n/g,"")+"' found.",1):fe("InvalidXml","Start tag expected.",1)};const B=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function W(pe,he){const Te=U.getAllMatches(pe,B),Fe={};for(let at=0;at<Te.length;at++){if(0===Te[at][1].length)return fe("InvalidAttr","Attribute '"+Te[at][2]+"' has no space in starting.",Xe(pe,Te[at][0]));if(void 0===Te[at][3]&&!he.allowBooleanAttributes)return fe("InvalidAttr","boolean attribute '"+Te[at][2]+"' is not allowed.",Xe(pe,Te[at][0]));const Ye=Te[at][2];if(!we(Ye))return fe("InvalidAttr","Attribute '"+Ye+"' is an invalid name.",Xe(pe,Te[at][0]));if(Fe.hasOwnProperty(Ye))return fe("InvalidAttr","Attribute '"+Ye+"' is repeated.",Xe(pe,Te[at][0]));Fe[Ye]=1}return!0}function ue(pe,he){if(";"===pe[++he])return-1;if("#"===pe[he])return function ee(pe,he){let Te=/\d/;for("x"===pe[he]&&(he++,Te=/[\da-fA-F]/);he<pe.length;he++){if(";"===pe[he])return he;if(!pe[he].match(Te))break}return-1}(pe,++he);let Te=0;for(;he<pe.length;he++,Te++)if(!(pe[he].match(/\w/)&&Te<20)){if(";"===pe[he])break;return-1}return he}function fe(pe,he,Te){return{err:{code:pe,msg:he,line:Te}}}function we(pe){return U.isName(pe)}function ge(pe){return U.isName(pe)}function Ie(pe,he){return pe.substring(0,he).split(/\r?\n/).length}function Xe(pe,he){return pe.indexOf(he)+he.length}},976:He=>{"use strict";He.exports=function(J,G,U){this.tagname=J,this.parent=G,this.child={},this.attrsMap={},this.val=U,this.addChild=function(ie){Array.isArray(this.child[ie.tagname])?this.child[ie.tagname].push(ie):this.child[ie.tagname]=[ie]}}},2664:(He,J,G)=>{"use strict";const U=G(1919),ie=G(1919).buildOptions,b=G(976);"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,U.nameRegexp),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const X={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(ge,Ie){return ge},attrValueProcessor:function(ge,Ie){return ge},stopNodes:[]};J.defaultOptions=X;const z=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];function M(ge,Ie,Xe){return Ie&&(Xe.trimValues&&(Ie=Ie.trim()),Ie=B(Ie=Xe.tagValueProcessor(Ie,ge),Xe.parseNodeValue,Xe.parseTrueNumberOnly)),Ie}function L(ge,Ie){if(Ie.ignoreNameSpace){const Xe=ge.split(":"),pe="/"===ge.charAt(0)?"/":"";if("xmlns"===Xe[0])return"";2===Xe.length&&(ge=pe+Xe[1])}return ge}function B(ge,Ie,Xe){if(Ie&&"string"==typeof ge){let pe;return""===ge.trim()||isNaN(ge)?pe="true"===ge||"false"!==ge&&ge:(-1!==ge.indexOf("0x")?pe=Number.parseInt(ge,16):-1!==ge.indexOf(".")?(pe=Number.parseFloat(ge),ge=ge.replace(/\.?0+$/,"")):pe=Number.parseInt(ge,10),Xe&&(pe=String(pe)===ge?pe:ge)),pe}return U.isExist(ge)?ge:""}J.props=z;const W=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function ee(ge,Ie){if(!Ie.ignoreAttributes&&"string"==typeof ge){ge=ge.replace(/\r?\n/g," ");const Xe=U.getAllMatches(ge,W),pe=Xe.length,he={};for(let Te=0;Te<pe;Te++){const Fe=L(Xe[Te][1],Ie);Fe.length&&(void 0!==Xe[Te][4]?(Ie.trimValues&&(Xe[Te][4]=Xe[Te][4].trim()),Xe[Te][4]=Ie.attrValueProcessor(Xe[Te][4],Fe),he[Ie.attributeNamePrefix+Fe]=B(Xe[Te][4],Ie.parseAttributeValue,Ie.parseTrueNumberOnly)):Ie.allowBooleanAttributes&&(he[Ie.attributeNamePrefix+Fe]=!0))}if(!Object.keys(he).length)return;if(Ie.attrNodeName){const Te={};return Te[Ie.attrNodeName]=he,Te}return he}}function fe(ge,Ie){let Xe,pe="";for(let he=Ie;he<ge.length;he++){let Te=ge[he];if(Xe)Te===Xe&&(Xe="");else if('"'===Te||"'"===Te)Xe=Te;else{if(">"===Te)return{data:pe,index:he};"\t"===Te&&(Te=" ")}pe+=Te}}function we(ge,Ie,Xe,pe){const he=ge.indexOf(Ie,Xe);if(-1===he)throw new Error(pe);return he+Ie.length-1}J.getTraversalObj=function(ge,Ie){ge=ge.replace(/\r\n?/g,"\n"),Ie=ie(Ie,X,z);const Xe=new b("!xml");let pe=Xe,he="";for(let Te=0;Te<ge.length;Te++)if("<"===ge[Te])if("/"===ge[Te+1]){const at=we(ge,">",Te,"Closing Tag is not closed.");let Ye=ge.substring(Te+2,at).trim();if(Ie.ignoreNameSpace){const Ge=Ye.indexOf(":");-1!==Ge&&(Ye=Ye.substr(Ge+1))}pe&&(pe.val=pe.val?U.getValue(pe.val)+""+M(Ye,he,Ie):M(Ye,he,Ie)),Ie.stopNodes.length&&Ie.stopNodes.includes(pe.tagname)&&(pe.child=[],null==pe.attrsMap&&(pe.attrsMap={}),pe.val=ge.substr(pe.startIndex+1,Te-pe.startIndex-1)),pe=pe.parent,he="",Te=at}else if("?"===ge[Te+1])Te=we(ge,"?>",Te,"Pi Tag is not closed.");else if("!--"===ge.substr(Te+1,3))Te=we(ge,"--\x3e",Te,"Comment is not closed.");else if("!D"===ge.substr(Te+1,2)){const at=we(ge,">",Te,"DOCTYPE is not closed.");Te=ge.substring(Te,at).indexOf("[")>=0?ge.indexOf("]>",Te)+1:at}else if("!["===ge.substr(Te+1,2)){const at=we(ge,"]]>",Te,"CDATA is not closed.")-2,Ye=ge.substring(Te+9,at);if(he&&(pe.val=U.getValue(pe.val)+""+M(pe.tagname,he,Ie),he=""),Ie.cdataTagName){const Ge=new b(Ie.cdataTagName,pe,Ye);pe.addChild(Ge),pe.val=U.getValue(pe.val)+Ie.cdataPositionChar,Ye&&(Ge.val=Ye)}else pe.val=(pe.val||"")+(Ye||"");Te=at+2}else{const at=fe(ge,Te+1);let Ye=at.data;const Ge=at.index,P=Ye.indexOf(" ");let D=Ye,N=!0;if(-1!==P&&(D=Ye.substr(0,P).replace(/\s\s*$/,""),Ye=Ye.substr(P+1)),Ie.ignoreNameSpace){const V=D.indexOf(":");-1!==V&&(D=D.substr(V+1),N=D!==at.data.substr(V+1))}if(pe&&he&&"!xml"!==pe.tagname&&(pe.val=U.getValue(pe.val)+""+M(pe.tagname,he,Ie)),Ye.length>0&&Ye.lastIndexOf("/")===Ye.length-1){"/"===D[D.length-1]?(D=D.substr(0,D.length-1),Ye=D):Ye=Ye.substr(0,Ye.length-1);const V=new b(D,pe,"");D!==Ye&&(V.attrsMap=ee(Ye,Ie)),pe.addChild(V)}else{const V=new b(D,pe);Ie.stopNodes.length&&Ie.stopNodes.includes(V.tagname)&&(V.startIndex=Ge),D!==Ye&&N&&(V.attrsMap=ee(Ye,Ie)),pe.addChild(V),pe=V}he="",Te=Ge}else he+=ge[Te];return Xe}},5780:He=>{var G;He.exports=G={},G.simpleFilter=function(U,ie){return ie.filter(function(b){return G.test(U,b)})},G.test=function(U,ie){return null!==G.match(U,ie)},G.match=function(U,ie,b){var ue,H=0,X=[],z=ie.length,M=0,L=0,B=(b=b||{}).pre||"",W=b.post||"",ee=b.caseSensitive&&ie||ie.toLowerCase();U=b.caseSensitive&&U||U.toLowerCase();for(var fe=0;fe<z;fe++)ue=ie[fe],ee[fe]===U[H]?(ue=B+ue+W,H+=1,L+=1+L):L=0,M+=L,X[X.length]=ue;return H===U.length?(M=ee===U?1/0:M,{rendered:X.join(""),score:M}):null},G.filter=function(U,ie,b){return ie&&0!==ie.length?"string"!=typeof U?ie:(b=b||{},ie.reduce(function(H,X,z,M){var L=X;b.extract&&(L=b.extract(X));var B=G.match(U,L,b);return null!=B&&(H[H.length]={string:B.rendered,score:B.score,index:z,original:X}),H},[]).sort(function(H,X){return X.score-H.score||H.index-X.index})):[]}},8461:(He,J)=>{J.read=function(G,U,ie,b,H){var X,z,M=8*H-b-1,L=(1<<M)-1,B=L>>1,W=-7,ee=ie?H-1:0,ue=ie?-1:1,fe=G[U+ee];for(ee+=ue,X=fe&(1<<-W)-1,fe>>=-W,W+=M;W>0;X=256*X+G[U+ee],ee+=ue,W-=8);for(z=X&(1<<-W)-1,X>>=-W,W+=b;W>0;z=256*z+G[U+ee],ee+=ue,W-=8);if(0===X)X=1-B;else{if(X===L)return z?NaN:1/0*(fe?-1:1);z+=Math.pow(2,b),X-=B}return(fe?-1:1)*z*Math.pow(2,X-b)},J.write=function(G,U,ie,b,H,X){var z,M,L,B=8*X-H-1,W=(1<<B)-1,ee=W>>1,ue=23===H?Math.pow(2,-24)-Math.pow(2,-77):0,fe=b?0:X-1,we=b?1:-1,ge=U<0||0===U&&1/U<0?1:0;for(U=Math.abs(U),isNaN(U)||U===1/0?(M=isNaN(U)?1:0,z=W):(z=Math.floor(Math.log(U)/Math.LN2),U*(L=Math.pow(2,-z))<1&&(z--,L*=2),(U+=z+ee>=1?ue/L:ue*Math.pow(2,1-ee))*L>=2&&(z++,L/=2),z+ee>=W?(M=0,z=W):z+ee>=1?(M=(U*L-1)*Math.pow(2,H),z+=ee):(M=U*Math.pow(2,ee-1)*Math.pow(2,H),z=0));H>=8;G[ie+fe]=255&M,fe+=we,M/=256,H-=8);for(z=z<<H|M,B+=H;B>0;G[ie+fe]=255&z,fe+=we,z/=256,B-=8);G[ie+fe-we]|=128*ge}},6425:He=>{var J={}.toString;He.exports=Array.isArray||function(G){return"[object Array]"==J.call(G)}},3024:(He,J,G)=>{He.exports=self.fetch||(self.fetch=G(5557).default||G(5557))},7355:(He,J,G)=>{var U,ie,b;void 0!==(ie="function"==typeof(U=b=function(){function b(){for(var z=0,M={};z<arguments.length;z++){var L=arguments[z];for(var B in L)M[B]=L[B]}return M}function H(z){return z.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function X(z){function M(){}function L(W,ee,ue){if("undefined"!=typeof document){"number"==typeof(ue=b({path:"/"},M.defaults,ue)).expires&&(ue.expires=new Date(1*new Date+864e5*ue.expires)),ue.expires=ue.expires?ue.expires.toUTCString():"";try{var fe=JSON.stringify(ee);/^[\{\[]/.test(fe)&&(ee=fe)}catch(Ie){}ee=z.write?z.write(ee,W):encodeURIComponent(String(ee)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),W=encodeURIComponent(String(W)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var we="";for(var ge in ue)!ue[ge]||(we+="; "+ge,!0!==ue[ge]&&(we+="="+ue[ge].split(";")[0]));return document.cookie=W+"="+ee+we}}function B(W,ee){if("undefined"!=typeof document){for(var ue={},fe=document.cookie?document.cookie.split("; "):[],we=0;we<fe.length;we++){var ge=fe[we].split("="),Ie=ge.slice(1).join("=");!ee&&'"'===Ie.charAt(0)&&(Ie=Ie.slice(1,-1));try{var Xe=H(ge[0]);if(Ie=(z.read||z)(Ie,Xe)||H(Ie),ee)try{Ie=JSON.parse(Ie)}catch(pe){}if(ue[Xe]=Ie,W===Xe)break}catch(pe){}}return W?ue[W]:ue}}return M.set=L,M.get=function(W){return B(W,!1)},M.getJSON=function(W){return B(W,!0)},M.remove=function(W,ee){L(W,"",b(ee,{expires:-1}))},M.defaults={},M.withConverter=X,M}(function(){})})?U.call(J,G,J,He):U)&&(He.exports=ie),He.exports=b()},3082:He=>{var ie=/^\s+|\s+$/g,b=/^[-+]0x[0-9a-f]+$/i,H=/^0b[01]+$/i,X=/^0o[0-7]+$/i,z=parseInt,M="object"==typeof global&&global&&global.Object===Object&&global,L="object"==typeof self&&self&&self.Object===Object&&self,B=M||L||Function("return this")(),ee=Object.prototype.toString,ue=Math.max,fe=Math.min,we=function(){return B.Date.now()};function Ie(Te){var Fe=typeof Te;return!!Te&&("object"==Fe||"function"==Fe)}function he(Te){if("number"==typeof Te)return Te;if(function pe(Te){return"symbol"==typeof Te||function Xe(Te){return!!Te&&"object"==typeof Te}(Te)&&"[object Symbol]"==ee.call(Te)}(Te))return NaN;if(Ie(Te)){var Fe="function"==typeof Te.valueOf?Te.valueOf():Te;Te=Ie(Fe)?Fe+"":Fe}if("string"!=typeof Te)return 0===Te?Te:+Te;Te=Te.replace(ie,"");var at=H.test(Te);return at||X.test(Te)?z(Te.slice(2),at?2:8):b.test(Te)?NaN:+Te}He.exports=function ge(Te,Fe,at){var Ye,Ge,P,D,N,V,Z=0,j=!1,de=!1,$e=!0;if("function"!=typeof Te)throw new TypeError("Expected a function");function _t(xt){var Cn=Ye,gn=Ge;return Ye=Ge=void 0,Z=xt,D=Te.apply(gn,Cn)}function xe(xt){return Z=xt,N=setTimeout(We,Fe),j?_t(xt):D}function vt(xt){var Cn=xt-V;return void 0===V||Cn>=Fe||Cn<0||de&&xt-Z>=P}function We(){var xt=we();if(vt(xt))return yt(xt);N=setTimeout(We,function pt(xt){var sr=Fe-(xt-V);return de?fe(sr,P-(xt-Z)):sr}(xt))}function yt(xt){return N=void 0,$e&&Ye?_t(xt):(Ye=Ge=void 0,D)}function Sn(){var xt=we(),Cn=vt(xt);if(Ye=arguments,Ge=this,V=xt,Cn){if(void 0===N)return xe(V);if(de)return N=setTimeout(We,Fe),_t(V)}return void 0===N&&(N=setTimeout(We,Fe)),D}return Fe=he(Fe)||0,Ie(at)&&(j=!!at.leading,P=(de="maxWait"in at)?ue(he(at.maxWait)||0,Fe):P,$e="trailing"in at?!!at.trailing:$e),Sn.cancel=function Kt(){void 0!==N&&clearTimeout(N),Z=0,Ye=V=Ge=N=void 0},Sn.flush=function tn(){return void 0===N?D:yt(we())},Sn}},1395:He=>{"use strict";const J=b=>"object"==typeof b&&null!==b,G=Symbol("skip"),U=b=>J(b)&&!(b instanceof RegExp)&&!(b instanceof Error)&&!(b instanceof Date),ie=(b,H,X,z=new WeakMap)=>{if(X=UC({deep:!1,target:{}},X),z.has(b))return z.get(b);z.set(b,X.target);const{target:M}=X;delete X.target;const L=B=>B.map(W=>U(W)?ie(W,H,X,z):W);if(Array.isArray(b))return L(b);for(const[B,W]of Object.entries(b)){const ee=H(B,W,b);if(ee===G)continue;let[ue,fe,{shouldRecurse:we=!0}={}]=ee;"__proto__"!==ue&&(X.deep&&we&&U(fe)&&(fe=Array.isArray(fe)?L(fe):ie(fe,H,X,z)),M[ue]=fe)}return M};He.exports=(b,H,X)=>{if(!J(b))throw new TypeError(`Expected an object, got \`${b}\` (${typeof b})`);return ie(b,H,X)},He.exports.mapObjectSkip=G},4987:function(He){He.exports=function(){"use strict";var J,G,U;function ie(b,H){if(J)if(G){var X="var sharedChunk = {}; ("+J+")(sharedChunk); ("+G+")(sharedChunk);",z={};J(z),U=H(z),"undefined"!=typeof window&&(U.workerUrl=window.URL.createObjectURL(new Blob([X],{type:"text/javascript"})))}else G=H;else J=H}return ie(0,function(b){function H(s,c){return s(c={exports:{}},c.exports),c.exports}var X=z;function z(s,c,h,y){this.cx=3*s,this.bx=3*(h-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(y-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=y,this.p2x=h,this.p2y=y}z.prototype.sampleCurveX=function(s){return((this.ax*s+this.bx)*s+this.cx)*s},z.prototype.sampleCurveY=function(s){return((this.ay*s+this.by)*s+this.cy)*s},z.prototype.sampleCurveDerivativeX=function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},z.prototype.solveCurveX=function(s,c){var h,y,x,S,T;for(void 0===c&&(c=1e-6),x=s,T=0;T<8;T++){if(S=this.sampleCurveX(x)-s,Math.abs(S)<c)return x;var k=this.sampleCurveDerivativeX(x);if(Math.abs(k)<1e-6)break;x-=S/k}if((x=s)<(h=0))return h;if(x>(y=1))return y;for(;h<y;){if(S=this.sampleCurveX(x),Math.abs(S-s)<c)return x;s>S?h=x:y=x,x=.5*(y-h)+h}return x},z.prototype.solve=function(s,c){return this.sampleCurveY(this.solveCurveX(s,c))};var M=L;function L(s,c){this.x=s,this.y=c}L.prototype={clone:function(){return new L(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,c){return this.clone()._rotateAround(s,c)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var c=s.x-this.x,h=s.y-this.y;return c*c+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,c){return Math.atan2(this.x*c-this.y*s,this.x*s+this.y*c)},_matMult:function(s){var c=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=c,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var c=Math.cos(s),h=Math.sin(s),y=h*this.x+c*this.y;return this.x=c*this.x-h*this.y,this.y=y,this},_rotateAround:function(s,c){var h=Math.cos(s),y=Math.sin(s),x=c.y+y*(this.x-c.x)+h*(this.y-c.y);return this.x=c.x+h*(this.x-c.x)-y*(this.y-c.y),this.y=x,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},L.convert=function(s){return s instanceof L?s:Array.isArray(s)?new L(s[0],s[1]):s};var B="undefined"!=typeof self?self:{},W=Math.pow(2,53)-1;function ee(s,c,h,y){var x=new X(s,c,h,y);return function(S){return x.solve(S)}}var ue=ee(.25,.1,.25,1);function fe(s,c,h){return Math.min(h,Math.max(c,s))}function we(s,c,h){var y=h-c,x=((s-c)%y+y)%y+c;return x===c?h:x}function ge(s){for(var c=[],h=arguments.length-1;h-- >0;)c[h]=arguments[h+1];for(var y=0,x=c;y<x.length;y+=1){var S=x[y];for(var T in S)s[T]=S[T]}return s}var Ie=1;function Xe(){return Ie++}function pe(){return function s(c){return c?(c^16*Math.random()>>c/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,s)}()}function he(s){return!!s&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(s)}function Te(s,c){s.forEach(function(h){c[h]&&(c[h]=c[h].bind(c))})}function Fe(s,c){return-1!==s.indexOf(c,s.length-c.length)}function at(s,c,h){var y={};for(var x in s)y[x]=c.call(h||this,s[x],x,s);return y}function Ye(s,c,h){var y={};for(var x in s)c.call(h||this,s[x],x,s)&&(y[x]=s[x]);return y}function Ge(s){return Array.isArray(s)?s.map(Ge):"object"==typeof s&&s?at(s,Ge):s}var P={};function D(s){P[s]||("undefined"!=typeof console&&console.warn(s),P[s]=!0)}function N(s,c,h){return(h.y-s.y)*(c.x-s.x)>(c.y-s.y)*(h.x-s.x)}function V(s){for(var c=0,h=0,y=s.length,x=y-1,S=void 0,T=void 0;h<y;x=h++)c+=((T=s[x]).x-(S=s[h]).x)*(S.y+T.y);return c}function Z(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function j(s){var c={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(y,x,S,T){var k=S||T;return c[x]=!k||k.toLowerCase(),""}),c["max-age"]){var h=parseInt(c["max-age"],10);isNaN(h)?delete c["max-age"]:c["max-age"]=h}return c}var de=null;function $e(s){if(null==de){var c=s.navigator?s.navigator.userAgent:null;de=!!s.safari||!(!c||!(/\b(iPad|iPhone|iPod)\b/.test(c)||c.match("Safari")&&!c.match("Chrome")))}return de}function _t(s){try{var c=B[s];return c.setItem("_mapbox_test_",1),c.removeItem("_mapbox_test_"),!0}catch(h){return!1}}var xe,pt,vt,We,yt=B.performance&&B.performance.now?B.performance.now.bind(B.performance):Date.now.bind(Date),Kt=B.requestAnimationFrame||B.mozRequestAnimationFrame||B.webkitRequestAnimationFrame||B.msRequestAnimationFrame,tn=B.cancelAnimationFrame||B.mozCancelAnimationFrame||B.webkitCancelAnimationFrame||B.msCancelAnimationFrame,Sn={now:yt,frame:function(s){var c=Kt(s);return{cancel:function(){return tn(c)}}},getImageData:function(s,c){void 0===c&&(c=0);var h=B.document.createElement("canvas"),y=h.getContext("2d");if(!y)throw new Error("failed to create canvas 2d context");return h.width=s.width,h.height=s.height,y.drawImage(s,0,0,s.width,s.height),y.getImageData(-c,-c,s.width+2*c,s.height+2*c)},resolveURL:function(s){return xe||(xe=B.document.createElement("a")),xe.href=s,xe.href},hardwareConcurrency:B.navigator&&B.navigator.hardwareConcurrency||4,get devicePixelRatio(){return B.devicePixelRatio},get prefersReducedMotion(){return!!B.matchMedia&&(null==pt&&(pt=B.matchMedia("(prefers-reduced-motion: reduce)")),pt.matches)}},xt={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},Cn={supported:!1,testSupport:function(s){!gn&&We&&(sr?Ut(s):vt=s)}},gn=!1,sr=!1;function Ut(s){var c=s.createTexture();s.bindTexture(s.TEXTURE_2D,c);try{if(s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,We),s.isContextLost())return;Cn.supported=!0}catch(h){}s.deleteTexture(c),gn=!0}B.document&&((We=B.document.createElement("img")).onload=function(){vt&&Ut(vt),vt=null,sr=!0},We.onerror=function(){gn=!0,vt=null},We.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var K="01",rr=function(s,c){this._transformRequestFn=s,this._customAccessToken=c,this._createSkuToken()};function fr(s){return 0===s.indexOf("mapbox:")}rr.prototype._createSkuToken=function(){var s=function(){for(var c="",h=0;h<10;h++)c+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",K,c].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=s.token,this._skuTokenExpiresAt=s.tokenExpiresAt},rr.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},rr.prototype.transformRequest=function(s,c){return this._transformRequestFn&&this._transformRequestFn(s,c)||{url:s}},rr.prototype.normalizeStyleURL=function(s,c){if(!fr(s))return s;var h=bt(s);return h.path="/styles/v1"+h.path,this._makeAPIURL(h,this._customAccessToken||c)},rr.prototype.normalizeGlyphsURL=function(s,c){if(!fr(s))return s;var h=bt(s);return h.path="/fonts/v1"+h.path,this._makeAPIURL(h,this._customAccessToken||c)},rr.prototype.normalizeSourceURL=function(s,c){if(!fr(s))return s;var h=bt(s);return h.path="/v4/"+h.authority+".json",h.params.push("secure"),this._makeAPIURL(h,this._customAccessToken||c)},rr.prototype.normalizeSpriteURL=function(s,c,h,y){var x=bt(s);return fr(s)?(x.path="/styles/v1"+x.path+"/sprite"+c+h,this._makeAPIURL(x,this._customAccessToken||y)):(x.path+=""+c+h,ha(x))},rr.prototype.normalizeTileURL=function(s,c){if(this._isSkuTokenExpired()&&this._createSkuToken(),s&&!fr(s))return s;var h=bt(s);h.path=h.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Sn.devicePixelRatio>=2||512===c?"@2x":"")+(Cn.supported?".webp":"$1")),h.path=h.path.replace(/^.+\/v4\//,"/"),h.path="/v4"+h.path;var y=this._customAccessToken||function(x){for(var S=0,T=x;S<T.length;S+=1){var k=T[S].match(/^access_token=(.*)$/);if(k)return k[1]}return null}(h.params)||xt.ACCESS_TOKEN;return xt.REQUIRE_ACCESS_TOKEN&&y&&this._skuToken&&h.params.push("sku="+this._skuToken),this._makeAPIURL(h,y)},rr.prototype.canonicalizeTileURL=function(s,c){var h=bt(s);if(!h.path.match(/(^\/v4\/)/)||!h.path.match(/\.[\w]+$/))return s;var y="mapbox://tiles/";y+=h.path.replace("/v4/","");var x=h.params;return c&&(x=x.filter(function(S){return!S.match(/^access_token=/)})),x.length&&(y+="?"+x.join("&")),y},rr.prototype.canonicalizeTileset=function(s,c){for(var h=!!c&&fr(c),y=[],x=0,S=s.tiles||[];x<S.length;x+=1){var T=S[x];_i(T)?y.push(this.canonicalizeTileURL(T,h)):y.push(T)}return y},rr.prototype._makeAPIURL=function(s,c){var h="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",y=bt(xt.API_URL);if(s.protocol=y.protocol,s.authority=y.authority,"http"===s.protocol){var x=s.params.indexOf("secure");x>=0&&s.params.splice(x,1)}if("/"!==y.path&&(s.path=""+y.path+s.path),!xt.REQUIRE_ACCESS_TOKEN)return ha(s);if(!(c=c||xt.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+h);if("s"===c[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+h);return s.params=s.params.filter(function(S){return-1===S.indexOf("access_token")}),s.params.push("access_token="+c),ha(s)},rr.prototype.setTransformRequest=function(s){this._transformRequestFn=s};var Xi=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function _i(s){return Xi.test(s)}var wt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function bt(s){var c=s.match(wt);if(!c)throw new Error("Unable to parse URL object");return{protocol:c[1],authority:c[2],path:c[3]||"/",params:c[4]?c[4].split("&"):[]}}function ha(s){var c=s.params.length?"?"+s.params.join("&"):"";return s.protocol+"://"+s.authority+s.path+c}function Me(s){if(!s)return null;var c=s.split(".");if(!c||3!==c.length)return null;try{return JSON.parse(decodeURIComponent(B.atob(c[1]).split("").map(function(h){return"%"+("00"+h.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(h){return null}}var te=function(s){this.type=s,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};te.prototype.getStorageKey=function(s){var c,h=Me(xt.ACCESS_TOKEN);return c=h&&h.u?B.btoa(encodeURIComponent(h.u).replace(/%([0-9A-F]{2})/g,function(y,x){return String.fromCharCode(Number("0x"+x))})):xt.ACCESS_TOKEN||"",s?"mapbox.eventData."+s+":"+c:"mapbox.eventData:"+c},te.prototype.fetchEventData=function(){var s=_t("localStorage"),c=this.getStorageKey(),h=this.getStorageKey("uuid");if(s)try{var y=B.localStorage.getItem(c);y&&(this.eventData=JSON.parse(y));var x=B.localStorage.getItem(h);x&&(this.anonId=x)}catch(S){D("Unable to read from LocalStorage")}},te.prototype.saveEventData=function(){var s=_t("localStorage"),c=this.getStorageKey(),h=this.getStorageKey("uuid");if(s)try{B.localStorage.setItem(h,this.anonId),Object.keys(this.eventData).length>=1&&B.localStorage.setItem(c,JSON.stringify(this.eventData))}catch(y){D("Unable to write to LocalStorage")}},te.prototype.processRequests=function(s){},te.prototype.postEvent=function(s,c,h,y){var x=this;if(xt.EVENTS_URL){var S=bt(xt.EVENTS_URL);S.params.push("access_token="+(y||xt.ACCESS_TOKEN||""));var T={event:this.type,created:new Date(s).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.15.3",skuId:K,userId:this.anonId},k=c?ge(T,c):T,q={url:ha(S),headers:{"Content-Type":"text/plain"},body:JSON.stringify([k])};this.pendingRequest=oe(q,function($){x.pendingRequest=null,h($),x.saveEventData(),x.processRequests(y)})}},te.prototype.queueRequest=function(s,c){this.queue.push(s),this.processRequests(c)};var ne,ze,ut=function(s){function c(){s.call(this,"map.load"),this.success={},this.skuToken=""}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.postMapLoadEvent=function(h,y,x,S){this.skuToken=x,(xt.EVENTS_URL&&S||xt.ACCESS_TOKEN&&Array.isArray(h)&&h.some(function(T){return fr(T)||_i(T)}))&&this.queueRequest({id:y,timestamp:Date.now()},S)},c.prototype.processRequests=function(h){var y=this;if(!this.pendingRequest&&0!==this.queue.length){var x=this.queue.shift(),S=x.id,T=x.timestamp;S&&this.success[S]||(this.anonId||this.fetchEventData(),he(this.anonId)||(this.anonId=pe()),this.postEvent(T,{skuToken:this.skuToken},function(k){k||S&&(y.success[S]=!0)},h))}},c}(te),Rt=new(function(s){function c(h){s.call(this,"appUserTurnstile"),this._customAccessToken=h}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.postTurnstileEvent=function(h,y){xt.EVENTS_URL&&xt.ACCESS_TOKEN&&Array.isArray(h)&&h.some(function(x){return fr(x)||_i(x)})&&this.queueRequest(Date.now(),y)},c.prototype.processRequests=function(h){var y=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var x=Me(xt.ACCESS_TOKEN),S=x?x.u:xt.ACCESS_TOKEN,T=S!==this.eventData.tokenU;he(this.anonId)||(this.anonId=pe(),T=!0);var k=this.queue.shift();if(this.eventData.lastSuccess){var q=new Date(this.eventData.lastSuccess),$=new Date(k),Q=(k-this.eventData.lastSuccess)/864e5;T=T||Q>=1||Q<-1||q.getDate()!==$.getDate()}else T=!0;if(!T)return this.processRequests();this.postEvent(k,{"enabled.telemetry":!1},function(re){re||(y.eventData.lastSuccess=k,y.eventData.tokenU=S)},h)}},c}(te)),Mt=Rt.postTurnstileEvent.bind(Rt),hr=new ut,zr=hr.postMapLoadEvent.bind(hr),jr=500,Wi=50;function Kr(){B.caches&&!ne&&(ne=B.caches.open("mapbox-tiles"))}function Ws(s){var c=s.indexOf("?");return c<0?s:s.slice(0,c)}var Js,Wu=1/0;function Td(){return null==Js&&(Js=B.OffscreenCanvas&&new B.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof B.createImageBitmap),Js}var Wf={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Wf);var Tc=function(s){function c(h,y,x){401===y&&_i(x)&&(h+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),s.call(this,h),this.status=y,this.url=x,this.name=this.constructor.name,this.message=h}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},c}(Error),gu=Z()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===B.location.protocol?B.parent:B).location.href};function vu(s,c){var h,y=new B.AbortController,x=new B.Request(s.url,{method:s.method||"GET",body:s.body,credentials:s.credentials,headers:s.headers,referrer:gu(),signal:y.signal}),S=!1,T=!1,k=(h=x.url).indexOf("sku=")>0&&_i(h);"json"===s.type&&x.headers.set("Accept","application/json");var q=function(Q,re,le){if(!T){if(Q&&"SecurityError"!==Q.message&&D(Q),re&&le)return $(re);var _e=Date.now();B.fetch(x).then(function(Ae){if(Ae.ok){var Oe=k?Ae.clone():null;return $(Ae,Oe,_e)}return c(new Tc(Ae.statusText,Ae.status,s.url))}).catch(function(Ae){20!==Ae.code&&c(new Error(Ae.message))})}},$=function(Q,re,le){("arrayBuffer"===s.type?Q.arrayBuffer():"json"===s.type?Q.json():Q.text()).then(function(_e){T||(re&&le&&function(Ae,Oe,Ze){if(Kr(),ne){var Ue={status:Oe.status,statusText:Oe.statusText,headers:new B.Headers};Oe.headers.forEach(function(ot,ct){return Ue.headers.set(ct,ot)});var nt=j(Oe.headers.get("Cache-Control")||"");nt["no-store"]||(nt["max-age"]&&Ue.headers.set("Expires",new Date(Ze+1e3*nt["max-age"]).toUTCString()),new Date(Ue.headers.get("Expires")).getTime()-Ze<42e4||function(ot,ct){if(void 0===ze)try{new Response(new ReadableStream),ze=!0}catch(ft){ze=!1}ze?ct(ot.body):ot.blob().then(ct)}(Oe,function(ot){var ct=new B.Response(ot,Ue);Kr(),ne&&ne.then(function(ft){return ft.put(Ws(Ae.url),ct)}).catch(function(ft){return D(ft.message)})}))}}(x,re,le),S=!0,c(null,_e,Q.headers.get("Cache-Control"),Q.headers.get("Expires")))}).catch(function(_e){T||c(new Error(_e.message))})};return k?function(Q,re){if(Kr(),!ne)return re(null);var le=Ws(Q.url);ne.then(function(_e){_e.match(le).then(function(Ae){var Oe=function(Ze){if(!Ze)return!1;var Ue=new Date(Ze.headers.get("Expires")||0),nt=j(Ze.headers.get("Cache-Control")||"");return Ue>Date.now()&&!nt["no-cache"]}(Ae);_e.delete(le),Oe&&_e.put(le,Ae.clone()),re(null,Ae,Oe)}).catch(re)}).catch(re)}(x,q):q(null,null),{cancel:function(){T=!0,S||y.abort()}}}var Zs,_u,Gl=function(s,c){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){if(Z()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,c);if(!Z()){var h=s.url.substring(0,s.url.indexOf("://"));return(xt.REGISTERED_PROTOCOLS[h]||vu)(s,c)}}if(!(/^file:/.test(y=s.url)||/^file:/.test(gu())&&!/^\w+:/.test(y))){if(B.fetch&&B.Request&&B.AbortController&&B.Request.prototype.hasOwnProperty("signal"))return vu(s,c);if(Z()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,c,void 0,!0)}var y;return function(x,S){var T=new B.XMLHttpRequest;for(var k in T.open(x.method||"GET",x.url,!0),"arrayBuffer"===x.type&&(T.responseType="arraybuffer"),x.headers)T.setRequestHeader(k,x.headers[k]);return"json"===x.type&&(T.responseType="text",T.setRequestHeader("Accept","application/json")),T.withCredentials="include"===x.credentials,T.onerror=function(){S(new Error(T.statusText))},T.onload=function(){if((T.status>=200&&T.status<300||0===T.status)&&null!==T.response){var q=T.response;if("json"===x.type)try{q=JSON.parse(T.response)}catch($){return S($)}S(null,q,T.getResponseHeader("Cache-Control"),T.getResponseHeader("Expires"))}else S(new Tc(T.statusText,T.status,x.url))},T.send(x.body),{cancel:function(){return T.abort()}}}(s,c)},ui=function(s,c){return Gl(ge(s,{type:"arrayBuffer"}),c)},oe=function(s,c){return Gl(ge(s,{method:"POST"}),c)},ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Zs=[],_u=0;var ve=function(s,c){if(Cn.supported&&(s.headers||(s.headers={}),s.headers.accept="image/webp,*/*"),_u>=xt.MAX_PARALLEL_IMAGE_REQUESTS){var h={requestParameters:s,callback:c,cancelled:!1,cancel:function(){this.cancelled=!0}};return Zs.push(h),h}_u++;var y=!1,x=function(){if(!y)for(y=!0,_u--;Zs.length&&_u<xt.MAX_PARALLEL_IMAGE_REQUESTS;){var T=Zs.shift();T.cancelled||(T.cancel=ve(T.requestParameters,T.callback).cancel)}},S=ui(s,function(T,k,q,$){var re,le;x(),T?c(T):k&&(Td()?(re=c,le=new B.Blob([new Uint8Array(k)],{type:"image/png"}),B.createImageBitmap(le).then(function(_e){re(null,_e)}).catch(function(_e){re(new Error("Could not load image because of "+_e.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(Q,re,le,_e){var Ae=new B.Image,Oe=B.URL;Ae.onload=function(){re(null,Ae),Oe.revokeObjectURL(Ae.src),Ae.onload=null,B.requestAnimationFrame(function(){Ae.src=ce})},Ae.onerror=function(){return re(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Ze=new B.Blob([new Uint8Array(Q)],{type:"image/png"});Ae.cacheControl=le,Ae.expires=_e,Ae.src=Q.byteLength?Oe.createObjectURL(Ze):ce}(k,c,q,$))});return{cancel:function(){S.cancel(),x()}}};function Se(s,c,h){h[s]&&-1!==h[s].indexOf(c)||(h[s]=h[s]||[],h[s].push(c))}function Le(s,c,h){if(h&&h[s]){var y=h[s].indexOf(c);-1!==y&&h[s].splice(y,1)}}var Je=function(s,c){void 0===c&&(c={}),ge(this,c),this.type=s},et=function(s){function c(h,y){void 0===y&&(y={}),s.call(this,"error",ge({error:h},y))}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c}(Je),Ke=function(){};Ke.prototype.on=function(s,c){return this._listeners=this._listeners||{},Se(s,c,this._listeners),this},Ke.prototype.off=function(s,c){return Le(s,c,this._listeners),Le(s,c,this._oneTimeListeners),this},Ke.prototype.once=function(s,c){return this._oneTimeListeners=this._oneTimeListeners||{},Se(s,c,this._oneTimeListeners),this},Ke.prototype.fire=function(s,c){"string"==typeof s&&(s=new Je(s,c||{}));var h=s.type;if(this.listens(h)){s.target=this;for(var y=0,x=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];y<x.length;y+=1)x[y].call(this,s);for(var S=0,T=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];S<T.length;S+=1){var k=T[S];Le(h,k,this._oneTimeListeners),k.call(this,s)}var q=this._eventedParent;q&&(ge(s,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),q.fire(s))}else s instanceof et&&console.error(s.error);return this},Ke.prototype.listens=function(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)},Ke.prototype.setEventedParent=function(s,c){return this._eventedParent=s,this._eventedParentData=c,this};var Pe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},je=function(s,c,h,y){this.message=(s?s+": ":"")+h,y&&(this.identifier=y),null!=c&&c.__line__&&(this.line=c.__line__)};function Dt(s){var c=s.value;return c?[new je(s.key,c,"constants have been deprecated as of v8")]:[]}function Bt(s){for(var c=[],h=arguments.length-1;h-- >0;)c[h]=arguments[h+1];for(var y=0,x=c;y<x.length;y+=1){var S=x[y];for(var T in S)s[T]=S[T]}return s}function lt(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Et(s){if(Array.isArray(s))return s.map(Et);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){var c={};for(var h in s)c[h]=Et(s[h]);return c}return lt(s)}var Jt=function(s){function c(h,y){s.call(this,y),this.message=y,this.key=h}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c}(Error),Ht=function(s,c){void 0===c&&(c=[]),this.parent=s,this.bindings={};for(var h=0,y=c;h<y.length;h+=1){var x=y[h];this.bindings[x[0]]=x[1]}};Ht.prototype.concat=function(s){return new Ht(this,s)},Ht.prototype.get=function(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(s+" not found in scope.")},Ht.prototype.has=function(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)};var sn={kind:"null"},Pt={kind:"number"},qt={kind:"string"},It={kind:"boolean"},On={kind:"color"},Tn={kind:"object"},nn={kind:"value"},Fr={kind:"collator"},$n={kind:"formatted"},Xr={kind:"resolvedImage"};function ei(s,c){return{kind:"array",itemType:s,N:c}}function pr(s){if("array"===s.kind){var c=pr(s.itemType);return"number"==typeof s.N?"array<"+c+", "+s.N+">":"value"===s.itemType.kind?"array":"array<"+c+">"}return s.kind}var Vr=[sn,Pt,qt,It,On,$n,Tn,ei(nn),Xr];function li(s,c){if("error"===c.kind)return null;if("array"===s.kind){if("array"===c.kind&&(0===c.N&&"value"===c.itemType.kind||!li(s.itemType,c.itemType))&&("number"!=typeof s.N||s.N===c.N))return null}else{if(s.kind===c.kind)return null;if("value"===s.kind)for(var h=0,y=Vr;h<y.length;h+=1)if(!li(y[h],c))return null}return"Expected "+pr(s)+" but found "+pr(c)+" instead."}function Gr(s,c){return c.some(function(h){return h.kind===s.kind})}function Kn(s,c){return c.some(function(h){return"null"===h?null===s:"array"===h?Array.isArray(s):"object"===h?s&&!Array.isArray(s)&&"object"==typeof s:h===typeof s})}var Di=H(function(s,c){var h={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function y(k){return(k=Math.round(k))<0?0:k>255?255:k}function x(k){return y("%"===k[k.length-1]?parseFloat(k)/100*255:parseInt(k))}function S(k){return(q="%"===k[k.length-1]?parseFloat(k)/100:parseFloat(k))<0?0:q>1?1:q;var q}function T(k,q,$){return $<0?$+=1:$>1&&($-=1),6*$<1?k+(q-k)*$*6:2*$<1?q:3*$<2?k+(q-k)*(2/3-$)*6:k}try{c.parseCSSColor=function(k){var q,$=k.replace(/ /g,"").toLowerCase();if($ in h)return h[$].slice();if("#"===$[0])return 4===$.length?(q=parseInt($.substr(1),16))>=0&&q<=4095?[(3840&q)>>4|(3840&q)>>8,240&q|(240&q)>>4,15&q|(15&q)<<4,1]:null:7===$.length&&(q=parseInt($.substr(1),16))>=0&&q<=16777215?[(16711680&q)>>16,(65280&q)>>8,255&q,1]:null;var Q=$.indexOf("("),re=$.indexOf(")");if(-1!==Q&&re+1===$.length){var le=$.substr(0,Q),_e=$.substr(Q+1,re-(Q+1)).split(","),Ae=1;switch(le){case"rgba":if(4!==_e.length)return null;Ae=S(_e.pop());case"rgb":return 3!==_e.length?null:[x(_e[0]),x(_e[1]),x(_e[2]),Ae];case"hsla":if(4!==_e.length)return null;Ae=S(_e.pop());case"hsl":if(3!==_e.length)return null;var Oe=(parseFloat(_e[0])%360+360)%360/360,Ze=S(_e[1]),Ue=S(_e[2]),nt=Ue<=.5?Ue*(Ze+1):Ue+Ze-Ue*Ze,ot=2*Ue-nt;return[y(255*T(ot,nt,Oe+1/3)),y(255*T(ot,nt,Oe)),y(255*T(ot,nt,Oe-1/3)),Ae];default:return null}}return null}}catch(k){}}).parseCSSColor,ir=function(s,c,h,y){void 0===y&&(y=1),this.r=s,this.g=c,this.b=h,this.a=y};ir.parse=function(s){if(s){if(s instanceof ir)return s;if("string"==typeof s){var c=Di(s);if(c)return new ir(c[0]/255*c[3],c[1]/255*c[3],c[2]/255*c[3],c[3])}}},ir.prototype.toString=function(){var s=this.toArray(),c=s[1],h=s[2],y=s[3];return"rgba("+Math.round(s[0])+","+Math.round(c)+","+Math.round(h)+","+y+")"},ir.prototype.toArray=function(){var s=this.a;return 0===s?[0,0,0,0]:[255*this.r/s,255*this.g/s,255*this.b/s,s]},ir.black=new ir(0,0,0,1),ir.white=new ir(1,1,1,1),ir.transparent=new ir(0,0,0,0),ir.red=new ir(1,0,0,1);var Rs=function(s,c,h){this.sensitivity=s?c?"variant":"case":c?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Rs.prototype.compare=function(s,c){return this.collator.compare(s,c)},Rs.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Pd=function(s,c,h,y,x){this.text=s,this.image=c,this.scale=h,this.fontStack=y,this.textColor=x},Ui=function(s){this.sections=s};Ui.fromString=function(s){return new Ui([new Pd(s,null,null,null,null)])},Ui.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(s){return 0!==s.text.length||s.image&&0!==s.image.name.length})},Ui.factory=function(s){return s instanceof Ui?s:Ui.fromString(s)},Ui.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(s){return s.text}).join("")},Ui.prototype.serialize=function(){for(var s=["format"],c=0,h=this.sections;c<h.length;c+=1){var y=h[c];if(y.image)s.push(["image",y.image.name]);else{s.push(y.text);var x={};y.fontStack&&(x["text-font"]=["literal",y.fontStack.split(",")]),y.scale&&(x["font-scale"]=y.scale),y.textColor&&(x["text-color"]=["rgba"].concat(y.textColor.toArray())),s.push(x)}}return s};var ur=function(s){this.name=s.name,this.available=s.available};function Pc(s,c,h,y){return"number"==typeof s&&s>=0&&s<=255&&"number"==typeof c&&c>=0&&c<=255&&"number"==typeof h&&h>=0&&h<=255?void 0===y||"number"==typeof y&&y>=0&&y<=1?null:"Invalid rgba value ["+[s,c,h,y].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof y?[s,c,h,y]:[s,c,h]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Sr(s){if(null===s||"string"==typeof s||"boolean"==typeof s||"number"==typeof s||s instanceof ir||s instanceof Rs||s instanceof Ui||s instanceof ur)return!0;if(Array.isArray(s)){for(var c=0,h=s;c<h.length;c+=1)if(!Sr(h[c]))return!1;return!0}if("object"==typeof s){for(var y in s)if(!Sr(s[y]))return!1;return!0}return!1}function Oi(s){if(null===s)return sn;if("string"==typeof s)return qt;if("boolean"==typeof s)return It;if("number"==typeof s)return Pt;if(s instanceof ir)return On;if(s instanceof Rs)return Fr;if(s instanceof Ui)return $n;if(s instanceof ur)return Xr;if(Array.isArray(s)){for(var c,h=s.length,y=0,x=s;y<x.length;y+=1){var S=Oi(x[y]);if(c){if(c===S)continue;c=nn;break}c=S}return ei(c||nn,h)}return Tn}function Ds(s){var c=typeof s;return null===s?"":"string"===c||"number"===c||"boolean"===c?String(s):s instanceof ir||s instanceof Ui||s instanceof ur?s.toString():JSON.stringify(s)}ur.prototype.toString=function(){return this.name},ur.fromString=function(s){return s?new ur({name:s,available:!1}):null},ur.prototype.serialize=function(){return["image",this.name]};var pa=function(s,c){this.type=s,this.value=c};pa.parse=function(s,c){if(2!==s.length)return c.error("'literal' expression requires exactly one argument, but found "+(s.length-1)+" instead.");if(!Sr(s[1]))return c.error("invalid value");var h=s[1],y=Oi(h),x=c.expectedType;return"array"!==y.kind||0!==y.N||!x||"array"!==x.kind||"number"==typeof x.N&&0!==x.N||(y=x),new pa(y,h)},pa.prototype.evaluate=function(){return this.value},pa.prototype.eachChild=function(){},pa.prototype.outputDefined=function(){return!0},pa.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof ir?["rgba"].concat(this.value.toArray()):this.value instanceof Ui?this.value.serialize():this.value};var dn=function(s){this.name="ExpressionEvaluationError",this.message=s};dn.prototype.toJSON=function(){return this.message};var Bo={string:qt,number:Pt,boolean:It,object:Tn},zo=function(s,c){this.type=s,this.args=c};zo.parse=function(s,c){if(s.length<2)return c.error("Expected at least one argument.");var h,y=1,x=s[0];if("array"===x){var S,T;if(s.length>2){var k=s[1];if("string"!=typeof k||!(k in Bo)||"object"===k)return c.error('The item type argument of "array" must be one of string, number, boolean',1);S=Bo[k],y++}else S=nn;if(s.length>3){if(null!==s[2]&&("number"!=typeof s[2]||s[2]<0||s[2]!==Math.floor(s[2])))return c.error('The length argument to "array" must be a positive integer literal',2);T=s[2],y++}h=ei(S,T)}else h=Bo[x];for(var q=[];y<s.length;y++){var $=c.parse(s[y],y,nn);if(!$)return null;q.push($)}return new zo(h,q)},zo.prototype.evaluate=function(s){for(var c=0;c<this.args.length;c++){var h=this.args[c].evaluate(s);if(!li(this.type,Oi(h)))return h;if(c===this.args.length-1)throw new dn("Expected value to be of type "+pr(this.type)+", but found "+pr(Oi(h))+" instead.")}return null},zo.prototype.eachChild=function(s){this.args.forEach(s)},zo.prototype.outputDefined=function(){return this.args.every(function(s){return s.outputDefined()})},zo.prototype.serialize=function(){var s=this.type,c=[s.kind];if("array"===s.kind){var h=s.itemType;if("string"===h.kind||"number"===h.kind||"boolean"===h.kind){c.push(h.kind);var y=s.N;("number"==typeof y||this.args.length>1)&&c.push(y)}}return c.concat(this.args.map(function(x){return x.serialize()}))};var Zn=function(s){this.type=$n,this.sections=s};Zn.parse=function(s,c){if(s.length<2)return c.error("Expected at least one argument.");var h=s[1];if(!Array.isArray(h)&&"object"==typeof h)return c.error("First argument must be an image or text section.");for(var y=[],x=!1,S=1;S<=s.length-1;++S){var T=s[S];if(x&&"object"==typeof T&&!Array.isArray(T)){x=!1;var k=null;if(T["font-scale"]&&!(k=c.parse(T["font-scale"],1,Pt)))return null;var q=null;if(T["text-font"]&&!(q=c.parse(T["text-font"],1,ei(qt))))return null;var $=null;if(T["text-color"]&&!($=c.parse(T["text-color"],1,On)))return null;var Q=y[y.length-1];Q.scale=k,Q.font=q,Q.textColor=$}else{var re=c.parse(s[S],1,nn);if(!re)return null;var le=re.type.kind;if("string"!==le&&"value"!==le&&"null"!==le&&"resolvedImage"!==le)return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,y.push({content:re,scale:null,font:null,textColor:null})}}return new Zn(y)},Zn.prototype.evaluate=function(s){return new Ui(this.sections.map(function(c){var h=c.content.evaluate(s);return Oi(h)===Xr?new Pd("",h,null,null,null):new Pd(Ds(h),null,c.scale?c.scale.evaluate(s):null,c.font?c.font.evaluate(s).join(","):null,c.textColor?c.textColor.evaluate(s):null)}))},Zn.prototype.eachChild=function(s){for(var c=0,h=this.sections;c<h.length;c+=1){var y=h[c];s(y.content),y.scale&&s(y.scale),y.font&&s(y.font),y.textColor&&s(y.textColor)}},Zn.prototype.outputDefined=function(){return!1},Zn.prototype.serialize=function(){for(var s=["format"],c=0,h=this.sections;c<h.length;c+=1){var y=h[c];s.push(y.content.serialize());var x={};y.scale&&(x["font-scale"]=y.scale.serialize()),y.font&&(x["text-font"]=y.font.serialize()),y.textColor&&(x["text-color"]=y.textColor.serialize()),s.push(x)}return s};var rs=function(s){this.type=Xr,this.input=s};rs.parse=function(s,c){if(2!==s.length)return c.error("Expected two arguments.");var h=c.parse(s[1],1,qt);return h?new rs(h):c.error("No image name provided.")},rs.prototype.evaluate=function(s){var c=this.input.evaluate(s),h=ur.fromString(c);return h&&s.availableImages&&(h.available=s.availableImages.indexOf(c)>-1),h},rs.prototype.eachChild=function(s){s(this.input)},rs.prototype.outputDefined=function(){return!1},rs.prototype.serialize=function(){return["image",this.input.serialize()]};var Yn={"to-boolean":It,"to-color":On,"to-number":Pt,"to-string":qt},ti=function(s,c){this.type=s,this.args=c};ti.parse=function(s,c){if(s.length<2)return c.error("Expected at least one argument.");var h=s[0];if(("to-boolean"===h||"to-string"===h)&&2!==s.length)return c.error("Expected one argument.");for(var y=Yn[h],x=[],S=1;S<s.length;S++){var T=c.parse(s[S],S,nn);if(!T)return null;x.push(T)}return new ti(y,x)},ti.prototype.evaluate=function(s){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(s));if("color"===this.type.kind){for(var c,h,y=0,x=this.args;y<x.length;y+=1){if(h=null,(c=x[y].evaluate(s))instanceof ir)return c;if("string"==typeof c){var S=s.parseColor(c);if(S)return S}else if(Array.isArray(c)&&!(h=c.length<3||c.length>4?"Invalid rbga value "+JSON.stringify(c)+": expected an array containing either three or four numeric values.":Pc(c[0],c[1],c[2],c[3])))return new ir(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new dn(h||"Could not parse color from value '"+("string"==typeof c?c:String(JSON.stringify(c)))+"'")}if("number"===this.type.kind){for(var T=null,k=0,q=this.args;k<q.length;k+=1){if(null===(T=q[k].evaluate(s)))return 0;var $=Number(T);if(!isNaN($))return $}throw new dn("Could not convert "+JSON.stringify(T)+" to number.")}return"formatted"===this.type.kind?Ui.fromString(Ds(this.args[0].evaluate(s))):"resolvedImage"===this.type.kind?ur.fromString(Ds(this.args[0].evaluate(s))):Ds(this.args[0].evaluate(s))},ti.prototype.eachChild=function(s){this.args.forEach(s)},ti.prototype.outputDefined=function(){return this.args.every(function(s){return s.outputDefined()})},ti.prototype.serialize=function(){if("formatted"===this.type.kind)return new Zn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new rs(this.args[0]).serialize();var s=["to-"+this.type.kind];return this.eachChild(function(c){s.push(c.serialize())}),s};var wp=["Unknown","Point","LineString","Polygon"],yu=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};yu.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},yu.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?wp[this.feature.type]:this.feature.type:null},yu.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},yu.prototype.canonicalID=function(){return this.canonical},yu.prototype.properties=function(){return this.feature&&this.feature.properties||{}},yu.prototype.parseColor=function(s){var c=this._parseColorCache[s];return c||(c=this._parseColorCache[s]=ir.parse(s)),c};var so=function(s,c,h,y){this.name=s,this.type=c,this._evaluate=h,this.args=y};so.prototype.evaluate=function(s){return this._evaluate(s,this.args)},so.prototype.eachChild=function(s){this.args.forEach(s)},so.prototype.outputDefined=function(){return!1},so.prototype.serialize=function(){return[this.name].concat(this.args.map(function(s){return s.serialize()}))},so.parse=function(s,c){var h,y=s[0],x=so.definitions[y];if(!x)return c.error('Unknown expression "'+y+'". If you wanted a literal array, use ["literal", [...]].',0);for(var S=Array.isArray(x)?x[0]:x.type,T=Array.isArray(x)?[[x[1],x[2]]]:x.overloads,k=T.filter(function(un){var $t=un[0];return!Array.isArray($t)||$t.length===s.length-1}),q=null,$=0,Q=k;$<Q.length;$+=1){var re=Q[$],le=re[0],_e=re[1];q=new Zo(c.registry,c.path,null,c.scope);for(var Ae=[],Oe=!1,Ze=1;Ze<s.length;Ze++){var Ue=s[Ze],nt=Array.isArray(le)?le[Ze-1]:le.type,ot=q.parse(Ue,1+Ae.length,nt);if(!ot){Oe=!0;break}Ae.push(ot)}if(!Oe)if(Array.isArray(le)&&le.length!==Ae.length)q.error("Expected "+le.length+" arguments, but found "+Ae.length+" instead.");else{for(var ct=0;ct<Ae.length;ct++){var ft=Array.isArray(le)?le[ct]:le.type,St=Ae[ct];q.concat(ct+1).checkSubtype(ft,St.type)}if(0===q.errors.length)return new so(y,S,_e,Ae)}}if(1===k.length)(h=c.errors).push.apply(h,q.errors);else{for(var zt=(k.length?k:T).map(function(un){var $t;return $t=un[0],Array.isArray($t)?"("+$t.map(pr).join(", ")+")":"("+pr($t.type)+"...)"}).join(" | "),Ft=[],an=1;an<s.length;an++){var Gt=c.parse(s[an],1+Ft.length);if(!Gt)return null;Ft.push(pr(Gt.type))}c.error("Expected arguments of type "+zt+", but found ("+Ft.join(", ")+") instead.")}return null},so.register=function(s,c){for(var h in so.definitions=c,c)s[h]=so};var yi=function(s,c,h){this.type=Fr,this.locale=h,this.caseSensitive=s,this.diacriticSensitive=c};function uo(s,c){s[0]=Math.min(s[0],c[0]),s[1]=Math.min(s[1],c[1]),s[2]=Math.max(s[2],c[0]),s[3]=Math.max(s[3],c[1])}function Jf(s,c){return!(s[0]<=c[0]||s[2]>=c[2]||s[1]<=c[1]||s[3]>=c[3])}function ug(s,c){var h=(180+s[0])/360,y=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,x=Math.pow(2,c.z);return[Math.round(h*x*8192),Math.round(y*x*8192)]}function m_(s,c,h){return c[1]>s[1]!=h[1]>s[1]&&s[0]<(h[0]-c[0])*(s[1]-c[1])/(h[1]-c[1])+c[0]}function is(s,c){for(var h,y,x,S,T,k,q,$=!1,Q=0,re=c.length;Q<re;Q++)for(var le=c[Q],_e=0,Ae=le.length;_e<Ae-1;_e++){if((S=(h=s)[0]-(y=le[_e])[0])*(q=h[1]-(x=le[_e+1])[1])-(k=h[0]-x[0])*(T=h[1]-y[1])==0&&S*k<=0&&T*q<=0)return!1;m_(s,le[_e],le[_e+1])&&($=!$)}return $}function g_(s,c){for(var h=0;h<c.length;h++)if(is(s,c[h]))return!0;return!1}function lg(s,c,h,y){var x=y[0]-h[0],S=y[1]-h[1],T=(s[0]-h[0])*S-x*(s[1]-h[1]),k=(c[0]-h[0])*S-x*(c[1]-h[1]);return T>0&&k<0||T<0&&k>0}function v_(s,c,h){for(var y=0,x=h;y<x.length;y+=1)for(var S=x[y],T=0;T<S.length-1;++T)if((re=[(Q=S[T+1])[0]-($=S[T])[0],Q[1]-$[1]])[0]*(le=[(q=c)[0]-(k=s)[0],q[1]-k[1]])[1]-re[1]*le[0]!=0&&lg(k,q,$,Q)&&lg($,Q,k,q))return!0;var k,q,$,Q,re,le;return!1}function xp(s,c){for(var h=0;h<s.length;++h)if(!is(s[h],c))return!1;for(var y=0;y<s.length-1;++y)if(v_(s[y],s[y+1],c))return!1;return!0}function Id(s,c){for(var h=0;h<c.length;h++)if(xp(s,c[h]))return!0;return!1}function Zf(s,c,h){for(var y=[],x=0;x<s.length;x++){for(var S=[],T=0;T<s[x].length;T++){var k=ug(s[x][T],h);uo(c,k),S.push(k)}y.push(S)}return y}function Ic(s,c,h){for(var y=[],x=0;x<s.length;x++){var S=Zf(s[x],c,h);y.push(S)}return y}function cg(s,c,h,y){if(s[0]<h[0]||s[0]>h[2]){var x=.5*y,S=s[0]-h[0]>x?-y:h[0]-s[0]>x?y:0;0===S&&(S=s[0]-h[2]>x?-y:h[2]-s[0]>x?y:0),s[0]+=S}uo(c,s)}function jo(s,c,h,y){for(var x=8192*Math.pow(2,y.z),S=[8192*y.x,8192*y.y],T=[],k=0,q=s;k<q.length;k+=1)for(var $=0,Q=q[k];$<Q.length;$+=1){var re=Q[$],le=[re.x+S[0],re.y+S[1]];cg(le,c,h,x),T.push(le)}return T}function oi(s,c,h,y){for(var x,S=8192*Math.pow(2,y.z),T=[8192*y.x,8192*y.y],k=[],q=0,$=s;q<$.length;q+=1){for(var Q=[],re=0,le=$[q];re<le.length;re+=1){var _e=le[re],Ae=[_e.x+T[0],_e.y+T[1]];uo(c,Ae),Q.push(Ae)}k.push(Q)}if(c[2]-c[0]<=S/2){(x=c)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(var Oe=0,Ze=k;Oe<Ze.length;Oe+=1)for(var Ue=0,nt=Ze[Oe];Ue<nt.length;Ue+=1)cg(nt[Ue],c,h,S)}return k}yi.parse=function(s,c){if(2!==s.length)return c.error("Expected one argument.");var h=s[1];if("object"!=typeof h||Array.isArray(h))return c.error("Collator options argument must be an object.");var y=c.parse(void 0!==h["case-sensitive"]&&h["case-sensitive"],1,It);if(!y)return null;var x=c.parse(void 0!==h["diacritic-sensitive"]&&h["diacritic-sensitive"],1,It);if(!x)return null;var S=null;return h.locale&&!(S=c.parse(h.locale,1,qt))?null:new yi(y,x,S)},yi.prototype.evaluate=function(s){return new Rs(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)},yi.prototype.eachChild=function(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)},yi.prototype.outputDefined=function(){return!1},yi.prototype.serialize=function(){var s={};return s["case-sensitive"]=this.caseSensitive.serialize(),s["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(s.locale=this.locale.serialize()),["collator",s]};var ma=function(s,c){this.type=It,this.geojson=s,this.geometries=c};function Hl(s){if(s instanceof so&&("get"===s.name&&1===s.args.length||"feature-state"===s.name||"has"===s.name&&1===s.args.length||"properties"===s.name||"geometry-type"===s.name||"id"===s.name||/^filter-/.test(s.name))||s instanceof ma)return!1;var c=!0;return s.eachChild(function(h){c&&!Hl(h)&&(c=!1)}),c}function Ju(s){if(s instanceof so&&"feature-state"===s.name)return!1;var c=!0;return s.eachChild(function(h){c&&!Ju(h)&&(c=!1)}),c}function yr(s,c){if(s instanceof so&&c.indexOf(s.name)>=0)return!1;var h=!0;return s.eachChild(function(y){h&&!yr(y,c)&&(h=!1)}),h}ma.parse=function(s,c){if(2!==s.length)return c.error("'within' expression requires exactly one argument, but found "+(s.length-1)+" instead.");if(Sr(s[1])){var h=s[1];if("FeatureCollection"===h.type)for(var y=0;y<h.features.length;++y){var x=h.features[y].geometry.type;if("Polygon"===x||"MultiPolygon"===x)return new ma(h,h.features[y].geometry)}else if("Feature"===h.type){var S=h.geometry.type;if("Polygon"===S||"MultiPolygon"===S)return new ma(h,h.geometry)}else if("Polygon"===h.type||"MultiPolygon"===h.type)return new ma(h,h)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")},ma.prototype.evaluate=function(s){if(null!=s.geometry()&&null!=s.canonicalID()){if("Point"===s.geometryType())return function(c,h){var y=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],S=c.canonicalID();if("Polygon"===h.type){var T=Zf(h.coordinates,x,S),k=jo(c.geometry(),y,x,S);if(!Jf(y,x))return!1;for(var q=0,$=k;q<$.length;q+=1)if(!is($[q],T))return!1}if("MultiPolygon"===h.type){var Q=Ic(h.coordinates,x,S),re=jo(c.geometry(),y,x,S);if(!Jf(y,x))return!1;for(var le=0,_e=re;le<_e.length;le+=1)if(!g_(_e[le],Q))return!1}return!0}(s,this.geometries);if("LineString"===s.geometryType())return function(c,h){var y=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],S=c.canonicalID();if("Polygon"===h.type){var T=Zf(h.coordinates,x,S),k=oi(c.geometry(),y,x,S);if(!Jf(y,x))return!1;for(var q=0,$=k;q<$.length;q+=1)if(!xp($[q],T))return!1}if("MultiPolygon"===h.type){var Q=Ic(h.coordinates,x,S),re=oi(c.geometry(),y,x,S);if(!Jf(y,x))return!1;for(var le=0,_e=re;le<_e.length;le+=1)if(!Id(_e[le],Q))return!1}return!0}(s,this.geometries)}return!1},ma.prototype.eachChild=function(){},ma.prototype.outputDefined=function(){return!0},ma.prototype.serialize=function(){return["within",this.geojson]};var Zu=function(s,c){this.type=c.type,this.name=s,this.boundExpression=c};Zu.parse=function(s,c){if(2!==s.length||"string"!=typeof s[1])return c.error("'var' expression requires exactly one string literal argument.");var h=s[1];return c.scope.has(h)?new Zu(h,c.scope.get(h)):c.error('Unknown variable "'+h+'". Make sure "'+h+'" has been bound in an enclosing "let" expression before using it.',1)},Zu.prototype.evaluate=function(s){return this.boundExpression.evaluate(s)},Zu.prototype.eachChild=function(){},Zu.prototype.outputDefined=function(){return!1},Zu.prototype.serialize=function(){return["var",this.name]};var Zo=function(s,c,h,y,x){void 0===c&&(c=[]),void 0===y&&(y=new Ht),void 0===x&&(x=[]),this.registry=s,this.path=c,this.key=c.map(function(S){return"["+S+"]"}).join(""),this.scope=y,this.errors=x,this.expectedType=h};function os(s,c){for(var h,y=s.length-1,x=0,S=y,T=0;x<=S;)if((h=s[T=Math.floor((x+S)/2)])<=c){if(T===y||c<s[T+1])return T;x=T+1}else{if(!(h>c))throw new dn("Input is not a number.");S=T-1}return 0}Zo.prototype.parse=function(s,c,h,y,x){return void 0===x&&(x={}),c?this.concat(c,h,y)._parse(s,x):this._parse(s,x)},Zo.prototype._parse=function(s,c){function h($,Q,re){return"assert"===re?new zo(Q,[$]):"coerce"===re?new ti(Q,[$]):$}if(null!==s&&"string"!=typeof s&&"boolean"!=typeof s&&"number"!=typeof s||(s=["literal",s]),Array.isArray(s)){if(0===s.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var y=s[0];if("string"!=typeof y)return this.error("Expression name must be a string, but found "+typeof y+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var x=this.registry[y];if(x){var S=x.parse(s,this);if(!S)return null;if(this.expectedType){var T=this.expectedType,k=S.type;if("string"!==T.kind&&"number"!==T.kind&&"boolean"!==T.kind&&"object"!==T.kind&&"array"!==T.kind||"value"!==k.kind)if("color"!==T.kind&&"formatted"!==T.kind&&"resolvedImage"!==T.kind||"value"!==k.kind&&"string"!==k.kind){if(this.checkSubtype(T,k))return null}else S=h(S,T,c.typeAnnotation||"coerce");else S=h(S,T,c.typeAnnotation||"assert")}if(!(S instanceof pa)&&"resolvedImage"!==S.type.kind&&function $(Q){if(Q instanceof Zu)return $(Q.boundExpression);if(Q instanceof so&&"error"===Q.name||Q instanceof yi||Q instanceof ma)return!1;var re=Q instanceof ti||Q instanceof zo,le=!0;return Q.eachChild(function(_e){le=re?le&&$(_e):le&&_e instanceof pa}),!!le&&Hl(Q)&&yr(Q,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(S)){var q=new yu;try{S=new pa(S.type,S.evaluate(q))}catch($){return this.error($.message),null}}return S}return this.error('Unknown expression "'+y+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===s?"'undefined' value invalid. Use null instead.":"object"==typeof s?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof s+" instead.")},Zo.prototype.concat=function(s,c,h){var y="number"==typeof s?this.path.concat(s):this.path,x=h?this.scope.concat(h):this.scope;return new Zo(this.registry,y,c||null,x,this.errors)},Zo.prototype.error=function(s){for(var c=[],h=arguments.length-1;h-- >0;)c[h]=arguments[h+1];var y=""+this.key+c.map(function(x){return"["+x+"]"}).join("");this.errors.push(new Jt(y,s))},Zo.prototype.checkSubtype=function(s,c){var h=li(s,c);return h&&this.error(h),h};var Ba=function(s,c,h){this.type=s,this.input=c,this.labels=[],this.outputs=[];for(var y=0,x=h;y<x.length;y+=1){var S=x[y],T=S[1];this.labels.push(S[0]),this.outputs.push(T)}};function ki(s,c,h){return s*(1-h)+c*h}Ba.parse=function(s,c){if(s.length-1<4)return c.error("Expected at least 4 arguments, but found only "+(s.length-1)+".");if((s.length-1)%2!=0)return c.error("Expected an even number of arguments.");var h=c.parse(s[1],1,Pt);if(!h)return null;var y=[],x=null;c.expectedType&&"value"!==c.expectedType.kind&&(x=c.expectedType);for(var S=1;S<s.length;S+=2){var T=1===S?-1/0:s[S],k=s[S+1],q=S,$=S+1;if("number"!=typeof T)return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',q);if(y.length&&y[y.length-1][0]>=T)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',q);var Q=c.parse(k,$,x);if(!Q)return null;x=x||Q.type,y.push([T,Q])}return new Ba(x,h,y)},Ba.prototype.evaluate=function(s){var c=this.labels,h=this.outputs;if(1===c.length)return h[0].evaluate(s);var y=this.input.evaluate(s);if(y<=c[0])return h[0].evaluate(s);var x=c.length;return y>=c[x-1]?h[x-1].evaluate(s):h[os(c,y)].evaluate(s)},Ba.prototype.eachChild=function(s){s(this.input);for(var c=0,h=this.outputs;c<h.length;c+=1)s(h[c])},Ba.prototype.outputDefined=function(){return this.outputs.every(function(s){return s.outputDefined()})},Ba.prototype.serialize=function(){for(var s=["step",this.input.serialize()],c=0;c<this.labels.length;c++)c>0&&s.push(this.labels[c]),s.push(this.outputs[c].serialize());return s};var Ad=Object.freeze({__proto__:null,number:ki,color:function(s,c,h){return new ir(ki(s.r,c.r,h),ki(s.g,c.g,h),ki(s.b,c.b,h),ki(s.a,c.a,h))},array:function(s,c,h){return s.map(function(y,x){return ki(y,c[x],h)})}}),Yf=6/29*3*(6/29),Rd=Math.PI/180,Qf=180/Math.PI;function Dd(s){return s>.008856451679035631?Math.pow(s,1/3):s/Yf+4/29}function eh(s){return s>6/29?s*s*s:Yf*(s-4/29)}function Vn(s){return 255*(s<=.0031308?12.92*s:1.055*Math.pow(s,1/2.4)-.055)}function Ac(s){return(s/=255)<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Ep(s){var c=Ac(s.r),h=Ac(s.g),y=Ac(s.b),x=Dd((.4124564*c+.3575761*h+.1804375*y)/.95047),S=Dd((.2126729*c+.7151522*h+.072175*y)/1);return{l:116*S-16,a:500*(x-S),b:200*(S-Dd((.0193339*c+.119192*h+.9503041*y)/1.08883)),alpha:s.a}}function Ys(s){var c=(s.l+16)/116,h=isNaN(s.a)?c:c+s.a/500,y=isNaN(s.b)?c:c-s.b/200;return c=1*eh(c),h=.95047*eh(h),y=1.08883*eh(y),new ir(Vn(3.2404542*h-1.5371385*c-.4985314*y),Vn(-.969266*h+1.8760108*c+.041556*y),Vn(.0556434*h-.2040259*c+1.0572252*y),s.alpha)}function Sp(s,c,h){var y=c-s;return s+h*(y>180||y<-180?y-360*Math.round(y/360):y)}var Od={forward:Ep,reverse:Ys,interpolate:function(s,c,h){return{l:ki(s.l,c.l,h),a:ki(s.a,c.a,h),b:ki(s.b,c.b,h),alpha:ki(s.alpha,c.alpha,h)}}},za={forward:function(s){var c=Ep(s),h=c.l,y=c.a,x=c.b,S=Math.atan2(x,y)*Qf;return{h:S<0?S+360:S,c:Math.sqrt(y*y+x*x),l:h,alpha:s.a}},reverse:function(s){var c=s.h*Rd,h=s.c;return Ys({l:s.l,a:Math.cos(c)*h,b:Math.sin(c)*h,alpha:s.alpha})},interpolate:function(s,c,h){return{h:Sp(s.h,c.h,h),c:ki(s.c,c.c,h),l:ki(s.l,c.l,h),alpha:ki(s.alpha,c.alpha,h)}}},ja=Object.freeze({__proto__:null,lab:Od,hcl:za}),po=function(s,c,h,y,x){this.type=s,this.operator=c,this.interpolation=h,this.input=y,this.labels=[],this.outputs=[];for(var S=0,T=x;S<T.length;S+=1){var k=T[S],q=k[1];this.labels.push(k[0]),this.outputs.push(q)}};function Cp(s,c,h,y){var x=y-h,S=s-h;return 0===x?0:1===c?S/x:(Math.pow(c,S)-1)/(Math.pow(c,x)-1)}po.interpolationFactor=function(s,c,h,y){var x=0;if("exponential"===s.name)x=Cp(c,s.base,h,y);else if("linear"===s.name)x=Cp(c,1,h,y);else if("cubic-bezier"===s.name){var S=s.controlPoints;x=new X(S[0],S[1],S[2],S[3]).solve(Cp(c,1,h,y))}return x},po.parse=function(s,c){var h=s[0],y=s[1],x=s[2],S=s.slice(3);if(!Array.isArray(y)||0===y.length)return c.error("Expected an interpolation type expression.",1);if("linear"===y[0])y={name:"linear"};else if("exponential"===y[0]){var T=y[1];if("number"!=typeof T)return c.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:T}}else{if("cubic-bezier"!==y[0])return c.error("Unknown interpolation type "+String(y[0]),1,0);var k=y.slice(1);if(4!==k.length||k.some(function(Ze){return"number"!=typeof Ze||Ze<0||Ze>1}))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:k}}if(s.length-1<4)return c.error("Expected at least 4 arguments, but found only "+(s.length-1)+".");if((s.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(!(x=c.parse(x,2,Pt)))return null;var q=[],$=null;"interpolate-hcl"===h||"interpolate-lab"===h?$=On:c.expectedType&&"value"!==c.expectedType.kind&&($=c.expectedType);for(var Q=0;Q<S.length;Q+=2){var re=S[Q],le=S[Q+1],_e=Q+3,Ae=Q+4;if("number"!=typeof re)return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_e);if(q.length&&q[q.length-1][0]>=re)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',_e);var Oe=c.parse(le,Ae,$);if(!Oe)return null;$=$||Oe.type,q.push([re,Oe])}return"number"===$.kind||"color"===$.kind||"array"===$.kind&&"number"===$.itemType.kind&&"number"==typeof $.N?new po($,h,y,x,q):c.error("Type "+pr($)+" is not interpolatable.")},po.prototype.evaluate=function(s){var c=this.labels,h=this.outputs;if(1===c.length)return h[0].evaluate(s);var y=this.input.evaluate(s);if(y<=c[0])return h[0].evaluate(s);var x=c.length;if(y>=c[x-1])return h[x-1].evaluate(s);var S=os(c,y),T=po.interpolationFactor(this.interpolation,y,c[S],c[S+1]),k=h[S].evaluate(s),q=h[S+1].evaluate(s);return"interpolate"===this.operator?Ad[this.type.kind.toLowerCase()](k,q,T):"interpolate-hcl"===this.operator?za.reverse(za.interpolate(za.forward(k),za.forward(q),T)):Od.reverse(Od.interpolate(Od.forward(k),Od.forward(q),T))},po.prototype.eachChild=function(s){s(this.input);for(var c=0,h=this.outputs;c<h.length;c+=1)s(h[c])},po.prototype.outputDefined=function(){return this.outputs.every(function(s){return s.outputDefined()})},po.prototype.serialize=function(){var s;s="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var c=[this.operator,s,this.input.serialize()],h=0;h<this.labels.length;h++)c.push(this.labels[h],this.outputs[h].serialize());return c};var mo=function(s,c){this.type=s,this.args=c};mo.parse=function(s,c){if(s.length<2)return c.error("Expectected at least one argument.");var h=null,y=c.expectedType;y&&"value"!==y.kind&&(h=y);for(var x=[],S=0,T=s.slice(1);S<T.length;S+=1){var k=c.parse(T[S],1+x.length,h,void 0,{typeAnnotation:"omit"});if(!k)return null;h=h||k.type,x.push(k)}var q=y&&x.some(function($){return li(y,$.type)});return new mo(q?nn:h,x)},mo.prototype.evaluate=function(s){for(var c,h=null,y=0,x=0,S=this.args;x<S.length&&(y++,(h=S[x].evaluate(s))&&h instanceof ur&&!h.available&&(c||(c=h.name),h=null,y===this.args.length&&(h=c)),null===h);x+=1);return h},mo.prototype.eachChild=function(s){this.args.forEach(s)},mo.prototype.outputDefined=function(){return this.args.every(function(s){return s.outputDefined()})},mo.prototype.serialize=function(){var s=["coalesce"];return this.eachChild(function(c){s.push(c.serialize())}),s};var bu=function(s,c){this.type=c.type,this.bindings=[].concat(s),this.result=c};bu.prototype.evaluate=function(s){return this.result.evaluate(s)},bu.prototype.eachChild=function(s){for(var c=0,h=this.bindings;c<h.length;c+=1)s(h[c][1]);s(this.result)},bu.parse=function(s,c){if(s.length<4)return c.error("Expected at least 3 arguments, but found "+(s.length-1)+" instead.");for(var h=[],y=1;y<s.length-1;y+=2){var x=s[y];if("string"!=typeof x)return c.error("Expected string, but found "+typeof x+" instead.",y);if(/[^a-zA-Z0-9_]/.test(x))return c.error("Variable names must contain only alphanumeric characters or '_'.",y);var S=c.parse(s[y+1],y+1);if(!S)return null;h.push([x,S])}var T=c.parse(s[s.length-1],s.length-1,c.expectedType,h);return T?new bu(h,T):null},bu.prototype.outputDefined=function(){return this.result.outputDefined()},bu.prototype.serialize=function(){for(var s=["let"],c=0,h=this.bindings;c<h.length;c+=1){var y=h[c];s.push(y[0],y[1].serialize())}return s.push(this.result.serialize()),s};var Yu=function(s,c,h){this.type=s,this.index=c,this.input=h};Yu.parse=function(s,c){if(3!==s.length)return c.error("Expected 2 arguments, but found "+(s.length-1)+" instead.");var h=c.parse(s[1],1,Pt),y=c.parse(s[2],2,ei(c.expectedType||nn));return h&&y?new Yu(y.type.itemType,h,y):null},Yu.prototype.evaluate=function(s){var c=this.index.evaluate(s),h=this.input.evaluate(s);if(c<0)throw new dn("Array index out of bounds: "+c+" < 0.");if(c>=h.length)throw new dn("Array index out of bounds: "+c+" > "+(h.length-1)+".");if(c!==Math.floor(c))throw new dn("Array index must be an integer, but found "+c+" instead.");return h[c]},Yu.prototype.eachChild=function(s){s(this.index),s(this.input)},Yu.prototype.outputDefined=function(){return!1},Yu.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Qu=function(s,c){this.type=It,this.needle=s,this.haystack=c};Qu.parse=function(s,c){if(3!==s.length)return c.error("Expected 2 arguments, but found "+(s.length-1)+" instead.");var h=c.parse(s[1],1,nn),y=c.parse(s[2],2,nn);return h&&y?Gr(h.type,[It,qt,Pt,sn,nn])?new Qu(h,y):c.error("Expected first argument to be of type boolean, string, number or null, but found "+pr(h.type)+" instead"):null},Qu.prototype.evaluate=function(s){var c=this.needle.evaluate(s),h=this.haystack.evaluate(s);if(!h)return!1;if(!Kn(c,["boolean","string","number","null"]))throw new dn("Expected first argument to be of type boolean, string, number or null, but found "+pr(Oi(c))+" instead.");if(!Kn(h,["string","array"]))throw new dn("Expected second argument to be of type array or string, but found "+pr(Oi(h))+" instead.");return h.indexOf(c)>=0},Qu.prototype.eachChild=function(s){s(this.needle),s(this.haystack)},Qu.prototype.outputDefined=function(){return!0},Qu.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var el=function(s,c,h){this.type=Pt,this.needle=s,this.haystack=c,this.fromIndex=h};el.parse=function(s,c){if(s.length<=2||s.length>=5)return c.error("Expected 3 or 4 arguments, but found "+(s.length-1)+" instead.");var h=c.parse(s[1],1,nn),y=c.parse(s[2],2,nn);if(!h||!y)return null;if(!Gr(h.type,[It,qt,Pt,sn,nn]))return c.error("Expected first argument to be of type boolean, string, number or null, but found "+pr(h.type)+" instead");if(4===s.length){var x=c.parse(s[3],3,Pt);return x?new el(h,y,x):null}return new el(h,y)},el.prototype.evaluate=function(s){var c=this.needle.evaluate(s),h=this.haystack.evaluate(s);if(!Kn(c,["boolean","string","number","null"]))throw new dn("Expected first argument to be of type boolean, string, number or null, but found "+pr(Oi(c))+" instead.");if(!Kn(h,["string","array"]))throw new dn("Expected second argument to be of type array or string, but found "+pr(Oi(h))+" instead.");if(this.fromIndex){var y=this.fromIndex.evaluate(s);return h.indexOf(c,y)}return h.indexOf(c)},el.prototype.eachChild=function(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)},el.prototype.outputDefined=function(){return!1},el.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var s=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),s]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Tr=function(s,c,h,y,x,S){this.inputType=s,this.type=c,this.input=h,this.cases=y,this.outputs=x,this.otherwise=S};Tr.parse=function(s,c){if(s.length<5)return c.error("Expected at least 4 arguments, but found only "+(s.length-1)+".");if(s.length%2!=1)return c.error("Expected an even number of arguments.");var h,y;c.expectedType&&"value"!==c.expectedType.kind&&(y=c.expectedType);for(var x={},S=[],T=2;T<s.length-1;T+=2){var k=s[T],q=s[T+1];Array.isArray(k)||(k=[k]);var $=c.concat(T);if(0===k.length)return $.error("Expected at least one branch label.");for(var Q=0,re=k;Q<re.length;Q+=1){var le=re[Q];if("number"!=typeof le&&"string"!=typeof le)return $.error("Branch labels must be numbers or strings.");if("number"==typeof le&&Math.abs(le)>Number.MAX_SAFE_INTEGER)return $.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof le&&Math.floor(le)!==le)return $.error("Numeric branch labels must be integer values.");if(h){if($.checkSubtype(h,Oi(le)))return null}else h=Oi(le);if(void 0!==x[String(le)])return $.error("Branch labels must be unique.");x[String(le)]=S.length}var _e=c.parse(q,T,y);if(!_e)return null;y=y||_e.type,S.push(_e)}var Ae=c.parse(s[1],1,nn);if(!Ae)return null;var Oe=c.parse(s[s.length-1],s.length-1,y);return Oe?"value"!==Ae.type.kind&&c.concat(1).checkSubtype(h,Ae.type)?null:new Tr(h,y,Ae,x,S,Oe):null},Tr.prototype.evaluate=function(s){var c=this.input.evaluate(s);return(Oi(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(s)},Tr.prototype.eachChild=function(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)},Tr.prototype.outputDefined=function(){return this.outputs.every(function(s){return s.outputDefined()})&&this.otherwise.outputDefined()},Tr.prototype.serialize=function(){for(var s=this,c=["match",this.input.serialize()],h=[],y={},x=0,S=Object.keys(this.cases).sort();x<S.length;x+=1){var T=S[x];void 0===(re=y[this.cases[T]])?(y[this.cases[T]]=h.length,h.push([this.cases[T],[T]])):h[re][1].push(T)}for(var k=function(_e){return"number"===s.inputType.kind?Number(_e):_e},q=0,$=h;q<$.length;q+=1){var Q=$[q],re=Q[0],le=Q[1];c.push(1===le.length?k(le[0]):le.map(k)),c.push(this.outputs[outputIndex$1].serialize())}return c.push(this.otherwise.serialize()),c};var $l=function(s,c,h){this.type=s,this.branches=c,this.otherwise=h};$l.parse=function(s,c){if(s.length<4)return c.error("Expected at least 3 arguments, but found only "+(s.length-1)+".");if(s.length%2!=0)return c.error("Expected an odd number of arguments.");var h;c.expectedType&&"value"!==c.expectedType.kind&&(h=c.expectedType);for(var y=[],x=1;x<s.length-1;x+=2){var S=c.parse(s[x],x,It);if(!S)return null;var T=c.parse(s[x+1],x+1,h);if(!T)return null;y.push([S,T]),h=h||T.type}var k=c.parse(s[s.length-1],s.length-1,h);return k?new $l(h,y,k):null},$l.prototype.evaluate=function(s){for(var c=0,h=this.branches;c<h.length;c+=1){var y=h[c],x=y[1];if(y[0].evaluate(s))return x.evaluate(s)}return this.otherwise.evaluate(s)},$l.prototype.eachChild=function(s){for(var c=0,h=this.branches;c<h.length;c+=1){var y=h[c],x=y[1];s(y[0]),s(x)}s(this.otherwise)},$l.prototype.outputDefined=function(){return this.branches.every(function(s){return s[1].outputDefined()})&&this.otherwise.outputDefined()},$l.prototype.serialize=function(){var s=["case"];return this.eachChild(function(c){s.push(c.serialize())}),s};var tl=function(s,c,h,y){this.type=s,this.input=c,this.beginIndex=h,this.endIndex=y};function nl(s,c){return"=="===s||"!="===s?"boolean"===c.kind||"string"===c.kind||"number"===c.kind||"null"===c.kind||"value"===c.kind:"string"===c.kind||"number"===c.kind||"value"===c.kind}function An(s,c,h,y){return 0===y.compare(c,h)}function Qs(s,c,h){var y="=="!==s&&"!="!==s;return function(){function x(S,T,k){this.type=It,this.lhs=S,this.rhs=T,this.collator=k,this.hasUntypedArgument="value"===S.type.kind||"value"===T.type.kind}return x.parse=function(S,T){if(3!==S.length&&4!==S.length)return T.error("Expected two or three arguments.");var k=S[0],q=T.parse(S[1],1,nn);if(!q)return null;if(!nl(k,q.type))return T.concat(1).error('"'+k+"\" comparisons are not supported for type '"+pr(q.type)+"'.");var $=T.parse(S[2],2,nn);if(!$)return null;if(!nl(k,$.type))return T.concat(2).error('"'+k+"\" comparisons are not supported for type '"+pr($.type)+"'.");if(q.type.kind!==$.type.kind&&"value"!==q.type.kind&&"value"!==$.type.kind)return T.error("Cannot compare types '"+pr(q.type)+"' and '"+pr($.type)+"'.");y&&("value"===q.type.kind&&"value"!==$.type.kind?q=new zo($.type,[q]):"value"!==q.type.kind&&"value"===$.type.kind&&($=new zo(q.type,[$])));var Q=null;if(4===S.length){if("string"!==q.type.kind&&"string"!==$.type.kind&&"value"!==q.type.kind&&"value"!==$.type.kind)return T.error("Cannot use collator to compare non-string types.");if(!(Q=T.parse(S[3],3,Fr)))return null}return new x(q,$,Q)},x.prototype.evaluate=function(S){var T=this.lhs.evaluate(S),k=this.rhs.evaluate(S);if(y&&this.hasUntypedArgument){var q=Oi(T),$=Oi(k);if(q.kind!==$.kind||"string"!==q.kind&&"number"!==q.kind)throw new dn('Expected arguments for "'+s+'" to be (string, string) or (number, number), but found ('+q.kind+", "+$.kind+") instead.")}if(this.collator&&!y&&this.hasUntypedArgument){var Q=Oi(T),re=Oi(k);if("string"!==Q.kind||"string"!==re.kind)return c(S,T,k)}return this.collator?h(S,T,k,this.collator.evaluate(S)):c(S,T,k)},x.prototype.eachChild=function(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)},x.prototype.outputDefined=function(){return!0},x.prototype.serialize=function(){var S=[s];return this.eachChild(function(T){S.push(T.serialize())}),S},x}()}tl.parse=function(s,c){if(s.length<=2||s.length>=5)return c.error("Expected 3 or 4 arguments, but found "+(s.length-1)+" instead.");var h=c.parse(s[1],1,nn),y=c.parse(s[2],2,Pt);if(!h||!y)return null;if(!Gr(h.type,[ei(nn),qt,nn]))return c.error("Expected first argument to be of type array or string, but found "+pr(h.type)+" instead");if(4===s.length){var x=c.parse(s[3],3,Pt);return x?new tl(h.type,h,y,x):null}return new tl(h.type,h,y)},tl.prototype.evaluate=function(s){var c=this.input.evaluate(s),h=this.beginIndex.evaluate(s);if(!Kn(c,["string","array"]))throw new dn("Expected first argument to be of type array or string, but found "+pr(Oi(c))+" instead.");if(this.endIndex){var y=this.endIndex.evaluate(s);return c.slice(h,y)}return c.slice(h)},tl.prototype.eachChild=function(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)},tl.prototype.outputDefined=function(){return!1},tl.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var s=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),s]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Kl=Qs("==",function(s,c,h){return c===h},An),kd=Qs("!=",function(s,c,h){return c!==h},function(s,c,h,y){return!An(0,c,h,y)}),th=Qs("<",function(s,c,h){return c<h},function(s,c,h,y){return y.compare(c,h)<0}),Os=Qs(">",function(s,c,h){return c>h},function(s,c,h,y){return y.compare(c,h)>0}),Xl=Qs("<=",function(s,c,h){return c<=h},function(s,c,h,y){return y.compare(c,h)<=0}),dg=Qs(">=",function(s,c,h){return c>=h},function(s,c,h,y){return y.compare(c,h)>=0}),as=function(s,c,h,y,x){this.type=qt,this.number=s,this.locale=c,this.currency=h,this.minFractionDigits=y,this.maxFractionDigits=x};as.parse=function(s,c){if(3!==s.length)return c.error("Expected two arguments.");var h=c.parse(s[1],1,Pt);if(!h)return null;var y=s[2];if("object"!=typeof y||Array.isArray(y))return c.error("NumberFormat options argument must be an object.");var x=null;if(y.locale&&!(x=c.parse(y.locale,1,qt)))return null;var S=null;if(y.currency&&!(S=c.parse(y.currency,1,qt)))return null;var T=null;if(y["min-fraction-digits"]&&!(T=c.parse(y["min-fraction-digits"],1,Pt)))return null;var k=null;return y["max-fraction-digits"]&&!(k=c.parse(y["max-fraction-digits"],1,Pt))?null:new as(h,x,S,T,k)},as.prototype.evaluate=function(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))},as.prototype.eachChild=function(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)},as.prototype.outputDefined=function(){return!1},as.prototype.serialize=function(){var s={};return this.locale&&(s.locale=this.locale.serialize()),this.currency&&(s.currency=this.currency.serialize()),this.minFractionDigits&&(s["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(s["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),s]};var wu=function(s){this.type=Pt,this.input=s};wu.parse=function(s,c){if(2!==s.length)return c.error("Expected 1 argument, but found "+(s.length-1)+" instead.");var h=c.parse(s[1],1);return h?"array"!==h.type.kind&&"string"!==h.type.kind&&"value"!==h.type.kind?c.error("Expected argument of type string or array, but found "+pr(h.type)+" instead."):new wu(h):null},wu.prototype.evaluate=function(s){var c=this.input.evaluate(s);if("string"==typeof c||Array.isArray(c))return c.length;throw new dn("Expected value to be of type string or array, but found "+pr(Oi(c))+" instead.")},wu.prototype.eachChild=function(s){s(this.input)},wu.prototype.outputDefined=function(){return!1},wu.prototype.serialize=function(){var s=["length"];return this.eachChild(function(c){s.push(c.serialize())}),s};var rl={"==":Kl,"!=":kd,">":Os,"<":th,">=":dg,"<=":Xl,array:zo,at:Yu,boolean:zo,case:$l,coalesce:mo,collator:yi,format:Zn,image:rs,in:Qu,"index-of":el,interpolate:po,"interpolate-hcl":po,"interpolate-lab":po,length:wu,let:bu,literal:pa,match:Tr,number:zo,"number-format":as,object:zo,slice:tl,step:Ba,string:zo,"to-boolean":ti,"to-color":ti,"to-number":ti,"to-string":ti,var:Zu,within:ma};function nh(s,c){var h=c[0],y=c[1],x=c[2],S=c[3];h=h.evaluate(s),y=y.evaluate(s),x=x.evaluate(s);var T=S?S.evaluate(s):1,k=Pc(h,y,x,T);if(k)throw new dn(k);return new ir(h/255*T,y/255*T,x/255*T,T)}function rh(s,c){return s in c}function eu(s,c){var h=c[s];return void 0===h?null:h}function il(s){return{type:s}}function Md(s){return{result:"success",value:s}}function Mi(s){return{result:"error",value:s}}function to(s){return"data-driven"===s["property-type"]||"cross-faded-data-driven"===s["property-type"]}function no(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function ks(s){return!!s.expression&&s.expression.interpolated}function Cr(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":null===s?"null":typeof s}function Yo(s){return"object"==typeof s&&null!==s&&!Array.isArray(s)}function Rc(s){return s}function xu(s,c,h){return void 0!==s?s:void 0!==c?c:void 0!==h?h:void 0}function Dc(s,c,h,y,x){return xu(typeof h===x?y[h]:void 0,s.default,c.default)}function Nd(s,c,h){if("number"!==Cr(h))return xu(s.default,c.default);var y=s.stops.length;if(1===y||h<=s.stops[0][0])return s.stops[0][1];if(h>=s.stops[y-1][0])return s.stops[y-1][1];var x=os(s.stops.map(function(S){return S[0]}),h);return s.stops[x][1]}function ss(s,c,h){var y=void 0!==s.base?s.base:1;if("number"!==Cr(h))return xu(s.default,c.default);var x=s.stops.length;if(1===x||h<=s.stops[0][0])return s.stops[0][1];if(h>=s.stops[x-1][0])return s.stops[x-1][1];var le,_e,Oe,Ze,S=os(s.stops.map(function(re){return re[0]}),h),T=(le=y,Ze=h-(_e=s.stops[S][0]),0==(Oe=s.stops[S+1][0]-_e)?0:1===le?Ze/Oe:(Math.pow(le,Ze)-1)/(Math.pow(le,Oe)-1)),k=s.stops[S][1],q=s.stops[S+1][1],$=Ad[c.type]||Rc;if(s.colorSpace&&"rgb"!==s.colorSpace){var Q=ja[s.colorSpace];$=function(re,le){return Q.reverse(Q.interpolate(Q.forward(re),Q.forward(le),T))}}return"function"==typeof k.evaluate?{evaluate:function(){for(var re=[],le=arguments.length;le--;)re[le]=arguments[le];var _e=k.evaluate.apply(void 0,re),Ae=q.evaluate.apply(void 0,re);if(void 0!==_e&&void 0!==Ae)return $(_e,Ae,T)}}:$(k,q,T)}function go(s,c,h){return"color"===c.type?h=ir.parse(h):"formatted"===c.type?h=Ui.fromString(h.toString()):"resolvedImage"===c.type?h=ur.fromString(h.toString()):Cr(h)===c.type||"enum"===c.type&&c.values[h]||(h=void 0),xu(h,s.default,c.default)}so.register(rl,{error:[{kind:"error"},[qt],function(s,c){throw new dn(c[0].evaluate(s))}],typeof:[qt,[nn],function(s,c){return pr(Oi(c[0].evaluate(s)))}],"to-rgba":[ei(Pt,4),[On],function(s,c){return c[0].evaluate(s).toArray()}],rgb:[On,[Pt,Pt,Pt],nh],rgba:[On,[Pt,Pt,Pt,Pt],nh],has:{type:It,overloads:[[[qt],function(s,c){return rh(c[0].evaluate(s),s.properties())}],[[qt,Tn],function(s,c){var h=c[1];return rh(c[0].evaluate(s),h.evaluate(s))}]]},get:{type:nn,overloads:[[[qt],function(s,c){return eu(c[0].evaluate(s),s.properties())}],[[qt,Tn],function(s,c){var h=c[1];return eu(c[0].evaluate(s),h.evaluate(s))}]]},"feature-state":[nn,[qt],function(s,c){return eu(c[0].evaluate(s),s.featureState||{})}],properties:[Tn,[],function(s){return s.properties()}],"geometry-type":[qt,[],function(s){return s.geometryType()}],id:[nn,[],function(s){return s.id()}],zoom:[Pt,[],function(s){return s.globals.zoom}],"heatmap-density":[Pt,[],function(s){return s.globals.heatmapDensity||0}],"line-progress":[Pt,[],function(s){return s.globals.lineProgress||0}],accumulated:[nn,[],function(s){return void 0===s.globals.accumulated?null:s.globals.accumulated}],"+":[Pt,il(Pt),function(s,c){for(var h=0,y=0,x=c;y<x.length;y+=1)h+=x[y].evaluate(s);return h}],"*":[Pt,il(Pt),function(s,c){for(var h=1,y=0,x=c;y<x.length;y+=1)h*=x[y].evaluate(s);return h}],"-":{type:Pt,overloads:[[[Pt,Pt],function(s,c){var h=c[1];return c[0].evaluate(s)-h.evaluate(s)}],[[Pt],function(s,c){return-c[0].evaluate(s)}]]},"/":[Pt,[Pt,Pt],function(s,c){var h=c[1];return c[0].evaluate(s)/h.evaluate(s)}],"%":[Pt,[Pt,Pt],function(s,c){var h=c[1];return c[0].evaluate(s)%h.evaluate(s)}],ln2:[Pt,[],function(){return Math.LN2}],pi:[Pt,[],function(){return Math.PI}],e:[Pt,[],function(){return Math.E}],"^":[Pt,[Pt,Pt],function(s,c){var h=c[1];return Math.pow(c[0].evaluate(s),h.evaluate(s))}],sqrt:[Pt,[Pt],function(s,c){return Math.sqrt(c[0].evaluate(s))}],log10:[Pt,[Pt],function(s,c){return Math.log(c[0].evaluate(s))/Math.LN10}],ln:[Pt,[Pt],function(s,c){return Math.log(c[0].evaluate(s))}],log2:[Pt,[Pt],function(s,c){return Math.log(c[0].evaluate(s))/Math.LN2}],sin:[Pt,[Pt],function(s,c){return Math.sin(c[0].evaluate(s))}],cos:[Pt,[Pt],function(s,c){return Math.cos(c[0].evaluate(s))}],tan:[Pt,[Pt],function(s,c){return Math.tan(c[0].evaluate(s))}],asin:[Pt,[Pt],function(s,c){return Math.asin(c[0].evaluate(s))}],acos:[Pt,[Pt],function(s,c){return Math.acos(c[0].evaluate(s))}],atan:[Pt,[Pt],function(s,c){return Math.atan(c[0].evaluate(s))}],min:[Pt,il(Pt),function(s,c){return Math.min.apply(Math,c.map(function(h){return h.evaluate(s)}))}],max:[Pt,il(Pt),function(s,c){return Math.max.apply(Math,c.map(function(h){return h.evaluate(s)}))}],abs:[Pt,[Pt],function(s,c){return Math.abs(c[0].evaluate(s))}],round:[Pt,[Pt],function(s,c){var h=c[0].evaluate(s);return h<0?-Math.round(-h):Math.round(h)}],floor:[Pt,[Pt],function(s,c){return Math.floor(c[0].evaluate(s))}],ceil:[Pt,[Pt],function(s,c){return Math.ceil(c[0].evaluate(s))}],"filter-==":[It,[qt,nn],function(s,c){var h=c[0],y=c[1];return s.properties()[h.value]===y.value}],"filter-id-==":[It,[nn],function(s,c){var h=c[0];return s.id()===h.value}],"filter-type-==":[It,[qt],function(s,c){var h=c[0];return s.geometryType()===h.value}],"filter-<":[It,[qt,nn],function(s,c){var h=c[0],y=c[1],x=s.properties()[h.value],S=y.value;return typeof x==typeof S&&x<S}],"filter-id-<":[It,[nn],function(s,c){var h=c[0],y=s.id(),x=h.value;return typeof y==typeof x&&y<x}],"filter->":[It,[qt,nn],function(s,c){var h=c[0],y=c[1],x=s.properties()[h.value],S=y.value;return typeof x==typeof S&&x>S}],"filter-id->":[It,[nn],function(s,c){var h=c[0],y=s.id(),x=h.value;return typeof y==typeof x&&y>x}],"filter-<=":[It,[qt,nn],function(s,c){var h=c[0],y=c[1],x=s.properties()[h.value],S=y.value;return typeof x==typeof S&&x<=S}],"filter-id-<=":[It,[nn],function(s,c){var h=c[0],y=s.id(),x=h.value;return typeof y==typeof x&&y<=x}],"filter->=":[It,[qt,nn],function(s,c){var h=c[0],y=c[1],x=s.properties()[h.value],S=y.value;return typeof x==typeof S&&x>=S}],"filter-id->=":[It,[nn],function(s,c){var h=c[0],y=s.id(),x=h.value;return typeof y==typeof x&&y>=x}],"filter-has":[It,[nn],function(s,c){return c[0].value in s.properties()}],"filter-has-id":[It,[],function(s){return null!==s.id()&&void 0!==s.id()}],"filter-type-in":[It,[ei(qt)],function(s,c){return c[0].value.indexOf(s.geometryType())>=0}],"filter-id-in":[It,[ei(nn)],function(s,c){return c[0].value.indexOf(s.id())>=0}],"filter-in-small":[It,[qt,ei(nn)],function(s,c){var h=c[0];return c[1].value.indexOf(s.properties()[h.value])>=0}],"filter-in-large":[It,[qt,ei(nn)],function(s,c){var h=c[0],y=c[1];return function(x,S,T,k){for(;T<=k;){var q=T+k>>1;if(S[q]===x)return!0;S[q]>x?k=q-1:T=q+1}return!1}(s.properties()[h.value],y.value,0,y.value.length-1)}],all:{type:It,overloads:[[[It,It],function(s,c){var h=c[1];return c[0].evaluate(s)&&h.evaluate(s)}],[il(It),function(s,c){for(var h=0,y=c;h<y.length;h+=1)if(!y[h].evaluate(s))return!1;return!0}]]},any:{type:It,overloads:[[[It,It],function(s,c){var h=c[1];return c[0].evaluate(s)||h.evaluate(s)}],[il(It),function(s,c){for(var h=0,y=c;h<y.length;h+=1)if(y[h].evaluate(s))return!0;return!1}]]},"!":[It,[It],function(s,c){return!c[0].evaluate(s)}],"is-supported-script":[It,[qt],function(s,c){var h=s.globals&&s.globals.isSupportedScript;return!h||h(c[0].evaluate(s))}],upcase:[qt,[qt],function(s,c){return c[0].evaluate(s).toUpperCase()}],downcase:[qt,[qt],function(s,c){return c[0].evaluate(s).toLowerCase()}],concat:[qt,il(nn),function(s,c){return c.map(function(h){return Ds(h.evaluate(s))}).join("")}],"resolved-locale":[qt,[Fr],function(s,c){return c[0].evaluate(s).resolvedLocale()}]});var Wl=function(s,c){var h;this.expression=s,this._warningHistory={},this._evaluator=new yu,this._defaultValue=c?"color"===(h=c).type&&Yo(h.default)?new ir(0,0,0,0):"color"===h.type?ir.parse(h.default)||null:void 0===h.default?null:h.default:null,this._enumValues=c&&"enum"===c.type?c.values:null};function Qo(s){return Array.isArray(s)&&s.length>0&&"string"==typeof s[0]&&s[0]in rl}function on(s,c){var x,S,h=new Zo(rl,[],c?(S={color:On,string:qt,number:Pt,enum:qt,boolean:It,formatted:$n,resolvedImage:Xr},"array"===(x=c).type?ei(S[x.value]||nn,x.length):S[x.type]):void 0),y=h.parse(s,void 0,void 0,void 0,c&&"string"===c.type?{typeAnnotation:"coerce"}:void 0);return y?Md(new Wl(y,c)):Mi(h.errors)}Wl.prototype.evaluateWithoutErrorHandling=function(s,c,h,y,x,S){return this._evaluator.globals=s,this._evaluator.feature=c,this._evaluator.featureState=h,this._evaluator.canonical=y,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=S,this.expression.evaluate(this._evaluator)},Wl.prototype.evaluate=function(s,c,h,y,x,S){this._evaluator.globals=s,this._evaluator.feature=c||null,this._evaluator.featureState=h||null,this._evaluator.canonical=y,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=S||null;try{var T=this.expression.evaluate(this._evaluator);if(null==T||"number"==typeof T&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new dn("Expected value to be one of "+Object.keys(this._enumValues).map(function(k){return JSON.stringify(k)}).join(", ")+", but found "+JSON.stringify(T)+" instead.");return T}catch(k){return this._warningHistory[k.message]||(this._warningHistory[k.message]=!0,"undefined"!=typeof console&&console.warn(k.message)),this._defaultValue}};var or=function(s,c){this.kind=s,this._styleExpression=c,this.isStateDependent="constant"!==s&&!Ju(c.expression)};or.prototype.evaluateWithoutErrorHandling=function(s,c,h,y,x,S){return this._styleExpression.evaluateWithoutErrorHandling(s,c,h,y,x,S)},or.prototype.evaluate=function(s,c,h,y,x,S){return this._styleExpression.evaluate(s,c,h,y,x,S)};var Wr=function(s,c,h,y){this.kind=s,this.zoomStops=h,this._styleExpression=c,this.isStateDependent="camera"!==s&&!Ju(c.expression),this.interpolationType=y};function ea(s,c){if("error"===(s=on(s,c)).result)return s;var h=s.value.expression,y=Hl(h);if(!y&&!to(c))return Mi([new Jt("","data expressions not supported")]);var x=yr(h,["zoom"]);if(!x&&!no(c))return Mi([new Jt("","zoom expressions not supported")]);var S=function T(k){var q=null;if(k instanceof bu)q=T(k.result);else if(k instanceof mo)for(var $=0,Q=k.args;$<Q.length&&!(q=T(Q[$]));$+=1);else(k instanceof Ba||k instanceof po)&&k.input instanceof so&&"zoom"===k.input.name&&(q=k);return q instanceof Jt||k.eachChild(function(re){var le=T(re);le instanceof Jt?q=le:!q&&le?q=new Jt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):q&&le&&q!==le&&(q=new Jt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),q}(h);return S||x?S instanceof Jt?Mi([S]):S instanceof po&&!ks(c)?Mi([new Jt("",'"interpolate" expressions cannot be used with this property')]):Md(S?new Wr(y?"camera":"composite",s.value,S.labels,S instanceof po?S.interpolation:void 0):new or(y?"constant":"source",s.value)):Mi([new Jt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Wr.prototype.evaluateWithoutErrorHandling=function(s,c,h,y,x,S){return this._styleExpression.evaluateWithoutErrorHandling(s,c,h,y,x,S)},Wr.prototype.evaluate=function(s,c,h,y,x,S){return this._styleExpression.evaluate(s,c,h,y,x,S)},Wr.prototype.interpolationFactor=function(s,c,h){return this.interpolationType?po.interpolationFactor(this.interpolationType,s,c,h):0};var us=function(s,c){this._parameters=s,this._specification=c,Bt(this,function h(y,x){var S,T,k,q="color"===x.type,$=y.stops&&"object"==typeof y.stops[0][0],Q=$||!($||void 0!==y.property),re=y.type||(ks(x)?"exponential":"interval");if(q&&((y=Bt({},y)).stops&&(y.stops=y.stops.map(function(Gt){return[Gt[0],ir.parse(Gt[1])]})),y.default=ir.parse(y.default?y.default:x.default)),y.colorSpace&&"rgb"!==y.colorSpace&&!ja[y.colorSpace])throw new Error("Unknown color space: "+y.colorSpace);if("exponential"===re)S=ss;else if("interval"===re)S=Nd;else if("categorical"===re){S=Dc,T=Object.create(null);for(var le=0,_e=y.stops;le<_e.length;le+=1){var Ae=_e[le];T[Ae[0]]=Ae[1]}k=typeof y.stops[0][0]}else{if("identity"!==re)throw new Error('Unknown function type "'+re+'"');S=go}if($){for(var Oe={},Ze=[],Ue=0;Ue<y.stops.length;Ue++){var nt=y.stops[Ue],ot=nt[0].zoom;void 0===Oe[ot]&&(Oe[ot]={zoom:ot,type:y.type,property:y.property,default:y.default,stops:[]},Ze.push(ot)),Oe[ot].stops.push([nt[0].value,nt[1]])}for(var ct=[],ft=0,St=Ze;ft<St.length;ft+=1){var zt=St[ft];ct.push([Oe[zt].zoom,h(Oe[zt],x)])}var Ft={name:"linear"};return{kind:"composite",interpolationType:Ft,interpolationFactor:po.interpolationFactor.bind(void 0,Ft),zoomStops:ct.map(function(Gt){return Gt[0]}),evaluate:function(Gt,un){var $t=Gt.zoom;return ss({stops:ct,base:y.base},x,$t).evaluate($t,un)}}}if(Q){var an="exponential"===re?{name:"exponential",base:void 0!==y.base?y.base:1}:null;return{kind:"camera",interpolationType:an,interpolationFactor:po.interpolationFactor.bind(void 0,an),zoomStops:y.stops.map(function(Gt){return Gt[0]}),evaluate:function(Gt){return S(y,x,Gt.zoom,T,k)}}}return{kind:"source",evaluate:function(Gt,un){var $t=un&&un.properties?un.properties[y.property]:void 0;return void 0===$t?xu(y.default,x.default):S(y,x,$t,T,k)}}}(this._parameters,this._specification))};function ni(s){var c=s.key,h=s.value,y=s.valueSpec||{},x=s.objectElementValidators||{},S=s.style,T=s.styleSpec,k=[],q=Cr(h);if("object"!==q)return[new je(c,h,"object expected, "+q+" found")];for(var $ in h){var Q=$.split(".")[0],re=y[Q]||y["*"],le=void 0;if(x[Q])le=x[Q];else if(y[Q])le=mr;else if(x["*"])le=x["*"];else{if(!y["*"]){k.push(new je(c,h[$],'unknown property "'+$+'"'));continue}le=mr}k=k.concat(le({key:(c&&c+".")+$,value:h[$],valueSpec:re,style:S,styleSpec:T,object:h,objectKey:$},h))}for(var _e in y)x[_e]||y[_e].required&&void 0===y[_e].default&&void 0===h[_e]&&k.push(new je(c,h,'missing required property "'+_e+'"'));return k}function Eu(s){var c=s.value,h=s.valueSpec,y=s.style,x=s.styleSpec,S=s.key,T=s.arrayElementValidator||mr;if("array"!==Cr(c))return[new je(S,c,"array expected, "+Cr(c)+" found")];if(h.length&&c.length!==h.length)return[new je(S,c,"array length "+h.length+" expected, length "+c.length+" found")];if(h["min-length"]&&c.length<h["min-length"])return[new je(S,c,"array length at least "+h["min-length"]+" expected, length "+c.length+" found")];var k={type:h.value,values:h.values};x.$version<7&&(k.function=h.function),"object"===Cr(h.value)&&(k=h.value);for(var q=[],$=0;$<c.length;$++)q=q.concat(T({array:c,arrayIndex:$,value:c[$],valueSpec:k,style:y,styleSpec:x,key:S+"["+$+"]"}));return q}function Ni(s){var c=s.key,h=s.value,y=s.valueSpec,x=Cr(h);return"number"===x&&h!=h&&(x="NaN"),"number"!==x?[new je(c,h,"number expected, "+x+" found")]:"minimum"in y&&h<y.minimum?[new je(c,h,h+" is less than the minimum value "+y.minimum)]:"maximum"in y&&h>y.maximum?[new je(c,h,h+" is greater than the maximum value "+y.maximum)]:[]}function ol(s){var c,h,y,x=s.valueSpec,S=lt(s.value.type),T={},k="categorical"!==S&&void 0===s.value.property,q=!k,$="array"===Cr(s.value.stops)&&"array"===Cr(s.value.stops[0])&&"object"===Cr(s.value.stops[0][0]),Q=ni({key:s.key,value:s.value,valueSpec:s.styleSpec.function,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(_e){if("identity"===S)return[new je(_e.key,_e.value,'identity function may not have a "stops" property')];var Ae=[],Oe=_e.value;return Ae=Ae.concat(Eu({key:_e.key,value:Oe,valueSpec:_e.valueSpec,style:_e.style,styleSpec:_e.styleSpec,arrayElementValidator:re})),"array"===Cr(Oe)&&0===Oe.length&&Ae.push(new je(_e.key,Oe,"array must have at least one stop")),Ae},default:function(_e){return mr({key:_e.key,value:_e.value,valueSpec:x,style:_e.style,styleSpec:_e.styleSpec})}}});return"identity"===S&&k&&Q.push(new je(s.key,s.value,'missing required property "property"')),"identity"===S||s.value.stops||Q.push(new je(s.key,s.value,'missing required property "stops"')),"exponential"===S&&s.valueSpec.expression&&!ks(s.valueSpec)&&Q.push(new je(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(q&&!to(s.valueSpec)?Q.push(new je(s.key,s.value,"property functions not supported")):k&&!no(s.valueSpec)&&Q.push(new je(s.key,s.value,"zoom functions not supported"))),"categorical"!==S&&!$||void 0!==s.value.property||Q.push(new je(s.key,s.value,'"property" property is required')),Q;function re(_e){var Ae=[],Oe=_e.value,Ze=_e.key;if("array"!==Cr(Oe))return[new je(Ze,Oe,"array expected, "+Cr(Oe)+" found")];if(2!==Oe.length)return[new je(Ze,Oe,"array length 2 expected, length "+Oe.length+" found")];if($){if("object"!==Cr(Oe[0]))return[new je(Ze,Oe,"object expected, "+Cr(Oe[0])+" found")];if(void 0===Oe[0].zoom)return[new je(Ze,Oe,"object stop key must have zoom")];if(void 0===Oe[0].value)return[new je(Ze,Oe,"object stop key must have value")];if(y&&y>lt(Oe[0].zoom))return[new je(Ze,Oe[0].zoom,"stop zoom values must appear in ascending order")];lt(Oe[0].zoom)!==y&&(y=lt(Oe[0].zoom),h=void 0,T={}),Ae=Ae.concat(ni({key:Ze+"[0]",value:Oe[0],valueSpec:{zoom:{}},style:_e.style,styleSpec:_e.styleSpec,objectElementValidators:{zoom:Ni,value:le}}))}else Ae=Ae.concat(le({key:Ze+"[0]",value:Oe[0],valueSpec:{},style:_e.style,styleSpec:_e.styleSpec},Oe));return Qo(Et(Oe[1]))?Ae.concat([new je(Ze+"[1]",Oe[1],"expressions are not allowed in function stops.")]):Ae.concat(mr({key:Ze+"[1]",value:Oe[1],valueSpec:x,style:_e.style,styleSpec:_e.styleSpec}))}function le(_e,Ae){var Oe=Cr(_e.value),Ze=lt(_e.value),Ue=null!==_e.value?_e.value:Ae;if(c){if(Oe!==c)return[new je(_e.key,Ue,Oe+" stop domain type must match previous stop domain type "+c)]}else c=Oe;if("number"!==Oe&&"string"!==Oe&&"boolean"!==Oe)return[new je(_e.key,Ue,"stop domain value must be a number, string, or boolean")];if("number"!==Oe&&"categorical"!==S){var nt="number expected, "+Oe+" found";return to(x)&&void 0===S&&(nt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new je(_e.key,Ue,nt)]}return"categorical"!==S||"number"!==Oe||isFinite(Ze)&&Math.floor(Ze)===Ze?"categorical"!==S&&"number"===Oe&&void 0!==h&&Ze<h?[new je(_e.key,Ue,"stop domain values must appear in ascending order")]:(h=Ze,"categorical"===S&&Ze in T?[new je(_e.key,Ue,"stop domain values must be unique")]:(T[Ze]=!0,[])):[new je(_e.key,Ue,"integer expected, found "+Ze)]}}function Fa(s){var c=("property"===s.expressionContext?ea:on)(Et(s.value),s.valueSpec);if("error"===c.result)return c.value.map(function(y){return new je(""+s.key+y.key,s.value,y.message)});var h=c.value.expression||c.value._styleExpression.expression;if("property"===s.expressionContext&&"text-font"===s.propertyKey&&!h.outputDefined())return[new je(s.key,s.value,'Invalid data expression for "'+s.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===s.expressionContext&&"layout"===s.propertyType&&!Ju(h))return[new je(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===s.expressionContext&&!Ju(h))return[new je(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&0===s.expressionContext.indexOf("cluster")){if(!yr(h,["zoom","feature-state"]))return[new je(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===s.expressionContext&&!Hl(h))return[new je(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Xn(s){var c=s.key,h=s.value,y=s.valueSpec,x=[];return Array.isArray(y.values)?-1===y.values.indexOf(lt(h))&&x.push(new je(c,h,"expected one of ["+y.values.join(", ")+"], "+JSON.stringify(h)+" found")):-1===Object.keys(y.values).indexOf(lt(h))&&x.push(new je(c,h,"expected one of ["+Object.keys(y.values).join(", ")+"], "+JSON.stringify(h)+" found")),x}function Su(s){if(!0===s||!1===s)return!0;if(!Array.isArray(s)||0===s.length)return!1;switch(s[0]){case"has":return s.length>=2&&"$id"!==s[1]&&"$type"!==s[1];case"in":return s.length>=3&&("string"!=typeof s[1]||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==s.length||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(var c=0,h=s.slice(1);c<h.length;c+=1){var y=h[c];if(!Su(y)&&"boolean"!=typeof y)return!1}return!0;default:return!0}}us.deserialize=function(s){return new us(s._parameters,s._specification)},us.serialize=function(s){return{_parameters:s._parameters,_specification:s._specification}};var Jl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Zl(s){if(null==s)return{filter:function(){return!0},needGeometry:!1};Su(s)||(s=vo(s));var c=on(s,Jl);if("error"===c.result)throw new Error(c.value.map(function(h){return h.key+": "+h.message}).join(", "));return{filter:function(h,y,x){return c.value.evaluate(h,y,{},x)},needGeometry:function h(y){if(!Array.isArray(y))return!1;if("within"===y[0])return!0;for(var x=1;x<y.length;x++)if(h(y[x]))return!0;return!1}(s)}}function Yl(s,c){return s<c?-1:s>c?1:0}function vo(s){if(!s)return!0;var c,h=s[0];return s.length<=1?"any"!==h:"=="===h?al(s[1],s[2],"=="):"!="===h?Jr(al(s[1],s[2],"==")):"<"===h||">"===h||"<="===h||">="===h?al(s[1],s[2],h):"any"===h?(c=s.slice(1),["any"].concat(c.map(vo))):"all"===h?["all"].concat(s.slice(1).map(vo)):"none"===h?["all"].concat(s.slice(1).map(vo).map(Jr)):"in"===h?sl(s[1],s.slice(2)):"!in"===h?Jr(sl(s[1],s.slice(2))):"has"===h?Ua(s[1]):"!has"===h?Jr(Ua(s[1])):"within"!==h||s}function al(s,c,h){switch(s){case"$type":return["filter-type-"+h,c];case"$id":return["filter-id-"+h,c];default:return["filter-"+h,s,c]}}function sl(s,c){if(0===c.length)return!1;switch(s){case"$type":return["filter-type-in",["literal",c]];case"$id":return["filter-id-in",["literal",c]];default:return c.length>200&&!c.some(function(h){return typeof h!=typeof c[0]})?["filter-in-large",s,["literal",c.sort(Yl)]]:["filter-in-small",s,["literal",c]]}}function Ua(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function Jr(s){return["!",s]}function Ld(s){return Su(Et(s.value))?Fa(Bt({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function c(h){var y=h.value,x=h.key;if("array"!==Cr(y))return[new je(x,y,"array expected, "+Cr(y)+" found")];var S,T=h.styleSpec,k=[];if(y.length<1)return[new je(x,y,"filter array must have at least 1 element")];switch(k=k.concat(Xn({key:x+"[0]",value:y[0],valueSpec:T.filter_operator,style:h.style,styleSpec:h.styleSpec})),lt(y[0])){case"<":case"<=":case">":case">=":y.length>=2&&"$type"===lt(y[1])&&k.push(new je(x,y,'"$type" cannot be use with operator "'+y[0]+'"'));case"==":case"!=":3!==y.length&&k.push(new je(x,y,'filter array for operator "'+y[0]+'" must have 3 elements'));case"in":case"!in":y.length>=2&&"string"!==(S=Cr(y[1]))&&k.push(new je(x+"[1]",y[1],"string expected, "+S+" found"));for(var q=2;q<y.length;q++)S=Cr(y[q]),"$type"===lt(y[1])?k=k.concat(Xn({key:x+"["+q+"]",value:y[q],valueSpec:T.geometry_type,style:h.style,styleSpec:h.styleSpec})):"string"!==S&&"number"!==S&&"boolean"!==S&&k.push(new je(x+"["+q+"]",y[q],"string, number, or boolean expected, "+S+" found"));break;case"any":case"all":case"none":for(var $=1;$<y.length;$++)k=k.concat(c({key:x+"["+$+"]",value:y[$],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":S=Cr(y[1]),2!==y.length?k.push(new je(x,y,'filter array for "'+y[0]+'" operator must have 2 elements')):"string"!==S&&k.push(new je(x+"[1]",y[1],"string expected, "+S+" found"));break;case"within":S=Cr(y[1]),2!==y.length?k.push(new je(x,y,'filter array for "'+y[0]+'" operator must have 2 elements')):"object"!==S&&k.push(new je(x+"[1]",y[1],"object expected, "+S+" found"))}return k}(s)}function ih(s,c){var h=s.key,y=s.style,x=s.styleSpec,S=s.value,T=s.objectKey,k=x[c+"_"+s.layerType];if(!k)return[];var q=T.match(/^(.*)-transition$/);if("paint"===c&&q&&k[q[1]]&&k[q[1]].transition)return mr({key:h,value:S,valueSpec:x.transition,style:y,styleSpec:x});var $,Q=s.valueSpec||k[T];if(!Q)return[new je(h,S,'unknown property "'+T+'"')];if("string"===Cr(S)&&to(Q)&&!Q.tokens&&($=/^{([^}]+)}$/.exec(S)))return[new je(h,S,'"'+T+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify($[1])+" }`.")];var re=[];return"symbol"===s.layerType&&("text-field"===T&&y&&!y.glyphs&&re.push(new je(h,S,'use of "text-field" requires a style "glyphs" property')),"text-font"===T&&Yo(Et(S))&&"identity"===lt(S.type)&&re.push(new je(h,S,'"text-font" does not support identity functions'))),re.concat(mr({key:s.key,value:S,valueSpec:Q,style:y,styleSpec:x,expressionContext:"property",propertyType:c,propertyKey:T}))}function ga(s){return ih(s,"paint")}function qa(s){return ih(s,"layout")}function Oc(s){var c=[],h=s.value,y=s.key,x=s.style,S=s.styleSpec;h.type||h.ref||c.push(new je(y,h,'either "type" or "ref" is required'));var T,k=lt(h.type),q=lt(h.ref);if(h.id)for(var $=lt(h.id),Q=0;Q<s.arrayIndex;Q++){var re=x.layers[Q];lt(re.id)===$&&c.push(new je(y,h.id,'duplicate layer id "'+h.id+'", previously used at line '+re.id.__line__))}if("ref"in h)["type","source","source-layer","filter","layout"].forEach(function(Ae){Ae in h&&c.push(new je(y,h[Ae],'"'+Ae+'" is prohibited for ref layers'))}),x.layers.forEach(function(Ae){lt(Ae.id)===q&&(T=Ae)}),T?T.ref?c.push(new je(y,h.ref,"ref cannot reference another ref layer")):k=lt(T.type):c.push(new je(y,h.ref,'ref layer "'+q+'" not found'));else if("background"!==k)if(h.source){var le=x.sources&&x.sources[h.source],_e=le&&lt(le.type);le?"vector"===_e&&"raster"===k?c.push(new je(y,h.source,'layer "'+h.id+'" requires a raster source')):"raster"===_e&&"raster"!==k?c.push(new je(y,h.source,'layer "'+h.id+'" requires a vector source')):"vector"!==_e||h["source-layer"]?"raster-dem"===_e&&"hillshade"!==k?c.push(new je(y,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==k||!h.paint||!h.paint["line-gradient"]||"geojson"===_e&&le.lineMetrics||c.push(new je(y,h,'layer "'+h.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):c.push(new je(y,h,'layer "'+h.id+'" must specify a "source-layer"')):c.push(new je(y,h.source,'source "'+h.source+'" not found'))}else c.push(new je(y,h,'missing required property "source"'));return c=c.concat(ni({key:y,value:h,valueSpec:S.layer,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return mr({key:y+".type",value:h.type,valueSpec:S.layer.type,style:s.style,styleSpec:s.styleSpec,object:h,objectKey:"type"})},filter:Ld,layout:function(Ae){return ni({layer:h,key:Ae.key,value:Ae.value,style:Ae.style,styleSpec:Ae.styleSpec,objectElementValidators:{"*":function(Oe){return qa(Bt({layerType:k},Oe))}}})},paint:function(Ae){return ni({layer:h,key:Ae.key,value:Ae.value,style:Ae.style,styleSpec:Ae.styleSpec,objectElementValidators:{"*":function(Oe){return ga(Bt({layerType:k},Oe))}}})}}}))}function Pr(s){var c=s.value,h=s.key,y=Cr(c);return"string"!==y?[new je(h,c,"string expected, "+y+" found")]:[]}var ul={promoteId:function(s){var c=s.key,h=s.value;if("string"===Cr(h))return Pr({key:c,value:h});var y=[];for(var x in h)y.push.apply(y,Pr({key:c+"."+x,value:h[x]}));return y}};function _o(s){var c=s.value,h=s.key,y=s.styleSpec,x=s.style;if(!c.type)return[new je(h,c,'"type" is required')];var S,T=lt(c.type);switch(T){case"vector":case"raster":case"raster-dem":return ni({key:h,value:c,valueSpec:y["source_"+T.replace("-","_")],style:s.style,styleSpec:y,objectElementValidators:ul});case"geojson":if(S=ni({key:h,value:c,valueSpec:y.source_geojson,style:x,styleSpec:y,objectElementValidators:ul}),c.cluster)for(var k in c.clusterProperties){var q=c.clusterProperties[k],$=q[0],Q="string"==typeof $?[$,["accumulated"],["get",k]]:$;S.push.apply(S,Fa({key:h+"."+k+".map",value:q[1],expressionContext:"cluster-map"})),S.push.apply(S,Fa({key:h+"."+k+".reduce",value:Q,expressionContext:"cluster-reduce"}))}return S;case"video":return ni({key:h,value:c,valueSpec:y.source_video,style:x,styleSpec:y});case"image":return ni({key:h,value:c,valueSpec:y.source_image,style:x,styleSpec:y});case"canvas":return[new je(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Xn({key:h+".type",value:c.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:x,styleSpec:y})}}function Cu(s){var c=s.value,h=s.styleSpec,y=h.light,x=s.style,S=[],T=Cr(c);if(void 0===c)return S;if("object"!==T)return S.concat([new je("light",c,"object expected, "+T+" found")]);for(var k in c){var q=k.match(/^(.*)-transition$/);S=S.concat(q&&y[q[1]]&&y[q[1]].transition?mr({key:k,value:c[k],valueSpec:h.transition,style:x,styleSpec:h}):y[k]?mr({key:k,value:c[k],valueSpec:y[k],style:x,styleSpec:h}):[new je(k,c[k],'unknown property "'+k+'"')])}return S}var Ur={"*":function(){return[]},array:Eu,boolean:function(s){var c=s.value,h=s.key,y=Cr(c);return"boolean"!==y?[new je(h,c,"boolean expected, "+y+" found")]:[]},number:Ni,color:function(s){var c=s.key,h=s.value,y=Cr(h);return"string"!==y?[new je(c,h,"color expected, "+y+" found")]:null===Di(h)?[new je(c,h,'color expected, "'+h+'" found')]:[]},constants:Dt,enum:Xn,filter:Ld,function:ol,layer:Oc,object:ni,source:_o,light:Cu,string:Pr,formatted:function(s){return 0===Pr(s).length?[]:Fa(s)},resolvedImage:function(s){return 0===Pr(s).length?[]:Fa(s)}};function mr(s){var c=s.value,h=s.valueSpec,y=s.styleSpec;return h.expression&&Yo(lt(c))?ol(s):h.expression&&Qo(Et(c))?Fa(s):h.type&&Ur[h.type]?Ur[h.type](s):ni(Bt({},s,{valueSpec:h.type?y[h.type]:h}))}function ll(s){var c=s.value,h=s.key,y=Pr(s);return y.length||(-1===c.indexOf("{fontstack}")&&y.push(new je(h,c,'"glyphs" url must include a "{fontstack}" token')),-1===c.indexOf("{range}")&&y.push(new je(h,c,'"glyphs" url must include a "{range}" token'))),y}function tu(s,c){void 0===c&&(c=Pe);var h=[];return h=h.concat(mr({key:"",value:s,valueSpec:c.$root,styleSpec:c,style:s,objectElementValidators:{glyphs:ll,"*":function(){return[]}}})),s.constants&&(h=h.concat(Dt({key:"constants",value:s.constants,style:s,styleSpec:c}))),fg(h)}function fg(s){return[].concat(s).sort(function(c,h){return c.line-h.line})}function kc(s){return function(){for(var c=[],h=arguments.length;h--;)c[h]=arguments[h];return fg(s.apply(this,c))}}tu.source=kc(_o),tu.light=kc(Cu),tu.layer=kc(Oc),tu.filter=kc(Ld),tu.paintProperty=kc(ga),tu.layoutProperty=kc(qa);var Bd=tu,__=Bd.light,zd=Bd.paintProperty,oh=Bd.layoutProperty;function jd(s,c){var h=!1;if(c&&c.length)for(var y=0,x=c;y<x.length;y+=1)s.fire(new et(new Error(x[y].message))),h=!0;return h}var Fo=Va;function Va(s,c,h){var y=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;var x=new Int32Array(this.arrayBuffer);s=x[0],this.d=(c=x[1])+2*(h=x[2]);for(var S=0;S<this.d*this.d;S++){var T=x[3+S],k=x[3+S+1];y.push(T===k?null:x.subarray(T,k))}var q=x[3+y.length+1];this.keys=x.subarray(x[3+y.length],q),this.bboxes=x.subarray(q),this.insert=this._insertReadonly}else{this.d=c+2*h;for(var $=0;$<this.d*this.d;$++)y.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=s,this.padding=h,this.scale=c/s,this.uid=0;var Q=h/c*s;this.min=-Q,this.max=s+Q}Va.prototype.insert=function(s,c,h,y,x){this._forEachCell(c,h,y,x,this._insertCell,this.uid++),this.keys.push(s),this.bboxes.push(c),this.bboxes.push(h),this.bboxes.push(y),this.bboxes.push(x)},Va.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Va.prototype._insertCell=function(s,c,h,y,x,S){this.cells[x].push(S)},Va.prototype.query=function(s,c,h,y,x){var S=this.min,T=this.max;if(s<=S&&c<=S&&T<=h&&T<=y&&!x)return Array.prototype.slice.call(this.keys);var k=[];return this._forEachCell(s,c,h,y,this._queryCell,k,{},x),k},Va.prototype._queryCell=function(s,c,h,y,x,S,T,k){var q=this.cells[x];if(null!==q)for(var $=this.keys,Q=this.bboxes,re=0;re<q.length;re++){var le=q[re];if(void 0===T[le]){var _e=4*le;(k?k(Q[_e+0],Q[_e+1],Q[_e+2],Q[_e+3]):s<=Q[_e+2]&&c<=Q[_e+3]&&h>=Q[_e+0]&&y>=Q[_e+1])?(T[le]=!0,S.push($[le])):T[le]=!1}}},Va.prototype._forEachCell=function(s,c,h,y,x,S,T,k){for(var q=this._convertToCellCoord(s),$=this._convertToCellCoord(c),Q=this._convertToCellCoord(h),re=this._convertToCellCoord(y),le=q;le<=Q;le++)for(var _e=$;_e<=re;_e++){var Ae=this.d*_e+le;if((!k||k(this._convertFromCellCoord(le),this._convertFromCellCoord(_e),this._convertFromCellCoord(le+1),this._convertFromCellCoord(_e+1)))&&x.call(this,s,c,h,y,Ae,S,T,k))return}},Va.prototype._convertFromCellCoord=function(s){return(s-this.padding)/this.scale},Va.prototype._convertToCellCoord=function(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))},Va.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var s=this.cells,c=3+this.cells.length+1+1,h=0,y=0;y<this.cells.length;y++)h+=this.cells[y].length;var x=new Int32Array(c+h+this.keys.length+this.bboxes.length);x[0]=this.extent,x[1]=this.n,x[2]=this.padding;for(var S=c,T=0;T<s.length;T++){var k=s[T];x[3+T]=S,x.set(k,S),S+=k.length}return x[3+s.length]=S,x.set(this.keys,S),x[3+s.length+1]=S+=this.keys.length,x.set(this.bboxes,S),S+=this.bboxes.length,x.buffer};var hg=B.ImageData,lo=B.ImageBitmap,Ea={};function Yt(s,c,h){void 0===h&&(h={}),Object.defineProperty(c,"_classRegistryKey",{value:s,writeable:!1}),Ea[s]={klass:c,omit:h.omit||[],shallow:h.shallow||[]}}for(var Ql in Yt("Object",Object),Fo.serialize=function(s,c){var h=s.toArrayBuffer();return c&&c.push(h),{buffer:h}},Fo.deserialize=function(s){return new Fo(s.buffer)},Yt("Grid",Fo),Yt("Color",ir),Yt("Error",Error),Yt("ResolvedImage",ur),Yt("StylePropertyFunction",us),Yt("StyleExpression",Wl,{omit:["_evaluator"]}),Yt("ZoomDependentExpression",Wr),Yt("ZoomConstantExpression",or),Yt("CompoundExpression",so,{omit:["_evaluate"]}),rl)rl[Ql]._classRegistryKey||Yt("Expression_"+Ql,rl[Ql]);function Tu(s){return s&&"undefined"!=typeof ArrayBuffer&&(s instanceof ArrayBuffer||s.constructor&&"ArrayBuffer"===s.constructor.name)}function cl(s){return lo&&s instanceof lo}function Sa(s,c){if(null==s||"boolean"==typeof s||"number"==typeof s||"string"==typeof s||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp)return s;if(Tu(s)||cl(s))return c&&c.push(s),s;if(ArrayBuffer.isView(s)){var h=s;return c&&c.push(h.buffer),h}if(s instanceof hg)return c&&c.push(s.data.buffer),s;if(Array.isArray(s)){for(var y=[],x=0,S=s;x<S.length;x+=1)y.push(Sa(S[x],c));return y}if("object"==typeof s){var T=s.constructor,k=T._classRegistryKey;if(!k)throw new Error("can't serialize object of unregistered class");var q=T.serialize?T.serialize(s,c):{};if(!T.serialize){for(var $ in s)if(s.hasOwnProperty($)&&!(Ea[k].omit.indexOf($)>=0)){var Q=s[$];q[$]=Ea[k].shallow.indexOf($)>=0?Q:Sa(Q,c)}s instanceof Error&&(q.message=s.message)}if(q.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==k&&(q.$name=k),q}throw new Error("can't serialize object of type "+typeof s)}function Fd(s){if(null==s||"boolean"==typeof s||"number"==typeof s||"string"==typeof s||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||Tu(s)||cl(s)||ArrayBuffer.isView(s)||s instanceof hg)return s;if(Array.isArray(s))return s.map(Fd);if("object"==typeof s){var c=s.$name||"Object",h=Ea[c].klass;if(!h)throw new Error("can't deserialize unregistered class "+c);if(h.deserialize)return h.deserialize(s);for(var y=Object.create(h.prototype),x=0,S=Object.keys(s);x<S.length;x+=1){var T=S[x];if("$name"!==T){var k=s[T];y[T]=Ea[c].shallow.indexOf(T)>=0?k:Fd(k)}}return y}throw new Error("can't deserialize object of type "+typeof s)}var qi=function(){this.first=!0};qi.prototype.update=function(s,c){var h=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=c),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=h,!0))};var Qt={"Latin-1 Supplement":function(s){return s>=128&&s<=255},Arabic:function(s){return s>=1536&&s<=1791},"Arabic Supplement":function(s){return s>=1872&&s<=1919},"Arabic Extended-A":function(s){return s>=2208&&s<=2303},"Hangul Jamo":function(s){return s>=4352&&s<=4607},"Unified Canadian Aboriginal Syllabics":function(s){return s>=5120&&s<=5759},Khmer:function(s){return s>=6016&&s<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(s){return s>=6320&&s<=6399},"General Punctuation":function(s){return s>=8192&&s<=8303},"Letterlike Symbols":function(s){return s>=8448&&s<=8527},"Number Forms":function(s){return s>=8528&&s<=8591},"Miscellaneous Technical":function(s){return s>=8960&&s<=9215},"Control Pictures":function(s){return s>=9216&&s<=9279},"Optical Character Recognition":function(s){return s>=9280&&s<=9311},"Enclosed Alphanumerics":function(s){return s>=9312&&s<=9471},"Geometric Shapes":function(s){return s>=9632&&s<=9727},"Miscellaneous Symbols":function(s){return s>=9728&&s<=9983},"Miscellaneous Symbols and Arrows":function(s){return s>=11008&&s<=11263},"CJK Radicals Supplement":function(s){return s>=11904&&s<=12031},"Kangxi Radicals":function(s){return s>=12032&&s<=12255},"Ideographic Description Characters":function(s){return s>=12272&&s<=12287},"CJK Symbols and Punctuation":function(s){return s>=12288&&s<=12351},Hiragana:function(s){return s>=12352&&s<=12447},Katakana:function(s){return s>=12448&&s<=12543},Bopomofo:function(s){return s>=12544&&s<=12591},"Hangul Compatibility Jamo":function(s){return s>=12592&&s<=12687},Kanbun:function(s){return s>=12688&&s<=12703},"Bopomofo Extended":function(s){return s>=12704&&s<=12735},"CJK Strokes":function(s){return s>=12736&&s<=12783},"Katakana Phonetic Extensions":function(s){return s>=12784&&s<=12799},"Enclosed CJK Letters and Months":function(s){return s>=12800&&s<=13055},"CJK Compatibility":function(s){return s>=13056&&s<=13311},"CJK Unified Ideographs Extension A":function(s){return s>=13312&&s<=19903},"Yijing Hexagram Symbols":function(s){return s>=19904&&s<=19967},"CJK Unified Ideographs":function(s){return s>=19968&&s<=40959},"Yi Syllables":function(s){return s>=40960&&s<=42127},"Yi Radicals":function(s){return s>=42128&&s<=42191},"Hangul Jamo Extended-A":function(s){return s>=43360&&s<=43391},"Hangul Syllables":function(s){return s>=44032&&s<=55215},"Hangul Jamo Extended-B":function(s){return s>=55216&&s<=55295},"Private Use Area":function(s){return s>=57344&&s<=63743},"CJK Compatibility Ideographs":function(s){return s>=63744&&s<=64255},"Arabic Presentation Forms-A":function(s){return s>=64336&&s<=65023},"Vertical Forms":function(s){return s>=65040&&s<=65055},"CJK Compatibility Forms":function(s){return s>=65072&&s<=65103},"Small Form Variants":function(s){return s>=65104&&s<=65135},"Arabic Presentation Forms-B":function(s){return s>=65136&&s<=65279},"Halfwidth and Fullwidth Forms":function(s){return s>=65280&&s<=65519}};function Ms(s){for(var c=0,h=s;c<h.length;c+=1)if(Mc(h[c].charCodeAt(0)))return!0;return!1}function Mc(s){return!(746!==s&&747!==s&&(s<4352||!(Qt["Bopomofo Extended"](s)||Qt.Bopomofo(s)||Qt["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||Qt["CJK Compatibility Ideographs"](s)||Qt["CJK Compatibility"](s)||Qt["CJK Radicals Supplement"](s)||Qt["CJK Strokes"](s)||!(!Qt["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||12336===s)||Qt["CJK Unified Ideographs Extension A"](s)||Qt["CJK Unified Ideographs"](s)||Qt["Enclosed CJK Letters and Months"](s)||Qt["Hangul Compatibility Jamo"](s)||Qt["Hangul Jamo Extended-A"](s)||Qt["Hangul Jamo Extended-B"](s)||Qt["Hangul Jamo"](s)||Qt["Hangul Syllables"](s)||Qt.Hiragana(s)||Qt["Ideographic Description Characters"](s)||Qt.Kanbun(s)||Qt["Kangxi Radicals"](s)||Qt["Katakana Phonetic Extensions"](s)||Qt.Katakana(s)&&12540!==s||!(!Qt["Halfwidth and Fullwidth Forms"](s)||65288===s||65289===s||65293===s||s>=65306&&s<=65310||65339===s||65341===s||65343===s||s>=65371&&s<=65503||65507===s||s>=65512&&s<=65519)||!(!Qt["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||Qt["Unified Canadian Aboriginal Syllabics"](s)||Qt["Unified Canadian Aboriginal Syllabics Extended"](s)||Qt["Vertical Forms"](s)||Qt["Yijing Hexagram Symbols"](s)||Qt["Yi Syllables"](s)||Qt["Yi Radicals"](s))))}function Ga(s){return!(Mc(s)||(c=s,Qt["Latin-1 Supplement"](c)&&(167===c||169===c||174===c||177===c||188===c||189===c||190===c||215===c||247===c)||Qt["General Punctuation"](c)&&(8214===c||8224===c||8225===c||8240===c||8241===c||8251===c||8252===c||8258===c||8263===c||8264===c||8265===c||8273===c)||Qt["Letterlike Symbols"](c)||Qt["Number Forms"](c)||Qt["Miscellaneous Technical"](c)&&(c>=8960&&c<=8967||c>=8972&&c<=8991||c>=8996&&c<=9e3||9003===c||c>=9085&&c<=9114||c>=9150&&c<=9165||9167===c||c>=9169&&c<=9179||c>=9186&&c<=9215)||Qt["Control Pictures"](c)&&9251!==c||Qt["Optical Character Recognition"](c)||Qt["Enclosed Alphanumerics"](c)||Qt["Geometric Shapes"](c)||Qt["Miscellaneous Symbols"](c)&&!(c>=9754&&c<=9759)||Qt["Miscellaneous Symbols and Arrows"](c)&&(c>=11026&&c<=11055||c>=11088&&c<=11097||c>=11192&&c<=11243)||Qt["CJK Symbols and Punctuation"](c)||Qt.Katakana(c)||Qt["Private Use Area"](c)||Qt["CJK Compatibility Forms"](c)||Qt["Small Form Variants"](c)||Qt["Halfwidth and Fullwidth Forms"](c)||8734===c||8756===c||8757===c||c>=9984&&c<=10087||c>=10102&&c<=10131||65532===c||65533===c));var c}function ta(s){return s>=1424&&s<=2303||Qt["Arabic Presentation Forms-A"](s)||Qt["Arabic Presentation Forms-B"](s)}function Nc(s,c){return!(!c&&ta(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||Qt.Khmer(s))}function ah(s){for(var c=0,h=s;c<h.length;c+=1)if(ta(h[c].charCodeAt(0)))return!0;return!1}var sh=null,yo="unavailable",Pu=null,na=function(s){s&&"string"==typeof s&&s.indexOf("NetworkError")>-1&&(yo="error"),sh&&sh(s)};function Lc(){uh.fire(new Je("pluginStateChange",{pluginStatus:yo,pluginURL:Pu}))}var uh=new Ke,Ca=function(){return yo},Tp=function(){if("deferred"!==yo||!Pu)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");yo="loading",Lc(),Pu&&ui({url:Pu},function(s){s?na(s):(yo="loaded",Lc())})},ci={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===yo||null!=ci.applyArabicShaping},isLoading:function(){return"loading"===yo},setState:function(s){yo=s.pluginStatus,Pu=s.pluginURL},isParsed:function(){return null!=ci.applyArabicShaping&&null!=ci.processBidirectionalText&&null!=ci.processStyledBidirectionalText},getPluginURL:function(){return Pu}},Er=function(s,c){this.zoom=s,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.zoomHistory=c.zoomHistory,this.transition=c.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new qi,this.transition={})};Er.prototype.isSupportedScript=function(s){return function(c,h){for(var y=0,x=c;y<x.length;y+=1)if(!Nc(x[y].charCodeAt(0),h))return!1;return!0}(s,ci.isLoaded())},Er.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Er.prototype.getCrossfadeParameters=function(){var s=this.zoom,c=s-Math.floor(s),h=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*c}};var Ha=function(s,c){this.property=s,this.value=c,this.expression=function(h,y){if(Yo(h))return new us(h,y);if(Qo(h)){var x=ea(h,y);if("error"===x.result)throw new Error(x.value.map(function(T){return T.key+": "+T.message}).join(", "));return x.value}var S=h;return"string"==typeof h&&"color"===y.type&&(S=ir.parse(h)),{kind:"constant",evaluate:function(){return S}}}(void 0===c?s.specification.default:c,s.specification)};Ha.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Ha.prototype.possiblyEvaluate=function(s,c,h){return this.property.possiblyEvaluate(this,s,c,h)};var Uo=function(s){this.property=s,this.value=new Ha(s,void 0)};Uo.prototype.transitioned=function(s,c){return new ri(this.property,this.value,c,ge({},s.transition,this.transition),s.now)},Uo.prototype.untransitioned=function(){return new ri(this.property,this.value,null,{},0)};var $a=function(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)};$a.prototype.getValue=function(s){return Ge(this._values[s].value.value)},$a.prototype.setValue=function(s,c){this._values.hasOwnProperty(s)||(this._values[s]=new Uo(this._values[s].property)),this._values[s].value=new Ha(this._values[s].property,null===c?void 0:Ge(c))},$a.prototype.getTransition=function(s){return Ge(this._values[s].transition)},$a.prototype.setTransition=function(s,c){this._values.hasOwnProperty(s)||(this._values[s]=new Uo(this._values[s].property)),this._values[s].transition=Ge(c)||void 0},$a.prototype.serialize=function(){for(var s={},c=0,h=Object.keys(this._values);c<h.length;c+=1){var y=h[c],x=this.getValue(y);void 0!==x&&(s[y]=x);var S=this.getTransition(y);void 0!==S&&(s[y+"-transition"]=S)}return s},$a.prototype.transitioned=function(s,c){for(var h=new ls(this._properties),y=0,x=Object.keys(this._values);y<x.length;y+=1){var S=x[y];h._values[S]=this._values[S].transitioned(s,c._values[S])}return h},$a.prototype.untransitioned=function(){for(var s=new ls(this._properties),c=0,h=Object.keys(this._values);c<h.length;c+=1){var y=h[c];s._values[y]=this._values[y].untransitioned()}return s};var ri=function(s,c,h,y,x){this.property=s,this.value=c,this.begin=x+y.delay||0,this.end=this.begin+y.duration||0,s.specification.transition&&(y.delay||y.duration)&&(this.prior=h)};ri.prototype.possiblyEvaluate=function(s,c,h){var y=s.now||0,x=this.value.possiblyEvaluate(s,c,h),S=this.prior;if(S){if(y>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(y<this.begin)return S.possiblyEvaluate(s,c,h);var T=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(S.possiblyEvaluate(s,c,h),x,function(k){if(k<=0)return 0;if(k>=1)return 1;var q=k*k,$=q*k;return 4*(k<.5?$:3*(k-q)+$-.75)}(T))}return x};var ls=function(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)};ls.prototype.possiblyEvaluate=function(s,c,h){for(var y=new dl(this._properties),x=0,S=Object.keys(this._values);x<S.length;x+=1){var T=S[x];y._values[T]=this._values[T].possiblyEvaluate(s,c,h)}return y},ls.prototype.hasTransition=function(){for(var s=0,c=Object.keys(this._values);s<c.length;s+=1)if(this._values[c[s]].prior)return!0;return!1};var Iu=function(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)};Iu.prototype.getValue=function(s){return Ge(this._values[s].value)},Iu.prototype.setValue=function(s,c){this._values[s]=new Ha(this._values[s].property,null===c?void 0:Ge(c))},Iu.prototype.serialize=function(){for(var s={},c=0,h=Object.keys(this._values);c<h.length;c+=1){var y=h[c],x=this.getValue(y);void 0!==x&&(s[y]=x)}return s},Iu.prototype.possiblyEvaluate=function(s,c,h){for(var y=new dl(this._properties),x=0,S=Object.keys(this._values);x<S.length;x+=1){var T=S[x];y._values[T]=this._values[T].possiblyEvaluate(s,c,h)}return y};var Nr=function(s,c,h){this.property=s,this.value=c,this.parameters=h};Nr.prototype.isConstant=function(){return"constant"===this.value.kind},Nr.prototype.constantOr=function(s){return"constant"===this.value.kind?this.value.value:s},Nr.prototype.evaluate=function(s,c,h,y){return this.property.evaluate(this.value,this.parameters,s,c,h,y)};var dl=function(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)};dl.prototype.get=function(s){return this._values[s]};var Zt=function(s){this.specification=s};Zt.prototype.possiblyEvaluate=function(s,c){return s.expression.evaluate(c)},Zt.prototype.interpolate=function(s,c,h){var y=Ad[this.specification.type];return y?y(s,c,h):s};var vn=function(s,c){this.specification=s,this.overrides=c};vn.prototype.possiblyEvaluate=function(s,c,h,y){return new Nr(this,"constant"===s.expression.kind||"camera"===s.expression.kind?{kind:"constant",value:s.expression.evaluate(c,null,{},h,y)}:s.expression,c)},vn.prototype.interpolate=function(s,c,h){if("constant"!==s.value.kind||"constant"!==c.value.kind)return s;if(void 0===s.value.value||void 0===c.value.value)return new Nr(this,{kind:"constant",value:void 0},s.parameters);var y=Ad[this.specification.type];return y?new Nr(this,{kind:"constant",value:y(s.value.value,c.value.value,h)},s.parameters):s},vn.prototype.evaluate=function(s,c,h,y,x,S){return"constant"===s.kind?s.value:s.evaluate(c,h,y,x,S)};var pi=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.possiblyEvaluate=function(h,y,x,S){if(void 0===h.value)return new Nr(this,{kind:"constant",value:void 0},y);if("constant"===h.expression.kind){var T=h.expression.evaluate(y,null,{},x,S),k="resolvedImage"===h.property.specification.type&&"string"!=typeof T?T.name:T,q=this._calculate(k,k,k,y);return new Nr(this,{kind:"constant",value:q},y)}if("camera"===h.expression.kind){var $=this._calculate(h.expression.evaluate({zoom:y.zoom-1}),h.expression.evaluate({zoom:y.zoom}),h.expression.evaluate({zoom:y.zoom+1}),y);return new Nr(this,{kind:"constant",value:$},y)}return new Nr(this,h.expression,y)},c.prototype.evaluate=function(h,y,x,S,T,k){if("source"===h.kind){var q=h.evaluate(y,x,S,T,k);return this._calculate(q,q,q,y)}return"composite"===h.kind?this._calculate(h.evaluate({zoom:Math.floor(y.zoom)-1},x,S),h.evaluate({zoom:Math.floor(y.zoom)},x,S),h.evaluate({zoom:Math.floor(y.zoom)+1},x,S),y):h.value},c.prototype._calculate=function(h,y,x,S){return S.zoom>S.zoomHistory.lastIntegerZoom?{from:h,to:y}:{from:x,to:y}},c.prototype.interpolate=function(h){return h},c}(vn),Ka=function(s){this.specification=s};Ka.prototype.possiblyEvaluate=function(s,c,h,y){if(void 0!==s.value){if("constant"===s.expression.kind){var x=s.expression.evaluate(c,null,{},h,y);return this._calculate(x,x,x,c)}return this._calculate(s.expression.evaluate(new Er(Math.floor(c.zoom-1),c)),s.expression.evaluate(new Er(Math.floor(c.zoom),c)),s.expression.evaluate(new Er(Math.floor(c.zoom+1),c)),c)}},Ka.prototype._calculate=function(s,c,h,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:s,to:c}:{from:h,to:c}},Ka.prototype.interpolate=function(s){return s};var cs=function(s){this.specification=s};cs.prototype.possiblyEvaluate=function(s,c,h,y){return!!s.expression.evaluate(c,null,{},h,y)},cs.prototype.interpolate=function(){return!1};var ro=function(s){for(var c in this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],s){var h=s[c];h.specification.overridable&&this.overridableProperties.push(c);var y=this.defaultPropertyValues[c]=new Ha(h,void 0),x=this.defaultTransitionablePropertyValues[c]=new Uo(h);this.defaultTransitioningPropertyValues[c]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=y.possiblyEvaluate({})}};Yt("DataDrivenProperty",vn),Yt("DataConstantProperty",Zt),Yt("CrossFadedDataDrivenProperty",pi),Yt("CrossFadedProperty",Ka),Yt("ColorRampProperty",cs);var bi=function(s){function c(h,y){if(s.call(this),this.id=h.id,this.type=h.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==h.type&&(this.metadata=(h=h).metadata,this.minzoom=h.minzoom,this.maxzoom=h.maxzoom,"background"!==h.type&&(this.source=h.source,this.sourceLayer=h["source-layer"],this.filter=h.filter),y.layout&&(this._unevaluatedLayout=new Iu(y.layout)),y.paint)){for(var x in this._transitionablePaint=new $a(y.paint),h.paint)this.setPaintProperty(x,h.paint[x],{validate:!1});for(var S in h.layout)this.setLayoutProperty(S,h.layout[S],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new dl(y.paint)}}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},c.prototype.getLayoutProperty=function(h){return"visibility"===h?this.visibility:this._unevaluatedLayout.getValue(h)},c.prototype.setLayoutProperty=function(h,y,x){void 0===x&&(x={}),null!=y&&this._validate(oh,"layers."+this.id+".layout."+h,h,y,x)||("visibility"!==h?this._unevaluatedLayout.setValue(h,y):this.visibility=y)},c.prototype.getPaintProperty=function(h){return Fe(h,"-transition")?this._transitionablePaint.getTransition(h.slice(0,-11)):this._transitionablePaint.getValue(h)},c.prototype.setPaintProperty=function(h,y,x){if(void 0===x&&(x={}),null!=y&&this._validate(zd,"layers."+this.id+".paint."+h,h,y,x))return!1;if(Fe(h,"-transition"))return this._transitionablePaint.setTransition(h.slice(0,-11),y||void 0),!1;var S=this._transitionablePaint._values[h],T="cross-faded-data-driven"===S.property.specification["property-type"],k=S.value.isDataDriven(),q=S.value;this._transitionablePaint.setValue(h,y),this._handleSpecialPaintPropertyUpdate(h);var $=this._transitionablePaint._values[h].value;return $.isDataDriven()||k||T||this._handleOverridablePaintPropertyUpdate(h,q,$)},c.prototype._handleSpecialPaintPropertyUpdate=function(h){},c.prototype._handleOverridablePaintPropertyUpdate=function(h,y,x){return!1},c.prototype.isHidden=function(h){return!!(this.minzoom&&h<this.minzoom)||!!(this.maxzoom&&h>=this.maxzoom)||"none"===this.visibility},c.prototype.updateTransitions=function(h){this._transitioningPaint=this._transitionablePaint.transitioned(h,this._transitioningPaint)},c.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},c.prototype.recalculate=function(h,y){h.getCrossfadeParameters&&(this._crossfadeParameters=h.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(h,void 0,y)),this.paint=this._transitioningPaint.possiblyEvaluate(h,void 0,y)},c.prototype.serialize=function(){var h={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(h.layout=h.layout||{},h.layout.visibility=this.visibility),Ye(h,function(y,x){return!(void 0===y||"layout"===x&&!Object.keys(y).length||"paint"===x&&!Object.keys(y).length)})},c.prototype._validate=function(h,y,x,S,T){return void 0===T&&(T={}),(!T||!1!==T.validate)&&jd(this,h.call(Bd,{key:y,layerType:this.type,objectKey:x,value:S,styleSpec:Pe,style:{glyphs:!0,sprite:!0}}))},c.prototype.is3D=function(){return!1},c.prototype.isTileClipped=function(){return!1},c.prototype.hasOffscreenPass=function(){return!1},c.prototype.resize=function(){},c.prototype.isStateDependent=function(){for(var h in this.paint._values){var y=this.paint.get(h);if(y instanceof Nr&&to(y.property.specification)&&("source"===y.value.kind||"composite"===y.value.kind)&&y.value.isStateDependent)return!0}return!1},c}(Ke),Pp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ds=function(s,c){this._structArray=s,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Zr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function di(s,c){void 0===c&&(c=1);var h=0,y=0;return{members:s.map(function(x){var S=Pp[x.type].BYTES_PER_ELEMENT,T=h=Ud(h,Math.max(c,S)),k=x.components||1;return y=Math.max(y,S),h+=S*k,{name:x.name,type:x.type,components:k,offset:T}}),size:Ud(h,Math.max(y,c)),alignment:c}}function Ud(s,c){return Math.ceil(s/c)*c}Zr.serialize=function(s,c){return s._trim(),c&&(s.isTransferred=!0,c.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}},Zr.deserialize=function(s){var c=Object.create(this.prototype);return c.arrayBuffer=s.arrayBuffer,c.length=s.length,c.capacity=s.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c},Zr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Zr.prototype.clear=function(){this.length=0},Zr.prototype.resize=function(s){this.reserve(s),this.length=s},Zr.prototype.reserve=function(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}},Zr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var fl=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y){var x=this.length;return this.resize(x+1),this.emplace(x,h,y)},c.prototype.emplace=function(h,y,x){var S=2*h;return this.int16[S+0]=y,this.int16[S+1]=x,h},c}(Zr);fl.prototype.bytesPerElement=4,Yt("StructArrayLayout2i4",fl);var In=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,S){var T=this.length;return this.resize(T+1),this.emplace(T,h,y,x,S)},c.prototype.emplace=function(h,y,x,S,T){var k=4*h;return this.int16[k+0]=y,this.int16[k+1]=x,this.int16[k+2]=S,this.int16[k+3]=T,h},c}(Zr);In.prototype.bytesPerElement=8,Yt("StructArrayLayout4i8",In);var Ta=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,S,T,k){var q=this.length;return this.resize(q+1),this.emplace(q,h,y,x,S,T,k)},c.prototype.emplace=function(h,y,x,S,T,k,q){var $=6*h;return this.int16[$+0]=y,this.int16[$+1]=x,this.int16[$+2]=S,this.int16[$+3]=T,this.int16[$+4]=k,this.int16[$+5]=q,h},c}(Zr);Ta.prototype.bytesPerElement=12,Yt("StructArrayLayout2i4i12",Ta);var qd=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,S,T,k){var q=this.length;return this.resize(q+1),this.emplace(q,h,y,x,S,T,k)},c.prototype.emplace=function(h,y,x,S,T,k,q){var $=4*h,Q=8*h;return this.int16[$+0]=y,this.int16[$+1]=x,this.uint8[Q+4]=S,this.uint8[Q+5]=T,this.uint8[Q+6]=k,this.uint8[Q+7]=q,h},c}(Zr);qd.prototype.bytesPerElement=8,Yt("StructArrayLayout2i4ub8",qd);var hl=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y){var x=this.length;return this.resize(x+1),this.emplace(x,h,y)},c.prototype.emplace=function(h,y,x){var S=2*h;return this.float32[S+0]=y,this.float32[S+1]=x,h},c}(Zr);hl.prototype.bytesPerElement=8,Yt("StructArrayLayout2f8",hl);var nu=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,S,T,k,q,$,Q,re){var le=this.length;return this.resize(le+1),this.emplace(le,h,y,x,S,T,k,q,$,Q,re)},c.prototype.emplace=function(h,y,x,S,T,k,q,$,Q,re,le){var _e=10*h;return this.uint16[_e+0]=y,this.uint16[_e+1]=x,this.uint16[_e+2]=S,this.uint16[_e+3]=T,this.uint16[_e+4]=k,this.uint16[_e+5]=q,this.uint16[_e+6]=$,this.uint16[_e+7]=Q,this.uint16[_e+8]=re,this.uint16[_e+9]=le,h},c}(Zr);nu.prototype.bytesPerElement=20,Yt("StructArrayLayout10ui20",nu);var pl=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,S,T,k,q,$,Q,re,le,_e){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,h,y,x,S,T,k,q,$,Q,re,le,_e)},c.prototype.emplace=function(h,y,x,S,T,k,q,$,Q,re,le,_e,Ae){var Oe=12*h;return this.int16[Oe+0]=y,this.int16[Oe+1]=x,this.int16[Oe+2]=S,this.int16[Oe+3]=T,this.uint16[Oe+4]=k,this.uint16[Oe+5]=q,this.uint16[Oe+6]=$,this.uint16[Oe+7]=Q,this.int16[Oe+8]=re,this.int16[Oe+9]=le,this.int16[Oe+10]=_e,this.int16[Oe+11]=Ae,h},c}(Zr);pl.prototype.bytesPerElement=24,Yt("StructArrayLayout4i4ui4i24",pl);var Bc=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x){var S=this.length;return this.resize(S+1),this.emplace(S,h,y,x)},c.prototype.emplace=function(h,y,x,S){var T=3*h;return this.float32[T+0]=y,this.float32[T+1]=x,this.float32[T+2]=S,h},c}(Zr);Bc.prototype.bytesPerElement=12,Yt("StructArrayLayout3f12",Bc);var lh=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h){var y=this.length;return this.resize(y+1),this.emplace(y,h)},c.prototype.emplace=function(h,y){return this.uint32[1*h+0]=y,h},c}(Zr);lh.prototype.bytesPerElement=4,Yt("StructArrayLayout1ul4",lh);var Nt=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,S,T,k,q,$,Q){var re=this.length;return this.resize(re+1),this.emplace(re,h,y,x,S,T,k,q,$,Q)},c.prototype.emplace=function(h,y,x,S,T,k,q,$,Q,re){var le=10*h,_e=5*h;return this.int16[le+0]=y,this.int16[le+1]=x,this.int16[le+2]=S,this.int16[le+3]=T,this.int16[le+4]=k,this.int16[le+5]=q,this.uint32[_e+3]=$,this.uint16[le+8]=Q,this.uint16[le+9]=re,h},c}(Zr);Nt.prototype.bytesPerElement=20,Yt("StructArrayLayout6i1ul2ui20",Nt);var lr=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,S,T,k){var q=this.length;return this.resize(q+1),this.emplace(q,h,y,x,S,T,k)},c.prototype.emplace=function(h,y,x,S,T,k,q){var $=6*h;return this.int16[$+0]=y,this.int16[$+1]=x,this.int16[$+2]=S,this.int16[$+3]=T,this.int16[$+4]=k,this.int16[$+5]=q,h},c}(Zr);lr.prototype.bytesPerElement=12,Yt("StructArrayLayout2i2i2i12",lr);var ch=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,S,T){var k=this.length;return this.resize(k+1),this.emplace(k,h,y,x,S,T)},c.prototype.emplace=function(h,y,x,S,T,k){var q=4*h,$=8*h;return this.float32[q+0]=y,this.float32[q+1]=x,this.float32[q+2]=S,this.int16[$+6]=T,this.int16[$+7]=k,h},c}(Zr);ch.prototype.bytesPerElement=16,Yt("StructArrayLayout2f1f2i16",ch);var Vi=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,S){var T=this.length;return this.resize(T+1),this.emplace(T,h,y,x,S)},c.prototype.emplace=function(h,y,x,S,T){var k=12*h,q=3*h;return this.uint8[k+0]=y,this.uint8[k+1]=x,this.float32[q+1]=S,this.float32[q+2]=T,h},c}(Zr);Vi.prototype.bytesPerElement=12,Yt("StructArrayLayout2ub2f12",Vi);var va=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x){var S=this.length;return this.resize(S+1),this.emplace(S,h,y,x)},c.prototype.emplace=function(h,y,x,S){var T=3*h;return this.uint16[T+0]=y,this.uint16[T+1]=x,this.uint16[T+2]=S,h},c}(Zr);va.prototype.bytesPerElement=6,Yt("StructArrayLayout3ui6",va);var Au=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,S,T,k,q,$,Q,re,le,_e,Ae,Oe,Ze,Ue,nt){var ot=this.length;return this.resize(ot+1),this.emplace(ot,h,y,x,S,T,k,q,$,Q,re,le,_e,Ae,Oe,Ze,Ue,nt)},c.prototype.emplace=function(h,y,x,S,T,k,q,$,Q,re,le,_e,Ae,Oe,Ze,Ue,nt,ot){var ct=24*h,ft=12*h,St=48*h;return this.int16[ct+0]=y,this.int16[ct+1]=x,this.uint16[ct+2]=S,this.uint16[ct+3]=T,this.uint32[ft+2]=k,this.uint32[ft+3]=q,this.uint32[ft+4]=$,this.uint16[ct+10]=Q,this.uint16[ct+11]=re,this.uint16[ct+12]=le,this.float32[ft+7]=_e,this.float32[ft+8]=Ae,this.uint8[St+36]=Oe,this.uint8[St+37]=Ze,this.uint8[St+38]=Ue,this.uint32[ft+10]=nt,this.int16[ct+22]=ot,h},c}(Zr);Au.prototype.bytesPerElement=48,Yt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Au);var qo=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,S,T,k,q,$,Q,re,le,_e,Ae,Oe,Ze,Ue,nt,ot,ct,ft,St,zt,Ft,an,Gt,un,$t,Nn){var _n=this.length;return this.resize(_n+1),this.emplace(_n,h,y,x,S,T,k,q,$,Q,re,le,_e,Ae,Oe,Ze,Ue,nt,ot,ct,ft,St,zt,Ft,an,Gt,un,$t,Nn)},c.prototype.emplace=function(h,y,x,S,T,k,q,$,Q,re,le,_e,Ae,Oe,Ze,Ue,nt,ot,ct,ft,St,zt,Ft,an,Gt,un,$t,Nn,_n){var rn=34*h,Wn=17*h;return this.int16[rn+0]=y,this.int16[rn+1]=x,this.int16[rn+2]=S,this.int16[rn+3]=T,this.int16[rn+4]=k,this.int16[rn+5]=q,this.int16[rn+6]=$,this.int16[rn+7]=Q,this.uint16[rn+8]=re,this.uint16[rn+9]=le,this.uint16[rn+10]=_e,this.uint16[rn+11]=Ae,this.uint16[rn+12]=Oe,this.uint16[rn+13]=Ze,this.uint16[rn+14]=Ue,this.uint16[rn+15]=nt,this.uint16[rn+16]=ot,this.uint16[rn+17]=ct,this.uint16[rn+18]=ft,this.uint16[rn+19]=St,this.uint16[rn+20]=zt,this.uint16[rn+21]=Ft,this.uint16[rn+22]=an,this.uint32[Wn+12]=Gt,this.float32[Wn+13]=un,this.float32[Wn+14]=$t,this.float32[Wn+15]=Nn,this.float32[Wn+16]=_n,h},c}(Zr);qo.prototype.bytesPerElement=68,Yt("StructArrayLayout8i15ui1ul4f68",qo);var ra=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h){var y=this.length;return this.resize(y+1),this.emplace(y,h)},c.prototype.emplace=function(h,y){return this.float32[1*h+0]=y,h},c}(Zr);ra.prototype.bytesPerElement=4,Yt("StructArrayLayout1f4",ra);var zc=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x){var S=this.length;return this.resize(S+1),this.emplace(S,h,y,x)},c.prototype.emplace=function(h,y,x,S){var T=3*h;return this.int16[T+0]=y,this.int16[T+1]=x,this.int16[T+2]=S,h},c}(Zr);zc.prototype.bytesPerElement=6,Yt("StructArrayLayout3i6",zc);var Ip=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x){var S=this.length;return this.resize(S+1),this.emplace(S,h,y,x)},c.prototype.emplace=function(h,y,x,S){var T=4*h;return this.uint32[2*h+0]=y,this.uint16[T+2]=x,this.uint16[T+3]=S,h},c}(Zr);Ip.prototype.bytesPerElement=8,Yt("StructArrayLayout1ul2ui8",Ip);var jc=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y){var x=this.length;return this.resize(x+1),this.emplace(x,h,y)},c.prototype.emplace=function(h,y,x){var S=2*h;return this.uint16[S+0]=y,this.uint16[S+1]=x,h},c}(Zr);jc.prototype.bytesPerElement=4,Yt("StructArrayLayout2ui4",jc);var ml=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h){var y=this.length;return this.resize(y+1),this.emplace(y,h)},c.prototype.emplace=function(h,y){return this.uint16[1*h+0]=y,h},c}(Zr);ml.prototype.bytesPerElement=2,Yt("StructArrayLayout1ui2",ml);var p=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,y,x,S){var T=this.length;return this.resize(T+1),this.emplace(T,h,y,x,S)},c.prototype.emplace=function(h,y,x,S,T){var k=4*h;return this.float32[k+0]=y,this.float32[k+1]=x,this.float32[k+2]=S,this.float32[k+3]=T,h},c}(Zr);p.prototype.bytesPerElement=16,Yt("StructArrayLayout4f16",p);var v=function(s){function c(){s.apply(this,arguments)}s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c;var h={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return h.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},h.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},h.x1.get=function(){return this._structArray.int16[this._pos2+2]},h.y1.get=function(){return this._structArray.int16[this._pos2+3]},h.x2.get=function(){return this._structArray.int16[this._pos2+4]},h.y2.get=function(){return this._structArray.int16[this._pos2+5]},h.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},h.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},h.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},h.anchorPoint.get=function(){return new M(this.anchorPointX,this.anchorPointY)},Object.defineProperties(c.prototype,h),c}(ds);v.prototype.size=20;var g=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.get=function(h){return new v(this,h)},c}(Nt);Yt("CollisionBoxArray",g);var w=function(s){function c(){s.apply(this,arguments)}s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c;var h={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return h.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},h.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},h.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},h.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},h.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},h.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},h.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},h.segment.get=function(){return this._structArray.uint16[this._pos2+10]},h.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},h.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},h.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},h.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},h.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},h.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},h.placedOrientation.set=function(y){this._structArray.uint8[this._pos1+37]=y},h.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},h.hidden.set=function(y){this._structArray.uint8[this._pos1+38]=y},h.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},h.crossTileID.set=function(y){this._structArray.uint32[this._pos4+10]=y},h.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(c.prototype,h),c}(ds);w.prototype.size=48;var C=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.get=function(h){return new w(this,h)},c}(Au);Yt("PlacedSymbolArray",C);var R=function(s){function c(){s.apply(this,arguments)}s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c;var h={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return h.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},h.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},h.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},h.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},h.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},h.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},h.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},h.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},h.key.get=function(){return this._structArray.uint16[this._pos2+8]},h.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},h.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},h.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},h.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},h.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},h.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},h.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},h.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},h.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},h.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},h.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},h.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},h.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},h.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},h.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},h.crossTileID.set=function(y){this._structArray.uint32[this._pos4+12]=y},h.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},h.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},h.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},h.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(c.prototype,h),c}(ds);R.prototype.size=68;var O=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.get=function(h){return new R(this,h)},c}(qo);Yt("SymbolInstanceArray",O);var F=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.getoffsetX=function(h){return this.float32[1*h+0]},c}(ra);Yt("GlyphOffsetArray",F);var Y=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.getx=function(h){return this.int16[3*h+0]},c.prototype.gety=function(h){return this.int16[3*h+1]},c.prototype.gettileUnitDistanceFromAnchor=function(h){return this.int16[3*h+2]},c}(zc);Yt("SymbolLineVertexArray",Y);var ae=function(s){function c(){s.apply(this,arguments)}s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c;var h={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return h.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},h.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},h.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(c.prototype,h),c}(ds);ae.prototype.size=8;var be=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.get=function(h){return new ae(this,h)},c}(Ip);Yt("FeatureIndexArray",be);var Ce=di([{name:"a_pos",components:2,type:"Int16"}],4).members,Ee=function(s){void 0===s&&(s=[]),this.segments=s};function Ne(s,c){return 256*(s=fe(Math.floor(s),0,255))+fe(Math.floor(c),0,255)}Ee.prototype.prepareSegment=function(s,c,h,y){var x=this.segments[this.segments.length-1];return s>Ee.MAX_VERTEX_ARRAY_LENGTH&&D("Max vertices per segment is "+Ee.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+s),(!x||x.vertexLength+s>Ee.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==y)&&(x={vertexOffset:c.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},void 0!==y&&(x.sortKey=y),this.segments.push(x)),x},Ee.prototype.get=function(){return this.segments},Ee.prototype.destroy=function(){for(var s=0,c=this.segments;s<c.length;s+=1){var h=c[s];for(var y in h.vaos)h.vaos[y].destroy()}},Ee.simpleSegment=function(s,c,h,y){return new Ee([{vertexOffset:s,primitiveOffset:c,vertexLength:h,primitiveLength:y,vaos:{},sortKey:0}])},Ee.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Yt("SegmentVector",Ee);var ke=di([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Ve=H(function(s){s.exports=function(c,h){var y,x,S,T,k,q,$,Q;for(x=c.length-(y=3&c.length),S=h,k=3432918353,q=461845907,Q=0;Q<x;)$=255&c.charCodeAt(Q)|(255&c.charCodeAt(++Q))<<8|(255&c.charCodeAt(++Q))<<16|(255&c.charCodeAt(++Q))<<24,++Q,S=27492+(65535&(T=5*(65535&(S=(S^=$=(65535&($=($=(65535&$)*k+((($>>>16)*k&65535)<<16)&4294967295)<<15|$>>>17))*q+((($>>>16)*q&65535)<<16)&4294967295)<<13|S>>>19))+((5*(S>>>16)&65535)<<16)&4294967295))+((58964+(T>>>16)&65535)<<16);switch($=0,y){case 3:$^=(255&c.charCodeAt(Q+2))<<16;case 2:$^=(255&c.charCodeAt(Q+1))<<8;case 1:S^=$=(65535&($=($=(65535&($^=255&c.charCodeAt(Q)))*k+((($>>>16)*k&65535)<<16)&4294967295)<<15|$>>>17))*q+((($>>>16)*q&65535)<<16)&4294967295}return S^=c.length,S=2246822507*(65535&(S^=S>>>16))+((2246822507*(S>>>16)&65535)<<16)&4294967295,S=3266489909*(65535&(S^=S>>>13))+((3266489909*(S>>>16)&65535)<<16)&4294967295,(S^=S>>>16)>>>0}}),De=H(function(s){s.exports=function(c,h){for(var y,x=c.length,S=h^x,T=0;x>=4;)y=1540483477*(65535&(y=255&c.charCodeAt(T)|(255&c.charCodeAt(++T))<<8|(255&c.charCodeAt(++T))<<16|(255&c.charCodeAt(++T))<<24))+((1540483477*(y>>>16)&65535)<<16),S=1540483477*(65535&S)+((1540483477*(S>>>16)&65535)<<16)^(y=1540483477*(65535&(y^=y>>>24))+((1540483477*(y>>>16)&65535)<<16)),x-=4,++T;switch(x){case 3:S^=(255&c.charCodeAt(T+2))<<16;case 2:S^=(255&c.charCodeAt(T+1))<<8;case 1:S=1540483477*(65535&(S^=255&c.charCodeAt(T)))+((1540483477*(S>>>16)&65535)<<16)}return S=1540483477*(65535&(S^=S>>>13))+((1540483477*(S>>>16)&65535)<<16),(S^=S>>>15)>>>0}}),qe=Ve,Qe=De;qe.murmur3=Ve,qe.murmur2=Qe;var rt=function(){this.ids=[],this.positions=[],this.indexed=!1};rt.prototype.add=function(s,c,h,y){this.ids.push(dt(s)),this.positions.push(c,h,y)},rt.prototype.getPositions=function(s){for(var c=dt(s),h=0,y=this.ids.length-1;h<y;){var x=h+y>>1;this.ids[x]>=c?y=x:h=x+1}for(var S=[];this.ids[h]===c;)S.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return S},rt.serialize=function(s,c){var h=new Float64Array(s.ids),y=new Uint32Array(s.positions);return function x(S,T,k,q){for(;k<q;){for(var $=S[k+q>>1],Q=k-1,re=q+1;;){do{Q++}while(S[Q]<$);do{re--}while(S[re]>$);if(Q>=re)break;mt(S,Q,re),mt(T,3*Q,3*re),mt(T,3*Q+1,3*re+1),mt(T,3*Q+2,3*re+2)}re-k<q-re?(x(S,T,k,re),k=re+1):(x(S,T,re+1,q),q=re)}}(h,y,0,h.length-1),c&&c.push(h.buffer,y.buffer),{ids:h,positions:y}},rt.deserialize=function(s){var c=new rt;return c.ids=s.ids,c.positions=s.positions,c.indexed=!0,c};var ht=Math.pow(2,53)-1;function dt(s){var c=+s;return!isNaN(c)&&c<=ht?c:qe(String(s))}function mt(s,c,h){var y=s[c];s[c]=s[h],s[h]=y}Yt("FeaturePositionMap",rt);var Tt=function(s,c){this.gl=s.gl,this.location=c},kt=function(s){function c(h,y){s.call(this,h,y),this.current=0}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.set=function(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))},c}(Tt),Ot=function(s){function c(h,y){s.call(this,h,y),this.current=0}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.set=function(h){this.current!==h&&(this.current=h,this.gl.uniform1f(this.location,h))},c}(Tt),Lt=function(s){function c(h,y){s.call(this,h,y),this.current=[0,0]}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.set=function(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))},c}(Tt),fn=function(s){function c(h,y){s.call(this,h,y),this.current=[0,0,0]}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.set=function(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))},c}(Tt),pn=function(s){function c(h,y){s.call(this,h,y),this.current=[0,0,0,0]}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.set=function(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]&&h[3]===this.current[3]||(this.current=h,this.gl.uniform4f(this.location,h[0],h[1],h[2],h[3]))},c}(Tt),hn=function(s){function c(h,y){s.call(this,h,y),this.current=ir.transparent}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.set=function(h){h.r===this.current.r&&h.g===this.current.g&&h.b===this.current.b&&h.a===this.current.a||(this.current=h,this.gl.uniform4f(this.location,h.r,h.g,h.b,h.a))},c}(Tt),gr=new Float32Array(16),en=function(s){function c(h,y){s.call(this,h,y),this.current=gr}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.set=function(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(var y=1;y<16;y++)if(h[y]!==this.current[y]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}},c}(Tt);function Rn(s){return[Ne(255*s.r,255*s.g),Ne(255*s.b,255*s.a)]}var Mn=function(s,c,h){this.value=s,this.uniformNames=c.map(function(y){return"u_"+y}),this.type=h};Mn.prototype.setUniform=function(s,c,h){s.set(h.constantOr(this.value))},Mn.prototype.getBinding=function(s,c,h){return"color"===this.type?new hn(s,c):new Ot(s,c)};var Pn=function(s,c){this.uniformNames=c.map(function(h){return"u_"+h}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Pn.prototype.setConstantPatternPositions=function(s,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=s.tlbr},Pn.prototype.setUniform=function(s,c,h,y){var x="u_pattern_to"===y?this.patternTo:"u_pattern_from"===y?this.patternFrom:"u_pixel_ratio_to"===y?this.pixelRatioTo:"u_pixel_ratio_from"===y?this.pixelRatioFrom:null;x&&s.set(x)},Pn.prototype.getBinding=function(s,c,h){return"u_pattern"===h.substr(0,9)?new pn(s,c):new Ot(s,c)};var xn=function(s,c,h,y){this.expression=s,this.type=h,this.maxValue=0,this.paintVertexAttributes=c.map(function(x){return{name:"a_"+x,type:"Float32",components:"color"===h?2:1,offset:0}}),this.paintVertexArray=new y};xn.prototype.populatePaintArray=function(s,c,h,y,x){var S=this.paintVertexArray.length,T=this.expression.evaluate(new Er(0),c,{},y,[],x);this.paintVertexArray.resize(s),this._setPaintValue(S,s,T)},xn.prototype.updatePaintArray=function(s,c,h,y){var x=this.expression.evaluate({zoom:0},h,y);this._setPaintValue(s,c,x)},xn.prototype._setPaintValue=function(s,c,h){if("color"===this.type)for(var y=Rn(h),x=s;x<c;x++)this.paintVertexArray.emplace(x,y[0],y[1]);else{for(var S=s;S<c;S++)this.paintVertexArray.emplace(S,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}},xn.prototype.upload=function(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},xn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var En=function(s,c,h,y,x,S){this.expression=s,this.uniformNames=c.map(function(T){return"u_"+T+"_t"}),this.type=h,this.useIntegerZoom=y,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=c.map(function(T){return{name:"a_"+T,type:"Float32",components:"color"===h?4:2,offset:0}}),this.paintVertexArray=new S};En.prototype.populatePaintArray=function(s,c,h,y,x){var S=this.expression.evaluate(new Er(this.zoom),c,{},y,[],x),T=this.expression.evaluate(new Er(this.zoom+1),c,{},y,[],x),k=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(k,s,S,T)},En.prototype.updatePaintArray=function(s,c,h,y){var x=this.expression.evaluate({zoom:this.zoom},h,y),S=this.expression.evaluate({zoom:this.zoom+1},h,y);this._setPaintValue(s,c,x,S)},En.prototype._setPaintValue=function(s,c,h,y){if("color"===this.type)for(var x=Rn(h),S=Rn(y),T=s;T<c;T++)this.paintVertexArray.emplace(T,x[0],x[1],S[0],S[1]);else{for(var k=s;k<c;k++)this.paintVertexArray.emplace(k,h,y);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(y))}},En.prototype.upload=function(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},En.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},En.prototype.setUniform=function(s,c){var h=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,y=fe(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);s.set(y)},En.prototype.getBinding=function(s,c,h){return new Ot(s,c)};var bn=function(s,c,h,y,x,S){this.expression=s,this.type=c,this.useIntegerZoom=h,this.zoom=y,this.layerId=S,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x};bn.prototype.populatePaintArray=function(s,c,h){var y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(y,s,c.patterns&&c.patterns[this.layerId],h)},bn.prototype.updatePaintArray=function(s,c,h,y,x){this._setPaintValues(s,c,h.patterns&&h.patterns[this.layerId],x)},bn.prototype._setPaintValues=function(s,c,h,y){if(y&&h){var x=y[h.min],S=y[h.mid],T=y[h.max];if(x&&S&&T)for(var k=s;k<c;k++)this.zoomInPaintVertexArray.emplace(k,S.tl[0],S.tl[1],S.br[0],S.br[1],x.tl[0],x.tl[1],x.br[0],x.br[1],S.pixelRatio,x.pixelRatio),this.zoomOutPaintVertexArray.emplace(k,S.tl[0],S.tl[1],S.br[0],S.br[1],T.tl[0],T.tl[1],T.br[0],T.br[1],S.pixelRatio,T.pixelRatio)}},bn.prototype.upload=function(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,ke.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,ke.members,this.expression.isStateDependent))},bn.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var mn=function(s,c,h){this.binders={},this._buffers=[];var y=[];for(var x in s.paint._values)if(h(x)){var S=s.paint.get(x);if(S instanceof Nr&&to(S.property.specification)){var T=ai(x,s.type),k=S.value,q=S.property.specification.type,$=S.property.useIntegerZoom,Q=S.property.specification["property-type"],re="cross-faded"===Q||"cross-faded-data-driven"===Q;if("constant"===k.kind)this.binders[x]=re?new Pn(k.value,T):new Mn(k.value,T,q),y.push("/u_"+x);else if("source"===k.kind||re){var le=Vo(x,q,"source");this.binders[x]=re?new bn(k,q,$,c,le,s.id):new xn(k,T,q,le),y.push("/a_"+x)}else{var _e=Vo(x,q,"composite");this.binders[x]=new En(k,T,q,$,c,_e),y.push("/z_"+x)}}}this.cacheKey=y.sort().join("")};mn.prototype.getMaxValue=function(s){var c=this.binders[s];return c instanceof xn||c instanceof En?c.maxValue:0},mn.prototype.populatePaintArrays=function(s,c,h,y,x){for(var S in this.binders){var T=this.binders[S];(T instanceof xn||T instanceof En||T instanceof bn)&&T.populatePaintArray(s,c,h,y,x)}},mn.prototype.setConstantPatternPositions=function(s,c){for(var h in this.binders){var y=this.binders[h];y instanceof Pn&&y.setConstantPatternPositions(s,c)}},mn.prototype.updatePaintArrays=function(s,c,h,y,x){var S=!1;for(var T in s)for(var k=0,q=c.getPositions(T);k<q.length;k+=1){var $=q[k],Q=h.feature($.index);for(var re in this.binders){var le=this.binders[re];if((le instanceof xn||le instanceof En||le instanceof bn)&&!0===le.expression.isStateDependent){var _e=y.paint.get(re);le.expression=_e.value,le.updatePaintArray($.start,$.end,Q,s[T],x),S=!0}}}return S},mn.prototype.defines=function(){var s=[];for(var c in this.binders){var h=this.binders[c];(h instanceof Mn||h instanceof Pn)&&s.push.apply(s,h.uniformNames.map(function(y){return"#define HAS_UNIFORM_"+y}))}return s},mn.prototype.getBinderAttributes=function(){var s=[];for(var c in this.binders){var h=this.binders[c];if(h instanceof xn||h instanceof En)for(var y=0;y<h.paintVertexAttributes.length;y++)s.push(h.paintVertexAttributes[y].name);else if(h instanceof bn)for(var x=0;x<ke.members.length;x++)s.push(ke.members[x].name)}return s},mn.prototype.getBinderUniforms=function(){var s=[];for(var c in this.binders){var h=this.binders[c];if(h instanceof Mn||h instanceof Pn||h instanceof En)for(var y=0,x=h.uniformNames;y<x.length;y+=1)s.push(x[y])}return s},mn.prototype.getPaintVertexBuffers=function(){return this._buffers},mn.prototype.getUniforms=function(s,c){var h=[];for(var y in this.binders){var x=this.binders[y];if(x instanceof Mn||x instanceof Pn||x instanceof En)for(var S=0,T=x.uniformNames;S<T.length;S+=1){var k=T[S];if(c[k]){var q=x.getBinding(s,c[k],k);h.push({name:k,property:y,binding:q})}}}return h},mn.prototype.setUniforms=function(s,c,h,y){for(var x=0,S=c;x<S.length;x+=1){var T=S[x],k=T.name,q=T.property;this.binders[q].setUniform(T.binding,y,h.get(q),k)}},mn.prototype.updatePaintBuffers=function(s){for(var c in this._buffers=[],this.binders){var h=this.binders[c];if(s&&h instanceof bn){var y=2===s.fromScale?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(h instanceof xn||h instanceof En)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}},mn.prototype.upload=function(s){for(var c in this.binders){var h=this.binders[c];(h instanceof xn||h instanceof En||h instanceof bn)&&h.upload(s)}this.updatePaintBuffers()},mn.prototype.destroy=function(){for(var s in this.binders){var c=this.binders[s];(c instanceof xn||c instanceof En||c instanceof bn)&&c.destroy()}};var vr=function(s,c,h){void 0===h&&(h=function(){return!0}),this.programConfigurations={};for(var y=0,x=s;y<x.length;y+=1){var S=x[y];this.programConfigurations[S.id]=new mn(S,c,h)}this.needsUpload=!1,this._featureMap=new rt,this._bufferOffset=0};function ai(s,c){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(c+"-","").replace(/-/g,"_")]}function Vo(s,c,h){var x={"line-pattern":{source:nu,composite:nu},"fill-pattern":{source:nu,composite:nu},"fill-extrusion-pattern":{source:nu,composite:nu}}[s];return x&&x[h]||{color:{source:hl,composite:p},number:{source:ra,composite:hl}}[c][h]}vr.prototype.populatePaintArrays=function(s,c,h,y,x,S){for(var T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(s,c,y,x,S);void 0!==c.id&&this._featureMap.add(c.id,h,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0},vr.prototype.updatePaintArrays=function(s,c,h,y){for(var x=0,S=h;x<S.length;x+=1){var T=S[x];this.needsUpload=this.programConfigurations[T.id].updatePaintArrays(s,this._featureMap,c,T,y)||this.needsUpload}},vr.prototype.get=function(s){return this.programConfigurations[s]},vr.prototype.upload=function(s){if(this.needsUpload){for(var c in this.programConfigurations)this.programConfigurations[c].upload(s);this.needsUpload=!1}},vr.prototype.destroy=function(){for(var s in this.programConfigurations)this.programConfigurations[s].destroy()},Yt("ConstantBinder",Mn),Yt("CrossFadedConstantBinder",Pn),Yt("SourceExpressionBinder",xn),Yt("CrossFadedCompositeBinder",bn),Yt("CompositeExpressionBinder",En),Yt("ProgramConfiguration",mn,{omit:["_buffers"]}),Yt("ProgramConfigurationSet",vr);var Ji=Math.pow(2,14)-1,wi=-Ji-1;function mi(s){for(var c=8192/s.extent,h=s.loadGeometry(),y=0;y<h.length;y++)for(var x=h[y],S=0;S<x.length;S++){var T=x[S],k=Math.round(T.x*c),q=Math.round(T.y*c);T.x=fe(k,wi,Ji),T.y=fe(q,wi,Ji),(k<T.x||k>T.x+1||q<T.y||q>T.y+1)&&D("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return h}function bo(s,c){return{type:s.type,id:s.id,properties:s.properties,geometry:c?mi(s):[]}}function Ns(s,c,h,y,x){s.emplaceBack(2*c+(y+1)/2,2*h+(x+1)/2)}var ia=function(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(function(c){return c.id}),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new fl,this.indexArray=new va,this.segments=new Ee,this.programConfigurations=new vr(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(function(c){return c.isStateDependent()}).map(function(c){return c.id})};function oa(s,c){for(var h=0;h<s.length;h++)if(aa(c,s[h]))return!0;for(var y=0;y<c.length;y++)if(aa(s,c[y]))return!0;return!!fs(s,c)}function Pa(s,c,h){return!!aa(s,c)||!!Ru(c,s,h)}function _a(s,c){if(1===s.length)return ec(c,s[0]);for(var h=0;h<c.length;h++)for(var y=c[h],x=0;x<y.length;x++)if(aa(s,y[x]))return!0;for(var S=0;S<s.length;S++)if(ec(c,s[S]))return!0;for(var T=0;T<c.length;T++)if(fs(s,c[T]))return!0;return!1}function Fc(s,c,h){if(s.length>1){if(fs(s,c))return!0;for(var y=0;y<c.length;y++)if(Ru(c[y],s,h))return!0}for(var x=0;x<s.length;x++)if(Ru(s[x],c,h))return!0;return!1}function fs(s,c){if(0===s.length||0===c.length)return!1;for(var h=0;h<s.length-1;h++)for(var y=s[h],x=s[h+1],S=0;S<c.length-1;S++)if(gl(y,x,c[S],c[S+1]))return!0;return!1}function gl(s,c,h,y){return N(s,h,y)!==N(c,h,y)&&N(s,c,h)!==N(s,c,y)}function Ru(s,c,h){var y=h*h;if(1===c.length)return s.distSqr(c[0])<y;for(var x=1;x<c.length;x++)if(Ls(s,c[x-1],c[x])<y)return!0;return!1}function Ls(s,c,h){var y=c.distSqr(h);if(0===y)return s.distSqr(c);var x=((s.x-c.x)*(h.x-c.x)+(s.y-c.y)*(h.y-c.y))/y;return s.distSqr(x<0?c:x>1?h:h.sub(c)._mult(x)._add(c))}function ec(s,c){for(var h,y,x,S=!1,T=0;T<s.length;T++)for(var k=0,q=(h=s[T]).length-1;k<h.length;q=k++)(y=h[k]).y>c.y!=(x=h[q]).y>c.y&&c.x<(x.x-y.x)*(c.y-y.y)/(x.y-y.y)+y.x&&(S=!S);return S}function aa(s,c){for(var h=!1,y=0,x=s.length-1;y<s.length;x=y++){var S=s[y],T=s[x];S.y>c.y!=T.y>c.y&&c.x<(T.x-S.x)*(c.y-S.y)/(T.y-S.y)+S.x&&(h=!h)}return h}function Du(s,c,h){var y=h[0],x=h[2];if(s.x<y.x&&c.x<y.x||s.x>x.x&&c.x>x.x||s.y<y.y&&c.y<y.y||s.y>x.y&&c.y>x.y)return!1;var S=N(s,c,h[0]);return S!==N(s,c,h[1])||S!==N(s,c,h[2])||S!==N(s,c,h[3])}function xi(s,c,h){var y=c.paint.get(s).value;return"constant"===y.kind?y.value:h.programConfigurations.get(c.id).getMaxValue(s)}function Ou(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function Xa(s,c,h,y,x){if(!c[0]&&!c[1])return s;var S=M.convert(c)._mult(x);"viewport"===h&&S._rotate(-y);for(var T=[],k=0;k<s.length;k++)T.push(s[k].sub(S));return T}ia.prototype.populate=function(s,c,h){var y=this.layers[0],x=[],S=null,T=!1;"circle"===y.type&&(T=!(S=y.layout.get("circle-sort-key")).isConstant());for(var k=0,q=s;k<q.length;k+=1){var $=q[k],Q=$.feature,re=$.id,le=$.index,_e=$.sourceLayerIndex,Ae=this.layers[0]._featureFilter.needGeometry,Oe=bo(Q,Ae);if(this.layers[0]._featureFilter.filter(new Er(this.zoom),Oe,h)){var Ze=T?S.evaluate(Oe,{},h):void 0,Ue={id:re,properties:Q.properties,type:Q.type,sourceLayerIndex:_e,index:le,geometry:Ae?Oe.geometry:mi(Q),patterns:{},sortKey:Ze};x.push(Ue)}}T&&x.sort(function(an,Gt){return an.sortKey-Gt.sortKey});for(var nt=0,ot=x;nt<ot.length;nt+=1){var ct=ot[nt],ft=ct.geometry,St=ct.index,zt=ct.sourceLayerIndex,Ft=s[St].feature;this.addFeature(ct,ft,St,h),c.featureIndex.insert(Ft,ft,St,zt,this.index)}},ia.prototype.update=function(s,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,c,this.stateDependentLayers,h)},ia.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ia.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ia.prototype.upload=function(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Ce),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0},ia.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ia.prototype.addFeature=function(s,c,h,y){for(var x=0,S=c;x<S.length;x+=1)for(var T=0,k=S[x];T<k.length;T+=1){var q=k[T],$=q.x,Q=q.y;if(!($<0||$>=8192||Q<0||Q>=8192)){var re=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),le=re.vertexLength;Ns(this.layoutVertexArray,$,Q,-1,-1),Ns(this.layoutVertexArray,$,Q,1,-1),Ns(this.layoutVertexArray,$,Q,1,1),Ns(this.layoutVertexArray,$,Q,-1,1),this.indexArray.emplaceBack(le,le+1,le+2),this.indexArray.emplaceBack(le,le+3,le+2),re.vertexLength+=4,re.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,h,{},y)},Yt("CircleBucket",ia,{omit:["layers"]});var ku=new ro({"circle-sort-key":new vn(Pe.layout_circle["circle-sort-key"])}),Ti={paint:new ro({"circle-radius":new vn(Pe.paint_circle["circle-radius"]),"circle-color":new vn(Pe.paint_circle["circle-color"]),"circle-blur":new vn(Pe.paint_circle["circle-blur"]),"circle-opacity":new vn(Pe.paint_circle["circle-opacity"]),"circle-translate":new Zt(Pe.paint_circle["circle-translate"]),"circle-translate-anchor":new Zt(Pe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Zt(Pe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Zt(Pe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new vn(Pe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new vn(Pe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new vn(Pe.paint_circle["circle-stroke-opacity"])}),layout:ku},Ei="undefined"!=typeof Float32Array?Float32Array:Array;function Zi(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function vl(s,c,h){var y=c[0],x=c[1],S=c[2],T=c[3],k=c[4],q=c[5],$=c[6],Q=c[7],re=c[8],le=c[9],_e=c[10],Ae=c[11],Oe=c[12],Ze=c[13],Ue=c[14],nt=c[15],ot=h[0],ct=h[1],ft=h[2],St=h[3];return s[0]=ot*y+ct*k+ft*re+St*Oe,s[1]=ot*x+ct*q+ft*le+St*Ze,s[2]=ot*S+ct*$+ft*_e+St*Ue,s[3]=ot*T+ct*Q+ft*Ae+St*nt,s[4]=(ot=h[4])*y+(ct=h[5])*k+(ft=h[6])*re+(St=h[7])*Oe,s[5]=ot*x+ct*q+ft*le+St*Ze,s[6]=ot*S+ct*$+ft*_e+St*Ue,s[7]=ot*T+ct*Q+ft*Ae+St*nt,s[8]=(ot=h[8])*y+(ct=h[9])*k+(ft=h[10])*re+(St=h[11])*Oe,s[9]=ot*x+ct*q+ft*le+St*Ze,s[10]=ot*S+ct*$+ft*_e+St*Ue,s[11]=ot*T+ct*Q+ft*Ae+St*nt,s[12]=(ot=h[12])*y+(ct=h[13])*k+(ft=h[14])*re+(St=h[15])*Oe,s[13]=ot*x+ct*q+ft*le+St*Ze,s[14]=ot*S+ct*$+ft*_e+St*Ue,s[15]=ot*T+ct*Q+ft*Ae+St*nt,s}Math.hypot||(Math.hypot=function(){for(var s=arguments,c=0,h=arguments.length;h--;)c+=s[h]*s[h];return Math.sqrt(c)});var tc,s,Vd=vl;function _l(s,c,h){var y=c[0],x=c[1],S=c[2],T=c[3];return s[0]=h[0]*y+h[4]*x+h[8]*S+h[12]*T,s[1]=h[1]*y+h[5]*x+h[9]*S+h[13]*T,s[2]=h[2]*y+h[6]*x+h[10]*S+h[14]*T,s[3]=h[3]*y+h[7]*x+h[11]*S+h[15]*T,s}tc=new Ei(3),Ei!=Float32Array&&(tc[0]=0,tc[1]=0,tc[2]=0),s=new Ei(4),Ei!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0,s[3]=0);var Gd=(function(){var s=new Ei(2);Ei!=Float32Array&&(s[0]=0,s[1]=0)}(),function(s){function c(h){s.call(this,h,Ti)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.createBucket=function(h){return new ia(h)},c.prototype.queryRadius=function(h){var y=h;return xi("circle-radius",this,y)+xi("circle-stroke-width",this,y)+Ou(this.paint.get("circle-translate"))},c.prototype.queryIntersectsFeature=function(h,y,x,S,T,k,q,$){for(var Q=Xa(h,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),k.angle,q),re=this.paint.get("circle-radius").evaluate(y,x)+this.paint.get("circle-stroke-width").evaluate(y,x),le="map"===this.paint.get("circle-pitch-alignment"),_e=le?Q:function(zt,Ft){return zt.map(function(an){return dh(an,Ft)})}(Q,$),Ae=le?re*q:re,Oe=0,Ze=S;Oe<Ze.length;Oe+=1)for(var Ue=0,nt=Ze[Oe];Ue<nt.length;Ue+=1){var ot=nt[Ue],ct=le?ot:dh(ot,$),ft=Ae,St=_l([],[ot.x,ot.y,0,1],$);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?ft*=St[3]/k.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(ft*=k.cameraToCenterDistance/St[3]),Pa(_e,ct,ft))return!0}return!1},c}(bi));function dh(s,c){var h=_l([],[s.x,s.y,0,1],c);return new M(h[0]/h[3],h[1]/h[3])}var nc=function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c}(ia);function rc(s,c,h,y){var x=c.width,S=c.height;if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==x*S*h)throw new RangeError("mismatched image size")}else y=new Uint8Array(x*S*h);return s.width=x,s.height=S,s.data=y,s}function pg(s,c,h){var y=c.width,x=c.height;if(y!==s.width||x!==s.height){var S=rc({},{width:y,height:x},h);mg(s,S,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,y),height:Math.min(s.height,x)},h),s.width=y,s.height=x,s.data=S.data}}function mg(s,c,h,y,x,S){if(0===x.width||0===x.height)return c;if(x.width>s.width||x.height>s.height||h.x>s.width-x.width||h.y>s.height-x.height)throw new RangeError("out of range source coordinates for image copy");if(x.width>c.width||x.height>c.height||y.x>c.width-x.width||y.y>c.height-x.height)throw new RangeError("out of range destination coordinates for image copy");for(var T=s.data,k=c.data,q=0;q<x.height;q++)for(var $=((h.y+q)*s.width+h.x)*S,Q=((y.y+q)*c.width+y.x)*S,re=0;re<x.width*S;re++)k[Q+re]=T[$+re];return c}Yt("HeatmapBucket",nc,{omit:["layers"]});var Uc=function(s,c){rc(this,s,1,c)};Uc.prototype.resize=function(s){pg(this,s,1)},Uc.prototype.clone=function(){return new Uc({width:this.width,height:this.height},new Uint8Array(this.data))},Uc.copy=function(s,c,h,y,x){mg(s,c,h,y,x,1)};var wo=function(s,c){rc(this,s,4,c)};wo.prototype.resize=function(s){pg(this,s,4)},wo.prototype.replace=function(s,c){c?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s},wo.prototype.clone=function(){return new wo({width:this.width,height:this.height},new Uint8Array(this.data))},wo.copy=function(s,c,h,y,x){mg(s,c,h,y,x,4)},Yt("AlphaImage",Uc),Yt("RGBAImage",wo);var fh={paint:new ro({"heatmap-radius":new vn(Pe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new vn(Pe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Zt(Pe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new cs(Pe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Zt(Pe.paint_heatmap["heatmap-opacity"])})};function y_(s){var c={},h=s.resolution||256,y=s.clips?s.clips.length:1,x=s.image||new wo({width:h,height:y}),S=function(Ae,Oe,Ze){c[s.evaluationKey]=Ze;var Ue=s.expression.evaluate(c);x.data[Ae+Oe+0]=Math.floor(255*Ue.r/Ue.a),x.data[Ae+Oe+1]=Math.floor(255*Ue.g/Ue.a),x.data[Ae+Oe+2]=Math.floor(255*Ue.b/Ue.a),x.data[Ae+Oe+3]=Math.floor(255*Ue.a)};if(s.clips)for(var T=0,k=0;T<y;++T,k+=4*h)for(var q=0,$=0;q<h;q++,$+=4){var Q=q/(h-1),re=s.clips[T];S(k,$,re.start*(1-Q)+re.end*Q)}else for(var le=0,_e=0;le<h;le++,_e+=4)S(0,_e,le/(h-1));return x}var b_=function(s){function c(h){s.call(this,h,fh),this._updateColorRamp()}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.createBucket=function(h){return new nc(h)},c.prototype._handleSpecialPaintPropertyUpdate=function(h){"heatmap-color"===h&&this._updateColorRamp()},c.prototype._updateColorRamp=function(){this.colorRamp=y_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},c.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},c.prototype.queryRadius=function(){return 0},c.prototype.queryIntersectsFeature=function(){return!1},c.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},c}(bi),w_={paint:new ro({"hillshade-illumination-direction":new Zt(Pe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Zt(Pe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Zt(Pe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Zt(Pe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Zt(Pe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Zt(Pe.paint_hillshade["hillshade-accent-color"])})},Hd=function(s){function c(h){s.call(this,h,w_)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},c}(bi),kw=di([{name:"a_pos",components:2,type:"Int16"}],4).members,hh=yl,ph=yl;function yl(s,c,h){h=h||2;var y,x,S,T,k,q,$,Q=c&&c.length,re=Q?c[0]*h:s.length,le=qc(s,0,re,h,!0),_e=[];if(!le||le.next===le.prev)return _e;if(Q&&(le=function(Oe,Ze,Ue,nt){var ot,ct,ft,St=[];for(ot=0,ct=Ze.length;ot<ct;ot++)(ft=qc(Oe,Ze[ot]*nt,ot<ct-1?Ze[ot+1]*nt:Oe.length,nt,!1))===ft.next&&(ft.steiner=!0),St.push(GC(ft));for(St.sort(qr),ot=0;ot<St.length;ot++)Nw(St[ot],Ue),Ue=hs(Ue,Ue.next);return Ue}(s,c,le,h)),s.length>80*h){y=S=s[0],x=T=s[1];for(var Ae=h;Ae<re;Ae+=h)(k=s[Ae])<y&&(y=k),(q=s[Ae+1])<x&&(x=q),k>S&&(S=k),q>T&&(T=q);$=0!==($=Math.max(S-y,T-x))?1/$:0}return $d(le,_e,h,y,x,$),_e}function qc(s,c,h,y,x){var S,T;if(x===Ap(s,c,h,y)>0)for(S=c;S<h;S+=y)T=E_(S,s[S],s[S+1],T);else for(S=h-y;S>=c;S-=y)T=E_(S,s[S],s[S+1],T);return T&&ic(T,T.next)&&(ya(T),T=T.next),T}function hs(s,c){if(!s)return s;c||(c=s);var h,y=s;do{if(h=!1,y.steiner||!ic(y,y.next)&&0!==Yi(y.prev,y,y.next))y=y.next;else{if(ya(y),(y=c=y.prev)===y.next)break;h=!0}}while(h||y!==c);return c}function $d(s,c,h,y,x,S,T){if(s){!T&&S&&function(Q,re,le,_e){var Ae=Q;do{null===Ae.z&&(Ae.z=x_(Ae.x,Ae.y,re,le,_e)),Ae.prevZ=Ae.prev,Ae.nextZ=Ae.next,Ae=Ae.next}while(Ae!==Q);Ae.prevZ.nextZ=null,Ae.prevZ=null,function(Oe){var Ze,Ue,nt,ot,ct,ft,St,zt,Ft=1;do{for(Ue=Oe,Oe=null,ct=null,ft=0;Ue;){for(ft++,nt=Ue,St=0,Ze=0;Ze<Ft&&(St++,nt=nt.nextZ);Ze++);for(zt=Ft;St>0||zt>0&&nt;)0!==St&&(0===zt||!nt||Ue.z<=nt.z)?(ot=Ue,Ue=Ue.nextZ,St--):(ot=nt,nt=nt.nextZ,zt--),ct?ct.nextZ=ot:Oe=ot,ot.prevZ=ct,ct=ot;Ue=nt}ct.nextZ=null,Ft*=2}while(ft>1)}(Ae)}(s,y,x,S);for(var k,q,$=s;s.prev!==s.next;)if(k=s.prev,q=s.next,S?Kd(s,y,x,S):gg(s))c.push(k.i/h),c.push(s.i/h),c.push(q.i/h),ya(s),s=q.next,$=q.next;else if((s=q)===$){T?1===T?$d(s=qC(hs(s),c,h),c,h,y,x,S,2):2===T&&Mw(s,c,h,y,x,S):$d(hs(s),c,h,y,x,S,1);break}}}function gg(s){var c=s.prev,h=s,y=s.next;if(Yi(c,h,y)>=0)return!1;for(var x=s.next.next;x!==s.prev;){if(mh(c.x,c.y,h.x,h.y,y.x,y.y,x.x,x.y)&&Yi(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function Kd(s,c,h,y){var x=s.prev,S=s,T=s.next;if(Yi(x,S,T)>=0)return!1;for(var k=x.x>S.x?x.x>T.x?x.x:T.x:S.x>T.x?S.x:T.x,q=x.y>S.y?x.y>T.y?x.y:T.y:S.y>T.y?S.y:T.y,$=x_(x.x<S.x?x.x<T.x?x.x:T.x:S.x<T.x?S.x:T.x,x.y<S.y?x.y<T.y?x.y:T.y:S.y<T.y?S.y:T.y,c,h,y),Q=x_(k,q,c,h,y),re=s.prevZ,le=s.nextZ;re&&re.z>=$&&le&&le.z<=Q;){if(re!==s.prev&&re!==s.next&&mh(x.x,x.y,S.x,S.y,T.x,T.y,re.x,re.y)&&Yi(re.prev,re,re.next)>=0||(re=re.prevZ,le!==s.prev&&le!==s.next&&mh(x.x,x.y,S.x,S.y,T.x,T.y,le.x,le.y)&&Yi(le.prev,le,le.next)>=0))return!1;le=le.nextZ}for(;re&&re.z>=$;){if(re!==s.prev&&re!==s.next&&mh(x.x,x.y,S.x,S.y,T.x,T.y,re.x,re.y)&&Yi(re.prev,re,re.next)>=0)return!1;re=re.prevZ}for(;le&&le.z<=Q;){if(le!==s.prev&&le!==s.next&&mh(x.x,x.y,S.x,S.y,T.x,T.y,le.x,le.y)&&Yi(le.prev,le,le.next)>=0)return!1;le=le.nextZ}return!0}function qC(s,c,h){var y=s;do{var x=y.prev,S=y.next.next;!ic(x,S)&&Lw(x,y,y.next,S)&&bl(x,S)&&bl(S,x)&&(c.push(x.i/h),c.push(y.i/h),c.push(S.i/h),ya(y),ya(y.next),y=s=S),y=y.next}while(y!==s);return hs(y)}function Mw(s,c,h,y,x,S){var T=s;do{for(var k=T.next.next;k!==T.prev;){if(T.i!==k.i&&HC(T,k)){var q=Bw(T,k);return T=hs(T,T.next),q=hs(q,q.next),$d(T,c,h,y,x,S),void $d(q,c,h,y,x,S)}k=k.next}T=T.next}while(T!==s)}function qr(s,c){return s.x-c.x}function Nw(s,c){if(c=function(y,x){var S,T=x,k=y.x,q=y.y,$=-1/0;do{if(q<=T.y&&q>=T.next.y&&T.next.y!==T.y){var Q=T.x+(q-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(Q<=k&&Q>$){if($=Q,Q===k){if(q===T.y)return T;if(q===T.next.y)return T.next}S=T.x<T.next.x?T:T.next}}T=T.next}while(T!==x);if(!S)return null;if(k===$)return S;var re,le=S,_e=S.x,Ae=S.y,Oe=1/0;T=S;do{k>=T.x&&T.x>=_e&&k!==T.x&&mh(q<Ae?k:$,q,_e,Ae,q<Ae?$:k,q,T.x,T.y)&&(re=Math.abs(q-T.y)/(k-T.x),bl(T,y)&&(re<Oe||re===Oe&&(T.x>S.x||T.x===S.x&&VC(S,T)))&&(S=T,Oe=re)),T=T.next}while(T!==le);return S}(s,c)){var h=Bw(c,s);hs(c,c.next),hs(h,h.next)}}function VC(s,c){return Yi(s.prev,s,c.prev)<0&&Yi(c.next,s,s.next)<0}function x_(s,c,h,y,x){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=32767*(s-h)*x)|s<<8))|s<<4))|s<<2))|s<<1))|(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=32767*(c-y)*x)|c<<8))|c<<4))|c<<2))|c<<1))<<1}function GC(s){var c=s,h=s;do{(c.x<h.x||c.x===h.x&&c.y<h.y)&&(h=c),c=c.next}while(c!==s);return h}function mh(s,c,h,y,x,S,T,k){return(x-T)*(c-k)-(s-T)*(S-k)>=0&&(s-T)*(y-k)-(h-T)*(c-k)>=0&&(h-T)*(S-k)-(x-T)*(y-k)>=0}function HC(s,c){return s.next.i!==c.i&&s.prev.i!==c.i&&!function(h,y){var x=h;do{if(x.i!==h.i&&x.next.i!==h.i&&x.i!==y.i&&x.next.i!==y.i&&Lw(x,x.next,h,y))return!0;x=x.next}while(x!==h);return!1}(s,c)&&(bl(s,c)&&bl(c,s)&&function(h,y){var x=h,S=!1,T=(h.x+y.x)/2,k=(h.y+y.y)/2;do{x.y>k!=x.next.y>k&&x.next.y!==x.y&&T<(x.next.x-x.x)*(k-x.y)/(x.next.y-x.y)+x.x&&(S=!S),x=x.next}while(x!==h);return S}(s,c)&&(Yi(s.prev,s,c.prev)||Yi(s,c.prev,c))||ic(s,c)&&Yi(s.prev,s,s.next)>0&&Yi(c.prev,c,c.next)>0)}function Yi(s,c,h){return(c.y-s.y)*(h.x-c.x)-(c.x-s.x)*(h.y-c.y)}function ic(s,c){return s.x===c.x&&s.y===c.y}function Lw(s,c,h,y){var x=Xd(Yi(s,c,h)),S=Xd(Yi(s,c,y)),T=Xd(Yi(h,y,s)),k=Xd(Yi(h,y,c));return x!==S&&T!==k||!(0!==x||!Qi(s,h,c))||!(0!==S||!Qi(s,y,c))||!(0!==T||!Qi(h,s,y))||!(0!==k||!Qi(h,c,y))}function Qi(s,c,h){return c.x<=Math.max(s.x,h.x)&&c.x>=Math.min(s.x,h.x)&&c.y<=Math.max(s.y,h.y)&&c.y>=Math.min(s.y,h.y)}function Xd(s){return s>0?1:s<0?-1:0}function bl(s,c){return Yi(s.prev,s,s.next)<0?Yi(s,c,s.next)>=0&&Yi(s,s.prev,c)>=0:Yi(s,c,s.prev)<0||Yi(s,s.next,c)<0}function Bw(s,c){var h=new Bs(s.i,s.x,s.y),y=new Bs(c.i,c.x,c.y),x=s.next,S=c.prev;return s.next=c,c.prev=s,h.next=x,x.prev=h,y.next=h,h.prev=y,S.next=y,y.prev=S,y}function E_(s,c,h,y){var x=new Bs(s,c,h);return y?(x.next=y.next,x.prev=y,y.next.prev=x,y.next=x):(x.prev=x,x.next=x),x}function ya(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Bs(s,c,h){this.i=s,this.x=c,this.y=h,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ap(s,c,h,y){for(var x=0,S=c,T=h-y;S<h;S+=y)x+=(s[T]-s[S])*(s[S+1]+s[T+1]),T=S;return x}function Rp(s,c,h,y,x){!function S(T,k,q,$,Q){for(;$>q;){if($-q>600){var re=$-q+1,le=k-q+1,_e=Math.log(re),Ae=.5*Math.exp(2*_e/3),Oe=.5*Math.sqrt(_e*Ae*(re-Ae)/re)*(le-re/2<0?-1:1);S(T,k,Math.max(q,Math.floor(k-le*Ae/re+Oe)),Math.min($,Math.floor(k+(re-le)*Ae/re+Oe)),Q)}var Ze=T[k],Ue=q,nt=$;for(wl(T,q,k),Q(T[$],Ze)>0&&wl(T,q,$);Ue<nt;){for(wl(T,Ue,nt),Ue++,nt--;Q(T[Ue],Ze)<0;)Ue++;for(;Q(T[nt],Ze)>0;)nt--}0===Q(T[q],Ze)?wl(T,q,nt):wl(T,++nt,$),nt<=k&&(q=nt+1),k<=nt&&($=nt-1)}}(s,c,h||0,y||s.length-1,x||S_)}function wl(s,c,h){var y=s[c];s[c]=s[h],s[h]=y}function S_(s,c){return s<c?-1:s>c?1:0}function vg(s,c){var h=s.length;if(h<=1)return[s];for(var y,x,S=[],T=0;T<h;T++){var k=V(s[T]);0!==k&&(s[T].area=Math.abs(k),void 0===x&&(x=k<0),x===k<0?(y&&S.push(y),y=[s[T]]):y.push(s[T]))}if(y&&S.push(y),c>1)for(var q=0;q<S.length;q++)S[q].length<=c||(Rp(S[q],c,1,S[q].length-1,zw),S[q]=S[q].slice(0,c));return S}function zw(s,c){return c.area-s.area}function C_(s,c,h){for(var y=h.patternDependencies,x=!1,S=0,T=c;S<T.length;S+=1){var k=T[S].paint.get(s+"-pattern");k.isConstant()||(x=!0);var q=k.constantOr(null);q&&(x=!0,y[q.to]=!0,y[q.from]=!0)}return x}function T_(s,c,h,y,x){for(var S=x.patternDependencies,T=0,k=c;T<k.length;T+=1){var q=k[T],$=q.paint.get(s+"-pattern").value;if("constant"!==$.kind){var Q=$.evaluate({zoom:y-1},h,{},x.availableImages),re=$.evaluate({zoom:y},h,{},x.availableImages),le=$.evaluate({zoom:y+1},h,{},x.availableImages);re=re&&re.name?re.name:re,le=le&&le.name?le.name:le,S[Q=Q&&Q.name?Q.name:Q]=!0,S[re]=!0,S[le]=!0,h.patterns[q.id]={min:Q,mid:re,max:le}}}return h}yl.deviation=function(s,c,h,y){var x=c&&c.length,S=Math.abs(Ap(s,0,x?c[0]*h:s.length,h));if(x)for(var T=0,k=c.length;T<k;T++)S-=Math.abs(Ap(s,c[T]*h,T<k-1?c[T+1]*h:s.length,h));var q=0;for(T=0;T<y.length;T+=3){var $=y[T]*h,Q=y[T+1]*h,re=y[T+2]*h;q+=Math.abs((s[$]-s[re])*(s[Q+1]-s[$+1])-(s[$]-s[Q])*(s[re+1]-s[$+1]))}return 0===S&&0===q?0:Math.abs((q-S)/S)},yl.flatten=function(s){for(var c=s[0][0].length,h={vertices:[],holes:[],dimensions:c},y=0,x=0;x<s.length;x++){for(var S=0;S<s[x].length;S++)for(var T=0;T<c;T++)h.vertices.push(s[x][S][T]);x>0&&h.holes.push(y+=s[x-1].length)}return h},hh.default=ph;var zs=function(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(function(c){return c.id}),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new fl,this.indexArray=new va,this.indexArray2=new jc,this.programConfigurations=new vr(s.layers,s.zoom),this.segments=new Ee,this.segments2=new Ee,this.stateDependentLayerIds=this.layers.filter(function(c){return c.isStateDependent()}).map(function(c){return c.id})};zs.prototype.populate=function(s,c,h){this.hasPattern=C_("fill",this.layers,c);for(var y=this.layers[0].layout.get("fill-sort-key"),x=!y.isConstant(),S=[],T=0,k=s;T<k.length;T+=1){var q=k[T],$=q.feature,Q=q.id,re=q.index,le=q.sourceLayerIndex,_e=this.layers[0]._featureFilter.needGeometry,Ae=bo($,_e);if(this.layers[0]._featureFilter.filter(new Er(this.zoom),Ae,h)){var Oe=x?y.evaluate(Ae,{},h,c.availableImages):void 0,Ze={id:Q,properties:$.properties,type:$.type,sourceLayerIndex:le,index:re,geometry:_e?Ae.geometry:mi($),patterns:{},sortKey:Oe};S.push(Ze)}}x&&S.sort(function(Ft,an){return Ft.sortKey-an.sortKey});for(var Ue=0,nt=S;Ue<nt.length;Ue+=1){var ot=nt[Ue],ct=ot.geometry,ft=ot.index,St=ot.sourceLayerIndex;if(this.hasPattern){var zt=T_("fill",this.layers,ot,this.zoom,c);this.patternFeatures.push(zt)}else this.addFeature(ot,ct,ft,h,{});c.featureIndex.insert(s[ft].feature,ct,ft,St,this.index)}},zs.prototype.update=function(s,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,c,this.stateDependentLayers,h)},zs.prototype.addFeatures=function(s,c,h){for(var y=0,x=this.patternFeatures;y<x.length;y+=1){var S=x[y];this.addFeature(S,S.geometry,S.index,c,h)}},zs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},zs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},zs.prototype.upload=function(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,kw),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0},zs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},zs.prototype.addFeature=function(s,c,h,y,x){for(var S=0,T=vg(c,500);S<T.length;S+=1){for(var k=T[S],q=0,$=0,Q=k;$<Q.length;$+=1)q+=Q[$].length;for(var re=this.segments.prepareSegment(q,this.layoutVertexArray,this.indexArray),le=re.vertexLength,_e=[],Ae=[],Oe=0,Ze=k;Oe<Ze.length;Oe+=1){var Ue=Ze[Oe];if(0!==Ue.length){Ue!==k[0]&&Ae.push(_e.length/2);var nt=this.segments2.prepareSegment(Ue.length,this.layoutVertexArray,this.indexArray2),ot=nt.vertexLength;this.layoutVertexArray.emplaceBack(Ue[0].x,Ue[0].y),this.indexArray2.emplaceBack(ot+Ue.length-1,ot),_e.push(Ue[0].x),_e.push(Ue[0].y);for(var ct=1;ct<Ue.length;ct++)this.layoutVertexArray.emplaceBack(Ue[ct].x,Ue[ct].y),this.indexArray2.emplaceBack(ot+ct-1,ot+ct),_e.push(Ue[ct].x),_e.push(Ue[ct].y);nt.vertexLength+=Ue.length,nt.primitiveLength+=Ue.length}}for(var ft=hh(_e,Ae),St=0;St<ft.length;St+=3)this.indexArray.emplaceBack(le+ft[St],le+ft[St+1],le+ft[St+2]);re.vertexLength+=q,re.primitiveLength+=ft.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,h,x,y)},Yt("FillBucket",zs,{omit:["layers","patternFeatures"]});var ps=new ro({"fill-sort-key":new vn(Pe.layout_fill["fill-sort-key"])}),_g={paint:new ro({"fill-antialias":new Zt(Pe.paint_fill["fill-antialias"]),"fill-opacity":new vn(Pe.paint_fill["fill-opacity"]),"fill-color":new vn(Pe.paint_fill["fill-color"]),"fill-outline-color":new vn(Pe.paint_fill["fill-outline-color"]),"fill-translate":new Zt(Pe.paint_fill["fill-translate"]),"fill-translate-anchor":new Zt(Pe.paint_fill["fill-translate-anchor"]),"fill-pattern":new pi(Pe.paint_fill["fill-pattern"])}),layout:ps},Wd=function(s){function c(h){s.call(this,h,_g)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.recalculate=function(h,y){s.prototype.recalculate.call(this,h,y);var x=this.paint._values["fill-outline-color"];"constant"===x.value.kind&&void 0===x.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},c.prototype.createBucket=function(h){return new zs(h)},c.prototype.queryRadius=function(){return Ou(this.paint.get("fill-translate"))},c.prototype.queryIntersectsFeature=function(h,y,x,S,T,k,q){return _a(Xa(h,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),k.angle,q),S)},c.prototype.isTileClipped=function(){return!0},c}(bi),$C=di([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,yg=Jd;function Jd(s,c,h,y,x){this.properties={},this.extent=h,this.type=0,this._pbf=s,this._geometry=-1,this._keys=y,this._values=x,s.readFields(jw,this,c)}function jw(s,c,h){1==s?c.id=h.readVarint():2==s?function(y,x){for(var S=y.readVarint()+y.pos;y.pos<S;){var T=x._keys[y.readVarint()],k=x._values[y.readVarint()];x.properties[T]=k}}(h,c):3==s?c.type=h.readVarint():4==s&&(c._geometry=h.pos)}function Fw(s){for(var c,h,y=0,x=0,S=s.length,T=S-1;x<S;T=x++)y+=((h=s[T]).x-(c=s[x]).x)*(c.y+h.y);return y}Jd.types=["Unknown","Point","LineString","Polygon"],Jd.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var c,h=s.readVarint()+s.pos,y=1,x=0,S=0,T=0,k=[];s.pos<h;){if(x<=0){var q=s.readVarint();y=7&q,x=q>>3}if(x--,1===y||2===y)S+=s.readSVarint(),T+=s.readSVarint(),1===y&&(c&&k.push(c),c=[]),c.push(new M(S,T));else{if(7!==y)throw new Error("unknown command "+y);c&&c.push(c[0].clone())}}return c&&k.push(c),k},Jd.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var c=s.readVarint()+s.pos,h=1,y=0,x=0,S=0,T=1/0,k=-1/0,q=1/0,$=-1/0;s.pos<c;){if(y<=0){var Q=s.readVarint();h=7&Q,y=Q>>3}if(y--,1===h||2===h)(x+=s.readSVarint())<T&&(T=x),x>k&&(k=x),(S+=s.readSVarint())<q&&(q=S),S>$&&($=S);else if(7!==h)throw new Error("unknown command "+h)}return[T,q,k,$]},Jd.prototype.toGeoJSON=function(s,c,h){var y,x,S=this.extent*Math.pow(2,h),T=this.extent*s,k=this.extent*c,q=this.loadGeometry(),$=Jd.types[this.type];function Q(_e){for(var Ae=0;Ae<_e.length;Ae++){var Oe=_e[Ae];_e[Ae]=[360*(Oe.x+T)/S-180,360/Math.PI*Math.atan(Math.exp((180-360*(Oe.y+k)/S)*Math.PI/180))-90]}}switch(this.type){case 1:var re=[];for(y=0;y<q.length;y++)re[y]=q[y][0];Q(q=re);break;case 2:for(y=0;y<q.length;y++)Q(q[y]);break;case 3:for(q=function(_e){var Ae=_e.length;if(Ae<=1)return[_e];for(var Oe,Ze,Ue=[],nt=0;nt<Ae;nt++){var ot=Fw(_e[nt]);0!==ot&&(void 0===Ze&&(Ze=ot<0),Ze===ot<0?(Oe&&Ue.push(Oe),Oe=[_e[nt]]):Oe.push(_e[nt]))}return Oe&&Ue.push(Oe),Ue}(q),y=0;y<q.length;y++)for(x=0;x<q[y].length;x++)Q(q[y][x])}1===q.length?q=q[0]:$="Multi"+$;var le={type:"Feature",geometry:{type:$,coordinates:q},properties:this.properties};return"id"in this&&(le.id=this.id),le};var P_=I_;function I_(s,c){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(A_,this,c),this.length=this._features.length}function A_(s,c,h){15===s?c.version=h.readVarint():1===s?c.name=h.readString():5===s?c.extent=h.readVarint():2===s?c._features.push(h.pos):3===s?c._keys.push(h.readString()):4===s&&c._values.push(function(y){for(var x=null,S=y.readVarint()+y.pos;y.pos<S;){var T=y.readVarint()>>3;x=1===T?y.readString():2===T?y.readFloat():3===T?y.readDouble():4===T?y.readVarint64():5===T?y.readVarint():6===T?y.readSVarint():7===T?y.readBoolean():null}return x}(h))}function bg(s,c,h){if(3===s){var y=new P_(h,h.readVarint()+h.pos);y.length&&(c[y.name]=y)}}I_.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var c=this._pbf.readVarint()+this._pbf.pos;return new yg(this._pbf,c,this.extent,this._keys,this._values)};var xl={VectorTile:function(s,c){this.layers=s.readFields(bg,{},c)},VectorTileFeature:yg,VectorTileLayer:P_},KC=xl.VectorTileFeature.types,Vc=Math.pow(2,13);function Gc(s,c,h,y,x,S,T,k){s.emplaceBack(c,h,2*Math.floor(y*Vc)+T,x*Vc*2,S*Vc*2,Math.round(k))}var Wa=function(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(function(c){return c.id}),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new Ta,this.indexArray=new va,this.programConfigurations=new vr(s.layers,s.zoom),this.segments=new Ee,this.stateDependentLayerIds=this.layers.filter(function(c){return c.isStateDependent()}).map(function(c){return c.id})};function Uw(s,c){return s.x===c.x&&(s.x<0||s.x>8192)||s.y===c.y&&(s.y<0||s.y>8192)}Wa.prototype.populate=function(s,c,h){this.features=[],this.hasPattern=C_("fill-extrusion",this.layers,c);for(var y=0,x=s;y<x.length;y+=1){var S=x[y],T=S.feature,k=S.id,q=S.index,$=S.sourceLayerIndex,Q=this.layers[0]._featureFilter.needGeometry,re=bo(T,Q);if(this.layers[0]._featureFilter.filter(new Er(this.zoom),re,h)){var le={id:k,sourceLayerIndex:$,index:q,geometry:Q?re.geometry:mi(T),properties:T.properties,type:T.type,patterns:{}};this.hasPattern?this.features.push(T_("fill-extrusion",this.layers,le,this.zoom,c)):this.addFeature(le,le.geometry,q,h,{}),c.featureIndex.insert(T,le.geometry,q,$,this.index,!0)}}},Wa.prototype.addFeatures=function(s,c,h){for(var y=0,x=this.features;y<x.length;y+=1){var S=x[y];this.addFeature(S,S.geometry,S.index,c,h)}},Wa.prototype.update=function(s,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,c,this.stateDependentLayers,h)},Wa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Wa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Wa.prototype.upload=function(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,$C),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0},Wa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Wa.prototype.addFeature=function(s,c,h,y,x){for(var S=0,T=vg(c,500);S<T.length;S+=1){for(var k=T[S],q=0,$=0,Q=k;$<Q.length;$+=1)q+=Q[$].length;for(var re=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),le=0,_e=k;le<_e.length;le+=1){var Ae=_e[le];if(0!==Ae.length&&!((Wn=Ae).every(function(kn){return kn.x<0})||Wn.every(function(kn){return kn.x>8192})||Wn.every(function(kn){return kn.y<0})||Wn.every(function(kn){return kn.y>8192})))for(var Oe=0,Ze=0;Ze<Ae.length;Ze++){var Ue=Ae[Ze];if(Ze>=1){var nt=Ae[Ze-1];if(!Uw(Ue,nt)){re.vertexLength+4>Ee.MAX_VERTEX_ARRAY_LENGTH&&(re=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var ot=Ue.sub(nt)._perp()._unit(),ct=nt.dist(Ue);Oe+ct>32768&&(Oe=0),Gc(this.layoutVertexArray,Ue.x,Ue.y,ot.x,ot.y,0,0,Oe),Gc(this.layoutVertexArray,Ue.x,Ue.y,ot.x,ot.y,0,1,Oe),Gc(this.layoutVertexArray,nt.x,nt.y,ot.x,ot.y,0,0,Oe+=ct),Gc(this.layoutVertexArray,nt.x,nt.y,ot.x,ot.y,0,1,Oe);var ft=re.vertexLength;this.indexArray.emplaceBack(ft,ft+2,ft+1),this.indexArray.emplaceBack(ft+1,ft+2,ft+3),re.vertexLength+=4,re.primitiveLength+=2}}}}if(re.vertexLength+q>Ee.MAX_VERTEX_ARRAY_LENGTH&&(re=this.segments.prepareSegment(q,this.layoutVertexArray,this.indexArray)),"Polygon"===KC[s.type]){for(var St=[],zt=[],Ft=re.vertexLength,an=0,Gt=k;an<Gt.length;an+=1){var un=Gt[an];if(0!==un.length){un!==k[0]&&zt.push(St.length/2);for(var $t=0;$t<un.length;$t++){var Nn=un[$t];Gc(this.layoutVertexArray,Nn.x,Nn.y,0,0,1,1,0),St.push(Nn.x),St.push(Nn.y)}}}for(var _n=hh(St,zt),rn=0;rn<_n.length;rn+=3)this.indexArray.emplaceBack(Ft+_n[rn],Ft+_n[rn+2],Ft+_n[rn+1]);re.primitiveLength+=_n.length/3,re.vertexLength+=q}}var Wn;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,h,x,y)},Yt("FillExtrusionBucket",Wa,{omit:["layers","features"]});var qw={paint:new ro({"fill-extrusion-opacity":new Zt(Pe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new vn(Pe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Zt(Pe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Zt(Pe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new pi(Pe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new vn(Pe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new vn(Pe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Zt(Pe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Vw=function(s){function c(h){s.call(this,h,qw)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.createBucket=function(h){return new Wa(h)},c.prototype.queryRadius=function(){return Ou(this.paint.get("fill-extrusion-translate"))},c.prototype.is3D=function(){return!0},c.prototype.queryIntersectsFeature=function(h,y,x,S,T,k,q,$){var Q=Xa(h,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),k.angle,q),re=this.paint.get("fill-extrusion-height").evaluate(y,x),le=this.paint.get("fill-extrusion-base").evaluate(y,x),_e=function(Oe,Ze,Ue,nt){for(var ot=[],ct=0,ft=Oe;ct<ft.length;ct+=1){var St=ft[ct],zt=[St.x,St.y,0,1];_l(zt,zt,Ze),ot.push(new M(zt[0]/zt[3],zt[1]/zt[3]))}return ot}(Q,$),Ae=function(Oe,Ze,Ue,nt){for(var ot=[],ct=[],ft=nt[8]*Ze,St=nt[9]*Ze,zt=nt[10]*Ze,Ft=nt[11]*Ze,an=nt[8]*Ue,Gt=nt[9]*Ue,un=nt[10]*Ue,$t=nt[11]*Ue,Nn=0,_n=Oe;Nn<_n.length;Nn+=1){for(var rn=[],Wn=[],kn=0,cr=_n[Nn];kn<cr.length;kn+=1){var ln=cr[kn],tr=ln.x,ii=ln.y,gi=nt[0]*tr+nt[4]*ii+nt[12],vi=nt[1]*tr+nt[5]*ii+nt[13],Hr=nt[2]*tr+nt[6]*ii+nt[14],Si=nt[3]*tr+nt[7]*ii+nt[15],Hi=Hr+zt,$i=Si+Ft,Eo=gi+an,Ki=vi+Gt,So=Hr+un,fi=Si+$t,Bi=new M((gi+ft)/$i,(vi+St)/$i);Bi.z=Hi/$i,rn.push(Bi);var Qn=new M(Eo/fi,Ki/fi);Qn.z=So/fi,Wn.push(Qn)}ot.push(rn),ct.push(Wn)}return[ot,ct]}(S,le,re,$);return function(Oe,Ze,Ue){var nt=1/0;_a(Ue,Ze)&&(nt=R_(Ue,Ze[0]));for(var ot=0;ot<Ze.length;ot++)for(var ct=Ze[ot],ft=Oe[ot],St=0;St<ct.length-1;St++){var zt=ct[St],Ft=[zt,ct[St+1],ft[St+1],ft[St],zt];oa(Ue,Ft)&&(nt=Math.min(nt,R_(Ue,Ft)))}return nt!==1/0&&nt}(Ae[0],Ae[1],_e)},c}(bi);function Zd(s,c){return s.x*c.x+s.y*c.y}function R_(s,c){if(1===s.length){for(var h,y=0,x=c[y++];!h||x.equals(h);)if(!(h=c[y++]))return 1/0;for(;y<c.length;y++){var S=c[y],T=s[0],k=h.sub(x),q=S.sub(x),$=T.sub(x),Q=Zd(k,k),re=Zd(k,q),le=Zd(q,q),_e=Zd($,k),Ae=Zd($,q),Oe=Q*le-re*re,Ze=(le*_e-re*Ae)/Oe,Ue=(Q*Ae-re*_e)/Oe,nt=x.z*(1-Ze-Ue)+h.z*Ze+S.z*Ue;if(isFinite(nt))return nt}return 1/0}for(var ot=1/0,ct=0,ft=c;ct<ft.length;ct+=1)ot=Math.min(ot,ft[ct].z);return ot}var gh=di([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,D_=di([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Gw=xl.VectorTileFeature.types,Hn=Math.cos(Math.PI/180*37.5),wg=Math.pow(2,14)/.5,sa=function(s){var c=this;this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(function(h){return h.id}),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(h){c.gradients[h.id]={}}),this.layoutVertexArray=new qd,this.layoutVertexArray2=new hl,this.indexArray=new va,this.programConfigurations=new vr(s.layers,s.zoom),this.segments=new Ee,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(h){return h.isStateDependent()}).map(function(h){return h.id})};sa.prototype.populate=function(s,c,h){this.hasPattern=C_("line",this.layers,c);for(var y=this.layers[0].layout.get("line-sort-key"),x=!y.isConstant(),S=[],T=0,k=s;T<k.length;T+=1){var q=k[T],$=q.feature,Q=q.id,re=q.index,le=q.sourceLayerIndex,_e=this.layers[0]._featureFilter.needGeometry,Ae=bo($,_e);if(this.layers[0]._featureFilter.filter(new Er(this.zoom),Ae,h)){var Oe=x?y.evaluate(Ae,{},h):void 0,Ze={id:Q,properties:$.properties,type:$.type,sourceLayerIndex:le,index:re,geometry:_e?Ae.geometry:mi($),patterns:{},sortKey:Oe};S.push(Ze)}}x&&S.sort(function(Ft,an){return Ft.sortKey-an.sortKey});for(var Ue=0,nt=S;Ue<nt.length;Ue+=1){var ot=nt[Ue],ct=ot.geometry,ft=ot.index,St=ot.sourceLayerIndex;if(this.hasPattern){var zt=T_("line",this.layers,ot,this.zoom,c);this.patternFeatures.push(zt)}else this.addFeature(ot,ct,ft,h,{});c.featureIndex.insert(s[ft].feature,ct,ft,St,this.index)}},sa.prototype.update=function(s,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,c,this.stateDependentLayers,h)},sa.prototype.addFeatures=function(s,c,h){for(var y=0,x=this.patternFeatures;y<x.length;y+=1){var S=x[y];this.addFeature(S,S.geometry,S.index,c,h)}},sa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},sa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},sa.prototype.upload=function(s){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,D_)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,gh),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0},sa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},sa.prototype.lineFeatureClips=function(s){if(s.properties&&s.properties.hasOwnProperty("mapbox_clip_start")&&s.properties.hasOwnProperty("mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}},sa.prototype.addFeature=function(s,c,h,y,x){var S=this.layers[0].layout,T=S.get("line-join").evaluate(s,{}),k=S.get("line-cap"),q=S.get("line-miter-limit"),$=S.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(var Q=0,re=c;Q<re.length;Q+=1)this.addLine(re[Q],s,T,k,q,$);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,h,x,y)},sa.prototype.addLine=function(s,c,h,y,x,S){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var T=0;T<s.length-1;T++)this.totalDistance+=s[T].dist(s[T+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var k="Polygon"===Gw[c.type],q=s.length;q>=2&&s[q-1].equals(s[q-2]);)q--;for(var $=0;$<q-1&&s[$].equals(s[$+1]);)$++;if(!(q<(k?3:2))){"bevel"===h&&(x=1.05);var Q,re=this.overscaling<=16?122880/(512*this.overscaling):0,le=this.segments.prepareSegment(10*q,this.layoutVertexArray,this.indexArray),_e=void 0,Ae=void 0,Oe=void 0,Ze=void 0;this.e1=this.e2=-1,k&&(Ze=s[$].sub(Q=s[q-2])._unit()._perp());for(var Ue=$;Ue<q;Ue++)if(!(Ae=Ue===q-1?k?s[$+1]:void 0:s[Ue+1])||!s[Ue].equals(Ae)){Ze&&(Oe=Ze),Q&&(_e=Q),Q=s[Ue],Ze=Ae?Ae.sub(Q)._unit()._perp():Oe;var nt=(Oe=Oe||Ze).add(Ze);0===nt.x&&0===nt.y||nt._unit();var ot=Oe.x*Ze.x+Oe.y*Ze.y,ct=nt.x*Ze.x+nt.y*Ze.y,ft=0!==ct?1/ct:1/0,St=2*Math.sqrt(2-2*ct),zt=ct<Hn&&_e&&Ae,Ft=Oe.x*Ze.y-Oe.y*Ze.x>0;if(zt&&Ue>$){var an=Q.dist(_e);if(an>2*re){var Gt=Q.sub(Q.sub(_e)._mult(re/an)._round());this.updateDistance(_e,Gt),this.addCurrentVertex(Gt,Oe,0,0,le),_e=Gt}}var un=_e&&Ae,$t=un?h:k?"butt":y;if(un&&"round"===$t&&(ft<S?$t="miter":ft<=2&&($t="fakeround")),"miter"===$t&&ft>x&&($t="bevel"),"bevel"===$t&&(ft>2&&($t="flipbevel"),ft<x&&($t="miter")),_e&&this.updateDistance(_e,Q),"miter"===$t)nt._mult(ft),this.addCurrentVertex(Q,nt,0,0,le);else if("flipbevel"===$t){if(ft>100)nt=Ze.mult(-1);else{var Nn=ft*Oe.add(Ze).mag()/Oe.sub(Ze).mag();nt._perp()._mult(Nn*(Ft?-1:1))}this.addCurrentVertex(Q,nt,0,0,le),this.addCurrentVertex(Q,nt.mult(-1),0,0,le)}else if("bevel"===$t||"fakeround"===$t){var _n=-Math.sqrt(ft*ft-1),rn=Ft?_n:0,Wn=Ft?0:_n;if(_e&&this.addCurrentVertex(Q,Oe,rn,Wn,le),"fakeround"===$t)for(var kn=Math.round(180*St/Math.PI/20),cr=1;cr<kn;cr++){var ln=cr/kn;if(.5!==ln){var tr=ln-.5;ln+=ln*tr*(ln-1)*((1.0904+ot*(ot*(3.55645-1.43519*ot)-3.2452))*tr*tr+(.848013+ot*(.215638*ot-1.06021)))}var ii=Ze.sub(Oe)._mult(ln)._add(Oe)._unit()._mult(Ft?-1:1);this.addHalfVertex(Q,ii.x,ii.y,!1,Ft,0,le)}Ae&&this.addCurrentVertex(Q,Ze,-rn,-Wn,le)}else if("butt"===$t)this.addCurrentVertex(Q,nt,0,0,le);else if("square"===$t){var gi=_e?1:-1;this.addCurrentVertex(Q,nt,gi,gi,le)}else"round"===$t&&(_e&&(this.addCurrentVertex(Q,Oe,0,0,le),this.addCurrentVertex(Q,Oe,1,1,le,!0)),Ae&&(this.addCurrentVertex(Q,Ze,-1,-1,le,!0),this.addCurrentVertex(Q,Ze,0,0,le)));if(zt&&Ue<q-1){var vi=Q.dist(Ae);if(vi>2*re){var Hr=Q.add(Ae.sub(Q)._mult(re/vi)._round());this.updateDistance(Q,Hr),this.addCurrentVertex(Hr,Ze,0,0,le),Q=Hr}}}}},sa.prototype.addCurrentVertex=function(s,c,h,y,x,S){void 0===S&&(S=!1);var T=c.y*y-c.x,k=-c.y-c.x*y;this.addHalfVertex(s,c.x+c.y*h,c.y-c.x*h,S,!1,h,x),this.addHalfVertex(s,T,k,S,!0,-y,x),this.distance>wg/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(s,c,h,y,x,S))},sa.prototype.addHalfVertex=function(s,c,h,y,x,S,T){var k=.5*(this.lineClips?this.scaledDistance*(wg-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s.x<<1)+(y?1:0),(s.y<<1)+(x?1:0),Math.round(63*c)+128,Math.round(63*h)+128,1+(0===S?0:S<0?-1:1)|(63&k)<<2,k>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var q=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,q),T.primitiveLength++),x?this.e2=q:this.e1=q},sa.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},sa.prototype.updateDistance=function(s,c){this.distance+=s.dist(c),this.updateScaledDistance()},Yt("LineBucket",sa,{omit:["layers","patternFeatures"]});var xg=new ro({"line-cap":new Zt(Pe.layout_line["line-cap"]),"line-join":new vn(Pe.layout_line["line-join"]),"line-miter-limit":new Zt(Pe.layout_line["line-miter-limit"]),"line-round-limit":new Zt(Pe.layout_line["line-round-limit"]),"line-sort-key":new vn(Pe.layout_line["line-sort-key"])}),Yd={paint:new ro({"line-opacity":new vn(Pe.paint_line["line-opacity"]),"line-color":new vn(Pe.paint_line["line-color"]),"line-translate":new Zt(Pe.paint_line["line-translate"]),"line-translate-anchor":new Zt(Pe.paint_line["line-translate-anchor"]),"line-width":new vn(Pe.paint_line["line-width"]),"line-gap-width":new vn(Pe.paint_line["line-gap-width"]),"line-offset":new vn(Pe.paint_line["line-offset"]),"line-blur":new vn(Pe.paint_line["line-blur"]),"line-dasharray":new Ka(Pe.paint_line["line-dasharray"]),"line-pattern":new pi(Pe.paint_line["line-pattern"]),"line-gradient":new cs(Pe.paint_line["line-gradient"])}),layout:xg},O_=new(function(s){function c(){s.apply(this,arguments)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.possiblyEvaluate=function(h,y){return y=new Er(Math.floor(y.zoom),{now:y.now,fadeDuration:y.fadeDuration,zoomHistory:y.zoomHistory,transition:y.transition}),s.prototype.possiblyEvaluate.call(this,h,y)},c.prototype.evaluate=function(h,y,x,S){return y=ge({},y,{zoom:Math.floor(y.zoom)}),s.prototype.evaluate.call(this,h,y,x,S)},c}(vn))(Yd.paint.properties["line-width"].specification);O_.useIntegerZoom=!0;var Hw=function(s){function c(h){s.call(this,h,Yd),this.gradientVersion=0}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype._handleSpecialPaintPropertyUpdate=function(h){"line-gradient"===h&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ba,this.gradientVersion=(this.gradientVersion+1)%W)},c.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},c.prototype.recalculate=function(h,y){s.prototype.recalculate.call(this,h,y),this.paint._values["line-floorwidth"]=O_.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,h)},c.prototype.createBucket=function(h){return new sa(h)},c.prototype.queryRadius=function(h){var y=h,x=k_(xi("line-width",this,y),xi("line-gap-width",this,y)),S=xi("line-offset",this,y);return x/2+Math.abs(S)+Ou(this.paint.get("line-translate"))},c.prototype.queryIntersectsFeature=function(h,y,x,S,T,k,q){var $=Xa(h,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),k.angle,q),Q=q/2*k_(this.paint.get("line-width").evaluate(y,x),this.paint.get("line-gap-width").evaluate(y,x)),re=this.paint.get("line-offset").evaluate(y,x);return re&&(S=function(le,_e){for(var Ae=[],Oe=new M(0,0),Ze=0;Ze<le.length;Ze++){for(var Ue=le[Ze],nt=[],ot=0;ot<Ue.length;ot++){var ct=Ue[ot],ft=Ue[ot+1],St=0===ot?Oe:ct.sub(Ue[ot-1])._unit()._perp(),zt=ot===Ue.length-1?Oe:ft.sub(ct)._unit()._perp(),Ft=St._add(zt)._unit();Ft._mult(1/(Ft.x*zt.x+Ft.y*zt.y)),nt.push(Ft._mult(_e)._add(ct))}Ae.push(nt)}return Ae}(S,re*q)),function(le,_e,Ae){for(var Oe=0;Oe<_e.length;Oe++){var Ze=_e[Oe];if(le.length>=3)for(var Ue=0;Ue<Ze.length;Ue++)if(aa(le,Ze[Ue]))return!0;if(Fc(le,Ze,Ae))return!0}return!1}($,S,Q)},c.prototype.isTileClipped=function(){return!0},c}(bi);function k_(s,c){return c>0?c+2*s:s}var Dp=di([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),oc=di([{name:"a_projected_pos",components:3,type:"Float32"}],4),M_=(di([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),di([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Qd=(di([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),di([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),$w=di([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function N_(s,c,h){return s.sections.forEach(function(y){var x,T,k;y.text=(x=y.text,T=h,"uppercase"===(k=c.layout.get("text-transform").evaluate(T,{}))?x=x.toLocaleUpperCase():"lowercase"===k&&(x=x.toLocaleLowerCase()),ci.applyArabicShaping&&(x=ci.applyArabicShaping(x)),x)}),s}di([{name:"triangle",components:3,type:"Uint16"}]),di([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),di([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),di([{type:"Float32",name:"offsetX"}]),di([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Hc={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},vh=function(s,c,h,y,x){var S,T,k=8*x-y-1,q=(1<<k)-1,$=q>>1,Q=-7,re=h?x-1:0,le=h?-1:1,_e=s[c+re];for(re+=le,S=_e&(1<<-Q)-1,_e>>=-Q,Q+=k;Q>0;S=256*S+s[c+re],re+=le,Q-=8);for(T=S&(1<<-Q)-1,S>>=-Q,Q+=y;Q>0;T=256*T+s[c+re],re+=le,Q-=8);if(0===S)S=1-$;else{if(S===q)return T?NaN:1/0*(_e?-1:1);T+=Math.pow(2,y),S-=$}return(_e?-1:1)*T*Math.pow(2,S-y)},Eg=function(s,c,h,y,x,S){var T,k,q,$=8*S-x-1,Q=(1<<$)-1,re=Q>>1,le=23===x?Math.pow(2,-24)-Math.pow(2,-77):0,_e=y?0:S-1,Ae=y?1:-1,Oe=c<0||0===c&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(k=isNaN(c)?1:0,T=Q):(T=Math.floor(Math.log(c)/Math.LN2),c*(q=Math.pow(2,-T))<1&&(T--,q*=2),(c+=T+re>=1?le/q:le*Math.pow(2,1-re))*q>=2&&(T++,q/=2),T+re>=Q?(k=0,T=Q):T+re>=1?(k=(c*q-1)*Math.pow(2,x),T+=re):(k=c*Math.pow(2,re-1)*Math.pow(2,x),T=0));x>=8;s[h+_e]=255&k,_e+=Ae,k/=256,x-=8);for(T=T<<x|k,$+=x;$>0;s[h+_e]=255&T,_e+=Ae,T/=256,$-=8);s[h+_e-Ae]|=128*Oe},Op=Yr;function Yr(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}Yr.Varint=0,Yr.Fixed64=1,Yr.Bytes=2,Yr.Fixed32=5;var $c="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function ms(s){return s.type===Yr.Bytes?s.readVarint()+s.pos:s.pos+1}function Kw(s,c,h){var y=c<=16383?1:c<=2097151?2:c<=268435455?3:Math.floor(Math.log(c)/(7*Math.LN2));h.realloc(y);for(var x=h.pos-1;x>=s;x--)h.buf[x+y]=h.buf[x]}function L_(s,c){for(var h=0;h<s.length;h++)c.writeVarint(s[h])}function Xw(s,c){for(var h=0;h<s.length;h++)c.writeSVarint(s[h])}function XC(s,c){for(var h=0;h<s.length;h++)c.writeFloat(s[h])}function Ww(s,c){for(var h=0;h<s.length;h++)c.writeDouble(s[h])}function Jw(s,c){for(var h=0;h<s.length;h++)c.writeBoolean(s[h])}function Zw(s,c){for(var h=0;h<s.length;h++)c.writeFixed32(s[h])}function kp(s,c){for(var h=0;h<s.length;h++)c.writeSFixed32(s[h])}function Sg(s,c){for(var h=0;h<s.length;h++)c.writeFixed64(s[h])}function tf(s,c){for(var h=0;h<s.length;h++)c.writeSFixed64(s[h])}function Mp(s,c){return(s[c]|s[c+1]<<8|s[c+2]<<16)+16777216*s[c+3]}function nf(s,c,h){s[h]=c,s[h+1]=c>>>8,s[h+2]=c>>>16,s[h+3]=c>>>24}function Yw(s,c){return(s[c]|s[c+1]<<8|s[c+2]<<16)+(s[c+3]<<24)}function Np(s,c,h){1===s&&h.readMessage(Cg,c)}function Cg(s,c,h){if(3===s){var y=h.readMessage(B_,{}),x=y.width,S=y.height,T=y.left,k=y.top,q=y.advance;c.push({id:y.id,bitmap:new Uc({width:x+6,height:S+6},y.bitmap),metrics:{width:x,height:S,left:T,top:k,advance:q}})}}function B_(s,c,h){1===s?c.id=h.readVarint():2===s?c.bitmap=h.readBytes():3===s?c.width=h.readVarint():4===s?c.height=h.readVarint():5===s?c.left=h.readSVarint():6===s?c.top=h.readSVarint():7===s&&(c.advance=h.readVarint())}function Tg(s){for(var c=0,h=0,y=0,x=s;y<x.length;y+=1){var S=x[y];c+=S.w*S.h,h=Math.max(h,S.w)}s.sort(function(Oe,Ze){return Ze.h-Oe.h});for(var T=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(c/.95)),h),h:1/0}],k=0,q=0,$=0,Q=s;$<Q.length;$+=1)for(var re=Q[$],le=T.length-1;le>=0;le--){var _e=T[le];if(!(re.w>_e.w||re.h>_e.h)){if(re.x=_e.x,re.y=_e.y,q=Math.max(q,re.y+re.h),k=Math.max(k,re.x+re.w),re.w===_e.w&&re.h===_e.h){var Ae=T.pop();le<T.length&&(T[le]=Ae)}else re.h===_e.h?(_e.x+=re.w,_e.w-=re.w):re.w===_e.w?(_e.y+=re.h,_e.h-=re.h):(T.push({x:_e.x+re.w,y:_e.y,w:_e.w-re.w,h:re.h}),_e.y+=re.h,_e.h-=re.h);break}}return{w:k,h:q,fill:c/(k*q)||0}}Yr.prototype={destroy:function(){this.buf=null},readFields:function(s,c,h){for(h=h||this.length;this.pos<h;){var y=this.readVarint(),x=y>>3,S=this.pos;this.type=7&y,s(x,c,this),this.pos===S&&this.skip(y)}return c},readMessage:function(s,c){return this.readFields(s,c,this.readVarint()+this.pos)},readFixed32:function(){var s=Mp(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=Yw(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=Mp(this.buf,this.pos)+4294967296*Mp(this.buf,this.pos+4);return this.pos+=8,s},readSFixed64:function(){var s=Mp(this.buf,this.pos)+4294967296*Yw(this.buf,this.pos+4);return this.pos+=8,s},readFloat:function(){var s=vh(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=vh(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var c,h,y=this.buf;return c=127&(h=y[this.pos++]),h<128?c:(c|=(127&(h=y[this.pos++]))<<7,h<128?c:(c|=(127&(h=y[this.pos++]))<<14,h<128?c:(c|=(127&(h=y[this.pos++]))<<21,h<128?c:function(x,S,T){var k,q,$=T.buf;if(k=(112&(q=$[T.pos++]))>>4,q<128||(k|=(127&(q=$[T.pos++]))<<3,q<128)||(k|=(127&(q=$[T.pos++]))<<10,q<128)||(k|=(127&(q=$[T.pos++]))<<17,q<128)||(k|=(127&(q=$[T.pos++]))<<24,q<128)||(k|=(1&(q=$[T.pos++]))<<31,q<128))return function ef(s,c,h){return h?4294967296*c+(s>>>0):4294967296*(c>>>0)+(s>>>0)}(x,k,S);throw new Error("Expected varint not more than 10 bytes")}(c|=(15&(h=y[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var s=this.readVarint()+this.pos,c=this.pos;return this.pos=s,s-c>=12&&$c?$c.decode(this.buf.subarray(c,s)):function(h,y,x){for(var S="",T=y;T<x;){var k,q,$,Q=h[T],re=null,le=Q>239?4:Q>223?3:Q>191?2:1;if(T+le>x)break;1===le?Q<128&&(re=Q):2===le?128==(192&(k=h[T+1]))&&(re=(31&Q)<<6|63&k)<=127&&(re=null):3===le?(q=h[T+2],128==(192&(k=h[T+1]))&&128==(192&q)&&((re=(15&Q)<<12|(63&k)<<6|63&q)<=2047||re>=55296&&re<=57343)&&(re=null)):4===le&&(q=h[T+2],$=h[T+3],128==(192&(k=h[T+1]))&&128==(192&q)&&128==(192&$)&&((re=(15&Q)<<18|(63&k)<<12|(63&q)<<6|63&$)<=65535||re>=1114112)&&(re=null)),null===re?(re=65533,le=1):re>65535&&(re-=65536,S+=String.fromCharCode(re>>>10&1023|55296),re=56320|1023&re),S+=String.fromCharCode(re),T+=le}return S}(this.buf,c,s)},readBytes:function(){var s=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,s);return this.pos=s,c},readPackedVarint:function(s,c){if(this.type!==Yr.Bytes)return s.push(this.readVarint(c));var h=ms(this);for(s=s||[];this.pos<h;)s.push(this.readVarint(c));return s},readPackedSVarint:function(s){if(this.type!==Yr.Bytes)return s.push(this.readSVarint());var c=ms(this);for(s=s||[];this.pos<c;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==Yr.Bytes)return s.push(this.readBoolean());var c=ms(this);for(s=s||[];this.pos<c;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==Yr.Bytes)return s.push(this.readFloat());var c=ms(this);for(s=s||[];this.pos<c;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==Yr.Bytes)return s.push(this.readDouble());var c=ms(this);for(s=s||[];this.pos<c;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==Yr.Bytes)return s.push(this.readFixed32());var c=ms(this);for(s=s||[];this.pos<c;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==Yr.Bytes)return s.push(this.readSFixed32());var c=ms(this);for(s=s||[];this.pos<c;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==Yr.Bytes)return s.push(this.readFixed64());var c=ms(this);for(s=s||[];this.pos<c;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==Yr.Bytes)return s.push(this.readSFixed64());var c=ms(this);for(s=s||[];this.pos<c;)s.push(this.readSFixed64());return s},skip:function(s){var c=7&s;if(c===Yr.Varint)for(;this.buf[this.pos++]>127;);else if(c===Yr.Bytes)this.pos=this.readVarint()+this.pos;else if(c===Yr.Fixed32)this.pos+=4;else{if(c!==Yr.Fixed64)throw new Error("Unimplemented type: "+c);this.pos+=8}},writeTag:function(s,c){this.writeVarint(s<<3|c)},realloc:function(s){for(var c=this.length||16;c<this.pos+s;)c*=2;if(c!==this.length){var h=new Uint8Array(c);h.set(this.buf),this.buf=h,this.length=c}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),nf(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),nf(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),nf(this.buf,-1&s,this.pos),nf(this.buf,Math.floor(s*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),nf(this.buf,-1&s,this.pos),nf(this.buf,Math.floor(s*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(c,h){var y,x,S,k;if(c>=0?(y=c%4294967296|0,x=c/4294967296|0):(x=~(-c/4294967296),4294967295^(y=~(-c%4294967296))?y=y+1|0:(y=0,x=x+1|0)),c>=0x10000000000000000||c<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),S=y,(k=h).buf[k.pos++]=127&S|128,S>>>=7,k.buf[k.pos++]=127&S|128,S>>>=7,k.buf[k.pos++]=127&S|128,S>>>=7,k.buf[k.pos++]=127&S|128,k.buf[k.pos]=127&(S>>>=7),function(S,T){var k=(7&S)<<4;T.buf[T.pos++]|=k|((S>>>=3)?128:0),S&&(T.buf[T.pos++]=127&S|((S>>>=7)?128:0),S&&(T.buf[T.pos++]=127&S|((S>>>=7)?128:0),S&&(T.buf[T.pos++]=127&S|((S>>>=7)?128:0),S&&(T.buf[T.pos++]=127&S|((S>>>=7)?128:0),S&&(T.buf[T.pos++]=127&S)))))}(x,h)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(Boolean(s))},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var c=this.pos;this.pos=function(y,x,S){for(var T,k,q=0;q<x.length;q++){if((T=x.charCodeAt(q))>55295&&T<57344){if(!k){T>56319||q+1===x.length?(y[S++]=239,y[S++]=191,y[S++]=189):k=T;continue}if(T<56320){y[S++]=239,y[S++]=191,y[S++]=189,k=T;continue}T=k-55296<<10|T-56320|65536,k=null}else k&&(y[S++]=239,y[S++]=191,y[S++]=189,k=null);T<128?y[S++]=T:(T<2048?y[S++]=T>>6|192:(T<65536?y[S++]=T>>12|224:(y[S++]=T>>18|240,y[S++]=T>>12&63|128),y[S++]=T>>6&63|128),y[S++]=63&T|128)}return S}(this.buf,s,this.pos);var h=this.pos-c;h>=128&&Kw(c,h,this),this.pos=c-1,this.writeVarint(h),this.pos+=h},writeFloat:function(s){this.realloc(4),Eg(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),Eg(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var c=s.length;this.writeVarint(c),this.realloc(c);for(var h=0;h<c;h++)this.buf[this.pos++]=s[h]},writeRawMessage:function(s,c){this.pos++;var h=this.pos;s(c,this);var y=this.pos-h;y>=128&&Kw(h,y,this),this.pos=h-1,this.writeVarint(y),this.pos+=y},writeMessage:function(s,c,h){this.writeTag(s,Yr.Bytes),this.writeRawMessage(c,h)},writePackedVarint:function(s,c){c.length&&this.writeMessage(s,L_,c)},writePackedSVarint:function(s,c){c.length&&this.writeMessage(s,Xw,c)},writePackedBoolean:function(s,c){c.length&&this.writeMessage(s,Jw,c)},writePackedFloat:function(s,c){c.length&&this.writeMessage(s,XC,c)},writePackedDouble:function(s,c){c.length&&this.writeMessage(s,Ww,c)},writePackedFixed32:function(s,c){c.length&&this.writeMessage(s,Zw,c)},writePackedSFixed32:function(s,c){c.length&&this.writeMessage(s,kp,c)},writePackedFixed64:function(s,c){c.length&&this.writeMessage(s,Sg,c)},writePackedSFixed64:function(s,c){c.length&&this.writeMessage(s,tf,c)},writeBytesField:function(s,c){this.writeTag(s,Yr.Bytes),this.writeBytes(c)},writeFixed32Field:function(s,c){this.writeTag(s,Yr.Fixed32),this.writeFixed32(c)},writeSFixed32Field:function(s,c){this.writeTag(s,Yr.Fixed32),this.writeSFixed32(c)},writeFixed64Field:function(s,c){this.writeTag(s,Yr.Fixed64),this.writeFixed64(c)},writeSFixed64Field:function(s,c){this.writeTag(s,Yr.Fixed64),this.writeSFixed64(c)},writeVarintField:function(s,c){this.writeTag(s,Yr.Varint),this.writeVarint(c)},writeSVarintField:function(s,c){this.writeTag(s,Yr.Varint),this.writeSVarint(c)},writeStringField:function(s,c){this.writeTag(s,Yr.Bytes),this.writeString(c)},writeFloatField:function(s,c){this.writeTag(s,Yr.Fixed32),this.writeFloat(c)},writeDoubleField:function(s,c){this.writeTag(s,Yr.Fixed64),this.writeDouble(c)},writeBooleanField:function(s,c){this.writeVarintField(s,Boolean(c))}};var _h=function(s,c){var h=c.pixelRatio,y=c.version,x=c.stretchX,S=c.stretchY,T=c.content;this.paddedRect=s,this.pixelRatio=h,this.stretchX=x,this.stretchY=S,this.content=T,this.version=y},rf={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};rf.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},rf.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},rf.tlbr.get=function(){return this.tl.concat(this.br)},rf.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(_h.prototype,rf);var yh=function(s,c){var h={},y={};this.haveRenderCallbacks=[];var x=[];this.addImages(s,h,x),this.addImages(c,y,x);var S=Tg(x),T=new wo({width:S.w||1,height:S.h||1});for(var k in s){var q=s[k],$=h[k].paddedRect;wo.copy(q.data,T,{x:0,y:0},{x:$.x+1,y:$.y+1},q.data)}for(var Q in c){var re=c[Q],le=y[Q].paddedRect,_e=le.x+1,Ae=le.y+1,Oe=re.data.width,Ze=re.data.height;wo.copy(re.data,T,{x:0,y:0},{x:_e,y:Ae},re.data),wo.copy(re.data,T,{x:0,y:Ze-1},{x:_e,y:Ae-1},{width:Oe,height:1}),wo.copy(re.data,T,{x:0,y:0},{x:_e,y:Ae+Ze},{width:Oe,height:1}),wo.copy(re.data,T,{x:Oe-1,y:0},{x:_e-1,y:Ae},{width:1,height:Ze}),wo.copy(re.data,T,{x:0,y:0},{x:_e+Oe,y:Ae},{width:1,height:Ze})}this.image=T,this.iconPositions=h,this.patternPositions=y};yh.prototype.addImages=function(s,c,h){for(var y in s){var x=s[y],S={x:0,y:0,w:x.data.width+2,h:x.data.height+2};h.push(S),c[y]=new _h(S,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(y)}},yh.prototype.patchUpdatedImages=function(s,c){for(var h in s.dispatchRenderCallbacks(this.haveRenderCallbacks),s.updatedImages)this.patchUpdatedImage(this.iconPositions[h],s.getImage(h),c),this.patchUpdatedImage(this.patternPositions[h],s.getImage(h),c)},yh.prototype.patchUpdatedImage=function(s,c,h){if(s&&c&&s.version!==c.version){s.version=c.version;var y=s.tl;h.update(c.data,void 0,{x:y[0],y:y[1]})}},Yt("ImagePosition",_h),Yt("ImageAtlas",yh);var Ja={horizontal:1,vertical:2,horizontalOnly:3},of=function(){this.scale=1,this.fontStack="",this.imageName=null};of.forText=function(s,c){var h=new of;return h.scale=s||1,h.fontStack=c,h},of.forImage=function(s){var c=new of;return c.imageName=s,c};var Go=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Lp(s,c,h,y,x,S,T,k,q,$,Q,re,le,_e,Ae,Oe){var Ze,Ue=Go.fromFeature(s,x);re===Ja.vertical&&Ue.verticalizePunctuation();var nt=ci.processBidirectionalText,ot=ci.processStyledBidirectionalText;if(nt&&1===Ue.sections.length){Ze=[];for(var ct=0,ft=nt(Ue.toString(),j_(Ue,$,S,c,y,_e,Ae));ct<ft.length;ct+=1){var St=ft[ct],zt=new Go;zt.text=St,zt.sections=Ue.sections;for(var Ft=0;Ft<St.length;Ft++)zt.sectionIndex.push(0);Ze.push(zt)}}else if(ot){Ze=[];for(var an=0,Gt=ot(Ue.text,Ue.sectionIndex,j_(Ue,$,S,c,y,_e,Ae));an<Gt.length;an+=1){var un=Gt[an],$t=new Go;$t.text=un[0],$t.sectionIndex=un[1],$t.sections=Ue.sections,Ze.push($t)}}else Ze=function(rn,Wn){for(var kn=[],cr=rn.text,ln=0,tr=0,ii=Wn;tr<ii.length;tr+=1){var gi=ii[tr];kn.push(rn.substring(ln,gi)),ln=gi}return ln<cr.length&&kn.push(rn.substring(ln,cr.length)),kn}(Ue,j_(Ue,$,S,c,y,_e,Ae));var Nn=[],_n={positionedLines:Nn,text:Ue.toString(),top:Q[1],bottom:Q[1],left:Q[0],right:Q[0],writingMode:re,iconsInText:!1,verticalizable:!1};return function(rn,Wn,kn,cr,ln,tr,ii,gi,vi,Hr,Si,Hi){for(var $i=0,Eo=-17,Ki=0,So=0,fi="right"===gi?1:"left"===gi?0:.5,Bi=0,Qn=0,kr=ln;Qn<kr.length;Qn+=1){var Ir=kr[Qn];Ir.trim();var dr=Ir.getMaxScale(),oo=24*(dr-1),Co={positionedGlyphs:[],lineOffset:0};rn.positionedLines[Bi]=Co;var Qr=Co.positionedGlyphs,zi=0;if(Ir.length()){for(var To=0;To<Ir.length();To++){var _r=Ir.getSection(To),js=Ir.getSectionIndex(To),Aa=Ir.getCharCode(To),Cl=0,Ci=null,Mu=null,gs=null,mf=24,Zc=!(vi===Ja.horizontal||!Si&&!Mc(Aa)||Si&&(ru[Aa]||(Pl=Aa,Qt.Arabic(Pl)||Qt["Arabic Supplement"](Pl)||Qt["Arabic Extended-A"](Pl)||Qt["Arabic Presentation Forms-A"](Pl)||Qt["Arabic Presentation Forms-B"](Pl))));if(_r.imageName){var ba=cr[_r.imageName];if(!ba)continue;gs=_r.imageName,rn.iconsInText=rn.iconsInText||!0,Mu=ba.paddedRect;var Tl=ba.displaySize;_r.scale=24*_r.scale/Hi,Cl=oo+(24-Tl[1]*_r.scale),mf=(Ci={width:Tl[0],height:Tl[1],left:1,top:-3,advance:Zc?Tl[1]:Tl[0]}).advance;var Yc=Zc?Tl[0]*_r.scale-24*dr:Tl[1]*_r.scale-24*dr;Yc>0&&Yc>zi&&(zi=Yc)}else{var Gp=kn[_r.fontStack],gf=Gp&&Gp[Aa];if(gf&&gf.rect)Mu=gf.rect,Ci=gf.metrics;else{var Ph=Wn[_r.fontStack],Hp=Ph&&Ph[Aa];if(!Hp)continue;Ci=Hp.metrics}Cl=24*(dr-_r.scale)}Zc?(rn.verticalizable=!0,Qr.push({glyph:Aa,imageName:gs,x:$i,y:Eo+Cl,vertical:Zc,scale:_r.scale,fontStack:_r.fontStack,sectionIndex:js,metrics:Ci,rect:Mu}),$i+=mf*_r.scale+Hr):(Qr.push({glyph:Aa,imageName:gs,x:$i,y:Eo+Cl,vertical:Zc,scale:_r.scale,fontStack:_r.fontStack,sectionIndex:js,metrics:Ci,rect:Mu}),$i+=Ci.advance*_r.scale+Hr)}0!==Qr.length&&(Ki=Math.max($i-Hr,Ki),U_(Qr,0,Qr.length-1,fi,zi)),$i=0;var Ih=tr*dr+zi;Co.lineOffset=Math.max(zi,oo),Eo+=Ih,So=Math.max(Ih,So),++Bi}else Eo+=tr,++Bi}var Pl,Ah=Eo- -17,vf=F_(ii),Bn=vf.horizontalAlign,_f=vf.verticalAlign;(function(Rh,Dh,uc,Ra,Oh,kh,Qc,vs,yf){var ed,bf=(Dh-uc)*Oh;ed=kh!==Qc?-vs*Ra- -17:(-Ra*yf+.5)*Qc;for(var Mh=0,wf=Rh;Mh<wf.length;Mh+=1)for(var xf=0,lc=wf[Mh].positionedGlyphs;xf<lc.length;xf+=1){var Il=lc[xf];Il.x+=bf,Il.y+=ed}})(rn.positionedLines,fi,Bn,_f,Ki,So,tr,Ah,ln.length),rn.top+=-_f*Ah,rn.bottom=rn.top+Ah,rn.left+=-Bn*Ki,rn.right=rn.left+Ki}(_n,c,h,y,Ze,T,k,q,re,$,le,Oe),!function(rn){for(var Wn=0,kn=rn;Wn<kn.length;Wn+=1)if(0!==kn[Wn].positionedGlyphs.length)return!1;return!0}(Nn)&&_n}Go.fromFeature=function(s,c){for(var h=new Go,y=0;y<s.sections.length;y++){var x=s.sections[y];x.image?h.addImageSection(x):h.addTextSection(x,c)}return h},Go.prototype.length=function(){return this.text.length},Go.prototype.getSection=function(s){return this.sections[this.sectionIndex[s]]},Go.prototype.getSectionIndex=function(s){return this.sectionIndex[s]},Go.prototype.getCharCode=function(s){return this.text.charCodeAt(s)},Go.prototype.verticalizePunctuation=function(){this.text=function(s){for(var c="",h=0;h<s.length;h++){var y=s.charCodeAt(h+1)||null,x=s.charCodeAt(h-1)||null;c+=y&&Ga(y)&&!Hc[s[h+1]]||x&&Ga(x)&&!Hc[s[h-1]]||!Hc[s[h]]?s[h]:Hc[s[h]]}return c}(this.text)},Go.prototype.trim=function(){for(var s=0,c=0;c<this.text.length&&ru[this.text.charCodeAt(c)];c++)s++;for(var h=this.text.length,y=this.text.length-1;y>=0&&y>=s&&ru[this.text.charCodeAt(y)];y--)h--;this.text=this.text.substring(s,h),this.sectionIndex=this.sectionIndex.slice(s,h)},Go.prototype.substring=function(s,c){var h=new Go;return h.text=this.text.substring(s,c),h.sectionIndex=this.sectionIndex.slice(s,c),h.sections=this.sections,h},Go.prototype.toString=function(){return this.text},Go.prototype.getMaxScale=function(){var s=this;return this.sectionIndex.reduce(function(c,h){return Math.max(c,s.sections[h].scale)},0)},Go.prototype.addTextSection=function(s,c){this.text+=s.text,this.sections.push(of.forText(s.scale,s.fontStack||c));for(var h=this.sections.length-1,y=0;y<s.text.length;++y)this.sectionIndex.push(h)},Go.prototype.addImageSection=function(s){var c=s.image?s.image.name:"";if(0!==c.length){var h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(of.forImage(c)),this.sectionIndex.push(this.sections.length-1)):D("Reached maximum number of images 6401")}else D("Can't add FormattedSection with an empty image.")},Go.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var ru={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},xo={};function z_(s,c,h,y,x,S){if(c.imageName){var T=y[c.imageName];return T?T.displaySize[0]*c.scale*24/S+x:0}var k=h[c.fontStack],q=k&&k[s];return q?q.metrics.advance*c.scale+x:0}function Qw(s,c,h,y){var x=Math.pow(s-c,2);return y?s<c?x/2:2*x:x+Math.abs(h)*h}function WC(s,c,h){var y=0;return 10===s&&(y-=1e4),h&&(y+=150),40!==s&&65288!==s||(y+=50),41!==c&&65289!==c||(y+=50),y}function e1(s,c,h,y,x,S){for(var T=null,k=Qw(c,h,x,S),q=0,$=y;q<$.length;q+=1){var Q=$[q],re=Qw(c-Q.x,h,x,S)+Q.badness;re<=k&&(T=Q,k=re)}return{index:s,x:c,priorBreak:T,badness:k}}function j_(s,c,h,y,x,S,T){if("point"!==S)return[];if(!s)return[];for(var k,q=[],$=function(Ze,Ue,nt,ot,ct,ft){for(var St=0,zt=0;zt<Ze.length();zt++){var Ft=Ze.getSection(zt);St+=z_(Ze.getCharCode(zt),Ft,ot,ct,Ue,ft)}return St/Math.max(1,Math.ceil(St/nt))}(s,c,h,y,x,T),Q=s.text.indexOf("\u200b")>=0,re=0,le=0;le<s.length();le++){var _e=s.getSection(le),Ae=s.getCharCode(le);if(ru[Ae]||(re+=z_(Ae,_e,y,x,c,T)),le<s.length()-1){var Oe=!((k=Ae)<11904||!(Qt["Bopomofo Extended"](k)||Qt.Bopomofo(k)||Qt["CJK Compatibility Forms"](k)||Qt["CJK Compatibility Ideographs"](k)||Qt["CJK Compatibility"](k)||Qt["CJK Radicals Supplement"](k)||Qt["CJK Strokes"](k)||Qt["CJK Symbols and Punctuation"](k)||Qt["CJK Unified Ideographs Extension A"](k)||Qt["CJK Unified Ideographs"](k)||Qt["Enclosed CJK Letters and Months"](k)||Qt["Halfwidth and Fullwidth Forms"](k)||Qt.Hiragana(k)||Qt["Ideographic Description Characters"](k)||Qt["Kangxi Radicals"](k)||Qt["Katakana Phonetic Extensions"](k)||Qt.Katakana(k)||Qt["Vertical Forms"](k)||Qt["Yi Radicals"](k)||Qt["Yi Syllables"](k)));(xo[Ae]||Oe||_e.imageName)&&q.push(e1(le+1,re,$,q,WC(Ae,s.getCharCode(le+1),Oe&&Q),!1))}}return function Ze(Ue){return Ue?Ze(Ue.priorBreak).concat(Ue.index):[]}(e1(s.length(),re,$,q,0,!0))}function F_(s){var c=.5,h=.5;switch(s){case"right":case"top-right":case"bottom-right":c=1;break;case"left":case"top-left":case"bottom-left":c=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:c,verticalAlign:h}}function U_(s,c,h,y,x){if(y||x)for(var S=s[h],T=(s[h].x+S.metrics.advance*S.scale)*y,k=c;k<=h;k++)s[k].x-=T,s[k].y+=x}function q_(s,c,h,y,x,S){var T,k=s.image;if(k.content){var q=k.content,$=k.pixelRatio||1;T=[q[0]/$,q[1]/$,k.displaySize[0]-q[2]/$,k.displaySize[1]-q[3]/$]}var Q,re,le,_e,Ae=c.left*S,Oe=c.right*S;"width"===h||"both"===h?(_e=x[0]+Ae-y[3],re=x[0]+Oe+y[1]):re=(_e=x[0]+(Ae+Oe-k.displaySize[0])/2)+k.displaySize[0];var Ze=c.top*S,Ue=c.bottom*S;return"height"===h||"both"===h?(Q=x[1]+Ze-y[0],le=x[1]+Ue+y[2]):le=(Q=x[1]+(Ze+Ue-k.displaySize[1])/2)+k.displaySize[1],{image:k,top:Q,right:re,bottom:le,left:_e,collisionPadding:T}}xo[10]=!0,xo[32]=!0,xo[38]=!0,xo[40]=!0,xo[41]=!0,xo[43]=!0,xo[45]=!0,xo[47]=!0,xo[173]=!0,xo[183]=!0,xo[8203]=!0,xo[8208]=!0,xo[8211]=!0,xo[8231]=!0;var af=function(s){function c(h,y,x,S){s.call(this,h,y),this.angle=x,void 0!==S&&(this.segment=S)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.clone=function(){return new c(this.x,this.y,this.angle,this.segment)},c}(M);function Pg(s,c){var h=c.expression;if("constant"===h.kind)return{kind:"constant",layoutSize:h.evaluate(new Er(s+1))};if("source"===h.kind)return{kind:"source"};for(var y=h.zoomStops,x=h.interpolationType,S=0;S<y.length&&y[S]<=s;)S++;for(var T=S=Math.max(0,S-1);T<y.length&&y[T]<s+1;)T++;T=Math.min(y.length-1,T);var k=y[S],q=y[T];return"composite"===h.kind?{kind:"composite",minZoom:k,maxZoom:q,interpolationType:x}:{kind:"camera",minZoom:k,maxZoom:q,minSize:h.evaluate(new Er(k)),maxSize:h.evaluate(new Er(q)),interpolationType:x}}function V_(s,c,h){var y=c.uSize,x=h.lowerSize;return"source"===s.kind?x/128:"composite"===s.kind?ki(x/128,h.upperSize/128,c.uSizeT):y}function t1(s,c){var h=0,y=0;if("constant"===s.kind)y=s.layoutSize;else if("source"!==s.kind){var x=s.interpolationType,S=x?fe(po.interpolationFactor(x,c,s.minZoom,s.maxZoom),0,1):0;"camera"===s.kind?y=ki(s.minSize,s.maxSize,S):h=S}return{uSizeT:h,uSize:y}}Yt("Anchor",af);var n1=Object.freeze({__proto__:null,getSizeData:Pg,evaluateSizeForFeature:V_,evaluateSizeForZoom:t1,SIZE_PACK_FACTOR:128});function bh(s,c,h,y,x){if(void 0===c.segment)return!0;for(var S=c,T=c.segment+1,k=0;k>-h/2;){if(--T<0)return!1;k-=s[T].dist(S),S=s[T]}k+=s[T].dist(s[T+1]),T++;for(var q=[],$=0;k<h/2;){var Q=s[T],re=s[T+1];if(!re)return!1;var le=s[T-1].angleTo(Q)-Q.angleTo(re);for(le=Math.abs((le+3*Math.PI)%(2*Math.PI)-Math.PI),q.push({distance:k,angleDelta:le}),$+=le;k-q[0].distance>y;)$-=q.shift().angleDelta;if($>x)return!1;T++,k+=Q.dist(re)}return!0}function Ig(s){for(var c=0,h=0;h<s.length-1;h++)c+=s[h].dist(s[h+1]);return c}function iu(s,c,h){return s?.6*c*h:0}function sf(s,c){return Math.max(s?s.right-s.left:0,c?c.right-c.left:0)}function G_(s,c,h,y,x,S){for(var T=iu(h,x,S),k=sf(h,y)*S,q=0,$=Ig(s)/2,Q=0;Q<s.length-1;Q++){var re=s[Q],le=s[Q+1],_e=re.dist(le);if(q+_e>$){var Ae=($-q)/_e,Oe=ki(re.x,le.x,Ae),Ze=ki(re.y,le.y,Ae),Ue=new af(Oe,Ze,le.angleTo(re),Q);return Ue._round(),!T||bh(s,Ue,k,T,c)?Ue:void 0}q+=_e}}function H_(s,c,h,y,x,S,T,k,q){var $=iu(y,S,T),Q=sf(y,x),re=Q*T,le=0===s[0].x||s[0].x===q||0===s[0].y||s[0].y===q;return c-re<c/4&&(c=re+c/4),function _e(Ae,Oe,Ze,Ue,nt,ot,ct,ft,St){for(var zt=ot/2,Ft=Ig(Ae),an=0,Gt=Oe-Ze,un=[],$t=0;$t<Ae.length-1;$t++){for(var Nn=Ae[$t],_n=Ae[$t+1],rn=Nn.dist(_n),Wn=_n.angleTo(Nn);Gt+Ze<an+rn;){var kn=((Gt+=Ze)-an)/rn,cr=ki(Nn.x,_n.x,kn),ln=ki(Nn.y,_n.y,kn);if(cr>=0&&cr<St&&ln>=0&&ln<St&&Gt-zt>=0&&Gt+zt<=Ft){var tr=new af(cr,ln,Wn,$t);tr._round(),Ue&&!bh(Ae,tr,ot,Ue,nt)||un.push(tr)}}an+=rn}return ft||un.length||ct||(un=_e(Ae,an/2,Ze,Ue,nt,ot,ct,!0,St)),un}(s,le?c/2*k%c:(Q/2+2*S)*T*k%c,c,$,h,re,le,!1,q)}function Ag(s,c,h,y,x){for(var S=[],T=0;T<s.length;T++)for(var k=s[T],q=void 0,$=0;$<k.length-1;$++){var Q=k[$],re=k[$+1];Q.x<c&&re.x<c||(Q.x<c?Q=new M(c,Q.y+(c-Q.x)/(re.x-Q.x)*(re.y-Q.y))._round():re.x<c&&(re=new M(c,Q.y+(c-Q.x)/(re.x-Q.x)*(re.y-Q.y))._round()),Q.y<h&&re.y<h||(Q.y<h?Q=new M(Q.x+(h-Q.y)/(re.y-Q.y)*(re.x-Q.x),h)._round():re.y<h&&(re=new M(Q.x+(h-Q.y)/(re.y-Q.y)*(re.x-Q.x),h)._round()),Q.x>=y&&re.x>=y||(Q.x>=y?Q=new M(y,Q.y+(y-Q.x)/(re.x-Q.x)*(re.y-Q.y))._round():re.x>=y&&(re=new M(y,Q.y+(y-Q.x)/(re.x-Q.x)*(re.y-Q.y))._round()),Q.y>=x&&re.y>=x||(Q.y>=x?Q=new M(Q.x+(x-Q.y)/(re.y-Q.y)*(re.x-Q.x),x)._round():re.y>=x&&(re=new M(Q.x+(x-Q.y)/(re.y-Q.y)*(re.x-Q.x),x)._round()),q&&Q.equals(q[q.length-1])||S.push(q=[Q]),q.push(re)))))}return S}function r1(s,c,h,y){var x=[],S=s.image,T=S.pixelRatio,k=S.paddedRect.w-2,q=S.paddedRect.h-2,$=s.right-s.left,Q=s.bottom-s.top,re=S.stretchX||[[0,k]],le=S.stretchY||[[0,q]],_e=function(cr,ln){return cr+ln[1]-ln[0]},Ae=re.reduce(_e,0),Oe=le.reduce(_e,0),Ze=k-Ae,Ue=q-Oe,nt=0,ot=Ae,ct=0,ft=Oe,St=0,zt=Ze,Ft=0,an=Ue;if(S.content&&y){var Gt=S.content;nt=Rg(re,0,Gt[0]),ct=Rg(le,0,Gt[1]),ot=Rg(re,Gt[0],Gt[2]),ft=Rg(le,Gt[1],Gt[3]),St=Gt[0]-nt,Ft=Gt[1]-ct,zt=Gt[2]-Gt[0]-ot,an=Gt[3]-Gt[1]-ft}var un=function(cr,ln,tr,ii){var gi=uf(cr.stretch-nt,ot,$,s.left),vi=lf(cr.fixed-St,zt,cr.stretch,Ae),Hr=uf(ln.stretch-ct,ft,Q,s.top),Si=lf(ln.fixed-Ft,an,ln.stretch,Oe),Hi=uf(tr.stretch-nt,ot,$,s.left),$i=lf(tr.fixed-St,zt,tr.stretch,Ae),Eo=uf(ii.stretch-ct,ft,Q,s.top),Ki=lf(ii.fixed-Ft,an,ii.stretch,Oe),So=new M(gi,Hr),fi=new M(Hi,Hr),Bi=new M(Hi,Eo),Qn=new M(gi,Eo),kr=new M(vi/T,Si/T),Ir=new M($i/T,Ki/T),dr=c*Math.PI/180;if(dr){var oo=Math.sin(dr),Co=Math.cos(dr),Qr=[Co,-oo,oo,Co];So._matMult(Qr),fi._matMult(Qr),Qn._matMult(Qr),Bi._matMult(Qr)}var zi=cr.stretch+cr.fixed,To=ln.stretch+ln.fixed;return{tl:So,tr:fi,bl:Qn,br:Bi,tex:{x:S.paddedRect.x+1+zi,y:S.paddedRect.y+1+To,w:tr.stretch+tr.fixed-zi,h:ii.stretch+ii.fixed-To},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:kr,pixelOffsetBR:Ir,minFontScaleX:zt/T/$,minFontScaleY:an/T/Q,isSDF:h}};if(y&&(S.stretchX||S.stretchY))for(var $t=i1(re,Ze,Ae),Nn=i1(le,Ue,Oe),_n=0;_n<$t.length-1;_n++)for(var rn=$t[_n],Wn=$t[_n+1],kn=0;kn<Nn.length-1;kn++)x.push(un(rn,Nn[kn],Wn,Nn[kn+1]));else x.push(un({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:k+1},{fixed:0,stretch:q+1}));return x}function Rg(s,c,h){for(var y=0,x=0,S=s;x<S.length;x+=1){var T=S[x];y+=Math.max(c,Math.min(h,T[1]))-Math.max(c,Math.min(h,T[0]))}return y}function i1(s,c,h){for(var y=[{fixed:-1,stretch:0}],x=0,S=s;x<S.length;x+=1){var T=S[x],k=T[0],q=T[1],$=y[y.length-1];y.push({fixed:k-$.stretch,stretch:$.stretch}),y.push({fixed:k-$.stretch,stretch:$.stretch+(q-k)})}return y.push({fixed:c+1,stretch:h}),y}function uf(s,c,h,y){return s/c*h+y}function lf(s,c,h,y){return s-c*h/y}var cf=function(s,c,h,y,x,S,T,k,q,$){if(this.boxStartIndex=s.length,q){var Q=S.top,re=S.bottom,le=S.collisionPadding;le&&(Q-=le[1],re+=le[3]);var _e=re-Q;_e>0&&(_e=Math.max(10,_e),this.circleDiameter=_e)}else{var Ae=S.top*T-k,Oe=S.bottom*T+k,Ze=S.left*T-k,Ue=S.right*T+k,nt=S.collisionPadding;if(nt&&(Ze-=nt[0]*T,Ae-=nt[1]*T,Ue+=nt[2]*T,Oe+=nt[3]*T),$){var ot=new M(Ze,Ae),ct=new M(Ue,Ae),ft=new M(Ze,Oe),St=new M(Ue,Oe),zt=$*Math.PI/180;ot._rotate(zt),ct._rotate(zt),ft._rotate(zt),St._rotate(zt),Ze=Math.min(ot.x,ct.x,ft.x,St.x),Ue=Math.max(ot.x,ct.x,ft.x,St.x),Ae=Math.min(ot.y,ct.y,ft.y,St.y),Oe=Math.max(ot.y,ct.y,ft.y,St.y)}s.emplaceBack(c.x,c.y,Ze,Ae,Ue,Oe,h,y,x)}this.boxEndIndex=s.length},wh=function(s,c){if(void 0===s&&(s=[]),void 0===c&&(c=JC),this.data=s,this.length=this.data.length,this.compare=c,this.length>0)for(var h=(this.length>>1)-1;h>=0;h--)this._down(h)};function JC(s,c){return s<c?-1:s>c?1:0}function $_(s,c,h){void 0===c&&(c=1),void 0===h&&(h=!1);for(var y=1/0,x=1/0,S=-1/0,T=-1/0,k=s[0],q=0;q<k.length;q++){var $=k[q];(!q||$.x<y)&&(y=$.x),(!q||$.y<x)&&(x=$.y),(!q||$.x>S)&&(S=$.x),(!q||$.y>T)&&(T=$.y)}var Q=Math.min(S-y,T-x),re=Q/2,le=new wh([],o1);if(0===Q)return new M(y,x);for(var _e=y;_e<S;_e+=Q)for(var Ae=x;Ae<T;Ae+=Q)le.push(new df(_e+re,Ae+re,re,s));for(var Oe=function(nt){for(var ot=0,ct=0,ft=0,St=nt[0],zt=0,Ft=St.length,an=Ft-1;zt<Ft;an=zt++){var Gt=St[zt],un=St[an],$t=Gt.x*un.y-un.x*Gt.y;ct+=(Gt.x+un.x)*$t,ft+=(Gt.y+un.y)*$t,ot+=3*$t}return new df(ct/ot,ft/ot,0,nt)}(s),Ze=le.length;le.length;){var Ue=le.pop();(Ue.d>Oe.d||!Oe.d)&&(Oe=Ue,h&&console.log("found best %d after %d probes",Math.round(1e4*Ue.d)/1e4,Ze)),Ue.max-Oe.d<=c||(le.push(new df(Ue.p.x-(re=Ue.h/2),Ue.p.y-re,re,s)),le.push(new df(Ue.p.x+re,Ue.p.y-re,re,s)),le.push(new df(Ue.p.x-re,Ue.p.y+re,re,s)),le.push(new df(Ue.p.x+re,Ue.p.y+re,re,s)),Ze+=4)}return h&&(console.log("num probes: "+Ze),console.log("best distance: "+Oe.d)),Oe.p}function o1(s,c){return c.max-s.max}function df(s,c,h,y){this.p=new M(s,c),this.h=h,this.d=function(x,S){for(var T=!1,k=1/0,q=0;q<S.length;q++)for(var $=S[q],Q=0,re=$.length,le=re-1;Q<re;le=Q++){var _e=$[Q],Ae=$[le];_e.y>x.y!=Ae.y>x.y&&x.x<(Ae.x-_e.x)*(x.y-_e.y)/(Ae.y-_e.y)+_e.x&&(T=!T),k=Math.min(k,Ls(x,_e,Ae))}return(T?1:-1)*Math.sqrt(k)}(this.p,y),this.max=this.d+this.h*Math.SQRT2}wh.prototype.push=function(s){this.data.push(s),this.length++,this._up(this.length-1)},wh.prototype.pop=function(){if(0!==this.length){var s=this.data[0],c=this.data.pop();return this.length--,this.length>0&&(this.data[0]=c,this._down(0)),s}},wh.prototype.peek=function(){return this.data[0]},wh.prototype._up=function(s){for(var c=this.data,h=this.compare,y=c[s];s>0;){var x=s-1>>1,S=c[x];if(h(y,S)>=0)break;c[s]=S,s=x}c[s]=y},wh.prototype._down=function(s){for(var c=this.data,h=this.compare,y=this.length>>1,x=c[s];s<y;){var S=1+(s<<1),T=c[S],k=S+1;if(k<this.length&&h(c[k],T)<0&&(S=k,T=c[k]),h(T,x)>=0)break;c[s]=T,s=S}c[s]=x};var Dg=Number.POSITIVE_INFINITY;function K_(s,c){return c[1]!==Dg?function(h,y,x){var S=0,T=0;switch(y=Math.abs(y),x=Math.abs(x),h){case"top-right":case"top-left":case"top":T=x-7;break;case"bottom-right":case"bottom-left":case"bottom":T=7-x}switch(h){case"top-right":case"bottom-right":case"right":S=-y;break;case"top-left":case"bottom-left":case"left":S=y}return[S,T]}(s,c[0],c[1]):function(h,y){var x=0,S=0;y<0&&(y=0);var T=y/Math.sqrt(2);switch(h){case"top-right":case"top-left":S=T-7;break;case"bottom-right":case"bottom-left":S=7-T;break;case"bottom":S=7-y;break;case"top":S=y-7}switch(h){case"top-right":case"bottom-right":x=-T;break;case"top-left":case"bottom-left":x=T;break;case"left":x=y;break;case"right":x=-y}return[x,S]}(s,c[0])}function Bp(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function xh(s,c,h,y,x,S,T,k,q,$,Q,re,le,_e,Ae){var Oe=function(ct,ft,St,zt,Ft,an,Gt,un){for(var $t=zt.layout.get("text-rotate").evaluate(an,{})*Math.PI/180,Nn=[],_n=0,rn=ft.positionedLines;_n<rn.length;_n+=1)for(var Wn=rn[_n],kn=0,cr=Wn.positionedGlyphs;kn<cr.length;kn+=1){var ln=cr[kn];if(ln.rect){var tr=ln.rect||{},ii=4,gi=!0,vi=1,Hr=0,Si=(Ft||un)&&ln.vertical,Hi=ln.metrics.advance*ln.scale/2;if(un&&ft.verticalizable&&(Hr=Wn.lineOffset/2-(ln.imageName?-(24-ln.metrics.width*ln.scale)/2:24*(ln.scale-1))),ln.imageName){var $i=Gt[ln.imageName];gi=$i.sdf,ii=1/(vi=$i.pixelRatio)}var Eo=Ft?[ln.x+Hi,ln.y]:[0,0],Ki=Ft?[0,0]:[ln.x+Hi+St[0],ln.y+St[1]-Hr],So=[0,0];Si&&(So=Ki,Ki=[0,0]);var fi=(ln.metrics.left-ii)*ln.scale-Hi+Ki[0],Bi=(-ln.metrics.top-ii)*ln.scale+Ki[1],Qn=fi+tr.w*ln.scale/vi,kr=Bi+tr.h*ln.scale/vi,Ir=new M(fi,Bi),dr=new M(Qn,Bi),oo=new M(fi,kr),Co=new M(Qn,kr);if(Si){var Qr=new M(-Hi,Hi- -17),zi=-Math.PI/2,To=12-Hi,_r=new M(22-To,-(ln.imageName?To:0)),js=new(Function.prototype.bind.apply(M,[null].concat(So)));Ir._rotateAround(zi,Qr)._add(_r)._add(js),dr._rotateAround(zi,Qr)._add(_r)._add(js),oo._rotateAround(zi,Qr)._add(_r)._add(js),Co._rotateAround(zi,Qr)._add(_r)._add(js)}if($t){var Aa=Math.sin($t),Cl=Math.cos($t),Ci=[Cl,-Aa,Aa,Cl];Ir._matMult(Ci),dr._matMult(Ci),oo._matMult(Ci),Co._matMult(Ci)}var Mu=new M(0,0),gs=new M(0,0);Nn.push({tl:Ir,tr:dr,bl:oo,br:Co,tex:tr,writingMode:ft.writingMode,glyphOffset:Eo,sectionIndex:ln.sectionIndex,isSDF:gi,pixelOffsetTL:Mu,pixelOffsetBR:gs,minFontScaleX:0,minFontScaleY:0})}}return Nn}(0,h,k,x,S,T,y,s.allowVerticalPlacement),Ze=s.textSizeData,Ue=null;"source"===Ze.kind?(Ue=[128*x.layout.get("text-size").evaluate(T,{})])[0]>32640&&D(s.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===Ze.kind&&((Ue=[128*_e.compositeTextSizes[0].evaluate(T,{},Ae),128*_e.compositeTextSizes[1].evaluate(T,{},Ae)])[0]>32640||Ue[1]>32640)&&D(s.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),s.addSymbols(s.text,Oe,Ue,k,S,T,$,c,q.lineStartIndex,q.lineLength,le,Ae);for(var nt=0,ot=Q;nt<ot.length;nt+=1)re[ot[nt]]=s.text.placedSymbolArray.length-1;return 4*Oe.length}function X_(s){for(var c in s)return s[c];return null}function Og(s,c,h,y){var x=s.compareText;if(c in x){for(var S=x[c],T=S.length-1;T>=0;T--)if(y.dist(S[T])<h)return!0}else x[c]=[];return x[c].push(y),!1}var a1=xl.VectorTileFeature.types,co=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function zp(s,c,h,y,x,S,T,k,q,$,Q,re,le){var _e=k?Math.min(32640,Math.round(k[0])):0,Ae=k?Math.min(32640,Math.round(k[1])):0;s.emplaceBack(c,h,Math.round(32*y),Math.round(32*x),S,T,(_e<<1)+(q?1:0),Ae,16*$,16*Q,256*re,256*le)}function kg(s,c,h){s.emplaceBack(c.x,c.y,h),s.emplaceBack(c.x,c.y,h),s.emplaceBack(c.x,c.y,h),s.emplaceBack(c.x,c.y,h)}function Mg(s){for(var c=0,h=s.sections;c<h.length;c+=1)if(ah(h[c].text))return!0;return!1}var Kc=function(s){this.layoutVertexArray=new pl,this.indexArray=new va,this.programConfigurations=s,this.segments=new Ee,this.dynamicLayoutVertexArray=new Bc,this.opacityVertexArray=new lh,this.placedSymbolArray=new C};Kc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},Kc.prototype.upload=function(s,c,h,y){this.isEmpty()||(h&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Dp.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,oc.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,co,!0),this.opacityVertexBuffer.itemSize=1),(h||y)&&this.programConfigurations.upload(s))},Kc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Yt("SymbolBuffers",Kc);var Eh=function(s,c,h){this.layoutVertexArray=new s,this.layoutAttributes=c,this.indexArray=new h,this.segments=new Ee,this.collisionVertexArray=new Vi};Eh.prototype.upload=function(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,M_.members,!0)},Eh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Yt("CollisionBuffers",Eh);var Lr=function(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(function(S){return S.id}),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Zi([]),this.placementViewportMatrix=Zi([]);var c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Pg(this.zoom,c["text-size"]),this.iconSizeData=Pg(this.zoom,c["icon-size"]);var h=this.layers[0].layout,y=h.get("symbol-sort-key"),x=h.get("symbol-z-order");this.canOverlap=h.get("text-allow-overlap")||h.get("icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==x&&!y.isConstant(),this.sortFeaturesByY=("viewport-y"===x||"auto"===x&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===h.get("symbol-placement")&&(this.writingModes=h.get("text-writing-mode").map(function(S){return Ja[S]})),this.stateDependentLayerIds=this.layers.filter(function(S){return S.isStateDependent()}).map(function(S){return S.id}),this.sourceID=s.sourceID};Lr.prototype.createArrays=function(){this.text=new Kc(new vr(this.layers,this.zoom,function(s){return/^text/.test(s)})),this.icon=new Kc(new vr(this.layers,this.zoom,function(s){return/^icon/.test(s)})),this.glyphOffsetArray=new F,this.lineVertexArray=new Y,this.symbolInstances=new O},Lr.prototype.calculateGlyphDependencies=function(s,c,h,y,x){for(var S=0;S<s.length;S++)if(c[s.charCodeAt(S)]=!0,(h||y)&&x){var T=Hc[s.charAt(S)];T&&(c[T.charCodeAt(0)]=!0)}},Lr.prototype.populate=function(s,c,h){var y=this.layers[0],x=y.layout,S=x.get("text-font"),T=x.get("text-field"),k=x.get("icon-image"),q=("constant"!==T.value.kind||T.value.value instanceof Ui&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&("constant"!==S.value.kind||S.value.value.length>0),$="constant"!==k.value.kind||!!k.value.value||Object.keys(k.parameters).length>0,Q=x.get("symbol-sort-key");if(this.features=[],q||$){for(var re=c.iconDependencies,le=c.glyphDependencies,_e=c.availableImages,Ae=new Er(this.zoom),Oe=0,Ze=s;Oe<Ze.length;Oe+=1){var Ue=Ze[Oe],nt=Ue.feature,ot=Ue.id,ct=Ue.index,ft=Ue.sourceLayerIndex,St=y._featureFilter.needGeometry,zt=bo(nt,St);if(y._featureFilter.filter(Ae,zt,h)){St||(zt.geometry=mi(nt));var Ft=void 0;if(q){var an=y.getValueAndResolveTokens("text-field",zt,h,_e),Gt=Ui.factory(an);Mg(Gt)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Ca()||this.hasRTLText&&ci.isParsed())&&(Ft=N_(Gt,y,zt))}var un=void 0;if($){var $t=y.getValueAndResolveTokens("icon-image",zt,h,_e);un=$t instanceof ur?$t:ur.fromString($t)}if(Ft||un){var Nn=this.sortFeaturesByKey?Q.evaluate(zt,{},h):void 0;if(this.features.push({id:ot,text:Ft,icon:un,index:ct,sourceLayerIndex:ft,geometry:zt.geometry,properties:nt.properties,type:a1[nt.type],sortKey:Nn}),un&&(re[un.name]=!0),Ft){var _n=S.evaluate(zt,{},h).join(","),rn="map"===x.get("text-rotation-alignment")&&"point"!==x.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ja.vertical)>=0;for(var Wn=0,kn=Ft.sections;Wn<kn.length;Wn+=1){var cr=kn[Wn];if(cr.image)re[cr.image.name]=!0;else{var ln=Ms(Ft.toString()),tr=cr.fontStack||_n,ii=le[tr]=le[tr]||{};this.calculateGlyphDependencies(cr.text,ii,rn,this.allowVerticalPlacement,ln)}}}}}}"line"===x.get("symbol-placement")&&(this.features=function(gi){var vi={},Hr={},Si=[],Hi=0;function $i(Qr){Si.push(gi[Qr]),Hi++}function Eo(Qr,zi,To){var _r=Hr[Qr];return delete Hr[Qr],Hr[zi]=_r,Si[_r].geometry[0].pop(),Si[_r].geometry[0]=Si[_r].geometry[0].concat(To[0]),_r}function Ki(Qr,zi,To){var _r=vi[zi];return delete vi[zi],vi[Qr]=_r,Si[_r].geometry[0].shift(),Si[_r].geometry[0]=To[0].concat(Si[_r].geometry[0]),_r}function So(Qr,zi,To){var _r=To?zi[0][zi[0].length-1]:zi[0][0];return Qr+":"+_r.x+":"+_r.y}for(var fi=0;fi<gi.length;fi++){var Bi=gi[fi],Qn=Bi.geometry,kr=Bi.text?Bi.text.toString():null;if(kr){var Ir=So(kr,Qn),dr=So(kr,Qn,!0);if(Ir in Hr&&dr in vi&&Hr[Ir]!==vi[dr]){var oo=Ki(Ir,dr,Qn),Co=Eo(Ir,dr,Si[oo].geometry);delete vi[Ir],delete Hr[dr],Hr[So(kr,Si[Co].geometry,!0)]=Co,Si[oo].geometry=null}else Ir in Hr?Eo(Ir,dr,Qn):dr in vi?Ki(Ir,dr,Qn):($i(fi),vi[Ir]=Hi-1,Hr[dr]=Hi-1)}else $i(fi)}return Si.filter(function(Qr){return Qr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(gi,vi){return gi.sortKey-vi.sortKey})}},Lr.prototype.update=function(s,c,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,c,this.layers,h),this.icon.programConfigurations.updatePaintArrays(s,c,this.layers,h))},Lr.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},Lr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Lr.prototype.upload=function(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Lr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Lr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Lr.prototype.addToLineVertexArray=function(s,c){var h=this.lineVertexArray.length;if(void 0!==s.segment){for(var y=s.dist(c[s.segment+1]),x=s.dist(c[s.segment]),S={},T=s.segment+1;T<c.length;T++)S[T]={x:c[T].x,y:c[T].y,tileUnitDistanceFromAnchor:y},T<c.length-1&&(y+=c[T+1].dist(c[T]));for(var k=s.segment||0;k>=0;k--)S[k]={x:c[k].x,y:c[k].y,tileUnitDistanceFromAnchor:x},k>0&&(x+=c[k-1].dist(c[k]));for(var q=0;q<c.length;q++){var $=S[q];this.lineVertexArray.emplaceBack($.x,$.y,$.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}},Lr.prototype.addSymbols=function(s,c,h,y,x,S,T,k,q,$,Q,re){for(var le=s.indexArray,_e=s.layoutVertexArray,Ae=s.segments.prepareSegment(4*c.length,_e,le,this.canOverlap?S.sortKey:void 0),Oe=this.glyphOffsetArray.length,Ze=Ae.vertexLength,Ue=this.allowVerticalPlacement&&T===Ja.vertical?Math.PI/2:0,nt=S.text&&S.text.sections,ot=0;ot<c.length;ot++){var ct=c[ot],ft=ct.tl,St=ct.tr,zt=ct.bl,Ft=ct.br,an=ct.tex,Gt=ct.pixelOffsetTL,un=ct.pixelOffsetBR,$t=ct.minFontScaleX,Nn=ct.minFontScaleY,_n=ct.glyphOffset,rn=ct.isSDF,Wn=ct.sectionIndex,kn=Ae.vertexLength,cr=_n[1];zp(_e,k.x,k.y,ft.x,cr+ft.y,an.x,an.y,h,rn,Gt.x,Gt.y,$t,Nn),zp(_e,k.x,k.y,St.x,cr+St.y,an.x+an.w,an.y,h,rn,un.x,Gt.y,$t,Nn),zp(_e,k.x,k.y,zt.x,cr+zt.y,an.x,an.y+an.h,h,rn,Gt.x,un.y,$t,Nn),zp(_e,k.x,k.y,Ft.x,cr+Ft.y,an.x+an.w,an.y+an.h,h,rn,un.x,un.y,$t,Nn),kg(s.dynamicLayoutVertexArray,k,Ue),le.emplaceBack(kn,kn+1,kn+2),le.emplaceBack(kn+1,kn+2,kn+3),Ae.vertexLength+=4,Ae.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(_n[0]),ot!==c.length-1&&Wn===c[ot+1].sectionIndex||s.programConfigurations.populatePaintArrays(_e.length,S,S.index,{},re,nt&&nt[Wn])}s.placedSymbolArray.emplaceBack(k.x,k.y,Oe,this.glyphOffsetArray.length-Oe,Ze,q,$,k.segment,h?h[0]:0,h?h[1]:0,y[0],y[1],T,0,!1,0,Q)},Lr.prototype._addCollisionDebugVertex=function(s,c,h,y,x,S){return c.emplaceBack(0,0),s.emplaceBack(h.x,h.y,y,x,Math.round(S.x),Math.round(S.y))},Lr.prototype.addCollisionDebugVertices=function(s,c,h,y,x,S,T){var k=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),q=k.vertexLength,$=x.layoutVertexArray,Q=x.collisionVertexArray,re=T.anchorX,le=T.anchorY;this._addCollisionDebugVertex($,Q,S,re,le,new M(s,c)),this._addCollisionDebugVertex($,Q,S,re,le,new M(h,c)),this._addCollisionDebugVertex($,Q,S,re,le,new M(h,y)),this._addCollisionDebugVertex($,Q,S,re,le,new M(s,y)),k.vertexLength+=4;var _e=x.indexArray;_e.emplaceBack(q,q+1),_e.emplaceBack(q+1,q+2),_e.emplaceBack(q+2,q+3),_e.emplaceBack(q+3,q),k.primitiveLength+=4},Lr.prototype.addDebugCollisionBoxes=function(s,c,h,y){for(var x=s;x<c;x++){var S=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(S.x1,S.y1,S.x2,S.y2,y?this.textCollisionBox:this.iconCollisionBox,S.anchorPoint,h)}},Lr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Eh(lr,Qd.members,jc),this.iconCollisionBox=new Eh(lr,Qd.members,jc);for(var s=0;s<this.symbolInstances.length;s++){var c=this.symbolInstances.get(s);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}},Lr.prototype._deserializeCollisionBoxesForSymbol=function(s,c,h,y,x,S,T,k,q){for(var $={},Q=c;Q<h;Q++){var re=s.get(Q);$.textBox={x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,anchorPointX:re.anchorPointX,anchorPointY:re.anchorPointY},$.textFeatureIndex=re.featureIndex;break}for(var le=y;le<x;le++){var _e=s.get(le);$.verticalTextBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},$.verticalTextFeatureIndex=_e.featureIndex;break}for(var Ae=S;Ae<T;Ae++){var Oe=s.get(Ae);$.iconBox={x1:Oe.x1,y1:Oe.y1,x2:Oe.x2,y2:Oe.y2,anchorPointX:Oe.anchorPointX,anchorPointY:Oe.anchorPointY},$.iconFeatureIndex=Oe.featureIndex;break}for(var Ze=k;Ze<q;Ze++){var Ue=s.get(Ze);$.verticalIconBox={x1:Ue.x1,y1:Ue.y1,x2:Ue.x2,y2:Ue.y2,anchorPointX:Ue.anchorPointX,anchorPointY:Ue.anchorPointY},$.verticalIconFeatureIndex=Ue.featureIndex;break}return $},Lr.prototype.deserializeCollisionBoxes=function(s){this.collisionArrays=[];for(var c=0;c<this.symbolInstances.length;c++){var h=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}},Lr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Lr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Lr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Lr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Lr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Lr.prototype.addIndicesForPlacedSymbol=function(s,c){for(var h=s.placedSymbolArray.get(c),y=h.vertexStartIndex+4*h.numGlyphs,x=h.vertexStartIndex;x<y;x+=4)s.indexArray.emplaceBack(x,x+1,x+2),s.indexArray.emplaceBack(x+1,x+2,x+3)},Lr.prototype.getSortedSymbolIndexes=function(s){if(this.sortedAngle===s&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var c=Math.sin(s),h=Math.cos(s),y=[],x=[],S=[],T=0;T<this.symbolInstances.length;++T){S.push(T);var k=this.symbolInstances.get(T);y.push(0|Math.round(c*k.anchorX+h*k.anchorY)),x.push(k.featureIndex)}return S.sort(function(q,$){return y[q]-y[$]||x[$]-x[q]}),S},Lr.prototype.addToSortKeyRanges=function(s,c){var h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===c?h.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:s,symbolInstanceEnd:s+1})},Lr.prototype.sortFeatures=function(s){var c=this;if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var h=0,y=this.symbolInstanceIndexes;h<y.length;h+=1){var x=this.symbolInstances.get(y[h]);this.featureSortOrder.push(x.featureIndex),[x.rightJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.leftJustifiedTextSymbolIndex].forEach(function(S,T,k){S>=0&&k.indexOf(S)===T&&c.addIndicesForPlacedSymbol(c.text,S)}),x.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,x.verticalPlacedTextSymbolIndex),x.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.placedIconSymbolIndex),x.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Yt("SymbolBucket",Lr,{omit:["layers","collisionBoxArray","features","compareText"]}),Lr.MAX_GLYPHS=65535,Lr.addDynamicAttributes=kg;var s1=new ro({"symbol-placement":new Zt(Pe.layout_symbol["symbol-placement"]),"symbol-spacing":new Zt(Pe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Zt(Pe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new vn(Pe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Zt(Pe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Zt(Pe.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Zt(Pe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Zt(Pe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Zt(Pe.layout_symbol["icon-rotation-alignment"]),"icon-size":new vn(Pe.layout_symbol["icon-size"]),"icon-text-fit":new Zt(Pe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Zt(Pe.layout_symbol["icon-text-fit-padding"]),"icon-image":new vn(Pe.layout_symbol["icon-image"]),"icon-rotate":new vn(Pe.layout_symbol["icon-rotate"]),"icon-padding":new Zt(Pe.layout_symbol["icon-padding"]),"icon-keep-upright":new Zt(Pe.layout_symbol["icon-keep-upright"]),"icon-offset":new vn(Pe.layout_symbol["icon-offset"]),"icon-anchor":new vn(Pe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Zt(Pe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Zt(Pe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Zt(Pe.layout_symbol["text-rotation-alignment"]),"text-field":new vn(Pe.layout_symbol["text-field"]),"text-font":new vn(Pe.layout_symbol["text-font"]),"text-size":new vn(Pe.layout_symbol["text-size"]),"text-max-width":new vn(Pe.layout_symbol["text-max-width"]),"text-line-height":new Zt(Pe.layout_symbol["text-line-height"]),"text-letter-spacing":new vn(Pe.layout_symbol["text-letter-spacing"]),"text-justify":new vn(Pe.layout_symbol["text-justify"]),"text-radial-offset":new vn(Pe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Zt(Pe.layout_symbol["text-variable-anchor"]),"text-anchor":new vn(Pe.layout_symbol["text-anchor"]),"text-max-angle":new Zt(Pe.layout_symbol["text-max-angle"]),"text-writing-mode":new Zt(Pe.layout_symbol["text-writing-mode"]),"text-rotate":new vn(Pe.layout_symbol["text-rotate"]),"text-padding":new Zt(Pe.layout_symbol["text-padding"]),"text-keep-upright":new Zt(Pe.layout_symbol["text-keep-upright"]),"text-transform":new vn(Pe.layout_symbol["text-transform"]),"text-offset":new vn(Pe.layout_symbol["text-offset"]),"text-allow-overlap":new Zt(Pe.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Zt(Pe.layout_symbol["text-ignore-placement"]),"text-optional":new Zt(Pe.layout_symbol["text-optional"])}),Ng={paint:new ro({"icon-opacity":new vn(Pe.paint_symbol["icon-opacity"]),"icon-color":new vn(Pe.paint_symbol["icon-color"]),"icon-halo-color":new vn(Pe.paint_symbol["icon-halo-color"]),"icon-halo-width":new vn(Pe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new vn(Pe.paint_symbol["icon-halo-blur"]),"icon-translate":new Zt(Pe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Zt(Pe.paint_symbol["icon-translate-anchor"]),"text-opacity":new vn(Pe.paint_symbol["text-opacity"]),"text-color":new vn(Pe.paint_symbol["text-color"],{runtimeType:On,getOverride:function(s){return s.textColor},hasOverride:function(s){return!!s.textColor}}),"text-halo-color":new vn(Pe.paint_symbol["text-halo-color"]),"text-halo-width":new vn(Pe.paint_symbol["text-halo-width"]),"text-halo-blur":new vn(Pe.paint_symbol["text-halo-blur"]),"text-translate":new Zt(Pe.paint_symbol["text-translate"]),"text-translate-anchor":new Zt(Pe.paint_symbol["text-translate-anchor"])}),layout:s1},ff=function(s){this.type=s.property.overrides?s.property.overrides.runtimeType:sn,this.defaultValue=s};ff.prototype.evaluate=function(s){if(s.formattedSection){var c=this.defaultValue.property.overrides;if(c&&c.hasOverride(s.formattedSection))return c.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default},ff.prototype.eachChild=function(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)},ff.prototype.outputDefined=function(){return!1},ff.prototype.serialize=function(){return null},Yt("FormatSectionOverride",ff,{omit:["defaultValue"]});var ZC=function(s){function c(h){s.call(this,h,Ng)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.recalculate=function(h,y){if(s.prototype.recalculate.call(this,h,y),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var x=this.layout.get("text-writing-mode");if(x){for(var S=[],T=0,k=x;T<k.length;T+=1){var q=k[T];S.indexOf(q)<0&&S.push(q)}this.layout._values["text-writing-mode"]=S}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},c.prototype.getValueAndResolveTokens=function(h,y,x,S){var q,T=this.layout.get(h).evaluate(y,{},x,S),k=this._unevaluatedLayout._values[h];return k.isDataDriven()||Qo(k.value)||!T?T:(q=y.properties,T.replace(/{([^{}]+)}/g,function(Q,re){return re in q?String(q[re]):""}))},c.prototype.createBucket=function(h){return new Lr(h)},c.prototype.queryRadius=function(){return 0},c.prototype.queryIntersectsFeature=function(){return!1},c.prototype._setPaintOverrides=function(){for(var h=0,y=Ng.paint.overridableProperties;h<y.length;h+=1){var x=y[h];if(c.hasPaintOverride(this.layout,x)){var S,T=this.paint.get(x),k=new ff(T),q=new Wl(k,T.property.specification);S="constant"===T.value.kind||"source"===T.value.kind?new or("source",q):new Wr("composite",q,T.value.zoomStops,T.value._interpolationType),this.paint._values[x]=new Nr(T.property,S,T.parameters)}}},c.prototype._handleOverridablePaintPropertyUpdate=function(h,y,x){return!(!this.layout||y.isDataDriven()||x.isDataDriven())&&c.hasPaintOverride(this.layout,h)},c.hasPaintOverride=function(h,y){var x=h.get("text-field"),S=Ng.paint.properties[y],T=!1,k=function(Q){for(var re=0,le=Q;re<le.length;re+=1)if(S.overrides&&S.overrides.hasOverride(le[re]))return void(T=!0)};if("constant"===x.value.kind&&x.value.value instanceof Ui)k(x.value.value.sections);else if("source"===x.value.kind){var q=function(Q){T||(Q instanceof pa&&Oi(Q.value)===$n?k(Q.value.sections):Q instanceof Zn?k(Q.sections):Q.eachChild(q))},$=x.value;$._styleExpression&&q($._styleExpression.expression)}return T},c}(bi),YC={paint:new ro({"background-color":new Zt(Pe.paint_background["background-color"]),"background-pattern":new Ka(Pe.paint_background["background-pattern"]),"background-opacity":new Zt(Pe.paint_background["background-opacity"])})},Sh=function(s){function c(h){s.call(this,h,YC)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c}(bi),Ia={paint:new ro({"raster-opacity":new Zt(Pe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Zt(Pe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Zt(Pe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Zt(Pe.paint_raster["raster-brightness-max"]),"raster-saturation":new Zt(Pe.paint_raster["raster-saturation"]),"raster-contrast":new Zt(Pe.paint_raster["raster-contrast"]),"raster-resampling":new Zt(Pe.paint_raster["raster-resampling"]),"raster-fade-duration":new Zt(Pe.paint_raster["raster-fade-duration"])})},Lg=function(s){function c(h){s.call(this,h,Ia)}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c}(bi),W_=function(s){function c(h){s.call(this,h,{}),this.implementation=h}return s&&(c.__proto__=s),(c.prototype=Object.create(s&&s.prototype)).constructor=c,c.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},c.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},c.prototype.recalculate=function(){},c.prototype.updateTransitions=function(){},c.prototype.hasTransition=function(){},c.prototype.serialize=function(){},c.prototype.onAdd=function(h){this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},c.prototype.onRemove=function(h){this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},c}(bi),J_={circle:Gd,heatmap:b_,hillshade:Hd,fill:Wd,"fill-extrusion":Vw,line:Hw,symbol:ZC,background:Sh,raster:Lg},ua=B.HTMLImageElement,hf=B.HTMLCanvasElement,jp=B.HTMLVideoElement,Z_=B.ImageData,Fp=B.ImageBitmap,ac=function(s,c,h,y){this.context=s,this.format=h,this.texture=s.gl.createTexture(),this.update(c,y)};ac.prototype.update=function(s,c,h){var y=s.width,x=s.height,S=!(this.size&&this.size[0]===y&&this.size[1]===x||h),T=this.context,k=T.gl;if(this.useMipmap=Boolean(c&&c.useMipmap),k.bindTexture(k.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===k.RGBA&&(!c||!1!==c.premultiply)),S)this.size=[y,x],s instanceof ua||s instanceof hf||s instanceof jp||s instanceof Z_||Fp&&s instanceof Fp?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,s):k.texImage2D(k.TEXTURE_2D,0,this.format,y,x,0,this.format,k.UNSIGNED_BYTE,s.data);else{var q=h||{x:0,y:0},$=q.x,Q=q.y;s instanceof ua||s instanceof hf||s instanceof jp||s instanceof Z_||Fp&&s instanceof Fp?k.texSubImage2D(k.TEXTURE_2D,0,$,Q,k.RGBA,k.UNSIGNED_BYTE,s):k.texSubImage2D(k.TEXTURE_2D,0,$,Q,y,x,k.RGBA,k.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&k.generateMipmap(k.TEXTURE_2D)},ac.prototype.bind=function(s,c,h){var y=this.context.gl;y.bindTexture(y.TEXTURE_2D,this.texture),h!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=y.LINEAR),s!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,s),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,h||s),this.filter=s),c!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,c),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,c),this.wrap=c)},ac.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},ac.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Bg=function(s){var c=this;this._callback=s,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){c._triggered=!1,c._callback()})};Bg.prototype.trigger=function(){var s=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){s._triggered=!1,s._callback()},0))},Bg.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Xc=function(s,c,h){this.target=s,this.parent=c,this.mapId=h,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Te(["receive","process"],this),this.invoker=new Bg(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Z()?s:B};function Y_(s,c,h){var y=2*Math.PI*6378137/256/Math.pow(2,h);return[s*y-2*Math.PI*6378137/2,c*y-2*Math.PI*6378137/2]}Xc.prototype.send=function(s,c,h,y,x){var S=this;void 0===x&&(x=!1);var T=Math.round(1e18*Math.random()).toString(36).substring(0,10);h&&(this.callbacks[T]=h);var k=$e(this.globalScope)?void 0:[];return this.target.postMessage({id:T,type:s,hasCallback:!!h,targetMapId:y,mustQueue:x,sourceMapId:this.mapId,data:Sa(c,k)},k),{cancel:function(){h&&delete S.callbacks[T],S.target.postMessage({id:T,type:"<cancel>",targetMapId:y,sourceMapId:S.mapId})}}},Xc.prototype.receive=function(s){var c=s.data,h=c.id;if(h&&(!c.targetMapId||this.mapId===c.targetMapId))if("<cancel>"===c.type){delete this.tasks[h];var y=this.cancelCallbacks[h];delete this.cancelCallbacks[h],y&&y()}else Z()||c.mustQueue?(this.tasks[h]=c,this.taskQueue.push(h),this.invoker.trigger()):this.processTask(h,c)},Xc.prototype.process=function(){if(this.taskQueue.length){var s=this.taskQueue.shift(),c=this.tasks[s];delete this.tasks[s],this.taskQueue.length&&this.invoker.trigger(),c&&this.processTask(s,c)}},Xc.prototype.processTask=function(s,c){var h=this;if("<response>"===c.type){var y=this.callbacks[s];delete this.callbacks[s],y&&(c.error?y(Fd(c.error)):y(null,Fd(c.data)))}else{var x=!1,S=$e(this.globalScope)?void 0:[],T=c.hasCallback?function(Q,re){x=!0,delete h.cancelCallbacks[s],h.target.postMessage({id:s,type:"<response>",sourceMapId:h.mapId,error:Q?Sa(Q):null,data:Sa(re,S)},S)}:function(Q){x=!0},k=null,q=Fd(c.data);if(this.parent[c.type])k=this.parent[c.type](c.sourceMapId,q,T);else if(this.parent.getWorkerSource){var $=c.type.split(".");k=this.parent.getWorkerSource(c.sourceMapId,$[0],q.source)[$[1]](q,T)}else T(new Error("Could not find function "+c.type));!x&&k&&k.cancel&&(this.cancelCallbacks[s]=k.cancel)}},Xc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Li=function(s,c){s&&(c?this.setSouthWest(s).setNorthEast(c):4===s.length?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1]))};Li.prototype.setNorthEast=function(s){return this._ne=s instanceof si?new si(s.lng,s.lat):si.convert(s),this},Li.prototype.setSouthWest=function(s){return this._sw=s instanceof si?new si(s.lng,s.lat):si.convert(s),this},Li.prototype.extend=function(s){var c,h,y=this._sw,x=this._ne;if(s instanceof si)c=s,h=s;else{if(!(s instanceof Li))return Array.isArray(s)?4===s.length||s.every(Array.isArray)?this.extend(Li.convert(s)):this.extend(si.convert(s)):this;if(h=s._ne,!(c=s._sw)||!h)return this}return y||x?(y.lng=Math.min(c.lng,y.lng),y.lat=Math.min(c.lat,y.lat),x.lng=Math.max(h.lng,x.lng),x.lat=Math.max(h.lat,x.lat)):(this._sw=new si(c.lng,c.lat),this._ne=new si(h.lng,h.lat)),this},Li.prototype.getCenter=function(){return new si((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Li.prototype.getSouthWest=function(){return this._sw},Li.prototype.getNorthEast=function(){return this._ne},Li.prototype.getNorthWest=function(){return new si(this.getWest(),this.getNorth())},Li.prototype.getSouthEast=function(){return new si(this.getEast(),this.getSouth())},Li.prototype.getWest=function(){return this._sw.lng},Li.prototype.getSouth=function(){return this._sw.lat},Li.prototype.getEast=function(){return this._ne.lng},Li.prototype.getNorth=function(){return this._ne.lat},Li.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Li.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Li.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Li.prototype.contains=function(s){var c=si.convert(s),h=c.lng,y=c.lat,x=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(x=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=y&&y<=this._ne.lat&&x},Li.convert=function(s){return!s||s instanceof Li?s:new Li(s)};var si=function(s,c){if(isNaN(s)||isNaN(c))throw new Error("Invalid LngLat object: ("+s+", "+c+")");if(this.lng=+s,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};si.prototype.wrap=function(){return new si(we(this.lng,-180,180),this.lat)},si.prototype.toArray=function(){return[this.lng,this.lat]},si.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},si.prototype.distanceTo=function(s){var c=Math.PI/180,h=this.lat*c,y=s.lat*c,x=Math.sin(h)*Math.sin(y)+Math.cos(h)*Math.cos(y)*Math.cos((s.lng-this.lng)*c);return 6371008.8*Math.acos(Math.min(x,1))},si.prototype.toBounds=function(s){void 0===s&&(s=0);var c=360*s/40075017,h=c/Math.cos(Math.PI/180*this.lat);return new Li(new si(this.lng-h,this.lat-c),new si(this.lng+h,this.lat+c))},si.convert=function(s){if(s instanceof si)return s;if(Array.isArray(s)&&(2===s.length||3===s.length))return new si(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&"object"==typeof s&&null!==s)return new si(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Q_=2*Math.PI*6371008.8;function Up(s){return Q_*Math.cos(s*Math.PI/180)}function ey(s){return(180+s)/360}function ty(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function qp(s,c){return s/Up(c)}function zg(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}var Wc=function(s,c,h){void 0===h&&(h=0),this.x=+s,this.y=+c,this.z=+h};Wc.fromLngLat=function(s,c){void 0===c&&(c=0);var h=si.convert(s);return new Wc(ey(h.lng),ty(h.lat),qp(c,h.lat))},Wc.prototype.toLngLat=function(){return new si(360*this.x-180,zg(this.y))},Wc.prototype.toAltitude=function(){return this.z*Up(zg(this.y))},Wc.prototype.meterInMercatorCoordinateUnits=function(){return 1/Q_*(s=zg(this.y),1/Math.cos(s*Math.PI/180));var s};var ou=function(s,c,h){this.z=s,this.x=c,this.y=h,this.key=Ch(0,s,s,c,h)};ou.prototype.equals=function(s){return this.z===s.z&&this.x===s.x&&this.y===s.y},ou.prototype.url=function(s,c){var h,y,x,S,T,k=(y=this.y,x=this.z,S=Y_(256*(h=this.x),256*(y=Math.pow(2,x)-y-1),x),T=Y_(256*(h+1),256*(y+1),x),S[0]+","+S[1]+","+T[0]+","+T[1]),q=function($,Q,re){for(var le,_e="",Ae=$;Ae>0;Ae--)_e+=(Q&(le=1<<Ae-1)?1:0)+(re&le?2:0);return _e}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===c?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",q).replace("{bbox-epsg-3857}",k)},ou.prototype.getTilePoint=function(s){var c=Math.pow(2,this.z);return new M(8192*(s.x*c-this.x),8192*(s.y*c-this.y))},ou.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var ny=function(s,c){this.wrap=s,this.canonical=c,this.key=Ch(s,c.z,c.z,c.x,c.y)},Gi=function(s,c,h,y,x){this.overscaledZ=s,this.wrap=c,this.canonical=new ou(h,+y,+x),this.key=Ch(c,s,h,y,x)};function Ch(s,c,h,y,x){(s*=2)<0&&(s=-1*s-1);var S=1<<h;return(S*S*s+S*x+y).toString(36)+h.toString(36)+c.toString(36)}Gi.prototype.equals=function(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)},Gi.prototype.scaledTo=function(s){var c=this.canonical.z-s;return s>this.canonical.z?new Gi(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Gi(s,this.wrap,s,this.canonical.x>>c,this.canonical.y>>c)},Gi.prototype.calculateScaledKey=function(s,c){var h=this.canonical.z-s;return s>this.canonical.z?Ch(this.wrap*+c,s,this.canonical.z,this.canonical.x,this.canonical.y):Ch(this.wrap*+c,s,s,this.canonical.x>>h,this.canonical.y>>h)},Gi.prototype.isChildOf=function(s){if(s.wrap!==this.wrap)return!1;var c=this.canonical.z-s.canonical.z;return 0===s.overscaledZ||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>c&&s.canonical.y===this.canonical.y>>c},Gi.prototype.children=function(s){if(this.overscaledZ>=s)return[new Gi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var c=this.canonical.z+1,h=2*this.canonical.x,y=2*this.canonical.y;return[new Gi(c,this.wrap,c,h,y),new Gi(c,this.wrap,c,h+1,y),new Gi(c,this.wrap,c,h,y+1),new Gi(c,this.wrap,c,h+1,y+1)]},Gi.prototype.isLessThan=function(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))},Gi.prototype.wrapped=function(){return new Gi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Gi.prototype.unwrapTo=function(s){return new Gi(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)},Gi.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Gi.prototype.toUnwrapped=function(){return new ny(this.wrap,this.canonical)},Gi.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Gi.prototype.getTilePoint=function(s){return this.canonical.getTilePoint(new Wc(s.x-this.wrap,s.y))},Yt("CanonicalTileID",ou),Yt("OverscaledTileID",Gi,{omit:["posMatrix"]});var El=function(s,c,h){if(this.uid=s,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(h&&"mapbox"!==h&&"terrarium"!==h)return D('"'+h+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=c.height;var y=this.dim=c.height-2;this.data=new Uint32Array(c.data.buffer),this.encoding=h||"mapbox";for(var x=0;x<y;x++)this.data[this._idx(-1,x)]=this.data[this._idx(0,x)],this.data[this._idx(y,x)]=this.data[this._idx(y-1,x)],this.data[this._idx(x,-1)]=this.data[this._idx(x,0)],this.data[this._idx(x,y)]=this.data[this._idx(x,y-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(y,-1)]=this.data[this._idx(y-1,0)],this.data[this._idx(-1,y)]=this.data[this._idx(0,y-1)],this.data[this._idx(y,y)]=this.data[this._idx(y-1,y-1)]};El.prototype.get=function(s,c){var h=new Uint8Array(this.data.buffer),y=4*this._idx(s,c);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(h[y],h[y+1],h[y+2])},El.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},El.prototype._idx=function(s,c){if(s<-1||s>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(s+1)},El.prototype._unpackMapbox=function(s,c,h){return(256*s*256+256*c+h)/10-1e4},El.prototype._unpackTerrarium=function(s,c,h){return 256*s+c+h/256-32768},El.prototype.getPixels=function(){return new wo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},El.prototype.backfillBorder=function(s,c,h){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");var y=c*this.dim,x=c*this.dim+this.dim,S=h*this.dim,T=h*this.dim+this.dim;switch(c){case-1:y=x-1;break;case 1:x=y+1}switch(h){case-1:S=T-1;break;case 1:T=S+1}for(var k=-c*this.dim,q=-h*this.dim,$=S;$<T;$++)for(var Q=y;Q<x;Q++)this.data[this._idx(Q,$)]=s.data[this._idx(Q+k,$+q)]},Yt("DEMData",El);var Vp=function(s){this._stringToNumber={},this._numberToString=[];for(var c=0;c<s.length;c++){var h=s[c];this._stringToNumber[h]=c,this._numberToString[c]=h}};Vp.prototype.encode=function(s){return this._stringToNumber[s]},Vp.prototype.decode=function(s){return this._numberToString[s]};var Th=function(s,c,h,y,x){this.type="Feature",this._vectorTileFeature=s,s._z=c,s._x=h,s._y=y,this.properties=s.properties,this.id=x},jg={geometry:{configurable:!0}};jg.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},jg.geometry.set=function(s){this._geometry=s},Th.prototype.toJSON=function(){var s={geometry:this.geometry};for(var c in this)"_geometry"!==c&&"_vectorTileFeature"!==c&&(s[c]=this[c]);return s},Object.defineProperties(Th.prototype,jg);var pf=function(){this.state={},this.stateChanges={},this.deletedStates={}};pf.prototype.updateState=function(s,c,h){var y=String(c);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][y]=this.stateChanges[s][y]||{},ge(this.stateChanges[s][y],h),null===this.deletedStates[s])for(var x in this.deletedStates[s]={},this.state[s])x!==y&&(this.deletedStates[s][x]=null);else if(this.deletedStates[s]&&null===this.deletedStates[s][y])for(var S in this.deletedStates[s][y]={},this.state[s][y])h[S]||(this.deletedStates[s][y][S]=null);else for(var T in h)this.deletedStates[s]&&this.deletedStates[s][y]&&null===this.deletedStates[s][y][T]&&delete this.deletedStates[s][y][T]},pf.prototype.removeFeatureState=function(s,c,h){if(null!==this.deletedStates[s]){var y=String(c);if(this.deletedStates[s]=this.deletedStates[s]||{},h&&void 0!==c)null!==this.deletedStates[s][y]&&(this.deletedStates[s][y]=this.deletedStates[s][y]||{},this.deletedStates[s][y][h]=null);else if(void 0!==c)if(this.stateChanges[s]&&this.stateChanges[s][y])for(h in this.deletedStates[s][y]={},this.stateChanges[s][y])this.deletedStates[s][y][h]=null;else this.deletedStates[s][y]=null;else this.deletedStates[s]=null}},pf.prototype.getState=function(s,c){var h=String(c),y=ge({},(this.state[s]||{})[h],(this.stateChanges[s]||{})[h]);if(null===this.deletedStates[s])return{};if(this.deletedStates[s]){var x=this.deletedStates[s][c];if(null===x)return{};for(var S in x)delete y[S]}return y},pf.prototype.initializeTileState=function(s,c){s.setFeatureState(this.state,c)},pf.prototype.coalesceChanges=function(s,c){var h={};for(var y in this.stateChanges){this.state[y]=this.state[y]||{};var x={};for(var S in this.stateChanges[y])this.state[y][S]||(this.state[y][S]={}),ge(this.state[y][S],this.stateChanges[y][S]),x[S]=this.state[y][S];h[y]=x}for(var T in this.deletedStates){this.state[T]=this.state[T]||{};var k={};if(null===this.deletedStates[T])for(var q in this.state[T])k[q]={},this.state[T][q]={};else for(var $ in this.deletedStates[T]){if(null===this.deletedStates[T][$])this.state[T][$]={};else for(var Q=0,re=Object.keys(this.deletedStates[T][$]);Q<re.length;Q+=1)delete this.state[T][$][re[Q]];k[$]=this.state[T][$]}h[T]=h[T]||{},ge(h[T],k)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(h).length)for(var le in s)s[le].setFeatureState(h,c)};var Sl=function(s,c){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new Fo(8192,16,0),this.grid3D=new Fo(8192,16,0),this.featureIndexArray=new be,this.promoteId=c};function ry(s,c,h,y,x){return at(s,function(S,T){var k=c instanceof dl?c.get(T):null;return k&&k.evaluate?k.evaluate(h,y,x):k})}function iy(s){for(var c=1/0,h=1/0,y=-1/0,x=-1/0,S=0,T=s;S<T.length;S+=1){var k=T[S];c=Math.min(c,k.x),h=Math.min(h,k.y),y=Math.max(y,k.x),x=Math.max(x,k.y)}return{minX:c,minY:h,maxX:y,maxY:x}}function u1(s,c){return c-s}Sl.prototype.insert=function(s,c,h,y,x,S){var T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,y,x);for(var k=S?this.grid3D:this.grid,q=0;q<c.length;q++){for(var $=c[q],Q=[1/0,1/0,-1/0,-1/0],re=0;re<$.length;re++){var le=$[re];Q[0]=Math.min(Q[0],le.x),Q[1]=Math.min(Q[1],le.y),Q[2]=Math.max(Q[2],le.x),Q[3]=Math.max(Q[3],le.y)}Q[0]<8192&&Q[1]<8192&&Q[2]>=0&&Q[3]>=0&&k.insert(T,Q[0],Q[1],Q[2],Q[3])}},Sl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new xl.VectorTile(new Op(this.rawTileData)).layers,this.sourceLayerCoder=new Vp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Sl.prototype.query=function(s,c,h,y){var x=this;this.loadVTLayers();for(var S=s.params||{},T=8192/s.tileSize/s.scale,k=Zl(S.filter),q=s.queryGeometry,$=s.queryPadding*T,Q=iy(q),re=this.grid.query(Q.minX-$,Q.minY-$,Q.maxX+$,Q.maxY+$),le=iy(s.cameraQueryGeometry),Ae=0,Oe=this.grid3D.query(le.minX-$,le.minY-$,le.maxX+$,le.maxY+$,function(ct,ft,St,zt){return function(Ft,an,Gt,un,$t){for(var Nn=0,_n=Ft;Nn<_n.length;Nn+=1){var rn=_n[Nn];if(an<=rn.x&&Gt<=rn.y&&un>=rn.x&&$t>=rn.y)return!0}var Wn=[new M(an,Gt),new M(an,$t),new M(un,$t),new M(un,Gt)];if(Ft.length>2)for(var kn=0,cr=Wn;kn<cr.length;kn+=1)if(aa(Ft,cr[kn]))return!0;for(var ln=0;ln<Ft.length-1;ln++)if(Du(Ft[ln],Ft[ln+1],Wn))return!0;return!1}(s.cameraQueryGeometry,ct-$,ft-$,St+$,zt+$)});Ae<Oe.length;Ae+=1)re.push(Oe[Ae]);re.sort(u1);for(var Ze,Ue={},nt=function(ct){var ft=re[ct];if(ft!==Ze){Ze=ft;var St=x.featureIndexArray.get(ft),zt=null;x.loadMatchingFeature(Ue,St.bucketIndex,St.sourceLayerIndex,St.featureIndex,k,S.layers,S.availableImages,c,h,y,function(Ft,an,Gt){return zt||(zt=mi(Ft)),an.queryIntersectsFeature(q,Ft,Gt,zt,x.z,s.transform,T,s.pixelPosMatrix)})}},ot=0;ot<re.length;ot++)nt(ot);return Ue},Sl.prototype.loadMatchingFeature=function(s,c,h,y,x,S,T,k,q,$,Q){var re=this.bucketLayerIDs[c];if(!S||function(Ft,an){for(var Gt=0;Gt<Ft.length;Gt++)if(an.indexOf(Ft[Gt])>=0)return!0;return!1}(S,re)){var le=this.sourceLayerCoder.decode(h),_e=this.vtLayers[le].feature(y);if(x.needGeometry){var Ae=bo(_e,!0);if(!x.filter(new Er(this.tileID.overscaledZ),Ae,this.tileID.canonical))return}else if(!x.filter(new Er(this.tileID.overscaledZ),_e))return;for(var Oe=this.getId(_e,le),Ze=0;Ze<re.length;Ze++){var Ue=re[Ze];if(!(S&&S.indexOf(Ue)<0)){var nt=k[Ue];if(nt){var ot={};void 0!==Oe&&$&&(ot=$.getState(nt.sourceLayer||"_geojsonTileLayer",Oe));var ct=ge({},q[Ue]);ct.paint=ry(ct.paint,nt.paint,_e,ot,T),ct.layout=ry(ct.layout,nt.layout,_e,ot,T);var ft=!Q||Q(_e,nt,ot);if(ft){var St=new Th(_e,this.z,this.x,this.y,Oe);St.layer=ct;var zt=s[Ue];void 0===zt&&(zt=s[Ue]=[]),zt.push({featureIndex:y,feature:St,intersectionZ:ft})}}}}}},Sl.prototype.lookupSymbolFeatures=function(s,c,h,y,x,S,T,k){var q={};this.loadVTLayers();for(var $=Zl(x),Q=0,re=s;Q<re.length;Q+=1)this.loadMatchingFeature(q,h,y,re[Q],$,S,T,k,c);return q},Sl.prototype.hasLayer=function(s){for(var c=0,h=this.bucketLayerIDs;c<h.length;c+=1)for(var y=0,x=h[c];y<x.length;y+=1)if(s===x[y])return!0;return!1},Sl.prototype.getId=function(s,c){var h=s.id;return this.promoteId&&"boolean"==typeof(h=s.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[c]])&&(h=Number(h)),h},Yt("FeatureIndex",Sl,{omit:["rawTileData","sourceLayerCoder"]});var io=function(s,c){this.tileID=s,this.uid=Xe(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};io.prototype.registerFadeDuration=function(s){var c=s+this.timeAdded;c<Sn.now()||this.fadeEndTime&&c<this.fadeEndTime||(this.fadeEndTime=c)},io.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},io.prototype.loadVectorData=function(s,c,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){for(var y in s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function($,Q){var re={};if(!Q)return re;for(var le=function(){var Oe=Ae[_e],Ze=Oe.layerIds.map(function(ot){return Q.getLayer(ot)}).filter(Boolean);if(0!==Ze.length){Oe.layers=Ze,Oe.stateDependentLayerIds&&(Oe.stateDependentLayers=Oe.stateDependentLayerIds.map(function(ot){return Ze.filter(function(ct){return ct.id===ot})[0]}));for(var Ue=0,nt=Ze;Ue<nt.length;Ue+=1)re[nt[Ue].id]=Oe}},_e=0,Ae=$;_e<Ae.length;_e+=1)le();return re}(s.buckets,c.style),this.hasSymbolBuckets=!1,this.buckets){var x=this.buckets[y];if(x instanceof Lr){if(this.hasSymbolBuckets=!0,!h)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var S in this.buckets){var T=this.buckets[S];if(T instanceof Lr&&T.hasRTLText){this.hasRTLText=!0,ci.isLoading()||ci.isLoaded()||"deferred"!==Ca()||Tp();break}}for(var k in this.queryPadding=0,this.buckets){var q=this.buckets[k];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(k).queryRadius(q))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new g},io.prototype.unloadVectorData=function(){for(var s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},io.prototype.getBucket=function(s){return this.buckets[s.id]},io.prototype.upload=function(s){for(var c in this.buckets){var h=this.buckets[c];h.uploadPending()&&h.upload(s)}var y=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ac(s,this.imageAtlas.image,y.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ac(s,this.glyphAtlasImage,y.ALPHA),this.glyphAtlasImage=null)},io.prototype.prepare=function(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)},io.prototype.queryRenderedFeatures=function(s,c,h,y,x,S,T,k,q,$){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:x,scale:S,tileSize:this.tileSize,pixelPosMatrix:$,transform:k,params:T,queryPadding:this.queryPadding*q},s,c,h):{}},io.prototype.querySourceFeatures=function(s,c){var h=this.latestFeatureIndex;if(h&&h.rawTileData){var y=h.loadVTLayers(),x=c?c.sourceLayer:"",S=y._geojsonTileLayer||y[x];if(S)for(var T=Zl(c&&c.filter),k=this.tileID.canonical,q=k.z,$=k.x,Q=k.y,re={z:q,x:$,y:Q},le=0;le<S.length;le++){var _e=S.feature(le);if(T.needGeometry){var Ae=bo(_e,!0);if(!T.filter(new Er(this.tileID.overscaledZ),Ae,this.tileID.canonical))continue}else if(!T.filter(new Er(this.tileID.overscaledZ),_e))continue;var Oe=h.getId(_e,x),Ze=new Th(_e,q,$,Q,Oe);Ze.tile=re,s.push(Ze)}}},io.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},io.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},io.prototype.setExpiryData=function(s){var c=this.expirationTime;if(s.cacheControl){var h=j(s.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){var y=Date.now(),x=!1;if(this.expirationTime>y)x=!1;else if(c)if(this.expirationTime<c)x=!0;else{var S=this.expirationTime-c;S?this.expirationTime=y+Math.max(S,3e4):x=!0}else x=!0;x?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},io.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},io.prototype.setFeatureState=function(s,c){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(s).length){var h=this.latestFeatureIndex.loadVTLayers();for(var y in this.buckets)if(c.style.hasLayer(y)){var x=this.buckets[y],S=x.layers[0].sourceLayer||"_geojsonTileLayer",T=h[S],k=s[S];if(T&&k&&0!==Object.keys(k).length){x.update(k,T,this.imageAtlas&&this.imageAtlas.patternPositions||{});var q=c&&c.style&&c.style.getLayer(y);q&&(this.queryPadding=Math.max(this.queryPadding,q.queryRadius(x)))}}}},io.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},io.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Sn.now()},io.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},io.prototype.setHoldDuration=function(s){this.symbolFadeHoldUntil=Sn.now()+s},io.prototype.setDependencies=function(s,c){for(var h={},y=0,x=c;y<x.length;y+=1)h[x[y]]=!0;this.dependencies[s]=h},io.prototype.hasDependency=function(s,c){for(var h=0,y=s;h<y.length;h+=1){var x=this.dependencies[y[h]];if(x)for(var S=0,T=c;S<T.length;S+=1)if(x[T[S]])return!0}return!1};var sc=B.performance,Jc=function(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},sc.mark(this._marks.start)};Jc.prototype.finish=function(){sc.mark(this._marks.end);var s=sc.getEntriesByName(this._marks.measure);return 0===s.length&&(sc.measure(this._marks.measure,this._marks.start,this._marks.end),s=sc.getEntriesByName(this._marks.measure),sc.clearMarks(this._marks.start),sc.clearMarks(this._marks.end),sc.clearMeasures(this._marks.measure)),s},b.Actor=Xc,b.AlphaImage=Uc,b.CanonicalTileID=ou,b.CollisionBoxArray=g,b.Color=ir,b.DEMData=El,b.DataConstantProperty=Zt,b.DictionaryCoder=Vp,b.EXTENT=8192,b.ErrorEvent=et,b.EvaluationParameters=Er,b.Event=Je,b.Evented=Ke,b.FeatureIndex=Sl,b.FillBucket=zs,b.FillExtrusionBucket=Wa,b.ImageAtlas=yh,b.ImagePosition=_h,b.LineBucket=sa,b.LngLat=si,b.LngLatBounds=Li,b.MercatorCoordinate=Wc,b.ONE_EM=24,b.OverscaledTileID=Gi,b.Point=M,b.Point$1=M,b.Properties=ro,b.Protobuf=Op,b.RGBAImage=wo,b.RequestManager=rr,b.RequestPerformance=Jc,b.ResourceType=Wf,b.SegmentVector=Ee,b.SourceFeatureState=pf,b.StructArrayLayout1ui2=ml,b.StructArrayLayout2f1f2i16=ch,b.StructArrayLayout2i4=fl,b.StructArrayLayout3ui6=va,b.StructArrayLayout4i8=In,b.SymbolBucket=Lr,b.Texture=ac,b.Tile=io,b.Transitionable=$a,b.Uniform1f=Ot,b.Uniform1i=kt,b.Uniform2f=Lt,b.Uniform3f=fn,b.Uniform4f=pn,b.UniformColor=hn,b.UniformMatrix4f=en,b.UnwrappedTileID=ny,b.ValidationError=je,b.WritingMode=Ja,b.ZoomHistory=qi,b.add=function(s,c,h){return s[0]=c[0]+h[0],s[1]=c[1]+h[1],s[2]=c[2]+h[2],s},b.addDynamicAttributes=kg,b.asyncAll=function(s,c,h){if(!s.length)return h(null,[]);var y=s.length,x=new Array(s.length),S=null;s.forEach(function(T,k){c(T,function(q,$){q&&(S=q),x[k]=$,0==--y&&h(S,x)})})},b.bezier=ee,b.bindAll=Te,b.browser=Sn,b.cacheEntryPossiblyAdded=function(s){++Wu>Wi&&(s.getActor().send("enforceCacheSizeLimit",jr),Wu=0)},b.clamp=fe,b.clearTileCache=function(s){var c=B.caches.delete("mapbox-tiles");s&&c.catch(s).then(function(){return s()})},b.clipLine=Ag,b.clone=function(s){var c=new Ei(16);return c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},b.clone$1=Ge,b.clone$2=function(s){var c=new Ei(3);return c[0]=s[0],c[1]=s[1],c[2]=s[2],c},b.collisionCircleLayout=$w,b.config=xt,b.create=function(){var s=new Ei(16);return Ei!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},b.create$1=function(){var s=new Ei(9);return Ei!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s},b.create$2=function(){var s=new Ei(4);return Ei!=Float32Array&&(s[1]=0,s[2]=0),s[0]=1,s[3]=1,s},b.createCommonjsModule=H,b.createExpression=on,b.createLayout=di,b.createStyleLayer=function(s){return"custom"===s.type?new W_(s):new J_[s.type](s)},b.cross=function(s,c,h){var y=c[0],x=c[1],S=c[2],T=h[0],k=h[1],q=h[2];return s[0]=x*q-S*k,s[1]=S*T-y*q,s[2]=y*k-x*T,s},b.deepEqual=function s(c,h){if(Array.isArray(c)){if(!Array.isArray(h)||c.length!==h.length)return!1;for(var y=0;y<c.length;y++)if(!s(c[y],h[y]))return!1;return!0}if("object"==typeof c&&null!==c&&null!==h){if("object"!=typeof h||Object.keys(c).length!==Object.keys(h).length)return!1;for(var x in c)if(!s(c[x],h[x]))return!1;return!0}return c===h},b.dot=function(s,c){return s[0]*c[0]+s[1]*c[1]+s[2]*c[2]},b.dot$1=function(s,c){return s[0]*c[0]+s[1]*c[1]+s[2]*c[2]+s[3]*c[3]},b.ease=ue,b.emitValidationErrors=jd,b.endsWith=Fe,b.enforceCacheSizeLimit=function(s){Kr(),ne&&ne.then(function(c){c.keys().then(function(h){for(var y=0;y<h.length-s;y++)c.delete(h[y])})})},b.evaluateSizeForFeature=V_,b.evaluateSizeForZoom=t1,b.evaluateVariableOffset=K_,b.evented=uh,b.extend=ge,b.featureFilter=Zl,b.filterObject=Ye,b.fromRotation=function(s,c){var h=Math.sin(c),y=Math.cos(c);return s[0]=y,s[1]=h,s[2]=0,s[3]=-h,s[4]=y,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},b.getAnchorAlignment=F_,b.getAnchorJustification=Bp,b.getArrayBuffer=ui,b.getImage=ve,b.getJSON=function(s,c){return Gl(ge(s,{type:"json"}),c)},b.getRTLTextPluginStatus=Ca,b.getReferrer=gu,b.getVideo=function(s,c){var h,y,x=B.document.createElement("video");x.muted=!0,x.onloadstart=function(){c(null,x)};for(var S=0;S<s.length;S++){var T=B.document.createElement("source");h=s[S],y=void 0,(y=B.document.createElement("a")).href=h,(y.protocol!==B.document.location.protocol||y.host!==B.document.location.host)&&(x.crossOrigin="Anonymous"),T.src=s[S],x.appendChild(T)}return{cancel:function(){}}},b.identity=Zi,b.invert=function(s,c){var h=c[0],y=c[1],x=c[2],S=c[3],T=c[4],k=c[5],q=c[6],$=c[7],Q=c[8],re=c[9],le=c[10],_e=c[11],Ae=c[12],Oe=c[13],Ze=c[14],Ue=c[15],nt=h*k-y*T,ot=h*q-x*T,ct=h*$-S*T,ft=y*q-x*k,St=y*$-S*k,zt=x*$-S*q,Ft=Q*Oe-re*Ae,an=Q*Ze-le*Ae,Gt=Q*Ue-_e*Ae,un=re*Ze-le*Oe,$t=re*Ue-_e*Oe,Nn=le*Ue-_e*Ze,_n=nt*Nn-ot*$t+ct*un+ft*Gt-St*an+zt*Ft;return _n?(s[0]=(k*Nn-q*$t+$*un)*(_n=1/_n),s[1]=(x*$t-y*Nn-S*un)*_n,s[2]=(Oe*zt-Ze*St+Ue*ft)*_n,s[3]=(le*St-re*zt-_e*ft)*_n,s[4]=(q*Gt-T*Nn-$*an)*_n,s[5]=(h*Nn-x*Gt+S*an)*_n,s[6]=(Ze*ct-Ae*zt-Ue*ot)*_n,s[7]=(Q*zt-le*ct+_e*ot)*_n,s[8]=(T*$t-k*Gt+$*Ft)*_n,s[9]=(y*Gt-h*$t-S*Ft)*_n,s[10]=(Ae*St-Oe*ct+Ue*nt)*_n,s[11]=(re*ct-Q*St-_e*nt)*_n,s[12]=(k*an-T*un-q*Ft)*_n,s[13]=(h*un-y*an+x*Ft)*_n,s[14]=(Oe*ot-Ae*ft-Ze*nt)*_n,s[15]=(Q*ft-re*ot+le*nt)*_n,s):null},b.isChar=Qt,b.isMapboxURL=fr,b.keysDifference=function(s,c){var h=[];for(var y in s)y in c||h.push(y);return h},b.makeRequest=Gl,b.mapObject=at,b.mercatorXfromLng=ey,b.mercatorYfromLat=ty,b.mercatorZfromAltitude=qp,b.mul=Vd,b.multiply=vl,b.mvt=xl,b.nextPowerOfTwo=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},b.normalize=function(s,c){var h=c[0],y=c[1],x=c[2],S=h*h+y*y+x*x;return S>0&&(S=1/Math.sqrt(S)),s[0]=c[0]*S,s[1]=c[1]*S,s[2]=c[2]*S,s},b.number=ki,b.offscreenCanvasSupported=Td,b.ortho=function(s,c,h,y,x,S,T){var k=1/(c-h),q=1/(y-x),$=1/(S-T);return s[0]=-2*k,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*q,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*$,s[11]=0,s[12]=(c+h)*k,s[13]=(x+y)*q,s[14]=(T+S)*$,s[15]=1,s},b.parseGlyphPBF=function(s){return new Op(s).readFields(Np,[])},b.pbf=Op,b.performSymbolLayout=function(s,c,h,y,x,S,T){s.createArrays(),s.tilePixelRatio=8192/(512*s.overscaling),s.compareText={},s.iconsNeedLinear=!1;var k=s.layers[0].layout,q=s.layers[0]._unevaluatedLayout._values,$={};if("composite"===s.textSizeData.kind){var Q=s.textSizeData,re=Q.maxZoom;$.compositeTextSizes=[q["text-size"].possiblyEvaluate(new Er(Q.minZoom),T),q["text-size"].possiblyEvaluate(new Er(re),T)]}if("composite"===s.iconSizeData.kind){var le=s.iconSizeData,_e=le.maxZoom;$.compositeIconSizes=[q["icon-size"].possiblyEvaluate(new Er(le.minZoom),T),q["icon-size"].possiblyEvaluate(new Er(_e),T)]}$.layoutTextSize=q["text-size"].possiblyEvaluate(new Er(s.zoom+1),T),$.layoutIconSize=q["icon-size"].possiblyEvaluate(new Er(s.zoom+1),T),$.textMaxSize=q["text-size"].possiblyEvaluate(new Er(18));for(var Ae=24*k.get("text-line-height"),Oe="map"===k.get("text-rotation-alignment")&&"point"!==k.get("symbol-placement"),Ze=k.get("text-keep-upright"),Ue=k.get("text-size"),nt=function(){var ft=ct[ot],St=k.get("text-font").evaluate(ft,{},T).join(","),zt=Ue.evaluate(ft,{},T),Ft=$.layoutTextSize.evaluate(ft,{},T),an=$.layoutIconSize.evaluate(ft,{},T),Gt={horizontal:{},vertical:void 0},un=ft.text,$t=[0,0];if(un){var Nn=un.toString(),_n=24*k.get("text-letter-spacing").evaluate(ft,{},T),rn=function(Qn){for(var kr=0,Ir=Qn;kr<Ir.length;kr+=1)if(dr=Ir[kr].charCodeAt(0),Qt.Arabic(dr)||Qt["Arabic Supplement"](dr)||Qt["Arabic Extended-A"](dr)||Qt["Arabic Presentation Forms-A"](dr)||Qt["Arabic Presentation Forms-B"](dr))return!1;var dr;return!0}(Nn)?_n:0,Wn=k.get("text-anchor").evaluate(ft,{},T),kn=k.get("text-variable-anchor");if(!kn){var cr=k.get("text-radial-offset").evaluate(ft,{},T);$t=cr?K_(Wn,[24*cr,Dg]):k.get("text-offset").evaluate(ft,{},T).map(function(Qn){return 24*Qn})}var ln=Oe?"center":k.get("text-justify").evaluate(ft,{},T),tr=k.get("symbol-placement"),ii="point"===tr?24*k.get("text-max-width").evaluate(ft,{},T):0,gi=function(){s.allowVerticalPlacement&&Ms(Nn)&&(Gt.vertical=Lp(un,c,h,x,St,ii,Ae,Wn,"left",rn,$t,Ja.vertical,!0,tr,Ft,zt))};if(!Oe&&kn){for(var vi="auto"===ln?kn.map(function(Qn){return Bp(Qn)}):[ln],Hr=!1,Si=0;Si<vi.length;Si++){var Hi=vi[Si];if(!Gt.horizontal[Hi])if(Hr)Gt.horizontal[Hi]=Gt.horizontal[0];else{var $i=Lp(un,c,h,x,St,ii,Ae,"center",Hi,rn,$t,Ja.horizontal,!1,tr,Ft,zt);$i&&(Gt.horizontal[Hi]=$i,Hr=1===$i.positionedLines.length)}}gi()}else{"auto"===ln&&(ln=Bp(Wn));var Eo=Lp(un,c,h,x,St,ii,Ae,Wn,ln,rn,$t,Ja.horizontal,!1,tr,Ft,zt);Eo&&(Gt.horizontal[ln]=Eo),gi(),Ms(Nn)&&Oe&&Ze&&(Gt.vertical=Lp(un,c,h,x,St,ii,Ae,Wn,ln,rn,$t,Ja.vertical,!1,tr,Ft,zt))}}var Qn,kr,dr,oo,Co,Ki=void 0,So=!1;if(ft.icon&&ft.icon.name){var fi=y[ft.icon.name];fi&&(Qn=x[ft.icon.name],kr=k.get("icon-offset").evaluate(ft,{},T),dr=F_(k.get("icon-anchor").evaluate(ft,{},T)),Ki={image:Qn,top:Co=kr[1]-Qn.displaySize[1]*dr.verticalAlign,bottom:Co+Qn.displaySize[1],left:oo=kr[0]-Qn.displaySize[0]*dr.horizontalAlign,right:oo+Qn.displaySize[0]},So=fi.sdf,void 0===s.sdfIcons?s.sdfIcons=fi.sdf:s.sdfIcons!==fi.sdf&&D("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(fi.pixelRatio!==s.pixelRatio||0!==k.get("icon-rotate").constantOr(1))&&(s.iconsNeedLinear=!0))}var Bi=X_(Gt.horizontal)||Gt.vertical;s.iconsInText=!!Bi&&Bi.iconsInText,(Bi||Ki)&&function(Qn,kr,Ir,dr,oo,Co,Qr,zi,To,_r,js){var Aa=Co.textMaxSize.evaluate(kr,{});void 0===Aa&&(Aa=Qr);var Cl,Ci=Qn.layers[0].layout,Mu=Ci.get("icon-offset").evaluate(kr,{},js),gs=X_(Ir.horizontal),mf=Qr/24,Zc=Qn.tilePixelRatio*mf,ba=Qn.tilePixelRatio*Aa/24,Tl=Qn.tilePixelRatio*zi,Yc=Qn.tilePixelRatio*Ci.get("symbol-spacing"),Gp=Ci.get("text-padding")*Qn.tilePixelRatio,gf=Ci.get("icon-padding")*Qn.tilePixelRatio,Ph=Ci.get("text-max-angle")/180*Math.PI,Hp="map"===Ci.get("text-rotation-alignment")&&"point"!==Ci.get("symbol-placement"),Ih="map"===Ci.get("icon-rotation-alignment")&&"point"!==Ci.get("symbol-placement"),Pl=Ci.get("symbol-placement"),Ah=Yc/2,vf=Ci.get("icon-text-fit");dr&&"none"!==vf&&(Qn.allowVerticalPlacement&&Ir.vertical&&(Cl=q_(dr,Ir.vertical,vf,Ci.get("icon-text-fit-padding"),Mu,mf)),gs&&(dr=q_(dr,gs,vf,Ci.get("icon-text-fit-padding"),Mu,mf)));var Bn=function(c1,Bh){Bh.x<0||Bh.x>=8192||Bh.y<0||Bh.y>=8192||function(Pi,Fs,QC,cc,oy,Ug,zh,Nu,Ef,Kp,qg,Vg,ay,d1,Xp,f1,h1,p1,m1,Al,wa,Wp,Gg,Us,sy){var Jp,td,_s,nd,Sf,dc=Pi.addToLineVertexArray(Fs,QC),uy=0,Hg=0,ly=0,cy=0,rd=-1,fc=-1,au={},id=qe(""),od=0,hc=0;if(void 0===Nu._unevaluatedLayout.getValue("text-radial-offset")?(od=(Jp=Nu.layout.get("text-offset").evaluate(wa,{},Us).map(function(Qp){return 24*Qp}))[0],hc=Jp[1]):(od=24*Nu.layout.get("text-radial-offset").evaluate(wa,{},Us),hc=Dg),Pi.allowVerticalPlacement&&cc.vertical){var dy=Nu.layout.get("text-rotate").evaluate(wa,{},Us)+90;nd=new cf(Ef,Fs,Kp,qg,Vg,cc.vertical,ay,d1,Xp,dy),zh&&(Sf=new cf(Ef,Fs,Kp,qg,Vg,zh,h1,p1,Xp,dy))}if(oy){var Zp=Nu.layout.get("icon-rotate").evaluate(wa,{}),$g="none"!==Nu.layout.get("icon-text-fit"),Yp=r1(oy,Zp,Gg,$g),jh=zh?r1(zh,Zp,Gg,$g):void 0;_s=new cf(Ef,Fs,Kp,qg,Vg,oy,h1,p1,!1,Zp),uy=4*Yp.length;var Kg=Pi.iconSizeData,pc=null;"source"===Kg.kind?(pc=[128*Nu.layout.get("icon-size").evaluate(wa,{})])[0]>32640&&D(Pi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===Kg.kind&&((pc=[128*Wp.compositeIconSizes[0].evaluate(wa,{},Us),128*Wp.compositeIconSizes[1].evaluate(wa,{},Us)])[0]>32640||pc[1]>32640)&&D(Pi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Pi.addSymbols(Pi.icon,Yp,pc,Al,m1,wa,!1,Fs,dc.lineStartIndex,dc.lineLength,-1,Us),rd=Pi.icon.placedSymbolArray.length-1,jh&&(Hg=4*jh.length,Pi.addSymbols(Pi.icon,jh,pc,Al,m1,wa,Ja.vertical,Fs,dc.lineStartIndex,dc.lineLength,-1,Us),fc=Pi.icon.placedSymbolArray.length-1)}for(var fy in cc.horizontal){var Fh=cc.horizontal[fy];if(!td){id=qe(Fh.text);var eT=Nu.layout.get("text-rotate").evaluate(wa,{},Us);td=new cf(Ef,Fs,Kp,qg,Vg,Fh,ay,d1,Xp,eT)}var Xg=1===Fh.positionedLines.length;if(ly+=xh(Pi,Fs,Fh,Ug,Nu,Xp,wa,f1,dc,cc.vertical?Ja.horizontal:Ja.horizontalOnly,Xg?Object.keys(cc.horizontal):[fy],au,rd,Wp,Us),Xg)break}cc.vertical&&(cy+=xh(Pi,Fs,cc.vertical,Ug,Nu,Xp,wa,f1,dc,Ja.vertical,["vertical"],au,fc,Wp,Us));var hy=td?td.boxStartIndex:Pi.collisionBoxArray.length,g1=td?td.boxEndIndex:Pi.collisionBoxArray.length,py=nd?nd.boxStartIndex:Pi.collisionBoxArray.length,v1=nd?nd.boxEndIndex:Pi.collisionBoxArray.length,_1=_s?_s.boxStartIndex:Pi.collisionBoxArray.length,ys=_s?_s.boxEndIndex:Pi.collisionBoxArray.length,y1=Sf?Sf.boxStartIndex:Pi.collisionBoxArray.length,b1=Sf?Sf.boxEndIndex:Pi.collisionBoxArray.length,Rl=-1,Wg=function(Qp,my){return Qp&&Qp.circleDiameter?Math.max(Qp.circleDiameter,my):my};Rl=Wg(td,Rl),Rl=Wg(nd,Rl),Rl=Wg(_s,Rl);var Jg=(Rl=Wg(Sf,Rl))>-1?1:0;Jg&&(Rl*=sy/24),Pi.glyphOffsetArray.length>=Lr.MAX_GLYPHS&&D("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==wa.sortKey&&Pi.addToSortKeyRanges(Pi.symbolInstances.length,wa.sortKey),Pi.symbolInstances.emplaceBack(Fs.x,Fs.y,au.right>=0?au.right:-1,au.center>=0?au.center:-1,au.left>=0?au.left:-1,au.vertical||-1,rd,fc,id,hy,g1,py,v1,_1,ys,y1,b1,Kp,ly,cy,uy,Hg,Jg,0,ay,od,hc,Rl)}(Qn,Bh,c1,Ir,dr,oo,Cl,Qn.layers[0],Qn.collisionBoxArray,kr.index,kr.sourceLayerIndex,Qn.index,Zc,Gp,Hp,To,Tl,gf,Ih,Mu,kr,Co,_r,js,Qr)};if("line"===Pl)for(var _f=0,Rh=Ag(kr.geometry,0,0,8192,8192);_f<Rh.length;_f+=1)for(var Dh=Rh[_f],uc=0,Ra=H_(Dh,Yc,Ph,Ir.vertical||gs,dr,24,ba,Qn.overscaling,8192);uc<Ra.length;uc+=1){var Oh=Ra[uc];gs&&Og(Qn,gs.text,Ah,Oh)||Bn(Dh,Oh)}else if("line-center"===Pl)for(var kh=0,Qc=kr.geometry;kh<Qc.length;kh+=1){var vs=Qc[kh];if(vs.length>1){var yf=G_(vs,Ph,Ir.vertical||gs,dr,24,ba);yf&&Bn(vs,yf)}}else if("Polygon"===kr.type)for(var ed=0,bf=vg(kr.geometry,0);ed<bf.length;ed+=1){var Mh=bf[ed],wf=$_(Mh,16);Bn(Mh[0],new af(wf.x,wf.y,0))}else if("LineString"===kr.type)for(var xf=0,lc=kr.geometry;xf<lc.length;xf+=1){var Il=lc[xf];Bn(Il,new af(Il[0].x,Il[0].y,0))}else if("Point"===kr.type)for(var Nh=0,$p=kr.geometry;Nh<$p.length;Nh+=1)for(var Lh=0,l1=$p[Nh];Lh<l1.length;Lh+=1){var Fg=l1[Lh];Bn([Fg],new af(Fg.x,Fg.y,0))}}(s,ft,Gt,Ki,y,$,Ft,an,$t,So,T)},ot=0,ct=s.features;ot<ct.length;ot+=1)nt();S&&s.generateCollisionDebugBuffers()},b.perspective=function(s,c,h,y,x){var S,T=1/Math.tan(c/2);return s[0]=T/h,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=T,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,null!=x&&x!==1/0?(s[10]=(x+y)*(S=1/(y-x)),s[14]=2*x*y*S):(s[10]=-1,s[14]=-2*y),s},b.pick=function(s,c){for(var h={},y=0;y<c.length;y++){var x=c[y];x in s&&(h[x]=s[x])}return h},b.plugin=ci,b.polygonIntersectsPolygon=oa,b.postMapLoadEvent=zr,b.postTurnstileEvent=Mt,b.potpack=Tg,b.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],b.register=Yt,b.registerForPluginStateChange=function(s){return s({pluginStatus:yo,pluginURL:Pu}),uh.on("pluginStateChange",s),s},b.renderColorRamp=y_,b.rotate=function(s,c,h){var y=c[0],x=c[1],S=c[2],T=c[3],k=Math.sin(h),q=Math.cos(h);return s[0]=y*q+S*k,s[1]=x*q+T*k,s[2]=y*-k+S*q,s[3]=x*-k+T*q,s},b.rotateX=function(s,c,h){var y=Math.sin(h),x=Math.cos(h),S=c[4],T=c[5],k=c[6],q=c[7],$=c[8],Q=c[9],re=c[10],le=c[11];return c!==s&&(s[0]=c[0],s[1]=c[1],s[2]=c[2],s[3]=c[3],s[12]=c[12],s[13]=c[13],s[14]=c[14],s[15]=c[15]),s[4]=S*x+$*y,s[5]=T*x+Q*y,s[6]=k*x+re*y,s[7]=q*x+le*y,s[8]=$*x-S*y,s[9]=Q*x-T*y,s[10]=re*x-k*y,s[11]=le*x-q*y,s},b.rotateZ=function(s,c,h){var y=Math.sin(h),x=Math.cos(h),S=c[0],T=c[1],k=c[2],q=c[3],$=c[4],Q=c[5],re=c[6],le=c[7];return c!==s&&(s[8]=c[8],s[9]=c[9],s[10]=c[10],s[11]=c[11],s[12]=c[12],s[13]=c[13],s[14]=c[14],s[15]=c[15]),s[0]=S*x+$*y,s[1]=T*x+Q*y,s[2]=k*x+re*y,s[3]=q*x+le*y,s[4]=$*x-S*y,s[5]=Q*x-T*y,s[6]=re*x-k*y,s[7]=le*x-q*y,s},b.scale=function(s,c,h){var y=h[0],x=h[1],S=h[2];return s[0]=c[0]*y,s[1]=c[1]*y,s[2]=c[2]*y,s[3]=c[3]*y,s[4]=c[4]*x,s[5]=c[5]*x,s[6]=c[6]*x,s[7]=c[7]*x,s[8]=c[8]*S,s[9]=c[9]*S,s[10]=c[10]*S,s[11]=c[11]*S,s[12]=c[12],s[13]=c[13],s[14]=c[14],s[15]=c[15],s},b.scale$1=function(s,c,h){return s[0]=c[0]*h,s[1]=c[1]*h,s[2]=c[2]*h,s[3]=c[3]*h,s},b.scale$2=function(s,c,h){return s[0]=c[0]*h,s[1]=c[1]*h,s[2]=c[2]*h,s},b.setCacheLimits=function(s,c){jr=s,Wi=c},b.setRTLTextPlugin=function(s,c,h){if(void 0===h&&(h=!1),"deferred"===yo||"loading"===yo||"loaded"===yo)throw new Error("setRTLTextPlugin cannot be called multiple times.");Pu=Sn.resolveURL(s),yo="deferred",sh=c,Lc(),h||Tp()},b.sphericalToCartesian=function(s){var c=s[0],h=s[1],y=s[2];return h+=90,h*=Math.PI/180,y*=Math.PI/180,{x:c*Math.cos(h)*Math.sin(y),y:c*Math.sin(h)*Math.sin(y),z:c*Math.cos(y)}},b.sqrLen=function(s){var c=s[0],h=s[1];return c*c+h*h},b.styleSpec=Pe,b.sub=function(s,c,h){return s[0]=c[0]-h[0],s[1]=c[1]-h[1],s[2]=c[2]-h[2],s},b.symbolSize=n1,b.transformMat3=function(s,c,h){var y=c[0],x=c[1],S=c[2];return s[0]=y*h[0]+x*h[3]+S*h[6],s[1]=y*h[1]+x*h[4]+S*h[7],s[2]=y*h[2]+x*h[5]+S*h[8],s},b.transformMat4=_l,b.translate=function(s,c,h){var y,x,S,T,k,q,$,Q,re,le,_e,Ae,Oe=h[0],Ze=h[1],Ue=h[2];return c===s?(s[12]=c[0]*Oe+c[4]*Ze+c[8]*Ue+c[12],s[13]=c[1]*Oe+c[5]*Ze+c[9]*Ue+c[13],s[14]=c[2]*Oe+c[6]*Ze+c[10]*Ue+c[14],s[15]=c[3]*Oe+c[7]*Ze+c[11]*Ue+c[15]):(x=c[1],S=c[2],T=c[3],k=c[4],q=c[5],$=c[6],Q=c[7],re=c[8],le=c[9],_e=c[10],Ae=c[11],s[0]=y=c[0],s[1]=x,s[2]=S,s[3]=T,s[4]=k,s[5]=q,s[6]=$,s[7]=Q,s[8]=re,s[9]=le,s[10]=_e,s[11]=Ae,s[12]=y*Oe+k*Ze+re*Ue+c[12],s[13]=x*Oe+q*Ze+le*Ue+c[13],s[14]=S*Oe+$*Ze+_e*Ue+c[14],s[15]=T*Oe+Q*Ze+Ae*Ue+c[15]),s},b.triggerPluginCompletionEvent=na,b.uniqueId=Xe,b.validateCustomStyleLayer=function(s){var c=[],h=s.id;return void 0===h&&c.push({message:"layers."+h+': missing required property "id"'}),void 0===s.render&&c.push({message:"layers."+h+': missing required method "render"'}),s.renderingMode&&"2d"!==s.renderingMode&&"3d"!==s.renderingMode&&c.push({message:"layers."+h+': property "renderingMode" must be either "2d" or "3d"'}),c},b.validateLight=__,b.validateStyle=Bd,b.values=function(s){var c=[];for(var h in s)c.push(s[h]);return c},b.vectorTile=xl,b.version="1.15.3",b.warnOnce=D,b.webpSupported=Cn,b.window=B,b.wrap=we}),ie(0,function(b){function H(oe){var ce=typeof oe;if("number"===ce||"boolean"===ce||"string"===ce||null==oe)return JSON.stringify(oe);if(Array.isArray(oe)){for(var ve="[",Se=0,Le=oe;Se<Le.length;Se+=1)ve+=H(Le[Se])+",";return ve+"]"}for(var Je=Object.keys(oe).sort(),et="{",Ke=0;Ke<Je.length;Ke++)et+=JSON.stringify(Je[Ke])+":"+H(oe[Je[Ke]])+",";return et+"}"}function X(oe){for(var ce="",ve=0,Se=b.refProperties;ve<Se.length;ve+=1)ce+="/"+H(oe[Se[ve]]);return ce}var z=function(oe){this.keyCache={},oe&&this.replace(oe)};z.prototype.replace=function(oe){this._layerConfigs={},this._layers={},this.update(oe,[])},z.prototype.update=function(oe,ce){for(var ve=this,Se=0,Le=oe;Se<Le.length;Se+=1){var Je=Le[Se];this._layerConfigs[Je.id]=Je;var et=this._layers[Je.id]=b.createStyleLayer(Je);et._featureFilter=b.featureFilter(et.filter),this.keyCache[Je.id]&&delete this.keyCache[Je.id]}for(var Ke=0,Pe=ce;Ke<Pe.length;Ke+=1){var je=Pe[Ke];delete this.keyCache[je],delete this._layerConfigs[je],delete this._layers[je]}this.familiesBySource={};for(var Dt=0,Bt=function(qt,It){for(var On={},Tn=0;Tn<qt.length;Tn++){var nn=It&&It[qt[Tn].id]||X(qt[Tn]);It&&(It[qt[Tn].id]=nn);var Fr=On[nn];Fr||(Fr=On[nn]=[]),Fr.push(qt[Tn])}var $n=[];for(var Xr in On)$n.push(On[Xr]);return $n}(b.values(this._layerConfigs),this.keyCache);Dt<Bt.length;Dt+=1){var lt=Bt[Dt].map(function(qt){return ve._layers[qt.id]}),Et=lt[0];if("none"!==Et.visibility){var Jt=Et.source||"",Ht=this.familiesBySource[Jt];Ht||(Ht=this.familiesBySource[Jt]={});var sn=Et.sourceLayer||"_geojsonTileLayer",Pt=Ht[sn];Pt||(Pt=Ht[sn]=[]),Pt.push(lt)}}};var M=function(oe){var ce={},ve=[];for(var Se in oe){var Le=oe[Se],Je=ce[Se]={};for(var et in Le){var Ke=Le[+et];if(Ke&&0!==Ke.bitmap.width&&0!==Ke.bitmap.height){var Pe={x:0,y:0,w:Ke.bitmap.width+2,h:Ke.bitmap.height+2};ve.push(Pe),Je[et]={rect:Pe,metrics:Ke.metrics}}}}var je=b.potpack(ve),Dt=new b.AlphaImage({width:je.w||1,height:je.h||1});for(var Bt in oe){var lt=oe[Bt];for(var Et in lt){var Jt=lt[+Et];if(Jt&&0!==Jt.bitmap.width&&0!==Jt.bitmap.height){var Ht=ce[Bt][Et].rect;b.AlphaImage.copy(Jt.bitmap,Dt,{x:0,y:0},{x:Ht.x+1,y:Ht.y+1},Jt.bitmap)}}}this.image=Dt,this.positions=ce};b.register("GlyphAtlas",M);var L=function(oe){this.tileID=new b.OverscaledTileID(oe.tileID.overscaledZ,oe.tileID.wrap,oe.tileID.canonical.z,oe.tileID.canonical.x,oe.tileID.canonical.y),this.uid=oe.uid,this.zoom=oe.zoom,this.pixelRatio=oe.pixelRatio,this.tileSize=oe.tileSize,this.source=oe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=oe.showCollisionBoxes,this.collectResourceTiming=!!oe.collectResourceTiming,this.returnDependencies=!!oe.returnDependencies,this.promoteId=oe.promoteId};function B(oe,ce,ve){for(var Se=new b.EvaluationParameters(ce),Le=0,Je=oe;Le<Je.length;Le+=1)Je[Le].recalculate(Se,ve)}function W(oe,ce){var ve=b.getArrayBuffer(oe.request,function(Se,Le,Je,et){Se?ce(Se):Le&&ce(null,{vectorTile:new b.vectorTile.VectorTile(new b.pbf(Le)),rawData:Le,cacheControl:Je,expires:et})});return function(){ve.cancel(),ce()}}L.prototype.parse=function(oe,ce,ve,Se,Le){var Je=this;this.status="parsing",this.data=oe,this.collisionBoxArray=new b.CollisionBoxArray;var et=new b.DictionaryCoder(Object.keys(oe.layers).sort()),Ke=new b.FeatureIndex(this.tileID,this.promoteId);Ke.bucketLayerIDs=[];var Pe,je,Dt,Bt,lt={},Et={featureIndex:Ke,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ve},Jt=ce.familiesBySource[this.source];for(var Ht in Jt){var sn=oe.layers[Ht];if(sn){1===sn.version&&b.warnOnce('Vector tile source "'+this.source+'" layer "'+Ht+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Pt=et.encode(Ht),qt=[],It=0;It<sn.length;It++){var On=sn.feature(It),Tn=Ke.getId(On,Ht);qt.push({feature:On,id:Tn,index:It,sourceLayerIndex:Pt})}for(var nn=0,Fr=Jt[Ht];nn<Fr.length;nn+=1){var $n=Fr[nn],Xr=$n[0];Xr.minzoom&&this.zoom<Math.floor(Xr.minzoom)||Xr.maxzoom&&this.zoom>=Xr.maxzoom||"none"!==Xr.visibility&&(B($n,this.zoom,ve),(lt[Xr.id]=Xr.createBucket({index:Ke.bucketLayerIDs.length,layers:$n,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Pt,sourceID:this.source})).populate(qt,Et,this.tileID.canonical),Ke.bucketLayerIDs.push($n.map(function(Gr){return Gr.id})))}}}var ei=b.mapObject(Et.glyphDependencies,function(Gr){return Object.keys(Gr).map(Number)});Object.keys(ei).length?Se.send("getGlyphs",{uid:this.uid,stacks:ei},function(Gr,Kn){Pe||(Pe=Gr,je=Kn,li.call(Je))}):je={};var pr=Object.keys(Et.iconDependencies);pr.length?Se.send("getImages",{icons:pr,source:this.source,tileID:this.tileID,type:"icons"},function(Gr,Kn){Pe||(Pe=Gr,Dt=Kn,li.call(Je))}):Dt={};var Vr=Object.keys(Et.patternDependencies);function li(){if(Pe)return Le(Pe);if(je&&Dt&&Bt){var Gr=new M(je),Kn=new b.ImageAtlas(Dt,Bt);for(var Di in lt){var ir=lt[Di];ir instanceof b.SymbolBucket?(B(ir.layers,this.zoom,ve),b.performSymbolLayout(ir,je,Gr.positions,Dt,Kn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):ir.hasPattern&&(ir instanceof b.LineBucket||ir instanceof b.FillBucket||ir instanceof b.FillExtrusionBucket)&&(B(ir.layers,this.zoom,ve),ir.addFeatures(Et,this.tileID.canonical,Kn.patternPositions))}this.status="done",Le(null,{buckets:b.values(lt).filter(function(Rs){return!Rs.isEmpty()}),featureIndex:Ke,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Gr.image,imageAtlas:Kn,glyphMap:this.returnDependencies?je:null,iconMap:this.returnDependencies?Dt:null,glyphPositions:this.returnDependencies?Gr.positions:null})}}Vr.length?Se.send("getImages",{icons:Vr,source:this.source,tileID:this.tileID,type:"patterns"},function(Gr,Kn){Pe||(Pe=Gr,Bt=Kn,li.call(Je))}):Bt={},li.call(this)};var ee=function(oe,ce,ve,Se){this.actor=oe,this.layerIndex=ce,this.availableImages=ve,this.loadVectorData=Se||W,this.loading={},this.loaded={}};ee.prototype.loadTile=function(oe,ce){var ve=this,Se=oe.uid;this.loading||(this.loading={});var Le=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new b.RequestPerformance(oe.request),Je=this.loading[Se]=new L(oe);Je.abort=this.loadVectorData(oe,function(et,Ke){if(delete ve.loading[Se],et||!Ke)return Je.status="done",ve.loaded[Se]=Je,ce(et);var Pe=Ke.rawData,je={};Ke.expires&&(je.expires=Ke.expires),Ke.cacheControl&&(je.cacheControl=Ke.cacheControl);var Dt={};if(Le){var Bt=Le.finish();Bt&&(Dt.resourceTiming=JSON.parse(JSON.stringify(Bt)))}Je.vectorTile=Ke.vectorTile,Je.parse(Ke.vectorTile,ve.layerIndex,ve.availableImages,ve.actor,function(lt,Et){if(lt||!Et)return ce(lt);ce(null,b.extend({rawTileData:Pe.slice(0)},Et,je,Dt))}),ve.loaded=ve.loaded||{},ve.loaded[Se]=Je})},ee.prototype.reloadTile=function(oe,ce){var ve=this,Se=this.loaded,Le=oe.uid,Je=this;if(Se&&Se[Le]){var et=Se[Le];et.showCollisionBoxes=oe.showCollisionBoxes;var Ke=function(Pe,je){var Dt=et.reloadCallback;Dt&&(delete et.reloadCallback,et.parse(et.vectorTile,Je.layerIndex,ve.availableImages,Je.actor,Dt)),ce(Pe,je)};"parsing"===et.status?et.reloadCallback=Ke:"done"===et.status&&(et.vectorTile?et.parse(et.vectorTile,this.layerIndex,this.availableImages,this.actor,Ke):Ke())}},ee.prototype.abortTile=function(oe,ce){var ve=this.loading,Se=oe.uid;ve&&ve[Se]&&ve[Se].abort&&(ve[Se].abort(),delete ve[Se]),ce()},ee.prototype.removeTile=function(oe,ce){var ve=this.loaded,Se=oe.uid;ve&&ve[Se]&&delete ve[Se],ce()};var ue=b.window.ImageBitmap,fe=function(){this.loaded={}};function we(oe,ce){if(0!==oe.length){ge(oe[0],ce);for(var ve=1;ve<oe.length;ve++)ge(oe[ve],!ce)}}function ge(oe,ce){for(var ve=0,Se=0,Le=oe.length,Je=Le-1;Se<Le;Je=Se++)ve+=(oe[Se][0]-oe[Je][0])*(oe[Je][1]+oe[Se][1]);ve>=0!=!!ce&&oe.reverse()}fe.prototype.loadTile=function(oe,ce){var ve=oe.uid,Se=oe.encoding,Le=oe.rawImageData,Je=ue&&Le instanceof ue?this.getImageData(Le):Le,et=new b.DEMData(ve,Je,Se);this.loaded=this.loaded||{},this.loaded[ve]=et,ce(null,et)},fe.prototype.getImageData=function(oe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(oe.width,oe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=oe.width,this.offscreenCanvas.height=oe.height,this.offscreenCanvasContext.drawImage(oe,0,0,oe.width,oe.height);var ce=this.offscreenCanvasContext.getImageData(-1,-1,oe.width+2,oe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new b.RGBAImage({width:ce.width,height:ce.height},ce.data)},fe.prototype.removeTile=function(oe){var ce=this.loaded,ve=oe.uid;ce&&ce[ve]&&delete ce[ve]};var Ie=b.vectorTile.VectorTileFeature.prototype.toGeoJSON,Xe=function(oe){this._feature=oe,this.extent=b.EXTENT,this.type=oe.type,this.properties=oe.tags,"id"in oe&&!isNaN(oe.id)&&(this.id=parseInt(oe.id,10))};Xe.prototype.loadGeometry=function(){if(1===this._feature.type){for(var oe=[],ce=0,ve=this._feature.geometry;ce<ve.length;ce+=1){var Se=ve[ce];oe.push([new b.Point$1(Se[0],Se[1])])}return oe}for(var Le=[],Je=0,et=this._feature.geometry;Je<et.length;Je+=1){for(var Ke=[],Pe=0,je=et[Je];Pe<je.length;Pe+=1){var Dt=je[Pe];Ke.push(new b.Point$1(Dt[0],Dt[1]))}Le.push(Ke)}return Le},Xe.prototype.toGeoJSON=function(oe,ce,ve){return Ie.call(this,oe,ce,ve)};var pe=function(oe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=b.EXTENT,this.length=oe.length,this._features=oe};pe.prototype.feature=function(oe){return new Xe(this._features[oe])};var he=b.vectorTile.VectorTileFeature,Te=Fe;function Fe(oe,ce){this.options=ce||{},this.features=oe,this.length=oe.length}function at(oe,ce){this.id="number"==typeof oe.id?oe.id:void 0,this.type=oe.type,this.rawGeometry=1===oe.type?[oe.geometry]:oe.geometry,this.properties=oe.tags,this.extent=ce||4096}Fe.prototype.feature=function(oe){return new at(this.features[oe],this.options.extent)},at.prototype.loadGeometry=function(){var oe=this.rawGeometry;this.geometry=[];for(var ce=0;ce<oe.length;ce++){for(var ve=oe[ce],Se=[],Le=0;Le<ve.length;Le++)Se.push(new b.Point$1(ve[Le][0],ve[Le][1]));this.geometry.push(Se)}return this.geometry},at.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var oe=this.geometry,ce=1/0,ve=-1/0,Se=1/0,Le=-1/0,Je=0;Je<oe.length;Je++)for(var et=oe[Je],Ke=0;Ke<et.length;Ke++){var Pe=et[Ke];ce=Math.min(ce,Pe.x),ve=Math.max(ve,Pe.x),Se=Math.min(Se,Pe.y),Le=Math.max(Le,Pe.y)}return[ce,Se,ve,Le]},at.prototype.toGeoJSON=he.prototype.toGeoJSON;var Ye=P,Ge=Te;function P(oe){var ce=new b.pbf;return function(ve,Se){for(var Le in ve.layers)Se.writeMessage(3,D,ve.layers[Le])}(oe,ce),ce.finish()}function D(oe,ce){var ve;ce.writeVarintField(15,oe.version||1),ce.writeStringField(1,oe.name||""),ce.writeVarintField(5,oe.extent||4096);var Se={keys:[],values:[],keycache:{},valuecache:{}};for(ve=0;ve<oe.length;ve++)Se.feature=oe.feature(ve),ce.writeMessage(2,N,Se);var Le=Se.keys;for(ve=0;ve<Le.length;ve++)ce.writeStringField(3,Le[ve]);var Je=Se.values;for(ve=0;ve<Je.length;ve++)ce.writeMessage(4,$e,Je[ve])}function N(oe,ce){var ve=oe.feature;void 0!==ve.id&&ce.writeVarintField(1,ve.id),ce.writeMessage(2,V,oe),ce.writeVarintField(3,ve.type),ce.writeMessage(4,de,ve)}function V(oe,ce){var ve=oe.feature,Se=oe.keys,Le=oe.values,Je=oe.keycache,et=oe.valuecache;for(var Ke in ve.properties){var Pe=Je[Ke];void 0===Pe&&(Se.push(Ke),Je[Ke]=Pe=Se.length-1),ce.writeVarint(Pe);var je=ve.properties[Ke],Dt=typeof je;"string"!==Dt&&"boolean"!==Dt&&"number"!==Dt&&(je=JSON.stringify(je));var Bt=Dt+":"+je,lt=et[Bt];void 0===lt&&(Le.push(je),et[Bt]=lt=Le.length-1),ce.writeVarint(lt)}}function Z(oe,ce){return(ce<<3)+(7&oe)}function j(oe){return oe<<1^oe>>31}function de(oe,ce){for(var ve=oe.loadGeometry(),Se=oe.type,Le=0,Je=0,et=ve.length,Ke=0;Ke<et;Ke++){var Pe=ve[Ke],je=1;1===Se&&(je=Pe.length),ce.writeVarint(Z(1,je));for(var Dt=3===Se?Pe.length-1:Pe.length,Bt=0;Bt<Dt;Bt++){1===Bt&&1!==Se&&ce.writeVarint(Z(2,Dt-1));var lt=Pe[Bt].x-Le,Et=Pe[Bt].y-Je;ce.writeVarint(j(lt)),ce.writeVarint(j(Et)),Le+=lt,Je+=Et}3===Se&&ce.writeVarint(Z(7,1))}}function $e(oe,ce){var ve=typeof oe;"string"===ve?ce.writeStringField(1,oe):"boolean"===ve?ce.writeBooleanField(7,oe):"number"===ve&&(oe%1!=0?ce.writeDoubleField(3,oe):oe<0?ce.writeSVarintField(6,oe):ce.writeVarintField(5,oe))}function _t(oe,ce,ve,Se){xe(oe,ve,Se),xe(ce,2*ve,2*Se),xe(ce,2*ve+1,2*Se+1)}function xe(oe,ce,ve){var Se=oe[ce];oe[ce]=oe[ve],oe[ve]=Se}function pt(oe,ce,ve,Se){var Le=oe-ve,Je=ce-Se;return Le*Le+Je*Je}Ye.fromVectorTileJs=P,Ye.fromGeojsonVt=function(oe,ce){ce=ce||{};var ve={};for(var Se in oe)ve[Se]=new Te(oe[Se].features,ce),ve[Se].name=Se,ve[Se].version=ce.version,ve[Se].extent=ce.extent;return P({layers:ve})},Ye.GeoJSONWrapper=Ge;var vt=function(oe){return oe[0]},We=function(oe){return oe[1]},yt=function(oe,ce,ve,Se,Le){void 0===ce&&(ce=vt),void 0===ve&&(ve=We),void 0===Se&&(Se=64),void 0===Le&&(Le=Float64Array),this.nodeSize=Se,this.points=oe;for(var Je=oe.length<65536?Uint16Array:Uint32Array,et=this.ids=new Je(oe.length),Ke=this.coords=new Le(2*oe.length),Pe=0;Pe<oe.length;Pe++)et[Pe]=Pe,Ke[2*Pe]=ce(oe[Pe]),Ke[2*Pe+1]=ve(oe[Pe]);!function je(Dt,Bt,lt,Et,Jt,Ht){if(!(Jt-Et<=lt)){var sn=Et+Jt>>1;(function Pt(qt,It,On,Tn,nn,Fr){for(;nn>Tn;){if(nn-Tn>600){var $n=nn-Tn+1,Xr=On-Tn+1,ei=Math.log($n),pr=.5*Math.exp(2*ei/3),Vr=.5*Math.sqrt(ei*pr*($n-pr)/$n)*(Xr-$n/2<0?-1:1);Pt(qt,It,On,Math.max(Tn,Math.floor(On-Xr*pr/$n+Vr)),Math.min(nn,Math.floor(On+($n-Xr)*pr/$n+Vr)),Fr)}var li=It[2*On+Fr],Gr=Tn,Kn=nn;for(_t(qt,It,Tn,On),It[2*nn+Fr]>li&&_t(qt,It,Tn,nn);Gr<Kn;){for(_t(qt,It,Gr,Kn),Gr++,Kn--;It[2*Gr+Fr]<li;)Gr++;for(;It[2*Kn+Fr]>li;)Kn--}It[2*Tn+Fr]===li?_t(qt,It,Tn,Kn):_t(qt,It,++Kn,nn),Kn<=On&&(Tn=Kn+1),On<=Kn&&(nn=Kn-1)}})(Dt,Bt,sn,Et,Jt,Ht%2),je(Dt,Bt,lt,Et,sn-1,Ht+1),je(Dt,Bt,lt,sn+1,Jt,Ht+1)}}(et,Ke,Se,0,et.length-1,0)};yt.prototype.range=function(oe,ce,ve,Se){return function(Le,Je,et,Ke,Pe,je,Dt){for(var Bt,lt,Et=[0,Le.length-1,0],Jt=[];Et.length;){var Ht=Et.pop(),sn=Et.pop(),Pt=Et.pop();if(sn-Pt<=Dt)for(var qt=Pt;qt<=sn;qt++)lt=Je[2*qt+1],(Bt=Je[2*qt])>=et&&Bt<=Pe&&lt>=Ke&&lt<=je&&Jt.push(Le[qt]);else{var It=Math.floor((Pt+sn)/2);lt=Je[2*It+1],(Bt=Je[2*It])>=et&&Bt<=Pe&&lt>=Ke&&lt<=je&&Jt.push(Le[It]);var On=(Ht+1)%2;(0===Ht?et<=Bt:Ke<=lt)&&(Et.push(Pt),Et.push(It-1),Et.push(On)),(0===Ht?Pe>=Bt:je>=lt)&&(Et.push(It+1),Et.push(sn),Et.push(On))}}return Jt}(this.ids,this.coords,oe,ce,ve,Se,this.nodeSize)},yt.prototype.within=function(oe,ce,ve){return function(Se,Le,Je,et,Ke,Pe){for(var je=[0,Se.length-1,0],Dt=[],Bt=Ke*Ke;je.length;){var lt=je.pop(),Et=je.pop(),Jt=je.pop();if(Et-Jt<=Pe)for(var Ht=Jt;Ht<=Et;Ht++)pt(Le[2*Ht],Le[2*Ht+1],Je,et)<=Bt&&Dt.push(Se[Ht]);else{var sn=Math.floor((Jt+Et)/2),Pt=Le[2*sn],qt=Le[2*sn+1];pt(Pt,qt,Je,et)<=Bt&&Dt.push(Se[sn]);var It=(lt+1)%2;(0===lt?Je-Ke<=Pt:et-Ke<=qt)&&(je.push(Jt),je.push(sn-1),je.push(It)),(0===lt?Je+Ke>=Pt:et+Ke>=qt)&&(je.push(sn+1),je.push(Et),je.push(It))}}return Dt}(this.ids,this.coords,oe,ce,ve,this.nodeSize)};var Kt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(oe){return oe}},tn=function(oe){this.options=K(Object.create(Kt),oe),this.trees=new Array(this.options.maxZoom+1)};function Sn(oe,ce,ve,Se,Le){return{x:oe,y:ce,zoom:1/0,id:ve,parentId:-1,numPoints:Se,properties:Le}}function xt(oe,ce){var ve=oe.geometry.coordinates,Se=ve[1];return{x:sr(ve[0]),y:Ut(Se),zoom:1/0,index:ce,parentId:-1}}function Cn(oe){return{type:"Feature",id:oe.id,properties:gn(oe),geometry:{type:"Point",coordinates:[(Se=oe.x,360*(Se-.5)),(ce=oe.y,ve=(180-360*ce)*Math.PI/180,360*Math.atan(Math.exp(ve))/Math.PI-90)]}};var ce,ve,Se}function gn(oe){var ce=oe.numPoints,ve=ce>=1e4?Math.round(ce/1e3)+"k":ce>=1e3?Math.round(ce/100)/10+"k":ce;return K(K({},oe.properties),{cluster:!0,cluster_id:oe.id,point_count:ce,point_count_abbreviated:ve})}function sr(oe){return oe/360+.5}function Ut(oe){var ce=Math.sin(oe*Math.PI/180),ve=.5-.25*Math.log((1+ce)/(1-ce))/Math.PI;return ve<0?0:ve>1?1:ve}function K(oe,ce){for(var ve in ce)oe[ve]=ce[ve];return oe}function rr(oe){return oe.x}function fr(oe){return oe.y}function Xi(oe,ce,ve,Se,Le,Je){var et=Le-ve,Ke=Je-Se;if(0!==et||0!==Ke){var Pe=((oe-ve)*et+(ce-Se)*Ke)/(et*et+Ke*Ke);Pe>1?(ve=Le,Se=Je):Pe>0&&(ve+=et*Pe,Se+=Ke*Pe)}return(et=oe-ve)*et+(Ke=ce-Se)*Ke}function _i(oe,ce,ve,Se){var Le={id:void 0===oe?null:oe,type:ce,geometry:ve,tags:Se,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Je){var et=Je.geometry,Ke=Je.type;if("Point"===Ke||"MultiPoint"===Ke||"LineString"===Ke)wt(Je,et);else if("Polygon"===Ke||"MultiLineString"===Ke)for(var Pe=0;Pe<et.length;Pe++)wt(Je,et[Pe]);else if("MultiPolygon"===Ke)for(Pe=0;Pe<et.length;Pe++)for(var je=0;je<et[Pe].length;je++)wt(Je,et[Pe][je])}(Le),Le}function wt(oe,ce){for(var ve=0;ve<ce.length;ve+=3)oe.minX=Math.min(oe.minX,ce[ve]),oe.minY=Math.min(oe.minY,ce[ve+1]),oe.maxX=Math.max(oe.maxX,ce[ve]),oe.maxY=Math.max(oe.maxY,ce[ve+1])}function bt(oe,ce,ve,Se){if(ce.geometry){var Le=ce.geometry.coordinates,Je=ce.geometry.type,et=Math.pow(ve.tolerance/((1<<ve.maxZoom)*ve.extent),2),Ke=[],Pe=ce.id;if(ve.promoteId?Pe=ce.properties[ve.promoteId]:ve.generateId&&(Pe=Se||0),"Point"===Je)ha(Le,Ke);else if("MultiPoint"===Je)for(var je=0;je<Le.length;je++)ha(Le[je],Ke);else if("LineString"===Je)Me(Le,Ke,et,!1);else if("MultiLineString"===Je){if(ve.lineMetrics){for(je=0;je<Le.length;je++)Me(Le[je],Ke=[],et,!1),oe.push(_i(Pe,"LineString",Ke,ce.properties));return}te(Le,Ke,et,!1)}else if("Polygon"===Je)te(Le,Ke,et,!0);else{if("MultiPolygon"!==Je){if("GeometryCollection"===Je){for(je=0;je<ce.geometry.geometries.length;je++)bt(oe,{id:Pe,geometry:ce.geometry.geometries[je],properties:ce.properties},ve,Se);return}throw new Error("Input data is not a valid GeoJSON object.")}for(je=0;je<Le.length;je++){var Dt=[];te(Le[je],Dt,et,!0),Ke.push(Dt)}}oe.push(_i(Pe,Je,Ke,ce.properties))}}function ha(oe,ce){ce.push(ne(oe[0])),ce.push(ze(oe[1])),ce.push(0)}function Me(oe,ce,ve,Se){for(var Le,Je,et=0,Ke=0;Ke<oe.length;Ke++){var Pe=ne(oe[Ke][0]),je=ze(oe[Ke][1]);ce.push(Pe),ce.push(je),ce.push(0),Ke>0&&(et+=Se?(Le*je-Pe*Je)/2:Math.sqrt(Math.pow(Pe-Le,2)+Math.pow(je-Je,2))),Le=Pe,Je=je}var Dt=ce.length-3;ce[2]=1,function Bt(lt,Et,Jt,Ht){for(var sn,Pt=Ht,qt=Jt-Et>>1,It=Jt-Et,On=lt[Et],Tn=lt[Et+1],nn=lt[Jt],Fr=lt[Jt+1],$n=Et+3;$n<Jt;$n+=3){var Xr=Xi(lt[$n],lt[$n+1],On,Tn,nn,Fr);if(Xr>Pt)sn=$n,Pt=Xr;else if(Xr===Pt){var ei=Math.abs($n-qt);ei<It&&(sn=$n,It=ei)}}Pt>Ht&&(sn-Et>3&&Bt(lt,Et,sn,Ht),lt[sn+2]=Pt,Jt-sn>3&&Bt(lt,sn,Jt,Ht))}(ce,0,Dt,ve),ce[Dt+2]=1,ce.size=Math.abs(et),ce.start=0,ce.end=ce.size}function te(oe,ce,ve,Se){for(var Le=0;Le<oe.length;Le++){var Je=[];Me(oe[Le],Je,ve,Se),ce.push(Je)}}function ne(oe){return oe/360+.5}function ze(oe){var ce=Math.sin(oe*Math.PI/180),ve=.5-.25*Math.log((1+ce)/(1-ce))/Math.PI;return ve<0?0:ve>1?1:ve}function ut(oe,ce,ve,Se,Le,Je,et,Ke){if(Se/=ce,Je>=(ve/=ce)&&et<Se)return oe;if(et<ve||Je>=Se)return null;for(var Pe=[],je=0;je<oe.length;je++){var Dt=oe[je],Bt=Dt.geometry,lt=Dt.type,Et=0===Le?Dt.minX:Dt.minY,Jt=0===Le?Dt.maxX:Dt.maxY;if(Et>=ve&&Jt<Se)Pe.push(Dt);else if(!(Jt<ve||Et>=Se)){var Ht=[];if("Point"===lt||"MultiPoint"===lt)Rt(Bt,Ht,ve,Se,Le);else if("LineString"===lt)Mt(Bt,Ht,ve,Se,Le,!1,Ke.lineMetrics);else if("MultiLineString"===lt)zr(Bt,Ht,ve,Se,Le,!1);else if("Polygon"===lt)zr(Bt,Ht,ve,Se,Le,!0);else if("MultiPolygon"===lt)for(var sn=0;sn<Bt.length;sn++){var Pt=[];zr(Bt[sn],Pt,ve,Se,Le,!0),Pt.length&&Ht.push(Pt)}if(Ht.length){if(Ke.lineMetrics&&"LineString"===lt){for(sn=0;sn<Ht.length;sn++)Pe.push(_i(Dt.id,lt,Ht[sn],Dt.tags));continue}"LineString"!==lt&&"MultiLineString"!==lt||(1===Ht.length?(lt="LineString",Ht=Ht[0]):lt="MultiLineString"),"Point"!==lt&&"MultiPoint"!==lt||(lt=3===Ht.length?"Point":"MultiPoint"),Pe.push(_i(Dt.id,lt,Ht,Dt.tags))}}}return Pe.length?Pe:null}function Rt(oe,ce,ve,Se,Le){for(var Je=0;Je<oe.length;Je+=3){var et=oe[Je+Le];et>=ve&&et<=Se&&(ce.push(oe[Je]),ce.push(oe[Je+1]),ce.push(oe[Je+2]))}}function Mt(oe,ce,ve,Se,Le,Je,et){for(var Ke,Pe,je=hr(oe),Dt=0===Le?Wi:Kr,Bt=oe.start,lt=0;lt<oe.length-3;lt+=3){var Et=oe[lt],Jt=oe[lt+1],Ht=oe[lt+2],sn=oe[lt+3],Pt=oe[lt+4],qt=0===Le?Et:Jt,It=0===Le?sn:Pt,On=!1;et&&(Ke=Math.sqrt(Math.pow(Et-sn,2)+Math.pow(Jt-Pt,2))),qt<ve?It>ve&&(Pe=Dt(je,Et,Jt,sn,Pt,ve),et&&(je.start=Bt+Ke*Pe)):qt>Se?It<Se&&(Pe=Dt(je,Et,Jt,sn,Pt,Se),et&&(je.start=Bt+Ke*Pe)):jr(je,Et,Jt,Ht),It<ve&&qt>=ve&&(Pe=Dt(je,Et,Jt,sn,Pt,ve),On=!0),It>Se&&qt<=Se&&(Pe=Dt(je,Et,Jt,sn,Pt,Se),On=!0),!Je&&On&&(et&&(je.end=Bt+Ke*Pe),ce.push(je),je=hr(oe)),et&&(Bt+=Ke)}var Tn=oe.length-3;Et=oe[Tn],Jt=oe[Tn+1],Ht=oe[Tn+2],(qt=0===Le?Et:Jt)>=ve&&qt<=Se&&jr(je,Et,Jt,Ht),Tn=je.length-3,Je&&Tn>=3&&(je[Tn]!==je[0]||je[Tn+1]!==je[1])&&jr(je,je[0],je[1],je[2]),je.length&&ce.push(je)}function hr(oe){var ce=[];return ce.size=oe.size,ce.start=oe.start,ce.end=oe.end,ce}function zr(oe,ce,ve,Se,Le,Je){for(var et=0;et<oe.length;et++)Mt(oe[et],ce,ve,Se,Le,Je,!1)}function jr(oe,ce,ve,Se){oe.push(ce),oe.push(ve),oe.push(Se)}function Wi(oe,ce,ve,Se,Le,Je){var et=(Je-ce)/(Se-ce);return oe.push(Je),oe.push(ve+(Le-ve)*et),oe.push(1),et}function Kr(oe,ce,ve,Se,Le,Je){var et=(Je-ve)/(Le-ve);return oe.push(ce+(Se-ce)*et),oe.push(Je),oe.push(1),et}function Ws(oe,ce){for(var ve=[],Se=0;Se<oe.length;Se++){var Le,Je=oe[Se],et=Je.type;if("Point"===et||"MultiPoint"===et||"LineString"===et)Le=Js(Je.geometry,ce);else if("MultiLineString"===et||"Polygon"===et){Le=[];for(var Ke=0;Ke<Je.geometry.length;Ke++)Le.push(Js(Je.geometry[Ke],ce))}else if("MultiPolygon"===et)for(Le=[],Ke=0;Ke<Je.geometry.length;Ke++){for(var Pe=[],je=0;je<Je.geometry[Ke].length;je++)Pe.push(Js(Je.geometry[Ke][je],ce));Le.push(Pe)}ve.push(_i(Je.id,et,Le,Je.tags))}return ve}function Js(oe,ce){var ve=[];ve.size=oe.size,void 0!==oe.start&&(ve.start=oe.start,ve.end=oe.end);for(var Se=0;Se<oe.length;Se+=3)ve.push(oe[Se]+ce,oe[Se+1],oe[Se+2]);return ve}function Wu(oe,ce){if(oe.transformed)return oe;var ve,Se,Le,Je=1<<oe.z,et=oe.x,Ke=oe.y;for(ve=0;ve<oe.features.length;ve++){var Pe=oe.features[ve],je=Pe.geometry,Dt=Pe.type;if(Pe.geometry=[],1===Dt)for(Se=0;Se<je.length;Se+=2)Pe.geometry.push(Td(je[Se],je[Se+1],ce,Je,et,Ke));else for(Se=0;Se<je.length;Se++){var Bt=[];for(Le=0;Le<je[Se].length;Le+=2)Bt.push(Td(je[Se][Le],je[Se][Le+1],ce,Je,et,Ke));Pe.geometry.push(Bt)}}return oe.transformed=!0,oe}function Td(oe,ce,ve,Se,Le,Je){return[Math.round(ve*(oe*Se-Le)),Math.round(ve*(ce*Se-Je))]}function Wf(oe,ce,ve,Se,Le){for(var Je=ce===Le.maxZoom?0:Le.tolerance/((1<<ce)*Le.extent),et={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ve,y:Se,z:ce,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ke=0;Ke<oe.length;Ke++){et.numFeatures++,Tc(et,oe[Ke],Je,Le);var Pe=oe[Ke].minX,je=oe[Ke].minY,Dt=oe[Ke].maxX,Bt=oe[Ke].maxY;Pe<et.minX&&(et.minX=Pe),je<et.minY&&(et.minY=je),Dt>et.maxX&&(et.maxX=Dt),Bt>et.maxY&&(et.maxY=Bt)}return et}function Tc(oe,ce,ve,Se){var Le=ce.geometry,Je=ce.type,et=[];if("Point"===Je||"MultiPoint"===Je)for(var Ke=0;Ke<Le.length;Ke+=3)et.push(Le[Ke]),et.push(Le[Ke+1]),oe.numPoints++,oe.numSimplified++;else if("LineString"===Je)gu(et,Le,oe,ve,!1,!1);else if("MultiLineString"===Je||"Polygon"===Je)for(Ke=0;Ke<Le.length;Ke++)gu(et,Le[Ke],oe,ve,"Polygon"===Je,0===Ke);else if("MultiPolygon"===Je)for(var Pe=0;Pe<Le.length;Pe++){var je=Le[Pe];for(Ke=0;Ke<je.length;Ke++)gu(et,je[Ke],oe,ve,!0,0===Ke)}if(et.length){var Dt=ce.tags||null;if("LineString"===Je&&Se.lineMetrics){for(var Bt in Dt={},ce.tags)Dt[Bt]=ce.tags[Bt];Dt.mapbox_clip_start=Le.start/Le.size,Dt.mapbox_clip_end=Le.end/Le.size}var lt={geometry:et,type:"Polygon"===Je||"MultiPolygon"===Je?3:"LineString"===Je||"MultiLineString"===Je?2:1,tags:Dt};null!==ce.id&&(lt.id=ce.id),oe.features.push(lt)}}function gu(oe,ce,ve,Se,Le,Je){var et=Se*Se;if(Se>0&&ce.size<(Le?et:Se))ve.numPoints+=ce.length/3;else{for(var Ke=[],Pe=0;Pe<ce.length;Pe+=3)(0===Se||ce[Pe+2]>et)&&(ve.numSimplified++,Ke.push(ce[Pe]),Ke.push(ce[Pe+1])),ve.numPoints++;Le&&function(je,Dt){for(var Bt=0,lt=0,Et=je.length,Jt=Et-2;lt<Et;Jt=lt,lt+=2)Bt+=(je[lt]-je[Jt])*(je[lt+1]+je[Jt+1]);if(Bt>0===Dt)for(lt=0,Et=je.length;lt<Et/2;lt+=2){var Ht=je[lt],sn=je[lt+1];je[lt]=je[Et-2-lt],je[lt+1]=je[Et-1-lt],je[Et-2-lt]=Ht,je[Et-1-lt]=sn}}(Ke,Je),oe.push(Ke)}}function vu(oe,ce){var ve=(ce=this.options=function(Le,Je){for(var et in Je)Le[et]=Je[et];return Le}(Object.create(this.options),ce)).debug;if(ve&&console.time("preprocess data"),ce.maxZoom<0||ce.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ce.promoteId&&ce.generateId)throw new Error("promoteId and generateId cannot be used together.");var Le,Je,et,Ke,Pe,je,Se=function(Le,Je){var et=[];if("FeatureCollection"===Le.type)for(var Ke=0;Ke<Le.features.length;Ke++)bt(et,Le.features[Ke],Je,Ke);else bt(et,"Feature"===Le.type?Le:{geometry:Le},Je);return et}(oe,ce);this.tiles={},this.tileCoords=[],ve&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ce.indexMaxZoom,ce.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Le=Se,Je=ce,et=Je.buffer/Je.extent,Ke=Le,Pe=ut(Le,1,-1-et,et,0,-1,2,Je),je=ut(Le,1,1-et,2+et,0,-1,2,Je),(Pe||je)&&(Ke=ut(Le,1,-et,1+et,0,-1,2,Je)||[],Pe&&(Ke=Ws(Pe,1).concat(Ke)),je&&(Ke=Ke.concat(Ws(je,-1)))),Se=Ke).length&&this.splitTile(Se,0,0,0),ve&&(Se.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Zs(oe,ce,ve){return 32*((1<<oe)*ve+ce)+oe}function _u(oe,ce){var ve=oe.tileID.canonical;if(!this._geoJSONIndex)return ce(null,null);var Se=this._geoJSONIndex.getTile(ve.z,ve.x,ve.y);if(!Se)return ce(null,null);var Le=new pe(Se.features),Je=Ye(Le);0===Je.byteOffset&&Je.byteLength===Je.buffer.byteLength||(Je=new Uint8Array(Je)),ce(null,{vectorTile:Le,rawData:Je.buffer})}tn.prototype.load=function(oe){var ce=this.options,ve=ce.log,Se=ce.minZoom,Le=ce.maxZoom,Je=ce.nodeSize;ve&&console.time("total time");var et="prepare "+oe.length+" points";ve&&console.time(et),this.points=oe;for(var Ke=[],Pe=0;Pe<oe.length;Pe++)oe[Pe].geometry&&Ke.push(xt(oe[Pe],Pe));this.trees[Le+1]=new yt(Ke,rr,fr,Je,Float32Array),ve&&console.timeEnd(et);for(var je=Le;je>=Se;je--){var Dt=+Date.now();Ke=this._cluster(Ke,je),this.trees[je]=new yt(Ke,rr,fr,Je,Float32Array),ve&&console.log("z%d: %d clusters in %dms",je,Ke.length,+Date.now()-Dt)}return ve&&console.timeEnd("total time"),this},tn.prototype.getClusters=function(oe,ce){var ve=((oe[0]+180)%360+360)%360-180,Se=Math.max(-90,Math.min(90,oe[1])),Le=180===oe[2]?180:((oe[2]+180)%360+360)%360-180,Je=Math.max(-90,Math.min(90,oe[3]));if(oe[2]-oe[0]>=360)ve=-180,Le=180;else if(ve>Le){var et=this.getClusters([ve,Se,180,Je],ce),Ke=this.getClusters([-180,Se,Le,Je],ce);return et.concat(Ke)}for(var Pe=this.trees[this._limitZoom(ce)],je=[],Dt=0,Bt=Pe.range(sr(ve),Ut(Je),sr(Le),Ut(Se));Dt<Bt.length;Dt+=1){var lt=Pe.points[Bt[Dt]];je.push(lt.numPoints?Cn(lt):this.points[lt.index])}return je},tn.prototype.getChildren=function(oe){var ce=this._getOriginId(oe),ve=this._getOriginZoom(oe),Se="No cluster with the specified id.",Le=this.trees[ve];if(!Le)throw new Error(Se);var Je=Le.points[ce];if(!Je)throw new Error(Se);for(var et=this.options.radius/(this.options.extent*Math.pow(2,ve-1)),Ke=[],Pe=0,je=Le.within(Je.x,Je.y,et);Pe<je.length;Pe+=1){var Dt=Le.points[je[Pe]];Dt.parentId===oe&&Ke.push(Dt.numPoints?Cn(Dt):this.points[Dt.index])}if(0===Ke.length)throw new Error(Se);return Ke},tn.prototype.getLeaves=function(oe,ce,ve){var Se=[];return this._appendLeaves(Se,oe,ce=ce||10,ve=ve||0,0),Se},tn.prototype.getTile=function(oe,ce,ve){var Se=this.trees[this._limitZoom(oe)],Le=Math.pow(2,oe),Je=this.options,et=Je.radius/Je.extent,Ke=(ve-et)/Le,Pe=(ve+1+et)/Le,je={features:[]};return this._addTileFeatures(Se.range((ce-et)/Le,Ke,(ce+1+et)/Le,Pe),Se.points,ce,ve,Le,je),0===ce&&this._addTileFeatures(Se.range(1-et/Le,Ke,1,Pe),Se.points,Le,ve,Le,je),ce===Le-1&&this._addTileFeatures(Se.range(0,Ke,et/Le,Pe),Se.points,-1,ve,Le,je),je.features.length?je:null},tn.prototype.getClusterExpansionZoom=function(oe){for(var ce=this._getOriginZoom(oe)-1;ce<=this.options.maxZoom;){var ve=this.getChildren(oe);if(ce++,1!==ve.length)break;oe=ve[0].properties.cluster_id}return ce},tn.prototype._appendLeaves=function(oe,ce,ve,Se,Le){for(var Je=0,et=this.getChildren(ce);Je<et.length;Je+=1){var Ke=et[Je],Pe=Ke.properties;if(Pe&&Pe.cluster?Le+Pe.point_count<=Se?Le+=Pe.point_count:Le=this._appendLeaves(oe,Pe.cluster_id,ve,Se,Le):Le<Se?Le++:oe.push(Ke),oe.length===ve)break}return Le},tn.prototype._addTileFeatures=function(oe,ce,ve,Se,Le,Je){for(var et=0,Ke=oe;et<Ke.length;et+=1){var Pe=ce[Ke[et]],je=Pe.numPoints,Dt={type:1,geometry:[[Math.round(this.options.extent*(Pe.x*Le-ve)),Math.round(this.options.extent*(Pe.y*Le-Se))]],tags:je?gn(Pe):this.points[Pe.index].properties},Bt=void 0;je?Bt=Pe.id:this.options.generateId?Bt=Pe.index:this.points[Pe.index].id&&(Bt=this.points[Pe.index].id),void 0!==Bt&&(Dt.id=Bt),Je.features.push(Dt)}},tn.prototype._limitZoom=function(oe){return Math.max(this.options.minZoom,Math.min(+oe,this.options.maxZoom+1))},tn.prototype._cluster=function(oe,ce){for(var ve=[],Se=this.options,Le=Se.reduce,Je=Se.minPoints,et=Se.radius/(Se.extent*Math.pow(2,ce)),Ke=0;Ke<oe.length;Ke++){var Pe=oe[Ke];if(!(Pe.zoom<=ce)){Pe.zoom=ce;for(var je=this.trees[ce+1],Dt=je.within(Pe.x,Pe.y,et),Bt=Pe.numPoints||1,lt=Bt,Et=0,Jt=Dt;Et<Jt.length;Et+=1){var Ht=je.points[Jt[Et]];Ht.zoom>ce&&(lt+=Ht.numPoints||1)}if(lt>=Je){for(var sn=Pe.x*Bt,Pt=Pe.y*Bt,qt=Le&&Bt>1?this._map(Pe,!0):null,It=(Ke<<5)+(ce+1)+this.points.length,On=0,Tn=Dt;On<Tn.length;On+=1){var nn=je.points[Tn[On]];if(!(nn.zoom<=ce)){nn.zoom=ce;var Fr=nn.numPoints||1;sn+=nn.x*Fr,Pt+=nn.y*Fr,nn.parentId=It,Le&&(qt||(qt=this._map(Pe,!0)),Le(qt,this._map(nn)))}}Pe.parentId=It,ve.push(Sn(sn/lt,Pt/lt,It,lt,qt))}else if(ve.push(Pe),lt>1)for(var $n=0,Xr=Dt;$n<Xr.length;$n+=1){var ei=je.points[Xr[$n]];ei.zoom<=ce||(ei.zoom=ce,ve.push(ei))}}}return ve},tn.prototype._getOriginId=function(oe){return oe-this.points.length>>5},tn.prototype._getOriginZoom=function(oe){return(oe-this.points.length)%32},tn.prototype._map=function(oe,ce){if(oe.numPoints)return ce?K({},oe.properties):oe.properties;var ve=this.points[oe.index].properties,Se=this.options.map(ve);return ce&&Se===ve?K({},Se):Se},vu.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},vu.prototype.splitTile=function(oe,ce,ve,Se,Le,Je,et){for(var Ke=[oe,ce,ve,Se],Pe=this.options,je=Pe.debug;Ke.length;){Se=Ke.pop(),ve=Ke.pop(),ce=Ke.pop(),oe=Ke.pop();var Dt=1<<ce,Bt=Zs(ce,ve,Se),lt=this.tiles[Bt];if(!lt&&(je>1&&console.time("creation"),lt=this.tiles[Bt]=Wf(oe,ce,ve,Se,Pe),this.tileCoords.push({z:ce,x:ve,y:Se}),je)){je>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ce,ve,Se,lt.numFeatures,lt.numPoints,lt.numSimplified),console.timeEnd("creation"));var Et="z"+ce;this.stats[Et]=(this.stats[Et]||0)+1,this.total++}if(lt.source=oe,Le){if(ce===Pe.maxZoom||ce===Le)continue;var Jt=1<<Le-ce;if(ve!==Math.floor(Je/Jt)||Se!==Math.floor(et/Jt))continue}else if(ce===Pe.indexMaxZoom||lt.numPoints<=Pe.indexMaxPoints)continue;if(lt.source=null,0!==oe.length){je>1&&console.time("clipping");var Ht,sn,Pt,qt,It,On,Tn=.5*Pe.buffer/Pe.extent,nn=.5-Tn,Fr=.5+Tn,$n=1+Tn;Ht=sn=Pt=qt=null,It=ut(oe,Dt,ve-Tn,ve+Fr,0,lt.minX,lt.maxX,Pe),On=ut(oe,Dt,ve+nn,ve+$n,0,lt.minX,lt.maxX,Pe),oe=null,It&&(Ht=ut(It,Dt,Se-Tn,Se+Fr,1,lt.minY,lt.maxY,Pe),sn=ut(It,Dt,Se+nn,Se+$n,1,lt.minY,lt.maxY,Pe),It=null),On&&(Pt=ut(On,Dt,Se-Tn,Se+Fr,1,lt.minY,lt.maxY,Pe),qt=ut(On,Dt,Se+nn,Se+$n,1,lt.minY,lt.maxY,Pe),On=null),je>1&&console.timeEnd("clipping"),Ke.push(Ht||[],ce+1,2*ve,2*Se),Ke.push(sn||[],ce+1,2*ve,2*Se+1),Ke.push(Pt||[],ce+1,2*ve+1,2*Se),Ke.push(qt||[],ce+1,2*ve+1,2*Se+1)}}},vu.prototype.getTile=function(oe,ce,ve){var Se=this.options,Le=Se.extent,Je=Se.debug;if(oe<0||oe>24)return null;var et=1<<oe,Ke=Zs(oe,ce=(ce%et+et)%et,ve);if(this.tiles[Ke])return Wu(this.tiles[Ke],Le);Je>1&&console.log("drilling down to z%d-%d-%d",oe,ce,ve);for(var Pe,je=oe,Dt=ce,Bt=ve;!Pe&&je>0;)je--,Dt=Math.floor(Dt/2),Bt=Math.floor(Bt/2),Pe=this.tiles[Zs(je,Dt,Bt)];return Pe&&Pe.source?(Je>1&&console.log("found parent tile z%d-%d-%d",je,Dt,Bt),Je>1&&console.time("drilling down"),this.splitTile(Pe.source,je,Dt,Bt,oe,ce,ve),Je>1&&console.timeEnd("drilling down"),this.tiles[Ke]?Wu(this.tiles[Ke],Le):null):null};var Gl=function(oe){function ce(ve,Se,Le,Je){oe.call(this,ve,Se,Le,_u),Je&&(this.loadGeoJSON=Je)}return oe&&(ce.__proto__=oe),(ce.prototype=Object.create(oe&&oe.prototype)).constructor=ce,ce.prototype.loadData=function(ve,Se){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Se,this._pendingLoadDataParams=ve,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},ce.prototype._loadData=function(){var ve=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Se=this._pendingCallback,Le=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Je=!!(Le&&Le.request&&Le.request.collectResourceTiming)&&new b.RequestPerformance(Le.request);this.loadGeoJSON(Le,function(et,Ke){if(et||!Ke)return Se(et);if("object"!=typeof Ke)return Se(new Error("Input data given to '"+Le.source+"' is not a valid GeoJSON object."));!function lt(Et,Jt){var Ht,sn=Et&&Et.type;if("FeatureCollection"===sn)for(Ht=0;Ht<Et.features.length;Ht++)lt(Et.features[Ht],Jt);else if("GeometryCollection"===sn)for(Ht=0;Ht<Et.geometries.length;Ht++)lt(Et.geometries[Ht],Jt);else if("Feature"===sn)lt(Et.geometry,Jt);else if("Polygon"===sn)we(Et.coordinates,Jt);else if("MultiPolygon"===sn)for(Ht=0;Ht<Et.coordinates.length;Ht++)we(Et.coordinates[Ht],Jt);return Et}(Ke,!0);try{if(Le.filter){var Pe=b.createExpression(Le.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===Pe.result)throw new Error(Pe.value.map(function(lt){return lt.key+": "+lt.message}).join(", "));var je=Ke.features.filter(function(lt){return Pe.value.evaluate({zoom:0},lt)});Ke={type:"FeatureCollection",features:je}}ve._geoJSONIndex=Le.cluster?new tn(function(lt){var Et=lt.superclusterOptions,Jt=lt.clusterProperties;if(!Jt||!Et)return Et;for(var Ht={},sn={},Pt={accumulated:null,zoom:0},qt={properties:null},It=Object.keys(Jt),On=0,Tn=It;On<Tn.length;On+=1){var nn=Tn[On],Fr=Jt[nn],$n=Fr[0],Xr=b.createExpression(Fr[1]),ei=b.createExpression("string"==typeof $n?[$n,["accumulated"],["get",nn]]:$n);Ht[nn]=Xr.value,sn[nn]=ei.value}return Et.map=function(pr){qt.properties=pr;for(var Vr={},li=0,Gr=It;li<Gr.length;li+=1){var Kn=Gr[li];Vr[Kn]=Ht[Kn].evaluate(Pt,qt)}return Vr},Et.reduce=function(pr,Vr){qt.properties=Vr;for(var li=0,Gr=It;li<Gr.length;li+=1){var Kn=Gr[li];Pt.accumulated=pr[Kn],pr[Kn]=sn[Kn].evaluate(Pt,qt)}},Et}(Le)).load(Ke.features):new vu(lt=Ke,Le.geojsonVtOptions)}catch(lt){return Se(lt)}var lt;ve.loaded={};var Dt={};if(Je){var Bt=Je.finish();Bt&&(Dt.resourceTiming={},Dt.resourceTiming[Le.source]=JSON.parse(JSON.stringify(Bt)))}Se(null,Dt)})}},ce.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},ce.prototype.reloadTile=function(ve,Se){var Le=this.loaded;return Le&&Le[ve.uid]?oe.prototype.reloadTile.call(this,ve,Se):this.loadTile(ve,Se)},ce.prototype.loadGeoJSON=function(ve,Se){if(ve.request)b.getJSON(ve.request,Se);else{if("string"!=typeof ve.data)return Se(new Error("Input data given to '"+ve.source+"' is not a valid GeoJSON object."));try{return Se(null,JSON.parse(ve.data))}catch(Le){return Se(new Error("Input data given to '"+ve.source+"' is not a valid GeoJSON object."))}}},ce.prototype.removeSource=function(ve,Se){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Se()},ce.prototype.getClusterExpansionZoom=function(ve,Se){try{Se(null,this._geoJSONIndex.getClusterExpansionZoom(ve.clusterId))}catch(Le){Se(Le)}},ce.prototype.getClusterChildren=function(ve,Se){try{Se(null,this._geoJSONIndex.getChildren(ve.clusterId))}catch(Le){Se(Le)}},ce.prototype.getClusterLeaves=function(ve,Se){try{Se(null,this._geoJSONIndex.getLeaves(ve.clusterId,ve.limit,ve.offset))}catch(Le){Se(Le)}},ce}(ee),ui=function(oe){var ce=this;this.self=oe,this.actor=new b.Actor(oe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ee,geojson:Gl},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ve,Se){if(ce.workerSourceTypes[ve])throw new Error('Worker source with name "'+ve+'" already registered.');ce.workerSourceTypes[ve]=Se},this.self.registerRTLTextPlugin=function(ve){if(b.plugin.isParsed())throw new Error("RTL text plugin already registered.");b.plugin.applyArabicShaping=ve.applyArabicShaping,b.plugin.processBidirectionalText=ve.processBidirectionalText,b.plugin.processStyledBidirectionalText=ve.processStyledBidirectionalText}};return ui.prototype.setReferrer=function(oe,ce){this.referrer=ce},ui.prototype.setImages=function(oe,ce,ve){for(var Se in this.availableImages[oe]=ce,this.workerSources[oe]){var Le=this.workerSources[oe][Se];for(var Je in Le)Le[Je].availableImages=ce}ve()},ui.prototype.setLayers=function(oe,ce,ve){this.getLayerIndex(oe).replace(ce),ve()},ui.prototype.updateLayers=function(oe,ce,ve){this.getLayerIndex(oe).update(ce.layers,ce.removedIds),ve()},ui.prototype.loadTile=function(oe,ce,ve){this.getWorkerSource(oe,ce.type,ce.source).loadTile(ce,ve)},ui.prototype.loadDEMTile=function(oe,ce,ve){this.getDEMWorkerSource(oe,ce.source).loadTile(ce,ve)},ui.prototype.reloadTile=function(oe,ce,ve){this.getWorkerSource(oe,ce.type,ce.source).reloadTile(ce,ve)},ui.prototype.abortTile=function(oe,ce,ve){this.getWorkerSource(oe,ce.type,ce.source).abortTile(ce,ve)},ui.prototype.removeTile=function(oe,ce,ve){this.getWorkerSource(oe,ce.type,ce.source).removeTile(ce,ve)},ui.prototype.removeDEMTile=function(oe,ce){this.getDEMWorkerSource(oe,ce.source).removeTile(ce)},ui.prototype.removeSource=function(oe,ce,ve){if(this.workerSources[oe]&&this.workerSources[oe][ce.type]&&this.workerSources[oe][ce.type][ce.source]){var Se=this.workerSources[oe][ce.type][ce.source];delete this.workerSources[oe][ce.type][ce.source],void 0!==Se.removeSource?Se.removeSource(ce,ve):ve()}},ui.prototype.loadWorkerSource=function(oe,ce,ve){try{this.self.importScripts(ce.url),ve()}catch(Se){ve(Se.toString())}},ui.prototype.syncRTLPluginState=function(oe,ce,ve){try{b.plugin.setState(ce);var Se=b.plugin.getPluginURL();if(b.plugin.isLoaded()&&!b.plugin.isParsed()&&null!=Se){this.self.importScripts(Se);var Le=b.plugin.isParsed();ve(Le?void 0:new Error("RTL Text Plugin failed to import scripts from "+Se),Le)}}catch(Je){ve(Je.toString())}},ui.prototype.getAvailableImages=function(oe){var ce=this.availableImages[oe];return ce||(ce=[]),ce},ui.prototype.getLayerIndex=function(oe){var ce=this.layerIndexes[oe];return ce||(ce=this.layerIndexes[oe]=new z),ce},ui.prototype.getWorkerSource=function(oe,ce,ve){var Se=this;return this.workerSources[oe]||(this.workerSources[oe]={}),this.workerSources[oe][ce]||(this.workerSources[oe][ce]={}),this.workerSources[oe][ce][ve]||(this.workerSources[oe][ce][ve]=new this.workerSourceTypes[ce]({send:function(Le,Je,et){Se.actor.send(Le,Je,et,oe)}},this.getLayerIndex(oe),this.getAvailableImages(oe))),this.workerSources[oe][ce][ve]},ui.prototype.getDEMWorkerSource=function(oe,ce){return this.demWorkerSources[oe]||(this.demWorkerSources[oe]={}),this.demWorkerSources[oe][ce]||(this.demWorkerSources[oe][ce]=new fe),this.demWorkerSources[oe][ce]},ui.prototype.enforceCacheSizeLimit=function(oe,ce){b.enforceCacheSizeLimit(ce)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new ui(self)),ui}),ie(0,function(b){var H=b.createCommonjsModule(function(p){function v(C){return!g(C)}function g(C){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var O,F,Y=new Blob([""],{type:"text/javascript"}),ae=URL.createObjectURL(Y);try{F=new Worker(ae),O=!0}catch(be){O=!1}return F&&F.terminate(),URL.revokeObjectURL(ae),O}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var O=document.createElement("canvas");O.width=O.height=1;var F=O.getContext("2d");if(!F)return!1;var Y=F.getImageData(0,0,1,1);return Y&&Y.width===O.width}()?(void 0===w[R=C&&C.failIfMajorPerformanceCaveat]&&(w[R]=function(O){var ae,be,Ce,F=(ae=O,be=document.createElement("canvas"),(Ce=Object.create(v.webGLContextAttributes)).failIfMajorPerformanceCaveat=ae,be.probablySupportsContext?be.probablySupportsContext("webgl",Ce)||be.probablySupportsContext("experimental-webgl",Ce):be.supportsContext?be.supportsContext("webgl",Ce)||be.supportsContext("experimental-webgl",Ce):be.getContext("webgl",Ce)||be.getContext("experimental-webgl",Ce));if(!F)return!1;var Y=F.createShader(F.VERTEX_SHADER);return!(!Y||F.isContextLost())&&(F.shaderSource(Y,"void main() {}"),F.compileShader(Y),!0===F.getShaderParameter(Y,F.COMPILE_STATUS))}(R)),w[R]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var R}p.exports?p.exports=v:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=v,window.mapboxgl.notSupportedReason=g);var w={};v.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),X={create:function(p,v,g){var w=b.window.document.createElement(p);return void 0!==v&&(w.className=v),g&&g.appendChild(w),w},createNS:function(p,v){return b.window.document.createElementNS(p,v)}},z=b.window.document&&b.window.document.documentElement.style;function M(p){if(!z)return p[0];for(var v=0;v<p.length;v++)if(p[v]in z)return p[v];return p[0]}var L,B=M(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);X.disableDrag=function(){z&&B&&(L=z[B],z[B]="none")},X.enableDrag=function(){z&&B&&(z[B]=L)};var W=M(["transform","WebkitTransform"]);X.setTransform=function(p,v){p.style[W]=v};var ee=!1;try{var ue=Object.defineProperty({},"passive",{get:function(){ee=!0}});b.window.addEventListener("test",ue,ue),b.window.removeEventListener("test",ue,ue)}catch(p){ee=!1}X.addEventListener=function(p,v,g,w){void 0===w&&(w={}),p.addEventListener(v,g,"passive"in w&&ee?w:w.capture)},X.removeEventListener=function(p,v,g,w){void 0===w&&(w={}),p.removeEventListener(v,g,"passive"in w&&ee?w:w.capture)};var fe=function(p){p.preventDefault(),p.stopPropagation(),b.window.removeEventListener("click",fe,!0)};function we(p){var v=p.userImage;return!!(v&&v.render&&v.render())&&(p.data.replace(new Uint8Array(v.data.buffer)),!0)}X.suppressClick=function(){b.window.addEventListener("click",fe,!0),b.window.setTimeout(function(){b.window.removeEventListener("click",fe,!0)},0)},X.mousePos=function(p,v){var g=p.getBoundingClientRect();return new b.Point(v.clientX-g.left-p.clientLeft,v.clientY-g.top-p.clientTop)},X.touchPos=function(p,v){for(var g=p.getBoundingClientRect(),w=[],C=0;C<v.length;C++)w.push(new b.Point(v[C].clientX-g.left-p.clientLeft,v[C].clientY-g.top-p.clientTop));return w},X.mouseButton=function(p){return void 0!==b.window.InstallTrigger&&2===p.button&&p.ctrlKey&&b.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:p.button},X.remove=function(p){p.parentNode&&p.parentNode.removeChild(p)};var ge=function(p){function v(){p.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new b.RGBAImage({width:1,height:1}),this.dirty=!0}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.isLoaded=function(){return this.loaded},v.prototype.setLoaded=function(g){if(this.loaded!==g&&(this.loaded=g,g)){for(var w=0,C=this.requestors;w<C.length;w+=1){var R=C[w];this._notify(R.ids,R.callback)}this.requestors=[]}},v.prototype.getImage=function(g){return this.images[g]},v.prototype.addImage=function(g,w){this._validate(g,w)&&(this.images[g]=w)},v.prototype._validate=function(g,w){var C=!0;return this._validateStretch(w.stretchX,w.data&&w.data.width)||(this.fire(new b.ErrorEvent(new Error('Image "'+g+'" has invalid "stretchX" value'))),C=!1),this._validateStretch(w.stretchY,w.data&&w.data.height)||(this.fire(new b.ErrorEvent(new Error('Image "'+g+'" has invalid "stretchY" value'))),C=!1),this._validateContent(w.content,w)||(this.fire(new b.ErrorEvent(new Error('Image "'+g+'" has invalid "content" value'))),C=!1),C},v.prototype._validateStretch=function(g,w){if(!g)return!0;for(var C=0,R=0,O=g;R<O.length;R+=1){var F=O[R];if(F[0]<C||F[1]<F[0]||w<F[1])return!1;C=F[1]}return!0},v.prototype._validateContent=function(g,w){return!(g&&(4!==g.length||g[0]<0||w.data.width<g[0]||g[1]<0||w.data.height<g[1]||g[2]<0||w.data.width<g[2]||g[3]<0||w.data.height<g[3]||g[2]<g[0]||g[3]<g[1]))},v.prototype.updateImage=function(g,w){w.version=this.images[g].version+1,this.images[g]=w,this.updatedImages[g]=!0},v.prototype.removeImage=function(g){var w=this.images[g];delete this.images[g],delete this.patterns[g],w.userImage&&w.userImage.onRemove&&w.userImage.onRemove()},v.prototype.listImages=function(){return Object.keys(this.images)},v.prototype.getImages=function(g,w){var C=!0;if(!this.isLoaded())for(var R=0,O=g;R<O.length;R+=1)this.images[O[R]]||(C=!1);this.isLoaded()||C?this._notify(g,w):this.requestors.push({ids:g,callback:w})},v.prototype._notify=function(g,w){for(var C={},R=0,O=g;R<O.length;R+=1){var F=O[R];this.images[F]||this.fire(new b.Event("styleimagemissing",{id:F}));var Y=this.images[F];Y?C[F]={data:Y.data.clone(),pixelRatio:Y.pixelRatio,sdf:Y.sdf,version:Y.version,stretchX:Y.stretchX,stretchY:Y.stretchY,content:Y.content,hasRenderCallback:Boolean(Y.userImage&&Y.userImage.render)}:b.warnOnce('Image "'+F+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}w(null,C)},v.prototype.getPixelSize=function(){var g=this.atlasImage;return{width:g.width,height:g.height}},v.prototype.getPattern=function(g){var w=this.patterns[g],C=this.getImage(g);if(!C)return null;if(w&&w.position.version===C.version)return w.position;if(w)w.position.version=C.version;else{var R={w:C.data.width+2,h:C.data.height+2,x:0,y:0},O=new b.ImagePosition(R,C);this.patterns[g]={bin:R,position:O}}return this._updatePatternAtlas(),this.patterns[g].position},v.prototype.bind=function(g){var w=g.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new b.Texture(g,this.atlasImage,w.RGBA),this.atlasTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE)},v.prototype._updatePatternAtlas=function(){var g=[];for(var w in this.patterns)g.push(this.patterns[w].bin);var C=b.potpack(g),R=C.w,O=C.h,F=this.atlasImage;for(var Y in F.resize({width:R||1,height:O||1}),this.patterns){var ae=this.patterns[Y].bin,be=ae.x+1,Ce=ae.y+1,Ee=this.images[Y].data,Ne=Ee.width,ke=Ee.height;b.RGBAImage.copy(Ee,F,{x:0,y:0},{x:be,y:Ce},{width:Ne,height:ke}),b.RGBAImage.copy(Ee,F,{x:0,y:ke-1},{x:be,y:Ce-1},{width:Ne,height:1}),b.RGBAImage.copy(Ee,F,{x:0,y:0},{x:be,y:Ce+ke},{width:Ne,height:1}),b.RGBAImage.copy(Ee,F,{x:Ne-1,y:0},{x:be-1,y:Ce},{width:1,height:ke}),b.RGBAImage.copy(Ee,F,{x:0,y:0},{x:be+Ne,y:Ce},{width:1,height:ke})}this.dirty=!0},v.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},v.prototype.dispatchRenderCallbacks=function(g){for(var w=0,C=g;w<C.length;w+=1){var R=C[w];if(!this.callbackDispatchedThisFrame[R]){this.callbackDispatchedThisFrame[R]=!0;var O=this.images[R];we(O)&&this.updateImage(R,O)}}},v}(b.Evented),Ie=he,Xe=he,pe=1e20;function he(p,v,g,w,C,R){this.fontSize=p||24,this.buffer=void 0===v?3:v,this.cutoff=w||.25,this.fontFamily=C||"sans-serif",this.fontWeight=R||"normal",this.radius=g||8;var O=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=O,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(O*O),this.gridInner=new Float64Array(O*O),this.f=new Float64Array(O),this.d=new Float64Array(O),this.z=new Float64Array(O+1),this.v=new Int16Array(O),this.middle=Math.round(O/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Te(p,v,g,w,C,R,O){for(var F=0;F<v;F++){for(var Y=0;Y<g;Y++)w[Y]=p[Y*v+F];for(Fe(w,C,R,O,g),Y=0;Y<g;Y++)p[Y*v+F]=C[Y]}for(Y=0;Y<g;Y++){for(F=0;F<v;F++)w[F]=p[Y*v+F];for(Fe(w,C,R,O,v),F=0;F<v;F++)p[Y*v+F]=Math.sqrt(C[F])}}function Fe(p,v,g,w,C){g[0]=0,w[0]=-pe,w[1]=+pe;for(var R=1,O=0;R<C;R++){for(var F=(p[R]+R*R-(p[g[O]]+g[O]*g[O]))/(2*R-2*g[O]);F<=w[O];)O--,F=(p[R]+R*R-(p[g[O]]+g[O]*g[O]))/(2*R-2*g[O]);g[++O]=R,w[O]=F,w[O+1]=+pe}for(R=0,O=0;R<C;R++){for(;w[O+1]<R;)O++;v[R]=(R-g[O])*(R-g[O])+p[g[O]]}}he.prototype.draw=function(p){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(p,this.buffer,this.middle);for(var v=this.ctx.getImageData(0,0,this.size,this.size),g=new Uint8ClampedArray(this.size*this.size),w=0;w<this.size*this.size;w++){var C=v.data[4*w+3]/255;this.gridOuter[w]=1===C?0:0===C?pe:Math.pow(Math.max(0,.5-C),2),this.gridInner[w]=1===C?pe:0===C?0:Math.pow(Math.max(0,C-.5),2)}for(Te(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Te(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),w=0;w<this.size*this.size;w++)g[w]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[w]-this.gridInner[w])/this.radius+this.cutoff))));return g},Ie.default=Xe;var at=function(p,v){this.requestManager=p,this.localIdeographFontFamily=v,this.entries={}};at.prototype.setURL=function(p){this.url=p},at.prototype.getGlyphs=function(p,v){var g=this,w=[];for(var C in p)for(var R=0,O=p[C];R<O.length;R+=1)w.push({stack:C,id:O[R]});b.asyncAll(w,function(F,Y){var ae=F.stack,be=F.id,Ce=g.entries[ae];Ce||(Ce=g.entries[ae]={glyphs:{},requests:{},ranges:{}});var Ee=Ce.glyphs[be];if(void 0===Ee){if(Ee=g._tinySDF(Ce,ae,be))return Ce.glyphs[be]=Ee,void Y(null,{stack:ae,id:be,glyph:Ee});var Ne=Math.floor(be/256);if(256*Ne>65535)Y(new Error("glyphs > 65535 not supported"));else if(Ce.ranges[Ne])Y(null,{stack:ae,id:be,glyph:Ee});else{var ke=Ce.requests[Ne];ke||(ke=Ce.requests[Ne]=[],at.loadGlyphRange(ae,Ne,g.url,g.requestManager,function(Ve,De){if(De){for(var qe in De)g._doesCharSupportLocalGlyph(+qe)||(Ce.glyphs[+qe]=De[+qe]);Ce.ranges[Ne]=!0}for(var Qe=0,rt=ke;Qe<rt.length;Qe+=1)(0,rt[Qe])(Ve,De);delete Ce.requests[Ne]})),ke.push(function(Ve,De){Ve?Y(Ve):De&&Y(null,{stack:ae,id:be,glyph:De[be]||null})})}}else Y(null,{stack:ae,id:be,glyph:Ee})},function(F,Y){if(F)v(F);else if(Y){for(var ae={},be=0,Ce=Y;be<Ce.length;be+=1){var Ee=Ce[be],Ne=Ee.stack,ke=Ee.id,Ve=Ee.glyph;(ae[Ne]||(ae[Ne]={}))[ke]=Ve&&{id:Ve.id,bitmap:Ve.bitmap.clone(),metrics:Ve.metrics}}v(null,ae)}})},at.prototype._doesCharSupportLocalGlyph=function(p){return!!this.localIdeographFontFamily&&(b.isChar["CJK Unified Ideographs"](p)||b.isChar["Hangul Syllables"](p)||b.isChar.Hiragana(p)||b.isChar.Katakana(p))},at.prototype._tinySDF=function(p,v,g){var w=this.localIdeographFontFamily;if(w&&this._doesCharSupportLocalGlyph(g)){var C=p.tinySDF;if(!C){var R="400";/bold/i.test(v)?R="900":/medium/i.test(v)?R="500":/light/i.test(v)&&(R="200"),C=p.tinySDF=new at.TinySDF(24,3,8,.25,w,R)}return{id:g,bitmap:new b.AlphaImage({width:30,height:30},C.draw(String.fromCharCode(g))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},at.loadGlyphRange=function(p,v,g,w,C){var R=256*v,O=R+255,F=w.transformRequest(w.normalizeGlyphsURL(g).replace("{fontstack}",p).replace("{range}",R+"-"+O),b.ResourceType.Glyphs);b.getArrayBuffer(F,function(Y,ae){if(Y)C(Y);else if(ae){for(var be={},Ce=0,Ee=b.parseGlyphPBF(ae);Ce<Ee.length;Ce+=1){var Ne=Ee[Ce];be[Ne.id]=Ne}C(null,be)}})},at.TinySDF=Ie;var Ye=function(){this.specification=b.styleSpec.light.position};Ye.prototype.possiblyEvaluate=function(p,v){return b.sphericalToCartesian(p.expression.evaluate(v))},Ye.prototype.interpolate=function(p,v,g){return{x:b.number(p.x,v.x,g),y:b.number(p.y,v.y,g),z:b.number(p.z,v.z,g)}};var Ge=new b.Properties({anchor:new b.DataConstantProperty(b.styleSpec.light.anchor),position:new Ye,color:new b.DataConstantProperty(b.styleSpec.light.color),intensity:new b.DataConstantProperty(b.styleSpec.light.intensity)}),P=function(p){function v(g){p.call(this),this._transitionable=new b.Transitionable(Ge),this.setLight(g),this._transitioning=this._transitionable.untransitioned()}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getLight=function(){return this._transitionable.serialize()},v.prototype.setLight=function(g,w){if(void 0===w&&(w={}),!this._validate(b.validateLight,g,w))for(var C in g){var R=g[C];b.endsWith(C,"-transition")?this._transitionable.setTransition(C.slice(0,-11),R):this._transitionable.setValue(C,R)}},v.prototype.updateTransitions=function(g){this._transitioning=this._transitionable.transitioned(g,this._transitioning)},v.prototype.hasTransition=function(){return this._transitioning.hasTransition()},v.prototype.recalculate=function(g){this.properties=this._transitioning.possiblyEvaluate(g)},v.prototype._validate=function(g,w,C){return(!C||!1!==C.validate)&&b.emitValidationErrors(this,g.call(b.validateStyle,b.extend({value:w,style:{glyphs:!0,sprite:!0},styleSpec:b.styleSpec})))},v}(b.Evented),D=function(p,v){this.width=p,this.height=v,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};D.prototype.getDash=function(p,v){var g=p.join(",")+String(v);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(p,v)),this.dashEntry[g]},D.prototype.getDashRanges=function(p,v,g){var w=[],C=p.length%2==1?-p[p.length-1]*g:0,R=p[0]*g,O=!0;w.push({left:C,right:R,isDash:O,zeroLength:0===p[0]});for(var F=p[0],Y=1;Y<p.length;Y++){var ae=p[Y];w.push({left:C=F*g,right:R=(F+=ae)*g,isDash:O=!O,zeroLength:0===ae})}return w},D.prototype.addRoundDash=function(p,v,g){for(var w=v/2,C=-g;C<=g;C++)for(var R=this.width*(this.nextRow+g+C),O=0,F=p[O],Y=0;Y<this.width;Y++){Y/F.right>1&&(F=p[++O]);var ae=Math.abs(Y-F.left),be=Math.abs(Y-F.right),Ce=Math.min(ae,be),Ee=void 0,Ne=C/g*(w+1);if(F.isDash){var ke=w-Math.abs(Ne);Ee=Math.sqrt(Ce*Ce+ke*ke)}else Ee=w-Math.sqrt(Ce*Ce+Ne*Ne);this.data[R+Y]=Math.max(0,Math.min(255,Ee+128))}},D.prototype.addRegularDash=function(p){for(var v=p.length-1;v>=0;--v){var g=p[v],w=p[v+1];g.zeroLength?p.splice(v,1):w&&w.isDash===g.isDash&&(w.left=g.left,p.splice(v,1))}var C=p[0],R=p[p.length-1];C.isDash===R.isDash&&(C.left=R.left-this.width,R.right=C.right+this.width);for(var O=this.width*this.nextRow,F=0,Y=p[F],ae=0;ae<this.width;ae++){ae/Y.right>1&&(Y=p[++F]);var be=Math.abs(ae-Y.left),Ce=Math.abs(ae-Y.right),Ee=Math.min(be,Ce);this.data[O+ae]=Math.max(0,Math.min(255,(Y.isDash?Ee:-Ee)+128))}},D.prototype.addDash=function(p,v){var g=v?7:0,w=2*g+1;if(this.nextRow+w>this.height)return b.warnOnce("LineAtlas out of space"),null;for(var C=0,R=0;R<p.length;R++)C+=p[R];if(0!==C){var O=this.width/C,F=this.getDashRanges(p,this.width,O);v?this.addRoundDash(F,O,g):this.addRegularDash(F)}var Y={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:C};return this.nextRow+=w,this.dirty=!0,Y},D.prototype.bind=function(p){var v=p.gl;this.texture?(v.bindTexture(v.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,v.texSubImage2D(v.TEXTURE_2D,0,0,0,this.width,this.height,v.ALPHA,v.UNSIGNED_BYTE,this.data))):(this.texture=v.createTexture(),v.bindTexture(v.TEXTURE_2D,this.texture),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.REPEAT),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.REPEAT),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.LINEAR),v.texImage2D(v.TEXTURE_2D,0,v.ALPHA,this.width,this.height,0,v.ALPHA,v.UNSIGNED_BYTE,this.data))};var N=function p(v,g){this.workerPool=v,this.actors=[],this.currentActor=0,this.id=b.uniqueId();for(var w=this.workerPool.acquire(this.id),C=0;C<w.length;C++){var R=new p.Actor(w[C],g,this.id);R.name="Worker "+C,this.actors.push(R)}};function V(p,v,g){var w=function(C,R){if(C)return g(C);if(R){var O=b.pick(b.extend(R,p),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);R.vector_layers&&(O.vectorLayers=R.vector_layers,O.vectorLayerIds=O.vectorLayers.map(function(F){return F.id})),O.tiles=v.canonicalizeTileset(O,p.url),g(null,O)}};return p.url?b.getJSON(v.transformRequest(v.normalizeSourceURL(p.url),b.ResourceType.Source),w):b.browser.frame(function(){return w(null,p)})}N.prototype.broadcast=function(p,v,g){b.asyncAll(this.actors,function(w,C){w.send(p,v,C)},g=g||function(){})},N.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},N.prototype.remove=function(){this.actors.forEach(function(p){p.remove()}),this.actors=[],this.workerPool.release(this.id)},N.Actor=b.Actor;var Z=function(p,v,g){this.bounds=b.LngLatBounds.convert(this.validateBounds(p)),this.minzoom=v||0,this.maxzoom=g||24};Z.prototype.validateBounds=function(p){return Array.isArray(p)&&4===p.length?[Math.max(-180,p[0]),Math.max(-90,p[1]),Math.min(180,p[2]),Math.min(90,p[3])]:[-180,-90,180,90]},Z.prototype.contains=function(p){var v=Math.pow(2,p.z),g=Math.floor(b.mercatorXfromLng(this.bounds.getWest())*v),w=Math.floor(b.mercatorYfromLat(this.bounds.getNorth())*v),C=Math.ceil(b.mercatorXfromLng(this.bounds.getEast())*v),R=Math.ceil(b.mercatorYfromLat(this.bounds.getSouth())*v);return p.x>=g&&p.x<C&&p.y>=w&&p.y<R};var j=function(p){function v(g,w,C,R){if(p.call(this),this.id=g,this.dispatcher=C,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,b.extend(this,b.pick(w,["url","scheme","tileSize","promoteId"])),this._options=b.extend({type:"vector"},w),this._collectResourceTiming=w.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(R)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.load=function(){var g=this;this._loaded=!1,this.fire(new b.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=V(this._options,this.map._requestManager,function(w,C){g._tileJSONRequest=null,g._loaded=!0,w?g.fire(new b.ErrorEvent(w)):C&&(b.extend(g,C),C.bounds&&(g.tileBounds=new Z(C.bounds,g.minzoom,g.maxzoom)),b.postTurnstileEvent(C.tiles,g.map._requestManager._customAccessToken),b.postMapLoadEvent(C.tiles,g.map._getMapId(),g.map._requestManager._skuToken,g.map._requestManager._customAccessToken),g.fire(new b.Event("data",{dataType:"source",sourceDataType:"metadata"})),g.fire(new b.Event("data",{dataType:"source",sourceDataType:"content"})))})},v.prototype.loaded=function(){return this._loaded},v.prototype.hasTile=function(g){return!this.tileBounds||this.tileBounds.contains(g.canonical)},v.prototype.onAdd=function(g){this.map=g,this.load()},v.prototype.setSourceProperty=function(g){this._tileJSONRequest&&this._tileJSONRequest.cancel(),g(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},v.prototype.setTiles=function(g){var w=this;return this.setSourceProperty(function(){w._options.tiles=g}),this},v.prototype.setUrl=function(g){var w=this;return this.setSourceProperty(function(){w.url=g,w._options.url=g}),this},v.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},v.prototype.serialize=function(){return b.extend({},this._options)},v.prototype.loadTile=function(g,w){var C=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme)),R={request:this.map._requestManager.transformRequest(C,b.ResourceType.Tile),uid:g.uid,tileID:g.tileID,zoom:g.tileID.overscaledZ,tileSize:this.tileSize*g.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:b.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function O(F,Y){return delete g.request,g.aborted?w(null):F&&404!==F.status?w(F):(Y&&Y.resourceTiming&&(g.resourceTiming=Y.resourceTiming),this.map._refreshExpiredTiles&&Y&&g.setExpiryData(Y),g.loadVectorData(Y,this.map.painter),b.cacheEntryPossiblyAdded(this.dispatcher),w(null),void(g.reloadCallback&&(this.loadTile(g,g.reloadCallback),g.reloadCallback=null)))}R.request.collectResourceTiming=this._collectResourceTiming,g.actor&&"expired"!==g.state?"loading"===g.state?g.reloadCallback=w:g.request=g.actor.send("reloadTile",R,O.bind(this)):(g.actor=this.dispatcher.getActor(),g.request=g.actor.send("loadTile",R,O.bind(this)))},v.prototype.abortTile=function(g){g.request&&(g.request.cancel(),delete g.request),g.actor&&g.actor.send("abortTile",{uid:g.uid,type:this.type,source:this.id},void 0)},v.prototype.unloadTile=function(g){g.unloadVectorData(),g.actor&&g.actor.send("removeTile",{uid:g.uid,type:this.type,source:this.id},void 0)},v.prototype.hasTransition=function(){return!1},v}(b.Evented),de=function(p){function v(g,w,C,R){p.call(this),this.id=g,this.dispatcher=C,this.setEventedParent(R),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=b.extend({type:"raster"},w),b.extend(this,b.pick(w,["url","scheme","tileSize"]))}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.load=function(){var g=this;this._loaded=!1,this.fire(new b.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=V(this._options,this.map._requestManager,function(w,C){g._tileJSONRequest=null,g._loaded=!0,w?g.fire(new b.ErrorEvent(w)):C&&(b.extend(g,C),C.bounds&&(g.tileBounds=new Z(C.bounds,g.minzoom,g.maxzoom)),b.postTurnstileEvent(C.tiles),b.postMapLoadEvent(C.tiles,g.map._getMapId(),g.map._requestManager._skuToken),g.fire(new b.Event("data",{dataType:"source",sourceDataType:"metadata"})),g.fire(new b.Event("data",{dataType:"source",sourceDataType:"content"})))})},v.prototype.loaded=function(){return this._loaded},v.prototype.onAdd=function(g){this.map=g,this.load()},v.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},v.prototype.serialize=function(){return b.extend({},this._options)},v.prototype.hasTile=function(g){return!this.tileBounds||this.tileBounds.contains(g.canonical)},v.prototype.loadTile=function(g,w){var C=this,R=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);g.request=b.getImage(this.map._requestManager.transformRequest(R,b.ResourceType.Tile),function(O,F){if(delete g.request,g.aborted)g.state="unloaded",w(null);else if(O)g.state="errored",w(O);else if(F){C.map._refreshExpiredTiles&&g.setExpiryData(F),delete F.cacheControl,delete F.expires;var Y=C.map.painter.context,ae=Y.gl;g.texture=C.map.painter.getTileTexture(F.width),g.texture?g.texture.update(F,{useMipmap:!0}):(g.texture=new b.Texture(Y,F,ae.RGBA,{useMipmap:!0}),g.texture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE,ae.LINEAR_MIPMAP_NEAREST),Y.extTextureFilterAnisotropic&&ae.texParameterf(ae.TEXTURE_2D,Y.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Y.extTextureFilterAnisotropicMax)),g.state="loaded",b.cacheEntryPossiblyAdded(C.dispatcher),w(null)}})},v.prototype.abortTile=function(g,w){g.request&&(g.request.cancel(),delete g.request),w()},v.prototype.unloadTile=function(g,w){g.texture&&this.map.painter.saveTileTexture(g.texture),w()},v.prototype.hasTransition=function(){return!1},v}(b.Evented),$e=function(p){function v(g,w,C,R){p.call(this,g,w,C,R),this.type="raster-dem",this.maxzoom=22,this._options=b.extend({type:"raster-dem"},w),this.encoding=w.encoding||"mapbox"}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},v.prototype.loadTile=function(g,w){var C=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function R(O,F){O&&(g.state="errored",w(O)),F&&(g.dem=F,g.needsHillshadePrepare=!0,g.state="loaded",w(null))}g.request=b.getImage(this.map._requestManager.transformRequest(C,b.ResourceType.Tile),function(O,F){if(delete g.request,g.aborted)g.state="unloaded",w(null);else if(O)g.state="errored",w(O);else if(F){this.map._refreshExpiredTiles&&g.setExpiryData(F),delete F.cacheControl,delete F.expires;var Y=b.window.ImageBitmap&&F instanceof b.window.ImageBitmap&&b.offscreenCanvasSupported()?F:b.browser.getImageData(F,1),ae={uid:g.uid,coord:g.tileID,source:this.id,rawImageData:Y,encoding:this.encoding};g.actor&&"expired"!==g.state||(g.actor=this.dispatcher.getActor(),g.actor.send("loadDEMTile",ae,R.bind(this)))}}.bind(this)),g.neighboringTiles=this._getNeighboringTiles(g.tileID)},v.prototype._getNeighboringTiles=function(g){var w=g.canonical,C=Math.pow(2,w.z),R=(w.x-1+C)%C,O=0===w.x?g.wrap-1:g.wrap,F=(w.x+1+C)%C,Y=w.x+1===C?g.wrap+1:g.wrap,ae={};return ae[new b.OverscaledTileID(g.overscaledZ,O,w.z,R,w.y).key]={backfilled:!1},ae[new b.OverscaledTileID(g.overscaledZ,Y,w.z,F,w.y).key]={backfilled:!1},w.y>0&&(ae[new b.OverscaledTileID(g.overscaledZ,O,w.z,R,w.y-1).key]={backfilled:!1},ae[new b.OverscaledTileID(g.overscaledZ,g.wrap,w.z,w.x,w.y-1).key]={backfilled:!1},ae[new b.OverscaledTileID(g.overscaledZ,Y,w.z,F,w.y-1).key]={backfilled:!1}),w.y+1<C&&(ae[new b.OverscaledTileID(g.overscaledZ,O,w.z,R,w.y+1).key]={backfilled:!1},ae[new b.OverscaledTileID(g.overscaledZ,g.wrap,w.z,w.x,w.y+1).key]={backfilled:!1},ae[new b.OverscaledTileID(g.overscaledZ,Y,w.z,F,w.y+1).key]={backfilled:!1}),ae},v.prototype.unloadTile=function(g){g.demTexture&&this.map.painter.saveTileTexture(g.demTexture),g.fbo&&(g.fbo.destroy(),delete g.fbo),g.dem&&delete g.dem,delete g.neighboringTiles,g.state="unloaded",g.actor&&g.actor.send("removeDEMTile",{uid:g.uid,source:this.id})},v}(de),_t=function(p){function v(g,w,C,R){p.call(this),this.id=g,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=C.getActor(),this.setEventedParent(R),this._data=w.data,this._options=b.extend({},w),this._collectResourceTiming=w.collectResourceTiming,this._resourceTiming=[],void 0!==w.maxzoom&&(this.maxzoom=w.maxzoom),w.type&&(this.type=w.type),w.attribution&&(this.attribution=w.attribution),this.promoteId=w.promoteId;var O=b.EXTENT/this.tileSize;this.workerOptions=b.extend({source:this.id,cluster:w.cluster||!1,geojsonVtOptions:{buffer:(void 0!==w.buffer?w.buffer:128)*O,tolerance:(void 0!==w.tolerance?w.tolerance:.375)*O,extent:b.EXTENT,maxZoom:this.maxzoom,lineMetrics:w.lineMetrics||!1,generateId:w.generateId||!1},superclusterOptions:{maxZoom:void 0!==w.clusterMaxZoom?Math.min(w.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,w.clusterMinPoints||2),extent:b.EXTENT,radius:(w.clusterRadius||50)*O,log:!1,generateId:w.generateId||!1},clusterProperties:w.clusterProperties,filter:w.filter},w.workerOptions)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.load=function(){var g=this;this.fire(new b.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(w){if(w)g.fire(new b.ErrorEvent(w));else{var C={dataType:"source",sourceDataType:"metadata"};g._collectResourceTiming&&g._resourceTiming&&g._resourceTiming.length>0&&(C.resourceTiming=g._resourceTiming,g._resourceTiming=[]),g.fire(new b.Event("data",C))}})},v.prototype.onAdd=function(g){this.map=g,this.load()},v.prototype.setData=function(g){var w=this;return this._data=g,this.fire(new b.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(C){if(C)w.fire(new b.ErrorEvent(C));else{var R={dataType:"source",sourceDataType:"content"};w._collectResourceTiming&&w._resourceTiming&&w._resourceTiming.length>0&&(R.resourceTiming=w._resourceTiming,w._resourceTiming=[]),w.fire(new b.Event("data",R))}}),this},v.prototype.getClusterExpansionZoom=function(g,w){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:g,source:this.id},w),this},v.prototype.getClusterChildren=function(g,w){return this.actor.send("geojson.getClusterChildren",{clusterId:g,source:this.id},w),this},v.prototype.getClusterLeaves=function(g,w,C,R){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:g,limit:w,offset:C},R),this},v.prototype._updateWorkerData=function(g){var w=this;this._loaded=!1;var C=b.extend({},this.workerOptions),R=this._data;"string"==typeof R?(C.request=this.map._requestManager.transformRequest(b.browser.resolveURL(R),b.ResourceType.Source),C.request.collectResourceTiming=this._collectResourceTiming):C.data=JSON.stringify(R),this.actor.send(this.type+".loadData",C,function(O,F){w._removed||F&&F.abandoned||(w._loaded=!0,F&&F.resourceTiming&&F.resourceTiming[w.id]&&(w._resourceTiming=F.resourceTiming[w.id].slice(0)),w.actor.send(w.type+".coalesce",{source:C.source},null),g(O))})},v.prototype.loaded=function(){return this._loaded},v.prototype.loadTile=function(g,w){var C=this,R=g.actor?"reloadTile":"loadTile";g.actor=this.actor,g.request=this.actor.send(R,{type:this.type,uid:g.uid,tileID:g.tileID,zoom:g.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:b.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(O,F){return delete g.request,g.unloadVectorData(),g.aborted?w(null):O?w(O):(g.loadVectorData(F,C.map.painter,"reloadTile"===R),w(null))})},v.prototype.abortTile=function(g){g.request&&(g.request.cancel(),delete g.request),g.aborted=!0},v.prototype.unloadTile=function(g){g.unloadVectorData(),this.actor.send("removeTile",{uid:g.uid,type:this.type,source:this.id})},v.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},v.prototype.serialize=function(){return b.extend({},this._options,{type:this.type,data:this._data})},v.prototype.hasTransition=function(){return!1},v}(b.Evented),xe=b.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),pt=function(p){function v(g,w,C,R){p.call(this),this.id=g,this.dispatcher=C,this.coordinates=w.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(R),this.options=w}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.load=function(g,w){var C=this;this._loaded=!1,this.fire(new b.Event("dataloading",{dataType:"source"})),this.url=this.options.url,b.getImage(this.map._requestManager.transformRequest(this.url,b.ResourceType.Image),function(R,O){C._loaded=!0,R?C.fire(new b.ErrorEvent(R)):O&&(C.image=O,g&&(C.coordinates=g),w&&w(),C._finishLoading())})},v.prototype.loaded=function(){return this._loaded},v.prototype.updateImage=function(g){var w=this;return this.image&&g.url?(this.options.url=g.url,this.load(g.coordinates,function(){w.texture=null}),this):this},v.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new b.Event("data",{dataType:"source",sourceDataType:"metadata"})))},v.prototype.onAdd=function(g){this.map=g,this.load()},v.prototype.setCoordinates=function(g){var w=this;this.coordinates=g;var C=g.map(b.MercatorCoordinate.fromLngLat);this.tileID=function(O){for(var F=1/0,Y=1/0,ae=-1/0,be=-1/0,Ce=0,Ee=O;Ce<Ee.length;Ce+=1){var Ne=Ee[Ce];F=Math.min(F,Ne.x),Y=Math.min(Y,Ne.y),ae=Math.max(ae,Ne.x),be=Math.max(be,Ne.y)}var ke=Math.max(ae-F,be-Y),Ve=Math.max(0,Math.floor(-Math.log(ke)/Math.LN2)),De=Math.pow(2,Ve);return new b.CanonicalTileID(Ve,Math.floor((F+ae)/2*De),Math.floor((Y+be)/2*De))}(C),this.minzoom=this.maxzoom=this.tileID.z;var R=C.map(function(O){return w.tileID.getTilePoint(O)._round()});return this._boundsArray=new b.StructArrayLayout4i8,this._boundsArray.emplaceBack(R[0].x,R[0].y,0,0),this._boundsArray.emplaceBack(R[1].x,R[1].y,b.EXTENT,0),this._boundsArray.emplaceBack(R[3].x,R[3].y,0,b.EXTENT),this._boundsArray.emplaceBack(R[2].x,R[2].y,b.EXTENT,b.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new b.Event("data",{dataType:"source",sourceDataType:"content"})),this},v.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var g=this.map.painter.context,w=g.gl;for(var C in this.boundsBuffer||(this.boundsBuffer=g.createVertexBuffer(this._boundsArray,xe.members)),this.boundsSegments||(this.boundsSegments=b.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new b.Texture(g,this.image,w.RGBA),this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE)),this.tiles){var R=this.tiles[C];"loaded"!==R.state&&(R.state="loaded",R.texture=this.texture)}}},v.prototype.loadTile=function(g,w){this.tileID&&this.tileID.equals(g.tileID.canonical)?(this.tiles[String(g.tileID.wrap)]=g,g.buckets={},w(null)):(g.state="errored",w(null))},v.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},v.prototype.hasTransition=function(){return!1},v}(b.Evented),vt=function(p){function v(g,w,C,R){p.call(this,g,w,C,R),this.roundZoom=!0,this.type="video",this.options=w}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.load=function(){var g=this;this._loaded=!1;var w=this.options;this.urls=[];for(var C=0,R=w.urls;C<R.length;C+=1)this.urls.push(this.map._requestManager.transformRequest(R[C],b.ResourceType.Source).url);b.getVideo(this.urls,function(O,F){g._loaded=!0,O?g.fire(new b.ErrorEvent(O)):F&&(g.video=F,g.video.loop=!0,g.video.addEventListener("playing",function(){g.map.triggerRepaint()}),g.map&&g.video.play(),g._finishLoading())})},v.prototype.pause=function(){this.video&&this.video.pause()},v.prototype.play=function(){this.video&&this.video.play()},v.prototype.seek=function(g){if(this.video){var w=this.video.seekable;g<w.start(0)||g>w.end(0)?this.fire(new b.ErrorEvent(new b.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+w.start(0)+" and "+w.end(0)+"-second mark."))):this.video.currentTime=g}},v.prototype.getVideo=function(){return this.video},v.prototype.onAdd=function(g){this.map||(this.map=g,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},v.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var g=this.map.painter.context,w=g.gl;for(var C in this.boundsBuffer||(this.boundsBuffer=g.createVertexBuffer(this._boundsArray,xe.members)),this.boundsSegments||(this.boundsSegments=b.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE),w.texSubImage2D(w.TEXTURE_2D,0,0,0,w.RGBA,w.UNSIGNED_BYTE,this.video)):(this.texture=new b.Texture(g,this.video,w.RGBA),this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE)),this.tiles){var R=this.tiles[C];"loaded"!==R.state&&(R.state="loaded",R.texture=this.texture)}}},v.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},v.prototype.hasTransition=function(){return this.video&&!this.video.paused},v}(pt),We=function(p){function v(g,w,C,R){p.call(this,g,w,C,R),w.coordinates?Array.isArray(w.coordinates)&&4===w.coordinates.length&&!w.coordinates.some(function(O){return!Array.isArray(O)||2!==O.length||O.some(function(F){return"number"!=typeof F})})||this.fire(new b.ErrorEvent(new b.ValidationError("sources."+g,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new b.ErrorEvent(new b.ValidationError("sources."+g,null,'missing required property "coordinates"'))),w.animate&&"boolean"!=typeof w.animate&&this.fire(new b.ErrorEvent(new b.ValidationError("sources."+g,null,'optional "animate" property must be a boolean value'))),w.canvas?"string"==typeof w.canvas||w.canvas instanceof b.window.HTMLCanvasElement||this.fire(new b.ErrorEvent(new b.ValidationError("sources."+g,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new b.ErrorEvent(new b.ValidationError("sources."+g,null,'missing required property "canvas"'))),this.options=w,this.animate=void 0===w.animate||w.animate}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof b.window.HTMLCanvasElement?this.options.canvas:b.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new b.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},v.prototype.getCanvas=function(){return this.canvas},v.prototype.onAdd=function(g){this.map=g,this.load(),this.canvas&&this.animate&&this.play()},v.prototype.onRemove=function(){this.pause()},v.prototype.prepare=function(){var g=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,g=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,g=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var w=this.map.painter.context,C=w.gl;for(var R in this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,xe.members)),this.boundsSegments||(this.boundsSegments=b.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(g||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new b.Texture(w,this.canvas,C.RGBA,{premultiply:!0}),this.tiles){var O=this.tiles[R];"loaded"!==O.state&&(O.state="loaded",O.texture=this.texture)}}},v.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},v.prototype.hasTransition=function(){return this._playing},v.prototype._hasInvalidDimensions=function(){for(var g=0,w=[this.canvas.width,this.canvas.height];g<w.length;g+=1){var C=w[g];if(isNaN(C)||C<=0)return!0}return!1},v}(pt),yt={vector:j,raster:de,"raster-dem":$e,geojson:_t,video:vt,image:pt,canvas:We};function Kt(p,v){var g=b.identity([]);return b.translate(g,g,[1,1,0]),b.scale(g,g,[.5*p.width,.5*p.height,1]),b.multiply(g,g,p.calculatePosMatrix(v.toUnwrapped()))}function tn(p,v,g,w,C,R){var O=function(Ve,De,qe){if(Ve)for(var Qe=0,rt=Ve;Qe<rt.length;Qe+=1){var ht=De[rt[Qe]];if(ht&&ht.source===qe&&"fill-extrusion"===ht.type)return!0}else for(var dt in De){var mt=De[dt];if(mt.source===qe&&"fill-extrusion"===mt.type)return!0}return!1}(C&&C.layers,v,p.id),F=R.maxPitchScaleFactor(),Y=p.tilesIn(w,F,O);Y.sort(Sn);for(var ae=[],be=0,Ce=Y;be<Ce.length;be+=1){var Ee=Ce[be];ae.push({wrappedTileID:Ee.tileID.wrapped().key,queryResults:Ee.tile.queryRenderedFeatures(v,g,p._state,Ee.queryGeometry,Ee.cameraQueryGeometry,Ee.scale,C,R,F,Kt(p.transform,Ee.tileID))})}var Ne=function(Ve){for(var De={},qe={},Qe=0,rt=Ve;Qe<rt.length;Qe+=1){var ht=rt[Qe],dt=ht.queryResults,mt=ht.wrappedTileID,Tt=qe[mt]=qe[mt]||{};for(var kt in dt)for(var Ot=dt[kt],Lt=Tt[kt]=Tt[kt]||{},fn=De[kt]=De[kt]||[],pn=0,hn=Ot;pn<hn.length;pn+=1){var gr=hn[pn];Lt[gr.featureIndex]||(Lt[gr.featureIndex]=!0,fn.push(gr))}}return De}(ae);for(var ke in Ne)Ne[ke].forEach(function(Ve){var De=Ve.feature,qe=p.getFeatureState(De.layer["source-layer"],De.id);De.source=De.layer.source,De.layer["source-layer"]&&(De.sourceLayer=De.layer["source-layer"]),De.state=qe});return Ne}function Sn(p,v){var g=p.tileID,w=v.tileID;return g.overscaledZ-w.overscaledZ||g.canonical.y-w.canonical.y||g.wrap-w.wrap||g.canonical.x-w.canonical.x}var xt=function(p,v){this.max=p,this.onRemove=v,this.reset()};xt.prototype.reset=function(){for(var p in this.data)for(var v=0,g=this.data[p];v<g.length;v+=1){var w=g[v];w.timeout&&clearTimeout(w.timeout),this.onRemove(w.value)}return this.data={},this.order=[],this},xt.prototype.add=function(p,v,g){var w=this,C=p.wrapped().key;void 0===this.data[C]&&(this.data[C]=[]);var R={value:v,timeout:void 0};if(void 0!==g&&(R.timeout=setTimeout(function(){w.remove(p,R)},g)),this.data[C].push(R),this.order.push(C),this.order.length>this.max){var O=this._getAndRemoveByKey(this.order[0]);O&&this.onRemove(O)}return this},xt.prototype.has=function(p){return p.wrapped().key in this.data},xt.prototype.getAndRemove=function(p){return this.has(p)?this._getAndRemoveByKey(p.wrapped().key):null},xt.prototype._getAndRemoveByKey=function(p){var v=this.data[p].shift();return v.timeout&&clearTimeout(v.timeout),0===this.data[p].length&&delete this.data[p],this.order.splice(this.order.indexOf(p),1),v.value},xt.prototype.getByKey=function(p){var v=this.data[p];return v?v[0].value:null},xt.prototype.get=function(p){return this.has(p)?this.data[p.wrapped().key][0].value:null},xt.prototype.remove=function(p,v){if(!this.has(p))return this;var g=p.wrapped().key,w=void 0===v?0:this.data[g].indexOf(v),C=this.data[g][w];return this.data[g].splice(w,1),C.timeout&&clearTimeout(C.timeout),0===this.data[g].length&&delete this.data[g],this.onRemove(C.value),this.order.splice(this.order.indexOf(g),1),this},xt.prototype.setMaxSize=function(p){for(this.max=p;this.order.length>this.max;){var v=this._getAndRemoveByKey(this.order[0]);v&&this.onRemove(v)}return this},xt.prototype.filter=function(p){var v=[];for(var g in this.data)for(var w=0,C=this.data[g];w<C.length;w+=1){var R=C[w];p(R.value)||v.push(R)}for(var O=0,F=v;O<F.length;O+=1){var Y=F[O];this.remove(Y.value.tileID,Y)}};var Cn=function(p,v,g){this.context=p;var w=p.gl;this.buffer=w.createBuffer(),this.dynamicDraw=Boolean(g),this.context.unbindVAO(),p.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,v.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete v.arrayBuffer};Cn.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Cn.prototype.updateData=function(p){var v=this.context.gl;this.context.unbindVAO(),this.bind(),v.bufferSubData(v.ELEMENT_ARRAY_BUFFER,0,p.arrayBuffer)},Cn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var gn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},sr=function(p,v,g,w){this.length=v.length,this.attributes=g,this.itemSize=v.bytesPerElement,this.dynamicDraw=w,this.context=p;var C=p.gl;this.buffer=C.createBuffer(),p.bindVertexBuffer.set(this.buffer),C.bufferData(C.ARRAY_BUFFER,v.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete v.arrayBuffer};sr.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},sr.prototype.updateData=function(p){var v=this.context.gl;this.bind(),v.bufferSubData(v.ARRAY_BUFFER,0,p.arrayBuffer)},sr.prototype.enableAttributes=function(p,v){for(var g=0;g<this.attributes.length;g++){var w=v.attributes[this.attributes[g].name];void 0!==w&&p.enableVertexAttribArray(w)}},sr.prototype.setVertexAttribPointers=function(p,v,g){for(var w=0;w<this.attributes.length;w++){var C=this.attributes[w],R=v.attributes[C.name];void 0!==R&&p.vertexAttribPointer(R,C.components,p[gn[C.type]],!1,this.itemSize,C.offset+this.itemSize*(g||0))}},sr.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ut=function(p){this.gl=p.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Ut.prototype.get=function(){return this.current},Ut.prototype.set=function(p){},Ut.prototype.getDefault=function(){return this.default},Ut.prototype.setDefault=function(){this.set(this.default)};var K=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return b.Color.transparent},v.prototype.set=function(g){var w=this.current;(g.r!==w.r||g.g!==w.g||g.b!==w.b||g.a!==w.a||this.dirty)&&(this.gl.clearColor(g.r,g.g,g.b,g.a),this.current=g,this.dirty=!1)},v}(Ut),rr=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return 1},v.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.clearDepth(g),this.current=g,this.dirty=!1)},v}(Ut),fr=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return 0},v.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.clearStencil(g),this.current=g,this.dirty=!1)},v}(Ut),Xi=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return[!0,!0,!0,!0]},v.prototype.set=function(g){var w=this.current;(g[0]!==w[0]||g[1]!==w[1]||g[2]!==w[2]||g[3]!==w[3]||this.dirty)&&(this.gl.colorMask(g[0],g[1],g[2],g[3]),this.current=g,this.dirty=!1)},v}(Ut),_i=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return!0},v.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.depthMask(g),this.current=g,this.dirty=!1)},v}(Ut),wt=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return 255},v.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.stencilMask(g),this.current=g,this.dirty=!1)},v}(Ut),bt=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},v.prototype.set=function(g){var w=this.current;(g.func!==w.func||g.ref!==w.ref||g.mask!==w.mask||this.dirty)&&(this.gl.stencilFunc(g.func,g.ref,g.mask),this.current=g,this.dirty=!1)},v}(Ut),ha=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){var g=this.gl;return[g.KEEP,g.KEEP,g.KEEP]},v.prototype.set=function(g){var w=this.current;(g[0]!==w[0]||g[1]!==w[1]||g[2]!==w[2]||this.dirty)&&(this.gl.stencilOp(g[0],g[1],g[2]),this.current=g,this.dirty=!1)},v}(Ut),Me=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return!1},v.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;g?w.enable(w.STENCIL_TEST):w.disable(w.STENCIL_TEST),this.current=g,this.dirty=!1}},v}(Ut),te=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return[0,1]},v.prototype.set=function(g){var w=this.current;(g[0]!==w[0]||g[1]!==w[1]||this.dirty)&&(this.gl.depthRange(g[0],g[1]),this.current=g,this.dirty=!1)},v}(Ut),ne=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return!1},v.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;g?w.enable(w.DEPTH_TEST):w.disable(w.DEPTH_TEST),this.current=g,this.dirty=!1}},v}(Ut),ze=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return this.gl.LESS},v.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.depthFunc(g),this.current=g,this.dirty=!1)},v}(Ut),ut=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return!1},v.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;g?w.enable(w.BLEND):w.disable(w.BLEND),this.current=g,this.dirty=!1}},v}(Ut),Rt=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){var g=this.gl;return[g.ONE,g.ZERO]},v.prototype.set=function(g){var w=this.current;(g[0]!==w[0]||g[1]!==w[1]||this.dirty)&&(this.gl.blendFunc(g[0],g[1]),this.current=g,this.dirty=!1)},v}(Ut),Mt=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return b.Color.transparent},v.prototype.set=function(g){var w=this.current;(g.r!==w.r||g.g!==w.g||g.b!==w.b||g.a!==w.a||this.dirty)&&(this.gl.blendColor(g.r,g.g,g.b,g.a),this.current=g,this.dirty=!1)},v}(Ut),hr=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return this.gl.FUNC_ADD},v.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.blendEquation(g),this.current=g,this.dirty=!1)},v}(Ut),zr=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return!1},v.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;g?w.enable(w.CULL_FACE):w.disable(w.CULL_FACE),this.current=g,this.dirty=!1}},v}(Ut),jr=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return this.gl.BACK},v.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.cullFace(g),this.current=g,this.dirty=!1)},v}(Ut),Wi=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return this.gl.CCW},v.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.frontFace(g),this.current=g,this.dirty=!1)},v}(Ut),Kr=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return null},v.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.useProgram(g),this.current=g,this.dirty=!1)},v}(Ut),Ws=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return this.gl.TEXTURE0},v.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.activeTexture(g),this.current=g,this.dirty=!1)},v}(Ut),Js=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){var g=this.gl;return[0,0,g.drawingBufferWidth,g.drawingBufferHeight]},v.prototype.set=function(g){var w=this.current;(g[0]!==w[0]||g[1]!==w[1]||g[2]!==w[2]||g[3]!==w[3]||this.dirty)&&(this.gl.viewport(g[0],g[1],g[2],g[3]),this.current=g,this.dirty=!1)},v}(Ut),Wu=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return null},v.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,g),this.current=g,this.dirty=!1}},v}(Ut),Td=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return null},v.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.bindRenderbuffer(w.RENDERBUFFER,g),this.current=g,this.dirty=!1}},v}(Ut),Wf=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return null},v.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.bindTexture(w.TEXTURE_2D,g),this.current=g,this.dirty=!1}},v}(Ut),Tc=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return null},v.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.bindBuffer(w.ARRAY_BUFFER,g),this.current=g,this.dirty=!1}},v}(Ut),gu=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return null},v.prototype.set=function(g){var w=this.gl;w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,g),this.current=g,this.dirty=!1},v}(Ut),vu=function(p){function v(g){p.call(this,g),this.vao=g.extVertexArrayObject}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return null},v.prototype.set=function(g){this.vao&&(g!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(g),this.current=g,this.dirty=!1)},v}(Ut),Zs=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return 4},v.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.pixelStorei(w.UNPACK_ALIGNMENT,g),this.current=g,this.dirty=!1}},v}(Ut),_u=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return!1},v.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.pixelStorei(w.UNPACK_PREMULTIPLY_ALPHA_WEBGL,g),this.current=g,this.dirty=!1}},v}(Ut),Gl=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return!1},v.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,g),this.current=g,this.dirty=!1}},v}(Ut),ui=function(p){function v(g,w){p.call(this,g),this.context=g,this.parent=w}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getDefault=function(){return null},v}(Ut),oe=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.setDirty=function(){this.dirty=!0},v.prototype.set=function(g){if(g!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var w=this.gl;w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,g,0),this.current=g,this.dirty=!1}},v}(ui),ce=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.set=function(g){if(g!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var w=this.gl;w.framebufferRenderbuffer(w.FRAMEBUFFER,w.DEPTH_ATTACHMENT,w.RENDERBUFFER,g),this.current=g,this.dirty=!1}},v}(ui),ve=function(p,v,g,w){this.context=p,this.width=v,this.height=g;var C=this.framebuffer=p.gl.createFramebuffer();this.colorAttachment=new oe(p,C),w&&(this.depthAttachment=new ce(p,C))};ve.prototype.destroy=function(){var p=this.context.gl,v=this.colorAttachment.get();if(v&&p.deleteTexture(v),this.depthAttachment){var g=this.depthAttachment.get();g&&p.deleteRenderbuffer(g)}p.deleteFramebuffer(this.framebuffer)};var Se=function(p,v,g){this.func=p,this.mask=v,this.range=g};Se.ReadOnly=!1,Se.ReadWrite=!0,Se.disabled=new Se(519,Se.ReadOnly,[0,1]);var Le=function(p,v,g,w,C,R){this.test=p,this.ref=v,this.mask=g,this.fail=w,this.depthFail=C,this.pass=R};Le.disabled=new Le({func:519,mask:0},0,0,7680,7680,7680);var Je=function(p,v,g){this.blendFunction=p,this.blendColor=v,this.mask=g};Je.disabled=new Je(Je.Replace=[1,0],b.Color.transparent,[!1,!1,!1,!1]),Je.unblended=new Je(Je.Replace,b.Color.transparent,[!0,!0,!0,!0]),Je.alphaBlended=new Je([1,771],b.Color.transparent,[!0,!0,!0,!0]);var et=function(p,v,g){this.enable=p,this.mode=v,this.frontFace=g};et.disabled=new et(!1,1029,2305),et.backCCW=new et(!0,1029,2305);var Ke=function(p){this.gl=p,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new K(this),this.clearDepth=new rr(this),this.clearStencil=new fr(this),this.colorMask=new Xi(this),this.depthMask=new _i(this),this.stencilMask=new wt(this),this.stencilFunc=new bt(this),this.stencilOp=new ha(this),this.stencilTest=new Me(this),this.depthRange=new te(this),this.depthTest=new ne(this),this.depthFunc=new ze(this),this.blend=new ut(this),this.blendFunc=new Rt(this),this.blendColor=new Mt(this),this.blendEquation=new hr(this),this.cullFace=new zr(this),this.cullFaceSide=new jr(this),this.frontFace=new Wi(this),this.program=new Kr(this),this.activeTexture=new Ws(this),this.viewport=new Js(this),this.bindFramebuffer=new Wu(this),this.bindRenderbuffer=new Td(this),this.bindTexture=new Wf(this),this.bindVertexBuffer=new Tc(this),this.bindElementBuffer=new gu(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new vu(this),this.pixelStoreUnpack=new Zs(this),this.pixelStoreUnpackPremultiplyAlpha=new _u(this),this.pixelStoreUnpackFlipY=new Gl(this),this.extTextureFilterAnisotropic=p.getExtension("EXT_texture_filter_anisotropic")||p.getExtension("MOZ_EXT_texture_filter_anisotropic")||p.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=p.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=p.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(p.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=p.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=p.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=p.getParameter(p.MAX_TEXTURE_SIZE)};Ke.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ke.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ke.prototype.createIndexBuffer=function(p,v){return new Cn(this,p,v)},Ke.prototype.createVertexBuffer=function(p,v,g){return new sr(this,p,v,g)},Ke.prototype.createRenderbuffer=function(p,v,g){var w=this.gl,C=w.createRenderbuffer();return this.bindRenderbuffer.set(C),w.renderbufferStorage(w.RENDERBUFFER,p,v,g),this.bindRenderbuffer.set(null),C},Ke.prototype.createFramebuffer=function(p,v,g){return new ve(this,p,v,g)},Ke.prototype.clear=function(p){var v=p.color,g=p.depth,w=this.gl,C=0;v&&(C|=w.COLOR_BUFFER_BIT,this.clearColor.set(v),this.colorMask.set([!0,!0,!0,!0])),void 0!==g&&(C|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(g),this.depthMask.set(!0)),w.clear(C)},Ke.prototype.setCullFace=function(p){!1===p.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(p.mode),this.frontFace.set(p.frontFace))},Ke.prototype.setDepthMode=function(p){p.func!==this.gl.ALWAYS||p.mask?(this.depthTest.set(!0),this.depthFunc.set(p.func),this.depthMask.set(p.mask),this.depthRange.set(p.range)):this.depthTest.set(!1)},Ke.prototype.setStencilMode=function(p){p.test.func!==this.gl.ALWAYS||p.mask?(this.stencilTest.set(!0),this.stencilMask.set(p.mask),this.stencilOp.set([p.fail,p.depthFail,p.pass]),this.stencilFunc.set({func:p.test.func,ref:p.ref,mask:p.test.mask})):this.stencilTest.set(!1)},Ke.prototype.setColorMode=function(p){b.deepEqual(p.blendFunction,Je.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(p.blendFunction),this.blendColor.set(p.blendColor)),this.colorMask.set(p.mask)},Ke.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Pe=function(p){function v(g,w,C){var R=this;p.call(this),this.id=g,this.dispatcher=C,this.on("data",function(O){"source"===O.dataType&&"metadata"===O.sourceDataType&&(R._sourceLoaded=!0),R._sourceLoaded&&!R._paused&&"source"===O.dataType&&"content"===O.sourceDataType&&(R.reload(),R.transform&&R.update(R.transform))}),this.on("error",function(){R._sourceErrored=!0}),this._source=function(O,F,Y,ae){var be=new yt[F.type](O,F,Y,ae);if(be.id!==O)throw new Error("Expected Source id to be "+O+" instead of "+be.id);return b.bindAll(["load","abort","unload","serialize","prepare"],be),be}(g,w,C,this),this._tiles={},this._cache=new xt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new b.SourceFeatureState}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.onAdd=function(g){this.map=g,this._maxTileCacheSize=g?g._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(g)},v.prototype.onRemove=function(g){this._source&&this._source.onRemove&&this._source.onRemove(g)},v.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var g in this._tiles){var w=this._tiles[g];if("loaded"!==w.state&&"errored"!==w.state)return!1}return!0},v.prototype.getSource=function(){return this._source},v.prototype.pause=function(){this._paused=!0},v.prototype.resume=function(){if(this._paused){var g=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,g&&this.reload(),this.transform&&this.update(this.transform)}},v.prototype._loadTile=function(g,w){return this._source.loadTile(g,w)},v.prototype._unloadTile=function(g){if(this._source.unloadTile)return this._source.unloadTile(g,function(){})},v.prototype._abortTile=function(g){if(this._source.abortTile)return this._source.abortTile(g,function(){})},v.prototype.serialize=function(){return this._source.serialize()},v.prototype.prepare=function(g){for(var w in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var C=this._tiles[w];C.upload(g),C.prepare(this.map.style.imageManager)}},v.prototype.getIds=function(){return b.values(this._tiles).map(function(g){return g.tileID}).sort(je).map(function(g){return g.key})},v.prototype.getRenderableIds=function(g){var w=this,C=[];for(var R in this._tiles)this._isIdRenderable(R,g)&&C.push(this._tiles[R]);return g?C.sort(function(O,F){var Y=O.tileID,ae=F.tileID,be=new b.Point(Y.canonical.x,Y.canonical.y)._rotate(w.transform.angle),Ce=new b.Point(ae.canonical.x,ae.canonical.y)._rotate(w.transform.angle);return Y.overscaledZ-ae.overscaledZ||Ce.y-be.y||Ce.x-be.x}).map(function(O){return O.tileID.key}):C.map(function(O){return O.tileID}).sort(je).map(function(O){return O.key})},v.prototype.hasRenderableParent=function(g){var w=this.findLoadedParent(g,0);return!!w&&this._isIdRenderable(w.tileID.key)},v.prototype._isIdRenderable=function(g,w){return this._tiles[g]&&this._tiles[g].hasData()&&!this._coveredTiles[g]&&(w||!this._tiles[g].holdingForFade())},v.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var g in this._cache.reset(),this._tiles)"errored"!==this._tiles[g].state&&this._reloadTile(g,"reloading")},v.prototype._reloadTile=function(g,w){var C=this._tiles[g];C&&("loading"!==C.state&&(C.state=w),this._loadTile(C,this._tileLoaded.bind(this,C,g,w)))},v.prototype._tileLoaded=function(g,w,C,R){if(R)return g.state="errored",void(404!==R.status?this._source.fire(new b.ErrorEvent(R,{tile:g})):this.update(this.transform));g.timeAdded=b.browser.now(),"expired"===C&&(g.refreshedUponExpiration=!0),this._setTileReloadTimer(w,g),"raster-dem"===this.getSource().type&&g.dem&&this._backfillDEM(g),this._state.initializeTileState(g,this.map?this.map.painter:null),this._source.fire(new b.Event("data",{dataType:"source",tile:g,coord:g.tileID}))},v.prototype._backfillDEM=function(g){for(var w=this.getRenderableIds(),C=0;C<w.length;C++){var R=w[C];if(g.neighboringTiles&&g.neighboringTiles[R]){var O=this.getTileByID(R);F(g,O),F(O,g)}}function F(Y,ae){Y.needsHillshadePrepare=!0;var be=ae.tileID.canonical.x-Y.tileID.canonical.x,Ce=ae.tileID.canonical.y-Y.tileID.canonical.y,Ee=Math.pow(2,Y.tileID.canonical.z),Ne=ae.tileID.key;0===be&&0===Ce||Math.abs(Ce)>1||(Math.abs(be)>1&&(1===Math.abs(be+Ee)?be+=Ee:1===Math.abs(be-Ee)&&(be-=Ee)),ae.dem&&Y.dem&&(Y.dem.backfillBorder(ae.dem,be,Ce),Y.neighboringTiles&&Y.neighboringTiles[Ne]&&(Y.neighboringTiles[Ne].backfilled=!0)))}},v.prototype.getTile=function(g){return this.getTileByID(g.key)},v.prototype.getTileByID=function(g){return this._tiles[g]},v.prototype._retainLoadedChildren=function(g,w,C,R){for(var O in this._tiles){var F=this._tiles[O];if(!(R[O]||!F.hasData()||F.tileID.overscaledZ<=w||F.tileID.overscaledZ>C)){for(var Y=F.tileID;F&&F.tileID.overscaledZ>w+1;){var ae=F.tileID.scaledTo(F.tileID.overscaledZ-1);(F=this._tiles[ae.key])&&F.hasData()&&(Y=ae)}for(var be=Y;be.overscaledZ>w;)if(g[(be=be.scaledTo(be.overscaledZ-1)).key]){R[Y.key]=Y;break}}}},v.prototype.findLoadedParent=function(g,w){if(g.key in this._loadedParentTiles){var C=this._loadedParentTiles[g.key];return C&&C.tileID.overscaledZ>=w?C:null}for(var R=g.overscaledZ-1;R>=w;R--){var O=g.scaledTo(R),F=this._getLoadedTile(O);if(F)return F}},v.prototype._getLoadedTile=function(g){var w=this._tiles[g.key];return w&&w.hasData()?w:this._cache.getByKey(g.wrapped().key)},v.prototype.updateCacheSize=function(g){var w=Math.ceil(g.width/this._source.tileSize)+1,C=Math.ceil(g.height/this._source.tileSize)+1,R=Math.floor(w*C*5),O="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,R):R;this._cache.setMaxSize(O)},v.prototype.handleWrapJump=function(g){var w=Math.round((g-(void 0===this._prevLng?g:this._prevLng))/360);if(this._prevLng=g,w){var C={};for(var R in this._tiles){var O=this._tiles[R];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+w),C[O.tileID.key]=O}for(var F in this._tiles=C,this._timers)clearTimeout(this._timers[F]),delete this._timers[F];for(var Y in this._tiles)this._setTileReloadTimer(Y,this._tiles[Y])}},v.prototype.update=function(g){var w=this;if(this.transform=g,this._sourceLoaded&&!this._paused){var C;this.updateCacheSize(g),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?C=g.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Tt){return new b.OverscaledTileID(Tt.canonical.z,Tt.wrap,Tt.canonical.z,Tt.canonical.x,Tt.canonical.y)}):(C=g.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(C=C.filter(function(Tt){return w._source.hasTile(Tt)}))):C=[];var R=g.coveringZoomLevel(this._source),O=Math.max(R-v.maxOverzooming,this._source.minzoom),F=Math.max(R+v.maxUnderzooming,this._source.minzoom),Y=this._updateRetainedTiles(C,R);if(Dt(this._source.type)){for(var ae={},be={},Ce=0,Ee=Object.keys(Y);Ce<Ee.length;Ce+=1){var Ne=Ee[Ce],ke=Y[Ne],Ve=this._tiles[Ne];if(Ve&&!(Ve.fadeEndTime&&Ve.fadeEndTime<=b.browser.now())){var De=this.findLoadedParent(ke,O);De&&(this._addTile(De.tileID),ae[De.tileID.key]=De.tileID),be[Ne]=ke}}for(var qe in this._retainLoadedChildren(be,R,F,Y),ae)Y[qe]||(this._coveredTiles[qe]=!0,Y[qe]=ae[qe])}for(var Qe in Y)this._tiles[Qe].clearFadeHold();for(var rt=0,ht=b.keysDifference(this._tiles,Y);rt<ht.length;rt+=1){var dt=ht[rt],mt=this._tiles[dt];mt.hasSymbolBuckets&&!mt.holdingForFade()?mt.setHoldDuration(this.map._fadeDuration):mt.hasSymbolBuckets&&!mt.symbolFadeFinished()||this._removeTile(dt)}this._updateLoadedParentTileCache()}},v.prototype.releaseSymbolFadeTiles=function(){for(var g in this._tiles)this._tiles[g].holdingForFade()&&this._removeTile(g)},v.prototype._updateRetainedTiles=function(g,w){for(var C={},R={},O=Math.max(w-v.maxOverzooming,this._source.minzoom),F=Math.max(w+v.maxUnderzooming,this._source.minzoom),Y={},ae=0,be=g;ae<be.length;ae+=1){var Ce=be[ae],Ee=this._addTile(Ce);C[Ce.key]=Ce,Ee.hasData()||w<this._source.maxzoom&&(Y[Ce.key]=Ce)}this._retainLoadedChildren(Y,w,F,C);for(var Ne=0,ke=g;Ne<ke.length;Ne+=1){var Ve=ke[Ne],De=this._tiles[Ve.key];if(!De.hasData()){if(w+1>this._source.maxzoom){var qe=Ve.children(this._source.maxzoom)[0],Qe=this.getTile(qe);if(Qe&&Qe.hasData()){C[qe.key]=qe;continue}}else{var rt=Ve.children(this._source.maxzoom);if(C[rt[0].key]&&C[rt[1].key]&&C[rt[2].key]&&C[rt[3].key])continue}for(var ht=De.wasRequested(),dt=Ve.overscaledZ-1;dt>=O;--dt){var mt=Ve.scaledTo(dt);if(R[mt.key]||(R[mt.key]=!0,!(De=this.getTile(mt))&&ht&&(De=this._addTile(mt)),De&&(C[mt.key]=mt,ht=De.wasRequested(),De.hasData())))break}}}return C},v.prototype._updateLoadedParentTileCache=function(){for(var g in this._loadedParentTiles={},this._tiles){for(var w=[],C=void 0,R=this._tiles[g].tileID;R.overscaledZ>0;){if(R.key in this._loadedParentTiles){C=this._loadedParentTiles[R.key];break}w.push(R.key);var O=R.scaledTo(R.overscaledZ-1);if(C=this._getLoadedTile(O))break;R=O}for(var F=0,Y=w;F<Y.length;F+=1)this._loadedParentTiles[Y[F]]=C}},v.prototype._addTile=function(g){var w=this._tiles[g.key];if(w)return w;(w=this._cache.getAndRemove(g))&&(this._setTileReloadTimer(g.key,w),w.tileID=g,this._state.initializeTileState(w,this.map?this.map.painter:null),this._cacheTimers[g.key]&&(clearTimeout(this._cacheTimers[g.key]),delete this._cacheTimers[g.key],this._setTileReloadTimer(g.key,w)));var C=Boolean(w);return C||(w=new b.Tile(g,this._source.tileSize*g.overscaleFactor()),this._loadTile(w,this._tileLoaded.bind(this,w,g.key,w.state))),w?(w.uses++,this._tiles[g.key]=w,C||this._source.fire(new b.Event("dataloading",{tile:w,coord:w.tileID,dataType:"source"})),w):null},v.prototype._setTileReloadTimer=function(g,w){var C=this;g in this._timers&&(clearTimeout(this._timers[g]),delete this._timers[g]);var R=w.getExpiryTimeout();R&&(this._timers[g]=setTimeout(function(){C._reloadTile(g,"expired"),delete C._timers[g]},R))},v.prototype._removeTile=function(g){var w=this._tiles[g];w&&(w.uses--,delete this._tiles[g],this._timers[g]&&(clearTimeout(this._timers[g]),delete this._timers[g]),w.uses>0||(w.hasData()&&"reloading"!==w.state?this._cache.add(w.tileID,w,w.getExpiryTimeout()):(w.aborted=!0,this._abortTile(w),this._unloadTile(w))))},v.prototype.clearTiles=function(){for(var g in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(g);this._cache.reset()},v.prototype.tilesIn=function(g,w,C){var R=this,O=[],F=this.transform;if(!F)return O;for(var Y=C?F.getCameraQueryGeometry(g):g,ae=g.map(function(dt){return F.pointCoordinate(dt)}),be=Y.map(function(dt){return F.pointCoordinate(dt)}),Ce=this.getIds(),Ee=1/0,Ne=1/0,ke=-1/0,Ve=-1/0,De=0,qe=be;De<qe.length;De+=1){var Qe=qe[De];Ee=Math.min(Ee,Qe.x),Ne=Math.min(Ne,Qe.y),ke=Math.max(ke,Qe.x),Ve=Math.max(Ve,Qe.y)}for(var rt=function(dt){var mt=R._tiles[Ce[dt]];if(!mt.holdingForFade()){var Tt=mt.tileID,kt=Math.pow(2,F.zoom-mt.tileID.overscaledZ),Ot=w*mt.queryPadding*b.EXTENT/mt.tileSize/kt,Lt=[Tt.getTilePoint(new b.MercatorCoordinate(Ee,Ne)),Tt.getTilePoint(new b.MercatorCoordinate(ke,Ve))];if(Lt[0].x-Ot<b.EXTENT&&Lt[0].y-Ot<b.EXTENT&&Lt[1].x+Ot>=0&&Lt[1].y+Ot>=0){var fn=ae.map(function(hn){return Tt.getTilePoint(hn)}),pn=be.map(function(hn){return Tt.getTilePoint(hn)});O.push({tile:mt,tileID:Tt,queryGeometry:fn,cameraQueryGeometry:pn,scale:kt})}}},ht=0;ht<Ce.length;ht++)rt(ht);return O},v.prototype.getVisibleCoordinates=function(g){for(var w=this,C=this.getRenderableIds(g).map(function(Y){return w._tiles[Y].tileID}),R=0,O=C;R<O.length;R+=1){var F=O[R];F.posMatrix=this.transform.calculatePosMatrix(F.toUnwrapped())}return C},v.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Dt(this._source.type))for(var g in this._tiles){var w=this._tiles[g];if(void 0!==w.fadeEndTime&&w.fadeEndTime>=b.browser.now())return!0}return!1},v.prototype.setFeatureState=function(g,w,C){this._state.updateState(g=g||"_geojsonTileLayer",w,C)},v.prototype.removeFeatureState=function(g,w,C){this._state.removeFeatureState(g=g||"_geojsonTileLayer",w,C)},v.prototype.getFeatureState=function(g,w){return this._state.getState(g=g||"_geojsonTileLayer",w)},v.prototype.setDependencies=function(g,w,C){var R=this._tiles[g];R&&R.setDependencies(w,C)},v.prototype.reloadTilesForDependencies=function(g,w){for(var C in this._tiles)this._tiles[C].hasDependency(g,w)&&this._reloadTile(C,"reloading");this._cache.filter(function(R){return!R.hasDependency(g,w)})},v}(b.Evented);function je(p,v){var g=Math.abs(2*p.wrap)-+(p.wrap<0),w=Math.abs(2*v.wrap)-+(v.wrap<0);return p.overscaledZ-v.overscaledZ||w-g||v.canonical.y-p.canonical.y||v.canonical.x-p.canonical.x}function Dt(p){return"raster"===p||"image"===p||"video"===p}function Bt(){return new b.window.Worker(ml.workerUrl)}Pe.maxOverzooming=10,Pe.maxUnderzooming=3;var lt="mapboxgl_preloaded_worker_pool",Et=function(){this.active={}};Et.prototype.acquire=function(p){if(!this.workers)for(this.workers=[];this.workers.length<Et.workerCount;)this.workers.push(new Bt);return this.active[p]=!0,this.workers.slice()},Et.prototype.release=function(p){delete this.active[p],0===this.numActive()&&(this.workers.forEach(function(v){v.terminate()}),this.workers=null)},Et.prototype.isPreloaded=function(){return!!this.active[lt]},Et.prototype.numActive=function(){return Object.keys(this.active).length};var Jt,Ht=Math.floor(b.browser.hardwareConcurrency/2);function sn(){return Jt||(Jt=new Et),Jt}function Pt(p,v){var g={};for(var w in p)"ref"!==w&&(g[w]=p[w]);return b.refProperties.forEach(function(C){C in v&&(g[C]=v[C])}),g}function qt(p){p=p.slice();for(var v=Object.create(null),g=0;g<p.length;g++)v[p[g].id]=p[g];for(var w=0;w<p.length;w++)"ref"in p[w]&&(p[w]=Pt(p[w],v[p[w].ref]));return p}Et.workerCount=Math.max(Math.min(Ht,6),1);var It={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function On(p,v,g){g.push({command:It.addSource,args:[p,v[p]]})}function Tn(p,v,g){v.push({command:It.removeSource,args:[p]}),g[p]=!0}function nn(p,v,g,w){Tn(p,g,w),On(p,v,g)}function Fr(p,v,g){var w;for(w in p[g])if(p[g].hasOwnProperty(w)&&"data"!==w&&!b.deepEqual(p[g][w],v[g][w]))return!1;for(w in v[g])if(v[g].hasOwnProperty(w)&&"data"!==w&&!b.deepEqual(p[g][w],v[g][w]))return!1;return!0}function $n(p,v,g,w,C,R){var O;for(O in v=v||{},p=p||{})p.hasOwnProperty(O)&&(b.deepEqual(p[O],v[O])||g.push({command:R,args:[w,O,v[O],C]}));for(O in v)v.hasOwnProperty(O)&&!p.hasOwnProperty(O)&&(b.deepEqual(p[O],v[O])||g.push({command:R,args:[w,O,v[O],C]}))}function Xr(p){return p.id}function ei(p,v){return p[v.id]=v,p}var pr=function(p,v){this.reset(p,v)};pr.prototype.reset=function(p,v){this.points=p||[],this._distances=[0];for(var g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(v||0,.5*this.length),this.paddedLength=this.length-2*this.padding},pr.prototype.lerp=function(p){if(1===this.points.length)return this.points[0];p=b.clamp(p,0,1);for(var v=1,g=this._distances[v],w=p*this.paddedLength+this.padding;g<w&&v<this._distances.length;)g=this._distances[++v];var C=v-1,R=this._distances[C],O=g-R,F=O>0?(w-R)/O:0;return this.points[C].mult(1-F).add(this.points[v].mult(F))};var Vr=function(p,v,g){var w=this.boxCells=[],C=this.circleCells=[];this.xCellCount=Math.ceil(p/g),this.yCellCount=Math.ceil(v/g);for(var R=0;R<this.xCellCount*this.yCellCount;R++)w.push([]),C.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=p,this.height=v,this.xScale=this.xCellCount/p,this.yScale=this.yCellCount/v,this.boxUid=0,this.circleUid=0};function li(p,v,g,w,C){var R=b.create();return v?(b.scale(R,R,[1/C,1/C,1]),g||b.rotateZ(R,R,w.angle)):b.multiply(R,w.labelPlaneMatrix,p),R}function Gr(p,v,g,w,C){if(v){var R=b.clone(p);return b.scale(R,R,[C,C,1]),g||b.rotateZ(R,R,-w.angle),R}return w.glCoordMatrix}function Kn(p,v){var g=[p.x,p.y,0,1];pa(g,g,v);var w=g[3];return{point:new b.Point(g[0]/w,g[1]/w),signedDistanceFromCamera:w}}function Di(p,v){return.5+p/v*.5}function ir(p,v){var g=p[0]/p[3],w=p[1]/p[3];return g>=-v[0]&&g<=v[0]&&w>=-v[1]&&w<=v[1]}function Rs(p,v,g,w,C,R,O,F){var Y=w?p.textSizeData:p.iconSizeData,ae=b.evaluateSizeForZoom(Y,g.transform.zoom),be=[256/g.width*2+1,256/g.height*2+1],Ce=w?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;Ce.clear();for(var Ee=p.lineVertexArray,Ne=w?p.text.placedSymbolArray:p.icon.placedSymbolArray,ke=g.transform.width/g.transform.height,Ve=!1,De=0;De<Ne.length;De++){var qe=Ne.get(De);if(qe.hidden||qe.writingMode===b.WritingMode.vertical&&!Ve)Ds(qe.numGlyphs,Ce);else{Ve=!1;var Qe=[qe.anchorX,qe.anchorY,0,1];if(b.transformMat4(Qe,Qe,v),ir(Qe,be)){var rt=Di(g.transform.cameraToCenterDistance,Qe[3]),ht=b.evaluateSizeForFeature(Y,ae,qe),dt=O?ht/rt:ht*rt,mt=new b.Point(qe.anchorX,qe.anchorY),Tt=Kn(mt,C).point,kt={},Ot=ur(qe,dt,!1,F,v,C,R,p.glyphOffsetArray,Ee,Ce,Tt,mt,kt,ke);Ve=Ot.useVertical,(Ot.notEnoughRoom||Ve||Ot.needsFlipping&&ur(qe,dt,!0,F,v,C,R,p.glyphOffsetArray,Ee,Ce,Tt,mt,kt,ke).notEnoughRoom)&&Ds(qe.numGlyphs,Ce)}else Ds(qe.numGlyphs,Ce)}}w?p.text.dynamicLayoutVertexBuffer.updateData(Ce):p.icon.dynamicLayoutVertexBuffer.updateData(Ce)}function Pd(p,v,g,w,C,R,O,F,Y,ae,be){var Ce=F.glyphStartIndex+F.numGlyphs,Ee=F.lineStartIndex,Ne=F.lineStartIndex+F.lineLength,ke=v.getoffsetX(F.glyphStartIndex),Ve=v.getoffsetX(Ce-1),De=Sr(p*ke,g,w,C,R,O,F.segment,Ee,Ne,Y,ae,be);if(!De)return null;var qe=Sr(p*Ve,g,w,C,R,O,F.segment,Ee,Ne,Y,ae,be);return qe?{first:De,last:qe}:null}function Ui(p,v,g,w){return p===b.WritingMode.horizontal&&Math.abs(g.y-v.y)>Math.abs(g.x-v.x)*w?{useVertical:!0}:(p===b.WritingMode.vertical?v.y<g.y:v.x>g.x)?{needsFlipping:!0}:null}function ur(p,v,g,w,C,R,O,F,Y,ae,be,Ce,Ee,Ne){var ke,Ve=v/24,De=p.lineOffsetX*Ve,qe=p.lineOffsetY*Ve;if(p.numGlyphs>1){var Qe=p.glyphStartIndex+p.numGlyphs,rt=p.lineStartIndex,ht=p.lineStartIndex+p.lineLength,dt=Pd(Ve,F,De,qe,g,be,Ce,p,Y,R,Ee);if(!dt)return{notEnoughRoom:!0};var mt=Kn(dt.first.point,O).point,Tt=Kn(dt.last.point,O).point;if(w&&!g){var kt=Ui(p.writingMode,mt,Tt,Ne);if(kt)return kt}ke=[dt.first];for(var Ot=p.glyphStartIndex+1;Ot<Qe-1;Ot++)ke.push(Sr(Ve*F.getoffsetX(Ot),De,qe,g,be,Ce,p.segment,rt,ht,Y,R,Ee));ke.push(dt.last)}else{if(w&&!g){var Lt=Kn(Ce,C).point,fn=p.lineStartIndex+p.segment+1,pn=new b.Point(Y.getx(fn),Y.gety(fn)),hn=Kn(pn,C),gr=hn.signedDistanceFromCamera>0?hn.point:Pc(Ce,pn,Lt,1,C),en=Ui(p.writingMode,Lt,gr,Ne);if(en)return en}var Rn=Sr(Ve*F.getoffsetX(p.glyphStartIndex),De,qe,g,be,Ce,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,Y,R,Ee);if(!Rn)return{notEnoughRoom:!0};ke=[Rn]}for(var Mn=0,Pn=ke;Mn<Pn.length;Mn+=1){var xn=Pn[Mn];b.addDynamicAttributes(ae,xn.point,xn.angle)}return{}}function Pc(p,v,g,w,C){var R=Kn(p.add(p.sub(v)._unit()),C).point,O=g.sub(R);return g.add(O._mult(w/O.mag()))}function Sr(p,v,g,w,C,R,O,F,Y,ae,be,Ce){var Ee=w?p-v:p+v,Ne=Ee>0?1:-1,ke=0;w&&(Ne*=-1,ke=Math.PI),Ne<0&&(ke+=Math.PI);for(var Ve=Ne>0?F+O:F+O+1,De=C,qe=C,Qe=0,rt=0,ht=Math.abs(Ee),dt=[];Qe+rt<=ht;){if((Ve+=Ne)<F||Ve>=Y)return null;if(qe=De,dt.push(De),void 0===(De=Ce[Ve])){var mt=new b.Point(ae.getx(Ve),ae.gety(Ve)),Tt=Kn(mt,be);if(Tt.signedDistanceFromCamera>0)De=Ce[Ve]=Tt.point;else{var kt=Ve-Ne;De=Pc(0===Qe?R:new b.Point(ae.getx(kt),ae.gety(kt)),mt,qe,ht-Qe+1,be)}}Qe+=rt,rt=qe.dist(De)}var Ot=(ht-Qe)/rt,Lt=De.sub(qe),fn=Lt.mult(Ot)._add(qe);fn._add(Lt._unit()._perp()._mult(g*Ne));var pn=ke+Math.atan2(De.y-qe.y,De.x-qe.x);return dt.push(fn),{point:fn,angle:pn,path:dt}}Vr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Vr.prototype.insert=function(p,v,g,w,C){this._forEachCell(v,g,w,C,this._insertBoxCell,this.boxUid++),this.boxKeys.push(p),this.bboxes.push(v),this.bboxes.push(g),this.bboxes.push(w),this.bboxes.push(C)},Vr.prototype.insertCircle=function(p,v,g,w){this._forEachCell(v-w,g-w,v+w,g+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(p),this.circles.push(v),this.circles.push(g),this.circles.push(w)},Vr.prototype._insertBoxCell=function(p,v,g,w,C,R){this.boxCells[C].push(R)},Vr.prototype._insertCircleCell=function(p,v,g,w,C,R){this.circleCells[C].push(R)},Vr.prototype._query=function(p,v,g,w,C,R){if(g<0||p>this.width||w<0||v>this.height)return!C&&[];var O=[];if(p<=0&&v<=0&&this.width<=g&&this.height<=w){if(C)return!0;for(var F=0;F<this.boxKeys.length;F++)O.push({key:this.boxKeys[F],x1:this.bboxes[4*F],y1:this.bboxes[4*F+1],x2:this.bboxes[4*F+2],y2:this.bboxes[4*F+3]});for(var Y=0;Y<this.circleKeys.length;Y++){var ae=this.circles[3*Y],be=this.circles[3*Y+1],Ce=this.circles[3*Y+2];O.push({key:this.circleKeys[Y],x1:ae-Ce,y1:be-Ce,x2:ae+Ce,y2:be+Ce})}return R?O.filter(R):O}return this._forEachCell(p,v,g,w,this._queryCell,O,{hitTest:C,seenUids:{box:{},circle:{}}},R),C?O.length>0:O},Vr.prototype._queryCircle=function(p,v,g,w,C){var R=p-g,O=p+g,F=v-g,Y=v+g;if(O<0||R>this.width||Y<0||F>this.height)return!w&&[];var ae=[];return this._forEachCell(R,F,O,Y,this._queryCellCircle,ae,{hitTest:w,circle:{x:p,y:v,radius:g},seenUids:{box:{},circle:{}}},C),w?ae.length>0:ae},Vr.prototype.query=function(p,v,g,w,C){return this._query(p,v,g,w,!1,C)},Vr.prototype.hitTest=function(p,v,g,w,C){return this._query(p,v,g,w,!0,C)},Vr.prototype.hitTestCircle=function(p,v,g,w){return this._queryCircle(p,v,g,!0,w)},Vr.prototype._queryCell=function(p,v,g,w,C,R,O,F){var Y=O.seenUids,ae=this.boxCells[C];if(null!==ae)for(var be=this.bboxes,Ce=0,Ee=ae;Ce<Ee.length;Ce+=1){var Ne=Ee[Ce];if(!Y.box[Ne]){Y.box[Ne]=!0;var ke=4*Ne;if(p<=be[ke+2]&&v<=be[ke+3]&&g>=be[ke+0]&&w>=be[ke+1]&&(!F||F(this.boxKeys[Ne]))){if(O.hitTest)return R.push(!0),!0;R.push({key:this.boxKeys[Ne],x1:be[ke],y1:be[ke+1],x2:be[ke+2],y2:be[ke+3]})}}}var Ve=this.circleCells[C];if(null!==Ve)for(var De=this.circles,qe=0,Qe=Ve;qe<Qe.length;qe+=1){var rt=Qe[qe];if(!Y.circle[rt]){Y.circle[rt]=!0;var ht=3*rt;if(this._circleAndRectCollide(De[ht],De[ht+1],De[ht+2],p,v,g,w)&&(!F||F(this.circleKeys[rt]))){if(O.hitTest)return R.push(!0),!0;var dt=De[ht],mt=De[ht+1],Tt=De[ht+2];R.push({key:this.circleKeys[rt],x1:dt-Tt,y1:mt-Tt,x2:dt+Tt,y2:mt+Tt})}}}},Vr.prototype._queryCellCircle=function(p,v,g,w,C,R,O,F){var Y=O.circle,ae=O.seenUids,be=this.boxCells[C];if(null!==be)for(var Ce=this.bboxes,Ee=0,Ne=be;Ee<Ne.length;Ee+=1){var ke=Ne[Ee];if(!ae.box[ke]){ae.box[ke]=!0;var Ve=4*ke;if(this._circleAndRectCollide(Y.x,Y.y,Y.radius,Ce[Ve+0],Ce[Ve+1],Ce[Ve+2],Ce[Ve+3])&&(!F||F(this.boxKeys[ke])))return R.push(!0),!0}}var De=this.circleCells[C];if(null!==De)for(var qe=this.circles,Qe=0,rt=De;Qe<rt.length;Qe+=1){var ht=rt[Qe];if(!ae.circle[ht]){ae.circle[ht]=!0;var dt=3*ht;if(this._circlesCollide(qe[dt],qe[dt+1],qe[dt+2],Y.x,Y.y,Y.radius)&&(!F||F(this.circleKeys[ht])))return R.push(!0),!0}}},Vr.prototype._forEachCell=function(p,v,g,w,C,R,O,F){for(var Y=this._convertToXCellCoord(p),ae=this._convertToYCellCoord(v),be=this._convertToXCellCoord(g),Ce=this._convertToYCellCoord(w),Ee=Y;Ee<=be;Ee++)for(var Ne=ae;Ne<=Ce;Ne++)if(C.call(this,p,v,g,w,this.xCellCount*Ne+Ee,R,O,F))return},Vr.prototype._convertToXCellCoord=function(p){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(p*this.xScale)))},Vr.prototype._convertToYCellCoord=function(p){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(p*this.yScale)))},Vr.prototype._circlesCollide=function(p,v,g,w,C,R){var O=w-p,F=C-v,Y=g+R;return Y*Y>O*O+F*F},Vr.prototype._circleAndRectCollide=function(p,v,g,w,C,R,O){var F=(R-w)/2,Y=Math.abs(p-(w+F));if(Y>F+g)return!1;var ae=(O-C)/2,be=Math.abs(v-(C+ae));if(be>ae+g)return!1;if(Y<=F||be<=ae)return!0;var Ce=Y-F,Ee=be-ae;return Ce*Ce+Ee*Ee<=g*g};var Oi=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ds(p,v){for(var g=0;g<p;g++){var w=v.length;v.resize(w+4),v.float32.set(Oi,3*w)}}function pa(p,v,g){var w=v[0],C=v[1];return p[0]=g[0]*w+g[4]*C+g[12],p[1]=g[1]*w+g[5]*C+g[13],p[3]=g[3]*w+g[7]*C+g[15],p}var dn=function(p,v,g){void 0===v&&(v=new Vr(p.width+200,p.height+200,25)),void 0===g&&(g=new Vr(p.width+200,p.height+200,25)),this.transform=p,this.grid=v,this.ignoredGrid=g,this.pitchfactor=Math.cos(p._pitch)*p.cameraToCenterDistance,this.screenRightBoundary=p.width+100,this.screenBottomBoundary=p.height+100,this.gridRightBoundary=p.width+200,this.gridBottomBoundary=p.height+200};function Bo(p,v,g){return v*(b.EXTENT/(p.tileSize*Math.pow(2,g-p.tileID.overscaledZ)))}dn.prototype.placeCollisionBox=function(p,v,g,w,C){var R=this.projectAndGetPerspectiveRatio(w,p.anchorPointX,p.anchorPointY),O=g*R.perspectiveRatio,F=p.x1*O+R.point.x,Y=p.y1*O+R.point.y,ae=p.x2*O+R.point.x,be=p.y2*O+R.point.y;return!this.isInsideGrid(F,Y,ae,be)||!v&&this.grid.hitTest(F,Y,ae,be,C)?{box:[],offscreen:!1}:{box:[F,Y,ae,be],offscreen:this.isOffscreen(F,Y,ae,be)}},dn.prototype.placeCollisionCircles=function(p,v,g,w,C,R,O,F,Y,ae,be,Ce,Ee){var Ne=[],ke=new b.Point(v.anchorX,v.anchorY),Ve=Kn(ke,R),De=Di(this.transform.cameraToCenterDistance,Ve.signedDistanceFromCamera),qe=(ae?C/De:C*De)/b.ONE_EM,Qe=Kn(ke,O).point,rt=Pd(qe,w,v.lineOffsetX*qe,v.lineOffsetY*qe,!1,Qe,ke,v,g,O,{}),ht=!1,dt=!1,mt=!0;if(rt){for(var Tt=.5*Ce*De+Ee,kt=new b.Point(-100,-100),Ot=new b.Point(this.screenRightBoundary,this.screenBottomBoundary),Lt=new pr,fn=rt.first,pn=rt.last,hn=[],gr=fn.path.length-1;gr>=1;gr--)hn.push(fn.path[gr]);for(var en=1;en<pn.path.length;en++)hn.push(pn.path[en]);var Rn=2.5*Tt;if(F){var Mn=hn.map(function(_a){return Kn(_a,F)});hn=Mn.some(function(_a){return _a.signedDistanceFromCamera<=0})?[]:Mn.map(function(_a){return _a.point})}var Pn=[];if(hn.length>0){for(var xn=hn[0].clone(),En=hn[0].clone(),bn=1;bn<hn.length;bn++)xn.x=Math.min(xn.x,hn[bn].x),xn.y=Math.min(xn.y,hn[bn].y),En.x=Math.max(En.x,hn[bn].x),En.y=Math.max(En.y,hn[bn].y);Pn=xn.x>=kt.x&&En.x<=Ot.x&&xn.y>=kt.y&&En.y<=Ot.y?[hn]:En.x<kt.x||xn.x>Ot.x||En.y<kt.y||xn.y>Ot.y?[]:b.clipLine([hn],kt.x,kt.y,Ot.x,Ot.y)}for(var mn=0,vr=Pn;mn<vr.length;mn+=1){var ai;Lt.reset(vr[mn],.25*Tt),ai=Lt.length<=.5*Tt?1:Math.ceil(Lt.paddedLength/Rn)+1;for(var Vo=0;Vo<ai;Vo++){var Ji=Vo/Math.max(ai-1,1),wi=Lt.lerp(Ji),mi=wi.x+100,bo=wi.y+100;Ne.push(mi,bo,Tt,0);var Ns=mi-Tt,ia=bo-Tt,oa=mi+Tt,Pa=bo+Tt;if(mt=mt&&this.isOffscreen(Ns,ia,oa,Pa),dt=dt||this.isInsideGrid(Ns,ia,oa,Pa),!p&&this.grid.hitTestCircle(mi,bo,Tt,be)&&(ht=!0,!Y))return{circles:[],offscreen:!1,collisionDetected:ht}}}}return{circles:!Y&&ht||!dt?[]:Ne,offscreen:mt,collisionDetected:ht}},dn.prototype.queryRenderedSymbols=function(p){if(0===p.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var v=[],g=1/0,w=1/0,C=-1/0,R=-1/0,O=0,F=p;O<F.length;O+=1){var Y=F[O],ae=new b.Point(Y.x+100,Y.y+100);g=Math.min(g,ae.x),w=Math.min(w,ae.y),C=Math.max(C,ae.x),R=Math.max(R,ae.y),v.push(ae)}for(var be={},Ce={},Ee=0,Ne=this.grid.query(g,w,C,R).concat(this.ignoredGrid.query(g,w,C,R));Ee<Ne.length;Ee+=1){var ke=Ne[Ee],Ve=ke.key;if(void 0===be[Ve.bucketInstanceId]&&(be[Ve.bucketInstanceId]={}),!be[Ve.bucketInstanceId][Ve.featureIndex]){var De=[new b.Point(ke.x1,ke.y1),new b.Point(ke.x2,ke.y1),new b.Point(ke.x2,ke.y2),new b.Point(ke.x1,ke.y2)];b.polygonIntersectsPolygon(v,De)&&(be[Ve.bucketInstanceId][Ve.featureIndex]=!0,void 0===Ce[Ve.bucketInstanceId]&&(Ce[Ve.bucketInstanceId]=[]),Ce[Ve.bucketInstanceId].push(Ve.featureIndex))}}return Ce},dn.prototype.insertCollisionBox=function(p,v,g,w,C){(v?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:w,collisionGroupID:C},p[0],p[1],p[2],p[3])},dn.prototype.insertCollisionCircles=function(p,v,g,w,C){for(var R=v?this.ignoredGrid:this.grid,O={bucketInstanceId:g,featureIndex:w,collisionGroupID:C},F=0;F<p.length;F+=4)R.insertCircle(O,p[F],p[F+1],p[F+2])},dn.prototype.projectAndGetPerspectiveRatio=function(p,v,g){var w=[v,g,0,1];return pa(w,w,p),{point:new b.Point((w[0]/w[3]+1)/2*this.transform.width+100,(-w[1]/w[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/w[3]*.5}},dn.prototype.isOffscreen=function(p,v,g,w){return g<100||p>=this.screenRightBoundary||w<100||v>this.screenBottomBoundary},dn.prototype.isInsideGrid=function(p,v,g,w){return g>=0&&p<this.gridRightBoundary&&w>=0&&v<this.gridBottomBoundary},dn.prototype.getViewportMatrix=function(){var p=b.identity([]);return b.translate(p,p,[-100,-100,0]),p};var zo=function(p,v,g,w){this.opacity=p?Math.max(0,Math.min(1,p.opacity+(p.placed?v:-v))):w&&g?1:0,this.placed=g};zo.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Zn=function(p,v,g,w,C){this.text=new zo(p?p.text:null,v,g,C),this.icon=new zo(p?p.icon:null,v,w,C)};Zn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var rs=function(p,v,g){this.text=p,this.icon=v,this.skipFade=g},Yn=function(){this.invProjMatrix=b.create(),this.viewportMatrix=b.create(),this.circles=[]},ti=function(p,v,g,w,C){this.bucketInstanceId=p,this.featureIndex=v,this.sourceLayerIndex=g,this.bucketIndex=w,this.tileID=C},wp=function(p){this.crossSourceCollisions=p,this.maxGroupID=0,this.collisionGroups={}};function yu(p,v,g,w,C){var R=b.getAnchorAlignment(p),O=-(R.horizontalAlign-.5)*v,F=-(R.verticalAlign-.5)*g,Y=b.evaluateVariableOffset(p,w);return new b.Point(O+Y[0]*C,F+Y[1]*C)}function so(p,v,g,w,C,R){var O=p.x1,F=p.x2,Y=p.y1,ae=p.y2,be=p.anchorPointX,Ce=p.anchorPointY,Ee=new b.Point(v,g);return w&&Ee._rotate(C?R:-R),{x1:O+Ee.x,y1:Y+Ee.y,x2:F+Ee.x,y2:ae+Ee.y,anchorPointX:be,anchorPointY:Ce}}wp.prototype.get=function(p){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[p]){var v=++this.maxGroupID;this.collisionGroups[p]={ID:v,predicate:function(g){return g.collisionGroupID===v}}}return this.collisionGroups[p]};var yi=function(p,v,g,w){this.transform=p.clone(),this.collisionIndex=new dn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=v,this.retainedQueryData={},this.collisionGroups=new wp(g),this.collisionCircleArrays={},this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}};function uo(p,v,g,w,C){p.emplaceBack(v?1:0,g?1:0,w||0,C||0),p.emplaceBack(v?1:0,g?1:0,w||0,C||0),p.emplaceBack(v?1:0,g?1:0,w||0,C||0),p.emplaceBack(v?1:0,g?1:0,w||0,C||0)}yi.prototype.getBucketParts=function(p,v,g,w){var C=g.getBucket(v),R=g.latestFeatureIndex;if(C&&R&&v.id===C.layerIds[0]){var O=g.collisionBoxArray,F=C.layers[0].layout,Y=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),ae=g.tileSize/b.EXTENT,be=this.transform.calculatePosMatrix(g.tileID.toUnwrapped()),Ce="map"===F.get("text-pitch-alignment"),Ee="map"===F.get("text-rotation-alignment"),Ne=Bo(g,1,this.transform.zoom),ke=li(be,Ce,Ee,this.transform,Ne),Ve=null;if(Ce){var De=Gr(be,Ce,Ee,this.transform,Ne);Ve=b.multiply([],this.transform.labelPlaneMatrix,De)}this.retainedQueryData[C.bucketInstanceId]=new ti(C.bucketInstanceId,R,C.sourceLayerIndex,C.index,g.tileID);var qe={bucket:C,layout:F,posMatrix:be,textLabelPlaneMatrix:ke,labelToScreenMatrix:Ve,scale:Y,textPixelRatio:ae,holdingForFade:g.holdingForFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:b.evaluateSizeForZoom(C.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(C.sourceID)};if(w)for(var Qe=0,rt=C.sortKeyRanges;Qe<rt.length;Qe+=1){var ht=rt[Qe];p.push({sortKey:ht.sortKey,symbolInstanceStart:ht.symbolInstanceStart,symbolInstanceEnd:ht.symbolInstanceEnd,parameters:qe})}else p.push({symbolInstanceStart:0,symbolInstanceEnd:C.symbolInstances.length,parameters:qe})}},yi.prototype.attemptAnchorPlacement=function(p,v,g,w,C,R,O,F,Y,ae,be,Ce,Ee,Ne,ke){var Ve,De=[Ce.textOffset0,Ce.textOffset1],qe=yu(p,g,w,De,C),Qe=this.collisionIndex.placeCollisionBox(so(v,qe.x,qe.y,R,O,this.transform.angle),be,F,Y,ae.predicate);if(!ke||0!==this.collisionIndex.placeCollisionBox(so(ke,qe.x,qe.y,R,O,this.transform.angle),be,F,Y,ae.predicate).box.length)return Qe.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Ce.crossTileID]&&this.prevPlacement.placements[Ce.crossTileID]&&this.prevPlacement.placements[Ce.crossTileID].text&&(Ve=this.prevPlacement.variableOffsets[Ce.crossTileID].anchor),this.variableOffsets[Ce.crossTileID]={textOffset:De,width:g,height:w,anchor:p,textBoxScale:C,prevAnchor:Ve},this.markUsedJustification(Ee,p,Ce,Ne),Ee.allowVerticalPlacement&&(this.markUsedOrientation(Ee,Ne,Ce),this.placedOrientations[Ce.crossTileID]=Ne),{shift:qe,placedGlyphBoxes:Qe}):void 0},yi.prototype.placeLayerBucketPart=function(p,v,g){var w=this,C=p.parameters,R=C.bucket,O=C.layout,F=C.posMatrix,Y=C.textLabelPlaneMatrix,ae=C.labelToScreenMatrix,be=C.textPixelRatio,Ce=C.holdingForFade,Ee=C.collisionBoxArray,Ne=C.partiallyEvaluatedTextSize,ke=C.collisionGroup,Ve=O.get("text-optional"),De=O.get("icon-optional"),qe=O.get("text-allow-overlap"),Qe=O.get("icon-allow-overlap"),rt="map"===O.get("text-rotation-alignment"),ht="map"===O.get("text-pitch-alignment"),dt="none"!==O.get("icon-text-fit"),mt="viewport-y"===O.get("symbol-z-order"),Tt=qe&&(Qe||!R.hasIconData()||De),kt=Qe&&(qe||!R.hasTextData()||Ve);!R.collisionArrays&&Ee&&R.deserializeCollisionBoxes(Ee);var Ot=function(en,Rn){if(!v[en.crossTileID])if(Ce)w.placements[en.crossTileID]=new rs(!1,!1,!1);else{var Mn,Pn=!1,xn=!1,En=!0,bn=null,mn={box:null,offscreen:null},vr={box:null,offscreen:null},ai=null,Vo=null,Ji=0,wi=0,mi=0;Rn.textFeatureIndex?Ji=Rn.textFeatureIndex:en.useRuntimeCollisionCircles&&(Ji=en.featureIndex),Rn.verticalTextFeatureIndex&&(wi=Rn.verticalTextFeatureIndex);var bo=Rn.textBox;if(bo){var Ns=function(Ti){var Ei=b.WritingMode.horizontal;if(R.allowVerticalPlacement&&!Ti&&w.prevPlacement){var Zi=w.prevPlacement.placedOrientations[en.crossTileID];Zi&&(w.placedOrientations[en.crossTileID]=Zi,w.markUsedOrientation(R,Ei=Zi,en))}return Ei},ia=function(Ti,Ei){if(R.allowVerticalPlacement&&en.numVerticalGlyphVertices>0&&Rn.verticalTextBox)for(var Zi=0,vl=R.writingModes;Zi<vl.length&&(vl[Zi]===b.WritingMode.vertical?(mn=Ei(),vr=mn):mn=Ti(),!(mn&&mn.box&&mn.box.length));Zi+=1);else mn=Ti()};if(O.get("text-variable-anchor")){var oa=O.get("text-variable-anchor");if(w.prevPlacement&&w.prevPlacement.variableOffsets[en.crossTileID]){var Pa=w.prevPlacement.variableOffsets[en.crossTileID];oa.indexOf(Pa.anchor)>0&&(oa=oa.filter(function(Ti){return Ti!==Pa.anchor})).unshift(Pa.anchor)}var _a=function(Ti,Ei,Zi){for(var vl=Ti.x2-Ti.x1,tc=Ti.y2-Ti.y1,Vd=en.textBoxScale,_l=dt&&!Qe?Ei:null,Gd={box:[],offscreen:!1},dh=qe?2*oa.length:oa.length,nc=0;nc<dh;++nc){var rc=w.attemptAnchorPlacement(oa[nc%oa.length],Ti,vl,tc,Vd,rt,ht,be,F,ke,nc>=oa.length,en,R,Zi,_l);if(rc&&(Gd=rc.placedGlyphBoxes)&&Gd.box&&Gd.box.length){Pn=!0,bn=rc.shift;break}}return Gd};ia(function(){return _a(bo,Rn.iconBox,b.WritingMode.horizontal)},function(){var Ti=Rn.verticalTextBox;return R.allowVerticalPlacement&&!(mn&&mn.box&&mn.box.length)&&en.numVerticalGlyphVertices>0&&Ti?_a(Ti,Rn.verticalIconBox,b.WritingMode.vertical):{box:null,offscreen:null}}),mn&&(Pn=mn.box,En=mn.offscreen);var Fc=Ns(mn&&mn.box);if(!Pn&&w.prevPlacement){var fs=w.prevPlacement.variableOffsets[en.crossTileID];fs&&(w.variableOffsets[en.crossTileID]=fs,w.markUsedJustification(R,fs.anchor,en,Fc))}}else{var gl=function(Ti,Ei){var Zi=w.collisionIndex.placeCollisionBox(Ti,qe,be,F,ke.predicate);return Zi&&Zi.box&&Zi.box.length&&(w.markUsedOrientation(R,Ei,en),w.placedOrientations[en.crossTileID]=Ei),Zi};ia(function(){return gl(bo,b.WritingMode.horizontal)},function(){var Ti=Rn.verticalTextBox;return R.allowVerticalPlacement&&en.numVerticalGlyphVertices>0&&Ti?gl(Ti,b.WritingMode.vertical):{box:null,offscreen:null}}),Ns(mn&&mn.box&&mn.box.length)}}if(Pn=(Mn=mn)&&Mn.box&&Mn.box.length>0,En=Mn&&Mn.offscreen,en.useRuntimeCollisionCircles){var Ru=R.text.placedSymbolArray.get(en.centerJustifiedTextSymbolIndex),Ls=b.evaluateSizeForFeature(R.textSizeData,Ne,Ru),ec=O.get("text-padding");ai=w.collisionIndex.placeCollisionCircles(qe,Ru,R.lineVertexArray,R.glyphOffsetArray,Ls,F,Y,ae,g,ht,ke.predicate,en.collisionCircleDiameter,ec),Pn=qe||ai.circles.length>0&&!ai.collisionDetected,En=En&&ai.offscreen}if(Rn.iconFeatureIndex&&(mi=Rn.iconFeatureIndex),Rn.iconBox){var aa=function(Ti){var Ei=dt&&bn?so(Ti,bn.x,bn.y,rt,ht,w.transform.angle):Ti;return w.collisionIndex.placeCollisionBox(Ei,Qe,be,F,ke.predicate)};xn=vr&&vr.box&&vr.box.length&&Rn.verticalIconBox?(Vo=aa(Rn.verticalIconBox)).box.length>0:(Vo=aa(Rn.iconBox)).box.length>0,En=En&&Vo.offscreen}var Du=Ve||0===en.numHorizontalGlyphVertices&&0===en.numVerticalGlyphVertices,xi=De||0===en.numIconVertices;if(Du||xi?xi?Du||(xn=xn&&Pn):Pn=xn&&Pn:xn=Pn=xn&&Pn,Pn&&Mn&&Mn.box&&w.collisionIndex.insertCollisionBox(Mn.box,O.get("text-ignore-placement"),R.bucketInstanceId,vr&&vr.box&&wi?wi:Ji,ke.ID),xn&&Vo&&w.collisionIndex.insertCollisionBox(Vo.box,O.get("icon-ignore-placement"),R.bucketInstanceId,mi,ke.ID),ai&&(Pn&&w.collisionIndex.insertCollisionCircles(ai.circles,O.get("text-ignore-placement"),R.bucketInstanceId,Ji,ke.ID),g)){var Ou=R.bucketInstanceId,Xa=w.collisionCircleArrays[Ou];void 0===Xa&&(Xa=w.collisionCircleArrays[Ou]=new Yn);for(var ku=0;ku<ai.circles.length;ku+=4)Xa.circles.push(ai.circles[ku+0]),Xa.circles.push(ai.circles[ku+1]),Xa.circles.push(ai.circles[ku+2]),Xa.circles.push(ai.collisionDetected?1:0)}w.placements[en.crossTileID]=new rs(Pn||Tt,xn||kt,En||R.justReloaded),v[en.crossTileID]=!0}};if(mt)for(var Lt=R.getSortedSymbolIndexes(this.transform.angle),fn=Lt.length-1;fn>=0;--fn){var pn=Lt[fn];Ot(R.symbolInstances.get(pn),R.collisionArrays[pn])}else for(var hn=p.symbolInstanceStart;hn<p.symbolInstanceEnd;hn++)Ot(R.symbolInstances.get(hn),R.collisionArrays[hn]);if(g&&R.bucketInstanceId in this.collisionCircleArrays){var gr=this.collisionCircleArrays[R.bucketInstanceId];b.invert(gr.invProjMatrix,F),gr.viewportMatrix=this.collisionIndex.getViewportMatrix()}R.justReloaded=!1},yi.prototype.markUsedJustification=function(p,v,g,w){var C;C=w===b.WritingMode.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[b.getAnchorJustification(v)];for(var R=0,O=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];R<O.length;R+=1){var F=O[R];F>=0&&(p.text.placedSymbolArray.get(F).crossTileID=C>=0&&F!==C?0:g.crossTileID)}},yi.prototype.markUsedOrientation=function(p,v,g){for(var w=v===b.WritingMode.horizontal||v===b.WritingMode.horizontalOnly?v:0,C=v===b.WritingMode.vertical?v:0,R=0,O=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];R<O.length;R+=1)p.text.placedSymbolArray.get(O[R]).placedOrientation=w;g.verticalPlacedTextSymbolIndex&&(p.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=C)},yi.prototype.commit=function(p){this.commitTime=p,this.zoomAtLastRecencyCheck=this.transform.zoom;var v=this.prevPlacement,g=!1;this.prevZoomAdjustment=v?v.zoomAdjustment(this.transform.zoom):0;var w=v?v.symbolFadeChange(p):1,C=v?v.opacities:{},R=v?v.variableOffsets:{},O=v?v.placedOrientations:{};for(var F in this.placements){var Y=this.placements[F],ae=C[F];ae?(this.opacities[F]=new Zn(ae,w,Y.text,Y.icon),g=g||Y.text!==ae.text.placed||Y.icon!==ae.icon.placed):(this.opacities[F]=new Zn(null,w,Y.text,Y.icon,Y.skipFade),g=g||Y.text||Y.icon)}for(var be in C){var Ce=C[be];if(!this.opacities[be]){var Ee=new Zn(Ce,w,!1,!1);Ee.isHidden()||(this.opacities[be]=Ee,g=g||Ce.text.placed||Ce.icon.placed)}}for(var Ne in R)this.variableOffsets[Ne]||!this.opacities[Ne]||this.opacities[Ne].isHidden()||(this.variableOffsets[Ne]=R[Ne]);for(var ke in O)this.placedOrientations[ke]||!this.opacities[ke]||this.opacities[ke].isHidden()||(this.placedOrientations[ke]=O[ke]);g?this.lastPlacementChangeTime=p:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=v?v.lastPlacementChangeTime:p)},yi.prototype.updateLayerOpacities=function(p,v){for(var g={},w=0,C=v;w<C.length;w+=1){var R=C[w],O=R.getBucket(p);O&&R.latestFeatureIndex&&p.id===O.layerIds[0]&&this.updateBucketOpacities(O,g,R.collisionBoxArray)}},yi.prototype.updateBucketOpacities=function(p,v,g){var w=this;p.hasTextData()&&p.text.opacityVertexArray.clear(),p.hasIconData()&&p.icon.opacityVertexArray.clear(),p.hasIconCollisionBoxData()&&p.iconCollisionBox.collisionVertexArray.clear(),p.hasTextCollisionBoxData()&&p.textCollisionBox.collisionVertexArray.clear();var C=p.layers[0].layout,R=new Zn(null,0,!1,!1,!0),O=C.get("text-allow-overlap"),F=C.get("icon-allow-overlap"),Y=C.get("text-variable-anchor"),ae="map"===C.get("text-rotation-alignment"),be="map"===C.get("text-pitch-alignment"),Ce="none"!==C.get("icon-text-fit"),Ee=new Zn(null,0,O&&(F||!p.hasIconData()||C.get("icon-optional")),F&&(O||!p.hasTextData()||C.get("text-optional")),!0);!p.collisionArrays&&g&&(p.hasIconCollisionBoxData()||p.hasTextCollisionBoxData())&&p.deserializeCollisionBoxes(g);for(var Ne=function(qe,Qe,rt){for(var ht=0;ht<Qe/4;ht++)qe.opacityVertexArray.emplaceBack(rt)},ke=function(qe){var Qe=p.symbolInstances.get(qe),rt=Qe.numHorizontalGlyphVertices,ht=Qe.numVerticalGlyphVertices,dt=Qe.crossTileID,mt=w.opacities[dt];v[dt]?mt=R:mt||(w.opacities[dt]=mt=Ee),v[dt]=!0;var Tt=Qe.numIconVertices>0,kt=w.placedOrientations[Qe.crossTileID],Ot=kt===b.WritingMode.vertical,Lt=kt===b.WritingMode.horizontal||kt===b.WritingMode.horizontalOnly;if(rt>0||ht>0){var fn=xp(mt.text);Ne(p.text,rt,Ot?Id:fn),Ne(p.text,ht,Lt?Id:fn);var pn=mt.text.isHidden();[Qe.rightJustifiedTextSymbolIndex,Qe.centerJustifiedTextSymbolIndex,Qe.leftJustifiedTextSymbolIndex].forEach(function(mn){mn>=0&&(p.text.placedSymbolArray.get(mn).hidden=pn||Ot?1:0)}),Qe.verticalPlacedTextSymbolIndex>=0&&(p.text.placedSymbolArray.get(Qe.verticalPlacedTextSymbolIndex).hidden=pn||Lt?1:0);var hn=w.variableOffsets[Qe.crossTileID];hn&&w.markUsedJustification(p,hn.anchor,Qe,kt);var gr=w.placedOrientations[Qe.crossTileID];gr&&(w.markUsedJustification(p,"left",Qe,gr),w.markUsedOrientation(p,gr,Qe))}if(Tt){var en=xp(mt.icon),Rn=!(Ce&&Qe.verticalPlacedIconSymbolIndex&&Ot);Qe.placedIconSymbolIndex>=0&&(Ne(p.icon,Qe.numIconVertices,Rn?en:Id),p.icon.placedSymbolArray.get(Qe.placedIconSymbolIndex).hidden=mt.icon.isHidden()),Qe.verticalPlacedIconSymbolIndex>=0&&(Ne(p.icon,Qe.numVerticalIconVertices,Rn?Id:en),p.icon.placedSymbolArray.get(Qe.verticalPlacedIconSymbolIndex).hidden=mt.icon.isHidden())}if(p.hasIconCollisionBoxData()||p.hasTextCollisionBoxData()){var Mn=p.collisionArrays[qe];if(Mn){var Pn=new b.Point(0,0);if(Mn.textBox||Mn.verticalTextBox){var xn=!0;if(Y){var En=w.variableOffsets[dt];En?(Pn=yu(En.anchor,En.width,En.height,En.textOffset,En.textBoxScale),ae&&Pn._rotate(be?w.transform.angle:-w.transform.angle)):xn=!1}Mn.textBox&&uo(p.textCollisionBox.collisionVertexArray,mt.text.placed,!xn||Ot,Pn.x,Pn.y),Mn.verticalTextBox&&uo(p.textCollisionBox.collisionVertexArray,mt.text.placed,!xn||Lt,Pn.x,Pn.y)}var bn=Boolean(!Lt&&Mn.verticalIconBox);Mn.iconBox&&uo(p.iconCollisionBox.collisionVertexArray,mt.icon.placed,bn,Ce?Pn.x:0,Ce?Pn.y:0),Mn.verticalIconBox&&uo(p.iconCollisionBox.collisionVertexArray,mt.icon.placed,!bn,Ce?Pn.x:0,Ce?Pn.y:0)}}},Ve=0;Ve<p.symbolInstances.length;Ve++)ke(Ve);if(p.sortFeatures(this.transform.angle),this.retainedQueryData[p.bucketInstanceId]&&(this.retainedQueryData[p.bucketInstanceId].featureSortOrder=p.featureSortOrder),p.hasTextData()&&p.text.opacityVertexBuffer&&p.text.opacityVertexBuffer.updateData(p.text.opacityVertexArray),p.hasIconData()&&p.icon.opacityVertexBuffer&&p.icon.opacityVertexBuffer.updateData(p.icon.opacityVertexArray),p.hasIconCollisionBoxData()&&p.iconCollisionBox.collisionVertexBuffer&&p.iconCollisionBox.collisionVertexBuffer.updateData(p.iconCollisionBox.collisionVertexArray),p.hasTextCollisionBoxData()&&p.textCollisionBox.collisionVertexBuffer&&p.textCollisionBox.collisionVertexBuffer.updateData(p.textCollisionBox.collisionVertexArray),p.bucketInstanceId in this.collisionCircleArrays){var De=this.collisionCircleArrays[p.bucketInstanceId];p.placementInvProjMatrix=De.invProjMatrix,p.placementViewportMatrix=De.viewportMatrix,p.collisionCircleArray=De.circles,delete this.collisionCircleArrays[p.bucketInstanceId]}},yi.prototype.symbolFadeChange=function(p){return 0===this.fadeDuration?1:(p-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},yi.prototype.zoomAdjustment=function(p){return Math.max(0,(this.transform.zoom-p)/1.5)},yi.prototype.hasTransitions=function(p){return this.stale||p-this.lastPlacementChangeTime<this.fadeDuration},yi.prototype.stillRecent=function(p,v){var g=this.zoomAtLastRecencyCheck===v?1-this.zoomAdjustment(v):1;return this.zoomAtLastRecencyCheck=v,this.commitTime+this.fadeDuration*g>p},yi.prototype.setStale=function(){this.stale=!0};var Jf=Math.pow(2,25),ug=Math.pow(2,24),m_=Math.pow(2,17),is=Math.pow(2,16),g_=Math.pow(2,9),lg=Math.pow(2,8),v_=Math.pow(2,1);function xp(p){if(0===p.opacity&&!p.placed)return 0;if(1===p.opacity&&p.placed)return 4294967295;var v=p.placed?1:0,g=Math.floor(127*p.opacity);return g*Jf+v*ug+g*m_+v*is+g*g_+v*lg+g*v_+v}var Id=0,Zf=function(p){this._sortAcrossTiles="viewport-y"!==p.layout.get("symbol-z-order")&&!p.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Zf.prototype.continuePlacement=function(p,v,g,w,C){for(var R=this._bucketParts;this._currentTileIndex<p.length;)if(v.getBucketParts(R,w,p[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,C())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,R.sort(function(O,F){return O.sortKey-F.sortKey}));this._currentPartIndex<R.length;)if(v.placeLayerBucketPart(R[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,C())return!0;return!1};var Ic=function(p,v,g,w,C,R,O){this.placement=new yi(p,C,R,O),this._currentPlacementIndex=v.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=w,this._done=!1};Ic.prototype.isDone=function(){return this._done},Ic.prototype.continuePlacement=function(p,v,g){for(var w=this,C=b.browser.now(),R=function(){var Y=b.browser.now()-C;return!w._forceFullPlacement&&Y>2};this._currentPlacementIndex>=0;){var O=v[p[this._currentPlacementIndex]],F=this.placement.collisionIndex.transform.zoom;if("symbol"===O.type&&(!O.minzoom||O.minzoom<=F)&&(!O.maxzoom||O.maxzoom>F)){if(this._inProgressLayer||(this._inProgressLayer=new Zf(O)),this._inProgressLayer.continuePlacement(g[O.source],this.placement,this._showCollisionBoxes,O,R))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ic.prototype.commit=function(p){return this.placement.commit(p),this.placement};var cg=512/b.EXTENT/2,jo=function(p,v,g){this.tileID=p,this.indexedSymbolInstances={},this.bucketInstanceId=g;for(var w=0;w<v.length;w++){var C=v.get(w),R=C.key;this.indexedSymbolInstances[R]||(this.indexedSymbolInstances[R]=[]),this.indexedSymbolInstances[R].push({crossTileID:C.crossTileID,coord:this.getScaledCoordinates(C,p)})}};jo.prototype.getScaledCoordinates=function(p,v){var g=cg/Math.pow(2,v.canonical.z-this.tileID.canonical.z);return{x:Math.floor((v.canonical.x*b.EXTENT+p.anchorX)*g),y:Math.floor((v.canonical.y*b.EXTENT+p.anchorY)*g)}},jo.prototype.findMatches=function(p,v,g){for(var w=this.tileID.canonical.z<v.canonical.z?1:Math.pow(2,this.tileID.canonical.z-v.canonical.z),C=0;C<p.length;C++){var R=p.get(C);if(!R.crossTileID){var O=this.indexedSymbolInstances[R.key];if(O)for(var F=this.getScaledCoordinates(R,v),Y=0,ae=O;Y<ae.length;Y+=1){var be=ae[Y];if(Math.abs(be.coord.x-F.x)<=w&&Math.abs(be.coord.y-F.y)<=w&&!g[be.crossTileID]){g[be.crossTileID]=!0,R.crossTileID=be.crossTileID;break}}}}};var oi=function(){this.maxCrossTileID=0};oi.prototype.generate=function(){return++this.maxCrossTileID};var ma=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};ma.prototype.handleWrapJump=function(p){var v=Math.round((p-this.lng)/360);if(0!==v)for(var g in this.indexes){var w=this.indexes[g],C={};for(var R in w){var O=w[R];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+v),C[O.tileID.key]=O}this.indexes[g]=C}this.lng=p},ma.prototype.addBucket=function(p,v,g){if(this.indexes[p.overscaledZ]&&this.indexes[p.overscaledZ][p.key]){if(this.indexes[p.overscaledZ][p.key].bucketInstanceId===v.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(p.overscaledZ,this.indexes[p.overscaledZ][p.key])}for(var w=0;w<v.symbolInstances.length;w++)v.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[p.overscaledZ]||(this.usedCrossTileIDs[p.overscaledZ]={});var C=this.usedCrossTileIDs[p.overscaledZ];for(var R in this.indexes){var O=this.indexes[R];if(Number(R)>p.overscaledZ)for(var F in O){var Y=O[F];Y.tileID.isChildOf(p)&&Y.findMatches(v.symbolInstances,p,C)}else{var ae=O[p.scaledTo(Number(R)).key];ae&&ae.findMatches(v.symbolInstances,p,C)}}for(var be=0;be<v.symbolInstances.length;be++){var Ce=v.symbolInstances.get(be);Ce.crossTileID||(Ce.crossTileID=g.generate(),C[Ce.crossTileID]=!0)}return void 0===this.indexes[p.overscaledZ]&&(this.indexes[p.overscaledZ]={}),this.indexes[p.overscaledZ][p.key]=new jo(p,v.symbolInstances,v.bucketInstanceId),!0},ma.prototype.removeBucketCrossTileIDs=function(p,v){for(var g in v.indexedSymbolInstances)for(var w=0,C=v.indexedSymbolInstances[g];w<C.length;w+=1)delete this.usedCrossTileIDs[p][C[w].crossTileID]},ma.prototype.removeStaleBuckets=function(p){var v=!1;for(var g in this.indexes){var w=this.indexes[g];for(var C in w)p[w[C].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,w[C]),delete w[C],v=!0)}return v};var Hl=function(){this.layerIndexes={},this.crossTileIDs=new oi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Hl.prototype.addLayer=function(p,v,g){var w=this.layerIndexes[p.id];void 0===w&&(w=this.layerIndexes[p.id]=new ma);var C=!1,R={};w.handleWrapJump(g);for(var O=0,F=v;O<F.length;O+=1){var Y=F[O],ae=Y.getBucket(p);ae&&p.id===ae.layerIds[0]&&(ae.bucketInstanceId||(ae.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(Y.tileID,ae,this.crossTileIDs)&&(C=!0),R[ae.bucketInstanceId]=!0)}return w.removeStaleBuckets(R)&&(C=!0),C},Hl.prototype.pruneUnusedLayers=function(p){var v={};for(var g in p.forEach(function(w){v[w]=!0}),this.layerIndexes)v[g]||delete this.layerIndexes[g]};var Ju=function(p,v){return b.emitValidationErrors(p,v&&v.filter(function(g){return"source.canvas"!==g.identifier}))},yr=b.pick(It,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Zu=b.pick(It,["setCenter","setZoom","setBearing","setPitch"]),Zo=function(){var p={},v=b.styleSpec.$version;for(var g in b.styleSpec.$root){var w,C=b.styleSpec.$root[g];C.required&&null!=(w="version"===g?v:"array"===C.type?[]:{})&&(p[g]=w)}return p}(),os=function(p){function v(g,w){var C=this;void 0===w&&(w={}),p.call(this),this.map=g,this.dispatcher=new N(sn(),this),this.imageManager=new ge,this.imageManager.setEventedParent(this),this.glyphManager=new at(g._requestManager,w.localIdeographFontFamily),this.lineAtlas=new D(256,512),this.crossTileSymbolIndex=new Hl,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new b.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",b.getReferrer());var R=this;this._rtlTextPluginCallback=v.registerForPluginStateChange(function(O){R.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:O.pluginStatus,pluginURL:O.pluginURL},function(F,Y){if(b.triggerPluginCompletionEvent(F),Y&&Y.every(function(be){return be}))for(var ae in R.sourceCaches)R.sourceCaches[ae].reload()})}),this.on("data",function(O){if("source"===O.dataType&&"metadata"===O.sourceDataType){var F=C.sourceCaches[O.sourceId];if(F){var Y=F.getSource();if(Y&&Y.vectorLayerIds)for(var ae in C._layers){var be=C._layers[ae];be.source===Y.id&&C._validateLayer(be)}}}})}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.loadURL=function(g,w){var C=this;void 0===w&&(w={}),this.fire(new b.Event("dataloading",{dataType:"style"}));var R="boolean"==typeof w.validate?w.validate:!b.isMapboxURL(g);g=this.map._requestManager.normalizeStyleURL(g,w.accessToken);var O=this.map._requestManager.transformRequest(g,b.ResourceType.Style);this._request=b.getJSON(O,function(F,Y){C._request=null,F?C.fire(new b.ErrorEvent(F)):Y&&C._load(Y,R)})},v.prototype.loadJSON=function(g,w){var C=this;void 0===w&&(w={}),this.fire(new b.Event("dataloading",{dataType:"style"})),this._request=b.browser.frame(function(){C._request=null,C._load(g,!1!==w.validate)})},v.prototype.loadEmpty=function(){this.fire(new b.Event("dataloading",{dataType:"style"})),this._load(Zo,!1)},v.prototype._load=function(g,w){if(!w||!Ju(this,b.validateStyle(g))){for(var C in this._loaded=!0,this.stylesheet=g,g.sources)this.addSource(C,g.sources[C],{validate:!1});g.sprite?this._loadSprite(g.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(g.glyphs);var R=qt(this.stylesheet.layers);this._order=R.map(function(ae){return ae.id}),this._layers={},this._serializedLayers={};for(var O=0,F=R;O<F.length;O+=1){var Y=F[O];(Y=b.createStyleLayer(Y)).setEventedParent(this,{layer:{id:Y.id}}),this._layers[Y.id]=Y,this._serializedLayers[Y.id]=Y.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new P(this.stylesheet.light),this.fire(new b.Event("data",{dataType:"style"})),this.fire(new b.Event("style.load"))}},v.prototype._loadSprite=function(g){var w=this;this._spriteRequest=function(C,R,O){var F,Y,ae,be=b.browser.devicePixelRatio>1?"@2x":"",Ce=b.getJSON(R.transformRequest(R.normalizeSpriteURL(C,be,".json"),b.ResourceType.SpriteJSON),function(ke,Ve){Ce=null,ae||(ae=ke,F=Ve,Ne())}),Ee=b.getImage(R.transformRequest(R.normalizeSpriteURL(C,be,".png"),b.ResourceType.SpriteImage),function(ke,Ve){Ee=null,ae||(ae=ke,Y=Ve,Ne())});function Ne(){if(ae)O(ae);else if(F&&Y){var ke=b.browser.getImageData(Y),Ve={};for(var De in F){var qe=F[De],Qe=qe.width,rt=qe.height,ht=qe.x,dt=qe.y,mt=qe.sdf,Tt=qe.pixelRatio,kt=qe.stretchX,Ot=qe.stretchY,Lt=qe.content,fn=new b.RGBAImage({width:Qe,height:rt});b.RGBAImage.copy(ke,fn,{x:ht,y:dt},{x:0,y:0},{width:Qe,height:rt}),Ve[De]={data:fn,pixelRatio:Tt,sdf:mt,stretchX:kt,stretchY:Ot,content:Lt}}O(null,Ve)}}return{cancel:function(){Ce&&(Ce.cancel(),Ce=null),Ee&&(Ee.cancel(),Ee=null)}}}(g,this.map._requestManager,function(C,R){if(w._spriteRequest=null,C)w.fire(new b.ErrorEvent(C));else if(R)for(var O in R)w.imageManager.addImage(O,R[O]);w.imageManager.setLoaded(!0),w._availableImages=w.imageManager.listImages(),w.dispatcher.broadcast("setImages",w._availableImages),w.fire(new b.Event("data",{dataType:"style"}))})},v.prototype._validateLayer=function(g){var w=this.sourceCaches[g.source];if(w){var C=g.sourceLayer;if(C){var R=w.getSource();("geojson"===R.type||R.vectorLayerIds&&-1===R.vectorLayerIds.indexOf(C))&&this.fire(new b.ErrorEvent(new Error('Source layer "'+C+'" does not exist on source "'+R.id+'" as specified by style layer "'+g.id+'"')))}}},v.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var g in this.sourceCaches)if(!this.sourceCaches[g].loaded())return!1;return!!this.imageManager.isLoaded()},v.prototype._serializeLayers=function(g){for(var w=[],C=0,R=g;C<R.length;C+=1){var O=this._layers[R[C]];"custom"!==O.type&&w.push(O.serialize())}return w},v.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var g in this.sourceCaches)if(this.sourceCaches[g].hasTransition())return!0;for(var w in this._layers)if(this._layers[w].hasTransition())return!0;return!1},v.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},v.prototype.update=function(g){if(this._loaded){var w=this._changed;if(this._changed){var C=Object.keys(this._updatedLayers),R=Object.keys(this._removedLayers);for(var O in(C.length||R.length)&&this._updateWorkerLayers(C,R),this._updatedSources){var F=this._updatedSources[O];"reload"===F?this._reloadSource(O):"clear"===F&&this._clearSource(O)}for(var Y in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Y].updateTransitions(g);this.light.updateTransitions(g),this._resetUpdates()}var ae={};for(var be in this.sourceCaches){var Ce=this.sourceCaches[be];ae[be]=Ce.used,Ce.used=!1}for(var Ee=0,Ne=this._order;Ee<Ne.length;Ee+=1){var ke=this._layers[Ne[Ee]];ke.recalculate(g,this._availableImages),!ke.isHidden(g.zoom)&&ke.source&&(this.sourceCaches[ke.source].used=!0)}for(var Ve in ae){var De=this.sourceCaches[Ve];ae[Ve]!==De.used&&De.fire(new b.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Ve}))}this.light.recalculate(g),this.z=g.zoom,w&&this.fire(new b.Event("data",{dataType:"style"}))}},v.prototype._updateTilesForChangedImages=function(){var g=Object.keys(this._changedImages);if(g.length){for(var w in this.sourceCaches)this.sourceCaches[w].reloadTilesForDependencies(["icons","patterns"],g);this._changedImages={}}},v.prototype._updateWorkerLayers=function(g,w){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(g),removedIds:w})},v.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},v.prototype.setState=function(g){var w=this;if(this._checkLoaded(),Ju(this,b.validateStyle(g)))return!1;(g=b.clone$1(g)).layers=qt(g.layers);var C=function(O,F){if(!O)return[{command:It.setStyle,args:[F]}];var Y=[];try{if(!b.deepEqual(O.version,F.version))return[{command:It.setStyle,args:[F]}];b.deepEqual(O.center,F.center)||Y.push({command:It.setCenter,args:[F.center]}),b.deepEqual(O.zoom,F.zoom)||Y.push({command:It.setZoom,args:[F.zoom]}),b.deepEqual(O.bearing,F.bearing)||Y.push({command:It.setBearing,args:[F.bearing]}),b.deepEqual(O.pitch,F.pitch)||Y.push({command:It.setPitch,args:[F.pitch]}),b.deepEqual(O.sprite,F.sprite)||Y.push({command:It.setSprite,args:[F.sprite]}),b.deepEqual(O.glyphs,F.glyphs)||Y.push({command:It.setGlyphs,args:[F.glyphs]}),b.deepEqual(O.transition,F.transition)||Y.push({command:It.setTransition,args:[F.transition]}),b.deepEqual(O.light,F.light)||Y.push({command:It.setLight,args:[F.light]});var ae={},be=[];!function(Ee,Ne,ke,Ve){var De;for(De in Ne=Ne||{},Ee=Ee||{})Ee.hasOwnProperty(De)&&(Ne.hasOwnProperty(De)||Tn(De,ke,Ve));for(De in Ne)Ne.hasOwnProperty(De)&&(Ee.hasOwnProperty(De)?b.deepEqual(Ee[De],Ne[De])||("geojson"===Ee[De].type&&"geojson"===Ne[De].type&&Fr(Ee,Ne,De)?ke.push({command:It.setGeoJSONSourceData,args:[De,Ne[De].data]}):nn(De,Ne,ke,Ve)):On(De,Ne,ke))}(O.sources,F.sources,be,ae);var Ce=[];O.layers&&O.layers.forEach(function(Ee){ae[Ee.source]?Y.push({command:It.removeLayer,args:[Ee.id]}):Ce.push(Ee)}),Y=Y.concat(be),function(Ee,Ne,ke){Ne=Ne||[];var Ve,De,qe,Qe,rt,ht,dt,mt=(Ee=Ee||[]).map(Xr),Tt=Ne.map(Xr),kt=Ee.reduce(ei,{}),Ot=Ne.reduce(ei,{}),Lt=mt.slice(),fn=Object.create(null);for(Ve=0,De=0;Ve<mt.length;Ve++)Ot.hasOwnProperty(qe=mt[Ve])?De++:(ke.push({command:It.removeLayer,args:[qe]}),Lt.splice(Lt.indexOf(qe,De),1));for(Ve=0,De=0;Ve<Tt.length;Ve++)Lt[Lt.length-1-Ve]!==(qe=Tt[Tt.length-1-Ve])&&(kt.hasOwnProperty(qe)?(ke.push({command:It.removeLayer,args:[qe]}),Lt.splice(Lt.lastIndexOf(qe,Lt.length-De),1)):De++,ke.push({command:It.addLayer,args:[Ot[qe],ht=Lt[Lt.length-Ve]]}),Lt.splice(Lt.length-Ve,0,qe),fn[qe]=!0);for(Ve=0;Ve<Tt.length;Ve++)if(Qe=kt[qe=Tt[Ve]],rt=Ot[qe],!fn[qe]&&!b.deepEqual(Qe,rt))if(b.deepEqual(Qe.source,rt.source)&&b.deepEqual(Qe["source-layer"],rt["source-layer"])&&b.deepEqual(Qe.type,rt.type)){for(dt in $n(Qe.layout,rt.layout,ke,qe,null,It.setLayoutProperty),$n(Qe.paint,rt.paint,ke,qe,null,It.setPaintProperty),b.deepEqual(Qe.filter,rt.filter)||ke.push({command:It.setFilter,args:[qe,rt.filter]}),b.deepEqual(Qe.minzoom,rt.minzoom)&&b.deepEqual(Qe.maxzoom,rt.maxzoom)||ke.push({command:It.setLayerZoomRange,args:[qe,rt.minzoom,rt.maxzoom]}),Qe)Qe.hasOwnProperty(dt)&&"layout"!==dt&&"paint"!==dt&&"filter"!==dt&&"metadata"!==dt&&"minzoom"!==dt&&"maxzoom"!==dt&&(0===dt.indexOf("paint.")?$n(Qe[dt],rt[dt],ke,qe,dt.slice(6),It.setPaintProperty):b.deepEqual(Qe[dt],rt[dt])||ke.push({command:It.setLayerProperty,args:[qe,dt,rt[dt]]}));for(dt in rt)rt.hasOwnProperty(dt)&&!Qe.hasOwnProperty(dt)&&"layout"!==dt&&"paint"!==dt&&"filter"!==dt&&"metadata"!==dt&&"minzoom"!==dt&&"maxzoom"!==dt&&(0===dt.indexOf("paint.")?$n(Qe[dt],rt[dt],ke,qe,dt.slice(6),It.setPaintProperty):b.deepEqual(Qe[dt],rt[dt])||ke.push({command:It.setLayerProperty,args:[qe,dt,rt[dt]]}))}else ke.push({command:It.removeLayer,args:[qe]}),ht=Lt[Lt.lastIndexOf(qe)+1],ke.push({command:It.addLayer,args:[rt,ht]})}(Ce,F.layers,Y)}catch(Ee){console.warn("Unable to compute style diff:",Ee),Y=[{command:It.setStyle,args:[F]}]}return Y}(this.serialize(),g).filter(function(O){return!(O.command in Zu)});if(0===C.length)return!1;var R=C.filter(function(O){return!(O.command in yr)});if(R.length>0)throw new Error("Unimplemented: "+R.map(function(O){return O.command}).join(", ")+".");return C.forEach(function(O){"setTransition"!==O.command&&w[O.command].apply(w,O.args)}),this.stylesheet=g,!0},v.prototype.addImage=function(g,w){if(this.getImage(g))return this.fire(new b.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(g,w),this._afterImageUpdated(g)},v.prototype.updateImage=function(g,w){this.imageManager.updateImage(g,w)},v.prototype.getImage=function(g){return this.imageManager.getImage(g)},v.prototype.removeImage=function(g){if(!this.getImage(g))return this.fire(new b.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(g),this._afterImageUpdated(g)},v.prototype._afterImageUpdated=function(g){this._availableImages=this.imageManager.listImages(),this._changedImages[g]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new b.Event("data",{dataType:"style"}))},v.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},v.prototype.addSource=function(g,w,C){var R=this;if(void 0===C&&(C={}),this._checkLoaded(),void 0!==this.sourceCaches[g])throw new Error("There is already a source with this ID");if(!w.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(w).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(w.type)>=0&&this._validate(b.validateStyle.source,"sources."+g,w,null,C))){this.map&&this.map._collectResourceTiming&&(w.collectResourceTiming=!0);var O=this.sourceCaches[g]=new Pe(g,w,this.dispatcher);O.style=this,O.setEventedParent(this,function(){return{isSourceLoaded:R.loaded(),source:O.serialize(),sourceId:g}}),O.onAdd(this.map),this._changed=!0}},v.prototype.removeSource=function(g){if(this._checkLoaded(),void 0===this.sourceCaches[g])throw new Error("There is no source with this ID");for(var w in this._layers)if(this._layers[w].source===g)return this.fire(new b.ErrorEvent(new Error('Source "'+g+'" cannot be removed while layer "'+w+'" is using it.')));var C=this.sourceCaches[g];delete this.sourceCaches[g],delete this._updatedSources[g],C.fire(new b.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:g})),C.setEventedParent(null),C.clearTiles(),C.onRemove&&C.onRemove(this.map),this._changed=!0},v.prototype.setGeoJSONSourceData=function(g,w){this._checkLoaded(),this.sourceCaches[g].getSource().setData(w),this._changed=!0},v.prototype.getSource=function(g){return this.sourceCaches[g]&&this.sourceCaches[g].getSource()},v.prototype.addLayer=function(g,w,C){void 0===C&&(C={}),this._checkLoaded();var R=g.id;if(this.getLayer(R))this.fire(new b.ErrorEvent(new Error('Layer with id "'+R+'" already exists on this map')));else{var O;if("custom"===g.type){if(Ju(this,b.validateCustomStyleLayer(g)))return;O=b.createStyleLayer(g)}else{if("object"==typeof g.source&&(this.addSource(R,g.source),g=b.clone$1(g),g=b.extend(g,{source:R})),this._validate(b.validateStyle.layer,"layers."+R,g,{arrayIndex:-1},C))return;O=b.createStyleLayer(g),this._validateLayer(O),O.setEventedParent(this,{layer:{id:R}}),this._serializedLayers[O.id]=O.serialize()}var F=w?this._order.indexOf(w):this._order.length;if(w&&-1===F)this.fire(new b.ErrorEvent(new Error('Layer with id "'+w+'" does not exist on this map.')));else{if(this._order.splice(F,0,R),this._layerOrderChanged=!0,this._layers[R]=O,this._removedLayers[R]&&O.source&&"custom"!==O.type){var Y=this._removedLayers[R];delete this._removedLayers[R],Y.type!==O.type?this._updatedSources[O.source]="clear":(this._updatedSources[O.source]="reload",this.sourceCaches[O.source].pause())}this._updateLayer(O),O.onAdd&&O.onAdd(this.map)}}},v.prototype.moveLayer=function(g,w){if(this._checkLoaded(),this._changed=!0,this._layers[g]){if(g!==w){var C=this._order.indexOf(g);this._order.splice(C,1);var R=w?this._order.indexOf(w):this._order.length;w&&-1===R?this.fire(new b.ErrorEvent(new Error('Layer with id "'+w+'" does not exist on this map.'))):(this._order.splice(R,0,g),this._layerOrderChanged=!0)}}else this.fire(new b.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be moved.")))},v.prototype.removeLayer=function(g){this._checkLoaded();var w=this._layers[g];if(w){w.setEventedParent(null);var C=this._order.indexOf(g);this._order.splice(C,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[g]=w,delete this._layers[g],delete this._serializedLayers[g],delete this._updatedLayers[g],delete this._updatedPaintProps[g],w.onRemove&&w.onRemove(this.map)}else this.fire(new b.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be removed.")))},v.prototype.getLayer=function(g){return this._layers[g]},v.prototype.hasLayer=function(g){return g in this._layers},v.prototype.setLayerZoomRange=function(g,w,C){this._checkLoaded();var R=this.getLayer(g);R?R.minzoom===w&&R.maxzoom===C||(null!=w&&(R.minzoom=w),null!=C&&(R.maxzoom=C),this._updateLayer(R)):this.fire(new b.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot have zoom extent.")))},v.prototype.setFilter=function(g,w,C){void 0===C&&(C={}),this._checkLoaded();var R=this.getLayer(g);if(R){if(!b.deepEqual(R.filter,w))return null==w?(R.filter=void 0,void this._updateLayer(R)):void(this._validate(b.validateStyle.filter,"layers."+R.id+".filter",w,null,C)||(R.filter=b.clone$1(w),this._updateLayer(R)))}else this.fire(new b.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be filtered.")))},v.prototype.getFilter=function(g){return b.clone$1(this.getLayer(g).filter)},v.prototype.setLayoutProperty=function(g,w,C,R){void 0===R&&(R={}),this._checkLoaded();var O=this.getLayer(g);O?b.deepEqual(O.getLayoutProperty(w),C)||(O.setLayoutProperty(w,C,R),this._updateLayer(O)):this.fire(new b.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be styled.")))},v.prototype.getLayoutProperty=function(g,w){var C=this.getLayer(g);if(C)return C.getLayoutProperty(w);this.fire(new b.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style.")))},v.prototype.setPaintProperty=function(g,w,C,R){void 0===R&&(R={}),this._checkLoaded();var O=this.getLayer(g);O?b.deepEqual(O.getPaintProperty(w),C)||(O.setPaintProperty(w,C,R)&&this._updateLayer(O),this._changed=!0,this._updatedPaintProps[g]=!0):this.fire(new b.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be styled.")))},v.prototype.getPaintProperty=function(g,w){return this.getLayer(g).getPaintProperty(w)},v.prototype.setFeatureState=function(g,w){this._checkLoaded();var C=g.source,R=g.sourceLayer,O=this.sourceCaches[C];if(void 0!==O){var F=O.getSource().type;"geojson"===F&&R?this.fire(new b.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==F||R?(void 0===g.id&&this.fire(new b.ErrorEvent(new Error("The feature id parameter must be provided."))),O.setFeatureState(R,g.id,w)):this.fire(new b.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new b.ErrorEvent(new Error("The source '"+C+"' does not exist in the map's style.")))},v.prototype.removeFeatureState=function(g,w){this._checkLoaded();var C=g.source,R=this.sourceCaches[C];if(void 0!==R){var O=R.getSource().type,F="vector"===O?g.sourceLayer:void 0;"vector"!==O||F?w&&"string"!=typeof g.id&&"number"!=typeof g.id?this.fire(new b.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):R.removeFeatureState(F,g.id,w):this.fire(new b.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new b.ErrorEvent(new Error("The source '"+C+"' does not exist in the map's style.")))},v.prototype.getFeatureState=function(g){this._checkLoaded();var w=g.source,C=g.sourceLayer,R=this.sourceCaches[w];if(void 0!==R){if("vector"!==R.getSource().type||C)return void 0===g.id&&this.fire(new b.ErrorEvent(new Error("The feature id parameter must be provided."))),R.getFeatureState(C,g.id);this.fire(new b.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new b.ErrorEvent(new Error("The source '"+w+"' does not exist in the map's style.")))},v.prototype.getTransition=function(){return b.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},v.prototype.serialize=function(){return b.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:b.mapObject(this.sourceCaches,function(g){return g.serialize()}),layers:this._serializeLayers(this._order)},function(g){return void 0!==g})},v.prototype._updateLayer=function(g){this._updatedLayers[g.id]=!0,g.source&&!this._updatedSources[g.source]&&"raster"!==this.sourceCaches[g.source].getSource().type&&(this._updatedSources[g.source]="reload",this.sourceCaches[g.source].pause()),this._changed=!0},v.prototype._flattenAndSortRenderedFeatures=function(g){for(var w=this,C=function(kt){return"fill-extrusion"===w._layers[kt].type},R={},O=[],F=this._order.length-1;F>=0;F--){var Y=this._order[F];if(C(Y)){R[Y]=F;for(var ae=0,be=g;ae<be.length;ae+=1){var Ce=be[ae][Y];if(Ce)for(var Ee=0,Ne=Ce;Ee<Ne.length;Ee+=1)O.push(Ne[Ee])}}}O.sort(function(kt,Ot){return Ot.intersectionZ-kt.intersectionZ});for(var ke=[],Ve=this._order.length-1;Ve>=0;Ve--){var De=this._order[Ve];if(C(De))for(var qe=O.length-1;qe>=0;qe--){var Qe=O[qe].feature;if(R[Qe.layer.id]<Ve)break;ke.push(Qe),O.pop()}else for(var rt=0,ht=g;rt<ht.length;rt+=1){var dt=ht[rt][De];if(dt)for(var mt=0,Tt=dt;mt<Tt.length;mt+=1)ke.push(Tt[mt].feature)}}return ke},v.prototype.queryRenderedFeatures=function(g,w,C){w&&w.filter&&this._validate(b.validateStyle.filter,"queryRenderedFeatures.filter",w.filter,null,w);var R={};if(w&&w.layers){if(!Array.isArray(w.layers))return this.fire(new b.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var O=0,F=w.layers;O<F.length;O+=1){var Y=F[O],ae=this._layers[Y];if(!ae)return this.fire(new b.ErrorEvent(new Error("The layer '"+Y+"' does not exist in the map's style and cannot be queried for features."))),[];R[ae.source]=!0}}var be=[];for(var Ce in w.availableImages=this._availableImages,this.sourceCaches)w.layers&&!R[Ce]||be.push(tn(this.sourceCaches[Ce],this._layers,this._serializedLayers,g,w,C));return this.placement&&be.push(function(Ee,Ne,ke,Ve,De,qe,Qe){for(var rt={},ht=qe.queryRenderedSymbols(Ve),dt=[],mt=0,Tt=Object.keys(ht).map(Number);mt<Tt.length;mt+=1)dt.push(Qe[Tt[mt]]);dt.sort(Sn);for(var kt=function(){var hn=Lt[Ot],gr=hn.featureIndex.lookupSymbolFeatures(ht[hn.bucketInstanceId],Ne,hn.bucketIndex,hn.sourceLayerIndex,De.filter,De.layers,De.availableImages,Ee);for(var en in gr){var Rn=rt[en]=rt[en]||[],Mn=gr[en];Mn.sort(function(En,bn){var mn=hn.featureSortOrder;if(mn){var vr=mn.indexOf(En.featureIndex);return mn.indexOf(bn.featureIndex)-vr}return bn.featureIndex-En.featureIndex});for(var Pn=0,xn=Mn;Pn<xn.length;Pn+=1)Rn.push(xn[Pn])}},Ot=0,Lt=dt;Ot<Lt.length;Ot+=1)kt();var fn=function(hn){rt[hn].forEach(function(gr){var en=gr.feature,Rn=ke[Ee[hn].source].getFeatureState(en.layer["source-layer"],en.id);en.source=en.layer.source,en.layer["source-layer"]&&(en.sourceLayer=en.layer["source-layer"]),en.state=Rn})};for(var pn in rt)fn(pn);return rt}(this._layers,this._serializedLayers,this.sourceCaches,g,w,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(be)},v.prototype.querySourceFeatures=function(g,w){w&&w.filter&&this._validate(b.validateStyle.filter,"querySourceFeatures.filter",w.filter,null,w);var C=this.sourceCaches[g];return C?function(R,O){for(var F=R.getRenderableIds().map(function(Ne){return R.getTileByID(Ne)}),Y=[],ae={},be=0;be<F.length;be++){var Ce=F[be],Ee=Ce.tileID.canonical.key;ae[Ee]||(ae[Ee]=!0,Ce.querySourceFeatures(Y,O))}return Y}(C,w):[]},v.prototype.addSourceType=function(g,w,C){return v.getSourceType(g)?C(new Error('A source type called "'+g+'" already exists.')):(v.setSourceType(g,w),w.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:g,url:w.workerSourceURL},C):C(null,null))},v.prototype.getLight=function(){return this.light.getLight()},v.prototype.setLight=function(g,w){void 0===w&&(w={}),this._checkLoaded();var C=this.light.getLight(),R=!1;for(var O in g)if(!b.deepEqual(g[O],C[O])){R=!0;break}if(R){var F={now:b.browser.now(),transition:b.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(g,w),this.light.updateTransitions(F)}},v.prototype._validate=function(g,w,C,R,O){return void 0===O&&(O={}),(!O||!1!==O.validate)&&Ju(this,g.call(b.validateStyle,b.extend({key:w,style:this.serialize(),value:C,styleSpec:b.styleSpec},R)))},v.prototype._remove=function(){for(var g in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),b.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[g].setEventedParent(null);for(var w in this.sourceCaches)this.sourceCaches[w].clearTiles(),this.sourceCaches[w].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},v.prototype._clearSource=function(g){this.sourceCaches[g].clearTiles()},v.prototype._reloadSource=function(g){this.sourceCaches[g].resume(),this.sourceCaches[g].reload()},v.prototype._updateSources=function(g){for(var w in this.sourceCaches)this.sourceCaches[w].update(g)},v.prototype._generateCollisionBoxes=function(){for(var g in this.sourceCaches)this._reloadSource(g)},v.prototype._updatePlacement=function(g,w,C,R,O){void 0===O&&(O=!1);for(var F=!1,Y=!1,ae={},be=0,Ce=this._order;be<Ce.length;be+=1){var Ee=this._layers[Ce[be]];if("symbol"===Ee.type){if(!ae[Ee.source]){var Ne=this.sourceCaches[Ee.source];ae[Ee.source]=Ne.getRenderableIds(!0).map(function(Qe){return Ne.getTileByID(Qe)}).sort(function(Qe,rt){return rt.tileID.overscaledZ-Qe.tileID.overscaledZ||(Qe.tileID.isLessThan(rt.tileID)?-1:1)})}var ke=this.crossTileSymbolIndex.addLayer(Ee,ae[Ee.source],g.center.lng);F=F||ke}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((O=O||this._layerOrderChanged||0===C)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(b.browser.now(),g.zoom))&&(this.pauseablePlacement=new Ic(g,this._order,O,w,C,R,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ae),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(b.browser.now()),Y=!0),F&&this.pauseablePlacement.placement.setStale()),Y||F)for(var Ve=0,De=this._order;Ve<De.length;Ve+=1){var qe=this._layers[De[Ve]];"symbol"===qe.type&&this.placement.updateLayerOpacities(qe,ae[qe.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(b.browser.now())},v.prototype._releaseSymbolFadeTiles=function(){for(var g in this.sourceCaches)this.sourceCaches[g].releaseSymbolFadeTiles()},v.prototype.getImages=function(g,w,C){this.imageManager.getImages(w.icons,C),this._updateTilesForChangedImages();var R=this.sourceCaches[w.source];R&&R.setDependencies(w.tileID.key,w.type,w.icons)},v.prototype.getGlyphs=function(g,w,C){this.glyphManager.getGlyphs(w.stacks,C)},v.prototype.getResource=function(g,w,C){return b.makeRequest(w,C)},v}(b.Evented);os.getSourceType=function(p){return yt[p]},os.setSourceType=function(p,v){yt[p]=v},os.registerForPluginStateChange=b.registerForPluginStateChange;var Ba=b.createLayout([{name:"a_pos",type:"Int16",components:2}]),ki=An("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Ad=An("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Yf=An("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Rd=An("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Qf=An("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Dd=An("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),eh=An("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Vn=An("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ac=An("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Ep=An("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Ys=An("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Sp=An("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Od=An("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),za=An("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),ja=An("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),po=An("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Cp=An("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),mo=An("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),bu=An("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Yu=An("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Qu=An("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),el=An("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),Tr=An("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),$l=An("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),tl=An("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),nl=An("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function An(p,v){var g=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,w=v.match(/attribute ([\w]+) ([\w]+)/g),C=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),R=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),O=R?R.concat(C):C,F={};return{fragmentSource:p=p.replace(g,function(Y,ae,be,Ce,Ee){return F[Ee]=!0,"define"===ae?"\n#ifndef HAS_UNIFORM_u_"+Ee+"\nvarying "+be+" "+Ce+" "+Ee+";\n#else\nuniform "+be+" "+Ce+" u_"+Ee+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+Ee+"\n    "+be+" "+Ce+" "+Ee+" = u_"+Ee+";\n#endif\n"}),vertexSource:v=v.replace(g,function(Y,ae,be,Ce,Ee){var Ne="float"===Ce?"vec2":"vec4",ke=Ee.match(/color/)?"color":Ne;return F[Ee]?"define"===ae?"\n#ifndef HAS_UNIFORM_u_"+Ee+"\nuniform lowp float u_"+Ee+"_t;\nattribute "+be+" "+Ne+" a_"+Ee+";\nvarying "+be+" "+Ce+" "+Ee+";\n#else\nuniform "+be+" "+Ce+" u_"+Ee+";\n#endif\n":"vec4"===ke?"\n#ifndef HAS_UNIFORM_u_"+Ee+"\n    "+Ee+" = a_"+Ee+";\n#else\n    "+be+" "+Ce+" "+Ee+" = u_"+Ee+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Ee+"\n    "+Ee+" = unpack_mix_"+ke+"(a_"+Ee+", u_"+Ee+"_t);\n#else\n    "+be+" "+Ce+" "+Ee+" = u_"+Ee+";\n#endif\n":"define"===ae?"\n#ifndef HAS_UNIFORM_u_"+Ee+"\nuniform lowp float u_"+Ee+"_t;\nattribute "+be+" "+Ne+" a_"+Ee+";\n#else\nuniform "+be+" "+Ce+" u_"+Ee+";\n#endif\n":"vec4"===ke?"\n#ifndef HAS_UNIFORM_u_"+Ee+"\n    "+be+" "+Ce+" "+Ee+" = a_"+Ee+";\n#else\n    "+be+" "+Ce+" "+Ee+" = u_"+Ee+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Ee+"\n    "+be+" "+Ce+" "+Ee+" = unpack_mix_"+ke+"(a_"+Ee+", u_"+Ee+"_t);\n#else\n    "+be+" "+Ce+" "+Ee+" = u_"+Ee+";\n#endif\n"}),staticAttributes:w,staticUniforms:O}}var Qs=Object.freeze({__proto__:null,prelude:ki,background:Ad,backgroundPattern:Yf,circle:Rd,clippingMask:Qf,heatmap:Dd,heatmapTexture:eh,collisionBox:Vn,collisionCircle:Ac,debug:Ep,fill:Ys,fillOutline:Sp,fillOutlinePattern:Od,fillPattern:za,fillExtrusion:ja,fillExtrusionPattern:po,hillshadePrepare:Cp,hillshade:mo,line:bu,lineGradient:Yu,linePattern:Qu,lineSDF:el,raster:Tr,symbolIcon:$l,symbolSDF:tl,symbolTextAndIcon:nl}),Kl=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function kd(p){for(var v=[],g=0;g<p.length;g++)if(null!==p[g]){var w=p[g].split(" ");v.push(w.pop())}return v}Kl.prototype.bind=function(p,v,g,w,C,R,O,F){this.context=p;for(var Y=this.boundPaintVertexBuffers.length!==w.length,ae=0;!Y&&ae<w.length;ae++)this.boundPaintVertexBuffers[ae]!==w[ae]&&(Y=!0);p.extVertexArrayObject&&this.vao&&this.boundProgram===v&&this.boundLayoutVertexBuffer===g&&!Y&&this.boundIndexBuffer===C&&this.boundVertexOffset===R&&this.boundDynamicVertexBuffer===O&&this.boundDynamicVertexBuffer2===F?(p.bindVertexArrayOES.set(this.vao),O&&O.bind(),C&&C.dynamicDraw&&C.bind(),F&&F.bind()):this.freshBind(v,g,w,C,R,O,F)},Kl.prototype.freshBind=function(p,v,g,w,C,R,O){var F,Y=p.numAttributes,ae=this.context,be=ae.gl;if(ae.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ae.extVertexArrayObject.createVertexArrayOES(),ae.bindVertexArrayOES.set(this.vao),F=0,this.boundProgram=p,this.boundLayoutVertexBuffer=v,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=w,this.boundVertexOffset=C,this.boundDynamicVertexBuffer=R,this.boundDynamicVertexBuffer2=O;else{F=ae.currentNumAttributes||0;for(var Ce=Y;Ce<F;Ce++)be.disableVertexAttribArray(Ce)}v.enableAttributes(be,p);for(var Ee=0,Ne=g;Ee<Ne.length;Ee+=1)Ne[Ee].enableAttributes(be,p);R&&R.enableAttributes(be,p),O&&O.enableAttributes(be,p),v.bind(),v.setVertexAttribPointers(be,p,C);for(var ke=0,Ve=g;ke<Ve.length;ke+=1){var De=Ve[ke];De.bind(),De.setVertexAttribPointers(be,p,C)}R&&(R.bind(),R.setVertexAttribPointers(be,p,C)),w&&w.bind(),O&&(O.bind(),O.setVertexAttribPointers(be,p,C)),ae.currentNumAttributes=Y},Kl.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var th=function(p,v,g,w,C,R){var O=p.gl;this.program=O.createProgram();for(var F=kd(g.staticAttributes),Y=w?w.getBinderAttributes():[],ae=F.concat(Y),be=g.staticUniforms?kd(g.staticUniforms):[],Ce=w?w.getBinderUniforms():[],Ee=[],Ne=0,ke=be.concat(Ce);Ne<ke.length;Ne+=1){var Ve=ke[Ne];Ee.indexOf(Ve)<0&&Ee.push(Ve)}var De=w?w.defines():[];R&&De.push("#define OVERDRAW_INSPECTOR;");var qe=De.concat(ki.fragmentSource,g.fragmentSource).join("\n"),Qe=De.concat(ki.vertexSource,g.vertexSource).join("\n"),rt=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())this.failedToCreate=!0;else{O.shaderSource(rt,qe),O.compileShader(rt),O.attachShader(this.program,rt);var ht=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())this.failedToCreate=!0;else{O.shaderSource(ht,Qe),O.compileShader(ht),O.attachShader(this.program,ht),this.attributes={};var dt={};this.numAttributes=ae.length;for(var mt=0;mt<this.numAttributes;mt++)ae[mt]&&(O.bindAttribLocation(this.program,mt,ae[mt]),this.attributes[ae[mt]]=mt);O.linkProgram(this.program),O.deleteShader(ht),O.deleteShader(rt);for(var Tt=0;Tt<Ee.length;Tt++){var kt=Ee[Tt];if(kt&&!dt[kt]){var Ot=O.getUniformLocation(this.program,kt);Ot&&(dt[kt]=Ot)}}this.fixedUniforms=C(p,dt),this.binderUniforms=w?w.getUniforms(p,dt):[]}}};function Os(p,v,g){var w=1/Bo(g,1,v.transform.tileZoom),C=Math.pow(2,g.tileID.overscaledZ),R=g.tileSize*Math.pow(2,v.transform.tileZoom)/C,O=R*(g.tileID.canonical.x+g.tileID.wrap*C),F=R*g.tileID.canonical.y;return{u_image:0,u_texsize:g.imageAtlasTexture.size,u_scale:[w,p.fromScale,p.toScale],u_fade:p.t,u_pixel_coord_upper:[O>>16,F>>16],u_pixel_coord_lower:[65535&O,65535&F]}}th.prototype.draw=function(p,v,g,w,C,R,O,F,Y,ae,be,Ce,Ee,Ne,ke,Ve){var De,qe=p.gl;if(!this.failedToCreate){for(var Qe in p.program.set(this.program),p.setDepthMode(g),p.setStencilMode(w),p.setColorMode(C),p.setCullFace(R),this.fixedUniforms)this.fixedUniforms[Qe].set(O[Qe]);Ne&&Ne.setUniforms(p,this.binderUniforms,Ce,{zoom:Ee});for(var rt=(De={},De[qe.LINES]=2,De[qe.TRIANGLES]=3,De[qe.LINE_STRIP]=1,De)[v],ht=0,dt=be.get();ht<dt.length;ht+=1){var mt=dt[ht],Tt=mt.vaos||(mt.vaos={});(Tt[F]||(Tt[F]=new Kl)).bind(p,this,Y,Ne?Ne.getPaintVertexBuffers():[],ae,mt.vertexOffset,ke,Ve),qe.drawElements(v,mt.primitiveLength*rt,qe.UNSIGNED_SHORT,mt.primitiveOffset*rt*2)}}};var Xl=function(p,v,g,w){var C=v.style.light,R=C.properties.get("position"),O=[R.x,R.y,R.z],F=b.create$1();"viewport"===C.properties.get("anchor")&&b.fromRotation(F,-v.transform.angle),b.transformMat3(O,O,F);var Y=C.properties.get("color");return{u_matrix:p,u_lightpos:O,u_lightintensity:C.properties.get("intensity"),u_lightcolor:[Y.r,Y.g,Y.b],u_vertical_gradient:+g,u_opacity:w}},dg=function(p,v,g,w,C,R,O){return b.extend(Xl(p,v,g,w),Os(R,v,O),{u_height_factor:-Math.pow(2,C.overscaledZ)/O.tileSize/8})},as=function(p){return{u_matrix:p}},wu=function(p,v,g,w){return b.extend(as(p),Os(g,v,w))},rl=function(p,v){return{u_matrix:p,u_world:v}},nh=function(p,v,g,w,C){return b.extend(wu(p,v,g,w),{u_world:C})},rh=function(p,v,g,w){var C,R,O=p.transform;if("map"===w.paint.get("circle-pitch-alignment")){var F=Bo(g,1,O.zoom);C=!0,R=[F,F]}else C=!1,R=O.pixelsToGLUnits;return{u_camera_to_center_distance:O.cameraToCenterDistance,u_scale_with_map:+("map"===w.paint.get("circle-pitch-scale")),u_matrix:p.translatePosMatrix(v.posMatrix,g,w.paint.get("circle-translate"),w.paint.get("circle-translate-anchor")),u_pitch_with_map:+C,u_device_pixel_ratio:b.browser.devicePixelRatio,u_extrude_scale:R}},eu=function(p,v,g){var w=Bo(g,1,v.zoom),C=Math.pow(2,v.zoom-g.tileID.overscaledZ),R=g.tileID.overscaleFactor();return{u_matrix:p,u_camera_to_center_distance:v.cameraToCenterDistance,u_pixels_to_tile_units:w,u_extrude_scale:[v.pixelsToGLUnits[0]/(w*C),v.pixelsToGLUnits[1]/(w*C)],u_overscale_factor:R}},il=function(p,v,g){return{u_matrix:p,u_inv_matrix:v,u_camera_to_center_distance:g.cameraToCenterDistance,u_viewport_size:[g.width,g.height]}},Md=function(p,v,g){return void 0===g&&(g=1),{u_matrix:p,u_color:v,u_overlay:0,u_overlay_scale:g}},Mi=function(p){return{u_matrix:p}},to=function(p,v,g,w){return{u_matrix:p,u_extrude_scale:Bo(v,1,g),u_intensity:w}},no=function(p,v,g){var w=p.transform;return{u_matrix:xu(p,v,g),u_ratio:1/Bo(v,1,w.zoom),u_device_pixel_ratio:b.browser.devicePixelRatio,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},ks=function(p,v,g,w){return b.extend(no(p,v,g),{u_image:0,u_image_height:w})},Cr=function(p,v,g,w){var C=p.transform,R=Rc(v,C);return{u_matrix:xu(p,v,g),u_texsize:v.imageAtlasTexture.size,u_ratio:1/Bo(v,1,C.zoom),u_device_pixel_ratio:b.browser.devicePixelRatio,u_image:0,u_scale:[R,w.fromScale,w.toScale],u_fade:w.t,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},Yo=function(p,v,g,w,C){var R=p.lineAtlas,O=Rc(v,p.transform),F="round"===g.layout.get("line-cap"),Y=R.getDash(w.from,F),ae=R.getDash(w.to,F),be=Y.width*C.fromScale,Ce=ae.width*C.toScale;return b.extend(no(p,v,g),{u_patternscale_a:[O/be,-Y.height/2],u_patternscale_b:[O/Ce,-ae.height/2],u_sdfgamma:R.width/(256*Math.min(be,Ce)*b.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Y.y,u_tex_y_b:ae.y,u_mix:C.t})};function Rc(p,v){return 1/Bo(p,1,v.tileZoom)}function xu(p,v,g){return p.translatePosMatrix(v.tileID.posMatrix,v,g.paint.get("line-translate"),g.paint.get("line-translate-anchor"))}var Dc=function(p,v,g,w,C){return{u_matrix:p,u_tl_parent:v,u_scale_parent:g,u_buffer_scale:1,u_fade_t:w.mix,u_opacity:w.opacity*C.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:C.paint.get("raster-brightness-min"),u_brightness_high:C.paint.get("raster-brightness-max"),u_saturation_factor:(O=C.paint.get("raster-saturation"),O>0?1-1/(1.001-O):-O),u_contrast_factor:(R=C.paint.get("raster-contrast"),R>0?1/(1-R):1+R),u_spin_weights:Nd(C.paint.get("raster-hue-rotate"))};var R,O};function Nd(p){p*=Math.PI/180;var v=Math.sin(p),g=Math.cos(p);return[(2*g+1)/3,(-Math.sqrt(3)*v-g+1)/3,(Math.sqrt(3)*v-g+1)/3]}var ss,go=function(p,v,g,w,C,R,O,F,Y,ae){var be=C.transform;return{u_is_size_zoom_constant:+("constant"===p||"source"===p),u_is_size_feature_constant:+("constant"===p||"camera"===p),u_size_t:v?v.uSizeT:0,u_size:v?v.uSize:0,u_camera_to_center_distance:be.cameraToCenterDistance,u_pitch:be.pitch/360*2*Math.PI,u_rotate_symbol:+g,u_aspect_ratio:be.width/be.height,u_fade_change:C.options.fadeDuration?C.symbolFadeChange:1,u_matrix:R,u_label_plane_matrix:O,u_coord_matrix:F,u_is_text:+Y,u_pitch_with_map:+w,u_texsize:ae,u_texture:0}},Wl=function(p,v,g,w,C,R,O,F,Y,ae,be){var Ce=C.transform;return b.extend(go(p,v,g,w,C,R,O,F,Y,ae),{u_gamma_scale:w?Math.cos(Ce._pitch)*Ce.cameraToCenterDistance:1,u_device_pixel_ratio:b.browser.devicePixelRatio,u_is_halo:+be})},Qo=function(p,v,g,w,C,R,O,F,Y,ae){return b.extend(Wl(p,v,g,w,C,R,O,F,!0,Y,!0),{u_texsize_icon:ae,u_texture_icon:1})},on=function(p,v,g){return{u_matrix:p,u_opacity:v,u_color:g}},or=function(p,v,g,w,C,R){return b.extend((F=R,ae=C,be=(Y=g).imageManager.getPattern((O=w).from.toString()),Ce=Y.imageManager.getPattern(O.to.toString()),Ne=(Ee=Y.imageManager.getPixelSize()).width,ke=Ee.height,Ve=Math.pow(2,ae.tileID.overscaledZ),qe=(De=ae.tileSize*Math.pow(2,Y.transform.tileZoom)/Ve)*(ae.tileID.canonical.x+ae.tileID.wrap*Ve),Qe=De*ae.tileID.canonical.y,{u_image:0,u_pattern_tl_a:be.tl,u_pattern_br_a:be.br,u_pattern_tl_b:Ce.tl,u_pattern_br_b:Ce.br,u_texsize:[Ne,ke],u_mix:F.t,u_pattern_size_a:be.displaySize,u_pattern_size_b:Ce.displaySize,u_scale_a:F.fromScale,u_scale_b:F.toScale,u_tile_units_to_pixels:1/Bo(ae,1,Y.transform.tileZoom),u_pixel_coord_upper:[qe>>16,Qe>>16],u_pixel_coord_lower:[65535&qe,65535&Qe]}),{u_matrix:p,u_opacity:v});var O,F,Y,ae,be,Ce,Ee,Ne,ke,Ve,De,qe,Qe},Wr={fillExtrusion:function(p,v){return{u_matrix:new b.UniformMatrix4f(p,v.u_matrix),u_lightpos:new b.Uniform3f(p,v.u_lightpos),u_lightintensity:new b.Uniform1f(p,v.u_lightintensity),u_lightcolor:new b.Uniform3f(p,v.u_lightcolor),u_vertical_gradient:new b.Uniform1f(p,v.u_vertical_gradient),u_opacity:new b.Uniform1f(p,v.u_opacity)}},fillExtrusionPattern:function(p,v){return{u_matrix:new b.UniformMatrix4f(p,v.u_matrix),u_lightpos:new b.Uniform3f(p,v.u_lightpos),u_lightintensity:new b.Uniform1f(p,v.u_lightintensity),u_lightcolor:new b.Uniform3f(p,v.u_lightcolor),u_vertical_gradient:new b.Uniform1f(p,v.u_vertical_gradient),u_height_factor:new b.Uniform1f(p,v.u_height_factor),u_image:new b.Uniform1i(p,v.u_image),u_texsize:new b.Uniform2f(p,v.u_texsize),u_pixel_coord_upper:new b.Uniform2f(p,v.u_pixel_coord_upper),u_pixel_coord_lower:new b.Uniform2f(p,v.u_pixel_coord_lower),u_scale:new b.Uniform3f(p,v.u_scale),u_fade:new b.Uniform1f(p,v.u_fade),u_opacity:new b.Uniform1f(p,v.u_opacity)}},fill:function(p,v){return{u_matrix:new b.UniformMatrix4f(p,v.u_matrix)}},fillPattern:function(p,v){return{u_matrix:new b.UniformMatrix4f(p,v.u_matrix),u_image:new b.Uniform1i(p,v.u_image),u_texsize:new b.Uniform2f(p,v.u_texsize),u_pixel_coord_upper:new b.Uniform2f(p,v.u_pixel_coord_upper),u_pixel_coord_lower:new b.Uniform2f(p,v.u_pixel_coord_lower),u_scale:new b.Uniform3f(p,v.u_scale),u_fade:new b.Uniform1f(p,v.u_fade)}},fillOutline:function(p,v){return{u_matrix:new b.UniformMatrix4f(p,v.u_matrix),u_world:new b.Uniform2f(p,v.u_world)}},fillOutlinePattern:function(p,v){return{u_matrix:new b.UniformMatrix4f(p,v.u_matrix),u_world:new b.Uniform2f(p,v.u_world),u_image:new b.Uniform1i(p,v.u_image),u_texsize:new b.Uniform2f(p,v.u_texsize),u_pixel_coord_upper:new b.Uniform2f(p,v.u_pixel_coord_upper),u_pixel_coord_lower:new b.Uniform2f(p,v.u_pixel_coord_lower),u_scale:new b.Uniform3f(p,v.u_scale),u_fade:new b.Uniform1f(p,v.u_fade)}},circle:function(p,v){return{u_camera_to_center_distance:new b.Uniform1f(p,v.u_camera_to_center_distance),u_scale_with_map:new b.Uniform1i(p,v.u_scale_with_map),u_pitch_with_map:new b.Uniform1i(p,v.u_pitch_with_map),u_extrude_scale:new b.Uniform2f(p,v.u_extrude_scale),u_device_pixel_ratio:new b.Uniform1f(p,v.u_device_pixel_ratio),u_matrix:new b.UniformMatrix4f(p,v.u_matrix)}},collisionBox:function(p,v){return{u_matrix:new b.UniformMatrix4f(p,v.u_matrix),u_camera_to_center_distance:new b.Uniform1f(p,v.u_camera_to_center_distance),u_pixels_to_tile_units:new b.Uniform1f(p,v.u_pixels_to_tile_units),u_extrude_scale:new b.Uniform2f(p,v.u_extrude_scale),u_overscale_factor:new b.Uniform1f(p,v.u_overscale_factor)}},collisionCircle:function(p,v){return{u_matrix:new b.UniformMatrix4f(p,v.u_matrix),u_inv_matrix:new b.UniformMatrix4f(p,v.u_inv_matrix),u_camera_to_center_distance:new b.Uniform1f(p,v.u_camera_to_center_distance),u_viewport_size:new b.Uniform2f(p,v.u_viewport_size)}},debug:function(p,v){return{u_color:new b.UniformColor(p,v.u_color),u_matrix:new b.UniformMatrix4f(p,v.u_matrix),u_overlay:new b.Uniform1i(p,v.u_overlay),u_overlay_scale:new b.Uniform1f(p,v.u_overlay_scale)}},clippingMask:function(p,v){return{u_matrix:new b.UniformMatrix4f(p,v.u_matrix)}},heatmap:function(p,v){return{u_extrude_scale:new b.Uniform1f(p,v.u_extrude_scale),u_intensity:new b.Uniform1f(p,v.u_intensity),u_matrix:new b.UniformMatrix4f(p,v.u_matrix)}},heatmapTexture:function(p,v){return{u_matrix:new b.UniformMatrix4f(p,v.u_matrix),u_world:new b.Uniform2f(p,v.u_world),u_image:new b.Uniform1i(p,v.u_image),u_color_ramp:new b.Uniform1i(p,v.u_color_ramp),u_opacity:new b.Uniform1f(p,v.u_opacity)}},hillshade:function(p,v){return{u_matrix:new b.UniformMatrix4f(p,v.u_matrix),u_image:new b.Uniform1i(p,v.u_image),u_latrange:new b.Uniform2f(p,v.u_latrange),u_light:new b.Uniform2f(p,v.u_light),u_shadow:new b.UniformColor(p,v.u_shadow),u_highlight:new b.UniformColor(p,v.u_highlight),u_accent:new b.UniformColor(p,v.u_accent)}},hillshadePrepare:function(p,v){return{u_matrix:new b.UniformMatrix4f(p,v.u_matrix),u_image:new b.Uniform1i(p,v.u_image),u_dimension:new b.Uniform2f(p,v.u_dimension),u_zoom:new b.Uniform1f(p,v.u_zoom),u_unpack:new b.Uniform4f(p,v.u_unpack)}},line:function(p,v){return{u_matrix:new b.UniformMatrix4f(p,v.u_matrix),u_ratio:new b.Uniform1f(p,v.u_ratio),u_device_pixel_ratio:new b.Uniform1f(p,v.u_device_pixel_ratio),u_units_to_pixels:new b.Uniform2f(p,v.u_units_to_pixels)}},lineGradient:function(p,v){return{u_matrix:new b.UniformMatrix4f(p,v.u_matrix),u_ratio:new b.Uniform1f(p,v.u_ratio),u_device_pixel_ratio:new b.Uniform1f(p,v.u_device_pixel_ratio),u_units_to_pixels:new b.Uniform2f(p,v.u_units_to_pixels),u_image:new b.Uniform1i(p,v.u_image),u_image_height:new b.Uniform1f(p,v.u_image_height)}},linePattern:function(p,v){return{u_matrix:new b.UniformMatrix4f(p,v.u_matrix),u_texsize:new b.Uniform2f(p,v.u_texsize),u_ratio:new b.Uniform1f(p,v.u_ratio),u_device_pixel_ratio:new b.Uniform1f(p,v.u_device_pixel_ratio),u_image:new b.Uniform1i(p,v.u_image),u_units_to_pixels:new b.Uniform2f(p,v.u_units_to_pixels),u_scale:new b.Uniform3f(p,v.u_scale),u_fade:new b.Uniform1f(p,v.u_fade)}},lineSDF:function(p,v){return{u_matrix:new b.UniformMatrix4f(p,v.u_matrix),u_ratio:new b.Uniform1f(p,v.u_ratio),u_device_pixel_ratio:new b.Uniform1f(p,v.u_device_pixel_ratio),u_units_to_pixels:new b.Uniform2f(p,v.u_units_to_pixels),u_patternscale_a:new b.Uniform2f(p,v.u_patternscale_a),u_patternscale_b:new b.Uniform2f(p,v.u_patternscale_b),u_sdfgamma:new b.Uniform1f(p,v.u_sdfgamma),u_image:new b.Uniform1i(p,v.u_image),u_tex_y_a:new b.Uniform1f(p,v.u_tex_y_a),u_tex_y_b:new b.Uniform1f(p,v.u_tex_y_b),u_mix:new b.Uniform1f(p,v.u_mix)}},raster:function(p,v){return{u_matrix:new b.UniformMatrix4f(p,v.u_matrix),u_tl_parent:new b.Uniform2f(p,v.u_tl_parent),u_scale_parent:new b.Uniform1f(p,v.u_scale_parent),u_buffer_scale:new b.Uniform1f(p,v.u_buffer_scale),u_fade_t:new b.Uniform1f(p,v.u_fade_t),u_opacity:new b.Uniform1f(p,v.u_opacity),u_image0:new b.Uniform1i(p,v.u_image0),u_image1:new b.Uniform1i(p,v.u_image1),u_brightness_low:new b.Uniform1f(p,v.u_brightness_low),u_brightness_high:new b.Uniform1f(p,v.u_brightness_high),u_saturation_factor:new b.Uniform1f(p,v.u_saturation_factor),u_contrast_factor:new b.Uniform1f(p,v.u_contrast_factor),u_spin_weights:new b.Uniform3f(p,v.u_spin_weights)}},symbolIcon:function(p,v){return{u_is_size_zoom_constant:new b.Uniform1i(p,v.u_is_size_zoom_constant),u_is_size_feature_constant:new b.Uniform1i(p,v.u_is_size_feature_constant),u_size_t:new b.Uniform1f(p,v.u_size_t),u_size:new b.Uniform1f(p,v.u_size),u_camera_to_center_distance:new b.Uniform1f(p,v.u_camera_to_center_distance),u_pitch:new b.Uniform1f(p,v.u_pitch),u_rotate_symbol:new b.Uniform1i(p,v.u_rotate_symbol),u_aspect_ratio:new b.Uniform1f(p,v.u_aspect_ratio),u_fade_change:new b.Uniform1f(p,v.u_fade_change),u_matrix:new b.UniformMatrix4f(p,v.u_matrix),u_label_plane_matrix:new b.UniformMatrix4f(p,v.u_label_plane_matrix),u_coord_matrix:new b.UniformMatrix4f(p,v.u_coord_matrix),u_is_text:new b.Uniform1i(p,v.u_is_text),u_pitch_with_map:new b.Uniform1i(p,v.u_pitch_with_map),u_texsize:new b.Uniform2f(p,v.u_texsize),u_texture:new b.Uniform1i(p,v.u_texture)}},symbolSDF:function(p,v){return{u_is_size_zoom_constant:new b.Uniform1i(p,v.u_is_size_zoom_constant),u_is_size_feature_constant:new b.Uniform1i(p,v.u_is_size_feature_constant),u_size_t:new b.Uniform1f(p,v.u_size_t),u_size:new b.Uniform1f(p,v.u_size),u_camera_to_center_distance:new b.Uniform1f(p,v.u_camera_to_center_distance),u_pitch:new b.Uniform1f(p,v.u_pitch),u_rotate_symbol:new b.Uniform1i(p,v.u_rotate_symbol),u_aspect_ratio:new b.Uniform1f(p,v.u_aspect_ratio),u_fade_change:new b.Uniform1f(p,v.u_fade_change),u_matrix:new b.UniformMatrix4f(p,v.u_matrix),u_label_plane_matrix:new b.UniformMatrix4f(p,v.u_label_plane_matrix),u_coord_matrix:new b.UniformMatrix4f(p,v.u_coord_matrix),u_is_text:new b.Uniform1i(p,v.u_is_text),u_pitch_with_map:new b.Uniform1i(p,v.u_pitch_with_map),u_texsize:new b.Uniform2f(p,v.u_texsize),u_texture:new b.Uniform1i(p,v.u_texture),u_gamma_scale:new b.Uniform1f(p,v.u_gamma_scale),u_device_pixel_ratio:new b.Uniform1f(p,v.u_device_pixel_ratio),u_is_halo:new b.Uniform1i(p,v.u_is_halo)}},symbolTextAndIcon:function(p,v){return{u_is_size_zoom_constant:new b.Uniform1i(p,v.u_is_size_zoom_constant),u_is_size_feature_constant:new b.Uniform1i(p,v.u_is_size_feature_constant),u_size_t:new b.Uniform1f(p,v.u_size_t),u_size:new b.Uniform1f(p,v.u_size),u_camera_to_center_distance:new b.Uniform1f(p,v.u_camera_to_center_distance),u_pitch:new b.Uniform1f(p,v.u_pitch),u_rotate_symbol:new b.Uniform1i(p,v.u_rotate_symbol),u_aspect_ratio:new b.Uniform1f(p,v.u_aspect_ratio),u_fade_change:new b.Uniform1f(p,v.u_fade_change),u_matrix:new b.UniformMatrix4f(p,v.u_matrix),u_label_plane_matrix:new b.UniformMatrix4f(p,v.u_label_plane_matrix),u_coord_matrix:new b.UniformMatrix4f(p,v.u_coord_matrix),u_is_text:new b.Uniform1i(p,v.u_is_text),u_pitch_with_map:new b.Uniform1i(p,v.u_pitch_with_map),u_texsize:new b.Uniform2f(p,v.u_texsize),u_texsize_icon:new b.Uniform2f(p,v.u_texsize_icon),u_texture:new b.Uniform1i(p,v.u_texture),u_texture_icon:new b.Uniform1i(p,v.u_texture_icon),u_gamma_scale:new b.Uniform1f(p,v.u_gamma_scale),u_device_pixel_ratio:new b.Uniform1f(p,v.u_device_pixel_ratio),u_is_halo:new b.Uniform1i(p,v.u_is_halo)}},background:function(p,v){return{u_matrix:new b.UniformMatrix4f(p,v.u_matrix),u_opacity:new b.Uniform1f(p,v.u_opacity),u_color:new b.UniformColor(p,v.u_color)}},backgroundPattern:function(p,v){return{u_matrix:new b.UniformMatrix4f(p,v.u_matrix),u_opacity:new b.Uniform1f(p,v.u_opacity),u_image:new b.Uniform1i(p,v.u_image),u_pattern_tl_a:new b.Uniform2f(p,v.u_pattern_tl_a),u_pattern_br_a:new b.Uniform2f(p,v.u_pattern_br_a),u_pattern_tl_b:new b.Uniform2f(p,v.u_pattern_tl_b),u_pattern_br_b:new b.Uniform2f(p,v.u_pattern_br_b),u_texsize:new b.Uniform2f(p,v.u_texsize),u_mix:new b.Uniform1f(p,v.u_mix),u_pattern_size_a:new b.Uniform2f(p,v.u_pattern_size_a),u_pattern_size_b:new b.Uniform2f(p,v.u_pattern_size_b),u_scale_a:new b.Uniform1f(p,v.u_scale_a),u_scale_b:new b.Uniform1f(p,v.u_scale_b),u_pixel_coord_upper:new b.Uniform2f(p,v.u_pixel_coord_upper),u_pixel_coord_lower:new b.Uniform2f(p,v.u_pixel_coord_lower),u_tile_units_to_pixels:new b.Uniform1f(p,v.u_tile_units_to_pixels)}}};function ea(p,v,g,w,C,R,O){for(var F=p.context,Y=F.gl,ae=p.useProgram("collisionBox"),be=[],Ce=0,Ee=0,Ne=0;Ne<w.length;Ne++){var ke=w[Ne],Ve=v.getTile(ke),De=Ve.getBucket(g);if(De){var qe=ke.posMatrix;0===C[0]&&0===C[1]||(qe=p.translatePosMatrix(ke.posMatrix,Ve,C,R));var Qe=O?De.textCollisionBox:De.iconCollisionBox,rt=De.collisionCircleArray;if(rt.length>0){var ht=b.create(),dt=qe;b.mul(ht,De.placementInvProjMatrix,p.transform.glCoordMatrix),b.mul(ht,ht,De.placementViewportMatrix),be.push({circleArray:rt,circleOffset:Ee,transform:dt,invTransform:ht}),Ee=Ce+=rt.length/4}Qe&&ae.draw(F,Y.LINES,Se.disabled,Le.disabled,p.colorModeForRenderPass(),et.disabled,eu(qe,p.transform,Ve),g.id,Qe.layoutVertexBuffer,Qe.indexBuffer,Qe.segments,null,p.transform.zoom,null,null,Qe.collisionVertexBuffer)}}if(O&&be.length){var mt=p.useProgram("collisionCircle"),Tt=new b.StructArrayLayout2f1f2i16;Tt.resize(4*Ce),Tt._trim();for(var kt=0,Ot=0,Lt=be;Ot<Lt.length;Ot+=1)for(var fn=Lt[Ot],pn=0;pn<fn.circleArray.length/4;pn++){var hn=4*pn,gr=fn.circleArray[hn+0],en=fn.circleArray[hn+1],Rn=fn.circleArray[hn+2],Mn=fn.circleArray[hn+3];Tt.emplace(kt++,gr,en,Rn,Mn,0),Tt.emplace(kt++,gr,en,Rn,Mn,1),Tt.emplace(kt++,gr,en,Rn,Mn,2),Tt.emplace(kt++,gr,en,Rn,Mn,3)}(!ss||ss.length<2*Ce)&&(ss=function(ai){var Vo=2*ai,Ji=new b.StructArrayLayout3ui6;Ji.resize(Vo),Ji._trim();for(var wi=0;wi<Vo;wi++){var mi=6*wi;Ji.uint16[mi+0]=4*wi+0,Ji.uint16[mi+1]=4*wi+1,Ji.uint16[mi+2]=4*wi+2,Ji.uint16[mi+3]=4*wi+2,Ji.uint16[mi+4]=4*wi+3,Ji.uint16[mi+5]=4*wi+0}return Ji}(Ce));for(var Pn=F.createIndexBuffer(ss,!0),xn=F.createVertexBuffer(Tt,b.collisionCircleLayout.members,!0),En=0,bn=be;En<bn.length;En+=1){var mn=bn[En],vr=il(mn.transform,mn.invTransform,p.transform);mt.draw(F,Y.TRIANGLES,Se.disabled,Le.disabled,p.colorModeForRenderPass(),et.disabled,vr,g.id,xn,Pn,b.SegmentVector.simpleSegment(0,2*mn.circleOffset,mn.circleArray.length,mn.circleArray.length/2),null,p.transform.zoom,null,null,null)}xn.destroy(),Pn.destroy()}}var us=b.identity(new Float32Array(16));function ni(p,v,g,w,C,R){var O=b.getAnchorAlignment(p),F=-(O.horizontalAlign-.5)*v,Y=-(O.verticalAlign-.5)*g,ae=b.evaluateVariableOffset(p,w);return new b.Point((F/C+ae[0])*R,(Y/C+ae[1])*R)}function Eu(p,v,g,w,C,R,O,F,Y,ae,be){var Ce=p.text.placedSymbolArray,Ee=p.text.dynamicLayoutVertexArray,Ne=p.icon.dynamicLayoutVertexArray,ke={};Ee.clear();for(var Ve=0;Ve<Ce.length;Ve++){var De=Ce.get(Ve),qe=De.hidden||!De.crossTileID||p.allowVerticalPlacement&&!De.placedOrientation?null:w[De.crossTileID];if(qe){var Qe=new b.Point(De.anchorX,De.anchorY),rt=Kn(Qe,g?F:O),ht=Di(R.cameraToCenterDistance,rt.signedDistanceFromCamera),dt=C.evaluateSizeForFeature(p.textSizeData,ae,De)*ht/b.ONE_EM;g&&(dt*=p.tilePixelRatio/Y);for(var mt=ni(qe.anchor,qe.width,qe.height,qe.textOffset,qe.textBoxScale,dt),Tt=g?Kn(Qe.add(mt),O).point:rt.point.add(v?mt.rotate(-R.angle):mt),kt=p.allowVerticalPlacement&&De.placedOrientation===b.WritingMode.vertical?Math.PI/2:0,Ot=0;Ot<De.numGlyphs;Ot++)b.addDynamicAttributes(Ee,Tt,kt);be&&De.associatedIconIndex>=0&&(ke[De.associatedIconIndex]={shiftedAnchor:Tt,angle:kt})}else Ds(De.numGlyphs,Ee)}if(be){Ne.clear();for(var Lt=p.icon.placedSymbolArray,fn=0;fn<Lt.length;fn++){var pn=Lt.get(fn);if(pn.hidden)Ds(pn.numGlyphs,Ne);else{var hn=ke[fn];if(hn)for(var gr=0;gr<pn.numGlyphs;gr++)b.addDynamicAttributes(Ne,hn.shiftedAnchor,hn.angle);else Ds(pn.numGlyphs,Ne)}}p.icon.dynamicLayoutVertexBuffer.updateData(Ne)}p.text.dynamicLayoutVertexBuffer.updateData(Ee)}function Ni(p,v,g){return g.iconsInText&&v?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function ol(p,v,g,w,C,R,O,F,Y,ae,be,Ce){for(var Ee=p.context,Ne=Ee.gl,ke=p.transform,Ve="map"===F,De="map"===Y,qe=Ve&&"point"!==g.layout.get("symbol-placement"),Qe=Ve&&!De&&!qe,rt=!g.layout.get("symbol-sort-key").isConstant(),ht=!1,dt=p.depthModeForSublayer(0,Se.ReadOnly),mt=g.layout.get("text-variable-anchor"),Tt=[],kt=0,Ot=w;kt<Ot.length;kt+=1){var Lt=Ot[kt],fn=v.getTile(Lt),pn=fn.getBucket(g);if(pn){var hn=C?pn.text:pn.icon;if(hn&&hn.segments.get().length){var gr=hn.programConfigurations.get(g.id),en=C||pn.sdfIcons,Rn=C?pn.textSizeData:pn.iconSizeData,Mn=De||0!==ke.pitch,Pn=p.useProgram(Ni(en,C,pn),gr),xn=b.evaluateSizeForZoom(Rn,ke.zoom),En=void 0,bn=[0,0],mn=void 0,vr=void 0,ai=null,Vo=void 0;if(C)mn=fn.glyphAtlasTexture,vr=Ne.LINEAR,En=fn.glyphAtlasTexture.size,pn.iconsInText&&(bn=fn.imageAtlasTexture.size,ai=fn.imageAtlasTexture,Vo=Mn||p.options.rotating||p.options.zooming||"composite"===Rn.kind||"camera"===Rn.kind?Ne.LINEAR:Ne.NEAREST);else{var Ji=1!==g.layout.get("icon-size").constantOr(0)||pn.iconsNeedLinear;mn=fn.imageAtlasTexture,vr=en||p.options.rotating||p.options.zooming||Ji||Mn?Ne.LINEAR:Ne.NEAREST,En=fn.imageAtlasTexture.size}var wi=Bo(fn,1,p.transform.zoom),mi=li(Lt.posMatrix,De,Ve,p.transform,wi),bo=Gr(Lt.posMatrix,De,Ve,p.transform,wi),Ns=mt&&pn.hasTextData(),ia="none"!==g.layout.get("icon-text-fit")&&Ns&&pn.hasIconData();qe&&Rs(pn,Lt.posMatrix,p,C,mi,bo,De,ae);var oa=p.translatePosMatrix(Lt.posMatrix,fn,R,O),Pa=qe||C&&mt||ia?us:mi,_a=p.translatePosMatrix(bo,fn,R,O,!0),Fc=en&&0!==g.paint.get(C?"text-halo-width":"icon-halo-width").constantOr(1),fs={program:Pn,buffers:hn,uniformValues:en?pn.iconsInText?Qo(Rn.kind,xn,Qe,De,p,oa,Pa,_a,En,bn):Wl(Rn.kind,xn,Qe,De,p,oa,Pa,_a,C,En,!0):go(Rn.kind,xn,Qe,De,p,oa,Pa,_a,C,En),atlasTexture:mn,atlasTextureIcon:ai,atlasInterpolation:vr,atlasInterpolationIcon:Vo,isSDF:en,hasHalo:Fc};if(rt&&pn.canOverlap){ht=!0;for(var gl=0,Ru=hn.segments.get();gl<Ru.length;gl+=1){var Ls=Ru[gl];Tt.push({segments:new b.SegmentVector([Ls]),sortKey:Ls.sortKey,state:fs})}}else Tt.push({segments:hn.segments,sortKey:0,state:fs})}}}ht&&Tt.sort(function(Xa,ku){return Xa.sortKey-ku.sortKey});for(var ec=0,aa=Tt;ec<aa.length;ec+=1){var Du=aa[ec],xi=Du.state;if(Ee.activeTexture.set(Ne.TEXTURE0),xi.atlasTexture.bind(xi.atlasInterpolation,Ne.CLAMP_TO_EDGE),xi.atlasTextureIcon&&(Ee.activeTexture.set(Ne.TEXTURE1),xi.atlasTextureIcon&&xi.atlasTextureIcon.bind(xi.atlasInterpolationIcon,Ne.CLAMP_TO_EDGE)),xi.isSDF){var Ou=xi.uniformValues;xi.hasHalo&&(Ou.u_is_halo=1,Fa(xi.buffers,Du.segments,g,p,xi.program,dt,be,Ce,Ou)),Ou.u_is_halo=0}Fa(xi.buffers,Du.segments,g,p,xi.program,dt,be,Ce,xi.uniformValues)}}function Fa(p,v,g,w,C,R,O,F,Y){var ae=w.context;C.draw(ae,ae.gl.TRIANGLES,R,O,F,et.disabled,Y,g.id,p.layoutVertexBuffer,p.indexBuffer,v,g.paint,w.transform.zoom,p.programConfigurations.get(g.id),p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer)}function Xn(p,v,g,w,C,R,O){var F,Y,ae,be,Ce,Ee=p.context.gl,Ne=g.paint.get("fill-pattern"),ke=Ne&&Ne.constantOr(1),Ve=g.getCrossfadeParameters();O?(Y=ke&&!g.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",F=Ee.LINES):(Y=ke?"fillPattern":"fill",F=Ee.TRIANGLES);for(var De=0,qe=w;De<qe.length;De+=1){var Qe=qe[De],rt=v.getTile(Qe);if(!ke||rt.patternsLoaded()){var ht=rt.getBucket(g);if(ht){var dt=ht.programConfigurations.get(g.id),mt=p.useProgram(Y,dt);ke&&(p.context.activeTexture.set(Ee.TEXTURE0),rt.imageAtlasTexture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),dt.updatePaintBuffers(Ve));var Tt=Ne.constantOr(null);if(Tt&&rt.imageAtlas){var kt=rt.imageAtlas,Ot=kt.patternPositions[Tt.to.toString()],Lt=kt.patternPositions[Tt.from.toString()];Ot&&Lt&&dt.setConstantPatternPositions(Ot,Lt)}var fn=p.translatePosMatrix(Qe.posMatrix,rt,g.paint.get("fill-translate"),g.paint.get("fill-translate-anchor"));if(O){be=ht.indexBuffer2,Ce=ht.segments2;var pn=[Ee.drawingBufferWidth,Ee.drawingBufferHeight];ae="fillOutlinePattern"===Y&&ke?nh(fn,p,Ve,rt,pn):rl(fn,pn)}else be=ht.indexBuffer,Ce=ht.segments,ae=ke?wu(fn,p,Ve,rt):as(fn);mt.draw(p.context,F,C,p.stencilModeForClipping(Qe),R,et.disabled,ae,g.id,ht.layoutVertexBuffer,be,Ce,g.paint,p.transform.zoom,dt)}}}}function Su(p,v,g,w,C,R,O){for(var F=p.context,Y=F.gl,ae=g.paint.get("fill-extrusion-pattern"),be=ae.constantOr(1),Ce=g.getCrossfadeParameters(),Ee=g.paint.get("fill-extrusion-opacity"),Ne=0,ke=w;Ne<ke.length;Ne+=1){var Ve=ke[Ne],De=v.getTile(Ve),qe=De.getBucket(g);if(qe){var Qe=qe.programConfigurations.get(g.id),rt=p.useProgram(be?"fillExtrusionPattern":"fillExtrusion",Qe);be&&(p.context.activeTexture.set(Y.TEXTURE0),De.imageAtlasTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),Qe.updatePaintBuffers(Ce));var ht=ae.constantOr(null);if(ht&&De.imageAtlas){var dt=De.imageAtlas,mt=dt.patternPositions[ht.to.toString()],Tt=dt.patternPositions[ht.from.toString()];mt&&Tt&&Qe.setConstantPatternPositions(mt,Tt)}var kt=p.translatePosMatrix(Ve.posMatrix,De,g.paint.get("fill-extrusion-translate"),g.paint.get("fill-extrusion-translate-anchor")),Ot=g.paint.get("fill-extrusion-vertical-gradient"),Lt=be?dg(kt,p,Ot,Ee,Ve,Ce,De):Xl(kt,p,Ot,Ee);rt.draw(F,F.gl.TRIANGLES,C,R,O,et.backCCW,Lt,g.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,g.paint,p.transform.zoom,Qe)}}}function Jl(p,v,g,w,C,R){var O=p.context,F=O.gl,Y=v.fbo;if(Y){var ae=p.useProgram("hillshade");O.activeTexture.set(F.TEXTURE0),F.bindTexture(F.TEXTURE_2D,Y.colorAttachment.get());var be=function(Ce,Ee,Ne){var ke=Ne.paint.get("hillshade-shadow-color"),Ve=Ne.paint.get("hillshade-highlight-color"),De=Ne.paint.get("hillshade-accent-color"),qe=Ne.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Ne.paint.get("hillshade-illumination-anchor")&&(qe-=Ce.transform.angle);var Qe,rt,ht,dt=!Ce.options.moving;return{u_matrix:Ce.transform.calculatePosMatrix(Ee.tileID.toUnwrapped(),dt),u_image:0,u_latrange:(Qe=Ee.tileID,rt=Math.pow(2,Qe.canonical.z),ht=Qe.canonical.y,[new b.MercatorCoordinate(0,ht/rt).toLngLat().lat,new b.MercatorCoordinate(0,(ht+1)/rt).toLngLat().lat]),u_light:[Ne.paint.get("hillshade-exaggeration"),qe],u_shadow:ke,u_highlight:Ve,u_accent:De}}(p,v,g);ae.draw(O,F.TRIANGLES,w,C,R,et.disabled,be,g.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}}function Zl(p,v,g,w,C,R){var Ve,De,qe,Qe,O=p.context,F=O.gl,Y=v.dem;if(Y&&Y.data){var ae=Y.dim,be=Y.stride,Ce=Y.getPixels();if(O.activeTexture.set(F.TEXTURE1),O.pixelStoreUnpackPremultiplyAlpha.set(!1),v.demTexture=v.demTexture||p.getTileTexture(be),v.demTexture){var Ee=v.demTexture;Ee.update(Ce,{premultiply:!1}),Ee.bind(F.NEAREST,F.CLAMP_TO_EDGE)}else v.demTexture=new b.Texture(O,Ce,F.RGBA,{premultiply:!1}),v.demTexture.bind(F.NEAREST,F.CLAMP_TO_EDGE);O.activeTexture.set(F.TEXTURE0);var Ne=v.fbo;if(!Ne){var ke=new b.Texture(O,{width:ae,height:ae,data:null},F.RGBA);ke.bind(F.LINEAR,F.CLAMP_TO_EDGE),(Ne=v.fbo=O.createFramebuffer(ae,ae,!0)).colorAttachment.set(ke.texture)}O.bindFramebuffer.set(Ne.framebuffer),O.viewport.set([0,0,ae,ae]),p.useProgram("hillshadePrepare").draw(O,F.TRIANGLES,w,C,R,et.disabled,(Ve=v.tileID,qe=(De=Y).stride,Qe=b.create(),b.ortho(Qe,0,b.EXTENT,-b.EXTENT,0,0,1),b.translate(Qe,Qe,[0,-b.EXTENT,0]),{u_matrix:Qe,u_image:1,u_dimension:[qe,qe],u_zoom:Ve.overscaledZ,u_unpack:De.getUnpackVector()}),g.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments),v.needsHillshadePrepare=!1}}function Yl(p,v,g,w,C){var R=w.paint.get("raster-fade-duration");if(R>0){var O=b.browser.now(),F=(O-p.timeAdded)/R,Y=v?(O-v.timeAdded)/R:-1,ae=g.getSource(),be=C.coveringZoomLevel({tileSize:ae.tileSize,roundZoom:ae.roundZoom}),Ce=!v||Math.abs(v.tileID.overscaledZ-be)>Math.abs(p.tileID.overscaledZ-be),Ee=Ce&&p.refreshedUponExpiration?1:b.clamp(Ce?F:1-Y,0,1);return p.refreshedUponExpiration&&F>=1&&(p.refreshedUponExpiration=!1),v?{opacity:1,mix:1-Ee}:{opacity:Ee,mix:0}}return{opacity:1,mix:0}}var vo=new b.Color(1,0,0,1),al=new b.Color(0,1,0,1),sl=new b.Color(0,0,1,1),Ua=new b.Color(1,0,1,1),Jr=new b.Color(0,1,1,1);function Ld(p,v,g,w){ga(p,0,v+g/2,p.transform.width,g,w)}function ih(p,v,g,w){ga(p,v-g/2,0,g,p.transform.height,w)}function ga(p,v,g,w,C,R){var O=p.context,F=O.gl;F.enable(F.SCISSOR_TEST),F.scissor(v*b.browser.devicePixelRatio,g*b.browser.devicePixelRatio,w*b.browser.devicePixelRatio,C*b.browser.devicePixelRatio),O.clear({color:R}),F.disable(F.SCISSOR_TEST)}function qa(p,v,g){var w=p.context,C=w.gl,R=g.posMatrix,O=p.useProgram("debug"),F=Se.disabled,Y=Le.disabled,ae=p.colorModeForRenderPass();w.activeTexture.set(C.TEXTURE0),p.emptyTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),O.draw(w,C.LINE_STRIP,F,Y,ae,et.disabled,Md(R,b.Color.red),"$debug",p.debugBuffer,p.tileBorderIndexBuffer,p.debugSegments);var be=v.getTileByID(g.key).latestRawTileData,Ce=Math.floor((be&&be.byteLength||0)/1024),Ee=v.getTile(g).tileSize,Ne=512/Math.min(Ee,512)*(g.overscaledZ/p.transform.zoom)*.5,ke=g.canonical.toString();g.overscaledZ!==g.canonical.z&&(ke+=" => "+g.overscaledZ),function(Ve,De){Ve.initDebugOverlayCanvas();var qe=Ve.debugOverlayCanvas,Qe=Ve.context.gl,rt=Ve.debugOverlayCanvas.getContext("2d");rt.clearRect(0,0,qe.width,qe.height),rt.shadowColor="white",rt.shadowBlur=2,rt.lineWidth=1.5,rt.strokeStyle="white",rt.textBaseline="top",rt.font="bold 36px Open Sans, sans-serif",rt.fillText(De,5,5),rt.strokeText(De,5,5),Ve.debugOverlayTexture.update(qe),Ve.debugOverlayTexture.bind(Qe.LINEAR,Qe.CLAMP_TO_EDGE)}(p,ke+" "+Ce+"kb"),O.draw(w,C.TRIANGLES,F,Y,Je.alphaBlended,et.disabled,Md(R,b.Color.transparent,Ne),"$debug",p.debugBuffer,p.quadTriangleIndexBuffer,p.debugSegments)}var Oc={symbol:function(p,v,g,w,C){if("translucent"===p.renderPass){var R=Le.disabled,O=p.colorModeForRenderPass();g.layout.get("text-variable-anchor")&&function(F,Y,ae,be,Ce,Ee,Ne){for(var ke=Y.transform,Ve="map"===Ce,De="map"===Ee,qe=0,Qe=F;qe<Qe.length;qe+=1){var rt=Qe[qe],ht=be.getTile(rt),dt=ht.getBucket(ae);if(dt&&dt.text&&dt.text.segments.get().length){var mt=b.evaluateSizeForZoom(dt.textSizeData,ke.zoom),Tt=Bo(ht,1,Y.transform.zoom),kt=li(rt.posMatrix,De,Ve,Y.transform,Tt),Ot="none"!==ae.layout.get("icon-text-fit")&&dt.hasIconData();if(mt){var Lt=Math.pow(2,ke.zoom-ht.tileID.overscaledZ);Eu(dt,Ve,De,Ne,b.symbolSize,ke,kt,rt.posMatrix,Lt,mt,Ot)}}}}(w,p,g,v,g.layout.get("text-rotation-alignment"),g.layout.get("text-pitch-alignment"),C),0!==g.paint.get("icon-opacity").constantOr(1)&&ol(p,v,g,w,!1,g.paint.get("icon-translate"),g.paint.get("icon-translate-anchor"),g.layout.get("icon-rotation-alignment"),g.layout.get("icon-pitch-alignment"),g.layout.get("icon-keep-upright"),R,O),0!==g.paint.get("text-opacity").constantOr(1)&&ol(p,v,g,w,!0,g.paint.get("text-translate"),g.paint.get("text-translate-anchor"),g.layout.get("text-rotation-alignment"),g.layout.get("text-pitch-alignment"),g.layout.get("text-keep-upright"),R,O),v.map.showCollisionBoxes&&(ea(p,v,g,w,g.paint.get("text-translate"),g.paint.get("text-translate-anchor"),!0),ea(p,v,g,w,g.paint.get("icon-translate"),g.paint.get("icon-translate-anchor"),!1))}},circle:function(p,v,g,w){if("translucent"===p.renderPass){var C=g.paint.get("circle-opacity"),R=g.paint.get("circle-stroke-width"),O=g.paint.get("circle-stroke-opacity"),F=!g.layout.get("circle-sort-key").isConstant();if(0!==C.constantOr(1)||0!==R.constantOr(1)&&0!==O.constantOr(1)){for(var Y=p.context,ae=Y.gl,be=p.depthModeForSublayer(0,Se.ReadOnly),Ce=Le.disabled,Ee=p.colorModeForRenderPass(),Ne=[],ke=0;ke<w.length;ke++){var Ve=w[ke],De=v.getTile(Ve),qe=De.getBucket(g);if(qe){var Qe=qe.programConfigurations.get(g.id),rt={programConfiguration:Qe,program:p.useProgram("circle",Qe),layoutVertexBuffer:qe.layoutVertexBuffer,indexBuffer:qe.indexBuffer,uniformValues:rh(p,Ve,De,g)};if(F)for(var ht=0,dt=qe.segments.get();ht<dt.length;ht+=1){var mt=dt[ht];Ne.push({segments:new b.SegmentVector([mt]),sortKey:mt.sortKey,state:rt})}else Ne.push({segments:qe.segments,sortKey:0,state:rt})}}F&&Ne.sort(function(fn,pn){return fn.sortKey-pn.sortKey});for(var Tt=0,kt=Ne;Tt<kt.length;Tt+=1){var Ot=kt[Tt],Lt=Ot.state;Lt.program.draw(Y,ae.TRIANGLES,be,Ce,Ee,et.disabled,Lt.uniformValues,g.id,Lt.layoutVertexBuffer,Lt.indexBuffer,Ot.segments,g.paint,p.transform.zoom,Lt.programConfiguration)}}}},heatmap:function(p,v,g,w){if(0!==g.paint.get("heatmap-opacity"))if("offscreen"===p.renderPass){var C=p.context,R=C.gl,O=Le.disabled,F=new Je([R.ONE,R.ONE],b.Color.transparent,[!0,!0,!0,!0]);(function(Ne,ke,Ve){var De=Ne.gl;Ne.activeTexture.set(De.TEXTURE1),Ne.viewport.set([0,0,ke.width/4,ke.height/4]);var rt,ht,dt,mt,Tt,qe=Ve.heatmapFbo;if(qe)De.bindTexture(De.TEXTURE_2D,qe.colorAttachment.get()),Ne.bindFramebuffer.set(qe.framebuffer);else{var Qe=De.createTexture();De.bindTexture(De.TEXTURE_2D,Qe),De.texParameteri(De.TEXTURE_2D,De.TEXTURE_WRAP_S,De.CLAMP_TO_EDGE),De.texParameteri(De.TEXTURE_2D,De.TEXTURE_WRAP_T,De.CLAMP_TO_EDGE),De.texParameteri(De.TEXTURE_2D,De.TEXTURE_MIN_FILTER,De.LINEAR),De.texParameteri(De.TEXTURE_2D,De.TEXTURE_MAG_FILTER,De.LINEAR),dt=Qe,mt=qe=Ve.heatmapFbo=Ne.createFramebuffer(ke.width/4,ke.height/4,!1),(Tt=(rt=Ne).gl).texImage2D(Tt.TEXTURE_2D,0,Tt.RGBA,(ht=ke).width/4,ht.height/4,0,Tt.RGBA,rt.extRenderToTextureHalfFloat?rt.extTextureHalfFloat.HALF_FLOAT_OES:Tt.UNSIGNED_BYTE,null),mt.colorAttachment.set(dt)}})(C,p,g),C.clear({color:b.Color.transparent});for(var Y=0;Y<w.length;Y++){var ae=w[Y];if(!v.hasRenderableParent(ae)){var be=v.getTile(ae),Ce=be.getBucket(g);if(Ce){var Ee=Ce.programConfigurations.get(g.id);p.useProgram("heatmap",Ee).draw(C,R.TRIANGLES,Se.disabled,O,F,et.disabled,to(ae.posMatrix,be,p.transform.zoom,g.paint.get("heatmap-intensity")),g.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,g.paint,p.transform.zoom,Ee)}}}C.viewport.set([0,0,p.width,p.height])}else"translucent"===p.renderPass&&(p.context.setColorMode(p.colorModeForRenderPass()),function(Ne,ke){var Ve=Ne.context,De=Ve.gl,qe=ke.heatmapFbo;if(qe){Ve.activeTexture.set(De.TEXTURE0),De.bindTexture(De.TEXTURE_2D,qe.colorAttachment.get()),Ve.activeTexture.set(De.TEXTURE1);var Qe=ke.colorRampTexture;Qe||(Qe=ke.colorRampTexture=new b.Texture(Ve,ke.colorRamp,De.RGBA)),Qe.bind(De.LINEAR,De.CLAMP_TO_EDGE),Ne.useProgram("heatmapTexture").draw(Ve,De.TRIANGLES,Se.disabled,Le.disabled,Ne.colorModeForRenderPass(),et.disabled,function(rt,ht,dt,mt){var Tt=b.create();b.ortho(Tt,0,rt.width,rt.height,0,0,1);var kt=rt.context.gl;return{u_matrix:Tt,u_world:[kt.drawingBufferWidth,kt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ht.paint.get("heatmap-opacity")}}(Ne,ke),ke.id,Ne.viewportBuffer,Ne.quadTriangleIndexBuffer,Ne.viewportSegments,ke.paint,Ne.transform.zoom)}}(p,g))},line:function(p,v,g,w){if("translucent"===p.renderPass){var C=g.paint.get("line-opacity"),R=g.paint.get("line-width");if(0!==C.constantOr(1)&&0!==R.constantOr(1))for(var O=p.depthModeForSublayer(0,Se.ReadOnly),F=p.colorModeForRenderPass(),Y=g.paint.get("line-dasharray"),ae=g.paint.get("line-pattern"),be=ae.constantOr(1),Ce=g.paint.get("line-gradient"),Ee=g.getCrossfadeParameters(),Ne=be?"linePattern":Y?"lineSDF":Ce?"lineGradient":"line",ke=p.context,Ve=ke.gl,De=!0,qe=0,Qe=w;qe<Qe.length;qe+=1){var rt=Qe[qe],ht=v.getTile(rt);if(!be||ht.patternsLoaded()){var dt=ht.getBucket(g);if(dt){var mt=dt.programConfigurations.get(g.id),Tt=p.context.program.get(),kt=p.useProgram(Ne,mt),Ot=De||kt.program!==Tt,Lt=ae.constantOr(null);if(Lt&&ht.imageAtlas){var fn=ht.imageAtlas,pn=fn.patternPositions[Lt.to.toString()],hn=fn.patternPositions[Lt.from.toString()];pn&&hn&&mt.setConstantPatternPositions(pn,hn)}var gr=be?Cr(p,ht,g,Ee):Y?Yo(p,ht,g,Y,Ee):Ce?ks(p,ht,g,dt.lineClipsArray.length):no(p,ht,g);if(be)ke.activeTexture.set(Ve.TEXTURE0),ht.imageAtlasTexture.bind(Ve.LINEAR,Ve.CLAMP_TO_EDGE),mt.updatePaintBuffers(Ee);else if(Y&&(Ot||p.lineAtlas.dirty))ke.activeTexture.set(Ve.TEXTURE0),p.lineAtlas.bind(ke);else if(Ce){var en=dt.gradients[g.id],Rn=en.texture;if(g.gradientVersion!==en.version){var Mn=256;if(g.stepInterpolant){var Pn=v.getSource().maxzoom,xn=rt.canonical.z===Pn?Math.ceil(1<<p.transform.maxZoom-rt.canonical.z):1;Mn=b.clamp(b.nextPowerOfTwo(dt.maxLineLength/b.EXTENT*1024*xn),256,ke.maxTextureSize)}en.gradient=b.renderColorRamp({expression:g.gradientExpression(),evaluationKey:"lineProgress",resolution:Mn,image:en.gradient||void 0,clips:dt.lineClipsArray}),en.texture?en.texture.update(en.gradient):en.texture=new b.Texture(ke,en.gradient,Ve.RGBA),en.version=g.gradientVersion,Rn=en.texture}ke.activeTexture.set(Ve.TEXTURE0),Rn.bind(g.stepInterpolant?Ve.NEAREST:Ve.LINEAR,Ve.CLAMP_TO_EDGE)}kt.draw(ke,Ve.TRIANGLES,O,p.stencilModeForClipping(rt),F,et.disabled,gr,g.id,dt.layoutVertexBuffer,dt.indexBuffer,dt.segments,g.paint,p.transform.zoom,mt,dt.layoutVertexBuffer2),De=!1}}}}},fill:function(p,v,g,w){var C=g.paint.get("fill-color"),R=g.paint.get("fill-opacity");if(0!==R.constantOr(1)){var O=p.colorModeForRenderPass(),F=g.paint.get("fill-pattern"),Y=p.opaquePassEnabledForLayer()&&!F.constantOr(1)&&1===C.constantOr(b.Color.transparent).a&&1===R.constantOr(0)?"opaque":"translucent";if(p.renderPass===Y){var ae=p.depthModeForSublayer(1,"opaque"===p.renderPass?Se.ReadWrite:Se.ReadOnly);Xn(p,v,g,w,ae,O,!1)}if("translucent"===p.renderPass&&g.paint.get("fill-antialias")){var be=p.depthModeForSublayer(g.getPaintProperty("fill-outline-color")?2:0,Se.ReadOnly);Xn(p,v,g,w,be,O,!0)}}},"fill-extrusion":function(p,v,g,w){var C=g.paint.get("fill-extrusion-opacity");if(0!==C&&"translucent"===p.renderPass){var R=new Se(p.context.gl.LEQUAL,Se.ReadWrite,p.depthRangeFor3D);if(1!==C||g.paint.get("fill-extrusion-pattern").constantOr(1))Su(p,v,g,w,R,Le.disabled,Je.disabled),Su(p,v,g,w,R,p.stencilModeFor3D(),p.colorModeForRenderPass());else{var O=p.colorModeForRenderPass();Su(p,v,g,w,R,Le.disabled,O)}}},hillshade:function(p,v,g,w){if("offscreen"===p.renderPass||"translucent"===p.renderPass){for(var C=p.context,R=p.depthModeForSublayer(0,Se.ReadOnly),O=p.colorModeForRenderPass(),F="translucent"===p.renderPass?p.stencilConfigForOverlap(w):[{},w],Y=F[0],ae=0,be=F[1];ae<be.length;ae+=1){var Ce=be[ae],Ee=v.getTile(Ce);Ee.needsHillshadePrepare&&"offscreen"===p.renderPass?Zl(p,Ee,g,R,Le.disabled,O):"translucent"===p.renderPass&&Jl(p,Ee,g,R,Y[Ce.overscaledZ],O)}C.viewport.set([0,0,p.width,p.height])}},raster:function(p,v,g,w){if("translucent"===p.renderPass&&0!==g.paint.get("raster-opacity")&&w.length)for(var C=p.context,R=C.gl,O=v.getSource(),F=p.useProgram("raster"),Y=p.colorModeForRenderPass(),ae=O instanceof pt?[{},w]:p.stencilConfigForOverlap(w),be=ae[0],Ce=ae[1],Ee=Ce[Ce.length-1].overscaledZ,Ne=!p.options.moving,ke=0,Ve=Ce;ke<Ve.length;ke+=1){var De=Ve[ke],qe=p.depthModeForSublayer(De.overscaledZ-Ee,1===g.paint.get("raster-opacity")?Se.ReadWrite:Se.ReadOnly,R.LESS),Qe=v.getTile(De),rt=p.transform.calculatePosMatrix(De.toUnwrapped(),Ne);Qe.registerFadeDuration(g.paint.get("raster-fade-duration"));var ht=v.findLoadedParent(De,0),dt=Yl(Qe,ht,v,g,p.transform),mt=void 0,Tt=void 0,kt="nearest"===g.paint.get("raster-resampling")?R.NEAREST:R.LINEAR;C.activeTexture.set(R.TEXTURE0),Qe.texture.bind(kt,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),C.activeTexture.set(R.TEXTURE1),ht?(ht.texture.bind(kt,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),mt=Math.pow(2,ht.tileID.overscaledZ-Qe.tileID.overscaledZ),Tt=[Qe.tileID.canonical.x*mt%1,Qe.tileID.canonical.y*mt%1]):Qe.texture.bind(kt,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST);var Ot=Dc(rt,Tt||[0,0],mt||1,dt,g);O instanceof pt?F.draw(C,R.TRIANGLES,qe,Le.disabled,Y,et.disabled,Ot,g.id,O.boundsBuffer,p.quadTriangleIndexBuffer,O.boundsSegments):F.draw(C,R.TRIANGLES,qe,be[De.overscaledZ],Y,et.disabled,Ot,g.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}},background:function(p,v,g){var w=g.paint.get("background-color"),C=g.paint.get("background-opacity");if(0!==C){var R=p.context,O=R.gl,F=p.transform,Y=F.tileSize,ae=g.paint.get("background-pattern");if(!p.isPatternMissing(ae)){var be=!ae&&1===w.a&&1===C&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass===be){var Ce=Le.disabled,Ee=p.depthModeForSublayer(0,"opaque"===be?Se.ReadWrite:Se.ReadOnly),Ne=p.colorModeForRenderPass(),ke=p.useProgram(ae?"backgroundPattern":"background"),Ve=F.coveringTiles({tileSize:Y});ae&&(R.activeTexture.set(O.TEXTURE0),p.imageManager.bind(p.context));for(var De=g.getCrossfadeParameters(),qe=0,Qe=Ve;qe<Qe.length;qe+=1){var rt=Qe[qe],ht=p.transform.calculatePosMatrix(rt.toUnwrapped()),dt=ae?or(ht,C,p,ae,{tileID:rt,tileSize:Y},De):on(ht,C,w);ke.draw(R,O.TRIANGLES,Ee,Ce,Ne,et.disabled,dt,g.id,p.tileExtentBuffer,p.quadTriangleIndexBuffer,p.tileExtentSegments)}}}}},debug:function(p,v,g){for(var w=0;w<g.length;w++)qa(p,v,g[w])},custom:function(p,v,g){var w=p.context,C=g.implementation;if("offscreen"===p.renderPass){var R=C.prerender;R&&(p.setCustomLayerDefaults(),w.setColorMode(p.colorModeForRenderPass()),R.call(C,w.gl,p.transform.customLayerMatrix()),w.setDirty(),p.setBaseState())}else if("translucent"===p.renderPass){p.setCustomLayerDefaults(),w.setColorMode(p.colorModeForRenderPass()),w.setStencilMode(Le.disabled);var O="3d"===C.renderingMode?new Se(p.context.gl.LEQUAL,Se.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,Se.ReadOnly);w.setDepthMode(O),C.render(w.gl,p.transform.customLayerMatrix()),w.setDirty(),p.setBaseState(),w.bindFramebuffer.set(null)}}},Pr=function(p,v){this.context=new Ke(p),this.transform=v,this._tileTextures={},this.setup(),this.numSublayers=Pe.maxUnderzooming+Pe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Hl,this.gpuTimers={}};Pr.prototype.resize=function(p,v){if(this.width=p*b.browser.devicePixelRatio,this.height=v*b.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var g=0,w=this.style._order;g<w.length;g+=1)this.style._layers[w[g]].resize()},Pr.prototype.setup=function(){var p=this.context,v=new b.StructArrayLayout2i4;v.emplaceBack(0,0),v.emplaceBack(b.EXTENT,0),v.emplaceBack(0,b.EXTENT),v.emplaceBack(b.EXTENT,b.EXTENT),this.tileExtentBuffer=p.createVertexBuffer(v,Ba.members),this.tileExtentSegments=b.SegmentVector.simpleSegment(0,0,4,2);var g=new b.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(b.EXTENT,0),g.emplaceBack(0,b.EXTENT),g.emplaceBack(b.EXTENT,b.EXTENT),this.debugBuffer=p.createVertexBuffer(g,Ba.members),this.debugSegments=b.SegmentVector.simpleSegment(0,0,4,5);var w=new b.StructArrayLayout4i8;w.emplaceBack(0,0,0,0),w.emplaceBack(b.EXTENT,0,b.EXTENT,0),w.emplaceBack(0,b.EXTENT,0,b.EXTENT),w.emplaceBack(b.EXTENT,b.EXTENT,b.EXTENT,b.EXTENT),this.rasterBoundsBuffer=p.createVertexBuffer(w,xe.members),this.rasterBoundsSegments=b.SegmentVector.simpleSegment(0,0,4,2);var C=new b.StructArrayLayout2i4;C.emplaceBack(0,0),C.emplaceBack(1,0),C.emplaceBack(0,1),C.emplaceBack(1,1),this.viewportBuffer=p.createVertexBuffer(C,Ba.members),this.viewportSegments=b.SegmentVector.simpleSegment(0,0,4,2);var R=new b.StructArrayLayout1ui2;R.emplaceBack(0),R.emplaceBack(1),R.emplaceBack(3),R.emplaceBack(2),R.emplaceBack(0),this.tileBorderIndexBuffer=p.createIndexBuffer(R);var O=new b.StructArrayLayout3ui6;O.emplaceBack(0,1,2),O.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=p.createIndexBuffer(O),this.emptyTexture=new b.Texture(p,{width:1,height:1,data:new Uint8Array([0,0,0,0])},p.gl.RGBA);var F=this.context.gl;this.stencilClearMode=new Le({func:F.ALWAYS,mask:0},0,255,F.ZERO,F.ZERO,F.ZERO)},Pr.prototype.clearStencil=function(){var p=this.context,v=p.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var g=b.create();b.ortho(g,0,this.width,this.height,0,0,1),b.scale(g,g,[v.drawingBufferWidth,v.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(p,v.TRIANGLES,Se.disabled,this.stencilClearMode,Je.disabled,et.disabled,Mi(g),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Pr.prototype._renderTileClippingMasks=function(p,v){if(this.currentStencilSource!==p.source&&p.isTileClipped()&&v&&v.length){this.currentStencilSource=p.source;var g=this.context,w=g.gl;this.nextStencilID+v.length>256&&this.clearStencil(),g.setColorMode(Je.disabled),g.setDepthMode(Se.disabled);var C=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var R=0,O=v;R<O.length;R+=1){var F=O[R],Y=this._tileClippingMaskIDs[F.key]=this.nextStencilID++;C.draw(g,w.TRIANGLES,Se.disabled,new Le({func:w.ALWAYS,mask:0},Y,255,w.KEEP,w.KEEP,w.REPLACE),Je.disabled,et.disabled,Mi(F.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Pr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var p=this.nextStencilID++,v=this.context.gl;return new Le({func:v.NOTEQUAL,mask:255},p,255,v.KEEP,v.KEEP,v.REPLACE)},Pr.prototype.stencilModeForClipping=function(p){var v=this.context.gl;return new Le({func:v.EQUAL,mask:255},this._tileClippingMaskIDs[p.key],0,v.KEEP,v.KEEP,v.REPLACE)},Pr.prototype.stencilConfigForOverlap=function(p){var v,g=this.context.gl,w=p.sort(function(Y,ae){return ae.overscaledZ-Y.overscaledZ}),C=w[w.length-1].overscaledZ,R=w[0].overscaledZ-C+1;if(R>1){this.currentStencilSource=void 0,this.nextStencilID+R>256&&this.clearStencil();for(var O={},F=0;F<R;F++)O[F+C]=new Le({func:g.GEQUAL,mask:255},F+this.nextStencilID,255,g.KEEP,g.KEEP,g.REPLACE);return this.nextStencilID+=R,[O,w]}return[(v={},v[C]=Le.disabled,v),w]},Pr.prototype.colorModeForRenderPass=function(){var p=this.context.gl;return this._showOverdrawInspector?new Je([p.CONSTANT_COLOR,p.ONE],new b.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Je.unblended:Je.alphaBlended},Pr.prototype.depthModeForSublayer=function(p,v,g){if(!this.opaquePassEnabledForLayer())return Se.disabled;var w=1-((1+this.currentLayer)*this.numSublayers+p)*this.depthEpsilon;return new Se(g||this.context.gl.LEQUAL,v,[w,w])},Pr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Pr.prototype.render=function(p,v){var g=this;this.style=p,this.options=v,this.lineAtlas=p.lineAtlas,this.imageManager=p.imageManager,this.glyphManager=p.glyphManager,this.symbolFadeChange=p.placement.symbolFadeChange(b.browser.now()),this.imageManager.beginFrame();var w=this.style._order,C=this.style.sourceCaches;for(var R in C){var O=C[R];O.used&&O.prepare(this.context)}var F,Y,ae={},be={},Ce={};for(var Ee in C){var Ne=C[Ee];ae[Ee]=Ne.getVisibleCoordinates(),be[Ee]=ae[Ee].slice().reverse(),Ce[Ee]=Ne.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ke=0;ke<w.length;ke++)if(this.style._layers[w[ke]].is3D()){this.opaquePassCutoff=ke;break}this.renderPass="offscreen";for(var Ve=0,De=w;Ve<De.length;Ve+=1){var qe=this.style._layers[De[Ve]];if(qe.hasOffscreenPass()&&!qe.isHidden(this.transform.zoom)){var Qe=be[qe.source];("custom"===qe.type||Qe.length)&&this.renderLayer(this,C[qe.source],qe,Qe)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:v.showOverdrawInspector?b.Color.black:b.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=v.showOverdrawInspector,this.depthRangeFor3D=[0,1-(p._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){var rt=this.style._layers[w[this.currentLayer]],ht=C[rt.source],dt=ae[rt.source];this._renderTileClippingMasks(rt,dt),this.renderLayer(this,ht,rt,dt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){var mt=this.style._layers[w[this.currentLayer]],Tt=C[mt.source],kt=("symbol"===mt.type?Ce:be)[mt.source];this._renderTileClippingMasks(mt,ae[mt.source]),this.renderLayer(this,Tt,mt,kt)}this.options.showTileBoundaries&&(b.values(this.style._layers).forEach(function(Ot){Ot.source&&!Ot.isHidden(g.transform.zoom)&&(Ot.source!==(Y&&Y.id)&&(Y=g.style.sourceCaches[Ot.source]),(!F||F.getSource().maxzoom<Y.getSource().maxzoom)&&(F=Y))}),F&&Oc.debug(this,F,F.getVisibleCoordinates())),this.options.showPadding&&function(Ot){var Lt=Ot.transform.padding;Ld(Ot,Ot.transform.height-(Lt.top||0),3,vo),Ld(Ot,Lt.bottom||0,3,al),ih(Ot,Lt.left||0,3,sl),ih(Ot,Ot.transform.width-(Lt.right||0),3,Ua);var pn,hn,gr,en,fn=Ot.transform.centerPoint;ga(pn=Ot,(hn=fn.x)-1,(gr=Ot.transform.height-fn.y)-10,2,20,en=Jr),ga(pn,hn-10,gr-1,20,2,en)}(this),this.context.setDefault()},Pr.prototype.renderLayer=function(p,v,g,w){g.isHidden(this.transform.zoom)||("background"===g.type||"custom"===g.type||w.length)&&(this.id=g.id,this.gpuTimingStart(g),Oc[g.type](p,v,g,w,this.style.placement.variableOffsets),this.gpuTimingEnd())},Pr.prototype.gpuTimingStart=function(p){if(this.options.gpuTiming){var v=this.context.extTimerQuery,g=this.gpuTimers[p.id];g||(g=this.gpuTimers[p.id]={calls:0,cpuTime:0,query:v.createQueryEXT()}),g.calls++,v.beginQueryEXT(v.TIME_ELAPSED_EXT,g.query)}},Pr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var p=this.context.extTimerQuery;p.endQueryEXT(p.TIME_ELAPSED_EXT)}},Pr.prototype.collectGpuTimers=function(){var p=this.gpuTimers;return this.gpuTimers={},p},Pr.prototype.queryGpuTimers=function(p){var v={};for(var g in p){var w=p[g],C=this.context.extTimerQuery,R=C.getQueryObjectEXT(w.query,C.QUERY_RESULT_EXT)/1e6;C.deleteQueryEXT(w.query),v[g]=R}return v},Pr.prototype.translatePosMatrix=function(p,v,g,w,C){if(!g[0]&&!g[1])return p;var R=C?"map"===w?this.transform.angle:0:"viewport"===w?-this.transform.angle:0;if(R){var O=Math.sin(R),F=Math.cos(R);g=[g[0]*F-g[1]*O,g[0]*O+g[1]*F]}var Y=[C?g[0]:Bo(v,g[0],this.transform.zoom),C?g[1]:Bo(v,g[1],this.transform.zoom),0],ae=new Float32Array(16);return b.translate(ae,p,Y),ae},Pr.prototype.saveTileTexture=function(p){var v=this._tileTextures[p.size[0]];v?v.push(p):this._tileTextures[p.size[0]]=[p]},Pr.prototype.getTileTexture=function(p){var v=this._tileTextures[p];return v&&v.length>0?v.pop():null},Pr.prototype.isPatternMissing=function(p){if(!p)return!1;if(!p.from||!p.to)return!0;var v=this.imageManager.getPattern(p.from.toString()),g=this.imageManager.getPattern(p.to.toString());return!v||!g},Pr.prototype.useProgram=function(p,v){this.cache=this.cache||{};var g=""+p+(v?v.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[g]||(this.cache[g]=new th(this.context,p,Qs[p],v,Wr[p],this._showOverdrawInspector)),this.cache[g]},Pr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Pr.prototype.setBaseState=function(){var p=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(p.FUNC_ADD)},Pr.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=b.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new b.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Pr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var ul=function(p,v){this.points=p,this.planes=v};ul.fromInvProjectionMatrix=function(p,v,g){var w=Math.pow(2,g),C=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(O){return b.transformMat4([],O,p)}).map(function(O){return b.scale$1([],O,1/O[3]/v*w)}),R=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(O){var F=b.sub([],C[O[0]],C[O[1]]),Y=b.sub([],C[O[2]],C[O[1]]),ae=b.normalize([],b.cross([],F,Y)),be=-b.dot(ae,C[O[1]]);return ae.concat(be)});return new ul(C,R)};var _o=function(p,v){this.min=p,this.max=v,this.center=b.scale$2([],b.add([],this.min,this.max),.5)};_o.prototype.quadrant=function(p){for(var v=[p%2==0,p<2],g=b.clone$2(this.min),w=b.clone$2(this.max),C=0;C<v.length;C++)g[C]=v[C]?this.min[C]:this.center[C],w[C]=v[C]?this.center[C]:this.max[C];return w[2]=this.max[2],new _o(g,w)},_o.prototype.distanceX=function(p){return Math.max(Math.min(this.max[0],p[0]),this.min[0])-p[0]},_o.prototype.distanceY=function(p){return Math.max(Math.min(this.max[1],p[1]),this.min[1])-p[1]},_o.prototype.intersects=function(p){for(var v=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],g=!0,w=0;w<p.planes.length;w++){for(var C=p.planes[w],R=0,O=0;O<v.length;O++)R+=b.dot$1(C,v[O])>=0;if(0===R)return 0;R!==v.length&&(g=!1)}if(g)return 2;for(var F=0;F<3;F++){for(var Y=Number.MAX_VALUE,ae=-Number.MAX_VALUE,be=0;be<p.points.length;be++){var Ce=p.points[be][F]-this.min[F];Y=Math.min(Y,Ce),ae=Math.max(ae,Ce)}if(ae<0||Y>this.max[F]-this.min[F])return 0}return 1};var Cu=function(p,v,g,w){if(void 0===p&&(p=0),void 0===v&&(v=0),void 0===g&&(g=0),void 0===w&&(w=0),isNaN(p)||p<0||isNaN(v)||v<0||isNaN(g)||g<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=p,this.bottom=v,this.left=g,this.right=w};Cu.prototype.interpolate=function(p,v,g){return null!=v.top&&null!=p.top&&(this.top=b.number(p.top,v.top,g)),null!=v.bottom&&null!=p.bottom&&(this.bottom=b.number(p.bottom,v.bottom,g)),null!=v.left&&null!=p.left&&(this.left=b.number(p.left,v.left,g)),null!=v.right&&null!=p.right&&(this.right=b.number(p.right,v.right,g)),this},Cu.prototype.getCenter=function(p,v){var g=b.clamp((this.left+p-this.right)/2,0,p),w=b.clamp((this.top+v-this.bottom)/2,0,v);return new b.Point(g,w)},Cu.prototype.equals=function(p){return this.top===p.top&&this.bottom===p.bottom&&this.left===p.left&&this.right===p.right},Cu.prototype.clone=function(){return new Cu(this.top,this.bottom,this.left,this.right)},Cu.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Ur=function(p,v,g,w,C){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===C||C,this._minZoom=p||0,this._maxZoom=v||22,this._minPitch=null==g?0:g,this._maxPitch=null==w?60:w,this.setMaxBounds(),this.width=0,this.height=0,this._center=new b.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Cu,this._posMatrixCache={},this._alignedPosMatrixCache={}},mr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Ur.prototype.clone=function(){var p=new Ur(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return p.tileSize=this.tileSize,p.latRange=this.latRange,p.width=this.width,p.height=this.height,p._center=this._center,p.zoom=this.zoom,p.angle=this.angle,p._fov=this._fov,p._pitch=this._pitch,p._unmodified=this._unmodified,p._edgeInsets=this._edgeInsets.clone(),p._calcMatrices(),p},mr.minZoom.get=function(){return this._minZoom},mr.minZoom.set=function(p){this._minZoom!==p&&(this._minZoom=p,this.zoom=Math.max(this.zoom,p))},mr.maxZoom.get=function(){return this._maxZoom},mr.maxZoom.set=function(p){this._maxZoom!==p&&(this._maxZoom=p,this.zoom=Math.min(this.zoom,p))},mr.minPitch.get=function(){return this._minPitch},mr.minPitch.set=function(p){this._minPitch!==p&&(this._minPitch=p,this.pitch=Math.max(this.pitch,p))},mr.maxPitch.get=function(){return this._maxPitch},mr.maxPitch.set=function(p){this._maxPitch!==p&&(this._maxPitch=p,this.pitch=Math.min(this.pitch,p))},mr.renderWorldCopies.get=function(){return this._renderWorldCopies},mr.renderWorldCopies.set=function(p){void 0===p?p=!0:null===p&&(p=!1),this._renderWorldCopies=p},mr.worldSize.get=function(){return this.tileSize*this.scale},mr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},mr.size.get=function(){return new b.Point(this.width,this.height)},mr.bearing.get=function(){return-this.angle/Math.PI*180},mr.bearing.set=function(p){var v=-b.wrap(p,-180,180)*Math.PI/180;this.angle!==v&&(this._unmodified=!1,this.angle=v,this._calcMatrices(),this.rotationMatrix=b.create$2(),b.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},mr.pitch.get=function(){return this._pitch/Math.PI*180},mr.pitch.set=function(p){var v=b.clamp(p,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==v&&(this._unmodified=!1,this._pitch=v,this._calcMatrices())},mr.fov.get=function(){return this._fov/Math.PI*180},mr.fov.set=function(p){p=Math.max(.01,Math.min(60,p)),this._fov!==p&&(this._unmodified=!1,this._fov=p/180*Math.PI,this._calcMatrices())},mr.zoom.get=function(){return this._zoom},mr.zoom.set=function(p){var v=Math.min(Math.max(p,this.minZoom),this.maxZoom);this._zoom!==v&&(this._unmodified=!1,this._zoom=v,this.scale=this.zoomScale(v),this.tileZoom=Math.floor(v),this.zoomFraction=v-this.tileZoom,this._constrain(),this._calcMatrices())},mr.center.get=function(){return this._center},mr.center.set=function(p){p.lat===this._center.lat&&p.lng===this._center.lng||(this._unmodified=!1,this._center=p,this._constrain(),this._calcMatrices())},mr.padding.get=function(){return this._edgeInsets.toJSON()},mr.padding.set=function(p){this._edgeInsets.equals(p)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,p,1),this._calcMatrices())},mr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Ur.prototype.isPaddingEqual=function(p){return this._edgeInsets.equals(p)},Ur.prototype.interpolatePadding=function(p,v,g){this._unmodified=!1,this._edgeInsets.interpolate(p,v,g),this._constrain(),this._calcMatrices()},Ur.prototype.coveringZoomLevel=function(p){var v=(p.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/p.tileSize));return Math.max(0,v)},Ur.prototype.getVisibleUnwrappedCoordinates=function(p){var v=[new b.UnwrappedTileID(0,p)];if(this._renderWorldCopies)for(var g=this.pointCoordinate(new b.Point(0,0)),w=this.pointCoordinate(new b.Point(this.width,0)),C=this.pointCoordinate(new b.Point(this.width,this.height)),R=this.pointCoordinate(new b.Point(0,this.height)),O=Math.floor(Math.min(g.x,w.x,C.x,R.x)),F=Math.floor(Math.max(g.x,w.x,C.x,R.x)),Y=O-1;Y<=F+1;Y++)0!==Y&&v.push(new b.UnwrappedTileID(Y,p));return v},Ur.prototype.coveringTiles=function(p){var v=this.coveringZoomLevel(p),g=v;if(void 0!==p.minzoom&&v<p.minzoom)return[];void 0!==p.maxzoom&&v>p.maxzoom&&(v=p.maxzoom);var w=b.MercatorCoordinate.fromLngLat(this.center),C=Math.pow(2,v),R=[C*w.x,C*w.y,0],O=ul.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,v),F=p.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(F=v);var Y=function(Ot){return{aabb:new _o([Ot*C,0,0],[(Ot+1)*C,C,0]),zoom:0,x:0,y:0,wrap:Ot,fullyVisible:!1}},ae=[],be=[],Ce=v,Ee=p.reparseOverscaled?g:v;if(this._renderWorldCopies)for(var Ne=1;Ne<=3;Ne++)ae.push(Y(-Ne)),ae.push(Y(Ne));for(ae.push(Y(0));ae.length>0;){var ke=ae.pop(),Ve=ke.x,De=ke.y,qe=ke.fullyVisible;if(!qe){var Qe=ke.aabb.intersects(O);if(0===Qe)continue;qe=2===Qe}var rt=ke.aabb.distanceX(R),ht=ke.aabb.distanceY(R),dt=Math.max(Math.abs(rt),Math.abs(ht));if(ke.zoom===Ce||dt>3+(1<<Ce-ke.zoom)-2&&ke.zoom>=F)be.push({tileID:new b.OverscaledTileID(ke.zoom===Ce?Ee:ke.zoom,ke.wrap,ke.zoom,Ve,De),distanceSq:b.sqrLen([R[0]-.5-Ve,R[1]-.5-De])});else for(var mt=0;mt<4;mt++){var Tt=(Ve<<1)+mt%2,kt=(De<<1)+(mt>>1);ae.push({aabb:ke.aabb.quadrant(mt),zoom:ke.zoom+1,x:Tt,y:kt,wrap:ke.wrap,fullyVisible:qe})}}return be.sort(function(Ot,Lt){return Ot.distanceSq-Lt.distanceSq}).map(function(Ot){return Ot.tileID})},Ur.prototype.resize=function(p,v){this.width=p,this.height=v,this.pixelsToGLUnits=[2/p,-2/v],this._constrain(),this._calcMatrices()},mr.unmodified.get=function(){return this._unmodified},Ur.prototype.zoomScale=function(p){return Math.pow(2,p)},Ur.prototype.scaleZoom=function(p){return Math.log(p)/Math.LN2},Ur.prototype.project=function(p){var v=b.clamp(p.lat,-this.maxValidLatitude,this.maxValidLatitude);return new b.Point(b.mercatorXfromLng(p.lng)*this.worldSize,b.mercatorYfromLat(v)*this.worldSize)},Ur.prototype.unproject=function(p){return new b.MercatorCoordinate(p.x/this.worldSize,p.y/this.worldSize).toLngLat()},mr.point.get=function(){return this.project(this.center)},Ur.prototype.setLocationAtPoint=function(p,v){var g=this.pointCoordinate(v),w=this.pointCoordinate(this.centerPoint),C=this.locationCoordinate(p),R=new b.MercatorCoordinate(C.x-(g.x-w.x),C.y-(g.y-w.y));this.center=this.coordinateLocation(R),this._renderWorldCopies&&(this.center=this.center.wrap())},Ur.prototype.locationPoint=function(p){return this.coordinatePoint(this.locationCoordinate(p))},Ur.prototype.pointLocation=function(p){return this.coordinateLocation(this.pointCoordinate(p))},Ur.prototype.locationCoordinate=function(p){return b.MercatorCoordinate.fromLngLat(p)},Ur.prototype.coordinateLocation=function(p){return p.toLngLat()},Ur.prototype.pointCoordinate=function(p){var v=[p.x,p.y,0,1],g=[p.x,p.y,1,1];b.transformMat4(v,v,this.pixelMatrixInverse),b.transformMat4(g,g,this.pixelMatrixInverse);var w=v[3],C=g[3],R=v[1]/w,O=g[1]/C,F=v[2]/w,Y=g[2]/C,ae=F===Y?0:(0-F)/(Y-F);return new b.MercatorCoordinate(b.number(v[0]/w,g[0]/C,ae)/this.worldSize,b.number(R,O,ae)/this.worldSize)},Ur.prototype.coordinatePoint=function(p){var v=[p.x*this.worldSize,p.y*this.worldSize,0,1];return b.transformMat4(v,v,this.pixelMatrix),new b.Point(v[0]/v[3],v[1]/v[3])},Ur.prototype.getBounds=function(){return(new b.LngLatBounds).extend(this.pointLocation(new b.Point(0,0))).extend(this.pointLocation(new b.Point(this.width,0))).extend(this.pointLocation(new b.Point(this.width,this.height))).extend(this.pointLocation(new b.Point(0,this.height)))},Ur.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new b.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Ur.prototype.setMaxBounds=function(p){p?(this.lngRange=[p.getWest(),p.getEast()],this.latRange=[p.getSouth(),p.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Ur.prototype.calculatePosMatrix=function(p,v){void 0===v&&(v=!1);var g=p.key,w=v?this._alignedPosMatrixCache:this._posMatrixCache;if(w[g])return w[g];var C=p.canonical,R=this.worldSize/this.zoomScale(C.z),O=C.x+Math.pow(2,C.z)*p.wrap,F=b.identity(new Float64Array(16));return b.translate(F,F,[O*R,C.y*R,0]),b.scale(F,F,[R/b.EXTENT,R/b.EXTENT,1]),b.multiply(F,v?this.alignedProjMatrix:this.projMatrix,F),w[g]=new Float32Array(F),w[g]},Ur.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Ur.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var p,v,g,w,C=-90,R=90,O=-180,F=180,Y=this.size,ae=this._unmodified;if(this.latRange){var be=this.latRange;C=b.mercatorYfromLat(be[1])*this.worldSize,p=(R=b.mercatorYfromLat(be[0])*this.worldSize)-C<Y.y?Y.y/(R-C):0}if(this.lngRange){var Ce=this.lngRange;O=b.mercatorXfromLng(Ce[0])*this.worldSize,v=(F=b.mercatorXfromLng(Ce[1])*this.worldSize)-O<Y.x?Y.x/(F-O):0}var Ee=this.point,Ne=Math.max(v||0,p||0);if(Ne)return this.center=this.unproject(new b.Point(v?(F+O)/2:Ee.x,p?(R+C)/2:Ee.y)),this.zoom+=this.scaleZoom(Ne),this._unmodified=ae,void(this._constraining=!1);if(this.latRange){var ke=Ee.y,Ve=Y.y/2;ke-Ve<C&&(w=C+Ve),ke+Ve>R&&(w=R-Ve)}if(this.lngRange){var De=Ee.x,qe=Y.x/2;De-qe<O&&(g=O+qe),De+qe>F&&(g=F-qe)}void 0===g&&void 0===w||(this.center=this.unproject(new b.Point(void 0!==g?g:Ee.x,void 0!==w?w:Ee.y))),this._unmodified=ae,this._constraining=!1}},Ur.prototype._calcMatrices=function(){if(this.height){var p=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var v=Math.PI/2+this._pitch,g=this._fov*(.5+p.y/this.height),w=Math.sin(g)*this.cameraToCenterDistance/Math.sin(b.clamp(Math.PI-v-g,.01,Math.PI-.01)),C=this.point,R=C.x,O=C.y,F=1.01*(Math.cos(Math.PI/2-this._pitch)*w+this.cameraToCenterDistance),Y=this.height/50,ae=new Float64Array(16);b.perspective(ae,this._fov,this.width/this.height,Y,F),ae[8]=2*-p.x/this.width,ae[9]=2*p.y/this.height,b.scale(ae,ae,[1,-1,1]),b.translate(ae,ae,[0,0,-this.cameraToCenterDistance]),b.rotateX(ae,ae,this._pitch),b.rotateZ(ae,ae,this.angle),b.translate(ae,ae,[-R,-O,0]),this.mercatorMatrix=b.scale([],ae,[this.worldSize,this.worldSize,this.worldSize]),b.scale(ae,ae,[1,1,b.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=ae,this.invProjMatrix=b.invert([],this.projMatrix);var be=this.width%2/2,Ce=this.height%2/2,Ee=Math.cos(this.angle),Ne=Math.sin(this.angle),ke=R-Math.round(R)+Ee*be+Ne*Ce,Ve=O-Math.round(O)+Ee*Ce+Ne*be,De=new Float64Array(ae);if(b.translate(De,De,[ke>.5?ke-1:ke,Ve>.5?Ve-1:Ve,0]),this.alignedProjMatrix=De,ae=b.create(),b.scale(ae,ae,[this.width/2,-this.height/2,1]),b.translate(ae,ae,[1,-1,0]),this.labelPlaneMatrix=ae,ae=b.create(),b.scale(ae,ae,[1,-1,1]),b.translate(ae,ae,[-1,-1,0]),b.scale(ae,ae,[2/this.width,2/this.height,1]),this.glCoordMatrix=ae,this.pixelMatrix=b.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(ae=b.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=ae,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Ur.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var p=this.pointCoordinate(new b.Point(0,0)),v=[p.x*this.worldSize,p.y*this.worldSize,0,1];return b.transformMat4(v,v,this.pixelMatrix)[3]/this.cameraToCenterDistance},Ur.prototype.getCameraPoint=function(){var p=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new b.Point(0,p))},Ur.prototype.getCameraQueryGeometry=function(p){var v=this.getCameraPoint();if(1===p.length)return[p[0],v];for(var g=v.x,w=v.y,C=v.x,R=v.y,O=0,F=p;O<F.length;O+=1){var Y=F[O];g=Math.min(g,Y.x),w=Math.min(w,Y.y),C=Math.max(C,Y.x),R=Math.max(R,Y.y)}return[new b.Point(g,w),new b.Point(C,w),new b.Point(C,R),new b.Point(g,R),new b.Point(g,w)]},Object.defineProperties(Ur.prototype,mr);var ll=function(p){var v,g,w,C;this._hashName=p&&encodeURIComponent(p),b.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(v=this._updateHashUnthrottled.bind(this),g=!1,w=null,C=function(){w=null,g&&(v(),w=setTimeout(C,300),g=!1)},function(){return g=!0,w||C(),w})};ll.prototype.addTo=function(p){return this._map=p,b.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ll.prototype.remove=function(){return b.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ll.prototype.getHashString=function(p){var v=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,w=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,w),R=Math.round(v.lng*C)/C,O=Math.round(v.lat*C)/C,F=this._map.getBearing(),Y=this._map.getPitch(),ae="";if(ae+=p?"/"+R+"/"+O+"/"+g:g+"/"+O+"/"+R,(F||Y)&&(ae+="/"+Math.round(10*F)/10),Y&&(ae+="/"+Math.round(Y)),this._hashName){var be=this._hashName,Ce=!1,Ee=b.window.location.hash.slice(1).split("&").map(function(Ne){var ke=Ne.split("=")[0];return ke===be?(Ce=!0,ke+"="+ae):Ne}).filter(function(Ne){return Ne});return Ce||Ee.push(be+"="+ae),"#"+Ee.join("&")}return"#"+ae},ll.prototype._getCurrentHash=function(){var p,v=this,g=b.window.location.hash.replace("#","");return this._hashName?(g.split("&").map(function(w){return w.split("=")}).forEach(function(w){w[0]===v._hashName&&(p=w)}),(p&&p[1]||"").split("/")):g.split("/")},ll.prototype._onHashChange=function(){var p=this._getCurrentHash();if(p.length>=3&&!p.some(function(g){return isNaN(g)})){var v=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:v,pitch:+(p[4]||0)}),!0}return!1},ll.prototype._updateHashUnthrottled=function(){var p=b.window.location.href.replace(/(#.+)?$/,this.getHashString());try{b.window.history.replaceState(b.window.history.state,null,p)}catch(v){}};var tu={linearity:.3,easing:b.bezier(0,0,.3,1)},fg=b.extend({deceleration:2500,maxSpeed:1400},tu),kc=b.extend({deceleration:20,maxSpeed:1400},tu),Bd=b.extend({deceleration:1e3,maxSpeed:360},tu),__=b.extend({deceleration:1e3,maxSpeed:90},tu),zd=function(p){this._map=p,this.clear()};function oh(p,v){(!p.duration||p.duration<v.duration)&&(p.duration=v.duration,p.easing=v.easing)}function jd(p,v,g){var w=g.maxSpeed,C=g.linearity,R=g.deceleration,O=b.clamp(p*C/(v/1e3),-w,w),F=Math.abs(O)/(R*C);return{easing:g.easing,duration:1e3*F,amount:O*(F/2)}}zd.prototype.clear=function(){this._inertiaBuffer=[]},zd.prototype.record=function(p){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:b.browser.now(),settings:p})},zd.prototype._drainInertiaBuffer=function(){for(var p=this._inertiaBuffer,v=b.browser.now();p.length>0&&v-p[0].time>160;)p.shift()},zd.prototype._onMoveEnd=function(p){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var v={zoom:0,bearing:0,pitch:0,pan:new b.Point(0,0),pinchAround:void 0,around:void 0},g=0,w=this._inertiaBuffer;g<w.length;g+=1){var C=w[g].settings;v.zoom+=C.zoomDelta||0,v.bearing+=C.bearingDelta||0,v.pitch+=C.pitchDelta||0,C.panDelta&&v.pan._add(C.panDelta),C.around&&(v.around=C.around),C.pinchAround&&(v.pinchAround=C.pinchAround)}var R=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,O={};if(v.pan.mag()){var F=jd(v.pan.mag(),R,b.extend({},fg,p||{}));O.offset=v.pan.mult(F.amount/v.pan.mag()),O.center=this._map.transform.center,oh(O,F)}if(v.zoom){var Y=jd(v.zoom,R,kc);O.zoom=this._map.transform.zoom+Y.amount,oh(O,Y)}if(v.bearing){var ae=jd(v.bearing,R,Bd);O.bearing=this._map.transform.bearing+b.clamp(ae.amount,-179,179),oh(O,ae)}if(v.pitch){var be=jd(v.pitch,R,__);O.pitch=this._map.transform.pitch+be.amount,oh(O,be)}if(O.zoom||O.bearing){var Ce=void 0===v.pinchAround?v.around:v.pinchAround;O.around=Ce?this._map.unproject(Ce):this._map.getCenter()}return this.clear(),b.extend(O,{noMoveStart:!0})}};var Fo=function(p){function v(w,C,R,O){void 0===O&&(O={});var F=X.mousePos(C.getCanvasContainer(),R),Y=C.unproject(F);p.call(this,w,b.extend({point:F,lngLat:Y,originalEvent:R},O)),this._defaultPrevented=!1,this.target=C}p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v;var g={defaultPrevented:{configurable:!0}};return v.prototype.preventDefault=function(){this._defaultPrevented=!0},g.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(v.prototype,g),v}(b.Event),Va=function(p){function v(w,C,R){var O="touchend"===w?R.changedTouches:R.touches,F=X.touchPos(C.getCanvasContainer(),O),Y=F.map(function(Ce){return C.unproject(Ce)}),ae=F.reduce(function(Ce,Ee,Ne,ke){return Ce.add(Ee.div(ke.length))},new b.Point(0,0)),be=C.unproject(ae);p.call(this,w,{points:F,point:ae,lngLats:Y,lngLat:be,originalEvent:R}),this._defaultPrevented=!1}p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v;var g={defaultPrevented:{configurable:!0}};return v.prototype.preventDefault=function(){this._defaultPrevented=!0},g.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(v.prototype,g),v}(b.Event),hg=function(p){function v(w,C,R){p.call(this,w,{originalEvent:R}),this._defaultPrevented=!1}p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v;var g={defaultPrevented:{configurable:!0}};return v.prototype.preventDefault=function(){this._defaultPrevented=!0},g.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(v.prototype,g),v}(b.Event),lo=function(p,v){this._map=p,this._clickTolerance=v.clickTolerance};lo.prototype.reset=function(){delete this._mousedownPos},lo.prototype.wheel=function(p){return this._firePreventable(new hg(p.type,this._map,p))},lo.prototype.mousedown=function(p,v){return this._mousedownPos=v,this._firePreventable(new Fo(p.type,this._map,p))},lo.prototype.mouseup=function(p){this._map.fire(new Fo(p.type,this._map,p))},lo.prototype.click=function(p,v){this._mousedownPos&&this._mousedownPos.dist(v)>=this._clickTolerance||this._map.fire(new Fo(p.type,this._map,p))},lo.prototype.dblclick=function(p){return this._firePreventable(new Fo(p.type,this._map,p))},lo.prototype.mouseover=function(p){this._map.fire(new Fo(p.type,this._map,p))},lo.prototype.mouseout=function(p){this._map.fire(new Fo(p.type,this._map,p))},lo.prototype.touchstart=function(p){return this._firePreventable(new Va(p.type,this._map,p))},lo.prototype.touchmove=function(p){this._map.fire(new Va(p.type,this._map,p))},lo.prototype.touchend=function(p){this._map.fire(new Va(p.type,this._map,p))},lo.prototype.touchcancel=function(p){this._map.fire(new Va(p.type,this._map,p))},lo.prototype._firePreventable=function(p){if(this._map.fire(p),p.defaultPrevented)return{}},lo.prototype.isEnabled=function(){return!0},lo.prototype.isActive=function(){return!1},lo.prototype.enable=function(){},lo.prototype.disable=function(){};var Ea=function(p){this._map=p};Ea.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Ea.prototype.mousemove=function(p){this._map.fire(new Fo(p.type,this._map,p))},Ea.prototype.mousedown=function(){this._delayContextMenu=!0},Ea.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Fo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Ea.prototype.contextmenu=function(p){this._delayContextMenu?this._contextMenuEvent=p:this._map.fire(new Fo(p.type,this._map,p)),this._map.listens("contextmenu")&&p.preventDefault()},Ea.prototype.isEnabled=function(){return!0},Ea.prototype.isActive=function(){return!1},Ea.prototype.enable=function(){},Ea.prototype.disable=function(){};var Yt=function(p,v){this._map=p,this._el=p.getCanvasContainer(),this._container=p.getContainer(),this._clickTolerance=v.clickTolerance||1};function Ql(p,v){for(var g={},w=0;w<p.length;w++)g[p[w].identifier]=v[w];return g}Yt.prototype.isEnabled=function(){return!!this._enabled},Yt.prototype.isActive=function(){return!!this._active},Yt.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Yt.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Yt.prototype.mousedown=function(p,v){this.isEnabled()&&p.shiftKey&&0===p.button&&(X.disableDrag(),this._startPos=this._lastPos=v,this._active=!0)},Yt.prototype.mousemoveWindow=function(p,v){if(this._active){var g=v;if(!(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)){var w=this._startPos;this._lastPos=g,this._box||(this._box=X.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",p));var C=Math.min(w.x,g.x),R=Math.max(w.x,g.x),O=Math.min(w.y,g.y),F=Math.max(w.y,g.y);X.setTransform(this._box,"translate("+C+"px,"+O+"px)"),this._box.style.width=R-C+"px",this._box.style.height=F-O+"px"}}},Yt.prototype.mouseupWindow=function(p,v){var g=this;if(this._active&&0===p.button){var w=this._startPos,C=v;if(this.reset(),X.suppressClick(),w.x!==C.x||w.y!==C.y)return this._map.fire(new b.Event("boxzoomend",{originalEvent:p})),{cameraAnimation:function(R){return R.fitScreenCoordinates(w,C,g._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",p)}},Yt.prototype.keydown=function(p){this._active&&27===p.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",p))},Yt.prototype.reset=function(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(X.remove(this._box),this._box=null),X.enableDrag(),delete this._startPos,delete this._lastPos},Yt.prototype._fireEvent=function(p,v){return this._map.fire(new b.Event(p,{originalEvent:v}))};var Tu=function(p){this.reset(),this.numTouches=p.numTouches};Tu.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Tu.prototype.touchstart=function(p,v,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=p.timeStamp),g.length===this.numTouches&&(this.centroid=function(w){for(var C=new b.Point(0,0),R=0,O=w;R<O.length;R+=1)C._add(O[R]);return C.div(w.length)}(v),this.touches=Ql(g,v)))},Tu.prototype.touchmove=function(p,v,g){if(!this.aborted&&this.centroid){var w=Ql(g,v);for(var C in this.touches){var R=w[C];(!R||R.dist(this.touches[C])>30)&&(this.aborted=!0)}}},Tu.prototype.touchend=function(p,v,g){if((!this.centroid||p.timeStamp-this.startTime>500)&&(this.aborted=!0),0===g.length){var w=!this.aborted&&this.centroid;if(this.reset(),w)return w}};var cl=function(p){this.singleTap=new Tu(p),this.numTaps=p.numTaps,this.reset()};cl.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},cl.prototype.touchstart=function(p,v,g){this.singleTap.touchstart(p,v,g)},cl.prototype.touchmove=function(p,v,g){this.singleTap.touchmove(p,v,g)},cl.prototype.touchend=function(p,v,g){var w=this.singleTap.touchend(p,v,g);if(w){var C=p.timeStamp-this.lastTime<500,R=!this.lastTap||this.lastTap.dist(w)<30;if(C&&R||this.reset(),this.count++,this.lastTime=p.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}};var Sa=function(){this._zoomIn=new cl({numTouches:1,numTaps:2}),this._zoomOut=new cl({numTouches:2,numTaps:1}),this.reset()};Sa.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Sa.prototype.touchstart=function(p,v,g){this._zoomIn.touchstart(p,v,g),this._zoomOut.touchstart(p,v,g)},Sa.prototype.touchmove=function(p,v,g){this._zoomIn.touchmove(p,v,g),this._zoomOut.touchmove(p,v,g)},Sa.prototype.touchend=function(p,v,g){var w=this,C=this._zoomIn.touchend(p,v,g),R=this._zoomOut.touchend(p,v,g);return C?(this._active=!0,p.preventDefault(),setTimeout(function(){return w.reset()},0),{cameraAnimation:function(O){return O.easeTo({duration:300,zoom:O.getZoom()+1,around:O.unproject(C)},{originalEvent:p})}}):R?(this._active=!0,p.preventDefault(),setTimeout(function(){return w.reset()},0),{cameraAnimation:function(O){return O.easeTo({duration:300,zoom:O.getZoom()-1,around:O.unproject(R)},{originalEvent:p})}}):void 0},Sa.prototype.touchcancel=function(){this.reset()},Sa.prototype.enable=function(){this._enabled=!0},Sa.prototype.disable=function(){this._enabled=!1,this.reset()},Sa.prototype.isEnabled=function(){return this._enabled},Sa.prototype.isActive=function(){return this._active};var Fd={0:1,2:2},qi=function(p){this.reset(),this._clickTolerance=p.clickTolerance||1};qi.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},qi.prototype._correctButton=function(p,v){return!1},qi.prototype._move=function(p,v){return{}},qi.prototype.mousedown=function(p,v){if(!this._lastPoint){var g=X.mouseButton(p);this._correctButton(p,g)&&(this._lastPoint=v,this._eventButton=g)}},qi.prototype.mousemoveWindow=function(p,v){var w,R,g=this._lastPoint;if(g)if(p.preventDefault(),R=Fd[this._eventButton],void 0===(w=p).buttons||(w.buttons&R)!==R)this.reset();else if(this._moved||!(v.dist(g)<this._clickTolerance))return this._moved=!0,this._lastPoint=v,this._move(g,v)},qi.prototype.mouseupWindow=function(p){this._lastPoint&&X.mouseButton(p)===this._eventButton&&(this._moved&&X.suppressClick(),this.reset())},qi.prototype.enable=function(){this._enabled=!0},qi.prototype.disable=function(){this._enabled=!1,this.reset()},qi.prototype.isEnabled=function(){return this._enabled},qi.prototype.isActive=function(){return this._active};var Qt=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.mousedown=function(g,w){p.prototype.mousedown.call(this,g,w),this._lastPoint&&(this._active=!0)},v.prototype._correctButton=function(g,w){return 0===w&&!g.ctrlKey},v.prototype._move=function(g,w){return{around:w,panDelta:w.sub(g)}},v}(qi),Ms=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype._correctButton=function(g,w){return 0===w&&g.ctrlKey||2===w},v.prototype._move=function(g,w){var C=.8*(w.x-g.x);if(C)return this._active=!0,{bearingDelta:C}},v.prototype.contextmenu=function(g){g.preventDefault()},v}(qi),Mc=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype._correctButton=function(g,w){return 0===w&&g.ctrlKey||2===w},v.prototype._move=function(g,w){var C=-.5*(w.y-g.y);if(C)return this._active=!0,{pitchDelta:C}},v.prototype.contextmenu=function(g){g.preventDefault()},v}(qi),Ga=function(p){this._minTouches=1,this._clickTolerance=p.clickTolerance||1,this.reset()};Ga.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new b.Point(0,0)},Ga.prototype.touchstart=function(p,v,g){return this._calculateTransform(p,v,g)},Ga.prototype.touchmove=function(p,v,g){if(this._active&&!(g.length<this._minTouches))return p.preventDefault(),this._calculateTransform(p,v,g)},Ga.prototype.touchend=function(p,v,g){this._calculateTransform(p,v,g),this._active&&g.length<this._minTouches&&this.reset()},Ga.prototype.touchcancel=function(){this.reset()},Ga.prototype._calculateTransform=function(p,v,g){g.length>0&&(this._active=!0);var w=Ql(g,v),C=new b.Point(0,0),R=new b.Point(0,0),O=0;for(var F in w){var Y=w[F],ae=this._touches[F];ae&&(C._add(Y),R._add(Y.sub(ae)),O++,w[F]=Y)}if(this._touches=w,!(O<this._minTouches)&&R.mag()){var be=R.div(O);if(this._sum._add(be),!(this._sum.mag()<this._clickTolerance))return{around:C.div(O),panDelta:be}}},Ga.prototype.enable=function(){this._enabled=!0},Ga.prototype.disable=function(){this._enabled=!1,this.reset()},Ga.prototype.isEnabled=function(){return this._enabled},Ga.prototype.isActive=function(){return this._active};var ta=function(){this.reset()};function Nc(p,v,g){for(var w=0;w<p.length;w++)if(p[w].identifier===g)return v[w]}function ah(p,v){return Math.log(p/v)/Math.LN2}ta.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},ta.prototype._start=function(p){},ta.prototype._move=function(p,v,g){return{}},ta.prototype.touchstart=function(p,v,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([v[0],v[1]]))},ta.prototype.touchmove=function(p,v,g){if(this._firstTwoTouches){p.preventDefault();var w=this._firstTwoTouches,C=w[1],R=Nc(g,v,w[0]),O=Nc(g,v,C);if(R&&O){var F=this._aroundCenter?null:R.add(O).div(2);return this._move([R,O],F,p)}}},ta.prototype.touchend=function(p,v,g){if(this._firstTwoTouches){var w=this._firstTwoTouches,C=w[1],R=Nc(g,v,w[0]),O=Nc(g,v,C);R&&O||(this._active&&X.suppressClick(),this.reset())}},ta.prototype.touchcancel=function(){this.reset()},ta.prototype.enable=function(p){this._enabled=!0,this._aroundCenter=!!p&&"center"===p.around},ta.prototype.disable=function(){this._enabled=!1,this.reset()},ta.prototype.isEnabled=function(){return this._enabled},ta.prototype.isActive=function(){return this._active};var sh=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.reset=function(){p.prototype.reset.call(this),delete this._distance,delete this._startDistance},v.prototype._start=function(g){this._startDistance=this._distance=g[0].dist(g[1])},v.prototype._move=function(g,w){var C=this._distance;if(this._distance=g[0].dist(g[1]),this._active||!(Math.abs(ah(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ah(this._distance,C),pinchAround:w}},v}(ta);function yo(p,v){return 180*p.angleWith(v)/Math.PI}var Pu=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.reset=function(){p.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},v.prototype._start=function(g){this._startVector=this._vector=g[0].sub(g[1]),this._minDiameter=g[0].dist(g[1])},v.prototype._move=function(g,w){var C=this._vector;if(this._vector=g[0].sub(g[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:yo(this._vector,C),pinchAround:w}},v.prototype._isBelowThreshold=function(g){this._minDiameter=Math.min(this._minDiameter,g.mag());var w=25/(Math.PI*this._minDiameter)*360,C=yo(g,this._startVector);return Math.abs(C)<w},v}(ta);function na(p){return Math.abs(p.y)>Math.abs(p.x)}var Lc=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.reset=function(){p.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},v.prototype._start=function(g){this._lastPoints=g,na(g[0].sub(g[1]))&&(this._valid=!1)},v.prototype._move=function(g,w,C){var R=g[0].sub(this._lastPoints[0]),O=g[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(R,O,C.timeStamp),this._valid)return this._lastPoints=g,this._active=!0,{pitchDelta:(R.y+O.y)/2*-.5}},v.prototype.gestureBeginsVertically=function(g,w,C){if(void 0!==this._valid)return this._valid;var R=g.mag()>=2,O=w.mag()>=2;if(R||O){if(!R||!O)return void 0===this._firstMove&&(this._firstMove=C),C-this._firstMove<100&&void 0;var F=g.y>0==w.y>0;return na(g)&&na(w)&&F}},v}(ta),uh={panStep:100,bearingStep:15,pitchStep:10},Ca=function(){var p=uh;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1};function Tp(p){return p*(2-p)}Ca.prototype.reset=function(){this._active=!1},Ca.prototype.keydown=function(p){var v=this;if(!(p.altKey||p.ctrlKey||p.metaKey)){var g=0,w=0,C=0,R=0,O=0;switch(p.keyCode){case 61:case 107:case 171:case 187:g=1;break;case 189:case 109:case 173:g=-1;break;case 37:p.shiftKey?w=-1:(p.preventDefault(),R=-1);break;case 39:p.shiftKey?w=1:(p.preventDefault(),R=1);break;case 38:p.shiftKey?C=1:(p.preventDefault(),O=-1);break;case 40:p.shiftKey?C=-1:(p.preventDefault(),O=1);break;default:return}return this._rotationDisabled&&(w=0,C=0),{cameraAnimation:function(F){var Y=F.getZoom();F.easeTo({duration:300,easeId:"keyboardHandler",easing:Tp,zoom:g?Math.round(Y)+g*(p.shiftKey?2:1):Y,bearing:F.getBearing()+w*v._bearingStep,pitch:F.getPitch()+C*v._pitchStep,offset:[-R*v._panStep,-O*v._panStep],center:F.getCenter()},{originalEvent:p})}}}},Ca.prototype.enable=function(){this._enabled=!0},Ca.prototype.disable=function(){this._enabled=!1,this.reset()},Ca.prototype.isEnabled=function(){return this._enabled},Ca.prototype.isActive=function(){return this._active},Ca.prototype.disableRotation=function(){this._rotationDisabled=!0},Ca.prototype.enableRotation=function(){this._rotationDisabled=!1};var ci=function(p,v){this._map=p,this._el=p.getCanvasContainer(),this._handler=v,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,b.bindAll(["_onTimeout"],this)};ci.prototype.setZoomRate=function(p){this._defaultZoomRate=p},ci.prototype.setWheelZoomRate=function(p){this._wheelZoomRate=p},ci.prototype.isEnabled=function(){return!!this._enabled},ci.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},ci.prototype.isZooming=function(){return!!this._zooming},ci.prototype.enable=function(p){this.isEnabled()||(this._enabled=!0,this._aroundCenter=p&&"center"===p.around)},ci.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ci.prototype.wheel=function(p){if(this.isEnabled()){var v=p.deltaMode===b.window.WheelEvent.DOM_DELTA_LINE?40*p.deltaY:p.deltaY,g=b.browser.now(),w=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,0!==v&&v%4.000244140625==0?this._type="wheel":0!==v&&Math.abs(v)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=v,this._timeout=setTimeout(this._onTimeout,40,p)):this._type||(this._type=Math.abs(w*v)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,v+=this._lastValue)),p.shiftKey&&v&&(v/=4),this._type&&(this._lastWheelEvent=p,this._delta-=v,this._active||this._start(p)),p.preventDefault()}},ci.prototype._onTimeout=function(p){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},ci.prototype._start=function(p){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var v=X.mousePos(this._el,p);this._around=b.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(v)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ci.prototype.renderFrame=function(){var p=this;if(this._frameId&&(this._frameId=null,this.isActive())){var v=this._map.transform;if(0!==this._delta){var g="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,w=2/(1+Math.exp(-Math.abs(this._delta*g)));this._delta<0&&0!==w&&(w=1/w);var C="number"==typeof this._targetZoom?v.zoomScale(this._targetZoom):v.scale;this._targetZoom=Math.min(v.maxZoom,Math.max(v.minZoom,v.scaleZoom(C*w))),"wheel"===this._type&&(this._startZoom=v.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var R,O="number"==typeof this._targetZoom?this._targetZoom:v.zoom,F=this._startZoom,Y=this._easing,ae=!1;if("wheel"===this._type&&F&&Y){var be=Math.min((b.browser.now()-this._lastWheelEventTime)/200,1),Ce=Y(be);R=b.number(F,O,Ce),be<1?this._frameId||(this._frameId=!0):ae=!0}else R=O,ae=!0;return this._active=!0,ae&&(this._active=!1,this._finishTimeout=setTimeout(function(){p._zooming=!1,p._handler._triggerRenderFrame(),delete p._targetZoom,delete p._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ae,zoomDelta:R-v.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ci.prototype._smoothOutEasing=function(p){var v=b.ease;if(this._prevEase){var g=this._prevEase,w=(b.browser.now()-g.start)/g.duration,C=g.easing(w+.01)-g.easing(w),R=.27/Math.sqrt(C*C+1e-4)*.01,O=Math.sqrt(.0729-R*R);v=b.bezier(R,O,.25,1)}return this._prevEase={start:b.browser.now(),duration:p,easing:v},v},ci.prototype.reset=function(){this._active=!1};var Er=function(p,v){this._clickZoom=p,this._tapZoom=v};Er.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Er.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Er.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Er.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Ha=function(){this.reset()};Ha.prototype.reset=function(){this._active=!1},Ha.prototype.dblclick=function(p,v){return p.preventDefault(),{cameraAnimation:function(g){g.easeTo({duration:300,zoom:g.getZoom()+(p.shiftKey?-1:1),around:g.unproject(v)},{originalEvent:p})}}},Ha.prototype.enable=function(){this._enabled=!0},Ha.prototype.disable=function(){this._enabled=!1,this.reset()},Ha.prototype.isEnabled=function(){return this._enabled},Ha.prototype.isActive=function(){return this._active};var Uo=function(){this._tap=new cl({numTouches:1,numTaps:1}),this.reset()};Uo.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Uo.prototype.touchstart=function(p,v,g){this._swipePoint||(this._tapTime&&p.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=v[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(p,v,g))},Uo.prototype.touchmove=function(p,v,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;var w=v[0],C=w.y-this._swipePoint.y;return this._swipePoint=w,p.preventDefault(),this._active=!0,{zoomDelta:C/128}}}else this._tap.touchmove(p,v,g)},Uo.prototype.touchend=function(p,v,g){this._tapTime?this._swipePoint&&0===g.length&&this.reset():this._tap.touchend(p,v,g)&&(this._tapTime=p.timeStamp)},Uo.prototype.touchcancel=function(){this.reset()},Uo.prototype.enable=function(){this._enabled=!0},Uo.prototype.disable=function(){this._enabled=!1,this.reset()},Uo.prototype.isEnabled=function(){return this._enabled},Uo.prototype.isActive=function(){return this._active};var $a=function(p,v,g){this._el=p,this._mousePan=v,this._touchPan=g};$a.prototype.enable=function(p){this._inertiaOptions=p||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")},$a.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")},$a.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},$a.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var ri=function(p,v,g){this._pitchWithRotate=p.pitchWithRotate,this._mouseRotate=v,this._mousePitch=g};ri.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},ri.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},ri.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},ri.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ls=function(p,v,g,w){this._el=p,this._touchZoom=v,this._touchRotate=g,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0};ls.prototype.enable=function(p){this._touchZoom.enable(p),this._rotationDisabled||this._touchRotate.enable(p),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")},ls.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")},ls.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ls.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ls.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ls.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Iu=function(p){return p.zoom||p.drag||p.pitch||p.rotate},Nr=function(p){function v(){p.apply(this,arguments)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v}(b.Event);function dl(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}var Zt=function(p,v){this._map=p,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new zd(p),this._bearingSnap=v.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(v),b.bindAll(["handleEvent","handleWindowEvent"],this);var g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[b.window.document,"mousemove",{capture:!0}],[b.window.document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[b.window,"blur",void 0]];for(var w=0,C=this._listeners;w<C.length;w+=1){var R=C[w],O=R[0];X.addEventListener(O,R[1],O===b.window.document?this.handleWindowEvent:this.handleEvent,R[2])}};Zt.prototype.destroy=function(){for(var p=0,v=this._listeners;p<v.length;p+=1){var g=v[p],w=g[0];X.removeEventListener(w,g[1],w===b.window.document?this.handleWindowEvent:this.handleEvent,g[2])}},Zt.prototype._addDefaultHandlers=function(p){var v=this._map,g=v.getCanvasContainer();this._add("mapEvent",new lo(v,p));var w=v.boxZoom=new Yt(v,p);this._add("boxZoom",w);var C=new Sa,R=new Ha;v.doubleClickZoom=new Er(R,C),this._add("tapZoom",C),this._add("clickZoom",R);var O=new Uo;this._add("tapDragZoom",O);var F=v.touchPitch=new Lc;this._add("touchPitch",F);var Y=new Ms(p),ae=new Mc(p);v.dragRotate=new ri(p,Y,ae),this._add("mouseRotate",Y,["mousePitch"]),this._add("mousePitch",ae,["mouseRotate"]);var be=new Qt(p),Ce=new Ga(p);v.dragPan=new $a(g,be,Ce),this._add("mousePan",be),this._add("touchPan",Ce,["touchZoom","touchRotate"]);var Ee=new Pu,Ne=new sh;v.touchZoomRotate=new ls(g,Ne,Ee,O),this._add("touchRotate",Ee,["touchPan","touchZoom"]),this._add("touchZoom",Ne,["touchPan","touchRotate"]);var ke=v.scrollZoom=new ci(v,this);this._add("scrollZoom",ke,["mousePan"]);var Ve=v.keyboard=new Ca;this._add("keyboard",Ve),this._add("blockableMapEvent",new Ea(v));for(var De=0,qe=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];De<qe.length;De+=1){var Qe=qe[De];p.interactive&&p[Qe]&&v[Qe].enable(p[Qe])}},Zt.prototype._add=function(p,v,g){this._handlers.push({handlerName:p,handler:v,allowed:g}),this._handlersById[p]=v},Zt.prototype.stop=function(p){if(!this._updatingCamera){for(var v=0,g=this._handlers;v<g.length;v+=1)g[v].handler.reset();this._inertia.clear(),this._fireEvents({},{},p),this._changes=[]}},Zt.prototype.isActive=function(){for(var p=0,v=this._handlers;p<v.length;p+=1)if(v[p].handler.isActive())return!0;return!1},Zt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Zt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Zt.prototype.isMoving=function(){return Boolean(Iu(this._eventsInProgress))||this.isZooming()},Zt.prototype._blockedByActive=function(p,v,g){for(var w in p)if(w!==g&&(!v||v.indexOf(w)<0))return!0;return!1},Zt.prototype.handleWindowEvent=function(p){this.handleEvent(p,p.type+"Window")},Zt.prototype._getMapTouches=function(p){for(var v=[],g=0,w=p;g<w.length;g+=1){var C=w[g];this._el.contains(C.target)&&v.push(C)}return v},Zt.prototype.handleEvent=function(p,v){if("blur"!==p.type){this._updatingCamera=!0;for(var g="renderFrame"===p.type?void 0:p,w={needsRenderFrame:!1},C={},R={},O=p.touches?this._getMapTouches(p.touches):void 0,F=O?X.touchPos(this._el,O):X.mousePos(this._el,p),Y=0,ae=this._handlers;Y<ae.length;Y+=1){var be=ae[Y],Ce=be.handlerName,Ee=be.handler,Ne=be.allowed;if(Ee.isEnabled()){var ke=void 0;this._blockedByActive(R,Ne,Ce)?Ee.reset():Ee[v||p.type]&&(ke=Ee[v||p.type](p,F,O),this.mergeHandlerResult(w,C,ke,Ce,g),ke&&ke.needsRenderFrame&&this._triggerRenderFrame()),(ke||Ee.isActive())&&(R[Ce]=Ee)}}var Ve={};for(var De in this._previousActiveHandlers)R[De]||(Ve[De]=g);this._previousActiveHandlers=R,(Object.keys(Ve).length||dl(w))&&(this._changes.push([w,C,Ve]),this._triggerRenderFrame()),(Object.keys(R).length||dl(w))&&this._map._stop(!0),this._updatingCamera=!1;var qe=w.cameraAnimation;qe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],qe(this._map))}else this.stop(!0)},Zt.prototype.mergeHandlerResult=function(p,v,g,w,C){if(g){b.extend(p,g);var R={handlerName:w,originalEvent:g.originalEvent||C};void 0!==g.zoomDelta&&(v.zoom=R),void 0!==g.panDelta&&(v.drag=R),void 0!==g.pitchDelta&&(v.pitch=R),void 0!==g.bearingDelta&&(v.rotate=R)}},Zt.prototype._applyChanges=function(){for(var p={},v={},g={},w=0,C=this._changes;w<C.length;w+=1){var R=C[w],O=R[0],F=R[1],Y=R[2];O.panDelta&&(p.panDelta=(p.panDelta||new b.Point(0,0))._add(O.panDelta)),O.zoomDelta&&(p.zoomDelta=(p.zoomDelta||0)+O.zoomDelta),O.bearingDelta&&(p.bearingDelta=(p.bearingDelta||0)+O.bearingDelta),O.pitchDelta&&(p.pitchDelta=(p.pitchDelta||0)+O.pitchDelta),void 0!==O.around&&(p.around=O.around),void 0!==O.pinchAround&&(p.pinchAround=O.pinchAround),O.noInertia&&(p.noInertia=O.noInertia),b.extend(v,F),b.extend(g,Y)}this._updateMapTransform(p,v,g),this._changes=[]},Zt.prototype._updateMapTransform=function(p,v,g){var w=this._map,C=w.transform;if(!dl(p))return this._fireEvents(v,g,!0);var R=p.panDelta,O=p.zoomDelta,F=p.bearingDelta,Y=p.pitchDelta,ae=p.around,be=p.pinchAround;void 0!==be&&(ae=be),w._stop(!0),ae=ae||w.transform.centerPoint;var Ce=C.pointLocation(R?ae.sub(R):ae);F&&(C.bearing+=F),Y&&(C.pitch+=Y),O&&(C.zoom+=O),C.setLocationAtPoint(Ce,ae),this._map._update(),p.noInertia||this._inertia.record(p),this._fireEvents(v,g,!0)},Zt.prototype._fireEvents=function(p,v,g){var w=this,C=Iu(this._eventsInProgress),R=Iu(p),O={};for(var F in p)this._eventsInProgress[F]||(O[F+"start"]=p[F].originalEvent),this._eventsInProgress[F]=p[F];for(var Y in!C&&R&&this._fireEvent("movestart",R.originalEvent),O)this._fireEvent(Y,O[Y]);for(var ae in R&&this._fireEvent("move",R.originalEvent),p)this._fireEvent(ae,p[ae].originalEvent);var be,Ce={};for(var Ee in this._eventsInProgress){var Ne=this._eventsInProgress[Ee],ke=Ne.handlerName,Ve=Ne.originalEvent;this._handlersById[ke].isActive()||(delete this._eventsInProgress[Ee],Ce[Ee+"end"]=be=v[ke]||Ve)}for(var De in Ce)this._fireEvent(De,Ce[De]);var qe=Iu(this._eventsInProgress);if(g&&(C||R)&&!qe){this._updatingCamera=!0;var Qe=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),rt=function(ht){return 0!==ht&&-w._bearingSnap<ht&&ht<w._bearingSnap};Qe?(rt(Qe.bearing||this._map.getBearing())&&(Qe.bearing=0),this._map.easeTo(Qe,{originalEvent:be})):(this._map.fire(new b.Event("moveend",{originalEvent:be})),rt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Zt.prototype._fireEvent=function(p,v){this._map.fire(new b.Event(p,v?{originalEvent:v}:{}))},Zt.prototype._requestFrame=function(){var p=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(v){delete p._frameId,p.handleEvent(new Nr("renderFrame",{timeStamp:v})),p._applyChanges()})},Zt.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var vn=function(p){function v(g,w){p.call(this),this._moving=!1,this._zooming=!1,this.transform=g,this._bearingSnap=w.bearingSnap,b.bindAll(["_renderFrameCallback"],this)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.getCenter=function(){return new b.LngLat(this.transform.center.lng,this.transform.center.lat)},v.prototype.setCenter=function(g,w){return this.jumpTo({center:g},w)},v.prototype.panBy=function(g,w,C){return g=b.Point.convert(g).mult(-1),this.panTo(this.transform.center,b.extend({offset:g},w),C)},v.prototype.panTo=function(g,w,C){return this.easeTo(b.extend({center:g},w),C)},v.prototype.getZoom=function(){return this.transform.zoom},v.prototype.setZoom=function(g,w){return this.jumpTo({zoom:g},w),this},v.prototype.zoomTo=function(g,w,C){return this.easeTo(b.extend({zoom:g},w),C)},v.prototype.zoomIn=function(g,w){return this.zoomTo(this.getZoom()+1,g,w),this},v.prototype.zoomOut=function(g,w){return this.zoomTo(this.getZoom()-1,g,w),this},v.prototype.getBearing=function(){return this.transform.bearing},v.prototype.setBearing=function(g,w){return this.jumpTo({bearing:g},w),this},v.prototype.getPadding=function(){return this.transform.padding},v.prototype.setPadding=function(g,w){return this.jumpTo({padding:g},w),this},v.prototype.rotateTo=function(g,w,C){return this.easeTo(b.extend({bearing:g},w),C)},v.prototype.resetNorth=function(g,w){return this.rotateTo(0,b.extend({duration:1e3},g),w),this},v.prototype.resetNorthPitch=function(g,w){return this.easeTo(b.extend({bearing:0,pitch:0,duration:1e3},g),w),this},v.prototype.snapToNorth=function(g,w){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(g,w):this},v.prototype.getPitch=function(){return this.transform.pitch},v.prototype.setPitch=function(g,w){return this.jumpTo({pitch:g},w),this},v.prototype.cameraForBounds=function(g,w){g=b.LngLatBounds.convert(g);var C=w&&w.bearing||0;return this._cameraForBoxAndBearing(g.getNorthWest(),g.getSouthEast(),C,w)},v.prototype._cameraForBoxAndBearing=function(g,w,C,R){var O={top:0,bottom:0,right:0,left:0};if("number"==typeof(R=b.extend({padding:O,offset:[0,0],maxZoom:this.transform.maxZoom},R)).padding){var F=R.padding;R.padding={top:F,bottom:F,right:F,left:F}}R.padding=b.extend(O,R.padding);var Y=this.transform,ae=Y.padding,be=Y.project(b.LngLat.convert(g)),Ce=Y.project(b.LngLat.convert(w)),Ee=be.rotate(-C*Math.PI/180),Ne=Ce.rotate(-C*Math.PI/180),ke=new b.Point(Math.max(Ee.x,Ne.x),Math.max(Ee.y,Ne.y)),Ve=new b.Point(Math.min(Ee.x,Ne.x),Math.min(Ee.y,Ne.y)),De=ke.sub(Ve),qe=(Y.width-(ae.left+ae.right+R.padding.left+R.padding.right))/De.x,Qe=(Y.height-(ae.top+ae.bottom+R.padding.top+R.padding.bottom))/De.y;if(!(Qe<0||qe<0)){var rt=Math.min(Y.scaleZoom(Y.scale*Math.min(qe,Qe)),R.maxZoom),ht="number"==typeof R.offset.x?new b.Point(R.offset.x,R.offset.y):b.Point.convert(R.offset),dt=new b.Point((R.padding.left-R.padding.right)/2,(R.padding.top-R.padding.bottom)/2).rotate(C*Math.PI/180),mt=ht.add(dt).mult(Y.scale/Y.zoomScale(rt));return{center:Y.unproject(be.add(Ce).div(2).sub(mt)),zoom:rt,bearing:C}}b.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},v.prototype.fitBounds=function(g,w,C){return this._fitInternal(this.cameraForBounds(g,w),w,C)},v.prototype.fitScreenCoordinates=function(g,w,C,R,O){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(b.Point.convert(g)),this.transform.pointLocation(b.Point.convert(w)),C,R),R,O)},v.prototype._fitInternal=function(g,w,C){return g?(delete(w=b.extend(g,w)).padding,w.linear?this.easeTo(w,C):this.flyTo(w,C)):this},v.prototype.jumpTo=function(g,w){this.stop();var C=this.transform,R=!1,O=!1,F=!1;return"zoom"in g&&C.zoom!==+g.zoom&&(R=!0,C.zoom=+g.zoom),void 0!==g.center&&(C.center=b.LngLat.convert(g.center)),"bearing"in g&&C.bearing!==+g.bearing&&(O=!0,C.bearing=+g.bearing),"pitch"in g&&C.pitch!==+g.pitch&&(F=!0,C.pitch=+g.pitch),null==g.padding||C.isPaddingEqual(g.padding)||(C.padding=g.padding),this.fire(new b.Event("movestart",w)).fire(new b.Event("move",w)),R&&this.fire(new b.Event("zoomstart",w)).fire(new b.Event("zoom",w)).fire(new b.Event("zoomend",w)),O&&this.fire(new b.Event("rotatestart",w)).fire(new b.Event("rotate",w)).fire(new b.Event("rotateend",w)),F&&this.fire(new b.Event("pitchstart",w)).fire(new b.Event("pitch",w)).fire(new b.Event("pitchend",w)),this.fire(new b.Event("moveend",w))},v.prototype.easeTo=function(g,w){var C=this;this._stop(!1,g.easeId),(!1===(g=b.extend({offset:[0,0],duration:500,easing:b.ease},g)).animate||!g.essential&&b.browser.prefersReducedMotion)&&(g.duration=0);var R=this.transform,O=this.getZoom(),F=this.getBearing(),Y=this.getPitch(),ae=this.getPadding(),be="zoom"in g?+g.zoom:O,Ce="bearing"in g?this._normalizeBearing(g.bearing,F):F,Ee="pitch"in g?+g.pitch:Y,Ne="padding"in g?g.padding:R.padding,ke=b.Point.convert(g.offset),Ve=R.centerPoint.add(ke),De=R.pointLocation(Ve),qe=b.LngLat.convert(g.center||De);this._normalizeCenter(qe);var Qe,rt,ht=R.project(De),dt=R.project(qe).sub(ht),mt=R.zoomScale(be-O);g.around&&(Qe=b.LngLat.convert(g.around),rt=R.locationPoint(Qe));var Tt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||be!==O,this._rotating=this._rotating||F!==Ce,this._pitching=this._pitching||Ee!==Y,this._padding=!R.isPaddingEqual(Ne),this._easeId=g.easeId,this._prepareEase(w,g.noMoveStart,Tt),this._ease(function(kt){if(C._zooming&&(R.zoom=b.number(O,be,kt)),C._rotating&&(R.bearing=b.number(F,Ce,kt)),C._pitching&&(R.pitch=b.number(Y,Ee,kt)),C._padding&&(R.interpolatePadding(ae,Ne,kt),Ve=R.centerPoint.add(ke)),Qe)R.setLocationAtPoint(Qe,rt);else{var Ot=R.zoomScale(R.zoom-O),Lt=be>O?Math.min(2,mt):Math.max(.5,mt),fn=Math.pow(Lt,1-kt),pn=R.unproject(ht.add(dt.mult(kt*fn)).mult(Ot));R.setLocationAtPoint(R.renderWorldCopies?pn.wrap():pn,Ve)}C._fireMoveEvents(w)},function(kt){C._afterEase(w,kt)},g),this},v.prototype._prepareEase=function(g,w,C){void 0===C&&(C={}),this._moving=!0,w||C.moving||this.fire(new b.Event("movestart",g)),this._zooming&&!C.zooming&&this.fire(new b.Event("zoomstart",g)),this._rotating&&!C.rotating&&this.fire(new b.Event("rotatestart",g)),this._pitching&&!C.pitching&&this.fire(new b.Event("pitchstart",g))},v.prototype._fireMoveEvents=function(g){this.fire(new b.Event("move",g)),this._zooming&&this.fire(new b.Event("zoom",g)),this._rotating&&this.fire(new b.Event("rotate",g)),this._pitching&&this.fire(new b.Event("pitch",g))},v.prototype._afterEase=function(g,w){if(!this._easeId||!w||this._easeId!==w){delete this._easeId;var C=this._zooming,R=this._rotating,O=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,C&&this.fire(new b.Event("zoomend",g)),R&&this.fire(new b.Event("rotateend",g)),O&&this.fire(new b.Event("pitchend",g)),this.fire(new b.Event("moveend",g))}},v.prototype.flyTo=function(g,w){var C=this;if(!g.essential&&b.browser.prefersReducedMotion){var R=b.pick(g,["center","zoom","bearing","pitch","around"]);return this.jumpTo(R,w)}this.stop(),g=b.extend({offset:[0,0],speed:1.2,curve:1.42,easing:b.ease},g);var O=this.transform,F=this.getZoom(),Y=this.getBearing(),ae=this.getPitch(),be=this.getPadding(),Ce="zoom"in g?b.clamp(+g.zoom,O.minZoom,O.maxZoom):F,Ee="bearing"in g?this._normalizeBearing(g.bearing,Y):Y,Ne="pitch"in g?+g.pitch:ae,ke="padding"in g?g.padding:O.padding,Ve=O.zoomScale(Ce-F),De=b.Point.convert(g.offset),qe=O.centerPoint.add(De),Qe=O.pointLocation(qe),rt=b.LngLat.convert(g.center||Qe);this._normalizeCenter(rt);var ht=O.project(Qe),dt=O.project(rt).sub(ht),mt=g.curve,Tt=Math.max(O.width,O.height),kt=Tt/Ve,Ot=dt.mag();if("minZoom"in g){var Lt=b.clamp(Math.min(g.minZoom,F,Ce),O.minZoom,O.maxZoom),fn=Tt/O.zoomScale(Lt-F);mt=Math.sqrt(fn/Ot*2)}var pn=mt*mt;function hn(bn){var mn=(kt*kt-Tt*Tt+(bn?-1:1)*pn*pn*Ot*Ot)/(2*(bn?kt:Tt)*pn*Ot);return Math.log(Math.sqrt(mn*mn+1)-mn)}function gr(bn){return(Math.exp(bn)-Math.exp(-bn))/2}function en(bn){return(Math.exp(bn)+Math.exp(-bn))/2}var Rn=hn(0),Mn=function(bn){return en(Rn)/en(Rn+mt*bn)},Pn=function(bn){return Tt*((en(Rn)*(gr(mn=Rn+mt*bn)/en(mn))-gr(Rn))/pn)/Ot;var mn},xn=(hn(1)-Rn)/mt;if(Math.abs(Ot)<1e-6||!isFinite(xn)){if(Math.abs(Tt-kt)<1e-6)return this.easeTo(g,w);var En=kt<Tt?-1:1;xn=Math.abs(Math.log(kt/Tt))/mt,Pn=function(){return 0},Mn=function(bn){return Math.exp(En*mt*bn)}}return g.duration="duration"in g?+g.duration:1e3*xn/("screenSpeed"in g?+g.screenSpeed/mt:+g.speed),g.maxDuration&&g.duration>g.maxDuration&&(g.duration=0),this._zooming=!0,this._rotating=Y!==Ee,this._pitching=Ne!==ae,this._padding=!O.isPaddingEqual(ke),this._prepareEase(w,!1),this._ease(function(bn){var mn=bn*xn,vr=1/Mn(mn);O.zoom=1===bn?Ce:F+O.scaleZoom(vr),C._rotating&&(O.bearing=b.number(Y,Ee,bn)),C._pitching&&(O.pitch=b.number(ae,Ne,bn)),C._padding&&(O.interpolatePadding(be,ke,bn),qe=O.centerPoint.add(De));var ai=1===bn?rt:O.unproject(ht.add(dt.mult(Pn(mn))).mult(vr));O.setLocationAtPoint(O.renderWorldCopies?ai.wrap():ai,qe),C._fireMoveEvents(w)},function(){return C._afterEase(w)},g),this},v.prototype.isEasing=function(){return!!this._easeFrameId},v.prototype.stop=function(){return this._stop()},v.prototype._stop=function(g,w){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var C=this._onEaseEnd;delete this._onEaseEnd,C.call(this,w)}if(!g){var R=this.handlers;R&&R.stop(!1)}return this},v.prototype._ease=function(g,w,C){!1===C.animate||0===C.duration?(g(1),w()):(this._easeStart=b.browser.now(),this._easeOptions=C,this._onEaseFrame=g,this._onEaseEnd=w,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},v.prototype._renderFrameCallback=function(){var g=Math.min((b.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(g)),g<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},v.prototype._normalizeBearing=function(g,w){g=b.wrap(g,-180,180);var C=Math.abs(g-w);return Math.abs(g-360-w)<C&&(g-=360),Math.abs(g+360-w)<C&&(g+=360),g},v.prototype._normalizeCenter=function(g){var w=this.transform;if(w.renderWorldCopies&&!w.lngRange){var C=g.lng-w.center.lng;g.lng+=C>180?-360:C<-180?360:0}},v}(b.Evented),pi=function(p){void 0===p&&(p={}),this.options=p,b.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};pi.prototype.getDefaultPosition=function(){return"bottom-right"},pi.prototype.onAdd=function(p){var v=this.options&&this.options.compact;return this._map=p,this._container=X.create("div","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=X.create("button","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.type="button",this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=X.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),v&&this._container.classList.add("maplibregl-compact","mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===v&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},pi.prototype.onRemove=function(){X.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},pi.prototype._setElementTitle=function(p,v){var g=this._map._getUIString("AttributionControl."+v);p.title=g,p.setAttribute("aria-label",g)},pi.prototype._toggleAttribution=function(){this._container.classList.contains("maplibregl-compact-show")||this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},pi.prototype._updateEditLink=function(){var p=this._editLink;p||(p=this._editLink=this._container.querySelector(".mapbox-improve-map"));var v=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||b.config.ACCESS_TOKEN}];if(p){var g=v.reduce(function(w,C,R){return C.value&&(w+=C.key+"="+C.value+(R<v.length-1?"&":"")),w},"?");p.href=b.config.FEEDBACK_URL+"/"+g+(this._map._hash?this._map._hash.getHashString(!0):""),p.rel="noopener nofollow",this._setElementTitle(p,"MapFeedback")}},pi.prototype._updateData=function(p){!p||"metadata"!==p.sourceDataType&&"visibility"!==p.sourceDataType&&"style"!==p.dataType||(this._updateAttributions(),this._updateEditLink())},pi.prototype._updateAttributions=function(){if(this._map.style){var p=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?p=p.concat(this.options.customAttribution.map(function(F){return"string"!=typeof F?"":F})):"string"==typeof this.options.customAttribution&&p.push(this.options.customAttribution)),this._map.style.stylesheet){var v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}var g=this._map.style.sourceCaches;for(var w in g){var C=g[w];if(C.used){var R=C.getSource();R.attribution&&p.indexOf(R.attribution)<0&&p.push(R.attribution)}}p.sort(function(F,Y){return F.length-Y.length});var O=(p=p.filter(function(F,Y){for(var ae=Y+1;ae<p.length;ae++)if(p[ae].indexOf(F)>=0)return!1;return!0})).join(" | ");O!==this._attribHTML&&(this._attribHTML=O,p.length?(this._innerContainer.innerHTML=O,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._editLink=null)}},pi.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("maplibregl-compact","mapboxgl-compact"):this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show")};var Ka=function(){b.bindAll(["_updateLogo"],this),b.bindAll(["_updateCompact"],this)};Ka.prototype.onAdd=function(p){this._map=p,this._container=X.create("div","maplibregl-ctrl mapboxgl-ctrl");var v=X.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return v.target="_blank",v.rel="noopener nofollow",v.href="https://maplibre.org/",v.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),v.setAttribute("rel","noopener nofollow"),this._container.appendChild(v),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ka.prototype.onRemove=function(){X.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ka.prototype.getDefaultPosition=function(){return"bottom-left"},Ka.prototype._updateLogo=function(p){p&&"metadata"!==p.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Ka.prototype._logoRequired=function(){if(this._map.style){var p=this._map.style.sourceCaches;for(var v in p)if(p[v].getSource().mapbox_logo)return!0;return!1}},Ka.prototype._updateCompact=function(){var p=this._container.children;if(p.length){var v=p[0];this._map.getCanvasContainer().offsetWidth<250?v.classList.add("maplibregl-compact","mapboxgl-compact"):v.classList.remove("maplibregl-compact","mapboxgl-compact")}};var cs=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};cs.prototype.add=function(p){var v=++this._id;return this._queue.push({callback:p,id:v,cancelled:!1}),v},cs.prototype.remove=function(p){for(var v=this._currentlyRunning,g=0,w=v?this._queue.concat(v):this._queue;g<w.length;g+=1){var C=w[g];if(C.id===p)return void(C.cancelled=!0)}},cs.prototype.run=function(p){void 0===p&&(p=0);var v=this._currentlyRunning=this._queue;this._queue=[];for(var g=0,w=v;g<w.length;g+=1){var C=w[g];if(!C.cancelled&&(C.callback(p),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},cs.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ro={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},bi=b.window.HTMLImageElement,Pp=b.window.HTMLElement,ds=b.window.ImageBitmap,Zr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},di=function(p){function v(w){var C=this;if(null!=(w=b.extend({},Zr,w)).minZoom&&null!=w.maxZoom&&w.minZoom>w.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=w.minPitch&&null!=w.maxPitch&&w.minPitch>w.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=w.minPitch&&w.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=w.maxPitch&&w.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var R=new Ur(w.minZoom,w.maxZoom,w.minPitch,w.maxPitch,w.renderWorldCopies);if(p.call(this,R,w),this._interactive=w.interactive,this._maxTileCacheSize=w.maxTileCacheSize,this._failIfMajorPerformanceCaveat=w.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=w.preserveDrawingBuffer,this._antialias=w.antialias,this._trackResize=w.trackResize,this._bearingSnap=w.bearingSnap,this._refreshExpiredTiles=w.refreshExpiredTiles,this._fadeDuration=w.fadeDuration,this._crossSourceCollisions=w.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=w.collectResourceTiming,this._renderTaskQueue=new cs,this._controls=[],this._mapId=b.uniqueId(),this._locale=b.extend({},ro,w.locale),this._clickTolerance=w.clickTolerance,this._requestManager=new b.RequestManager(w.transformRequest,w.accessToken),"string"==typeof w.container){if(this._container=b.window.document.getElementById(w.container),!this._container)throw new Error("Container '"+w.container+"' not found.")}else{if(!(w.container instanceof Pp))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=w.container}if(w.maxBounds&&this.setMaxBounds(w.maxBounds),b.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return C._update(!1)}),this.on("moveend",function(){return C._update(!1)}),this.on("zoom",function(){return C._update(!0)}),void 0!==b.window&&(b.window.addEventListener("online",this._onWindowOnline,!1),b.window.addEventListener("resize",this._onWindowResize,!1),b.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Zt(this,w),this._hash=w.hash&&new ll("string"==typeof w.hash&&w.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:w.center,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch}),w.bounds&&(this.resize(),this.fitBounds(w.bounds,b.extend({},w.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=w.localIdeographFontFamily,w.style&&this.setStyle(w.style,{localIdeographFontFamily:w.localIdeographFontFamily}),w.attributionControl&&this.addControl(new pi({customAttribution:w.customAttribution})),this.addControl(new Ka,w.logoPosition),this.on("style.load",function(){C.transform.unmodified&&C.jumpTo(C.style.stylesheet)}),this.on("data",function(O){C._update("style"===O.dataType),C.fire(new b.Event(O.dataType+"data",O))}),this.on("dataloading",function(O){C.fire(new b.Event(O.dataType+"dataloading",O))})}p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v;var g={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return v.prototype._getMapId=function(){return this._mapId},v.prototype.addControl=function(w,C){if(void 0===C&&(C=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new b.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var R=w.onAdd(this);this._controls.push(w);var O=this._controlPositions[C];return-1!==C.indexOf("bottom")?O.insertBefore(R,O.firstChild):O.appendChild(R),this},v.prototype.removeControl=function(w){if(!w||!w.onRemove)return this.fire(new b.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var C=this._controls.indexOf(w);return C>-1&&this._controls.splice(C,1),w.onRemove(this),this},v.prototype.hasControl=function(w){return this._controls.indexOf(w)>-1},v.prototype.resize=function(w){var C=this._containerDimensions(),R=C[0],O=C[1];this._resizeCanvas(R,O),this.transform.resize(R,O),this.painter.resize(R,O);var F=!this._moving;return F&&(this.stop(),this.fire(new b.Event("movestart",w)).fire(new b.Event("move",w))),this.fire(new b.Event("resize",w)),F&&this.fire(new b.Event("moveend",w)),this},v.prototype.getBounds=function(){return this.transform.getBounds()},v.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},v.prototype.setMaxBounds=function(w){return this.transform.setMaxBounds(b.LngLatBounds.convert(w)),this._update()},v.prototype.setMinZoom=function(w){if((w=null==w?-2:w)>=-2&&w<=this.transform.maxZoom)return this.transform.minZoom=w,this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},v.prototype.getMinZoom=function(){return this.transform.minZoom},v.prototype.setMaxZoom=function(w){if((w=null==w?22:w)>=this.transform.minZoom)return this.transform.maxZoom=w,this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")},v.prototype.getMaxZoom=function(){return this.transform.maxZoom},v.prototype.setMinPitch=function(w){if((w=null==w?0:w)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.minPitch=w,this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},v.prototype.getMinPitch=function(){return this.transform.minPitch},v.prototype.setMaxPitch=function(w){if((w=null==w?60:w)>60)throw new Error("maxPitch must be less than or equal to 60");if(w>=this.transform.minPitch)return this.transform.maxPitch=w,this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")},v.prototype.getMaxPitch=function(){return this.transform.maxPitch},v.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},v.prototype.setRenderWorldCopies=function(w){return this.transform.renderWorldCopies=w,this._update()},v.prototype.project=function(w){return this.transform.locationPoint(b.LngLat.convert(w))},v.prototype.unproject=function(w){return this.transform.pointLocation(b.Point.convert(w))},v.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},v.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},v.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},v.prototype._createDelegatedListener=function(w,C,R){var O,F=this;if("mouseenter"===w||"mouseover"===w){var Y=!1;return{layer:C,listener:R,delegates:{mousemove:function(be){var Ce=F.getLayer(C)?F.queryRenderedFeatures(be.point,{layers:[C]}):[];Ce.length?Y||(Y=!0,R.call(F,new Fo(w,F,be.originalEvent,{features:Ce}))):Y=!1},mouseout:function(){Y=!1}}}}if("mouseleave"===w||"mouseout"===w){var ae=!1;return{layer:C,listener:R,delegates:{mousemove:function(be){(F.getLayer(C)?F.queryRenderedFeatures(be.point,{layers:[C]}):[]).length?ae=!0:ae&&(ae=!1,R.call(F,new Fo(w,F,be.originalEvent)))},mouseout:function(be){ae&&(ae=!1,R.call(F,new Fo(w,F,be.originalEvent)))}}}}return{layer:C,listener:R,delegates:(O={},O[w]=function(be){var Ce=F.getLayer(C)?F.queryRenderedFeatures(be.point,{layers:[C]}):[];Ce.length&&(be.features=Ce,R.call(F,be),delete be.features)},O)}},v.prototype.on=function(w,C,R){if(void 0===R)return p.prototype.on.call(this,w,C);var O=this._createDelegatedListener(w,C,R);for(var F in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(O),O.delegates)this.on(F,O.delegates[F]);return this},v.prototype.once=function(w,C,R){if(void 0===R)return p.prototype.once.call(this,w,C);var O=this._createDelegatedListener(w,C,R);for(var F in O.delegates)this.once(F,O.delegates[F]);return this},v.prototype.off=function(w,C,R){var O=this;return void 0===R?p.prototype.off.call(this,w,C):(this._delegatedListeners&&this._delegatedListeners[w]&&function(F){for(var Y=F[w],ae=0;ae<Y.length;ae++){var be=Y[ae];if(be.layer===C&&be.listener===R){for(var Ce in be.delegates)O.off(Ce,be.delegates[Ce]);return Y.splice(ae,1),O}}}(this._delegatedListeners),this)},v.prototype.queryRenderedFeatures=function(w,C){if(!this.style)return[];var R;if(void 0!==C||void 0===w||w instanceof b.Point||Array.isArray(w)||(C=w,w=void 0),C=C||{},(w=w||[[0,0],[this.transform.width,this.transform.height]])instanceof b.Point||"number"==typeof w[0])R=[b.Point.convert(w)];else{var O=b.Point.convert(w[0]),F=b.Point.convert(w[1]);R=[O,new b.Point(F.x,O.y),F,new b.Point(O.x,F.y),O]}return this.style.queryRenderedFeatures(R,C,this.transform)},v.prototype.querySourceFeatures=function(w,C){return this.style.querySourceFeatures(w,C)},v.prototype.setStyle=function(w,C){return!1!==(C=b.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},C)).diff&&C.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,C),this):(this._localIdeographFontFamily=C.localIdeographFontFamily,this._updateStyle(w,C))},v.prototype.setTransformRequest=function(w){return this._requestManager.setTransformRequest(w),this},v.prototype._getUIString=function(w){var C=this._locale[w];if(null==C)throw new Error("Missing UI string '"+w+"'");return C},v.prototype._updateStyle=function(w,C){return this.style&&(this.style.setEventedParent(null),this.style._remove()),w?(this.style=new os(this,C||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof w?this.style.loadURL(w):this.style.loadJSON(w),this):(delete this.style,this)},v.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new os(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},v.prototype._diffStyle=function(w,C){var R=this;if("string"==typeof w){var O=this._requestManager.normalizeStyleURL(w),F=this._requestManager.transformRequest(O,b.ResourceType.Style);b.getJSON(F,function(Y,ae){Y?R.fire(new b.ErrorEvent(Y)):ae&&R._updateDiff(ae,C)})}else"object"==typeof w&&this._updateDiff(w,C)},v.prototype._updateDiff=function(w,C){try{this.style.setState(w)&&this._update(!0)}catch(R){b.warnOnce("Unable to perform style diff: "+(R.message||R.error||R)+".  Rebuilding the style from scratch."),this._updateStyle(w,C)}},v.prototype.getStyle=function(){if(this.style)return this.style.serialize()},v.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():b.warnOnce("There is no style added to the map.")},v.prototype.addSource=function(w,C){return this._lazyInitEmptyStyle(),this.style.addSource(w,C),this._update(!0)},v.prototype.isSourceLoaded=function(w){var C=this.style&&this.style.sourceCaches[w];if(void 0!==C)return C.loaded();this.fire(new b.ErrorEvent(new Error("There is no source with ID '"+w+"'")))},v.prototype.areTilesLoaded=function(){var w=this.style&&this.style.sourceCaches;for(var C in w){var R=w[C]._tiles;for(var O in R){var F=R[O];if("loaded"!==F.state&&"errored"!==F.state)return!1}}return!0},v.prototype.addSourceType=function(w,C,R){return this._lazyInitEmptyStyle(),this.style.addSourceType(w,C,R)},v.prototype.removeSource=function(w){return this.style.removeSource(w),this._update(!0)},v.prototype.getSource=function(w){return this.style.getSource(w)},v.prototype.addImage=function(w,C,R){void 0===R&&(R={});var O=R.pixelRatio;void 0===O&&(O=1);var F=R.sdf;void 0===F&&(F=!1);var Y=R.stretchX,ae=R.stretchY,be=R.content;if(this._lazyInitEmptyStyle(),C instanceof bi||ds&&C instanceof ds){var Ce=b.browser.getImageData(C);this.style.addImage(w,{data:new b.RGBAImage({width:Ce.width,height:Ce.height},Ce.data),pixelRatio:O,stretchX:Y,stretchY:ae,content:be,sdf:F,version:0})}else{if(void 0===C.width||void 0===C.height)return this.fire(new b.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Ee=C;this.style.addImage(w,{data:new b.RGBAImage({width:C.width,height:C.height},new Uint8Array(C.data)),pixelRatio:O,stretchX:Y,stretchY:ae,content:be,sdf:F,version:0,userImage:Ee}),Ee.onAdd&&Ee.onAdd(this,w)}},v.prototype.updateImage=function(w,C){var R=this.style.getImage(w);if(!R)return this.fire(new b.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var O=C instanceof bi||ds&&C instanceof ds?b.browser.getImageData(C):C,F=O.width,Y=O.height,ae=O.data;return void 0===F||void 0===Y?this.fire(new b.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):F!==R.data.width||Y!==R.data.height?this.fire(new b.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(R.data.replace(ae,!(C instanceof bi||ds&&C instanceof ds)),void this.style.updateImage(w,R))},v.prototype.hasImage=function(w){return w?!!this.style.getImage(w):(this.fire(new b.ErrorEvent(new Error("Missing required image id"))),!1)},v.prototype.removeImage=function(w){this.style.removeImage(w)},v.prototype.loadImage=function(w,C){b.getImage(this._requestManager.transformRequest(w,b.ResourceType.Image),C)},v.prototype.listImages=function(){return this.style.listImages()},v.prototype.addLayer=function(w,C){return this._lazyInitEmptyStyle(),this.style.addLayer(w,C),this._update(!0)},v.prototype.moveLayer=function(w,C){return this.style.moveLayer(w,C),this._update(!0)},v.prototype.removeLayer=function(w){return this.style.removeLayer(w),this._update(!0)},v.prototype.getLayer=function(w){return this.style.getLayer(w)},v.prototype.setLayerZoomRange=function(w,C,R){return this.style.setLayerZoomRange(w,C,R),this._update(!0)},v.prototype.setFilter=function(w,C,R){return void 0===R&&(R={}),this.style.setFilter(w,C,R),this._update(!0)},v.prototype.getFilter=function(w){return this.style.getFilter(w)},v.prototype.setPaintProperty=function(w,C,R,O){return void 0===O&&(O={}),this.style.setPaintProperty(w,C,R,O),this._update(!0)},v.prototype.getPaintProperty=function(w,C){return this.style.getPaintProperty(w,C)},v.prototype.setLayoutProperty=function(w,C,R,O){return void 0===O&&(O={}),this.style.setLayoutProperty(w,C,R,O),this._update(!0)},v.prototype.getLayoutProperty=function(w,C){return this.style.getLayoutProperty(w,C)},v.prototype.setLight=function(w,C){return void 0===C&&(C={}),this._lazyInitEmptyStyle(),this.style.setLight(w,C),this._update(!0)},v.prototype.getLight=function(){return this.style.getLight()},v.prototype.setFeatureState=function(w,C){return this.style.setFeatureState(w,C),this._update()},v.prototype.removeFeatureState=function(w,C){return this.style.removeFeatureState(w,C),this._update()},v.prototype.getFeatureState=function(w){return this.style.getFeatureState(w)},v.prototype.getContainer=function(){return this._container},v.prototype.getCanvasContainer=function(){return this._canvasContainer},v.prototype.getCanvas=function(){return this._canvas},v.prototype._containerDimensions=function(){var w=0,C=0;return this._container&&(w=this._container.clientWidth||400,C=this._container.clientHeight||300),[w,C]},v.prototype._setupContainer=function(){var w=this._container;w.classList.add("maplibregl-map","mapboxgl-map");var C=this._canvasContainer=X.create("div","maplibregl-canvas-container mapboxgl-canvas-container",w);this._interactive&&C.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=X.create("canvas","maplibregl-canvas mapboxgl-canvas",C),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var R=this._containerDimensions();this._resizeCanvas(R[0],R[1]);var O=this._controlContainer=X.create("div","maplibregl-control-container mapboxgl-control-container",w),F=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Y){F[Y]=X.create("div","maplibregl-ctrl-"+Y+" mapboxgl-ctrl-"+Y,O)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},v.prototype._resizeCanvas=function(w,C){var R=b.browser.devicePixelRatio||1;this._canvas.width=R*w,this._canvas.height=R*C,this._canvas.style.width=w+"px",this._canvas.style.height=C+"px"},v.prototype._setupPainter=function(){var w=b.extend({},H.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),C=this._canvas.getContext("webgl",w)||this._canvas.getContext("experimental-webgl",w);C?(this.painter=new Pr(C,this.transform),b.webpSupported.testSupport(C)):this.fire(new b.ErrorEvent(new Error("Failed to initialize WebGL")))},v.prototype._contextLost=function(w){w.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new b.Event("webglcontextlost",{originalEvent:w}))},v.prototype._contextRestored=function(w){this._setupPainter(),this.resize(),this._update(),this.fire(new b.Event("webglcontextrestored",{originalEvent:w}))},v.prototype._onMapScroll=function(w){if(w.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},v.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},v.prototype._update=function(w){return this.style?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this},v.prototype._requestRenderFrame=function(w){return this._update(),this._renderTaskQueue.add(w)},v.prototype._cancelRenderFrame=function(w){this._renderTaskQueue.remove(w)},v.prototype._render=function(w){var C,R=this,O=0,F=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(C=F.createQueryEXT(),F.beginQueryEXT(F.TIME_ELAPSED_EXT,C),O=b.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),!this._removed){var Y=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var ae=this.transform.zoom,be=b.browser.now();this.style.zoomHistory.update(ae,be);var Ce=new b.EvaluationParameters(ae,{now:be,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ee=Ce.crossFadingFactor();1===Ee&&Ee===this._crossFadingFactor||(Y=!0,this._crossFadingFactor=Ee),this.style.update(Ce)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new b.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new b.Event("load"))),this.style&&(this.style.hasTransitions()||Y)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Ne=b.browser.now()-O;F.endQueryEXT(F.TIME_ELAPSED_EXT,C),setTimeout(function(){var De=F.getQueryObjectEXT(C,F.QUERY_RESULT_EXT)/1e6;F.deleteQueryEXT(C),R.fire(new b.Event("gpu-timing-frame",{cpuTime:Ne,gpuTime:De}))},50)}if(this.listens("gpu-timing-layer")){var ke=this.painter.collectGpuTimers();setTimeout(function(){var De=R.painter.queryGpuTimers(ke);R.fire(new b.Event("gpu-timing-layer",{layerTimes:De}))},50)}var Ve=this._sourcesDirty||this._styleDirty||this._placementDirty;return Ve||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new b.Event("idle")),!this._loaded||this._fullyLoaded||Ve||(this._fullyLoaded=!0),this}},v.prototype.remove=function(){this._hash&&this._hash.remove();for(var w=0,C=this._controls;w<C.length;w+=1)C[w].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==b.window&&(b.window.removeEventListener("resize",this._onWindowResize,!1),b.window.removeEventListener("orientationchange",this._onWindowResize,!1),b.window.removeEventListener("online",this._onWindowOnline,!1));var R=this.painter.context.gl.getExtension("WEBGL_lose_context");R&&R.loseContext(),Ud(this._canvasContainer),Ud(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),this._removed=!0,this.fire(new b.Event("remove"))},v.prototype.triggerRepaint=function(){var w=this;this.style&&!this._frame&&(this._frame=b.browser.frame(function(C){w._frame=null,w._render(C)}))},v.prototype._onWindowOnline=function(){this._update()},v.prototype._onWindowResize=function(w){this._trackResize&&this.resize({originalEvent:w})._update()},g.showTileBoundaries.get=function(){return!!this._showTileBoundaries},g.showTileBoundaries.set=function(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())},g.showPadding.get=function(){return!!this._showPadding},g.showPadding.set=function(w){this._showPadding!==w&&(this._showPadding=w,this._update())},g.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},g.showCollisionBoxes.set=function(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())},g.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},g.showOverdrawInspector.set=function(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())},g.repaint.get=function(){return!!this._repaint},g.repaint.set=function(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())},g.vertices.get=function(){return!!this._vertices},g.vertices.set=function(w){this._vertices=w,this._update()},v.prototype._setCacheLimits=function(w,C){b.setCacheLimits(w,C)},g.version.get=function(){return b.version},Object.defineProperties(v.prototype,g),v}(vn);function Ud(p){p.parentNode&&p.parentNode.removeChild(p)}var fl={showCompass:!0,showZoom:!0,visualizePitch:!1},In=function(p){var v=this;this.options=b.extend({},fl,p),this._container=X.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(g){return g.preventDefault()}),this.options.showZoom&&(b.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",function(g){return v._map.zoomIn({},{originalEvent:g})}),X.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",function(g){return v._map.zoomOut({},{originalEvent:g})}),X.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(b.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",function(g){v.options.visualizePitch?v._map.resetNorthPitch({},{originalEvent:g}):v._map.resetNorth({},{originalEvent:g})}),this._compassIcon=X.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};In.prototype._updateZoomButtons=function(){var p=this._map.getZoom(),v=p===this._map.getMaxZoom(),g=p===this._map.getMinZoom();this._zoomInButton.disabled=v,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",v.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},In.prototype._rotateCompassArrow=function(){var p=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=p},In.prototype.onAdd=function(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ta(this._map,this._compass,this.options.visualizePitch)),this._container},In.prototype.onRemove=function(){X.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},In.prototype._createButton=function(p,v){var g=X.create("button",p,this._container);return g.type="button",g.addEventListener("click",v),g},In.prototype._setButtonTitle=function(p,v){var g=this._map._getUIString("NavigationControl."+v);p.title=g,p.setAttribute("aria-label",g)};var Ta=function(p,v,g){void 0===g&&(g=!1),this._clickTolerance=10,this.element=v,this.mouseRotate=new Ms({clickTolerance:p.dragRotate._mouseRotate._clickTolerance}),this.map=p,g&&(this.mousePitch=new Mc({clickTolerance:p.dragRotate._mousePitch._clickTolerance})),b.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),X.addEventListener(v,"mousedown",this.mousedown),X.addEventListener(v,"touchstart",this.touchstart,{passive:!1}),X.addEventListener(v,"touchmove",this.touchmove),X.addEventListener(v,"touchend",this.touchend),X.addEventListener(v,"touchcancel",this.reset)};function qd(p,v,g){if(p=new b.LngLat(p.lng,p.lat),v){var w=new b.LngLat(p.lng-360,p.lat),C=new b.LngLat(p.lng+360,p.lat),R=g.locationPoint(p).distSqr(v);g.locationPoint(w).distSqr(v)<R?p=w:g.locationPoint(C).distSqr(v)<R&&(p=C)}for(;Math.abs(p.lng-g.center.lng)>180;){var O=g.locationPoint(p);if(O.x>=0&&O.y>=0&&O.x<=g.width&&O.y<=g.height)break;p.lng>g.center.lng?p.lng-=360:p.lng+=360}return p}Ta.prototype.down=function(p,v){this.mouseRotate.mousedown(p,v),this.mousePitch&&this.mousePitch.mousedown(p,v),X.disableDrag()},Ta.prototype.move=function(p,v){var g=this.map,w=this.mouseRotate.mousemoveWindow(p,v);if(w&&w.bearingDelta&&g.setBearing(g.getBearing()+w.bearingDelta),this.mousePitch){var C=this.mousePitch.mousemoveWindow(p,v);C&&C.pitchDelta&&g.setPitch(g.getPitch()+C.pitchDelta)}},Ta.prototype.off=function(){var p=this.element;X.removeEventListener(p,"mousedown",this.mousedown),X.removeEventListener(p,"touchstart",this.touchstart,{passive:!1}),X.removeEventListener(p,"touchmove",this.touchmove),X.removeEventListener(p,"touchend",this.touchend),X.removeEventListener(p,"touchcancel",this.reset),this.offTemp()},Ta.prototype.offTemp=function(){X.enableDrag(),X.removeEventListener(b.window,"mousemove",this.mousemove),X.removeEventListener(b.window,"mouseup",this.mouseup)},Ta.prototype.mousedown=function(p){this.down(b.extend({},p,{ctrlKey:!0,preventDefault:function(){return p.preventDefault()}}),X.mousePos(this.element,p)),X.addEventListener(b.window,"mousemove",this.mousemove),X.addEventListener(b.window,"mouseup",this.mouseup)},Ta.prototype.mousemove=function(p){this.move(p,X.mousePos(this.element,p))},Ta.prototype.mouseup=function(p){this.mouseRotate.mouseupWindow(p),this.mousePitch&&this.mousePitch.mouseupWindow(p),this.offTemp()},Ta.prototype.touchstart=function(p){1!==p.targetTouches.length?this.reset():(this._startPos=this._lastPos=X.touchPos(this.element,p.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return p.preventDefault()}},this._startPos))},Ta.prototype.touchmove=function(p){1!==p.targetTouches.length?this.reset():(this._lastPos=X.touchPos(this.element,p.targetTouches)[0],this.move({preventDefault:function(){return p.preventDefault()}},this._lastPos))},Ta.prototype.touchend=function(p){0===p.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Ta.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var hl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function nu(p,v,g){var w=p.classList;for(var C in hl)w.remove("maplibregl-"+g+"-anchor-"+C,"mapboxgl-"+g+"-anchor-"+C);w.add("maplibregl-"+g+"-anchor-"+v,"mapboxgl-"+g+"-anchor-"+v)}var pl,Bc=function(p){function v(g,w){if(p.call(this),(g instanceof b.window.HTMLElement||w)&&(g=b.extend({element:g},w)),b.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=g&&g.anchor||"center",this._color=g&&g.color||"#3FB1CE",this._scale=g&&g.scale||1,this._draggable=g&&g.draggable||!1,this._clickTolerance=g&&g.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=g&&g.rotation||0,this._rotationAlignment=g&&g.rotationAlignment||"auto",this._pitchAlignment=g&&g.pitchAlignment&&"auto"!==g.pitchAlignment?g.pitchAlignment:this._rotationAlignment,g&&g.element)this._element=g.element,this._offset=b.Point.convert(g&&g.offset||[0,0]);else{this._defaultMarker=!0,this._element=X.create("div"),this._element.setAttribute("aria-label","Map marker");var C=X.createNS("http://www.w3.org/2000/svg","svg");C.setAttributeNS(null,"display","block"),C.setAttributeNS(null,"height","41px"),C.setAttributeNS(null,"width","27px"),C.setAttributeNS(null,"viewBox","0 0 27 41");var R=X.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"stroke","none"),R.setAttributeNS(null,"stroke-width","1"),R.setAttributeNS(null,"fill","none"),R.setAttributeNS(null,"fill-rule","evenodd");var O=X.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"fill-rule","nonzero");var F=X.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"transform","translate(3.0, 29.0)"),F.setAttributeNS(null,"fill","#000000");for(var Y=0,ae=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Y<ae.length;Y+=1){var be=ae[Y],Ce=X.createNS("http://www.w3.org/2000/svg","ellipse");Ce.setAttributeNS(null,"opacity","0.04"),Ce.setAttributeNS(null,"cx","10.5"),Ce.setAttributeNS(null,"cy","5.80029008"),Ce.setAttributeNS(null,"rx",be.rx),Ce.setAttributeNS(null,"ry",be.ry),F.appendChild(Ce)}var Ee=X.createNS("http://www.w3.org/2000/svg","g");Ee.setAttributeNS(null,"fill",this._color);var Ne=X.createNS("http://www.w3.org/2000/svg","path");Ne.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ee.appendChild(Ne);var ke=X.createNS("http://www.w3.org/2000/svg","g");ke.setAttributeNS(null,"opacity","0.25"),ke.setAttributeNS(null,"fill","#000000");var Ve=X.createNS("http://www.w3.org/2000/svg","path");Ve.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ke.appendChild(Ve);var De=X.createNS("http://www.w3.org/2000/svg","g");De.setAttributeNS(null,"transform","translate(6.0, 7.0)"),De.setAttributeNS(null,"fill","#FFFFFF");var qe=X.createNS("http://www.w3.org/2000/svg","g");qe.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Qe=X.createNS("http://www.w3.org/2000/svg","circle");Qe.setAttributeNS(null,"fill","#000000"),Qe.setAttributeNS(null,"opacity","0.25"),Qe.setAttributeNS(null,"cx","5.5"),Qe.setAttributeNS(null,"cy","5.5"),Qe.setAttributeNS(null,"r","5.4999962");var rt=X.createNS("http://www.w3.org/2000/svg","circle");rt.setAttributeNS(null,"fill","#FFFFFF"),rt.setAttributeNS(null,"cx","5.5"),rt.setAttributeNS(null,"cy","5.5"),rt.setAttributeNS(null,"r","5.4999962"),qe.appendChild(Qe),qe.appendChild(rt),O.appendChild(F),O.appendChild(Ee),O.appendChild(ke),O.appendChild(De),O.appendChild(qe),C.appendChild(O),C.setAttributeNS(null,"height",41*this._scale+"px"),C.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(C),this._offset=b.Point.convert(g&&g.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",function(ht){ht.preventDefault()}),this._element.addEventListener("mousedown",function(ht){ht.preventDefault()}),nu(this._element,this._anchor,"marker"),this._popup=null}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.addTo=function(g){return this.remove(),this._map=g,g.getCanvasContainer().appendChild(this._element),g.on("move",this._update),g.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},v.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),X.remove(this._element),this._popup&&this._popup.remove(),this},v.prototype.getLngLat=function(){return this._lngLat},v.prototype.setLngLat=function(g){return this._lngLat=b.LngLat.convert(g),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},v.prototype.getElement=function(){return this._element},v.prototype.setPopup=function(g){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),g){if(!("offset"in g.options)){var w=Math.sqrt(Math.pow(13.5,2)/2);g.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[w,-1*(24.6+w)],"bottom-right":[-w,-1*(24.6+w)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=g,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},v.prototype._onKeyPress=function(g){var w=g.code,C=g.charCode||g.keyCode;"Space"!==w&&"Enter"!==w&&32!==C&&13!==C||this.togglePopup()},v.prototype._onMapClick=function(g){var w=g.originalEvent.target,C=this._element;this._popup&&(w===C||C.contains(w))&&this.togglePopup()},v.prototype.getPopup=function(){return this._popup},v.prototype.togglePopup=function(){var g=this._popup;return g?(g.isOpen()?g.remove():g.addTo(this._map),this):this},v.prototype._update=function(g){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=qd(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var w="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?w="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(w="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var C="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?C="rotateX(0deg)":"map"===this._pitchAlignment&&(C="rotateX("+this._map.getPitch()+"deg)"),g&&"moveend"!==g.type||(this._pos=this._pos.round()),X.setTransform(this._element,hl[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+C+" "+w)}},v.prototype.getOffset=function(){return this._offset},v.prototype.setOffset=function(g){return this._offset=b.Point.convert(g),this._update(),this},v.prototype._onMove=function(g){if(!this._isDragging){var w=this._clickTolerance||this._map._clickTolerance;this._isDragging=g.point.dist(this._pointerdownPos)>=w}this._isDragging&&(this._pos=g.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new b.Event("dragstart"))),this.fire(new b.Event("drag")))},v.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new b.Event("dragend")),this._state="inactive"},v.prototype._addDragHandler=function(g){this._element.contains(g.originalEvent.target)&&(g.preventDefault(),this._positionDelta=g.point.sub(this._pos).add(this._offset),this._pointerdownPos=g.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},v.prototype.setDraggable=function(g){return this._draggable=!!g,this._map&&(g?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},v.prototype.isDraggable=function(){return this._draggable},v.prototype.setRotation=function(g){return this._rotation=g||0,this._update(),this},v.prototype.getRotation=function(){return this._rotation},v.prototype.setRotationAlignment=function(g){return this._rotationAlignment=g||"auto",this._update(),this},v.prototype.getRotationAlignment=function(){return this._rotationAlignment},v.prototype.setPitchAlignment=function(g){return this._pitchAlignment=g&&"auto"!==g?g:this._rotationAlignment,this._update(),this},v.prototype.getPitchAlignment=function(){return this._pitchAlignment},v}(b.Evented),lh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Nt=0,lr=!1,ch=function(p){function v(g){p.call(this),this.options=b.extend({},lh,g),b.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.onAdd=function(g){var w;return this._map=g,this._container=X.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),w=this._setupUI,void 0!==pl?w(pl):void 0!==b.window.navigator.permissions?b.window.navigator.permissions.query({name:"geolocation"}).then(function(C){w(pl="denied"!==C.state)}):w(pl=!!b.window.navigator.geolocation),this._container},v.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(b.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),X.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Nt=0,lr=!1},v.prototype._isOutOfMapMaxBounds=function(g){var w=this._map.getMaxBounds(),C=g.coords;return w&&(C.longitude<w.getWest()||C.longitude>w.getEast()||C.latitude<w.getSouth()||C.latitude>w.getNorth())},v.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}},v.prototype._onSuccess=function(g){if(this._map){if(this._isOutOfMapMaxBounds(g))return this._setErrorState(),this.fire(new b.Event("outofmaxbounds",g)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=g,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(g),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(g),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new b.Event("geolocate",g)),this._finish()}},v.prototype._updateCamera=function(g){var w=new b.LngLat(g.coords.longitude,g.coords.latitude),C=g.coords.accuracy,R=this._map.getBearing(),O=b.extend({bearing:R},this.options.fitBoundsOptions);this._map.fitBounds(w.toBounds(C),O,{geolocateSource:!0})},v.prototype._updateMarker=function(g){if(g){var w=new b.LngLat(g.coords.longitude,g.coords.latitude);this._accuracyCircleMarker.setLngLat(w).addTo(this._map),this._userLocationDotMarker.setLngLat(w).addTo(this._map),this._accuracy=g.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},v.prototype._updateCircleRadius=function(){var g=this._map._container.clientHeight/2,w=this._map.unproject([0,g]),C=this._map.unproject([1,g]),R=w.distanceTo(C),O=Math.ceil(2*this._accuracy/R);this._circleElement.style.width=O+"px",this._circleElement.style.height=O+"px"},v.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},v.prototype._onError=function(g){if(this._map){if(this.options.trackUserLocation)if(1===g.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var w=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===g.code&&lr)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new b.Event("error",g)),this._finish()}},v.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},v.prototype._setupUI=function(g){var w=this;if(this._container.addEventListener("contextmenu",function(O){return O.preventDefault()}),this._geolocateButton=X.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),X.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===g){b.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var C=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=C,this._geolocateButton.setAttribute("aria-label",C)}else{var R=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=R,this._geolocateButton.setAttribute("aria-label",R)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=X.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Bc(this._dotElement),this._circleElement=X.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Bc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(O){O.geolocateSource||"ACTIVE_LOCK"!==w._watchState||O.originalEvent&&"resize"===O.originalEvent.type||(w._watchState="BACKGROUND",w._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),w._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),w.fire(new b.Event("trackuserlocationend")))})},v.prototype.trigger=function(){if(!this._setup)return b.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new b.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Nt--,lr=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new b.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new b.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var g;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Nt>1?(g={maximumAge:6e5,timeout:0},lr=!0):(g=this.options.positionOptions,lr=!1),this._geolocationWatchID=b.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else b.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},v.prototype._clearWatch=function(){b.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},v}(b.Evented),Vi={maxWidth:100,unit:"metric"},va=function(p){this.options=b.extend({},Vi,p),b.bindAll(["_onMove","setUnit"],this)};function Au(p,v,g){var w=g&&g.maxWidth||100,C=p._container.clientHeight/2,R=p.unproject([0,C]),O=p.unproject([w,C]),F=R.distanceTo(O);if(g&&"imperial"===g.unit){var Y=3.2808*F;Y>5280?qo(v,w,Y/5280,p._getUIString("ScaleControl.Miles")):qo(v,w,Y,p._getUIString("ScaleControl.Feet"))}else g&&"nautical"===g.unit?qo(v,w,F/1852,p._getUIString("ScaleControl.NauticalMiles")):F>=1e3?qo(v,w,F/1e3,p._getUIString("ScaleControl.Kilometers")):qo(v,w,F,p._getUIString("ScaleControl.Meters"))}function qo(p,v,g,w){var C,R,O,Y,ae,F=(C=g,(R=Math.pow(10,(""+Math.floor(C)).length-1))*(O=(O=C/R)>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:(Y=O,ae=Math.pow(10,Math.ceil(-Math.log(Y)/Math.LN10)),Math.round(Y*ae)/ae)));p.style.width=v*(F/g)+"px",p.innerHTML=F+"&nbsp;"+w}va.prototype.getDefaultPosition=function(){return"bottom-left"},va.prototype._onMove=function(){Au(this._map,this._container,this.options)},va.prototype.onAdd=function(p){return this._map=p,this._container=X.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},va.prototype.onRemove=function(){X.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},va.prototype.setUnit=function(p){this.options.unit=p,Au(this._map,this._container,this.options)};var ra=function(p){this._fullscreen=!1,p&&p.container&&(p.container instanceof b.window.HTMLElement?this._container=p.container:b.warnOnce("Full screen control 'container' must be a DOM element.")),b.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in b.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in b.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in b.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in b.window.document&&(this._fullscreenchange="MSFullscreenChange")};ra.prototype.onAdd=function(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=X.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",b.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},ra.prototype.onRemove=function(){X.remove(this._controlContainer),this._map=null,b.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},ra.prototype._checkFullscreenSupport=function(){return!!(b.window.document.fullscreenEnabled||b.window.document.mozFullScreenEnabled||b.window.document.msFullscreenEnabled||b.window.document.webkitFullscreenEnabled)},ra.prototype._setupUI=function(){var p=this._fullscreenButton=X.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);X.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",p).setAttribute("aria-hidden",!0),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),b.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},ra.prototype._updateTitle=function(){var p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.title=p},ra.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},ra.prototype._isFullscreen=function(){return this._fullscreen},ra.prototype._changeIcon=function(){(b.window.document.fullscreenElement||b.window.document.mozFullScreenElement||b.window.document.webkitFullscreenElement||b.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},ra.prototype._onClickFullscreen=function(){this._isFullscreen()?b.window.document.exitFullscreen?b.window.document.exitFullscreen():b.window.document.mozCancelFullScreen?b.window.document.mozCancelFullScreen():b.window.document.msExitFullscreen?b.window.document.msExitFullscreen():b.window.document.webkitCancelFullScreen&&b.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var zc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ip=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),jc=function(p){function v(g){p.call(this),this.options=b.extend(Object.create(zc),g),b.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return p&&(v.__proto__=p),(v.prototype=Object.create(p&&p.prototype)).constructor=v,v.prototype.addTo=function(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new b.Event("open")),this},v.prototype.isOpen=function(){return!!this._map},v.prototype.remove=function(){return this._content&&X.remove(this._content),this._container&&(X.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new b.Event("close")),this},v.prototype.getLngLat=function(){return this._lngLat},v.prototype.setLngLat=function(g){return this._lngLat=b.LngLat.convert(g),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this},v.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this},v.prototype.getElement=function(){return this._container},v.prototype.setText=function(g){return this.setDOMContent(b.window.document.createTextNode(g))},v.prototype.setHTML=function(g){var w,C=b.window.document.createDocumentFragment(),R=b.window.document.createElement("body");for(R.innerHTML=g;w=R.firstChild;)C.appendChild(w);return this.setDOMContent(C)},v.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},v.prototype.setMaxWidth=function(g){return this.options.maxWidth=g,this._update(),this},v.prototype.setDOMContent=function(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=X.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this},v.prototype.addClassName=function(g){this._container&&this._container.classList.add(g)},v.prototype.removeClassName=function(g){this._container&&this._container.classList.remove(g)},v.prototype.setOffset=function(g){return this.options.offset=g,this._update(),this},v.prototype.toggleClassName=function(g){if(this._container)return this._container.classList.toggle(g)},v.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=X.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},v.prototype._onMouseUp=function(g){this._update(g.point)},v.prototype._onMouseMove=function(g){this._update(g.point)},v.prototype._onDrag=function(g){this._update(g.point)},v.prototype._update=function(g){var w=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=X.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=X.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Ce){return w._container.classList.add(Ce)}),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=qd(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||g)){var C=this._pos=this._trackPointer&&g?g:this._map.project(this._lngLat),R=this.options.anchor,O=function Ce(Ee){if(Ee){if("number"==typeof Ee){var Ne=Math.round(Math.sqrt(.5*Math.pow(Ee,2)));return{center:new b.Point(0,0),top:new b.Point(0,Ee),"top-left":new b.Point(Ne,Ne),"top-right":new b.Point(-Ne,Ne),bottom:new b.Point(0,-Ee),"bottom-left":new b.Point(Ne,-Ne),"bottom-right":new b.Point(-Ne,-Ne),left:new b.Point(Ee,0),right:new b.Point(-Ee,0)}}if(Ee instanceof b.Point||Array.isArray(Ee)){var ke=b.Point.convert(Ee);return{center:ke,top:ke,"top-left":ke,"top-right":ke,bottom:ke,"bottom-left":ke,"bottom-right":ke,left:ke,right:ke}}return{center:b.Point.convert(Ee.center||[0,0]),top:b.Point.convert(Ee.top||[0,0]),"top-left":b.Point.convert(Ee["top-left"]||[0,0]),"top-right":b.Point.convert(Ee["top-right"]||[0,0]),bottom:b.Point.convert(Ee.bottom||[0,0]),"bottom-left":b.Point.convert(Ee["bottom-left"]||[0,0]),"bottom-right":b.Point.convert(Ee["bottom-right"]||[0,0]),left:b.Point.convert(Ee.left||[0,0]),right:b.Point.convert(Ee.right||[0,0])}}return Ce(new b.Point(0,0))}(this.options.offset);if(!R){var F,Y=this._container.offsetWidth,ae=this._container.offsetHeight;F=C.y+O.bottom.y<ae?["top"]:C.y>this._map.transform.height-ae?["bottom"]:[],C.x<Y/2?F.push("left"):C.x>this._map.transform.width-Y/2&&F.push("right"),R=0===F.length?"bottom":F.join("-")}var be=C.add(O[R]).round();X.setTransform(this._container,hl[R]+" translate("+be.x+"px,"+be.y+"px)"),nu(this._container,R,"popup")}},v.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var g=this._container.querySelector(Ip);g&&g.focus()}},v.prototype._onClose=function(){this.remove()},v}(b.Evented),ml={version:b.version,supported:H,setRTLTextPlugin:b.setRTLTextPlugin,getRTLTextPluginStatus:b.getRTLTextPluginStatus,Map:di,NavigationControl:In,GeolocateControl:ch,AttributionControl:pi,ScaleControl:va,FullscreenControl:ra,Popup:jc,Marker:Bc,Style:os,LngLat:b.LngLat,LngLatBounds:b.LngLatBounds,Point:b.Point,MercatorCoordinate:b.MercatorCoordinate,Evented:b.Evented,config:b.config,prewarm:function(){sn().acquire(lt)},clearPrewarmedResources:function(){var p=Jt;p&&(p.isPreloaded()&&1===p.numActive()?(p.release(lt),Jt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return b.config.ACCESS_TOKEN},set accessToken(p){b.config.ACCESS_TOKEN=p},get baseApiUrl(){return b.config.API_URL},set baseApiUrl(p){b.config.API_URL=p},get workerCount(){return Et.workerCount},set workerCount(p){Et.workerCount=p},get maxParallelImageRequests(){return b.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){b.config.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage:function(p){b.clearTileCache(p)},workerUrl:"",addProtocol:function(p,v){b.config.REGISTERED_PROTOCOLS[p]=v},removeProtocol:function(p){delete b.config.REGISTERED_PROTOCOLS[p]}};return ml}),U}()},516:He=>{"use strict";function J(G,U){return Object.prototype.hasOwnProperty.call(G,U)}He.exports=function(G,U,ie,b){ie=ie||"=";var H={};if("string"!=typeof G||0===G.length)return H;var X=/\+/g;G=G.split(U=U||"&");var z=1e3;b&&"number"==typeof b.maxKeys&&(z=b.maxKeys);var M=G.length;z>0&&M>z&&(M=z);for(var L=0;L<M;++L){var ee,ue,fe,we,B=G[L].replace(X,"%20"),W=B.indexOf(ie);W>=0?(ee=B.substr(0,W),ue=B.substr(W+1)):(ee=B,ue=""),fe=decodeURIComponent(ee),we=decodeURIComponent(ue),J(H,fe)?Array.isArray(H[fe])?H[fe].push(we):H[fe]=[H[fe],we]:H[fe]=we}return H}},5776:He=>{"use strict";var J=function(G){switch(typeof G){case"string":return G;case"boolean":return G?"true":"false";case"number":return isFinite(G)?G:"";default:return""}};He.exports=function(G,U,ie,b){return U=U||"&",ie=ie||"=",null===G&&(G=void 0),"object"==typeof G?Object.keys(G).map(function(H){var X=encodeURIComponent(J(H))+ie;return Array.isArray(G[H])?G[H].map(function(z){return X+encodeURIComponent(J(z))}).join(U):X+encodeURIComponent(J(G[H]))}).join(U):b?encodeURIComponent(J(b))+ie+encodeURIComponent(J(G)):""}},7137:(He,J,G)=>{"use strict";J.decode=J.parse=G(516),J.encode=J.stringify=G(5776)},7231:He=>{"use strict";class J{constructor(U={}){if(!(U.maxSize&&U.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=U.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(U,ie){this.cache.set(U,ie),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(U){if(this.cache.has(U))return this.cache.get(U);if(this.oldCache.has(U)){const ie=this.oldCache.get(U);return this.oldCache.delete(U),this._set(U,ie),ie}}set(U,ie){return this.cache.has(U)?this.cache.set(U,ie):this._set(U,ie),this}has(U){return this.cache.has(U)||this.oldCache.has(U)}peek(U){return this.cache.has(U)?this.cache.get(U):this.oldCache.has(U)?this.oldCache.get(U):void 0}delete(U){const ie=this.cache.delete(U);return ie&&this._size--,this.oldCache.delete(U)||ie}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[U]of this)yield U}*values(){for(const[,U]of this)yield U}*[Symbol.iterator](){for(const U of this.cache)yield U;for(const U of this.oldCache){const[ie]=U;this.cache.has(ie)||(yield U)}}get size(){let U=0;for(const ie of this.oldCache.keys())this.cache.has(ie)||U++;return this._size+U}}He.exports=J},6775:function(He){var U;U=function(){var G=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function U(z){return z.match(G)||[]}function b(z){return{language:(z=U(z))[1]||"",extlang:z[2]||"",script:z[3]||"",region:z[4]||""}}function H(z,M,L){Object.defineProperty(z,M,{value:L,enumerable:!0})}function X(z,M,L){function B(W){return U(W)[z]||""}H(B,"pattern",M),H(b,L,B)}return X(1,/^[a-zA-Z]{2,3}$/,"language"),X(2,/^[a-zA-Z]{3}$/,"extlang"),X(3,/^[a-zA-Z]{4}$/,"script"),X(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),H(b,"split",function ie(z){return U(z).filter(function(M,L){return M&&L})}),b},He.exports?He.exports=U():this.subtag=U()},4208:(He,J,G)=>{"use strict";var U=G(8526);He.exports=U,"undefined"!=typeof window&&(window.Suggestions=U)},4861:He=>{"use strict";var J=function(G){return this.component=G,this.items=[],this.active=G.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,G.el.parentNode.insertBefore(this.wrapper,G.el.nextSibling),this};J.prototype.show=function(){this.element.style.display="block"},J.prototype.hide=function(){this.element.style.display="none"},J.prototype.add=function(G){this.items.push(G)},J.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},J.prototype.isEmpty=function(){return!this.items.length},J.prototype.isVisible=function(){return"block"===this.element.style.display},J.prototype.draw=function(){if(this.element.innerHTML="",0!==this.items.length){for(var G=0;G<this.items.length;G++)this.drawItem(this.items[G],this.active===G);this.show()}else this.hide()},J.prototype.drawItem=function(G,U){var ie=document.createElement("li"),b=document.createElement("a");U&&(ie.className+=" active"),b.innerHTML=G.string,ie.appendChild(b),this.element.appendChild(ie),ie.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),ie.addEventListener("mouseup",function(){this.handleMouseUp.call(this,G)}.bind(this))},J.prototype.handleMouseUp=function(G){this.selectingListItem=!1,this.component.value(G.original),this.clear(),this.draw()},J.prototype.move=function(G){this.active=G,this.draw()},J.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},J.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},J.prototype.drawError=function(G){var U=document.createElement("li");U.innerHTML=G,this.element.appendChild(U),this.show()},He.exports=J},8526:(He,J,G)=>{"use strict";var U=G(4703),ie=G(5780),b=G(4861),H=function(X,z,M){return this.options=U({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},M=M||{}),this.el=X,this.data=z||[],this.list=new b(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(L){this.handleKeyUp(L.keyCode,L)}.bind(this),!1),this.el.addEventListener("keydown",function(L){this.handleKeyDown(L)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(L){this.handlePaste(L)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};H.prototype.handleKeyUp=function(X,z){if(40!==X&&38!==X&&27!==X&&9!==X){if(13===X)return void(this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),z.stopPropagation()));this.handleInputChange(this.el.value)}},H.prototype.handleKeyDown=function(X){switch(X.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&X.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},H.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},H.prototype.handlePaste=function(X){if(X.clipboardData)this.handleInputChange(X.clipboardData.getData("Text"));else{var z=this;setTimeout(function(){z.handleInputChange(X.target.value)},100)}},H.prototype.handleInputChange=function(X){this.query=this.normalize(X),this.list.clear(),this.query.length<this.options.minLength?this.list.draw():this.getCandidates(function(z){for(var M=0;M<z.length&&(this.list.add(z[M]),M!==this.options.limit-1);M++);this.list.draw()}.bind(this))},H.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},H.prototype.update=function(X){this.data=X,this.handleKeyUp()},H.prototype.clear=function(){this.data=[],this.list.clear()},H.prototype.normalize=function(X){return X.toLowerCase()},H.prototype.match=function(X,z){return X.indexOf(z)>-1},H.prototype.value=function(X){if(this.selected=X,this.el.value=this.getItemValue(X||{place_name:this.query}),document.createEvent){var z=document.createEvent("HTMLEvents");z.initEvent("change",!0,!1),this.el.dispatchEvent(z)}else this.el.fireEvent("onchange")},H.prototype.getCandidates=function(X){var z={pre:"<strong>",post:"</strong>",extract:function(L){return this.getItemValue(L)}.bind(this)};X(this.options.filter?ie.filter(this.query,this.data,z).map(function(L){return{original:L.original,string:this.render(L.original,L.string)}}.bind(this)):this.data.map(function(L){return{original:L,string:this.render(L)}}.bind(this)))},H.prototype.getItemValue=function(X){return X},H.prototype.render=function(X,z){if(z)return z;for(var M=this.getItemValue(X.original?X.original:X),L=this.normalize(M),B=L.lastIndexOf(this.query);B>-1;){var W=B+this.query.length;M=M.slice(0,B)+"<strong>"+M.slice(B,W)+"</strong>"+M.slice(W),B=L.slice(0,B).lastIndexOf(this.query)}return M},H.prototype.renderError=function(X){this.list.drawError(X)},He.exports=H},5557:(He,J,G)=>{"use strict";function U(ie,b){return b=b||{},new Promise(function(H,X){var z=new XMLHttpRequest,M=[],L=[],B={},W=function(){return{ok:2==(z.status/100|0),statusText:z.statusText,status:z.status,url:z.responseURL,text:function(){return Promise.resolve(z.responseText)},json:function(){return Promise.resolve(z.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([z.response]))},clone:W,headers:{keys:function(){return M},entries:function(){return L},get:function(ue){return B[ue.toLowerCase()]},has:function(ue){return ue.toLowerCase()in B}}}};for(var ee in z.open(b.method||"get",ie,!0),z.onload=function(){z.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(ue,fe,we){M.push(fe=fe.toLowerCase()),L.push([fe,we]),B[fe]=B[fe]?B[fe]+","+we:we}),H(W())},z.onerror=X,z.withCredentials="include"==b.credentials,b.headers)z.setRequestHeader(ee,b.headers[ee]);z.send(b.body||null)})}G.r(J),G.d(J,{default:()=>U})},1308:function(He,J,G){var U;He=G.nmd(He),function(ie){"object"==typeof global&&global;var z,M=2147483647,L=36,Ie=/^xn--/,Xe=/[^\x20-\x7E]/,pe=/[\x2E\u3002\uFF0E\uFF61]/g,he={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Fe=Math.floor,at=String.fromCharCode;function Ge(vt){throw RangeError(he[vt])}function P(vt,We){for(var yt=vt.length,Kt=[];yt--;)Kt[yt]=We(vt[yt]);return Kt}function D(vt,We){var yt=vt.split("@"),Kt="";return yt.length>1&&(Kt=yt[0]+"@",vt=yt[1]),Kt+P((vt=vt.replace(pe,".")).split("."),We).join(".")}function N(vt){for(var tn,Sn,We=[],yt=0,Kt=vt.length;yt<Kt;)(tn=vt.charCodeAt(yt++))>=55296&&tn<=56319&&yt<Kt?56320==(64512&(Sn=vt.charCodeAt(yt++)))?We.push(((1023&tn)<<10)+(1023&Sn)+65536):(We.push(tn),yt--):We.push(tn);return We}function V(vt){return P(vt,function(We){var yt="";return We>65535&&(yt+=at((We-=65536)>>>10&1023|55296),We=56320|1023&We),yt+at(We)}).join("")}function Z(vt){return vt-48<10?vt-22:vt-65<26?vt-65:vt-97<26?vt-97:L}function j(vt,We){return vt+22+75*(vt<26)-((0!=We)<<5)}function de(vt,We,yt){var Kt=0;for(vt=yt?Fe(vt/700):vt>>1,vt+=Fe(vt/We);vt>455;Kt+=L)vt=Fe(vt/35);return Fe(Kt+36*vt/(vt+38))}function $e(vt){var Kt,Cn,gn,sr,Ut,K,rr,fr,Xi,_i,We=[],yt=vt.length,tn=0,Sn=128,xt=72;for((Cn=vt.lastIndexOf("-"))<0&&(Cn=0),gn=0;gn<Cn;++gn)vt.charCodeAt(gn)>=128&&Ge("not-basic"),We.push(vt.charCodeAt(gn));for(sr=Cn>0?Cn+1:0;sr<yt;){for(Ut=tn,K=1,rr=L;sr>=yt&&Ge("invalid-input"),((fr=Z(vt.charCodeAt(sr++)))>=L||fr>Fe((M-tn)/K))&&Ge("overflow"),tn+=fr*K,!(fr<(Xi=rr<=xt?1:rr>=xt+26?26:rr-xt));rr+=L)K>Fe(M/(_i=L-Xi))&&Ge("overflow"),K*=_i;xt=de(tn-Ut,Kt=We.length+1,0==Ut),Fe(tn/Kt)>M-Sn&&Ge("overflow"),Sn+=Fe(tn/Kt),tn%=Kt,We.splice(tn++,0,Sn)}return V(We)}function _t(vt){var We,yt,Kt,tn,Sn,xt,Cn,gn,sr,Ut,K,fr,Xi,_i,wt,rr=[];for(fr=(vt=N(vt)).length,We=128,yt=0,Sn=72,xt=0;xt<fr;++xt)(K=vt[xt])<128&&rr.push(at(K));for(Kt=tn=rr.length,tn&&rr.push("-");Kt<fr;){for(Cn=M,xt=0;xt<fr;++xt)(K=vt[xt])>=We&&K<Cn&&(Cn=K);for(Cn-We>Fe((M-yt)/(Xi=Kt+1))&&Ge("overflow"),yt+=(Cn-We)*Xi,We=Cn,xt=0;xt<fr;++xt)if((K=vt[xt])<We&&++yt>M&&Ge("overflow"),K==We){for(gn=yt,sr=L;!(gn<(Ut=sr<=Sn?1:sr>=Sn+26?26:sr-Sn));sr+=L)rr.push(at(j(Ut+(wt=gn-Ut)%(_i=L-Ut),0))),gn=Fe(wt/_i);rr.push(at(j(gn,0))),Sn=de(yt,Xi,Kt==tn),yt=0,++Kt}++yt,++We}return rr.join("")}z={version:"1.3.2",ucs2:{decode:N,encode:V},decode:$e,encode:_t,toASCII:function pt(vt){return D(vt,function(We){return Xe.test(We)?"xn--"+_t(We):We})},toUnicode:function xe(vt){return D(vt,function(We){return Ie.test(We)?$e(We.slice(4).toLowerCase()):We})}},void 0!==(U=function(){return z}.call(J,G,J,He))&&(He.exports=U)}()},8762:(He,J,G)=>{"use strict";var ie=G(1308),b=G(796);function H(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}J.Qc=Te,J.WU=function Fe(Ge){return b.isString(Ge)&&(Ge=Te(Ge)),Ge instanceof H?Ge.format():H.prototype.format.call(Ge)};var X=/^([a-z0-9.+-]+:)/i,z=/:[0-9]*$/,M=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,B=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),W=["'"].concat(B),ee=["%","/","?",";","#"].concat(W),ue=["/","?","#"],we=/^[+a-z0-9A-Z_-]{0,63}$/,ge=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Ie={javascript:!0,"javascript:":!0},Xe={javascript:!0,"javascript:":!0},pe={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},he=G(7137);function Te(Ge,P,D){if(Ge&&b.isObject(Ge)&&Ge instanceof H)return Ge;var N=new H;return N.parse(Ge,P,D),N}H.prototype.parse=function(Ge,P,D){if(!b.isString(Ge))throw new TypeError("Parameter 'url' must be a string, not "+typeof Ge);var N=Ge.indexOf("?"),V=-1!==N&&N<Ge.indexOf("#")?"?":"#",Z=Ge.split(V);Z[0]=Z[0].replace(/\\/g,"/");var de=Ge=Z.join(V);if(de=de.trim(),!D&&1===Ge.split("#").length){var $e=M.exec(de);if($e)return this.path=de,this.href=de,this.pathname=$e[1],$e[2]?(this.search=$e[2],this.query=P?he.parse(this.search.substr(1)):this.search.substr(1)):P&&(this.search="",this.query={}),this}var _t=X.exec(de);if(_t){var xe=(_t=_t[0]).toLowerCase();this.protocol=xe,de=de.substr(_t.length)}if(D||_t||de.match(/^\/\/[^@\/]+@[^@\/]+/)){var pt="//"===de.substr(0,2);pt&&(!_t||!Xe[_t])&&(de=de.substr(2),this.slashes=!0)}if(!Xe[_t]&&(pt||_t&&!pe[_t])){for(var vt=-1,We=0;We<ue.length;We++)-1!==(yt=de.indexOf(ue[We]))&&(-1===vt||yt<vt)&&(vt=yt);var Kt,tn;for(-1!==(tn=-1===vt?de.lastIndexOf("@"):de.lastIndexOf("@",vt))&&(Kt=de.slice(0,tn),de=de.slice(tn+1),this.auth=decodeURIComponent(Kt)),vt=-1,We=0;We<ee.length;We++){var yt;-1!==(yt=de.indexOf(ee[We]))&&(-1===vt||yt<vt)&&(vt=yt)}-1===vt&&(vt=de.length),this.host=de.slice(0,vt),de=de.slice(vt),this.parseHost(),this.hostname=this.hostname||"";var Sn="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Sn)for(var xt=this.hostname.split(/\./),Cn=(We=0,xt.length);We<Cn;We++){var gn=xt[We];if(gn&&!gn.match(we)){for(var sr="",Ut=0,K=gn.length;Ut<K;Ut++)gn.charCodeAt(Ut)>127?sr+="x":sr+=gn[Ut];if(!sr.match(we)){var rr=xt.slice(0,We),fr=xt.slice(We+1),Xi=gn.match(ge);Xi&&(rr.push(Xi[1]),fr.unshift(Xi[2])),fr.length&&(de="/"+fr.join(".")+de),this.hostname=rr.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),Sn||(this.hostname=ie.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,Sn&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==de[0]&&(de="/"+de))}if(!Ie[xe])for(We=0,Cn=W.length;We<Cn;We++){var bt=W[We];if(-1!==de.indexOf(bt)){var ha=encodeURIComponent(bt);ha===bt&&(ha=escape(bt)),de=de.split(bt).join(ha)}}var Me=de.indexOf("#");-1!==Me&&(this.hash=de.substr(Me),de=de.slice(0,Me));var te=de.indexOf("?");return-1!==te?(this.search=de.substr(te),this.query=de.substr(te+1),P&&(this.query=he.parse(this.query)),de=de.slice(0,te)):P&&(this.search="",this.query={}),de&&(this.pathname=de),pe[xe]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},H.prototype.format=function(){var Ge=this.auth||"";Ge&&(Ge=(Ge=encodeURIComponent(Ge)).replace(/%3A/i,":"),Ge+="@");var P=this.protocol||"",D=this.pathname||"",N=this.hash||"",V=!1,Z="";this.host?V=Ge+this.host:this.hostname&&(V=Ge+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(V+=":"+this.port)),this.query&&b.isObject(this.query)&&Object.keys(this.query).length&&(Z=he.stringify(this.query));var j=this.search||Z&&"?"+Z||"";return P&&":"!==P.substr(-1)&&(P+=":"),this.slashes||(!P||pe[P])&&!1!==V?(V="//"+(V||""),D&&"/"!==D.charAt(0)&&(D="/"+D)):V||(V=""),N&&"#"!==N.charAt(0)&&(N="#"+N),j&&"?"!==j.charAt(0)&&(j="?"+j),P+V+(D=D.replace(/[?#]/g,function(de){return encodeURIComponent(de)}))+(j=j.replace("#","%23"))+N},H.prototype.resolve=function(Ge){return this.resolveObject(Te(Ge,!1,!0)).format()},H.prototype.resolveObject=function(Ge){if(b.isString(Ge)){var P=new H;P.parse(Ge,!1,!0),Ge=P}for(var D=new H,N=Object.keys(this),V=0;V<N.length;V++){var Z=N[V];D[Z]=this[Z]}if(D.hash=Ge.hash,""===Ge.href)return D.href=D.format(),D;if(Ge.slashes&&!Ge.protocol){for(var j=Object.keys(Ge),de=0;de<j.length;de++){var $e=j[de];"protocol"!==$e&&(D[$e]=Ge[$e])}return pe[D.protocol]&&D.hostname&&!D.pathname&&(D.path=D.pathname="/"),D.href=D.format(),D}if(Ge.protocol&&Ge.protocol!==D.protocol){if(!pe[Ge.protocol]){for(var _t=Object.keys(Ge),xe=0;xe<_t.length;xe++){var pt=_t[xe];D[pt]=Ge[pt]}return D.href=D.format(),D}if(D.protocol=Ge.protocol,Ge.host||Xe[Ge.protocol])D.pathname=Ge.pathname;else{for(var Cn=(Ge.pathname||"").split("/");Cn.length&&!(Ge.host=Cn.shift()););Ge.host||(Ge.host=""),Ge.hostname||(Ge.hostname=""),""!==Cn[0]&&Cn.unshift(""),Cn.length<2&&Cn.unshift(""),D.pathname=Cn.join("/")}return D.search=Ge.search,D.query=Ge.query,D.host=Ge.host||"",D.auth=Ge.auth,D.hostname=Ge.hostname||Ge.host,D.port=Ge.port,(D.pathname||D.search)&&(D.path=(D.pathname||"")+(D.search||"")),D.slashes=D.slashes||Ge.slashes,D.href=D.format(),D}var yt=D.pathname&&"/"===D.pathname.charAt(0),Kt=Ge.host||Ge.pathname&&"/"===Ge.pathname.charAt(0),tn=Kt||yt||D.host&&Ge.pathname,Sn=tn,xt=D.pathname&&D.pathname.split("/")||[],gn=(Cn=Ge.pathname&&Ge.pathname.split("/")||[],D.protocol&&!pe[D.protocol]);if(gn&&(D.hostname="",D.port=null,D.host&&(""===xt[0]?xt[0]=D.host:xt.unshift(D.host)),D.host="",Ge.protocol&&(Ge.hostname=null,Ge.port=null,Ge.host&&(""===Cn[0]?Cn[0]=Ge.host:Cn.unshift(Ge.host)),Ge.host=null),tn=tn&&(""===Cn[0]||""===xt[0])),Kt)D.host=Ge.host||""===Ge.host?Ge.host:D.host,D.hostname=Ge.hostname||""===Ge.hostname?Ge.hostname:D.hostname,D.search=Ge.search,D.query=Ge.query,xt=Cn;else if(Cn.length)xt||(xt=[]),xt.pop(),xt=xt.concat(Cn),D.search=Ge.search,D.query=Ge.query;else if(!b.isNullOrUndefined(Ge.search))return gn&&(D.hostname=D.host=xt.shift(),(sr=!!(D.host&&D.host.indexOf("@")>0)&&D.host.split("@"))&&(D.auth=sr.shift(),D.host=D.hostname=sr.shift())),D.search=Ge.search,D.query=Ge.query,(!b.isNull(D.pathname)||!b.isNull(D.search))&&(D.path=(D.pathname?D.pathname:"")+(D.search?D.search:"")),D.href=D.format(),D;if(!xt.length)return D.pathname=null,D.path=D.search?"/"+D.search:null,D.href=D.format(),D;for(var Ut=xt.slice(-1)[0],K=(D.host||Ge.host||xt.length>1)&&("."===Ut||".."===Ut)||""===Ut,rr=0,fr=xt.length;fr>=0;fr--)"."===(Ut=xt[fr])?xt.splice(fr,1):".."===Ut?(xt.splice(fr,1),rr++):rr&&(xt.splice(fr,1),rr--);if(!tn&&!Sn)for(;rr--;rr)xt.unshift("..");tn&&""!==xt[0]&&(!xt[0]||"/"!==xt[0].charAt(0))&&xt.unshift(""),K&&"/"!==xt.join("/").substr(-1)&&xt.push("");var sr,Xi=""===xt[0]||xt[0]&&"/"===xt[0].charAt(0);return gn&&(D.hostname=D.host=Xi?"":xt.length?xt.shift():"",(sr=!!(D.host&&D.host.indexOf("@")>0)&&D.host.split("@"))&&(D.auth=sr.shift(),D.host=D.hostname=sr.shift())),(tn=tn||D.host&&xt.length)&&!Xi&&xt.unshift(""),xt.length?D.pathname=xt.join("/"):(D.pathname=null,D.path=null),(!b.isNull(D.pathname)||!b.isNull(D.search))&&(D.path=(D.pathname?D.pathname:"")+(D.search?D.search:"")),D.auth=Ge.auth||D.auth,D.slashes=D.slashes||Ge.slashes,D.href=D.format(),D},H.prototype.parseHost=function(){var Ge=this.host,P=z.exec(Ge);P&&(":"!==(P=P[0])&&(this.port=P.substr(1)),Ge=Ge.substr(0,Ge.length-P.length)),Ge&&(this.hostname=Ge)}},796:He=>{"use strict";He.exports={isString:function(J){return"string"==typeof J},isObject:function(J){return"object"==typeof J&&null!==J},isNull:function(J){return null===J},isNullOrUndefined:function(J){return null==J}}},4703:He=>{He.exports=function G(){for(var U={},ie=0;ie<arguments.length;ie++){var b=arguments[ie];for(var H in b)J.call(b,H)&&(U[H]=b[H])}return U};var J=Object.prototype.hasOwnProperty},2717:(He,J,G)=>{"use strict";G.r(J),G.d(J,{__assign:()=>b,__asyncDelegator:()=>pe,__asyncGenerator:()=>Xe,__asyncValues:()=>he,__await:()=>Ie,__awaiter:()=>L,__classPrivateFieldGet:()=>Ye,__classPrivateFieldSet:()=>Ge,__createBinding:()=>W,__decorate:()=>X,__exportStar:()=>ee,__extends:()=>ie,__generator:()=>B,__importDefault:()=>at,__importStar:()=>Fe,__makeTemplateObject:()=>Te,__metadata:()=>M,__param:()=>z,__read:()=>fe,__rest:()=>H,__spread:()=>we,__spreadArrays:()=>ge,__values:()=>ue});var U=function(P,D){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,V){N.__proto__=V}||function(N,V){for(var Z in V)V.hasOwnProperty(Z)&&(N[Z]=V[Z])})(P,D)};function ie(P,D){function N(){this.constructor=P}U(P,D),P.prototype=null===D?Object.create(D):(N.prototype=D.prototype,new N)}var b=function(){return b=Object.assign||function(D){for(var N,V=1,Z=arguments.length;V<Z;V++)for(var j in N=arguments[V])Object.prototype.hasOwnProperty.call(N,j)&&(D[j]=N[j]);return D},b.apply(this,arguments)};function H(P,D){var N={};for(var V in P)Object.prototype.hasOwnProperty.call(P,V)&&D.indexOf(V)<0&&(N[V]=P[V]);if(null!=P&&"function"==typeof Object.getOwnPropertySymbols){var Z=0;for(V=Object.getOwnPropertySymbols(P);Z<V.length;Z++)D.indexOf(V[Z])<0&&Object.prototype.propertyIsEnumerable.call(P,V[Z])&&(N[V[Z]]=P[V[Z]])}return N}function X(P,D,N,V){var de,Z=arguments.length,j=Z<3?D:null===V?V=Object.getOwnPropertyDescriptor(D,N):V;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)j=Reflect.decorate(P,D,N,V);else for(var $e=P.length-1;$e>=0;$e--)(de=P[$e])&&(j=(Z<3?de(j):Z>3?de(D,N,j):de(D,N))||j);return Z>3&&j&&Object.defineProperty(D,N,j),j}function z(P,D){return function(N,V){D(N,V,P)}}function M(P,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(P,D)}function L(P,D,N,V){return new(N||(N=Promise))(function(j,de){function $e(pt){try{xe(V.next(pt))}catch(vt){de(vt)}}function _t(pt){try{xe(V.throw(pt))}catch(vt){de(vt)}}function xe(pt){pt.done?j(pt.value):function Z(j){return j instanceof N?j:new N(function(de){de(j)})}(pt.value).then($e,_t)}xe((V=V.apply(P,D||[])).next())})}function B(P,D){var V,Z,j,de,N={label:0,sent:function(){if(1&j[0])throw j[1];return j[1]},trys:[],ops:[]};return de={next:$e(0),throw:$e(1),return:$e(2)},"function"==typeof Symbol&&(de[Symbol.iterator]=function(){return this}),de;function $e(xe){return function(pt){return function _t(xe){if(V)throw new TypeError("Generator is already executing.");for(;N;)try{if(V=1,Z&&(j=2&xe[0]?Z.return:xe[0]?Z.throw||((j=Z.return)&&j.call(Z),0):Z.next)&&!(j=j.call(Z,xe[1])).done)return j;switch(Z=0,j&&(xe=[2&xe[0],j.value]),xe[0]){case 0:case 1:j=xe;break;case 4:return N.label++,{value:xe[1],done:!1};case 5:N.label++,Z=xe[1],xe=[0];continue;case 7:xe=N.ops.pop(),N.trys.pop();continue;default:if(!(j=(j=N.trys).length>0&&j[j.length-1])&&(6===xe[0]||2===xe[0])){N=0;continue}if(3===xe[0]&&(!j||xe[1]>j[0]&&xe[1]<j[3])){N.label=xe[1];break}if(6===xe[0]&&N.label<j[1]){N.label=j[1],j=xe;break}if(j&&N.label<j[2]){N.label=j[2],N.ops.push(xe);break}j[2]&&N.ops.pop(),N.trys.pop();continue}xe=D.call(P,N)}catch(pt){xe=[6,pt],Z=0}finally{V=j=0}if(5&xe[0])throw xe[1];return{value:xe[0]?xe[1]:void 0,done:!0}}([xe,pt])}}}function W(P,D,N,V){void 0===V&&(V=N),P[V]=D[N]}function ee(P,D){for(var N in P)"default"!==N&&!D.hasOwnProperty(N)&&(D[N]=P[N])}function ue(P){var D="function"==typeof Symbol&&Symbol.iterator,N=D&&P[D],V=0;if(N)return N.call(P);if(P&&"number"==typeof P.length)return{next:function(){return P&&V>=P.length&&(P=void 0),{value:P&&P[V++],done:!P}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function fe(P,D){var N="function"==typeof Symbol&&P[Symbol.iterator];if(!N)return P;var Z,de,V=N.call(P),j=[];try{for(;(void 0===D||D-- >0)&&!(Z=V.next()).done;)j.push(Z.value)}catch($e){de={error:$e}}finally{try{Z&&!Z.done&&(N=V.return)&&N.call(V)}finally{if(de)throw de.error}}return j}function we(){for(var P=[],D=0;D<arguments.length;D++)P=P.concat(fe(arguments[D]));return P}function ge(){for(var P=0,D=0,N=arguments.length;D<N;D++)P+=arguments[D].length;var V=Array(P),Z=0;for(D=0;D<N;D++)for(var j=arguments[D],de=0,$e=j.length;de<$e;de++,Z++)V[Z]=j[de];return V}function Ie(P){return this instanceof Ie?(this.v=P,this):new Ie(P)}function Xe(P,D,N){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Z,V=N.apply(P,D||[]),j=[];return Z={},de("next"),de("throw"),de("return"),Z[Symbol.asyncIterator]=function(){return this},Z;function de(We){V[We]&&(Z[We]=function(yt){return new Promise(function(Kt,tn){j.push([We,yt,Kt,tn])>1||$e(We,yt)})})}function $e(We,yt){try{!function _t(We){We.value instanceof Ie?Promise.resolve(We.value.v).then(xe,pt):vt(j[0][2],We)}(V[We](yt))}catch(Kt){vt(j[0][3],Kt)}}function xe(We){$e("next",We)}function pt(We){$e("throw",We)}function vt(We,yt){We(yt),j.shift(),j.length&&$e(j[0][0],j[0][1])}}function pe(P){var D,N;return D={},V("next"),V("throw",function(Z){throw Z}),V("return"),D[Symbol.iterator]=function(){return this},D;function V(Z,j){D[Z]=P[Z]?function(de){return(N=!N)?{value:Ie(P[Z](de)),done:"return"===Z}:j?j(de):de}:j}}function he(P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,D=P[Symbol.asyncIterator];return D?D.call(P):(P=ue(P),N={},V("next"),V("throw"),V("return"),N[Symbol.asyncIterator]=function(){return this},N);function V(j){N[j]=P[j]&&function(de){return new Promise(function($e,_t){!function Z(j,de,$e,_t){Promise.resolve(_t).then(function(xe){j({value:xe,done:$e})},de)}($e,_t,(de=P[j](de)).done,de.value)})}}}function Te(P,D){return Object.defineProperty?Object.defineProperty(P,"raw",{value:D}):P.raw=D,P}function Fe(P){if(P&&P.__esModule)return P;var D={};if(null!=P)for(var N in P)Object.hasOwnProperty.call(P,N)&&(D[N]=P[N]);return D.default=P,D}function at(P){return P&&P.__esModule?P:{default:P}}function Ye(P,D){if(!D.has(P))throw new TypeError("attempted to get private field on non-instance");return D.get(P)}function Ge(P,D,N){if(!D.has(P))throw new TypeError("attempted to set private field on non-instance");return D.set(P,N),N}},1980:(He,J,G)=>{"use strict";G.r(J),G.d(J,{__assign:()=>b,__asyncDelegator:()=>pe,__asyncGenerator:()=>Xe,__asyncValues:()=>he,__await:()=>Ie,__awaiter:()=>L,__classPrivateFieldGet:()=>Ye,__classPrivateFieldSet:()=>Ge,__createBinding:()=>W,__decorate:()=>X,__exportStar:()=>ee,__extends:()=>ie,__generator:()=>B,__importDefault:()=>at,__importStar:()=>Fe,__makeTemplateObject:()=>Te,__metadata:()=>M,__param:()=>z,__read:()=>fe,__rest:()=>H,__spread:()=>we,__spreadArrays:()=>ge,__values:()=>ue});var U=function(P,D){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,V){N.__proto__=V}||function(N,V){for(var Z in V)V.hasOwnProperty(Z)&&(N[Z]=V[Z])})(P,D)};function ie(P,D){function N(){this.constructor=P}U(P,D),P.prototype=null===D?Object.create(D):(N.prototype=D.prototype,new N)}var b=function(){return b=Object.assign||function(D){for(var N,V=1,Z=arguments.length;V<Z;V++)for(var j in N=arguments[V])Object.prototype.hasOwnProperty.call(N,j)&&(D[j]=N[j]);return D},b.apply(this,arguments)};function H(P,D){var N={};for(var V in P)Object.prototype.hasOwnProperty.call(P,V)&&D.indexOf(V)<0&&(N[V]=P[V]);if(null!=P&&"function"==typeof Object.getOwnPropertySymbols){var Z=0;for(V=Object.getOwnPropertySymbols(P);Z<V.length;Z++)D.indexOf(V[Z])<0&&Object.prototype.propertyIsEnumerable.call(P,V[Z])&&(N[V[Z]]=P[V[Z]])}return N}function X(P,D,N,V){var de,Z=arguments.length,j=Z<3?D:null===V?V=Object.getOwnPropertyDescriptor(D,N):V;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)j=Reflect.decorate(P,D,N,V);else for(var $e=P.length-1;$e>=0;$e--)(de=P[$e])&&(j=(Z<3?de(j):Z>3?de(D,N,j):de(D,N))||j);return Z>3&&j&&Object.defineProperty(D,N,j),j}function z(P,D){return function(N,V){D(N,V,P)}}function M(P,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(P,D)}function L(P,D,N,V){return new(N||(N=Promise))(function(j,de){function $e(pt){try{xe(V.next(pt))}catch(vt){de(vt)}}function _t(pt){try{xe(V.throw(pt))}catch(vt){de(vt)}}function xe(pt){pt.done?j(pt.value):function Z(j){return j instanceof N?j:new N(function(de){de(j)})}(pt.value).then($e,_t)}xe((V=V.apply(P,D||[])).next())})}function B(P,D){var V,Z,j,de,N={label:0,sent:function(){if(1&j[0])throw j[1];return j[1]},trys:[],ops:[]};return de={next:$e(0),throw:$e(1),return:$e(2)},"function"==typeof Symbol&&(de[Symbol.iterator]=function(){return this}),de;function $e(xe){return function(pt){return function _t(xe){if(V)throw new TypeError("Generator is already executing.");for(;N;)try{if(V=1,Z&&(j=2&xe[0]?Z.return:xe[0]?Z.throw||((j=Z.return)&&j.call(Z),0):Z.next)&&!(j=j.call(Z,xe[1])).done)return j;switch(Z=0,j&&(xe=[2&xe[0],j.value]),xe[0]){case 0:case 1:j=xe;break;case 4:return N.label++,{value:xe[1],done:!1};case 5:N.label++,Z=xe[1],xe=[0];continue;case 7:xe=N.ops.pop(),N.trys.pop();continue;default:if(!(j=(j=N.trys).length>0&&j[j.length-1])&&(6===xe[0]||2===xe[0])){N=0;continue}if(3===xe[0]&&(!j||xe[1]>j[0]&&xe[1]<j[3])){N.label=xe[1];break}if(6===xe[0]&&N.label<j[1]){N.label=j[1],j=xe;break}if(j&&N.label<j[2]){N.label=j[2],N.ops.push(xe);break}j[2]&&N.ops.pop(),N.trys.pop();continue}xe=D.call(P,N)}catch(pt){xe=[6,pt],Z=0}finally{V=j=0}if(5&xe[0])throw xe[1];return{value:xe[0]?xe[1]:void 0,done:!0}}([xe,pt])}}}function W(P,D,N,V){void 0===V&&(V=N),P[V]=D[N]}function ee(P,D){for(var N in P)"default"!==N&&!D.hasOwnProperty(N)&&(D[N]=P[N])}function ue(P){var D="function"==typeof Symbol&&Symbol.iterator,N=D&&P[D],V=0;if(N)return N.call(P);if(P&&"number"==typeof P.length)return{next:function(){return P&&V>=P.length&&(P=void 0),{value:P&&P[V++],done:!P}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function fe(P,D){var N="function"==typeof Symbol&&P[Symbol.iterator];if(!N)return P;var Z,de,V=N.call(P),j=[];try{for(;(void 0===D||D-- >0)&&!(Z=V.next()).done;)j.push(Z.value)}catch($e){de={error:$e}}finally{try{Z&&!Z.done&&(N=V.return)&&N.call(V)}finally{if(de)throw de.error}}return j}function we(){for(var P=[],D=0;D<arguments.length;D++)P=P.concat(fe(arguments[D]));return P}function ge(){for(var P=0,D=0,N=arguments.length;D<N;D++)P+=arguments[D].length;var V=Array(P),Z=0;for(D=0;D<N;D++)for(var j=arguments[D],de=0,$e=j.length;de<$e;de++,Z++)V[Z]=j[de];return V}function Ie(P){return this instanceof Ie?(this.v=P,this):new Ie(P)}function Xe(P,D,N){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Z,V=N.apply(P,D||[]),j=[];return Z={},de("next"),de("throw"),de("return"),Z[Symbol.asyncIterator]=function(){return this},Z;function de(We){V[We]&&(Z[We]=function(yt){return new Promise(function(Kt,tn){j.push([We,yt,Kt,tn])>1||$e(We,yt)})})}function $e(We,yt){try{!function _t(We){We.value instanceof Ie?Promise.resolve(We.value.v).then(xe,pt):vt(j[0][2],We)}(V[We](yt))}catch(Kt){vt(j[0][3],Kt)}}function xe(We){$e("next",We)}function pt(We){$e("throw",We)}function vt(We,yt){We(yt),j.shift(),j.length&&$e(j[0][0],j[0][1])}}function pe(P){var D,N;return D={},V("next"),V("throw",function(Z){throw Z}),V("return"),D[Symbol.iterator]=function(){return this},D;function V(Z,j){D[Z]=P[Z]?function(de){return(N=!N)?{value:Ie(P[Z](de)),done:"return"===Z}:j?j(de):de}:j}}function he(P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,D=P[Symbol.asyncIterator];return D?D.call(P):(P=ue(P),N={},V("next"),V("throw"),V("return"),N[Symbol.asyncIterator]=function(){return this},N);function V(j){N[j]=P[j]&&function(de){return new Promise(function($e,_t){!function Z(j,de,$e,_t){Promise.resolve(_t).then(function(xe){j({value:xe,done:$e})},de)}($e,_t,(de=P[j](de)).done,de.value)})}}}function Te(P,D){return Object.defineProperty?Object.defineProperty(P,"raw",{value:D}):P.raw=D,P}function Fe(P){if(P&&P.__esModule)return P;var D={};if(null!=P)for(var N in P)Object.hasOwnProperty.call(P,N)&&(D[N]=P[N]);return D.default=P,D}function at(P){return P&&P.__esModule?P:{default:P}}function Ye(P,D){if(!D.has(P))throw new TypeError("attempted to get private field on non-instance");return D.get(P)}function Ge(P,D,N){if(!D.has(P))throw new TypeError("attempted to set private field on non-instance");return D.set(P,N),N}},5789:(He,J,G)=>{"use strict";G.r(J),G.d(J,{__assign:()=>b,__asyncDelegator:()=>pe,__asyncGenerator:()=>Xe,__asyncValues:()=>he,__await:()=>Ie,__awaiter:()=>L,__classPrivateFieldGet:()=>Ye,__classPrivateFieldSet:()=>Ge,__createBinding:()=>W,__decorate:()=>X,__exportStar:()=>ee,__extends:()=>ie,__generator:()=>B,__importDefault:()=>at,__importStar:()=>Fe,__makeTemplateObject:()=>Te,__metadata:()=>M,__param:()=>z,__read:()=>fe,__rest:()=>H,__spread:()=>we,__spreadArrays:()=>ge,__values:()=>ue});var U=function(P,D){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,V){N.__proto__=V}||function(N,V){for(var Z in V)V.hasOwnProperty(Z)&&(N[Z]=V[Z])})(P,D)};function ie(P,D){function N(){this.constructor=P}U(P,D),P.prototype=null===D?Object.create(D):(N.prototype=D.prototype,new N)}var b=function(){return b=Object.assign||function(D){for(var N,V=1,Z=arguments.length;V<Z;V++)for(var j in N=arguments[V])Object.prototype.hasOwnProperty.call(N,j)&&(D[j]=N[j]);return D},b.apply(this,arguments)};function H(P,D){var N={};for(var V in P)Object.prototype.hasOwnProperty.call(P,V)&&D.indexOf(V)<0&&(N[V]=P[V]);if(null!=P&&"function"==typeof Object.getOwnPropertySymbols){var Z=0;for(V=Object.getOwnPropertySymbols(P);Z<V.length;Z++)D.indexOf(V[Z])<0&&Object.prototype.propertyIsEnumerable.call(P,V[Z])&&(N[V[Z]]=P[V[Z]])}return N}function X(P,D,N,V){var de,Z=arguments.length,j=Z<3?D:null===V?V=Object.getOwnPropertyDescriptor(D,N):V;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)j=Reflect.decorate(P,D,N,V);else for(var $e=P.length-1;$e>=0;$e--)(de=P[$e])&&(j=(Z<3?de(j):Z>3?de(D,N,j):de(D,N))||j);return Z>3&&j&&Object.defineProperty(D,N,j),j}function z(P,D){return function(N,V){D(N,V,P)}}function M(P,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(P,D)}function L(P,D,N,V){return new(N||(N=Promise))(function(j,de){function $e(pt){try{xe(V.next(pt))}catch(vt){de(vt)}}function _t(pt){try{xe(V.throw(pt))}catch(vt){de(vt)}}function xe(pt){pt.done?j(pt.value):function Z(j){return j instanceof N?j:new N(function(de){de(j)})}(pt.value).then($e,_t)}xe((V=V.apply(P,D||[])).next())})}function B(P,D){var V,Z,j,de,N={label:0,sent:function(){if(1&j[0])throw j[1];return j[1]},trys:[],ops:[]};return de={next:$e(0),throw:$e(1),return:$e(2)},"function"==typeof Symbol&&(de[Symbol.iterator]=function(){return this}),de;function $e(xe){return function(pt){return function _t(xe){if(V)throw new TypeError("Generator is already executing.");for(;N;)try{if(V=1,Z&&(j=2&xe[0]?Z.return:xe[0]?Z.throw||((j=Z.return)&&j.call(Z),0):Z.next)&&!(j=j.call(Z,xe[1])).done)return j;switch(Z=0,j&&(xe=[2&xe[0],j.value]),xe[0]){case 0:case 1:j=xe;break;case 4:return N.label++,{value:xe[1],done:!1};case 5:N.label++,Z=xe[1],xe=[0];continue;case 7:xe=N.ops.pop(),N.trys.pop();continue;default:if(!(j=(j=N.trys).length>0&&j[j.length-1])&&(6===xe[0]||2===xe[0])){N=0;continue}if(3===xe[0]&&(!j||xe[1]>j[0]&&xe[1]<j[3])){N.label=xe[1];break}if(6===xe[0]&&N.label<j[1]){N.label=j[1],j=xe;break}if(j&&N.label<j[2]){N.label=j[2],N.ops.push(xe);break}j[2]&&N.ops.pop(),N.trys.pop();continue}xe=D.call(P,N)}catch(pt){xe=[6,pt],Z=0}finally{V=j=0}if(5&xe[0])throw xe[1];return{value:xe[0]?xe[1]:void 0,done:!0}}([xe,pt])}}}function W(P,D,N,V){void 0===V&&(V=N),P[V]=D[N]}function ee(P,D){for(var N in P)"default"!==N&&!D.hasOwnProperty(N)&&(D[N]=P[N])}function ue(P){var D="function"==typeof Symbol&&Symbol.iterator,N=D&&P[D],V=0;if(N)return N.call(P);if(P&&"number"==typeof P.length)return{next:function(){return P&&V>=P.length&&(P=void 0),{value:P&&P[V++],done:!P}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function fe(P,D){var N="function"==typeof Symbol&&P[Symbol.iterator];if(!N)return P;var Z,de,V=N.call(P),j=[];try{for(;(void 0===D||D-- >0)&&!(Z=V.next()).done;)j.push(Z.value)}catch($e){de={error:$e}}finally{try{Z&&!Z.done&&(N=V.return)&&N.call(V)}finally{if(de)throw de.error}}return j}function we(){for(var P=[],D=0;D<arguments.length;D++)P=P.concat(fe(arguments[D]));return P}function ge(){for(var P=0,D=0,N=arguments.length;D<N;D++)P+=arguments[D].length;var V=Array(P),Z=0;for(D=0;D<N;D++)for(var j=arguments[D],de=0,$e=j.length;de<$e;de++,Z++)V[Z]=j[de];return V}function Ie(P){return this instanceof Ie?(this.v=P,this):new Ie(P)}function Xe(P,D,N){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Z,V=N.apply(P,D||[]),j=[];return Z={},de("next"),de("throw"),de("return"),Z[Symbol.asyncIterator]=function(){return this},Z;function de(We){V[We]&&(Z[We]=function(yt){return new Promise(function(Kt,tn){j.push([We,yt,Kt,tn])>1||$e(We,yt)})})}function $e(We,yt){try{!function _t(We){We.value instanceof Ie?Promise.resolve(We.value.v).then(xe,pt):vt(j[0][2],We)}(V[We](yt))}catch(Kt){vt(j[0][3],Kt)}}function xe(We){$e("next",We)}function pt(We){$e("throw",We)}function vt(We,yt){We(yt),j.shift(),j.length&&$e(j[0][0],j[0][1])}}function pe(P){var D,N;return D={},V("next"),V("throw",function(Z){throw Z}),V("return"),D[Symbol.iterator]=function(){return this},D;function V(Z,j){D[Z]=P[Z]?function(de){return(N=!N)?{value:Ie(P[Z](de)),done:"return"===Z}:j?j(de):de}:j}}function he(P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,D=P[Symbol.asyncIterator];return D?D.call(P):(P=ue(P),N={},V("next"),V("throw"),V("return"),N[Symbol.asyncIterator]=function(){return this},N);function V(j){N[j]=P[j]&&function(de){return new Promise(function($e,_t){!function Z(j,de,$e,_t){Promise.resolve(_t).then(function(xe){j({value:xe,done:$e})},de)}($e,_t,(de=P[j](de)).done,de.value)})}}}function Te(P,D){return Object.defineProperty?Object.defineProperty(P,"raw",{value:D}):P.raw=D,P}function Fe(P){if(P&&P.__esModule)return P;var D={};if(null!=P)for(var N in P)Object.hasOwnProperty.call(P,N)&&(D[N]=P[N]);return D.default=P,D}function at(P){return P&&P.__esModule?P:{default:P}}function Ye(P,D){if(!D.has(P))throw new TypeError("attempted to get private field on non-instance");return D.get(P)}function Ge(P,D,N){if(!D.has(P))throw new TypeError("attempted to set private field on non-instance");return D.set(P,N),N}},3541:(He,J,G)=>{"use strict";G.r(J),G.d(J,{__assign:()=>b,__asyncDelegator:()=>pe,__asyncGenerator:()=>Xe,__asyncValues:()=>he,__await:()=>Ie,__awaiter:()=>L,__classPrivateFieldGet:()=>Ye,__classPrivateFieldSet:()=>Ge,__createBinding:()=>W,__decorate:()=>X,__exportStar:()=>ee,__extends:()=>ie,__generator:()=>B,__importDefault:()=>at,__importStar:()=>Fe,__makeTemplateObject:()=>Te,__metadata:()=>M,__param:()=>z,__read:()=>fe,__rest:()=>H,__spread:()=>we,__spreadArrays:()=>ge,__values:()=>ue});var U=function(P,D){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,V){N.__proto__=V}||function(N,V){for(var Z in V)V.hasOwnProperty(Z)&&(N[Z]=V[Z])})(P,D)};function ie(P,D){function N(){this.constructor=P}U(P,D),P.prototype=null===D?Object.create(D):(N.prototype=D.prototype,new N)}var b=function(){return b=Object.assign||function(D){for(var N,V=1,Z=arguments.length;V<Z;V++)for(var j in N=arguments[V])Object.prototype.hasOwnProperty.call(N,j)&&(D[j]=N[j]);return D},b.apply(this,arguments)};function H(P,D){var N={};for(var V in P)Object.prototype.hasOwnProperty.call(P,V)&&D.indexOf(V)<0&&(N[V]=P[V]);if(null!=P&&"function"==typeof Object.getOwnPropertySymbols){var Z=0;for(V=Object.getOwnPropertySymbols(P);Z<V.length;Z++)D.indexOf(V[Z])<0&&Object.prototype.propertyIsEnumerable.call(P,V[Z])&&(N[V[Z]]=P[V[Z]])}return N}function X(P,D,N,V){var de,Z=arguments.length,j=Z<3?D:null===V?V=Object.getOwnPropertyDescriptor(D,N):V;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)j=Reflect.decorate(P,D,N,V);else for(var $e=P.length-1;$e>=0;$e--)(de=P[$e])&&(j=(Z<3?de(j):Z>3?de(D,N,j):de(D,N))||j);return Z>3&&j&&Object.defineProperty(D,N,j),j}function z(P,D){return function(N,V){D(N,V,P)}}function M(P,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(P,D)}function L(P,D,N,V){return new(N||(N=Promise))(function(j,de){function $e(pt){try{xe(V.next(pt))}catch(vt){de(vt)}}function _t(pt){try{xe(V.throw(pt))}catch(vt){de(vt)}}function xe(pt){pt.done?j(pt.value):function Z(j){return j instanceof N?j:new N(function(de){de(j)})}(pt.value).then($e,_t)}xe((V=V.apply(P,D||[])).next())})}function B(P,D){var V,Z,j,de,N={label:0,sent:function(){if(1&j[0])throw j[1];return j[1]},trys:[],ops:[]};return de={next:$e(0),throw:$e(1),return:$e(2)},"function"==typeof Symbol&&(de[Symbol.iterator]=function(){return this}),de;function $e(xe){return function(pt){return function _t(xe){if(V)throw new TypeError("Generator is already executing.");for(;N;)try{if(V=1,Z&&(j=2&xe[0]?Z.return:xe[0]?Z.throw||((j=Z.return)&&j.call(Z),0):Z.next)&&!(j=j.call(Z,xe[1])).done)return j;switch(Z=0,j&&(xe=[2&xe[0],j.value]),xe[0]){case 0:case 1:j=xe;break;case 4:return N.label++,{value:xe[1],done:!1};case 5:N.label++,Z=xe[1],xe=[0];continue;case 7:xe=N.ops.pop(),N.trys.pop();continue;default:if(!(j=(j=N.trys).length>0&&j[j.length-1])&&(6===xe[0]||2===xe[0])){N=0;continue}if(3===xe[0]&&(!j||xe[1]>j[0]&&xe[1]<j[3])){N.label=xe[1];break}if(6===xe[0]&&N.label<j[1]){N.label=j[1],j=xe;break}if(j&&N.label<j[2]){N.label=j[2],N.ops.push(xe);break}j[2]&&N.ops.pop(),N.trys.pop();continue}xe=D.call(P,N)}catch(pt){xe=[6,pt],Z=0}finally{V=j=0}if(5&xe[0])throw xe[1];return{value:xe[0]?xe[1]:void 0,done:!0}}([xe,pt])}}}function W(P,D,N,V){void 0===V&&(V=N),P[V]=D[N]}function ee(P,D){for(var N in P)"default"!==N&&!D.hasOwnProperty(N)&&(D[N]=P[N])}function ue(P){var D="function"==typeof Symbol&&Symbol.iterator,N=D&&P[D],V=0;if(N)return N.call(P);if(P&&"number"==typeof P.length)return{next:function(){return P&&V>=P.length&&(P=void 0),{value:P&&P[V++],done:!P}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function fe(P,D){var N="function"==typeof Symbol&&P[Symbol.iterator];if(!N)return P;var Z,de,V=N.call(P),j=[];try{for(;(void 0===D||D-- >0)&&!(Z=V.next()).done;)j.push(Z.value)}catch($e){de={error:$e}}finally{try{Z&&!Z.done&&(N=V.return)&&N.call(V)}finally{if(de)throw de.error}}return j}function we(){for(var P=[],D=0;D<arguments.length;D++)P=P.concat(fe(arguments[D]));return P}function ge(){for(var P=0,D=0,N=arguments.length;D<N;D++)P+=arguments[D].length;var V=Array(P),Z=0;for(D=0;D<N;D++)for(var j=arguments[D],de=0,$e=j.length;de<$e;de++,Z++)V[Z]=j[de];return V}function Ie(P){return this instanceof Ie?(this.v=P,this):new Ie(P)}function Xe(P,D,N){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Z,V=N.apply(P,D||[]),j=[];return Z={},de("next"),de("throw"),de("return"),Z[Symbol.asyncIterator]=function(){return this},Z;function de(We){V[We]&&(Z[We]=function(yt){return new Promise(function(Kt,tn){j.push([We,yt,Kt,tn])>1||$e(We,yt)})})}function $e(We,yt){try{!function _t(We){We.value instanceof Ie?Promise.resolve(We.value.v).then(xe,pt):vt(j[0][2],We)}(V[We](yt))}catch(Kt){vt(j[0][3],Kt)}}function xe(We){$e("next",We)}function pt(We){$e("throw",We)}function vt(We,yt){We(yt),j.shift(),j.length&&$e(j[0][0],j[0][1])}}function pe(P){var D,N;return D={},V("next"),V("throw",function(Z){throw Z}),V("return"),D[Symbol.iterator]=function(){return this},D;function V(Z,j){D[Z]=P[Z]?function(de){return(N=!N)?{value:Ie(P[Z](de)),done:"return"===Z}:j?j(de):de}:j}}function he(P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,D=P[Symbol.asyncIterator];return D?D.call(P):(P=ue(P),N={},V("next"),V("throw"),V("return"),N[Symbol.asyncIterator]=function(){return this},N);function V(j){N[j]=P[j]&&function(de){return new Promise(function($e,_t){!function Z(j,de,$e,_t){Promise.resolve(_t).then(function(xe){j({value:xe,done:$e})},de)}($e,_t,(de=P[j](de)).done,de.value)})}}}function Te(P,D){return Object.defineProperty?Object.defineProperty(P,"raw",{value:D}):P.raw=D,P}function Fe(P){if(P&&P.__esModule)return P;var D={};if(null!=P)for(var N in P)Object.hasOwnProperty.call(P,N)&&(D[N]=P[N]);return D.default=P,D}function at(P){return P&&P.__esModule?P:{default:P}}function Ye(P,D){if(!D.has(P))throw new TypeError("attempted to get private field on non-instance");return D.get(P)}function Ge(P,D,N){if(!D.has(P))throw new TypeError("attempted to set private field on non-instance");return D.set(P,N),N}},7840:(He,J,G)=>{"use strict";G.r(J),G.d(J,{__assign:()=>b,__asyncDelegator:()=>pe,__asyncGenerator:()=>Xe,__asyncValues:()=>he,__await:()=>Ie,__awaiter:()=>L,__classPrivateFieldGet:()=>Ye,__classPrivateFieldSet:()=>Ge,__createBinding:()=>W,__decorate:()=>X,__exportStar:()=>ee,__extends:()=>ie,__generator:()=>B,__importDefault:()=>at,__importStar:()=>Fe,__makeTemplateObject:()=>Te,__metadata:()=>M,__param:()=>z,__read:()=>fe,__rest:()=>H,__spread:()=>we,__spreadArrays:()=>ge,__values:()=>ue});var U=function(P,D){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,V){N.__proto__=V}||function(N,V){for(var Z in V)V.hasOwnProperty(Z)&&(N[Z]=V[Z])})(P,D)};function ie(P,D){function N(){this.constructor=P}U(P,D),P.prototype=null===D?Object.create(D):(N.prototype=D.prototype,new N)}var b=function(){return b=Object.assign||function(D){for(var N,V=1,Z=arguments.length;V<Z;V++)for(var j in N=arguments[V])Object.prototype.hasOwnProperty.call(N,j)&&(D[j]=N[j]);return D},b.apply(this,arguments)};function H(P,D){var N={};for(var V in P)Object.prototype.hasOwnProperty.call(P,V)&&D.indexOf(V)<0&&(N[V]=P[V]);if(null!=P&&"function"==typeof Object.getOwnPropertySymbols){var Z=0;for(V=Object.getOwnPropertySymbols(P);Z<V.length;Z++)D.indexOf(V[Z])<0&&Object.prototype.propertyIsEnumerable.call(P,V[Z])&&(N[V[Z]]=P[V[Z]])}return N}function X(P,D,N,V){var de,Z=arguments.length,j=Z<3?D:null===V?V=Object.getOwnPropertyDescriptor(D,N):V;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)j=Reflect.decorate(P,D,N,V);else for(var $e=P.length-1;$e>=0;$e--)(de=P[$e])&&(j=(Z<3?de(j):Z>3?de(D,N,j):de(D,N))||j);return Z>3&&j&&Object.defineProperty(D,N,j),j}function z(P,D){return function(N,V){D(N,V,P)}}function M(P,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(P,D)}function L(P,D,N,V){return new(N||(N=Promise))(function(j,de){function $e(pt){try{xe(V.next(pt))}catch(vt){de(vt)}}function _t(pt){try{xe(V.throw(pt))}catch(vt){de(vt)}}function xe(pt){pt.done?j(pt.value):function Z(j){return j instanceof N?j:new N(function(de){de(j)})}(pt.value).then($e,_t)}xe((V=V.apply(P,D||[])).next())})}function B(P,D){var V,Z,j,de,N={label:0,sent:function(){if(1&j[0])throw j[1];return j[1]},trys:[],ops:[]};return de={next:$e(0),throw:$e(1),return:$e(2)},"function"==typeof Symbol&&(de[Symbol.iterator]=function(){return this}),de;function $e(xe){return function(pt){return function _t(xe){if(V)throw new TypeError("Generator is already executing.");for(;N;)try{if(V=1,Z&&(j=2&xe[0]?Z.return:xe[0]?Z.throw||((j=Z.return)&&j.call(Z),0):Z.next)&&!(j=j.call(Z,xe[1])).done)return j;switch(Z=0,j&&(xe=[2&xe[0],j.value]),xe[0]){case 0:case 1:j=xe;break;case 4:return N.label++,{value:xe[1],done:!1};case 5:N.label++,Z=xe[1],xe=[0];continue;case 7:xe=N.ops.pop(),N.trys.pop();continue;default:if(!(j=(j=N.trys).length>0&&j[j.length-1])&&(6===xe[0]||2===xe[0])){N=0;continue}if(3===xe[0]&&(!j||xe[1]>j[0]&&xe[1]<j[3])){N.label=xe[1];break}if(6===xe[0]&&N.label<j[1]){N.label=j[1],j=xe;break}if(j&&N.label<j[2]){N.label=j[2],N.ops.push(xe);break}j[2]&&N.ops.pop(),N.trys.pop();continue}xe=D.call(P,N)}catch(pt){xe=[6,pt],Z=0}finally{V=j=0}if(5&xe[0])throw xe[1];return{value:xe[0]?xe[1]:void 0,done:!0}}([xe,pt])}}}function W(P,D,N,V){void 0===V&&(V=N),P[V]=D[N]}function ee(P,D){for(var N in P)"default"!==N&&!D.hasOwnProperty(N)&&(D[N]=P[N])}function ue(P){var D="function"==typeof Symbol&&Symbol.iterator,N=D&&P[D],V=0;if(N)return N.call(P);if(P&&"number"==typeof P.length)return{next:function(){return P&&V>=P.length&&(P=void 0),{value:P&&P[V++],done:!P}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function fe(P,D){var N="function"==typeof Symbol&&P[Symbol.iterator];if(!N)return P;var Z,de,V=N.call(P),j=[];try{for(;(void 0===D||D-- >0)&&!(Z=V.next()).done;)j.push(Z.value)}catch($e){de={error:$e}}finally{try{Z&&!Z.done&&(N=V.return)&&N.call(V)}finally{if(de)throw de.error}}return j}function we(){for(var P=[],D=0;D<arguments.length;D++)P=P.concat(fe(arguments[D]));return P}function ge(){for(var P=0,D=0,N=arguments.length;D<N;D++)P+=arguments[D].length;var V=Array(P),Z=0;for(D=0;D<N;D++)for(var j=arguments[D],de=0,$e=j.length;de<$e;de++,Z++)V[Z]=j[de];return V}function Ie(P){return this instanceof Ie?(this.v=P,this):new Ie(P)}function Xe(P,D,N){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Z,V=N.apply(P,D||[]),j=[];return Z={},de("next"),de("throw"),de("return"),Z[Symbol.asyncIterator]=function(){return this},Z;function de(We){V[We]&&(Z[We]=function(yt){return new Promise(function(Kt,tn){j.push([We,yt,Kt,tn])>1||$e(We,yt)})})}function $e(We,yt){try{!function _t(We){We.value instanceof Ie?Promise.resolve(We.value.v).then(xe,pt):vt(j[0][2],We)}(V[We](yt))}catch(Kt){vt(j[0][3],Kt)}}function xe(We){$e("next",We)}function pt(We){$e("throw",We)}function vt(We,yt){We(yt),j.shift(),j.length&&$e(j[0][0],j[0][1])}}function pe(P){var D,N;return D={},V("next"),V("throw",function(Z){throw Z}),V("return"),D[Symbol.iterator]=function(){return this},D;function V(Z,j){D[Z]=P[Z]?function(de){return(N=!N)?{value:Ie(P[Z](de)),done:"return"===Z}:j?j(de):de}:j}}function he(P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,D=P[Symbol.asyncIterator];return D?D.call(P):(P=ue(P),N={},V("next"),V("throw"),V("return"),N[Symbol.asyncIterator]=function(){return this},N);function V(j){N[j]=P[j]&&function(de){return new Promise(function($e,_t){!function Z(j,de,$e,_t){Promise.resolve(_t).then(function(xe){j({value:xe,done:$e})},de)}($e,_t,(de=P[j](de)).done,de.value)})}}}function Te(P,D){return Object.defineProperty?Object.defineProperty(P,"raw",{value:D}):P.raw=D,P}function Fe(P){if(P&&P.__esModule)return P;var D={};if(null!=P)for(var N in P)Object.hasOwnProperty.call(P,N)&&(D[N]=P[N]);return D.default=P,D}function at(P){return P&&P.__esModule?P:{default:P}}function Ye(P,D){if(!D.has(P))throw new TypeError("attempted to get private field on non-instance");return D.get(P)}function Ge(P,D,N){if(!D.has(P))throw new TypeError("attempted to set private field on non-instance");return D.set(P,N),N}},4806:(He,J,G)=>{"use strict";G.r(J),G.d(J,{__assign:()=>b,__asyncDelegator:()=>pe,__asyncGenerator:()=>Xe,__asyncValues:()=>he,__await:()=>Ie,__awaiter:()=>L,__classPrivateFieldGet:()=>Ye,__classPrivateFieldSet:()=>Ge,__createBinding:()=>W,__decorate:()=>X,__exportStar:()=>ee,__extends:()=>ie,__generator:()=>B,__importDefault:()=>at,__importStar:()=>Fe,__makeTemplateObject:()=>Te,__metadata:()=>M,__param:()=>z,__read:()=>fe,__rest:()=>H,__spread:()=>we,__spreadArrays:()=>ge,__values:()=>ue});var U=function(P,D){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,V){N.__proto__=V}||function(N,V){for(var Z in V)V.hasOwnProperty(Z)&&(N[Z]=V[Z])})(P,D)};function ie(P,D){function N(){this.constructor=P}U(P,D),P.prototype=null===D?Object.create(D):(N.prototype=D.prototype,new N)}var b=function(){return b=Object.assign||function(D){for(var N,V=1,Z=arguments.length;V<Z;V++)for(var j in N=arguments[V])Object.prototype.hasOwnProperty.call(N,j)&&(D[j]=N[j]);return D},b.apply(this,arguments)};function H(P,D){var N={};for(var V in P)Object.prototype.hasOwnProperty.call(P,V)&&D.indexOf(V)<0&&(N[V]=P[V]);if(null!=P&&"function"==typeof Object.getOwnPropertySymbols){var Z=0;for(V=Object.getOwnPropertySymbols(P);Z<V.length;Z++)D.indexOf(V[Z])<0&&Object.prototype.propertyIsEnumerable.call(P,V[Z])&&(N[V[Z]]=P[V[Z]])}return N}function X(P,D,N,V){var de,Z=arguments.length,j=Z<3?D:null===V?V=Object.getOwnPropertyDescriptor(D,N):V;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)j=Reflect.decorate(P,D,N,V);else for(var $e=P.length-1;$e>=0;$e--)(de=P[$e])&&(j=(Z<3?de(j):Z>3?de(D,N,j):de(D,N))||j);return Z>3&&j&&Object.defineProperty(D,N,j),j}function z(P,D){return function(N,V){D(N,V,P)}}function M(P,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(P,D)}function L(P,D,N,V){return new(N||(N=Promise))(function(j,de){function $e(pt){try{xe(V.next(pt))}catch(vt){de(vt)}}function _t(pt){try{xe(V.throw(pt))}catch(vt){de(vt)}}function xe(pt){pt.done?j(pt.value):function Z(j){return j instanceof N?j:new N(function(de){de(j)})}(pt.value).then($e,_t)}xe((V=V.apply(P,D||[])).next())})}function B(P,D){var V,Z,j,de,N={label:0,sent:function(){if(1&j[0])throw j[1];return j[1]},trys:[],ops:[]};return de={next:$e(0),throw:$e(1),return:$e(2)},"function"==typeof Symbol&&(de[Symbol.iterator]=function(){return this}),de;function $e(xe){return function(pt){return function _t(xe){if(V)throw new TypeError("Generator is already executing.");for(;N;)try{if(V=1,Z&&(j=2&xe[0]?Z.return:xe[0]?Z.throw||((j=Z.return)&&j.call(Z),0):Z.next)&&!(j=j.call(Z,xe[1])).done)return j;switch(Z=0,j&&(xe=[2&xe[0],j.value]),xe[0]){case 0:case 1:j=xe;break;case 4:return N.label++,{value:xe[1],done:!1};case 5:N.label++,Z=xe[1],xe=[0];continue;case 7:xe=N.ops.pop(),N.trys.pop();continue;default:if(!(j=(j=N.trys).length>0&&j[j.length-1])&&(6===xe[0]||2===xe[0])){N=0;continue}if(3===xe[0]&&(!j||xe[1]>j[0]&&xe[1]<j[3])){N.label=xe[1];break}if(6===xe[0]&&N.label<j[1]){N.label=j[1],j=xe;break}if(j&&N.label<j[2]){N.label=j[2],N.ops.push(xe);break}j[2]&&N.ops.pop(),N.trys.pop();continue}xe=D.call(P,N)}catch(pt){xe=[6,pt],Z=0}finally{V=j=0}if(5&xe[0])throw xe[1];return{value:xe[0]?xe[1]:void 0,done:!0}}([xe,pt])}}}function W(P,D,N,V){void 0===V&&(V=N),P[V]=D[N]}function ee(P,D){for(var N in P)"default"!==N&&!D.hasOwnProperty(N)&&(D[N]=P[N])}function ue(P){var D="function"==typeof Symbol&&Symbol.iterator,N=D&&P[D],V=0;if(N)return N.call(P);if(P&&"number"==typeof P.length)return{next:function(){return P&&V>=P.length&&(P=void 0),{value:P&&P[V++],done:!P}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function fe(P,D){var N="function"==typeof Symbol&&P[Symbol.iterator];if(!N)return P;var Z,de,V=N.call(P),j=[];try{for(;(void 0===D||D-- >0)&&!(Z=V.next()).done;)j.push(Z.value)}catch($e){de={error:$e}}finally{try{Z&&!Z.done&&(N=V.return)&&N.call(V)}finally{if(de)throw de.error}}return j}function we(){for(var P=[],D=0;D<arguments.length;D++)P=P.concat(fe(arguments[D]));return P}function ge(){for(var P=0,D=0,N=arguments.length;D<N;D++)P+=arguments[D].length;var V=Array(P),Z=0;for(D=0;D<N;D++)for(var j=arguments[D],de=0,$e=j.length;de<$e;de++,Z++)V[Z]=j[de];return V}function Ie(P){return this instanceof Ie?(this.v=P,this):new Ie(P)}function Xe(P,D,N){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Z,V=N.apply(P,D||[]),j=[];return Z={},de("next"),de("throw"),de("return"),Z[Symbol.asyncIterator]=function(){return this},Z;function de(We){V[We]&&(Z[We]=function(yt){return new Promise(function(Kt,tn){j.push([We,yt,Kt,tn])>1||$e(We,yt)})})}function $e(We,yt){try{!function _t(We){We.value instanceof Ie?Promise.resolve(We.value.v).then(xe,pt):vt(j[0][2],We)}(V[We](yt))}catch(Kt){vt(j[0][3],Kt)}}function xe(We){$e("next",We)}function pt(We){$e("throw",We)}function vt(We,yt){We(yt),j.shift(),j.length&&$e(j[0][0],j[0][1])}}function pe(P){var D,N;return D={},V("next"),V("throw",function(Z){throw Z}),V("return"),D[Symbol.iterator]=function(){return this},D;function V(Z,j){D[Z]=P[Z]?function(de){return(N=!N)?{value:Ie(P[Z](de)),done:"return"===Z}:j?j(de):de}:j}}function he(P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,D=P[Symbol.asyncIterator];return D?D.call(P):(P=ue(P),N={},V("next"),V("throw"),V("return"),N[Symbol.asyncIterator]=function(){return this},N);function V(j){N[j]=P[j]&&function(de){return new Promise(function($e,_t){!function Z(j,de,$e,_t){Promise.resolve(_t).then(function(xe){j({value:xe,done:$e})},de)}($e,_t,(de=P[j](de)).done,de.value)})}}}function Te(P,D){return Object.defineProperty?Object.defineProperty(P,"raw",{value:D}):P.raw=D,P}function Fe(P){if(P&&P.__esModule)return P;var D={};if(null!=P)for(var N in P)Object.hasOwnProperty.call(P,N)&&(D[N]=P[N]);return D.default=P,D}function at(P){return P&&P.__esModule?P:{default:P}}function Ye(P,D){if(!D.has(P))throw new TypeError("attempted to get private field on non-instance");return D.get(P)}function Ge(P,D,N){if(!D.has(P))throw new TypeError("attempted to set private field on non-instance");return D.set(P,N),N}},5955:(He,J,G)=>{"use strict";G.r(J),G.d(J,{__assign:()=>b,__asyncDelegator:()=>pe,__asyncGenerator:()=>Xe,__asyncValues:()=>he,__await:()=>Ie,__awaiter:()=>L,__classPrivateFieldGet:()=>Ye,__classPrivateFieldSet:()=>Ge,__createBinding:()=>W,__decorate:()=>X,__exportStar:()=>ee,__extends:()=>ie,__generator:()=>B,__importDefault:()=>at,__importStar:()=>Fe,__makeTemplateObject:()=>Te,__metadata:()=>M,__param:()=>z,__read:()=>fe,__rest:()=>H,__spread:()=>we,__spreadArrays:()=>ge,__values:()=>ue});var U=function(P,D){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,V){N.__proto__=V}||function(N,V){for(var Z in V)V.hasOwnProperty(Z)&&(N[Z]=V[Z])})(P,D)};function ie(P,D){function N(){this.constructor=P}U(P,D),P.prototype=null===D?Object.create(D):(N.prototype=D.prototype,new N)}var b=function(){return b=Object.assign||function(D){for(var N,V=1,Z=arguments.length;V<Z;V++)for(var j in N=arguments[V])Object.prototype.hasOwnProperty.call(N,j)&&(D[j]=N[j]);return D},b.apply(this,arguments)};function H(P,D){var N={};for(var V in P)Object.prototype.hasOwnProperty.call(P,V)&&D.indexOf(V)<0&&(N[V]=P[V]);if(null!=P&&"function"==typeof Object.getOwnPropertySymbols){var Z=0;for(V=Object.getOwnPropertySymbols(P);Z<V.length;Z++)D.indexOf(V[Z])<0&&Object.prototype.propertyIsEnumerable.call(P,V[Z])&&(N[V[Z]]=P[V[Z]])}return N}function X(P,D,N,V){var de,Z=arguments.length,j=Z<3?D:null===V?V=Object.getOwnPropertyDescriptor(D,N):V;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)j=Reflect.decorate(P,D,N,V);else for(var $e=P.length-1;$e>=0;$e--)(de=P[$e])&&(j=(Z<3?de(j):Z>3?de(D,N,j):de(D,N))||j);return Z>3&&j&&Object.defineProperty(D,N,j),j}function z(P,D){return function(N,V){D(N,V,P)}}function M(P,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(P,D)}function L(P,D,N,V){return new(N||(N=Promise))(function(j,de){function $e(pt){try{xe(V.next(pt))}catch(vt){de(vt)}}function _t(pt){try{xe(V.throw(pt))}catch(vt){de(vt)}}function xe(pt){pt.done?j(pt.value):function Z(j){return j instanceof N?j:new N(function(de){de(j)})}(pt.value).then($e,_t)}xe((V=V.apply(P,D||[])).next())})}function B(P,D){var V,Z,j,de,N={label:0,sent:function(){if(1&j[0])throw j[1];return j[1]},trys:[],ops:[]};return de={next:$e(0),throw:$e(1),return:$e(2)},"function"==typeof Symbol&&(de[Symbol.iterator]=function(){return this}),de;function $e(xe){return function(pt){return function _t(xe){if(V)throw new TypeError("Generator is already executing.");for(;N;)try{if(V=1,Z&&(j=2&xe[0]?Z.return:xe[0]?Z.throw||((j=Z.return)&&j.call(Z),0):Z.next)&&!(j=j.call(Z,xe[1])).done)return j;switch(Z=0,j&&(xe=[2&xe[0],j.value]),xe[0]){case 0:case 1:j=xe;break;case 4:return N.label++,{value:xe[1],done:!1};case 5:N.label++,Z=xe[1],xe=[0];continue;case 7:xe=N.ops.pop(),N.trys.pop();continue;default:if(!(j=(j=N.trys).length>0&&j[j.length-1])&&(6===xe[0]||2===xe[0])){N=0;continue}if(3===xe[0]&&(!j||xe[1]>j[0]&&xe[1]<j[3])){N.label=xe[1];break}if(6===xe[0]&&N.label<j[1]){N.label=j[1],j=xe;break}if(j&&N.label<j[2]){N.label=j[2],N.ops.push(xe);break}j[2]&&N.ops.pop(),N.trys.pop();continue}xe=D.call(P,N)}catch(pt){xe=[6,pt],Z=0}finally{V=j=0}if(5&xe[0])throw xe[1];return{value:xe[0]?xe[1]:void 0,done:!0}}([xe,pt])}}}function W(P,D,N,V){void 0===V&&(V=N),P[V]=D[N]}function ee(P,D){for(var N in P)"default"!==N&&!D.hasOwnProperty(N)&&(D[N]=P[N])}function ue(P){var D="function"==typeof Symbol&&Symbol.iterator,N=D&&P[D],V=0;if(N)return N.call(P);if(P&&"number"==typeof P.length)return{next:function(){return P&&V>=P.length&&(P=void 0),{value:P&&P[V++],done:!P}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function fe(P,D){var N="function"==typeof Symbol&&P[Symbol.iterator];if(!N)return P;var Z,de,V=N.call(P),j=[];try{for(;(void 0===D||D-- >0)&&!(Z=V.next()).done;)j.push(Z.value)}catch($e){de={error:$e}}finally{try{Z&&!Z.done&&(N=V.return)&&N.call(V)}finally{if(de)throw de.error}}return j}function we(){for(var P=[],D=0;D<arguments.length;D++)P=P.concat(fe(arguments[D]));return P}function ge(){for(var P=0,D=0,N=arguments.length;D<N;D++)P+=arguments[D].length;var V=Array(P),Z=0;for(D=0;D<N;D++)for(var j=arguments[D],de=0,$e=j.length;de<$e;de++,Z++)V[Z]=j[de];return V}function Ie(P){return this instanceof Ie?(this.v=P,this):new Ie(P)}function Xe(P,D,N){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Z,V=N.apply(P,D||[]),j=[];return Z={},de("next"),de("throw"),de("return"),Z[Symbol.asyncIterator]=function(){return this},Z;function de(We){V[We]&&(Z[We]=function(yt){return new Promise(function(Kt,tn){j.push([We,yt,Kt,tn])>1||$e(We,yt)})})}function $e(We,yt){try{!function _t(We){We.value instanceof Ie?Promise.resolve(We.value.v).then(xe,pt):vt(j[0][2],We)}(V[We](yt))}catch(Kt){vt(j[0][3],Kt)}}function xe(We){$e("next",We)}function pt(We){$e("throw",We)}function vt(We,yt){We(yt),j.shift(),j.length&&$e(j[0][0],j[0][1])}}function pe(P){var D,N;return D={},V("next"),V("throw",function(Z){throw Z}),V("return"),D[Symbol.iterator]=function(){return this},D;function V(Z,j){D[Z]=P[Z]?function(de){return(N=!N)?{value:Ie(P[Z](de)),done:"return"===Z}:j?j(de):de}:j}}function he(P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,D=P[Symbol.asyncIterator];return D?D.call(P):(P=ue(P),N={},V("next"),V("throw"),V("return"),N[Symbol.asyncIterator]=function(){return this},N);function V(j){N[j]=P[j]&&function(de){return new Promise(function($e,_t){!function Z(j,de,$e,_t){Promise.resolve(_t).then(function(xe){j({value:xe,done:$e})},de)}($e,_t,(de=P[j](de)).done,de.value)})}}}function Te(P,D){return Object.defineProperty?Object.defineProperty(P,"raw",{value:D}):P.raw=D,P}function Fe(P){if(P&&P.__esModule)return P;var D={};if(null!=P)for(var N in P)Object.hasOwnProperty.call(P,N)&&(D[N]=P[N]);return D.default=P,D}function at(P){return P&&P.__esModule?P:{default:P}}function Ye(P,D){if(!D.has(P))throw new TypeError("attempted to get private field on non-instance");return D.get(P)}function Ge(P,D,N){if(!D.has(P))throw new TypeError("attempted to set private field on non-instance");return D.set(P,N),N}},2960:(He,J,G)=>{"use strict";G.r(J),G.d(J,{__assign:()=>b,__asyncDelegator:()=>pe,__asyncGenerator:()=>Xe,__asyncValues:()=>he,__await:()=>Ie,__awaiter:()=>L,__classPrivateFieldGet:()=>Ye,__classPrivateFieldSet:()=>Ge,__createBinding:()=>W,__decorate:()=>X,__exportStar:()=>ee,__extends:()=>ie,__generator:()=>B,__importDefault:()=>at,__importStar:()=>Fe,__makeTemplateObject:()=>Te,__metadata:()=>M,__param:()=>z,__read:()=>fe,__rest:()=>H,__spread:()=>we,__spreadArrays:()=>ge,__values:()=>ue});var U=function(P,D){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,V){N.__proto__=V}||function(N,V){for(var Z in V)V.hasOwnProperty(Z)&&(N[Z]=V[Z])})(P,D)};function ie(P,D){function N(){this.constructor=P}U(P,D),P.prototype=null===D?Object.create(D):(N.prototype=D.prototype,new N)}var b=function(){return b=Object.assign||function(D){for(var N,V=1,Z=arguments.length;V<Z;V++)for(var j in N=arguments[V])Object.prototype.hasOwnProperty.call(N,j)&&(D[j]=N[j]);return D},b.apply(this,arguments)};function H(P,D){var N={};for(var V in P)Object.prototype.hasOwnProperty.call(P,V)&&D.indexOf(V)<0&&(N[V]=P[V]);if(null!=P&&"function"==typeof Object.getOwnPropertySymbols){var Z=0;for(V=Object.getOwnPropertySymbols(P);Z<V.length;Z++)D.indexOf(V[Z])<0&&Object.prototype.propertyIsEnumerable.call(P,V[Z])&&(N[V[Z]]=P[V[Z]])}return N}function X(P,D,N,V){var de,Z=arguments.length,j=Z<3?D:null===V?V=Object.getOwnPropertyDescriptor(D,N):V;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)j=Reflect.decorate(P,D,N,V);else for(var $e=P.length-1;$e>=0;$e--)(de=P[$e])&&(j=(Z<3?de(j):Z>3?de(D,N,j):de(D,N))||j);return Z>3&&j&&Object.defineProperty(D,N,j),j}function z(P,D){return function(N,V){D(N,V,P)}}function M(P,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(P,D)}function L(P,D,N,V){return new(N||(N=Promise))(function(j,de){function $e(pt){try{xe(V.next(pt))}catch(vt){de(vt)}}function _t(pt){try{xe(V.throw(pt))}catch(vt){de(vt)}}function xe(pt){pt.done?j(pt.value):function Z(j){return j instanceof N?j:new N(function(de){de(j)})}(pt.value).then($e,_t)}xe((V=V.apply(P,D||[])).next())})}function B(P,D){var V,Z,j,de,N={label:0,sent:function(){if(1&j[0])throw j[1];return j[1]},trys:[],ops:[]};return de={next:$e(0),throw:$e(1),return:$e(2)},"function"==typeof Symbol&&(de[Symbol.iterator]=function(){return this}),de;function $e(xe){return function(pt){return function _t(xe){if(V)throw new TypeError("Generator is already executing.");for(;N;)try{if(V=1,Z&&(j=2&xe[0]?Z.return:xe[0]?Z.throw||((j=Z.return)&&j.call(Z),0):Z.next)&&!(j=j.call(Z,xe[1])).done)return j;switch(Z=0,j&&(xe=[2&xe[0],j.value]),xe[0]){case 0:case 1:j=xe;break;case 4:return N.label++,{value:xe[1],done:!1};case 5:N.label++,Z=xe[1],xe=[0];continue;case 7:xe=N.ops.pop(),N.trys.pop();continue;default:if(!(j=(j=N.trys).length>0&&j[j.length-1])&&(6===xe[0]||2===xe[0])){N=0;continue}if(3===xe[0]&&(!j||xe[1]>j[0]&&xe[1]<j[3])){N.label=xe[1];break}if(6===xe[0]&&N.label<j[1]){N.label=j[1],j=xe;break}if(j&&N.label<j[2]){N.label=j[2],N.ops.push(xe);break}j[2]&&N.ops.pop(),N.trys.pop();continue}xe=D.call(P,N)}catch(pt){xe=[6,pt],Z=0}finally{V=j=0}if(5&xe[0])throw xe[1];return{value:xe[0]?xe[1]:void 0,done:!0}}([xe,pt])}}}function W(P,D,N,V){void 0===V&&(V=N),P[V]=D[N]}function ee(P,D){for(var N in P)"default"!==N&&!D.hasOwnProperty(N)&&(D[N]=P[N])}function ue(P){var D="function"==typeof Symbol&&Symbol.iterator,N=D&&P[D],V=0;if(N)return N.call(P);if(P&&"number"==typeof P.length)return{next:function(){return P&&V>=P.length&&(P=void 0),{value:P&&P[V++],done:!P}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function fe(P,D){var N="function"==typeof Symbol&&P[Symbol.iterator];if(!N)return P;var Z,de,V=N.call(P),j=[];try{for(;(void 0===D||D-- >0)&&!(Z=V.next()).done;)j.push(Z.value)}catch($e){de={error:$e}}finally{try{Z&&!Z.done&&(N=V.return)&&N.call(V)}finally{if(de)throw de.error}}return j}function we(){for(var P=[],D=0;D<arguments.length;D++)P=P.concat(fe(arguments[D]));return P}function ge(){for(var P=0,D=0,N=arguments.length;D<N;D++)P+=arguments[D].length;var V=Array(P),Z=0;for(D=0;D<N;D++)for(var j=arguments[D],de=0,$e=j.length;de<$e;de++,Z++)V[Z]=j[de];return V}function Ie(P){return this instanceof Ie?(this.v=P,this):new Ie(P)}function Xe(P,D,N){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Z,V=N.apply(P,D||[]),j=[];return Z={},de("next"),de("throw"),de("return"),Z[Symbol.asyncIterator]=function(){return this},Z;function de(We){V[We]&&(Z[We]=function(yt){return new Promise(function(Kt,tn){j.push([We,yt,Kt,tn])>1||$e(We,yt)})})}function $e(We,yt){try{!function _t(We){We.value instanceof Ie?Promise.resolve(We.value.v).then(xe,pt):vt(j[0][2],We)}(V[We](yt))}catch(Kt){vt(j[0][3],Kt)}}function xe(We){$e("next",We)}function pt(We){$e("throw",We)}function vt(We,yt){We(yt),j.shift(),j.length&&$e(j[0][0],j[0][1])}}function pe(P){var D,N;return D={},V("next"),V("throw",function(Z){throw Z}),V("return"),D[Symbol.iterator]=function(){return this},D;function V(Z,j){D[Z]=P[Z]?function(de){return(N=!N)?{value:Ie(P[Z](de)),done:"return"===Z}:j?j(de):de}:j}}function he(P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,D=P[Symbol.asyncIterator];return D?D.call(P):(P=ue(P),N={},V("next"),V("throw"),V("return"),N[Symbol.asyncIterator]=function(){return this},N);function V(j){N[j]=P[j]&&function(de){return new Promise(function($e,_t){!function Z(j,de,$e,_t){Promise.resolve(_t).then(function(xe){j({value:xe,done:$e})},de)}($e,_t,(de=P[j](de)).done,de.value)})}}}function Te(P,D){return Object.defineProperty?Object.defineProperty(P,"raw",{value:D}):P.raw=D,P}function Fe(P){if(P&&P.__esModule)return P;var D={};if(null!=P)for(var N in P)Object.hasOwnProperty.call(P,N)&&(D[N]=P[N]);return D.default=P,D}function at(P){return P&&P.__esModule?P:{default:P}}function Ye(P,D){if(!D.has(P))throw new TypeError("attempted to get private field on non-instance");return D.get(P)}function Ge(P,D,N){if(!D.has(P))throw new TypeError("attempted to set private field on non-instance");return D.set(P,N),N}},9077:(He,J,G)=>{"use strict";G.r(J),G.d(J,{__assign:()=>b,__asyncDelegator:()=>pe,__asyncGenerator:()=>Xe,__asyncValues:()=>he,__await:()=>Ie,__awaiter:()=>L,__classPrivateFieldGet:()=>Ye,__classPrivateFieldSet:()=>Ge,__createBinding:()=>W,__decorate:()=>X,__exportStar:()=>ee,__extends:()=>ie,__generator:()=>B,__importDefault:()=>at,__importStar:()=>Fe,__makeTemplateObject:()=>Te,__metadata:()=>M,__param:()=>z,__read:()=>fe,__rest:()=>H,__spread:()=>we,__spreadArrays:()=>ge,__values:()=>ue});var U=function(P,D){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,V){N.__proto__=V}||function(N,V){for(var Z in V)V.hasOwnProperty(Z)&&(N[Z]=V[Z])})(P,D)};function ie(P,D){function N(){this.constructor=P}U(P,D),P.prototype=null===D?Object.create(D):(N.prototype=D.prototype,new N)}var b=function(){return b=Object.assign||function(D){for(var N,V=1,Z=arguments.length;V<Z;V++)for(var j in N=arguments[V])Object.prototype.hasOwnProperty.call(N,j)&&(D[j]=N[j]);return D},b.apply(this,arguments)};function H(P,D){var N={};for(var V in P)Object.prototype.hasOwnProperty.call(P,V)&&D.indexOf(V)<0&&(N[V]=P[V]);if(null!=P&&"function"==typeof Object.getOwnPropertySymbols){var Z=0;for(V=Object.getOwnPropertySymbols(P);Z<V.length;Z++)D.indexOf(V[Z])<0&&Object.prototype.propertyIsEnumerable.call(P,V[Z])&&(N[V[Z]]=P[V[Z]])}return N}function X(P,D,N,V){var de,Z=arguments.length,j=Z<3?D:null===V?V=Object.getOwnPropertyDescriptor(D,N):V;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)j=Reflect.decorate(P,D,N,V);else for(var $e=P.length-1;$e>=0;$e--)(de=P[$e])&&(j=(Z<3?de(j):Z>3?de(D,N,j):de(D,N))||j);return Z>3&&j&&Object.defineProperty(D,N,j),j}function z(P,D){return function(N,V){D(N,V,P)}}function M(P,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(P,D)}function L(P,D,N,V){return new(N||(N=Promise))(function(j,de){function $e(pt){try{xe(V.next(pt))}catch(vt){de(vt)}}function _t(pt){try{xe(V.throw(pt))}catch(vt){de(vt)}}function xe(pt){pt.done?j(pt.value):function Z(j){return j instanceof N?j:new N(function(de){de(j)})}(pt.value).then($e,_t)}xe((V=V.apply(P,D||[])).next())})}function B(P,D){var V,Z,j,de,N={label:0,sent:function(){if(1&j[0])throw j[1];return j[1]},trys:[],ops:[]};return de={next:$e(0),throw:$e(1),return:$e(2)},"function"==typeof Symbol&&(de[Symbol.iterator]=function(){return this}),de;function $e(xe){return function(pt){return function _t(xe){if(V)throw new TypeError("Generator is already executing.");for(;N;)try{if(V=1,Z&&(j=2&xe[0]?Z.return:xe[0]?Z.throw||((j=Z.return)&&j.call(Z),0):Z.next)&&!(j=j.call(Z,xe[1])).done)return j;switch(Z=0,j&&(xe=[2&xe[0],j.value]),xe[0]){case 0:case 1:j=xe;break;case 4:return N.label++,{value:xe[1],done:!1};case 5:N.label++,Z=xe[1],xe=[0];continue;case 7:xe=N.ops.pop(),N.trys.pop();continue;default:if(!(j=(j=N.trys).length>0&&j[j.length-1])&&(6===xe[0]||2===xe[0])){N=0;continue}if(3===xe[0]&&(!j||xe[1]>j[0]&&xe[1]<j[3])){N.label=xe[1];break}if(6===xe[0]&&N.label<j[1]){N.label=j[1],j=xe;break}if(j&&N.label<j[2]){N.label=j[2],N.ops.push(xe);break}j[2]&&N.ops.pop(),N.trys.pop();continue}xe=D.call(P,N)}catch(pt){xe=[6,pt],Z=0}finally{V=j=0}if(5&xe[0])throw xe[1];return{value:xe[0]?xe[1]:void 0,done:!0}}([xe,pt])}}}function W(P,D,N,V){void 0===V&&(V=N),P[V]=D[N]}function ee(P,D){for(var N in P)"default"!==N&&!D.hasOwnProperty(N)&&(D[N]=P[N])}function ue(P){var D="function"==typeof Symbol&&Symbol.iterator,N=D&&P[D],V=0;if(N)return N.call(P);if(P&&"number"==typeof P.length)return{next:function(){return P&&V>=P.length&&(P=void 0),{value:P&&P[V++],done:!P}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function fe(P,D){var N="function"==typeof Symbol&&P[Symbol.iterator];if(!N)return P;var Z,de,V=N.call(P),j=[];try{for(;(void 0===D||D-- >0)&&!(Z=V.next()).done;)j.push(Z.value)}catch($e){de={error:$e}}finally{try{Z&&!Z.done&&(N=V.return)&&N.call(V)}finally{if(de)throw de.error}}return j}function we(){for(var P=[],D=0;D<arguments.length;D++)P=P.concat(fe(arguments[D]));return P}function ge(){for(var P=0,D=0,N=arguments.length;D<N;D++)P+=arguments[D].length;var V=Array(P),Z=0;for(D=0;D<N;D++)for(var j=arguments[D],de=0,$e=j.length;de<$e;de++,Z++)V[Z]=j[de];return V}function Ie(P){return this instanceof Ie?(this.v=P,this):new Ie(P)}function Xe(P,D,N){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Z,V=N.apply(P,D||[]),j=[];return Z={},de("next"),de("throw"),de("return"),Z[Symbol.asyncIterator]=function(){return this},Z;function de(We){V[We]&&(Z[We]=function(yt){return new Promise(function(Kt,tn){j.push([We,yt,Kt,tn])>1||$e(We,yt)})})}function $e(We,yt){try{!function _t(We){We.value instanceof Ie?Promise.resolve(We.value.v).then(xe,pt):vt(j[0][2],We)}(V[We](yt))}catch(Kt){vt(j[0][3],Kt)}}function xe(We){$e("next",We)}function pt(We){$e("throw",We)}function vt(We,yt){We(yt),j.shift(),j.length&&$e(j[0][0],j[0][1])}}function pe(P){var D,N;return D={},V("next"),V("throw",function(Z){throw Z}),V("return"),D[Symbol.iterator]=function(){return this},D;function V(Z,j){D[Z]=P[Z]?function(de){return(N=!N)?{value:Ie(P[Z](de)),done:"return"===Z}:j?j(de):de}:j}}function he(P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,D=P[Symbol.asyncIterator];return D?D.call(P):(P=ue(P),N={},V("next"),V("throw"),V("return"),N[Symbol.asyncIterator]=function(){return this},N);function V(j){N[j]=P[j]&&function(de){return new Promise(function($e,_t){!function Z(j,de,$e,_t){Promise.resolve(_t).then(function(xe){j({value:xe,done:$e})},de)}($e,_t,(de=P[j](de)).done,de.value)})}}}function Te(P,D){return Object.defineProperty?Object.defineProperty(P,"raw",{value:D}):P.raw=D,P}function Fe(P){if(P&&P.__esModule)return P;var D={};if(null!=P)for(var N in P)Object.hasOwnProperty.call(P,N)&&(D[N]=P[N]);return D.default=P,D}function at(P){return P&&P.__esModule?P:{default:P}}function Ye(P,D){if(!D.has(P))throw new TypeError("attempted to get private field on non-instance");return D.get(P)}function Ge(P,D,N){if(!D.has(P))throw new TypeError("attempted to set private field on non-instance");return D.set(P,N),N}},6249:()=>{},2480:()=>{},8593:He=>{"use strict";He.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')}},He=>{He(He.s=4580)}]);
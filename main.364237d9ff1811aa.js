(self.webpackChunkangular_aws_map=self.webpackChunkangular_aws_map||[]).push([[179],{4285:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},7487:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},9984:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},2093:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},4849:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.isMsWindow=void 0;var U=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];J.isMsWindow=function X(m){if(function V(m){return"MSInputMethodContext"in m&&"msCrypto"in m}(m)&&void 0!==m.msCrypto.subtle){var $=m.msCrypto,G=$.getRandomValues,z=$.subtle;return U.map(function(T){return z[T]}).concat(G).every(function(T){return"function"==typeof T})}return!1}},1806:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});var V=U(1980);V.__exportStar(U(4285),J),V.__exportStar(U(7487),J),V.__exportStar(U(9984),J),V.__exportStar(U(2093),J),V.__exportStar(U(4849),J)},9760:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.EMPTY_DATA_SHA_256=J.SHA_256_HMAC_ALGO=J.SHA_256_HASH=void 0,J.SHA_256_HASH={name:"SHA-256"},J.SHA_256_HMAC_ALGO={name:"HMAC",hash:J.SHA_256_HASH},J.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},7895:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var V=U(9121),X=U(5139),m=U(5979),$=U(710),G=U(1806),z=U(2521),T=function(){function D(F){this.hash=(0,$.supportsWebCrypto)((0,z.locateWindow)())?new X.Sha256(F):(0,G.isMsWindow)((0,z.locateWindow)())?new V.Sha256(F):new m.Sha256(F)}return D.prototype.update=function(F,Z){this.hash.update(F,Z)},D.prototype.digest=function(){return this.hash.digest()},D}();J.Sha256=T},9121:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var V=U(5200),X=U(9760),m=U(2622),$=U(2521),G=function(){function D(F){F?(this.operation=function z(D){return new Promise(function(F,Z){var Y=(0,$.locateWindow)().msCrypto.subtle.importKey("raw",T(D),X.SHA_256_HMAC_ALGO,!1,["sign"]);Y.oncomplete=function(){Y.result&&F(Y.result),Z(new Error("ImportKey completed without importing key."))},Y.onerror=function(){Z(new Error("ImportKey failed to import key."))}})}(F).then(function(Z){return(0,$.locateWindow)().msCrypto.subtle.sign(X.SHA_256_HMAC_ALGO,Z)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,$.locateWindow)().msCrypto.subtle.digest("SHA-256"))}return D.prototype.update=function(F){var Z=this;(0,V.isEmptyData)(F)||(this.operation=this.operation.then(function(Y){return Y.onerror=function(){Z.operation=Promise.reject(new Error("Error encountered updating hash"))},Y.process(T(F)),Y}),this.operation.catch(function(){}))},D.prototype.digest=function(){return this.operation.then(function(F){return new Promise(function(Z,Y){F.onerror=function(){Y(new Error("Error encountered finalizing hash"))},F.oncomplete=function(){F.result&&Z(new Uint8Array(F.result)),Y(new Error("Error encountered finalizing hash"))},F.finish()})})},D}();function T(D){return"string"==typeof D?(0,m.fromUtf8)(D):ArrayBuffer.isView(D)?new Uint8Array(D.buffer,D.byteOffset,D.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(D)}J.Sha256=G},9801:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.WebCryptoSha256=J.Ie11Sha256=void 0,(0,U(5789).__exportStar)(U(7895),J);var X=U(9121);Object.defineProperty(J,"Ie11Sha256",{enumerable:!0,get:function(){return X.Sha256}});var m=U(5139);Object.defineProperty(J,"WebCryptoSha256",{enumerable:!0,get:function(){return m.Sha256}})},5200:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.isEmptyData=void 0,J.isEmptyData=function U(V){return"string"==typeof V?0===V.length:0===V.byteLength}},5139:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var V=U(7736),X=U(9760),m=U(2521),$=function(){function G(z){this.toHash=new Uint8Array(0),void 0!==z&&(this.key=new Promise(function(T,D){(0,m.locateWindow)().crypto.subtle.importKey("raw",(0,V.convertToBuffer)(z),X.SHA_256_HMAC_ALGO,!1,["sign"]).then(T,D)}),this.key.catch(function(){}))}return G.prototype.update=function(z){if(!(0,V.isEmptyData)(z)){var T=(0,V.convertToBuffer)(z),D=new Uint8Array(this.toHash.byteLength+T.byteLength);D.set(this.toHash,0),D.set(T,this.toHash.byteLength),this.toHash=D}},G.prototype.digest=function(){var z=this;return this.key?this.key.then(function(T){return(0,m.locateWindow)().crypto.subtle.sign(X.SHA_256_HMAC_ALGO,T,z.toHash).then(function(D){return new Uint8Array(D)})}):(0,V.isEmptyData)(this.toHash)?Promise.resolve(X.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,m.locateWindow)().crypto.subtle.digest(X.SHA_256_HASH,z.toHash)}).then(function(T){return Promise.resolve(new Uint8Array(T))})},G}();J.Sha256=$},6521:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.RawSha256=void 0;var V=U(154),X=function(){function m(){this.state=Int32Array.from(V.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return m.prototype.update=function($){if(this.finished)throw new Error("Attempted to update an already finished hash.");var G=0,z=$.byteLength;if(this.bytesHashed+=z,8*this.bytesHashed>V.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;z>0;)this.buffer[this.bufferLength++]=$[G++],z--,this.bufferLength===V.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},m.prototype.digest=function(){if(!this.finished){var $=8*this.bytesHashed,G=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),z=this.bufferLength;if(G.setUint8(this.bufferLength++,128),z%V.BLOCK_SIZE>=V.BLOCK_SIZE-8){for(var T=this.bufferLength;T<V.BLOCK_SIZE;T++)G.setUint8(T,0);this.hashBuffer(),this.bufferLength=0}for(T=this.bufferLength;T<V.BLOCK_SIZE-8;T++)G.setUint8(T,0);G.setUint32(V.BLOCK_SIZE-8,Math.floor($/4294967296),!0),G.setUint32(V.BLOCK_SIZE-4,$),this.hashBuffer(),this.finished=!0}var D=new Uint8Array(V.DIGEST_LENGTH);for(T=0;T<8;T++)D[4*T]=this.state[T]>>>24&255,D[4*T+1]=this.state[T]>>>16&255,D[4*T+2]=this.state[T]>>>8&255,D[4*T+3]=this.state[T]>>>0&255;return D},m.prototype.hashBuffer=function(){for(var G=this.buffer,z=this.state,T=z[0],D=z[1],F=z[2],Z=z[3],Y=z[4],ie=z[5],me=z[6],se=z[7],_e=0;_e<V.BLOCK_SIZE;_e++){if(_e<16)this.temp[_e]=(255&G[4*_e])<<24|(255&G[4*_e+1])<<16|(255&G[4*_e+2])<<8|255&G[4*_e+3];else{var Me=this.temp[_e-2];this.temp[_e]=(((Me>>>17|Me<<15)^(Me>>>19|Me<<13)^Me>>>10)+this.temp[_e-7]|0)+((((Me=this.temp[_e-15])>>>7|Me<<25)^(Me>>>18|Me<<14)^Me>>>3)+this.temp[_e-16]|0)}var je=(((Y>>>6|Y<<26)^(Y>>>11|Y<<21)^(Y>>>25|Y<<7))+(Y&ie^~Y&me)|0)+(se+(V.KEY[_e]+this.temp[_e]|0)|0)|0,Ee=((T>>>2|T<<30)^(T>>>13|T<<19)^(T>>>22|T<<10))+(T&D^T&F^D&F)|0;se=me,me=ie,ie=Y,Y=Z+je|0,Z=F,F=D,D=T,T=je+Ee|0}z[0]+=T,z[1]+=D,z[2]+=F,z[3]+=Z,z[4]+=Y,z[5]+=ie,z[6]+=me,z[7]+=se},m}();J.RawSha256=X},154:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.MAX_HASHABLE_LENGTH=J.INIT=J.KEY=J.DIGEST_LENGTH=J.BLOCK_SIZE=void 0,J.BLOCK_SIZE=64,J.DIGEST_LENGTH=32,J.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),J.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],J.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},5979:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),(0,U(5789).__exportStar)(U(9235),J)},9235:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var V=U(5789),X=U(154),m=U(6521),$=U(7736),G=function(){function T(D){if(this.hash=new m.RawSha256,D){this.outer=new m.RawSha256;var F=function z(T){var D=(0,$.convertToBuffer)(T);if(D.byteLength>X.BLOCK_SIZE){var F=new m.RawSha256;F.update(D),D=F.digest()}var Z=new Uint8Array(X.BLOCK_SIZE);return Z.set(D),Z}(D),Z=new Uint8Array(X.BLOCK_SIZE);Z.set(F);for(var Y=0;Y<X.BLOCK_SIZE;Y++)F[Y]^=54,Z[Y]^=92;for(this.hash.update(F),this.outer.update(Z),Y=0;Y<F.byteLength;Y++)F[Y]=0}}return T.prototype.update=function(D){if(!(0,$.isEmptyData)(D)&&!this.error)try{this.hash.update((0,$.convertToBuffer)(D))}catch(F){this.error=F}},T.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},T.prototype.digest=function(){return(0,V.__awaiter)(this,void 0,void 0,function(){return(0,V.__generator)(this,function(D){return[2,this.digestSync()]})})},T}();J.Sha256=G},6516:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});var V=U(4022),X=function(){function m(){this.state=Int32Array.from(V.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return m.prototype.update=function($){if(this.finished)throw new Error("Attempted to update an already finished hash.");var G=0,z=$.byteLength;if(this.bytesHashed+=z,8*this.bytesHashed>V.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;z>0;)this.buffer[this.bufferLength++]=$[G++],z--,this.bufferLength===V.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},m.prototype.digest=function(){if(!this.finished){var $=8*this.bytesHashed,G=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),z=this.bufferLength;if(G.setUint8(this.bufferLength++,128),z%V.BLOCK_SIZE>=V.BLOCK_SIZE-8){for(var T=this.bufferLength;T<V.BLOCK_SIZE;T++)G.setUint8(T,0);this.hashBuffer(),this.bufferLength=0}for(T=this.bufferLength;T<V.BLOCK_SIZE-8;T++)G.setUint8(T,0);G.setUint32(V.BLOCK_SIZE-8,Math.floor($/4294967296),!0),G.setUint32(V.BLOCK_SIZE-4,$),this.hashBuffer(),this.finished=!0}var D=new Uint8Array(V.DIGEST_LENGTH);for(T=0;T<8;T++)D[4*T]=this.state[T]>>>24&255,D[4*T+1]=this.state[T]>>>16&255,D[4*T+2]=this.state[T]>>>8&255,D[4*T+3]=this.state[T]>>>0&255;return D},m.prototype.hashBuffer=function(){for(var G=this.buffer,z=this.state,T=z[0],D=z[1],F=z[2],Z=z[3],Y=z[4],ie=z[5],me=z[6],se=z[7],_e=0;_e<V.BLOCK_SIZE;_e++){if(_e<16)this.temp[_e]=(255&G[4*_e])<<24|(255&G[4*_e+1])<<16|(255&G[4*_e+2])<<8|255&G[4*_e+3];else{var Me=this.temp[_e-2];this.temp[_e]=(((Me>>>17|Me<<15)^(Me>>>19|Me<<13)^Me>>>10)+this.temp[_e-7]|0)+((((Me=this.temp[_e-15])>>>7|Me<<25)^(Me>>>18|Me<<14)^Me>>>3)+this.temp[_e-16]|0)}var je=(((Y>>>6|Y<<26)^(Y>>>11|Y<<21)^(Y>>>25|Y<<7))+(Y&ie^~Y&me)|0)+(se+(V.KEY[_e]+this.temp[_e]|0)|0)|0,Ee=((T>>>2|T<<30)^(T>>>13|T<<19)^(T>>>22|T<<10))+(T&D^T&F^D&F)|0;se=me,me=ie,ie=Y,Y=Z+je|0,Z=F,F=D,D=T,T=je+Ee|0}z[0]+=T,z[1]+=D,z[2]+=F,z[3]+=Z,z[4]+=Y,z[5]+=ie,z[6]+=me,z[7]+=se},m}();J.RawSha256=X},4022:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.BLOCK_SIZE=64,J.DIGEST_LENGTH=32,J.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),J.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],J.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},4578:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),U(3541).__exportStar(U(3039),J)},3039:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});var V=U(3541),X=U(4022),m=U(6516),$=U(8259),G=function(){function F(Z){if(this.hash=new m.RawSha256,Z){this.outer=new m.RawSha256;var Y=function z(F){var Z=D(F);if(Z.byteLength>X.BLOCK_SIZE){var Y=new m.RawSha256;Y.update(Z),Z=Y.digest()}var ie=new Uint8Array(X.BLOCK_SIZE);return ie.set(Z),ie}(Z),ie=new Uint8Array(X.BLOCK_SIZE);ie.set(Y);for(var me=0;me<X.BLOCK_SIZE;me++)Y[me]^=54,ie[me]^=92;for(this.hash.update(Y),this.outer.update(ie),me=0;me<Y.byteLength;me++)Y[me]=0}}return F.prototype.update=function(Z){if(!function T(F){return"string"==typeof F?0===F.length:0===F.byteLength}(Z)&&!this.error)try{this.hash.update(D(Z))}catch(Y){this.error=Y}},F.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},F.prototype.digest=function(){return V.__awaiter(this,void 0,void 0,function(){return V.__generator(this,function(Z){return[2,this.digestSync()]})})},F}();function D(F){return"string"==typeof F?$.fromUtf8(F):ArrayBuffer.isView(F)?new Uint8Array(F.buffer,F.byteOffset,F.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(F)}J.Sha256=G},8259:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{fromUtf8:()=>G,toUtf8:()=>z});var G=function(T){return"function"==typeof TextEncoder?function m(T){return(new TextEncoder).encode(T)}(T):function(T){for(var D=[],F=0,Z=T.length;F<Z;F++){var Y=T.charCodeAt(F);if(Y<128)D.push(Y);else if(Y<2048)D.push(Y>>6|192,63&Y|128);else if(F+1<T.length&&55296==(64512&Y)&&56320==(64512&T.charCodeAt(F+1))){var ie=65536+((1023&Y)<<10)+(1023&T.charCodeAt(++F));D.push(ie>>18|240,ie>>12&63|128,ie>>6&63|128,63&ie|128)}else D.push(Y>>12|224,Y>>6&63|128,63&Y|128)}return Uint8Array.from(D)}(T)},z=function(T){return"function"==typeof TextDecoder?function $(T){return new TextDecoder("utf-8").decode(T)}(T):function(T){for(var D="",F=0,Z=T.length;F<Z;F++){var Y=T[F];if(Y<128)D+=String.fromCharCode(Y);else if(192<=Y&&Y<224){var ie=T[++F];D+=String.fromCharCode((31&Y)<<6|63&ie)}else if(240<=Y&&Y<365){var se="%"+[Y,T[++F],T[++F],T[++F]].map(function(_e){return _e.toString(16)}).join("%");D+=decodeURIComponent(se)}else D+=String.fromCharCode((15&Y)<<12|(63&T[++F])<<6|63&T[++F])}return D}(T)}},710:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),U(7840).__exportStar(U(933),J)},933:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.supportsZeroByteGCM=J.supportsSubtleCrypto=J.supportsSecureRandom=J.supportsWebCrypto=void 0;var V=U(7840),X=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function $(T){return"object"==typeof T&&"object"==typeof T.crypto&&"function"==typeof T.crypto.getRandomValues}function G(T){return T&&X.every(function(D){return"function"==typeof T[D]})}J.supportsWebCrypto=function m(T){return!(!$(T)||"object"!=typeof T.crypto.subtle)&&G(T.crypto.subtle)},J.supportsSecureRandom=$,J.supportsSubtleCrypto=G,J.supportsZeroByteGCM=function z(T){return V.__awaiter(this,void 0,void 0,function(){var D;return V.__generator(this,function(Y){switch(Y.label){case 0:if(!G(T))return[2,!1];Y.label=1;case 1:return Y.trys.push([1,4,,5]),[4,T.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return D=Y.sent(),[4,T.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},D,new Uint8Array(0))];case 3:return[2,16===Y.sent().byteLength];case 4:return Y.sent(),[2,!1];case 5:return[2]}})})}},2862:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.convertToBuffer=void 0;var V=U(2622),X=typeof Buffer<"u"&&Buffer.from?function($){return Buffer.from($,"utf8")}:V.fromUtf8;J.convertToBuffer=function m($){return $ instanceof Uint8Array?$:"string"==typeof $?X($):ArrayBuffer.isView($)?new Uint8Array($.buffer,$.byteOffset,$.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array($)}},7736:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.uint32ArrayFrom=J.numToUint8=J.isEmptyData=J.convertToBuffer=void 0;var V=U(2862);Object.defineProperty(J,"convertToBuffer",{enumerable:!0,get:function(){return V.convertToBuffer}});var X=U(5516);Object.defineProperty(J,"isEmptyData",{enumerable:!0,get:function(){return X.isEmptyData}});var m=U(5183);Object.defineProperty(J,"numToUint8",{enumerable:!0,get:function(){return m.numToUint8}});var $=U(6777);Object.defineProperty(J,"uint32ArrayFrom",{enumerable:!0,get:function(){return $.uint32ArrayFrom}})},5516:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.isEmptyData=void 0,J.isEmptyData=function U(V){return"string"==typeof V?0===V.length:0===V.byteLength}},5183:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.numToUint8=void 0,J.numToUint8=function U(V){return new Uint8Array([(4278190080&V)>>24,(16711680&V)>>16,(65280&V)>>8,255&V])}},6777:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.uint32ArrayFrom=void 0,J.uint32ArrayFrom=function U(V){if(!Array.from){for(var X=new Uint32Array(V.length);0<V.length;)X[0]=V[0];return X}return Uint32Array.from(V)}},9684:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},7593:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},5243:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},883:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},2625:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.isMsWindow=void 0;var U=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];J.isMsWindow=function X(m){if(function V(m){return"MSInputMethodContext"in m&&"msCrypto"in m}(m)&&void 0!==m.msCrypto.subtle){var $=m.msCrypto,G=$.getRandomValues,z=$.subtle;return U.map(function(T){return z[T]}).concat(G).every(function(T){return"function"==typeof T})}return!1}},5657:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});var V=U(4806);(0,V.__exportStar)(U(9684),J),(0,V.__exportStar)(U(7593),J),(0,V.__exportStar)(U(5243),J),(0,V.__exportStar)(U(883),J),(0,V.__exportStar)(U(2625),J)},7655:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.EMPTY_DATA_SHA_256=J.SHA_256_HMAC_ALGO=J.SHA_256_HASH=void 0,J.SHA_256_HASH={name:"SHA-256"},J.SHA_256_HMAC_ALGO={name:"HMAC",hash:J.SHA_256_HASH},J.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},1198:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var V=U(7273),X=U(157),m=U(5415),$=U(463),G=U(5657),z=U(2521),T=function(){function D(F){this.hash=(0,$.supportsWebCrypto)((0,z.locateWindow)())?new X.Sha256(F):(0,G.isMsWindow)((0,z.locateWindow)())?new V.Sha256(F):new m.Sha256(F)}return D.prototype.update=function(F,Z){this.hash.update(F,Z)},D.prototype.digest=function(){return this.hash.digest()},D}();J.Sha256=T},7273:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var V=U(1739),X=U(7655),m=U(4456),$=U(2521),G=function(){function D(F){F?(this.operation=function z(D){return new Promise(function(F,Z){var Y=(0,$.locateWindow)().msCrypto.subtle.importKey("raw",T(D),X.SHA_256_HMAC_ALGO,!1,["sign"]);Y.oncomplete=function(){Y.result&&F(Y.result),Z(new Error("ImportKey completed without importing key."))},Y.onerror=function(){Z(new Error("ImportKey failed to import key."))}})}(F).then(function(Z){return(0,$.locateWindow)().msCrypto.subtle.sign(X.SHA_256_HMAC_ALGO,Z)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,$.locateWindow)().msCrypto.subtle.digest("SHA-256"))}return D.prototype.update=function(F){var Z=this;(0,V.isEmptyData)(F)||(this.operation=this.operation.then(function(Y){return Y.onerror=function(){Z.operation=Promise.reject(new Error("Error encountered updating hash"))},Y.process(T(F)),Y}),this.operation.catch(function(){}))},D.prototype.digest=function(){return this.operation.then(function(F){return new Promise(function(Z,Y){F.onerror=function(){Y(new Error("Error encountered finalizing hash"))},F.oncomplete=function(){F.result&&Z(new Uint8Array(F.result)),Y(new Error("Error encountered finalizing hash"))},F.finish()})})},D}();function T(D){return"string"==typeof D?(0,m.fromUtf8)(D):ArrayBuffer.isView(D)?new Uint8Array(D.buffer,D.byteOffset,D.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(D)}J.Sha256=G},2518:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.WebCryptoSha256=J.Ie11Sha256=void 0,(0,U(5955).__exportStar)(U(1198),J);var X=U(7273);Object.defineProperty(J,"Ie11Sha256",{enumerable:!0,get:function(){return X.Sha256}});var m=U(157);Object.defineProperty(J,"WebCryptoSha256",{enumerable:!0,get:function(){return m.Sha256}})},1739:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.isEmptyData=void 0,J.isEmptyData=function U(V){return"string"==typeof V?0===V.length:0===V.byteLength}},157:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var V=U(5512),X=U(7655),m=U(2521),$=function(){function G(z){this.toHash=new Uint8Array(0),void 0!==z&&(this.key=new Promise(function(T,D){(0,m.locateWindow)().crypto.subtle.importKey("raw",(0,V.convertToBuffer)(z),X.SHA_256_HMAC_ALGO,!1,["sign"]).then(T,D)}),this.key.catch(function(){}))}return G.prototype.update=function(z){if(!(0,V.isEmptyData)(z)){var T=(0,V.convertToBuffer)(z),D=new Uint8Array(this.toHash.byteLength+T.byteLength);D.set(this.toHash,0),D.set(T,this.toHash.byteLength),this.toHash=D}},G.prototype.digest=function(){var z=this;return this.key?this.key.then(function(T){return(0,m.locateWindow)().crypto.subtle.sign(X.SHA_256_HMAC_ALGO,T,z.toHash).then(function(D){return new Uint8Array(D)})}):(0,V.isEmptyData)(this.toHash)?Promise.resolve(X.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,m.locateWindow)().crypto.subtle.digest(X.SHA_256_HASH,z.toHash)}).then(function(T){return Promise.resolve(new Uint8Array(T))})},G}();J.Sha256=$},1934:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.RawSha256=void 0;var V=U(268),X=function(){function m(){this.state=Int32Array.from(V.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return m.prototype.update=function($){if(this.finished)throw new Error("Attempted to update an already finished hash.");var G=0,z=$.byteLength;if(this.bytesHashed+=z,8*this.bytesHashed>V.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;z>0;)this.buffer[this.bufferLength++]=$[G++],z--,this.bufferLength===V.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},m.prototype.digest=function(){if(!this.finished){var $=8*this.bytesHashed,G=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),z=this.bufferLength;if(G.setUint8(this.bufferLength++,128),z%V.BLOCK_SIZE>=V.BLOCK_SIZE-8){for(var T=this.bufferLength;T<V.BLOCK_SIZE;T++)G.setUint8(T,0);this.hashBuffer(),this.bufferLength=0}for(T=this.bufferLength;T<V.BLOCK_SIZE-8;T++)G.setUint8(T,0);G.setUint32(V.BLOCK_SIZE-8,Math.floor($/4294967296),!0),G.setUint32(V.BLOCK_SIZE-4,$),this.hashBuffer(),this.finished=!0}var D=new Uint8Array(V.DIGEST_LENGTH);for(T=0;T<8;T++)D[4*T]=this.state[T]>>>24&255,D[4*T+1]=this.state[T]>>>16&255,D[4*T+2]=this.state[T]>>>8&255,D[4*T+3]=this.state[T]>>>0&255;return D},m.prototype.hashBuffer=function(){for(var G=this.buffer,z=this.state,T=z[0],D=z[1],F=z[2],Z=z[3],Y=z[4],ie=z[5],me=z[6],se=z[7],_e=0;_e<V.BLOCK_SIZE;_e++){if(_e<16)this.temp[_e]=(255&G[4*_e])<<24|(255&G[4*_e+1])<<16|(255&G[4*_e+2])<<8|255&G[4*_e+3];else{var Me=this.temp[_e-2];this.temp[_e]=(((Me>>>17|Me<<15)^(Me>>>19|Me<<13)^Me>>>10)+this.temp[_e-7]|0)+((((Me=this.temp[_e-15])>>>7|Me<<25)^(Me>>>18|Me<<14)^Me>>>3)+this.temp[_e-16]|0)}var je=(((Y>>>6|Y<<26)^(Y>>>11|Y<<21)^(Y>>>25|Y<<7))+(Y&ie^~Y&me)|0)+(se+(V.KEY[_e]+this.temp[_e]|0)|0)|0,Ee=((T>>>2|T<<30)^(T>>>13|T<<19)^(T>>>22|T<<10))+(T&D^T&F^D&F)|0;se=me,me=ie,ie=Y,Y=Z+je|0,Z=F,F=D,D=T,T=je+Ee|0}z[0]+=T,z[1]+=D,z[2]+=F,z[3]+=Z,z[4]+=Y,z[5]+=ie,z[6]+=me,z[7]+=se},m}();J.RawSha256=X},268:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.MAX_HASHABLE_LENGTH=J.INIT=J.KEY=J.DIGEST_LENGTH=J.BLOCK_SIZE=void 0,J.BLOCK_SIZE=64,J.DIGEST_LENGTH=32,J.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),J.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],J.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},5415:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),(0,U(2960).__exportStar)(U(316),J)},316:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Sha256=void 0;var V=U(2960),X=U(268),m=U(1934),$=U(5512),G=function(){function T(D){if(this.hash=new m.RawSha256,D){this.outer=new m.RawSha256;var F=function z(T){var D=(0,$.convertToBuffer)(T);if(D.byteLength>X.BLOCK_SIZE){var F=new m.RawSha256;F.update(D),D=F.digest()}var Z=new Uint8Array(X.BLOCK_SIZE);return Z.set(D),Z}(D),Z=new Uint8Array(X.BLOCK_SIZE);Z.set(F);for(var Y=0;Y<X.BLOCK_SIZE;Y++)F[Y]^=54,Z[Y]^=92;for(this.hash.update(F),this.outer.update(Z),Y=0;Y<F.byteLength;Y++)F[Y]=0}}return T.prototype.update=function(D){if(!(0,$.isEmptyData)(D)&&!this.error)try{this.hash.update((0,$.convertToBuffer)(D))}catch(F){this.error=F}},T.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},T.prototype.digest=function(){return(0,V.__awaiter)(this,void 0,void 0,function(){return(0,V.__generator)(this,function(D){return[2,this.digestSync()]})})},T}();J.Sha256=G},463:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),(0,U(9077).__exportStar)(U(7053),J)},7053:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.supportsZeroByteGCM=J.supportsSubtleCrypto=J.supportsSecureRandom=J.supportsWebCrypto=void 0;var V=U(9077),X=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function $(T){return"object"==typeof T&&"object"==typeof T.crypto&&"function"==typeof T.crypto.getRandomValues}function G(T){return T&&X.every(function(D){return"function"==typeof T[D]})}J.supportsWebCrypto=function m(T){return!(!$(T)||"object"!=typeof T.crypto.subtle)&&G(T.crypto.subtle)},J.supportsSecureRandom=$,J.supportsSubtleCrypto=G,J.supportsZeroByteGCM=function z(T){return(0,V.__awaiter)(this,void 0,void 0,function(){var D;return(0,V.__generator)(this,function(Y){switch(Y.label){case 0:if(!G(T))return[2,!1];Y.label=1;case 1:return Y.trys.push([1,4,,5]),[4,T.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return D=Y.sent(),[4,T.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},D,new Uint8Array(0))];case 3:return[2,16===Y.sent().byteLength];case 4:return Y.sent(),[2,!1];case 5:return[2]}})})}},4389:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.convertToBuffer=void 0;var V=U(4456),X=typeof Buffer<"u"&&Buffer.from?function($){return Buffer.from($,"utf8")}:V.fromUtf8;J.convertToBuffer=function m($){return $ instanceof Uint8Array?$:"string"==typeof $?X($):ArrayBuffer.isView($)?new Uint8Array($.buffer,$.byteOffset,$.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array($)}},5512:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.uint32ArrayFrom=J.numToUint8=J.isEmptyData=J.convertToBuffer=void 0;var V=U(4389);Object.defineProperty(J,"convertToBuffer",{enumerable:!0,get:function(){return V.convertToBuffer}});var X=U(3666);Object.defineProperty(J,"isEmptyData",{enumerable:!0,get:function(){return X.isEmptyData}});var m=U(1268);Object.defineProperty(J,"numToUint8",{enumerable:!0,get:function(){return m.numToUint8}});var $=U(491);Object.defineProperty(J,"uint32ArrayFrom",{enumerable:!0,get:function(){return $.uint32ArrayFrom}})},3666:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.isEmptyData=void 0,J.isEmptyData=function U(V){return"string"==typeof V?0===V.length:0===V.byteLength}},1268:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.numToUint8=void 0,J.numToUint8=function U(V){return new Uint8Array([(4278190080&V)>>24,(16711680&V)>>16,(65280&V)>>8,255&V])}},491:(Ae,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.uint32ArrayFrom=void 0,J.uint32ArrayFrom=function U(V){if(!Uint32Array.from){for(var X=new Uint32Array(V.length),m=0;m<V.length;)X[m]=V[m],m+=1;return X}return Uint32Array.from(V)}},4456:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{fromUtf8:()=>G,toUtf8:()=>z});var G=function(T){return"function"==typeof TextEncoder?function m(T){return(new TextEncoder).encode(T)}(T):function(T){for(var D=[],F=0,Z=T.length;F<Z;F++){var Y=T.charCodeAt(F);if(Y<128)D.push(Y);else if(Y<2048)D.push(Y>>6|192,63&Y|128);else if(F+1<T.length&&55296==(64512&Y)&&56320==(64512&T.charCodeAt(F+1))){var ie=65536+((1023&Y)<<10)+(1023&T.charCodeAt(++F));D.push(ie>>18|240,ie>>12&63|128,ie>>6&63|128,63&ie|128)}else D.push(Y>>12|224,Y>>6&63|128,63&Y|128)}return Uint8Array.from(D)}(T)},z=function(T){return"function"==typeof TextDecoder?function $(T){return new TextDecoder("utf-8").decode(T)}(T):function(T){for(var D="",F=0,Z=T.length;F<Z;F++){var Y=T[F];if(Y<128)D+=String.fromCharCode(Y);else if(192<=Y&&Y<224){var ie=T[++F];D+=String.fromCharCode((31&Y)<<6|63&ie)}else if(240<=Y&&Y<365){var se="%"+[Y,T[++F],T[++F],T[++F]].map(function(_e){return _e.toString(16)}).join("%");D+=decodeURIComponent(se)}else D+=String.fromCharCode((15&Y)<<12|(63&T[++F])<<6|63&T[++F])}return D}(T)}},2521:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{locateWindow:()=>X});var V={};function X(){return typeof window<"u"?window:typeof self<"u"?self:V}},2622:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{fromUtf8:()=>G,toUtf8:()=>z});var G=function(T){return"function"==typeof TextEncoder?function m(T){return(new TextEncoder).encode(T)}(T):function(T){for(var D=[],F=0,Z=T.length;F<Z;F++){var Y=T.charCodeAt(F);if(Y<128)D.push(Y);else if(Y<2048)D.push(Y>>6|192,63&Y|128);else if(F+1<T.length&&55296==(64512&Y)&&56320==(64512&T.charCodeAt(F+1))){var ie=65536+((1023&Y)<<10)+(1023&T.charCodeAt(++F));D.push(ie>>18|240,ie>>12&63|128,ie>>6&63|128,63&ie|128)}else D.push(Y>>12|224,Y>>6&63|128,63&Y|128)}return Uint8Array.from(D)}(T)},z=function(T){return"function"==typeof TextDecoder?function $(T){return new TextDecoder("utf-8").decode(T)}(T):function(T){for(var D="",F=0,Z=T.length;F<Z;F++){var Y=T[F];if(Y<128)D+=String.fromCharCode(Y);else if(192<=Y&&Y<224){var ie=T[++F];D+=String.fromCharCode((31&Y)<<6|63&ie)}else if(240<=Y&&Y<365){var se="%"+[Y,T[++F],T[++F],T[++F]].map(function(_e){return _e.toString(16)}).join("%");D+=decodeURIComponent(se)}else D+=String.fromCharCode((15&Y)<<12|(63&T[++F])<<6|63&T[++F])}return D}(T)}},8604:Ae=>{function J(U){if(!(this instanceof J))return new J(U);this._bbox=U||[1/0,1/0,-1/0,-1/0],this._valid=!!U}Ae.exports=J,J.prototype.include=function(U){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],U[0]),this._bbox[1]=Math.min(this._bbox[1],U[1]),this._bbox[2]=Math.max(this._bbox[2],U[0]),this._bbox[3]=Math.max(this._bbox[3],U[1]),this},J.prototype.equals=function(U){var V;return V=U instanceof J?U.bbox():U,this._bbox[0]==V[0]&&this._bbox[1]==V[1]&&this._bbox[2]==V[2]&&this._bbox[3]==V[3]},J.prototype.center=function(U){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},J.prototype.union=function(U){var V;return this._valid=!0,V=U instanceof J?U.bbox():U,this._bbox[0]=Math.min(this._bbox[0],V[0]),this._bbox[1]=Math.min(this._bbox[1],V[1]),this._bbox[2]=Math.max(this._bbox[2],V[2]),this._bbox[3]=Math.max(this._bbox[3],V[3]),this},J.prototype.bbox=function(){return this._valid?this._bbox:null},J.prototype.contains=function(U){if(!U)return this._fastContains();if(!this._valid)return null;var V=U[0],X=U[1];return this._bbox[0]<=V&&this._bbox[1]<=X&&this._bbox[2]>=V&&this._bbox[3]>=X},J.prototype.intersect=function(U){return this._valid?(V=U instanceof J?U.bbox():U,!(this._bbox[0]>V[2]||this._bbox[2]<V[0]||this._bbox[3]<V[1]||this._bbox[1]>V[3])):null;var V},J.prototype._fastContains=function(){return this._valid?new Function("ll","return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]"):new Function("return null;")},J.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null}},869:(Ae,J,U)=>{var V=U(7265);function m(z){var T=0;if(z&&z.length>0){T+=Math.abs($(z[0]));for(var D=1;D<z.length;D++)T-=Math.abs($(z[D]))}return T}function $(z){var T,D,Z,Y,ie,me,se=0,_e=z.length;if(_e>2){for(me=0;me<_e;me++)me===_e-2?(Z=_e-2,Y=_e-1,ie=0):me===_e-1?(Z=_e-1,Y=0,ie=1):(Z=me,Y=me+1,ie=me+2),T=z[Z],D=z[Y],se+=(G(z[ie][0])-G(T[0]))*Math.sin(G(D[1]));se=se*V.RADIUS*V.RADIUS/2}return se}function G(z){return z*Math.PI/180}Ae.exports.geometry=function X(z){var D,T=0;switch(z.type){case"Polygon":return m(z.coordinates);case"MultiPolygon":for(D=0;D<z.coordinates.length;D++)T+=m(z.coordinates[D]);return T;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(D=0;D<z.geometries.length;D++)T+=X(z.geometries[D]);return T}},Ae.exports.ring=$},8143:Ae=>{Ae.exports=function U(V){if(!V||!V.type)return null;var X=J[V.type];return X?"geometry"===X?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:V}]}:"feature"===X?{type:"FeatureCollection",features:[V]}:"featurecollection"===X?V:void 0:null};var J={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},8035:(Ae,J,U)=>{var V=U(7923),X=U(8369);Ae.exports.hint=function m($,G){var z,T=[];if("object"==typeof $)z=$;else{if("string"!=typeof $)return[{message:"Expected string or object as input",line:0}];try{z=V.parse($)}catch(Z){var D=Z.message.match(/line (\d+)/);return[{line:parseInt(D[1],10)-1,message:Z.message,error:Z}]}}return T.concat(X.hint(z,G))}},8369:(Ae,J,U)=>{var V=U(4967);Ae.exports.hint=function X(m,$){var G=[],z=0;function F(j){if((!$||!1!==$.noDuplicateMembers)&&j.__duplicateProperties__&&G.push({message:"An object contained duplicate members, making parsing ambigous: "+j.__duplicateProperties__.join(", "),line:j.__line__}),!Y(j,"type","string"))if(L[j.type])j&&L[j.type](j);else{var ee=B[j.type.toLowerCase()];G.push(void 0!==ee?{message:"Expected "+ee+" but got "+j.type+" (case sensitive)",line:j.__line__}:{message:"The type "+j.type+" is unknown",line:j.__line__})}}function Z(j,ee){return j.every(function(W){return null!==W&&typeof W===ee})}function Y(j,ee,W){if(typeof j[ee]>"u")return G.push({message:'"'+ee+'" member required',line:j.__line__});if("array"===W){if(!Array.isArray(j[ee]))return G.push({message:'"'+ee+'" member should be an array, but is an '+typeof j[ee]+" instead",line:j.__line__})}else{if("object"===W&&j[ee]&&j[ee].constructor!==Object)return G.push({message:'"'+ee+'" member should be '+W+", but is an "+j[ee].constructor.name+" instead",line:j.__line__});if(W&&typeof j[ee]!==W)return G.push({message:'"'+ee+'" member should be '+W+", but is an "+typeof j[ee]+" instead",line:j.__line__})}}function me(j,ee){if(!Array.isArray(j))return G.push({message:"position should be an array, is a "+typeof j+" instead",line:j.__line__||ee});if(j.length<2)return G.push({message:"position must have 2 or more elements",line:j.__line__||ee});if(j.length>3)return G.push({message:"position should not have more than 3 elements",level:"message",line:j.__line__||ee});if(!Z(j,"number"))return G.push({message:"each element in a position must be a number",line:j.__line__||ee});if($&&$.precisionWarning){if(10===z)return z+=1,G.push({message:"truncated warnings: we've encountered coordinate precision warning 10 times, no more warnings will be reported",level:"message",line:j.__line__||ee});z<10&&j.forEach(function(W){var ce=0,We=String(W).split(".")[1];if(void 0!==We&&(ce=We.length),ce>6)return z+=1,G.push({message:"precision of coordinates should be reduced",level:"message",line:j.__line__||ee})})}}function se(j,ee,W,ce){if(void 0===ce&&void 0!==j.__line__&&(ce=j.__line__),0===W)return me(j,ce);if(1===W&&ee)if("LinearRing"===ee){if(!Array.isArray(j[j.length-1]))return G.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:ce}),!0;if(j.length<4&&G.push({message:"a LinearRing of coordinates needs to have four or more positions",line:ce}),j.length&&(j[j.length-1].length!==j[0].length||!j[j.length-1].every(function(ut,be){return j[0][be]===ut})))return G.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:ce}),!0}else if("Line"===ee&&j.length<2)return G.push({message:"a line needs to have two or more coordinates to be valid",line:ce});if(Array.isArray(j))return j.map(function(ut){return se(ut,ee,W-1,ut.__line__||ce)}).some(function(ut){return ut});G.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:ce})}function _e(j){j.crs&&G.push("object"==typeof j.crs&&j.crs.properties&&"urn:ogc:def:crs:OGC:1.3:CRS84"===j.crs.properties.name?{message:"old-style crs member is not recommended, this object is equivalent to the default and should be removed",line:j.__line__}:{message:"old-style crs member is not recommended",line:j.__line__})}function Me(j){if(j.bbox){if(Array.isArray(j.bbox))return Z(j.bbox,"number")||G.push({message:"each element in a bbox member must be a number",line:j.bbox.__line__}),4===j.bbox.length||6===j.bbox.length||G.push({message:"bbox must contain 4 elements (for 2D) or 6 elements (for 3D)",line:j.bbox.__line__}),G.length;G.push({message:"bbox member must be an array of numbers, but is a "+typeof j.bbox,line:j.__line__})}}function A(j){_e(j),Me(j),void 0!==j.id&&"string"!=typeof j.id&&"number"!=typeof j.id&&G.push({message:'Feature "id" member must have a string or number value',line:j.__line__}),void 0!==j.features&&G.push({message:'Feature object cannot contain a "features" member',line:j.__line__}),void 0!==j.coordinates&&G.push({message:'Feature object cannot contain a "coordinates" member',line:j.__line__}),"Feature"!==j.type&&G.push({message:"GeoJSON features must have a type=feature member",line:j.__line__}),Y(j,"properties","object"),Y(j,"geometry","object")||j.geometry&&F(j.geometry)}var L={Point:function Ze(j){_e(j),Me(j),function Ne(j){void 0!==j.properties&&G.push({message:'geometry object cannot contain a "properties" member',line:j.__line__}),void 0!==j.geometry&&G.push({message:'geometry object cannot contain a "geometry" member',line:j.__line__}),void 0!==j.features&&G.push({message:'geometry object cannot contain a "features" member',line:j.__line__})}(j),Y(j,"coordinates","array")||me(j.coordinates)},Feature:A,MultiPoint:function Ct(j){_e(j),Me(j),Y(j,"coordinates","array")||se(j.coordinates,"",1)},LineString:function Je(j){_e(j),Me(j),Y(j,"coordinates","array")||se(j.coordinates,"Line",1)},MultiLineString:function nt(j){_e(j),Me(j),Y(j,"coordinates","array")||se(j.coordinates,"Line",2)},FeatureCollection:function ie(j){if(_e(j),Me(j),void 0!==j.properties&&G.push({message:'FeatureCollection object cannot contain a "properties" member',line:j.__line__}),void 0!==j.coordinates&&G.push({message:'FeatureCollection object cannot contain a "coordinates" member',line:j.__line__}),!Y(j,"features","array")){if(!Z(j.features,"object"))return G.push({message:"Every feature must be an object",line:j.__line__});j.features.forEach(A)}},GeometryCollection:function Ue(j){_e(j),Me(j),Y(j,"geometries","array")||(Z(j.geometries,"object")||G.push({message:"The geometries array in a GeometryCollection must contain only geometry objects",line:j.__line__}),1===j.geometries.length&&G.push({message:"GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type",line:j.geometries.__line__}),j.geometries.forEach(function(ee){ee&&("GeometryCollection"===ee.type&&G.push({message:"GeometryCollection should avoid nested geometry collections",line:j.geometries.__line__}),F(ee))}))},Polygon:function je(j){_e(j),Me(j),Y(j,"coordinates","array")||se(j.coordinates,"LinearRing",2)||V(j,G)},MultiPolygon:function Ee(j){_e(j),Me(j),Y(j,"coordinates","array")||se(j.coordinates,"LinearRing",3)||V(j,G)}},B=Object.keys(L).reduce(function(j,ee){return j[ee.toLowerCase()]=ee,j},{});return"object"!=typeof m||null==m?(G.push({message:"The root of a GeoJSON object must be an object.",line:0}),G):(F(m),G.forEach(function(j){({}).hasOwnProperty.call(j,"line")&&void 0===j.line&&delete j.line}),G)}},4967:Ae=>{function J(m){return m*Math.PI/180}function U(m){var $=0;if(m.length>2)for(var G,z,T=0;T<m.length-1;T++)$+=J((z=m[T+1])[0]-(G=m[T])[0])*(2+Math.sin(J(G[1]))+Math.sin(J(z[1])));return $>=0}function V(m){if(m&&m.length>0){if(U(m[0]))return!1;if(!m.slice(1,m.length).every(U))return!1}return!0}Ae.exports=function($,G){(function X(m){return"Polygon"===m.type?V(m.coordinates):"MultiPolygon"===m.type?m.coordinates.every(V):void 0})($)||G.push({message:"Polygons and MultiPolygons should follow the right-hand rule",level:"message",line:$.__line__})}},8527:function(Ae){Ae.exports=function(){"use strict";var J=function(R,K){var de={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},Ge={on:function(Qe,ft,jt){if(void 0===de[Qe])throw new Error("Invalid event type: "+Qe);de[Qe].push({selector:ft,fn:jt})},render:function(Qe){K.store.featureChanged(Qe)}},tt=function(Qe,ft){for(var jt=de[Qe],Lt=jt.length;Lt--;){var Yt=jt[Lt];if(Yt.selector(ft)){Yt.fn.call(Ge,ft)||K.store.render(),K.ui.updateMapClasses();break}}};return R.start.call(Ge),{render:R.render,stop:function(){R.stop&&R.stop()},trash:function(){R.trash&&(R.trash(),K.store.render())},combineFeatures:function(){R.combineFeatures&&R.combineFeatures()},uncombineFeatures:function(){R.uncombineFeatures&&R.uncombineFeatures()},drag:function(Qe){tt("drag",Qe)},click:function(Qe){tt("click",Qe)},mousemove:function(Qe){tt("mousemove",Qe)},mousedown:function(Qe){tt("mousedown",Qe)},mouseup:function(Qe){tt("mouseup",Qe)},mouseout:function(Qe){tt("mouseout",Qe)},keydown:function(Qe){tt("keydown",Qe)},keyup:function(Qe){tt("keyup",Qe)},touchstart:function(Qe){tt("touchstart",Qe)},touchmove:function(Qe){tt("touchmove",Qe)},touchend:function(Qe){tt("touchend",Qe)},tap:function(Qe){tt("tap",Qe)}}},U=6378137;function V(R){var K=0;if(R&&R.length>0){K+=Math.abs(X(R[0]));for(var de=1;de<R.length;de++)K-=Math.abs(X(R[de]))}return K}function X(R){var K,de,Ge,tt,Qe,ft,jt=0,Lt=R.length;if(Lt>2){for(ft=0;ft<Lt;ft++)ft===Lt-2?(Ge=Lt-2,tt=Lt-1,Qe=0):ft===Lt-1?(Ge=Lt-1,tt=0,Qe=1):(Ge=ft,tt=ft+1,Qe=ft+2),K=R[Ge],de=R[tt],jt+=(m(R[Qe][0])-m(K[0]))*Math.sin(m(de[1]));jt=jt*U*U/2}return jt}function m(R){return R*Math.PI/180}var $_geometry=function R(K){var de,Ge=0;switch(K.type){case"Polygon":return V(K.coordinates);case"MultiPolygon":for(de=0;de<K.coordinates.length;de++)Ge+=V(K.coordinates[de]);return Ge;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(de=0;de<K.geometries.length;de++)Ge+=R(K.geometries[de]);return Ge}},Me="mapbox-gl-draw-hot",Ne="mapbox-gl-draw-cold",Ze="add",je="move",Je="pointer",nt="none",Ct={POLYGON:"polygon",LINE:"line_string",POINT:"point"},Ue="Feature",A="Polygon",L="LineString",B="Point",j="FeatureCollection",ut={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},be="draw.create",bt="draw.update",Zn="feature",Wt="midpoint",Ce="vertex",Gn="true",ir="false",hi=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],Gi={Point:0,LineString:1,Polygon:2};function qt(R,K){var de=Gi[R.geometry.type]-Gi[K.geometry.type];return 0===de&&R.geometry.type===A?R.area-K.area:de}function Ot(R){if(this._items={},this._nums={},this._length=R?R.length:0,R)for(var K=0,de=R.length;K<de;K++)this.add(R[K]),void 0!==R[K]&&("string"==typeof R[K]?this._items[R[K]]=K:this._nums[R[K]]=K)}Ot.prototype.add=function(R){return this.has(R)||(this._length++,"string"==typeof R?this._items[R]=this._length:this._nums[R]=this._length),this},Ot.prototype.delete=function(R){return!1===this.has(R)||(this._length--,delete this._items[R],delete this._nums[R]),this},Ot.prototype.has=function(R){return!("string"!=typeof R&&"number"!=typeof R||void 0===this._items[R]&&void 0===this._nums[R])},Ot.prototype.values=function(){var R=this,K=[];return Object.keys(this._items).forEach(function(de){K.push({k:de,v:R._items[de]})}),Object.keys(this._nums).forEach(function(de){K.push({k:JSON.parse(de),v:R._nums[de]})}),K.sort(function(de,Ge){return de.v-Ge.v}).map(function(de){return de.k})},Ot.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var za=[Zn,Wt,Ce],wa={click:function(R,K,de){return li(R,K,de,de.options.clickBuffer)},touch:function(R,K,de){return li(R,K,de,de.options.touchBuffer)}};function li(R,K,de,Ge){if(null===de.map)return[];var Yt,mt,tt=R?(void 0===(mt=Ge)&&(mt=0),[[(Yt=R).point.x-mt,Yt.point.y-mt],[Yt.point.x+mt,Yt.point.y+mt]]):K,Qe={};de.options.styles&&(Qe.layers=de.options.styles.map(function(Yt){return Yt.id}));var ft=de.map.queryRenderedFeatures(tt,Qe).filter(function(Yt){return-1!==za.indexOf(Yt.properties.meta)}),jt=new Ot,Lt=[];return ft.forEach(function(Yt){var mt=Yt.properties.id;jt.has(mt)||(jt.add(mt),Lt.push(Yt))}),function(Yt){return Yt.map(function(mt){return mt.geometry.type===A&&(mt.area=$_geometry({type:Ue,property:{},geometry:mt.geometry})),mt}).sort(qt).map(function(mt){return delete mt.area,mt})}(Lt)}function qr(R,K){var de=wa.click(R,null,K),Ge={mouse:nt};return de[0]&&(Ge.mouse=de[0].properties.active===Gn?je:Je,Ge.feature=de[0].properties.meta),-1!==K.events.currentModeName().indexOf("draw")&&(Ge.mouse=Ze),K.ui.queueMapClasses(Ge),K.ui.updateMapClasses(),de[0]}function Ys(R,K){var de=R.x-K.x,Ge=R.y-K.y;return Math.sqrt(de*de+Ge*Ge)}function Qa(R,K,de){void 0===de&&(de={});var Ge=null!=de.fineTolerance?de.fineTolerance:4,tt=null!=de.grossTolerance?de.grossTolerance:12,Qe=null!=de.interval?de.interval:500;R.point=R.point||K.point,R.time=R.time||K.time;var ft=Ys(R.point,K.point);return ft<Ge||ft<tt&&K.time-R.time<Qe}function Mo(R,K,de){void 0===de&&(de={});var Ge=null!=de.tolerance?de.tolerance:25,tt=null!=de.interval?de.interval:250;return R.point=R.point||K.point,R.time=R.time||K.time,Ys(R.point,K.point)<Ge&&K.time-R.time<tt}function Ba(R,K){return R(K={exports:{}},K.exports),K.exports}var fs=Ba(function(R){var K=R.exports=function(de,Ge){if(Ge||(Ge=16),void 0===de&&(de=128),de<=0)return"0";for(var tt=Math.log(Math.pow(2,de))/Math.log(Ge),Qe=2;tt===1/0;Qe*=2)tt=Math.log(Math.pow(2,de/Qe))/Math.log(Ge)*Qe;var ft=tt-Math.floor(tt),jt="";for(Qe=0;Qe<Math.floor(tt);Qe++)jt=Math.floor(Math.random()*Ge).toString(Ge)+jt;if(ft){var Lt=Math.pow(Ge,ft);jt=Math.floor(Math.random()*Lt).toString(Ge)+jt}var Yt=parseInt(jt,Ge);return Yt!==1/0&&Yt>=Math.pow(2,de)?K(de,Ge):jt};K.rack=function(de,Ge,tt){var Qe=function(jt){var Lt=0;do{if(Lt++>10){if(!tt)throw new Error("too many ID collisions, use more bits");de+=tt}var Yt=K(de,Ge)}while(Object.hasOwnProperty.call(ft,Yt));return ft[Yt]=jt,Yt},ft=Qe.hats={};return Qe.get=function(jt){return Qe.hats[jt]},Qe.set=function(jt,Lt){return Qe.hats[jt]=Lt,Qe},Qe.bits=de||128,Qe.base=Ge||16,Qe}}),io=function(R,K){this.ctx=R,this.properties=K.properties||{},this.coordinates=K.geometry.coordinates,this.id=K.id||fs(),this.type=K.geometry.type};io.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},io.prototype.incomingCoords=function(R){this.setCoordinates(R)},io.prototype.setCoordinates=function(R){this.coordinates=R,this.changed()},io.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},io.prototype.setProperty=function(R,K){this.properties[R]=K},io.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:Ue,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},io.prototype.internal=function(R){var K={id:this.id,meta:Zn,"meta:type":this.type,active:ir,mode:R};if(this.ctx.options.userProperties)for(var de in this.properties)K["user_"+de]=this.properties[de];return{type:Ue,properties:K,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var xa=function(R,K){io.call(this,R,K)};(xa.prototype=Object.create(io.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},xa.prototype.updateCoordinate=function(R,K,de){this.coordinates=3===arguments.length?[K,de]:[R,K],this.changed()},xa.prototype.getCoordinate=function(){return this.getCoordinates()};var oo=function(R,K){io.call(this,R,K)};(oo.prototype=Object.create(io.prototype)).isValid=function(){return this.coordinates.length>1},oo.prototype.addCoordinate=function(R,K,de){this.changed();var Ge=parseInt(R,10);this.coordinates.splice(Ge,0,[K,de])},oo.prototype.getCoordinate=function(R){var K=parseInt(R,10);return JSON.parse(JSON.stringify(this.coordinates[K]))},oo.prototype.removeCoordinate=function(R){this.changed(),this.coordinates.splice(parseInt(R,10),1)},oo.prototype.updateCoordinate=function(R,K,de){var Ge=parseInt(R,10);this.coordinates[Ge]=[K,de],this.changed()};var wo=function(R,K){io.call(this,R,K),this.coordinates=this.coordinates.map(function(de){return de.slice(0,-1)})};(wo.prototype=Object.create(io.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(R){return R.length>2})},wo.prototype.incomingCoords=function(R){this.coordinates=R.map(function(K){return K.slice(0,-1)}),this.changed()},wo.prototype.setCoordinates=function(R){this.coordinates=R,this.changed()},wo.prototype.addCoordinate=function(R,K,de){this.changed();var Ge=R.split(".").map(function(tt){return parseInt(tt,10)});this.coordinates[Ge[0]].splice(Ge[1],0,[K,de])},wo.prototype.removeCoordinate=function(R){this.changed();var K=R.split(".").map(function(Ge){return parseInt(Ge,10)}),de=this.coordinates[K[0]];de&&(de.splice(K[1],1),de.length<3&&this.coordinates.splice(K[0],1))},wo.prototype.getCoordinate=function(R){var K=R.split(".").map(function(Ge){return parseInt(Ge,10)});return JSON.parse(JSON.stringify(this.coordinates[K[0]][K[1]]))},wo.prototype.getCoordinates=function(){return this.coordinates.map(function(R){return R.concat([R[0]])})},wo.prototype.updateCoordinate=function(R,K,de){this.changed();var Ge=R.split("."),tt=parseInt(Ge[0],10),Qe=parseInt(Ge[1],10);void 0===this.coordinates[tt]&&(this.coordinates[tt]=[]),this.coordinates[tt][Qe]=[K,de]};var Ml={MultiPoint:xa,MultiLineString:oo,MultiPolygon:wo},Es=function(R,K,de,Ge,tt){var Qe=de.split("."),ft=parseInt(Qe[0],10),jt=Qe[1]?Qe.slice(1).join("."):null;return R[ft][K](jt,Ge,tt)},xo=function(R,K){if(io.call(this,R,K),delete this.coordinates,this.model=Ml[K.geometry.type],void 0===this.model)throw new TypeError(K.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(K.geometry.coordinates)};function ur(R){this.map=R.map,this.drawConfig=JSON.parse(JSON.stringify(R.options||{})),this._ctx=R}(xo.prototype=Object.create(io.prototype))._coordinatesToFeatures=function(R){var K=this,de=this.model.bind(this);return R.map(function(Ge){return new de(K.ctx,{id:fs(),type:Ue,properties:{},geometry:{coordinates:Ge,type:K.type.replace("Multi","")}})})},xo.prototype.isValid=function(){return this.features.every(function(R){return R.isValid()})},xo.prototype.setCoordinates=function(R){this.features=this._coordinatesToFeatures(R),this.changed()},xo.prototype.getCoordinate=function(R){return Es(this.features,"getCoordinate",R)},xo.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(R){return R.type===A?R.getCoordinates():R.coordinates})))},xo.prototype.updateCoordinate=function(R,K,de){Es(this.features,"updateCoordinate",R,K,de),this.changed()},xo.prototype.addCoordinate=function(R,K,de){Es(this.features,"addCoordinate",R,K,de),this.changed()},xo.prototype.removeCoordinate=function(R){Es(this.features,"removeCoordinate",R),this.changed()},xo.prototype.getFeatures=function(){return this.features},ur.prototype.setSelected=function(R){return this._ctx.store.setSelected(R)},ur.prototype.setSelectedCoordinates=function(R){var K=this;this._ctx.store.setSelectedCoordinates(R),R.reduce(function(de,Ge){return void 0===de[Ge.feature_id]&&(de[Ge.feature_id]=!0,K._ctx.store.get(Ge.feature_id).changed()),de},{})},ur.prototype.getSelected=function(){return this._ctx.store.getSelected()},ur.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},ur.prototype.isSelected=function(R){return this._ctx.store.isSelected(R)},ur.prototype.getFeature=function(R){return this._ctx.store.get(R)},ur.prototype.select=function(R){return this._ctx.store.select(R)},ur.prototype.deselect=function(R){return this._ctx.store.deselect(R)},ur.prototype.deleteFeature=function(R,K){return void 0===K&&(K={}),this._ctx.store.delete(R,K)},ur.prototype.addFeature=function(R){return this._ctx.store.add(R)},ur.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},ur.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},ur.prototype.setActionableState=function(R){return void 0===R&&(R={}),this._ctx.events.actionable({trash:R.trash||!1,combineFeatures:R.combineFeatures||!1,uncombineFeatures:R.uncombineFeatures||!1})},ur.prototype.changeMode=function(R,K,de){return void 0===K&&(K={}),void 0===de&&(de={}),this._ctx.events.changeMode(R,K,de)},ur.prototype.updateUIClasses=function(R){return this._ctx.ui.queueMapClasses(R)},ur.prototype.activateUIButton=function(R){return this._ctx.ui.setActiveButton(R)},ur.prototype.featuresAt=function(R,K,de){if(void 0===de&&(de="click"),"click"!==de&&"touch"!==de)throw new Error("invalid buffer type");return wa[de](R,K,this._ctx)},ur.prototype.newFeature=function(R){var K=R.geometry.type;return K===B?new xa(this._ctx,R):K===L?new oo(this._ctx,R):K===A?new wo(this._ctx,R):new xo(this._ctx,R)},ur.prototype.isInstanceOf=function(R,K){if(R===B)return K instanceof xa;if(R===L)return K instanceof oo;if(R===A)return K instanceof wo;if("MultiFeature"===R)return K instanceof xo;throw new Error("Unknown feature class: "+R)},ur.prototype.doRender=function(R){return this._ctx.store.featureChanged(R)},ur.prototype.onSetup=function(){},ur.prototype.onDrag=function(){},ur.prototype.onClick=function(){},ur.prototype.onMouseMove=function(){},ur.prototype.onMouseDown=function(){},ur.prototype.onMouseUp=function(){},ur.prototype.onMouseOut=function(){},ur.prototype.onKeyUp=function(){},ur.prototype.onKeyDown=function(){},ur.prototype.onTouchStart=function(){},ur.prototype.onTouchMove=function(){},ur.prototype.onTouchEnd=function(){},ur.prototype.onTap=function(){},ur.prototype.onStop=function(){},ur.prototype.onTrash=function(){},ur.prototype.onCombineFeature=function(){},ur.prototype.onUncombineFeature=function(){},ur.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Ol={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},pl=Object.keys(Ol);function Oo(R){return[].concat(R).filter(function(K){return void 0!==K})}function hs(){var R=this;if(!R.ctx.map||void 0===R.ctx.map.getSource(Me))return Lt();var K=R.ctx.events.currentModeName();R.ctx.ui.queueMapClasses({mode:K});var de=[],Ge=[];R.isDirty?Ge=R.getAllIds():(de=R.getChangedIds().filter(function(Yt){return void 0!==R.get(Yt)}),Ge=R.sources.hot.filter(function(Yt){return Yt.properties.id&&-1===de.indexOf(Yt.properties.id)&&void 0!==R.get(Yt.properties.id)}).map(function(Yt){return Yt.properties.id})),R.sources.hot=[];var tt=R.sources.cold.length;R.sources.cold=R.isDirty?[]:R.sources.cold.filter(function(Yt){return-1===de.indexOf(Yt.properties.id||Yt.properties.parent)});var Qe=tt!==R.sources.cold.length||Ge.length>0;function ft(Yt,mt){var tn=R.get(Yt).internal(K);R.ctx.events.currentModeRender(tn,function(gn){R.sources[mt].push(gn)})}if(de.forEach(function(Yt){return ft(Yt,"hot")}),Ge.forEach(function(Yt){return ft(Yt,"cold")}),Qe&&R.ctx.map.getSource(Ne).setData({type:j,features:R.sources.cold}),R.ctx.map.getSource(Me).setData({type:j,features:R.sources.hot}),R._emitSelectionChange&&(R.ctx.map.fire("draw.selectionchange",{features:R.getSelected().map(function(Yt){return Yt.toGeoJSON()}),points:R.getSelectedCoordinates().map(function(Yt){return{type:Ue,properties:{},geometry:{type:B,coordinates:Yt.coordinates}}})}),R._emitSelectionChange=!1),R._deletedFeaturesToEmit.length){var jt=R._deletedFeaturesToEmit.map(function(Yt){return Yt.toGeoJSON()});R._deletedFeaturesToEmit=[],R.ctx.map.fire("draw.delete",{features:jt})}function Lt(){R.isDirty=!1,R.clearChangedIds()}Lt(),R.ctx.map.fire("draw.render",{})}function Kr(R){var K,de=this;this._features={},this._featureIds=new Ot,this._selectedFeatureIds=new Ot,this._selectedCoordinates=[],this._changedFeatureIds=new Ot,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=R,this.sources={hot:[],cold:[]},this.render=function(){K||(K=requestAnimationFrame(function(){K=null,hs.call(de)}))},this.isDirty=!1}function Xs(R,K){var de=R._selectedCoordinates.filter(function(Ge){return R._selectedFeatureIds.has(Ge.feature_id)});R._selectedCoordinates.length===de.length||K.silent||(R._emitSelectionChange=!0),R._selectedCoordinates=de}Kr.prototype.createRenderBatch=function(){var R=this,K=this.render,de=0;return this.render=function(){de++},function(){R.render=K,de>0&&R.render()}},Kr.prototype.setDirty=function(){return this.isDirty=!0,this},Kr.prototype.featureChanged=function(R){return this._changedFeatureIds.add(R),this},Kr.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Kr.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Kr.prototype.getAllIds=function(){return this._featureIds.values()},Kr.prototype.add=function(R){return this.featureChanged(R.id),this._features[R.id]=R,this._featureIds.add(R.id),this},Kr.prototype.delete=function(R,K){var de=this;return void 0===K&&(K={}),Oo(R).forEach(function(Ge){de._featureIds.has(Ge)&&(de._featureIds.delete(Ge),de._selectedFeatureIds.delete(Ge),K.silent||-1===de._deletedFeaturesToEmit.indexOf(de._features[Ge])&&de._deletedFeaturesToEmit.push(de._features[Ge]),delete de._features[Ge],de.isDirty=!0)}),Xs(this,K),this},Kr.prototype.get=function(R){return this._features[R]},Kr.prototype.getAll=function(){var R=this;return Object.keys(this._features).map(function(K){return R._features[K]})},Kr.prototype.select=function(R,K){var de=this;return void 0===K&&(K={}),Oo(R).forEach(function(Ge){de._selectedFeatureIds.has(Ge)||(de._selectedFeatureIds.add(Ge),de._changedFeatureIds.add(Ge),K.silent||(de._emitSelectionChange=!0))}),this},Kr.prototype.deselect=function(R,K){var de=this;return void 0===K&&(K={}),Oo(R).forEach(function(Ge){de._selectedFeatureIds.has(Ge)&&(de._selectedFeatureIds.delete(Ge),de._changedFeatureIds.add(Ge),K.silent||(de._emitSelectionChange=!0))}),Xs(this,K),this},Kr.prototype.clearSelected=function(R){return void 0===R&&(R={}),this.deselect(this._selectedFeatureIds.values(),{silent:R.silent}),this},Kr.prototype.setSelected=function(R,K){var de=this;return void 0===K&&(K={}),R=Oo(R),this.deselect(this._selectedFeatureIds.values().filter(function(Ge){return-1===R.indexOf(Ge)}),{silent:K.silent}),this.select(R.filter(function(Ge){return!de._selectedFeatureIds.has(Ge)}),{silent:K.silent}),this},Kr.prototype.setSelectedCoordinates=function(R){return this._selectedCoordinates=R,this._emitSelectionChange=!0,this},Kr.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Kr.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Kr.prototype.getSelected=function(){var R=this;return this._selectedFeatureIds.values().map(function(K){return R.get(K)})},Kr.prototype.getSelectedCoordinates=function(){var R=this;return this._selectedCoordinates.map(function(K){return{coordinates:R.get(K.feature_id).getCoordinate(K.coord_path)}})},Kr.prototype.isSelected=function(R){return this._selectedFeatureIds.has(R)},Kr.prototype.setFeatureProperty=function(R,K,de){this.get(R).setProperty(K,de),this.featureChanged(R)},Kr.prototype.storeMapConfig=function(){var R=this;hi.forEach(function(K){R.ctx.map[K]&&(R._mapInitialConfig[K]=R.ctx.map[K].isEnabled())})},Kr.prototype.restoreMapConfig=function(){var R=this;Object.keys(this._mapInitialConfig).forEach(function(K){R._mapInitialConfig[K]?R.ctx.map[K].enable():R.ctx.map[K].disable()})},Kr.prototype.getInitialConfigValue=function(R){return void 0===this._mapInitialConfig[R]||this._mapInitialConfig[R]};var zr=function(){for(var R=arguments,K={},de=0;de<arguments.length;de++){var Ge=R[de];for(var tt in Ge)oe.call(Ge,tt)&&(K[tt]=Ge[tt])}return K},oe=Object.prototype.hasOwnProperty,le=["mode","feature","mouse"];function fe(R){var K=null,de=null,Ge={onRemove:function(){return R.map.off("load",Ge.connect),clearInterval(de),Ge.removeLayers(),R.store.restoreMapConfig(),R.ui.removeButtons(),R.events.removeEventListeners(),R.ui.clearMapClasses(),R.map=null,R.container=null,R.store=null,K&&K.parentNode&&K.parentNode.removeChild(K),K=null,this},connect:function(){R.map.off("load",Ge.connect),clearInterval(de),Ge.addLayers(),R.store.storeMapConfig(),R.events.addEventListeners()},onAdd:function(tt){var Qe=tt.fire;return tt.fire=function(ft,jt){var Lt=arguments;return 1===Qe.length&&1!==arguments.length&&(Lt=[zr({},{type:ft},jt)]),Qe.apply(tt,Lt)},R.map=tt,R.events=function(ft){var jt=Object.keys(ft.options.modes).reduce(function(At,yn){return At[yn]=function Bs(R){var K=Object.keys(R);return function(de,Ge){void 0===Ge&&(Ge={});var tt={},Qe=K.reduce(function(ft,jt){return ft[jt]=R[jt],ft},new ur(de));return{start:function(){var ft=this;tt=Qe.onSetup(Ge),pl.forEach(function(jt){var Lt,Yt=Ol[jt],mt=function(){return!1};R[Yt]&&(mt=function(){return!0}),ft.on(jt,mt,(Lt=Yt,function(tn){return Qe[Lt](tt,tn)}))})},stop:function(){Qe.onStop(tt)},trash:function(){Qe.onTrash(tt)},combineFeatures:function(){Qe.onCombineFeatures(tt)},uncombineFeatures:function(){Qe.onUncombineFeatures(tt)},render:function(ft,jt){Qe.toDisplayFeatures(tt,ft,jt)}}}}(ft.options.modes[yn]),At},{}),Lt={},Yt={},mt={},tn=null,gn=null;mt.drag=function(At,yn){yn({point:At.point,time:(new Date).getTime()})?(ft.ui.queueMapClasses({mouse:"drag"}),gn.drag(At)):At.originalEvent.stopPropagation()},mt.mousedrag=function(At){mt.drag(At,function(yn){return!Qa(Lt,yn)})},mt.touchdrag=function(At){mt.drag(At,function(yn){return!Mo(Yt,yn)})},mt.mousemove=function(At){if(1===(void 0!==At.originalEvent.buttons?At.originalEvent.buttons:At.originalEvent.which))return mt.mousedrag(At);var yn=qr(At,ft);At.featureTarget=yn,gn.mousemove(At)},mt.mousedown=function(At){Lt={time:(new Date).getTime(),point:At.point};var yn=qr(At,ft);At.featureTarget=yn,gn.mousedown(At)},mt.mouseup=function(At){var yn=qr(At,ft);At.featureTarget=yn,Qa(Lt,{point:At.point,time:(new Date).getTime()})?gn.click(At):gn.mouseup(At)},mt.mouseout=function(At){gn.mouseout(At)},mt.touchstart=function(At){if(At.originalEvent.preventDefault(),ft.options.touchEnabled){Yt={time:(new Date).getTime(),point:At.point};var yn=wa.touch(At,null,ft)[0];At.featureTarget=yn,gn.touchstart(At)}},mt.touchmove=function(At){if(At.originalEvent.preventDefault(),ft.options.touchEnabled)return gn.touchmove(At),mt.touchdrag(At)},mt.touchend=function(At){if(At.originalEvent.preventDefault(),ft.options.touchEnabled){var yn=wa.touch(At,null,ft)[0];At.featureTarget=yn,Mo(Yt,{time:(new Date).getTime(),point:At.point})?gn.tap(At):gn.touchend(At)}};var Fn=function(At){return!(8===At||46===At||At>=48&&At<=57)};function kn(At,yn,dr){void 0===dr&&(dr={}),gn.stop();var Dn=jt[At];if(void 0===Dn)throw new Error(At+" is not valid");tn=At;var kr=Dn(ft,yn);gn=J(kr,ft),dr.silent||ft.map.fire("draw.modechange",{mode:At}),ft.store.setDirty(),ft.store.render()}mt.keydown=function(At){"mapboxgl-canvas"===(At.srcElement||At.target).classList[0]&&(8!==At.keyCode&&46!==At.keyCode||!ft.options.controls.trash?Fn(At.keyCode)?gn.keydown(At):49===At.keyCode&&ft.options.controls.point?kn(ut.DRAW_POINT):50===At.keyCode&&ft.options.controls.line_string?kn(ut.DRAW_LINE_STRING):51===At.keyCode&&ft.options.controls.polygon&&kn(ut.DRAW_POLYGON):(At.preventDefault(),gn.trash()))},mt.keyup=function(At){Fn(At.keyCode)&&gn.keyup(At)},mt.zoomend=function(){ft.store.changeZoom()},mt.data=function(At){if("style"===At.dataType){var yn=ft.setup,dr=ft.map,kr=ft.store;ft.options.styles.some(function(An){return dr.getLayer(An.id)})||(yn.addLayers(),kr.setDirty(),kr.render())}};var ji={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){gn=J(jt[tn=ft.options.defaultMode](ft),ft)},changeMode:kn,actionable:function(At){var yn=!1;Object.keys(At).forEach(function(dr){if(void 0===ji[dr])throw new Error("Invalid action type");ji[dr]!==At[dr]&&(yn=!0),ji[dr]=At[dr]}),yn&&ft.map.fire("draw.actionable",{actions:ji})},currentModeName:function(){return tn},currentModeRender:function(At,yn){return gn.render(At,yn)},fire:function(At,yn){mt[At]&&mt[At](yn)},addEventListeners:function(){ft.map.on("mousemove",mt.mousemove),ft.map.on("mousedown",mt.mousedown),ft.map.on("mouseup",mt.mouseup),ft.map.on("data",mt.data),ft.map.on("touchmove",mt.touchmove),ft.map.on("touchstart",mt.touchstart),ft.map.on("touchend",mt.touchend),ft.container.addEventListener("mouseout",mt.mouseout),ft.options.keybindings&&(ft.container.addEventListener("keydown",mt.keydown),ft.container.addEventListener("keyup",mt.keyup))},removeEventListeners:function(){ft.map.off("mousemove",mt.mousemove),ft.map.off("mousedown",mt.mousedown),ft.map.off("mouseup",mt.mouseup),ft.map.off("data",mt.data),ft.map.off("touchmove",mt.touchmove),ft.map.off("touchstart",mt.touchstart),ft.map.off("touchend",mt.touchend),ft.container.removeEventListener("mouseout",mt.mouseout),ft.options.keybindings&&(ft.container.removeEventListener("keydown",mt.keydown),ft.container.removeEventListener("keyup",mt.keyup))},trash:function(At){gn.trash(At)},combineFeatures:function(){gn.combineFeatures()},uncombineFeatures:function(){gn.uncombineFeatures()},getMode:function(){return tn}}}(R),R.ui=function(ft){var jt={},Lt=null,Yt={mode:null,feature:null,mouse:null},mt={mode:null,feature:null,mouse:null};function tn(At){mt=zr(mt,At)}function gn(){var At,yn;if(ft.container){var dr=[],Dn=[];le.forEach(function(kr){mt[kr]!==Yt[kr]&&(dr.push(kr+"-"+Yt[kr]),null!==mt[kr]&&Dn.push(kr+"-"+mt[kr]))}),dr.length>0&&(At=ft.container.classList).remove.apply(At,dr),Dn.length>0&&(yn=ft.container.classList).add.apply(yn,Dn),Yt=zr(Yt,mt)}}function Fn(At,yn){void 0===yn&&(yn={});var dr=document.createElement("button");return dr.className="mapbox-gl-draw_ctrl-draw-btn "+yn.className,dr.setAttribute("title",yn.title),yn.container.appendChild(dr),dr.addEventListener("click",function(Dn){if(Dn.preventDefault(),Dn.stopPropagation(),Dn.target===Lt)return kn(),void yn.onDeactivate();ji(At),yn.onActivate()},!0),dr}function kn(){Lt&&(Lt.classList.remove("active"),Lt=null)}function ji(At){kn();var yn=jt[At];yn&&yn&&"trash"!==At&&(yn.classList.add("active"),Lt=yn)}return{setActiveButton:ji,queueMapClasses:tn,updateMapClasses:gn,clearMapClasses:function(){tn({mode:null,feature:null,mouse:null}),gn()},addButtons:function(){var At=ft.options.controls,yn=document.createElement("div");return yn.className="mapboxgl-ctrl-group mapboxgl-ctrl",At&&(At[Ct.LINE]&&(jt[Ct.LINE]=Fn(Ct.LINE,{container:yn,className:"mapbox-gl-draw_line",title:"LineString tool "+(ft.options.keybindings?"(l)":""),onActivate:function(){return ft.events.changeMode(ut.DRAW_LINE_STRING)},onDeactivate:function(){return ft.events.trash()}})),At[Ct.POLYGON]&&(jt[Ct.POLYGON]=Fn(Ct.POLYGON,{container:yn,className:"mapbox-gl-draw_polygon",title:"Polygon tool "+(ft.options.keybindings?"(p)":""),onActivate:function(){return ft.events.changeMode(ut.DRAW_POLYGON)},onDeactivate:function(){return ft.events.trash()}})),At[Ct.POINT]&&(jt[Ct.POINT]=Fn(Ct.POINT,{container:yn,className:"mapbox-gl-draw_point",title:"Marker tool "+(ft.options.keybindings?"(m)":""),onActivate:function(){return ft.events.changeMode(ut.DRAW_POINT)},onDeactivate:function(){return ft.events.trash()}})),At.trash&&(jt.trash=Fn("trash",{container:yn,className:"mapbox-gl-draw_trash",title:"Delete",onActivate:function(){ft.events.trash()}})),At.combine_features&&(jt.combine_features=Fn("combineFeatures",{container:yn,className:"mapbox-gl-draw_combine",title:"Combine",onActivate:function(){ft.events.combineFeatures()}})),At.uncombine_features&&(jt.uncombine_features=Fn("uncombineFeatures",{container:yn,className:"mapbox-gl-draw_uncombine",title:"Uncombine",onActivate:function(){ft.events.uncombineFeatures()}}))),yn},removeButtons:function(){Object.keys(jt).forEach(function(At){var yn=jt[At];yn.parentNode&&yn.parentNode.removeChild(yn),delete jt[At]})}}}(R),R.container=tt.getContainer(),R.store=new Kr(R),K=R.ui.addButtons(),R.options.boxSelect&&(tt.boxZoom.disable(),tt.dragPan.disable(),tt.dragPan.enable()),tt.loaded()?Ge.connect():(tt.on("load",Ge.connect),de=setInterval(function(){tt.loaded()&&Ge.connect()},16)),R.events.start(),K},addLayers:function(){R.map.addSource(Ne,{data:{type:j,features:[]},type:"geojson"}),R.map.addSource(Me,{data:{type:j,features:[]},type:"geojson"}),R.options.styles.forEach(function(tt){R.map.addLayer(tt)}),R.store.setDirty(!0),R.store.render()},removeLayers:function(){R.options.styles.forEach(function(tt){R.map.getLayer(tt.id)&&R.map.removeLayer(tt.id)}),R.map.getSource(Ne)&&R.map.removeSource(Ne),R.map.getSource(Me)&&R.map.removeSource(Me)}};return R.setup=Ge,Ge}function ve(R){return function(K){var de=K.featureTarget;return!!de&&!!de.properties&&de.properties.meta===R}}function Te(R){return!!R.featureTarget&&!!R.featureTarget.properties&&R.featureTarget.properties.active===Gn&&R.featureTarget.properties.meta===Zn}function $e(R){return!!R.featureTarget&&!!R.featureTarget.properties&&R.featureTarget.properties.active===ir&&R.featureTarget.properties.meta===Zn}function Xe(R){return void 0===R.featureTarget}function He(R){var K=R.featureTarget;return!!K&&!!K.properties&&K.properties.meta===Ce}function xe(R){return!!R.originalEvent&&!0===R.originalEvent.shiftKey}function Fe(R){return 27===R.keyCode}function Rt(R){return 13===R.keyCode}var Ft=ct;function ct(R,K){this.x=R,this.y=K}function Et(R,K){var de=K.getBoundingClientRect();return new Ft(R.clientX-de.left-(K.clientLeft||0),R.clientY-de.top-(K.clientTop||0))}function Zt(R,K,de,Ge){return{type:Ue,properties:{meta:Ce,parent:R,coord_path:de,active:Ge?Gn:ir},geometry:{type:B,coordinates:K}}}function Jt(R,K,de){void 0===K&&(K={}),void 0===de&&(de=null);var Ge,tt=R.geometry,Qe=tt.type,ft=tt.coordinates,jt=R.properties&&R.properties.id,Lt=[];function Yt(tn,gn){var Fn="",kn=null;tn.forEach(function(ji,At){var yn=null!=gn?gn+"."+At:String(At),dr=Zt(jt,ji,yn,mt(yn));if(K.midpoints&&kn){var Dn=function(An,da,Qn){var vr=da.geometry.coordinates,Ti=Qn.geometry.coordinates;if(vr[1]>85||vr[1]<-85||Ti[1]>85||Ti[1]<-85)return null;var Ui={lng:(vr[0]+Ti[0])/2,lat:(vr[1]+Ti[1])/2};return{type:Ue,properties:{meta:Wt,parent:An,lng:Ui.lng,lat:Ui.lat,coord_path:Qn.properties.coord_path},geometry:{type:B,coordinates:[Ui.lng,Ui.lat]}}}(jt,kn,dr);Dn&&Lt.push(Dn)}kn=dr;var kr=JSON.stringify(ji);Fn!==kr&&Lt.push(dr),0===At&&(Fn=kr)})}function mt(tn){return!!K.selectedPaths&&-1!==K.selectedPaths.indexOf(tn)}return Qe===B?Lt.push(Zt(jt,ft,de,mt(de))):Qe===A?ft.forEach(function(tn,gn){Yt(tn,null!==de?de+"."+gn:String(gn))}):Qe===L?Yt(ft,de):0===Qe.indexOf("Multi")&&(Ge=Qe.replace("Multi",""),ft.forEach(function(tn,gn){Lt=Lt.concat(Jt({type:Ue,properties:R.properties,geometry:{type:Ge,coordinates:tn}},K,gn))})),Lt}ct.prototype={clone:function(){return new ct(this.x,this.y)},add:function(R){return this.clone()._add(R)},sub:function(R){return this.clone()._sub(R)},multByPoint:function(R){return this.clone()._multByPoint(R)},divByPoint:function(R){return this.clone()._divByPoint(R)},mult:function(R){return this.clone()._mult(R)},div:function(R){return this.clone()._div(R)},rotate:function(R){return this.clone()._rotate(R)},rotateAround:function(R,K){return this.clone()._rotateAround(R,K)},matMult:function(R){return this.clone()._matMult(R)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(R){return this.x===R.x&&this.y===R.y},dist:function(R){return Math.sqrt(this.distSqr(R))},distSqr:function(R){var K=R.x-this.x,de=R.y-this.y;return K*K+de*de},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(R){return Math.atan2(this.y-R.y,this.x-R.x)},angleWith:function(R){return this.angleWithSep(R.x,R.y)},angleWithSep:function(R,K){return Math.atan2(this.x*K-this.y*R,this.x*R+this.y*K)},_matMult:function(R){var de=R[2]*this.x+R[3]*this.y;return this.x=R[0]*this.x+R[1]*this.y,this.y=de,this},_add:function(R){return this.x+=R.x,this.y+=R.y,this},_sub:function(R){return this.x-=R.x,this.y-=R.y,this},_mult:function(R){return this.x*=R,this.y*=R,this},_div:function(R){return this.x/=R,this.y/=R,this},_multByPoint:function(R){return this.x*=R.x,this.y*=R.y,this},_divByPoint:function(R){return this.x/=R.x,this.y/=R.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var R=this.y;return this.y=this.x,this.x=-R,this},_rotate:function(R){var K=Math.cos(R),de=Math.sin(R),tt=de*this.x+K*this.y;return this.x=K*this.x-de*this.y,this.y=tt,this},_rotateAround:function(R,K){var de=Math.cos(R),Ge=Math.sin(R),Qe=K.y+Ge*(this.x-K.x)+de*(this.y-K.y);return this.x=K.x+de*(this.x-K.x)-Ge*(this.y-K.y),this.y=Qe,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ct.convert=function(R){return R instanceof ct?R:Array.isArray(R)?new ct(R[0],R[1]):R};var hn=function(R){setTimeout(function(){R.map&&R.map.doubleClickZoom&&R._ctx&&R._ctx.store&&R._ctx.store.getInitialConfigValue&&R._ctx.store.getInitialConfigValue("doubleClickZoom")&&R.map.doubleClickZoom.enable()},0)},St=function(R){setTimeout(function(){R.map&&R.map.doubleClickZoom&&R.map.doubleClickZoom.disable()},0)},Ut=function(R){if(!R||!R.type)return null;var K=Dt[R.type];return K?"geometry"===K?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:R}]}:"feature"===K?{type:"FeatureCollection",features:[R]}:"featurecollection"===K?R:void 0:null},Dt={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function Hn(R){switch(R&&R.type||null){case"FeatureCollection":return R.features=R.features.reduce(function(K,de){return K.concat(Hn(de))},[]),R;case"Feature":return R.geometry?Hn(R.geometry).map(function(K){var de={type:"Feature",properties:JSON.parse(JSON.stringify(R.properties)),geometry:K};return void 0!==R.id&&(de.id=R.id),de}):[R];case"MultiPoint":return R.coordinates.map(function(K){return{type:"Point",coordinates:K}});case"MultiPolygon":return R.coordinates.map(function(K){return{type:"Polygon",coordinates:K}});case"MultiLineString":return R.coordinates.map(function(K){return{type:"LineString",coordinates:K}});case"GeometryCollection":return R.geometries.map(Hn).reduce(function(K,de){return K.concat(de)},[]);case"Point":case"Polygon":case"LineString":return[R]}}var sn=Ba(function(R){var K=R.exports=function(mt){return new de(mt)};function de(mt){this.value=mt}function Ge(mt,tn,gn){var Fn=[],kn=[],ji=!0;return function At(yn){var dr=gn?tt(yn):yn,Dn={},kr=!0,An={node:dr,node_:yn,path:[].concat(Fn),parent:kn[kn.length-1],parents:kn,key:Fn.slice(-1)[0],isRoot:0===Fn.length,level:Fn.length,circular:null,update:function(vr,Ti){An.isRoot||(An.parent.node[An.key]=vr),An.node=vr,Ti&&(kr=!1)},delete:function(vr){delete An.parent.node[An.key],vr&&(kr=!1)},remove:function(vr){jt(An.parent.node)?An.parent.node.splice(An.key,1):delete An.parent.node[An.key],vr&&(kr=!1)},keys:null,before:function(vr){Dn.before=vr},after:function(vr){Dn.after=vr},pre:function(vr){Dn.pre=vr},post:function(vr){Dn.post=vr},stop:function(){ji=!1},block:function(){kr=!1}};if(!ji)return An;function da(){if("object"==typeof An.node&&null!==An.node){An.keys&&An.node_===An.node||(An.keys=Qe(An.node)),An.isLeaf=0==An.keys.length;for(var vr=0;vr<kn.length;vr++)if(kn[vr].node_===yn){An.circular=kn[vr];break}}else An.isLeaf=!0,An.keys=null;An.notLeaf=!An.isLeaf,An.notRoot=!An.isRoot}da();var Qn=tn.call(An,An.node);return void 0!==Qn&&An.update&&An.update(Qn),Dn.before&&Dn.before.call(An,An.node),kr&&("object"!=typeof An.node||null===An.node||An.circular||(kn.push(An),da(),Lt(An.keys,function(vr,Ti){Fn.push(vr),Dn.pre&&Dn.pre.call(An,An.node[vr],vr);var Ui=At(An.node[vr]);gn&&Yt.call(An.node,vr)&&(An.node[vr]=Ui.node),Ui.isLast=Ti==An.keys.length-1,Ui.isFirst=0==Ti,Dn.post&&Dn.post.call(An,Ui),Fn.pop()}),kn.pop()),Dn.after&&Dn.after.call(An,An.node)),An}(mt).node}function tt(mt){if("object"==typeof mt&&null!==mt){var tn;if(jt(mt))tn=[];else if("[object Date]"===ft(mt))tn=new Date(mt.getTime?mt.getTime():mt);else if("[object RegExp]"===ft(mt))tn=new RegExp(mt);else if("[object Error]"===ft(mt))tn={message:mt.message};else if(function(kn){return"[object Boolean]"===ft(kn)}(mt))tn=new Boolean(mt);else if(function(kn){return"[object Number]"===ft(kn)}(mt))tn=new Number(mt);else if(function(kn){return"[object String]"===ft(kn)}(mt))tn=new String(mt);else if(Object.create&&Object.getPrototypeOf)tn=Object.create(Object.getPrototypeOf(mt));else if(mt.constructor===Object)tn={};else{var Fn=function(){};Fn.prototype=mt.constructor&&mt.constructor.prototype||mt.__proto__||{},tn=new Fn}return Lt(Qe(mt),function(kn){tn[kn]=mt[kn]}),tn}return mt}de.prototype.get=function(mt){for(var tn=this.value,gn=0;gn<mt.length;gn++){var Fn=mt[gn];if(!tn||!Yt.call(tn,Fn)){tn=void 0;break}tn=tn[Fn]}return tn},de.prototype.has=function(mt){for(var tn=this.value,gn=0;gn<mt.length;gn++){var Fn=mt[gn];if(!tn||!Yt.call(tn,Fn))return!1;tn=tn[Fn]}return!0},de.prototype.set=function(mt,tn){for(var gn=this.value,Fn=0;Fn<mt.length-1;Fn++){var kn=mt[Fn];Yt.call(gn,kn)||(gn[kn]={}),gn=gn[kn]}return gn[mt[Fn]]=tn,tn},de.prototype.map=function(mt){return Ge(this.value,mt,!0)},de.prototype.forEach=function(mt){return this.value=Ge(this.value,mt,!1),this.value},de.prototype.reduce=function(mt,tn){var gn=1===arguments.length,Fn=gn?this.value:tn;return this.forEach(function(kn){this.isRoot&&gn||(Fn=mt.call(this,Fn,kn))}),Fn},de.prototype.paths=function(){var mt=[];return this.forEach(function(tn){mt.push(this.path)}),mt},de.prototype.nodes=function(){var mt=[];return this.forEach(function(tn){mt.push(this.node)}),mt},de.prototype.clone=function(){var mt=[],tn=[];return function gn(Fn){for(var kn=0;kn<mt.length;kn++)if(mt[kn]===Fn)return tn[kn];if("object"==typeof Fn&&null!==Fn){var ji=tt(Fn);return mt.push(Fn),tn.push(ji),Lt(Qe(Fn),function(At){ji[At]=gn(Fn[At])}),mt.pop(),tn.pop(),ji}return Fn}(this.value)};var Qe=Object.keys||function(mt){var tn=[];for(var gn in mt)tn.push(gn);return tn};function ft(mt){return Object.prototype.toString.call(mt)}var jt=Array.isArray||function(mt){return"[object Array]"===Object.prototype.toString.call(mt)},Lt=function(mt,tn){if(mt.forEach)return mt.forEach(tn);for(var gn=0;gn<mt.length;gn++)tn(mt[gn],gn,mt)};Lt(Qe(de.prototype),function(mt){K[mt]=function(tn){var gn=[].slice.call(arguments,1),Fn=new de(tn);return Fn[mt].apply(Fn,gn)}});var Yt=Object.hasOwnProperty||function(mt,tn){return tn in mt}}),ri=In;function In(R){if(!(this instanceof In))return new In(R);this._bbox=R||[1/0,1/0,-1/0,-1/0],this._valid=!!R}In.prototype.include=function(R){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],R[0]),this._bbox[1]=Math.min(this._bbox[1],R[1]),this._bbox[2]=Math.max(this._bbox[2],R[0]),this._bbox[3]=Math.max(this._bbox[3],R[1]),this},In.prototype.equals=function(R){var K;return K=R instanceof In?R.bbox():R,this._bbox[0]==K[0]&&this._bbox[1]==K[1]&&this._bbox[2]==K[2]&&this._bbox[3]==K[3]},In.prototype.center=function(R){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},In.prototype.union=function(R){var K;return this._valid=!0,K=R instanceof In?R.bbox():R,this._bbox[0]=Math.min(this._bbox[0],K[0]),this._bbox[1]=Math.min(this._bbox[1],K[1]),this._bbox[2]=Math.max(this._bbox[2],K[2]),this._bbox[3]=Math.max(this._bbox[3],K[3]),this},In.prototype.bbox=function(){return this._valid?this._bbox:null},In.prototype.contains=function(R){if(!R)return this._fastContains();if(!this._valid)return null;var K=R[0],de=R[1];return this._bbox[0]<=K&&this._bbox[1]<=de&&this._bbox[2]>=K&&this._bbox[3]>=de},In.prototype.intersect=function(R){return this._valid?(K=R instanceof In?R.bbox():R,!(this._bbox[0]>K[2]||this._bbox[2]<K[0]||this._bbox[3]<K[1]||this._bbox[1]>K[3])):null;var K},In.prototype._fastContains=function(){return this._valid?new Function("ll","return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]"):new Function("return null;")},In.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var ui={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},yi=Object.keys(ui),Pr=function(R){return Yr(R).bbox()};function Yr(R){for(var K=ri(),de=function(R){if(!R)return[];var K=Hn(Ut(R)),de=[];return K.features.forEach(function(Ge){Ge.geometry&&(de=de.concat(function tt(Qe){return Array.isArray(Qe)&&Qe.length&&"number"==typeof Qe[0]?[Qe]:Qe.reduce(function(ft,jt){return Array.isArray(jt)&&Array.isArray(jt[0])?ft.concat(tt(jt)):(ft.push(jt),ft)},[])}(Ge.geometry.coordinates)))}),de}(R),Ge=0;Ge<de.length;Ge++)K.include(de[Ge]);return K}function Si(R,K){var de=-90,Ge=90,tt=-90,Qe=90,ft=270,jt=-270;R.forEach(function(Yt){var mt=Pr(Yt),tn=mt[1],gn=mt[3],Fn=mt[0],kn=mt[2];tn>de&&(de=tn),gn<Ge&&(Ge=gn),gn>tt&&(tt=gn),tn<Qe&&(Qe=tn),Fn<ft&&(ft=Fn),kn>jt&&(jt=kn)});var Lt=K;return de+Lt.lat>85&&(Lt.lat=85-de),tt+Lt.lat>90&&(Lt.lat=90-tt),Ge+Lt.lat<-85&&(Lt.lat=-85-Ge),Qe+Lt.lat<-90&&(Lt.lat=-90-Qe),ft+Lt.lng<=-270&&(Lt.lng+=360*Math.ceil(Math.abs(Lt.lng)/360)),jt+Lt.lng>=270&&(Lt.lng-=360*Math.ceil(Math.abs(Lt.lng)/360)),Lt}function Gr(R,K){var de=Si(R.map(function(Ge){return Ge.toGeoJSON()}),K);R.forEach(function(Ge){var tt,Qe=Ge.getCoordinates(),ft=function(Lt){var Yt={lng:Lt[0]+de.lng,lat:Lt[1]+de.lat};return[Yt.lng,Yt.lat]},jt=function(Lt){return Lt.map(function(Yt){return ft(Yt)})};Ge.type===B?tt=ft(Qe):Ge.type===L||"MultiPoint"===Ge.type?tt=Qe.map(ft):Ge.type===A||"MultiLineString"===Ge.type?tt=Qe.map(jt):"MultiPolygon"===Ge.type&&(tt=Qe.map(function(Lt){return Lt.map(function(Yt){return jt(Yt)})})),Ge.incomingCoords(tt)})}Pr.polygon=function(R){return Yr(R).polygon()},Pr.bboxify=function(R){return sn(R).map(function(K){K&&yi.some(function(de){return!!K[de]&&-1!==ui[de].indexOf(K.type)})&&(K.bbox=Yr(K).bbox(),this.update(K))})};var On={onSetup:function(R){var K=this,de={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:R.featureIds||[]};return this.setSelected(de.initiallySelectedFeatureIds.filter(function(Ge){return void 0!==K.getFeature(Ge)})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),de},fireUpdate:function(){this.map.fire(bt,{action:"move",features:this.getSelected().map(function(R){return R.toGeoJSON()})})},fireActionable:function(){var R=this,K=this.getSelected(),de=K.filter(function(jt){return R.isInstanceOf("MultiFeature",jt)}),Ge=!1;if(K.length>1){Ge=!0;var tt=K[0].type.replace("Multi","");K.forEach(function(jt){jt.type.replace("Multi","")!==tt&&(Ge=!1)})}this.setActionableState({combineFeatures:Ge,uncombineFeatures:de.length>0,trash:K.length>0})},getUniqueIds:function(R){return R.length?R.map(function(K){return K.properties.id}).filter(function(K){return void 0!==K}).reduce(function(K,de){return K.add(de),K},new Ot).values():[]},stopExtendedInteractions:function(R){R.boxSelectElement&&(R.boxSelectElement.parentNode&&R.boxSelectElement.parentNode.removeChild(R.boxSelectElement),R.boxSelectElement=null),this.map.dragPan.enable(),R.boxSelecting=!1,R.canBoxSelect=!1,R.dragMoving=!1,R.canDragMove=!1},onStop:function(){hn(this)},onMouseMove:function(R){return this.stopExtendedInteractions(R),!0},onMouseOut:function(R){return!R.dragMoving||this.fireUpdate()}};On.onTap=On.onClick=function(R,K){return Xe(K)?this.clickAnywhere(R,K):ve(Ce)(K)?this.clickOnVertex(R,K):(de=K).featureTarget&&de.featureTarget.properties&&de.featureTarget.properties.meta===Zn?this.clickOnFeature(R,K):void 0;var de},On.clickAnywhere=function(R){var K=this,de=this.getSelectedIds();de.length&&(this.clearSelectedFeatures(),de.forEach(function(Ge){return K.doRender(Ge)})),hn(this),this.stopExtendedInteractions(R)},On.clickOnVertex=function(R,K){this.changeMode(ut.DIRECT_SELECT,{featureId:K.featureTarget.properties.parent,coordPath:K.featureTarget.properties.coord_path,startPos:K.lngLat}),this.updateUIClasses({mouse:je})},On.startOnActiveFeature=function(R,K){this.stopExtendedInteractions(R),this.map.dragPan.disable(),this.doRender(K.featureTarget.properties.id),R.canDragMove=!0,R.dragMoveLocation=K.lngLat},On.clickOnFeature=function(R,K){var de=this;St(this),this.stopExtendedInteractions(R);var Ge=xe(K),tt=this.getSelectedIds(),Qe=K.featureTarget.properties.id,ft=this.isSelected(Qe);if(!Ge&&ft&&this.getFeature(Qe).type!==B)return this.changeMode(ut.DIRECT_SELECT,{featureId:Qe});ft&&Ge?(this.deselect(Qe),this.updateUIClasses({mouse:Je}),1===tt.length&&hn(this)):!ft&&Ge?(this.select(Qe),this.updateUIClasses({mouse:je})):ft||Ge||(tt.forEach(function(jt){return de.doRender(jt)}),this.setSelected(Qe),this.updateUIClasses({mouse:je})),this.doRender(Qe)},On.onMouseDown=function(R,K){return Te(K)?this.startOnActiveFeature(R,K):this.drawConfig.boxSelect&&(de=K).originalEvent&&de.originalEvent.shiftKey&&0===de.originalEvent.button?this.startBoxSelect(R,K):void 0;var de},On.startBoxSelect=function(R,K){this.stopExtendedInteractions(R),this.map.dragPan.disable(),R.boxSelectStartLocation=Et(K.originalEvent,this.map.getContainer()),R.canBoxSelect=!0},On.onTouchStart=function(R,K){if(Te(K))return this.startOnActiveFeature(R,K)},On.onDrag=function(R,K){return R.canDragMove?this.dragMove(R,K):this.drawConfig.boxSelect&&R.canBoxSelect?this.whileBoxSelect(R,K):void 0},On.whileBoxSelect=function(R,K){R.boxSelecting=!0,this.updateUIClasses({mouse:Ze}),R.boxSelectElement||(R.boxSelectElement=document.createElement("div"),R.boxSelectElement.classList.add("mapbox-gl-draw_boxselect"),this.map.getContainer().appendChild(R.boxSelectElement));var de=Et(K.originalEvent,this.map.getContainer()),Ge=Math.min(R.boxSelectStartLocation.x,de.x),tt=Math.max(R.boxSelectStartLocation.x,de.x),Qe=Math.min(R.boxSelectStartLocation.y,de.y),ft=Math.max(R.boxSelectStartLocation.y,de.y),jt="translate("+Ge+"px, "+Qe+"px)";R.boxSelectElement.style.transform=jt,R.boxSelectElement.style.WebkitTransform=jt,R.boxSelectElement.style.width=tt-Ge+"px",R.boxSelectElement.style.height=ft-Qe+"px"},On.dragMove=function(R,K){R.dragMoving=!0,K.originalEvent.stopPropagation();var de={lng:K.lngLat.lng-R.dragMoveLocation.lng,lat:K.lngLat.lat-R.dragMoveLocation.lat};Gr(this.getSelected(),de),R.dragMoveLocation=K.lngLat},On.onMouseUp=function(R,K){var de=this;if(R.dragMoving)this.fireUpdate();else if(R.boxSelecting){var Ge=[R.boxSelectStartLocation,Et(K.originalEvent,this.map.getContainer())],tt=this.featuresAt(null,Ge,"click"),Qe=this.getUniqueIds(tt).filter(function(ft){return!de.isSelected(ft)});Qe.length&&(this.select(Qe),Qe.forEach(function(ft){return de.doRender(ft)}),this.updateUIClasses({mouse:je}))}this.stopExtendedInteractions(R)},On.toDisplayFeatures=function(R,K,de){K.properties.active=this.isSelected(K.properties.id)?Gn:ir,de(K),this.fireActionable(),K.properties.active===Gn&&K.geometry.type!==B&&Jt(K).forEach(de)},On.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},On.onCombineFeatures=function(){var R=this.getSelected();if(!(0===R.length||R.length<2)){for(var K=[],de=[],Ge=R[0].type.replace("Multi",""),tt=0;tt<R.length;tt++){var Qe=R[tt];if(Qe.type.replace("Multi","")!==Ge)return;Qe.type.includes("Multi")?Qe.getCoordinates().forEach(function(jt){K.push(jt)}):K.push(Qe.getCoordinates()),de.push(Qe.toGeoJSON())}if(de.length>1){var ft=this.newFeature({type:Ue,properties:de[0].properties,geometry:{type:"Multi"+Ge,coordinates:K}});this.addFeature(ft),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([ft.id]),this.map.fire("draw.combine",{createdFeatures:[ft.toGeoJSON()],deletedFeatures:de})}this.fireActionable()}},On.onUncombineFeatures=function(){var R=this,K=this.getSelected();if(0!==K.length){for(var de=[],Ge=[],tt=function(ft){var jt=K[ft];R.isInstanceOf("MultiFeature",jt)&&(jt.getFeatures().forEach(function(Lt){R.addFeature(Lt),Lt.properties=jt.properties,de.push(Lt.toGeoJSON()),R.select([Lt.id])}),R.deleteFeature(jt.id,{silent:!0}),Ge.push(jt.toGeoJSON()))},Qe=0;Qe<K.length;Qe++)tt(Qe);de.length>1&&this.map.fire("draw.uncombine",{createdFeatures:de,deletedFeatures:Ge}),this.fireActionable()}};var Bi=ve(Ce),Jn=ve(Wt),Eo={fireUpdate:function(){this.map.fire(bt,{action:"change_coordinates",features:this.getSelected().map(function(R){return R.toGeoJSON()})})},fireActionable:function(R){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:R.selectedCoordPaths.length>0})},startDragging:function(R,K){this.map.dragPan.disable(),R.canDragMove=!0,R.dragMoveLocation=K.lngLat},stopDragging:function(R){this.map.dragPan.enable(),R.dragMoving=!1,R.canDragMove=!1,R.dragMoveLocation=null},onVertex:function(R,K){this.startDragging(R,K);var de=K.featureTarget.properties,Ge=R.selectedCoordPaths.indexOf(de.coord_path);xe(K)||-1!==Ge?xe(K)&&-1===Ge&&R.selectedCoordPaths.push(de.coord_path):R.selectedCoordPaths=[de.coord_path];var tt=this.pathsToCoordinates(R.featureId,R.selectedCoordPaths);this.setSelectedCoordinates(tt)},onMidpoint:function(R,K){this.startDragging(R,K);var de=K.featureTarget.properties;R.feature.addCoordinate(de.coord_path,de.lng,de.lat),this.fireUpdate(),R.selectedCoordPaths=[de.coord_path]},pathsToCoordinates:function(R,K){return K.map(function(de){return{feature_id:R,coord_path:de}})},onFeature:function(R,K){0===R.selectedCoordPaths.length?this.startDragging(R,K):this.stopDragging(R)},dragFeature:function(R,K,de){Gr(this.getSelected(),de),R.dragMoveLocation=K.lngLat},dragVertex:function(R,K,de){for(var Ge=R.selectedCoordPaths.map(function(jt){return R.feature.getCoordinate(jt)}),tt=Si(Ge.map(function(jt){return{type:Ue,properties:{},geometry:{type:B,coordinates:jt}}}),de),Qe=0;Qe<Ge.length;Qe++){var ft=Ge[Qe];R.feature.updateCoordinate(R.selectedCoordPaths[Qe],ft[0]+tt.lng,ft[1]+tt.lat)}},clickNoTarget:function(){this.changeMode(ut.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(ut.SIMPLE_SELECT)},clickActiveFeature:function(R){R.selectedCoordPaths=[],this.clearSelectedCoordinates(),R.feature.changed()},onSetup:function(R){var K=R.featureId,de=this.getFeature(K);if(!de)throw new Error("You must provide a featureId to enter direct_select mode");if(de.type===B)throw new TypeError("direct_select mode doesn't handle point features");var Ge={featureId:K,feature:de,dragMoveLocation:R.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:R.coordPath?[R.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(K,Ge.selectedCoordPaths)),this.setSelected(K),St(this),this.setActionableState({trash:!0}),Ge},onStop:function(){hn(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(R,K,de){R.featureId===K.properties.id?(K.properties.active=Gn,de(K),Jt(K,{map:this.map,midpoints:!0,selectedPaths:R.selectedCoordPaths}).forEach(de)):(K.properties.active=ir,de(K)),this.fireActionable(R)},onTrash:function(R){R.selectedCoordPaths.sort(function(K,de){return de.localeCompare(K,"en",{numeric:!0})}).forEach(function(K){return R.feature.removeCoordinate(K)}),this.fireUpdate(),R.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(R),!1===R.feature.isValid()&&(this.deleteFeature([R.featureId]),this.changeMode(ut.SIMPLE_SELECT,{}))},onMouseMove:function(R,K){var de=Te(K),Ge=Bi(K),tt=0===R.selectedCoordPaths.length;return this.updateUIClasses(de&&tt||Ge&&!tt?{mouse:je}:{mouse:nt}),this.stopDragging(R),!0},onMouseOut:function(R){return R.dragMoving&&this.fireUpdate(),!0}};Eo.onTouchStart=Eo.onMouseDown=function(R,K){return Bi(K)?this.onVertex(R,K):Te(K)?this.onFeature(R,K):Jn(K)?this.onMidpoint(R,K):void 0},Eo.onDrag=function(R,K){if(!0===R.canDragMove){R.dragMoving=!0,K.originalEvent.stopPropagation();var de={lng:K.lngLat.lng-R.dragMoveLocation.lng,lat:K.lngLat.lat-R.dragMoveLocation.lat};R.selectedCoordPaths.length>0?this.dragVertex(R,K,de):this.dragFeature(R,K,de),R.dragMoveLocation=K.lngLat}},Eo.onClick=function(R,K){return Xe(K)?this.clickNoTarget(R,K):Te(K)?this.clickActiveFeature(R,K):$e(K)?this.clickInactive(R,K):void this.stopDragging(R)},Eo.onTap=function(R,K){return Xe(K)?this.clickNoTarget(R,K):Te(K)?this.clickActiveFeature(R,K):$e(K)?this.clickInactive(R,K):void 0},Eo.onTouchEnd=Eo.onMouseUp=function(R){R.dragMoving&&this.fireUpdate(),this.stopDragging(R)};var Ea={};function Hi(R,K){return!!R.lngLat&&R.lngLat.lng===K[0]&&R.lngLat.lat===K[1]}Ea.onSetup=function(){var R=this.newFeature({type:Ue,properties:{},geometry:{type:B,coordinates:[]}});return this.addFeature(R),this.clearSelectedFeatures(),this.updateUIClasses({mouse:Ze}),this.activateUIButton(Ct.POINT),this.setActionableState({trash:!0}),{point:R}},Ea.stopDrawingAndRemove=function(R){this.deleteFeature([R.point.id],{silent:!0}),this.changeMode(ut.SIMPLE_SELECT)},Ea.onTap=Ea.onClick=function(R,K){this.updateUIClasses({mouse:je}),R.point.updateCoordinate("",K.lngLat.lng,K.lngLat.lat),this.map.fire(be,{features:[R.point.toGeoJSON()]}),this.changeMode(ut.SIMPLE_SELECT,{featureIds:[R.point.id]})},Ea.onStop=function(R){this.activateUIButton(),R.point.getCoordinate().length||this.deleteFeature([R.point.id],{silent:!0})},Ea.toDisplayFeatures=function(R,K,de){var Ge=K.properties.id===R.point.id;if(K.properties.active=Ge?Gn:ir,!Ge)return de(K)},Ea.onTrash=Ea.stopDrawingAndRemove,Ea.onKeyUp=function(R,K){if(Fe(K)||Rt(K))return this.stopDrawingAndRemove(R,K)};var nr={onSetup:function(){var R=this.newFeature({type:Ue,properties:{},geometry:{type:A,coordinates:[[]]}});return this.addFeature(R),this.clearSelectedFeatures(),St(this),this.updateUIClasses({mouse:Ze}),this.activateUIButton(Ct.POLYGON),this.setActionableState({trash:!0}),{polygon:R,currentVertexPosition:0}},clickAnywhere:function(R,K){if(R.currentVertexPosition>0&&Hi(K,R.polygon.coordinates[0][R.currentVertexPosition-1]))return this.changeMode(ut.SIMPLE_SELECT,{featureIds:[R.polygon.id]});this.updateUIClasses({mouse:Ze}),R.polygon.updateCoordinate("0."+R.currentVertexPosition,K.lngLat.lng,K.lngLat.lat),R.currentVertexPosition++,R.polygon.updateCoordinate("0."+R.currentVertexPosition,K.lngLat.lng,K.lngLat.lat)},clickOnVertex:function(R){return this.changeMode(ut.SIMPLE_SELECT,{featureIds:[R.polygon.id]})},onMouseMove:function(R,K){R.polygon.updateCoordinate("0."+R.currentVertexPosition,K.lngLat.lng,K.lngLat.lat),He(K)&&this.updateUIClasses({mouse:Je})}};nr.onTap=nr.onClick=function(R,K){return He(K)?this.clickOnVertex(R,K):this.clickAnywhere(R,K)},nr.onKeyUp=function(R,K){Fe(K)?(this.deleteFeature([R.polygon.id],{silent:!0}),this.changeMode(ut.SIMPLE_SELECT)):Rt(K)&&this.changeMode(ut.SIMPLE_SELECT,{featureIds:[R.polygon.id]})},nr.onStop=function(R){this.updateUIClasses({mouse:nt}),hn(this),this.activateUIButton(),void 0!==this.getFeature(R.polygon.id)&&(R.polygon.removeCoordinate("0."+R.currentVertexPosition),R.polygon.isValid()?this.map.fire(be,{features:[R.polygon.toGeoJSON()]}):(this.deleteFeature([R.polygon.id],{silent:!0}),this.changeMode(ut.SIMPLE_SELECT,{},{silent:!0})))},nr.toDisplayFeatures=function(R,K,de){var Ge=K.properties.id===R.polygon.id;if(K.properties.active=Ge?Gn:ir,!Ge)return de(K);if(0!==K.geometry.coordinates.length){var tt=K.geometry.coordinates[0].length;if(!(tt<3)){if(K.properties.meta=Zn,de(Zt(R.polygon.id,K.geometry.coordinates[0][0],"0.0",!1)),tt>3){var Qe=K.geometry.coordinates[0].length-3;de(Zt(R.polygon.id,K.geometry.coordinates[0][Qe],"0."+Qe,!1))}if(tt<=4&&(de({type:Ue,properties:K.properties,geometry:{coordinates:[[K.geometry.coordinates[0][0][0],K.geometry.coordinates[0][0][1]],[K.geometry.coordinates[0][1][0],K.geometry.coordinates[0][1][1]]],type:L}}),3===tt))return;return de(K)}}},nr.onTrash=function(R){this.deleteFeature([R.polygon.id],{silent:!0}),this.changeMode(ut.SIMPLE_SELECT)};var es={onSetup:function(R){var K,de,Ge=(R=R||{}).featureId,tt="forward";if(Ge){if(!(K=this.getFeature(Ge)))throw new Error("Could not find a feature with the provided featureId");var Qe=R.from;if(Qe&&"Feature"===Qe.type&&Qe.geometry&&"Point"===Qe.geometry.type&&(Qe=Qe.geometry),Qe&&"Point"===Qe.type&&Qe.coordinates&&2===Qe.coordinates.length&&(Qe=Qe.coordinates),!Qe||!Array.isArray(Qe))throw new Error("Please use the `from` property to indicate which point to continue the line from");var ft=K.coordinates.length-1;if(K.coordinates[ft][0]===Qe[0]&&K.coordinates[ft][1]===Qe[1])K.addCoordinate.apply(K,[de=ft+1].concat(K.coordinates[ft]));else{if(K.coordinates[0][0]!==Qe[0]||K.coordinates[0][1]!==Qe[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");tt="backwards",K.addCoordinate.apply(K,[de=0].concat(K.coordinates[0]))}}else K=this.newFeature({type:Ue,properties:{},geometry:{type:L,coordinates:[]}}),de=0,this.addFeature(K);return this.clearSelectedFeatures(),St(this),this.updateUIClasses({mouse:Ze}),this.activateUIButton(Ct.LINE),this.setActionableState({trash:!0}),{line:K,currentVertexPosition:de,direction:tt}},clickAnywhere:function(R,K){if(R.currentVertexPosition>0&&Hi(K,R.line.coordinates[R.currentVertexPosition-1])||"backwards"===R.direction&&Hi(K,R.line.coordinates[R.currentVertexPosition+1]))return this.changeMode(ut.SIMPLE_SELECT,{featureIds:[R.line.id]});this.updateUIClasses({mouse:Ze}),R.line.updateCoordinate(R.currentVertexPosition,K.lngLat.lng,K.lngLat.lat),"forward"===R.direction?(R.currentVertexPosition++,R.line.updateCoordinate(R.currentVertexPosition,K.lngLat.lng,K.lngLat.lat)):R.line.addCoordinate(0,K.lngLat.lng,K.lngLat.lat)},clickOnVertex:function(R){return this.changeMode(ut.SIMPLE_SELECT,{featureIds:[R.line.id]})},onMouseMove:function(R,K){R.line.updateCoordinate(R.currentVertexPosition,K.lngLat.lng,K.lngLat.lat),He(K)&&this.updateUIClasses({mouse:Je})}};es.onTap=es.onClick=function(R,K){if(He(K))return this.clickOnVertex(R,K);this.clickAnywhere(R,K)},es.onKeyUp=function(R,K){Rt(K)?this.changeMode(ut.SIMPLE_SELECT,{featureIds:[R.line.id]}):Fe(K)&&(this.deleteFeature([R.line.id],{silent:!0}),this.changeMode(ut.SIMPLE_SELECT))},es.onStop=function(R){hn(this),this.activateUIButton(),void 0!==this.getFeature(R.line.id)&&(R.line.removeCoordinate(""+R.currentVertexPosition),R.line.isValid()?this.map.fire(be,{features:[R.line.toGeoJSON()]}):(this.deleteFeature([R.line.id],{silent:!0}),this.changeMode(ut.SIMPLE_SELECT,{},{silent:!0})))},es.onTrash=function(R){this.deleteFeature([R.line.id],{silent:!0}),this.changeMode(ut.SIMPLE_SELECT)},es.toDisplayFeatures=function(R,K,de){var Ge=K.properties.id===R.line.id;if(K.properties.active=Ge?Gn:ir,!Ge)return de(K);K.geometry.coordinates.length<2||(K.properties.meta=Zn,de(Zt(R.line.id,K.geometry.coordinates["forward"===R.direction?K.geometry.coordinates.length-2:1],""+("forward"===R.direction?K.geometry.coordinates.length-2:1),!1)),de(K))};var Hr={simple_select:On,direct_select:Eo,draw_point:Ea,draw_polygon:nr,draw_line_string:es},Mi={defaultMode:ut.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}],modes:Hr,controls:{},userProperties:!1},ps={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},So={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function cn(R,K){return R.map(function(de){return de.source?de:zr(de,{id:de.id+"."+K,source:"hot"===K?Me:Ne})})}var Co=Ba(function(R,K){var de="[object Arguments]",Ge="[object Map]",tt="[object Object]",Qe="[object Set]",ft=/^\[object .+?Constructor\]$/,jt=/^(?:0|[1-9]\d*)$/,Lt={};Lt["[object Float32Array]"]=Lt["[object Float64Array]"]=Lt["[object Int8Array]"]=Lt["[object Int16Array]"]=Lt["[object Int32Array]"]=Lt["[object Uint8Array]"]=Lt["[object Uint8ClampedArray]"]=Lt["[object Uint16Array]"]=Lt["[object Uint32Array]"]=!0,Lt[de]=Lt["[object Array]"]=Lt["[object ArrayBuffer]"]=Lt["[object Boolean]"]=Lt["[object DataView]"]=Lt["[object Date]"]=Lt["[object Error]"]=Lt["[object Function]"]=Lt[Ge]=Lt["[object Number]"]=Lt[tt]=Lt["[object RegExp]"]=Lt[Qe]=Lt["[object String]"]=Lt["[object WeakMap]"]=!1;var Yt="object"==typeof global&&global&&global.Object===Object&&global,mt="object"==typeof self&&self&&self.Object===Object&&self,tn=Yt||mt||Function("return this")(),gn=K&&!K.nodeType&&K,Fn=gn&&R&&!R.nodeType&&R,kn=Fn&&Fn.exports===gn,ji=kn&&Yt.process,At=function(){try{return ji&&ji.binding&&ji.binding("util")}catch{}}(),yn=At&&At.isTypedArray;function dr(rt,_t){for(var Xt=-1,mn=null==rt?0:rt.length;++Xt<mn;)if(_t(rt[Xt],Xt,rt))return!0;return!1}function Dn(rt){var _t=-1,Xt=Array(rt.size);return rt.forEach(function(mn,Lr){Xt[++_t]=[Lr,mn]}),Xt}function kr(rt){var _t=-1,Xt=Array(rt.size);return rt.forEach(function(mn){Xt[++_t]=mn}),Xt}var An,da,Qn,vr=Array.prototype,Ui=Object.prototype,fa=tn["__core-js_shared__"],$i=Function.prototype.toString,Oe=Ui.hasOwnProperty,at=(An=/[^.]+$/.exec(fa&&fa.keys&&fa.keys.IE_PROTO||""))?"Symbol(src)_1."+An:"",Nt=Ui.toString,xn=RegExp("^"+$i.call(Oe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pi=kn?tn.Buffer:void 0,or=tn.Symbol,dn=tn.Uint8Array,qi=Ui.propertyIsEnumerable,Io=vr.splice,Mr=or?or.toStringTag:void 0,ta=Object.getOwnPropertySymbols,ha=pi?pi.isBuffer:void 0,Ci=(da=Object.keys,Qn=Object,function(rt){return da(Qn(rt))}),Oi=Vi(tn,"DataView"),Xr=Vi(tn,"Map"),ts=Vi(tn,"Promise"),Ii=Vi(tn,"Set"),_r=Vi(tn,"WeakMap"),ns=Vi(Object,"create"),Ss=pn(Oi),Go=pn(Xr),Br=pn(ts),js=pn(Ii),Us=pn(_r),_u=or?or.prototype:void 0,vi=_u?_u.valueOf:void 0;function To(rt){var _t=-1,Xt=null==rt?0:rt.length;for(this.clear();++_t<Xt;){var mn=rt[_t];this.set(mn[0],mn[1])}}function pa(rt){var _t=-1,Xt=null==rt?0:rt.length;for(this.clear();++_t<Xt;){var mn=rt[_t];this.set(mn[0],mn[1])}}function ml(rt){var _t=-1,Xt=null==rt?0:rt.length;for(this.clear();++_t<Xt;){var mn=rt[_t];this.set(mn[0],mn[1])}}function gl(rt){var _t=-1,Xt=null==rt?0:rt.length;for(this.__data__=new ml;++_t<Xt;)this.add(rt[_t])}function Qs(rt){var _t=this.__data__=new pa(rt);this.size=_t.size}function bu(rt,_t){for(var Xt=rt.length;Xt--;)if(Pi(rt[Xt][0],_t))return Xt;return-1}function ms(rt){return null==rt?void 0===rt?"[object Undefined]":"[object Null]":Mr&&Mr in Object(rt)?function(_t){var Xt=Oe.call(_t,Mr),mn=_t[Mr];try{_t[Mr]=void 0;var Lr=!0}catch{}var Ar=Nt.call(_t);return Lr&&(Xt?_t[Mr]=mn:delete _t[Mr]),Ar}(rt):Nt.call(rt)}function Sa(rt){return Ia(rt)&&ms(rt)==de}function Ll(rt,_t,Xt,mn,Lr){return rt===_t||(null==rt||null==_t||!Ia(rt)&&!Ia(_t)?rt!=rt&&_t!=_t:function(Ar,ii,Li,$o,ar,Qi){var Vs=Ca(Ar),Ta=Ca(ii),ia=Vs?"[object Array]":ao(Ar),ma=Ta?"[object Array]":ao(ii),Cs=(ia=ia==de?tt:ia)==tt,Is=(ma=ma==de?tt:ma)==tt,so=ia==ma;if(so&&Do(Ar)){if(!Do(ii))return!1;Vs=!0,Cs=!1}if(so&&!Cs)return Qi||(Qi=new Qs),Vs||br(Ar)?ra(Ar,ii,Li,$o,ar,Qi):function(mi,ei,Sr,Ts,_l,Lo,Or){switch(Sr){case"[object DataView]":if(mi.byteLength!=ei.byteLength||mi.byteOffset!=ei.byteOffset)return!1;mi=mi.buffer,ei=ei.buffer;case"[object ArrayBuffer]":return!(mi.byteLength!=ei.byteLength||!Lo(new dn(mi),new dn(ei)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Pi(+mi,+ei);case"[object Error]":return mi.name==ei.name&&mi.message==ei.message;case"[object RegExp]":case"[object String]":return mi==ei+"";case Ge:var wr=Dn;case Qe:if(wr||(wr=kr),mi.size!=ei.size&&!(1&Ts))return!1;var gs=Or.get(mi);if(gs)return gs==ei;Ts|=2,Or.set(mi,ei);var eu=ra(wr(mi),wr(ei),Ts,_l,Lo,Or);return Or.delete(mi),eu;case"[object Symbol]":if(vi)return vi.call(mi)==vi.call(ei)}return!1}(Ar,ii,ia,Li,$o,ar,Qi);if(!(1&Li)){var vl=Cs&&Oe.call(Ar,"__wrapped__"),qo=Is&&Oe.call(ii,"__wrapped__");if(vl||qo){var rs=vl?Ar.value():Ar,Fl=qo?ii.value():ii;return Qi||(Qi=new Qs),ar(rs,Fl,Li,$o,Qi)}}return!!so&&(Qi||(Qi=new Qs),function(mi,ei,Sr,Ts,_l,Lo){var Or=1&Sr,wr=Qr(mi),Gs=wr.length;if(Gs!=Qr(ei).length&&!Or)return!1;for(var eu=Gs;eu--;){var ys=wr[eu];if(!(Or?ys in ei:Oe.call(ei,ys)))return!1}var wu=Lo.get(mi);if(wu&&Lo.get(ei))return wu==ei;var _c=!0;Lo.set(mi,ei),Lo.set(ei,mi);for(var tu=Or;++eu<Gs;){var nu=mi[ys=wr[eu]],zl=ei[ys];if(Ts)var oa=Or?Ts(zl,nu,ys,ei,mi,Lo):Ts(nu,zl,ys,mi,ei,Lo);if(!(void 0===oa?nu===zl||_l(nu,zl,Sr,Ts,Lo):oa)){_c=!1;break}tu||(tu="constructor"==ys)}if(_c&&!tu){var Pa=mi.constructor,Ku=ei.constructor;Pa==Ku||!("constructor"in mi)||!("constructor"in ei)||"function"==typeof Pa&&Pa instanceof Pa&&"function"==typeof Ku&&Ku instanceof Ku||(_c=!1)}return Lo.delete(mi),Lo.delete(ei),_c}(Ar,ii,Li,$o,ar,Qi))}(rt,_t,Xt,mn,Ll,Lr))}function ra(rt,_t,Xt,mn,Lr,Ar){var ii=1&Xt,Li=rt.length,$o=_t.length;if(Li!=$o&&!(ii&&$o>Li))return!1;var ar=Ar.get(rt);if(ar&&Ar.get(_t))return ar==_t;var Qi=-1,Vs=!0,Ta=2&Xt?new gl:void 0;for(Ar.set(rt,_t),Ar.set(_t,rt);++Qi<Li;){var ia=rt[Qi],ma=_t[Qi];if(mn)var Cs=ii?mn(ma,ia,Qi,_t,rt,Ar):mn(ia,ma,Qi,rt,_t,Ar);if(void 0!==Cs){if(Cs)continue;Vs=!1;break}if(Ta){if(!dr(_t,function(Is,so){if(!Ta.has(so)&&(ia===Is||Lr(ia,Is,Xt,mn,Ar)))return Ta.push(so)})){Vs=!1;break}}else if(ia!==ma&&!Lr(ia,ma,Xt,mn,Ar)){Vs=!1;break}}return Ar.delete(rt),Ar.delete(_t),Vs}function Qr(rt){return mn=Ho,Lr=function kl(rt){return null!=(_t=rt)&&Di(_t.length)&&!yl(_t)?function yc(rt,_t){var Xt=Ca(rt),mn=!Xt&&Ua(rt),Lr=!Xt&&!mn&&Do(rt),Ar=!Xt&&!mn&&!Lr&&br(rt),ii=Xt||mn||Lr||Ar,Li=ii?function(Qi,Vs){for(var Ta=-1,ia=Array(Qi);++Ta<Qi;)ia[Ta]=Vs(Ta);return ia}(rt.length,String):[],$o=Li.length;for(var ar in rt)!_t&&!Oe.call(rt,ar)||ii&&("length"==ar||Lr&&("offset"==ar||"parent"==ar)||Ar&&("buffer"==ar||"byteLength"==ar||"byteOffset"==ar)||_n(ar,$o))||Li.push(ar);return Li}(rt):function na(rt){if(Xt=(_t=rt)&&_t.constructor,_t!==("function"==typeof Xt&&Xt.prototype||Ui))return Ci(rt);var _t,Xt,Lr=[];for(var Ar in Object(rt))Oe.call(rt,Ar)&&"constructor"!=Ar&&Lr.push(Ar);return Lr}(rt);var _t}(_t=rt),Ca(_t)?Lr:function(Ar,ii){for(var Li=-1,$o=ii.length,ar=Ar.length;++Li<$o;)Ar[ar+Li]=ii[Li];return Ar}(Lr,mn(_t));var _t,mn,Lr}function Po(rt,_t){var Xt,mn,Lr=rt.__data__;return("string"==(mn=typeof(Xt=_t))||"number"==mn||"symbol"==mn||"boolean"==mn?"__proto__"!==Xt:null===Xt)?Lr["string"==typeof _t?"string":"hash"]:Lr.map}function Vi(rt,_t){var Xt=rt?.[_t];return function vc(rt){return!(!Nl(rt)||(_t=rt,at&&at in _t))&&(yl(rt)?xn:ft).test(pn(rt));var _t}(Xt)?Xt:void 0}To.prototype.clear=function(){this.__data__=ns?ns(null):{},this.size=0},To.prototype.delete=function(rt){var _t=this.has(rt)&&delete this.__data__[rt];return this.size-=_t?1:0,_t},To.prototype.get=function(rt){var _t=this.__data__;if(ns){var Xt=_t[rt];return"__lodash_hash_undefined__"===Xt?void 0:Xt}return Oe.call(_t,rt)?_t[rt]:void 0},To.prototype.has=function(rt){var _t=this.__data__;return ns?void 0!==_t[rt]:Oe.call(_t,rt)},To.prototype.set=function(rt,_t){var Xt=this.__data__;return this.size+=this.has(rt)?0:1,Xt[rt]=ns&&void 0===_t?"__lodash_hash_undefined__":_t,this},pa.prototype.clear=function(){this.__data__=[],this.size=0},pa.prototype.delete=function(rt){var _t=this.__data__,Xt=bu(_t,rt);return!(Xt<0||(Xt==_t.length-1?_t.pop():Io.call(_t,Xt,1),--this.size,0))},pa.prototype.get=function(rt){var _t=this.__data__,Xt=bu(_t,rt);return Xt<0?void 0:_t[Xt][1]},pa.prototype.has=function(rt){return bu(this.__data__,rt)>-1},pa.prototype.set=function(rt,_t){var Xt=this.__data__,mn=bu(Xt,rt);return mn<0?(++this.size,Xt.push([rt,_t])):Xt[mn][1]=_t,this},ml.prototype.clear=function(){this.size=0,this.__data__={hash:new To,map:new(Xr||pa),string:new To}},ml.prototype.delete=function(rt){var _t=Po(this,rt).delete(rt);return this.size-=_t?1:0,_t},ml.prototype.get=function(rt){return Po(this,rt).get(rt)},ml.prototype.has=function(rt){return Po(this,rt).has(rt)},ml.prototype.set=function(rt,_t){var Xt=Po(this,rt),mn=Xt.size;return Xt.set(rt,_t),this.size+=Xt.size==mn?0:1,this},gl.prototype.add=gl.prototype.push=function(rt){return this.__data__.set(rt,"__lodash_hash_undefined__"),this},gl.prototype.has=function(rt){return this.__data__.has(rt)},Qs.prototype.clear=function(){this.__data__=new pa,this.size=0},Qs.prototype.delete=function(rt){var _t=this.__data__,Xt=_t.delete(rt);return this.size=_t.size,Xt},Qs.prototype.get=function(rt){return this.__data__.get(rt)},Qs.prototype.has=function(rt){return this.__data__.has(rt)},Qs.prototype.set=function(rt,_t){var Xt=this.__data__;if(Xt instanceof pa){var mn=Xt.__data__;if(!Xr||mn.length<199)return mn.push([rt,_t]),this.size=++Xt.size,this;Xt=this.__data__=new ml(mn)}return Xt.set(rt,_t),this.size=Xt.size,this};var Ho=ta?function(rt){return null==rt?[]:(rt=Object(rt),function(_t,Xt){for(var mn=-1,Lr=null==_t?0:_t.length,Ar=0,ii=[];++mn<Lr;){var Li=_t[mn];Xt(Li)&&(ii[Ar++]=Li)}return ii}(ta(rt),function(_t){return qi.call(rt,_t)}))}:function(){return[]},ao=ms;function _n(rt,_t){return!!(_t=_t??9007199254740991)&&("number"==typeof rt||jt.test(rt))&&rt>-1&&rt%1==0&&rt<_t}function pn(rt){if(null!=rt){try{return $i.call(rt)}catch{}try{return rt+""}catch{}}return""}function Pi(rt,_t){return rt===_t||rt!=rt&&_t!=_t}(Oi&&"[object DataView]"!=ao(new Oi(new ArrayBuffer(1)))||Xr&&ao(new Xr)!=Ge||ts&&"[object Promise]"!=ao(ts.resolve())||Ii&&ao(new Ii)!=Qe||_r&&"[object WeakMap]"!=ao(new _r))&&(ao=function(rt){var _t=ms(rt),Xt=_t==tt?rt.constructor:void 0,mn=Xt?pn(Xt):"";if(mn)switch(mn){case Ss:return"[object DataView]";case Go:return Ge;case Br:return"[object Promise]";case js:return Qe;case Us:return"[object WeakMap]"}return _t});var Ua=Sa(function(){return arguments}())?Sa:function(rt){return Ia(rt)&&Oe.call(rt,"callee")&&!qi.call(rt,"callee")},Ca=Array.isArray,Do=ha||function(){return!1};function yl(rt){if(!Nl(rt))return!1;var _t=ms(rt);return"[object Function]"==_t||"[object GeneratorFunction]"==_t||"[object AsyncFunction]"==_t||"[object Proxy]"==_t}function Di(rt){return"number"==typeof rt&&rt>-1&&rt%1==0&&rt<=9007199254740991}function Nl(rt){var _t=typeof rt;return null!=rt&&("object"==_t||"function"==_t)}function Ia(rt){return null!=rt&&"object"==typeof rt}var rt,br=yn?(rt=yn,function(_t){return rt(_t)}):function(rt){return Ia(rt)&&Di(rt.length)&&!!Lt[ms(rt)]};R.exports=function(rt,_t){return Ll(rt,_t)}}),Vo={Polygon:wo,LineString:oo,Point:xa,MultiPolygon:xo,MultiLineString:xo,MultiPoint:xo};var ja=function(R,K){var de={options:R=function(tt){void 0===tt&&(tt={});var Qe=zr(tt);return tt.controls||(Qe.controls={}),Qe.controls=zr(!1===tt.displayControlsDefault?So:ps,tt.controls),(Qe=zr(Mi,Qe)).styles=cn(Qe.styles,"cold").concat(cn(Qe.styles,"hot")),Qe}(R)};K=function Nn(R,K){return K.modes=ut,K.getFeatureIdsAt=function(de){return wa.click({point:de},null,R).map(function(Ge){return Ge.properties.id})},K.getSelectedIds=function(){return R.store.getSelectedIds()},K.getSelected=function(){return{type:j,features:R.store.getSelectedIds().map(function(de){return R.store.get(de)}).map(function(de){return de.toGeoJSON()})}},K.getSelectedPoints=function(){return{type:j,features:R.store.getSelectedCoordinates().map(function(de){return{type:Ue,properties:{},geometry:{type:B,coordinates:de.coordinates}}})}},K.set=function(de){if(void 0===de.type||de.type!==j||!Array.isArray(de.features))throw new Error("Invalid FeatureCollection");var Ge=R.store.createRenderBatch(),tt=R.store.getAllIds().slice(),Qe=K.add(de),ft=new Ot(Qe);return(tt=tt.filter(function(jt){return!ft.has(jt)})).length&&K.delete(tt),Ge(),Qe},K.add=function(de){var Ge=JSON.parse(JSON.stringify(Ut(de))).features.map(function(tt){if(tt.id=tt.id||fs(),null===tt.geometry)throw new Error("Invalid geometry: null");if(void 0===R.store.get(tt.id)||R.store.get(tt.id).type!==tt.geometry.type){var Qe=Vo[tt.geometry.type];if(void 0===Qe)throw new Error("Invalid geometry type: "+tt.geometry.type+".");var ft=new Qe(R,tt);R.store.add(ft)}else{var jt=R.store.get(tt.id);jt.properties=tt.properties,Co(jt.getCoordinates(),tt.geometry.coordinates)||jt.incomingCoords(tt.geometry.coordinates)}return tt.id});return R.store.render(),Ge},K.get=function(de){var Ge=R.store.get(de);if(Ge)return Ge.toGeoJSON()},K.getAll=function(){return{type:j,features:R.store.getAll().map(function(de){return de.toGeoJSON()})}},K.delete=function(de){return R.store.delete(de,{silent:!0}),K.getMode()!==ut.DIRECT_SELECT||R.store.getSelectedIds().length?R.store.render():R.events.changeMode(ut.SIMPLE_SELECT,void 0,{silent:!0}),K},K.deleteAll=function(){return R.store.delete(R.store.getAllIds(),{silent:!0}),K.getMode()===ut.DIRECT_SELECT?R.events.changeMode(ut.SIMPLE_SELECT,void 0,{silent:!0}):R.store.render(),K},K.changeMode=function(de,Ge){return void 0===Ge&&(Ge={}),de===ut.SIMPLE_SELECT&&K.getMode()===ut.SIMPLE_SELECT?(tt=Ge.featureIds||[],Qe=R.store.getSelectedIds(),tt.length===Qe.length&&JSON.stringify(tt.map(function(ft){return ft}).sort())===JSON.stringify(Qe.map(function(ft){return ft}).sort())||(R.store.setSelected(Ge.featureIds,{silent:!0}),R.store.render()),K):(de===ut.DIRECT_SELECT&&K.getMode()===ut.DIRECT_SELECT&&Ge.featureId===R.store.getSelectedIds()[0]||R.events.changeMode(de,Ge,{silent:!0}),K);var tt,Qe},K.getMode=function(){return R.events.getMode()},K.trash=function(){return R.events.trash({silent:!0}),K},K.combineFeatures=function(){return R.events.combineFeatures({silent:!0}),K},K.uncombineFeatures=function(){return R.events.uncombineFeatures({silent:!0}),K},K.setFeatureProperty=function(de,Ge,tt){return R.store.setFeatureProperty(de,Ge,tt),K},K}(de,K),de.api=K;var Ge=fe(de);return K.onAdd=Ge.onAdd,K.onRemove=Ge.onRemove,K.types=Ct,K.options=R,K};function cr(R){ja(R,this)}return cr.modes=Hr,cr}()},4969:Ae=>{"use strict";function J(U,V){this.x=U,this.y=V}Ae.exports=J,J.prototype={clone:function(){return new J(this.x,this.y)},add:function(U){return this.clone()._add(U)},sub:function(U){return this.clone()._sub(U)},multByPoint:function(U){return this.clone()._multByPoint(U)},divByPoint:function(U){return this.clone()._divByPoint(U)},mult:function(U){return this.clone()._mult(U)},div:function(U){return this.clone()._div(U)},rotate:function(U){return this.clone()._rotate(U)},rotateAround:function(U,V){return this.clone()._rotateAround(U,V)},matMult:function(U){return this.clone()._matMult(U)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(U){return this.x===U.x&&this.y===U.y},dist:function(U){return Math.sqrt(this.distSqr(U))},distSqr:function(U){var V=U.x-this.x,X=U.y-this.y;return V*V+X*X},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(U){return Math.atan2(this.y-U.y,this.x-U.x)},angleWith:function(U){return this.angleWithSep(U.x,U.y)},angleWithSep:function(U,V){return Math.atan2(this.x*V-this.y*U,this.x*U+this.y*V)},_matMult:function(U){var X=U[2]*this.x+U[3]*this.y;return this.x=U[0]*this.x+U[1]*this.y,this.y=X,this},_add:function(U){return this.x+=U.x,this.y+=U.y,this},_sub:function(U){return this.x-=U.x,this.y-=U.y,this},_mult:function(U){return this.x*=U,this.y*=U,this},_div:function(U){return this.x/=U,this.y/=U,this},_multByPoint:function(U){return this.x*=U.x,this.y*=U.y,this},_divByPoint:function(U){return this.x/=U.x,this.y/=U.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var U=this.y;return this.y=this.x,this.x=-U,this},_rotate:function(U){var V=Math.cos(U),X=Math.sin(U),$=X*this.x+V*this.y;return this.x=V*this.x-X*this.y,this.y=$,this},_rotateAround:function(U,V){var X=Math.cos(U),m=Math.sin(U),G=V.y+m*(this.x-V.x)+X*(this.y-V.y);return this.x=V.x+X*(this.x-V.x)-m*(this.y-V.y),this.y=G,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},J.convert=function(U){return U instanceof J?U:Array.isArray(U)?new J(U[0],U[1]):U}},1077:Ae=>{Ae.exports={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}},8407:(Ae,J,U)=>{"use strict";var V=U(4208),X=U(3082),m=U(4703),$=U(9069).EventEmitter,G=U(1077),z=U(5765),T=U(6775);function D(F,Z){this._eventEmitter=new $,this.options=m({},this.options,Z),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geocoderApi=F}D.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,getItemValue:function(F){return"string"==typeof F?F:F.place_name},render:function(F){if("string"==typeof F){var Z=F.split(","),Y=Z[0].toLowerCase().indexOf(this.query.toLowerCase()),ie=this.query.length;return'<div class="mapboxgl-ctrl-geocoder--suggestion maplibregl-ctrl-geocoder--suggestion"><svg class="mapboxgl-ctrl-geocoder--suggestion-icon maplibre-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="mapboxgl-ctrl-geocoder--suggestion-info maplibregl-ctrl-geocoder--suggestion-info"><div class="mapboxgl-ctrl-geocoder--suggestion-title maplibregl-ctrl-geocoder--suggestion-title">'+Z[0].substring(0,Y)+'<span class="mapboxgl-ctrl-geocoder--suggestion-match maplibregl-ctrl-geocoder--suggestion-match">'+Z[0].substring(Y,Y+ie)+"</span>"+Z[0].substring(Y+ie)+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address maplibregl-ctrl-geocoder--suggestion-address">'+Z.splice(1,Z.length).join(",")+"</div></div></div>"}var Me=F.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--result maplibregl-ctrl-geocoder--result"><svg class="mapboxgl-ctrl-geocoder--result-icon maplibre-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="mapboxgl-ctrl-geocoder--result-title maplibregl-ctrl-geocoder--result-title">'+Me[0]+'</div><div class="mapboxgl-ctrl-geocoder--result-address maplibregl-ctrl-geocoder--result-address">'+Me.splice(1,Me.length).join(",")+"</div></div></div>"},popupRender:function(F){var Z=F.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion maplibre-ctrl-geocoder--suggestion popup-suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title maplibre-ctrl-geocoder--suggestion-title popup-suggestion-title">'+Z[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address maplibre-ctrl-geocoder--suggestion-address popup-suggestion-address">'+Z.splice(1,Z.length).join(",")+"</div></div>"},processResults:function(F,Z,Y){if(!Z||0===Z.length)return F;var ie=F.map(function(Ze){return Ze.place_name}),me=Z.filter(function(Ze){return!ie.includes(Ze)});if(me.length+F.length>Y){for(var se=Math.min(me.length,Math.floor(Y/2));F.length+se<Y;)se++;for(var _e=[],Me=0;Me<se;Me++)_e.push(me[Me]);for(var Ne=0;Ne<Y-se;Ne++)_e.push(F[Ne]);return _e}return me.length>0?me.concat(F):F},showResultMarkers:!0,debounceSearch:200},addTo:function(F){function Z(ie,me){if(!document.body.contains(me))throw new Error("Element provided to #addTo() exists, but is not in the DOM");var se=ie.onAdd();me.appendChild(se)}if(F._controlContainer)F.addControl(this);else if(F instanceof HTMLElement)Z(this,F);else{if("string"!=typeof F)throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element");var Y=document.querySelectorAll(F);if(0===Y.length)throw new Error("Element ",F,"not found.");if(Y.length>1)throw new Error("Geocoder can only be added to a single html element");Z(this,Y[0])}},onAdd:function(F){if(F&&"string"!=typeof F&&(this._map=F),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);var Z=this.container=document.createElement("div");Z.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";var Y=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",X(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);var ie=document.createElement("div");ie.classList.add("mapboxgl-ctrl-geocoder--pin-right","maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button maplibregl-ctrl-geocoder--button";var me=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(me),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),ie.appendChild(this._clearEl),ie.appendChild(this._loadingEl),Z.appendChild(Y),Z.appendChild(this._inputEl),Z.appendChild(ie),this._typeahead=new V(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),Z},createIcon:function(F,Z){var Y=document.createElementNS("http://www.w3.org/2000/svg","svg");if(Y.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+F+" maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+F),Y.setAttribute("viewBox","0 0 18 18"),Y.setAttribute("xml:space","preserve"),Y.setAttribute("width",18),Y.setAttribute("height",18),"innerHTML"in Y)Y.innerHTML=Z;else{var ie=document.createElement("div");ie.innerHTML="<svg>"+Z.valueOf().toString()+"</svg>",Y.appendChild(ie.firstChild.firstChild)}return Y},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_onPaste:function(F){var Z=(F.clipboardData||window.clipboardData).getData("text");Z.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(Z)},_onKeyDown:function(F){var Z=27,Y=9;if(F.keyCode===Z&&this.options.clearAndBlurOnEsc)return this._clear(F),this._inputEl.blur();var ie=F.target&&F.target.shadowRoot?F.target.shadowRoot.activeElement:F.target;if(!ie||!ie.value)return this.fresh=!0,F.keyCode!==Y&&this.clear(F),this._clearEl.style.display="none";if(!F.metaKey&&-1===[Y,Z,37,39,38,40].indexOf(F.keyCode)){if(13===F.keyCode){if(this.options.showResultsWhileTyping)return void(null==this._typeahead.selected&&this.geocoderApi.getSuggestions?this._geocode(ie.value,!0):null==this._typeahead.selected&&this.options.showResultMarkers&&this._fitBoundsForMarkers());this._typeahead.selected||this._geocode(ie.value)}ie.value.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(ie.value)}},_showButton:function(){this._typeahead.selected&&(this._clearEl.style.display="block")},_hideButton:function(){this._typeahead.selected&&(this._clearEl.style.display="none")},_onBlur:function(F){this.options.clearOnBlur&&this._clearOnBlur(F),this.options.collapsed&&this._collapse()},_onChange:function(){var F=this._typeahead.selected;if(F&&"string"==typeof F)this._geocode(F,!0);else if(F&&JSON.stringify(F)!==this.lastSelected){var Z;if(this._clearEl.style.display="none",this.options.flyTo)if(this._removeResultMarkers(),F.properties&&G[F.properties.short_code])Z=m({},this.options.flyTo),this._map&&this._map.fitBounds(G[F.properties.short_code].bbox,Z);else if(F.bbox){var Y=F.bbox;Z=m({},this.options.flyTo),this._map&&this._map.fitBounds([[Y[0],Y[1]],[Y[2],Y[3]]],Z)}else Z=m({},{zoom:this.options.zoom},this.options.flyTo),F.center?Z.center=F.center:F.geometry&&F.geometry.type&&"Point"===F.geometry.type&&F.geometry.coordinates&&(Z.center=F.geometry.coordinates),this._map&&this._map.flyTo(Z);this.options.marker&&this._maplibregl&&this._handleMarker(F),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(F),this._eventEmitter.emit("result",{result:F})}},_getConfigForRequest:function(){var Z=this;return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce(function(ie,me){return Z.options[me]&&(ie[me]=["countries","types","language"].indexOf(me)>-1?Z.options[me].split(/[\s,]+/):Z.options[me],"proximity"===me&&Z.options[me]&&"number"==typeof Z.options[me].longitude&&"number"==typeof Z.options[me].latitude&&(ie[me]=[Z.options[me].longitude,Z.options[me].latitude])),ie},{})},_geocode:function(F,Z){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:F}),this.inputString=F;var me,Y=null,ie=this._getConfigForRequest();if(this.options.localGeocoderOnly)me=Promise.resolve();else if(this.options.reverseGeocode&&/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/.test(F)){var se=F.split(/[\s(,)?]+/).map(function(Ze){return parseFloat(Ze,10)}).reverse();"proximity"in(ie=m(ie,{query:se,limit:1}))&&delete ie.proximity,me=this.geocoderApi.reverseGeocode(ie)}else ie=m(ie,{query:F}),me=this.geocoderApi.forwardGeocode(ie);var _e=[];this.options.localGeocoder&&((_e=this.options.localGeocoder(F))||(_e=[]));var Me=[];return me.catch(function(Ze){Y=Ze}.bind(this)).then(function(Ze){this._loadingEl.style.display="none";var je={};return(je=Ze||{type:"FeatureCollection",features:[]}).config=ie,this.fresh&&(this.fresh=!1),je.features=je.features?_e.concat(je.features):_e,this.options.externalGeocoder?(Me=this.options.externalGeocoder(F,je.features,ie)||[]).then(function(Ee){return je.features=je.features?Ee.concat(je.features):Ee,je},function(){return je}):this.geocoderApi.getSuggestions&&!Z?(this._getSuggestions(F)||[]).then(function(Ee){return Ee.length>0&&(je.suggestions=Ee),je},function(){return je}):je}.bind(this)).then(function(Ze){if(Y)throw Y;if(this.options.filter&&Ze.features.length&&(Ze.features=Ze.features.filter(this.options.filter)),Ze.features.length){this._clearEl.style.display="block",this._eventEmitter.emit("results",Ze);var je=this.options.processResults(Ze.features,Ze.suggestions,this.options.limit);this._eventEmitter.emit("processedResults",je),this._typeahead.update(je),(!this.options.showResultsWhileTyping||Z)&&this.options.showResultMarkers&&this._fitBoundsForMarkers()}else this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",Ze)}.bind(this)).catch(function(Ze){this._loadingEl.style.display="none",_e.length&&this.options.localGeocoder||Me.length&&this.options.externalGeocoder?(this._clearEl.style.display="block",this._typeahead.update(_e)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:_e}),this._eventEmitter.emit("error",{error:Ze})}.bind(this)),me},_getSuggestions:function(F){return new Promise(function(Z,Y){this.geocoderApi.getSuggestions||Y(),this._eventEmitter.emit("loadingSuggestions",{query:F});var ie=null,me=[],se=this._getConfigForRequest();se=m(se,{query:F}),this.geocoderApi.getSuggestions(se).catch(function(Me){ie=Me}.bind(this)).then(function(Me){if(ie)throw ie;Me.suggestions.length&&(me=Me.suggestions),Z(me),this._eventEmitter.emit("resultsSuggestions",Me)}.bind(this)).catch(function(Me){this._eventEmitter.emit("error",{error:Me})}.bind(this))}.bind(this))},_clear:function(F){F&&F.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(F){this._clear(F),this._inputEl.focus()},_clearOnBlur:function(F){F.relatedTarget&&this._clear(F)},_onQueryResult:function(F){if(F.features.length){var Y=F.features[0];this._typeahead.selected=Y,this._inputEl.value=Y.place_name,this._onChange()}},_updateProximity:function(){if(this._map)if(this._map.getZoom()>9){var F=this._map.getCenter().wrap();this.setProximity({longitude:F.lng,latitude:F.lat})}else this.setProximity(null)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed","maplibregl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed","maplibregl-ctrl-geocoder--collapsed")},query:function(F){return this._geocode(F).then(this._onQueryResult),this},_renderError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error maplibre-gl-geocoder--error'>There was an error reaching the server</div>")},_renderNoResults:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>No results found</div>")},_renderMessage:function(F){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(F)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var F=this.options.language.split(",")[0],Z=T.language(F),Y=z.placeholder[Z];if(Y)return Y}return"Search"},_fitBoundsForMarkers:function(){if(!(this._typeahead.data.length<1)){var F=this._typeahead.data.filter(function(me){return"string"!=typeof me}).slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){var Y=m({},{padding:100},this.options.flyTo),ie=new this._maplibregl.LngLatBounds;F.forEach(function(me){ie.extend(me.geometry.coordinates)}),this._map.fitBounds(ie,Y)}return F.length>0&&this._maplibregl&&this._handleResultMarkers(F),this}},setInput:function(F){return this._inputEl.value=F,this._typeahead.selected=null,this._typeahead.clear(),F.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(F),this},setProximity:function(F){return this.options.proximity=F,this},getProximity:function(){return this.options.proximity},setRenderFunction:function(F){return F&&"function"==typeof F&&(this._typeahead.render=F),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(F){var Z=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=F||this.options.language||Z,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(F){return this.options.zoom=F,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(F){return this.options.flyTo=F,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(F){return this.placeholder=F||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(F){return this.options.bbox=F,this},getCountries:function(){return this.options.countries},setCountries:function(F){return this.options.countries=F,this},getTypes:function(){return this.options.types},setTypes:function(F){return this.options.types=F,this},getMinLength:function(){return this.options.minLength},setMinLength:function(F){return this.options.minLength=F,this._typeahead&&(this._typeahead.options.minLength=F),this},getLimit:function(){return this.options.limit},setLimit:function(F){return this.options.limit=F,this._typeahead&&(this._typeahead.options.limit=F),this},getFilter:function(){return this.options.filter},setFilter:function(F){return this.options.filter=F,this},setGeocoderApi:function(F){return this.geocoderApi=F,this},getGeocoderApi:function(){return this.geocoderApi},_handleMarker:function(F){if(this._map){this._removeMarker();var ie,Y=m({},{color:"#4668F2"},this.options.marker);if(this.mapMarker=new this._maplibregl.Marker(Y),this.options.popup){var se=m({},{},this.options.popup);ie=new this._maplibregl.Popup(se).setHTML(this.options.popupRender(F))}return F.center?(this.mapMarker.setLngLat(F.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(ie)):F.geometry&&F.geometry.type&&"Point"===F.geometry.type&&F.geometry.coordinates&&(this.mapMarker.setLngLat(F.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(ie)),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},_handleResultMarkers:function(F){if(this._map){this._removeResultMarkers();var Y=m({},{color:"#4668F2"},this.options.showResultMarkers);return F.forEach(function(ie){if(this.options.showResultMarkers&&this.options.showResultMarkers.element){var me=this.options.showResultMarkers.element.cloneNode(!0);Y=m(Y,{element:me})}var _e,se=new this._maplibregl.Marker(m({},Y,{element:me}));if(this.options.popup){var Ne=m({},{},this.options.popup);_e=new this._maplibregl.Popup(Ne).setHTML(this.options.popupRender(ie))}ie.center?(se.setLngLat(ie.center).addTo(this._map),this.options.popup&&se.setPopup(_e)):ie.geometry&&ie.geometry.type&&"Point"===ie.geometry.type&&ie.geometry.coordinates&&(se.setLngLat(ie.geometry.coordinates).addTo(this._map),this.options.popup&&se.setPopup(_e)),this.resultMarkers.push(se)}.bind(this)),this}},_removeResultMarkers:function(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(F){F.remove()}),this.resultMarkers=[])},on:function(F,Z){return this._eventEmitter.on(F,Z),this},off:function(F,Z){return this._eventEmitter.removeListener(F,Z),this}},Ae.exports=D},5765:Ae=>{"use strict";Ae.exports={placeholder:{de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05dc\u05d7\u05e4\u05e9",ja:"\u30b5\u30fc\u30c1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041f\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641c\u7d22",cs:"Vyhled\xe1v\xe1n\xed",hu:"Keres\xe9s",ka:"\u10eb\u10d8\u10d4\u10d1\u10d0",nb:"S\xf8ke",sk:"Vyh\u013ead\xe1vanie",th:"\u0e04\u0e49\u0e19\u0e2b\u0e32",fi:"Hae",is:"Leita",ko:"\uc218\uc0c9",pl:"Szukaj",sl:"Iskanje",fa:"\u062c\u0633\u062a\u062c\u0648",ru:"\u041f\u043e\u0438\u0441\u043a"}}},3956:(Ae,J,U)=>{"use strict";function V(e){return"function"==typeof e}function X(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const m=X(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function $(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class G{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(V(r))try{r()}catch(o){t=o instanceof m?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{D(o)}catch(s){t=t??[],s instanceof m?t=[...t,...s.errors]:t.push(s)}}if(t)throw new m(t)}}add(t){var n;if(t&&t!==this)if(this.closed)D(t);else{if(t instanceof G){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&$(n,t)}remove(t){const{_finalizers:n}=this;n&&$(n,t),t instanceof G&&t._removeParent(this)}}G.EMPTY=(()=>{const e=new G;return e.closed=!0,e})();const z=G.EMPTY;function T(e){return e instanceof G||e&&"closed"in e&&V(e.remove)&&V(e.add)&&V(e.unsubscribe)}function D(e){V(e)?e():e.unsubscribe()}const F={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Z={setTimeout(e,t,...n){const{delegate:r}=Z;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=Z;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Y(e){Z.setTimeout(()=>{const{onUnhandledError:t}=F;if(!t)throw e;t(e)})}function ie(){}const me=Me("C",void 0,void 0);function Me(e,t,n){return{kind:e,value:t,error:n}}let Ne=null;function Ze(e){if(F.useDeprecatedSynchronousErrorHandling){const t=!Ne;if(t&&(Ne={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=Ne;if(Ne=null,n)throw r}}else e()}class Ee extends G{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,T(t)&&t.add(this)):this.destination=j}static create(t,n,r){return new Ue(t,n,r)}next(t){this.isStopped?B(function _e(e){return Me("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?B(function se(e){return Me("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?B(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Je=Function.prototype.bind;function nt(e,t){return Je.call(e,t)}class Ct{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){A(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){A(r)}else A(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){A(n)}}}class Ue extends Ee{constructor(t,n,r){let i;if(super(),V(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&F.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&nt(t.next,o),error:t.error&&nt(t.error,o),complete:t.complete&&nt(t.complete,o)}):i=t}this.destination=new Ct(i)}}function A(e){F.useDeprecatedSynchronousErrorHandling?function je(e){F.useDeprecatedSynchronousErrorHandling&&Ne&&(Ne.errorThrown=!0,Ne.error=e)}(e):Y(e)}function B(e,t){const{onStoppedNotification:n}=F;n&&Z.setTimeout(()=>n(e,t))}const j={closed:!0,next:ie,error:function L(e){throw e},complete:ie},ee="function"==typeof Symbol&&Symbol.observable||"@@observable";function W(e){return e}let ut=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function bt(e){return e&&e instanceof Ee||function wt(e){return e&&V(e.next)&&V(e.error)&&V(e.complete)}(e)&&T(e)}(n)?n:new Ue(n,r,i);return Ze(()=>{const{operator:s,source:u}=this;o.add(s?s.call(o,u):u?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=be(r))((i,o)=>{const s=new Ue({next:u=>{try{n(u)}catch(g){o(g),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[ee](){return this}pipe(...n){return function We(e){return 0===e.length?W:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=be(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function be(e){var t;return null!==(t=e??F.Promise)&&void 0!==t?t:Promise}const Ke=X(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let xt=(()=>{class e extends ut{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new vn(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Ke}next(n){Ze(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Ze(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ze(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?z:(this.currentObservers=null,o.push(n),new G(()=>{this.currentObservers=null,$(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new ut;return n.source=this,n}}return e.create=(t,n)=>new vn(t,n),e})();class vn extends xt{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:z}}function zt(e){return V(e?.lift)}function Sn(e){return t=>{if(zt(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function It(e,t,n,r,i){return new Cn(e,t,n,r,i)}class Cn extends Ee{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(u){try{n(u)}catch(g){t.error(g)}}:super._next,this._error=i?function(u){try{i(u)}catch(g){t.error(g)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function En(e,t){return Sn((n,r)=>{let i=0;n.subscribe(It(r,o=>{r.next(e.call(t,o,i++))}))})}var Zn=function(e,t){return(Zn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])})(e,t)};function Wt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Zn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ce=function(){return Ce=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},Ce.apply(this,arguments)};function Gn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function qt(e,t,n,r){return new(n||(n=Promise))(function(o,s){function u(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(u,g)}d((r=r.apply(e,t||[])).next())})}function Ot(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}function li(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function qr(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function Mo(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function Ba(e){return this instanceof Ba?(this.v=e,this):new Ba(e)}function fs(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(b){r[b]&&(i[b]=function(I){return new Promise(function(k,M){o.push([b,I,k,M])>1||u(b,I)})})}function u(b,I){try{!function g(b){b.value instanceof Ba?Promise.resolve(b.value.v).then(d,_):x(o[0][2],b)}(r[b](I))}catch(k){x(o[0][3],k)}}function d(b){u("next",b)}function _(b){u("throw",b)}function x(b,I){b(I),o.shift(),o.length&&u(o[0][0],o[0][1])}}const pl=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Bs(e){return V(e?.then)}function Oo(e){return V(e[ee])}function hs(e){return Symbol.asyncIterator&&V(e?.[Symbol.asyncIterator])}function Kr(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const zr=function Xs(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function oe(e){return V(e?.[zr])}function le(e){return fs(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield Ba(n.read());if(i)return yield Ba(void 0);yield yield Ba(r)}}finally{n.releaseLock()}})}function fe(e){return V(e?.getReader)}function ve(e){if(e instanceof ut)return e;if(null!=e){if(Oo(e))return function Te(e){return new ut(t=>{const n=e[ee]();if(V(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(pl(e))return function $e(e){return new ut(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(Bs(e))return function Xe(e){return new ut(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Y)})}(e);if(hs(e))return xe(e);if(oe(e))return function He(e){return new ut(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(fe(e))return function Fe(e){return xe(le(e))}(e)}throw Kr(e)}function xe(e){return new ut(t=>{(function Rt(e,t){var n,r,i,o;return qt(this,void 0,void 0,function*(){try{for(n=function xa(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=li(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(u,g){!function i(o,s,u,g){Promise.resolve(g).then(function(d){o({value:d,done:u})},s)}(u,g,(s=e[o](s)).done,s.value)})}}}(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function Ft(e,t,n,r=0,i=!1){const o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function Et(e,t,n=1/0){return V(t)?Et((r,i)=>En((o,s)=>t(r,o,i,s))(ve(e(r,i))),n):("number"==typeof t&&(n=t),Sn((r,i)=>function ct(e,t,n,r,i,o,s,u){const g=[];let d=0,_=0,x=!1;const b=()=>{x&&!g.length&&!d&&t.complete()},I=M=>d<r?k(M):g.push(M),k=M=>{o&&t.next(M),d++;let Se=!1;ve(n(M,_++)).subscribe(It(t,ke=>{i?.(ke),o?I(ke):t.next(ke)},()=>{Se=!0},void 0,()=>{if(Se)try{for(d--;g.length&&d<r;){const ke=g.shift();s?Ft(t,s,()=>k(ke)):k(ke)}b()}catch(ke){t.error(ke)}}))};return e.subscribe(It(t,I,()=>{x=!0,b()})),()=>{u?.()}}(r,i,e,n)))}function Zt(e=1/0){return Et(W,e)}const Jt=new ut(e=>e.complete());function Dt(e){return e[e.length-1]}function Vn(e){return function Ut(e){return e&&V(e.schedule)}(Dt(e))?e.pop():void 0}function ri(e,t=0){return Sn((n,r)=>{n.subscribe(It(r,i=>Ft(r,e,()=>r.next(i),t),()=>Ft(r,e,()=>r.complete(),t),i=>Ft(r,e,()=>r.error(i),t)))})}function In(e,t=0){return Sn((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Si(e,t){if(!e)throw new Error("Iterable cannot be null");return new ut(n=>{Ft(n,t,()=>{const r=e[Symbol.asyncIterator]();Ft(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Bi(e,t){return t?function On(e,t){if(null!=e){if(Oo(e))return function ui(e,t){return ve(e).pipe(In(t),ri(t))}(e,t);if(pl(e))return function Pr(e,t){return new ut(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(Bs(e))return function yi(e,t){return ve(e).pipe(In(t),ri(t))}(e,t);if(hs(e))return Si(e,t);if(oe(e))return function Yr(e,t){return new ut(n=>{let r;return Ft(n,t,()=>{r=e[zr](),Ft(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>V(r?.return)&&r.return()})}(e,t);if(fe(e))return function Gr(e,t){return Si(le(e),t)}(e,t)}throw Kr(e)}(e,t):ve(e)}function Eo(e){return e<=0?()=>Jt:Sn((t,n)=>{let r=0;t.subscribe(It(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Hi(e,t,...n){return!0===t?(e(),null):!1===t?null:t(...n).pipe(Eo(1)).subscribe(()=>e())}function nr(e){for(let t in e)if(e[t]===nr)return t;throw Error("Could not find renamed property on target object.")}function Hr(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Hr).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Mi(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const ps=nr({__forward_ref__:nr});function So(e){return e.__forward_ref__=So,e.toString=function(){return Hr(this())},e}function cn(e){return function Co(e){return"function"==typeof e&&e.hasOwnProperty(ps)&&e.__forward_ref__===So}(e)?e():e}class Nn extends Error{constructor(t,n){super(function ja(e,t){return`NG0${Math.abs(e)}${t?": "+t.trim():""}`}(t,n)),this.code=t}}function R(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function cr(e){return"string"==typeof e?e:null==e?"":String(e)}(e)}function tt(e,t){throw new Nn(-201,!1)}function dr(e,t){null==e&&function Dn(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function Qn(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ti(e){return{providers:e.providers||[],imports:e.imports||[]}}function Ui(e){return fa(e,Nt)||fa(e,pi)}function fa(e,t){return e.hasOwnProperty(t)?e[t]:null}function at(e){return e&&(e.hasOwnProperty(xn)||e.hasOwnProperty(or))?e[xn]:null}const Nt=nr({\u0275prov:nr}),xn=nr({\u0275inj:nr}),pi=nr({ngInjectableDef:nr}),or=nr({ngInjectorDef:nr});var dn=(()=>((dn=dn||{})[dn.Default=0]="Default",dn[dn.Host=1]="Host",dn[dn.Self=2]="Self",dn[dn.SkipSelf=4]="SkipSelf",dn[dn.Optional=8]="Optional",dn))();let qi;function Mr(e){const t=qi;return qi=e,t}function ta(e,t,n){const r=Ui(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&dn.Optional?null:void 0!==t?t:void tt(Hr(e))}function Ci(e){return{toString:e}.toString()}var Oi=(()=>((Oi=Oi||{})[Oi.OnPush=0]="OnPush",Oi[Oi.Default=1]="Default",Oi))(),Ii=(()=>{return(e=Ii||(Ii={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",Ii;var e})();const _r=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Go={},Br=[],js=nr({\u0275cmp:nr}),Us=nr({\u0275dir:nr}),_u=nr({\u0275pipe:nr}),vi=nr({\u0275mod:nr}),To=nr({\u0275fac:nr}),pa=nr({__NG_ELEMENT_ID__:nr});let ml=0;function gl(e){return Ci(()=>{const n=!0===e.standalone,r={},i={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===Oi.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||Br,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Ii.Emulated,id:"c"+ml++,styles:e.styles||Br,_:null,setInput:null,schemas:e.schemas||null,tView:null},o=e.dependencies,s=e.features;return i.inputs=vc(e.inputs,r),i.outputs=vc(e.outputs),s&&s.forEach(u=>u(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(yc).filter(bu):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(Vi).filter(bu):null,i})}function yc(e){return Qr(e)||Po(e)}function bu(e){return null!==e}const ms={};function Sa(e){return Ci(()=>{const t={type:e.type,bootstrap:e.bootstrap||Br,declarations:e.declarations||Br,imports:e.imports||Br,exports:e.exports||Br,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(ms[e.id]=e.type),t})}function vc(e,t){if(null==e)return Go;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}const na=gl;function Qr(e){return e[js]||null}function Po(e){return e[Us]||null}function Vi(e){return e[_u]||null}function Ho(e,t){const n=e[vi]||null;if(!n&&!0===t)throw new Error(`Type ${Hr(e)} does not have '\u0275mod' property.`);return n}function qo(e){return Array.isArray(e)&&"object"==typeof e[1]}function rs(e){return Array.isArray(e)&&!0===e[1]}function Fl(e){return 0!=(8&e.flags)}function mi(e){return 2==(2&e.flags)}function Sr(e){return null!==e.template}function Ts(e){return 0!=(256&e[2])}function Wo(e,t){return e.hasOwnProperty(To)?e[To]:null}class wc{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function ln(e){return e.type.prototype.ngOnChanges&&(e.setInput=cd),ud}function ud(){const e=Va(this),t=e?.current;if(t){const n=e.previous;if(n===Go)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function cd(e,t,n,r){const i=Va(e)||function dd(e,t){return e[Ps]=t}(e,{previous:Go,current:null}),o=i.current||(i.current={}),s=i.previous,u=this.declaredInputs[n],g=s[u];o[u]=new wc(g&&g.currentValue,t,s===Go),e[r]=t}const Ps="__ngSimpleChanges__";function Va(e){return e[Ps]||null}let pd;function oi(e){return!!e.listen}const nl={createRenderer:(e,t)=>{throw new Error("Renderer3 disabled")}};function _i(e){for(;Array.isArray(e);)e=e[0];return e}function eo(e,t){return _i(t[e.index])}function lo(e,t){const n=t[e];return qo(n)?n:n[0]}function il(e){return 64==(64&e[2])}function Yi(e,t){return null==t?null:e[t]}function md(e){e[18]=0}function Cu(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const Kn={lFrame:yt(null),bindingsEnabled:!0};function Xu(){return Kn.bindingsEnabled}function kt(){return Kn.lFrame.lView}function ni(){return Kn.lFrame.tView}function Ao(){let e=iu();for(;null!==e&&64===e.type;)e=e.parent;return e}function iu(){return Kn.lFrame.currentTNode}function $s(e,t){const n=Kn.lFrame;n.currentTNode=e,n.isParent=t}function Sc(){return Kn.lFrame.isParent}function ge(e,t){const n=Kn.lFrame;n.bindingIndex=n.bindingRootIndex=e,ye(t)}function ye(e){Kn.lFrame.currentDirectiveIndex=e}function Ve(e){Kn.lFrame.currentQueryIndex=e}function De(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function ze(e,t,n){if(n&dn.SkipSelf){let i=t,o=e;for(;!(i=i.parent,null!==i||n&dn.Host||(i=De(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;t=i,e=o}const r=Kn.lFrame=ot();return r.currentTNode=t,r.lView=e,!0}function Ye(e){const t=ot(),n=e[1];Kn.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function ot(){const e=Kn.lFrame,t=null===e?null:e.child;return null===t?yt(e):t}function yt(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function gt(){const e=Kn.lFrame;return Kn.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const vt=gt;function Tt(){const e=gt();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function wn(e){Kn.lFrame.selectedIndex=e}function qn(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:u,ngAfterViewInit:g,ngAfterViewChecked:d,ngOnDestroy:_}=o;s&&(e.contentHooks||(e.contentHooks=[])).push(-n,s),u&&((e.contentHooks||(e.contentHooks=[])).push(n,u),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,u)),g&&(e.viewHooks||(e.viewHooks=[])).push(-n,g),d&&((e.viewHooks||(e.viewHooks=[])).push(n,d),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,d)),null!=_&&(e.destroyHooks||(e.destroyHooks=[])).push(n,_)}}function $n(e,t,n){bi(e,t,3,n)}function jn(e,t,n,r){(3&e[2])===n&&bi(e,t,n,r)}function Ln(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function bi(e,t,n,r){const o=r??-1,s=t.length-1;let u=0;for(let g=void 0!==r?65535&e[18]:0;g<s;g++)if("number"==typeof t[g+1]){if(u=t[g],null!=r&&u>=r)break}else t[g]<0&&(e[18]+=65536),(u<o||-1==o)&&(mo(e,n,t,g),e[18]=(4294901760&e[18])+g+2),g++}function mo(e,t,n,r){const i=n[r]<0,o=n[r+1],u=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{o.call(u)}finally{}}}else try{o.call(u)}finally{}}class uo{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Qu(e,t,n){const r=oi(e);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],u=n[i++],g=n[i++];r?e.setAttribute(t,u,g,s):t.setAttributeNS(s,u,g)}else{const s=o,u=n[++i];ou(s)?r&&e.setProperty(t,s,u):r?e.setAttribute(t,s,u):t.setAttribute(s,u),i++}}return i}function Ul(e){return 3===e||4===e||6===e}function ou(e){return 64===e.charCodeAt(0)}function wl(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||ec(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function ec(e,t,n,r,i){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const u=e[o++];if("number"==typeof u){if(u===t){s=-1;break}if(u>t){s=o-1;break}}}for(;o<e.length;){const u=e[o];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function Pu(e){return-1!==e}function as(e){return 32767&e}function Xi(e,t){let n=function tc(e){return e>>16}(e),r=t;for(;n>0;)r=r[15],n--;return r}let ol=!0;function _s(e){const t=ol;return ol=e,t}let $a=0;const bs={};function Cc(e,t){const n=ic(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,rc(r.data,e),rc(t,null),rc(r.blueprint,null));const i=Ic(e,t),o=e.injectorIndex;if(Pu(i)){const s=as(i),u=Xi(i,t),g=u[1].data;for(let d=0;d<8;d++)t[o+d]=u[s+d]|g[s+d]}return t[o+8]=i,o}function rc(e,t){e.push(0,0,0,0,0,0,0,0,t)}function ic(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Ic(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=yd(i),null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function au(e,t,n){!function gd(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(pa)&&(r=n[pa]),null==r&&(r=n[pa]=$a++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function hm(e,t,n){if(n&dn.Optional)return e;tt()}function bh(e,t,n,r){if(n&dn.Optional&&void 0===r&&(r=null),0==(n&(dn.Self|dn.Host))){const i=e[9],o=Mr(void 0);try{return i?i.get(t,r,n&dn.Optional):ta(t,r,n&dn.Optional)}finally{Mr(o)}}return hm(r,0,n)}function oc(e,t,n,r=dn.Default,i){if(null!==e){if(1024&t[2]){const s=function sc(e,t,n,r,i){let o=e,s=t;for(;null!==o&&null!==s&&1024&s[2]&&!(256&s[2]);){const u=ss(o,s,n,r|dn.Self,bs);if(u!==bs)return u;let g=o.parent;if(!g){const d=s[21];if(d){const _=d.get(n,bs,r);if(_!==bs)return _}g=yd(s),s=s[15]}o=g}return i}(e,t,n,r,bs);if(s!==bs)return s}const o=ss(e,t,n,r,bs);if(o!==bs)return o}return bh(t,n,r,i)}function ss(e,t,n,r,i){const o=function _0(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(pa)?e[pa]:void 0;return"number"==typeof t?t>=0?255&t:b0:t}(n);if("function"==typeof o){if(!ze(t,e,r))return r&dn.Host?hm(i,0,r):bh(t,n,r,i);try{const s=o(r);if(null!=s||r&dn.Optional)return s;tt()}finally{vt()}}else if("number"==typeof o){let s=null,u=ic(e,t),g=-1,d=r&dn.Host?t[16][6]:null;for((-1===u||r&dn.SkipSelf)&&(g=-1===u?Ic(e,t):t[u+8],-1!==g&&oy(r,!1)?(s=t[1],u=as(g),t=Xi(g,t)):u=-1);-1!==u;){const _=t[1];if(iy(o,u,_.data)){const x=v0(u,t,n,s,r,d);if(x!==bs)return x}g=t[u+8],-1!==g&&oy(r,t[1].data[u+8]===d)&&iy(o,u,t)?(s=_,u=as(g),t=Xi(g,t)):u=-1}}return i}function v0(e,t,n,r,i,o){const s=t[1],u=s.data[e+8],_=function _f(e,t,n,r,i){const o=e.providerIndexes,s=t.data,u=1048575&o,g=e.directiveStart,_=o>>20,b=i?u+_:e.directiveEnd;for(let I=r?u:u+_;I<b;I++){const k=s[I];if(I<g&&n===k||I>=g&&k.type===n)return I}if(i){const I=s[g];if(I&&Sr(I)&&I.type===n)return g}return null}(u,s,n,null==r?mi(u)&&ol:r!=s&&0!=(3&u.type),i&dn.Host&&o===u);return null!==_?bf(t,s,_,u):bs}function bf(e,t,n,r){let i=e[n];const o=t.data;if(function Zo(e){return e instanceof uo}(i)){const s=i;s.resolving&&function K(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new Nn(-200,`Circular dependency in DI detected for ${e}${n}`)}(R(o[n]));const u=_s(s.canSeeViewProviders);s.resolving=!0;const g=s.injectImpl?Mr(s.injectImpl):null;ze(e,r,dn.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function tr(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const s=ln(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{null!==g&&Mr(g),_s(u),s.resolving=!1,vt()}}return i}function iy(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function oy(e,t){return!(e&dn.Self||e&dn.Host&&t)}class ac{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return oc(this._tNode,this._lView,t,r,n)}}function b0(){return new ac(Ao(),kt())}function yd(e){const t=e[1],n=t.type;return 2===n?t.declTNode:1===n?e[6]:null}const _d="__parameters__";function wd(e,t,n){return Ci(()=>{const r=function pm(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return u.annotation=s,u;function u(g,d,_){const x=g.hasOwnProperty(_d)?g[_d]:Object.defineProperty(g,_d,{value:[]})[_d];for(;x.length<=_;)x.push(null);return(x[_]=x[_]||[]).push(s),g}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class Cr{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Qn({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const x0=new Cr("AnalyzeForEntryComponents");function Du(e,t){e.forEach(n=>Array.isArray(n)?Du(n,t):t(n))}function Ih(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Ed(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const Au={},Ph="__NG_DI_FLAG__",Dh="ngTempTokenPath",O0=/\n/gm,wm="__source";let la;function Ah(e){const t=la;return la=e,t}function cy(e,t=dn.Default){if(void 0===la)throw new Nn(-203,!1);return null===la?ta(e,void 0,t):la.get(e,t&dn.Optional?null:void 0,t)}function Yn(e,t=dn.Default){return(function Io(){return qi}()||cy)(cn(e),t)}function lc(e,t=dn.Default){return Yn(e,t)}function xm(e){const t=[];for(let n=0;n<e.length;n++){const r=cn(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Nn(900,!1);let i,o=dn.Default;for(let s=0;s<r.length;s++){const u=r[s],g=N0(u);"number"==typeof g?-1===g?i=u.token:o|=g:i=u}t.push(Yn(i,o))}else t.push(Yn(r))}return t}function Cf(e,t){return e[Ph]=t,e.prototype[Ph]=t,e}function N0(e){return e[Ph]}const xl=Cf(wd("Optional"),8),Cd=Cf(wd("SkipSelf"),4);function ki(e){return e.ngOriginalError}class Lc{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&ki(t);for(;n&&ki(n);)n=ki(n);return n||null}}const vo=new Map;let Rf=0;const jm="__ngContext__";function ci(e,t){qo(t)?(e[jm]=t[20],function Hh(e){vo.set(e[20],e)}(t)):e[jm]=t}function Sl(e){const t=e[jm];return"number"==typeof t?function Mf(e){return vo.get(e)||null}(t):t||null}function qh(e){const t=Sl(e);return t?qo(t)?t:t.lView:null}const Q=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(_r))();function Ie(e){return e instanceof Function?e():e}var dt=(()=>((dt=dt||{})[dt.Important=1]="Important",dt[dt.DashCase=2]="DashCase",dt))();function Pt(e,t){return undefined(e,t)}function fn(e){const t=e[3];return rs(t)?t[3]:t}function en(e){return Bn(e[13])}function sr(e){return Bn(e[4])}function Bn(e){for(;null!==e&&!rs(e);)e=e[4];return e}function lr(e,t,n,r,i){if(null!=r){let o,s=!1;rs(r)?o=r:qo(r)&&(s=!0,r=r[0]);const u=_i(r);0===e&&null!==n?null==i?Fr(t,n,u):Vr(t,n,u,i||null,!0):1===e&&null!==n?Vr(t,n,u,i||null,!0):2===e?function zc(e,t,n){const r=ro(e,t);r&&function Aa(e,t,n,r){oi(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,u,s):3===e&&t.destroyNode(u),null!=o&&function Of(e,t,n,r,i){const o=n[7];o!==_i(n)&&lr(t,e,r,o,i);for(let u=10;u<n.length;u++){const g=n[u];uu(g[1],g,e,t,r,o)}}(t,e,o,n,i)}}function Ur(e,t,n){if(oi(e))return e.createElement(t,n);{const r=null!==n?function el(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(n):null;return null===r?e.createElement(t):e.createElementNS(r,t)}}function Bo(e,t){const n=e[9],r=n.indexOf(t),i=t[3];512&t[2]&&(t[2]&=-513,Cu(i,-1)),n.splice(r,1)}function va(e,t){if(e.length<=10)return;const n=10+t,r=e[n];if(r){const i=r[17];null!==i&&i!==e&&Bo(i,r),t>0&&(e[n-1][4]=r[4]);const o=Ed(e,10+t);!function Wi(e,t){uu(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function Yo(e,t){if(!(128&t[2])){const n=t[11];oi(n)&&n.destroyNode&&uu(e,t,n,3,null,null),function Zi(e){let t=e[13];if(!t)return _a(e[1],e);for(;t;){let n=null;if(qo(t))n=t[13];else{const r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)qo(t)&&_a(t[1],t),t=t[3];null===t&&(t=e),qo(t)&&_a(t[1],t),n=t&&t[4]}t=n}}(t)}}function _a(e,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function ua(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof uo)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const u=i[o[s]],g=o[s+1];try{g.call(u)}finally{}}else try{o.call(i)}finally{}}}}(e,t),function _o(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+1],u="function"==typeof s?s(t):_i(t[s]),g=r[i=n[o+2]],d=n[o+3];"boolean"==typeof d?u.removeEventListener(n[o],g,d):d>=0?r[i=d]():r[i=-d].unsubscribe(),o+=2}else{const s=r[i=n[o+1]];n[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)r[o]();t[7]=null}}(e,t),1===t[1].type&&oi(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&rs(t[3])){n!==t[3]&&Bo(n,t);const r=t[19];null!==r&&r.detachView(e)}!function zm(e){vo.delete(e[20])}(t)}}function Rr(e,t,n){return function xi(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const i=e.data[r.directiveStart].encapsulation;if(i===Ii.None||i===Ii.Emulated)return null}return eo(r,n)}(e,t.parent,n)}function Vr(e,t,n,r,i){oi(e)?e.insertBefore(t,n,r,i):(Fi(t)?t.content:t).insertBefore(n,r,i)}function Fr(e,t,n){oi(e)?e.appendChild(t,n):(Fi(t)?t.content:t).appendChild(n)}function Za(e,t,n,r,i){null!==r?Vr(e,t,n,r,i):Fr(e,t,n)}function Fi(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}function ro(e,t){return oi(e)?e.parentNode(t):t.parentNode}let Ms=function Hl(e,t,n){return 40&e.type?eo(e,n):null};function sl(e,t,n,r){const i=Rr(e,r,t),o=t[11],u=function $r(e,t,n){return Ms(e,t,n)}(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let g=0;g<n.length;g++)Za(o,i,n[g],u,!1);else Za(o,i,n,u,!1)}function Os(e,t){if(null!==t){const n=t.type;if(3&n)return eo(t,e);if(4&n)return Ou(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return Os(e,r);{const i=e[t.index];return rs(i)?Ou(-1,i):_i(i)}}if(32&n)return Pt(t,e)()||_i(e[t.index]);{const r=Fc(e,t);return null!==r?Array.isArray(r)?r[0]:Os(fn(e[16]),r):Os(e,t.next)}}return null}function Fc(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Ou(e,t){const n=10+e+1;if(n<t.length){const r=t[n],i=r[1].firstChild;if(null!==i)return Os(r,i)}return t[7]}function $l(e,t,n,r,i,o,s){for(;null!=n;){const u=r[n.index],g=n.type;if(s&&0===t&&(u&&ci(_i(u),r),n.flags|=4),64!=(64&n.flags))if(8&g)$l(e,t,n.child,r,i,o,!1),lr(t,e,i,u,o);else if(32&g){const d=Pt(n,r);let _;for(;_=d();)lr(t,e,i,_,o);lr(t,e,i,u,o)}else 16&g?Bc(e,t,r,n,i,o):lr(t,e,i,u,o);n=s?n.projectionNext:n.next}}function uu(e,t,n,r,i,o){$l(n,r,e.firstChild,t,i,o,!1)}function Bc(e,t,n,r,i,o){const s=n[16],g=s[6].projection[r.projection];if(Array.isArray(g))for(let d=0;d<g.length;d++)lr(t,e,i,g[d],o);else $l(e,t,g,s[3],i,o,!0)}function Lf(e,t,n){oi(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function ql(e,t,n){oi(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function kd(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}const Lu="ng-template";function Fd(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==kd(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function kf(e){return 4===e.type&&e.value!==Lu}function Jh(e,t,n){return t===(4!==e.type||n?e.value:Lu)}function Ff(e,t,n){let r=4;const i=e.attrs||[],o=function Bf(e){for(let t=0;t<e.length;t++)if(Ul(e[t]))return t;return e.length}(i);let s=!1;for(let u=0;u<t.length;u++){const g=t[u];if("number"!=typeof g){if(!s)if(4&r){if(r=2|1&r,""!==g&&!Jh(e,g,n)||""===g&&1===t.length){if(Ls(r))return!1;s=!0}}else{const d=8&r?g:t[++u];if(8&r&&null!==e.attrs){if(!Fd(e.attrs,d,n)){if(Ls(r))return!1;s=!0}continue}const x=Kh(8&r?"class":g,i,kf(e),n);if(-1===x){if(Ls(r))return!1;s=!0;continue}if(""!==d){let b;b=x>o?"":i[x+1].toLowerCase();const I=8&r?b:null;if(I&&-1!==kd(I,d,0)||2&r&&d!==b){if(Ls(r))return!1;s=!0}}}}else{if(!s&&!Ls(r)&&!Ls(g))return!1;if(s&&Ls(g))continue;s=!1,r=g|1&r}}return Ls(r)||s}function Ls(e){return 0==(1&e)}function Kh(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){const s=t[i];if(s===e)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let u=t[++i];for(;"string"==typeof u;)u=t[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function Yh(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function zd(e,t,n=!1){for(let r=0;r<t.length;r++)if(Ff(e,t[r],n))return!0;return!1}function jf(e,t){return e?":not("+t.trim()+")":t}function jd(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const u=e[++n];i+="["+s+(u.length>0?'="'+u+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Ls(s)&&(t+=jf(o,i),i=""),r=s,o=o||!Ls(r);n++}return""!==i&&(t+=jf(o,i)),t}const Ir={};const cu=new Cr("ENVIRONMENT_INITIALIZER"),ep=new Cr("INJECTOR_DEF_TYPES");function Fy(...e){return{\u0275providers:Vf(0,e)}}function Vf(e,...t){const n=[],r=new Set;let i;return Du(t,o=>{const s=o;Gd(s,n,[],r)&&(i||(i=[]),i.push(s))}),void 0!==i&&Zl(i,n),n}function Zl(e,t){for(let n=0;n<e.length;n++){const{providers:i}=e[n];Du(i,o=>{t.push(o)})}}function Gd(e,t,n,r){if(!(e=cn(e)))return!1;let i=null,o=at(e);const s=!o&&Qr(e);if(o||s){if(s&&!s.standalone)return!1;i=e}else{const g=e.ngModule;if(o=at(g),!o)return!1;i=g}const u=r.has(i);if(s){if(u)return!1;if(r.add(i),s.dependencies){const g="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const d of g)Gd(d,t,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!u){let d;r.add(i);try{Du(o.imports,_=>{Gd(_,t,n,r)&&(d||(d=[]),d.push(_))})}finally{}void 0!==d&&Zl(d,t)}if(!u){const d=Wo(i)||(()=>new i);t.push({provide:i,useFactory:d,deps:Br},{provide:ep,useValue:i,multi:!0},{provide:cu,useValue:()=>Yn(i),multi:!0})}const g=o.providers;null==g||u||Du(g,_=>{t.push(_)})}}return i!==e&&void 0!==e.providers}const np=nr({provide:String,useValue:nr});function Hd(e){return null!==e&&"object"==typeof e&&np in e}function Jl(e){return"function"==typeof e}const ip=new Cr("INJECTOR",-1);class Hm{get(t,n=Au){if(n===Au){const r=new Error(`NullInjectorError: No provider for ${Hr(t)}!`);throw r.name="NullInjectorError",r}return n}}const op=new Cr("Set Injector scope."),Gf={},Zs={};let $d;function ap(){return void 0===$d&&($d=new Hm),$d}class xs{}class By extends xs{constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,lp(t,s=>this.processProvider(s)),this.records.set(ip,Kl(void 0,this)),i.has("environment")&&this.records.set(xs,Kl(void 0,this));const o=this.records.get(op);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ep.multi,Br,dn.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}get(t,n=Au,r=dn.Default){this.assertNotDestroyed();const i=Ah(this),o=Mr(void 0);try{if(!(r&dn.SkipSelf)){let u=this.records.get(t);if(void 0===u){const g=function Uy(e){return"function"==typeof e||"object"==typeof e&&e instanceof Cr}(t)&&Ui(t);u=g&&this.injectableDefInScope(g)?Kl(sp(t),Gf):null,this.records.set(t,u)}if(null!=u)return this.hydrate(t,u)}return(r&dn.Self?ap():this.parent).get(t,n=r&dn.Optional&&n===Au?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[Dh]=s[Dh]||[]).unshift(Hr(t)),i)throw s;return function fy(e,t,n,r){const i=e[Dh];throw t[wm]&&i.unshift(t[wm]),e.message=function k0(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=Hr(t);if(Array.isArray(t))i=t.map(Hr).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let u=t[s];o.push(s+":"+("string"==typeof u?JSON.stringify(u):Hr(u)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(O0,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[Dh]=null,e}(s,t,"R3InjectorError",this.source)}throw s}finally{Mr(o),Ah(i)}}resolveInjectorInitializers(){const t=Ah(this),n=Mr(void 0);try{const r=this.get(cu.multi,Br,dn.Self);for(const i of r)i()}finally{Ah(t),Mr(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(Hr(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Nn(205,!1)}processProvider(t){let n=Jl(t=cn(t))?t:cn(t&&t.provide);const r=function qd(e){return Hd(e)?Kl(void 0,e.useValue):Kl(function Vc(e,t,n){let r;if(Jl(e)){const i=cn(e);return Wo(i)||sp(i)}if(Hd(e))r=()=>cn(e.useValue);else if(function Gm(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...xm(e.deps||[]));else if(function rp(e){return!(!e||!e.useExisting)}(e))r=()=>Yn(cn(e.useExisting));else{const i=cn(e&&(e.useClass||e.provide));if(!function Wd(e){return!!e.deps}(e))return Wo(i)||sp(i);r=()=>new i(...xm(e.deps))}return r}(e),Gf)}(t);if(Jl(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Kl(void 0,Gf,!0),i.factory=()=>xm(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Gf&&(n.value=Zs,n.value=n.factory()),"object"==typeof n.value&&n.value&&function jy(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=cn(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function sp(e){const t=Ui(e),n=null!==t?t.factory:Wo(e);if(null!==n)return n;if(e instanceof Cr)throw new Nn(204,!1);if(e instanceof Function)return function Uc(e){const t=e.length;if(t>0)throw function Rs(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new Nn(204,!1);const n=function $i(e){const t=e&&(e[Nt]||e[pi]);if(t){const n=function Oe(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Nn(204,!1)}function Kl(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Vy(e){return!!e.\u0275providers}function lp(e,t){for(const n of e)Array.isArray(n)?lp(n,t):Vy(n)?lp(n.\u0275providers,t):t(n)}function up(e,t=null,n=null,r){const i=cp(e,t,n,r);return i.resolveInjectorInitializers(),i}function cp(e,t=null,n=null,r,i=new Set){const o=[n||Br,Fy(e)];return r=r||("object"==typeof e?void 0:Hr(e)),new By(o,t||ap(),r||null,i)}let Xo=(()=>{class e{static create(n,r){if(Array.isArray(n))return up({name:""},r,n,"");{const i=n.name??"";return up({name:i},n.parent,n.providers,i)}}}return e.THROW_IF_NOT_FOUND=Au,e.NULL=new Hm,e.\u0275prov=Qn({token:e,providedIn:"any",factory:()=>Yn(ip)}),e.__NG_ELEMENT_ID__=-1,e})();function rr(e,t=dn.Default){const n=kt();return null===n?Yn(e,t):oc(Ao(),n,cn(e),t)}function fb(){throw new Error("invalid")}function dE(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const s=e.data[o];Ve(i),s.contentQueries(2,t[o],o)}}}function Jm(e,t,n,r,i,o,s,u,g,d,_){const x=t.blueprint.slice();return x[0]=i,x[2]=76|r,(null!==_||e&&1024&e[2])&&(x[2]|=1024),md(x),x[3]=x[15]=e,x[8]=n,x[10]=s||e&&e[10],x[11]=u||e&&e[11],x[12]=g||e&&e[12]||null,x[9]=d||e&&e[9]||null,x[6]=o,x[20]=function Mu(){return Rf++}(),x[21]=_,x[16]=2==t.type?e[16]:x,x}function mp(e,t,n,r,i){let o=e.data[t];if(null===o)o=function Tb(e,t,n,r,i){const o=iu(),s=Sc(),g=e.data[t]=function UA(e,t,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=g),null!==o&&(s?null==o.child&&null!==g.parent&&(o.child=g):null===o.next&&(o.next=g)),g}(e,t,n,r,i),function te(){return Kn.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function Da(){const e=Kn.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return $s(o,!0),o}function gp(e,t,n,r){if(0===n)return-1;const i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Km(e,t,n){Ye(t);try{const r=e.viewQuery;null!==r&&kb(1,r,n);const i=e.template;null!==i&&fE(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&dE(e,t),e.staticViewQueries&&kb(2,e.viewQuery,n);const o=e.components;null!==o&&function zA(e,t){for(let n=0;n<t.length;n++)oR(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,Tt()}}function yp(e,t,n,r){const i=t[2];if(128!=(128&i)){Ye(t);try{md(t),function P(e){return Kn.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&fE(e,t,n,2,r);const s=3==(3&i);if(s){const d=e.preOrderCheckHooks;null!==d&&$n(t,d,null)}else{const d=e.preOrderHooks;null!==d&&jn(t,d,0,null),Ln(t,0)}if(function rR(e){for(let t=en(e);null!==t;t=sr(t)){if(!t[2])continue;const n=t[9];for(let r=0;r<n.length;r++){const i=n[r],o=i[3];0==(512&i[2])&&Cu(o,1),i[2]|=512}}}(t),function nR(e){for(let t=en(e);null!==t;t=sr(t))for(let n=10;n<t.length;n++){const r=t[n],i=r[1];il(r)&&yp(i,r,i.template,r[8])}}(t),null!==e.contentQueries&&dE(e,t),s){const d=e.contentCheckHooks;null!==d&&$n(t,d)}else{const d=e.contentHooks;null!==d&&jn(t,d,1),Ln(t,1)}!function kA(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)wn(~i);else{const o=i,s=n[++r],u=n[++r];ge(s,o),u(2,t[o])}}}finally{wn(-1)}}(e,t);const u=e.components;null!==u&&function FA(e,t){for(let n=0;n<t.length;n++)iR(e,t[n])}(t,u);const g=e.viewQuery;if(null!==g&&kb(2,g,r),s){const d=e.viewCheckHooks;null!==d&&$n(t,d)}else{const d=e.viewHooks;null!==d&&jn(t,d,2),Ln(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,Cu(t[3],-1))}finally{Tt()}}}function BA(e,t,n,r){const i=t[10],s=function _h(e){return 4==(4&e[2])}(t);try{!s&&i.begin&&i.begin(),s&&Km(e,t,r),yp(e,t,n,r)}finally{!s&&i.end&&i.end()}}function fE(e,t,n,r,i){const o=function $t(){return Kn.lFrame.selectedIndex}(),s=2&r;try{wn(-1),s&&t.length>22&&function Xh(e,t,n,r){if(!r)if(3==(3&t[2])){const o=e.preOrderCheckHooks;null!==o&&$n(t,o,n)}else{const o=e.preOrderHooks;null!==o&&jn(t,o,0,n)}wn(n)}(e,t,22,!1),n(r,i)}finally{wn(o)}}function pE(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Yy(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Yy(e,t,n,r,i,o,s,u,g,d){const _=22+r,x=_+i,b=function jA(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Ir);return n}(_,x),I="function"==typeof d?d():d;return b[1]={type:e,blueprint:b,template:n,queries:null,viewQuery:u,declTNode:t,data:b.slice().fill(null,_),bindingStartIndex:_,expandoStartIndex:x,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:g,consts:I,incompleteFirstPass:!1}}function vE(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function _E(e,t,n,r,i,o){const s=o.hostBindings;if(s){let u=e.hostBindingOpCodes;null===u&&(u=e.hostBindingOpCodes=[]);const g=~t.index;(function WA(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(u)!=g&&u.push(g),u.push(r,i,s)}}function bE(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function wE(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function XA(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Sr(t)&&(n[""]=e)}}function xE(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function EE(e,t,n,r,i){e.data[r]=i;const o=i.factory||(i.factory=Wo(i.type)),s=new uo(o,Sr(i),rr);e.blueprint[r]=s,n[r]=s,_E(e,t,0,r,gp(e,n,i.hostVars,Ir),i)}function QA(e,t,n){const r=eo(t,e),i=pE(n),o=e[10],s=Xy(e,Jm(e,i,null,n.onPush?32:16,r,t,o,o.createRenderer(r,n),null,null,null));e[t.index]=s}function eR(e,t,n,r,i,o){const s=o[t];if(null!==s){const u=r.setInput;for(let g=0;g<s.length;){const d=s[g++],_=s[g++],x=s[g++];null!==u?r.setInput(n,x,d,_):n[_]=x}}}function tR(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function iR(e,t){const n=lo(t,e);if(il(n)){const r=n[1];48&n[2]?yp(r,n,r.template,n[8]):n[5]>0&&Mb(n)}}function Mb(e){for(let r=en(e);null!==r;r=sr(r))for(let i=10;i<r.length;i++){const o=r[i];if(512&o[2]){const s=o[1];yp(s,o,s.template,o[8])}else o[5]>0&&Mb(o)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=lo(n[r],e);il(i)&&i[5]>0&&Mb(i)}}function oR(e,t){const n=lo(t,e),r=n[1];(function aR(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),Km(r,n,n[8])}function Xy(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Nb(e,t,n){const r=t[10];r.begin&&r.begin();try{yp(e,t,e.template,n)}catch(i){throw function DE(e,t){const n=e[9],r=n?n.get(Lc,null):null;r&&r.handleError(t)}(t,i),i}finally{r.end&&r.end()}}function CE(e){!function Lb(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=qh(n);if(null!==r){const i=r[1];BA(i,r,i.template,n)}}}(e[8])}function kb(e,t,n){Ve(0),t(e,n)}const lR=(()=>Promise.resolve(null))();function Qy(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const u=t[s];"number"==typeof u?o=u:1==o?i=Mi(i,u):2==o&&(r=Mi(r,u+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function _R(){const e=Ao();qn(kt()[1],e)}function Ub(e,t,n,r,i){const s=i?"class":"style";!function AE(e,t,n,r,i){for(let o=0;o<n.length;){const s=n[o++],u=n[o++],g=t[s],d=e.data[s];null!==d.setInput?d.setInput(g,i,r,u):g[u]=i}}(e,n,t.inputs[s],s,r)}function nv(e,t,n,r){const i=kt(),o=ni(),s=22+e,u=i[11],g=i[s]=Ur(u,t,function xr(){return Kn.lFrame.currentNamespace}()),d=o.firstCreatePass?function LR(e,t,n,r,i,o,s){const u=t.consts,d=mp(t,e,2,i,Yi(u,o));return function Ab(e,t,n,r){let i=!1;if(Xu()){const o=function KA(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];zd(n,s.selectors,!1)&&(i||(i=[]),au(Cc(n,t),e,s.type),Sr(s)?(wE(e,n),i.unshift(s)):i.push(s))}return i}(e,t,n),s=null===r?null:{"":-1};if(null!==o){i=!0,xE(n,e.data.length,o.length);for(let _=0;_<o.length;_++){const x=o[_];x.providersResolver&&x.providersResolver(x)}let u=!1,g=!1,d=gp(e,t,o.length,null);for(let _=0;_<o.length;_++){const x=o[_];n.mergedAttrs=wl(n.mergedAttrs,x.hostAttrs),EE(e,n,t,d,x),XA(d,x,s),null!==x.contentQueries&&(n.flags|=8),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(n.flags|=128);const b=x.type.prototype;!u&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),u=!0),!g&&(b.ngOnChanges||b.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),g=!0),d++}!function VA(e,t){const r=t.directiveEnd,i=e.data,o=t.attrs,s=[];let u=null,g=null;for(let d=t.directiveStart;d<r;d++){const _=i[d],x=_.inputs,b=null===o||kf(t)?null:tR(x,o);s.push(b),u=vE(x,d,u),g=vE(_.outputs,d,g)}null!==u&&(u.hasOwnProperty("class")&&(t.flags|=16),u.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=u,t.outputs=g}(e,n)}s&&function YA(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const o=n[t[i+1]];if(null==o)throw new Nn(-301,!1);r.push(t[i],o)}}}(n,r,s)}return n.mergedAttrs=wl(n.mergedAttrs,n.attrs),i}(t,n,d,Yi(u,s)),null!==d.attrs&&Qy(d,d.attrs,!1),null!==d.mergedAttrs&&Qy(d,d.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,d),d}(s,o,i,0,t,n,r):o.data[s];$s(d,!0);const _=d.mergedAttrs;null!==_&&Qu(u,g,_);const x=d.classes;null!==x&&ql(u,g,x);const b=d.styles;return null!==b&&Lf(u,g,b),64!=(64&d.flags)&&sl(o,i,g,d),0===function Iu(){return Kn.lFrame.elementDepthCount}()&&ci(g,i),function Bl(){Kn.lFrame.elementDepthCount++}(),function ei(e){return 1==(1&e.flags)}(d)&&(function Pb(e,t,n){!Xu()||(function ZA(e,t,n,r){const i=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||Cc(n,t),ci(r,t);const s=n.initialInputs;for(let u=i;u<o;u++){const g=e.data[u],d=Sr(g);d&&QA(t,n,g);const _=bf(t,e,u,n);ci(_,t),null!==s&&eR(0,u-i,_,g,0,s),d&&(lo(n.index,t)[8]=_)}}(e,t,n,eo(n,t)),128==(128&n.flags)&&function JA(e,t,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function we(){return Kn.lFrame.currentDirectiveIndex}();try{wn(o);for(let u=r;u<i;u++){const g=e.data[u],d=t[u];ye(u),(null!==g.hostBindings||0!==g.hostVars||null!==g.hostAttrs)&&bE(g,d)}}finally{wn(-1),ye(s)}}(e,t,n))}(o,i,d),function hE(e,t,n){if(Fl(t)){const i=t.directiveEnd;for(let o=t.directiveStart;o<i;o++){const s=e.data[o];s.contentQueries&&s.contentQueries(1,n[o],o)}}}(o,d,i)),null!==r&&function Db(e,t,n=eo){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],u=-1===s?n(t,e):e[s];e[i++]=u}}}(i,d),nv}function Qm(){let e=Ao();Sc()?function Tu(){Kn.lFrame.isParent=!1}():(e=e.parent,$s(e,!1));const t=e;!function Yu(){Kn.lFrame.elementDepthCount--}();const n=ni();return n.firstCreatePass&&(qn(n,e),Fl(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function Ga(e){return 0!=(16&e.flags)}(t)&&Ub(n,t,kt(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function Ha(e){return 0!=(32&e.flags)}(t)&&Ub(n,t,kt(),t.stylesWithoutHost,!1),Qm}function rv(e,t,n,r){return nv(e,t,n,r),Qm(),rv}function iv(e){return!!e&&"function"==typeof e.then}const nS=function tS(e){return!!e&&"function"==typeof e.subscribe};function AS(e,t=""){const n=kt(),r=ni(),i=e+22,o=r.firstCreatePass?mp(r,i,1,t,null):r.data[i],s=n[i]=function Xn(e,t){return oi(e)?e.createText(t):e.createTextNode(t)}(n[11],t);sl(r,n,s,o),$s(o,!1)}const Dp="en-US";let QS=Dp;class I3{resolveComponentFactory(t){throw function C3(e){const t=Error(`No component factory found for ${Hr(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let og=(()=>{class e{}return e.NULL=new I3,e})();class Yd{}class IC{}class TC{}function P3(){return Rp(Ao(),kt())}function Rp(e,t){return new Xd(eo(e,t))}let Xd=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=P3,e})();class PC{}let M3=(()=>{class e{}return e.\u0275prov=Qn({token:e,providedIn:"root",factory:()=>null}),e})();class fv{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const O3=new fv("14.0.4"),ew={};function hv(e,t,n,r,i=!1){for(;null!==n;){const o=t[n.index];if(null!==o&&r.push(_i(o)),rs(o))for(let u=10;u<o.length;u++){const g=o[u],d=g[1].firstChild;null!==d&&hv(g[1],g,d,r)}const s=n.type;if(8&s)hv(e,t,n.child,r);else if(32&s){const u=Pt(n,t);let g;for(;g=u();)r.push(g)}else if(16&s){const u=Fc(t,n);if(Array.isArray(u))r.push(...u);else{const g=fn(t[16]);hv(g[1],g,u,r,!0)}}n=i?n.projectionNext:n.next}return r}class ag{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return hv(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(rs(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(va(t,r),Ed(n,r))}this._attachedToViewContainer=!1}Yo(this._lView[1],this._lView)}onDestroy(t){!function yE(e,t,n,r){const i=function IE(e){return e[7]||(e[7]=[])}(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&function TE(e){return e.cleanup||(e.cleanup=[])}(e).push(r,i.length-1))}(this._lView[1],this._lView,null,t)}markForCheck(){!function Ob(e){for(;e;){e[2]|=32;const t=fn(e);if(Ts(e)&&!t)return e;e=t}return null}(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Nb(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Nn(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function no(e,t){uu(e,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Nn(902,!1);this._appRef=t}}class L3 extends ag{constructor(t){super(t),this._view=t}detectChanges(){CE(this._view)}checkNoChanges(){}get context(){return null}}class tw extends og{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Qr(t);return new nw(n,this.ngModule)}}function DC(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class k3{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){const i=this.injector.get(t,ew,r);return i!==ew||n===ew?i:this.parentInjector.get(t,n,r)}}class nw extends TC{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function Uf(e){return e.map(jd).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return DC(this.componentDef.inputs)}get outputs(){return DC(this.componentDef.outputs)}create(t,n,r,i){let o=(i=i||this.ngModule)instanceof xs?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new k3(t,o):t,u=s.get(PC,nl),g=s.get(M3,null),d=u.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",x=r?function gE(e,t,n){if(oi(e))return e.selectRootElement(t,n===Ii.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(d,r,this.componentDef.encapsulation):Ur(u.createRenderer(null,this.componentDef),_,function N3(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(_)),b=this.componentDef.onPush?288:272,I=function UE(e,t){return{components:[],scheduler:e||Q,clean:lR,playerHandler:t||null,flags:0}}(),k=Yy(0,null,null,1,0,null,null,null,null,null),M=Jm(null,k,I,b,null,null,u,d,g,s,null);let Se,ke;Ye(M);try{const lt=function BE(e,t,n,r,i,o){const s=n[1];n[22]=e;const g=mp(s,22,2,"#host",null),d=g.mergedAttrs=t.hostAttrs;null!==d&&(Qy(g,d,!0),null!==e&&(Qu(i,e,d),null!==g.classes&&ql(i,e,g.classes),null!==g.styles&&Lf(i,e,g.styles)));const _=r.createRenderer(e,t),x=Jm(n,pE(t),null,t.onPush?32:16,n[22],g,r,_,o||null,null,null);return s.firstCreatePass&&(au(Cc(g,n),s,t.type),wE(s,g),xE(g,n.length,1)),Xy(n,x),n[22]=x}(x,this.componentDef,M,u,d);if(x)if(r)Qu(d,x,["ng-version",O3.full]);else{const{attrs:et,classes:Mt}=function jc(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!Ls(i))break;i=o}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);et&&Qu(d,x,et),Mt&&Mt.length>0&&ql(d,x,Mt.join(" "))}if(ke=function rl(e,t){return e.data[t]}(k,22),void 0!==n){const et=ke.projection=[];for(let Mt=0;Mt<this.ngContentSelectors.length;Mt++){const Ht=n[Mt];et.push(null!=Ht?Array.from(Ht):null)}}Se=function jE(e,t,n,r,i){const o=n[1],s=function qA(e,t,n){const r=Ao();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),EE(e,r,t,gp(e,t,1,null),n));const i=bf(t,e,r.directiveStart,r);ci(i,t);const o=eo(r,t);return o&&ci(o,t),i}(o,n,t);if(r.components.push(s),e[8]=s,null!==i)for(const g of i)g(s,t);if(t.contentQueries){const g=Ao();t.contentQueries(1,s,g.directiveStart)}const u=Ao();return!o.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(wn(u.index),_E(n[1],u,0,u.directiveStart,u.directiveEnd,t),bE(t,s)),s}(lt,this.componentDef,M,I,[_R]),Km(k,M,null)}finally{Tt()}return new z3(this.componentType,Se,Rp(ke,M),M,ke)}}class z3 extends class T3{}{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new L3(i),this.componentType=t}get injector(){return new ac(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class AC extends Yd{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new tw(this);const r=Ho(t);this._bootstrapComponents=Ie(r.bootstrap),this._r3Injector=cp(t,n,[{provide:Yd,useValue:this},{provide:og,useValue:this.componentFactoryResolver}],Hr(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(t)}get(t,n=Xo.THROW_IF_NOT_FOUND,r=dn.Default){return t===Xo||t===Yd||t===ip?this:this._r3Injector.get(t,n,r)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class rw extends IC{constructor(t){super(),this.moduleType=t}create(t){return new AC(this.moduleType,t)}}class j3 extends Yd{constructor(t,n,r){super(),this.componentFactoryResolver=new tw(this),this.instance=null;const i=new By([...t,{provide:Yd,useValue:this},{provide:og,useValue:this.componentFactoryResolver}],n||ap(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function pv(e,t=null,n=null){return new j3(e,t,n).injector}function iw(e){return t=>{setTimeout(e,void 0,t)}}const ul=class sO extends xt{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&"object"==typeof t){const g=t;i=g.next?.bind(g),o=g.error?.bind(g),s=g.complete?.bind(g)}this.__isAsync&&(o=iw(o),i&&(i=iw(i)),s&&(s=iw(s)));const u=super.subscribe({next:i,error:o,complete:s});return t instanceof G&&t.add(u),u}};let ju=(()=>{class e{}return e.__NG_ELEMENT_ID__=fO,e})();function fO(){return function zC(e,t){let n;const r=t[e.index];if(rs(r))n=r;else{let i;if(8&e.type)i=_i(r);else{const o=t[11];i=o.createComment("");const s=eo(e,t);Vr(o,ro(o,s),i,function Ra(e,t){return oi(e)?e.nextSibling(t):t.nextSibling}(o,s),!1)}t[e.index]=n=function SE(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}(r,t,i,e),Xy(t,n)}return new kC(n,e,t)}(Ao(),kt())}const hO=ju,kC=class extends hO{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Rp(this._hostTNode,this._hostLView)}get injector(){return new ac(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ic(this._hostTNode,this._hostLView);if(Pu(t)){const n=Xi(t,this._hostLView),r=as(t);return new ac(n[1].data[r+8],n)}return new ac(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=FC(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=t.createEmbeddedView(n||{},o);return this.insert(s,i),s}createComponent(t,n,r,i,o){const s=t&&!function Ef(e){return"function"==typeof e}(t);let u;if(s)u=n;else{const x=n||{};u=x.index,r=x.injector,i=x.projectableNodes,o=x.environmentInjector||x.ngModuleRef}const g=s?t:new nw(Qr(t)),d=r||this.parentInjector;if(!o&&null==g.ngModule){const b=(s?d:this.parentInjector).get(xs,null);b&&(o=b)}const _=g.create(d,i,void 0,o);return this.insert(_.hostView,u),_}insert(t,n){const r=t._lView,i=r[1];if(function Ni(e){return rs(e[3])}(r)){const _=this.indexOf(t);if(-1!==_)this.detach(_);else{const x=r[3],b=new kC(x,x[6],x[3]);b.detach(b.indexOf(t))}}const o=this._adjustIndex(n),s=this._lContainer;!function ho(e,t,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=t),r<o-10?(t[4]=n[i],Ih(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;const s=t[17];null!==s&&n!==s&&function Ko(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(s,t);const u=t[19];null!==u&&u.insertView(e),t[2]|=64}(i,r,s,o);const u=Ou(o,s),g=r[11],d=ro(g,s[7]);return null!==d&&function fo(e,t,n,r,i,o){r[0]=i,r[6]=t,uu(e,r,n,1,i,o)}(i,s[6],g,r,d,u),t.attachToViewContainerRef(),Ih(aw(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=FC(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=va(this._lContainer,n);r&&(Ed(aw(this._lContainer),n),Yo(r[1],r))}detach(t){const n=this._adjustIndex(t,-1),r=va(this._lContainer,n);return r&&null!=Ed(aw(this._lContainer),n)?new ag(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function FC(e){return e[8]}function aw(e){return e[8]||(e[8]=[])}function yv(...e){}const vv=new Cr("Application Initializer");let _v=(()=>{class e{constructor(n){this.appInits=n,this.resolve=yv,this.reject=yv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(iv(o))n.push(o);else if(nS(o)){const s=new Promise((u,g)=>{o.subscribe({complete:u,error:g})});n.push(s)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(Yn(vv,8))},e.\u0275prov=Qn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const cg=new Cr("AppId",{providedIn:"root",factory:function lI(){return`${_w()}${_w()}${_w()}`}});function _w(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const uI=new Cr("Platform Initializer"),cI=new Cr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),dI=new Cr("appBootstrapListener");let GO=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Qn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const qc=new Cr("LocaleId",{providedIn:"root",factory:()=>lc(qc,dn.Optional|dn.SkipSelf)||function HO(){return typeof $localize<"u"&&$localize.locale||Dp}()});class qO{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let bw=(()=>{class e{compileModuleSync(n){return new rw(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=Ie(Ho(n).declarations).reduce((s,u)=>{const g=Qr(u);return g&&s.push(new nw(g)),s},[]);return new qO(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Qn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ZO=(()=>Promise.resolve(0))();function ww(e){typeof Zone>"u"?ZO.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Ja{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ul(!1),this.onMicrotaskEmpty=new ul(!1),this.onStable=new ul(!1),this.onError=new ul(!1),typeof Zone>"u")throw new Nn(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function JO(){let e=_r.requestAnimationFrame,t=_r.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function XO(e){const t=()=>{!function YO(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(_r,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Ew(e),e.isCheckStableRunning=!0,xw(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Ew(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,u)=>{try{return fI(e),n.invokeTask(i,o,s,u)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),hI(e)}},onInvoke:(n,r,i,o,s,u,g)=>{try{return fI(e),n.invoke(i,o,s,u,g)}finally{e.shouldCoalesceRunChangeDetection&&t(),hI(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,Ew(e),xw(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ja.isInAngularZone())throw new Nn(909,!1)}static assertNotInAngularZone(){if(Ja.isInAngularZone())throw new Nn(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,KO,yv,yv);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const KO={};function xw(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Ew(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function fI(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function hI(e){e._nesting--,xw(e)}class QO{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ul,this.onMicrotaskEmpty=new ul,this.onStable=new ul,this.onError=new ul}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const pI=new Cr(""),bv=new Cr("");let Iw,Sw=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Iw||(function eL(e){Iw=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ja.assertNotInAngularZone(),ww(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ww(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return e.\u0275fac=function(n){return new(n||e)(Yn(Ja),Yn(Cw),Yn(bv))},e.\u0275prov=Qn({token:e,factory:e.\u0275fac}),e})(),Cw=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Iw?.findTestabilityInTree(this,n,r)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Qn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),Qd=null;const mI=new Cr("AllowMultipleToken"),Tw=new Cr("PlatformDestroyListeners");class gI{constructor(t,n){this.name=t,this.token=n}}function vI(e,t,n=[]){const r=`Platform: ${t}`,i=new Cr(r);return(o=[])=>{let s=Pw();if(!s||s.injector.get(mI,!1)){const u=[...n,...o,{provide:i,useValue:!0}];e?e(u):function rL(e){if(Qd&&!Qd.get(mI,!1))throw new Nn(400,!1);Qd=e;const t=e.get(bI);(function yI(e){const t=e.get(uI,null);t&&t.forEach(n=>n())})(e)}(function _I(e=[],t){return Xo.create({name:t,providers:[{provide:op,useValue:"platform"},{provide:Tw,useValue:new Set([()=>Qd=null])},...e]})}(u,r))}return function oL(e){const t=Pw();if(!t)throw new Nn(401,!1);return t}()}}function Pw(){return Qd?.get(bI)??null}let bI=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function aL(e,t){let n;return n="noop"===e?new QO:("zone.js"===e?void 0:e)||new Ja(t),n}(r?.ngZone,function wI(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:Ja,useValue:i}];return i.run(()=>{const s=Xo.create({providers:o,parent:this.injector,name:n.moduleType.name}),u=n.create(s),g=u.injector.get(Lc,null);if(!g)throw new Nn(402,!1);return i.runOutsideAngular(()=>{const d=i.onError.subscribe({next:_=>{g.handleError(_)}});u.onDestroy(()=>{xv(this._modules,u),d.unsubscribe()})}),function xI(e,t,n){try{const r=n();return iv(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(g,i,()=>{const d=u.injector.get(_v);return d.runInitializers(),d.donePromise.then(()=>(function eC(e){dr(e,"Expected localeId to be defined"),"string"==typeof e&&(QS=e.toLowerCase().replace(/_/g,"-"))}(u.injector.get(qc,Dp)||Dp),this._moduleDoBootstrap(u),u))})})}bootstrapModule(n,r=[]){const i=EI({},r);return function tL(e,t,n){const r=new rw(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(wv);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new Nn(403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Nn(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Tw,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(Yn(Xo))},e.\u0275prov=Qn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function EI(e,t){return Array.isArray(t)?t.reduce(EI,e):{...e,...t}}let wv=(()=>{class e{constructor(n,r,i){this._zone=n,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new ut(u=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{u.next(this._stable),u.complete()})}),s=new ut(u=>{let g;this._zone.runOutsideAngular(()=>{g=this._zone.onStable.subscribe(()=>{Ja.assertNotInAngularZone(),ww(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,u.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{Ja.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{u.next(!1)}))});return()=>{g.unsubscribe(),d.unsubscribe()}});this.isStable=function Jn(...e){const t=Vn(e),n=function sn(e,t){return"number"==typeof Dt(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?ve(r[0]):Zt(n)(Bi(r,t)):Jt}(o,s.pipe(function Ea(e={}){const{connector:t=(()=>new xt),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let s=null,u=null,g=null,d=0,_=!1,x=!1;const b=()=>{u?.unsubscribe(),u=null},I=()=>{b(),s=g=null,_=x=!1},k=()=>{const M=s;I(),M?.unsubscribe()};return Sn((M,Se)=>{d++,!x&&!_&&b();const ke=g=g??t();Se.add(()=>{d--,0===d&&!x&&!_&&(u=Hi(k,i))}),ke.subscribe(Se),s||(s=new Ue({next:lt=>ke.next(lt),error:lt=>{x=!0,b(),u=Hi(I,n,lt),ke.error(lt)},complete:()=>{_=!0,b(),u=Hi(I,r),ke.complete()}}),Bi(M).subscribe(s))})(o)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof TC;if(!this._injector.get(_v).done)throw!i&&function Op(e){const t=Qr(e)||Po(e)||Vi(e);return null!==t&&t.standalone}(n),new Nn(405,false);let s;s=i?n:this._injector.get(og).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const u=function nL(e){return e.isBoundToModule}(s)?void 0:this._injector.get(Yd),d=s.create(Xo.NULL,[],r||s.selector,u),_=d.location.nativeElement,x=d.injector.get(pI,null);return x?.registerApplication(_),d.onDestroy(()=>{this.detachView(d.hostView),xv(this.components,d),x?.unregisterApplication(_)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new Nn(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;xv(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(dI,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>xv(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Nn(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)(Yn(Ja),Yn(Xo),Yn(Lc))},e.\u0275prov=Qn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function xv(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let CI=!0,Dw=(()=>{class e{}return e.__NG_ELEMENT_ID__=uL,e})();function uL(e){return function cL(e,t,n){if(mi(e)&&!n){const r=lo(e.index,t);return new ag(r,r)}return 47&e.type?new ag(t[16],t):null}(Ao(),kt(),16==(16&e))}const EL=vI(null,"core",[]);let SL=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(Yn(wv))},e.\u0275mod=Sa({type:e}),e.\u0275inj=Ti({}),e})(),Iv=null;function ef(){return Iv}const Il=new Cr("DocumentToken");let Tv=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Qn({token:e,factory:function(){return function PL(){return Yn(kI)}()},providedIn:"platform"}),e})();const DL=new Cr("Location Initialized");let kI=(()=>{class e extends Tv{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ef().getBaseHref(this._doc)}onPopState(n){const r=ef().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=ef().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,r,i){FI()?this._history.pushState(n,r,i):this.location.hash=i}replaceState(n,r,i){FI()?this._history.replaceState(n,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return e.\u0275fac=function(n){return new(n||e)(Yn(Il))},e.\u0275prov=Qn({token:e,factory:function(){return function AL(){return new kI(Yn(Il))}()},providedIn:"platform"}),e})();function FI(){return!!window.history.pushState}function Lw(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function zI(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Zc(e){return e&&"?"!==e[0]?"?"+e:e}let Kf=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Qn({token:e,factory:function(){return function RL(){const e=Yn(Il).location;return new jI(Yn(Tv),e&&e.origin||"")}()},providedIn:"root"}),e})();const BI=new Cr("appBaseHref");let jI=(()=>{class e extends Kf{constructor(n,r){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Lw(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Zc(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+Zc(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+Zc(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(Yn(Tv),Yn(BI,8))},e.\u0275prov=Qn({token:e,factory:e.\u0275fac}),e})(),ML=(()=>{class e extends Kf{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Lw(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Zc(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Zc(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(Yn(Tv),Yn(BI,8))},e.\u0275prov=Qn({token:e,factory:e.\u0275fac}),e})(),Nw=(()=>{class e{constructor(n){this._subject=new ul,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._baseHref=zI(UI(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Zc(r))}normalize(n){return e.stripTrailingSlash(function LL(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,UI(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Zc(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Zc(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return e.normalizeQueryParams=Zc,e.joinWithSlash=Lw,e.stripTrailingSlash=zI,e.\u0275fac=function(n){return new(n||e)(Yn(Kf))},e.\u0275prov=Qn({token:e,factory:function(){return function OL(){return new Nw(Yn(Kf))}()},providedIn:"root"}),e})();function UI(e){return e.replace(/\/index.html$/,"")}let YN=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Sa({type:e}),e.\u0275inj=Ti({}),e})();let tk=(()=>{class e{}return e.\u0275prov=Qn({token:e,providedIn:"root",factory:()=>new nk(Yn(Il),window)}),e})();class nk{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function rk(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=rT(this.window.history)||rT(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function rT(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class Jw extends class ok extends class TL{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function IL(e){Iv||(Iv=e)}(new Jw)}onAndCancel(t,n,r){return t.addEventListener(n,r,!1),()=>{t.removeEventListener(n,r,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function ak(){return pg=pg||document.querySelector("base"),pg?pg.getAttribute("href"):null}();return null==n?null:function sk(e){Fv=Fv||document.createElement("a"),Fv.setAttribute("href",e);const t=Fv.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){pg=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function yN(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}(document.cookie,t)}}let Fv,pg=null;const iT=new Cr("TRANSITION_ID"),uk=[{provide:vv,useFactory:function lk(e,t,n){return()=>{n.get(_v).donePromise.then(()=>{const r=ef(),i=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[iT,Il,Xo],multi:!0}];let dk=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Qn({token:e,factory:e.\u0275fac}),e})();const zv=new Cr("EventManagerPlugins");let Bv=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(n))return this._eventNameToPlugin.set(n,s),s}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(Yn(zv),Yn(Ja))},e.\u0275prov=Qn({token:e,factory:e.\u0275fac}),e})();class oT{constructor(t){this._doc=t}addGlobalEventListener(t,n,r){const i=ef().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let aT=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Qn({token:e,factory:e.\u0275fac}),e})(),mg=(()=>{class e extends aT{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,i.push(r.appendChild(s))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(sT),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(sT))}}return e.\u0275fac=function(n){return new(n||e)(Yn(Il))},e.\u0275prov=Qn({token:e,factory:e.\u0275fac}),e})();function sT(e){ef().remove(e)}const Kw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Yw=/%COMP%/g;function jv(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?jv(e,i,n):(i=i.replace(Yw,e),n.push(i))}return n}function cT(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Xw=(()=>{class e{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Qw(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case Ii.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new yk(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case Ii.ShadowDom:return new vk(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=jv(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(Yn(Bv),Yn(mg),Yn(cg))},e.\u0275prov=Qn({token:e,factory:e.\u0275fac}),e})();class Qw{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(Kw[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){(fT(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(fT(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const o=Kw[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=Kw[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(dt.DashCase|dt.Important)?t.style.setProperty(n,r,i&dt.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&dt.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,cT(r)):this.eventManager.addEventListener(t,n,cT(r))}}function fT(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class yk extends Qw{constructor(t,n,r,i){super(t),this.component=r;const o=jv(i+"-"+r.id,r.styles,[]);n.addStyles(o),this.contentAttr=function pk(e){return"_ngcontent-%COMP%".replace(Yw,e)}(i+"-"+r.id),this.hostAttr=function mk(e){return"_nghost-%COMP%".replace(Yw,e)}(i+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}class vk extends Qw{constructor(t,n,r,i){super(t),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=jv(i.id,i.styles,[]);for(let s=0;s<o.length;s++){const u=document.createElement("style");u.textContent=o[s],this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let _k=(()=>{class e extends oT{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return e.\u0275fac=function(n){return new(n||e)(Yn(Il))},e.\u0275prov=Qn({token:e,factory:e.\u0275fac}),e})();const hT=["alt","control","meta","shift"],wk={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pT={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},xk={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let Ek=(()=>{class e extends oT{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ef().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let s="";if(hT.forEach(g=>{const d=r.indexOf(g);d>-1&&(r.splice(d,1),s+=g+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static getEventFullKey(n){let r="",i=function Sk(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&pT.hasOwnProperty(t)&&(t=pT[t]))}return wk[t]||t}(n);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),hT.forEach(o=>{o!=i&&xk[o](n)&&(r+=o+".")}),r+=i,r}static eventCallback(n,r,i){return o=>{e.getEventFullKey(o)===n&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(Yn(Il))},e.\u0275prov=Qn({token:e,factory:e.\u0275fac}),e})();const mT=[{provide:cI,useValue:"browser"},{provide:uI,useValue:function Ck(){Jw.makeCurrent()},multi:!0},{provide:Il,useFactory:function Tk(){return function Ki(e){pd=e}(document),document},deps:[]}],Pk=vI(EL,"browser",mT),gT=new Cr(""),yT=[{provide:bv,useClass:class ck{addToWindow(t){_r.getAngularTestability=(r,i=!0)=>{const o=t.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},_r.getAllAngularTestabilities=()=>t.getAllTestabilities(),_r.getAllAngularRootElements=()=>t.getAllRootElements(),_r.frameworkStabilizers||(_r.frameworkStabilizers=[]),_r.frameworkStabilizers.push(r=>{const i=_r.getAllAngularTestabilities();let o=i.length,s=!1;const u=function(g){s=s||g,o--,0==o&&r(s)};i.forEach(function(g){g.whenStable(u)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?ef().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:pI,useClass:Sw,deps:[Ja,Cw,bv]},{provide:Sw,useClass:Sw,deps:[Ja,Cw,bv]}],vT=[{provide:op,useValue:"root"},{provide:Lc,useFactory:function Ik(){return new Lc},deps:[]},{provide:zv,useClass:_k,multi:!0,deps:[Il,Ja,cI]},{provide:zv,useClass:Ek,multi:!0,deps:[Il]},{provide:Xw,useClass:Xw,deps:[Bv,mg,cg]},{provide:PC,useExisting:Xw},{provide:aT,useExisting:mg},{provide:mg,useClass:mg,deps:[Il]},{provide:Bv,useClass:Bv,deps:[zv,Ja]},{provide:class ik{},useClass:dk,deps:[]},[]];let Dk=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:cg,useValue:n.appId},{provide:iT,useExisting:cg},uk]}}}return e.\u0275fac=function(n){return new(n||e)(Yn(gT,12))},e.\u0275mod=Sa({type:e}),e.\u0275inj=Ti({providers:[...vT,...yT],imports:[YN,SL]}),e})(),_T=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return e.\u0275fac=function(n){return new(n||e)(Yn(Il))},e.\u0275prov=Qn({token:e,factory:function(n){let r=null;return r=n?new n:function Rk(){return new _T(Yn(Il))}(),r},providedIn:"root"}),e})();function Zr(...e){return Bi(e,Vn(e))}typeof window<"u"&&window;class Gu extends xt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}const{isArray:jk}=Array,{getPrototypeOf:Uk,prototype:Vk,keys:Gk}=Object;const{isArray:qk}=Array;function xT(...e){const t=Vn(e),n=function Hn(e){return V(Dt(e))?e.pop():void 0}(e),{args:r,keys:i}=function Hk(e){if(1===e.length){const t=e[0];if(jk(t))return{args:t,keys:null};if(function $k(e){return e&&"object"==typeof e&&Uk(e)===Vk}(t)){const n=Gk(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}(e);if(0===r.length)return Bi([],t);const o=new ut(function Kk(e,t,n=W){return r=>{ET(t,()=>{const{length:i}=e,o=new Array(i);let s=i,u=i;for(let g=0;g<i;g++)ET(t,()=>{const d=Bi(e[g],t);let _=!1;d.subscribe(It(r,x=>{o[g]=x,_||(_=!0,u--),u||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,t,i?s=>function Jk(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}(i,s):W));return n?o.pipe(function Zk(e){return En(t=>function Wk(e,t){return qk(t)?e(...t):e(t)}(e,t))}(n)):o}function ET(e,t,n){e?Ft(n,e,t):t()}function gg(e,t){const n=V(e)?e:()=>e,r=i=>i.error(n());return new ut(t?i=>t.schedule(r,0,i):r)}const yg=X(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function n1(...e){return function Yk(){return Zt(1)}()(Bi(e,Vn(e)))}function ST(e){return new ut(t=>{ve(e()).subscribe(t)})}function r1(){return Sn((e,t)=>{let n=null;e._refCount++;const r=It(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}class CT extends ut{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,zt(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new G;const n=this.getSubject();t.add(this.source.subscribe(It(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=G.EMPTY)}return t}refCount(){return r1()(this)}}function Yf(e,t){return Sn((n,r)=>{let i=null,o=0,s=!1;const u=()=>s&&!i&&r.complete();n.subscribe(It(r,g=>{i?.unsubscribe();let d=0;const _=o++;ve(e(g,_)).subscribe(i=It(r,x=>r.next(t?t(g,x,_,d++):x),()=>{i=null,u()}))},()=>{s=!0,u()}))})}function Qk(e,t,n,r,i){return(o,s)=>{let u=n,g=t,d=0;o.subscribe(It(s,_=>{const x=d++;g=u?e(g,_,x):(u=!0,_),r&&s.next(g)},i&&(()=>{u&&s.next(g),s.complete()})))}}function IT(e,t){return Sn(Qk(e,t,arguments.length>=2,!0))}function kp(e,t){return Sn((n,r)=>{let i=0;n.subscribe(It(r,o=>e.call(t,o,i++)&&r.next(o)))})}function Xf(e){return Sn((t,n)=>{let o,r=null,i=!1;r=t.subscribe(It(n,void 0,void 0,s=>{o=ve(e(s,Xf(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function vg(e,t){return V(t)?Et(e,t,1):Et(e,1)}function i1(e){return e<=0?()=>Jt:Sn((t,n)=>{let r=[];t.subscribe(It(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function TT(e=eF){return Sn((t,n)=>{let r=!1;t.subscribe(It(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function eF(){return new yg}function o1(e){return Sn((t,n)=>{let r=!1;t.subscribe(It(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function Qf(e,t){const n=arguments.length>=2;return r=>r.pipe(e?kp((i,o)=>e(i,o,r)):W,Eo(1),n?o1(t):TT(()=>new yg))}function Ks(e,t,n){const r=V(e)||t||n?{next:e,error:t,complete:n}:e;return r?Sn((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let u=!0;i.subscribe(It(o,g=>{var d;null===(d=r.next)||void 0===d||d.call(r,g),o.next(g)},()=>{var g;u=!1,null===(g=r.complete)||void 0===g||g.call(r),o.complete()},g=>{var d;u=!1,null===(d=r.error)||void 0===d||d.call(r,g),o.error(g)},()=>{var g,d;u&&(null===(g=r.unsubscribe)||void 0===g||g.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):W}function a1(e){return Sn((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}class Kc{constructor(t,n){this.id=t,this.url=n}}class s1 extends Kc{constructor(t,n,r="imperative",i=null){super(t,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _g extends Kc{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class PT extends Kc{constructor(t,n,r){super(t,n),this.reason=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class rF extends Kc{constructor(t,n,r){super(t,n),this.error=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class iF extends Kc{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oF extends Kc{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aF extends Kc{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class sF extends Kc{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lF extends Kc{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uF{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cF{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class dF{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fF{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hF{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pF{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class DT{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ai="primary";class gF{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Fp(e){return new gF(e)}const AT="ngNavigationCancelingError";function l1(e){const t=Error("NavigationCancelingError: "+e);return t[AT]=!0,t}function vF(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],u=e[o];if(s.startsWith(":"))i[s.substring(1)]=u;else if(s!==u.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function pc(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!RT(e[i],t[i]))return!1;return!0}function RT(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}return e===t}function MT(e){return Array.prototype.concat.apply([],e)}function OT(e){return e.length>0?e[e.length-1]:null}function Ns(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Hu(e){return nS(e)?e:iv(e)?Bi(Promise.resolve(e)):Zr(e)}const wF={exact:function kT(e,t,n){if(!th(e.segments,t.segments)||!Uv(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!e.children[r]||!kT(e.children[r],t.children[r],n))return!1;return!0},subset:FT},LT={exact:function xF(e,t){return pc(e,t)},subset:function EF(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>RT(e[n],t[n]))},ignored:()=>!0};function NT(e,t,n){return wF[n.paths](e.root,t.root,n.matrixParams)&&LT[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function FT(e,t,n){return zT(e,t,t.segments,n)}function zT(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!(!th(i,n)||t.hasChildren()||!Uv(i,n,r))}if(e.segments.length===n.length){if(!th(e.segments,n)||!Uv(e.segments,n,r))return!1;for(const i in t.children)if(!e.children[i]||!FT(e.children[i],t.children[i],r))return!1;return!0}{const i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!!(th(e.segments,i)&&Uv(e.segments,i,r)&&e.children[ai])&&zT(e.children[ai],t,o,r)}}function Uv(e,t,n){return t.every((r,i)=>LT[n](e[i].parameters,r.parameters))}class eh{constructor(t,n,r){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fp(this.queryParams)),this._queryParamMap}toString(){return IF.serialize(this)}}class Ei{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Ns(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vv(this)}}class bg{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Fp(this.parameters)),this._parameterMap}toString(){return GT(this)}}function th(e,t){return e.length===t.length&&e.every((n,r)=>n.path===t[r].path)}class BT{}class jT{parse(t){const n=new NF(t);return new eh(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${wg(t.root,!0)}`,r=function DF(e){const t=Object.keys(e).map(n=>{const r=e[n];return Array.isArray(r)?r.map(i=>`${Gv(n)}=${Gv(i)}`).join("&"):`${Gv(n)}=${Gv(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${r}${"string"==typeof t.fragment?`#${function TF(e){return encodeURI(e)}(t.fragment)}`:""}`}}const IF=new jT;function Vv(e){return e.segments.map(t=>GT(t)).join("/")}function wg(e,t){if(!e.hasChildren())return Vv(e);if(t){const n=e.children[ai]?wg(e.children[ai],!1):"",r=[];return Ns(e.children,(i,o)=>{o!==ai&&r.push(`${o}:${wg(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function CF(e,t){let n=[];return Ns(e.children,(r,i)=>{i===ai&&(n=n.concat(t(r,i)))}),Ns(e.children,(r,i)=>{i!==ai&&(n=n.concat(t(r,i)))}),n}(e,(r,i)=>i===ai?[wg(e.children[ai],!1)]:[`${i}:${wg(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[ai]?`${Vv(e)}/${n[0]}`:`${Vv(e)}/(${n.join("//")})`}}function UT(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Gv(e){return UT(e).replace(/%3B/gi,";")}function u1(e){return UT(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hv(e){return decodeURIComponent(e)}function VT(e){return Hv(e.replace(/\+/g,"%20"))}function GT(e){return`${u1(e.path)}${function PF(e){return Object.keys(e).map(t=>`;${u1(t)}=${u1(e[t])}`).join("")}(e.parameters)}`}const AF=/^[^\/()?;=#]+/;function $v(e){const t=e.match(AF);return t?t[0]:""}const RF=/^[^=?&#]+/,OF=/^[^&#]+/;class NF{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ei([],{}):new Ei([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[ai]=new Ei(t,n)),r}parseSegment(){const t=$v(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new bg(Hv(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=$v(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=$v(this.remaining);i&&(r=i,this.capture(r))}t[Hv(n)]=Hv(r)}parseQueryParam(t){const n=function MF(e){const t=e.match(RF);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function LF(e){const t=e.match(OF);return t?t[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=VT(n),o=VT(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=$v(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=ai);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[ai]:new Ei([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class HT{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=c1(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){const n=c1(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=d1(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return d1(t,this._root).map(n=>n.value)}}function c1(e,t){if(e===t.value)return t;for(const n of t.children){const r=c1(e,n);if(r)return r}return null}function d1(e,t){if(e===t.value)return[t];for(const n of t.children){const r=d1(e,n);if(r.length)return r.unshift(t),r}return[]}class Yc{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function zp(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class $T extends HT{constructor(t,n){super(t),this.snapshot=n,f1(this,t)}toString(){return this.snapshot.toString()}}function qT(e,t){const n=function kF(e,t){const s=new qv([],{},{},"",{},ai,t,null,e.root,-1,{});return new ZT("",new Yc(s,[]))}(e,t),r=new Gu([new bg("",{})]),i=new Gu({}),o=new Gu({}),s=new Gu({}),u=new Gu(""),g=new Bp(r,i,s,u,o,ai,t,n.root);return g.snapshot=n.root,new $T(new Yc(g,[]),n)}class Bp{constructor(t,n,r,i,o,s,u,g){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=u,this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(En(t=>Fp(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(En(t=>Fp(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function WT(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function FF(e){return e.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class qv{constructor(t,n,r,i,o,s,u,g,d,_,x,b){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=u,this.routeConfig=g,this._urlSegment=d,this._lastPathIndex=_,this._correctedLastPathIndex=b??_,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fp(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fp(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ZT extends HT{constructor(t,n){super(n),this.url=t,f1(this,n)}toString(){return JT(this._root)}}function f1(e,t){t.value._routerState=e,t.children.forEach(n=>f1(e,n))}function JT(e){const t=e.children.length>0?` { ${e.children.map(JT).join(", ")} } `:"";return`${e.value}${t}`}function h1(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,pc(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),pc(t.params,n.params)||e.params.next(n.params),function _F(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!pc(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),pc(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function p1(e,t){const n=pc(e.params,t.params)&&function SF(e,t){return th(e,t)&&e.every((n,r)=>pc(n.parameters,t[r].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||p1(e.parent,t.parent))}function xg(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function BF(e,t,n){return t.children.map(r=>{for(const i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return xg(e,r,i);return xg(e,r)})}(e,t,n);return new Yc(r,i)}{if(e.shouldAttach(t.value)){const o=e.retrieve(t.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(u=>xg(e,u)),s}}const r=function jF(e){return new Bp(new Gu(e.url),new Gu(e.params),new Gu(e.queryParams),new Gu(e.fragment),new Gu(e.data),e.outlet,e.component,e)}(t.value),i=t.children.map(o=>xg(e,o));return new Yc(r,i)}}function Wv(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Eg(e){return"object"==typeof e&&null!=e&&e.outlets}function m1(e,t,n,r,i){let o={};if(r&&Ns(r,(u,g)=>{o[g]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`}),e===t)return new eh(n,o,i);const s=KT(e,t,n);return new eh(s,o,i)}function KT(e,t,n){const r={};return Ns(e.children,(i,o)=>{r[o]=i===t?n:KT(i,t,n)}),new Ei(e.segments,r)}class YT{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Wv(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Eg);if(i&&i!==OT(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class g1{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}}function XT(e,t,n){if(e||(e=new Ei([],{})),0===e.segments.length&&e.hasChildren())return Zv(e,t,n);const r=function qF(e,t,n){let r=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;const s=e.segments[i],u=n[r];if(Eg(u))break;const g=`${u}`,d=r<n.length-1?n[r+1]:null;if(i>0&&void 0===g)break;if(g&&d&&"object"==typeof d&&void 0===d.outlets){if(!eP(g,d,s))return o;r+=2}else{if(!eP(g,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const o=new Ei(e.segments.slice(0,r.pathIndex),{});return o.children[ai]=new Ei(e.segments.slice(r.pathIndex),e.children),Zv(o,0,i)}return r.match&&0===i.length?new Ei(e.segments,{}):r.match&&!e.hasChildren()?y1(e,t,n):r.match?Zv(e,0,i):y1(e,t,n)}function Zv(e,t,n){if(0===n.length)return new Ei(e.segments,{});{const r=function $F(e){return Eg(e[0])?e[0].outlets:{[ai]:e}}(n),i={};return Ns(r,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=XT(e.children[s],t,o))}),Ns(e.children,(o,s)=>{void 0===r[s]&&(i[s]=o)}),new Ei(e.segments,i)}}function y1(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const o=n[i];if(Eg(o)){const g=WF(o.outlets);return new Ei(r,g)}if(0===i&&Wv(n[0])){r.push(new bg(e.segments[t].path,QT(n[0]))),i++;continue}const s=Eg(o)?o.outlets[ai]:`${o}`,u=i<n.length-1?n[i+1]:null;s&&u&&Wv(u)?(r.push(new bg(s,QT(u))),i+=2):(r.push(new bg(s,{})),i++)}return new Ei(r,{})}function WF(e){const t={};return Ns(e,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[r]=y1(new Ei([],{}),0,n))}),t}function QT(e){const t={};return Ns(e,(n,r)=>t[r]=`${n}`),t}function eP(e,t,n){return e==n.path&&pc(t,n.parameters)}class ZF{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Sg,this.attachRef=null}}class Sg{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const r=this.getOrCreateContext(t);r.outlet=n,this.contexts.set(t,r)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new ZF,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}let tP=(()=>{class e{constructor(n,r,i,o,s){this.parentContexts=n,this.location=r,this.changeDetector=o,this.environmentInjector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new ul,this.deactivateEvents=new ul,this.attachEvents=new ul,this.detachEvents=new ul,this.name=i||ai,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const i=this.location,s=n._futureSnapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,g=new JF(n,u,i.injector);if(r&&function KF(e){return!!e.resolveComponentFactory}(r)){const d=r.resolveComponentFactory(s);this.activated=i.createComponent(d,i.length,g)}else this.activated=i.createComponent(s,{index:i.length,injector:g,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(n){return new(n||e)(rr(Sg),rr(ju),function wf(e){return function Tc(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(Ul(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===t)return n[i+1];i+=2}}}return null}(Ao(),e)}("name"),rr(Dw),rr(xs))},e.\u0275dir=na({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),e})();class JF{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Bp?this.route:t===Sg?this.childContexts:this.parent.get(t,n)}}let nP=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=gl({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,r){1&n&&rv(0,"router-outlet")},dependencies:[tP],encapsulation:2}),e})();function rP(e,t){return e.providers&&!e._injector&&(e._injector=pv(e.providers,t,`Route: ${e.path}`)),e._injector??t}function _1(e){const t=e.children&&e.children.map(_1),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==ai&&(n.component=nP),n}function pu(e){return e.outlet||ai}function iP(e,t){const n=e.filter(r=>pu(r)===t);return n.push(...e.filter(r=>pu(r)!==t)),n}function oP(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class t4{constructor(t,n,r,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(t){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),h1(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){const i=zp(n);t.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Ns(i,(o,s)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){const i=t.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=zp(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:u})}}deactivateRouteAndOutlet(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=zp(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,n,r){const i=zp(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new pF(o.value.snapshot))}),t.children.length&&this.forwardEvent(new fF(t.value.snapshot))}activateRoutes(t,n,r){const i=t.value,o=n?n.value:null;if(h1(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const u=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(u.contexts),s.attachRef=u.componentRef,s.route=u.route.value,s.outlet&&s.outlet.attach(u.componentRef,u.route.value),h1(u.route.value),this.activateChildRoutes(t,null,s.children)}else{const u=oP(i.snapshot),g=u?.get(og)??null;s.attachRef=null,s.route=i,s.resolver=g,s.injector=u,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,r)}}function nf(e){return"function"==typeof e}function nh(e){return e instanceof eh}const Cg=Symbol("INITIAL_VALUE");function Ig(){return Yf(e=>xT(e.map(t=>t.pipe(Eo(1),function Xk(...e){const t=Vn(e);return Sn((n,r)=>{(t?n1(e,n,t):n1(e,n)).subscribe(r)})}(Cg)))).pipe(IT((t,n)=>{let r=!1;return n.reduce((i,o,s)=>i!==Cg?i:(o===Cg&&(r=!0),r||!1!==o&&s!==n.length-1&&!nh(o)?i:o),t)},Cg),kp(t=>t!==Cg),En(t=>nh(t)?t:!0===t),Eo(1)))}const aP={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Jv(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...aP}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(t.matcher||vF)(n,e,t);if(!i)return{...aP};const o={};Ns(i.posParams,(u,g)=>{o[g]=u.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Kv(e,t,n,r,i="corrected"){if(n.length>0&&function u4(e,t,n){return n.some(r=>Yv(e,t,r)&&pu(r)!==ai)}(e,n,r)){const s=new Ei(t,function l4(e,t,n,r){const i={};i[ai]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const o of n)if(""===o.path&&pu(o)!==ai){const s=new Ei([],{});s._sourceSegment=e,s._segmentIndexShift=t.length,i[pu(o)]=s}return i}(e,t,r,new Ei(n,e.children)));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function c4(e,t,n){return n.some(r=>Yv(e,t,r))}(e,n,r)){const s=new Ei(e.segments,function s4(e,t,n,r,i,o){const s={};for(const u of r)if(Yv(e,n,u)&&!i[pu(u)]){const g=new Ei([],{});g._sourceSegment=e,g._segmentIndexShift="legacy"===o?e.segments.length:t.length,s[pu(u)]=g}return{...i,...s}}(e,t,n,r,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const o=new Ei(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}function Yv(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function sP(e,t,n,r){return!!(pu(e)===r||r!==ai&&Yv(t,n,e))&&("**"===e.path||Jv(t,e,n).matched)}function lP(e,t,n){return 0===t.length&&!e.children[n]}class Xv{constructor(t){this.segmentGroup=t||null}}class uP{constructor(t){this.urlTree=t}}function Tg(e){return gg(new Xv(e))}function cP(e){return gg(new uP(e))}class p4{constructor(t,n,r,i,o){this.injector=t,this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const t=Kv(this.urlTree.root,[],[],this.config).segmentGroup,n=new Ei(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,n,ai).pipe(En(o=>this.createUrlTree(b1(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Xf(o=>{if(o instanceof uP)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Xv?this.noMatchError(o):o}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,ai).pipe(En(i=>this.createUrlTree(b1(i),t.queryParams,t.fragment))).pipe(Xf(i=>{throw i instanceof Xv?this.noMatchError(i):i}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,n,r){const i=t.segments.length>0?new Ei([],{[ai]:t}):t;return new eh(i,n,r)}expandSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,n,r).pipe(En(o=>new Ei([],o))):this.expandSegment(t,r,n,r.segments,i,!0)}expandChildren(t,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return Bi(i).pipe(vg(o=>{const s=r.children[o],u=iP(n,o);return this.expandSegmentGroup(t,u,s,o).pipe(En(g=>({segment:g,outlet:o})))}),IT((o,s)=>(o[s.outlet]=s.segment,o),{}),function tF(e,t){const n=arguments.length>=2;return r=>r.pipe(e?kp((i,o)=>e(i,o,r)):W,i1(1),n?o1(t):TT(()=>new yg))}())}expandSegment(t,n,r,i,o,s){return Bi(r).pipe(vg(u=>this.expandSegmentAgainstRoute(t,n,r,u,i,o,s).pipe(Xf(d=>{if(d instanceof Xv)return Zr(null);throw d}))),Qf(u=>!!u),Xf((u,g)=>{if(u instanceof yg||"EmptyError"===u.name)return lP(n,i,o)?Zr(new Ei([],{})):Tg(n);throw u}))}expandSegmentAgainstRoute(t,n,r,i,o,s,u){return sP(i,n,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,n,i,o,s):u&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s):Tg(n):Tg(n)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?cP(o):this.lineralizeSegments(r,o).pipe(Et(s=>{const u=new Ei(s,{});return this.expandSegment(t,u,n,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s){const{matched:u,consumedSegments:g,remainingSegments:d,positionalParamSegments:_}=Jv(n,i,o);if(!u)return Tg(n);const x=this.applyRedirectCommands(g,i.redirectTo,_);return i.redirectTo.startsWith("/")?cP(x):this.lineralizeSegments(i,x).pipe(Et(b=>this.expandSegment(t,n,r,b.concat(d),s,!1)))}matchSegmentAgainstRoute(t,n,r,i,o){if("**"===r.path)return t=rP(r,t),r.loadChildren?(r._loadedRoutes?Zr({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(t,r)).pipe(En(x=>(r._loadedRoutes=x.routes,r._loadedInjector=x.injector,new Ei(i,{})))):Zr(new Ei(i,{}));const{matched:s,consumedSegments:u,remainingSegments:g}=Jv(n,r,i);return s?(t=rP(r,t),this.getChildConfig(t,r,i).pipe(Et(_=>{const x=_.injector??t,b=_.routes,{segmentGroup:I,slicedSegments:k}=Kv(n,u,g,b),M=new Ei(I.segments,I.children);if(0===k.length&&M.hasChildren())return this.expandChildren(x,b,M).pipe(En(et=>new Ei(u,et)));if(0===b.length&&0===k.length)return Zr(new Ei(u,{}));const Se=pu(r)===o;return this.expandSegment(x,M,b,k,Se?ai:o,!0).pipe(En(lt=>new Ei(u.concat(lt.segments),lt.children)))}))):Tg(n)}getChildConfig(t,n,r){return n.children?Zr({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?Zr({routes:n._loadedRoutes,injector:n._loadedInjector}):this.runCanLoadGuards(t,n,r).pipe(Et(i=>i?this.configLoader.loadChildren(t,n).pipe(Ks(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function f4(e){return gg(l1(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`))}(n))):Zr({routes:[],injector:t})}runCanLoadGuards(t,n,r){const i=n.canLoad;return i&&0!==i.length?Zr(i.map(s=>{const u=t.get(s);let g;if(function r4(e){return e&&nf(e.canLoad)}(u))g=u.canLoad(n,r);else{if(!nf(u))throw new Error("Invalid CanLoad guard");g=u(n,r)}return Hu(g)})).pipe(Ig(),Ks(s=>{if(!nh(s))return;const u=l1(`Redirecting to "${this.urlSerializer.serialize(s)}"`);throw u.url=s,u}),En(s=>!0===s)):Zr(!0)}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Zr(r);if(i.numberOfChildren>1||!i.children[ai])return gg(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t.redirectTo}'`));i=i.children[ai]}}applyRedirectCommands(t,n,r){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),t,r)}applyRedirectCreatreUrlTree(t,n,r,i){const o=this.createSegmentGroup(t,n.root,r,i);return new eh(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const r={};return Ns(t,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const u=i.substring(1);r[o]=n[u]}else r[o]=i}),r}createSegmentGroup(t,n,r,i){const o=this.createSegments(t,n.segments,r,i);let s={};return Ns(n.children,(u,g)=>{s[g]=this.createSegmentGroup(t,u,r,i)}),new Ei(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){const i=r[n.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${n.path}'.`);return i}findOrReturn(t,n){let r=0;for(const i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}}function b1(e){const t={};for(const r of Object.keys(e.children)){const o=b1(e.children[r]);(o.segments.length>0||o.hasChildren())&&(t[r]=o)}return function m4(e){if(1===e.numberOfChildren&&e.children[ai]){const t=e.children[ai];return new Ei(e.segments.concat(t.segments),t.children)}return e}(new Ei(e.segments,t))}class dP{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Qv{constructor(t,n){this.component=t,this.route=n}}function y4(e,t,n){const r=e._root;return Pg(r,t?t._root:null,n,[r.value])}function e_(e,t,n){return(oP(t)??n).get(e)}function Pg(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=zp(t);return e.children.forEach(s=>{(function _4(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,s=t?t.value:null,u=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const g=function b4(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!th(e.url,t.url);case"pathParamsOrQueryParamsChange":return!th(e.url,t.url)||!pc(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!p1(e,t)||!pc(e.queryParams,t.queryParams);default:return!p1(e,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new dP(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Pg(e,t,o.component?u?u.children:null:n,r,i),g&&u&&u.outlet&&u.outlet.isActivated&&i.canDeactivateChecks.push(new Qv(u.outlet.component,s))}else s&&Dg(t,u,i),i.canActivateChecks.push(new dP(r)),Pg(e,null,o.component?u?u.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Ns(o,(s,u)=>Dg(s,n.getContext(u),i)),i}function Dg(e,t,n){const r=zp(e),i=e.value;Ns(r,(o,s)=>{Dg(o,i.component?t?t.children.getContext(s):null:t,n)}),n.canDeactivateChecks.push(new Qv(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class D4{}function hP(e){return new ut(t=>t.error(e))}class R4{constructor(t,n,r,i,o,s){this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=s}recognize(){const t=Kv(this.urlTree.root,[],[],this.config.filter(s=>void 0===s.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,t,ai);if(null===n)return null;const r=new qv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ai,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Yc(r,n),o=new ZT(this.url,i);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(t){const n=t.value,r=WT(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,n):this.processSegment(t,n,n.segments,r)}processChildren(t,n){const r=[];for(const o of Object.keys(n.children)){const s=n.children[o],u=iP(t,o),g=this.processSegmentGroup(u,s,o);if(null===g)return null;r.push(...g)}const i=pP(r);return function M4(e){e.sort((t,n)=>t.value.outlet===ai?-1:n.value.outlet===ai?1:t.value.outlet.localeCompare(n.value.outlet))}(i),i}processSegment(t,n,r,i){for(const o of t){const s=this.processSegmentAgainstRoute(o,n,r,i);if(null!==s)return s}return lP(n,r,i)?[]:null}processSegmentAgainstRoute(t,n,r,i){if(t.redirectTo||!sP(t,n,r,i))return null;let o,s=[],u=[];if("**"===t.path){const I=r.length>0?OT(r).parameters:{},k=gP(n)+r.length;o=new qv(r,I,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,vP(t),pu(t),t.component??t._loadedComponent??null,t,mP(n),k,_P(t),k)}else{const I=Jv(n,t,r);if(!I.matched)return null;s=I.consumedSegments,u=I.remainingSegments;const k=gP(n)+s.length;o=new qv(s,I.parameters,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,vP(t),pu(t),t.component??t._loadedComponent??null,t,mP(n),k,_P(t),k)}const g=function O4(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(t),{segmentGroup:d,slicedSegments:_}=Kv(n,s,u,g.filter(I=>void 0===I.redirectTo),this.relativeLinkResolution);if(0===_.length&&d.hasChildren()){const I=this.processChildren(g,d);return null===I?null:[new Yc(o,I)]}if(0===g.length&&0===_.length)return[new Yc(o,[])];const x=pu(t)===i,b=this.processSegment(g,d,_,x?ai:i);return null===b?null:[new Yc(o,b)]}}function L4(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function pP(e){const t=[],n=new Set;for(const r of e){if(!L4(r)){t.push(r);continue}const i=t.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):t.push(r)}for(const r of n){const i=pP(r.children);t.push(new Yc(r.value,i))}return t.filter(r=>!n.has(r))}function mP(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function gP(e){let t=e,n=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift??0;return n-1}function vP(e){return e.data||{}}function _P(e){return e.resolve||{}}const w1=Symbol("RouteTitle");function bP(e){return"string"==typeof e.title||null===e.title}function x1(e){return Yf(t=>{const n=e(t);return n?Bi(n).pipe(En(()=>t)):Zr(t)})}class G4 extends class V4{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}{}const E1=new Cr("ROUTES");let S1=(()=>{class e{constructor(n,r){this.injector=n,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Zr(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=Hu(n.loadComponent()).pipe(Ks(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),a1(()=>{this.componentLoaders.delete(n)})),i=new CT(r,()=>new xt).pipe(r1());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Zr({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(En(u=>{this.onLoadEndListener&&this.onLoadEndListener(r);let g,d,_=!1;Array.isArray(u)?d=u:(g=u.create(n).injector,d=MT(g.get(E1,[],dn.Self|dn.Optional)));return{routes:d.map(_1),injector:g}}),a1(()=>{this.childrenLoaders.delete(r)})),s=new CT(o,()=>new xt).pipe(r1());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(n){return Hu(n()).pipe(Et(r=>r instanceof IC||Array.isArray(r)?Zr(r):Bi(this.compiler.compileModuleAsync(r))))}}return e.\u0275fac=function(n){return new(n||e)(Yn(Xo),Yn(bw))},e.\u0275prov=Qn({token:e,factory:e.\u0275fac}),e})();class $4{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}}function W4(e){throw e}function Z4(e,t,n){return t.parse("/")}const J4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},K4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let dl=(()=>{class e{constructor(n,r,i,o,s,u,g){this.rootComponentType=n,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new xt,this.errorHandler=W4,this.malformedUriErrorHandler=Z4,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Zr(void 0),this.urlHandlingStrategy=new $4,this.routeReuseStrategy=new G4,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=s.get(S1),this.configLoader.onLoadEndListener=b=>this.triggerEvent(new cF(b)),this.configLoader.onLoadStartListener=b=>this.triggerEvent(new uF(b)),this.ngModule=s.get(Yd),this.console=s.get(GO);const x=s.get(Ja);this.isNgZoneEnabled=x instanceof Ja&&Ja.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function bF(){return new eh(new Ei([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=qT(this.currentUrlTree,this.rootComponentType),this.transitions=new Gu({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(n){const r=this.events;return n.pipe(kp(i=>0!==i.id),En(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Yf(i=>{let o=!1,s=!1;return Zr(i).pipe(Ks(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Yf(u=>{const g=this.browserUrlTree.toString(),d=!this.navigated||u.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||d)&&this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return xP(u.source)&&(this.browserUrlTree=u.extractedUrl),Zr(u).pipe(Yf(x=>{const b=this.transitions.getValue();return r.next(new s1(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),b!==this.transitions.getValue()?Jt:Promise.resolve(x)}),function g4(e,t,n,r){return Yf(i=>function h4(e,t,n,r,i){return new p4(e,t,n,r,i).apply()}(e,t,n,i.extractedUrl,r).pipe(En(o=>({...i,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Ks(x=>{this.currentNavigation={...this.currentNavigation,finalUrl:x.urlAfterRedirects}}),function N4(e,t,n,r,i){return Et(o=>function A4(e,t,n,r,i="emptyOnly",o="legacy"){try{const s=new R4(e,t,n,r,i,o).recognize();return null===s?hP(new D4):Zr(s)}catch(s){return hP(s)}}(e,t,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(En(s=>({...o,targetSnapshot:s}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),Ks(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const I=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(I,x)}this.browserUrlTree=x.urlAfterRedirects}const b=new iF(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(b)}));if(d&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:b,extractedUrl:I,source:k,restoredState:M,extras:Se}=u,ke=new s1(b,this.serializeUrl(I),k,M);r.next(ke);const lt=qT(I,this.rootComponentType).snapshot;return Zr({...u,targetSnapshot:lt,urlAfterRedirects:I,extras:{...Se,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=u.rawUrl,u.resolve(null),Jt}),Ks(u=>{const g=new oF(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(g)}),En(u=>({...u,guards:y4(u.targetSnapshot,u.currentSnapshot,this.rootContexts)})),function w4(e,t){return Et(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Zr({...n,guardsResult:!0}):function x4(e,t,n,r){return Bi(e).pipe(Et(i=>function P4(e,t,n,r,i){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?Zr(o.map(u=>{const g=e_(u,t,i);let d;if(function a4(e){return e&&nf(e.canDeactivate)}(g))d=Hu(g.canDeactivate(e,t,n,r));else{if(!nf(g))throw new Error("Invalid CanDeactivate guard");d=Hu(g(e,t,n,r))}return d.pipe(Qf())})).pipe(Ig()):Zr(!0)}(i.component,i.route,n,t,r)),Qf(i=>!0!==i,!0))}(s,r,i,e).pipe(Et(u=>u&&function n4(e){return"boolean"==typeof e}(u)?function E4(e,t,n,r){return Bi(t).pipe(vg(i=>n1(function C4(e,t){return null!==e&&t&&t(new dF(e)),Zr(!0)}(i.route.parent,r),function S4(e,t){return null!==e&&t&&t(new hF(e)),Zr(!0)}(i.route,r),function T4(e,t,n){const r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>function v4(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(s)).filter(s=>null!==s).map(s=>ST(()=>Zr(s.guards.map(g=>{const d=e_(g,s.node,n);let _;if(function o4(e){return e&&nf(e.canActivateChild)}(d))_=Hu(d.canActivateChild(r,e));else{if(!nf(d))throw new Error("Invalid CanActivateChild guard");_=Hu(d(r,e))}return _.pipe(Qf())})).pipe(Ig())));return Zr(o).pipe(Ig())}(e,i.path,n),function I4(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return Zr(!0);const i=r.map(o=>ST(()=>{const s=e_(o,t,n);let u;if(function i4(e){return e&&nf(e.canActivate)}(s))u=Hu(s.canActivate(t,e));else{if(!nf(s))throw new Error("Invalid CanActivate guard");u=Hu(s(t,e))}return u.pipe(Qf())}));return Zr(i).pipe(Ig())}(e,i.route,n))),Qf(i=>!0!==i,!0))}(r,o,e,t):Zr(u)),En(u=>({...n,guardsResult:u})))})}(this.ngModule.injector,u=>this.triggerEvent(u)),Ks(u=>{if(nh(u.guardsResult)){const d=l1(`Redirecting to "${this.serializeUrl(u.guardsResult)}"`);throw d.url=u.guardsResult,d}const g=new aF(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.triggerEvent(g)}),kp(u=>!!u.guardsResult||(this.restoreHistory(u),this.cancelNavigationTransition(u,""),!1)),x1(u=>{if(u.guards.canActivateChecks.length)return Zr(u).pipe(Ks(g=>{const d=new sF(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(d)}),Yf(g=>{let d=!1;return Zr(g).pipe(function k4(e,t){return Et(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Zr(n);let o=0;return Bi(i).pipe(vg(s=>function F4(e,t,n,r){const i=e.routeConfig,o=e._resolve;return void 0!==i?.title&&!bP(i)&&(o[w1]=i.title),function z4(e,t,n,r){const i=function B4(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return Zr({});const o={};return Bi(i).pipe(Et(s=>function j4(e,t,n,r){const i=e_(e,t,r);return Hu(i.resolve?i.resolve(t,n):i(t,n))}(e[s],t,n,r).pipe(Qf(),Ks(u=>{o[s]=u}))),i1(1),function nF(e){return En(()=>e)}(o),Xf(s=>s instanceof yg?Jt:gg(s)))}(o,e,t,r).pipe(En(s=>(e._resolvedData=s,e.data=WT(e,n).resolve,i&&bP(i)&&(e.data[w1]=i.title),null)))}(s.route,r,e,t)),Ks(()=>o++),i1(1),Et(s=>o===i.length?Zr(n):Jt))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Ks({next:()=>d=!0,complete:()=>{d||(this.restoreHistory(g),this.cancelNavigationTransition(g,"At least one route resolver didn't emit any value."))}}))}),Ks(g=>{const d=new lF(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(d)}))}),x1(()=>this.afterPreactivation()),x1(u=>{const g=d=>{const _=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&_.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ks(x=>{d.component=x}),En(()=>{})));for(const x of d.children)_.push(...g(x));return _};return xT(g(u.targetSnapshot.root)).pipe(o1(),Eo(1))}),En(u=>{const g=function zF(e,t,n){const r=xg(e,t._root,n?n._root:void 0);return new $T(r,t)}(this.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return{...u,targetRouterState:g}}),Ks(u=>{this.currentUrlTree=u.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl),this.routerState=u.targetRouterState,"deferred"===this.urlUpdateStrategy&&(u.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,u),this.browserUrlTree=u.urlAfterRedirects)}),((e,t,n)=>En(r=>(new t4(t,r.targetRouterState,r.currentRouterState,n).activate(e),r)))(this.rootContexts,this.routeReuseStrategy,u=>this.triggerEvent(u)),Ks({next(){o=!0},complete(){o=!0}}),a1(()=>{o||s||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Xf(u=>{if(s=!0,function yF(e){return e&&e[AT]}(u)){const g=nh(u.url);g||(this.navigated=!0,this.restoreHistory(i,!0));const d=new PT(i.id,this.serializeUrl(i.extractedUrl),u.message);if(r.next(d),g){const _=this.urlHandlingStrategy.merge(u.url,this.rawUrlTree),x={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||xP(i.source)};this.scheduleNavigation(_,"imperative",null,x,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const g=new rF(i.id,this.serializeUrl(i.extractedUrl),u);r.next(g);try{i.resolve(this.errorHandler(u))}catch(d){i.reject(d)}}return Jt}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}setTransition(n){this.transitions.next({...this.transitions.value,...n})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},o=n.state?.navigationId?n.state:null;if(o){const u={...o};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(i.state=u)}const s=this.parseUrl(n.url);this.scheduleNavigation(s,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){this.config=n.map(_1),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:u,preserveFragment:g}=r,d=i||this.routerState.root,_=g?this.currentUrlTree.fragment:s;let x=null;switch(u){case"merge":x={...this.currentUrlTree.queryParams,...o};break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=o||null}return null!==x&&(x=this.removeEmptyProps(x)),function UF(e,t,n,r,i){if(0===n.length)return m1(t.root,t.root,t.root,r,i);const o=function VF(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new YT(!0,0,e);let t=0,n=!1;const r=e.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const u={};return Ns(o.outlets,(g,d)=>{u[d]="string"==typeof g?g.split("/"):g}),[...i,{outlets:u}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((u,g)=>{0==g&&"."===u||(0==g&&""===u?n=!0:".."===u?t++:""!=u&&i.push(u))}),i):[...i,o]},[]);return new YT(n,t,r)}(n);return o.toRoot()?m1(t.root,t.root,new Ei([],{}),r,i):function s(g){const d=function GF(e,t,n,r){return e.isAbsolute?new g1(t.root,!0,0):-1===r?new g1(n,n===t.root,0):function HF(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new g1(r,!1,i-o)}(n,r+(Wv(e.commands[0])?0:1),e.numberOfDoubleDots)}(o,t,e.snapshot?._urlSegment,g),_=d.processChildren?Zv(d.segmentGroup,d.index,o.commands):XT(d.segmentGroup,d.index,o.commands);return m1(t.root,d.segmentGroup,_,r,i)}(e.snapshot?._lastPathIndex)}(d,this.currentUrlTree,n,x,_??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=nh(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(n,r={skipLocationChange:!1}){return function Y4(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...J4}:!1===r?{...K4}:r,nh(n))return NT(this.currentUrlTree,n,i);const o=this.parseUrl(n);return NT(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const o=n[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new _g(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let u,g,d;s?(u=s.resolve,g=s.reject,d=s.promise):d=new Promise((b,I)=>{u=b,g=I});const _=++this.navigationId;let x;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),x=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):x=0,this.setTransition({id:_,targetPageId:x,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:o,resolve:u,reject:g,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(b=>Promise.reject(b))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,r){const i=new PT(n.id,this.serializeUrl(n.extractedUrl),r);this.triggerEvent(i),n.resolve(!1)}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return e.\u0275fac=function(n){fb()},e.\u0275prov=Qn({token:e,factory:e.\u0275fac}),e})();function xP(e){return"imperative"!==e}class EP{buildTitle(t){let n,r=t.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(i=>i.outlet===ai);return n}getResolvedTitleForRoute(t){return t.data[w1]}}let ez=(()=>{class e extends EP{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(n){return new(n||e)(Yn(_T))},e.\u0275prov=Qn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class SP{}let CP=(()=>{class e{constructor(n,r,i,o,s){this.router=n,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(kp(n=>n instanceof _g),vg(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=pv(o.providers,n,`Route: ${o.path}`));const s=o._injector??n,u=o._loadedInjector??s;o.loadChildren&&!o._loadedRoutes||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(s,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(u,o.children??o._loadedRoutes))}return Bi(i).pipe(Zt())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):Zr(null);const o=i.pipe(Et(s=>null===s?Zr(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?Bi([o,this.loader.loadComponent(r)]).pipe(Zt()):o})}}return e.\u0275fac=function(n){return new(n||e)(Yn(dl),Yn(bw),Yn(xs),Yn(SP),Yn(S1))},e.\u0275prov=Qn({token:e,factory:e.\u0275fac}),e})();const IP=new Cr("");let tz=(()=>{class e{constructor(n,r,i={}){this.router=n,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof s1?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof _g&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof DT&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.router.triggerEvent(new DT(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(n){fb()},e.\u0275prov=Qn({token:e,factory:e.\u0275fac}),e})();const T1=new Cr("ROUTER_CONFIGURATION",{providedIn:"root",factory:()=>({})}),TP=new Cr("ROUTER_FORROOT_GUARD"),PP=new Cr(""),nz=[Nw,{provide:BT,useClass:jT},{provide:dl,useFactory:function lz(e,t,n,r,i,o,s={},u,g,d,_){const x=new dl(null,e,t,n,r,i,MT(o));return d&&(x.urlHandlingStrategy=d),_&&(x.routeReuseStrategy=_),x.titleStrategy=g??u,function uz(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy),e.canceledNavigationResolution&&(t.canceledNavigationResolution=e.canceledNavigationResolution)}(s,x),x},deps:[BT,Sg,Nw,Xo,bw,E1,T1,ez,[EP,new xl],[class H4{},new xl],[class U4{},new xl]]},Sg,{provide:Bp,useFactory:function cz(e){return e.routerState.root},deps:[dl]},S1];function rz(){return new gI("Router",dl)}let DP=(()=>{class e{constructor(n,r){}static forRoot(n,r){return{ngModule:e,providers:[nz,[],AP(n),{provide:TP,useFactory:sz,deps:[[dl,new xl,new Cd]]},{provide:T1,useValue:r||{}},r?.useHash?{provide:Kf,useClass:ML}:{provide:Kf,useClass:jI},{provide:IP,useFactory:()=>{const e=lc(dl),t=lc(tk),n=lc(T1);return n.scrollOffset&&t.setOffset(n.scrollOffset),new tz(e,t,n)}},r?.preloadingStrategy?yz(r.preloadingStrategy):[],{provide:gI,multi:!0,useFactory:rz},r?.initialNavigation?fz(r):[],[{provide:RP,useFactory:dz},{provide:dI,multi:!0,useExisting:RP}]]}}static forChild(n){return{ngModule:e,providers:[AP(n)]}}}return e.\u0275fac=function(n){return new(n||e)(Yn(TP,8),Yn(dl,8))},e.\u0275mod=Sa({type:e}),e.\u0275inj=Ti({}),e})();function sz(e){return"guarded"}function AP(e){return[{provide:x0,multi:!0,useValue:e},{provide:E1,multi:!0,useValue:e}]}function dz(){const e=lc(Xo);return t=>{const n=e.get(wv);if(t!==n.components[0])return;const r=e.get(dl),i=e.get(MP);null===e.get(P1,null,dn.Optional)&&r.initialNavigation(),e.get(PP,null,dn.Optional)?.setUpPreloading(),e.get(IP,null,dn.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.next(),i.complete()}}const RP=new Cr("");function fz(e){return["disabled"===e.initialNavigation?[{provide:vv,multi:!0,useFactory:()=>{const e=lc(dl);return()=>{e.setUpLocationChangeListener()}}},{provide:P1,useValue:"disabled"}]:[],"enabledBlocking"===e.initialNavigation?[{provide:P1,useValue:"enabledBlocking"},{provide:vv,multi:!0,deps:[Xo],useFactory:e=>{const t=e.get(DL,Promise.resolve(null));let n=!1;return()=>t.then(()=>new Promise(r=>{const i=e.get(dl),o=e.get(MP);i.afterPreactivation=()=>n?Zr(void 0):(n=!0,r(!0),o),i.initialNavigation()}))}}]:[]]}const MP=new Cr("",{factory:()=>new xt}),P1=new Cr("");function yz(e){return[CP,{provide:PP,useExisting:CP},{provide:SP,useExisting:e}]}const vz=[];let _z=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Sa({type:e}),e.\u0275inj=Ti({imports:[DP.forRoot(vz),DP]}),e})();var e,wz=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},xz=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},jp=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(xz(arguments[t]));return e},OP={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5},mu=(()=>{return(e=mu||(mu={})).DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",mu;var e})(),$u=function(){function e(t,n){void 0===n&&(n=mu.WARN),this.name=t,this.level=n,this._pluggables=[]}return e.prototype._padding=function(t){return t<10?"0"+t:""+t},e.prototype._ts=function(){var t=new Date;return[this._padding(t.getMinutes()),this._padding(t.getSeconds())].join(":")+"."+t.getMilliseconds()},e.prototype.configure=function(t){return t?(this._config=t,this._config):this._config},e.prototype._log=function(t){for(var n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var s=this.level;e.LOG_LEVEL&&(s=e.LOG_LEVEL),typeof window<"u"&&window.LOG_LEVEL&&(s=window.LOG_LEVEL);var u=OP[s],g=OP[t];if(g>=u){var d=console.log.bind(console);t===mu.ERROR&&console.error&&(d=console.error.bind(console)),t===mu.WARN&&console.warn&&(d=console.warn.bind(console));var _="["+t+"] "+this._ts()+" "+this.name,x="";if(1===i.length&&"string"==typeof i[0])d(x=_+" - "+i[0]);else if(1===i.length)x=_+" "+i[0],d(_,i[0]);else if("string"==typeof i[0]){var b=i.slice(1);1===b.length&&(b=b[0]),x=_+" - "+i[0]+" "+b,d(_+" - "+i[0],b)}else x=_+" "+i,d(_,i);try{for(var I=wz(this._pluggables),k=I.next();!k.done;k=I.next()){var M=k.value,Se={message:x,timestamp:Date.now()};M.pushLogs([Se])}}catch(ke){n={error:ke}}finally{try{k&&!k.done&&(r=I.return)&&r.call(I)}finally{if(n)throw n.error}}}},e.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._log.apply(this,jp([mu.INFO],t))},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._log.apply(this,jp([mu.INFO],t))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._log.apply(this,jp([mu.WARN],t))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._log.apply(this,jp([mu.ERROR],t))},e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._log.apply(this,jp([mu.DEBUG],t))},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._log.apply(this,jp([mu.VERBOSE],t))},e.prototype.addPluggable=function(t){t&&"Logging"===t.getCategoryName()&&(this._pluggables.push(t),t.configure(this._config))},e.prototype.listPluggables=function(){return this._pluggables},e.LOG_LEVEL=null,e}(),D1=new $u("Amplify"),Sz=function(){function e(){this._components=[],this._config={},this._modules={},this.Auth=null,this.Analytics=null,this.API=null,this.Credentials=null,this.Storage=null,this.I18n=null,this.Cache=null,this.PubSub=null,this.Interactions=null,this.Pushnotification=null,this.UI=null,this.XR=null,this.Predictions=null,this.DataStore=null,this.Geo=null,this.Logger=$u,this.ServiceWorker=null}return e.prototype.register=function(t){D1.debug("component registered in amplify",t),this._components.push(t),"function"==typeof t.getModuleName?(this._modules[t.getModuleName()]=t,this[t.getModuleName()]=t):D1.debug("no getModuleName method for component",t),t.configure(this._config)},e.prototype.configure=function(t){var n=this;return t?(this._config=Object.assign(this._config,t),D1.debug("amplify config",this._config),Object.entries(this._modules).forEach(function(r){var i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}(r,2),s=i[1];Object.keys(s).forEach(function(u){n._modules[u]&&(s[u]=n._modules[u])})}),this._components.map(function(r){r.configure(n._config)}),this._config):this._config},e.prototype.addPluggable=function(t){t&&t.getCategory&&"function"==typeof t.getCategory&&this._components.map(function(n){n.addPluggable&&"function"==typeof n.addPluggable&&n.addPluggable(t)})},e}(),Up=new Sz,Cz=(e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,n)},function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),Pz=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},Dz=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Pz(arguments[t]));return e},t_=new $u("Util"),rh=function(e){function t(n){var r=e.call(this,n)||this;return r.nonRetryable=!0,r}return Cz(t,e),t}(Error);function LP(e,t,n,r){return void 0===r&&(r=1),function(e,t,n,r){return new(n||(n=Promise))(function(o,s){function u(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(u,g)}d((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function(){var i,o;return function(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}(this,function(s){switch(s.label){case 0:if("function"!=typeof e)throw Error("functionToRetry must be a function");t_.debug(e.name+" attempt #"+r+" with this vars: "+JSON.stringify(t)),s.label=1;case 1:return s.trys.push([1,3,,8]),[4,e.apply(void 0,Dz(t))];case 2:return[2,s.sent()];case 3:if(i=s.sent(),t_.debug("error on "+e.name,i),function(e){return e&&e.nonRetryable}(i))throw t_.debug(e.name+" non retryable error",i),i;return o=n(r,t,i),t_.debug(e.name+" retrying in "+o+" ms"),!1===o?[3,6]:[4,new Promise(function(u){return setTimeout(u,o)})];case 4:return s.sent(),[4,LP(e,t,n,r+1)];case 5:return[2,s.sent()];case 6:throw i;case 7:return[3,8];case 8:return[2]}})})}var kP=function(e,t,n){return void 0===n&&(n=3e5),LP(e,t,function Rz(e){return void 0===e&&(e=3e5),function(r){var i=100*Math.pow(2,r)+100*Math.random();return!(i>e)&&i}}(n))},A1="aws-amplify/4.5.7",ih={userAgent:A1+" js",product:"",navigator:null,isReactNative:!1};typeof navigator<"u"&&navigator.product&&("ReactNative"===(ih.product=navigator.product||"",ih.navigator=navigator||null,navigator.product)?(ih.userAgent=A1+" react-native",ih.isReactNative=!0):(ih.userAgent=A1+" js",ih.isReactNative=!1));for(var mc=function(){return ih.userAgent},FP=U(4578),zP={},R1={},Ag=0;Ag<256;Ag++){var Rg=Ag.toString(16).toLowerCase();1===Rg.length&&(Rg="0"+Rg),zP[Ag]=Rg,R1[Rg]=Ag}function rf(e){for(var t="",n=0;n<e.byteLength;n++)t+=zP[e[n]];return t}var oh=U(8762),af={clockOffset:0,getDateWithClockOffset:function(){return af.clockOffset?new Date((new Date).getTime()+af.clockOffset):new Date},getClockOffset:function(){return af.clockOffset},getHeaderStringFromDate:function(e){return void 0===e&&(e=af.getDateWithClockOffset()),e.toISOString().replace(/[:\-]|\.\d{3}/g,"")},getDateFromHeaderString:function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}(e.match(/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2}).+/),7),r=t[2],i=t[3],o=t[4],s=t[5],u=t[6];return new Date(Date.UTC(Number(t[1]),Number(r)-1,Number(i),Number(o),Number(s),Number(u)))},isClockSkewed:function(e){return Math.abs(e.getTime()-af.getDateWithClockOffset().getTime())>=3e5},isClockSkewError:function(e){if(!e.response||!e.response.headers)return!1;var t=e.response.headers;return Boolean(["BadRequestException","InvalidSignatureException"].includes(t["x-amzn-errortype"])&&(t.date||t.Date))},setClockOffset:function(e){af.clockOffset=e}},Ql=function(){return Ql=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ql.apply(this,arguments)},BP=new $u("Signer"),n_="AWS4-HMAC-SHA256",Mg=function(e,t){var n=new FP.Sha256(e);return n.update(t),n.digestSync()},jP=function(e){var t=e||"",n=new FP.Sha256;return n.update(t),rf(n.digestSync())},zz=function(e){return e&&0!==e.length?e.split("&").map(function(t){var n=t.split("=");if(1===n.length)return t;var r=function(e){return e.replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}(n[1]);return n[0]+"="+r}).sort(function(t,n){var r=t.split("=")[0],i=n.split("=")[0];return r===i?t<n?-1:1:r<i?-1:1}).join("&"):""},Bz=function(e){return e&&0!==Object.keys(e).length?Object.keys(e).map(function(t){return{key:t.toLowerCase(),value:e[t]?e[t].trim().replace(/\s+/g," "):""}}).sort(function(t,n){return t.key<n.key?-1:1}).map(function(t){return t.key+":"+t.value}).join("\n")+"\n":""},UP=function(e){return Object.keys(e).map(function(t){return t.toLowerCase()}).sort().join(";")},VP=function(e){var t=(0,oh.Qc)(e.url);return[e.method||"/",encodeURIComponent(t.pathname).replace(/%2F/gi,"/"),zz(t.query),Bz(e.headers),UP(e.headers),jP(e.data)].join("\n")},GP=function(e){var i=((0,oh.Qc)(e.url).host.match(/([^\.]+)\.(?:([^\.]*)\.)?amazonaws\.com$/)||[]).slice(1,3);return"es"===i[1]&&(i=i.reverse()),{service:e.service||i[0],region:e.region||i[1]}},HP=function(e,t,n){return[e,t,n,"aws4_request"].join("/")},$P=function(e,t,n,r){return[e,n,r,jP(t)].join("\n")},qP=function(e,t,n){BP.debug(n);var i=Mg("AWS4"+e,t),o=Mg(i,n.region),s=Mg(o,n.service);return Mg(s,"aws4_request")},WP=function(e,t){return rf(Mg(e,t))},Uz=function(){function e(){}return e.sign=function(t,n,r){void 0===r&&(r=null),t.headers=t.headers||{};var o=af.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),s=o.substr(0,8),u=(0,oh.Qc)(t.url);t.headers.host=u.host,t.headers["x-amz-date"]=o,n.session_token&&(t.headers["X-Amz-Security-Token"]=n.session_token);var g=VP(t);BP.debug(g);var d=r||GP(t),_=HP(s,d.region,d.service),x=$P(n_,g,o,_),b=qP(n.secret_key,s,d),I=WP(b,x),k=function(e,t,n,r,i){return["AWS4-HMAC-SHA256 Credential="+t+"/"+n,"SignedHeaders="+r,"Signature="+i].join(", ")}(0,n.access_key,_,UP(t.headers),I);return t.headers.Authorization=k,t},e.signUrl=function(t,n,r,i){var o="object"==typeof t?t.url:t,s="object"==typeof t?t.method:"GET",u="object"==typeof t?t.body:void 0,g=af.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),d=g.substr(0,8),b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}((0,oh.Qc)(o,!0,!0),["search"]),k={host:b.host},M=r||GP({url:(0,oh.WU)(b)}),Se=M.region,ke=M.service,lt=HP(d,Se,ke),et=n.session_token&&"iotdevicegateway"!==ke,Mt=Ql(Ql(Ql({"X-Amz-Algorithm":n_,"X-Amz-Credential":[n.access_key,lt].join("/"),"X-Amz-Date":g.substr(0,16)},et?{"X-Amz-Security-Token":""+n.session_token}:{}),i?{"X-Amz-Expires":""+i}:{}),{"X-Amz-SignedHeaders":Object.keys(k).join(",")}),Ht=VP({method:s,url:(0,oh.WU)(Ql(Ql({},b),{query:Ql(Ql({},b.query),Mt)})),headers:k,data:u}),Un=$P(n_,Ht,g,lt),si=qP(n.secret_key,d,{region:Se,service:ke}),jo=WP(si,Un),Qo=Ql({"X-Amz-Signature":jo},n.session_token&&{"X-Amz-Security-Token":n.session_token});return(0,oh.WU)({protocol:b.protocol,slashes:!0,hostname:b.hostname,port:b.port,pathname:b.pathname,query:Ql(Ql(Ql({},b.query),Mt),Qo)})},e}(),Og=function(){return Og=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Og.apply(this,arguments)},ZP=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},JP=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ZP(arguments[t]));return e},Qc=new $u("Hub"),Vz=typeof Symbol<"u"&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Hz=function(){function e(t){this.listeners=[],this.patterns=[],this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=t}return e.prototype.remove=function(t,n){if(t instanceof RegExp){var r=this.patterns.find(function(o){return o.pattern.source===t.source});if(!r)return void Qc.warn("No listeners for "+t);this.patterns=JP(this.patterns.filter(function(o){return o!==r}))}else{var i=this.listeners[t];if(!i)return void Qc.warn("No listeners for "+t);this.listeners[t]=JP(i.filter(function(o){return o.callback!==n}))}},e.prototype.dispatch=function(t,n,r,i){void 0===r&&(r=""),this.protectedChannels.indexOf(t)>-1&&(i===Vz||Qc.warn("WARNING: "+t+" is protected and dispatching on it can have unintended consequences"));var s={channel:t,payload:Og({},n),source:r,patternInfo:[]};try{this._toListeners(s)}catch(u){Qc.error(u)}},e.prototype.listen=function(t,n,r){var o,i=this;if(void 0===r&&(r="noname"),function Gz(e){return void 0!==e.onHubCapsule}(n))Qc.warn("WARNING onHubCapsule is Deprecated. Please pass in a callback."),o=n.onHubCapsule.bind(n);else{if("function"!=typeof n)throw new Error("No callback supplied to Hub");o=n}if(t instanceof RegExp)this.patterns.push({pattern:t,callback:o});else{var s=this.listeners[t];s||(this.listeners[t]=s=[]),s.push({name:r,callback:o})}return function(){i.remove(t,o)}},e.prototype._toListeners=function(t){var n=t.channel,r=t.payload,i=this.listeners[n];if(i&&i.forEach(function(s){Qc.debug("Dispatching to "+n+" with ",r);try{s.callback(t)}catch(u){Qc.error(u)}}),this.patterns.length>0){if(!r.message)return void Qc.warn("Cannot perform pattern matching without a message key");var o=r.message;this.patterns.forEach(function(s){var u=o.match(s.pattern);if(u){var d=ZP(u).slice(1),_=Og(Og({},t),{patternInfo:d});try{s.callback(_)}catch(x){Qc.error(x)}}})}},e}(),$z=new Hz("__default__"),r_=function(){return r_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r_.apply(this,arguments)},qz=new $u("Parser"),KP=function(e){var r,t={};return e.aws_mobile_analytics_app_id&&(t.Analytics={AWSPinpoint:{appId:e.aws_mobile_analytics_app_id,region:e.aws_mobile_analytics_app_region}}),(e.aws_cognito_identity_pool_id||e.aws_user_pools_id)&&(t.Auth={userPoolId:e.aws_user_pools_id,userPoolWebClientId:e.aws_user_pools_web_client_id,region:e.aws_cognito_region,identityPoolId:e.aws_cognito_identity_pool_id,identityPoolRegion:e.aws_cognito_region,mandatorySignIn:"enable"===e.aws_mandatory_sign_in}),r=e.aws_user_files_s3_bucket?{AWSS3:{bucket:e.aws_user_files_s3_bucket,region:e.aws_user_files_s3_bucket_region,dangerouslyConnectToHttpEndpointForTesting:e.aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing}}:e?e.Storage||e:{},e.Logging&&(t.Logging=r_(r_({},e.Logging),{region:e.aws_project_region})),e.geo&&(t.Geo=Object.assign({},e.geo),e.geo.amazon_location_service&&(t.Geo={AmazonLocationService:e.geo.amazon_location_service})),t.Analytics=Object.assign({},t.Analytics,e.Analytics),t.Auth=Object.assign({},t.Auth,e.Auth),t.Storage=Object.assign({},r),t.Logging=Object.assign({},t.Logging,e.Logging),qz.debug("parse config",e,"to amplifyconfig",t),t},Wz=U(7691),YP=U.n(Wz),ah={},Zz=function(){function e(){}return e.setItem=function(t,n){return ah[t]=n,ah[t]},e.getItem=function(t){return Object.prototype.hasOwnProperty.call(ah,t)?ah[t]:void 0},e.removeItem=function(t){return delete ah[t]},e.clear=function(){return ah={}},e}(),Jz=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.amplify.test-ls",1),this.storageWindow.removeItem("aws.amplify.test-ls")}catch{this.storageWindow=Zz}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),Kz=[{type:"text/plain",ext:"txt"},{type:"text/html",ext:"html"},{type:"text/javascript",ext:"js"},{type:"text/css",ext:"css"},{type:"text/csv",ext:"csv"},{type:"text/yaml",ext:"yml"},{type:"text/yaml",ext:"yaml"},{type:"text/calendar",ext:"ics"},{type:"text/calendar",ext:"ical"},{type:"image/apng",ext:"apng"},{type:"image/bmp",ext:"bmp"},{type:"image/gif",ext:"gif"},{type:"image/x-icon",ext:"ico"},{type:"image/x-icon",ext:"cur"},{type:"image/jpeg",ext:"jpg"},{type:"image/jpeg",ext:"jpeg"},{type:"image/jpeg",ext:"jfif"},{type:"image/jpeg",ext:"pjp"},{type:"image/jpeg",ext:"pjpeg"},{type:"image/png",ext:"png"},{type:"image/svg+xml",ext:"svg"},{type:"image/tiff",ext:"tif"},{type:"image/tiff",ext:"tiff"},{type:"image/webp",ext:"webp"},{type:"application/json",ext:"json"},{type:"application/xml",ext:"xml"},{type:"application/x-sh",ext:"sh"},{type:"application/zip",ext:"zip"},{type:"application/x-rar-compressed",ext:"rar"},{type:"application/x-tar",ext:"tar"},{type:"application/x-bzip",ext:"bz"},{type:"application/x-bzip2",ext:"bz2"},{type:"application/pdf",ext:"pdf"},{type:"application/java-archive",ext:"jar"},{type:"application/msword",ext:"doc"},{type:"application/vnd.ms-excel",ext:"xls"},{type:"application/vnd.ms-excel",ext:"xlsx"},{type:"message/rfc822",ext:"eml"}],Yz=function(e){return void 0===e&&(e={}),0===Object.keys(e).length},Xz=function(e,t,n){if(!e||!e.sort)return!1;var r=n&&"desc"===n?-1:1;return e.sort(function(i,o){var s=i[t],u=o[t];return typeof u>"u"?typeof s>"u"?0:1*r:typeof s>"u"||s<u?-1*r:s>u?1*r:0}),!0},Qz=function(e,t){var n=Object.assign({},e);return t&&("string"==typeof t?delete n[t]:t.forEach(function(r){delete n[r]})),n},eB=function(e,t){void 0===t&&(t="application/octet-stream");var n=e.toLowerCase(),r=Kz.filter(function(i){return n.endsWith("."+i.ext)});return r.length>0?r[0].type:t},tB=function(e){var t=e.toLowerCase();return!!t.startsWith("text/")||"application/json"===t||"application/xml"===t||"application/sh"===t},nB=function(){for(var e="",t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=32;n>0;n-=1)e+=t[Math.floor(Math.random()*t.length)];return e},XP=function(e){if(e.isResolved)return e;var t=!0,n=!1,r=!1,i=e.then(function(o){return r=!0,t=!1,o},function(o){throw n=!0,t=!1,o});return i.isFullfilled=function(){return r},i.isPending=function(){return t},i.isRejected=function(){return n},i},rB=function(){if(typeof self>"u")return!1;var e=self;return typeof e.WorkerGlobalScope<"u"&&self instanceof e.WorkerGlobalScope},Lg=function(){return{isBrowser:typeof window<"u"&&typeof window.document<"u",isNode:typeof process<"u"&&null!=process.versions&&null!=process.versions.node}},QP=function(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),!M1(e))return e;var r={};for(var i in e)e.hasOwnProperty(i)&&(r[t.includes(i)?i:i[0].toLowerCase()+i.slice(1)]=n.includes(i)?e[i]:QP(e[i],t,n));return r},eD=function(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),!M1(e))return e;var r={};for(var i in e)e.hasOwnProperty(i)&&(r[t.includes(i)?i:i[0].toUpperCase()+i.slice(1)]=n.includes(i)?e[i]:eD(e[i],t,n));return r},M1=function(e){return!(!(e instanceof Object)||e instanceof Array||e instanceof Function||e instanceof Number||e instanceof String||e instanceof Boolean)};!function(){function e(){}e.isEmpty=Yz,e.sortByField=Xz,e.objectLessAttributes=Qz,e.filenameToContentType=eB,e.isTextFile=tB,e.generateRandomString=nB,e.makeQuerablePromise=XP,e.isWebWorker=rB,e.browserOrNode=Lg,e.transferKeyToLowerCase=QP,e.transferKeyToUpperCase=eD,e.isStrictObject=M1}();var sf=new $u("CognitoCredentials"),aB=new Promise(function(e,t){return Lg().isBrowser?window.gapi&&window.gapi.auth2&&window.gapi.auth2?(sf.debug("google api already loaded"),e()):void setTimeout(function(){return e()},2e3):(sf.debug("not in the browser, directly resolved"),e())}),sB=function(){function e(){this.initialized=!1,this.refreshGoogleToken=this.refreshGoogleToken.bind(this),this._refreshGoogleTokenImpl=this._refreshGoogleTokenImpl.bind(this)}return e.prototype.refreshGoogleToken=function(){return function(e,t,n,r){return new(n||(n=Promise))(function(o,s){function u(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(u,g)}d((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function(){return function(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}(this,function(t){switch(t.label){case 0:return this.initialized?[3,2]:(sf.debug("need to wait for the Google SDK loaded"),[4,aB]);case 1:t.sent(),this.initialized=!0,sf.debug("finish waiting"),t.label=2;case 2:return[2,this._refreshGoogleTokenImpl()]}})})},e.prototype._refreshGoogleTokenImpl=function(){var t=null;return Lg().isBrowser&&(t=window.gapi&&window.gapi.auth2?window.gapi.auth2:null),t?new Promise(function(n,r){t.getAuthInstance().then(function(i){i||(sf.debug("google Auth undefined"),r(new rh("google Auth undefined")));var o=i.currentUser.get();o.isSignedIn()?(sf.debug("refreshing the google access token"),o.reloadAuthResponse().then(function(s){n({token:s.id_token,expires_at:s.expires_at})}).catch(function(s){r(s&&"network_error"===s.error?"Network error reloading google auth response":new rh("Failed to reload google auth response"))})):r(new rh("User is not signed in with Google"))}).catch(function(i){sf.debug("Failed to refresh google token",i),r(new rh("Failed to refresh google token"))})}):(sf.debug("no gapi auth2 available"),Promise.reject("no gapi auth2 available"))},e}(),sh=new $u("CognitoCredentials"),cB=new Promise(function(e,t){return Lg().isBrowser?window.FB?(sh.debug("FB SDK already loaded"),e()):void setTimeout(function(){return e()},2e3):(sh.debug("not in the browser, directly resolved"),e())}),dB=function(){function e(){this.initialized=!1,this.refreshFacebookToken=this.refreshFacebookToken.bind(this),this._refreshFacebookTokenImpl=this._refreshFacebookTokenImpl.bind(this)}return e.prototype.refreshFacebookToken=function(){return function(e,t,n,r){return new(n||(n=Promise))(function(o,s){function u(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(u,g)}d((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function(){return function(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}(this,function(t){switch(t.label){case 0:return this.initialized?[3,2]:(sh.debug("need to wait for the Facebook SDK loaded"),[4,cB]);case 1:t.sent(),this.initialized=!0,sh.debug("finish waiting"),t.label=2;case 2:return[2,this._refreshFacebookTokenImpl()]}})})},e.prototype._refreshFacebookTokenImpl=function(){var t=null;if(Lg().isBrowser&&(t=window.FB),!t){var n="no fb sdk available";return sh.debug(n),Promise.reject(new rh(n))}return new Promise(function(r,i){t.getLoginStatus(function(o){if(o&&o.authResponse){var u=o.authResponse,g=u.accessToken,x=1e3*u.expiresIn+(new Date).getTime();g||(sh.debug(s="the jwtToken is undefined"),i(new rh(s))),r({token:g,expires_at:x})}else{var s;sh.debug(s="no response from facebook when refreshing the jwt token"),i(new rh(s))}},{scope:"public_profile,email"})})},e}(),fB=new sB,hB=new dB;function L1(e,t,n,r){return new(n||(n=Promise))(function(o,s){function u(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(u,g)}d((r=r.apply(e,t||[])).next())})}function N1(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}var o_=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce({},t)}}(o_||(o_={})),o_))(),a_=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce({},t)}}(a_||(a_={})),a_))(),s_=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce({},t)}}(s_||(s_={})),s_))(),l_=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce({},t)}}(l_||(l_={})),l_))(),iD=function(){function e(t){this.statusCode=t.statusCode,this.headers=t.headers||{},this.body=t.body}return e.isInstance=function(t){return!!t&&("number"==typeof t.statusCode&&"object"==typeof t.headers)},e}(),lh=function(){return lh=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},lh.apply(this,arguments)};function pB(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}var Vp=function(){function e(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?":"!==t.protocol.substr(-1)?t.protocol+":":t.protocol:"https:",this.path=t.path?"/"!==t.path.charAt(0)?"/"+t.path:t.path:"/"}return e.isInstance=function(t){return!!t&&("method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers)},e.prototype.clone=function(){var t=new e(lh(lh({},this),{headers:lh({},this.headers)}));return t.query&&(t.query=function gB(e){return Object.keys(e).reduce(function(t,n){var r,i=e[n];return lh(lh({},t),((r={})[n]=Array.isArray(i)?function mB(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(pB(arguments[t]));return e}(i):i,r))},{})}(t.query)),t},e}(),CB=function(e,t){return qt(void 0,void 0,void 0,function(){var n,r,i,o,u,g,d,_,x,b,I,k,M,Se,ke;return Ot(this,function(lt){switch(lt.label){case 0:return r=[Ce({},e)],ke={},[4,di(e.body,t)];case 1:switch(n=Ce.apply(void 0,r.concat([(ke.body=lt.sent(),ke)])),o="UnknownError",o=Fa(e,n.body)){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":return[3,6];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return u=[{}],[4,c_(n,t)];case 3:return i=Ce.apply(void 0,[Ce.apply(void 0,u.concat([lt.sent()])),{name:o,$metadata:ht(e)}]),[3,19];case 4:return g=[{}],[4,Oa(n,t)];case 5:return i=Ce.apply(void 0,[Ce.apply(void 0,g.concat([lt.sent()])),{name:o,$metadata:ht(e)}]),[3,19];case 6:return d=[{}],[4,GB(n,t)];case 7:return i=Ce.apply(void 0,[Ce.apply(void 0,d.concat([lt.sent()])),{name:o,$metadata:ht(e)}]),[3,19];case 8:return _=[{}],[4,La(n,t)];case 9:return i=Ce.apply(void 0,[Ce.apply(void 0,_.concat([lt.sent()])),{name:o,$metadata:ht(e)}]),[3,19];case 10:return x=[{}],[4,Xa(n,t)];case 11:return i=Ce.apply(void 0,[Ce.apply(void 0,x.concat([lt.sent()])),{name:o,$metadata:ht(e)}]),[3,19];case 12:return b=[{}],[4,gu(n,t)];case 13:return i=Ce.apply(void 0,[Ce.apply(void 0,b.concat([lt.sent()])),{name:o,$metadata:ht(e)}]),[3,19];case 14:return I=[{}],[4,cs(n,t)];case 15:return i=Ce.apply(void 0,[Ce.apply(void 0,I.concat([lt.sent()])),{name:o,$metadata:ht(e)}]),[3,19];case 16:return k=[{}],[4,Na(n,t)];case 17:return i=Ce.apply(void 0,[Ce.apply(void 0,k.concat([lt.sent()])),{name:o,$metadata:ht(e)}]),[3,19];case 18:o=(M=n.body).code||M.Code||o,i=Ce(Ce({},M),{name:""+o,message:M.message||M.Message||o,$fault:"client",$metadata:ht(e)}),lt.label=19;case 19:return i.message=Se=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(Se),i))]}})})},TB=function(e,t){return qt(void 0,void 0,void 0,function(){var n,r,i,o,u,g,d,_,x,b,I,k,M,Se,ke;return Ot(this,function(lt){switch(lt.label){case 0:return r=[Ce({},e)],ke={},[4,di(e.body,t)];case 1:switch(n=Ce.apply(void 0,r.concat([(ke.body=lt.sent(),ke)])),o="UnknownError",o=Fa(e,n.body)){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return u=[{}],[4,c_(n,t)];case 3:return i=Ce.apply(void 0,[Ce.apply(void 0,u.concat([lt.sent()])),{name:o,$metadata:ht(e)}]),[3,19];case 4:return g=[{}],[4,Oa(n,t)];case 5:return i=Ce.apply(void 0,[Ce.apply(void 0,g.concat([lt.sent()])),{name:o,$metadata:ht(e)}]),[3,19];case 6:return d=[{}],[4,La(n,t)];case 7:return i=Ce.apply(void 0,[Ce.apply(void 0,d.concat([lt.sent()])),{name:o,$metadata:ht(e)}]),[3,19];case 8:return _=[{}],[4,F1(n,t)];case 9:return i=Ce.apply(void 0,[Ce.apply(void 0,_.concat([lt.sent()])),{name:o,$metadata:ht(e)}]),[3,19];case 10:return x=[{}],[4,Xa(n,t)];case 11:return i=Ce.apply(void 0,[Ce.apply(void 0,x.concat([lt.sent()])),{name:o,$metadata:ht(e)}]),[3,19];case 12:return b=[{}],[4,gu(n,t)];case 13:return i=Ce.apply(void 0,[Ce.apply(void 0,b.concat([lt.sent()])),{name:o,$metadata:ht(e)}]),[3,19];case 14:return I=[{}],[4,cs(n,t)];case 15:return i=Ce.apply(void 0,[Ce.apply(void 0,I.concat([lt.sent()])),{name:o,$metadata:ht(e)}]),[3,19];case 16:return k=[{}],[4,Na(n,t)];case 17:return i=Ce.apply(void 0,[Ce.apply(void 0,k.concat([lt.sent()])),{name:o,$metadata:ht(e)}]),[3,19];case 18:o=(M=n.body).code||M.Code||o,i=Ce(Ce({},M),{name:""+o,message:M.message||M.Message||o,$fault:"client",$metadata:ht(e)}),lt.label=19;case 19:return i.message=Se=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(Se),i))]}})})},c_=function(e,t){return qt(void 0,void 0,void 0,function(){var r;return Ot(this,function(o){return r=Pj(e.body,t),[2,Ce({name:"ExternalServiceException",$fault:"client",$metadata:ht(e)},r)]})})},Oa=function(e,t){return qt(void 0,void 0,void 0,function(){var r;return Ot(this,function(o){return r=zj(e.body,t),[2,Ce({name:"InternalErrorException",$fault:"server",$metadata:ht(e)},r)]})})},GB=function(e,t){return qt(void 0,void 0,void 0,function(){var r;return Ot(this,function(o){return r=Bj(e.body,t),[2,Ce({name:"InvalidIdentityPoolConfigurationException",$fault:"client",$metadata:ht(e)},r)]})})},La=function(e,t){return qt(void 0,void 0,void 0,function(){var r;return Ot(this,function(o){return r=jj(e.body,t),[2,Ce({name:"InvalidParameterException",$fault:"client",$metadata:ht(e)},r)]})})},F1=function(e,t){return qt(void 0,void 0,void 0,function(){var r;return Ot(this,function(o){return r=Uj(e.body,t),[2,Ce({name:"LimitExceededException",$fault:"client",$metadata:ht(e)},r)]})})},Xa=function(e,t){return qt(void 0,void 0,void 0,function(){var r;return Ot(this,function(o){return r=Kj(e.body,t),[2,Ce({name:"NotAuthorizedException",$fault:"client",$metadata:ht(e)},r)]})})},gu=function(e,t){return qt(void 0,void 0,void 0,function(){var r;return Ot(this,function(o){return r=Xj(e.body,t),[2,Ce({name:"ResourceConflictException",$fault:"client",$metadata:ht(e)},r)]})})},cs=function(e,t){return qt(void 0,void 0,void 0,function(){var r;return Ot(this,function(o){return r=Qj(e.body,t),[2,Ce({name:"ResourceNotFoundException",$fault:"client",$metadata:ht(e)},r)]})})},Na=function(e,t){return qt(void 0,void 0,void 0,function(){var r;return Ot(this,function(o){return r=a5(e.body,t),[2,Ce({name:"TooManyRequestsException",$fault:"client",$metadata:ht(e)},r)]})})},Ng=function(e,t){return Object.entries(e).reduce(function(n,r){var i,o=qr(r,2),s=o[0],u=o[1];return null===u?n:Ce(Ce({},n),((i={})[s]=u,i))},{})},Sj=function(e,t){return{AccessKeyId:null!=e.AccessKeyId?e.AccessKeyId:void 0,Expiration:null!=e.Expiration?new Date(Math.round(1e3*e.Expiration)):void 0,SecretKey:null!=e.SecretKey?e.SecretKey:void 0,SessionToken:null!=e.SessionToken?e.SessionToken:void 0}},Pj=function(e,t){return{message:null!=e.message?e.message:void 0}},zj=function(e,t){return{message:null!=e.message?e.message:void 0}},Bj=function(e,t){return{message:null!=e.message?e.message:void 0}},jj=function(e,t){return{message:null!=e.message?e.message:void 0}},Uj=function(e,t){return{message:null!=e.message?e.message:void 0}},Kj=function(e,t){return{message:null!=e.message?e.message:void 0}},Xj=function(e,t){return{message:null!=e.message?e.message:void 0}},Qj=function(e,t){return{message:null!=e.message?e.message:void 0}},a5=function(e,t){return{message:null!=e.message?e.message:void 0}},ht=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},ka=function(e,t,n,r,i){return qt(void 0,void 0,void 0,function(){var o,u,_;return Ot(this,function(x){switch(x.label){case 0:return[4,e.endpoint()];case 1:return o=x.sent(),_={protocol:void 0===(u=o.protocol)?"https":u,hostname:o.hostname,port:o.port,method:"POST",path:n,headers:t},void 0!==r&&(_.hostname=r),void 0!==i&&(_.body=i),[2,new Vp(_)]}})})},di=function(e,t){return function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then(function(n){return t.utf8Encoder(n)})}(e,t).then(function(n){return n.length?JSON.parse(n):{}})},Fa=function(e,t){var r=function(o){var s=o;return s.indexOf(":")>=0&&(s=s.split(":")[0]),s.indexOf("#")>=0&&(s=s.split("#")[1]),s},i=("x-amzn-errortype",Object.keys(e.headers).find(function(u){return u.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==i?r(e.headers[i]):void 0!==t.code?r(t.code):void 0!==t.__type?r(t.__type):""},d_=function(){return d_=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},d_.apply(this,arguments)};function hD(e,t,n,r){return new(n||(n=Promise))(function(o,s){function u(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(u,g)}d((r=r.apply(e,t||[])).next())})}function pD(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}var p5={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},m5={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function gD(e,t,n){return{applyToStack:function(r){r.add(function(e,t){return function(n,r){return function(i){return hD(void 0,void 0,void 0,function(){var o,s;return pD(this,function(u){switch(u.label){case 0:return[4,n(i)];case 1:return o=u.sent().response,[4,t(o,e)];case 2:return s=u.sent(),[2,{response:o,output:s}]}})})}}}(e,n),p5),r.add(function(e,t){return function(n,r){return function(i){return hD(void 0,void 0,void 0,function(){var o;return pD(this,function(s){switch(s.label){case 0:return[4,t(i.input,e)];case 1:return o=s.sent(),[2,n(d_(d_({},i),{request:o}))]}})})}}}(e,t),m5)}}}var gc=function(){return gc=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},gc.apply(this,arguments)};function g5(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function G1(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g5(arguments[t]));return e}var p_=function(){var e=[],t=[],n=new Set,s=function(_){return e.forEach(function(x){_.add(x.middleware,gc({},x))}),t.forEach(function(x){_.addRelativeTo(x.middleware,gc({},x))}),_},u=function(_){var x=[];return _.before.forEach(function(b){0===b.before.length&&0===b.after.length?x.push(b):x.push.apply(x,G1(u(b)))}),x.push(_),_.after.reverse().forEach(function(b){0===b.before.length&&0===b.after.length?x.push(b):x.push.apply(x,G1(u(b)))}),x},d={add:function(_,x){void 0===x&&(x={});var b=x.name,I=x.override,k=gc({step:"initialize",priority:"normal",middleware:_},x);if(b){if(n.has(b)){if(!I)throw new Error("Duplicate middleware name '"+b+"'");var M=e.findIndex(function(ke){return ke.name===b}),Se=e[M];if(Se.step!==k.step||Se.priority!==k.priority)throw new Error('"'+b+'" middleware with '+Se.priority+" priority in "+Se.step+" step cannot be overridden by same-name middleware with "+k.priority+" priority in "+k.step+" step.");e.splice(M,1)}n.add(b)}e.push(k)},addRelativeTo:function(_,x){var b=x.name,I=x.override,k=gc({middleware:_},x);if(b){if(n.has(b)){if(!I)throw new Error("Duplicate middleware name '"+b+"'");var M=t.findIndex(function(ke){return ke.name===b}),Se=t[M];if(Se.toMiddleware!==k.toMiddleware||Se.relation!==k.relation)throw new Error('"'+b+'" middleware '+Se.relation+' "'+Se.toMiddleware+'" middleware cannot be overridden by same-name middleware '+k.relation+' "'+k.toMiddleware+'" middleware.');t.splice(M,1)}n.add(b)}t.push(k)},clone:function(){return s(p_())},use:function(_){_.applyToStack(d)},remove:function(_){return"string"==typeof _?function(_){var x=!1,b=function(I){return!I.name||I.name!==_||(x=!0,n.delete(_),!1)};return e=e.filter(b),t=t.filter(b),x}(_):function(_){var x=!1,b=function(I){return I.middleware!==_||(x=!0,I.name&&n.delete(I.name),!1)};return e=e.filter(b),t=t.filter(b),x}(_)},removeByTag:function(_){var x=!1,b=function(I){var k=I.tags,M=I.name;return!k||!k.includes(_)||(M&&n.delete(M),x=!0,!1)};return e=e.filter(b),t=t.filter(b),x},concat:function(_){var x=s(p_());return x.use(_),x},applyToStack:s,resolve:function(_,x){var b,I;try{for(var k=function V1(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(function(){var _=[],x=[],b={};e.forEach(function(k){var M=gc(gc({},k),{before:[],after:[]});M.name&&(b[M.name]=M),_.push(M)}),t.forEach(function(k){var M=gc(gc({},k),{before:[],after:[]});M.name&&(b[M.name]=M),x.push(M)}),x.forEach(function(k){if(k.toMiddleware){var M=b[k.toMiddleware];if(void 0===M)throw new Error(k.toMiddleware+" is not found when adding "+(k.name||"anonymous")+" middleware "+k.relation+" "+k.toMiddleware);"after"===k.relation&&M.after.push(k),"before"===k.relation&&M.before.push(k)}});var I=function(_){return _.sort(function(x,b){return yD[b.step]-yD[x.step]||vD[b.priority||"normal"]-vD[x.priority||"normal"]})}(_).map(u).reduce(function(k,M){return k.push.apply(k,G1(M)),k},[]);return I.map(function(k){return k.middleware})}().reverse()),M=k.next();!M.done;M=k.next())_=(0,M.value)(_,x)}catch(ke){b={error:ke}}finally{try{M&&!M.done&&(I=k.return)&&I.call(k)}finally{if(b)throw b.error}}return _}};return d},yD={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},vD={high:3,normal:2,low:1},y5=function(){function e(t){this.middlewareStack=p_(),this.config=t}return e.prototype.send=function(t,n,r){var o="function"==typeof n?n:r,s=t.resolveMiddleware(this.middlewareStack,this.config,"function"!=typeof n?n:void 0);if(!o)return s(t).then(function(u){return u.output});s(t).then(function(u){return o(null,u.output)},function(u){return o(u)}).catch(function(){})},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),_D=function e(){this.middlewareStack=p_()},H1=function(e,t){return(H1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])})(e,t)};function _5(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function b5(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(_5(arguments[t]));return e}var g_=function(){var e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,b5([null],arguments)),n=new t;return Object.setPrototypeOf(n,e.prototype),n};g_.prototype=Object.create(String.prototype,{constructor:{value:g_,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(g_,String),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}(function v5(e,t){function n(){this.constructor=e}H1(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(t,e),t.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},t.prototype.toJSON=function(){return e.prototype.toString.call(this)},t.fromObject=function(n){return n instanceof t?n:new t(n instanceof String||"string"==typeof n?n:JSON.stringify(n))}}(g_);var $1=function(e){function t(n){var r=e.call(this)||this;return r.input=n,r}return Wt(t,e),t.prototype.resolveMiddleware=function(n,r,i){this.middlewareStack.use(gD(r,this.serialize,this.deserialize));var o=n.concat(this.middlewareStack),_=r.requestHandler;return o.resolve(function(x){return _.handle(x.request,i||{})},{logger:r.logger,clientName:"CognitoIdentityClient",commandName:"GetCredentialsForIdentityCommand",inputFilterSensitiveLog:o_.filterSensitiveLog,outputFilterSensitiveLog:a_.filterSensitiveLog})},t.prototype.serialize=function(n,r){return function(e,t){return qt(void 0,void 0,void 0,function(){var n,r;return Ot(this,function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetCredentialsForIdentity"},r=JSON.stringify(function(e,t){return Ce(Ce(Ce({},null!=e.CustomRoleArn&&{CustomRoleArn:e.CustomRoleArn}),null!=e.IdentityId&&{IdentityId:e.IdentityId}),null!=e.Logins&&{Logins:Ng(e.Logins,t)})}(e,t)),[2,ka(t,n,"/",void 0,r)]})})}(n,r)},t.prototype.deserialize=function(n,r){return function(e,t){return qt(void 0,void 0,void 0,function(){var n,r,i;return Ot(this,function(o){switch(o.label){case 0:return e.statusCode>=300?[2,CB(e,t)]:[4,di(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{Credentials:null!=e.Credentials?Sj(e.Credentials):void 0,IdentityId:null!=e.IdentityId?e.IdentityId:void 0}}(n),i=Ce({$metadata:ht(e)},r),[2,Promise.resolve(i)]}})})}(n,r)},t}(_D),q1=function(e,t){return(q1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])})(e,t)},v_=function(e){function t(n,r){void 0===r&&(r=!0);var i=e.call(this,n)||this;return i.tryNextLink=r,i}return function w5(e,t){function n(){this.constructor=e}q1(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error);function SD(e){return Promise.all(Object.keys(e).reduce(function(t,n){var r=e[n];return t.push("string"==typeof r?[n,r]:r().then(function(i){return[n,i]})),t},[])).then(function(t){return t.reduce(function(n,r){var i=function rD(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}(r,2);return n[i[0]]=i[1],n},{})})}function Fg(e){var t=this;return function(){return L1(t,void 0,void 0,function(){var n,r,i,o,s,u,g,_,x,b,I,k;return N1(this,function(M){switch(M.label){case 0:return x=(_=e.client).send,b=$1.bind,k={CustomRoleArn:e.customRoleArn,IdentityId:e.identityId},e.logins?[4,SD(e.logins)]:[3,2];case 1:return I=M.sent(),[3,3];case 2:I=void 0,M.label=3;case 3:return[4,x.apply(_,[new(b.apply($1,[void 0,(k.Logins=I,k)]))])];case 4:return n=M.sent().Credentials,r=void 0===n?function S5(){throw new v_("Response from Amazon Cognito contained no credentials")}():n,o=void 0===(i=r.AccessKeyId)?function E5(){throw new v_("Response from Amazon Cognito contained no access key ID")}():i,s=r.Expiration,g=void 0===(u=r.SecretKey)?function C5(){throw new v_("Response from Amazon Cognito contained no secret key")}():u,[2,{identityId:e.identityId,accessKeyId:o,secretAccessKey:g,sessionToken:r.SessionToken,expiration:s}]}})})}}var zg=function(e){function t(n){var r=e.call(this)||this;return r.input=n,r}return Wt(t,e),t.prototype.resolveMiddleware=function(n,r,i){this.middlewareStack.use(gD(r,this.serialize,this.deserialize));var o=n.concat(this.middlewareStack),_=r.requestHandler;return o.resolve(function(x){return _.handle(x.request,i||{})},{logger:r.logger,clientName:"CognitoIdentityClient",commandName:"GetIdCommand",inputFilterSensitiveLog:s_.filterSensitiveLog,outputFilterSensitiveLog:l_.filterSensitiveLog})},t.prototype.serialize=function(n,r){return function(e,t){return qt(void 0,void 0,void 0,function(){var n,r;return Ot(this,function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetId"},r=JSON.stringify(function(e,t){return Ce(Ce(Ce({},null!=e.AccountId&&{AccountId:e.AccountId}),null!=e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId}),null!=e.Logins&&{Logins:Ng(e.Logins,t)})}(e,t)),[2,ka(t,n,"/",void 0,r)]})})}(n,r)},t.prototype.deserialize=function(n,r){return function(e,t){return qt(void 0,void 0,void 0,function(){var n,r,i;return Ot(this,function(o){switch(o.label){case 0:return e.statusCode>=300?[2,TB(e,t)]:[4,di(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{IdentityId:null!=e.IdentityId?e.IdentityId:void 0}}(n),i=Ce({$metadata:ht(e)},r),[2,Promise.resolve(i)]}})})}(n,r)},t}(_D),W1="IdentityIds",I5=function(){function e(t){void 0===t&&(t="aws:cognito-identity-ids"),this.dbName=t}return e.prototype.getItem=function(t){return this.withObjectStore("readonly",function(n){var r=n.get(t);return new Promise(function(i){r.onerror=function(){return i(null)},r.onsuccess=function(){return i(r.result?r.result.value:null)}})}).catch(function(){return null})},e.prototype.removeItem=function(t){return this.withObjectStore("readwrite",function(n){var r=n.delete(t);return new Promise(function(i,o){r.onerror=function(){return o(r.error)},r.onsuccess=function(){return i()}})})},e.prototype.setItem=function(t,n){return this.withObjectStore("readwrite",function(r){var i=r.put({id:t,value:n});return new Promise(function(o,s){i.onerror=function(){return s(i.error)},i.onsuccess=function(){return o()}})})},e.prototype.getDb=function(){var t=self.indexedDB.open(this.dbName,1);return new Promise(function(n,r){t.onsuccess=function(){n(t.result)},t.onerror=function(){r(t.error)},t.onblocked=function(){r(new Error("Unable to access DB"))},t.onupgradeneeded=function(){var i=t.result;i.onerror=function(){r(new Error("Failed to create object store"))},i.createObjectStore(W1,{keyPath:"id"})}})},e.prototype.withObjectStore=function(t,n){return this.getDb().then(function(r){var i=r.transaction(W1,t);return i.oncomplete=function(){return r.close()},new Promise(function(o,s){i.onerror=function(){return s(i.error)},o(n(i.objectStore(W1)))}).catch(function(o){throw r.close(),o})})},e}(),T5=function(){function e(t){void 0===t&&(t={}),this.store=t}return e.prototype.getItem=function(t){return t in this.store?this.store[t]:null},e.prototype.removeItem=function(t){delete this.store[t]},e.prototype.setItem=function(t,n){this.store[t]=n},e}(),P5=new T5;var O5=U(9801);function ID(e,t,n,r){return new(n||(n=Promise))(function(o,s){function u(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(u,g)}d((r=r.apply(e,t||[])).next())})}function TD(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}var uh=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,k5)},k5=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function z5(e){return void 0===e&&(e=0),new Promise(function(t,n){e&&setTimeout(function(){var r=new Error("Request did not complete within "+e+" ms");r.name="TimeoutError",n(r)},e)})}for(var B5=function(){function e(t){this.requestTimeout=(void 0===t?{}:t).requestTimeout}return e.prototype.destroy=function(){},e.prototype.handle=function(t,n){var i=(void 0===n?{}:n).abortSignal,o=this.requestTimeout;if(i?.aborted){var s=new Error("Request aborted");return s.name="AbortError",Promise.reject(s)}var u=t.path;if(t.query){var g=function F5(e){var t,n,r=[];try{for(var i=function Y1(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var s=o.value,u=e[s];if(s=uh(s),Array.isArray(u))for(var g=0,d=u.length;g<d;g++)r.push(s+"="+uh(u[g]));else{var _=s;(u||"string"==typeof u)&&(_+="="+uh(u)),r.push(_)}}}catch(x){t={error:x}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}(t.query);g&&(u+="?"+g)}var d=t.port,_=t.method,x=t.protocol+"//"+t.hostname+(d?":"+d:"")+u,I={body:"GET"===_||"HEAD"===_?void 0:t.body,headers:new Headers(t.headers),method:_};typeof AbortController<"u"&&(I.signal=i);var k=new Request(x,I),M=[fetch(k).then(function(Se){var ke,lt,et=Se.headers,Mt={};try{for(var Ht=function J1(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(et.entries()),Un=Ht.next();!Un.done;Un=Ht.next()){var si=Un.value;Mt[si[0]]=si[1]}}catch(Qo){ke={error:Qo}}finally{try{Un&&!Un.done&&(lt=Ht.return)&&lt.call(Ht)}finally{if(ke)throw ke.error}}return void 0!==Se.body?{response:new iD({headers:Mt,statusCode:Se.status,body:Se.body})}:Se.blob().then(function(Qo){return{response:new iD({headers:Mt,statusCode:Se.status,body:Qo})}})}),z5(o)];return i&&M.push(new Promise(function(Se,ke){i.onabort=function(){var lt=new Error("Request aborted");lt.name="AbortError",ke(lt)}})),Promise.race(M)},e}(),ch={},Gp=new Array(64),ks=0,Bg="A".charCodeAt(0),X1="Z".charCodeAt(0);ks+Bg<=X1;ks++){var lf=String.fromCharCode(ks+Bg);ch[lf]=ks,Gp[ks]=lf}for(ks=0,Bg="a".charCodeAt(0),X1="z".charCodeAt(0);ks+Bg<=X1;ks++)lf=String.fromCharCode(ks+Bg),ch[lf]=jg=ks+26,Gp[jg]=lf;for(ks=0;ks<10;ks++){var jg;ch[ks.toString(10)]=ks+52,lf=ks.toString(10),ch[lf]=jg=ks+52,Gp[jg]=lf}function DD(e){var t=e.length/4*3;"=="===e.substr(-2)?t-=2:"="===e.substr(-1)&&t--;for(var n=new ArrayBuffer(t),r=new DataView(n),i=0;i<e.length;i+=4){for(var o=0,s=0,u=i,g=i+3;u<=g;u++)"="!==e[u]?(o|=ch[e[u]]<<6*(g-u),s+=6):o>>=6;var d=i/4*3;o>>=s%8;for(var _=Math.floor(s/8),x=0;x<_;x++){var b=8*(_-x-1);r.setUint8(d+x,(o&255<<b)>>b)}}return new Uint8Array(n)}function $5(e){return new Promise(function(t,n){var r=new FileReader;r.onloadend=function(){var i;if(2!==r.readyState)return n(new Error("Reader aborted too early"));var o=null!==(i=r.result)&&void 0!==i?i:"",s=o.indexOf(",");t(o.substring(s>-1?s+1:o.length))},r.onabort=function(){return n(new Error("Read aborted"))},r.onerror=function(){return n(r.error)},r.readAsDataURL(e)})}ch["+"]=62,Gp[62]="+",ch["/"]=63,Gp[63]="/";var w_=function(){return w_=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},w_.apply(this,arguments)};function ex(e,t,n,r){return new(n||(n=Promise))(function(o,s){function u(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(u,g)}d((r=r.apply(e,t||[])).next())})}function x_(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}function W5(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}var K5={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},e6=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],t6=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],n6=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],r6=[500,502,503,504],RD=function(e){var t,n;return 429===(null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||t6.includes(e.name)||1==(null===(n=e.$retryable)||void 0===n?void 0:n.throttling)},s6=U(9444),v6=function(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))},_6=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return e6.includes(e.name)}(e)||RD(e)||function(e){var t;return n6.includes(e.name)||r6.includes((null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||0)}(e))},b6=function(){function e(t,n){var r,i,o;this.maxAttemptsProvider=t,this.mode="standard",this.retryDecider=null!==(r=n?.retryDecider)&&void 0!==r?r:_6,this.delayDecider=null!==(i=n?.delayDecider)&&void 0!==i?i:v6,this.retryQuota=null!==(o=n?.retryQuota)&&void 0!==o?o:function(e){var n=500,r=function(u){return"TimeoutError"===u.name?10:5},i=function(u){return r(u)<=n};return Object.freeze({hasRetryTokens:i,retrieveRetryTokens:function(u){if(!i(u))throw new Error("No retry token available");var g=r(u);return n-=g,g},releaseRetryTokens:function(u){n+=u??1,n=Math.min(n,500)}})}()}return e.prototype.shouldRetry=function(t,n,r){return n<r&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)},e.prototype.getMaxAttempts=function(){return ex(this,void 0,void 0,function(){var t;return x_(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return t=r.sent(),[3,3];case 2:return r.sent(),t=3,[3,3];case 3:return[2,t]}})})},e.prototype.retry=function(t,n){return ex(this,void 0,void 0,function(){var r,i,o,s,u,g,d,_;return x_(this,function(x){switch(x.label){case 0:return i=0,o=0,[4,this.getMaxAttempts()];case 1:s=x.sent(),Vp.isInstance(u=n.request)&&(u.headers["amz-sdk-invocation-id"]=(0,s6.v4)()),g=function(){var b,I,k,M,Se;return x_(this,function(ke){switch(ke.label){case 0:return ke.trys.push([0,2,,5]),Vp.isInstance(u)&&(u.headers["amz-sdk-request"]="attempt="+(i+1)+"; max="+s),[4,t(n)];case 1:return b=ke.sent(),I=b.response,k=b.output,d.retryQuota.releaseRetryTokens(r),k.$metadata.attempts=i+1,k.$metadata.totalRetryDelay=o,[2,{value:{response:I,output:k}}];case 2:return M=ke.sent(),i++,d.shouldRetry(M,i,s)?(r=d.retryQuota.retrieveRetryTokens(M),Se=d.delayDecider(RD(M)?500:100,i),o+=Se,[4,new Promise(function(lt){return setTimeout(lt,Se)})]):[3,4];case 3:return ke.sent(),[2,"continue"];case 4:throw M.$metadata||(M.$metadata={}),M.$metadata.attempts=i,M.$metadata.totalRetryDelay=o,M;case 5:return[2]}})},d=this,x.label=2;case 2:return[5,g()];case 3:return"object"==typeof(_=x.sent())?[2,_.value]:[3,2];case 4:return[2]}})})},e}();var D6=U(7230),nx=U.n(D6),FD=U(2622),zD="cognito-identity.{region}.amazonaws.com",N6=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),k6=new Set(["cn-north-1","cn-northwest-1"]),F6=new Set(["us-iso-east-1"]),z6=new Set(["us-isob-east-1"]),B6=new Set(["us-gov-east-1","us-gov-west-1"]);function jD(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}var UD={apiVersion:"2014-06-30",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-northeast-1":n={hostname:"cognito-identity.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"cognito-identity.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"cognito-identity.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"cognito-identity.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"cognito-identity.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":n={hostname:"cognito-identity.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"cognito-identity.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"cognito-identity.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"cognito-identity.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"cognito-identity.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"cognito-identity.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"cognito-identity.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-east-1":n={hostname:"cognito-identity-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-east-2":n={hostname:"cognito-identity-fips.us-east-2.amazonaws.com",partition:"aws",signingRegion:"us-east-2"};break;case"fips-us-gov-west-1":n={hostname:"cognito-identity-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"fips-us-west-2":n={hostname:"cognito-identity-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"sa-east-1":n={hostname:"cognito-identity.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"cognito-identity.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"cognito-identity.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-west-1":n={hostname:"cognito-identity.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-west-1":n={hostname:"cognito-identity.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"cognito-identity.us-west-2.amazonaws.com",partition:"aws"};break;default:N6.has(e)&&(n={hostname:zD.replace("{region}",e),partition:"aws"}),k6.has(e)&&(n={hostname:"cognito-identity.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),F6.has(e)&&(n={hostname:"cognito-identity.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),z6.has(e)&&(n={hostname:"cognito-identity.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),B6.has(e)&&(n={hostname:"cognito-identity.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:zD.replace("{region}",e),partition:"aws"})}return Promise.resolve(Ce({signingService:"cognito-identity"},n))},serviceId:"Cognito Identity",urlParser:function(e){var u,t=new URL(e),n=t.hostname,r=t.pathname,i=t.port,o=t.protocol,s=t.search;return s&&(u=function U6(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var i=function ix(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e.split("&")),o=i.next();!o.done;o=i.next()){var u=jD(o.value.split("="),2),g=u[0],d=u[1],_=void 0===d?null:d;g=decodeURIComponent(g),_&&(_=decodeURIComponent(_)),g in r?Array.isArray(r[g])?r[g].push(_):r[g]=[r[g],_]:r[g]=_}}catch(x){t={error:x}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(s)),{hostname:n,port:i?parseInt(i):void 0,protocol:o,path:r,query:u}}},G6=Ce(Ce({},UD),{runtime:"browser",base64Decoder:DD,base64Encoder:function U5(e){for(var t="",n=0;n<e.length;n+=3){for(var r=0,i=0,o=n,s=Math.min(n+3,e.length);o<s;o++)r|=e[o]<<8*(s-o-1),i+=8;var u=Math.ceil(i/6);r<<=6*u-i;for(var g=1;g<=u;g++){var d=6*(u-g);t+=Gp[(r&63<<d)>>d]}t+="==".slice(0,4-u)}return t},bodyLengthChecker:function C6(e){if("string"==typeof e){for(var t=e.length,n=t-1;n>=0;n--){var r=e.charCodeAt(n);r>127&&r<=2047?t++:r>2047&&r<=65535&&(t+=2)}return t}return"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:void 0},credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:function(e){var t=e.serviceId,n=e.clientVersion;return function(){return function I6(e,t,n,r){return new(n||(n=Promise))(function(o,s){function u(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(u,g)}d((r=r.apply(e,t||[])).next())})}(void 0,void 0,void 0,function(){var r,i,o,s,u,g,d,_,x;return function T6(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}(this,function(b){return r=null!==(o=window?.navigator)&&void 0!==o&&o.userAgent?nx().parse(window.navigator.userAgent):void 0,i=[["aws-sdk-js",n],["os/"+((null===(s=r?.os)||void 0===s?void 0:s.name)||"other"),null===(u=r?.os)||void 0===u?void 0:u.version],["lang/js"],["md/browser",(null!==(d=null===(g=r?.browser)||void 0===g?void 0:g.name)&&void 0!==d?d:"unknown")+"_"+(null!==(x=null===(_=r?.browser)||void 0===_?void 0:_.version)&&void 0!==x?x:"unknown")]],t&&i.push(["api/"+t,n]),[2,i]})})}}({serviceId:UD.serviceId,clientVersion:"3.6.1"}),maxAttempts:3,region:function(){return Promise.reject("Region is missing")},requestHandler:new B5,sha256:O5.Sha256,streamCollector:function(e){return"function"==typeof Blob&&e instanceof Blob?function G5(e){return ID(this,void 0,void 0,function(){var t,n;return TD(this,function(r){switch(r.label){case 0:return[4,$5(e)];case 1:return t=r.sent(),n=DD(t),[2,new Uint8Array(n)]}})})}(e):function H5(e){return ID(this,void 0,void 0,function(){var t,n,r,i,o,s,u;return TD(this,function(g){switch(g.label){case 0:t=new Uint8Array(0),n=e.getReader(),r=!1,g.label=1;case 1:return r?[3,3]:[4,n.read()];case 2:return i=g.sent(),o=i.done,(s=i.value)&&(u=t,(t=new Uint8Array(u.length+s.length)).set(u),t.set(s,u.length)),r=o,[3,1];case 3:return[2,t]}})})}(e)},utf8Decoder:FD.fromUtf8,utf8Encoder:FD.toUtf8}),$p=function(){return $p=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},$p.apply(this,arguments)};var Z6=function(e){var t=e.endpoint;if("string"==typeof t){var r=Promise.resolve((0,e.urlParser)(t));return function(){return r}}if("object"==typeof t){var i=Promise.resolve(t);return function(){return i}}return t},J6=function(e){return function H6(e,t,n,r){return new(n||(n=Promise))(function(o,s){function u(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(u,g)}d((r=r.apply(e,t||[])).next())})}(void 0,void 0,void 0,function(){var t,n,r,o,s;return function $6(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}(this,function(u){switch(u.label){case 0:return n=void 0===(t=e.tls)||t,[4,e.region()];case 1:if(r=u.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");return[4,e.regionInfoProvider(r)];case 2:if(!(o=(null!==(s=u.sent())&&void 0!==s?s:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((n?"https:":"http:")+"//"+o)]}})})},Q6=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},qp=function(){return qp=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},qp.apply(this,arguments)};var HD="content-length",iU={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},oU=function(e){return{applyToStack:function(t){t.add(function rU(e){var t=this;return function(n){return function(r){return function eU(e,t,n,r){return new(n||(n=Promise))(function(o,s){function u(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(u,g)}d((r=r.apply(e,t||[])).next())})}(t,void 0,void 0,function(){var i,o,s,u,g;return function tU(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}(this,function(d){return Vp.isInstance(i=r.request)&&(s=i.headers,(o=i.body)&&-1===Object.keys(s).map(function(_){return _.toLowerCase()}).indexOf(HD)&&void 0!==(u=e(o))&&(i.headers=qp(qp({},i.headers),((g={})[HD]=String(u),g)))),[2,n(qp(qp({},r),{request:i}))]})})}}}(e.bodyLengthChecker),iU)}}};var cU={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},dU=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return function aU(e,t,n,r){return new(n||(n=Promise))(function(o,s){function u(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(u,g)}d((r=r.apply(e,t||[])).next())})}(void 0,void 0,void 0,function(){var r,i;return function sU(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}(this,function(s){return Vp.isInstance(n.request)?(r=n.request,(void 0===(i=(e.requestHandler.metadata||{}).handlerProtocol)?"":i).indexOf("h2")>=0&&!r.headers[":authority"]?(delete r.headers.host,r.headers[":authority"]=""):r.headers.host||(r.headers.host=r.hostname),[2,t(n)]):[2,t(n)]})})}}}(e),cU)}}};var gU=function(){return function(e,t){return function(n){return function hU(e,t,n,r){return new(n||(n=Promise))(function(o,s){function u(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(u,g)}d((r=r.apply(e,t||[])).next())})}(void 0,void 0,void 0,function(){var r,i,o,s,u,g,d,_,x;return function pU(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}(this,function(b){switch(b.label){case 0:return r=t.clientName,i=t.commandName,o=t.inputFilterSensitiveLog,s=t.logger,u=t.outputFilterSensitiveLog,[4,e(n)];case 1:return g=b.sent(),s?("function"==typeof s.info&&(_=(d=g.output).$metadata,x=function fU(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(d,["$metadata"]),s.info({clientName:r,commandName:i,input:o(n.input),output:u(x),metadata:_})),[2,g]):[2,g]}})})}}},yU={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},R_=function(){return R_=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},R_.apply(this,arguments)};var ed=function(){return ed=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},ed.apply(this,arguments)};function td(e,t,n,r){return new(n||(n=Promise))(function(o,s){function u(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(u,g)}d((r=r.apply(e,t||[])).next())})}function nd(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}function rd(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function xU(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}var YD="X-Amz-Date",XD="X-Amz-Signature",QD="X-Amz-Security-Token",e2="authorization",t2=YD.toLowerCase(),DU=[e2,t2,"date"],AU=XD.toLowerCase(),dx="x-amz-content-sha256",RU=QD.toLowerCase(),MU={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},OU=/^proxy-/,LU=/^sec-/,fx="AWS4-HMAC-SHA256",NU="AWS4-HMAC-SHA256-PAYLOAD",n2="aws4_request",Wp={},L_=[];function hx(e,t,n){return e+"/"+t+"/"+n+"/"+n2}function r2(e,t,n){var r=new e(t);return r.update(n),r.digest()}function i2(e,t,n){var r,i,o=e.headers,s={};try{for(var u=rd(Object.keys(o).sort()),g=u.next();!g.done;g=u.next()){var d=g.value,_=d.toLowerCase();(_ in MU||t?.has(_)||OU.test(_)||LU.test(_))&&(!n||n&&!n.has(_))||(s[_]=o[d].trim().replace(/\s+/g," "))}}catch(x){r={error:x}}finally{try{g&&!g.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return s}function px(e,t){var n=e.headers,r=e.body;return td(this,void 0,void 0,function(){var i,o,s,u,g,d,_;return nd(this,function(x){switch(x.label){case 0:try{for(i=rd(Object.keys(n)),o=i.next();!o.done;o=i.next())if((s=o.value).toLowerCase()===dx)return[2,n[s]]}catch(b){d={error:b}}finally{try{o&&!o.done&&(_=i.return)&&_.call(i)}finally{if(d)throw d.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||function(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)}(r)?((u=new t).update(r),g=rf,[4,u.digest()]):[3,3];case 2:return[2,g.apply(void 0,[x.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}})})}function o2(e){var t=e.headers,n=e.query,r=function wU(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["headers","query"]);return ed(ed({},r),{headers:ed({},t),query:n?GU(n):void 0})}function GU(e){return Object.keys(e).reduce(function(t,n){var r,i=e[n];return ed(ed({},t),((r={})[n]=Array.isArray(i)?function EU(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(xU(arguments[t]));return e}(i):i,r))},{})}function a2(e){var t,n;e="function"==typeof e.clone?e.clone():o2(e);try{for(var r=rd(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;DU.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}var WU=function(){function e(t){var n=t.applyChecksum,r=t.credentials,i=t.region,s=t.sha256,u=t.uriEscapePath,g=void 0===u||u;this.service=t.service,this.sha256=s,this.uriEscapePath=g,this.applyChecksum="boolean"!=typeof n||n,this.regionProvider=ZU(i),this.credentialProvider=JU(r)}return e.prototype.presign=function(t,n){return void 0===n&&(n={}),td(this,void 0,void 0,function(){var r,i,o,s,u,g,d,_,x,b,I,k,M,Se,ke,lt,et,Mt,Ht,Un,si,jo,Qo,ds;return nd(this,function(Uo){switch(Uo.label){case 0:return i=void 0===(r=n.signingDate)?new Date:r,s=void 0===(o=n.expiresIn)?3600:o,u=n.unsignableHeaders,g=n.unhoistableHeaders,d=n.signableHeaders,_=n.signingRegion,x=n.signingService,[4,this.credentialProvider()];case 1:return b=Uo.sent(),null==_?[3,2]:(k=_,[3,4]);case 2:return[4,this.regionProvider()];case 3:k=Uo.sent(),Uo.label=4;case 4:return I=k,M=N_(i),Se=M.longDate,ke=M.shortDate,s>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(lt=hx(ke,I,x??this.service),et=function HU(e,t){var n,r,i;void 0===t&&(t={});var o="function"==typeof e.clone?e.clone():o2(e),s=o.headers,u=o.query,g=void 0===u?{}:u;try{for(var d=rd(Object.keys(s)),_=d.next();!_.done;_=d.next()){var x=_.value,b=x.toLowerCase();"x-amz-"===b.substr(0,6)&&(null===(i=t.unhoistableHeaders)||void 0===i||!i.has(b))&&(g[x]=s[x],delete s[x])}}catch(I){n={error:I}}finally{try{_&&!_.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}return ed(ed({},e),{headers:s,query:g})}(a2(t),{unhoistableHeaders:g}),b.sessionToken&&(et.query[QD]=b.sessionToken),et.query["X-Amz-Algorithm"]=fx,et.query["X-Amz-Credential"]=b.accessKeyId+"/"+lt,et.query[YD]=Se,et.query["X-Amz-Expires"]=s.toString(10),Mt=i2(et,u,d),et.query["X-Amz-SignedHeaders"]=s2(Mt),Ht=et.query,Un=XD,si=this.getSignature,jo=[Se,lt,this.getSigningKey(b,I,ke,x)],Qo=this.createCanonicalRequest,ds=[et,Mt],[4,px(t,this.sha256)]);case 5:return[4,si.apply(this,jo.concat([Qo.apply(this,ds.concat([Uo.sent()]))]))];case 6:return Ht[Un]=Uo.sent(),[2,et]}})})},e.prototype.sign=function(t,n){return td(this,void 0,void 0,function(){return nd(this,function(r){return"string"==typeof t?[2,this.signString(t,n)]:t.headers&&t.payload?[2,this.signEvent(t,n)]:[2,this.signRequest(t,n)]})})},e.prototype.signEvent=function(t,n){var r=t.headers,i=t.payload,o=n.signingDate,s=void 0===o?new Date:o,u=n.priorSignature,g=n.signingRegion,d=n.signingService;return td(this,void 0,void 0,function(){var _,x,b,k,M,Se,ke,lt,et,Mt;return nd(this,function(Ht){switch(Ht.label){case 0:return null==g?[3,1]:(x=g,[3,3]);case 1:return[4,this.regionProvider()];case 2:x=Ht.sent(),Ht.label=3;case 3:return _=x,b=N_(s),k=b.longDate,M=hx(b.shortDate,_,d??this.service),[4,px({headers:{},body:i},this.sha256)];case 4:return Se=Ht.sent(),(ke=new this.sha256).update(r),et=rf,[4,ke.digest()];case 5:return lt=et.apply(void 0,[Ht.sent()]),Mt=[NU,k,M,u,lt,Se].join("\n"),[2,this.signString(Mt,{signingDate:s,signingRegion:_,signingService:d})]}})})},e.prototype.signString=function(t,n){var r=void 0===n?{}:n,i=r.signingDate,o=void 0===i?new Date:i,s=r.signingRegion,u=r.signingService;return td(this,void 0,void 0,function(){var g,d,_,x,b,I,k,M;return nd(this,function(Se){switch(Se.label){case 0:return[4,this.credentialProvider()];case 1:return g=Se.sent(),null==s?[3,2]:(_=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:_=Se.sent(),Se.label=4;case 4:return d=_,x=N_(o).shortDate,k=(I=this.sha256).bind,[4,this.getSigningKey(g,d,x,u)];case 5:return(b=new(k.apply(I,[void 0,Se.sent()]))).update(t),M=rf,[4,b.digest()];case 6:return[2,M.apply(void 0,[Se.sent()])]}})})},e.prototype.signRequest=function(t,n){var r=void 0===n?{}:n,i=r.signingDate,o=void 0===i?new Date:i,s=r.signableHeaders,u=r.unsignableHeaders,g=r.signingRegion,d=r.signingService;return td(this,void 0,void 0,function(){var _,x,b,I,k,M,Se,ke,lt,et,Mt;return nd(this,function(Ht){switch(Ht.label){case 0:return[4,this.credentialProvider()];case 1:return _=Ht.sent(),null==g?[3,2]:(b=g,[3,4]);case 2:return[4,this.regionProvider()];case 3:b=Ht.sent(),Ht.label=4;case 4:return x=b,I=a2(t),k=N_(o),M=k.longDate,ke=hx(Se=k.shortDate,x,d??this.service),I.headers[t2]=M,_.sessionToken&&(I.headers[RU]=_.sessionToken),[4,px(I,this.sha256)];case 5:return lt=Ht.sent(),!function VU(e,t){var n,r;e=e.toLowerCase();try{for(var i=rd(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}(dx,I.headers)&&this.applyChecksum&&(I.headers[dx]=lt),et=i2(I,u,s),[4,this.getSignature(M,ke,this.getSigningKey(_,x,Se,d),this.createCanonicalRequest(I,et,lt))];case 6:return Mt=Ht.sent(),I.headers[e2]=fx+" Credential="+_.accessKeyId+"/"+ke+", SignedHeaders="+s2(et)+", Signature="+Mt,[2,I]}})})},e.prototype.createCanonicalRequest=function(t,n,r){var i=Object.keys(n).sort();return t.method+"\n"+this.getCanonicalPath(t)+"\n"+function jU(e){var t,n,r=e.query,i=void 0===r?{}:r,o=[],s={},u=function(x){if(x.toLowerCase()===AU)return"continue";o.push(x);var b=i[x];"string"==typeof b?s[x]=uh(x)+"="+uh(b):Array.isArray(b)&&(s[x]=b.slice(0).sort().reduce(function(I,k){return I.concat([uh(x)+"="+uh(k)])},[]).join("&"))};try{for(var g=rd(Object.keys(i).sort()),d=g.next();!d.done;d=g.next())u(d.value)}catch(x){t={error:x}}finally{try{d&&!d.done&&(n=g.return)&&n.call(g)}finally{if(t)throw t.error}}return o.map(function(x){return s[x]}).filter(function(x){return x}).join("&")}(t)+"\n"+i.map(function(o){return o+":"+n[o]}).join("\n")+"\n\n"+i.join(";")+"\n"+r},e.prototype.createStringToSign=function(t,n,r){return td(this,void 0,void 0,function(){var i,o;return nd(this,function(s){switch(s.label){case 0:return(i=new this.sha256).update(r),[4,i.digest()];case 1:return o=s.sent(),[2,fx+"\n"+t+"\n"+n+"\n"+rf(o)]}})})},e.prototype.getCanonicalPath=function(t){var n=t.path;return this.uriEscapePath?"/"+encodeURIComponent(n.replace(/^\//,"")).replace(/%2F/g,"/"):n},e.prototype.getSignature=function(t,n,r,i){return td(this,void 0,void 0,function(){var o,s,u,g,d;return nd(this,function(_){switch(_.label){case 0:return[4,this.createStringToSign(t,n,i)];case 1:return o=_.sent(),g=(u=this.sha256).bind,[4,r];case 2:return(s=new(g.apply(u,[void 0,_.sent()]))).update(o),d=rf,[4,s.digest()];case 3:return[2,d.apply(void 0,[_.sent()])]}})})},e.prototype.getSigningKey=function(t,n,r,i){return function(e,t,n,r,i){return td(void 0,void 0,void 0,function(){var o,s,u,g,d,x,b,I;return nd(this,function(k){switch(k.label){case 0:return[4,r2(e,t.secretAccessKey,t.accessKeyId)];case 1:if(o=k.sent(),(s=n+":"+r+":"+i+":"+rf(o)+":"+t.sessionToken)in Wp)return[2,Wp[s]];for(L_.push(s);L_.length>50;)delete Wp[L_.shift()];u="AWS4"+t.secretAccessKey,k.label=2;case 2:k.trys.push([2,7,8,9]),g=rd([n,r,i,n2]),d=g.next(),k.label=3;case 3:return d.done?[3,6]:[4,r2(e,u,d.value)];case 4:u=k.sent(),k.label=5;case 5:return d=g.next(),[3,3];case 6:return[3,9];case 7:return x=k.sent(),b={error:x},[3,9];case 8:try{d&&!d.done&&(I=g.return)&&I.call(g)}finally{if(b)throw b.error}return[7];case 9:return[2,Wp[s]=u]}})})}(this.sha256,t,r,n,i||this.service)},e}(),N_=function(e){var t=function $U(e){return function qU(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.substr(0,8)}},s2=function(e){return Object.keys(e).sort().join(";")},ZU=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},JU=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e};function mx(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}var Zp=function(){return Zp=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},Zp.apply(this,arguments)};function u2(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function c2(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u2(arguments[t]));return e}var yx="user-agent",o8=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,vx=function(e){var t=u2(e,2),n=t[0],r=t[1],i=n.indexOf("/"),o=n.substring(0,i),s=n.substring(i+1);return"api"===o&&(s=s.toLowerCase()),[o,s,r].filter(function(u){return u&&u.length>0}).map(function(u){return u?.replace(o8,"_")}).join("/")},s8={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},l8=function(e){return{applyToStack:function(t){t.add(function(e){return function(t,n){return function(r){return function t8(e,t,n,r){return new(n||(n=Promise))(function(o,s){function u(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(u,g)}d((r=r.apply(e,t||[])).next())})}(void 0,void 0,void 0,function(){var i,o,s,u,g,d,_,x;return function n8(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}(this,function(b){switch(b.label){case 0:return Vp.isInstance(i=r.request)?(o=i.headers,s=(null===(_=n?.userAgent)||void 0===_?void 0:_.map(vx))||[],[4,e.defaultUserAgentProvider()]):[2,t(r)];case 1:return u=b.sent().map(vx),g=(null===(x=e?.customUserAgent)||void 0===x?void 0:x.map(vx))||[],o["x-amz-user-agent"]=c2(u,s,g).join(" "),d=c2(u.filter(function(I){return I.startsWith("aws-sdk-")}),g).join(" "),"browser"!==e.runtime&&d&&(o[yx]=o[yx]?o[yx]+" "+d:d),[2,t(Zp(Zp({},r),{request:i}))]}})})}}}(e),s8)}}},_x=function(e){function t(n){var r=this,o=function(e){if(!e.region)throw new Error("Region is missing");return $p($p({},e),{region:Q6(e.region)})}(Ce(Ce({},G6),n)),s=function(e){var t;return $p($p({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:e.endpoint?Z6(e):function(){return J6(e)},isCustomEndpoint:!!e.endpoint})}(o),u=function KU(e){var d,t=this,r=mx(e.credentials||e.credentialDefaultProvider(e)),i=e.signingEscapePath,o=void 0===i||i,s=e.systemClockOffset,u=void 0===s?e.systemClockOffset||0:s,g=e.sha256;return d=e.signer?mx(e.signer):function(){return mx(e.region)().then(function(_){return function _U(e,t,n,r){return new(n||(n=Promise))(function(o,s){function u(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(u,g)}d((r=r.apply(e,t||[])).next())})}(t,void 0,void 0,function(){return function bU(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}}(this,function(x){switch(x.label){case 0:return[4,e.regionInfoProvider(_)];case 1:return[2,[x.sent()||{},_]]}})})}).then(function(_){var x=function KD(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}(_,2),b=x[0],M=b.signingService;return e.signingRegion=e.signingRegion||b.signingRegion||x[1],e.signingName=e.signingName||M||e.serviceId,new WU({credentials:r,region:e.signingRegion,service:e.signingName,sha256:g,uriEscapePath:o})})},R_(R_({},e),{systemClockOffset:u,signingEscapePath:o,credentials:r,signer:d})}(s),g=function(e){var t=function(e){if(void 0===e&&(e=3),"number"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}(e.maxAttempts);return w_(w_({},e),{maxAttempts:t,retryStrategy:e.retryStrategy||new b6(t)})}(u),_=function r8(e){return Zp(Zp({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}(g);return(r=e.call(this,_)||this).config=_,r.middlewareStack.use(function(e){return{applyToStack:function(t){t.add(function(e){return function(t,n){return function(r){return ex(void 0,void 0,void 0,function(){var i;return x_(this,function(o){return!(null===(i=e?.retryStrategy)||void 0===i)&&i.mode&&(n.userAgent=function Z5(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(W5(arguments[t]));return e}(n.userAgent||[],[["cfg/retry-mode",e.retryStrategy.mode]])),[2,e.retryStrategy.retry(t,r)]})})}}}(e),K5)}}}(r.config)),r.middlewareStack.use(oU(r.config)),r.middlewareStack.use(dU(r.config)),r.middlewareStack.use({applyToStack:function(t){t.add(gU(),yU)}}),r.middlewareStack.use(l8(r.config)),r}return Wt(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(y5),F_=function(){return F_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},F_.apply(this,arguments)},Pl=function(e,t,n,r){return new(n||(n=Promise))(function(o,s){function u(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(u,g)}d((r=r.apply(e,t||[])).next())})},Dl=function(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}},fi=new $u("Credentials"),d8=function(){function e(t){this._gettingCredPromise=null,this._refreshHandlers={},this.Auth=void 0,this.configure(t),this._refreshHandlers.google=fB.refreshGoogleToken,this._refreshHandlers.facebook=hB.refreshFacebookToken}return e.prototype.getModuleName=function(){return"Credentials"},e.prototype.getCredSource=function(){return this._credentials_source},e.prototype.configure=function(t){if(!t)return this._config||{};this._config=Object.assign({},this._config,t);var n=this._config.refreshHandlers;return n&&(this._refreshHandlers=F_(F_({},this._refreshHandlers),n)),this._storage=this._config.storage,this._storage||(this._storage=(new Jz).getStorage()),this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),this._config},e.prototype.get=function(){return fi.debug("getting credentials"),this._pickupCredentials()},e.prototype._getCognitoIdentityIdStorageKey=function(t){return"CognitoIdentityId-"+t},e.prototype._pickupCredentials=function(){return fi.debug("picking up credentials"),this._gettingCredPromise&&this._gettingCredPromise.isPending()?fi.debug("getting old cred promise"):(fi.debug("getting new cred promise"),this._gettingCredPromise=XP(this._keepAlive())),this._gettingCredPromise},e.prototype._keepAlive=function(){return Pl(this,void 0,void 0,function(){var t,n,r,i,o,s,g;return Dl(this,function(d){switch(d.label){case 0:if(fi.debug("checking if credentials exists and not expired"),(t=this._credentials)&&!this._isExpired(t)&&!this._isPastTTL())return fi.debug("credentials not changed and not expired, directly return"),[2,Promise.resolve(t)];if(fi.debug("need to get a new credential or refresh the existing one"),!(r=void 0===(n=this.Auth)?Up.Auth:n)||"function"!=typeof r.currentUserCredentials)return[2,Promise.reject("No Auth module registered in Amplify")];if(this._isExpired(t)||!this._isPastTTL())return[3,6];fi.debug("ttl has passed but token is not yet expired"),d.label=1;case 1:return d.trys.push([1,5,,6]),[4,r.currentUserPoolUser()];case 2:return i=d.sent(),[4,r.currentSession()];case 3:return o=d.sent(),s=o.refreshToken,[4,new Promise(function(_,x){i.refreshSession(s,function(b,I){return b?x(b):_(I)})})];case 4:return d.sent(),[3,6];case 5:return g=d.sent(),fi.debug("Error attempting to refreshing the session",g),[3,6];case 6:return[2,r.currentUserCredentials()]}})})},e.prototype.refreshFederatedToken=function(t){fi.debug("Getting federated credentials");var n=t.provider,r=t.user,i=t.token,o=t.identity_id,s=t.expires_at;s=1970===new Date(s).getFullYear()?1e3*s:s;var u=this;return fi.debug("checking if federated jwt token expired"),s>(new Date).getTime()?(fi.debug("token not expired"),this._setCredentialsFromFederation({provider:n,token:i,user:r,identity_id:o,expires_at:s})):u._refreshHandlers[n]&&"function"==typeof u._refreshHandlers[n]?(fi.debug("getting refreshed jwt token from federation provider"),this._providerRefreshWithRetry({refreshHandler:u._refreshHandlers[n],provider:n,user:r})):(fi.debug("no refresh handler for provider:",n),this.clear(),Promise.reject("no refresh handler for provider"))},e.prototype._providerRefreshWithRetry=function(t){var n=this,i=t.provider,o=t.user;return kP(t.refreshHandler,[],1e4).then(function(u){return fi.debug("refresh federated token sucessfully",u),n._setCredentialsFromFederation({provider:i,token:u.token,user:o,identity_id:u.identity_id,expires_at:u.expires_at})}).catch(function(u){return"string"==typeof u&&0===u.toLowerCase().lastIndexOf("network error",u.length)||n.clear(),fi.debug("refresh federated token failed",u),Promise.reject("refreshing federation token failed: "+u)})},e.prototype._isExpired=function(t){if(!t)return fi.debug("no credentials for expiration check"),!0;fi.debug("are these credentials expired?",t);var n=Date.now();return t.expiration.getTime()<=n},e.prototype._isPastTTL=function(){return this._nextCredentialsRefresh<=Date.now()},e.prototype._setCredentialsForGuest=function(){return Pl(this,void 0,void 0,function(){var t,n,r,o,s,u,g,x=this;return Dl(this,function(b){switch(b.label){case 0:return fi.debug("setting credentials for guest"),n=(t=this._config).identityPoolId,r=t.region,t.mandatorySignIn?[2,Promise.reject("cannot get guest credentials when mandatory signin enabled")]:n?r?(s=this,[4,this._getGuestIdentityId()]):(fi.debug("region is not configured for getting the credentials"),[2,Promise.reject("region is not configured for getting the credentials")]):(fi.debug("No Cognito Identity pool provided for unauthenticated access"),[2,Promise.reject("No Cognito Identity pool provided for unauthenticated access")]);case 1:return o=s._identityId=b.sent(),u=new _x({region:r,customUserAgent:mc()}),g=void 0,g=o?Fg({identityId:o,client:u})():Pl(x,void 0,void 0,function(){var I;return Dl(this,function(Se){switch(Se.label){case 0:return[4,u.send(new zg({IdentityPoolId:n}))];case 1:return I=Se.sent().IdentityId,this._identityId=I,[2,Fg({client:u,identityId:I})()]}})}).catch(function(I){return Pl(x,void 0,void 0,function(){return Dl(this,function(k){throw I})})}),[2,this._loadCredentials(g,"guest",!1,null).then(function(I){return I}).catch(function(I){return Pl(x,void 0,void 0,function(){var M=this;return Dl(this,function(Se){switch(Se.label){case 0:return"ResourceNotFoundException"===I.name&&I.message==="Identity '"+o+"' not found."?(fi.debug("Failed to load guest credentials"),[4,this._removeGuestIdentityId()]):[3,2];case 1:return Se.sent(),g=Pl(M,void 0,void 0,function(){var ke;return Dl(this,function(Mt){switch(Mt.label){case 0:return[4,u.send(new zg({IdentityPoolId:n}))];case 1:return ke=Mt.sent().IdentityId,this._identityId=ke,[2,Fg({client:u,identityId:ke})()]}})}).catch(function(ke){return Pl(M,void 0,void 0,function(){return Dl(this,function(lt){throw ke})})}),[2,this._loadCredentials(g,"guest",!1,null)];case 2:return[2,I]}})})})]}})})},e.prototype._setCredentialsFromFederation=function(t){var n=t.provider,r=t.token,i=t.identity_id,s={google:"accounts.google.com",facebook:"graph.facebook.com",amazon:"www.amazon.com",developer:"cognito-identity.amazonaws.com"}[n]||n;if(!s)return Promise.reject("You must specify a federated provider");var u={};u[s]=r;var g=this._config,d=g.identityPoolId,_=g.region;if(!d)return fi.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!_)return fi.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var x=new _x({region:_,customUserAgent:mc()}),b=void 0;return b=i?Fg({identityId:i,logins:u,client:x})():function A5(e){var t=this,n=e.accountId,r=e.cache,i=void 0===r?function D5(){return"object"==typeof self&&self.indexedDB?new I5:"object"==typeof window&&window.localStorage?window.localStorage:P5}():r,o=e.client,s=e.customRoleArn,u=e.identityPoolId,g=e.logins,d=e.userIdentifier,_=void 0===d?g&&0!==Object.keys(g).length?void 0:"ANONYMOUS":d,x=_?"aws:cognito-identity-credentials:"+u+":"+_:void 0,b=function(){return L1(t,void 0,void 0,function(){var I,k,M,Se,ke,lt,et,Mt,Ht;return N1(this,function(Un){switch(Un.label){case 0:return(k=x)?[4,i.getItem(x)]:[3,2];case 1:k=Un.sent(),Un.label=2;case 2:return(I=k)?[3,7]:(lt=(ke=o).send,et=zg.bind,Ht={AccountId:n,IdentityPoolId:u},g?[4,SD(g)]:[3,4]);case 3:return Mt=Un.sent(),[3,5];case 4:Mt=void 0,Un.label=5;case 5:return[4,lt.apply(ke,[new(et.apply(zg,[void 0,(Ht.Logins=Mt,Ht)]))])];case 6:M=Un.sent().IdentityId,Se=void 0===M?function R5(){throw new v_("Response from Amazon Cognito contained no identity ID")}():M,I=Se,x&&Promise.resolve(i.setItem(x,I)).catch(function(){}),Un.label=7;case 7:return[2,(b=Fg({client:o,customRoleArn:s,logins:g,identityId:I}))()]}})})};return function(){return b().catch(function(I){return L1(t,void 0,void 0,function(){return N1(this,function(k){throw x&&Promise.resolve(i.removeItem(x)).catch(function(){}),I})})})}}({logins:u,identityPoolId:d,client:x})(),this._loadCredentials(b,"federated",!0,t)},e.prototype._setCredentialsFromSession=function(t){var n=this;fi.debug("set credentials from session");var r=t.getIdToken().getJwtToken(),i=this._config,o=i.region,s=i.userPoolId,u=i.identityPoolId;if(!u)return fi.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!o)return fi.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var d={};d["cognito-idp."+o+".amazonaws.com/"+s]=r;var _=new _x({region:o,customUserAgent:mc()}),b=Pl(n,void 0,void 0,function(){var I,k,M,Se,ke,lt,et,Mt,Ht,Un;return Dl(this,function(si){switch(si.label){case 0:return[4,this._getGuestIdentityId()];case 1:return(I=si.sent())?[3,3]:[4,_.send(new zg({IdentityPoolId:u,Logins:d}))];case 2:M=si.sent().IdentityId,k=M,si.label=3;case 3:return[4,_.send(new $1({IdentityId:I||k,Logins:d}))];case 4:return Se=si.sent(),lt=(ke=Se.Credentials).AccessKeyId,et=ke.Expiration,Mt=ke.SecretKey,Ht=ke.SessionToken,this._identityId=Un=Se.IdentityId,I?(fi.debug("The guest identity "+I+" has been successfully linked to the logins"),I===Un&&fi.debug("The guest identity "+I+" has become the primary identity"),[4,this._removeGuestIdentityId()]):[3,6];case 5:si.sent(),si.label=6;case 6:return[2,{accessKeyId:lt,secretAccessKey:Mt,sessionToken:Ht,expiration:et,identityId:Un}]}})}).catch(function(I){return Pl(n,void 0,void 0,function(){return Dl(this,function(k){throw I})})});return this._loadCredentials(b,"userPool",!0,null)},e.prototype._loadCredentials=function(t,n,r,i){var o=this,s=this;return new Promise(function(u,g){t.then(function(d){return Pl(o,void 0,void 0,function(){var _,x,b,I,k;return Dl(this,function(M){switch(M.label){case 0:if(fi.debug("Load credentials successfully",d),this._identityId&&!d.identityId&&(d.identityId=this._identityId),s._credentials=d,s._credentials.authenticated=r,s._credentials_source=n,s._nextCredentialsRefresh=(new Date).getTime()+3e6,"federated"===n){_=Object.assign({id:this._credentials.identityId},i.user),x=i.provider,b=i.token,I=i.expires_at,k=i.identity_id;try{this._storage.setItem("aws-amplify-federatedInfo",JSON.stringify({provider:x,token:b,user:_,expires_at:I,identity_id:k}))}catch(Se){fi.debug("Failed to put federated info into auth storage",Se)}}return"guest"!==n?[3,2]:[4,this._setGuestIdentityId(d.identityId)];case 1:M.sent(),M.label=2;case 2:return u(s._credentials),[2]}})})}).catch(function(d){if(d)return fi.debug("Failed to load credentials",t),fi.debug("Error loading credentials",d),void g(d)})})},e.prototype.set=function(t,n){return"session"===n?this._setCredentialsFromSession(t):"federation"===n?this._setCredentialsFromFederation(t):"guest"===n?this._setCredentialsForGuest():(fi.debug("no source specified for setting credentials"),Promise.reject("invalid source"))},e.prototype.clear=function(){return Pl(this,void 0,void 0,function(){return Dl(this,function(t){return this._credentials=null,this._credentials_source=null,fi.debug("removing aws-amplify-federatedInfo from storage"),this._storage.removeItem("aws-amplify-federatedInfo"),[2]})})},e.prototype._getGuestIdentityId=function(){return Pl(this,void 0,void 0,function(){var t,n;return Dl(this,function(r){switch(r.label){case 0:t=this._config.identityPoolId,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._storageSync];case 2:return r.sent(),[2,this._storage.getItem(this._getCognitoIdentityIdStorageKey(t))];case 3:return n=r.sent(),fi.debug("Failed to get the cached guest identityId",n),[3,4];case 4:return[2]}})})},e.prototype._setGuestIdentityId=function(t){return Pl(this,void 0,void 0,function(){var n,r;return Dl(this,function(i){switch(i.label){case 0:n=this._config.identityPoolId,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._storageSync];case 2:return i.sent(),this._storage.setItem(this._getCognitoIdentityIdStorageKey(n),t),[3,4];case 3:return r=i.sent(),fi.debug("Failed to cache guest identityId",r),[3,4];case 4:return[2]}})})},e.prototype._removeGuestIdentityId=function(){return Pl(this,void 0,void 0,function(){var t;return Dl(this,function(n){return fi.debug("removing "+this._getCognitoIdentityIdStorageKey(t=this._config.identityPoolId)+" from storage"),this._storage.removeItem(this._getCognitoIdentityIdStorageKey(t)),[2]})})},e.prototype.shear=function(t){return{accessKeyId:t.accessKeyId,sessionToken:t.sessionToken,secretAccessKey:t.secretAccessKey,identityId:t.identityId,authenticated:t.authenticated}},e}(),bx=new d8(null);Up.register(bx);var b8=function(e){var t=e.endpoint;if("string"==typeof t){var r=Promise.resolve((0,e.urlParser)(t));return function(){return r}}if("object"==typeof t){var i=Promise.resolve(t);return function(){return i}}return t},f2=function(e){return"string"==typeof e&&(e.startsWith("fips-")||e.endsWith("-fips"))},h2=function(e){return f2(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e},p2=function(e,t){var n;void 0===e&&(e=[]);var r=t.useFipsEndpoint,i=t.useDualstackEndpoint;return null===(n=e.find(function(o){var s=o.tags;return r===s.includes("fips")&&i===s.includes("dualstack")}))||void 0===n?void 0:n.hostname},P8=function(e,t){var n,r,i,o,s,u,g=t.useFipsEndpoint,d=void 0!==g&&g,_=t.useDualstackEndpoint,x=void 0!==_&&_,b=t.signingService,I=t.regionHash,k=t.partitionHash,M=function(e,t){var n,r=t.partitionHash;return null!==(n=Object.keys(r||{}).find(function(i){return r[i].regions.includes(e)}))&&void 0!==n?n:"aws"}(e,{partitionHash:k}),Se=e in I?e:null!==(r=null===(n=k[M])||void 0===n?void 0:n.endpoint)&&void 0!==r?r:e,ke={useFipsEndpoint:d,useDualstackEndpoint:x},Mt=function(e,t){var r=t.partitionHostname;return t.regionHostname||(r?r.replace("{region}",e):void 0)}(Se,{regionHostname:p2(null===(i=I[Se])||void 0===i?void 0:i.variants,ke),partitionHostname:p2(null===(o=k[M])||void 0===o?void 0:o.variants,ke)});if(void 0===Mt)throw new Error("Endpoint resolution failed for: "+{resolvedRegion:Se,useFipsEndpoint:d,useDualstackEndpoint:x});var Ht=function(e,t){var n=t.signingRegion;if(n)return n;if(t.useFipsEndpoint){var o=t.regionRegex.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),s=e.match(o);if(s)return s[0].slice(1,-1)}}(Mt,{signingRegion:null===(s=I[Se])||void 0===s?void 0:s.signingRegion,regionRegex:k[M].regionRegex,useFipsEndpoint:d});return Ce(Ce({partition:M,signingService:b,hostname:Mt},Ht&&{signingRegion:Ht}),(null===(u=I[Se])||void 0===u?void 0:u.signingService)&&{signingService:I[Se].signingService})},yu=function(){function e(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?":"!==t.protocol.substr(-1)?t.protocol+":":t.protocol:"https:",this.path=t.path?"/"!==t.path.charAt(0)?"/"+t.path:t.path:"/"}return e.isInstance=function(t){return!!t&&("method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers)},e.prototype.clone=function(){var t=new e(Ce(Ce({},this),{headers:Ce({},this.headers)}));return t.query&&(t.query=function D8(e){return Object.keys(e).reduce(function(t,n){var r,i=e[n];return Ce(Ce({},t),((r={})[n]=Array.isArray(i)?Mo([],qr(i)):i,r))},{})}(t.query)),t},e}(),wx=function(){function e(t){this.statusCode=t.statusCode,this.headers=t.headers||{},this.body=t.body}return e.isInstance=function(t){return!!t&&("number"==typeof t.statusCode&&"object"==typeof t.headers)},e}();function Jp(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}var j_,m2="content-length",R8={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},L8={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},F8={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},fh=(()=>(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"}(fh||(fh={})),fh))(),g2=fh.STANDARD,B8=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],j8=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],U8=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],V8=[500,502,503,504],xx=function(e){var t,n;return 429===(null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||j8.includes(e.name)||1==(null===(n=e.$retryable)||void 0===n?void 0:n.throttling)},q8=function(){function e(t){var n,r,i,o,s;this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=null!==(n=t?.beta)&&void 0!==n?n:.7,this.minCapacity=null!==(r=t?.minCapacity)&&void 0!==r?r:1,this.minFillRate=null!==(i=t?.minFillRate)&&void 0!==i?i:.5,this.scaleConstant=null!==(o=t?.scaleConstant)&&void 0!==o?o:.4,this.smooth=null!==(s=t?.smooth)&&void 0!==s?s:.8;var u=this.getCurrentTimeInSeconds();this.lastThrottleTime=u,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}return e.prototype.getCurrentTimeInSeconds=function(){return Date.now()/1e3},e.prototype.getSendToken=function(){return qt(this,void 0,void 0,function(){return Ot(this,function(t){return[2,this.acquireTokenBucket(1)]})})},e.prototype.acquireTokenBucket=function(t){return qt(this,void 0,void 0,function(){var n;return Ot(this,function(r){switch(r.label){case 0:return this.enabled?(this.refillTokenBucket(),t>this.currentCapacity?(n=(t-this.currentCapacity)/this.fillRate*1e3,[4,new Promise(function(i){return setTimeout(i,n)})]):[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return this.currentCapacity=this.currentCapacity-t,[2]}})})},e.prototype.refillTokenBucket=function(){var t=this.getCurrentTimeInSeconds();this.lastTimestamp?(this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+(t-this.lastTimestamp)*this.fillRate),this.lastTimestamp=t):this.lastTimestamp=t},e.prototype.updateClientSendingRate=function(t){var n;if(this.updateMeasuredRate(),xx(t)){var r=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=r,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),n=this.cubicThrottle(r),this.enableTokenBucket()}else this.calculateTimeWindow(),n=this.cubicSuccess(this.getCurrentTimeInSeconds());var i=Math.min(n,2*this.measuredTxRate);this.updateTokenBucketRate(i)},e.prototype.calculateTimeWindow=function(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))},e.prototype.cubicThrottle=function(t){return this.getPrecise(t*this.beta)},e.prototype.cubicSuccess=function(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)},e.prototype.enableTokenBucket=function(){this.enabled=!0},e.prototype.updateTokenBucketRate=function(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)},e.prototype.updateMeasuredRate=function(){var t=this.getCurrentTimeInSeconds(),n=Math.floor(2*t)/2;this.requestCount++,n>this.lastTxRateBucket&&(this.measuredTxRate=this.getPrecise(this.requestCount/(n-this.lastTxRateBucket)*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=n)},e.prototype.getPrecise=function(t){return parseFloat(t.toFixed(8))},e}(),W8=new Uint8Array(16);function Z8(){if(!j_&&!(j_=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return j_(W8)}const J8=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Y8=function K8(e){return"string"==typeof e&&J8.test(e)};for(var Fs=[],Ex=0;Ex<256;++Ex)Fs.push((Ex+256).toString(16).substr(1));const tV=function eV(e,t,n){var r=(e=e||{}).random||(e.rng||Z8)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function X8(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Fs[e[t+0]]+Fs[e[t+1]]+Fs[e[t+2]]+Fs[e[t+3]]+"-"+Fs[e[t+4]]+Fs[e[t+5]]+"-"+Fs[e[t+6]]+Fs[e[t+7]]+"-"+Fs[e[t+8]]+Fs[e[t+9]]+"-"+Fs[e[t+10]]+Fs[e[t+11]]+Fs[e[t+12]]+Fs[e[t+13]]+Fs[e[t+14]]+Fs[e[t+15]]).toLowerCase();if(!Y8(n))throw TypeError("Stringified UUID is invalid");return n}(r)};var fV=function(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))},hV=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return B8.includes(e.name)}(e)||xx(e)||function(e){var t;return U8.includes(e.name)||V8.includes((null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||0)}(e))},y2=function(){function e(t,n){var r,i,o;this.maxAttemptsProvider=t,this.mode=fh.STANDARD,this.retryDecider=null!==(r=n?.retryDecider)&&void 0!==r?r:hV,this.delayDecider=null!==(i=n?.delayDecider)&&void 0!==i?i:fV,this.retryQuota=null!==(o=n?.retryQuota)&&void 0!==o?o:function(e,t){var s=(t?.noRetryIncrement,1),u=(t?.retryCost,5),g=(t?.timeoutRetryCost,10),d=500,_=function(k){return"TimeoutError"===k.name?g:u},x=function(k){return _(k)<=d};return Object.freeze({hasRetryTokens:x,retrieveRetryTokens:function(k){if(!x(k))throw new Error("No retry token available");var M=_(k);return d-=M,M},releaseRetryTokens:function(k){d+=k??s,d=Math.min(d,500)}})}()}return e.prototype.shouldRetry=function(t,n,r){return n<r&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)},e.prototype.getMaxAttempts=function(){return qt(this,void 0,void 0,function(){var t;return Ot(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return t=r.sent(),[3,3];case 2:return r.sent(),t=3,[3,3];case 3:return[2,t]}})})},e.prototype.retry=function(t,n,r){return qt(this,void 0,void 0,function(){var i,o,s,u,g,d,_,x;return Ot(this,function(b){switch(b.label){case 0:return o=0,s=0,[4,this.getMaxAttempts()];case 1:u=b.sent(),yu.isInstance(g=n.request)&&(g.headers["amz-sdk-invocation-id"]=tV()),d=function(){var I,k,M,Se,ke,lt;return Ot(this,function(et){switch(et.label){case 0:return et.trys.push([0,4,,7]),yu.isInstance(g)&&(g.headers["amz-sdk-request"]="attempt="+(o+1)+"; max="+u),r?.beforeRequest?[4,r.beforeRequest()]:[3,2];case 1:et.sent(),et.label=2;case 2:return[4,t(n)];case 3:return I=et.sent(),k=I.response,M=I.output,r?.afterRequest&&r.afterRequest(k),_.retryQuota.releaseRetryTokens(i),M.$metadata.attempts=o+1,M.$metadata.totalRetryDelay=s,[2,{value:{response:k,output:M}}];case 4:return Se=et.sent(),ke=pV(Se),o++,_.shouldRetry(ke,o,u)?(i=_.retryQuota.retrieveRetryTokens(ke),lt=_.delayDecider(xx(ke)?500:100,o),s+=lt,[4,new Promise(function(Mt){return setTimeout(Mt,lt)})]):[3,6];case 5:return et.sent(),[2,"continue"];case 6:throw ke.$metadata||(ke.$metadata={}),ke.$metadata.attempts=o,ke.$metadata.totalRetryDelay=s,ke;case 7:return[2]}})},_=this,b.label=2;case 2:return[5,d()];case 3:return"object"==typeof(x=b.sent())?[2,x.value]:[3,2];case 4:return[2]}})})},e}(),pV=function(e){return e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):"string"==typeof e?new Error(e):new Error("AWS SDK error wrapper for "+e)},mV=function(e){function t(n,r){var i=this,o=r??{},s=o.rateLimiter,u=Gn(o,["rateLimiter"]);return(i=e.call(this,n,u)||this).rateLimiter=s??new q8,i.mode=fh.ADAPTIVE,i}return Wt(t,e),t.prototype.retry=function(n,r){return qt(this,void 0,void 0,function(){var i=this;return Ot(this,function(o){return[2,e.prototype.retry.call(this,n,r,{beforeRequest:function(){return qt(i,void 0,void 0,function(){return Ot(this,function(s){return[2,this.rateLimiter.getSendToken()]})})},afterRequest:function(s){i.rateLimiter.updateClientSendingRate(s)}})]})})},t}(y2),yV=function(e){return qt(void 0,void 0,void 0,function(){return Ot(this,function(t){switch(t.label){case 0:return"string"==typeof e?[2,e]:[4,e()];case 1:return[2,t.sent()]}})})},SV={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0};(function(e){function t(n,r){void 0===r&&(r=!0);var i=e.call(this,n)||this;return i.tryNextLink=r,i}Wt(t,e),t.from=function(n,r){return void 0===r&&(r=!0),Object.defineProperty(n,"tryNextLink",{value:r,configurable:!1,enumerable:!1,writable:!1}),n}})(Error),function(e){function t(n,r){void 0===r&&(r=!0);var i=e.call(this,n)||this;return i.tryNextLink=r,i.name="CredentialsProviderError",i}Wt(t,e),t.from=function(n,r){return void 0===r&&(r=!0),Object.defineProperty(n,"tryNextLink",{value:r,configurable:!1,enumerable:!1,writable:!1}),n}}(Error);for(var b2={},Sx={},Vg=0;Vg<256;Vg++){var Gg=Vg.toString(16).toLowerCase();1===Gg.length&&(Gg="0"+Gg),b2[Vg]=Gg,Sx[Gg]=Vg}function Kp(e){for(var t="",n=0;n<e.byteLength;n++)t+=b2[e[n]];return t}var w2="X-Amz-Date",x2="X-Amz-Signature",E2="X-Amz-Security-Token",S2="authorization",C2=w2.toLowerCase(),MV=[S2,C2,"date"],OV=x2.toLowerCase(),Cx="x-amz-content-sha256",LV=E2.toLowerCase(),NV={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},kV=/^proxy-/,FV=/^sec-/,Ix="AWS4-HMAC-SHA256",zV="AWS4-HMAC-SHA256-PAYLOAD",I2="aws4_request",Yp={},U_=[],Tx=function(e,t,n){return e+"/"+t+"/"+n+"/"+I2},T2=function(e,t,n){var r=new e(t);return r.update(n),r.digest()},P2=function(e,t,n){var r,i,o=e.headers,s={};try{for(var u=li(Object.keys(o).sort()),g=u.next();!g.done;g=u.next()){var d=g.value,_=d.toLowerCase();(_ in NV||t?.has(_)||kV.test(_)||FV.test(_))&&(!n||n&&!n.has(_))||(s[_]=o[d].trim().replace(/\s+/g," "))}}catch(x){r={error:x}}finally{try{g&&!g.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return s},hh=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,GV)},GV=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()},Px=function(e,t){var n=e.headers,r=e.body;return qt(void 0,void 0,void 0,function(){var i,o,s,u,g,d,_;return Ot(this,function(x){switch(x.label){case 0:try{for(i=li(Object.keys(n)),o=i.next();!o.done;o=i.next())if((s=o.value).toLowerCase()===Cx)return[2,n[s]]}catch(b){d={error:b}}finally{try{o&&!o.done&&(_=i.return)&&_.call(i)}finally{if(d)throw d.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||function(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)}(r)?((u=new t).update(r),g=Kp,[4,u.digest()]):[3,3];case 2:return[2,g.apply(void 0,[x.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}})})},D2=function(e){var t=e.headers,n=e.query,r=Gn(e,["headers","query"]);return Ce(Ce({},r),{headers:Ce({},t),query:n?WV(n):void 0})},WV=function(e){return Object.keys(e).reduce(function(t,n){var r,i=e[n];return Ce(Ce({},t),((r={})[n]=Array.isArray(i)?Mo([],qr(i)):i,r))},{})},A2=function(e){var t,n;e="function"==typeof e.clone?e.clone():D2(e);try{for(var r=li(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;MV.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e},QV=function(){function e(t){var n=t.applyChecksum,r=t.credentials,i=t.region,s=t.sha256,u=t.uriEscapePath,g=void 0===u||u;this.service=t.service,this.sha256=s,this.uriEscapePath=g,this.applyChecksum="boolean"!=typeof n||n,this.regionProvider=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}(i),this.credentialProvider=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}(r)}return e.prototype.presign=function(t,n){return void 0===n&&(n={}),qt(this,void 0,void 0,function(){var r,i,o,s,u,g,d,_,x,b,I,k,M,Se,ke,lt,et,Mt,Ht,Un,si,jo,Qo,ds;return Ot(this,function(Uo){switch(Uo.label){case 0:return i=void 0===(r=n.signingDate)?new Date:r,s=void 0===(o=n.expiresIn)?3600:o,u=n.unsignableHeaders,g=n.unhoistableHeaders,d=n.signableHeaders,_=n.signingRegion,x=n.signingService,[4,this.credentialProvider()];case 1:return b=Uo.sent(),null==_?[3,2]:(k=_,[3,4]);case 2:return[4,this.regionProvider()];case 3:k=Uo.sent(),Uo.label=4;case 4:return I=k,M=V_(i),Se=M.longDate,ke=M.shortDate,s>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(lt=Tx(ke,I,x??this.service),et=function(e,t){var n,r,i;void 0===t&&(t={});var o="function"==typeof e.clone?e.clone():D2(e),s=o.headers,u=o.query,g=void 0===u?{}:u;try{for(var d=li(Object.keys(s)),_=d.next();!_.done;_=d.next()){var x=_.value,b=x.toLowerCase();"x-amz-"===b.substr(0,6)&&(null===(i=t.unhoistableHeaders)||void 0===i||!i.has(b))&&(g[x]=s[x],delete s[x])}}catch(I){n={error:I}}finally{try{_&&!_.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}return Ce(Ce({},e),{headers:s,query:g})}(A2(t),{unhoistableHeaders:g}),b.sessionToken&&(et.query[E2]=b.sessionToken),et.query["X-Amz-Algorithm"]=Ix,et.query["X-Amz-Credential"]=b.accessKeyId+"/"+lt,et.query[w2]=Se,et.query["X-Amz-Expires"]=s.toString(10),Mt=P2(et,u,d),et.query["X-Amz-SignedHeaders"]=R2(Mt),Ht=et.query,Un=x2,si=this.getSignature,jo=[Se,lt,this.getSigningKey(b,I,ke,x)],Qo=this.createCanonicalRequest,ds=[et,Mt],[4,Px(t,this.sha256)]);case 5:return[4,si.apply(this,jo.concat([Qo.apply(this,ds.concat([Uo.sent()]))]))];case 6:return Ht[Un]=Uo.sent(),[2,et]}})})},e.prototype.sign=function(t,n){return qt(this,void 0,void 0,function(){return Ot(this,function(r){return"string"==typeof t?[2,this.signString(t,n)]:t.headers&&t.payload?[2,this.signEvent(t,n)]:[2,this.signRequest(t,n)]})})},e.prototype.signEvent=function(t,n){var r=t.headers,i=t.payload,o=n.signingDate,s=void 0===o?new Date:o,u=n.priorSignature,g=n.signingRegion,d=n.signingService;return qt(this,void 0,void 0,function(){var _,x,b,k,M,Se,ke,lt,et,Mt;return Ot(this,function(Ht){switch(Ht.label){case 0:return null==g?[3,1]:(x=g,[3,3]);case 1:return[4,this.regionProvider()];case 2:x=Ht.sent(),Ht.label=3;case 3:return _=x,b=V_(s),k=b.longDate,M=Tx(b.shortDate,_,d??this.service),[4,Px({headers:{},body:i},this.sha256)];case 4:return Se=Ht.sent(),(ke=new this.sha256).update(r),et=Kp,[4,ke.digest()];case 5:return lt=et.apply(void 0,[Ht.sent()]),Mt=[zV,k,M,u,lt,Se].join("\n"),[2,this.signString(Mt,{signingDate:s,signingRegion:_,signingService:d})]}})})},e.prototype.signString=function(t,n){var r=void 0===n?{}:n,i=r.signingDate,o=void 0===i?new Date:i,s=r.signingRegion,u=r.signingService;return qt(this,void 0,void 0,function(){var g,d,_,x,b,I,k,M;return Ot(this,function(Se){switch(Se.label){case 0:return[4,this.credentialProvider()];case 1:return g=Se.sent(),null==s?[3,2]:(_=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:_=Se.sent(),Se.label=4;case 4:return d=_,x=V_(o).shortDate,k=(I=this.sha256).bind,[4,this.getSigningKey(g,d,x,u)];case 5:return(b=new(k.apply(I,[void 0,Se.sent()]))).update(t),M=Kp,[4,b.digest()];case 6:return[2,M.apply(void 0,[Se.sent()])]}})})},e.prototype.signRequest=function(t,n){var r=void 0===n?{}:n,i=r.signingDate,o=void 0===i?new Date:i,s=r.signableHeaders,u=r.unsignableHeaders,g=r.signingRegion,d=r.signingService;return qt(this,void 0,void 0,function(){var _,x,b,I,k,M,Se,ke,lt,et,Mt;return Ot(this,function(Ht){switch(Ht.label){case 0:return[4,this.credentialProvider()];case 1:return _=Ht.sent(),null==g?[3,2]:(b=g,[3,4]);case 2:return[4,this.regionProvider()];case 3:b=Ht.sent(),Ht.label=4;case 4:return x=b,I=A2(t),k=V_(o),M=k.longDate,ke=Tx(Se=k.shortDate,x,d??this.service),I.headers[C2]=M,_.sessionToken&&(I.headers[LV]=_.sessionToken),[4,Px(I,this.sha256)];case 5:return lt=Ht.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=li(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}(Cx,I.headers)&&this.applyChecksum&&(I.headers[Cx]=lt),et=P2(I,u,s),[4,this.getSignature(M,ke,this.getSigningKey(_,x,Se,d),this.createCanonicalRequest(I,et,lt))];case 6:return Mt=Ht.sent(),I.headers[S2]=Ix+" Credential="+_.accessKeyId+"/"+ke+", SignedHeaders="+R2(et)+", Signature="+Mt,[2,I]}})})},e.prototype.createCanonicalRequest=function(t,n,r){var i=Object.keys(n).sort();return t.method+"\n"+this.getCanonicalPath(t)+"\n"+function(e){var t,n,r=e.query,i=void 0===r?{}:r,o=[],s={},u=function(x){if(x.toLowerCase()===OV)return"continue";o.push(x);var b=i[x];"string"==typeof b?s[x]=hh(x)+"="+hh(b):Array.isArray(b)&&(s[x]=b.slice(0).sort().reduce(function(I,k){return I.concat([hh(x)+"="+hh(k)])},[]).join("&"))};try{for(var g=li(Object.keys(i).sort()),d=g.next();!d.done;d=g.next())u(d.value)}catch(x){t={error:x}}finally{try{d&&!d.done&&(n=g.return)&&n.call(g)}finally{if(t)throw t.error}}return o.map(function(x){return s[x]}).filter(function(x){return x}).join("&")}(t)+"\n"+i.map(function(o){return o+":"+n[o]}).join("\n")+"\n\n"+i.join(";")+"\n"+r},e.prototype.createStringToSign=function(t,n,r){return qt(this,void 0,void 0,function(){var i,o;return Ot(this,function(s){switch(s.label){case 0:return(i=new this.sha256).update(r),[4,i.digest()];case 1:return o=s.sent(),[2,Ix+"\n"+t+"\n"+n+"\n"+Kp(o)]}})})},e.prototype.getCanonicalPath=function(t){var n=t.path;return this.uriEscapePath?"/"+encodeURIComponent(n.replace(/^\//,"")).replace(/%2F/g,"/"):n},e.prototype.getSignature=function(t,n,r,i){return qt(this,void 0,void 0,function(){var o,s,u,g,d;return Ot(this,function(_){switch(_.label){case 0:return[4,this.createStringToSign(t,n,i)];case 1:return o=_.sent(),g=(u=this.sha256).bind,[4,r];case 2:return(s=new(g.apply(u,[void 0,_.sent()]))).update(o),d=Kp,[4,s.digest()];case 3:return[2,d.apply(void 0,[_.sent()])]}})})},e.prototype.getSigningKey=function(t,n,r,i){return function(e,t,n,r,i){return qt(void 0,void 0,void 0,function(){var o,s,u,g,d,x,b,I;return Ot(this,function(k){switch(k.label){case 0:return[4,T2(e,t.secretAccessKey,t.accessKeyId)];case 1:if(o=k.sent(),(s=n+":"+r+":"+i+":"+Kp(o)+":"+t.sessionToken)in Yp)return[2,Yp[s]];for(U_.push(s);U_.length>50;)delete Yp[U_.shift()];u="AWS4"+t.secretAccessKey,k.label=2;case 2:k.trys.push([2,7,8,9]),g=li([n,r,i,I2]),d=g.next(),k.label=3;case 3:return d.done?[3,6]:[4,T2(e,u,d.value)];case 4:u=k.sent(),k.label=5;case 5:return d=g.next(),[3,3];case 6:return[3,9];case 7:return x=k.sent(),b={error:x},[3,9];case 8:try{d&&!d.done&&(I=g.return)&&I.call(g)}finally{if(b)throw b.error}return[7];case 9:return[2,Yp[s]=u]}})})}(this.sha256,t,r,n,i||this.service)},e}(),V_=function(e){var t=function(e){return function(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.substr(0,8)}},R2=function(e){return Object.keys(e).sort().join(";")},Hg=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},O2=function(e){return new Date(Date.now()+e)},L2=function(e,t){var n=Date.parse(e);return function(e,t){return Math.abs(O2(t).getTime()-e)>=3e5}(n,t)?n-Date.now():t},N2=function(e){var t,n,r;return wx.isInstance(e)?null!==(n=null===(t=e.headers)||void 0===t?void 0:t.date)&&void 0!==n?n:null===(r=e.headers)||void 0===r?void 0:r.Date:void 0},iG={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},k2="user-agent",Dx="x-amz-user-agent",sG=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Ax=function(e){var t=qr(e,2),n=t[0],r=t[1],i=n.indexOf("/"),o=n.substring(0,i),s=n.substring(i+1);return"api"===o&&(s=s.toLowerCase()),[o,s,r].filter(function(u){return u&&u.length>0}).map(function(u){return u?.replace(sG,"_")}).join("/")},uG={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},G_=function(){var e=[],t=[],n=new Set,s=function(_){return e.forEach(function(x){_.add(x.middleware,Ce({},x))}),t.forEach(function(x){_.addRelativeTo(x.middleware,Ce({},x))}),_},u=function(_){var x=[];return _.before.forEach(function(b){0===b.before.length&&0===b.after.length?x.push(b):x.push.apply(x,Mo([],qr(u(b))))}),x.push(_),_.after.reverse().forEach(function(b){0===b.before.length&&0===b.after.length?x.push(b):x.push.apply(x,Mo([],qr(u(b))))}),x},d={add:function(_,x){void 0===x&&(x={});var b=x.name,I=x.override,k=Ce({step:"initialize",priority:"normal",middleware:_},x);if(b){if(n.has(b)){if(!I)throw new Error("Duplicate middleware name '"+b+"'");var M=e.findIndex(function(ke){return ke.name===b}),Se=e[M];if(Se.step!==k.step||Se.priority!==k.priority)throw new Error('"'+b+'" middleware with '+Se.priority+" priority in "+Se.step+" step cannot be overridden by same-name middleware with "+k.priority+" priority in "+k.step+" step.");e.splice(M,1)}n.add(b)}e.push(k)},addRelativeTo:function(_,x){var b=x.name,I=x.override,k=Ce({middleware:_},x);if(b){if(n.has(b)){if(!I)throw new Error("Duplicate middleware name '"+b+"'");var M=t.findIndex(function(ke){return ke.name===b}),Se=t[M];if(Se.toMiddleware!==k.toMiddleware||Se.relation!==k.relation)throw new Error('"'+b+'" middleware '+Se.relation+' "'+Se.toMiddleware+'" middleware cannot be overridden by same-name middleware '+k.relation+' "'+k.toMiddleware+'" middleware.');t.splice(M,1)}n.add(b)}t.push(k)},clone:function(){return s(G_())},use:function(_){_.applyToStack(d)},remove:function(_){return"string"==typeof _?function(_){var x=!1,b=function(I){return!I.name||I.name!==_||(x=!0,n.delete(_),!1)};return e=e.filter(b),t=t.filter(b),x}(_):function(_){var x=!1,b=function(I){return I.middleware!==_||(x=!0,I.name&&n.delete(I.name),!1)};return e=e.filter(b),t=t.filter(b),x}(_)},removeByTag:function(_){var x=!1,b=function(I){var k=I.tags,M=I.name;return!k||!k.includes(_)||(M&&n.delete(M),x=!0,!1)};return e=e.filter(b),t=t.filter(b),x},concat:function(_){var x=s(G_());return x.use(_),x},applyToStack:s,resolve:function(_,x){var b,I;try{for(var k=li(function(){var _=[],x=[],b={};e.forEach(function(k){var M=Ce(Ce({},k),{before:[],after:[]});M.name&&(b[M.name]=M),_.push(M)}),t.forEach(function(k){var M=Ce(Ce({},k),{before:[],after:[]});M.name&&(b[M.name]=M),x.push(M)}),x.forEach(function(k){if(k.toMiddleware){var M=b[k.toMiddleware];if(void 0===M)throw new Error(k.toMiddleware+" is not found when adding "+(k.name||"anonymous")+" middleware "+k.relation+" "+k.toMiddleware);"after"===k.relation&&M.after.push(k),"before"===k.relation&&M.before.push(k)}});var I=function(_){return _.sort(function(x,b){return z2[b.step]-z2[x.step]||B2[b.priority||"normal"]-B2[x.priority||"normal"]})}(_).map(u).reduce(function(k,M){return k.push.apply(k,Mo([],qr(M))),k},[]);return I.map(function(k){return k.middleware})}().reverse()),M=k.next();!M.done;M=k.next())_=(0,M.value)(_,x)}catch(ke){b={error:ke}}finally{try{M&&!M.done&&(I=k.return)&&I.call(k)}finally{if(b)throw b.error}}return _}};return d},z2={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},B2={high:3,normal:2,low:1},dG=function(){function e(t){this.middlewareStack=G_(),this.config=t}return e.prototype.send=function(t,n,r){var o="function"==typeof n?n:r,s=t.resolveMiddleware(this.middlewareStack,this.config,"function"!=typeof n?n:void 0);if(!o)return s(t).then(function(u){return u.output});s(t).then(function(u){return o(null,u.output)},function(u){return o(u)}).catch(function(){})},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),Xp=function e(){this.middlewareStack=G_()},qu="***SensitiveInformation***",fG=function(e){if(null!=e){if("boolean"==typeof e)return e;throw new TypeError("Expected boolean, got "+typeof e)}},H_=function(e){if(null!=e){if("number"==typeof e)return e;throw new TypeError("Expected number, got "+typeof e)}},hG=Math.ceil(Math.pow(2,127)*(2-Math.pow(2,-23))),$g=function(e){return Ox(e,32)},Ox=function(e,t){var n=function(e){if(null!=e){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError("Expected integer, got "+typeof e)}}(e);if(void 0!==n&&pG(n,t)!==n)throw new TypeError("Expected "+t+"-bit integer, got "+e);return n},pG=function(e,t){switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},vu=function(e,t){if(null==e)throw t?new TypeError("Expected a non-null value for "+t):new TypeError("Expected a non-null value");return e},ph=function(e){if(null!=e){if("object"==typeof e&&!Array.isArray(e))return e;throw new TypeError("Expected object, got "+typeof e)}},Ri=function(e){if(null!=e){if("string"==typeof e)return e;throw new TypeError("Expected string, got "+typeof e)}},gG=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Qp=function(e){var t=e.match(gG);if(null===t||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},qg=function(e){return"string"==typeof e?V2(e):H_(e)},V2=function(e){switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error("Unable to parse float value: "+e)}},Lx=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],bG=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),em=function(e){if(null!=e){if("string"!=typeof e)throw new TypeError("RFC-3339 date-times must be expressed as strings");var t=bG.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");var n=qr(t,8),o=n[2],s=n[3],u=n[4],g=n[5],d=n[6],_=n[7],x=function(e){return function(e){return Ox(e,16)}("string"==typeof e?Qp(e):e)}(Wg(n[1])),b=uf(o,"month",1,12),I=uf(s,"day",1,31);return $_(x,b,I,{hours:u,minutes:g,seconds:d,fractionalMilliseconds:_})}},$_=function(e,t,n,r){var i=t-1;return PG(e,i,n),new Date(Date.UTC(e,i,n,uf(r.hours,"hour",0,23),uf(r.minutes,"minute",0,59),uf(r.seconds,"seconds",0,60),AG(r.fractionalMilliseconds)))},TG=[31,28,31,30,31,30,31,31,30,31,30,31],PG=function(e,t,n){var r=TG[t];if(1===t&&DG(e)&&(r=29),n>r)throw new TypeError("Invalid day for "+Lx[t]+" in "+e+": "+n)},DG=function(e){return e%4==0&&(e%100!=0||e%400==0)},uf=function(e,t,n,r){var i=function(e){return function(e){return Ox(e,8)}("string"==typeof e?Qp(e):e)}(Wg(e));if(i<n||i>r)throw new TypeError(t+" must be between "+n+" and "+r+", inclusive");return i},AG=function(e){return null==e?0:1e3*function(e){return function(e){var t=H_(e);if(void 0!==t&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>hG)throw new TypeError("Expected 32-bit float, got "+e);return t}("string"==typeof e?Qp(e):e)}("0."+e)},Wg=function(e){for(var t=0;t<e.length-1&&"0"===e.charAt(t);)t++;return 0===t?e:e.slice(t)},RG=function(e){switch(e){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};function mh(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var q_=function(){var e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,Mo([null],qr(arguments))),n=new t;return Object.setPrototypeOf(n,e.prototype),n};q_.prototype=Object.create(String.prototype,{constructor:{value:q_,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(q_,String),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wt(t,e),t.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},t.prototype.toJSON=function(){return e.prototype.toString.call(this)},t.fromObject=function(n){return n instanceof t?n:new t(n instanceof String||"string"==typeof n?n:JSON.stringify(n))}}(q_);var G2=function(e){if(e!=e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}};var OG=U(2518);function NG(e){return void 0===e&&(e=0),new Promise(function(t,n){e&&setTimeout(function(){var r=new Error("Request did not complete within "+e+" ms");r.name="TimeoutError",n(r)},e)})}for(var kG=function(){function e(t){var n=this;"function"==typeof t?this.configProvider=function(){return qt(n,void 0,void 0,function(){return Ot(this,function(r){switch(r.label){case 0:return[4,t()];case 1:return[2,r.sent()||{}]}})})}:this.config=t??{}}return e.prototype.destroy=function(){},e.prototype.handle=function(t,n){var i=(void 0===n?{}:n).abortSignal;return qt(this,void 0,void 0,function(){var o,s,u,g,d,_,x,b,k,M,Se;return Ot(this,function(ke){switch(ke.label){case 0:return!this.config&&this.configProvider?(o=this,[4,this.configProvider()]):[3,2];case 1:o.config=ke.sent(),ke.label=2;case 2:return s=this.config.requestTimeout,i?.aborted?((u=new Error("Request aborted")).name="AbortError",[2,Promise.reject(u)]):(g=t.path,t.query&&(d=function LG(e){var t,n,r=[];try{for(var i=li(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var s=o.value,u=e[s];if(s=hh(s),Array.isArray(u))for(var g=0,d=u.length;g<d;g++)r.push(s+"="+hh(u[g]));else{var _=s;(u||"string"==typeof u)&&(_+="="+hh(u)),r.push(_)}}}catch(x){t={error:x}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}(t.query),d&&(g+="?"+d)),b=t.protocol+"//"+t.hostname+((_=t.port)?":"+_:"")+g,k={body:"GET"===(x=t.method)||"HEAD"===x?void 0:t.body,headers:new Headers(t.headers),method:x},typeof AbortController<"u"&&(k.signal=i),M=new Request(b,k),Se=[fetch(M).then(function(lt){var et,Mt,Ht=lt.headers,Un={};try{for(var si=li(Ht.entries()),jo=si.next();!jo.done;jo=si.next()){var Qo=jo.value;Un[Qo[0]]=Qo[1]}}catch(Uo){et={error:Uo}}finally{try{jo&&!jo.done&&(Mt=si.return)&&Mt.call(si)}finally{if(et)throw et.error}}return void 0!==lt.body?{response:new wx({headers:Un,statusCode:lt.status,body:lt.body})}:lt.blob().then(function(Uo){return{response:new wx({headers:Un,statusCode:lt.status,body:Uo})}})}),NG(s)],i&&Se.push(new Promise(function(lt,et){i.onabort=function(){var Mt=new Error("Request aborted");Mt.name="AbortError",et(Mt)}})),[2,Promise.race(Se)])}})})},e}(),cf={},tm=new Array(64),zs=0,Zg="A".charCodeAt(0),kx="Z".charCodeAt(0);zs+Zg<=kx;zs++){var df=String.fromCharCode(zs+Zg);cf[df]=zs,tm[zs]=df}for(zs=0,Zg="a".charCodeAt(0),kx="z".charCodeAt(0);zs+Zg<=kx;zs++)df=String.fromCharCode(zs+Zg),cf[df]=Jg=zs+26,tm[Jg]=df;for(zs=0;zs<10;zs++){var Jg;cf[zs.toString(10)]=zs+52,df=zs.toString(10),cf[df]=Jg=zs+52,tm[Jg]=df}function H2(e){var t=e.length/4*3;"=="===e.substr(-2)?t-=2:"="===e.substr(-1)&&t--;for(var n=new ArrayBuffer(t),r=new DataView(n),i=0;i<e.length;i+=4){for(var o=0,s=0,u=i,g=i+3;u<=g;u++)if("="!==e[u]){if(!(e[u]in cf))throw new TypeError("Invalid character "+e[u]+" in base64 string.");o|=cf[e[u]]<<6*(g-u),s+=6}else o>>=6;var d=i/4*3;o>>=s%8;for(var _=Math.floor(s/8),x=0;x<_;x++){var b=8*(_-x-1);r.setUint8(d+x,(o&255<<b)>>b)}}return new Uint8Array(n)}function zG(e){for(var t="",n=0;n<e.length;n+=3){for(var r=0,i=0,o=n,s=Math.min(n+3,e.length);o<s;o++)r|=e[o]<<8*(s-o-1),i+=8;var u=Math.ceil(i/6);r<<=6*u-i;for(var g=1;g<=u;g++){var d=6*(u-g);t+=tm[(r&63<<d)>>d]}t+="==".slice(0,4-u)}return t}cf["+"]=62,tm[62]="+",cf["/"]=63,tm[63]="/";var BG=function(e){return"function"==typeof Blob&&e instanceof Blob?function jG(e){return qt(this,void 0,void 0,function(){var t,n;return Ot(this,function(r){switch(r.label){case 0:return[4,VG(e)];case 1:return t=r.sent(),n=H2(t),[2,new Uint8Array(n)]}})})}(e):function UG(e){return qt(this,void 0,void 0,function(){var t,n,r,i,o,s,u;return Ot(this,function(g){switch(g.label){case 0:t=new Uint8Array(0),n=e.getReader(),r=!1,g.label=1;case 1:return r?[3,3]:[4,n.read()];case 2:return i=g.sent(),o=i.done,(s=i.value)&&(u=t,(t=new Uint8Array(u.length+s.length)).set(u),t.set(s,u.length)),r=o,[3,1];case 3:return[2,t]}})})}(e)};function VG(e){return new Promise(function(t,n){var r=new FileReader;r.onloadend=function(){var i;if(2!==r.readyState)return n(new Error("Reader aborted too early"));var o=null!==(i=r.result)&&void 0!==i?i:"",s=o.indexOf(",");t(o.substring(s>-1?s+1:o.length))},r.onabort=function(){return n(new Error("Read aborted"))},r.onerror=function(){return n(r.error)},r.readAsDataURL(e)})}var GG=function(e){return function(){return Promise.reject(e)}};function HG(e){if("string"==typeof e){for(var t=e.length,n=t-1;n>=0;n--){var r=e.charCodeAt(n);r>127&&r<=2047?t++:r>2047&&r<=65535&&(t+=2)}return t}return"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:void 0}var $G=function(e){var t=e.serviceId,n=e.clientVersion;return function(){return qt(void 0,void 0,void 0,function(){var r,i,o,s,u,g,d,_,x;return Ot(this,function(b){return r=typeof window<"u"&&(null===(o=window?.navigator)||void 0===o?void 0:o.userAgent)?nx().parse(window.navigator.userAgent):void 0,i=[["aws-sdk-js",n],["os/"+((null===(s=r?.os)||void 0===s?void 0:s.name)||"other"),null===(u=r?.os)||void 0===u?void 0:u.version],["lang/js"],["md/browser",(null!==(d=null===(g=r?.browser)||void 0===g?void 0:g.name)&&void 0!==d?d:"unknown")+"_"+(null!==(x=null===(_=r?.browser)||void 0===_?void 0:_.version)&&void 0!==x?x:"unknown")]],t&&i.push(["api/"+t,n]),[2,i]})})}},$2=U(4456),WG=function(e){var u,t=new URL(e),n=t.hostname,r=t.pathname,i=t.port,o=t.protocol,s=t.search;return s&&(u=function qG(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var i=li(e.split("&")),o=i.next();!o.done;o=i.next()){var u=qr(o.value.split("="),2),g=u[0],d=u[1],_=void 0===d?null:d;g=decodeURIComponent(g),_&&(_=decodeURIComponent(_)),g in r?Array.isArray(r[g])?r[g].push(_):r[g]=[r[g],_]:r[g]=_}}catch(x){t={error:x}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(s)),{hostname:n,port:i?parseInt(i):void 0,protocol:o,path:r,query:u}},ZG={},JG={aws:{regions:["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-southeast-1","ap-southeast-2","ap-southeast-3","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"],regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.amazonaws.com",tags:[]},{hostname:"geo-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"geo-fips.{region}.api.aws",tags:["dualstack","fips"]},{hostname:"geo.{region}.api.aws",tags:["dualstack"]}]},"aws-cn":{regions:["cn-north-1","cn-northwest-1"],regionRegex:"^cn\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.amazonaws.com.cn",tags:[]},{hostname:"geo-fips.{region}.amazonaws.com.cn",tags:["fips"]},{hostname:"geo-fips.{region}.api.amazonwebservices.com.cn",tags:["dualstack","fips"]},{hostname:"geo.{region}.api.amazonwebservices.com.cn",tags:["dualstack"]}]},"aws-iso":{regions:["us-iso-east-1","us-iso-west-1"],regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.c2s.ic.gov",tags:[]},{hostname:"geo-fips.{region}.c2s.ic.gov",tags:["fips"]}]},"aws-iso-b":{regions:["us-isob-east-1"],regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.sc2s.sgov.gov",tags:[]},{hostname:"geo-fips.{region}.sc2s.sgov.gov",tags:["fips"]}]},"aws-us-gov":{regions:["us-gov-east-1","us-gov-west-1"],regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.amazonaws.com",tags:[]},{hostname:"geo-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"geo-fips.{region}.api.aws",tags:["dualstack","fips"]},{hostname:"geo.{region}.api.aws",tags:["dualstack"]}]}},KG=function(e,t){return qt(void 0,void 0,void 0,function(){return Ot(this,function(n){return[2,P8(e,Ce(Ce({},t),{signingService:"geo",regionHash:ZG,partitionHash:JG}))]})})};(function(e){function t(n,r){void 0===r&&(r=!0);var i=e.call(this,n)||this;return i.tryNextLink=r,i}Wt(t,e),t.from=function(n,r){return void 0===r&&(r=!0),Object.defineProperty(n,"tryNextLink",{value:r,configurable:!1,enumerable:!1,writable:!1}),n}})(Error),function(e){function t(n,r){void 0===r&&(r=!0);var i=e.call(this,n)||this;return i.tryNextLink=r,i.name="CredentialsProviderError",i}Wt(t,e),t.from=function(n,r){return void 0===r&&(r=!0),Object.defineProperty(n,"tryNextLink",{value:r,configurable:!1,enumerable:!1,writable:!1}),n}}(Error);var QG=["in-region","cross-region","mobile","standard","legacy"],tH=function(){var e,t,r=null===(t=(typeof window<"u"&&(null===(e=window?.navigator)||void 0===e?void 0:e.userAgent)?nx().parse(window.navigator.userAgent):void 0)?.platform)||void 0===t?void 0:t.type;return"tablet"===r||"mobile"===r},nH=function(e){var t,n,r,i,o,s,u,g,d,_,x,b,I,k,M,Se=function(e){var n=(void 0===e?{}:e).defaultsMode;return function(e,t,n){var r,i,o,s=function(){return qt(void 0,void 0,void 0,function(){return Ot(this,function(g){switch(g.label){case 0:i||(i=e()),g.label=1;case 1:return g.trys.push([1,,3,4]),[4,i];case 2:return r=g.sent(),o=!0,[3,4];case 3:return i=void 0,[7];case 4:return[2,r]}})})};return function(){return qt(void 0,void 0,void 0,function(){return Ot(this,function(g){switch(g.label){case 0:return o?[3,2]:[4,s()];case 1:r=g.sent(),g.label=2;case 2:return[2,r]}})})}}(function(){return qt(void 0,void 0,void 0,function(){var r,i;return Ot(this,function(o){switch(o.label){case 0:return"function"!=typeof n?[3,2]:[4,n()];case 1:return i=o.sent(),[3,3];case 2:i=n,o.label=3;case 3:switch((r=i)?.toLowerCase()){case"auto":return[2,Promise.resolve(tH()?"mobile":"standard")];case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return[2,Promise.resolve(r?.toLocaleLowerCase())];case void 0:return[2,Promise.resolve("legacy")];default:throw new Error('Invalid parameter for "defaultsMode", expect '+QG.join(", ")+", got "+r)}return[2]}})})})}(e),ke=function(){return Se().then(RG)},lt=function(e){var t,n,r,i,o;return{apiVersion:"2020-11-19",disableHostPrefix:null!==(t=e?.disableHostPrefix)&&void 0!==t&&t,logger:null!==(n=e?.logger)&&void 0!==n?n:{},regionInfoProvider:null!==(r=e?.regionInfoProvider)&&void 0!==r?r:KG,serviceId:null!==(i=e?.serviceId)&&void 0!==i?i:"Location",urlParser:null!==(o=e?.urlParser)&&void 0!==o?o:WG}}(e);return Ce(Ce(Ce({},lt),e),{runtime:"browser",defaultsMode:Se,base64Decoder:null!==(t=e?.base64Decoder)&&void 0!==t?t:H2,base64Encoder:null!==(n=e?.base64Encoder)&&void 0!==n?n:zG,bodyLengthChecker:null!==(r=e?.bodyLengthChecker)&&void 0!==r?r:HG,credentialDefaultProvider:null!==(i=e?.credentialDefaultProvider)&&void 0!==i?i:function(et){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:null!==(o=e?.defaultUserAgentProvider)&&void 0!==o?o:$G({serviceId:lt.serviceId,clientVersion:"3.48.0"}),maxAttempts:null!==(s=e?.maxAttempts)&&void 0!==s?s:3,region:null!==(u=e?.region)&&void 0!==u?u:GG("Region is missing"),requestHandler:null!==(g=e?.requestHandler)&&void 0!==g?g:new kG(ke),retryMode:null!==(d=e?.retryMode)&&void 0!==d?d:function(){return qt(void 0,void 0,void 0,function(){return Ot(this,function(et){switch(et.label){case 0:return[4,ke()];case 1:return[2,et.sent().retryMode||g2]}})})},sha256:null!==(_=e?.sha256)&&void 0!==_?_:OG.Sha256,streamCollector:null!==(x=e?.streamCollector)&&void 0!==x?x:BG,useDualstackEndpoint:null!==(b=e?.useDualstackEndpoint)&&void 0!==b?b:function(){return Promise.resolve(!1)},useFipsEndpoint:null!==(I=e?.useFipsEndpoint)&&void 0!==I?I:function(){return Promise.resolve(!1)},utf8Decoder:null!==(k=e?.utf8Decoder)&&void 0!==k?k:$2.fromUtf8,utf8Encoder:null!==(M=e?.utf8Encoder)&&void 0!==M?M:$2.toUtf8})},rm=function(e){function t(n){var r=this,o=function(e){var t=e.region,n=e.useFipsEndpoint;if(!t)throw new Error("Region is missing");return Ce(Ce({},e),{region:function(){return qt(void 0,void 0,void 0,function(){var r;return Ot(this,function(i){switch(i.label){case 0:return"string"==typeof t?[2,h2(t)]:[4,t()];case 1:return r=i.sent(),[2,h2(r)]}})})},useFipsEndpoint:function(){return qt(void 0,void 0,void 0,function(){var i;return Ot(this,function(o){switch(o.label){case 0:return"string"!=typeof t?[3,1]:(i=t,[3,3]);case 1:return[4,t()];case 2:i=o.sent(),o.label=3;case 3:return f2(i)?[2,!0]:[2,"boolean"==typeof n?Promise.resolve(n):n()]}})})}})}(nH(n)),u=function(e){var t=function(e){if(void 0===e&&(e=3),"number"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}(e.maxAttempts);return Ce(Ce({},e),{maxAttempts:t,retryStrategy:function(){return qt(void 0,void 0,void 0,function(){return Ot(this,function(r){switch(r.label){case 0:return e.retryStrategy?[2,e.retryStrategy]:[4,yV(e.retryMode)];case 1:return r.sent()===fh.ADAPTIVE?[2,new mV(t)]:[2,new y2(t)]}})})}})}(function(e){var t,n=function(e){if("boolean"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}(e.useDualstackEndpoint),r=e.endpoint,i=e.useFipsEndpoint;return Ce(Ce({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:r?b8(Ce(Ce({},e),{endpoint:r})):function(){return function(e){return qt(void 0,void 0,void 0,function(){var t,n,r,o,s,u,g;return Ot(this,function(d){switch(d.label){case 0:return n=void 0===(t=e.tls)||t,[4,e.region()];case 1:if(r=d.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");return[4,e.useDualstackEndpoint()];case 2:return o=d.sent(),[4,e.useFipsEndpoint()];case 3:return s=d.sent(),[4,e.regionInfoProvider(r,{useDualstackEndpoint:o,useFipsEndpoint:s})];case 4:if(!(u=(null!==(g=d.sent())&&void 0!==g?g:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((n?"https:":"http:")+"//"+u)]}})})}(Ce(Ce({},e),{useDualstackEndpoint:n,useFipsEndpoint:i}))},isCustomEndpoint:!!r,useDualstackEndpoint:n})}(o)),d=function(e){var u,t=e.credentials?function(e){return"function"==typeof e?function(e,t,n){var r,i,o,s=function(){return qt(void 0,void 0,void 0,function(){return Ot(this,function(g){switch(g.label){case 0:i||(i=e()),g.label=1;case 1:return g.trys.push([1,,3,4]),[4,i];case 2:return r=g.sent(),o=!0,[3,4];case 3:return i=void 0,[7];case 4:return[2,r]}})})};if(void 0===t)return function(){return qt(void 0,void 0,void 0,function(){return Ot(this,function(g){switch(g.label){case 0:return o?[3,2]:[4,s()];case 1:r=g.sent(),g.label=2;case 2:return[2,r]}})})};var u=!1;return function(){return qt(void 0,void 0,void 0,function(){return Ot(this,function(g){switch(g.label){case 0:return o?[3,2]:[4,s()];case 1:r=g.sent(),g.label=2;case 2:return u?[2,r]:n&&!n(r)?(u=!0,[2,r]):t(r)?[4,s()]:[3,4];case 3:return g.sent(),[2,r];case 4:return[2,r]}})})}}(e,function(t){return void 0!==t.expiration&&t.expiration.getTime()-Date.now()<3e5},function(t){return void 0!==t.expiration}):Hg(e)}(e.credentials):e.credentialDefaultProvider(e),n=e.signingEscapePath,r=void 0===n||n,i=e.systemClockOffset,o=void 0===i?e.systemClockOffset||0:i,s=e.sha256;return u=e.signer?Hg(e.signer):function(){return Hg(e.region)().then(function(g){return qt(void 0,void 0,void 0,function(){var d,_,x,b;return Ot(this,function(I){switch(I.label){case 0:return _=(d=e).regionInfoProvider,x=[g],b={},[4,e.useFipsEndpoint()];case 1:return b.useFipsEndpoint=I.sent(),[4,e.useDualstackEndpoint()];case 2:return[4,_.apply(d,x.concat([(b.useDualstackEndpoint=I.sent(),b)]))];case 3:return[2,[I.sent()||{},g]]}})})}).then(function(g){var d=qr(g,2),_=d[0],I=_.signingService;e.signingRegion=e.signingRegion||_.signingRegion||d[1],e.signingName=e.signingName||I||e.serviceId;var k=Ce(Ce({},e),{credentials:t,region:e.signingRegion,service:e.signingName,sha256:s,uriEscapePath:r});return new(e.signerConstructor||QV)(k)})},Ce(Ce({},e),{systemClockOffset:o,signingEscapePath:r,credentials:t,signer:u})}(u),_=function aG(e){return Ce(Ce({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}(d);return(r=e.call(this,_)||this).config=_,r.middlewareStack.use(function(e){return{applyToStack:function(t){t.add(function(e){return function(t,n){return function(r){return qt(void 0,void 0,void 0,function(){var i;return Ot(this,function(o){switch(o.label){case 0:return[4,e.retryStrategy()];case 1:return(i=o.sent())?.mode&&(n.userAgent=Mo(Mo([],qr(n.userAgent||[])),[["cfg/retry-mode",i.mode]])),[2,i.retry(t,r)]}})})}}}(e),SV)}}}(r.config)),r.middlewareStack.use(function(e){return{applyToStack:function(t){t.add(function A8(e){var t=this;return function(n){return function(r){return qt(t,void 0,void 0,function(){var i,o,s,u,g;return Ot(this,function(d){return yu.isInstance(i=r.request)&&(s=i.headers,(o=i.body)&&-1===Object.keys(s).map(function(_){return _.toLowerCase()}).indexOf(m2)&&void 0!==(u=e(o))&&(i.headers=Ce(Ce({},i.headers),((g={})[m2]=String(u),g)))),[2,n(Ce(Ce({},r),{request:i}))]})})}}}(e.bodyLengthChecker),R8)}}}(r.config)),r.middlewareStack.use(function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return qt(void 0,void 0,void 0,function(){var r,i;return Ot(this,function(s){return yu.isInstance(n.request)?(r=n.request,(void 0===(i=(e.requestHandler.metadata||{}).handlerProtocol)?"":i).indexOf("h2")>=0&&!r.headers[":authority"]?(delete r.headers.host,r.headers[":authority"]=""):r.headers.host||(r.headers.host=r.hostname),[2,t(n)]):[2,t(n)]})})}}}(e),L8)}}}(r.config)),r.middlewareStack.use({applyToStack:function(t){t.add(function(e,t){return function(n){return qt(void 0,void 0,void 0,function(){var r,i,o,s,u,g,d,_,x;return Ot(this,function(b){switch(b.label){case 0:return r=t.clientName,i=t.commandName,o=t.inputFilterSensitiveLog,s=t.logger,u=t.outputFilterSensitiveLog,[4,e(n)];case 1:return g=b.sent(),s?("function"==typeof s.info&&(_=(d=g.output).$metadata,x=Gn(d,["$metadata"]),s.info({clientName:r,commandName:i,input:o(n.input),output:u(x),metadata:_})),[2,g]):[2,g]}})})}},F8)}}),r.middlewareStack.use(function(e){return{applyToStack:function(t){t.addRelativeTo(function(e){return function(t,n){return function(r){return qt(this,void 0,void 0,function(){var i,o,s,u,g,d;return Ot(this,function(_){switch(_.label){case 0:return yu.isInstance(r.request)?[4,e.signer()]:[2,t(r)];case 1:return i=_.sent(),s=t,u=[Ce({},r)],d={},[4,i.sign(r.request,{signingDate:O2(e.systemClockOffset),signingRegion:n.signing_region,signingService:n.signing_service})];case 2:return[4,s.apply(void 0,[Ce.apply(void 0,u.concat([(d.request=_.sent(),d)]))]).catch(function(x){var b,I=null!==(b=x.ServerTime)&&void 0!==b?b:N2(x.$response);throw I&&(e.systemClockOffset=L2(I,e.systemClockOffset)),x})];case 3:return o=_.sent(),(g=N2(o.response))&&(e.systemClockOffset=L2(g,e.systemClockOffset)),[2,o]}})})}}}(e),iG)}}}(r.config)),r.middlewareStack.use(function(e){return{applyToStack:function(t){t.add(function(e){return function(t,n){return function(r){return qt(void 0,void 0,void 0,function(){var i,o,s,u,g,d,_,x,b;return Ot(this,function(I){switch(I.label){case 0:return yu.isInstance(i=r.request)?(o=i.headers,s=(null===(x=n?.userAgent)||void 0===x?void 0:x.map(Ax))||[],[4,e.defaultUserAgentProvider()]):[2,t(r)];case 1:return u=I.sent().map(Ax),g=(null===(b=e?.customUserAgent)||void 0===b?void 0:b.map(Ax))||[],d=Mo(Mo(Mo([],qr(u)),qr(s)),qr(g)).join(" "),_=Mo(Mo([],qr(u.filter(function(k){return k.startsWith("aws-sdk-")}))),qr(g)).join(" "),"browser"!==e.runtime?(_&&(o[Dx]=o[Dx]?o[k2]+" "+_:_),o[k2]=d):o[Dx]=d,[2,t(Ce(Ce({},r),{request:i}))]}})})}}}(e),uG)}}}(r.config)),r}return Wt(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(dG),oH={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},aH={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function im(e,t,n){return{applyToStack:function(r){r.add(function(e,t){return function(n,r){return function(i){return qt(void 0,void 0,void 0,function(){var o,s,u;return Ot(this,function(g){switch(g.label){case 0:return[4,n(i)];case 1:o=g.sent().response,g.label=2;case 2:return g.trys.push([2,4,,5]),[4,t(o,e)];case 3:return s=g.sent(),[2,{response:o,output:s}];case 4:throw u=g.sent(),Object.assign(u,{$response:o});case 5:return[2]}})})}}}(e,n),oH),r.add(function(e,t){return function(n,r){return function(i){return qt(void 0,void 0,void 0,function(){var o;return Ot(this,function(s){switch(s.label){case 0:return[4,t(i.input,e)];case 1:return o=s.sent(),[2,n(Ce(Ce({},i),{request:o}))]}})})}}}(e,t),aH)}}}var W_=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce({},t)}}(W_||(W_={})),W_))(),Z_=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce({},t)}}(Z_||(Z_={})),Z_))(),om=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Polygon&&{Polygon:t.Polygon.map(function(n){return qu})})}}(om||(om={})),om))(),J_=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Geometry&&{Geometry:om.filterSensitiveLog(t.Geometry)})}}(J_||(J_={})),J_))(),K_=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Entries&&{Entries:t.Entries.map(function(n){return J_.filterSensitiveLog(n)})})}}(K_||(K_={})),K_))(),Y_=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce({},t)}}(Y_||(Y_={})),Y_))(),X_=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce({},t)}}(X_||(X_={})),X_))(),Q_=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Geometry&&{Geometry:om.filterSensitiveLog(t.Geometry)})}}(Q_||(Q_={})),Q_))(),e0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce({},t)}}(e0||(e0={})),e0))(),t0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Geometry&&{Geometry:om.filterSensitiveLog(t.Geometry)})}}(t0||(t0={})),t0))(),n0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Entries&&{Entries:t.Entries.map(function(n){return t0.filterSensitiveLog(n)})})}}(n0||(n0={})),n0))(),r0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Position&&{Position:qu})}}(r0||(r0={})),r0))(),o0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Point&&{Point:qu})}}(o0||(o0={})),o0))(),Yg=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Geometry&&{Geometry:o0.filterSensitiveLog(t.Geometry)})}}(Yg||(Yg={})),Yg))(),a0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Place&&{Place:Yg.filterSensitiveLog(t.Place)})}}(a0||(a0={})),a0))(),s0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Position&&{Position:qu})}}(s0||(s0={})),s0))(),l0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce(Ce({},t),t.Summary&&{Summary:s0.filterSensitiveLog(t.Summary)}),t.Results&&{Results:t.Results.map(function(n){return a0.filterSensitiveLog(n)})})}}(l0||(l0={})),l0))(),u0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce(Ce(Ce({},t),t.Text&&{Text:qu}),t.BiasPosition&&{BiasPosition:qu}),t.FilterBBox&&{FilterBBox:qu})}}(u0||(u0={})),u0))(),c0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce({},t),t.Place&&{Place:Yg.filterSensitiveLog(t.Place)})}}(c0||(c0={})),c0))(),d0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce(Ce(Ce(Ce({},t),t.Text&&{Text:qu}),t.BiasPosition&&{BiasPosition:qu}),t.FilterBBox&&{FilterBBox:qu}),t.ResultBBox&&{ResultBBox:qu})}}(d0||(d0={})),d0))(),f0=(()=>(function(e){e.filterSensitiveLog=function(t){return Ce(Ce(Ce({},t),t.Summary&&{Summary:d0.filterSensitiveLog(t.Summary)}),t.Results&&{Results:t.Results.map(function(n){return c0.filterSensitiveLog(n)})})}}(f0||(f0={})),f0))(),gH=function(e,t){return qt(void 0,void 0,void 0,function(){var n,r,i,o,u,g,d,_,x,b,I,k;return Ot(this,function(M){switch(M.label){case 0:return r=[Ce({},e)],k={},[4,nn(e.body,t)];case 1:switch(n=Ce.apply(void 0,r.concat([(k.body=M.sent(),k)])),o="UnknownError",o=gr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return u=[{}],[4,fr(n,t)];case 3:return i=Ce.apply(void 0,[Ce.apply(void 0,u.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 4:return g=[{}],[4,hr(n,t)];case 5:return i=Ce.apply(void 0,[Ce.apply(void 0,g.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 6:return d=[{}],[4,Jr(n,t)];case 7:return i=Ce.apply(void 0,[Ce.apply(void 0,d.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 8:return _=[{}],[4,pr(n,t)];case 9:return i=Ce.apply(void 0,[Ce.apply(void 0,_.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 10:return x=[{}],[4,mr(n,t)];case 11:return i=Ce.apply(void 0,[Ce.apply(void 0,x.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 12:o=(b=n.body).code||b.Code||o,i=Ce(Ce({},b),{name:""+o,message:b.message||b.Message||o,$fault:"client",$metadata:pe(e)}),M.label=13;case 13:return i.message=I=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(I),i))]}})})},bH=function(e,t){return qt(void 0,void 0,void 0,function(){var n,r,i,o,u,g,d,_,x,b,I,k;return Ot(this,function(M){switch(M.label){case 0:return r=[Ce({},e)],k={},[4,nn(e.body,t)];case 1:switch(n=Ce.apply(void 0,r.concat([(k.body=M.sent(),k)])),o="UnknownError",o=gr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return u=[{}],[4,fr(n,t)];case 3:return i=Ce.apply(void 0,[Ce.apply(void 0,u.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 4:return g=[{}],[4,hr(n,t)];case 5:return i=Ce.apply(void 0,[Ce.apply(void 0,g.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 6:return d=[{}],[4,Jr(n,t)];case 7:return i=Ce.apply(void 0,[Ce.apply(void 0,d.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 8:return _=[{}],[4,pr(n,t)];case 9:return i=Ce.apply(void 0,[Ce.apply(void 0,_.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 10:return x=[{}],[4,mr(n,t)];case 11:return i=Ce.apply(void 0,[Ce.apply(void 0,x.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 12:o=(b=n.body).code||b.Code||o,i=Ce(Ce({},b),{name:""+o,message:b.message||b.Message||o,$fault:"client",$metadata:pe(e)}),M.label=13;case 13:return i.message=I=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(I),i))]}})})},GH=function(e,t){return qt(void 0,void 0,void 0,function(){var n,r,i,o,u,g,d,_,x,b,I,k;return Ot(this,function(M){switch(M.label){case 0:return r=[Ce({},e)],k={},[4,nn(e.body,t)];case 1:switch(n=Ce.apply(void 0,r.concat([(k.body=M.sent(),k)])),o="UnknownError",o=gr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return u=[{}],[4,fr(n,t)];case 3:return i=Ce.apply(void 0,[Ce.apply(void 0,u.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 4:return g=[{}],[4,hr(n,t)];case 5:return i=Ce.apply(void 0,[Ce.apply(void 0,g.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 6:return d=[{}],[4,Jr(n,t)];case 7:return i=Ce.apply(void 0,[Ce.apply(void 0,d.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 8:return _=[{}],[4,pr(n,t)];case 9:return i=Ce.apply(void 0,[Ce.apply(void 0,_.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 10:return x=[{}],[4,mr(n,t)];case 11:return i=Ce.apply(void 0,[Ce.apply(void 0,x.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 12:o=(b=n.body).code||b.Code||o,i=Ce(Ce({},b),{name:""+o,message:b.message||b.Message||o,$fault:"client",$metadata:pe(e)}),M.label=13;case 13:return i.message=I=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(I),i))]}})})},YH=function(e,t){return qt(void 0,void 0,void 0,function(){var n,r,i,o,u,g,d,_,x,b,I,k;return Ot(this,function(M){switch(M.label){case 0:return r=[Ce({},e)],k={},[4,nn(e.body,t)];case 1:switch(n=Ce.apply(void 0,r.concat([(k.body=M.sent(),k)])),o="UnknownError",o=gr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return u=[{}],[4,fr(n,t)];case 3:return i=Ce.apply(void 0,[Ce.apply(void 0,u.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 4:return g=[{}],[4,hr(n,t)];case 5:return i=Ce.apply(void 0,[Ce.apply(void 0,g.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 6:return d=[{}],[4,Jr(n,t)];case 7:return i=Ce.apply(void 0,[Ce.apply(void 0,d.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 8:return _=[{}],[4,pr(n,t)];case 9:return i=Ce.apply(void 0,[Ce.apply(void 0,_.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 10:return x=[{}],[4,mr(n,t)];case 11:return i=Ce.apply(void 0,[Ce.apply(void 0,x.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 12:o=(b=n.body).code||b.Code||o,i=Ce(Ce({},b),{name:""+o,message:b.message||b.Message||o,$fault:"client",$metadata:pe(e)}),M.label=13;case 13:return i.message=I=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(I),i))]}})})},a$=function(e,t){return qt(void 0,void 0,void 0,function(){var n,r,i,o,u,g,d,_,x,b,I,k;return Ot(this,function(M){switch(M.label){case 0:return r=[Ce({},e)],k={},[4,nn(e.body,t)];case 1:switch(n=Ce.apply(void 0,r.concat([(k.body=M.sent(),k)])),o="UnknownError",o=gr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return u=[{}],[4,fr(n,t)];case 3:return i=Ce.apply(void 0,[Ce.apply(void 0,u.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 4:return g=[{}],[4,hr(n,t)];case 5:return i=Ce.apply(void 0,[Ce.apply(void 0,g.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 6:return d=[{}],[4,Jr(n,t)];case 7:return i=Ce.apply(void 0,[Ce.apply(void 0,d.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 8:return _=[{}],[4,pr(n,t)];case 9:return i=Ce.apply(void 0,[Ce.apply(void 0,_.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 10:return x=[{}],[4,mr(n,t)];case 11:return i=Ce.apply(void 0,[Ce.apply(void 0,x.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 12:o=(b=n.body).code||b.Code||o,i=Ce(Ce({},b),{name:""+o,message:b.message||b.Message||o,$fault:"client",$metadata:pe(e)}),M.label=13;case 13:return i.message=I=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(I),i))]}})})},u$=function(e,t){return qt(void 0,void 0,void 0,function(){var n,r,i,o,u,g,d,_,x,b,I,k;return Ot(this,function(M){switch(M.label){case 0:return r=[Ce({},e)],k={},[4,nn(e.body,t)];case 1:switch(n=Ce.apply(void 0,r.concat([(k.body=M.sent(),k)])),o="UnknownError",o=gr(e,n.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return u=[{}],[4,fr(n,t)];case 3:return i=Ce.apply(void 0,[Ce.apply(void 0,u.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 4:return g=[{}],[4,hr(n,t)];case 5:return i=Ce.apply(void 0,[Ce.apply(void 0,g.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 6:return d=[{}],[4,Jr(n,t)];case 7:return i=Ce.apply(void 0,[Ce.apply(void 0,d.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 8:return _=[{}],[4,pr(n,t)];case 9:return i=Ce.apply(void 0,[Ce.apply(void 0,_.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 10:return x=[{}],[4,mr(n,t)];case 11:return i=Ce.apply(void 0,[Ce.apply(void 0,x.concat([M.sent()])),{name:o,$metadata:pe(e)}]),[3,13];case 12:o=(b=n.body).code||b.Code||o,i=Ce(Ce({},b),{name:""+o,message:b.message||b.Message||o,$fault:"client",$metadata:pe(e)}),M.label=13;case 13:return i.message=I=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(I),i))]}})})},fr=function(e,t){return qt(void 0,void 0,void 0,function(){var n,r;return Ot(this,function(i){return n={name:"AccessDeniedException",$fault:"client",$metadata:pe(e),Message:void 0},null!=(r=e.body).message&&(n.Message=Ri(r.message)),[2,n]})})},hr=function(e,t){return qt(void 0,void 0,void 0,function(){var n,r;return Ot(this,function(i){return n={name:"InternalServerException",$fault:"server",$retryable:{},$metadata:pe(e),Message:void 0},null!=(r=e.body).message&&(n.Message=Ri(r.message)),[2,n]})})},Jr=function(e,t){return qt(void 0,void 0,void 0,function(){var n,r;return Ot(this,function(i){return n={name:"ResourceNotFoundException",$fault:"client",$metadata:pe(e),Message:void 0},null!=(r=e.body).message&&(n.Message=Ri(r.message)),[2,n]})})},pr=function(e,t){return qt(void 0,void 0,void 0,function(){var n,r;return Ot(this,function(i){return n={name:"ThrottlingException",$fault:"client",$retryable:{},$metadata:pe(e),Message:void 0},null!=(r=e.body).message&&(n.Message=Ri(r.message)),[2,n]})})},mr=function(e,t){return qt(void 0,void 0,void 0,function(){var n,r;return Ot(this,function(i){return n={name:"ValidationException",$fault:"client",$metadata:pe(e),FieldList:void 0,Message:void 0,Reason:void 0},null!=(r=e.body).fieldList&&(n.FieldList=L9(r.fieldList,t)),null!=r.message&&(n.Message=Ri(r.message)),null!=r.reason&&(n.Reason=Ri(r.reason)),[2,n]})})},_$=function(e,t){return e.filter(function(n){return null!=n}).map(function(n){return null===n?null:function(e,t){return Ce(Ce({},null!=e.GeofenceId&&{GeofenceId:e.GeofenceId}),null!=e.Geometry&&{Geometry:X2(e.Geometry,t)})}(n,t)})},q2=function(e,t){return e.filter(function(n){return null!=n}).map(function(n){return null===n?null:G2(n)})},J2=function(e,t){return e.filter(function(n){return null!=n}).map(function(n){return null===n?null:n})},X2=function(e,t){return Ce({},null!=e.Polygon&&{Polygon:E$(e.Polygon,t)})},Q2=function(e,t){return e.filter(function(n){return null!=n}).map(function(n){return null===n?null:n})},E$=function(e,t){return e.filter(function(n){return null!=n}).map(function(n){return null===n?null:function(e,t){return e.filter(function(n){return null!=n}).map(function(n){return null===n?null:id(n,t)})}(n,t)})},id=function(e,t){return e.filter(function(n){return null!=n}).map(function(n){return null===n?null:G2(n)})},sm=function(e,t){return{Code:Ri(e.Code),Message:Ri(e.Message)}},h0=function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:qg(n)})},tA=function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:Ri(n)})},rA=function(e,t){return{Polygon:null!=e.Polygon?Q$(e.Polygon,t):void 0}},Q$=function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:Al(n,t)})}(n,t)})},iA=function(e,t){return{AddressNumber:Ri(e.AddressNumber),Country:Ri(e.Country),Geometry:null!=e.Geometry?g9(e.Geometry,t):void 0,Interpolated:fG(e.Interpolated),Label:Ri(e.Label),Municipality:Ri(e.Municipality),Neighborhood:Ri(e.Neighborhood),PostalCode:Ri(e.PostalCode),Region:Ri(e.Region),Street:Ri(e.Street),SubRegion:Ri(e.SubRegion),TimeZone:null!=e.TimeZone?M9(e.TimeZone,t):void 0}},g9=function(e,t){return{Point:null!=e.Point?Al(e.Point,t):void 0}},Al=function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:qg(n)})},M9=function(e,t){return{Name:Ri(e.Name),Offset:$g(e.Offset)}},L9=function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:function(e,t){return{Message:Ri(e.message),Name:Ri(e.name)}}(n)})},pe=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},nn=function(e,t){return function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then(function(n){return t.utf8Encoder(n)})}(e,t).then(function(n){return n.length?JSON.parse(n):{}})},gr=function(e,t){var r=function(o){var s=o;return s.indexOf(":")>=0&&(s=s.split(":")[0]),s.indexOf("#")>=0&&(s=s.split("#")[1]),s},i=("x-amzn-errortype",Object.keys(e.headers).find(function(u){return u.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==i?r(e.headers[i]):void 0!==t.code?r(t.code):void 0!==t.__type?r(t.__type):""},k9=function(e){function t(n){var r=e.call(this)||this;return r.input=n,r}return Wt(t,e),t.prototype.resolveMiddleware=function(n,r,i){this.middlewareStack.use(im(r,this.serialize,this.deserialize));var o=n.concat(this.middlewareStack),_=r.requestHandler;return o.resolve(function(x){return _.handle(x.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"SearchPlaceIndexForTextCommand",inputFilterSensitiveLog:u0.filterSensitiveLog,outputFilterSensitiveLog:f0.filterSensitiveLog})},t.prototype.serialize=function(n,r){return function(e,t){return qt(void 0,void 0,void 0,function(){var n,i,o,s,u,g,d,_,x,b;return Ot(this,function(I){switch(I.label){case 0:return[4,t.endpoint()];case 1:if(n=I.sent(),o=void 0===(i=n.protocol)?"https":i,s=n.port,g={"content-type":"application/json"},d=((u=n.path)?.endsWith("/")?u.slice(0,-1):u||"")+"/places/v0/indexes/{IndexName}/search/text",void 0===e.IndexName)throw new Error("No value provided for input HTTP label: IndexName.");if((_=e.IndexName).length<=0)throw new Error("Empty value provided for input HTTP label: IndexName.");return d=d.replace("{IndexName}",mh(_)),x=JSON.stringify(Ce(Ce(Ce(Ce(Ce(Ce({},null!=e.BiasPosition&&{BiasPosition:id(e.BiasPosition,t)}),null!=e.FilterBBox&&{FilterBBox:q2(e.FilterBBox)}),null!=e.FilterCountries&&{FilterCountries:J2(e.FilterCountries)}),null!=e.Language&&{Language:e.Language}),null!=e.MaxResults&&{MaxResults:e.MaxResults}),null!=e.Text&&{Text:e.Text})),[4,t.endpoint()];case 2:if(b=I.sent().hostname,!0!==t.disableHostPrefix&&!Jp(b="places."+b))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new yu({protocol:o,hostname:b,port:s,method:"POST",headers:g,path:d,body:x})]}})})}(n,r)},t.prototype.deserialize=function(n,r){return function(e,t){return qt(void 0,void 0,void 0,function(){var n,r,i,o;return Ot(this,function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,u$(e,t)]:(n={$metadata:pe(e),Results:void 0,Summary:void 0},i=vu,o=ph,[4,nn(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Results&&(n.Results=function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:function(e,t){return{Distance:qg(e.Distance),Place:null!=e.Place?iA(e.Place,t):void 0,Relevance:qg(e.Relevance)}}(n,t)})}(r.Results,t)),null!=r.Summary&&(n.Summary=function(e,t){return{BiasPosition:null!=e.BiasPosition?Al(e.BiasPosition,t):void 0,DataSource:Ri(e.DataSource),FilterBBox:null!=e.FilterBBox?h0(e.FilterBBox):void 0,FilterCountries:null!=e.FilterCountries?tA(e.FilterCountries):void 0,Language:Ri(e.Language),MaxResults:$g(e.MaxResults),ResultBBox:null!=e.ResultBBox?h0(e.ResultBBox):void 0,Text:Ri(e.Text)}}(r.Summary,t)),[2,Promise.resolve(n)]}})})}(n,r)},t}(Xp),F9=function(e){function t(n){var r=e.call(this)||this;return r.input=n,r}return Wt(t,e),t.prototype.resolveMiddleware=function(n,r,i){this.middlewareStack.use(im(r,this.serialize,this.deserialize));var o=n.concat(this.middlewareStack),_=r.requestHandler;return o.resolve(function(x){return _.handle(x.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"SearchPlaceIndexForPositionCommand",inputFilterSensitiveLog:r0.filterSensitiveLog,outputFilterSensitiveLog:l0.filterSensitiveLog})},t.prototype.serialize=function(n,r){return function(e,t){return qt(void 0,void 0,void 0,function(){var n,i,o,s,u,g,d,_,x,b;return Ot(this,function(I){switch(I.label){case 0:return[4,t.endpoint()];case 1:if(n=I.sent(),o=void 0===(i=n.protocol)?"https":i,s=n.port,g={"content-type":"application/json"},d=((u=n.path)?.endsWith("/")?u.slice(0,-1):u||"")+"/places/v0/indexes/{IndexName}/search/position",void 0===e.IndexName)throw new Error("No value provided for input HTTP label: IndexName.");if((_=e.IndexName).length<=0)throw new Error("Empty value provided for input HTTP label: IndexName.");return d=d.replace("{IndexName}",mh(_)),x=JSON.stringify(Ce(Ce(Ce({},null!=e.Language&&{Language:e.Language}),null!=e.MaxResults&&{MaxResults:e.MaxResults}),null!=e.Position&&{Position:id(e.Position,t)})),[4,t.endpoint()];case 2:if(b=I.sent().hostname,!0!==t.disableHostPrefix&&!Jp(b="places."+b))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new yu({protocol:o,hostname:b,port:s,method:"POST",headers:g,path:d,body:x})]}})})}(n,r)},t.prototype.deserialize=function(n,r){return function(e,t){return qt(void 0,void 0,void 0,function(){var n,r,i,o;return Ot(this,function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,a$(e,t)]:(n={$metadata:pe(e),Results:void 0,Summary:void 0},i=vu,o=ph,[4,nn(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Results&&(n.Results=function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:function(e,t){return{Distance:qg(e.Distance),Place:null!=e.Place?iA(e.Place,t):void 0}}(n,t)})}(r.Results,t)),null!=r.Summary&&(n.Summary=function(e,t){return{DataSource:Ri(e.DataSource),Language:Ri(e.Language),MaxResults:$g(e.MaxResults),Position:null!=e.Position?Al(e.Position,t):void 0}}(r.Summary,t)),[2,Promise.resolve(n)]}})})}(n,r)},t}(Xp),z9=function(e){function t(n){var r=e.call(this)||this;return r.input=n,r}return Wt(t,e),t.prototype.resolveMiddleware=function(n,r,i){this.middlewareStack.use(im(r,this.serialize,this.deserialize));var o=n.concat(this.middlewareStack),_=r.requestHandler;return o.resolve(function(x){return _.handle(x.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"GetGeofenceCommand",inputFilterSensitiveLog:X_.filterSensitiveLog,outputFilterSensitiveLog:Q_.filterSensitiveLog})},t.prototype.serialize=function(n,r){return function(e,t){return qt(void 0,void 0,void 0,function(){var n,i,o,s,u,g,d,_,b;return Ot(this,function(I){switch(I.label){case 0:return[4,t.endpoint()];case 1:if(n=I.sent(),o=void 0===(i=n.protocol)?"https":i,s=n.port,g={},d=((u=n.path)?.endsWith("/")?u.slice(0,-1):u||"")+"/geofencing/v0/collections/{CollectionName}/geofences/{GeofenceId}",void 0===e.CollectionName)throw new Error("No value provided for input HTTP label: CollectionName.");if((_=e.CollectionName).length<=0)throw new Error("Empty value provided for input HTTP label: CollectionName.");if(d=d.replace("{CollectionName}",mh(_)),void 0===e.GeofenceId)throw new Error("No value provided for input HTTP label: GeofenceId.");if((_=e.GeofenceId).length<=0)throw new Error("Empty value provided for input HTTP label: GeofenceId.");return d=d.replace("{GeofenceId}",mh(_)),[4,t.endpoint()];case 2:if(b=I.sent().hostname,!0!==t.disableHostPrefix&&!Jp(b="geofencing."+b))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new yu({protocol:o,hostname:b,port:s,method:"GET",headers:g,path:d,body:void 0})]}})})}(n,r)},t.prototype.deserialize=function(n,r){return function(e,t){return qt(void 0,void 0,void 0,function(){var n,r,i,o;return Ot(this,function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,GH(e,t)]:(n={$metadata:pe(e),CreateTime:void 0,GeofenceId:void 0,Geometry:void 0,Status:void 0,UpdateTime:void 0},i=vu,o=ph,[4,nn(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).CreateTime&&(n.CreateTime=vu(em(r.CreateTime))),null!=r.GeofenceId&&(n.GeofenceId=Ri(r.GeofenceId)),null!=r.Geometry&&(n.Geometry=rA(r.Geometry,t)),null!=r.Status&&(n.Status=Ri(r.Status)),null!=r.UpdateTime&&(n.UpdateTime=vu(em(r.UpdateTime))),[2,Promise.resolve(n)]}})})}(n,r)},t}(Xp),B9=function(e){function t(n){var r=e.call(this)||this;return r.input=n,r}return Wt(t,e),t.prototype.resolveMiddleware=function(n,r,i){this.middlewareStack.use(im(r,this.serialize,this.deserialize));var o=n.concat(this.middlewareStack),_=r.requestHandler;return o.resolve(function(x){return _.handle(x.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"ListGeofencesCommand",inputFilterSensitiveLog:e0.filterSensitiveLog,outputFilterSensitiveLog:n0.filterSensitiveLog})},t.prototype.serialize=function(n,r){return function(e,t){return qt(void 0,void 0,void 0,function(){var n,i,o,s,u,g,d,_,x,b;return Ot(this,function(I){switch(I.label){case 0:return[4,t.endpoint()];case 1:if(n=I.sent(),o=void 0===(i=n.protocol)?"https":i,s=n.port,g={"content-type":"application/json"},d=((u=n.path)?.endsWith("/")?u.slice(0,-1):u||"")+"/geofencing/v0/collections/{CollectionName}/list-geofences",void 0===e.CollectionName)throw new Error("No value provided for input HTTP label: CollectionName.");if((_=e.CollectionName).length<=0)throw new Error("Empty value provided for input HTTP label: CollectionName.");return d=d.replace("{CollectionName}",mh(_)),x=JSON.stringify(Ce({},null!=e.NextToken&&{NextToken:e.NextToken})),[4,t.endpoint()];case 2:if(b=I.sent().hostname,!0!==t.disableHostPrefix&&!Jp(b="geofencing."+b))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new yu({protocol:o,hostname:b,port:s,method:"POST",headers:g,path:d,body:x})]}})})}(n,r)},t.prototype.deserialize=function(n,r){return function(e,t){return qt(void 0,void 0,void 0,function(){var n,r,i,o;return Ot(this,function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,YH(e,t)]:(n={$metadata:pe(e),Entries:void 0,NextToken:void 0},i=vu,o=ph,[4,nn(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Entries&&(n.Entries=function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:function(e,t){return{CreateTime:null!=e.CreateTime?vu(em(e.CreateTime)):void 0,GeofenceId:Ri(e.GeofenceId),Geometry:null!=e.Geometry?rA(e.Geometry,t):void 0,Status:Ri(e.Status),UpdateTime:null!=e.UpdateTime?vu(em(e.UpdateTime)):void 0}}(n,t)})}(r.Entries,t)),null!=r.NextToken&&(n.NextToken=Ri(r.NextToken)),[2,Promise.resolve(n)]}})})}(n,r)},t}(Xp),j9=function(e){function t(n){var r=e.call(this)||this;return r.input=n,r}return Wt(t,e),t.prototype.resolveMiddleware=function(n,r,i){this.middlewareStack.use(im(r,this.serialize,this.deserialize));var o=n.concat(this.middlewareStack),_=r.requestHandler;return o.resolve(function(x){return _.handle(x.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"BatchPutGeofenceCommand",inputFilterSensitiveLog:K_.filterSensitiveLog,outputFilterSensitiveLog:Y_.filterSensitiveLog})},t.prototype.serialize=function(n,r){return function(e,t){return qt(void 0,void 0,void 0,function(){var n,i,o,s,u,g,d,_,x,b;return Ot(this,function(I){switch(I.label){case 0:return[4,t.endpoint()];case 1:if(n=I.sent(),o=void 0===(i=n.protocol)?"https":i,s=n.port,g={"content-type":"application/json"},d=((u=n.path)?.endsWith("/")?u.slice(0,-1):u||"")+"/geofencing/v0/collections/{CollectionName}/put-geofences",void 0===e.CollectionName)throw new Error("No value provided for input HTTP label: CollectionName.");if((_=e.CollectionName).length<=0)throw new Error("Empty value provided for input HTTP label: CollectionName.");return d=d.replace("{CollectionName}",mh(_)),x=JSON.stringify(Ce({},null!=e.Entries&&{Entries:_$(e.Entries,t)})),[4,t.endpoint()];case 2:if(b=I.sent().hostname,!0!==t.disableHostPrefix&&!Jp(b="geofencing."+b))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new yu({protocol:o,hostname:b,port:s,method:"POST",headers:g,path:d,body:x})]}})})}(n,r)},t.prototype.deserialize=function(n,r){return function(e,t){return qt(void 0,void 0,void 0,function(){var n,r,i,o;return Ot(this,function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,bH(e,t)]:(n={$metadata:pe(e),Errors:void 0,Successes:void 0},i=vu,o=ph,[4,nn(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Errors&&(n.Errors=function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:function(e,t){return{Error:null!=e.Error?sm(e.Error,t):void 0,GeofenceId:Ri(e.GeofenceId)}}(n,t)})}(r.Errors,t)),null!=r.Successes&&(n.Successes=function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:function(e,t){return{CreateTime:null!=e.CreateTime?vu(em(e.CreateTime)):void 0,GeofenceId:Ri(e.GeofenceId),UpdateTime:null!=e.UpdateTime?vu(em(e.UpdateTime)):void 0}}(n)})}(r.Successes)),[2,Promise.resolve(n)]}})})}(n,r)},t}(Xp),U9=function(e){function t(n){var r=e.call(this)||this;return r.input=n,r}return Wt(t,e),t.prototype.resolveMiddleware=function(n,r,i){this.middlewareStack.use(im(r,this.serialize,this.deserialize));var o=n.concat(this.middlewareStack),_=r.requestHandler;return o.resolve(function(x){return _.handle(x.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"BatchDeleteGeofenceCommand",inputFilterSensitiveLog:W_.filterSensitiveLog,outputFilterSensitiveLog:Z_.filterSensitiveLog})},t.prototype.serialize=function(n,r){return function(e,t){return qt(void 0,void 0,void 0,function(){var n,i,o,s,u,g,d,_,x,b;return Ot(this,function(I){switch(I.label){case 0:return[4,t.endpoint()];case 1:if(n=I.sent(),o=void 0===(i=n.protocol)?"https":i,s=n.port,g={"content-type":"application/json"},d=((u=n.path)?.endsWith("/")?u.slice(0,-1):u||"")+"/geofencing/v0/collections/{CollectionName}/delete-geofences",void 0===e.CollectionName)throw new Error("No value provided for input HTTP label: CollectionName.");if((_=e.CollectionName).length<=0)throw new Error("Empty value provided for input HTTP label: CollectionName.");return d=d.replace("{CollectionName}",mh(_)),x=JSON.stringify(Ce({},null!=e.GeofenceIds&&{GeofenceIds:Q2(e.GeofenceIds)})),[4,t.endpoint()];case 2:if(b=I.sent().hostname,!0!==t.disableHostPrefix&&!Jp(b="geofencing."+b))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new yu({protocol:o,hostname:b,port:s,method:"POST",headers:g,path:d,body:x})]}})})}(n,r)},t.prototype.deserialize=function(n,r){return function(e,t){return qt(void 0,void 0,void 0,function(){var n,r,i,o;return Ot(this,function(s){switch(s.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,gH(e,t)]:(n={$metadata:pe(e),Errors:void 0},i=vu,o=ph,[4,nn(e.body,t)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[s.sent()]),"body"])).Errors&&(n.Errors=function(e,t){return(e||[]).filter(function(n){return null!=n}).map(function(n){return null===n?null:function(e,t){return{Error:null!=e.Error?sm(e.Error,t):void 0,GeofenceId:Ri(e.GeofenceId)}}(n,t)})}(r.Errors,t)),[2,Promise.resolve(n)]}})})}(n,r)},t}(Xp);var Ux=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o};function fA(e,t){if(!Number.isFinite(e)||!Number.isFinite(t))throw new Error("Invalid coordinates: ["+e+","+t+"]");if(t<-90||90<t)throw new Error("Latitude must be between -90 and 90 degrees inclusive.");if(e<-180||180<e)throw new Error("Longitude must be between -180 and 180 degrees inclusive.")}function Vx(e){if(!/^[-._\p{L}\p{N}]+$/iu.test(e))throw new Error("Invalid geofenceId: '"+e+"' - IDs can only contain alphanumeric characters, hyphens, underscores and periods.")}function hA(e,t){var n=t?t+": ":"";if(e.length<4)throw new Error(n+"LinearRing must contain 4 or more coordinates.");var r=[];if(e.forEach(function(_){try{fA(_[0],_[1])}catch(x){r.push({coordinates:_,error:x.message})}}),r.length>0)throw new Error(n+"One or more of the coordinates in the Polygon LinearRing are not valid: "+JSON.stringify(r));var i=Ux(e[0],2),o=i[0],s=i[1],u=Ux(e[e.length-1],2);if(o!==u[0]||s!==u[1])throw new Error(n+"LinearRing's first and last coordinates are not the same");if(function J9(e){for(var i,o,t=function W9(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(e),n=0,r=1;r<t.length;)i=o||t[0],n+=((o=t[r])[0]-i[0])*(o[1]+i[1]),r++;return n>0}(e))throw new Error(n+"LinearRing coordinates must be wound counterclockwise")}var Wu=function(e,t,n,r){return new(n||(n=Promise))(function(o,s){function u(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(u,g)}d((r=r.apply(e,t||[])).next())})},Zu=function(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}},X9=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},hl=new $u("AmazonLocationServiceProvider"),e7=function(){function e(t){this._config=t||{},hl.debug("Geo Options",this._config)}return e.prototype.getCategory=function(){return e.CATEGORY},e.prototype.getProviderName=function(){return e.PROVIDER_NAME},e.prototype.configure=function(t){return hl.debug("configure Amazon Location Service Provider",t),t?(this._config=Object.assign({},this._config,t),this._config):this._config},e.prototype.getAvailableMaps=function(){this._verifyMapResources();var t=[],n=this._config.maps.items,r=this._config.region;for(var i in n)t.push({mapName:i,style:n[i].style,region:r});return t},e.prototype.getDefaultMap=function(){this._verifyMapResources();var t=this._config.maps.default;return{mapName:t,style:this._config.maps.items[t].style,region:this._config.region}},e.prototype.searchByText=function(t,n){return Wu(this,void 0,void 0,function(){var i,o,s,u,g,d;return Zu(this,function(x){switch(x.label){case 0:return[4,this._ensureCredentials()];case 1:if(!x.sent())throw new Error("No credentials");if(this._verifySearchIndex(n?.searchIndexName),i={Text:t,IndexName:this._config.search_indices.default},n){if(i.FilterCountries=n.countries,i.MaxResults=n.maxResults,n.searchIndexName&&(i.IndexName=n.searchIndexName),n.biasPosition&&n.searchAreaConstraints)throw new Error("BiasPosition and SearchAreaConstraints are mutually exclusive, please remove one or the other from the options object");n.biasPosition&&(i.BiasPosition=n.biasPosition),n.searchAreaConstraints&&(i.FilterBBox=n.searchAreaConstraints)}o=new rm({credentials:this._config.credentials,region:this._config.region,customUserAgent:mc()}),s=new k9(i),x.label=2;case 2:return x.trys.push([2,4,,5]),[4,o.send(s)];case 3:return u=x.sent(),[3,5];case 4:throw g=x.sent(),hl.debug(g),g;case 5:return d=u.Results.map(function(b){return b.Place}),[2,YP()(d,{deep:!0})]}})})},e.prototype.searchByCoordinates=function(t,n){return Wu(this,void 0,void 0,function(){var i,o,s,u,g,d;return Zu(this,function(x){switch(x.label){case 0:return[4,this._ensureCredentials()];case 1:if(!x.sent())throw new Error("No credentials");this._verifySearchIndex(n?.searchIndexName),i={Position:t,IndexName:this._config.search_indices.default},n&&(n.searchIndexName&&(i.IndexName=n.searchIndexName),i.MaxResults=n.maxResults),o=new rm({credentials:this._config.credentials,region:this._config.region,customUserAgent:mc()}),s=new F9(i),x.label=2;case 2:return x.trys.push([2,4,,5]),[4,o.send(s)];case 3:return u=x.sent(),[3,5];case 4:throw g=x.sent(),hl.debug(g),g;case 5:return d=u.Results.map(function(b){return b.Place}),[2,YP()(d[0],{deep:!0})]}})})},e.prototype.saveGeofences=function(t,n){return Wu(this,void 0,void 0,function(){var i,o,s,g=this;return Zu(this,function(d){switch(d.label){case 0:if(t.length<1)throw new Error("Geofence input array is empty");return[4,this._ensureCredentials()];case 1:if(!d.sent())throw new Error("No credentials");try{this._verifyGeofenceCollections(n?.collectionName)}catch(_){throw hl.debug(_),_}for(function Y9(e){var t={};e.forEach(function(n){if(!n.geofenceId)throw new Error("Geofence '"+n+"' is missing geofenceId");var r=n.geofenceId;if(Vx(r),t[r])throw new Error("Duplicate geofenceId: "+r);if(t[r]=!0,!n.geometry)throw new Error("Geofence '"+r+"' is missing geometry");var i=n.geometry;if(!i.polygon)throw new Error("Geofence '"+r+"' is missing geometry.polygon");var o=i.polygon;try{!function K9(e,t){var n=t?t+": ":"";if(!Array.isArray(e))throw new Error(n+"Polygon is of incorrect structure. It should be an array of LinearRings");if(e.length<1)throw new Error(n+"Polygon must have a single LinearRing array.");if(e.length>1)throw new Error(n+"Polygon must have a single LinearRing array. Note: We do not currently support polygons with holes, multipolygons, polygons that are wound clockwise, or that cross the antimeridian.");if(e.reduce(function(i,o){return i+o.length},0)>1e3)throw new Error(n+"Polygon has more than the maximum 1000 vertices.");e.forEach(function(i){hA(i,t)})}(o,r)}catch(g){if(g.message.includes("Polygon has more than the maximum 1000 vertices."))throw new Error("Geofence '"+r+"' has more than the maximum of 1000 vertices")}hA(Ux(o,1)[0],r)})}(t),i=t.map(function(_){return{GeofenceId:_.geofenceId,Geometry:{Polygon:_.geometry.polygon}}}),o={successes:[],errors:[]},s=[];i.length>0;)s.push(i.splice(0,10));return[4,Promise.all(s.map(function(_){return Wu(g,void 0,void 0,function(){var x,b;return Zu(this,function(I){switch(I.label){case 0:return I.trys.push([0,2,,3]),[4,this._AmazonLocationServiceBatchPutGeofenceCall(_,n?.collectionName||this._config.geofenceCollections.default)];case 1:return x=I.sent(),[3,3];case 2:return b=I.sent(),_.forEach(function(k){o.errors.push({geofenceId:k.GeofenceId,error:{code:"APIConnectionError",message:b.message}})}),[2];case 3:return x.Successes.forEach(function(k){o.successes.push({geofenceId:k.GeofenceId,createTime:k.CreateTime,updateTime:k.UpdateTime})}),x.Errors.forEach(function(k){var M=k.Error;o.errors.push({error:{code:M.Code,message:M.Message},geofenceId:k.GeofenceId})}),[2]}})})}))];case 2:return d.sent(),[2,o]}})})},e.prototype.getGeofence=function(t,n){return Wu(this,void 0,void 0,function(){var i,s,u,g;return Zu(this,function(M){switch(M.label){case 0:return[4,this._ensureCredentials()];case 1:if(!M.sent())throw new Error("No credentials");try{this._verifyGeofenceCollections(n?.collectionName)}catch(Se){throw hl.debug(Se),Se}Vx(t),i=new rm({credentials:this._config.credentials,region:this._config.region,customUserAgent:mc()}),s=new z9({GeofenceId:t,CollectionName:n?.collectionName||this._config.geofenceCollections.default}),M.label=2;case 2:return M.trys.push([2,4,,5]),[4,i.send(s)];case 3:return u=M.sent(),[3,5];case 4:throw g=M.sent(),hl.debug(g),g;case 5:return[2,{createTime:u.CreateTime,geofenceId:u.GeofenceId,geometry:{polygon:u.Geometry.Polygon},status:u.Status,updateTime:u.UpdateTime}]}})})},e.prototype.listGeofences=function(t){return Wu(this,void 0,void 0,function(){var r,o,s,u,g;return Zu(this,function(x){switch(x.label){case 0:return[4,this._ensureCredentials()];case 1:if(!x.sent())throw new Error("No credentials");try{this._verifyGeofenceCollections(t?.collectionName)}catch(b){throw hl.debug(b),b}r=new rm({credentials:this._config.credentials,region:this._config.region,customUserAgent:mc()}),o=new B9({NextToken:t?.nextToken,CollectionName:t?.collectionName||this._config.geofenceCollections.default}),x.label=2;case 2:return x.trys.push([2,4,,5]),[4,r.send(o)];case 3:return s=x.sent(),[3,5];case 4:throw u=x.sent(),hl.debug(u),u;case 5:return g=s.NextToken,[2,{entries:s.Entries.map(function(b){return{geofenceId:b.GeofenceId,createTime:b.CreateTime,updateTime:b.UpdateTime,status:b.Status,geometry:{polygon:b.Geometry.Polygon}}}),nextToken:g}]}})})},e.prototype.deleteGeofences=function(t,n){return Wu(this,void 0,void 0,function(){var i,o,s,u,g=this;return Zu(this,function(d){switch(d.label){case 0:if(t.length<1)throw new Error("GeofenceId input array is empty");return[4,this._ensureCredentials()];case 1:if(!d.sent())throw new Error("No credentials");if(this._verifyGeofenceCollections(n?.collectionName),(i=t.filter(function(_){try{Vx(_)}catch{return!0}})).length>0)throw new Error("Invalid geofence ids: "+i.join(", "));for(o={successes:[],errors:[]},s=[],u=0;u<t.length;)s.push(t.slice(u,u+=10));return[4,Promise.all(s.map(function(_){return Wu(g,void 0,void 0,function(){var x,b,I,k;return Zu(this,function(M){switch(M.label){case 0:return M.trys.push([0,2,,3]),[4,this._AmazonLocationServiceBatchDeleteGeofenceCall(_,n?.collectionName||this._config.geofenceCollections.default)];case 1:return x=M.sent(),[3,3];case 2:return b=M.sent(),_.forEach(function(Se){o.errors.push({geofenceId:Se,error:{code:b.message,message:b.message}})}),[2];case 3:return I=x.Errors.map(function(Se){return Se.geofenceId}),(k=o.successes).push.apply(k,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(X9(arguments[t]));return e}(_.filter(function(Se){return!I.includes(Se)}))),[2]}})})}))];case 2:return d.sent(),[2,o]}})})},e.prototype._ensureCredentials=function(){return Wu(this,void 0,void 0,function(){var t,n,r;return Zu(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,bx.get()];case 1:return(t=i.sent())?(n=bx.shear(t),hl.debug("Set credentials for storage. Credentials are:",n),this._config.credentials=n,[2,!0]):[2,!1];case 2:return r=i.sent(),hl.debug("Ensure credentials error. Credentials are:",r),[2,!1];case 3:return[2]}})})},e.prototype._verifyMapResources=function(){var t;if(!this._config.maps)throw hl.debug(t="No map resources found in amplify config, run 'amplify add geo' to create one and run `amplify push` after"),new Error(t);if(!this._config.maps.default)throw hl.debug(t="No default map resource found in amplify config, run 'amplify add geo' to create one and run `amplify push` after"),new Error(t)},e.prototype._verifySearchIndex=function(t){if(!(this._config.search_indices&&this._config.search_indices.default||t)){var n="No Search Index found in amplify config, please run `amplify add geo` to create one and run `amplify push` after.";throw hl.debug(n),new Error(n)}},e.prototype._verifyGeofenceCollections=function(t){if(!(this._config.geofenceCollections&&this._config.geofenceCollections.default||t)){var n="No Geofence Collections found, please run `amplify add geo` to create one and run `amplify push` after.";throw hl.debug(n),new Error(n)}},e.prototype._AmazonLocationServiceBatchPutGeofenceCall=function(t,n){return Wu(this,void 0,void 0,function(){var r,i,o,s;return Zu(this,function(g){switch(g.label){case 0:r={Entries:t,CollectionName:n||this._config.geofenceCollections.default},i=new rm({credentials:this._config.credentials,region:this._config.region,customUserAgent:mc()}),o=new j9(r),g.label=1;case 1:return g.trys.push([1,3,,4]),[4,i.send(o)];case 2:return s=g.sent(),[3,4];case 3:throw g.sent();case 4:return[2,s]}})})},e.prototype._AmazonLocationServiceBatchDeleteGeofenceCall=function(t,n){return Wu(this,void 0,void 0,function(){var r,i,o,s;return Zu(this,function(g){switch(g.label){case 0:r={GeofenceIds:t,CollectionName:n||this._config.geofenceCollections.default},i=new rm({credentials:this._config.credentials,region:this._config.region,customUserAgent:mc()}),o=new U9(r),g.label=1;case 1:return g.trys.push([1,3,,4]),[4,i.send(o)];case 2:return s=g.sent(),[3,4];case 3:throw g.sent();case 4:return[2,s]}})})},e.CATEGORY="Geo",e.PROVIDER_NAME="AmazonLocationService",e}(),um=function(e,t,n,r){return new(n||(n=Promise))(function(o,s){function u(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(u,g)}d((r=r.apply(e,t||[])).next())})},cm=function(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(_){return function g(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(6===d[0]&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(_){d=[6,_],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,_])}}},od=new $u("Geo"),ff="AmazonLocationService",n7=function(){function e(){this._config={},this._pluggables=[],od.debug("Geo Options",this._config)}return e.prototype.getModuleName=function(){return e.MODULE},e.prototype.addPluggable=function(t){if(t&&"Geo"===t.getCategory())return this._pluggables.push(t),t.configure(this._config[t.getProviderName()])},e.prototype.getPluggable=function(t){var n=this._pluggables.find(function(r){return r.getProviderName()===t});if(void 0===n)throw od.debug("No plugin found with providerName",t),new Error("No plugin found in Geo for the provider");return n},e.prototype.removePluggable=function(t){this._pluggables=this._pluggables.filter(function(n){return n.getProviderName()!==t})},e.prototype.configure=function(t){var n=this;if(od.debug("configure Geo"),!t)return this._config;var r=KP(t);return this._config=Object.assign({},this._config,r.Geo,t),this._pluggables.forEach(function(i){i.configure(n._config[i.getProviderName()])}),0===this._pluggables.length&&this.addPluggable(new e7),this._config},e.prototype.getAvailableMaps=function(t){return void 0===t&&(t=ff),this.getPluggable(t).getAvailableMaps()},e.prototype.getDefaultMap=function(t){return void 0===t&&(t=ff),this.getPluggable(t).getDefaultMap()},e.prototype.searchByText=function(t,n){return um(this,void 0,void 0,function(){var r,o,s;return cm(this,function(u){switch(u.label){case 0:o=this.getPluggable(void 0===(r=(n||{}).providerName)?ff:r),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,o.searchByText(t,n)];case 2:return[2,u.sent()];case 3:throw s=u.sent(),od.debug(s),s;case 4:return[2]}})})},e.prototype.searchByCoordinates=function(t,n){return um(this,void 0,void 0,function(){var r,o,s,u,g,d;return cm(this,function(_){switch(_.label){case 0:o=this.getPluggable(void 0===(r=(n||{}).providerName)?ff:r),s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}(t,2),u=s[0],g=s[1],_.label=1;case 1:return _.trys.push([1,3,,4]),fA(u,g),[4,o.searchByCoordinates(t,n)];case 2:return[2,_.sent()];case 3:throw d=_.sent(),od.debug(d),d;case 4:return[2]}})})},e.prototype.saveGeofences=function(t,n){return um(this,void 0,void 0,function(){var r,o,s,u;return cm(this,function(g){switch(g.label){case 0:o=this.getPluggable(void 0===(r=(n||{}).providerName)?ff:r),s=Array.isArray(t)?t:[t],g.label=1;case 1:return g.trys.push([1,3,,4]),[4,o.saveGeofences(s,n)];case 2:return[2,g.sent()];case 3:throw u=g.sent(),od.debug(u),u;case 4:return[2]}})})},e.prototype.getGeofence=function(t,n){return um(this,void 0,void 0,function(){var r,o,s;return cm(this,function(u){switch(u.label){case 0:o=this.getPluggable(void 0===(r=(n||{}).providerName)?ff:r),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,o.getGeofence(t,n)];case 2:return[2,u.sent()];case 3:throw s=u.sent(),od.debug(s),s;case 4:return[2]}})})},e.prototype.listGeofences=function(t){return um(this,void 0,void 0,function(){var n,i,o;return cm(this,function(s){switch(s.label){case 0:i=this.getPluggable(void 0===(n=(t||{}).providerName)?ff:n),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,i.listGeofences(t)];case 2:return[2,s.sent()];case 3:throw o=s.sent(),od.debug(o),o;case 4:return[2]}})})},e.prototype.deleteGeofences=function(t,n){return um(this,void 0,void 0,function(){var r,o,s,u;return cm(this,function(g){switch(g.label){case 0:o=this.getPluggable(void 0===(r=(n||{}).providerName)?ff:r),s=Array.isArray(t)?t:[t],g.label=1;case 1:return g.trys.push([1,3,,4]),[4,o.deleteGeofences(s,n)];case 2:return[2,g.sent()];case 3:throw u=g.sent(),od.debug(u),u;case 4:return[2]}})})},e.MODULE="Geo",e}(),p0=new n7;Up.register(p0);var Xg=U(4987),m0=function(e,t,n,r){return new(n||(n=Promise))(function(o,s){function u(_){try{d(r.next(_))}catch(x){s(x)}}function g(_){try{d(r.throw(_))}catch(x){s(x)}}function d(_){_.done?o(_.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(_.value).then(u,g)}d((r=r.apply(e,t||[])).next())})};class g0{constructor(t,n){this.refreshCredentials=()=>m0(this,void 0,void 0,function*(){try{this.credentials=yield Up.Auth.currentCredentials()}catch(r){throw console.error(`Failed to refresh credentials: ${r}`),r}}),this.refreshCredentialsWithRetry=()=>m0(this,void 0,void 0,function*(){try{yield kP(this.refreshCredentials,[],3e5),this.activeTimeout&&clearTimeout(this.activeTimeout);const o=new Date(this.credentials.expiration).getTime()-(new Date).getTime()-1e4;this.activeTimeout=window.setTimeout(this.refreshCredentialsWithRetry,o)}catch(r){console.error(`Failed to refresh credentials: ${r}`)}}),this.transformRequest=(r,i)=>{if("Style"===i&&!r.includes("://")){if(null==this.region)throw new Error("AWS region for map is undefined. Please verify that the region is set in aws-exports.js or that you are providing an AWS region parameter to createMap");r=`https://maps.geo.${this.region}.amazonaws.com/maps/v0/maps/${r}/style-descriptor`}if(r.includes("amazonaws.com")){const o=r+`?x-amz-user-agent=${encodeURIComponent((e=>e.replace(/\./g,"%2E"))(mc()))}`;return{url:Uz.signUrl(o,{access_key:this.credentials.accessKeyId,secret_key:this.credentials.secretAccessKey,session_token:this.credentials.sessionToken})}}},this.credentials=t,this.region=n,this.activeTimeout=null,this.refreshCredentialsWithRetry(),$z.listen("auth",r=>{switch(r.payload.event){case"signIn":case"signOut":case"tokenRefresh":this.refreshCredentialsWithRetry()}})}}g0.createMapLibreMap=e=>m0(void 0,void 0,void 0,function*(){const{region:t,mapConstructor:n=Xg.Map}=e,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["region","mapConstructor"]),i=p0.getDefaultMap(),s=new g0(yield Up.Auth.currentCredentials(),t||i.region).transformRequest;return new n(Object.assign(Object.assign({},r),{style:e.style||i.mapName,transformRequest:s}))}),U(8407),U(209),U(8527),U(3913);const wA_amplify={Auth:{identityPoolId:"us-east-1:57a33aaf-0026-44e3-908c-7fb9d5730b9f",region:"us-east-1"},geo:{AmazonLocationService:{maps:{items:{AmazonMap:{style:"Default style"}},default:"AmazonMap"},region:"us-east-1"}}};let I7=(()=>{class e{constructor(){Up.configure(wA_amplify)}ngAfterViewInit(){this.loadMap()}getCurrentPosition(){return new ut(n=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(r=>{n.next({latitude:r.coords.latitude,longitude:r.coords.longitude}),n.complete()}):n.error()})}loadMap(){(e=>m0(void 0,void 0,void 0,function*(){return g0.createMapLibreMap(e)}))({container:"map",center:[0,0],zoom:0}).then(n=>{this.map=n,this.map.addControl(new Xg.NavigationControl),this.map.addControl(new Xg.GeolocateControl),this.getCurrentPosition().subscribe(r=>{this.map.flyTo({center:[r.longitude,r.latitude],zoom:13});const i=new Xg.Marker;i.setLngLat([r.longitude,r.latitude]),i.setPopup((new Xg.Popup).setHTML("Angular AWS Map")),i.addTo(this.map)})})}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=gl({type:e,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container-fluid","py-3"],["id","map"]],template:function(n,r){1&n&&(nv(0,"div",0)(1,"h1"),AS(2,"Angular AWS Map"),Qm(),rv(3,"div",1),Qm())},styles:["#map[_ngcontent-%COMP%]{height:400px;width:100%;max-width:600px}"]}),e})(),T7=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Sa({type:e,bootstrap:[I7]}),e.\u0275inj=Ti({imports:[Dk,_z]}),e})();(function lL(){CI=!1})(),Pk().bootstrapModule(T7).catch(e=>console.error(e))},1437:function(Ae,J,U){"use strict";var V=this&&this.__importDefault||function(G){return G&&G.__esModule?G:{default:G}};Object.defineProperty(J,"__esModule",{value:!0});var X=V(U(9814)),m=U(8275);J.default=function $(G,z,T){void 0===T&&(T={});for(var D=T.steps||64,F=T.properties?T.properties:!Array.isArray(G)&&"Feature"===G.type&&G.properties?G.properties:{},Z=[],Y=0;Y<D;Y++)Z.push(X.default(G,z,-360*Y/D,T).geometry.coordinates);return Z.push(Z[0]),m.polygon([Z],F)}},9814:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});var V=U(8275),X=U(8418);J.default=function m($,G,z,T){void 0===T&&(T={});var D=X.getCoord($),F=V.degreesToRadians(D[0]),Z=V.degreesToRadians(D[1]),Y=V.degreesToRadians(z),ie=V.lengthToRadians(G,T.units),me=Math.asin(Math.sin(Z)*Math.cos(ie)+Math.cos(Z)*Math.sin(ie)*Math.cos(Y)),se=F+Math.atan2(Math.sin(Y)*Math.sin(ie)*Math.cos(Z),Math.cos(ie)-Math.sin(Z)*Math.sin(me)),_e=V.radiansToDegrees(se),Me=V.radiansToDegrees(me);return V.point([_e,Me],T.properties)}},2777:(Ae,J,U)=>{"use strict";var X=U(8418),m=U(8275);J.Z=function $(G,z,T){void 0===T&&(T={});var D=X.getCoord(G),F=X.getCoord(z),Z=m.degreesToRadians(F[1]-D[1]),Y=m.degreesToRadians(F[0]-D[0]),ie=m.degreesToRadians(D[1]),me=m.degreesToRadians(F[1]),se=Math.pow(Math.sin(Z/2),2)+Math.pow(Math.sin(Y/2),2)*Math.cos(ie)*Math.cos(me);return m.radiansToLength(2*Math.atan2(Math.sqrt(se),Math.sqrt(1-se)),T.units)}},8275:(Ae,J)=>{"use strict";function U(L,B,j){void 0===j&&(j={});var ee={type:"Feature"};return(0===j.id||j.id)&&(ee.id=j.id),j.bbox&&(ee.bbox=j.bbox),ee.properties=B||{},ee.geometry=L,ee}function X(L,B,j){if(void 0===j&&(j={}),!L)throw new Error("coordinates is required");if(!Array.isArray(L))throw new Error("coordinates must be an Array");if(L.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!nt(L[0])||!nt(L[1]))throw new Error("coordinates must contain numbers");return U({type:"Point",coordinates:L},B,j)}function $(L,B,j){void 0===j&&(j={});for(var ee=0,W=L;ee<W.length;ee++){var ce=W[ee];if(ce.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var We=0;We<ce[ce.length-1].length;We++)if(ce[ce.length-1][We]!==ce[0][We])throw new Error("First and last Position are not equivalent.")}return U({type:"Polygon",coordinates:L},B,j)}function z(L,B,j){if(void 0===j&&(j={}),L.length<2)throw new Error("coordinates must be an array of two or more positions");return U({type:"LineString",coordinates:L},B,j)}function D(L,B){void 0===B&&(B={});var j={type:"FeatureCollection"};return B.id&&(j.id=B.id),B.bbox&&(j.bbox=B.bbox),j.features=L,j}function F(L,B,j){return void 0===j&&(j={}),U({type:"MultiLineString",coordinates:L},B,j)}function Z(L,B,j){return void 0===j&&(j={}),U({type:"MultiPoint",coordinates:L},B,j)}function Y(L,B,j){return void 0===j&&(j={}),U({type:"MultiPolygon",coordinates:L},B,j)}function se(L,B){void 0===B&&(B="kilometers");var j=J.factors[B];if(!j)throw new Error(B+" units is invalid");return L*j}function _e(L,B){void 0===B&&(B="kilometers");var j=J.factors[B];if(!j)throw new Error(B+" units is invalid");return L/j}function Ze(L){return L%(2*Math.PI)*180/Math.PI}function nt(L){return!isNaN(L)&&null!==L&&!Array.isArray(L)}Object.defineProperty(J,"__esModule",{value:!0}),J.earthRadius=6371008.8,J.factors={centimeters:100*J.earthRadius,centimetres:100*J.earthRadius,degrees:J.earthRadius/111325,feet:3.28084*J.earthRadius,inches:39.37*J.earthRadius,kilometers:J.earthRadius/1e3,kilometres:J.earthRadius/1e3,meters:J.earthRadius,metres:J.earthRadius,miles:J.earthRadius/1609.344,millimeters:1e3*J.earthRadius,millimetres:1e3*J.earthRadius,nauticalmiles:J.earthRadius/1852,radians:1,yards:1.0936*J.earthRadius},J.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/J.earthRadius,yards:1.0936133},J.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},J.feature=U,J.geometry=function V(L,B,j){switch(void 0===j&&(j={}),L){case"Point":return X(B).geometry;case"LineString":return z(B).geometry;case"Polygon":return $(B).geometry;case"MultiPoint":return Z(B).geometry;case"MultiLineString":return F(B).geometry;case"MultiPolygon":return Y(B).geometry;default:throw new Error(L+" is invalid")}},J.point=X,J.points=function m(L,B,j){return void 0===j&&(j={}),D(L.map(function(ee){return X(ee,B)}),j)},J.polygon=$,J.polygons=function G(L,B,j){return void 0===j&&(j={}),D(L.map(function(ee){return $(ee,B)}),j)},J.lineString=z,J.lineStrings=function T(L,B,j){return void 0===j&&(j={}),D(L.map(function(ee){return z(ee,B)}),j)},J.featureCollection=D,J.multiLineString=F,J.multiPoint=Z,J.multiPolygon=Y,J.geometryCollection=function ie(L,B,j){return void 0===j&&(j={}),U({type:"GeometryCollection",geometries:L},B,j)},J.round=function me(L,B){if(void 0===B&&(B=0),B&&!(B>=0))throw new Error("precision must be a positive number");var j=Math.pow(10,B||0);return Math.round(L*j)/j},J.radiansToLength=se,J.lengthToRadians=_e,J.lengthToDegrees=function Me(L,B){return Ze(_e(L,B))},J.bearingToAzimuth=function Ne(L){var B=L%360;return B<0&&(B+=360),B},J.radiansToDegrees=Ze,J.degreesToRadians=function je(L){return L%360*Math.PI/180},J.convertLength=function Ee(L,B,j){if(void 0===B&&(B="kilometers"),void 0===j&&(j="kilometers"),!(L>=0))throw new Error("length must be a positive number");return se(_e(L,B),j)},J.convertArea=function Je(L,B,j){if(void 0===B&&(B="meters"),void 0===j&&(j="kilometers"),!(L>=0))throw new Error("area must be a positive number");var ee=J.areaFactors[B];if(!ee)throw new Error("invalid original units");var W=J.areaFactors[j];if(!W)throw new Error("invalid final units");return L/ee*W},J.isNumber=nt,J.isObject=function Ct(L){return!!L&&L.constructor===Object},J.validateBBox=function Ue(L){if(!L)throw new Error("bbox is required");if(!Array.isArray(L))throw new Error("bbox must be an Array");if(4!==L.length&&6!==L.length)throw new Error("bbox must be an Array of 4 or 6 numbers");L.forEach(function(B){if(!nt(B))throw new Error("bbox must only contain numbers")})},J.validateId=function A(L){if(!L)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof L))throw new Error("id must be a number or a string")}},8418:(Ae,J,U)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});var V=U(8275);J.getCoord=function X(Z){if(!Z)throw new Error("coord is required");if(!Array.isArray(Z)){if("Feature"===Z.type&&null!==Z.geometry&&"Point"===Z.geometry.type)return Z.geometry.coordinates;if("Point"===Z.type)return Z.coordinates}if(Array.isArray(Z)&&Z.length>=2&&!Array.isArray(Z[0])&&!Array.isArray(Z[1]))return Z;throw new Error("coord must be GeoJSON Point or an Array of numbers")},J.getCoords=function m(Z){if(Array.isArray(Z))return Z;if("Feature"===Z.type){if(null!==Z.geometry)return Z.geometry.coordinates}else if(Z.coordinates)return Z.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},J.containsNumber=function $(Z){if(Z.length>1&&V.isNumber(Z[0])&&V.isNumber(Z[1]))return!0;if(Array.isArray(Z[0])&&Z[0].length)return $(Z[0]);throw new Error("coordinates must only contain numbers")},J.geojsonType=function G(Z,Y,ie){if(!Y||!ie)throw new Error("type and name required");if(!Z||Z.type!==Y)throw new Error("Invalid input to "+ie+": must be a "+Y+", given "+Z.type)},J.featureOf=function z(Z,Y,ie){if(!Z)throw new Error("No feature passed");if(!ie)throw new Error(".featureOf() requires a name");if(!Z||"Feature"!==Z.type||!Z.geometry)throw new Error("Invalid input to "+ie+", Feature with geometry required");if(!Z.geometry||Z.geometry.type!==Y)throw new Error("Invalid input to "+ie+": must be a "+Y+", given "+Z.geometry.type)},J.collectionOf=function T(Z,Y,ie){if(!Z)throw new Error("No featureCollection passed");if(!ie)throw new Error(".collectionOf() requires a name");if(!Z||"FeatureCollection"!==Z.type)throw new Error("Invalid input to "+ie+", FeatureCollection required");for(var me=0,se=Z.features;me<se.length;me++){var _e=se[me];if(!_e||"Feature"!==_e.type||!_e.geometry)throw new Error("Invalid input to "+ie+", Feature with geometry required");if(!_e.geometry||_e.geometry.type!==Y)throw new Error("Invalid input to "+ie+": must be a "+Y+", given "+_e.geometry.type)}},J.getGeom=function D(Z){return"Feature"===Z.type?Z.geometry:Z},J.getType=function F(Z,Y){return"FeatureCollection"===Z.type?"FeatureCollection":"GeometryCollection"===Z.type?"GeometryCollection":"Feature"===Z.type&&null!==Z.geometry?Z.geometry.type:Z.type}},7230:function(Ae){Ae.exports=function(J){var U={};function V(X){if(U[X])return U[X].exports;var m=U[X]={i:X,l:!1,exports:{}};return J[X].call(m.exports,m,m.exports,V),m.l=!0,m.exports}return V.m=J,V.c=U,V.d=function(X,m,$){V.o(X,m)||Object.defineProperty(X,m,{enumerable:!0,get:$})},V.r=function(X){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(X,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(X,"__esModule",{value:!0})},V.t=function(X,m){if(1&m&&(X=V(X)),8&m||4&m&&"object"==typeof X&&X&&X.__esModule)return X;var $=Object.create(null);if(V.r($),Object.defineProperty($,"default",{enumerable:!0,value:X}),2&m&&"string"!=typeof X)for(var G in X)V.d($,G,function(z){return X[z]}.bind(null,G));return $},V.n=function(X){var m=X&&X.__esModule?function(){return X.default}:function(){return X};return V.d(m,"a",m),m},V.o=function(X,m){return Object.prototype.hasOwnProperty.call(X,m)},V.p="",V(V.s=90)}({17:function(J,U,V){"use strict";U.__esModule=!0,U.default=void 0;var X=V(18),m=function(){function $(){}return $.getFirstMatch=function(G,z){var T=z.match(G);return T&&T.length>0&&T[1]||""},$.getSecondMatch=function(G,z){var T=z.match(G);return T&&T.length>1&&T[2]||""},$.matchAndReturnConst=function(G,z,T){if(G.test(z))return T},$.getWindowsVersionName=function(G){switch(G){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},$.getMacOSVersionName=function(G){var z=G.split(".").splice(0,2).map(function(T){return parseInt(T,10)||0});if(z.push(0),10===z[0])switch(z[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},$.getAndroidVersionName=function(G){var z=G.split(".").splice(0,2).map(function(T){return parseInt(T,10)||0});if(z.push(0),!(1===z[0]&&z[1]<5))return 1===z[0]&&z[1]<6?"Cupcake":1===z[0]&&z[1]>=6?"Donut":2===z[0]&&z[1]<2?"Eclair":2===z[0]&&2===z[1]?"Froyo":2===z[0]&&z[1]>2?"Gingerbread":3===z[0]?"Honeycomb":4===z[0]&&z[1]<1?"Ice Cream Sandwich":4===z[0]&&z[1]<4?"Jelly Bean":4===z[0]&&z[1]>=4?"KitKat":5===z[0]?"Lollipop":6===z[0]?"Marshmallow":7===z[0]?"Nougat":8===z[0]?"Oreo":9===z[0]?"Pie":void 0},$.getVersionPrecision=function(G){return G.split(".").length},$.compareVersions=function(G,z,T){void 0===T&&(T=!1);var D=$.getVersionPrecision(G),F=$.getVersionPrecision(z),Z=Math.max(D,F),Y=0,ie=$.map([G,z],function(me){var se=Z-$.getVersionPrecision(me),_e=me+new Array(se+1).join(".0");return $.map(_e.split("."),function(Me){return new Array(20-Me.length).join("0")+Me}).reverse()});for(T&&(Y=Z-Math.min(D,F)),Z-=1;Z>=Y;){if(ie[0][Z]>ie[1][Z])return 1;if(ie[0][Z]===ie[1][Z]){if(Z===Y)return 0;Z-=1}else if(ie[0][Z]<ie[1][Z])return-1}},$.map=function(G,z){var T,D=[];if(Array.prototype.map)return Array.prototype.map.call(G,z);for(T=0;T<G.length;T+=1)D.push(z(G[T]));return D},$.find=function(G,z){var T,D;if(Array.prototype.find)return Array.prototype.find.call(G,z);for(T=0,D=G.length;T<D;T+=1){var F=G[T];if(z(F,T))return F}},$.assign=function(G){for(var z,T,D=G,F=arguments.length,Z=new Array(F>1?F-1:0),Y=1;Y<F;Y++)Z[Y-1]=arguments[Y];if(Object.assign)return Object.assign.apply(Object,[G].concat(Z));var ie=function(){var me=Z[z];"object"==typeof me&&null!==me&&Object.keys(me).forEach(function(se){D[se]=me[se]})};for(z=0,T=Z.length;z<T;z+=1)ie();return G},$.getBrowserAlias=function(G){return X.BROWSER_ALIASES_MAP[G]},$.getBrowserTypeByAlias=function(G){return X.BROWSER_MAP[G]||""},$}();U.default=m,J.exports=U.default},18:function(J,U,V){"use strict";U.__esModule=!0,U.ENGINE_MAP=U.OS_MAP=U.PLATFORMS_MAP=U.BROWSER_MAP=U.BROWSER_ALIASES_MAP=void 0,U.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},U.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},U.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},U.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},U.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(J,U,V){"use strict";U.__esModule=!0,U.default=void 0;var X,m=(X=V(91))&&X.__esModule?X:{default:X},$=V(18);function G(T,D){for(var F=0;F<D.length;F++){var Z=D[F];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(T,Z.key,Z)}}var z=function(){function T(){}var D,Z;return T.getParser=function(Y,ie){if(void 0===ie&&(ie=!1),"string"!=typeof Y)throw new Error("UserAgent should be a string");return new m.default(Y,ie)},T.parse=function(Y){return new m.default(Y).getResult()},D=T,Z=[{key:"BROWSER_MAP",get:function(){return $.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return $.ENGINE_MAP}},{key:"OS_MAP",get:function(){return $.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return $.PLATFORMS_MAP}}],null&&G(D.prototype,null),Z&&G(D,Z),T}();U.default=z,J.exports=U.default},91:function(J,U,V){"use strict";U.__esModule=!0,U.default=void 0;var X=T(V(92)),m=T(V(93)),$=T(V(94)),G=T(V(95)),z=T(V(17));function T(F){return F&&F.__esModule?F:{default:F}}var D=function(){function F(Y,ie){if(void 0===ie&&(ie=!1),null==Y||""===Y)throw new Error("UserAgent parameter can't be empty");this._ua=Y,this.parsedResult={},!0!==ie&&this.parse()}var Z=F.prototype;return Z.getUA=function(){return this._ua},Z.test=function(Y){return Y.test(this._ua)},Z.parseBrowser=function(){var Y=this;this.parsedResult.browser={};var ie=z.default.find(X.default,function(me){if("function"==typeof me.test)return me.test(Y);if(me.test instanceof Array)return me.test.some(function(se){return Y.test(se)});throw new Error("Browser's test function is not valid")});return ie&&(this.parsedResult.browser=ie.describe(this.getUA())),this.parsedResult.browser},Z.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},Z.getBrowserName=function(Y){return Y?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},Z.getBrowserVersion=function(){return this.getBrowser().version},Z.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},Z.parseOS=function(){var Y=this;this.parsedResult.os={};var ie=z.default.find(m.default,function(me){if("function"==typeof me.test)return me.test(Y);if(me.test instanceof Array)return me.test.some(function(se){return Y.test(se)});throw new Error("Browser's test function is not valid")});return ie&&(this.parsedResult.os=ie.describe(this.getUA())),this.parsedResult.os},Z.getOSName=function(Y){var ie=this.getOS().name;return Y?String(ie).toLowerCase()||"":ie||""},Z.getOSVersion=function(){return this.getOS().version},Z.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},Z.getPlatformType=function(Y){void 0===Y&&(Y=!1);var ie=this.getPlatform().type;return Y?String(ie).toLowerCase()||"":ie||""},Z.parsePlatform=function(){var Y=this;this.parsedResult.platform={};var ie=z.default.find($.default,function(me){if("function"==typeof me.test)return me.test(Y);if(me.test instanceof Array)return me.test.some(function(se){return Y.test(se)});throw new Error("Browser's test function is not valid")});return ie&&(this.parsedResult.platform=ie.describe(this.getUA())),this.parsedResult.platform},Z.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},Z.getEngineName=function(Y){return Y?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},Z.parseEngine=function(){var Y=this;this.parsedResult.engine={};var ie=z.default.find(G.default,function(me){if("function"==typeof me.test)return me.test(Y);if(me.test instanceof Array)return me.test.some(function(se){return Y.test(se)});throw new Error("Browser's test function is not valid")});return ie&&(this.parsedResult.engine=ie.describe(this.getUA())),this.parsedResult.engine},Z.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},Z.getResult=function(){return z.default.assign({},this.parsedResult)},Z.satisfies=function(Y){var ie=this,me={},se=0,_e={},Me=0;if(Object.keys(Y).forEach(function(Ue){var A=Y[Ue];"string"==typeof A?(_e[Ue]=A,Me+=1):"object"==typeof A&&(me[Ue]=A,se+=1)}),se>0){var Ne=Object.keys(me),Ze=z.default.find(Ne,function(Ue){return ie.isOS(Ue)});if(Ze){var je=this.satisfies(me[Ze]);if(void 0!==je)return je}var Ee=z.default.find(Ne,function(Ue){return ie.isPlatform(Ue)});if(Ee){var Je=this.satisfies(me[Ee]);if(void 0!==Je)return Je}}if(Me>0){var nt=Object.keys(_e),Ct=z.default.find(nt,function(Ue){return ie.isBrowser(Ue,!0)});if(void 0!==Ct)return this.compareVersion(_e[Ct])}},Z.isBrowser=function(Y,ie){void 0===ie&&(ie=!1);var me=this.getBrowserName().toLowerCase(),se=Y.toLowerCase(),_e=z.default.getBrowserTypeByAlias(se);return ie&&_e&&(se=_e.toLowerCase()),se===me},Z.compareVersion=function(Y){var ie=[0],me=Y,se=!1,_e=this.getBrowserVersion();if("string"==typeof _e)return">"===Y[0]||"<"===Y[0]?(me=Y.substr(1),"="===Y[1]?(se=!0,me=Y.substr(2)):ie=[],ie.push(">"===Y[0]?1:-1)):"="===Y[0]?me=Y.substr(1):"~"===Y[0]&&(se=!0,me=Y.substr(1)),ie.indexOf(z.default.compareVersions(_e,me,se))>-1},Z.isOS=function(Y){return this.getOSName(!0)===String(Y).toLowerCase()},Z.isPlatform=function(Y){return this.getPlatformType(!0)===String(Y).toLowerCase()},Z.isEngine=function(Y){return this.getEngineName(!0)===String(Y).toLowerCase()},Z.is=function(Y,ie){return void 0===ie&&(ie=!1),this.isBrowser(Y,ie)||this.isOS(Y)||this.isPlatform(Y)},Z.some=function(Y){var ie=this;return void 0===Y&&(Y=[]),Y.some(function(me){return ie.is(me)})},F}();U.default=D,J.exports=U.default},92:function(J,U,V){"use strict";U.__esModule=!0,U.default=void 0;var X,m=(X=V(17))&&X.__esModule?X:{default:X},$=/version\/(\d+(\.?_?\d+)+)/i;U.default=[{test:[/googlebot/i],describe:function(z){var T={name:"Googlebot"},D=m.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,z)||m.default.getFirstMatch($,z);return D&&(T.version=D),T}},{test:[/opera/i],describe:function(z){var T={name:"Opera"},D=m.default.getFirstMatch($,z)||m.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/opr\/|opios/i],describe:function(z){var T={name:"Opera"},D=m.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,z)||m.default.getFirstMatch($,z);return D&&(T.version=D),T}},{test:[/SamsungBrowser/i],describe:function(z){var T={name:"Samsung Internet for Android"},D=m.default.getFirstMatch($,z)||m.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/Whale/i],describe:function(z){var T={name:"NAVER Whale Browser"},D=m.default.getFirstMatch($,z)||m.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/MZBrowser/i],describe:function(z){var T={name:"MZ Browser"},D=m.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,z)||m.default.getFirstMatch($,z);return D&&(T.version=D),T}},{test:[/focus/i],describe:function(z){var T={name:"Focus"},D=m.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,z)||m.default.getFirstMatch($,z);return D&&(T.version=D),T}},{test:[/swing/i],describe:function(z){var T={name:"Swing"},D=m.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,z)||m.default.getFirstMatch($,z);return D&&(T.version=D),T}},{test:[/coast/i],describe:function(z){var T={name:"Opera Coast"},D=m.default.getFirstMatch($,z)||m.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(z){var T={name:"Opera Touch"},D=m.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,z)||m.default.getFirstMatch($,z);return D&&(T.version=D),T}},{test:[/yabrowser/i],describe:function(z){var T={name:"Yandex Browser"},D=m.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,z)||m.default.getFirstMatch($,z);return D&&(T.version=D),T}},{test:[/ucbrowser/i],describe:function(z){var T={name:"UC Browser"},D=m.default.getFirstMatch($,z)||m.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/Maxthon|mxios/i],describe:function(z){var T={name:"Maxthon"},D=m.default.getFirstMatch($,z)||m.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/epiphany/i],describe:function(z){var T={name:"Epiphany"},D=m.default.getFirstMatch($,z)||m.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/puffin/i],describe:function(z){var T={name:"Puffin"},D=m.default.getFirstMatch($,z)||m.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/sleipnir/i],describe:function(z){var T={name:"Sleipnir"},D=m.default.getFirstMatch($,z)||m.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/k-meleon/i],describe:function(z){var T={name:"K-Meleon"},D=m.default.getFirstMatch($,z)||m.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/micromessenger/i],describe:function(z){var T={name:"WeChat"},D=m.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,z)||m.default.getFirstMatch($,z);return D&&(T.version=D),T}},{test:[/qqbrowser/i],describe:function(z){var T={name:/qqbrowserlite/i.test(z)?"QQ Browser Lite":"QQ Browser"},D=m.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,z)||m.default.getFirstMatch($,z);return D&&(T.version=D),T}},{test:[/msie|trident/i],describe:function(z){var T={name:"Internet Explorer"},D=m.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/\sedg\//i],describe:function(z){var T={name:"Microsoft Edge"},D=m.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/edg([ea]|ios)/i],describe:function(z){var T={name:"Microsoft Edge"},D=m.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/vivaldi/i],describe:function(z){var T={name:"Vivaldi"},D=m.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/seamonkey/i],describe:function(z){var T={name:"SeaMonkey"},D=m.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/sailfish/i],describe:function(z){var T={name:"Sailfish"},D=m.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,z);return D&&(T.version=D),T}},{test:[/silk/i],describe:function(z){var T={name:"Amazon Silk"},D=m.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/phantom/i],describe:function(z){var T={name:"PhantomJS"},D=m.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/slimerjs/i],describe:function(z){var T={name:"SlimerJS"},D=m.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(z){var T={name:"BlackBerry"},D=m.default.getFirstMatch($,z)||m.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/(web|hpw)[o0]s/i],describe:function(z){var T={name:"WebOS Browser"},D=m.default.getFirstMatch($,z)||m.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/bada/i],describe:function(z){var T={name:"Bada"},D=m.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/tizen/i],describe:function(z){var T={name:"Tizen"},D=m.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,z)||m.default.getFirstMatch($,z);return D&&(T.version=D),T}},{test:[/qupzilla/i],describe:function(z){var T={name:"QupZilla"},D=m.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,z)||m.default.getFirstMatch($,z);return D&&(T.version=D),T}},{test:[/firefox|iceweasel|fxios/i],describe:function(z){var T={name:"Firefox"},D=m.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/electron/i],describe:function(z){var T={name:"Electron"},D=m.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/MiuiBrowser/i],describe:function(z){var T={name:"Miui"},D=m.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/chromium/i],describe:function(z){var T={name:"Chromium"},D=m.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,z)||m.default.getFirstMatch($,z);return D&&(T.version=D),T}},{test:[/chrome|crios|crmo/i],describe:function(z){var T={name:"Chrome"},D=m.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/GSA/i],describe:function(z){var T={name:"Google Search"},D=m.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:function(z){var T=!z.test(/like android/i),D=z.test(/android/i);return T&&D},describe:function(z){var T={name:"Android Browser"},D=m.default.getFirstMatch($,z);return D&&(T.version=D),T}},{test:[/playstation 4/i],describe:function(z){var T={name:"PlayStation 4"},D=m.default.getFirstMatch($,z);return D&&(T.version=D),T}},{test:[/safari|applewebkit/i],describe:function(z){var T={name:"Safari"},D=m.default.getFirstMatch($,z);return D&&(T.version=D),T}},{test:[/.*/i],describe:function(z){var T=-1!==z.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:m.default.getFirstMatch(T,z),version:m.default.getSecondMatch(T,z)}}}],J.exports=U.default},93:function(J,U,V){"use strict";U.__esModule=!0,U.default=void 0;var X,m=(X=V(17))&&X.__esModule?X:{default:X},$=V(18);U.default=[{test:[/Roku\/DVP/],describe:function(z){var T=m.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,z);return{name:$.OS_MAP.Roku,version:T}}},{test:[/windows phone/i],describe:function(z){var T=m.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,z);return{name:$.OS_MAP.WindowsPhone,version:T}}},{test:[/windows /i],describe:function(z){var T=m.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,z),D=m.default.getWindowsVersionName(T);return{name:$.OS_MAP.Windows,version:T,versionName:D}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(z){var T={name:$.OS_MAP.iOS},D=m.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,z);return D&&(T.version=D),T}},{test:[/macintosh/i],describe:function(z){var T=m.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,z).replace(/[_\s]/g,"."),D=m.default.getMacOSVersionName(T),F={name:$.OS_MAP.MacOS,version:T};return D&&(F.versionName=D),F}},{test:[/(ipod|iphone|ipad)/i],describe:function(z){var T=m.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,z).replace(/[_\s]/g,".");return{name:$.OS_MAP.iOS,version:T}}},{test:function(z){var T=!z.test(/like android/i),D=z.test(/android/i);return T&&D},describe:function(z){var T=m.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,z),D=m.default.getAndroidVersionName(T),F={name:$.OS_MAP.Android,version:T};return D&&(F.versionName=D),F}},{test:[/(web|hpw)[o0]s/i],describe:function(z){var T=m.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,z),D={name:$.OS_MAP.WebOS};return T&&T.length&&(D.version=T),D}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(z){var T=m.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,z)||m.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,z)||m.default.getFirstMatch(/\bbb(\d+)/i,z);return{name:$.OS_MAP.BlackBerry,version:T}}},{test:[/bada/i],describe:function(z){var T=m.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,z);return{name:$.OS_MAP.Bada,version:T}}},{test:[/tizen/i],describe:function(z){var T=m.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,z);return{name:$.OS_MAP.Tizen,version:T}}},{test:[/linux/i],describe:function(){return{name:$.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:$.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(z){var T=m.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,z);return{name:$.OS_MAP.PlayStation4,version:T}}}],J.exports=U.default},94:function(J,U,V){"use strict";U.__esModule=!0,U.default=void 0;var X,m=(X=V(17))&&X.__esModule?X:{default:X},$=V(18);U.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(z){var T=m.default.getFirstMatch(/(can-l01)/i,z)&&"Nova",D={type:$.PLATFORMS_MAP.mobile,vendor:"Huawei"};return T&&(D.model=T),D}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:$.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:$.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:$.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:$.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:$.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:$.PLATFORMS_MAP.tablet}}},{test:function(z){var T=z.test(/ipod|iphone/i),D=z.test(/like (ipod|iphone)/i);return T&&!D},describe:function(z){var T=m.default.getFirstMatch(/(ipod|iphone)/i,z);return{type:$.PLATFORMS_MAP.mobile,vendor:"Apple",model:T}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:$.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:$.PLATFORMS_MAP.mobile}}},{test:function(z){return"blackberry"===z.getBrowserName(!0)},describe:function(){return{type:$.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(z){return"bada"===z.getBrowserName(!0)},describe:function(){return{type:$.PLATFORMS_MAP.mobile}}},{test:function(z){return"windows phone"===z.getBrowserName()},describe:function(){return{type:$.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(z){var T=Number(String(z.getOSVersion()).split(".")[0]);return"android"===z.getOSName(!0)&&T>=3},describe:function(){return{type:$.PLATFORMS_MAP.tablet}}},{test:function(z){return"android"===z.getOSName(!0)},describe:function(){return{type:$.PLATFORMS_MAP.mobile}}},{test:function(z){return"macos"===z.getOSName(!0)},describe:function(){return{type:$.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(z){return"windows"===z.getOSName(!0)},describe:function(){return{type:$.PLATFORMS_MAP.desktop}}},{test:function(z){return"linux"===z.getOSName(!0)},describe:function(){return{type:$.PLATFORMS_MAP.desktop}}},{test:function(z){return"playstation 4"===z.getOSName(!0)},describe:function(){return{type:$.PLATFORMS_MAP.tv}}},{test:function(z){return"roku"===z.getOSName(!0)},describe:function(){return{type:$.PLATFORMS_MAP.tv}}}],J.exports=U.default},95:function(J,U,V){"use strict";U.__esModule=!0,U.default=void 0;var X,m=(X=V(17))&&X.__esModule?X:{default:X},$=V(18);U.default=[{test:function(z){return"microsoft edge"===z.getBrowserName(!0)},describe:function(z){if(/\sedg\//i.test(z))return{name:$.ENGINE_MAP.Blink};var T=m.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,z);return{name:$.ENGINE_MAP.EdgeHTML,version:T}}},{test:[/trident/i],describe:function(z){var T={name:$.ENGINE_MAP.Trident},D=m.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:function(z){return z.test(/presto/i)},describe:function(z){var T={name:$.ENGINE_MAP.Presto},D=m.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:function(z){var T=z.test(/gecko/i),D=z.test(/like gecko/i);return T&&!D},describe:function(z){var T={name:$.ENGINE_MAP.Gecko},D=m.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:$.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(z){var T={name:$.ENGINE_MAP.WebKit},D=m.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,z);return D&&(T.version=D),T}}],J.exports=U.default}})},7691:(Ae,J,U)=>{"use strict";const V=U(1395),X=U(3724),G=new(U(7231))({maxSize:1e5}),z=D=>!("object"!=typeof D||null===D||D instanceof RegExp||D instanceof Error||D instanceof Date),T=(D,F)=>{if(!z(D))return D;F={deep:!1,pascalCase:!1,...F};const{exclude:Z,pascalCase:Y,stopPaths:ie,deep:me}=F,se=new Set(ie),_e=Me=>(Ne,Ze)=>{if(me&&z(Ze)){const je=void 0===Me?Ne:`${Me}.${Ne}`;se.has(je)||(Ze=V(Ze,_e(je)))}if(!Z||!((D,F)=>D.some(Z=>"string"==typeof Z?Z===F:(Z.lastIndex=0,Z.test(F))))(Z,Ne)){const je=Y?`${Ne}_`:Ne;if(G.has(je))Ne=G.get(je);else{const Ee=X(Ne,{pascalCase:Y});Ne.length<100&&G.set(je,Ee),Ne=Ee}}return[Ne,Ze]};return V(D,_e(void 0))};Ae.exports=(D,F)=>Array.isArray(D)?Object.keys(D).map(Z=>T(D[Z],F)):T(D,F)},3724:Ae=>{"use strict";const U=(V,X)=>{if("string"!=typeof V&&!Array.isArray(V))throw new TypeError("Expected the input to be `string | string[]`");return X=Object.assign({pascalCase:!1},X),V=Array.isArray(V)?V.map(G=>G.trim()).filter(G=>G.length).join("-"):V.trim(),0===V.length?"":1===V.length?X.pascalCase?V.toUpperCase():V.toLowerCase():(V!==V.toLowerCase()&&(V=(V=>{let X=!1,m=!1,$=!1;for(let G=0;G<V.length;G++){const z=V[G];X&&/[a-zA-Z]/.test(z)&&z.toUpperCase()===z?(V=V.slice(0,G)+"-"+V.slice(G),X=!1,$=m,m=!0,G++):m&&$&&/[a-zA-Z]/.test(z)&&z.toLowerCase()===z?(V=V.slice(0,G-1)+"-"+V.slice(G-1),$=m,m=!1,X=!0):(X=z.toLowerCase()===z&&z.toUpperCase()!==z,$=m,m=z.toUpperCase()===z&&z.toLowerCase()!==z)}return V})(V)),V=V.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(G,z)=>z.toUpperCase()).replace(/\d+(\w|$)/g,G=>G.toUpperCase()),G=V,X.pascalCase?G.charAt(0).toUpperCase()+G.slice(1):G);var G};Ae.exports=U,Ae.exports.default=U},209:Ae=>{function J(U,V,X){var m,$,G,z,T;function D(){var Z=Date.now()-z;Z<V&&Z>=0?m=setTimeout(D,V-Z):(m=null,X||(T=U.apply(G,$),G=$=null))}null==V&&(V=100);var F=function(){G=this,$=arguments,z=Date.now();var Z=X&&!m;return m||(m=setTimeout(D,V)),Z&&(T=U.apply(G,$),G=$=null),T};return F.clear=function(){m&&(clearTimeout(m),m=null)},F.flush=function(){m&&(T=U.apply(G,$),G=$=null,clearTimeout(m),m=null)},F}J.debounce=J,Ae.exports=J},9069:Ae=>{"use strict";var V,J="object"==typeof Reflect?Reflect:null,U=J&&"function"==typeof J.apply?J.apply:function(Ee,Je,nt){return Function.prototype.apply.call(Ee,Je,nt)};V=J&&"function"==typeof J.ownKeys?J.ownKeys:Object.getOwnPropertySymbols?function(Ee){return Object.getOwnPropertyNames(Ee).concat(Object.getOwnPropertySymbols(Ee))}:function(Ee){return Object.getOwnPropertyNames(Ee)};var m=Number.isNaN||function(Ee){return Ee!=Ee};function $(){$.init.call(this)}Ae.exports=$,Ae.exports.once=function Me(je,Ee){return new Promise(function(Je,nt){function Ct(A){je.removeListener(Ee,Ue),nt(A)}function Ue(){"function"==typeof je.removeListener&&je.removeListener("error",Ct),Je([].slice.call(arguments))}Ze(je,Ee,Ue,{once:!0}),"error"!==Ee&&function Ne(je,Ee,Je){"function"==typeof je.on&&Ze(je,"error",Ee,Je)}(je,Ct,{once:!0})})},$.EventEmitter=$,$.prototype._events=void 0,$.prototype._eventsCount=0,$.prototype._maxListeners=void 0;var G=10;function z(je){if("function"!=typeof je)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof je)}function T(je){return void 0===je._maxListeners?$.defaultMaxListeners:je._maxListeners}function D(je,Ee,Je,nt){var Ct,Ue,A;if(z(Je),void 0===(Ue=je._events)?(Ue=je._events=Object.create(null),je._eventsCount=0):(void 0!==Ue.newListener&&(je.emit("newListener",Ee,Je.listener?Je.listener:Je),Ue=je._events),A=Ue[Ee]),void 0===A)A=Ue[Ee]=Je,++je._eventsCount;else if("function"==typeof A?A=Ue[Ee]=nt?[Je,A]:[A,Je]:nt?A.unshift(Je):A.push(Je),(Ct=T(je))>0&&A.length>Ct&&!A.warned){A.warned=!0;var L=new Error("Possible EventEmitter memory leak detected. "+A.length+" "+String(Ee)+" listeners added. Use emitter.setMaxListeners() to increase limit");L.name="MaxListenersExceededWarning",L.emitter=je,L.type=Ee,L.count=A.length,function X(je){console&&console.warn&&console.warn(je)}(L)}return je}function F(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Z(je,Ee,Je){var nt={fired:!1,wrapFn:void 0,target:je,type:Ee,listener:Je},Ct=F.bind(nt);return Ct.listener=Je,nt.wrapFn=Ct,Ct}function Y(je,Ee,Je){var nt=je._events;if(void 0===nt)return[];var Ct=nt[Ee];return void 0===Ct?[]:"function"==typeof Ct?Je?[Ct.listener||Ct]:[Ct]:Je?function _e(je){for(var Ee=new Array(je.length),Je=0;Je<Ee.length;++Je)Ee[Je]=je[Je].listener||je[Je];return Ee}(Ct):me(Ct,Ct.length)}function ie(je){var Ee=this._events;if(void 0!==Ee){var Je=Ee[je];if("function"==typeof Je)return 1;if(void 0!==Je)return Je.length}return 0}function me(je,Ee){for(var Je=new Array(Ee),nt=0;nt<Ee;++nt)Je[nt]=je[nt];return Je}function Ze(je,Ee,Je,nt){if("function"==typeof je.on)nt.once?je.once(Ee,Je):je.on(Ee,Je);else{if("function"!=typeof je.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof je);je.addEventListener(Ee,function Ct(Ue){nt.once&&je.removeEventListener(Ee,Ct),Je(Ue)})}}Object.defineProperty($,"defaultMaxListeners",{enumerable:!0,get:function(){return G},set:function(je){if("number"!=typeof je||je<0||m(je))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+je+".");G=je}}),$.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},$.prototype.setMaxListeners=function(Ee){if("number"!=typeof Ee||Ee<0||m(Ee))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Ee+".");return this._maxListeners=Ee,this},$.prototype.getMaxListeners=function(){return T(this)},$.prototype.emit=function(Ee){for(var Je=[],nt=1;nt<arguments.length;nt++)Je.push(arguments[nt]);var Ct="error"===Ee,Ue=this._events;if(void 0!==Ue)Ct=Ct&&void 0===Ue.error;else if(!Ct)return!1;if(Ct){var A;if(Je.length>0&&(A=Je[0]),A instanceof Error)throw A;var L=new Error("Unhandled error."+(A?" ("+A.message+")":""));throw L.context=A,L}var B=Ue[Ee];if(void 0===B)return!1;if("function"==typeof B)U(B,this,Je);else{var j=B.length,ee=me(B,j);for(nt=0;nt<j;++nt)U(ee[nt],this,Je)}return!0},$.prototype.on=$.prototype.addListener=function(Ee,Je){return D(this,Ee,Je,!1)},$.prototype.prependListener=function(Ee,Je){return D(this,Ee,Je,!0)},$.prototype.once=function(Ee,Je){return z(Je),this.on(Ee,Z(this,Ee,Je)),this},$.prototype.prependOnceListener=function(Ee,Je){return z(Je),this.prependListener(Ee,Z(this,Ee,Je)),this},$.prototype.off=$.prototype.removeListener=function(Ee,Je){var nt,Ct,Ue,A,L;if(z(Je),void 0===(Ct=this._events))return this;if(void 0===(nt=Ct[Ee]))return this;if(nt===Je||nt.listener===Je)0==--this._eventsCount?this._events=Object.create(null):(delete Ct[Ee],Ct.removeListener&&this.emit("removeListener",Ee,nt.listener||Je));else if("function"!=typeof nt){for(Ue=-1,A=nt.length-1;A>=0;A--)if(nt[A]===Je||nt[A].listener===Je){L=nt[A].listener,Ue=A;break}if(Ue<0)return this;0===Ue?nt.shift():function se(je,Ee){for(;Ee+1<je.length;Ee++)je[Ee]=je[Ee+1];je.pop()}(nt,Ue),1===nt.length&&(Ct[Ee]=nt[0]),void 0!==Ct.removeListener&&this.emit("removeListener",Ee,L||Je)}return this},$.prototype.removeAllListeners=function(Ee){var Je,nt,Ct;if(void 0===(nt=this._events))return this;if(void 0===nt.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==nt[Ee]&&(0==--this._eventsCount?this._events=Object.create(null):delete nt[Ee]),this;if(0===arguments.length){var A,Ue=Object.keys(nt);for(Ct=0;Ct<Ue.length;++Ct)"removeListener"!==(A=Ue[Ct])&&this.removeAllListeners(A);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Je=nt[Ee]))this.removeListener(Ee,Je);else if(void 0!==Je)for(Ct=Je.length-1;Ct>=0;Ct--)this.removeListener(Ee,Je[Ct]);return this},$.prototype.listeners=function(Ee){return Y(this,Ee,!0)},$.prototype.rawListeners=function(Ee){return Y(this,Ee,!1)},$.listenerCount=function(je,Ee){return"function"==typeof je.listenerCount?je.listenerCount(Ee):ie.call(je,Ee)},$.prototype.listenerCount=ie,$.prototype.eventNames=function(){return this._eventsCount>0?V(this._events):[]}},4067:(Ae,J)=>{J.printMsg=function(){console.log("This is a message from the demo package")}},5780:Ae=>{var U;Ae.exports=U={},U.simpleFilter=function(V,X){return X.filter(function(m){return U.test(V,m)})},U.test=function(V,X){return null!==U.match(V,X)},U.match=function(V,X,m){var ie,$=0,G=[],z=X.length,T=0,D=0,F=(m=m||{}).pre||"",Z=m.post||"",Y=m.caseSensitive&&X||X.toLowerCase();V=m.caseSensitive&&V||V.toLowerCase();for(var me=0;me<z;me++)ie=X[me],Y[me]===V[$]?(ie=F+ie+Z,$+=1,D+=1+D):D=0,T+=D,G[G.length]=ie;return $===V.length?(T=Y===V?1/0:T,{rendered:G.join(""),score:T}):null},U.filter=function(V,X,m){return X&&0!==X.length?"string"!=typeof V?X:(m=m||{},X.reduce(function($,G,z,T){var D=G;m.extract&&(D=m.extract(G));var F=U.match(V,D,m);return null!=F&&($[$.length]={string:F.rendered,score:F.score,index:z,original:G}),$},[]).sort(function($,G){return G.score-$.score||$.index-G.index})):[]}},3334:Ae=>{var J=Ae.exports=function(U,V){if(V||(V=16),void 0===U&&(U=128),U<=0)return"0";for(var X=Math.log(Math.pow(2,U))/Math.log(V),m=2;X===1/0;m*=2)X=Math.log(Math.pow(2,U/m))/Math.log(V)*m;var $=X-Math.floor(X),G="";for(m=0;m<Math.floor(X);m++)G=Math.floor(Math.random()*V).toString(V)+G;if($){var T=Math.pow(V,$);G=Math.floor(Math.random()*T).toString(V)+G}var D=parseInt(G,V);return D!==1/0&&D>=Math.pow(2,U)?J(U,V):G};J.rack=function(U,V,X){var m=function(G){var z=0;do{if(z++>10){if(!X)throw new Error("too many ID collisions, use more bits");U+=X}var T=J(U,V)}while(Object.hasOwnProperty.call($,T));return $[T]=G,T},$=m.hats={};return m.get=function(G){return m.hats[G]},m.set=function(G,z){return m.hats[G]=z,m},m.bits=U||128,m.base=V||16,m}},7923:(Ae,J,U)=>{Ae=U.nmd(Ae);var V=function(){var X=function(Me,Ne,Ze,je){for(Ze=Ze||{},je=Me.length;je--;Ze[Me[je]]=Ne);return Ze},m=[1,12],$=[1,13],G=[1,9],z=[1,10],T=[1,11],D=[1,14],F=[1,15],Z=[14,18,22,24],Y=[18,22],ie=[22,24],me={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(Ne,Ze,je,Ee,Je,nt,Ct){var Ue=nt.length-1;switch(Je){case 1:this.$=Ne.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(Ne);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=nt[Ue-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=nt[Ue-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[nt[Ue-2],nt[Ue]];break;case 16:this.$={},this.$[nt[Ue][0]]=nt[Ue][1];break;case 17:this.$=nt[Ue-2],void 0!==nt[Ue-2][nt[Ue][0]]&&(this.$.__duplicateProperties__||Object.defineProperty(this.$,"__duplicateProperties__",{value:[],enumerable:!1}),this.$.__duplicateProperties__.push(nt[Ue][0])),nt[Ue-2][nt[Ue][0]]=nt[Ue][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[nt[Ue]];break;case 21:this.$=nt[Ue-2],nt[Ue-2].push(nt[Ue])}},table:[{3:5,4:m,5:6,6:$,7:3,8:G,9:4,10:z,11:T,12:1,13:2,15:7,16:8,17:D,23:F},{1:[3]},{14:[1,16]},X(Z,[2,7]),X(Z,[2,8]),X(Z,[2,9]),X(Z,[2,10]),X(Z,[2,11]),X(Z,[2,12]),X(Z,[2,3]),X(Z,[2,4]),X(Z,[2,5]),X([14,18,21,22,24],[2,1]),X(Z,[2,2]),{3:20,4:m,18:[1,17],19:18,20:19},{3:5,4:m,5:6,6:$,7:3,8:G,9:4,10:z,11:T,13:23,15:7,16:8,17:D,23:F,24:[1,21],25:22},{1:[2,6]},X(Z,[2,13]),{18:[1,24],22:[1,25]},X(Y,[2,16]),{21:[1,26]},X(Z,[2,18]),{22:[1,28],24:[1,27]},X(ie,[2,20]),X(Z,[2,14]),{3:20,4:m,20:29},{3:5,4:m,5:6,6:$,7:3,8:G,9:4,10:z,11:T,13:30,15:7,16:8,17:D,23:F},X(Z,[2,19]),{3:5,4:m,5:6,6:$,7:3,8:G,9:4,10:z,11:T,13:31,15:7,16:8,17:D,23:F},X(Y,[2,17]),X(Y,[2,15]),X(ie,[2,21])],defaultActions:{16:[2,6]},parseError:function(Ne,Ze){if(!Ze.recoverable){let Ee=function(Je,nt){this.message=Je,this.hash=nt};throw Ee.prototype=Error,new Ee(Ne,Ze)}this.trace(Ne)},parse:function(Ne){var Ze=this,je=[0],Je=[null],nt=[],Ct=this.table,Ue="",A=0,L=0,B=0,j=2,ee=1,W=nt.slice.call(arguments,1),ce=Object.create(this.lexer),We={yy:{}};for(var ut in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ut)&&(We.yy[ut]=this.yy[ut]);ce.setInput(Ne,We.yy),We.yy.lexer=ce,We.yy.parser=this,typeof ce.yylloc>"u"&&(ce.yylloc={});var be=ce.yylloc;nt.push(be);var wt=ce.options&&ce.options.ranges;this.parseError="function"==typeof We.yy.parseError?We.yy.parseError:Object.getPrototypeOf(this).parseError;for(var xt,vn,zt,Sn,Cn,Zn,Wt,Gn,Ke=function(){var hi;return"number"!=typeof(hi=ce.lex()||ee)&&(hi=Ze.symbols_[hi]||hi),hi},En={};;){if(this.defaultActions[zt=je[je.length-1]]?Sn=this.defaultActions[zt]:((null===xt||typeof xt>"u")&&(xt=Ke()),Sn=Ct[zt]&&Ct[zt][xt]),typeof Sn>"u"||!Sn.length||!Sn[0]){var ir="";for(Zn in Gn=[],Ct[zt])this.terminals_[Zn]&&Zn>j&&Gn.push("'"+this.terminals_[Zn]+"'");ir=ce.showPosition?"Parse error on line "+(A+1)+":\n"+ce.showPosition()+"\nExpecting "+Gn.join(", ")+", got '"+(this.terminals_[xt]||xt)+"'":"Parse error on line "+(A+1)+": Unexpected "+(xt==ee?"end of input":"'"+(this.terminals_[xt]||xt)+"'"),this.parseError(ir,{text:ce.match,token:this.terminals_[xt]||xt,line:ce.yylineno,loc:be,expected:Gn})}if(Sn[0]instanceof Array&&Sn.length>1)throw new Error("Parse Error: multiple actions possible at state: "+zt+", token: "+xt);switch(Sn[0]){case 1:je.push(xt),Je.push(ce.yytext),nt.push(ce.yylloc),je.push(Sn[1]),xt=null,vn?(xt=vn,vn=null):(L=ce.yyleng,Ue=ce.yytext,A=ce.yylineno,be=ce.yylloc,B>0&&B--);break;case 2:if(En.$=Je[Je.length-(Wt=this.productions_[Sn[1]][1])],En._$={first_line:nt[nt.length-(Wt||1)].first_line,last_line:nt[nt.length-1].last_line,first_column:nt[nt.length-(Wt||1)].first_column,last_column:nt[nt.length-1].last_column},wt&&(En._$.range=[nt[nt.length-(Wt||1)].range[0],nt[nt.length-1].range[1]]),typeof(Cn=this.performAction.apply(En,[Ue,L,A,We.yy,Sn[1],Je,nt].concat(W)))<"u")return Cn;Wt&&(je=je.slice(0,-1*Wt*2),Je=Je.slice(0,-1*Wt),nt=nt.slice(0,-1*Wt)),je.push(this.productions_[Sn[1]][0]),Je.push(En.$),nt.push(En._$),je.push(Ct[je[je.length-2]][je[je.length-1]]);break;case 3:return!0}}return!0}};function _e(){this.yy={}}return me.lexer={EOF:1,parseError:function(Ze,je){if(!this.yy.parser)throw new Error(Ze);this.yy.parser.parseError(Ze,je)},setInput:function(Ne,Ze){return this.yy=Ze||this.yy||{},this._input=Ne,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Ne=this._input[0];return this.yytext+=Ne,this.yyleng++,this.offset++,this.match+=Ne,this.matched+=Ne,Ne.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Ne},unput:function(Ne){var Ze=Ne.length,je=Ne.split(/(?:\r\n?|\n)/g);this._input=Ne+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Ze),this.offset-=Ze;var Ee=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),je.length-1&&(this.yylineno-=je.length-1);var Je=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:je?(je.length===Ee.length?this.yylloc.first_column:0)+Ee[Ee.length-je.length].length-je[0].length:this.yylloc.first_column-Ze},this.options.ranges&&(this.yylloc.range=[Je[0],Je[0]+this.yyleng-Ze]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(Ne){this.unput(this.match.slice(Ne))},pastInput:function(){var Ne=this.matched.substr(0,this.matched.length-this.match.length);return(Ne.length>20?"...":"")+Ne.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Ne=this.match;return Ne.length<20&&(Ne+=this._input.substr(0,20-Ne.length)),(Ne.substr(0,20)+(Ne.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Ne=this.pastInput(),Ze=new Array(Ne.length+1).join("-");return Ne+this.upcomingInput()+"\n"+Ze+"^"},test_match:function(Ne,Ze){var je,Ee,Je;if(this.options.backtrack_lexer&&(Je={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Je.yylloc.range=this.yylloc.range.slice(0))),(Ee=Ne[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Ee.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ee?Ee[Ee.length-1].length-Ee[Ee.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Ne[0].length},this.yytext+=Ne[0],this.match+=Ne[0],this.matches=Ne,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Ne[0].length),this.matched+=Ne[0],je=this.performAction.call(this,this.yy,this,Ze,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),je)return je;if(this._backtrack){for(var nt in Je)this[nt]=Je[nt];return!1}return!1},next:function(){if(this.done)return this.EOF;var Ne,Ze,je,Ee;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Je=this._currentRules(),nt=0;nt<Je.length;nt++)if((je=this._input.match(this.rules[Je[nt]]))&&(!Ze||je[0].length>Ze[0].length)){if(Ze=je,Ee=nt,this.options.backtrack_lexer){if(!1!==(Ne=this.test_match(je,Je[nt])))return Ne;if(this._backtrack){Ze=!1;continue}return!1}if(!this.options.flex)break}return Ze?!1!==(Ne=this.test_match(Ze,Je[Ee]))&&Ne:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(Ze){this.conditionStack.push(Ze)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Ze){return(Ze=this.conditionStack.length-1-Math.abs(Ze||0))>=0?this.conditionStack[Ze]:"INITIAL"},pushState:function(Ze){this.begin(Ze)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Ze,je,Ee,Je){switch(Ee){case 0:break;case 1:return 6;case 2:return je.yytext=je.yytext.substr(1,je.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}},_e.prototype=me,me.Parser=_e,new _e}();J.parser=V,J.Parser=V.Parser,J.parse=function(){return V.parse.apply(V,arguments)},J.main=function(m){m[1]||(console.log("Usage: "+m[0]+" FILE"),process.exit(1));var $=U(4067).readFileSync(U(7150).normalize(m[1]),"utf8");return J.parser.parse($)},U.c[U.s]===Ae&&J.main(process.argv.slice(1))},3082:Ae=>{var X=/^\s+|\s+$/g,m=/^[-+]0x[0-9a-f]+$/i,$=/^0b[01]+$/i,G=/^0o[0-7]+$/i,z=parseInt,T="object"==typeof global&&global&&global.Object===Object&&global,D="object"==typeof self&&self&&self.Object===Object&&self,F=T||D||Function("return this")(),Y=Object.prototype.toString,ie=Math.max,me=Math.min,se=function(){return F.Date.now()};function Me(Ee){var Je=typeof Ee;return!!Ee&&("object"==Je||"function"==Je)}function je(Ee){if("number"==typeof Ee)return Ee;if(function Ze(Ee){return"symbol"==typeof Ee||function Ne(Ee){return!!Ee&&"object"==typeof Ee}(Ee)&&"[object Symbol]"==Y.call(Ee)}(Ee))return NaN;if(Me(Ee)){var Je="function"==typeof Ee.valueOf?Ee.valueOf():Ee;Ee=Me(Je)?Je+"":Je}if("string"!=typeof Ee)return 0===Ee?Ee:+Ee;Ee=Ee.replace(X,"");var nt=$.test(Ee);return nt||G.test(Ee)?z(Ee.slice(2),nt?2:8):m.test(Ee)?NaN:+Ee}Ae.exports=function _e(Ee,Je,nt){var Ct,Ue,A,L,B,j,ee=0,W=!1,ce=!1,We=!0;if("function"!=typeof Ee)throw new TypeError("Expected a function");function ut(It){var Cn=Ct,En=Ue;return Ct=Ue=void 0,ee=It,L=Ee.apply(En,Cn)}function be(It){return ee=It,B=setTimeout(Ke,Je),W?ut(It):L}function bt(It){var Cn=It-j;return void 0===j||Cn>=Je||Cn<0||ce&&It-ee>=A}function Ke(){var It=se();if(bt(It))return xt(It);B=setTimeout(Ke,function wt(It){var Zn=Je-(It-j);return ce?me(Zn,A-(It-ee)):Zn}(It))}function xt(It){return B=void 0,We&&Ct?ut(It):(Ct=Ue=void 0,L)}function Sn(){var It=se(),Cn=bt(It);if(Ct=arguments,Ue=this,j=It,Cn){if(void 0===B)return be(j);if(ce)return B=setTimeout(Ke,Je),ut(j)}return void 0===B&&(B=setTimeout(Ke,Je)),L}return Je=je(Je)||0,Me(nt)&&(W=!!nt.leading,A=(ce="maxWait"in nt)?ie(je(nt.maxWait)||0,Je):A,We="trailing"in nt?!!nt.trailing:We),Sn.cancel=function vn(){void 0!==B&&clearTimeout(B),ee=0,Ct=j=Ue=B=void 0},Sn.flush=function zt(){return void 0===B?L:xt(se())},Sn}},8222:(Ae,J,U)=>{Ae=U.nmd(Ae);var X="__lodash_hash_undefined__",G=9007199254740991,z="[object Arguments]",T="[object Array]",F="[object Boolean]",Z="[object Date]",Y="[object Error]",ie="[object Function]",se="[object Map]",_e="[object Number]",Ne="[object Object]",Ze="[object Promise]",Ee="[object RegExp]",Je="[object Set]",nt="[object String]",A="[object WeakMap]",L="[object ArrayBuffer]",B="[object DataView]",xt=/^\[object .+?Constructor\]$/,vn=/^(?:0|[1-9]\d*)$/,zt={};zt["[object Float32Array]"]=zt["[object Float64Array]"]=zt["[object Int8Array]"]=zt["[object Int16Array]"]=zt["[object Int32Array]"]=zt["[object Uint8Array]"]=zt["[object Uint8ClampedArray]"]=zt["[object Uint16Array]"]=zt["[object Uint32Array]"]=!0,zt[z]=zt[T]=zt[L]=zt[F]=zt[B]=zt[Z]=zt[Y]=zt[ie]=zt[se]=zt[_e]=zt[Ne]=zt[Ee]=zt[Je]=zt[nt]=zt[A]=!1;var Sn="object"==typeof global&&global&&global.Object===Object&&global,It="object"==typeof self&&self&&self.Object===Object&&self,Cn=Sn||It||Function("return this")(),En=J&&!J.nodeType&&J,Zn=En&&Ae&&!Ae.nodeType&&Ae,Wt=Zn&&Zn.exports===En,Ce=Wt&&Sn.process,Gn=function(){try{return Ce&&Ce.binding&&Ce.binding("util")}catch{}}(),ir=Gn&&Gn.isTypedArray;function qt(Oe,at){for(var Nt=-1,xn=null==Oe?0:Oe.length;++Nt<xn;)if(at(Oe[Nt],Nt,Oe))return!0;return!1}function wa(Oe,at){return Oe.has(at)}function qr(Oe){var at=-1,Nt=Array(Oe.size);return Oe.forEach(function(xn,pi){Nt[++at]=[pi,xn]}),Nt}function Qa(Oe){var at=-1,Nt=Array(Oe.size);return Oe.forEach(function(xn){Nt[++at]=xn}),Nt}var Oe,Mo=Array.prototype,fs=Object.prototype,io=Cn["__core-js_shared__"],xa=Function.prototype.toString,oo=fs.hasOwnProperty,wo=(Oe=/[^.]+$/.exec(io&&io.keys&&io.keys.IE_PROTO||""))?"Symbol(src)_1."+Oe:"",Ml=fs.toString,Es=RegExp("^"+xa.call(oo).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xo=Wt?Cn.Buffer:void 0,ur=Cn.Symbol,Ol=Cn.Uint8Array,pl=fs.propertyIsEnumerable,Bs=Mo.splice,Oo=ur?ur.toStringTag:void 0,hs=Object.getOwnPropertySymbols,Kr=xo?xo.isBuffer:void 0,Xs=function Ys(Oe,at){return function(Nt){return Oe(at(Nt))}}(Object.keys,Object),zr=Qe(Cn,"DataView"),oe=Qe(Cn,"Map"),le=Qe(Cn,"Promise"),fe=Qe(Cn,"Set"),ve=Qe(Cn,"WeakMap"),Te=Qe(Object,"create"),$e=kn(zr),Xe=kn(oe),He=kn(le),xe=kn(fe),Fe=kn(ve),Rt=ur?ur.prototype:void 0,Ft=Rt?Rt.valueOf:void 0;function ct(Oe){var at=-1,Nt=null==Oe?0:Oe.length;for(this.clear();++at<Nt;){var xn=Oe[at];this.set(xn[0],xn[1])}}function Ut(Oe){var at=-1,Nt=null==Oe?0:Oe.length;for(this.clear();++at<Nt;){var xn=Oe[at];this.set(xn[0],xn[1])}}function In(Oe){var at=-1,Nt=null==Oe?0:Oe.length;for(this.clear();++at<Nt;){var xn=Oe[at];this.set(xn[0],xn[1])}}function Gr(Oe){var at=-1,Nt=null==Oe?0:Oe.length;for(this.__data__=new In;++at<Nt;)this.add(Oe[at])}function Jn(Oe){var at=this.__data__=new Ut(Oe);this.size=at.size}function Mi(Oe,at){for(var Nt=Oe.length;Nt--;)if(ji(Oe[Nt][0],at))return Nt;return-1}function So(Oe){return null==Oe?void 0===Oe?"[object Undefined]":"[object Null]":Oo&&Oo in Object(Oe)?function ft(Oe){var at=oo.call(Oe,Oo),Nt=Oe[Oo];try{Oe[Oo]=void 0;var xn=!0}catch{}var pi=Ml.call(Oe);return xn&&(at?Oe[Oo]=Nt:delete Oe[Oo]),pi}(Oe):function Fn(Oe){return Ml.call(Oe)}(Oe)}function cn(Oe){return vr(Oe)&&So(Oe)==z}function Co(Oe,at,Nt,xn,pi){return Oe===at||(null==Oe||null==at||!vr(Oe)&&!vr(at)?Oe!=Oe&&at!=at:function Vo(Oe,at,Nt,xn,pi,or){var dn=yn(Oe),qi=yn(at),Io=dn?T:Lt(Oe),Mr=qi?T:Lt(at),ta=(Io=Io==z?Ne:Io)==Ne,ha=(Mr=Mr==z?Ne:Mr)==Ne,Ci=Io==Mr;if(Ci&&Dn(Oe)){if(!Dn(at))return!1;dn=!0,ta=!1}if(Ci&&!ta)return or||(or=new Jn),dn||Ti(Oe)?R(Oe,at,Nt,xn,pi,or):function K(Oe,at,Nt,xn,pi,or,dn){switch(Nt){case B:if(Oe.byteLength!=at.byteLength||Oe.byteOffset!=at.byteOffset)return!1;Oe=Oe.buffer,at=at.buffer;case L:return!(Oe.byteLength!=at.byteLength||!or(new Ol(Oe),new Ol(at)));case F:case Z:case _e:return ji(+Oe,+at);case Y:return Oe.name==at.name&&Oe.message==at.message;case Ee:case nt:return Oe==at+"";case se:var qi=qr;case Je:if(qi||(qi=Qa),Oe.size!=at.size&&!(1&xn))return!1;var Mr=dn.get(Oe);if(Mr)return Mr==at;xn|=2,dn.set(Oe,at);var ta=R(qi(Oe),qi(at),xn,pi,or,dn);return dn.delete(Oe),ta;case"[object Symbol]":if(Ft)return Ft.call(Oe)==Ft.call(at)}return!1}(Oe,at,Io,Nt,xn,pi,or);if(!(1&Nt)){var Oi=ta&&oo.call(Oe,"__wrapped__"),Xr=ha&&oo.call(at,"__wrapped__");if(Oi||Xr){var ts=Oi?Oe.value():Oe,Ii=Xr?at.value():at;return or||(or=new Jn),pi(ts,Ii,Nt,xn,or)}}return!!Ci&&(or||(or=new Jn),function de(Oe,at,Nt,xn,pi,or){var dn=1&Nt,qi=Ge(Oe),Io=qi.length;if(Io!=Ge(at).length&&!dn)return!1;for(var ha=Io;ha--;){var Ci=qi[ha];if(!(dn?Ci in at:oo.call(at,Ci)))return!1}var Oi=or.get(Oe);if(Oi&&or.get(at))return Oi==at;var Xr=!0;or.set(Oe,at),or.set(at,Oe);for(var ts=dn;++ha<Io;){var Ii=Oe[Ci=qi[ha]],_r=at[Ci];if(xn)var ns=dn?xn(_r,Ii,Ci,at,Oe,or):xn(Ii,_r,Ci,Oe,at,or);if(!(void 0===ns?Ii===_r||pi(Ii,_r,Nt,xn,or):ns)){Xr=!1;break}ts||(ts="constructor"==Ci)}if(Xr&&!ts){var Ss=Oe.constructor,Go=at.constructor;Ss!=Go&&"constructor"in Oe&&"constructor"in at&&!("function"==typeof Ss&&Ss instanceof Ss&&"function"==typeof Go&&Go instanceof Go)&&(Xr=!1)}return or.delete(Oe),or.delete(at),Xr}(Oe,at,Nt,xn,pi,or))}(Oe,at,Nt,xn,Co,pi))}function R(Oe,at,Nt,xn,pi,or){var dn=1&Nt,qi=Oe.length,Io=at.length;if(qi!=Io&&!(dn&&Io>qi))return!1;var Mr=or.get(Oe);if(Mr&&or.get(at))return Mr==at;var ta=-1,ha=!0,Ci=2&Nt?new Gr:void 0;for(or.set(Oe,at),or.set(at,Oe);++ta<qi;){var Oi=Oe[ta],Xr=at[ta];if(xn)var ts=dn?xn(Xr,Oi,ta,at,Oe,or):xn(Oi,Xr,ta,Oe,at,or);if(void 0!==ts){if(ts)continue;ha=!1;break}if(Ci){if(!qt(at,function(Ii,_r){if(!wa(Ci,_r)&&(Oi===Ii||pi(Oi,Ii,Nt,xn,or)))return Ci.push(_r)})){ha=!1;break}}else if(Oi!==Xr&&!pi(Oi,Xr,Nt,xn,or)){ha=!1;break}}return or.delete(Oe),or.delete(at),ha}function Ge(Oe){return function ps(Oe,at,Nt){var xn=at(Oe);return yn(Oe)?xn:function Gi(Oe,at){for(var Nt=-1,xn=at.length,pi=Oe.length;++Nt<xn;)Oe[pi+Nt]=at[Nt];return Oe}(xn,Nt(Oe))}(Oe,Ui,jt)}function tt(Oe,at){var Nt=Oe.__data__;return function mt(Oe){var at=typeof Oe;return"string"==at||"number"==at||"symbol"==at||"boolean"==at?"__proto__"!==Oe:null===Oe}(at)?Nt["string"==typeof at?"string":"hash"]:Nt.map}function Qe(Oe,at){var Nt=function li(Oe,at){return Oe?.[at]}(Oe,at);return function Nn(Oe){return!(!Qn(Oe)||function tn(Oe){return!!wo&&wo in Oe}(Oe))&&(An(Oe)?Es:xt).test(kn(Oe))}(Nt)?Nt:void 0}ct.prototype.clear=function Et(){this.__data__=Te?Te(null):{},this.size=0},ct.prototype.delete=function Zt(Oe){var at=this.has(Oe)&&delete this.__data__[Oe];return this.size-=at?1:0,at},ct.prototype.get=function Jt(Oe){var at=this.__data__;if(Te){var Nt=at[Oe];return Nt===X?void 0:Nt}return oo.call(at,Oe)?at[Oe]:void 0},ct.prototype.has=function hn(Oe){var at=this.__data__;return Te?void 0!==at[Oe]:oo.call(at,Oe)},ct.prototype.set=function St(Oe,at){var Nt=this.__data__;return this.size+=this.has(Oe)?0:1,Nt[Oe]=Te&&void 0===at?X:at,this},Ut.prototype.clear=function Dt(){this.__data__=[],this.size=0},Ut.prototype.delete=function Hn(Oe){var at=this.__data__,Nt=Mi(at,Oe);return!(Nt<0||(Nt==at.length-1?at.pop():Bs.call(at,Nt,1),--this.size,0))},Ut.prototype.get=function Vn(Oe){var at=this.__data__,Nt=Mi(at,Oe);return Nt<0?void 0:at[Nt][1]},Ut.prototype.has=function sn(Oe){return Mi(this.__data__,Oe)>-1},Ut.prototype.set=function ri(Oe,at){var Nt=this.__data__,xn=Mi(Nt,Oe);return xn<0?(++this.size,Nt.push([Oe,at])):Nt[xn][1]=at,this},In.prototype.clear=function ui(){this.size=0,this.__data__={hash:new ct,map:new(oe||Ut),string:new ct}},In.prototype.delete=function yi(Oe){var at=tt(this,Oe).delete(Oe);return this.size-=at?1:0,at},In.prototype.get=function Pr(Oe){return tt(this,Oe).get(Oe)},In.prototype.has=function Yr(Oe){return tt(this,Oe).has(Oe)},In.prototype.set=function Si(Oe,at){var Nt=tt(this,Oe),xn=Nt.size;return Nt.set(Oe,at),this.size+=Nt.size==xn?0:1,this},Gr.prototype.add=Gr.prototype.push=function On(Oe){return this.__data__.set(Oe,X),this},Gr.prototype.has=function Bi(Oe){return this.__data__.has(Oe)},Jn.prototype.clear=function Eo(){this.__data__=new Ut,this.size=0},Jn.prototype.delete=function Ea(Oe){var at=this.__data__,Nt=at.delete(Oe);return this.size=at.size,Nt},Jn.prototype.get=function Hi(Oe){return this.__data__.get(Oe)},Jn.prototype.has=function nr(Oe){return this.__data__.has(Oe)},Jn.prototype.set=function es(Oe,at){var Nt=this.__data__;if(Nt instanceof Ut){var xn=Nt.__data__;if(!oe||xn.length<199)return xn.push([Oe,at]),this.size=++Nt.size,this;Nt=this.__data__=new In(xn)}return Nt.set(Oe,at),this.size=Nt.size,this};var jt=hs?function(Oe){return null==Oe?[]:(Oe=Object(Oe),function hi(Oe,at){for(var Nt=-1,xn=null==Oe?0:Oe.length,pi=0,or=[];++Nt<xn;){var dn=Oe[Nt];at(dn,Nt,Oe)&&(or[pi++]=dn)}return or}(hs(Oe),function(at){return pl.call(Oe,at)}))}:function fa(){return[]},Lt=So;function Yt(Oe,at){return!!(at=at??G)&&("number"==typeof Oe||vn.test(Oe))&&Oe>-1&&Oe%1==0&&Oe<at}function kn(Oe){if(null!=Oe){try{return xa.call(Oe)}catch{}try{return Oe+""}catch{}}return""}function ji(Oe,at){return Oe===at||Oe!=Oe&&at!=at}(zr&&Lt(new zr(new ArrayBuffer(1)))!=B||oe&&Lt(new oe)!=se||le&&Lt(le.resolve())!=Ze||fe&&Lt(new fe)!=Je||ve&&Lt(new ve)!=A)&&(Lt=function(Oe){var at=So(Oe),Nt=at==Ne?Oe.constructor:void 0,xn=Nt?kn(Nt):"";if(xn)switch(xn){case $e:return B;case Xe:return se;case He:return Ze;case xe:return Je;case Fe:return A}return at});var At=cn(function(){return arguments}())?cn:function(Oe){return vr(Oe)&&oo.call(Oe,"callee")&&!pl.call(Oe,"callee")},yn=Array.isArray,Dn=Kr||function $i(){return!1};function An(Oe){if(!Qn(Oe))return!1;var at=So(Oe);return at==ie||"[object GeneratorFunction]"==at||"[object AsyncFunction]"==at||"[object Proxy]"==at}function da(Oe){return"number"==typeof Oe&&Oe>-1&&Oe%1==0&&Oe<=G}function Qn(Oe){var at=typeof Oe;return null!=Oe&&("object"==at||"function"==at)}function vr(Oe){return null!=Oe&&"object"==typeof Oe}var Ti=ir?function za(Oe){return function(at){return Oe(at)}}(ir):function ja(Oe){return vr(Oe)&&da(Oe.length)&&!!zt[So(Oe)]};function Ui(Oe){return function dr(Oe){return null!=Oe&&da(Oe.length)&&!An(Oe)}(Oe)?function Hr(Oe,at){var Nt=yn(Oe),xn=!Nt&&At(Oe),pi=!Nt&&!xn&&Dn(Oe),or=!Nt&&!xn&&!pi&&Ti(Oe),dn=Nt||xn||pi||or,qi=dn?function Ot(Oe,at){for(var Nt=-1,xn=Array(Oe);++Nt<Oe;)xn[Nt]=at(Nt);return xn}(Oe.length,String):[],Io=qi.length;for(var Mr in Oe)(at||oo.call(Oe,Mr))&&(!dn||!("length"==Mr||pi&&("offset"==Mr||"parent"==Mr)||or&&("buffer"==Mr||"byteLength"==Mr||"byteOffset"==Mr)||Yt(Mr,Io)))&&qi.push(Mr);return qi}(Oe):function cr(Oe){if(!function gn(Oe){var at=Oe&&Oe.constructor;return Oe===("function"==typeof at&&at.prototype||fs)}(Oe))return Xs(Oe);var at=[];for(var Nt in Object(Oe))oo.call(Oe,Nt)&&"constructor"!=Nt&&at.push(Nt);return at}(Oe)}Ae.exports=function kr(Oe,at){return Co(Oe,at)}},1395:Ae=>{"use strict";const J=m=>"object"==typeof m&&null!==m,U=Symbol("skip"),V=m=>J(m)&&!(m instanceof RegExp)&&!(m instanceof Error)&&!(m instanceof Date),X=(m,$,G,z=new WeakMap)=>{if(G={deep:!1,target:{},...G},z.has(m))return z.get(m);z.set(m,G.target);const{target:T}=G;delete G.target;const D=F=>F.map(Z=>V(Z)?X(Z,$,G,z):Z);if(Array.isArray(m))return D(m);for(const[F,Z]of Object.entries(m)){const Y=$(F,Z,m);if(Y===U)continue;let[ie,me,{shouldRecurse:se=!0}={}]=Y;"__proto__"!==ie&&(G.deep&&se&&V(me)&&(me=Array.isArray(me)?D(me):X(me,$,G,z)),T[ie]=me)}return T};Ae.exports=(m,$,G)=>{if(!J(m))throw new TypeError(`Expected an object, got \`${m}\` (${typeof m})`);return X(m,$,G)},Ae.exports.mapObjectSkip=U},3913:(Ae,J,U)=>{const V=U(970),X=U(9390),m=U(5041),$=U(5238);Ae.exports={CircleMode:V,DragCircleMode:X,DirectMode:m,SimpleSelectMode:$}},970:(Ae,J,U)=>{const V=U(3331),X=U(1319),m=U(4054),$=U(1437).default,G={...V.modes.draw_polygon};G.onSetup=function(T){const D=this.newFeature({type:X.geojsonTypes.FEATURE,properties:{isCircle:!0,center:[]},geometry:{type:X.geojsonTypes.POLYGON,coordinates:[[]]}});return this.addFeature(D),this.clearSelectedFeatures(),m.disable(this),this.updateUIClasses({mouse:X.cursors.ADD}),this.activateUIButton(X.types.POLYGON),this.setActionableState({trash:!0}),{initialRadiusInKm:T.initialRadiusInKm||2,polygon:D,currentVertexPosition:0}},G.clickAnywhere=function(T,D){if(0===T.currentVertexPosition){T.currentVertexPosition++;const F=[D.lngLat.lng,D.lngLat.lat],Z=$(F,T.initialRadiusInKm);T.polygon.incomingCoords(Z.geometry.coordinates),T.polygon.properties.center=F,T.polygon.properties.radiusInKm=T.initialRadiusInKm}return this.changeMode(X.modes.SIMPLE_SELECT,{featureIds:[T.polygon.id]})},Ae.exports=G},5041:(Ae,J,U)=>{const V=U(3331),X=U(2120),m=U(3905),$=U(1319),G=U(9374),z=U(2777).Z,T=U(8275),D=U(1437).default,F=U(3901),Z=V.modes.direct_select;Z.dragFeature=function(Y,ie,me){m(this.getSelected(),me),this.getSelected().filter(se=>se.properties.isCircle).map(se=>se.properties.center).forEach(se=>{se[0]+=me.lng,se[1]+=me.lat}),Y.dragMoveLocation=ie.lngLat},Z.dragVertex=function(Y,ie,me){if(Y.feature.properties.isCircle){const se=Y.feature.properties.center,_e=[ie.lngLat.lng,ie.lngLat.lat],Me=z(T.point(se),T.point(_e),{units:"kilometers"}),Ne=D(se,Me);Y.feature.incomingCoords(Ne.geometry.coordinates),Y.feature.properties.radiusInKm=Me}else{const se=Y.selectedCoordPaths.map(Ne=>Y.feature.getCoordinate(Ne)),_e=se.map(Ne=>({type:$.geojsonTypes.FEATURE,properties:{},geometry:{type:$.geojsonTypes.POINT,coordinates:Ne}})),Me=G(_e,me);for(let Ne=0;Ne<se.length;Ne++){const Ze=se[Ne];Y.feature.updateCoordinate(Y.selectedCoordPaths[Ne],Ze[0]+Me.lng,Ze[1]+Me.lat)}}},Z.toDisplayFeatures=function(Y,ie,me){Y.featureId===ie.properties.id?(ie.properties.active=$.activeStates.ACTIVE,me(ie),(ie.properties.user_isCircle?F(ie):X(ie,{map:this.map,midpoints:!0,selectedPaths:Y.selectedCoordPaths})).forEach(me)):(ie.properties.active=$.activeStates.INACTIVE,me(ie)),this.fireActionable(Y)},Ae.exports=Z},9390:(Ae,J,U)=>{const V=U(3331),X=U(1319),m=U(4054),$=U(3609),G=U(1437).default,z=U(2777).Z,T=U(8275),D={...V.modes.draw_polygon};D.onSetup=function(F){const Z=this.newFeature({type:X.geojsonTypes.FEATURE,properties:{isCircle:!0,center:[]},geometry:{type:X.geojsonTypes.POLYGON,coordinates:[[]]}});return this.addFeature(Z),this.clearSelectedFeatures(),m.disable(this),$.disable(this),this.updateUIClasses({mouse:X.cursors.ADD}),this.activateUIButton(X.types.POLYGON),this.setActionableState({trash:!0}),{polygon:Z,currentVertexPosition:0}},D.onMouseDown=D.onTouchStart=function(F,Z){0===F.polygon.properties.center.length&&(F.polygon.properties.center=[Z.lngLat.lng,Z.lngLat.lat])},D.onDrag=D.onMouseMove=function(F,Z){const Y=F.polygon.properties.center;if(Y.length>0){const ie=z(T.point(Y),T.point([Z.lngLat.lng,Z.lngLat.lat]),{units:"kilometers"}),me=G(Y,ie);F.polygon.incomingCoords(me.geometry.coordinates),F.polygon.properties.radiusInKm=ie}},D.onMouseUp=D.onTouchEnd=function(F,Z){return $.enable(this),this.changeMode(X.modes.SIMPLE_SELECT,{featureIds:[F.polygon.id]})},D.onClick=D.onTap=function(F,Z){F.polygon.properties.center=[]},D.toDisplayFeatures=function(F,Z,Y){return Z.properties.active=Z.properties.id===F.polygon.id?X.activeStates.ACTIVE:X.activeStates.INACTIVE,Y(Z)},Ae.exports=D},5238:(Ae,J,U)=>{const V=U(3331),X=U(2120),m=U(3905),$=U(1319),G=U(3901),z=V.modes.simple_select;z.dragMove=function(T,D){T.dragMoving=!0,D.originalEvent.stopPropagation();const F={lng:D.lngLat.lng-T.dragMoveLocation.lng,lat:D.lngLat.lat-T.dragMoveLocation.lat};m(this.getSelected(),F),this.getSelected().filter(Z=>Z.properties.isCircle).map(Z=>Z.properties.center).forEach(Z=>{Z[0]+=F.lng,Z[1]+=F.lat}),T.dragMoveLocation=D.lngLat},z.toDisplayFeatures=function(T,D,F){D.properties.active=this.isSelected(D.properties.id)?$.activeStates.ACTIVE:$.activeStates.INACTIVE,F(D),this.fireActionable(),D.properties.active===$.activeStates.ACTIVE&&D.geometry.type!==$.geojsonTypes.POINT&&(D.properties.user_isCircle?G(D):X(D)).forEach(F)},Ae.exports=z},3901:(Ae,J,U)=>{const V=U(5340);Ae.exports=function X(m){const{properties:$,geometry:G}=m;if(!$.user_isCircle)return null;const z=[],T=G.coordinates[0].slice(0,-1);for(let D=0;D<T.length;D+=Math.round(T.length/4))z.push(V($.id,T[D],`0.${D}`,!1));return z}},3609:Ae=>{Ae.exports={enable(J){setTimeout(()=>{!J.map||!J.map.dragPan||!J._ctx||!J._ctx.store||!J._ctx.store.getInitialConfigValue||!J._ctx.store.getInitialConfigValue("dragPan")||J.map.dragPan.enable()},0)},disable(J){setTimeout(()=>{!J.map||!J.map.doubleClickZoom||J.map.dragPan.disable()},0)}}},6844:Ae=>{Ae.exports=function(U){return function V(X){return Array.isArray(X)&&X.length&&"number"==typeof X[0]?[X]:X.reduce(function(m,$){return Array.isArray($)&&Array.isArray($[0])?m.concat(V($)):(m.push($),m)},[])}(U)}},7301:(Ae,J,U)=>{var V=U(8143),X=U(8714),m=U(6844);Ae.exports=function($){if(!$)return[];var G=X(V($)),z=[];return G.features.forEach(function(T){!T.geometry||(z=z.concat(m(T.geometry.coordinates)))}),z}},5988:(Ae,J,U)=>{var V=U(7301),X=U(5080),m=U(8604),$={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},G=Object.keys($);function z(T){for(var F=m(),Z=V(T),Y=0;Y<Z.length;Y++)F.include(Z[Y]);return F}Ae.exports=function(T){return z(T).bbox()},Ae.exports.polygon=function(T){return z(T).polygon()},Ae.exports.bboxify=function(T){return X(T).map(function(D){D&&G.some(function(Z){return!!D[Z]&&-1!==$[Z].indexOf(D.type)})&&(D.bbox=z(D).bbox(),this.update(D))})}},3331:(Ae,J,U)=>{const V=U(1726),X=U(9043),m=U(7997),$=U(1319);Ae.exports=function(z){!function(z,T){const D={options:z=X(z)};T=m(D,T),D.api=T;const F=V(D);T.onAdd=F.onAdd,T.onRemove=F.onRemove,T.types=$.types,T.options=z}(z,this)},Ae.exports.modes=U(5073)},7997:(Ae,J,U)=>{const V=U(8222),X=U(8143),m=U(3334),$=U(2447),G=U(3888),z=U(8035),T=U(1319),D=U(6330),F={Polygon:U(5165),LineString:U(4479),Point:U(4158),MultiPolygon:U(5315),MultiLineString:U(5315),MultiPoint:U(5315)};Ae.exports=function(Z,Y){return Y.modes=T.modes,Y.getFeatureIdsAt=function(ie){return $.click({point:ie},null,Z).map(se=>se.properties.id)},Y.getSelectedIds=function(){return Z.store.getSelectedIds()},Y.getSelected=function(){return{type:T.geojsonTypes.FEATURE_COLLECTION,features:Z.store.getSelectedIds().map(ie=>Z.store.get(ie)).map(ie=>ie.toGeoJSON())}},Y.getSelectedPoints=function(){return{type:T.geojsonTypes.FEATURE_COLLECTION,features:Z.store.getSelectedCoordinates().map(ie=>({type:T.geojsonTypes.FEATURE,properties:{},geometry:{type:T.geojsonTypes.POINT,coordinates:ie.coordinates}}))}},Y.set=function(ie){if(void 0===ie.type||ie.type!==T.geojsonTypes.FEATURE_COLLECTION||!Array.isArray(ie.features))throw new Error("Invalid FeatureCollection");const me=Z.store.createRenderBatch();let se=Z.store.getAllIds().slice();const _e=Y.add(ie),Me=new D(_e);return se=se.filter(Ne=>!Me.has(Ne)),se.length&&Y.delete(se),me(),_e},Y.add=function(ie){const me=z.hint(ie,{precisionWarning:!1}).filter(Me=>"message"!==Me.level);if(me.length)throw new Error(me[0].message);const _e=JSON.parse(JSON.stringify(X(ie))).features.map(Me=>{if(Me.id=Me.id||m(),null===Me.geometry)throw new Error("Invalid geometry: null");if(void 0===Z.store.get(Me.id)||Z.store.get(Me.id).type!==Me.geometry.type){const Ne=F[Me.geometry.type];if(void 0===Ne)throw new Error(`Invalid geometry type: ${Me.geometry.type}.`);const Ze=new Ne(Z,Me);Z.store.add(Ze)}else{const Ne=Z.store.get(Me.id);Ne.properties=Me.properties,V(Ne.getCoordinates(),Me.geometry.coordinates)||Ne.incomingCoords(Me.geometry.coordinates)}return Me.id});return Z.store.render(),_e},Y.get=function(ie){const me=Z.store.get(ie);if(me)return me.toGeoJSON()},Y.getAll=function(){return{type:T.geojsonTypes.FEATURE_COLLECTION,features:Z.store.getAll().map(ie=>ie.toGeoJSON())}},Y.delete=function(ie){return Z.store.delete(ie,{silent:!0}),Y.getMode()!==T.modes.DIRECT_SELECT||Z.store.getSelectedIds().length?Z.store.render():Z.events.changeMode(T.modes.SIMPLE_SELECT,void 0,{silent:!0}),Y},Y.deleteAll=function(){return Z.store.delete(Z.store.getAllIds(),{silent:!0}),Y.getMode()===T.modes.DIRECT_SELECT?Z.events.changeMode(T.modes.SIMPLE_SELECT,void 0,{silent:!0}):Z.store.render(),Y},Y.changeMode=function(ie,me={}){return ie===T.modes.SIMPLE_SELECT&&Y.getMode()===T.modes.SIMPLE_SELECT?(G(me.featureIds||[],Z.store.getSelectedIds())||(Z.store.setSelected(me.featureIds,{silent:!0}),Z.store.render()),Y):(ie===T.modes.DIRECT_SELECT&&Y.getMode()===T.modes.DIRECT_SELECT&&me.featureId===Z.store.getSelectedIds()[0]||Z.events.changeMode(ie,me,{silent:!0}),Y)},Y.getMode=function(){return Z.events.getMode()},Y.trash=function(){return Z.events.trash({silent:!0}),Y},Y.combineFeatures=function(){return Z.events.combineFeatures({silent:!0}),Y},Y.uncombineFeatures=function(){return Z.events.uncombineFeatures({silent:!0}),Y},Y.setFeatureProperty=function(ie,me,se){return Z.store.setFeatureProperty(ie,me,se),Y},Y}},1319:Ae=>{Ae.exports={classes:{CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},sources:{HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},cursors:{ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},types:{POLYGON:"polygon",LINE:"line_string",POINT:"point"},geojsonTypes:{FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},modes:{DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},events:{CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},updateActions:{MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},meta:{FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},activeStates:{ACTIVE:"true",INACTIVE:"false"},interactions:["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],LAT_MIN:-90,LAT_RENDERED_MIN:-85,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}},5262:(Ae,J,U)=>{const V=U(4699),X=U(166),m=U(2447),$=U(7715),G=U(2423),z=U(1319),T=U(3595);Ae.exports=function(D){const F=Object.keys(D.options.modes).reduce((Ee,Je)=>(Ee[Je]=T(D.options.modes[Je]),Ee),{});let Z={},Y={};const ie={};let me=null,se=null;ie.drag=function(Ee,Je){Je({point:Ee.point,time:(new Date).getTime()})?(D.ui.queueMapClasses({mouse:z.cursors.DRAG}),se.drag(Ee)):Ee.originalEvent.stopPropagation()},ie.mousedrag=function(Ee){ie.drag(Ee,Je=>!$(Z,Je))},ie.touchdrag=function(Ee){ie.drag(Ee,Je=>!G(Y,Je))},ie.mousemove=function(Ee){if(1===(void 0!==Ee.originalEvent.buttons?Ee.originalEvent.buttons:Ee.originalEvent.which))return ie.mousedrag(Ee);const nt=X(Ee,D);Ee.featureTarget=nt,se.mousemove(Ee)},ie.mousedown=function(Ee){Z={time:(new Date).getTime(),point:Ee.point};const Je=X(Ee,D);Ee.featureTarget=Je,se.mousedown(Ee)},ie.mouseup=function(Ee){const Je=X(Ee,D);Ee.featureTarget=Je,$(Z,{point:Ee.point,time:(new Date).getTime()})?se.click(Ee):se.mouseup(Ee)},ie.mouseout=function(Ee){se.mouseout(Ee)},ie.touchstart=function(Ee){if(Ee.originalEvent.preventDefault(),!D.options.touchEnabled)return;Y={time:(new Date).getTime(),point:Ee.point};const Je=m.touch(Ee,null,D)[0];Ee.featureTarget=Je,se.touchstart(Ee)},ie.touchmove=function(Ee){if(Ee.originalEvent.preventDefault(),D.options.touchEnabled)return se.touchmove(Ee),ie.touchdrag(Ee)},ie.touchend=function(Ee){if(Ee.originalEvent.preventDefault(),!D.options.touchEnabled)return;const Je=m.touch(Ee,null,D)[0];Ee.featureTarget=Je,G(Y,{time:(new Date).getTime(),point:Ee.point})?se.tap(Ee):se.touchend(Ee)};const _e=Ee=>!(8===Ee||46===Ee||Ee>=48&&Ee<=57);function Me(Ee,Je,nt={}){se.stop();const Ct=F[Ee];if(void 0===Ct)throw new Error(`${Ee} is not valid`);me=Ee;const Ue=Ct(D,Je);se=V(Ue,D),nt.silent||D.map.fire(z.events.MODE_CHANGE,{mode:Ee}),D.store.setDirty(),D.store.render()}ie.keydown=function(Ee){"mapboxgl-canvas"===(Ee.srcElement||Ee.target).classList[0]&&(8!==Ee.keyCode&&46!==Ee.keyCode||!D.options.controls.trash?_e(Ee.keyCode)?se.keydown(Ee):49===Ee.keyCode&&D.options.controls.point?Me(z.modes.DRAW_POINT):50===Ee.keyCode&&D.options.controls.line_string?Me(z.modes.DRAW_LINE_STRING):51===Ee.keyCode&&D.options.controls.polygon&&Me(z.modes.DRAW_POLYGON):(Ee.preventDefault(),se.trash()))},ie.keyup=function(Ee){_e(Ee.keyCode)&&se.keyup(Ee)},ie.zoomend=function(){D.store.changeZoom()},ie.data=function(Ee){if("style"===Ee.dataType){const{setup:Je,map:nt,options:Ct,store:Ue}=D;Ct.styles.some(L=>nt.getLayer(L.id))||(Je.addLayers(),Ue.setDirty(),Ue.render())}};const Ne={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){me=D.options.defaultMode,se=V(F[me](D),D)},changeMode:Me,actionable:function Ze(Ee){let Je=!1;Object.keys(Ee).forEach(nt=>{if(void 0===Ne[nt])throw new Error("Invalid action type");Ne[nt]!==Ee[nt]&&(Je=!0),Ne[nt]=Ee[nt]}),Je&&D.map.fire(z.events.ACTIONABLE,{actions:Ne})},currentModeName:function(){return me},currentModeRender:function(Ee,Je){return se.render(Ee,Je)},fire:function(Ee,Je){ie[Ee]&&ie[Ee](Je)},addEventListeners:function(){D.map.on("mousemove",ie.mousemove),D.map.on("mousedown",ie.mousedown),D.map.on("mouseup",ie.mouseup),D.map.on("data",ie.data),D.map.on("touchmove",ie.touchmove),D.map.on("touchstart",ie.touchstart),D.map.on("touchend",ie.touchend),D.container.addEventListener("mouseout",ie.mouseout),D.options.keybindings&&(D.container.addEventListener("keydown",ie.keydown),D.container.addEventListener("keyup",ie.keyup))},removeEventListeners:function(){D.map.off("mousemove",ie.mousemove),D.map.off("mousedown",ie.mousedown),D.map.off("mouseup",ie.mouseup),D.map.off("data",ie.data),D.map.off("touchmove",ie.touchmove),D.map.off("touchstart",ie.touchstart),D.map.off("touchend",ie.touchend),D.container.removeEventListener("mouseout",ie.mouseout),D.options.keybindings&&(D.container.removeEventListener("keydown",ie.keydown),D.container.removeEventListener("keyup",ie.keyup))},trash:function(Ee){se.trash(Ee)},combineFeatures:function(){se.combineFeatures()},uncombineFeatures:function(){se.uncombineFeatures()},getMode:function(){return me}}}},684:(Ae,J,U)=>{const V=U(3334),X=U(1319),m=function($,G){this.ctx=$,this.properties=G.properties||{},this.coordinates=G.geometry.coordinates,this.id=G.id||V(),this.type=G.geometry.type};m.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},m.prototype.incomingCoords=function($){this.setCoordinates($)},m.prototype.setCoordinates=function($){this.coordinates=$,this.changed()},m.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},m.prototype.setProperty=function($,G){this.properties[$]=G},m.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:X.geojsonTypes.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},m.prototype.internal=function($){const G={id:this.id,meta:X.meta.FEATURE,"meta:type":this.type,active:X.activeStates.INACTIVE,mode:$};if(this.ctx.options.userProperties)for(const z in this.properties)G[`user_${z}`]=this.properties[z];return{type:X.geojsonTypes.FEATURE,properties:G,geometry:{coordinates:this.getCoordinates(),type:this.type}}},Ae.exports=m},4479:(Ae,J,U)=>{const V=U(684),X=function(m,$){V.call(this,m,$)};(X.prototype=Object.create(V.prototype)).isValid=function(){return this.coordinates.length>1},X.prototype.addCoordinate=function(m,$,G){this.changed();const z=parseInt(m,10);this.coordinates.splice(z,0,[$,G])},X.prototype.getCoordinate=function(m){const $=parseInt(m,10);return JSON.parse(JSON.stringify(this.coordinates[$]))},X.prototype.removeCoordinate=function(m){this.changed(),this.coordinates.splice(parseInt(m,10),1)},X.prototype.updateCoordinate=function(m,$,G){const z=parseInt(m,10);this.coordinates[z]=[$,G],this.changed()},Ae.exports=X},5315:(Ae,J,U)=>{const V=U(684),X=U(1319),m=U(3334),$={MultiPoint:U(4158),MultiLineString:U(4479),MultiPolygon:U(5165)},G=(T,D,F,Z,Y)=>{const ie=F.split("."),me=parseInt(ie[0],10),se=ie[1]?ie.slice(1).join("."):null;return T[me][D](se,Z,Y)},z=function(T,D){if(V.call(this,T,D),delete this.coordinates,this.model=$[D.geometry.type],void 0===this.model)throw new TypeError(`${D.geometry.type} is not a valid type`);this.features=this._coordinatesToFeatures(D.geometry.coordinates)};(z.prototype=Object.create(V.prototype))._coordinatesToFeatures=function(T){const D=this.model.bind(this);return T.map(F=>new D(this.ctx,{id:m(),type:X.geojsonTypes.FEATURE,properties:{},geometry:{coordinates:F,type:this.type.replace("Multi","")}}))},z.prototype.isValid=function(){return this.features.every(T=>T.isValid())},z.prototype.setCoordinates=function(T){this.features=this._coordinatesToFeatures(T),this.changed()},z.prototype.getCoordinate=function(T){return G(this.features,"getCoordinate",T)},z.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(T=>T.type===X.geojsonTypes.POLYGON?T.getCoordinates():T.coordinates)))},z.prototype.updateCoordinate=function(T,D,F){G(this.features,"updateCoordinate",T,D,F),this.changed()},z.prototype.addCoordinate=function(T,D,F){G(this.features,"addCoordinate",T,D,F),this.changed()},z.prototype.removeCoordinate=function(T){G(this.features,"removeCoordinate",T),this.changed()},z.prototype.getFeatures=function(){return this.features},Ae.exports=z},4158:(Ae,J,U)=>{const V=U(684),X=function(m,$){V.call(this,m,$)};(X.prototype=Object.create(V.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},X.prototype.updateCoordinate=function(m,$,G){this.coordinates=3===arguments.length?[$,G]:[m,$],this.changed()},X.prototype.getCoordinate=function(){return this.getCoordinates()},Ae.exports=X},5165:(Ae,J,U)=>{const V=U(684),X=function(m,$){V.call(this,m,$),this.coordinates=this.coordinates.map(G=>G.slice(0,-1))};(X.prototype=Object.create(V.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(m=>m.length>2)},X.prototype.incomingCoords=function(m){this.coordinates=m.map($=>$.slice(0,-1)),this.changed()},X.prototype.setCoordinates=function(m){this.coordinates=m,this.changed()},X.prototype.addCoordinate=function(m,$,G){this.changed();const z=m.split(".").map(D=>parseInt(D,10));this.coordinates[z[0]].splice(z[1],0,[$,G])},X.prototype.removeCoordinate=function(m){this.changed();const $=m.split(".").map(z=>parseInt(z,10)),G=this.coordinates[$[0]];G&&(G.splice($[1],1),G.length<3&&this.coordinates.splice($[0],1))},X.prototype.getCoordinate=function(m){const $=m.split(".").map(z=>parseInt(z,10));return JSON.parse(JSON.stringify(this.coordinates[$[0]][$[1]]))},X.prototype.getCoordinates=function(){return this.coordinates.map(m=>m.concat([m[0]]))},X.prototype.updateCoordinate=function(m,$,G){this.changed();const z=m.split("."),T=parseInt(z[0],10),D=parseInt(z[1],10);void 0===this.coordinates[T]&&(this.coordinates[T]=[]),this.coordinates[T][D]=[$,G]},Ae.exports=X},8747:(Ae,J,U)=>{const V=U(1319);Ae.exports={isOfMetaType:function(X){return function(m){const $=m.featureTarget;return!(!$||!$.properties)&&$.properties.meta===X}},isShiftMousedown:function(X){return!(!X.originalEvent||!X.originalEvent.shiftKey)&&0===X.originalEvent.button},isActiveFeature:function(X){return!(!X.featureTarget||!X.featureTarget.properties)&&X.featureTarget.properties.active===V.activeStates.ACTIVE&&X.featureTarget.properties.meta===V.meta.FEATURE},isInactiveFeature:function(X){return!(!X.featureTarget||!X.featureTarget.properties)&&X.featureTarget.properties.active===V.activeStates.INACTIVE&&X.featureTarget.properties.meta===V.meta.FEATURE},noTarget:function(X){return void 0===X.featureTarget},isFeature:function(X){return!(!X.featureTarget||!X.featureTarget.properties)&&X.featureTarget.properties.meta===V.meta.FEATURE},isVertex:function(X){const m=X.featureTarget;return!(!m||!m.properties)&&m.properties.meta===V.meta.VERTEX},isShiftDown:function(X){return!!X.originalEvent&&!0===X.originalEvent.shiftKey},isEscapeKey:function(X){return 27===X.keyCode},isEnterKey:function(X){return 13===X.keyCode},true:function(){return!0}}},9374:(Ae,J,U)=>{const V=U(5988),X=U(1319),{LAT_MIN:m,LAT_MAX:$,LAT_RENDERED_MIN:G,LAT_RENDERED_MAX:z,LNG_MIN:T,LNG_MAX:D}=X;Ae.exports=function(F,Z){let Y=m,ie=$,me=m,se=$,_e=D,Me=T;F.forEach(Ze=>{const je=V(Ze),Ee=je[1],Je=je[3],nt=je[0],Ct=je[2];Ee>Y&&(Y=Ee),Je<ie&&(ie=Je),Je>me&&(me=Je),Ee<se&&(se=Ee),nt<_e&&(_e=nt),Ct>Me&&(Me=Ct)});const Ne=Z;return Y+Ne.lat>z&&(Ne.lat=z-Y),me+Ne.lat>$&&(Ne.lat=$-me),ie+Ne.lat<G&&(Ne.lat=G-ie),se+Ne.lat<m&&(Ne.lat=m-se),_e+Ne.lng<=T&&(Ne.lng+=360*Math.ceil(Math.abs(Ne.lng)/360)),Me+Ne.lng>=D&&(Ne.lng-=360*Math.ceil(Math.abs(Ne.lng)/360)),Ne}},856:(Ae,J,U)=>{const V=U(1319);Ae.exports=function(X,m,$,G){const z=m.geometry.coordinates,T=$.geometry.coordinates;if(z[1]>V.LAT_RENDERED_MAX||z[1]<V.LAT_RENDERED_MIN||T[1]>V.LAT_RENDERED_MAX||T[1]<V.LAT_RENDERED_MIN)return null;const D=G.project([z[0],z[1]]),F=G.project([T[0],T[1]]),Z=G.unproject([(D.x+F.x)/2,(D.y+F.y)/2]);return{type:V.geojsonTypes.FEATURE,properties:{meta:V.meta.MIDPOINT,parent:X,lng:Z.lng,lat:Z.lat,coord_path:$.properties.coord_path},geometry:{type:V.geojsonTypes.POINT,coordinates:[Z.lng,Z.lat]}}}},2120:(Ae,J,U)=>{const V=U(5340),X=U(856),m=U(1319);Ae.exports=function $(G,z={},T=null){const{type:D,coordinates:F}=G.geometry,Z=G.properties&&G.properties.id;let Y=[];function ie(_e,Me){let Ne="",Ze=null;_e.forEach((je,Ee)=>{const Je=null!=Me?`${Me}.${Ee}`:String(Ee),nt=V(Z,je,Je,me(Je));if(z.midpoints&&Ze){const Ue=X(Z,Ze,nt,z.map);Ue&&Y.push(Ue)}Ze=nt;const Ct=JSON.stringify(je);Ne!==Ct&&Y.push(nt),0===Ee&&(Ne=Ct)})}function me(_e){return!!z.selectedPaths&&-1!==z.selectedPaths.indexOf(_e)}return D===m.geojsonTypes.POINT?Y.push(V(Z,F,T,me(T))):D===m.geojsonTypes.POLYGON?F.forEach((_e,Me)=>{ie(_e,null!==T?`${T}.${Me}`:String(Me))}):D===m.geojsonTypes.LINE_STRING?ie(F,T):0===D.indexOf(m.geojsonTypes.MULTI_PREFIX)&&function se(){const _e=D.replace(m.geojsonTypes.MULTI_PREFIX,"");F.forEach((Me,Ne)=>{Y=Y.concat($({type:m.geojsonTypes.FEATURE,properties:G.properties,geometry:{type:_e,coordinates:Me}},z,Ne))})}(),Y}},5340:(Ae,J,U)=>{const V=U(1319);Ae.exports=function(X,m,$,G){return{type:V.geojsonTypes.FEATURE,properties:{meta:V.meta.VERTEX,parent:X,coord_path:$,active:G?V.activeStates.ACTIVE:V.activeStates.INACTIVE},geometry:{type:V.geojsonTypes.POINT,coordinates:m}}}},4054:Ae=>{Ae.exports={enable(J){setTimeout(()=>{!J.map||!J.map.doubleClickZoom||!J._ctx||!J._ctx.store||!J._ctx.store.getInitialConfigValue||!J._ctx.store.getInitialConfigValue("doubleClickZoom")||J.map.doubleClickZoom.enable()},0)},disable(J){setTimeout(()=>{!J.map||!J.map.doubleClickZoom||J.map.doubleClickZoom.disable()},0)}}},5025:Ae=>{Ae.exports=function(J,U){const V=J.x-U.x,X=J.y-U.y;return Math.sqrt(V*V+X*X)}},2447:(Ae,J,U)=>{const V=U(3953),X=U(633),m=U(1319),$=U(6330),G=[m.meta.FEATURE,m.meta.MIDPOINT,m.meta.VERTEX];function D(F,Z,Y,ie){if(null===Y.map)return[];const me=F?X(F,ie):Z,se={};Y.options.styles&&(se.layers=Y.options.styles.map(Ze=>Ze.id));const _e=Y.map.queryRenderedFeatures(me,se).filter(Ze=>-1!==G.indexOf(Ze.properties.meta)),Me=new $,Ne=[];return _e.forEach(Ze=>{const je=Ze.properties.id;Me.has(je)||(Me.add(je),Ne.push(Ze))}),V(Ne)}Ae.exports={click:function z(F,Z,Y){return D(F,Z,Y,Y.options.clickBuffer)},touch:function T(F,Z,Y){return D(F,Z,Y,Y.options.touchBuffer)}}},166:(Ae,J,U)=>{const V=U(2447),X=U(1319);Ae.exports=function($,G){const z=V.click($,null,G),T={mouse:X.cursors.NONE};return z[0]&&(T.mouse=z[0].properties.active===X.activeStates.ACTIVE?X.cursors.MOVE:X.cursors.POINTER,T.feature=z[0].properties.meta),-1!==G.events.currentModeName().indexOf("draw")&&(T.mouse=X.cursors.ADD),G.ui.queueMapClasses(T),G.ui.updateMapClasses(),z[0]}},7715:(Ae,J,U)=>{const V=U(5025);Ae.exports=function(z,T,D={}){const F=null!=D.fineTolerance?D.fineTolerance:4,Z=null!=D.grossTolerance?D.grossTolerance:12,Y=null!=D.interval?D.interval:500;z.point=z.point||T.point,z.time=z.time||T.time;const ie=V(z.point,T.point);return ie<F||ie<Z&&T.time-z.time<Y}},3873:Ae=>{Ae.exports=function J(U,V){return!!U.lngLat&&U.lngLat.lng===V[0]&&U.lngLat.lat===V[1]}},2423:(Ae,J,U)=>{const V=U(5025);Ae.exports=function(G,z,T={}){const D=null!=T.tolerance?T.tolerance:25,F=null!=T.interval?T.interval:250;return G.point=G.point||z.point,G.time=G.time||z.time,V(G.point,z.point)<D&&z.time-G.time<F}},633:Ae=>{Ae.exports=function J(U,V=0){return[[U.point.x-V,U.point.y-V],[U.point.x+V,U.point.y+V]]}},4699:Ae=>{Ae.exports=function(U,V){const X={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},m={on:function(G,z,T){if(void 0===X[G])throw new Error(`Invalid event type: ${G}`);X[G].push({selector:z,fn:T})},render:function(G){V.store.featureChanged(G)}},$=function(G,z){const T=X[G];let D=T.length;for(;D--;){const F=T[D];if(F.selector(z)){F.fn.call(m,z),V.store.render(),V.ui.updateMapClasses();break}}};return U.start.call(m),{render:U.render,stop:function(){U.stop&&U.stop()},trash:function(){U.trash&&(U.trash(),V.store.render())},combineFeatures:function(){U.combineFeatures&&U.combineFeatures()},uncombineFeatures:function(){U.uncombineFeatures&&U.uncombineFeatures()},drag:function(G){$("drag",G)},click:function(G){$("click",G)},mousemove:function(G){$("mousemove",G)},mousedown:function(G){$("mousedown",G)},mouseup:function(G){$("mouseup",G)},mouseout:function(G){$("mouseout",G)},keydown:function(G){$("keydown",G)},keyup:function(G){$("keyup",G)},touchstart:function(G){$("touchstart",G)},touchmove:function(G){$("touchmove",G)},touchend:function(G){$("touchend",G)},tap:function(G){$("tap",G)}}}},4840:(Ae,J,U)=>{const V=U(4969);Ae.exports=function X(m,$){const G=$.getBoundingClientRect();return new V(m.clientX-G.left-($.clientLeft||0),m.clientY-G.top-($.clientTop||0))}},3905:(Ae,J,U)=>{const V=U(9374),X=U(1319);Ae.exports=function(m,$){const G=V(m.map(z=>z.toGeoJSON()),$);m.forEach(z=>{const T=z.getCoordinates(),D=ie=>{const me={lng:ie[0]+G.lng,lat:ie[1]+G.lat};return[me.lng,me.lat]},F=ie=>ie.map(me=>D(me));let Y;z.type===X.geojsonTypes.POINT?Y=D(T):z.type===X.geojsonTypes.LINE_STRING||z.type===X.geojsonTypes.MULTI_POINT?Y=T.map(D):z.type===X.geojsonTypes.POLYGON||z.type===X.geojsonTypes.MULTI_LINE_STRING?Y=T.map(F):z.type===X.geojsonTypes.MULTI_POLYGON&&(Y=T.map(ie=>ie.map(me=>F(me)))),z.incomingCoords(Y)})}},3953:(Ae,J,U)=>{const V=U(869),X=U(1319),m={Point:0,LineString:1,Polygon:2};function $(z,T){const D=m[z.geometry.type]-m[T.geometry.type];return 0===D&&z.geometry.type===X.geojsonTypes.POLYGON?z.area-T.area:D}Ae.exports=function G(z){return z.map(T=>(T.geometry.type===X.geojsonTypes.POLYGON&&(T.area=V.geometry({type:X.geojsonTypes.FEATURE,property:{},geometry:T.geometry})),T)).sort($).map(T=>(delete T.area,T))}},6330:Ae=>{function J(U){if(this._items={},this._nums={},this._length=U?U.length:0,U)for(let V=0,X=U.length;V<X;V++)this.add(U[V]),void 0!==U[V]&&("string"==typeof U[V]?this._items[U[V]]=V:this._nums[U[V]]=V)}J.prototype.add=function(U){return this.has(U)||(this._length++,"string"==typeof U?this._items[U]=this._length:this._nums[U]=this._length),this},J.prototype.delete=function(U){return!1===this.has(U)||(this._length--,delete this._items[U],delete this._nums[U]),this},J.prototype.has=function(U){return!("string"!=typeof U&&"number"!=typeof U||void 0===this._items[U]&&void 0===this._nums[U])},J.prototype.values=function(){const U=[];return Object.keys(this._items).forEach(V=>{U.push({k:V,v:this._items[V]})}),Object.keys(this._nums).forEach(V=>{U.push({k:JSON.parse(V),v:this._nums[V]})}),U.sort((V,X)=>V.v-X.v).map(V=>V.k)},J.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this},Ae.exports=J},3888:Ae=>{Ae.exports=function(J,U){return J.length===U.length&&JSON.stringify(J.map(V=>V).sort())===JSON.stringify(U.map(V=>V).sort())}},6313:Ae=>{Ae.exports=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}]},5479:Ae=>{Ae.exports=function J(U,V,X){let m,$;function G(){m=!1,$&&(z.apply(X,$),$=!1)}function z(){m?$=arguments:(m=!0,U.apply(X,arguments),setTimeout(G,V))}return z}},859:Ae=>{Ae.exports=function J(U){return[].concat(U).filter(V=>void 0!==V)}},4261:(Ae,J,U)=>{const{noTarget:V,isOfMetaType:X,isInactiveFeature:m,isShiftDown:$}=U(8747),G=U(2120),z=U(9374),T=U(4054),D=U(1319),F=U(8747),Z=U(3905),Y=X(D.meta.VERTEX),ie=X(D.meta.MIDPOINT),me={fireUpdate:function(){this.map.fire(D.events.UPDATE,{action:D.updateActions.CHANGE_COORDINATES,features:this.getSelected().map(se=>se.toGeoJSON())})},fireActionable:function(se){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:se.selectedCoordPaths.length>0})},startDragging:function(se,_e){this.map.dragPan.disable(),se.canDragMove=!0,se.dragMoveLocation=_e.lngLat},stopDragging:function(se){this.map.dragPan.enable(),se.dragMoving=!1,se.canDragMove=!1,se.dragMoveLocation=null},onVertex:function(se,_e){this.startDragging(se,_e);const Me=_e.featureTarget.properties,Ne=se.selectedCoordPaths.indexOf(Me.coord_path);$(_e)||-1!==Ne?$(_e)&&-1===Ne&&se.selectedCoordPaths.push(Me.coord_path):se.selectedCoordPaths=[Me.coord_path];const Ze=this.pathsToCoordinates(se.featureId,se.selectedCoordPaths);this.setSelectedCoordinates(Ze)},onMidpoint:function(se,_e){this.startDragging(se,_e);const Me=_e.featureTarget.properties;se.feature.addCoordinate(Me.coord_path,Me.lng,Me.lat),this.fireUpdate(),se.selectedCoordPaths=[Me.coord_path]},pathsToCoordinates:function(se,_e){return _e.map(Me=>({feature_id:se,coord_path:Me}))},onFeature:function(se,_e){0===se.selectedCoordPaths.length?this.startDragging(se,_e):this.stopDragging(se)},dragFeature:function(se,_e,Me){Z(this.getSelected(),Me),se.dragMoveLocation=_e.lngLat},dragVertex:function(se,_e,Me){const Ne=se.selectedCoordPaths.map(Ee=>se.feature.getCoordinate(Ee)),Ze=Ne.map(Ee=>({type:D.geojsonTypes.FEATURE,properties:{},geometry:{type:D.geojsonTypes.POINT,coordinates:Ee}})),je=z(Ze,Me);for(let Ee=0;Ee<Ne.length;Ee++){const Je=Ne[Ee];se.feature.updateCoordinate(se.selectedCoordPaths[Ee],Je[0]+je.lng,Je[1]+je.lat)}},clickNoTarget:function(){this.changeMode(D.modes.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(D.modes.SIMPLE_SELECT)},clickActiveFeature:function(se){se.selectedCoordPaths=[],this.clearSelectedCoordinates(),se.feature.changed()},onSetup:function(se){const _e=se.featureId,Me=this.getFeature(_e);if(!Me)throw new Error("You must provide a featureId to enter direct_select mode");if(Me.type===D.geojsonTypes.POINT)throw new TypeError("direct_select mode doesn't handle point features");const Ne={featureId:_e,feature:Me,dragMoveLocation:se.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:se.coordPath?[se.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(_e,Ne.selectedCoordPaths)),this.setSelected(_e),T.disable(this),this.setActionableState({trash:!0}),Ne},onStop:function(){T.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(se,_e,Me){se.featureId===_e.properties.id?(_e.properties.active=D.activeStates.ACTIVE,Me(_e),G(_e,{map:this.map,midpoints:!0,selectedPaths:se.selectedCoordPaths}).forEach(Me)):(_e.properties.active=D.activeStates.INACTIVE,Me(_e)),this.fireActionable(se)},onTrash:function(se){se.selectedCoordPaths.sort().reverse().forEach(_e=>se.feature.removeCoordinate(_e)),this.fireUpdate(),se.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(se),!1===se.feature.isValid()&&(this.deleteFeature([se.featureId]),this.changeMode(D.modes.SIMPLE_SELECT,{}))},onMouseMove:function(se,_e){const Me=F.isActiveFeature(_e),Ne=Y(_e),Ze=0===se.selectedCoordPaths.length;this.updateUIClasses(Me&&Ze||Ne&&!Ze?{mouse:D.cursors.MOVE}:{mouse:D.cursors.NONE}),this.stopDragging(se)},onMouseOut:function(se){se.dragMoving&&this.fireUpdate()}};me.onTouchStart=me.onMouseDown=function(se,_e){return Y(_e)?this.onVertex(se,_e):F.isActiveFeature(_e)?this.onFeature(se,_e):ie(_e)?this.onMidpoint(se,_e):void 0},me.onDrag=function(se,_e){if(!0!==se.canDragMove)return;se.dragMoving=!0,_e.originalEvent.stopPropagation();const Me={lng:_e.lngLat.lng-se.dragMoveLocation.lng,lat:_e.lngLat.lat-se.dragMoveLocation.lat};se.selectedCoordPaths.length>0?this.dragVertex(se,_e,Me):this.dragFeature(se,_e,Me),se.dragMoveLocation=_e.lngLat},me.onClick=function(se,_e){return V(_e)?this.clickNoTarget(se,_e):F.isActiveFeature(_e)?this.clickActiveFeature(se,_e):m(_e)?this.clickInactive(se,_e):void this.stopDragging(se)},me.onTap=function(se,_e){return V(_e)?this.clickNoTarget(se,_e):F.isActiveFeature(_e)?this.clickActiveFeature(se,_e):m(_e)?this.clickInactive(se,_e):void 0},me.onTouchEnd=me.onMouseUp=function(se){se.dragMoving&&this.fireUpdate(),this.stopDragging(se)},Ae.exports=me},3070:(Ae,J,U)=>{const V=U(8747),X=U(3873),m=U(4054),$=U(1319),G=U(5340),z={onSetup:function(T){const D=(T=T||{}).featureId;let F,Z,Y="forward";if(D){if(F=this.getFeature(D),!F)throw new Error("Could not find a feature with the provided featureId");let ie=T.from;if(ie&&"Feature"===ie.type&&ie.geometry&&"Point"===ie.geometry.type&&(ie=ie.geometry),ie&&"Point"===ie.type&&ie.coordinates&&2===ie.coordinates.length&&(ie=ie.coordinates),!ie||!Array.isArray(ie))throw new Error("Please use the `from` property to indicate which point to continue the line from");const me=F.coordinates.length-1;if(F.coordinates[me][0]===ie[0]&&F.coordinates[me][1]===ie[1])Z=me+1,F.addCoordinate(Z,...F.coordinates[me]);else{if(F.coordinates[0][0]!==ie[0]||F.coordinates[0][1]!==ie[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");Y="backwards",Z=0,F.addCoordinate(Z,...F.coordinates[0])}}else F=this.newFeature({type:$.geojsonTypes.FEATURE,properties:{},geometry:{type:$.geojsonTypes.LINE_STRING,coordinates:[]}}),Z=0,this.addFeature(F);return this.clearSelectedFeatures(),m.disable(this),this.updateUIClasses({mouse:$.cursors.ADD}),this.activateUIButton($.types.LINE),this.setActionableState({trash:!0}),{line:F,currentVertexPosition:Z,direction:Y}},clickAnywhere:function(T,D){if(T.currentVertexPosition>0&&X(D,T.line.coordinates[T.currentVertexPosition-1])||"backwards"===T.direction&&X(D,T.line.coordinates[T.currentVertexPosition+1]))return this.changeMode($.modes.SIMPLE_SELECT,{featureIds:[T.line.id]});this.updateUIClasses({mouse:$.cursors.ADD}),T.line.updateCoordinate(T.currentVertexPosition,D.lngLat.lng,D.lngLat.lat),"forward"===T.direction?(T.currentVertexPosition++,T.line.updateCoordinate(T.currentVertexPosition,D.lngLat.lng,D.lngLat.lat)):T.line.addCoordinate(0,D.lngLat.lng,D.lngLat.lat)},clickOnVertex:function(T){return this.changeMode($.modes.SIMPLE_SELECT,{featureIds:[T.line.id]})},onMouseMove:function(T,D){T.line.updateCoordinate(T.currentVertexPosition,D.lngLat.lng,D.lngLat.lat),V.isVertex(D)&&this.updateUIClasses({mouse:$.cursors.POINTER})}};z.onTap=z.onClick=function(T,D){if(V.isVertex(D))return this.clickOnVertex(T,D);this.clickAnywhere(T,D)},z.onKeyUp=function(T,D){V.isEnterKey(D)?this.changeMode($.modes.SIMPLE_SELECT,{featureIds:[T.line.id]}):V.isEscapeKey(D)&&(this.deleteFeature([T.line.id],{silent:!0}),this.changeMode($.modes.SIMPLE_SELECT))},z.onStop=function(T){m.enable(this),this.activateUIButton(),void 0!==this.getFeature(T.line.id)&&(T.line.removeCoordinate(`${T.currentVertexPosition}`),T.line.isValid()?this.map.fire($.events.CREATE,{features:[T.line.toGeoJSON()]}):(this.deleteFeature([T.line.id],{silent:!0}),this.changeMode($.modes.SIMPLE_SELECT,{},{silent:!0})))},z.onTrash=function(T){this.deleteFeature([T.line.id],{silent:!0}),this.changeMode($.modes.SIMPLE_SELECT)},z.toDisplayFeatures=function(T,D,F){const Z=D.properties.id===T.line.id;if(D.properties.active=Z?$.activeStates.ACTIVE:$.activeStates.INACTIVE,!Z)return F(D);D.geometry.coordinates.length<2||(D.properties.meta=$.meta.FEATURE,F(G(T.line.id,D.geometry.coordinates["forward"===T.direction?D.geometry.coordinates.length-2:1],""+("forward"===T.direction?D.geometry.coordinates.length-2:1),!1)),F(D))},Ae.exports=z},7182:(Ae,J,U)=>{const V=U(8747),X=U(1319),m={onSetup:function(){const $=this.newFeature({type:X.geojsonTypes.FEATURE,properties:{},geometry:{type:X.geojsonTypes.POINT,coordinates:[]}});return this.addFeature($),this.clearSelectedFeatures(),this.updateUIClasses({mouse:X.cursors.ADD}),this.activateUIButton(X.types.POINT),this.setActionableState({trash:!0}),{point:$}},stopDrawingAndRemove:function($){this.deleteFeature([$.point.id],{silent:!0}),this.changeMode(X.modes.SIMPLE_SELECT)}};m.onTap=m.onClick=function($,G){this.updateUIClasses({mouse:X.cursors.MOVE}),$.point.updateCoordinate("",G.lngLat.lng,G.lngLat.lat),this.map.fire(X.events.CREATE,{features:[$.point.toGeoJSON()]}),this.changeMode(X.modes.SIMPLE_SELECT,{featureIds:[$.point.id]})},m.onStop=function($){this.activateUIButton(),$.point.getCoordinate().length||this.deleteFeature([$.point.id],{silent:!0})},m.toDisplayFeatures=function($,G,z){const T=G.properties.id===$.point.id;if(G.properties.active=T?X.activeStates.ACTIVE:X.activeStates.INACTIVE,!T)return z(G)},m.onTrash=m.stopDrawingAndRemove,m.onKeyUp=function($,G){if(V.isEscapeKey(G)||V.isEnterKey(G))return this.stopDrawingAndRemove($,G)},Ae.exports=m},7615:(Ae,J,U)=>{const V=U(8747),X=U(4054),m=U(1319),$=U(3873),G=U(5340),z={onSetup:function(){const T=this.newFeature({type:m.geojsonTypes.FEATURE,properties:{},geometry:{type:m.geojsonTypes.POLYGON,coordinates:[[]]}});return this.addFeature(T),this.clearSelectedFeatures(),X.disable(this),this.updateUIClasses({mouse:m.cursors.ADD}),this.activateUIButton(m.types.POLYGON),this.setActionableState({trash:!0}),{polygon:T,currentVertexPosition:0}},clickAnywhere:function(T,D){if(T.currentVertexPosition>0&&$(D,T.polygon.coordinates[0][T.currentVertexPosition-1]))return this.changeMode(m.modes.SIMPLE_SELECT,{featureIds:[T.polygon.id]});this.updateUIClasses({mouse:m.cursors.ADD}),T.polygon.updateCoordinate(`0.${T.currentVertexPosition}`,D.lngLat.lng,D.lngLat.lat),T.currentVertexPosition++,T.polygon.updateCoordinate(`0.${T.currentVertexPosition}`,D.lngLat.lng,D.lngLat.lat)},clickOnVertex:function(T){return this.changeMode(m.modes.SIMPLE_SELECT,{featureIds:[T.polygon.id]})},onMouseMove:function(T,D){T.polygon.updateCoordinate(`0.${T.currentVertexPosition}`,D.lngLat.lng,D.lngLat.lat),V.isVertex(D)&&this.updateUIClasses({mouse:m.cursors.POINTER})}};z.onTap=z.onClick=function(T,D){return V.isVertex(D)?this.clickOnVertex(T,D):this.clickAnywhere(T,D)},z.onKeyUp=function(T,D){V.isEscapeKey(D)?(this.deleteFeature([T.polygon.id],{silent:!0}),this.changeMode(m.modes.SIMPLE_SELECT)):V.isEnterKey(D)&&this.changeMode(m.modes.SIMPLE_SELECT,{featureIds:[T.polygon.id]})},z.onStop=function(T){this.updateUIClasses({mouse:m.cursors.NONE}),X.enable(this),this.activateUIButton(),void 0!==this.getFeature(T.polygon.id)&&(T.polygon.removeCoordinate(`0.${T.currentVertexPosition}`),T.polygon.isValid()?this.map.fire(m.events.CREATE,{features:[T.polygon.toGeoJSON()]}):(this.deleteFeature([T.polygon.id],{silent:!0}),this.changeMode(m.modes.SIMPLE_SELECT,{},{silent:!0})))},z.toDisplayFeatures=function(T,D,F){const Z=D.properties.id===T.polygon.id;if(D.properties.active=Z?m.activeStates.ACTIVE:m.activeStates.INACTIVE,!Z)return F(D);if(0===D.geometry.coordinates.length)return;const Y=D.geometry.coordinates[0].length;if(!(Y<3)){if(D.properties.meta=m.meta.FEATURE,F(G(T.polygon.id,D.geometry.coordinates[0][0],"0.0",!1)),Y>3){const ie=D.geometry.coordinates[0].length-3;F(G(T.polygon.id,D.geometry.coordinates[0][ie],`0.${ie}`,!1))}if(Y<=4&&(F({type:m.geojsonTypes.FEATURE,properties:D.properties,geometry:{coordinates:[[D.geometry.coordinates[0][0][0],D.geometry.coordinates[0][0][1]],[D.geometry.coordinates[0][1][0],D.geometry.coordinates[0][1][1]]],type:m.geojsonTypes.LINE_STRING}}),3===Y))return;return F(D)}},z.onTrash=function(T){this.deleteFeature([T.polygon.id],{silent:!0}),this.changeMode(m.modes.SIMPLE_SELECT)},Ae.exports=z},5073:(Ae,J,U)=>{Ae.exports={simple_select:U(3313),direct_select:U(4261),draw_point:U(7182),draw_polygon:U(7615),draw_line_string:U(3070)}},3083:(Ae,J,U)=>{const V=Ae.exports=U(2245);V.prototype.onSetup=function(){},V.prototype.onDrag=function(){},V.prototype.onClick=function(){},V.prototype.onMouseMove=function(){},V.prototype.onMouseDown=function(){},V.prototype.onMouseUp=function(){},V.prototype.onMouseOut=function(){},V.prototype.onKeyUp=function(){},V.prototype.onKeyDown=function(){},V.prototype.onTouchStart=function(){},V.prototype.onTouchMove=function(){},V.prototype.onTouchEnd=function(){},V.prototype.onTap=function(){},V.prototype.onStop=function(){},V.prototype.onTrash=function(){},V.prototype.onCombineFeature=function(){},V.prototype.onUncombineFeature=function(){},V.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")}},2245:(Ae,J,U)=>{const V=U(1319),X=U(2447),m=U(4158),$=U(4479),G=U(5165),z=U(5315),T=Ae.exports=function(D){this.map=D.map,this.drawConfig=JSON.parse(JSON.stringify(D.options||{})),this._ctx=D};T.prototype.setSelected=function(D){return this._ctx.store.setSelected(D)},T.prototype.setSelectedCoordinates=function(D){this._ctx.store.setSelectedCoordinates(D),D.reduce((F,Z)=>(void 0===F[Z.feature_id]&&(F[Z.feature_id]=!0,this._ctx.store.get(Z.feature_id).changed()),F),{})},T.prototype.getSelected=function(){return this._ctx.store.getSelected()},T.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},T.prototype.isSelected=function(D){return this._ctx.store.isSelected(D)},T.prototype.getFeature=function(D){return this._ctx.store.get(D)},T.prototype.select=function(D){return this._ctx.store.select(D)},T.prototype.deselect=function(D){return this._ctx.store.deselect(D)},T.prototype.deleteFeature=function(D,F={}){return this._ctx.store.delete(D,F)},T.prototype.addFeature=function(D){return this._ctx.store.add(D)},T.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},T.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},T.prototype.setActionableState=function(D={}){return this._ctx.events.actionable({trash:D.trash||!1,combineFeatures:D.combineFeatures||!1,uncombineFeatures:D.uncombineFeatures||!1})},T.prototype.changeMode=function(D,F={},Z={}){return this._ctx.events.changeMode(D,F,Z)},T.prototype.updateUIClasses=function(D){return this._ctx.ui.queueMapClasses(D)},T.prototype.activateUIButton=function(D){return this._ctx.ui.setActiveButton(D)},T.prototype.featuresAt=function(D,F,Z="click"){if("click"!==Z&&"touch"!==Z)throw new Error("invalid buffer type");return X[Z](D,F,this._ctx)},T.prototype.newFeature=function(D){const F=D.geometry.type;return F===V.geojsonTypes.POINT?new m(this._ctx,D):F===V.geojsonTypes.LINE_STRING?new $(this._ctx,D):F===V.geojsonTypes.POLYGON?new G(this._ctx,D):new z(this._ctx,D)},T.prototype.isInstanceOf=function(D,F){if(D===V.geojsonTypes.POINT)return F instanceof m;if(D===V.geojsonTypes.LINE_STRING)return F instanceof $;if(D===V.geojsonTypes.POLYGON)return F instanceof G;if("MultiFeature"===D)return F instanceof z;throw new Error(`Unknown feature class: ${D}`)},T.prototype.doRender=function(D){return this._ctx.store.featureChanged(D)}},3595:(Ae,J,U)=>{const V=U(3083),X={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},m=Object.keys(X);Ae.exports=function($){const G=Object.keys($);return function(z,T={}){let D={};const F=G.reduce((Y,ie)=>(Y[ie]=$[ie],Y),new V(z));return{start:function(){D=F.onSetup(T),m.forEach(Y=>{const ie=X[Y];let me=()=>!1;$[ie]&&(me=()=>!0),this.on(Y,me,function Z(Y){return function(ie){F[Y](D,ie)}}(ie))})},stop:function(){F.onStop(D)},trash:function(){F.onTrash(D)},combineFeatures:function(){F.onCombineFeatures(D)},uncombineFeatures:function(){F.onUncombineFeatures(D)},render:function(Y,ie){F.toDisplayFeatures(D,Y,ie)}}}}},3313:(Ae,J,U)=>{const V=U(8747),X=U(4840),m=U(2120),$=U(6330),G=U(4054),z=U(3905),T=U(1319),D={onSetup:function(F){const Z={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoveing:!1,canDragMove:!1,initiallySelectedFeatureIds:F.featureIds||[]};return this.setSelected(Z.initiallySelectedFeatureIds.filter(Y=>void 0!==this.getFeature(Y))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),Z},fireUpdate:function(){this.map.fire(T.events.UPDATE,{action:T.updateActions.MOVE,features:this.getSelected().map(F=>F.toGeoJSON())})},fireActionable:function(){const F=this.getSelected(),Z=F.filter(se=>this.isInstanceOf("MultiFeature",se));let Y=!1;if(F.length>1){Y=!0;const se=F[0].type.replace("Multi","");F.forEach(_e=>{_e.type.replace("Multi","")!==se&&(Y=!1)})}this.setActionableState({combineFeatures:Y,uncombineFeatures:Z.length>0,trash:F.length>0})},getUniqueIds:function(F){return F.length?F.map(Y=>Y.properties.id).filter(Y=>void 0!==Y).reduce((Y,ie)=>(Y.add(ie),Y),new $).values():[]},stopExtendedInteractions:function(F){F.boxSelectElement&&(F.boxSelectElement.parentNode&&F.boxSelectElement.parentNode.removeChild(F.boxSelectElement),F.boxSelectElement=null),this.map.dragPan.enable(),F.boxSelecting=!1,F.canBoxSelect=!1,F.dragMoving=!1,F.canDragMove=!1},onStop:function(){G.enable(this)},onMouseMove:function(F){return this.stopExtendedInteractions(F)},onMouseOut:function(F){if(F.dragMoving)return this.fireUpdate()}};D.onTap=D.onClick=function(F,Z){return V.noTarget(Z)?this.clickAnywhere(F,Z):V.isOfMetaType(T.meta.VERTEX)(Z)?this.clickOnVertex(F,Z):V.isFeature(Z)?this.clickOnFeature(F,Z):void 0},D.clickAnywhere=function(F){const Z=this.getSelectedIds();Z.length&&(this.clearSelectedFeatures(),Z.forEach(Y=>this.doRender(Y))),G.enable(this),this.stopExtendedInteractions(F)},D.clickOnVertex=function(F,Z){this.changeMode(T.modes.DIRECT_SELECT,{featureId:Z.featureTarget.properties.parent,coordPath:Z.featureTarget.properties.coord_path,startPos:Z.lngLat}),this.updateUIClasses({mouse:T.cursors.MOVE})},D.startOnActiveFeature=function(F,Z){this.stopExtendedInteractions(F),this.map.dragPan.disable(),this.doRender(Z.featureTarget.properties.id),F.canDragMove=!0,F.dragMoveLocation=Z.lngLat},D.clickOnFeature=function(F,Z){G.disable(this),this.stopExtendedInteractions(F);const Y=V.isShiftDown(Z),ie=this.getSelectedIds(),me=Z.featureTarget.properties.id,se=this.isSelected(me);if(!Y&&se&&this.getFeature(me).type!==T.geojsonTypes.POINT)return this.changeMode(T.modes.DIRECT_SELECT,{featureId:me});se&&Y?(this.deselect(me),this.updateUIClasses({mouse:T.cursors.POINTER}),1===ie.length&&G.enable(this)):!se&&Y?(this.select(me),this.updateUIClasses({mouse:T.cursors.MOVE})):!se&&!Y&&(ie.forEach(_e=>this.doRender(_e)),this.setSelected(me),this.updateUIClasses({mouse:T.cursors.MOVE})),this.doRender(me)},D.onMouseDown=function(F,Z){return V.isActiveFeature(Z)?this.startOnActiveFeature(F,Z):this.drawConfig.boxSelect&&V.isShiftMousedown(Z)?this.startBoxSelect(F,Z):void 0},D.startBoxSelect=function(F,Z){this.stopExtendedInteractions(F),this.map.dragPan.disable(),F.boxSelectStartLocation=X(Z.originalEvent,this.map.getContainer()),F.canBoxSelect=!0},D.onTouchStart=function(F,Z){if(V.isActiveFeature(Z))return this.startOnActiveFeature(F,Z)},D.onDrag=function(F,Z){return F.canDragMove?this.dragMove(F,Z):this.drawConfig.boxSelect&&F.canBoxSelect?this.whileBoxSelect(F,Z):void 0},D.whileBoxSelect=function(F,Z){F.boxSelecting=!0,this.updateUIClasses({mouse:T.cursors.ADD}),F.boxSelectElement||(F.boxSelectElement=document.createElement("div"),F.boxSelectElement.classList.add(T.classes.BOX_SELECT),this.map.getContainer().appendChild(F.boxSelectElement));const Y=X(Z.originalEvent,this.map.getContainer()),ie=Math.min(F.boxSelectStartLocation.x,Y.x),me=Math.max(F.boxSelectStartLocation.x,Y.x),se=Math.min(F.boxSelectStartLocation.y,Y.y),_e=Math.max(F.boxSelectStartLocation.y,Y.y),Me=`translate(${ie}px, ${se}px)`;F.boxSelectElement.style.transform=Me,F.boxSelectElement.style.WebkitTransform=Me,F.boxSelectElement.style.width=me-ie+"px",F.boxSelectElement.style.height=_e-se+"px"},D.dragMove=function(F,Z){F.dragMoving=!0,Z.originalEvent.stopPropagation();const Y={lng:Z.lngLat.lng-F.dragMoveLocation.lng,lat:Z.lngLat.lat-F.dragMoveLocation.lat};z(this.getSelected(),Y),F.dragMoveLocation=Z.lngLat},D.onMouseUp=function(F,Z){if(F.dragMoving)this.fireUpdate();else if(F.boxSelecting){const Y=[F.boxSelectStartLocation,X(Z.originalEvent,this.map.getContainer())],ie=this.featuresAt(null,Y,"click"),me=this.getUniqueIds(ie).filter(se=>!this.isSelected(se));me.length&&(this.select(me),me.forEach(se=>this.doRender(se)),this.updateUIClasses({mouse:T.cursors.MOVE}))}this.stopExtendedInteractions(F)},D.toDisplayFeatures=function(F,Z,Y){Z.properties.active=this.isSelected(Z.properties.id)?T.activeStates.ACTIVE:T.activeStates.INACTIVE,Y(Z),this.fireActionable(),Z.properties.active===T.activeStates.ACTIVE&&Z.geometry.type!==T.geojsonTypes.POINT&&m(Z).forEach(Y)},D.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},D.onCombineFeatures=function(){const F=this.getSelected();if(0===F.length||F.length<2)return;const Z=[],Y=[],ie=F[0].type.replace("Multi","");for(let me=0;me<F.length;me++){const se=F[me];if(se.type.replace("Multi","")!==ie)return;se.type.includes("Multi")?se.getCoordinates().forEach(_e=>{Z.push(_e)}):Z.push(se.getCoordinates()),Y.push(se.toGeoJSON())}if(Y.length>1){const me=this.newFeature({type:T.geojsonTypes.FEATURE,properties:Y[0].properties,geometry:{type:`Multi${ie}`,coordinates:Z}});this.addFeature(me),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([me.id]),this.map.fire(T.events.COMBINE_FEATURES,{createdFeatures:[me.toGeoJSON()],deletedFeatures:Y})}this.fireActionable()},D.onUncombineFeatures=function(){const F=this.getSelected();if(0===F.length)return;const Z=[],Y=[];for(let ie=0;ie<F.length;ie++){const me=F[ie];this.isInstanceOf("MultiFeature",me)&&(me.getFeatures().forEach(se=>{this.addFeature(se),se.properties=me.properties,Z.push(se.toGeoJSON()),this.select([se.id])}),this.deleteFeature(me.id,{silent:!0}),Y.push(me.toGeoJSON()))}Z.length>1&&this.map.fire(T.events.UNCOMBINE_FEATURES,{createdFeatures:Z,deletedFeatures:Y}),this.fireActionable()},Ae.exports=D},9043:(Ae,J,U)=>{const V=U(4703),X=U(1319),m={defaultMode:X.modes.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:U(6313),modes:U(5073),controls:{},userProperties:!1},$={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},G={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function z(T,D){return T.map(F=>F.source?F:V(F,{id:`${F.id}.${D}`,source:"hot"===D?X.sources.HOT:X.sources.COLD}))}Ae.exports=function(T={}){let D=V(T);return T.controls||(D.controls={}),D.controls=V(!1===T.displayControlsDefault?G:$,T.controls),D=V(m,D),D.styles=z(D.styles,"cold").concat(z(D.styles,"hot")),D}},1300:(Ae,J,U)=>{const V=U(1319);Ae.exports=function(){const m=this;if(!m.ctx.map||void 0===m.ctx.map.getSource(V.sources.HOT))return Y();const G=m.ctx.events.currentModeName();m.ctx.ui.queueMapClasses({mode:G});let z=[],T=[];m.isDirty?T=m.getAllIds():(z=m.getChangedIds().filter(ie=>void 0!==m.get(ie)),T=m.sources.hot.filter(ie=>ie.properties.id&&-1===z.indexOf(ie.properties.id)&&void 0!==m.get(ie.properties.id)).map(ie=>ie.properties.id)),m.sources.hot=[];const D=m.sources.cold.length;m.sources.cold=m.isDirty?[]:m.sources.cold.filter(ie=>-1===z.indexOf(ie.properties.id||ie.properties.parent));const F=D!==m.sources.cold.length||T.length>0;function Z(ie,me){const _e=m.get(ie).internal(G);m.ctx.events.currentModeRender(_e,Me=>{m.sources[me].push(Me)})}if(z.forEach(ie=>Z(ie,"hot")),T.forEach(ie=>Z(ie,"cold")),F&&m.ctx.map.getSource(V.sources.COLD).setData({type:V.geojsonTypes.FEATURE_COLLECTION,features:m.sources.cold}),m.ctx.map.getSource(V.sources.HOT).setData({type:V.geojsonTypes.FEATURE_COLLECTION,features:m.sources.hot}),m._emitSelectionChange&&(m.ctx.map.fire(V.events.SELECTION_CHANGE,{features:m.getSelected().map(ie=>ie.toGeoJSON()),points:m.getSelectedCoordinates().map(ie=>({type:V.geojsonTypes.FEATURE,properties:{},geometry:{type:V.geojsonTypes.POINT,coordinates:ie.coordinates}}))}),m._emitSelectionChange=!1),m._deletedFeaturesToEmit.length){const ie=m._deletedFeaturesToEmit.map(me=>me.toGeoJSON());m._deletedFeaturesToEmit=[],m.ctx.map.fire(V.events.DELETE,{features:ie})}function Y(){m.isDirty=!1,m.clearChangedIds()}Y(),m.ctx.map.fire(V.events.RENDER,{})}},1726:(Ae,J,U)=>{const V=U(5262),X=U(2152),m=U(2605),$=U(1319),G=U(4703);Ae.exports=function(z){let T=null,D=null;const F={onRemove:function(){return z.map.off("load",F.connect),clearInterval(D),F.removeLayers(),z.store.restoreMapConfig(),z.ui.removeButtons(),z.events.removeEventListeners(),z.ui.clearMapClasses(),z.map=null,z.container=null,z.store=null,T&&T.parentNode&&T.parentNode.removeChild(T),T=null,this},connect:function(){z.map.off("load",F.connect),clearInterval(D),F.addLayers(),z.store.storeMapConfig(),z.events.addEventListeners()},onAdd:function(Z){{const Y=Z.fire;Z.fire=function(ie,me){let se=arguments;return 1===Y.length&&1!==arguments.length&&(se=[G({},{type:ie},me)]),Y.apply(Z,se)}}return z.map=Z,z.events=V(z),z.ui=m(z),z.container=Z.getContainer(),z.store=new X(z),T=z.ui.addButtons(),z.options.boxSelect&&(Z.boxZoom.disable(),Z.dragPan.disable(),Z.dragPan.enable()),Z.loaded()?F.connect():(Z.on("load",F.connect),D=setInterval(()=>{Z.loaded()&&F.connect()},16)),z.events.start(),T},addLayers:function(){z.map.addSource($.sources.COLD,{data:{type:$.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),z.map.addSource($.sources.HOT,{data:{type:$.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),z.options.styles.forEach(Z=>{z.map.addLayer(Z)}),z.store.setDirty(!0),z.store.render()},removeLayers:function(){z.options.styles.forEach(Z=>{z.map.getLayer(Z.id)&&z.map.removeLayer(Z.id)}),z.map.getSource($.sources.COLD)&&z.map.removeSource($.sources.COLD),z.map.getSource($.sources.HOT)&&z.map.removeSource($.sources.HOT)}};return z.setup=F,F}},2152:(Ae,J,U)=>{const V=U(5479),X=U(859),m=U(6330),$=U(1300),G=U(1319).interactions,z=Ae.exports=function(D){this._features={},this._featureIds=new m,this._selectedFeatureIds=new m,this._selectedCoordinates=[],this._changedFeatureIds=new m,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=D,this.sources={hot:[],cold:[]},this.render=V($,16,this),this.isDirty=!1};function T(D){const F=this._selectedCoordinates.filter(Z=>this._selectedFeatureIds.has(Z.feature_id));this._selectedCoordinates.length!==F.length&&!D.silent&&(this._emitSelectionChange=!0),this._selectedCoordinates=F}z.prototype.createRenderBatch=function(){const D=this.render;let F=0;return this.render=function(){F++},()=>{this.render=D,F>0&&this.render()}},z.prototype.setDirty=function(){return this.isDirty=!0,this},z.prototype.featureChanged=function(D){return this._changedFeatureIds.add(D),this},z.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},z.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},z.prototype.getAllIds=function(){return this._featureIds.values()},z.prototype.add=function(D){return this.featureChanged(D.id),this._features[D.id]=D,this._featureIds.add(D.id),this},z.prototype.delete=function(D,F={}){return X(D).forEach(Z=>{!this._featureIds.has(Z)||(this._featureIds.delete(Z),this._selectedFeatureIds.delete(Z),F.silent||-1===this._deletedFeaturesToEmit.indexOf(this._features[Z])&&this._deletedFeaturesToEmit.push(this._features[Z]),delete this._features[Z],this.isDirty=!0)}),T.call(this,F),this},z.prototype.get=function(D){return this._features[D]},z.prototype.getAll=function(){return Object.keys(this._features).map(D=>this._features[D])},z.prototype.select=function(D,F={}){return X(D).forEach(Z=>{this._selectedFeatureIds.has(Z)||(this._selectedFeatureIds.add(Z),this._changedFeatureIds.add(Z),F.silent||(this._emitSelectionChange=!0))}),this},z.prototype.deselect=function(D,F={}){return X(D).forEach(Z=>{!this._selectedFeatureIds.has(Z)||(this._selectedFeatureIds.delete(Z),this._changedFeatureIds.add(Z),F.silent||(this._emitSelectionChange=!0))}),T.call(this,F),this},z.prototype.clearSelected=function(D={}){return this.deselect(this._selectedFeatureIds.values(),{silent:D.silent}),this},z.prototype.setSelected=function(D,F={}){return D=X(D),this.deselect(this._selectedFeatureIds.values().filter(Z=>-1===D.indexOf(Z)),{silent:F.silent}),this.select(D.filter(Z=>!this._selectedFeatureIds.has(Z)),{silent:F.silent}),this},z.prototype.setSelectedCoordinates=function(D){return this._selectedCoordinates=D,this._emitSelectionChange=!0,this},z.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},z.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},z.prototype.getSelected=function(){return this._selectedFeatureIds.values().map(D=>this.get(D))},z.prototype.getSelectedCoordinates=function(){return this._selectedCoordinates.map(F=>({coordinates:this.get(F.feature_id).getCoordinate(F.coord_path)}))},z.prototype.isSelected=function(D){return this._selectedFeatureIds.has(D)},z.prototype.setFeatureProperty=function(D,F,Z){this.get(D).setProperty(F,Z),this.featureChanged(D)},z.prototype.storeMapConfig=function(){G.forEach(D=>{this.ctx.map[D]&&(this._mapInitialConfig[D]=this.ctx.map[D].isEnabled())})},z.prototype.restoreMapConfig=function(){Object.keys(this._mapInitialConfig).forEach(D=>{this._mapInitialConfig[D]?this.ctx.map[D].enable():this.ctx.map[D].disable()})},z.prototype.getInitialConfigValue=function(D){return void 0===this._mapInitialConfig[D]||this._mapInitialConfig[D]}},2605:(Ae,J,U)=>{const V=U(4703),X=U(1319),m=["mode","feature","mouse"];Ae.exports=function($){const G={};let z=null,T={mode:null,feature:null,mouse:null},D={mode:null,feature:null,mouse:null};function Z(Ne){D=V(D,Ne)}function Y(){if(!$.container)return;const Ne=[],Ze=[];m.forEach(je=>{D[je]!==T[je]&&(Ne.push(`${je}-${T[je]}`),null!==D[je]&&Ze.push(`${je}-${D[je]}`))}),Ne.length>0&&$.container.classList.remove.apply($.container.classList,Ne),Ze.length>0&&$.container.classList.add.apply($.container.classList,Ze),T=V(T,D)}function ie(Ne,Ze={}){const je=document.createElement("button");return je.className=`${X.classes.CONTROL_BUTTON} ${Ze.className}`,je.setAttribute("title",Ze.title),Ze.container.appendChild(je),je.addEventListener("click",Ee=>{Ee.preventDefault(),Ee.stopPropagation(),Ee.target!==z?(se(Ne),Ze.onActivate()):me()},!0),je}function me(){!z||(z.classList.remove(X.classes.ACTIVE_BUTTON),z=null)}function se(Ne){me();const Ze=G[Ne];!Ze||Ze&&"trash"!==Ne&&(Ze.classList.add(X.classes.ACTIVE_BUTTON),z=Ze)}return{setActiveButton:se,queueMapClasses:Z,updateMapClasses:Y,clearMapClasses:function F(){Z({mode:null,feature:null,mouse:null}),Y()},addButtons:function _e(){const Ne=$.options.controls,Ze=document.createElement("div");return Ze.className=`${X.classes.CONTROL_GROUP} ${X.classes.CONTROL_BASE}`,Ne&&(Ne[X.types.LINE]&&(G[X.types.LINE]=ie(X.types.LINE,{container:Ze,className:X.classes.CONTROL_BUTTON_LINE,title:"LineString tool "+($.options.keybindings?"(l)":""),onActivate:()=>$.events.changeMode(X.modes.DRAW_LINE_STRING)})),Ne[X.types.POLYGON]&&(G[X.types.POLYGON]=ie(X.types.POLYGON,{container:Ze,className:X.classes.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+($.options.keybindings?"(p)":""),onActivate:()=>$.events.changeMode(X.modes.DRAW_POLYGON)})),Ne[X.types.POINT]&&(G[X.types.POINT]=ie(X.types.POINT,{container:Ze,className:X.classes.CONTROL_BUTTON_POINT,title:"Marker tool "+($.options.keybindings?"(m)":""),onActivate:()=>$.events.changeMode(X.modes.DRAW_POINT)})),Ne.trash&&(G.trash=ie("trash",{container:Ze,className:X.classes.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:()=>{$.events.trash()}})),Ne.combine_features&&(G.combine_features=ie("combineFeatures",{container:Ze,className:X.classes.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:()=>{$.events.combineFeatures()}})),Ne.uncombine_features&&(G.uncombine_features=ie("uncombineFeatures",{container:Ze,className:X.classes.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:()=>{$.events.uncombineFeatures()}}))),Ze},removeButtons:function Me(){Object.keys(G).forEach(Ne=>{const Ze=G[Ne];Ze.parentNode&&Ze.parentNode.removeChild(Ze),delete G[Ne]})}}}},8714:Ae=>{Ae.exports=function J(U){switch(U&&U.type||null){case"FeatureCollection":return U.features=U.features.reduce(function(V,X){return V.concat(J(X))},[]),U;case"Feature":return U.geometry?J(U.geometry).map(function(V){var X={type:"Feature",properties:JSON.parse(JSON.stringify(U.properties)),geometry:V};return void 0!==U.id&&(X.id=U.id),X}):U;case"MultiPoint":return U.coordinates.map(function(V){return{type:"Point",coordinates:V}});case"MultiPolygon":return U.coordinates.map(function(V){return{type:"Polygon",coordinates:V}});case"MultiLineString":return U.coordinates.map(function(V){return{type:"LineString",coordinates:V}});case"GeometryCollection":return U.geometries.map(J).reduce(function(V,X){return V.concat(X)},[]);case"Point":case"Polygon":case"LineString":return[U]}}},4987:function(Ae){Ae.exports=function(){"use strict";var J,U,V;function X(m,$){if(J)if(U){var G="var sharedChunk = {}; ("+J+")(sharedChunk); ("+U+")(sharedChunk);",z={};J(z),V=$(z),typeof window<"u"&&(V.workerUrl=window.URL.createObjectURL(new Blob([G],{type:"text/javascript"})))}else U=$;else J=$}return X(0,function(m){function $(a,l){return a(l={exports:{}},l.exports),l.exports}var G=z;function z(a,l,c,y){this.cx=3*a,this.bx=3*(c-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(y-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=y,this.p2x=c,this.p2y=y}z.prototype.sampleCurveX=function(a){return((this.ax*a+this.bx)*a+this.cx)*a},z.prototype.sampleCurveY=function(a){return((this.ay*a+this.by)*a+this.cy)*a},z.prototype.sampleCurveDerivativeX=function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},z.prototype.solveCurveX=function(a,l){var c,y,w,E,C;for(void 0===l&&(l=1e-6),w=a,C=0;C<8;C++){if(E=this.sampleCurveX(w)-a,Math.abs(E)<l)return w;var N=this.sampleCurveDerivativeX(w);if(Math.abs(N)<1e-6)break;w-=E/N}if((w=a)<(c=0))return c;if(w>(y=1))return y;for(;c<y;){if(E=this.sampleCurveX(w),Math.abs(E-a)<l)return w;a>E?c=w:y=w,w=.5*(y-c)+c}return w},z.prototype.solve=function(a,l){return this.sampleCurveY(this.solveCurveX(a,l))};var T=D;function D(a,l){this.x=a,this.y=l}D.prototype={clone:function(){return new D(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,l){return this.clone()._rotateAround(a,l)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var l=a.x-this.x,c=a.y-this.y;return l*l+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,l){return Math.atan2(this.x*l-this.y*a,this.x*a+this.y*l)},_matMult:function(a){var l=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=l,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var l=Math.cos(a),c=Math.sin(a),y=c*this.x+l*this.y;return this.x=l*this.x-c*this.y,this.y=y,this},_rotateAround:function(a,l){var c=Math.cos(a),y=Math.sin(a),w=l.y+y*(this.x-l.x)+c*(this.y-l.y);return this.x=l.x+c*(this.x-l.x)-y*(this.y-l.y),this.y=w,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},D.convert=function(a){return a instanceof D?a:Array.isArray(a)?new D(a[0],a[1]):a};var F=typeof self<"u"?self:{},Z=Math.pow(2,53)-1;function Y(a,l,c,y){var w=new G(a,l,c,y);return function(E){return w.solve(E)}}var ie=Y(.25,.1,.25,1);function me(a,l,c){return Math.min(c,Math.max(l,a))}function se(a,l,c){var y=c-l,w=((a-l)%y+y)%y+l;return w===l?c:w}function _e(a){for(var l=[],c=arguments.length-1;c-- >0;)l[c]=arguments[c+1];for(var y=0,w=l;y<w.length;y+=1){var E=w[y];for(var C in E)a[C]=E[C]}return a}var Me=1;function Ne(){return Me++}function Ze(){return function a(l){return l?(l^16*Math.random()>>l/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,a)}()}function je(a){return!!a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)}function Ee(a,l){a.forEach(function(c){l[c]&&(l[c]=l[c].bind(l))})}function Je(a,l){return-1!==a.indexOf(l,a.length-l.length)}function nt(a,l,c){var y={};for(var w in a)y[w]=l.call(c||this,a[w],w,a);return y}function Ct(a,l,c){var y={};for(var w in a)l.call(c||this,a[w],w,a)&&(y[w]=a[w]);return y}function Ue(a){return Array.isArray(a)?a.map(Ue):"object"==typeof a&&a?nt(a,Ue):a}var A={};function L(a){A[a]||(typeof console<"u"&&console.warn(a),A[a]=!0)}function B(a,l,c){return(c.y-a.y)*(l.x-a.x)>(l.y-a.y)*(c.x-a.x)}function j(a){for(var l=0,c=0,y=a.length,w=y-1,E=void 0,C=void 0;c<y;w=c++)l+=((C=a[w]).x-(E=a[c]).x)*(E.y+C.y);return l}function ee(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function W(a){var l={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(y,w,E,C){var N=E||C;return l[w]=!N||N.toLowerCase(),""}),l["max-age"]){var c=parseInt(l["max-age"],10);isNaN(c)?delete l["max-age"]:l["max-age"]=c}return l}var ce=null;function We(a){if(null==ce){var l=a.navigator?a.navigator.userAgent:null;ce=!!a.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return ce}function ut(a){try{var l=F[a];return l.setItem("_mapbox_test_",1),l.removeItem("_mapbox_test_"),!0}catch{return!1}}var be,wt,bt,Ke,xt=F.performance&&F.performance.now?F.performance.now.bind(F.performance):Date.now.bind(Date),vn=F.requestAnimationFrame||F.mozRequestAnimationFrame||F.webkitRequestAnimationFrame||F.msRequestAnimationFrame,zt=F.cancelAnimationFrame||F.mozCancelAnimationFrame||F.webkitCancelAnimationFrame||F.msCancelAnimationFrame,Sn={now:xt,frame:function(a){var l=vn(a);return{cancel:function(){return zt(l)}}},getImageData:function(a,l){void 0===l&&(l=0);var c=F.document.createElement("canvas"),y=c.getContext("2d");if(!y)throw new Error("failed to create canvas 2d context");return c.width=a.width,c.height=a.height,y.drawImage(a,0,0,a.width,a.height),y.getImageData(-l,-l,a.width+2*l,a.height+2*l)},resolveURL:function(a){return be||(be=F.document.createElement("a")),be.href=a,be.href},hardwareConcurrency:F.navigator&&F.navigator.hardwareConcurrency||4,get devicePixelRatio(){return F.devicePixelRatio},get prefersReducedMotion(){return!!F.matchMedia&&(null==wt&&(wt=F.matchMedia("(prefers-reduced-motion: reduce)")),wt.matches)}},It={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},Cn={supported:!1,testSupport:function(a){!En&&Ke&&(Zn?Wt(a):bt=a)}},En=!1,Zn=!1;function Wt(a){var l=a.createTexture();a.bindTexture(a.TEXTURE_2D,l);try{if(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,Ke),a.isContextLost())return;Cn.supported=!0}catch{}a.deleteTexture(l),En=!0}F.document&&((Ke=F.document.createElement("img")).onload=function(){bt&&Wt(bt),bt=null,Zn=!0},Ke.onerror=function(){En=!0,bt=null},Ke.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Ce="01",Gn=function(a,l){this._transformRequestFn=a,this._customAccessToken=l,this._createSkuToken()};function ir(a){return 0===a.indexOf("mapbox:")}Gn.prototype._createSkuToken=function(){var a=function(){for(var l="",c=0;c<10;c++)l+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Ce,l].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt},Gn.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Gn.prototype.transformRequest=function(a,l){return this._transformRequestFn&&this._transformRequestFn(a,l)||{url:a}},Gn.prototype.normalizeStyleURL=function(a,l){if(!ir(a))return a;var c=Ot(a);return c.path="/styles/v1"+c.path,this._makeAPIURL(c,this._customAccessToken||l)},Gn.prototype.normalizeGlyphsURL=function(a,l){if(!ir(a))return a;var c=Ot(a);return c.path="/fonts/v1"+c.path,this._makeAPIURL(c,this._customAccessToken||l)},Gn.prototype.normalizeSourceURL=function(a,l){if(!ir(a))return a;var c=Ot(a);return c.path="/v4/"+c.authority+".json",c.params.push("secure"),this._makeAPIURL(c,this._customAccessToken||l)},Gn.prototype.normalizeSpriteURL=function(a,l,c,y){var w=Ot(a);return ir(a)?(w.path="/styles/v1"+w.path+"/sprite"+l+c,this._makeAPIURL(w,this._customAccessToken||y)):(w.path+=""+l+c,za(w))},Gn.prototype.normalizeTileURL=function(a,l){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!ir(a))return a;var c=Ot(a);c.path=c.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Sn.devicePixelRatio>=2||512===l?"@2x":"")+(Cn.supported?".webp":"$1")),c.path=c.path.replace(/^.+\/v4\//,"/"),c.path="/v4"+c.path;var y=this._customAccessToken||function(w){for(var E=0,C=w;E<C.length;E+=1){var N=C[E].match(/^access_token=(.*)$/);if(N)return N[1]}return null}(c.params)||It.ACCESS_TOKEN;return It.REQUIRE_ACCESS_TOKEN&&y&&this._skuToken&&c.params.push("sku="+this._skuToken),this._makeAPIURL(c,y)},Gn.prototype.canonicalizeTileURL=function(a,l){var c=Ot(a);if(!c.path.match(/(^\/v4\/)/)||!c.path.match(/\.[\w]+$/))return a;var y="mapbox://tiles/";y+=c.path.replace("/v4/","");var w=c.params;return l&&(w=w.filter(function(E){return!E.match(/^access_token=/)})),w.length&&(y+="?"+w.join("&")),y},Gn.prototype.canonicalizeTileset=function(a,l){for(var c=!!l&&ir(l),y=[],w=0,E=a.tiles||[];w<E.length;w+=1){var C=E[w];Gi(C)?y.push(this.canonicalizeTileURL(C,c)):y.push(C)}return y},Gn.prototype._makeAPIURL=function(a,l){var c="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",y=Ot(It.API_URL);if(a.protocol=y.protocol,a.authority=y.authority,"http"===a.protocol){var w=a.params.indexOf("secure");w>=0&&a.params.splice(w,1)}if("/"!==y.path&&(a.path=""+y.path+a.path),!It.REQUIRE_ACCESS_TOKEN)return za(a);if(!(l=l||It.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+c);if("s"===l[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+c);return a.params=a.params.filter(function(E){return-1===E.indexOf("access_token")}),a.params.push("access_token="+l),za(a)},Gn.prototype.setTransformRequest=function(a){this._transformRequestFn=a};var hi=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Gi(a){return hi.test(a)}var qt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ot(a){var l=a.match(qt);if(!l)throw new Error("Unable to parse URL object");return{protocol:l[1],authority:l[2],path:l[3]||"/",params:l[4]?l[4].split("&"):[]}}function za(a){var l=a.params.length?"?"+a.params.join("&"):"";return a.protocol+"://"+a.authority+a.path+l}function wa(a){if(!a)return null;var l=a.split(".");if(!l||3!==l.length)return null;try{return JSON.parse(decodeURIComponent(F.atob(l[1]).split("").map(function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var li=function(a){this.type=a,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};li.prototype.getStorageKey=function(a){var l,c=wa(It.ACCESS_TOKEN);return l=c&&c.u?F.btoa(encodeURIComponent(c.u).replace(/%([0-9A-F]{2})/g,function(y,w){return String.fromCharCode(Number("0x"+w))})):It.ACCESS_TOKEN||"",a?"mapbox.eventData."+a+":"+l:"mapbox.eventData:"+l},li.prototype.fetchEventData=function(){var a=ut("localStorage"),l=this.getStorageKey(),c=this.getStorageKey("uuid");if(a)try{var y=F.localStorage.getItem(l);y&&(this.eventData=JSON.parse(y));var w=F.localStorage.getItem(c);w&&(this.anonId=w)}catch{L("Unable to read from LocalStorage")}},li.prototype.saveEventData=function(){var a=ut("localStorage"),l=this.getStorageKey(),c=this.getStorageKey("uuid");if(a)try{F.localStorage.setItem(c,this.anonId),Object.keys(this.eventData).length>=1&&F.localStorage.setItem(l,JSON.stringify(this.eventData))}catch{L("Unable to write to LocalStorage")}},li.prototype.processRequests=function(a){},li.prototype.postEvent=function(a,l,c,y){var w=this;if(It.EVENTS_URL){var E=Ot(It.EVENTS_URL);E.params.push("access_token="+(y||It.ACCESS_TOKEN||""));var C={event:this.type,created:new Date(a).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.15.3",skuId:Ce,userId:this.anonId},N=l?_e(C,l):C,q={url:za(E),headers:{"Content-Type":"text/plain"},body:JSON.stringify([N])};this.pendingRequest=oe(q,function(Q){w.pendingRequest=null,c(Q),w.saveEventData(),w.processRequests(y)})}},li.prototype.queueRequest=function(a,l){this.queue.push(a),this.processRequests(l)};var qr,Ys,Qa=function(a){function l(){a.call(this,"map.load"),this.success={},this.skuToken=""}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.postMapLoadEvent=function(c,y,w,E){this.skuToken=w,(It.EVENTS_URL&&E||It.ACCESS_TOKEN&&Array.isArray(c)&&c.some(function(C){return ir(C)||Gi(C)}))&&this.queueRequest({id:y,timestamp:Date.now()},E)},l.prototype.processRequests=function(c){var y=this;if(!this.pendingRequest&&0!==this.queue.length){var w=this.queue.shift(),E=w.id,C=w.timestamp;E&&this.success[E]||(this.anonId||this.fetchEventData(),je(this.anonId)||(this.anonId=Ze()),this.postEvent(C,{skuToken:this.skuToken},function(N){N||E&&(y.success[E]=!0)},c))}},l}(li),Mo=new(function(a){function l(c){a.call(this,"appUserTurnstile"),this._customAccessToken=c}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.postTurnstileEvent=function(c,y){It.EVENTS_URL&&It.ACCESS_TOKEN&&Array.isArray(c)&&c.some(function(w){return ir(w)||Gi(w)})&&this.queueRequest(Date.now(),y)},l.prototype.processRequests=function(c){var y=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var w=wa(It.ACCESS_TOKEN),E=w?w.u:It.ACCESS_TOKEN,C=E!==this.eventData.tokenU;je(this.anonId)||(this.anonId=Ze(),C=!0);var N=this.queue.shift();if(this.eventData.lastSuccess){var q=new Date(this.eventData.lastSuccess),Q=new Date(N),ne=(N-this.eventData.lastSuccess)/864e5;C=C||ne>=1||ne<-1||q.getDate()!==Q.getDate()}else C=!0;if(!C)return this.processRequests();this.postEvent(N,{"enabled.telemetry":!1},function(re){re||(y.eventData.lastSuccess=N,y.eventData.tokenU=E)},c)}},l}(li)),Ba=Mo.postTurnstileEvent.bind(Mo),fs=new Qa,io=fs.postMapLoadEvent.bind(fs),xa=500,oo=50;function wo(){F.caches&&!qr&&(qr=F.caches.open("mapbox-tiles"))}function Ml(a){var l=a.indexOf("?");return l<0?a:a.slice(0,l)}var Es,xo=1/0;function ur(){return null==Es&&(Es=F.OffscreenCanvas&&new F.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof F.createImageBitmap),Es}var Ol={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Ol);var pl=function(a){function l(c,y,w){401===y&&Gi(w)&&(c+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),a.call(this,c),this.status=y,this.url=w,this.name=this.constructor.name,this.message=c}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},l}(Error),Bs=ee()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===F.location.protocol?F.parent:F).location.href};function Oo(a,l){var c,y=new F.AbortController,w=new F.Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,referrer:Bs(),signal:y.signal}),E=!1,C=!1,N=(c=w.url).indexOf("sku=")>0&&Gi(c);"json"===a.type&&w.headers.set("Accept","application/json");var q=function(ne,re,ue){if(!C){if(ne&&"SecurityError"!==ne.message&&L(ne),re&&ue)return Q(re);var he=Date.now();F.fetch(w).then(function(Ie){if(Ie.ok){var Pe=N?Ie.clone():null;return Q(Ie,Pe,he)}return l(new pl(Ie.statusText,Ie.status,a.url))}).catch(function(Ie){20!==Ie.code&&l(new Error(Ie.message))})}},Q=function(ne,re,ue){("arrayBuffer"===a.type?ne.arrayBuffer():"json"===a.type?ne.json():ne.text()).then(function(he){C||(re&&ue&&function(Ie,Pe,qe){if(wo(),qr){var Be={status:Pe.status,statusText:Pe.statusText,headers:new F.Headers};Pe.headers.forEach(function(st,dt){return Be.headers.set(dt,st)});var it=W(Pe.headers.get("Cache-Control")||"");it["no-store"]||(it["max-age"]&&Be.headers.set("Expires",new Date(qe+1e3*it["max-age"]).toUTCString()),new Date(Be.headers.get("Expires")).getTime()-qe<42e4||function(st,dt){if(void 0===Ys)try{new Response(new ReadableStream),Ys=!0}catch{Ys=!1}Ys?dt(st.body):st.blob().then(dt)}(Pe,function(st){var dt=new F.Response(st,Be);wo(),qr&&qr.then(function(pt){return pt.put(Ml(Ie.url),dt)}).catch(function(pt){return L(pt.message)})}))}}(w,re,ue),E=!0,l(null,he,ne.headers.get("Cache-Control"),ne.headers.get("Expires")))}).catch(function(he){C||l(new Error(he.message))})};return N?function(ne,re){if(wo(),!qr)return re(null);var ue=Ml(ne.url);qr.then(function(he){he.match(ue).then(function(Ie){var Pe=function(qe){if(!qe)return!1;var Be=new Date(qe.headers.get("Expires")||0),it=W(qe.headers.get("Cache-Control")||"");return Be>Date.now()&&!it["no-cache"]}(Ie);he.delete(ue),Pe&&he.put(ue,Ie.clone()),re(null,Ie,Pe)}).catch(re)}).catch(re)}(w,q):q(null,null),{cancel:function(){C=!0,E||y.abort()}}}var hs,Kr,Xs=function(a,l){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){if(ee()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,l);if(!ee()){var c=a.url.substring(0,a.url.indexOf("://"));return(It.REGISTERED_PROTOCOLS[c]||Oo)(a,l)}}if(!(/^file:/.test(y=a.url)||/^file:/.test(Bs())&&!/^\w+:/.test(y))){if(F.fetch&&F.Request&&F.AbortController&&F.Request.prototype.hasOwnProperty("signal"))return Oo(a,l);if(ee()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,l,void 0,!0)}var y;return function(w,E){var C=new F.XMLHttpRequest;for(var N in C.open(w.method||"GET",w.url,!0),"arrayBuffer"===w.type&&(C.responseType="arraybuffer"),w.headers)C.setRequestHeader(N,w.headers[N]);return"json"===w.type&&(C.responseType="text",C.setRequestHeader("Accept","application/json")),C.withCredentials="include"===w.credentials,C.onerror=function(){E(new Error(C.statusText))},C.onload=function(){if((C.status>=200&&C.status<300||0===C.status)&&null!==C.response){var q=C.response;if("json"===w.type)try{q=JSON.parse(C.response)}catch(Q){return E(Q)}E(null,q,C.getResponseHeader("Cache-Control"),C.getResponseHeader("Expires"))}else E(new pl(C.statusText,C.status,w.url))},C.send(w.body),{cancel:function(){return C.abort()}}}(a,l)},zr=function(a,l){return Xs(_e(a,{type:"arrayBuffer"}),l)},oe=function(a,l){return Xs(_e(a,{method:"POST"}),l)},le="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";hs=[],Kr=0;var fe=function(a,l){if(Cn.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*"),Kr>=It.MAX_PARALLEL_IMAGE_REQUESTS){var c={requestParameters:a,callback:l,cancelled:!1,cancel:function(){this.cancelled=!0}};return hs.push(c),c}Kr++;var y=!1,w=function(){if(!y)for(y=!0,Kr--;hs.length&&Kr<It.MAX_PARALLEL_IMAGE_REQUESTS;){var C=hs.shift();C.cancelled||(C.cancel=fe(C.requestParameters,C.callback).cancel)}},E=zr(a,function(C,N,q,Q){var re,ue;w(),C?l(C):N&&(ur()?(re=l,ue=new F.Blob([new Uint8Array(N)],{type:"image/png"}),F.createImageBitmap(ue).then(function(he){re(null,he)}).catch(function(he){re(new Error("Could not load image because of "+he.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(ne,re,ue,he){var Ie=new F.Image,Pe=F.URL;Ie.onload=function(){re(null,Ie),Pe.revokeObjectURL(Ie.src),Ie.onload=null,F.requestAnimationFrame(function(){Ie.src=le})},Ie.onerror=function(){return re(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var qe=new F.Blob([new Uint8Array(ne)],{type:"image/png"});Ie.cacheControl=ue,Ie.expires=he,Ie.src=ne.byteLength?Pe.createObjectURL(qe):le}(N,l,q,Q))});return{cancel:function(){E.cancel(),w()}}};function ve(a,l,c){c[a]&&-1!==c[a].indexOf(l)||(c[a]=c[a]||[],c[a].push(l))}function Te(a,l,c){if(c&&c[a]){var y=c[a].indexOf(l);-1!==y&&c[a].splice(y,1)}}var $e=function(a,l){void 0===l&&(l={}),_e(this,l),this.type=a},Xe=function(a){function l(c,y){void 0===y&&(y={}),a.call(this,"error",_e({error:c},y))}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l}($e),He=function(){};He.prototype.on=function(a,l){return this._listeners=this._listeners||{},ve(a,l,this._listeners),this},He.prototype.off=function(a,l){return Te(a,l,this._listeners),Te(a,l,this._oneTimeListeners),this},He.prototype.once=function(a,l){return this._oneTimeListeners=this._oneTimeListeners||{},ve(a,l,this._oneTimeListeners),this},He.prototype.fire=function(a,l){"string"==typeof a&&(a=new $e(a,l||{}));var c=a.type;if(this.listens(c)){a.target=this;for(var y=0,w=this._listeners&&this._listeners[c]?this._listeners[c].slice():[];y<w.length;y+=1)w[y].call(this,a);for(var E=0,C=this._oneTimeListeners&&this._oneTimeListeners[c]?this._oneTimeListeners[c].slice():[];E<C.length;E+=1){var N=C[E];Te(c,N,this._oneTimeListeners),N.call(this,a)}var q=this._eventedParent;q&&(_e(a,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),q.fire(a))}else a instanceof Xe&&console.error(a.error);return this},He.prototype.listens=function(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)},He.prototype.setEventedParent=function(a,l){return this._eventedParent=a,this._eventedParentData=l,this};var xe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Fe=function(a,l,c,y){this.message=(a?a+": ":"")+c,y&&(this.identifier=y),null!=l&&l.__line__&&(this.line=l.__line__)};function Rt(a){var l=a.value;return l?[new Fe(a.key,l,"constants have been deprecated as of v8")]:[]}function Ft(a){for(var l=[],c=arguments.length-1;c-- >0;)l[c]=arguments[c+1];for(var y=0,w=l;y<w.length;y+=1){var E=w[y];for(var C in E)a[C]=E[C]}return a}function ct(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function Et(a){if(Array.isArray(a))return a.map(Et);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){var l={};for(var c in a)l[c]=Et(a[c]);return l}return ct(a)}var Zt=function(a){function l(c,y){a.call(this,y),this.message=y,this.key=c}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l}(Error),Jt=function(a,l){void 0===l&&(l=[]),this.parent=a,this.bindings={};for(var c=0,y=l;c<y.length;c+=1){var w=y[c];this.bindings[w[0]]=w[1]}};Jt.prototype.concat=function(a){return new Jt(this,a)},Jt.prototype.get=function(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(a+" not found in scope.")},Jt.prototype.has=function(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)};var hn={kind:"null"},St={kind:"number"},Ut={kind:"string"},Dt={kind:"boolean"},Hn={kind:"color"},Vn={kind:"object"},sn={kind:"value"},ri={kind:"collator"},In={kind:"formatted"},ui={kind:"resolvedImage"};function yi(a,l){return{kind:"array",itemType:a,N:l}}function Pr(a){if("array"===a.kind){var l=Pr(a.itemType);return"number"==typeof a.N?"array<"+l+", "+a.N+">":"value"===a.itemType.kind?"array":"array<"+l+">"}return a.kind}var Yr=[hn,St,Ut,Dt,Hn,In,Vn,yi(sn),ui];function Si(a,l){if("error"===l.kind)return null;if("array"===a.kind){if("array"===l.kind&&(0===l.N&&"value"===l.itemType.kind||!Si(a.itemType,l.itemType))&&("number"!=typeof a.N||a.N===l.N))return null}else{if(a.kind===l.kind)return null;if("value"===a.kind)for(var c=0,y=Yr;c<y.length;c+=1)if(!Si(y[c],l))return null}return"Expected "+Pr(a)+" but found "+Pr(l)+" instead."}function Gr(a,l){return l.some(function(c){return c.kind===a.kind})}function On(a,l){return l.some(function(c){return"null"===c?null===a:"array"===c?Array.isArray(a):"object"===c?a&&!Array.isArray(a)&&"object"==typeof a:c===typeof a})}var Bi=$(function(a,l){var c={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function y(N){return(N=Math.round(N))<0?0:N>255?255:N}function w(N){return y("%"===N[N.length-1]?parseFloat(N)/100*255:parseInt(N))}function E(N){return(q="%"===N[N.length-1]?parseFloat(N)/100:parseFloat(N))<0?0:q>1?1:q;var q}function C(N,q,Q){return Q<0?Q+=1:Q>1&&(Q-=1),6*Q<1?N+(q-N)*Q*6:2*Q<1?q:3*Q<2?N+(q-N)*(2/3-Q)*6:N}try{l.parseCSSColor=function(N){var q,Q=N.replace(/ /g,"").toLowerCase();if(Q in c)return c[Q].slice();if("#"===Q[0])return 4===Q.length?(q=parseInt(Q.substr(1),16))>=0&&q<=4095?[(3840&q)>>4|(3840&q)>>8,240&q|(240&q)>>4,15&q|(15&q)<<4,1]:null:7===Q.length&&(q=parseInt(Q.substr(1),16))>=0&&q<=16777215?[(16711680&q)>>16,(65280&q)>>8,255&q,1]:null;var ne=Q.indexOf("("),re=Q.indexOf(")");if(-1!==ne&&re+1===Q.length){var ue=Q.substr(0,ne),he=Q.substr(ne+1,re-(ne+1)).split(","),Ie=1;switch(ue){case"rgba":if(4!==he.length)return null;Ie=E(he.pop());case"rgb":return 3!==he.length?null:[w(he[0]),w(he[1]),w(he[2]),Ie];case"hsla":if(4!==he.length)return null;Ie=E(he.pop());case"hsl":if(3!==he.length)return null;var Pe=(parseFloat(he[0])%360+360)%360/360,qe=E(he[1]),Be=E(he[2]),it=Be<=.5?Be*(qe+1):Be+qe-Be*qe,st=2*Be-it;return[y(255*C(st,it,Pe+1/3)),y(255*C(st,it,Pe)),y(255*C(st,it,Pe-1/3)),Ie];default:return null}}return null}}catch{}}).parseCSSColor,Jn=function(a,l,c,y){void 0===y&&(y=1),this.r=a,this.g=l,this.b=c,this.a=y};Jn.parse=function(a){if(a){if(a instanceof Jn)return a;if("string"==typeof a){var l=Bi(a);if(l)return new Jn(l[0]/255*l[3],l[1]/255*l[3],l[2]/255*l[3],l[3])}}},Jn.prototype.toString=function(){var a=this.toArray(),l=a[1],c=a[2],y=a[3];return"rgba("+Math.round(a[0])+","+Math.round(l)+","+Math.round(c)+","+y+")"},Jn.prototype.toArray=function(){var a=this.a;return 0===a?[0,0,0,0]:[255*this.r/a,255*this.g/a,255*this.b/a,a]},Jn.black=new Jn(0,0,0,1),Jn.white=new Jn(1,1,1,1),Jn.transparent=new Jn(0,0,0,0),Jn.red=new Jn(1,0,0,1);var Eo=function(a,l,c){this.sensitivity=a?l?"variant":"case":l?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Eo.prototype.compare=function(a,l){return this.collator.compare(a,l)},Eo.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Ea=function(a,l,c,y,w){this.text=a,this.image=l,this.scale=c,this.fontStack=y,this.textColor=w},Hi=function(a){this.sections=a};Hi.fromString=function(a){return new Hi([new Ea(a,null,null,null,null)])},Hi.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(a){return 0!==a.text.length||a.image&&0!==a.image.name.length})},Hi.factory=function(a){return a instanceof Hi?a:Hi.fromString(a)},Hi.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(a){return a.text}).join("")},Hi.prototype.serialize=function(){for(var a=["format"],l=0,c=this.sections;l<c.length;l+=1){var y=c[l];if(y.image)a.push(["image",y.image.name]);else{a.push(y.text);var w={};y.fontStack&&(w["text-font"]=["literal",y.fontStack.split(",")]),y.scale&&(w["font-scale"]=y.scale),y.textColor&&(w["text-color"]=["rgba"].concat(y.textColor.toArray())),a.push(w)}}return a};var nr=function(a){this.name=a.name,this.available=a.available};function es(a,l,c,y){return"number"==typeof a&&a>=0&&a<=255&&"number"==typeof l&&l>=0&&l<=255&&"number"==typeof c&&c>=0&&c<=255?void 0===y||"number"==typeof y&&y>=0&&y<=1?null:"Invalid rgba value ["+[a,l,c,y].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof y?[a,l,c,y]:[a,l,c]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Hr(a){if(null===a||"string"==typeof a||"boolean"==typeof a||"number"==typeof a||a instanceof Jn||a instanceof Eo||a instanceof Hi||a instanceof nr)return!0;if(Array.isArray(a)){for(var l=0,c=a;l<c.length;l+=1)if(!Hr(c[l]))return!1;return!0}if("object"==typeof a){for(var y in a)if(!Hr(a[y]))return!1;return!0}return!1}function Mi(a){if(null===a)return hn;if("string"==typeof a)return Ut;if("boolean"==typeof a)return Dt;if("number"==typeof a)return St;if(a instanceof Jn)return Hn;if(a instanceof Eo)return ri;if(a instanceof Hi)return In;if(a instanceof nr)return ui;if(Array.isArray(a)){for(var l,c=a.length,y=0,w=a;y<w.length;y+=1){var E=Mi(w[y]);if(l){if(l===E)continue;l=sn;break}l=E}return yi(l||sn,c)}return Vn}function ps(a){var l=typeof a;return null===a?"":"string"===l||"number"===l||"boolean"===l?String(a):a instanceof Jn||a instanceof Hi||a instanceof nr?a.toString():JSON.stringify(a)}nr.prototype.toString=function(){return this.name},nr.fromString=function(a){return a?new nr({name:a,available:!1}):null},nr.prototype.serialize=function(){return["image",this.name]};var So=function(a,l){this.type=a,this.value=l};So.parse=function(a,l){if(2!==a.length)return l.error("'literal' expression requires exactly one argument, but found "+(a.length-1)+" instead.");if(!Hr(a[1]))return l.error("invalid value");var c=a[1],y=Mi(c),w=l.expectedType;return"array"!==y.kind||0!==y.N||!w||"array"!==w.kind||"number"==typeof w.N&&0!==w.N||(y=w),new So(y,c)},So.prototype.evaluate=function(){return this.value},So.prototype.eachChild=function(){},So.prototype.outputDefined=function(){return!0},So.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Jn?["rgba"].concat(this.value.toArray()):this.value instanceof Hi?this.value.serialize():this.value};var cn=function(a){this.name="ExpressionEvaluationError",this.message=a};cn.prototype.toJSON=function(){return this.message};var Co={string:Ut,number:St,boolean:Dt,object:Vn},Vo=function(a,l){this.type=a,this.args=l};Vo.parse=function(a,l){if(a.length<2)return l.error("Expected at least one argument.");var c,y=1,w=a[0];if("array"===w){var E,C;if(a.length>2){var N=a[1];if("string"!=typeof N||!(N in Co)||"object"===N)return l.error('The item type argument of "array" must be one of string, number, boolean',1);E=Co[N],y++}else E=sn;if(a.length>3){if(null!==a[2]&&("number"!=typeof a[2]||a[2]<0||a[2]!==Math.floor(a[2])))return l.error('The length argument to "array" must be a positive integer literal',2);C=a[2],y++}c=yi(E,C)}else c=Co[w];for(var q=[];y<a.length;y++){var Q=l.parse(a[y],y,sn);if(!Q)return null;q.push(Q)}return new Vo(c,q)},Vo.prototype.evaluate=function(a){for(var l=0;l<this.args.length;l++){var c=this.args[l].evaluate(a);if(!Si(this.type,Mi(c)))return c;if(l===this.args.length-1)throw new cn("Expected value to be of type "+Pr(this.type)+", but found "+Pr(Mi(c))+" instead.")}return null},Vo.prototype.eachChild=function(a){this.args.forEach(a)},Vo.prototype.outputDefined=function(){return this.args.every(function(a){return a.outputDefined()})},Vo.prototype.serialize=function(){var a=this.type,l=[a.kind];if("array"===a.kind){var c=a.itemType;if("string"===c.kind||"number"===c.kind||"boolean"===c.kind){l.push(c.kind);var y=a.N;("number"==typeof y||this.args.length>1)&&l.push(y)}}return l.concat(this.args.map(function(w){return w.serialize()}))};var Nn=function(a){this.type=In,this.sections=a};Nn.parse=function(a,l){if(a.length<2)return l.error("Expected at least one argument.");var c=a[1];if(!Array.isArray(c)&&"object"==typeof c)return l.error("First argument must be an image or text section.");for(var y=[],w=!1,E=1;E<=a.length-1;++E){var C=a[E];if(w&&"object"==typeof C&&!Array.isArray(C)){w=!1;var N=null;if(C["font-scale"]&&!(N=l.parse(C["font-scale"],1,St)))return null;var q=null;if(C["text-font"]&&!(q=l.parse(C["text-font"],1,yi(Ut))))return null;var Q=null;if(C["text-color"]&&!(Q=l.parse(C["text-color"],1,Hn)))return null;var ne=y[y.length-1];ne.scale=N,ne.font=q,ne.textColor=Q}else{var re=l.parse(a[E],1,sn);if(!re)return null;var ue=re.type.kind;if("string"!==ue&&"value"!==ue&&"null"!==ue&&"resolvedImage"!==ue)return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");w=!0,y.push({content:re,scale:null,font:null,textColor:null})}}return new Nn(y)},Nn.prototype.evaluate=function(a){return new Hi(this.sections.map(function(l){var c=l.content.evaluate(a);return Mi(c)===ui?new Ea("",c,null,null,null):new Ea(ps(c),null,l.scale?l.scale.evaluate(a):null,l.font?l.font.evaluate(a).join(","):null,l.textColor?l.textColor.evaluate(a):null)}))},Nn.prototype.eachChild=function(a){for(var l=0,c=this.sections;l<c.length;l+=1){var y=c[l];a(y.content),y.scale&&a(y.scale),y.font&&a(y.font),y.textColor&&a(y.textColor)}},Nn.prototype.outputDefined=function(){return!1},Nn.prototype.serialize=function(){for(var a=["format"],l=0,c=this.sections;l<c.length;l+=1){var y=c[l];a.push(y.content.serialize());var w={};y.scale&&(w["font-scale"]=y.scale.serialize()),y.font&&(w["text-font"]=y.font.serialize()),y.textColor&&(w["text-color"]=y.textColor.serialize()),a.push(w)}return a};var ja=function(a){this.type=ui,this.input=a};ja.parse=function(a,l){if(2!==a.length)return l.error("Expected two arguments.");var c=l.parse(a[1],1,Ut);return c?new ja(c):l.error("No image name provided.")},ja.prototype.evaluate=function(a){var l=this.input.evaluate(a),c=nr.fromString(l);return c&&a.availableImages&&(c.available=a.availableImages.indexOf(l)>-1),c},ja.prototype.eachChild=function(a){a(this.input)},ja.prototype.outputDefined=function(){return!1},ja.prototype.serialize=function(){return["image",this.input.serialize()]};var cr={"to-boolean":Dt,"to-color":Hn,"to-number":St,"to-string":Ut},R=function(a,l){this.type=a,this.args=l};R.parse=function(a,l){if(a.length<2)return l.error("Expected at least one argument.");var c=a[0];if(("to-boolean"===c||"to-string"===c)&&2!==a.length)return l.error("Expected one argument.");for(var y=cr[c],w=[],E=1;E<a.length;E++){var C=l.parse(a[E],E,sn);if(!C)return null;w.push(C)}return new R(y,w)},R.prototype.evaluate=function(a){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(a));if("color"===this.type.kind){for(var l,c,y=0,w=this.args;y<w.length;y+=1){if(c=null,(l=w[y].evaluate(a))instanceof Jn)return l;if("string"==typeof l){var E=a.parseColor(l);if(E)return E}else if(Array.isArray(l)&&!(c=l.length<3||l.length>4?"Invalid rbga value "+JSON.stringify(l)+": expected an array containing either three or four numeric values.":es(l[0],l[1],l[2],l[3])))return new Jn(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new cn(c||"Could not parse color from value '"+("string"==typeof l?l:String(JSON.stringify(l)))+"'")}if("number"===this.type.kind){for(var C=null,N=0,q=this.args;N<q.length;N+=1){if(null===(C=q[N].evaluate(a)))return 0;var Q=Number(C);if(!isNaN(Q))return Q}throw new cn("Could not convert "+JSON.stringify(C)+" to number.")}return"formatted"===this.type.kind?Hi.fromString(ps(this.args[0].evaluate(a))):"resolvedImage"===this.type.kind?nr.fromString(ps(this.args[0].evaluate(a))):ps(this.args[0].evaluate(a))},R.prototype.eachChild=function(a){this.args.forEach(a)},R.prototype.outputDefined=function(){return this.args.every(function(a){return a.outputDefined()})},R.prototype.serialize=function(){if("formatted"===this.type.kind)return new Nn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ja(this.args[0]).serialize();var a=["to-"+this.type.kind];return this.eachChild(function(l){a.push(l.serialize())}),a};var K=["Unknown","Point","LineString","Polygon"],de=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};de.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},de.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?K[this.feature.type]:this.feature.type:null},de.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},de.prototype.canonicalID=function(){return this.canonical},de.prototype.properties=function(){return this.feature&&this.feature.properties||{}},de.prototype.parseColor=function(a){var l=this._parseColorCache[a];return l||(l=this._parseColorCache[a]=Jn.parse(a)),l};var Ge=function(a,l,c,y){this.name=a,this.type=l,this._evaluate=c,this.args=y};Ge.prototype.evaluate=function(a){return this._evaluate(a,this.args)},Ge.prototype.eachChild=function(a){this.args.forEach(a)},Ge.prototype.outputDefined=function(){return!1},Ge.prototype.serialize=function(){return[this.name].concat(this.args.map(function(a){return a.serialize()}))},Ge.parse=function(a,l){var c,y=a[0],w=Ge.definitions[y];if(!w)return l.error('Unknown expression "'+y+'". If you wanted a literal array, use ["literal", [...]].',0);for(var E=Array.isArray(w)?w[0]:w.type,C=Array.isArray(w)?[[w[1],w[2]]]:w.overloads,N=C.filter(function(Tn){var en=Tn[0];return!Array.isArray(en)||en.length===a.length-1}),q=null,Q=0,ne=N;Q<ne.length;Q+=1){var re=ne[Q],ue=re[0],he=re[1];q=new Ti(l.registry,l.path,null,l.scope);for(var Ie=[],Pe=!1,qe=1;qe<a.length;qe++){var Be=a[qe],it=Array.isArray(ue)?ue[qe-1]:ue.type,st=q.parse(Be,1+Ie.length,it);if(!st){Pe=!0;break}Ie.push(st)}if(!Pe)if(Array.isArray(ue)&&ue.length!==Ie.length)q.error("Expected "+ue.length+" arguments, but found "+Ie.length+" instead.");else{for(var dt=0;dt<Ie.length;dt++){var pt=Array.isArray(ue)?ue[dt]:ue.type,Pt=Ie[dt];q.concat(dt+1).checkSubtype(pt,Pt.type)}if(0===q.errors.length)return new Ge(y,E,he,Ie)}}if(1===N.length)(c=l.errors).push.apply(c,q.errors);else{for(var Vt=(N.length?N:C).map(function(Tn){var en;return en=Tn[0],Array.isArray(en)?"("+en.map(Pr).join(", ")+")":"("+Pr(en.type)+"...)"}).join(" | "),Kt=[],fn=1;fn<a.length;fn++){var Qt=l.parse(a[fn],1+Kt.length);if(!Qt)return null;Kt.push(Pr(Qt.type))}l.error("Expected arguments of type "+Vt+", but found ("+Kt.join(", ")+") instead.")}return null},Ge.register=function(a,l){for(var c in Ge.definitions=l,l)a[c]=Ge};var tt=function(a,l,c){this.type=ri,this.locale=c,this.caseSensitive=a,this.diacriticSensitive=l};function Qe(a,l){a[0]=Math.min(a[0],l[0]),a[1]=Math.min(a[1],l[1]),a[2]=Math.max(a[2],l[0]),a[3]=Math.max(a[3],l[1])}function ft(a,l){return!(a[0]<=l[0]||a[2]>=l[2]||a[1]<=l[1]||a[3]>=l[3])}function jt(a,l){var c=(180+a[0])/360,y=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,w=Math.pow(2,l.z);return[Math.round(c*w*8192),Math.round(y*w*8192)]}function Lt(a,l,c){return l[1]>a[1]!=c[1]>a[1]&&a[0]<(c[0]-l[0])*(a[1]-l[1])/(c[1]-l[1])+l[0]}function Yt(a,l){for(var c,y,w,E,C,N,q,Q=!1,ne=0,re=l.length;ne<re;ne++)for(var ue=l[ne],he=0,Ie=ue.length;he<Ie-1;he++){if((E=(c=a)[0]-(y=ue[he])[0])*(q=c[1]-(w=ue[he+1])[1])-(N=c[0]-w[0])*(C=c[1]-y[1])==0&&E*N<=0&&C*q<=0)return!1;Lt(a,ue[he],ue[he+1])&&(Q=!Q)}return Q}function mt(a,l){for(var c=0;c<l.length;c++)if(Yt(a,l[c]))return!0;return!1}function tn(a,l,c,y){var w=y[0]-c[0],E=y[1]-c[1],C=(a[0]-c[0])*E-w*(a[1]-c[1]),N=(l[0]-c[0])*E-w*(l[1]-c[1]);return C>0&&N<0||C<0&&N>0}function gn(a,l,c){for(var y=0,w=c;y<w.length;y+=1)for(var E=w[y],C=0;C<E.length-1;++C)if((re=[(ne=E[C+1])[0]-(Q=E[C])[0],ne[1]-Q[1]])[0]*(ue=[(q=l)[0]-(N=a)[0],q[1]-N[1]])[1]-re[1]*ue[0]!=0&&tn(N,q,Q,ne)&&tn(Q,ne,N,q))return!0;var N,q,Q,ne,re,ue;return!1}function Fn(a,l){for(var c=0;c<a.length;++c)if(!Yt(a[c],l))return!1;for(var y=0;y<a.length-1;++y)if(gn(a[y],a[y+1],l))return!1;return!0}function kn(a,l){for(var c=0;c<l.length;c++)if(Fn(a,l[c]))return!0;return!1}function ji(a,l,c){for(var y=[],w=0;w<a.length;w++){for(var E=[],C=0;C<a[w].length;C++){var N=jt(a[w][C],c);Qe(l,N),E.push(N)}y.push(E)}return y}function At(a,l,c){for(var y=[],w=0;w<a.length;w++){var E=ji(a[w],l,c);y.push(E)}return y}function yn(a,l,c,y){if(a[0]<c[0]||a[0]>c[2]){var w=.5*y,E=a[0]-c[0]>w?-y:c[0]-a[0]>w?y:0;0===E&&(E=a[0]-c[2]>w?-y:c[2]-a[0]>w?y:0),a[0]+=E}Qe(l,a)}function dr(a,l,c,y){for(var w=8192*Math.pow(2,y.z),E=[8192*y.x,8192*y.y],C=[],N=0,q=a;N<q.length;N+=1)for(var Q=0,ne=q[N];Q<ne.length;Q+=1){var re=ne[Q],ue=[re.x+E[0],re.y+E[1]];yn(ue,l,c,w),C.push(ue)}return C}function Dn(a,l,c,y){for(var w,E=8192*Math.pow(2,y.z),C=[8192*y.x,8192*y.y],N=[],q=0,Q=a;q<Q.length;q+=1){for(var ne=[],re=0,ue=Q[q];re<ue.length;re+=1){var he=ue[re],Ie=[he.x+C[0],he.y+C[1]];Qe(l,Ie),ne.push(Ie)}N.push(ne)}if(l[2]-l[0]<=E/2){(w=l)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(var Pe=0,qe=N;Pe<qe.length;Pe+=1)for(var Be=0,it=qe[Pe];Be<it.length;Be+=1)yn(it[Be],l,c,E)}return N}tt.parse=function(a,l){if(2!==a.length)return l.error("Expected one argument.");var c=a[1];if("object"!=typeof c||Array.isArray(c))return l.error("Collator options argument must be an object.");var y=l.parse(void 0!==c["case-sensitive"]&&c["case-sensitive"],1,Dt);if(!y)return null;var w=l.parse(void 0!==c["diacritic-sensitive"]&&c["diacritic-sensitive"],1,Dt);if(!w)return null;var E=null;return c.locale&&!(E=l.parse(c.locale,1,Ut))?null:new tt(y,w,E)},tt.prototype.evaluate=function(a){return new Eo(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)},tt.prototype.eachChild=function(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)},tt.prototype.outputDefined=function(){return!1},tt.prototype.serialize=function(){var a={};return a["case-sensitive"]=this.caseSensitive.serialize(),a["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(a.locale=this.locale.serialize()),["collator",a]};var kr=function(a,l){this.type=Dt,this.geojson=a,this.geometries=l};function An(a){if(a instanceof Ge&&("get"===a.name&&1===a.args.length||"feature-state"===a.name||"has"===a.name&&1===a.args.length||"properties"===a.name||"geometry-type"===a.name||"id"===a.name||/^filter-/.test(a.name))||a instanceof kr)return!1;var l=!0;return a.eachChild(function(c){l&&!An(c)&&(l=!1)}),l}function da(a){if(a instanceof Ge&&"feature-state"===a.name)return!1;var l=!0;return a.eachChild(function(c){l&&!da(c)&&(l=!1)}),l}function Qn(a,l){if(a instanceof Ge&&l.indexOf(a.name)>=0)return!1;var c=!0;return a.eachChild(function(y){c&&!Qn(y,l)&&(c=!1)}),c}kr.parse=function(a,l){if(2!==a.length)return l.error("'within' expression requires exactly one argument, but found "+(a.length-1)+" instead.");if(Hr(a[1])){var c=a[1];if("FeatureCollection"===c.type)for(var y=0;y<c.features.length;++y){var w=c.features[y].geometry.type;if("Polygon"===w||"MultiPolygon"===w)return new kr(c,c.features[y].geometry)}else if("Feature"===c.type){var E=c.geometry.type;if("Polygon"===E||"MultiPolygon"===E)return new kr(c,c.geometry)}else if("Polygon"===c.type||"MultiPolygon"===c.type)return new kr(c,c)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")},kr.prototype.evaluate=function(a){if(null!=a.geometry()&&null!=a.canonicalID()){if("Point"===a.geometryType())return function(l,c){var y=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],E=l.canonicalID();if("Polygon"===c.type){var C=ji(c.coordinates,w,E),N=dr(l.geometry(),y,w,E);if(!ft(y,w))return!1;for(var q=0,Q=N;q<Q.length;q+=1)if(!Yt(Q[q],C))return!1}if("MultiPolygon"===c.type){var ne=At(c.coordinates,w,E),re=dr(l.geometry(),y,w,E);if(!ft(y,w))return!1;for(var ue=0,he=re;ue<he.length;ue+=1)if(!mt(he[ue],ne))return!1}return!0}(a,this.geometries);if("LineString"===a.geometryType())return function(l,c){var y=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],E=l.canonicalID();if("Polygon"===c.type){var C=ji(c.coordinates,w,E),N=Dn(l.geometry(),y,w,E);if(!ft(y,w))return!1;for(var q=0,Q=N;q<Q.length;q+=1)if(!Fn(Q[q],C))return!1}if("MultiPolygon"===c.type){var ne=At(c.coordinates,w,E),re=Dn(l.geometry(),y,w,E);if(!ft(y,w))return!1;for(var ue=0,he=re;ue<he.length;ue+=1)if(!kn(he[ue],ne))return!1}return!0}(a,this.geometries)}return!1},kr.prototype.eachChild=function(){},kr.prototype.outputDefined=function(){return!0},kr.prototype.serialize=function(){return["within",this.geojson]};var vr=function(a,l){this.type=l.type,this.name=a,this.boundExpression=l};vr.parse=function(a,l){if(2!==a.length||"string"!=typeof a[1])return l.error("'var' expression requires exactly one string literal argument.");var c=a[1];return l.scope.has(c)?new vr(c,l.scope.get(c)):l.error('Unknown variable "'+c+'". Make sure "'+c+'" has been bound in an enclosing "let" expression before using it.',1)},vr.prototype.evaluate=function(a){return this.boundExpression.evaluate(a)},vr.prototype.eachChild=function(){},vr.prototype.outputDefined=function(){return!1},vr.prototype.serialize=function(){return["var",this.name]};var Ti=function(a,l,c,y,w){void 0===l&&(l=[]),void 0===y&&(y=new Jt),void 0===w&&(w=[]),this.registry=a,this.path=l,this.key=l.map(function(E){return"["+E+"]"}).join(""),this.scope=y,this.errors=w,this.expectedType=c};function Ui(a,l){for(var c,y=a.length-1,w=0,E=y,C=0;w<=E;)if((c=a[C=Math.floor((w+E)/2)])<=l){if(C===y||l<a[C+1])return C;w=C+1}else{if(!(c>l))throw new cn("Input is not a number.");E=C-1}return 0}Ti.prototype.parse=function(a,l,c,y,w){return void 0===w&&(w={}),l?this.concat(l,c,y)._parse(a,w):this._parse(a,w)},Ti.prototype._parse=function(a,l){function c(Q,ne,re){return"assert"===re?new Vo(ne,[Q]):"coerce"===re?new R(ne,[Q]):Q}if(null!==a&&"string"!=typeof a&&"boolean"!=typeof a&&"number"!=typeof a||(a=["literal",a]),Array.isArray(a)){if(0===a.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var y=a[0];if("string"!=typeof y)return this.error("Expression name must be a string, but found "+typeof y+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var w=this.registry[y];if(w){var E=w.parse(a,this);if(!E)return null;if(this.expectedType){var C=this.expectedType,N=E.type;if("string"!==C.kind&&"number"!==C.kind&&"boolean"!==C.kind&&"object"!==C.kind&&"array"!==C.kind||"value"!==N.kind)if("color"!==C.kind&&"formatted"!==C.kind&&"resolvedImage"!==C.kind||"value"!==N.kind&&"string"!==N.kind){if(this.checkSubtype(C,N))return null}else E=c(E,C,l.typeAnnotation||"coerce");else E=c(E,C,l.typeAnnotation||"assert")}if(!(E instanceof So)&&"resolvedImage"!==E.type.kind&&function Q(ne){if(ne instanceof vr)return Q(ne.boundExpression);if(ne instanceof Ge&&"error"===ne.name||ne instanceof tt||ne instanceof kr)return!1;var re=ne instanceof R||ne instanceof Vo,ue=!0;return ne.eachChild(function(he){ue=re?ue&&Q(he):ue&&he instanceof So}),!!ue&&An(ne)&&Qn(ne,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(E)){var q=new de;try{E=new So(E.type,E.evaluate(q))}catch(Q){return this.error(Q.message),null}}return E}return this.error('Unknown expression "'+y+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===a?"'undefined' value invalid. Use null instead.":"object"==typeof a?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof a+" instead.")},Ti.prototype.concat=function(a,l,c){var y="number"==typeof a?this.path.concat(a):this.path,w=c?this.scope.concat(c):this.scope;return new Ti(this.registry,y,l||null,w,this.errors)},Ti.prototype.error=function(a){for(var l=[],c=arguments.length-1;c-- >0;)l[c]=arguments[c+1];var y=""+this.key+l.map(function(w){return"["+w+"]"}).join("");this.errors.push(new Zt(y,a))},Ti.prototype.checkSubtype=function(a,l){var c=Si(a,l);return c&&this.error(c),c};var fa=function(a,l,c){this.type=a,this.input=l,this.labels=[],this.outputs=[];for(var y=0,w=c;y<w.length;y+=1){var E=w[y],C=E[1];this.labels.push(E[0]),this.outputs.push(C)}};function $i(a,l,c){return a*(1-c)+l*c}fa.parse=function(a,l){if(a.length-1<4)return l.error("Expected at least 4 arguments, but found only "+(a.length-1)+".");if((a.length-1)%2!=0)return l.error("Expected an even number of arguments.");var c=l.parse(a[1],1,St);if(!c)return null;var y=[],w=null;l.expectedType&&"value"!==l.expectedType.kind&&(w=l.expectedType);for(var E=1;E<a.length;E+=2){var C=1===E?-1/0:a[E],N=a[E+1],q=E,Q=E+1;if("number"!=typeof C)return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',q);if(y.length&&y[y.length-1][0]>=C)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',q);var ne=l.parse(N,Q,w);if(!ne)return null;w=w||ne.type,y.push([C,ne])}return new fa(w,c,y)},fa.prototype.evaluate=function(a){var l=this.labels,c=this.outputs;if(1===l.length)return c[0].evaluate(a);var y=this.input.evaluate(a);if(y<=l[0])return c[0].evaluate(a);var w=l.length;return y>=l[w-1]?c[w-1].evaluate(a):c[Ui(l,y)].evaluate(a)},fa.prototype.eachChild=function(a){a(this.input);for(var l=0,c=this.outputs;l<c.length;l+=1)a(c[l])},fa.prototype.outputDefined=function(){return this.outputs.every(function(a){return a.outputDefined()})},fa.prototype.serialize=function(){for(var a=["step",this.input.serialize()],l=0;l<this.labels.length;l++)l>0&&a.push(this.labels[l]),a.push(this.outputs[l].serialize());return a};var Oe=Object.freeze({__proto__:null,number:$i,color:function(a,l,c){return new Jn($i(a.r,l.r,c),$i(a.g,l.g,c),$i(a.b,l.b,c),$i(a.a,l.a,c))},array:function(a,l,c){return a.map(function(y,w){return $i(y,l[w],c)})}}),at=6/29*3*(6/29),Nt=Math.PI/180,xn=180/Math.PI;function pi(a){return a>.008856451679035631?Math.pow(a,1/3):a/at+4/29}function or(a){return a>6/29?a*a*a:at*(a-4/29)}function dn(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function qi(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Io(a){var l=qi(a.r),c=qi(a.g),y=qi(a.b),w=pi((.4124564*l+.3575761*c+.1804375*y)/.95047),E=pi((.2126729*l+.7151522*c+.072175*y)/1);return{l:116*E-16,a:500*(w-E),b:200*(E-pi((.0193339*l+.119192*c+.9503041*y)/1.08883)),alpha:a.a}}function Mr(a){var l=(a.l+16)/116,c=isNaN(a.a)?l:l+a.a/500,y=isNaN(a.b)?l:l-a.b/200;return l=1*or(l),c=.95047*or(c),y=1.08883*or(y),new Jn(dn(3.2404542*c-1.5371385*l-.4985314*y),dn(-.969266*c+1.8760108*l+.041556*y),dn(.0556434*c-.2040259*l+1.0572252*y),a.alpha)}function ta(a,l,c){var y=l-a;return a+c*(y>180||y<-180?y-360*Math.round(y/360):y)}var ha={forward:Io,reverse:Mr,interpolate:function(a,l,c){return{l:$i(a.l,l.l,c),a:$i(a.a,l.a,c),b:$i(a.b,l.b,c),alpha:$i(a.alpha,l.alpha,c)}}},Ci={forward:function(a){var l=Io(a),c=l.l,y=l.a,w=l.b,E=Math.atan2(w,y)*xn;return{h:E<0?E+360:E,c:Math.sqrt(y*y+w*w),l:c,alpha:a.a}},reverse:function(a){var l=a.h*Nt,c=a.c;return Mr({l:a.l,a:Math.cos(l)*c,b:Math.sin(l)*c,alpha:a.alpha})},interpolate:function(a,l,c){return{h:ta(a.h,l.h,c),c:$i(a.c,l.c,c),l:$i(a.l,l.l,c),alpha:$i(a.alpha,l.alpha,c)}}},Oi=Object.freeze({__proto__:null,lab:ha,hcl:Ci}),Xr=function(a,l,c,y,w){this.type=a,this.operator=l,this.interpolation=c,this.input=y,this.labels=[],this.outputs=[];for(var E=0,C=w;E<C.length;E+=1){var N=C[E],q=N[1];this.labels.push(N[0]),this.outputs.push(q)}};function ts(a,l,c,y){var w=y-c,E=a-c;return 0===w?0:1===l?E/w:(Math.pow(l,E)-1)/(Math.pow(l,w)-1)}Xr.interpolationFactor=function(a,l,c,y){var w=0;if("exponential"===a.name)w=ts(l,a.base,c,y);else if("linear"===a.name)w=ts(l,1,c,y);else if("cubic-bezier"===a.name){var E=a.controlPoints;w=new G(E[0],E[1],E[2],E[3]).solve(ts(l,1,c,y))}return w},Xr.parse=function(a,l){var c=a[0],y=a[1],w=a[2],E=a.slice(3);if(!Array.isArray(y)||0===y.length)return l.error("Expected an interpolation type expression.",1);if("linear"===y[0])y={name:"linear"};else if("exponential"===y[0]){var C=y[1];if("number"!=typeof C)return l.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:C}}else{if("cubic-bezier"!==y[0])return l.error("Unknown interpolation type "+String(y[0]),1,0);var N=y.slice(1);if(4!==N.length||N.some(function(qe){return"number"!=typeof qe||qe<0||qe>1}))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:N}}if(a.length-1<4)return l.error("Expected at least 4 arguments, but found only "+(a.length-1)+".");if((a.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(!(w=l.parse(w,2,St)))return null;var q=[],Q=null;"interpolate-hcl"===c||"interpolate-lab"===c?Q=Hn:l.expectedType&&"value"!==l.expectedType.kind&&(Q=l.expectedType);for(var ne=0;ne<E.length;ne+=2){var re=E[ne],ue=E[ne+1],he=ne+3,Ie=ne+4;if("number"!=typeof re)return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',he);if(q.length&&q[q.length-1][0]>=re)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',he);var Pe=l.parse(ue,Ie,Q);if(!Pe)return null;Q=Q||Pe.type,q.push([re,Pe])}return"number"===Q.kind||"color"===Q.kind||"array"===Q.kind&&"number"===Q.itemType.kind&&"number"==typeof Q.N?new Xr(Q,c,y,w,q):l.error("Type "+Pr(Q)+" is not interpolatable.")},Xr.prototype.evaluate=function(a){var l=this.labels,c=this.outputs;if(1===l.length)return c[0].evaluate(a);var y=this.input.evaluate(a);if(y<=l[0])return c[0].evaluate(a);var w=l.length;if(y>=l[w-1])return c[w-1].evaluate(a);var E=Ui(l,y),C=Xr.interpolationFactor(this.interpolation,y,l[E],l[E+1]),N=c[E].evaluate(a),q=c[E+1].evaluate(a);return"interpolate"===this.operator?Oe[this.type.kind.toLowerCase()](N,q,C):"interpolate-hcl"===this.operator?Ci.reverse(Ci.interpolate(Ci.forward(N),Ci.forward(q),C)):ha.reverse(ha.interpolate(ha.forward(N),ha.forward(q),C))},Xr.prototype.eachChild=function(a){a(this.input);for(var l=0,c=this.outputs;l<c.length;l+=1)a(c[l])},Xr.prototype.outputDefined=function(){return this.outputs.every(function(a){return a.outputDefined()})},Xr.prototype.serialize=function(){var a;a="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var l=[this.operator,a,this.input.serialize()],c=0;c<this.labels.length;c++)l.push(this.labels[c],this.outputs[c].serialize());return l};var Ii=function(a,l){this.type=a,this.args=l};Ii.parse=function(a,l){if(a.length<2)return l.error("Expectected at least one argument.");var c=null,y=l.expectedType;y&&"value"!==y.kind&&(c=y);for(var w=[],E=0,C=a.slice(1);E<C.length;E+=1){var N=l.parse(C[E],1+w.length,c,void 0,{typeAnnotation:"omit"});if(!N)return null;c=c||N.type,w.push(N)}var q=y&&w.some(function(Q){return Si(y,Q.type)});return new Ii(q?sn:c,w)},Ii.prototype.evaluate=function(a){for(var l,c=null,y=0,w=0,E=this.args;w<E.length&&(y++,(c=E[w].evaluate(a))&&c instanceof nr&&!c.available&&(l||(l=c.name),c=null,y===this.args.length&&(c=l)),null===c);w+=1);return c},Ii.prototype.eachChild=function(a){this.args.forEach(a)},Ii.prototype.outputDefined=function(){return this.args.every(function(a){return a.outputDefined()})},Ii.prototype.serialize=function(){var a=["coalesce"];return this.eachChild(function(l){a.push(l.serialize())}),a};var _r=function(a,l){this.type=l.type,this.bindings=[].concat(a),this.result=l};_r.prototype.evaluate=function(a){return this.result.evaluate(a)},_r.prototype.eachChild=function(a){for(var l=0,c=this.bindings;l<c.length;l+=1)a(c[l][1]);a(this.result)},_r.parse=function(a,l){if(a.length<4)return l.error("Expected at least 3 arguments, but found "+(a.length-1)+" instead.");for(var c=[],y=1;y<a.length-1;y+=2){var w=a[y];if("string"!=typeof w)return l.error("Expected string, but found "+typeof w+" instead.",y);if(/[^a-zA-Z0-9_]/.test(w))return l.error("Variable names must contain only alphanumeric characters or '_'.",y);var E=l.parse(a[y+1],y+1);if(!E)return null;c.push([w,E])}var C=l.parse(a[a.length-1],a.length-1,l.expectedType,c);return C?new _r(c,C):null},_r.prototype.outputDefined=function(){return this.result.outputDefined()},_r.prototype.serialize=function(){for(var a=["let"],l=0,c=this.bindings;l<c.length;l+=1){var y=c[l];a.push(y[0],y[1].serialize())}return a.push(this.result.serialize()),a};var ns=function(a,l,c){this.type=a,this.index=l,this.input=c};ns.parse=function(a,l){if(3!==a.length)return l.error("Expected 2 arguments, but found "+(a.length-1)+" instead.");var c=l.parse(a[1],1,St),y=l.parse(a[2],2,yi(l.expectedType||sn));return c&&y?new ns(y.type.itemType,c,y):null},ns.prototype.evaluate=function(a){var l=this.index.evaluate(a),c=this.input.evaluate(a);if(l<0)throw new cn("Array index out of bounds: "+l+" < 0.");if(l>=c.length)throw new cn("Array index out of bounds: "+l+" > "+(c.length-1)+".");if(l!==Math.floor(l))throw new cn("Array index must be an integer, but found "+l+" instead.");return c[l]},ns.prototype.eachChild=function(a){a(this.index),a(this.input)},ns.prototype.outputDefined=function(){return!1},ns.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Ss=function(a,l){this.type=Dt,this.needle=a,this.haystack=l};Ss.parse=function(a,l){if(3!==a.length)return l.error("Expected 2 arguments, but found "+(a.length-1)+" instead.");var c=l.parse(a[1],1,sn),y=l.parse(a[2],2,sn);return c&&y?Gr(c.type,[Dt,Ut,St,hn,sn])?new Ss(c,y):l.error("Expected first argument to be of type boolean, string, number or null, but found "+Pr(c.type)+" instead"):null},Ss.prototype.evaluate=function(a){var l=this.needle.evaluate(a),c=this.haystack.evaluate(a);if(!c)return!1;if(!On(l,["boolean","string","number","null"]))throw new cn("Expected first argument to be of type boolean, string, number or null, but found "+Pr(Mi(l))+" instead.");if(!On(c,["string","array"]))throw new cn("Expected second argument to be of type array or string, but found "+Pr(Mi(c))+" instead.");return c.indexOf(l)>=0},Ss.prototype.eachChild=function(a){a(this.needle),a(this.haystack)},Ss.prototype.outputDefined=function(){return!0},Ss.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Go=function(a,l,c){this.type=St,this.needle=a,this.haystack=l,this.fromIndex=c};Go.parse=function(a,l){if(a.length<=2||a.length>=5)return l.error("Expected 3 or 4 arguments, but found "+(a.length-1)+" instead.");var c=l.parse(a[1],1,sn),y=l.parse(a[2],2,sn);if(!c||!y)return null;if(!Gr(c.type,[Dt,Ut,St,hn,sn]))return l.error("Expected first argument to be of type boolean, string, number or null, but found "+Pr(c.type)+" instead");if(4===a.length){var w=l.parse(a[3],3,St);return w?new Go(c,y,w):null}return new Go(c,y)},Go.prototype.evaluate=function(a){var l=this.needle.evaluate(a),c=this.haystack.evaluate(a);if(!On(l,["boolean","string","number","null"]))throw new cn("Expected first argument to be of type boolean, string, number or null, but found "+Pr(Mi(l))+" instead.");if(!On(c,["string","array"]))throw new cn("Expected second argument to be of type array or string, but found "+Pr(Mi(c))+" instead.");if(this.fromIndex){var y=this.fromIndex.evaluate(a);return c.indexOf(l,y)}return c.indexOf(l)},Go.prototype.eachChild=function(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)},Go.prototype.outputDefined=function(){return!1},Go.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var a=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),a]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Br=function(a,l,c,y,w,E){this.inputType=a,this.type=l,this.input=c,this.cases=y,this.outputs=w,this.otherwise=E};Br.parse=function(a,l){if(a.length<5)return l.error("Expected at least 4 arguments, but found only "+(a.length-1)+".");if(a.length%2!=1)return l.error("Expected an even number of arguments.");var c,y;l.expectedType&&"value"!==l.expectedType.kind&&(y=l.expectedType);for(var w={},E=[],C=2;C<a.length-1;C+=2){var N=a[C],q=a[C+1];Array.isArray(N)||(N=[N]);var Q=l.concat(C);if(0===N.length)return Q.error("Expected at least one branch label.");for(var ne=0,re=N;ne<re.length;ne+=1){var ue=re[ne];if("number"!=typeof ue&&"string"!=typeof ue)return Q.error("Branch labels must be numbers or strings.");if("number"==typeof ue&&Math.abs(ue)>Number.MAX_SAFE_INTEGER)return Q.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof ue&&Math.floor(ue)!==ue)return Q.error("Numeric branch labels must be integer values.");if(c){if(Q.checkSubtype(c,Mi(ue)))return null}else c=Mi(ue);if(void 0!==w[String(ue)])return Q.error("Branch labels must be unique.");w[String(ue)]=E.length}var he=l.parse(q,C,y);if(!he)return null;y=y||he.type,E.push(he)}var Ie=l.parse(a[1],1,sn);if(!Ie)return null;var Pe=l.parse(a[a.length-1],a.length-1,y);return Pe?"value"!==Ie.type.kind&&l.concat(1).checkSubtype(c,Ie.type)?null:new Br(c,y,Ie,w,E,Pe):null},Br.prototype.evaluate=function(a){var l=this.input.evaluate(a);return(Mi(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(a)},Br.prototype.eachChild=function(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)},Br.prototype.outputDefined=function(){return this.outputs.every(function(a){return a.outputDefined()})&&this.otherwise.outputDefined()},Br.prototype.serialize=function(){for(var a=this,l=["match",this.input.serialize()],c=[],y={},w=0,E=Object.keys(this.cases).sort();w<E.length;w+=1){var C=E[w];void 0===(re=y[this.cases[C]])?(y[this.cases[C]]=c.length,c.push([this.cases[C],[C]])):c[re][1].push(C)}for(var N=function(he){return"number"===a.inputType.kind?Number(he):he},q=0,Q=c;q<Q.length;q+=1){var ne=Q[q],re=ne[0],ue=ne[1];l.push(1===ue.length?N(ue[0]):ue.map(N)),l.push(this.outputs[outputIndex$1].serialize())}return l.push(this.otherwise.serialize()),l};var js=function(a,l,c){this.type=a,this.branches=l,this.otherwise=c};js.parse=function(a,l){if(a.length<4)return l.error("Expected at least 3 arguments, but found only "+(a.length-1)+".");if(a.length%2!=0)return l.error("Expected an odd number of arguments.");var c;l.expectedType&&"value"!==l.expectedType.kind&&(c=l.expectedType);for(var y=[],w=1;w<a.length-1;w+=2){var E=l.parse(a[w],w,Dt);if(!E)return null;var C=l.parse(a[w+1],w+1,c);if(!C)return null;y.push([E,C]),c=c||C.type}var N=l.parse(a[a.length-1],a.length-1,c);return N?new js(c,y,N):null},js.prototype.evaluate=function(a){for(var l=0,c=this.branches;l<c.length;l+=1){var y=c[l],w=y[1];if(y[0].evaluate(a))return w.evaluate(a)}return this.otherwise.evaluate(a)},js.prototype.eachChild=function(a){for(var l=0,c=this.branches;l<c.length;l+=1){var y=c[l],w=y[1];a(y[0]),a(w)}a(this.otherwise)},js.prototype.outputDefined=function(){return this.branches.every(function(a){return a[1].outputDefined()})&&this.otherwise.outputDefined()},js.prototype.serialize=function(){var a=["case"];return this.eachChild(function(l){a.push(l.serialize())}),a};var Us=function(a,l,c,y){this.type=a,this.input=l,this.beginIndex=c,this.endIndex=y};function _u(a,l){return"=="===a||"!="===a?"boolean"===l.kind||"string"===l.kind||"number"===l.kind||"null"===l.kind||"value"===l.kind:"string"===l.kind||"number"===l.kind||"value"===l.kind}function vi(a,l,c,y){return 0===y.compare(l,c)}function To(a,l,c){var y="=="!==a&&"!="!==a;return function(){function w(E,C,N){this.type=Dt,this.lhs=E,this.rhs=C,this.collator=N,this.hasUntypedArgument="value"===E.type.kind||"value"===C.type.kind}return w.parse=function(E,C){if(3!==E.length&&4!==E.length)return C.error("Expected two or three arguments.");var N=E[0],q=C.parse(E[1],1,sn);if(!q)return null;if(!_u(N,q.type))return C.concat(1).error('"'+N+"\" comparisons are not supported for type '"+Pr(q.type)+"'.");var Q=C.parse(E[2],2,sn);if(!Q)return null;if(!_u(N,Q.type))return C.concat(2).error('"'+N+"\" comparisons are not supported for type '"+Pr(Q.type)+"'.");if(q.type.kind!==Q.type.kind&&"value"!==q.type.kind&&"value"!==Q.type.kind)return C.error("Cannot compare types '"+Pr(q.type)+"' and '"+Pr(Q.type)+"'.");y&&("value"===q.type.kind&&"value"!==Q.type.kind?q=new Vo(Q.type,[q]):"value"!==q.type.kind&&"value"===Q.type.kind&&(Q=new Vo(q.type,[Q])));var ne=null;if(4===E.length){if("string"!==q.type.kind&&"string"!==Q.type.kind&&"value"!==q.type.kind&&"value"!==Q.type.kind)return C.error("Cannot use collator to compare non-string types.");if(!(ne=C.parse(E[3],3,ri)))return null}return new w(q,Q,ne)},w.prototype.evaluate=function(E){var C=this.lhs.evaluate(E),N=this.rhs.evaluate(E);if(y&&this.hasUntypedArgument){var q=Mi(C),Q=Mi(N);if(q.kind!==Q.kind||"string"!==q.kind&&"number"!==q.kind)throw new cn('Expected arguments for "'+a+'" to be (string, string) or (number, number), but found ('+q.kind+", "+Q.kind+") instead.")}if(this.collator&&!y&&this.hasUntypedArgument){var ne=Mi(C),re=Mi(N);if("string"!==ne.kind||"string"!==re.kind)return l(E,C,N)}return this.collator?c(E,C,N,this.collator.evaluate(E)):l(E,C,N)},w.prototype.eachChild=function(E){E(this.lhs),E(this.rhs),this.collator&&E(this.collator)},w.prototype.outputDefined=function(){return!0},w.prototype.serialize=function(){var E=[a];return this.eachChild(function(C){E.push(C.serialize())}),E},w}()}Us.parse=function(a,l){if(a.length<=2||a.length>=5)return l.error("Expected 3 or 4 arguments, but found "+(a.length-1)+" instead.");var c=l.parse(a[1],1,sn),y=l.parse(a[2],2,St);if(!c||!y)return null;if(!Gr(c.type,[yi(sn),Ut,sn]))return l.error("Expected first argument to be of type array or string, but found "+Pr(c.type)+" instead");if(4===a.length){var w=l.parse(a[3],3,St);return w?new Us(c.type,c,y,w):null}return new Us(c.type,c,y)},Us.prototype.evaluate=function(a){var l=this.input.evaluate(a),c=this.beginIndex.evaluate(a);if(!On(l,["string","array"]))throw new cn("Expected first argument to be of type array or string, but found "+Pr(Mi(l))+" instead.");if(this.endIndex){var y=this.endIndex.evaluate(a);return l.slice(c,y)}return l.slice(c)},Us.prototype.eachChild=function(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)},Us.prototype.outputDefined=function(){return!1},Us.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var a=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),a]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var pa=To("==",function(a,l,c){return l===c},vi),ml=To("!=",function(a,l,c){return l!==c},function(a,l,c,y){return!vi(0,l,c,y)}),gl=To("<",function(a,l,c){return l<c},function(a,l,c,y){return y.compare(l,c)<0}),Qs=To(">",function(a,l,c){return l>c},function(a,l,c,y){return y.compare(l,c)>0}),yc=To("<=",function(a,l,c){return l<=c},function(a,l,c,y){return y.compare(l,c)<=0}),bu=To(">=",function(a,l,c){return l>=c},function(a,l,c,y){return y.compare(l,c)>=0}),ms=function(a,l,c,y,w){this.type=Ut,this.number=a,this.locale=l,this.currency=c,this.minFractionDigits=y,this.maxFractionDigits=w};ms.parse=function(a,l){if(3!==a.length)return l.error("Expected two arguments.");var c=l.parse(a[1],1,St);if(!c)return null;var y=a[2];if("object"!=typeof y||Array.isArray(y))return l.error("NumberFormat options argument must be an object.");var w=null;if(y.locale&&!(w=l.parse(y.locale,1,Ut)))return null;var E=null;if(y.currency&&!(E=l.parse(y.currency,1,Ut)))return null;var C=null;if(y["min-fraction-digits"]&&!(C=l.parse(y["min-fraction-digits"],1,St)))return null;var N=null;return y["max-fraction-digits"]&&!(N=l.parse(y["max-fraction-digits"],1,St))?null:new ms(c,w,E,C,N)},ms.prototype.evaluate=function(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))},ms.prototype.eachChild=function(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)},ms.prototype.outputDefined=function(){return!1},ms.prototype.serialize=function(){var a={};return this.locale&&(a.locale=this.locale.serialize()),this.currency&&(a.currency=this.currency.serialize()),this.minFractionDigits&&(a["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(a["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),a]};var Sa=function(a){this.type=St,this.input=a};Sa.parse=function(a,l){if(2!==a.length)return l.error("Expected 1 argument, but found "+(a.length-1)+" instead.");var c=l.parse(a[1],1);return c?"array"!==c.type.kind&&"string"!==c.type.kind&&"value"!==c.type.kind?l.error("Expected argument of type string or array, but found "+Pr(c.type)+" instead."):new Sa(c):null},Sa.prototype.evaluate=function(a){var l=this.input.evaluate(a);if("string"==typeof l||Array.isArray(l))return l.length;throw new cn("Expected value to be of type string or array, but found "+Pr(Mi(l))+" instead.")},Sa.prototype.eachChild=function(a){a(this.input)},Sa.prototype.outputDefined=function(){return!1},Sa.prototype.serialize=function(){var a=["length"];return this.eachChild(function(l){a.push(l.serialize())}),a};var Ll={"==":pa,"!=":ml,">":Qs,"<":gl,">=":bu,"<=":yc,array:Vo,at:ns,boolean:Vo,case:js,coalesce:Ii,collator:tt,format:Nn,image:ja,in:Ss,"index-of":Go,interpolate:Xr,"interpolate-hcl":Xr,"interpolate-lab":Xr,length:Sa,let:_r,literal:So,match:Br,number:Vo,"number-format":ms,object:Vo,slice:Us,step:fa,string:Vo,"to-boolean":R,"to-color":R,"to-number":R,"to-string":R,var:vr,within:kr};function vc(a,l){var c=l[0],y=l[1],w=l[2],E=l[3];c=c.evaluate(a),y=y.evaluate(a),w=w.evaluate(a);var C=E?E.evaluate(a):1,N=es(c,y,w,C);if(N)throw new cn(N);return new Jn(c/255*C,y/255*C,w/255*C,C)}function na(a,l){return a in l}function ra(a,l){var c=l[a];return void 0===c?null:c}function Qr(a){return{type:a}}function Po(a){return{result:"success",value:a}}function Vi(a){return{result:"error",value:a}}function Ho(a){return"data-driven"===a["property-type"]||"cross-faded-data-driven"===a["property-type"]}function ao(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function _n(a){return!!a.expression&&a.expression.interpolated}function pn(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":null===a?"null":typeof a}function Pi(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}function Ua(a){return a}function Ca(a,l,c){return void 0!==a?a:void 0!==l?l:void 0!==c?c:void 0}function Do(a,l,c,y,w){return Ca(typeof c===w?y[c]:void 0,a.default,l.default)}function yl(a,l,c){if("number"!==pn(c))return Ca(a.default,l.default);var y=a.stops.length;if(1===y||c<=a.stops[0][0])return a.stops[0][1];if(c>=a.stops[y-1][0])return a.stops[y-1][1];var w=Ui(a.stops.map(function(E){return E[0]}),c);return a.stops[w][1]}function Di(a,l,c){var y=void 0!==a.base?a.base:1;if("number"!==pn(c))return Ca(a.default,l.default);var w=a.stops.length;if(1===w||c<=a.stops[0][0])return a.stops[0][1];if(c>=a.stops[w-1][0])return a.stops[w-1][1];var ue,he,Pe,qe,E=Ui(a.stops.map(function(re){return re[0]}),c),C=(ue=y,qe=c-(he=a.stops[E][0]),0==(Pe=a.stops[E+1][0]-he)?0:1===ue?qe/Pe:(Math.pow(ue,qe)-1)/(Math.pow(ue,Pe)-1)),N=a.stops[E][1],q=a.stops[E+1][1],Q=Oe[l.type]||Ua;if(a.colorSpace&&"rgb"!==a.colorSpace){var ne=Oi[a.colorSpace];Q=function(re,ue){return ne.reverse(ne.interpolate(ne.forward(re),ne.forward(ue),C))}}return"function"==typeof N.evaluate?{evaluate:function(){for(var re=[],ue=arguments.length;ue--;)re[ue]=arguments[ue];var he=N.evaluate.apply(void 0,re),Ie=q.evaluate.apply(void 0,re);if(void 0!==he&&void 0!==Ie)return Q(he,Ie,C)}}:Q(N,q,C)}function Nl(a,l,c){return"color"===l.type?c=Jn.parse(c):"formatted"===l.type?c=Hi.fromString(c.toString()):"resolvedImage"===l.type?c=nr.fromString(c.toString()):pn(c)===l.type||"enum"===l.type&&l.values[c]||(c=void 0),Ca(c,a.default,l.default)}Ge.register(Ll,{error:[{kind:"error"},[Ut],function(a,l){throw new cn(l[0].evaluate(a))}],typeof:[Ut,[sn],function(a,l){return Pr(Mi(l[0].evaluate(a)))}],"to-rgba":[yi(St,4),[Hn],function(a,l){return l[0].evaluate(a).toArray()}],rgb:[Hn,[St,St,St],vc],rgba:[Hn,[St,St,St,St],vc],has:{type:Dt,overloads:[[[Ut],function(a,l){return na(l[0].evaluate(a),a.properties())}],[[Ut,Vn],function(a,l){var c=l[1];return na(l[0].evaluate(a),c.evaluate(a))}]]},get:{type:sn,overloads:[[[Ut],function(a,l){return ra(l[0].evaluate(a),a.properties())}],[[Ut,Vn],function(a,l){var c=l[1];return ra(l[0].evaluate(a),c.evaluate(a))}]]},"feature-state":[sn,[Ut],function(a,l){return ra(l[0].evaluate(a),a.featureState||{})}],properties:[Vn,[],function(a){return a.properties()}],"geometry-type":[Ut,[],function(a){return a.geometryType()}],id:[sn,[],function(a){return a.id()}],zoom:[St,[],function(a){return a.globals.zoom}],"heatmap-density":[St,[],function(a){return a.globals.heatmapDensity||0}],"line-progress":[St,[],function(a){return a.globals.lineProgress||0}],accumulated:[sn,[],function(a){return void 0===a.globals.accumulated?null:a.globals.accumulated}],"+":[St,Qr(St),function(a,l){for(var c=0,y=0,w=l;y<w.length;y+=1)c+=w[y].evaluate(a);return c}],"*":[St,Qr(St),function(a,l){for(var c=1,y=0,w=l;y<w.length;y+=1)c*=w[y].evaluate(a);return c}],"-":{type:St,overloads:[[[St,St],function(a,l){var c=l[1];return l[0].evaluate(a)-c.evaluate(a)}],[[St],function(a,l){return-l[0].evaluate(a)}]]},"/":[St,[St,St],function(a,l){var c=l[1];return l[0].evaluate(a)/c.evaluate(a)}],"%":[St,[St,St],function(a,l){var c=l[1];return l[0].evaluate(a)%c.evaluate(a)}],ln2:[St,[],function(){return Math.LN2}],pi:[St,[],function(){return Math.PI}],e:[St,[],function(){return Math.E}],"^":[St,[St,St],function(a,l){var c=l[1];return Math.pow(l[0].evaluate(a),c.evaluate(a))}],sqrt:[St,[St],function(a,l){return Math.sqrt(l[0].evaluate(a))}],log10:[St,[St],function(a,l){return Math.log(l[0].evaluate(a))/Math.LN10}],ln:[St,[St],function(a,l){return Math.log(l[0].evaluate(a))}],log2:[St,[St],function(a,l){return Math.log(l[0].evaluate(a))/Math.LN2}],sin:[St,[St],function(a,l){return Math.sin(l[0].evaluate(a))}],cos:[St,[St],function(a,l){return Math.cos(l[0].evaluate(a))}],tan:[St,[St],function(a,l){return Math.tan(l[0].evaluate(a))}],asin:[St,[St],function(a,l){return Math.asin(l[0].evaluate(a))}],acos:[St,[St],function(a,l){return Math.acos(l[0].evaluate(a))}],atan:[St,[St],function(a,l){return Math.atan(l[0].evaluate(a))}],min:[St,Qr(St),function(a,l){return Math.min.apply(Math,l.map(function(c){return c.evaluate(a)}))}],max:[St,Qr(St),function(a,l){return Math.max.apply(Math,l.map(function(c){return c.evaluate(a)}))}],abs:[St,[St],function(a,l){return Math.abs(l[0].evaluate(a))}],round:[St,[St],function(a,l){var c=l[0].evaluate(a);return c<0?-Math.round(-c):Math.round(c)}],floor:[St,[St],function(a,l){return Math.floor(l[0].evaluate(a))}],ceil:[St,[St],function(a,l){return Math.ceil(l[0].evaluate(a))}],"filter-==":[Dt,[Ut,sn],function(a,l){var c=l[0],y=l[1];return a.properties()[c.value]===y.value}],"filter-id-==":[Dt,[sn],function(a,l){var c=l[0];return a.id()===c.value}],"filter-type-==":[Dt,[Ut],function(a,l){var c=l[0];return a.geometryType()===c.value}],"filter-<":[Dt,[Ut,sn],function(a,l){var c=l[0],y=l[1],w=a.properties()[c.value],E=y.value;return typeof w==typeof E&&w<E}],"filter-id-<":[Dt,[sn],function(a,l){var c=l[0],y=a.id(),w=c.value;return typeof y==typeof w&&y<w}],"filter->":[Dt,[Ut,sn],function(a,l){var c=l[0],y=l[1],w=a.properties()[c.value],E=y.value;return typeof w==typeof E&&w>E}],"filter-id->":[Dt,[sn],function(a,l){var c=l[0],y=a.id(),w=c.value;return typeof y==typeof w&&y>w}],"filter-<=":[Dt,[Ut,sn],function(a,l){var c=l[0],y=l[1],w=a.properties()[c.value],E=y.value;return typeof w==typeof E&&w<=E}],"filter-id-<=":[Dt,[sn],function(a,l){var c=l[0],y=a.id(),w=c.value;return typeof y==typeof w&&y<=w}],"filter->=":[Dt,[Ut,sn],function(a,l){var c=l[0],y=l[1],w=a.properties()[c.value],E=y.value;return typeof w==typeof E&&w>=E}],"filter-id->=":[Dt,[sn],function(a,l){var c=l[0],y=a.id(),w=c.value;return typeof y==typeof w&&y>=w}],"filter-has":[Dt,[sn],function(a,l){return l[0].value in a.properties()}],"filter-has-id":[Dt,[],function(a){return null!==a.id()&&void 0!==a.id()}],"filter-type-in":[Dt,[yi(Ut)],function(a,l){return l[0].value.indexOf(a.geometryType())>=0}],"filter-id-in":[Dt,[yi(sn)],function(a,l){return l[0].value.indexOf(a.id())>=0}],"filter-in-small":[Dt,[Ut,yi(sn)],function(a,l){var c=l[0];return l[1].value.indexOf(a.properties()[c.value])>=0}],"filter-in-large":[Dt,[Ut,yi(sn)],function(a,l){var c=l[0],y=l[1];return function(w,E,C,N){for(;C<=N;){var q=C+N>>1;if(E[q]===w)return!0;E[q]>w?N=q-1:C=q+1}return!1}(a.properties()[c.value],y.value,0,y.value.length-1)}],all:{type:Dt,overloads:[[[Dt,Dt],function(a,l){var c=l[1];return l[0].evaluate(a)&&c.evaluate(a)}],[Qr(Dt),function(a,l){for(var c=0,y=l;c<y.length;c+=1)if(!y[c].evaluate(a))return!1;return!0}]]},any:{type:Dt,overloads:[[[Dt,Dt],function(a,l){var c=l[1];return l[0].evaluate(a)||c.evaluate(a)}],[Qr(Dt),function(a,l){for(var c=0,y=l;c<y.length;c+=1)if(y[c].evaluate(a))return!0;return!1}]]},"!":[Dt,[Dt],function(a,l){return!l[0].evaluate(a)}],"is-supported-script":[Dt,[Ut],function(a,l){var c=a.globals&&a.globals.isSupportedScript;return!c||c(l[0].evaluate(a))}],upcase:[Ut,[Ut],function(a,l){return l[0].evaluate(a).toUpperCase()}],downcase:[Ut,[Ut],function(a,l){return l[0].evaluate(a).toLowerCase()}],concat:[Ut,Qr(sn),function(a,l){return l.map(function(c){return ps(c.evaluate(a))}).join("")}],"resolved-locale":[Ut,[ri],function(a,l){return l[0].evaluate(a).resolvedLocale()}]});var Ia=function(a,l){var c;this.expression=a,this._warningHistory={},this._evaluator=new de,this._defaultValue=l?"color"===(c=l).type&&Pi(c.default)?new Jn(0,0,0,0):"color"===c.type?Jn.parse(c.default)||null:void 0===c.default?null:c.default:null,this._enumValues=l&&"enum"===l.type?l.values:null};function br(a){return Array.isArray(a)&&a.length>0&&"string"==typeof a[0]&&a[0]in Ll}function kl(a,l){var w,E,c=new Ti(Ll,[],l?(E={color:Hn,string:Ut,number:St,enum:Ut,boolean:Dt,formatted:In,resolvedImage:ui},"array"===(w=l).type?yi(E[w.value]||sn,w.length):E[w.type]):void 0),y=c.parse(a,void 0,void 0,void 0,l&&"string"===l.type?{typeAnnotation:"coerce"}:void 0);return y?Po(new Ia(y,l)):Vi(c.errors)}Ia.prototype.evaluateWithoutErrorHandling=function(a,l,c,y,w,E){return this._evaluator.globals=a,this._evaluator.feature=l,this._evaluator.featureState=c,this._evaluator.canonical=y,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=E,this.expression.evaluate(this._evaluator)},Ia.prototype.evaluate=function(a,l,c,y,w,E){this._evaluator.globals=a,this._evaluator.feature=l||null,this._evaluator.featureState=c||null,this._evaluator.canonical=y,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=E||null;try{var C=this.expression.evaluate(this._evaluator);if(null==C||"number"==typeof C&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new cn("Expected value to be one of "+Object.keys(this._enumValues).map(function(N){return JSON.stringify(N)}).join(", ")+", but found "+JSON.stringify(C)+" instead.");return C}catch(N){return this._warningHistory[N.message]||(this._warningHistory[N.message]=!0,typeof console<"u"&&console.warn(N.message)),this._defaultValue}};var rt=function(a,l){this.kind=a,this._styleExpression=l,this.isStateDependent="constant"!==a&&!da(l.expression)};rt.prototype.evaluateWithoutErrorHandling=function(a,l,c,y,w,E){return this._styleExpression.evaluateWithoutErrorHandling(a,l,c,y,w,E)},rt.prototype.evaluate=function(a,l,c,y,w,E){return this._styleExpression.evaluate(a,l,c,y,w,E)};var _t=function(a,l,c,y){this.kind=a,this.zoomStops=c,this._styleExpression=l,this.isStateDependent="camera"!==a&&!da(l.expression),this.interpolationType=y};function Xt(a,l){if("error"===(a=kl(a,l)).result)return a;var c=a.value.expression,y=An(c);if(!y&&!Ho(l))return Vi([new Zt("","data expressions not supported")]);var w=Qn(c,["zoom"]);if(!w&&!ao(l))return Vi([new Zt("","zoom expressions not supported")]);var E=function C(N){var q=null;if(N instanceof _r)q=C(N.result);else if(N instanceof Ii)for(var Q=0,ne=N.args;Q<ne.length&&!(q=C(ne[Q]));Q+=1);else(N instanceof fa||N instanceof Xr)&&N.input instanceof Ge&&"zoom"===N.input.name&&(q=N);return q instanceof Zt||N.eachChild(function(re){var ue=C(re);ue instanceof Zt?q=ue:!q&&ue?q=new Zt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):q&&ue&&q!==ue&&(q=new Zt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),q}(c);return E||w?E instanceof Zt?Vi([E]):E instanceof Xr&&!_n(l)?Vi([new Zt("",'"interpolate" expressions cannot be used with this property')]):Po(E?new _t(y?"camera":"composite",a.value,E.labels,E instanceof Xr?E.interpolation:void 0):new rt(y?"constant":"source",a.value)):Vi([new Zt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}_t.prototype.evaluateWithoutErrorHandling=function(a,l,c,y,w,E){return this._styleExpression.evaluateWithoutErrorHandling(a,l,c,y,w,E)},_t.prototype.evaluate=function(a,l,c,y,w,E){return this._styleExpression.evaluate(a,l,c,y,w,E)},_t.prototype.interpolationFactor=function(a,l,c){return this.interpolationType?Xr.interpolationFactor(this.interpolationType,a,l,c):0};var mn=function(a,l){this._parameters=a,this._specification=l,Ft(this,function c(y,w){var E,C,N,q="color"===w.type,Q=y.stops&&"object"==typeof y.stops[0][0],ne=Q||!(Q||void 0!==y.property),re=y.type||(_n(w)?"exponential":"interval");if(q&&((y=Ft({},y)).stops&&(y.stops=y.stops.map(function(Qt){return[Qt[0],Jn.parse(Qt[1])]})),y.default=Jn.parse(y.default?y.default:w.default)),y.colorSpace&&"rgb"!==y.colorSpace&&!Oi[y.colorSpace])throw new Error("Unknown color space: "+y.colorSpace);if("exponential"===re)E=Di;else if("interval"===re)E=yl;else if("categorical"===re){E=Do,C=Object.create(null);for(var ue=0,he=y.stops;ue<he.length;ue+=1){var Ie=he[ue];C[Ie[0]]=Ie[1]}N=typeof y.stops[0][0]}else{if("identity"!==re)throw new Error('Unknown function type "'+re+'"');E=Nl}if(Q){for(var Pe={},qe=[],Be=0;Be<y.stops.length;Be++){var it=y.stops[Be],st=it[0].zoom;void 0===Pe[st]&&(Pe[st]={zoom:st,type:y.type,property:y.property,default:y.default,stops:[]},qe.push(st)),Pe[st].stops.push([it[0].value,it[1]])}for(var dt=[],pt=0,Pt=qe;pt<Pt.length;pt+=1){var Vt=Pt[pt];dt.push([Pe[Vt].zoom,c(Pe[Vt],w)])}var Kt={name:"linear"};return{kind:"composite",interpolationType:Kt,interpolationFactor:Xr.interpolationFactor.bind(void 0,Kt),zoomStops:dt.map(function(Qt){return Qt[0]}),evaluate:function(Qt,Tn){var en=Qt.zoom;return Di({stops:dt,base:y.base},w,en).evaluate(en,Tn)}}}if(ne){var fn="exponential"===re?{name:"exponential",base:void 0!==y.base?y.base:1}:null;return{kind:"camera",interpolationType:fn,interpolationFactor:Xr.interpolationFactor.bind(void 0,fn),zoomStops:y.stops.map(function(Qt){return Qt[0]}),evaluate:function(Qt){return E(y,w,Qt.zoom,C,N)}}}return{kind:"source",evaluate:function(Qt,Tn){var en=Tn&&Tn.properties?Tn.properties[y.property]:void 0;return void 0===en?Ca(y.default,w.default):E(y,w,en,C,N)}}}(this._parameters,this._specification))};function Lr(a){var l=a.key,c=a.value,y=a.valueSpec||{},w=a.objectElementValidators||{},E=a.style,C=a.styleSpec,N=[],q=pn(c);if("object"!==q)return[new Fe(l,c,"object expected, "+q+" found")];for(var Q in c){var ne=Q.split(".")[0],re=y[ne]||y["*"],ue=void 0;if(w[ne])ue=w[ne];else if(y[ne])ue=wr;else if(w["*"])ue=w["*"];else{if(!y["*"]){N.push(new Fe(l,c[Q],'unknown property "'+Q+'"'));continue}ue=wr}N=N.concat(ue({key:(l&&l+".")+Q,value:c[Q],valueSpec:re,style:E,styleSpec:C,object:c,objectKey:Q},c))}for(var he in y)w[he]||y[he].required&&void 0===y[he].default&&void 0===c[he]&&N.push(new Fe(l,c,'missing required property "'+he+'"'));return N}function Ar(a){var l=a.value,c=a.valueSpec,y=a.style,w=a.styleSpec,E=a.key,C=a.arrayElementValidator||wr;if("array"!==pn(l))return[new Fe(E,l,"array expected, "+pn(l)+" found")];if(c.length&&l.length!==c.length)return[new Fe(E,l,"array length "+c.length+" expected, length "+l.length+" found")];if(c["min-length"]&&l.length<c["min-length"])return[new Fe(E,l,"array length at least "+c["min-length"]+" expected, length "+l.length+" found")];var N={type:c.value,values:c.values};w.$version<7&&(N.function=c.function),"object"===pn(c.value)&&(N=c.value);for(var q=[],Q=0;Q<l.length;Q++)q=q.concat(C({array:l,arrayIndex:Q,value:l[Q],valueSpec:N,style:y,styleSpec:w,key:E+"["+Q+"]"}));return q}function ii(a){var l=a.key,c=a.value,y=a.valueSpec,w=pn(c);return"number"===w&&c!=c&&(w="NaN"),"number"!==w?[new Fe(l,c,"number expected, "+w+" found")]:"minimum"in y&&c<y.minimum?[new Fe(l,c,c+" is less than the minimum value "+y.minimum)]:"maximum"in y&&c>y.maximum?[new Fe(l,c,c+" is greater than the maximum value "+y.maximum)]:[]}function Li(a){var l,c,y,w=a.valueSpec,E=ct(a.value.type),C={},N="categorical"!==E&&void 0===a.value.property,q=!N,Q="array"===pn(a.value.stops)&&"array"===pn(a.value.stops[0])&&"object"===pn(a.value.stops[0][0]),ne=Lr({key:a.key,value:a.value,valueSpec:a.styleSpec.function,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(he){if("identity"===E)return[new Fe(he.key,he.value,'identity function may not have a "stops" property')];var Ie=[],Pe=he.value;return Ie=Ie.concat(Ar({key:he.key,value:Pe,valueSpec:he.valueSpec,style:he.style,styleSpec:he.styleSpec,arrayElementValidator:re})),"array"===pn(Pe)&&0===Pe.length&&Ie.push(new Fe(he.key,Pe,"array must have at least one stop")),Ie},default:function(he){return wr({key:he.key,value:he.value,valueSpec:w,style:he.style,styleSpec:he.styleSpec})}}});return"identity"===E&&N&&ne.push(new Fe(a.key,a.value,'missing required property "property"')),"identity"===E||a.value.stops||ne.push(new Fe(a.key,a.value,'missing required property "stops"')),"exponential"===E&&a.valueSpec.expression&&!_n(a.valueSpec)&&ne.push(new Fe(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(q&&!Ho(a.valueSpec)?ne.push(new Fe(a.key,a.value,"property functions not supported")):N&&!ao(a.valueSpec)&&ne.push(new Fe(a.key,a.value,"zoom functions not supported"))),"categorical"!==E&&!Q||void 0!==a.value.property||ne.push(new Fe(a.key,a.value,'"property" property is required')),ne;function re(he){var Ie=[],Pe=he.value,qe=he.key;if("array"!==pn(Pe))return[new Fe(qe,Pe,"array expected, "+pn(Pe)+" found")];if(2!==Pe.length)return[new Fe(qe,Pe,"array length 2 expected, length "+Pe.length+" found")];if(Q){if("object"!==pn(Pe[0]))return[new Fe(qe,Pe,"object expected, "+pn(Pe[0])+" found")];if(void 0===Pe[0].zoom)return[new Fe(qe,Pe,"object stop key must have zoom")];if(void 0===Pe[0].value)return[new Fe(qe,Pe,"object stop key must have value")];if(y&&y>ct(Pe[0].zoom))return[new Fe(qe,Pe[0].zoom,"stop zoom values must appear in ascending order")];ct(Pe[0].zoom)!==y&&(y=ct(Pe[0].zoom),c=void 0,C={}),Ie=Ie.concat(Lr({key:qe+"[0]",value:Pe[0],valueSpec:{zoom:{}},style:he.style,styleSpec:he.styleSpec,objectElementValidators:{zoom:ii,value:ue}}))}else Ie=Ie.concat(ue({key:qe+"[0]",value:Pe[0],valueSpec:{},style:he.style,styleSpec:he.styleSpec},Pe));return br(Et(Pe[1]))?Ie.concat([new Fe(qe+"[1]",Pe[1],"expressions are not allowed in function stops.")]):Ie.concat(wr({key:qe+"[1]",value:Pe[1],valueSpec:w,style:he.style,styleSpec:he.styleSpec}))}function ue(he,Ie){var Pe=pn(he.value),qe=ct(he.value),Be=null!==he.value?he.value:Ie;if(l){if(Pe!==l)return[new Fe(he.key,Be,Pe+" stop domain type must match previous stop domain type "+l)]}else l=Pe;if("number"!==Pe&&"string"!==Pe&&"boolean"!==Pe)return[new Fe(he.key,Be,"stop domain value must be a number, string, or boolean")];if("number"!==Pe&&"categorical"!==E){var it="number expected, "+Pe+" found";return Ho(w)&&void 0===E&&(it+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Fe(he.key,Be,it)]}return"categorical"!==E||"number"!==Pe||isFinite(qe)&&Math.floor(qe)===qe?"categorical"!==E&&"number"===Pe&&void 0!==c&&qe<c?[new Fe(he.key,Be,"stop domain values must appear in ascending order")]:(c=qe,"categorical"===E&&qe in C?[new Fe(he.key,Be,"stop domain values must be unique")]:(C[qe]=!0,[])):[new Fe(he.key,Be,"integer expected, found "+qe)]}}function $o(a){var l=("property"===a.expressionContext?Xt:kl)(Et(a.value),a.valueSpec);if("error"===l.result)return l.value.map(function(y){return new Fe(""+a.key+y.key,a.value,y.message)});var c=l.value.expression||l.value._styleExpression.expression;if("property"===a.expressionContext&&"text-font"===a.propertyKey&&!c.outputDefined())return[new Fe(a.key,a.value,'Invalid data expression for "'+a.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===a.expressionContext&&"layout"===a.propertyType&&!da(c))return[new Fe(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===a.expressionContext&&!da(c))return[new Fe(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&0===a.expressionContext.indexOf("cluster")){if(!Qn(c,["zoom","feature-state"]))return[new Fe(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===a.expressionContext&&!An(c))return[new Fe(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ar(a){var l=a.key,c=a.value,y=a.valueSpec,w=[];return Array.isArray(y.values)?-1===y.values.indexOf(ct(c))&&w.push(new Fe(l,c,"expected one of ["+y.values.join(", ")+"], "+JSON.stringify(c)+" found")):-1===Object.keys(y.values).indexOf(ct(c))&&w.push(new Fe(l,c,"expected one of ["+Object.keys(y.values).join(", ")+"], "+JSON.stringify(c)+" found")),w}function Qi(a){if(!0===a||!1===a)return!0;if(!Array.isArray(a)||0===a.length)return!1;switch(a[0]){case"has":return a.length>=2&&"$id"!==a[1]&&"$type"!==a[1];case"in":return a.length>=3&&("string"!=typeof a[1]||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==a.length||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(var l=0,c=a.slice(1);l<c.length;l+=1){var y=c[l];if(!Qi(y)&&"boolean"!=typeof y)return!1}return!0;default:return!0}}mn.deserialize=function(a){return new mn(a._parameters,a._specification)},mn.serialize=function(a){return{_parameters:a._parameters,_specification:a._specification}};var Vs={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ta(a){if(null==a)return{filter:function(){return!0},needGeometry:!1};Qi(a)||(a=ma(a));var l=kl(a,Vs);if("error"===l.result)throw new Error(l.value.map(function(c){return c.key+": "+c.message}).join(", "));return{filter:function(c,y,w){return l.value.evaluate(c,y,{},w)},needGeometry:function c(y){if(!Array.isArray(y))return!1;if("within"===y[0])return!0;for(var w=1;w<y.length;w++)if(c(y[w]))return!0;return!1}(a)}}function ia(a,l){return a<l?-1:a>l?1:0}function ma(a){if(!a)return!0;var l,c=a[0];return a.length<=1?"any"!==c:"=="===c?Cs(a[1],a[2],"=="):"!="===c?vl(Cs(a[1],a[2],"==")):"<"===c||">"===c||"<="===c||">="===c?Cs(a[1],a[2],c):"any"===c?(l=a.slice(1),["any"].concat(l.map(ma))):"all"===c?["all"].concat(a.slice(1).map(ma)):"none"===c?["all"].concat(a.slice(1).map(ma).map(vl)):"in"===c?Is(a[1],a.slice(2)):"!in"===c?vl(Is(a[1],a.slice(2))):"has"===c?so(a[1]):"!has"===c?vl(so(a[1])):"within"!==c||a}function Cs(a,l,c){switch(a){case"$type":return["filter-type-"+c,l];case"$id":return["filter-id-"+c,l];default:return["filter-"+c,a,l]}}function Is(a,l){if(0===l.length)return!1;switch(a){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some(function(c){return typeof c!=typeof l[0]})?["filter-in-large",a,["literal",l.sort(ia)]]:["filter-in-small",a,["literal",l]]}}function so(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function vl(a){return["!",a]}function qo(a){return Qi(Et(a.value))?$o(Ft({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function l(c){var y=c.value,w=c.key;if("array"!==pn(y))return[new Fe(w,y,"array expected, "+pn(y)+" found")];var E,C=c.styleSpec,N=[];if(y.length<1)return[new Fe(w,y,"filter array must have at least 1 element")];switch(N=N.concat(ar({key:w+"[0]",value:y[0],valueSpec:C.filter_operator,style:c.style,styleSpec:c.styleSpec})),ct(y[0])){case"<":case"<=":case">":case">=":y.length>=2&&"$type"===ct(y[1])&&N.push(new Fe(w,y,'"$type" cannot be use with operator "'+y[0]+'"'));case"==":case"!=":3!==y.length&&N.push(new Fe(w,y,'filter array for operator "'+y[0]+'" must have 3 elements'));case"in":case"!in":y.length>=2&&"string"!==(E=pn(y[1]))&&N.push(new Fe(w+"[1]",y[1],"string expected, "+E+" found"));for(var q=2;q<y.length;q++)E=pn(y[q]),"$type"===ct(y[1])?N=N.concat(ar({key:w+"["+q+"]",value:y[q],valueSpec:C.geometry_type,style:c.style,styleSpec:c.styleSpec})):"string"!==E&&"number"!==E&&"boolean"!==E&&N.push(new Fe(w+"["+q+"]",y[q],"string, number, or boolean expected, "+E+" found"));break;case"any":case"all":case"none":for(var Q=1;Q<y.length;Q++)N=N.concat(l({key:w+"["+Q+"]",value:y[Q],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":E=pn(y[1]),2!==y.length?N.push(new Fe(w,y,'filter array for "'+y[0]+'" operator must have 2 elements')):"string"!==E&&N.push(new Fe(w+"[1]",y[1],"string expected, "+E+" found"));break;case"within":E=pn(y[1]),2!==y.length?N.push(new Fe(w,y,'filter array for "'+y[0]+'" operator must have 2 elements')):"object"!==E&&N.push(new Fe(w+"[1]",y[1],"object expected, "+E+" found"))}return N}(a)}function rs(a,l){var c=a.key,y=a.style,w=a.styleSpec,E=a.value,C=a.objectKey,N=w[l+"_"+a.layerType];if(!N)return[];var q=C.match(/^(.*)-transition$/);if("paint"===l&&q&&N[q[1]]&&N[q[1]].transition)return wr({key:c,value:E,valueSpec:w.transition,style:y,styleSpec:w});var Q,ne=a.valueSpec||N[C];if(!ne)return[new Fe(c,E,'unknown property "'+C+'"')];if("string"===pn(E)&&Ho(ne)&&!ne.tokens&&(Q=/^{([^}]+)}$/.exec(E)))return[new Fe(c,E,'"'+C+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Q[1])+" }`.")];var re=[];return"symbol"===a.layerType&&("text-field"===C&&y&&!y.glyphs&&re.push(new Fe(c,E,'use of "text-field" requires a style "glyphs" property')),"text-font"===C&&Pi(Et(E))&&"identity"===ct(E.type)&&re.push(new Fe(c,E,'"text-font" does not support identity functions'))),re.concat(wr({key:a.key,value:E,valueSpec:ne,style:y,styleSpec:w,expressionContext:"property",propertyType:l,propertyKey:C}))}function Fl(a){return rs(a,"paint")}function mi(a){return rs(a,"layout")}function ei(a){var l=[],c=a.value,y=a.key,w=a.style,E=a.styleSpec;c.type||c.ref||l.push(new Fe(y,c,'either "type" or "ref" is required'));var C,N=ct(c.type),q=ct(c.ref);if(c.id)for(var Q=ct(c.id),ne=0;ne<a.arrayIndex;ne++){var re=w.layers[ne];ct(re.id)===Q&&l.push(new Fe(y,c.id,'duplicate layer id "'+c.id+'", previously used at line '+re.id.__line__))}if("ref"in c)["type","source","source-layer","filter","layout"].forEach(function(Ie){Ie in c&&l.push(new Fe(y,c[Ie],'"'+Ie+'" is prohibited for ref layers'))}),w.layers.forEach(function(Ie){ct(Ie.id)===q&&(C=Ie)}),C?C.ref?l.push(new Fe(y,c.ref,"ref cannot reference another ref layer")):N=ct(C.type):l.push(new Fe(y,c.ref,'ref layer "'+q+'" not found'));else if("background"!==N)if(c.source){var ue=w.sources&&w.sources[c.source],he=ue&&ct(ue.type);ue?"vector"===he&&"raster"===N?l.push(new Fe(y,c.source,'layer "'+c.id+'" requires a raster source')):"raster"===he&&"raster"!==N?l.push(new Fe(y,c.source,'layer "'+c.id+'" requires a vector source')):"vector"!==he||c["source-layer"]?"raster-dem"===he&&"hillshade"!==N?l.push(new Fe(y,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==N||!c.paint||!c.paint["line-gradient"]||"geojson"===he&&ue.lineMetrics||l.push(new Fe(y,c,'layer "'+c.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):l.push(new Fe(y,c,'layer "'+c.id+'" must specify a "source-layer"')):l.push(new Fe(y,c.source,'source "'+c.source+'" not found'))}else l.push(new Fe(y,c,'missing required property "source"'));return l=l.concat(Lr({key:y,value:c,valueSpec:E.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return wr({key:y+".type",value:c.type,valueSpec:E.layer.type,style:a.style,styleSpec:a.styleSpec,object:c,objectKey:"type"})},filter:qo,layout:function(Ie){return Lr({layer:c,key:Ie.key,value:Ie.value,style:Ie.style,styleSpec:Ie.styleSpec,objectElementValidators:{"*":function(Pe){return mi(Ft({layerType:N},Pe))}}})},paint:function(Ie){return Lr({layer:c,key:Ie.key,value:Ie.value,style:Ie.style,styleSpec:Ie.styleSpec,objectElementValidators:{"*":function(Pe){return Fl(Ft({layerType:N},Pe))}}})}}}))}function Sr(a){var l=a.value,c=a.key,y=pn(l);return"string"!==y?[new Fe(c,l,"string expected, "+y+" found")]:[]}var Ts={promoteId:function(a){var l=a.key,c=a.value;if("string"===pn(c))return Sr({key:l,value:c});var y=[];for(var w in c)y.push.apply(y,Sr({key:l+"."+w,value:c[w]}));return y}};function _l(a){var l=a.value,c=a.key,y=a.styleSpec,w=a.style;if(!l.type)return[new Fe(c,l,'"type" is required')];var E,C=ct(l.type);switch(C){case"vector":case"raster":case"raster-dem":return Lr({key:c,value:l,valueSpec:y["source_"+C.replace("-","_")],style:a.style,styleSpec:y,objectElementValidators:Ts});case"geojson":if(E=Lr({key:c,value:l,valueSpec:y.source_geojson,style:w,styleSpec:y,objectElementValidators:Ts}),l.cluster)for(var N in l.clusterProperties){var q=l.clusterProperties[N],Q=q[0],ne="string"==typeof Q?[Q,["accumulated"],["get",N]]:Q;E.push.apply(E,$o({key:c+"."+N+".map",value:q[1],expressionContext:"cluster-map"})),E.push.apply(E,$o({key:c+"."+N+".reduce",value:ne,expressionContext:"cluster-reduce"}))}return E;case"video":return Lr({key:c,value:l,valueSpec:y.source_video,style:w,styleSpec:y});case"image":return Lr({key:c,value:l,valueSpec:y.source_image,style:w,styleSpec:y});case"canvas":return[new Fe(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ar({key:c+".type",value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:w,styleSpec:y})}}function Lo(a){var l=a.value,c=a.styleSpec,y=c.light,w=a.style,E=[],C=pn(l);if(void 0===l)return E;if("object"!==C)return E.concat([new Fe("light",l,"object expected, "+C+" found")]);for(var N in l){var q=N.match(/^(.*)-transition$/);E=E.concat(q&&y[q[1]]&&y[q[1]].transition?wr({key:N,value:l[N],valueSpec:c.transition,style:w,styleSpec:c}):y[N]?wr({key:N,value:l[N],valueSpec:y[N],style:w,styleSpec:c}):[new Fe(N,l[N],'unknown property "'+N+'"')])}return E}var Or={"*":function(){return[]},array:Ar,boolean:function(a){var l=a.value,c=a.key,y=pn(l);return"boolean"!==y?[new Fe(c,l,"boolean expected, "+y+" found")]:[]},number:ii,color:function(a){var l=a.key,c=a.value,y=pn(c);return"string"!==y?[new Fe(l,c,"color expected, "+y+" found")]:null===Bi(c)?[new Fe(l,c,'color expected, "'+c+'" found')]:[]},constants:Rt,enum:ar,filter:qo,function:Li,layer:ei,object:Lr,source:_l,light:Lo,string:Sr,formatted:function(a){return 0===Sr(a).length?[]:$o(a)},resolvedImage:function(a){return 0===Sr(a).length?[]:$o(a)}};function wr(a){var l=a.value,c=a.valueSpec,y=a.styleSpec;return c.expression&&Pi(ct(l))?Li(a):c.expression&&br(Et(l))?$o(a):c.type&&Or[c.type]?Or[c.type](a):Lr(Ft({},a,{valueSpec:c.type?y[c.type]:c}))}function Gs(a){var l=a.value,c=a.key,y=Sr(a);return y.length||(-1===l.indexOf("{fontstack}")&&y.push(new Fe(c,l,'"glyphs" url must include a "{fontstack}" token')),-1===l.indexOf("{range}")&&y.push(new Fe(c,l,'"glyphs" url must include a "{range}" token'))),y}function gs(a,l){void 0===l&&(l=xe);var c=[];return c=c.concat(wr({key:"",value:a,valueSpec:l.$root,styleSpec:l,style:a,objectElementValidators:{glyphs:Gs,"*":function(){return[]}}})),a.constants&&(c=c.concat(Rt({key:"constants",value:a.constants,style:a,styleSpec:l}))),eu(c)}function eu(a){return[].concat(a).sort(function(l,c){return l.line-c.line})}function ys(a){return function(){for(var l=[],c=arguments.length;c--;)l[c]=arguments[c];return eu(a.apply(this,l))}}gs.source=ys(_l),gs.light=ys(Lo),gs.layer=ys(ei),gs.filter=ys(qo),gs.paintProperty=ys(Fl),gs.layoutProperty=ys(mi);var wu=gs,_c=wu.light,tu=wu.paintProperty,nu=wu.layoutProperty;function zl(a,l){var c=!1;if(l&&l.length)for(var y=0,w=l;y<w.length;y+=1)a.fire(new Xe(new Error(w[y].message))),c=!0;return c}var oa=Pa;function Pa(a,l,c){var y=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var w=new Int32Array(this.arrayBuffer);a=w[0],this.d=(l=w[1])+2*(c=w[2]);for(var E=0;E<this.d*this.d;E++){var C=w[3+E],N=w[3+E+1];y.push(C===N?null:w.subarray(C,N))}var q=w[3+y.length+1];this.keys=w.subarray(w[3+y.length],q),this.bboxes=w.subarray(q),this.insert=this._insertReadonly}else{this.d=l+2*c;for(var Q=0;Q<this.d*this.d;Q++)y.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=a,this.padding=c,this.scale=l/a,this.uid=0;var ne=c/l*a;this.min=-ne,this.max=a+ne}Pa.prototype.insert=function(a,l,c,y,w){this._forEachCell(l,c,y,w,this._insertCell,this.uid++),this.keys.push(a),this.bboxes.push(l),this.bboxes.push(c),this.bboxes.push(y),this.bboxes.push(w)},Pa.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Pa.prototype._insertCell=function(a,l,c,y,w,E){this.cells[w].push(E)},Pa.prototype.query=function(a,l,c,y,w){var E=this.min,C=this.max;if(a<=E&&l<=E&&C<=c&&C<=y&&!w)return Array.prototype.slice.call(this.keys);var N=[];return this._forEachCell(a,l,c,y,this._queryCell,N,{},w),N},Pa.prototype._queryCell=function(a,l,c,y,w,E,C,N){var q=this.cells[w];if(null!==q)for(var Q=this.keys,ne=this.bboxes,re=0;re<q.length;re++){var ue=q[re];if(void 0===C[ue]){var he=4*ue;(N?N(ne[he+0],ne[he+1],ne[he+2],ne[he+3]):a<=ne[he+2]&&l<=ne[he+3]&&c>=ne[he+0]&&y>=ne[he+1])?(C[ue]=!0,E.push(Q[ue])):C[ue]=!1}}},Pa.prototype._forEachCell=function(a,l,c,y,w,E,C,N){for(var q=this._convertToCellCoord(a),Q=this._convertToCellCoord(l),ne=this._convertToCellCoord(c),re=this._convertToCellCoord(y),ue=q;ue<=ne;ue++)for(var he=Q;he<=re;he++){var Ie=this.d*he+ue;if((!N||N(this._convertFromCellCoord(ue),this._convertFromCellCoord(he),this._convertFromCellCoord(ue+1),this._convertFromCellCoord(he+1)))&&w.call(this,a,l,c,y,Ie,E,C,N))return}},Pa.prototype._convertFromCellCoord=function(a){return(a-this.padding)/this.scale},Pa.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))},Pa.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,l=3+this.cells.length+1+1,c=0,y=0;y<this.cells.length;y++)c+=this.cells[y].length;var w=new Int32Array(l+c+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;for(var E=l,C=0;C<a.length;C++){var N=a[C];w[3+C]=E,w.set(N,E),E+=N.length}return w[3+a.length]=E,w.set(this.keys,E),w[3+a.length+1]=E+=this.keys.length,w.set(this.bboxes,E),E+=this.bboxes.length,w.buffer};var Ku=F.ImageData,ga=F.ImageBitmap,is={};function on(a,l,c){void 0===c&&(c={}),Object.defineProperty(l,"_classRegistryKey",{value:a,writeable:!1}),is[a]={klass:l,omit:c.omit||[],shallow:c.shallow||[]}}for(var ld in on("Object",Object),oa.serialize=function(a,l){var c=a.toArrayBuffer();return l&&l.push(c),{buffer:c}},oa.deserialize=function(a){return new oa(a.buffer)},on("Grid",oa),on("Color",Jn),on("Error",Error),on("ResolvedImage",nr),on("StylePropertyFunction",mn),on("StyleExpression",Ia,{omit:["_evaluator"]}),on("ZoomDependentExpression",_t),on("ZoomConstantExpression",rt),on("CompoundExpression",Ge,{omit:["_evaluate"]}),Ll)Ll[ld]._classRegistryKey||on("Expression_"+ld,Ll[ld]);function bc(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&"ArrayBuffer"===a.constructor.name)}function xu(a){return ga&&a instanceof ga}function Wo(a,l){if(null==a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(bc(a)||xu(a))return l&&l.push(a),a;if(ArrayBuffer.isView(a)){var c=a;return l&&l.push(c.buffer),c}if(a instanceof Ku)return l&&l.push(a.data.buffer),a;if(Array.isArray(a)){for(var y=[],w=0,E=a;w<E.length;w+=1)y.push(Wo(E[w],l));return y}if("object"==typeof a){var C=a.constructor,N=C._classRegistryKey;if(!N)throw new Error("can't serialize object of unregistered class");var q=C.serialize?C.serialize(a,l):{};if(!C.serialize){for(var Q in a)if(a.hasOwnProperty(Q)&&!(is[N].omit.indexOf(Q)>=0)){var ne=a[Q];q[Q]=is[N].shallow.indexOf(Q)>=0?ne:Wo(ne,l)}a instanceof Error&&(q.message=a.message)}if(q.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==N&&(q.$name=N),q}throw new Error("can't serialize object of type "+typeof a)}function wc(a){if(null==a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||bc(a)||xu(a)||ArrayBuffer.isView(a)||a instanceof Ku)return a;if(Array.isArray(a))return a.map(wc);if("object"==typeof a){var l=a.$name||"Object",c=is[l].klass;if(!c)throw new Error("can't deserialize unregistered class "+l);if(c.deserialize)return c.deserialize(a);for(var y=Object.create(c.prototype),w=0,E=Object.keys(a);w<E.length;w+=1){var C=E[w];if("$name"!==C){var N=a[C];y[C]=is[l].shallow.indexOf(C)>=0?N:wc(N)}}return y}throw new Error("can't deserialize object of type "+typeof a)}var No=function(){this.first=!0};No.prototype.update=function(a,l){var c=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=c,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=c,!0):(this.lastFloorZoom>c?(this.lastIntegerZoom=c+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<c&&(this.lastIntegerZoom=c,this.lastIntegerZoomTime=l),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=c,!0))};var ln={"Latin-1 Supplement":function(a){return a>=128&&a<=255},Arabic:function(a){return a>=1536&&a<=1791},"Arabic Supplement":function(a){return a>=1872&&a<=1919},"Arabic Extended-A":function(a){return a>=2208&&a<=2303},"Hangul Jamo":function(a){return a>=4352&&a<=4607},"Unified Canadian Aboriginal Syllabics":function(a){return a>=5120&&a<=5759},Khmer:function(a){return a>=6016&&a<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(a){return a>=6320&&a<=6399},"General Punctuation":function(a){return a>=8192&&a<=8303},"Letterlike Symbols":function(a){return a>=8448&&a<=8527},"Number Forms":function(a){return a>=8528&&a<=8591},"Miscellaneous Technical":function(a){return a>=8960&&a<=9215},"Control Pictures":function(a){return a>=9216&&a<=9279},"Optical Character Recognition":function(a){return a>=9280&&a<=9311},"Enclosed Alphanumerics":function(a){return a>=9312&&a<=9471},"Geometric Shapes":function(a){return a>=9632&&a<=9727},"Miscellaneous Symbols":function(a){return a>=9728&&a<=9983},"Miscellaneous Symbols and Arrows":function(a){return a>=11008&&a<=11263},"CJK Radicals Supplement":function(a){return a>=11904&&a<=12031},"Kangxi Radicals":function(a){return a>=12032&&a<=12255},"Ideographic Description Characters":function(a){return a>=12272&&a<=12287},"CJK Symbols and Punctuation":function(a){return a>=12288&&a<=12351},Hiragana:function(a){return a>=12352&&a<=12447},Katakana:function(a){return a>=12448&&a<=12543},Bopomofo:function(a){return a>=12544&&a<=12591},"Hangul Compatibility Jamo":function(a){return a>=12592&&a<=12687},Kanbun:function(a){return a>=12688&&a<=12703},"Bopomofo Extended":function(a){return a>=12704&&a<=12735},"CJK Strokes":function(a){return a>=12736&&a<=12783},"Katakana Phonetic Extensions":function(a){return a>=12784&&a<=12799},"Enclosed CJK Letters and Months":function(a){return a>=12800&&a<=13055},"CJK Compatibility":function(a){return a>=13056&&a<=13311},"CJK Unified Ideographs Extension A":function(a){return a>=13312&&a<=19903},"Yijing Hexagram Symbols":function(a){return a>=19904&&a<=19967},"CJK Unified Ideographs":function(a){return a>=19968&&a<=40959},"Yi Syllables":function(a){return a>=40960&&a<=42127},"Yi Radicals":function(a){return a>=42128&&a<=42191},"Hangul Jamo Extended-A":function(a){return a>=43360&&a<=43391},"Hangul Syllables":function(a){return a>=44032&&a<=55215},"Hangul Jamo Extended-B":function(a){return a>=55216&&a<=55295},"Private Use Area":function(a){return a>=57344&&a<=63743},"CJK Compatibility Ideographs":function(a){return a>=63744&&a<=64255},"Arabic Presentation Forms-A":function(a){return a>=64336&&a<=65023},"Vertical Forms":function(a){return a>=65040&&a<=65055},"CJK Compatibility Forms":function(a){return a>=65072&&a<=65103},"Small Form Variants":function(a){return a>=65104&&a<=65135},"Arabic Presentation Forms-B":function(a){return a>=65136&&a<=65279},"Halfwidth and Fullwidth Forms":function(a){return a>=65280&&a<=65519}};function ud(a){for(var l=0,c=a;l<c.length;l+=1)if(cd(c[l].charCodeAt(0)))return!0;return!1}function cd(a){return!(746!==a&&747!==a&&(a<4352||!(ln["Bopomofo Extended"](a)||ln.Bopomofo(a)||ln["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||ln["CJK Compatibility Ideographs"](a)||ln["CJK Compatibility"](a)||ln["CJK Radicals Supplement"](a)||ln["CJK Strokes"](a)||!(!ln["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||12336===a)||ln["CJK Unified Ideographs Extension A"](a)||ln["CJK Unified Ideographs"](a)||ln["Enclosed CJK Letters and Months"](a)||ln["Hangul Compatibility Jamo"](a)||ln["Hangul Jamo Extended-A"](a)||ln["Hangul Jamo Extended-B"](a)||ln["Hangul Jamo"](a)||ln["Hangul Syllables"](a)||ln.Hiragana(a)||ln["Ideographic Description Characters"](a)||ln.Kanbun(a)||ln["Kangxi Radicals"](a)||ln["Katakana Phonetic Extensions"](a)||ln.Katakana(a)&&12540!==a||!(!ln["Halfwidth and Fullwidth Forms"](a)||65288===a||65289===a||65293===a||a>=65306&&a<=65310||65339===a||65341===a||65343===a||a>=65371&&a<=65503||65507===a||a>=65512&&a<=65519)||!(!ln["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||ln["Unified Canadian Aboriginal Syllabics"](a)||ln["Unified Canadian Aboriginal Syllabics Extended"](a)||ln["Vertical Forms"](a)||ln["Yijing Hexagram Symbols"](a)||ln["Yi Syllables"](a)||ln["Yi Radicals"](a))))}function Ps(a){return!(cd(a)||(l=a,ln["Latin-1 Supplement"](l)&&(167===l||169===l||174===l||177===l||188===l||189===l||190===l||215===l||247===l)||ln["General Punctuation"](l)&&(8214===l||8224===l||8225===l||8240===l||8241===l||8251===l||8252===l||8258===l||8263===l||8264===l||8265===l||8273===l)||ln["Letterlike Symbols"](l)||ln["Number Forms"](l)||ln["Miscellaneous Technical"](l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||9003===l||l>=9085&&l<=9114||l>=9150&&l<=9165||9167===l||l>=9169&&l<=9179||l>=9186&&l<=9215)||ln["Control Pictures"](l)&&9251!==l||ln["Optical Character Recognition"](l)||ln["Enclosed Alphanumerics"](l)||ln["Geometric Shapes"](l)||ln["Miscellaneous Symbols"](l)&&!(l>=9754&&l<=9759)||ln["Miscellaneous Symbols and Arrows"](l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||ln["CJK Symbols and Punctuation"](l)||ln.Katakana(l)||ln["Private Use Area"](l)||ln["CJK Compatibility Forms"](l)||ln["Small Form Variants"](l)||ln["Halfwidth and Fullwidth Forms"](l)||8734===l||8756===l||8757===l||l>=9984&&l<=10087||l>=10102&&l<=10131||65532===l||65533===l));var l}function Va(a){return a>=1424&&a<=2303||ln["Arabic Presentation Forms-A"](a)||ln["Arabic Presentation Forms-B"](a)}function dd(a,l){return!(!l&&Va(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||ln.Khmer(a))}function fd(a){for(var l=0,c=a;l<c.length;l+=1)if(Va(c[l].charCodeAt(0)))return!0;return!1}var hf=null,Ji="unavailable",bl=null,hd=function(a){a&&"string"==typeof a&&a.indexOf("NetworkError")>-1&&(Ji="error"),hf&&hf(a)};function xc(){pf.fire(new $e("pluginStateChange",{pluginStatus:Ji,pluginURL:bl}))}var pf=new He,el=function(){return Ji},pd=function(){if("deferred"!==Ji||!bl)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ji="loading",xc(),bl&&zr({url:bl},function(a){a?hd(a):(Ji="loaded",xc())})},Ki={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Ji||null!=Ki.applyArabicShaping},isLoading:function(){return"loading"===Ji},setState:function(a){Ji=a.pluginStatus,bl=a.pluginURL},isParsed:function(){return null!=Ki.applyArabicShaping&&null!=Ki.processBidirectionalText&&null!=Ki.processStyledBidirectionalText},getPluginURL:function(){return bl}},ti=function(a,l){this.zoom=a,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new No,this.transition={})};ti.prototype.isSupportedScript=function(a){return function(l,c){for(var y=0,w=l;y<w.length;y+=1)if(!dd(w[y].charCodeAt(0),c))return!1;return!0}(a,Ki.isLoaded())},ti.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ti.prototype.getCrossfadeParameters=function(){var a=this.zoom,l=a-Math.floor(a),c=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*c}:{fromScale:.5,toScale:1,t:1-(1-c)*l}};var tl=function(a,l){this.property=a,this.value=l,this.expression=function(c,y){if(Pi(c))return new mn(c,y);if(br(c)){var w=Xt(c,y);if("error"===w.result)throw new Error(w.value.map(function(C){return C.key+": "+C.message}).join(", "));return w.value}var E=c;return"string"==typeof c&&"color"===y.type&&(E=Jn.parse(c)),{kind:"constant",evaluate:function(){return E}}}(void 0===l?a.specification.default:l,a.specification)};tl.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},tl.prototype.possiblyEvaluate=function(a,l,c){return this.property.possiblyEvaluate(this,a,l,c)};var oi=function(a){this.property=a,this.value=new tl(a,void 0)};oi.prototype.transitioned=function(a,l){return new Eu(this.property,this.value,l,_e({},a.transition,this.transition),a.now)},oi.prototype.untransitioned=function(){return new Eu(this.property,this.value,null,{},0)};var vs=function(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)};vs.prototype.getValue=function(a){return Ue(this._values[a].value.value)},vs.prototype.setValue=function(a,l){this._values.hasOwnProperty(a)||(this._values[a]=new oi(this._values[a].property)),this._values[a].value=new tl(this._values[a].property,null===l?void 0:Ue(l))},vs.prototype.getTransition=function(a){return Ue(this._values[a].transition)},vs.prototype.setTransition=function(a,l){this._values.hasOwnProperty(a)||(this._values[a]=new oi(this._values[a].property)),this._values[a].transition=Ue(l)||void 0},vs.prototype.serialize=function(){for(var a={},l=0,c=Object.keys(this._values);l<c.length;l+=1){var y=c[l],w=this.getValue(y);void 0!==w&&(a[y]=w);var E=this.getTransition(y);void 0!==E&&(a[y+"-transition"]=E)}return a},vs.prototype.transitioned=function(a,l){for(var c=new nl(this._properties),y=0,w=Object.keys(this._values);y<w.length;y+=1){var E=w[y];c._values[E]=this._values[E].transitioned(a,l._values[E])}return c},vs.prototype.untransitioned=function(){for(var a=new nl(this._properties),l=0,c=Object.keys(this._values);l<c.length;l+=1){var y=c[l];a._values[y]=this._values[y].untransitioned()}return a};var Eu=function(a,l,c,y,w){this.property=a,this.value=l,this.begin=w+y.delay||0,this.end=this.begin+y.duration||0,a.specification.transition&&(y.delay||y.duration)&&(this.prior=c)};Eu.prototype.possiblyEvaluate=function(a,l,c){var y=a.now||0,w=this.value.possiblyEvaluate(a,l,c),E=this.prior;if(E){if(y>this.end)return this.prior=null,w;if(this.value.isDataDriven())return this.prior=null,w;if(y<this.begin)return E.possiblyEvaluate(a,l,c);var C=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(E.possiblyEvaluate(a,l,c),w,function(N){if(N<=0)return 0;if(N>=1)return 1;var q=N*N,Q=q*N;return 4*(N<.5?Q:3*(N-q)+Q-.75)}(C))}return w};var nl=function(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)};nl.prototype.possiblyEvaluate=function(a,l,c){for(var y=new Su(this._properties),w=0,E=Object.keys(this._values);w<E.length;w+=1){var C=E[w];y._values[C]=this._values[C].possiblyEvaluate(a,l,c)}return y},nl.prototype.hasTransition=function(){for(var a=0,l=Object.keys(this._values);a<l.length;a+=1)if(this._values[l[a]].prior)return!0;return!1};var ru=function(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)};ru.prototype.getValue=function(a){return Ue(this._values[a].value)},ru.prototype.setValue=function(a,l){this._values[a]=new tl(this._values[a].property,null===l?void 0:Ue(l))},ru.prototype.serialize=function(){for(var a={},l=0,c=Object.keys(this._values);l<c.length;l+=1){var y=c[l],w=this.getValue(y);void 0!==w&&(a[y]=w)}return a},ru.prototype.possiblyEvaluate=function(a,l,c){for(var y=new Su(this._properties),w=0,E=Object.keys(this._values);w<E.length;w+=1){var C=E[w];y._values[C]=this._values[C].possiblyEvaluate(a,l,c)}return y};var _i=function(a,l,c){this.property=a,this.value=l,this.parameters=c};_i.prototype.isConstant=function(){return"constant"===this.value.kind},_i.prototype.constantOr=function(a){return"constant"===this.value.kind?this.value.value:a},_i.prototype.evaluate=function(a,l,c,y){return this.property.evaluate(this.value,this.parameters,a,l,c,y)};var Su=function(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)};Su.prototype.get=function(a){return this._values[a]};var an=function(a){this.specification=a};an.prototype.possiblyEvaluate=function(a,l){return a.expression.evaluate(l)},an.prototype.interpolate=function(a,l,c){var y=Oe[this.specification.type];return y?y(a,l,c):a};var zn=function(a,l){this.specification=a,this.overrides=l};zn.prototype.possiblyEvaluate=function(a,l,c,y){return new _i(this,"constant"===a.expression.kind||"camera"===a.expression.kind?{kind:"constant",value:a.expression.evaluate(l,null,{},c,y)}:a.expression,l)},zn.prototype.interpolate=function(a,l,c){if("constant"!==a.value.kind||"constant"!==l.value.kind)return a;if(void 0===a.value.value||void 0===l.value.value)return new _i(this,{kind:"constant",value:void 0},a.parameters);var y=Oe[this.specification.type];return y?new _i(this,{kind:"constant",value:y(a.value.value,l.value.value,c)},a.parameters):a},zn.prototype.evaluate=function(a,l,c,y,w,E){return"constant"===a.kind?a.value:a.evaluate(l,c,y,w,E)};var eo=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.possiblyEvaluate=function(c,y,w,E){if(void 0===c.value)return new _i(this,{kind:"constant",value:void 0},y);if("constant"===c.expression.kind){var C=c.expression.evaluate(y,null,{},w,E),N="resolvedImage"===c.property.specification.type&&"string"!=typeof C?C.name:C,q=this._calculate(N,N,N,y);return new _i(this,{kind:"constant",value:q},y)}if("camera"===c.expression.kind){var Q=this._calculate(c.expression.evaluate({zoom:y.zoom-1}),c.expression.evaluate({zoom:y.zoom}),c.expression.evaluate({zoom:y.zoom+1}),y);return new _i(this,{kind:"constant",value:Q},y)}return new _i(this,c.expression,y)},l.prototype.evaluate=function(c,y,w,E,C,N){if("source"===c.kind){var q=c.evaluate(y,w,E,C,N);return this._calculate(q,q,q,y)}return"composite"===c.kind?this._calculate(c.evaluate({zoom:Math.floor(y.zoom)-1},w,E),c.evaluate({zoom:Math.floor(y.zoom)},w,E),c.evaluate({zoom:Math.floor(y.zoom)+1},w,E),y):c.value},l.prototype._calculate=function(c,y,w,E){return E.zoom>E.zoomHistory.lastIntegerZoom?{from:c,to:y}:{from:w,to:y}},l.prototype.interpolate=function(c){return c},l}(zn),Hs=function(a){this.specification=a};Hs.prototype.possiblyEvaluate=function(a,l,c,y){if(void 0!==a.value){if("constant"===a.expression.kind){var w=a.expression.evaluate(l,null,{},c,y);return this._calculate(w,w,w,l)}return this._calculate(a.expression.evaluate(new ti(Math.floor(l.zoom-1),l)),a.expression.evaluate(new ti(Math.floor(l.zoom),l)),a.expression.evaluate(new ti(Math.floor(l.zoom+1),l)),l)}},Hs.prototype._calculate=function(a,l,c,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:a,to:l}:{from:c,to:l}},Hs.prototype.interpolate=function(a){return a};var rl=function(a){this.specification=a};rl.prototype.possiblyEvaluate=function(a,l,c,y){return!!a.expression.evaluate(l,null,{},c,y)},rl.prototype.interpolate=function(){return!1};var aa=function(a){for(var l in this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],a){var c=a[l];c.specification.overridable&&this.overridableProperties.push(l);var y=this.defaultPropertyValues[l]=new tl(c,void 0),w=this.defaultTransitionablePropertyValues[l]=new oi(c);this.defaultTransitioningPropertyValues[l]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=y.possiblyEvaluate({})}};on("DataDrivenProperty",zn),on("DataConstantProperty",an),on("CrossFadedDataDrivenProperty",eo),on("CrossFadedProperty",Hs),on("ColorRampProperty",rl);var lo=function(a){function l(c,y){if(a.call(this),this.id=c.id,this.type=c.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==c.type&&(this.metadata=c.metadata,this.minzoom=c.minzoom,this.maxzoom=c.maxzoom,"background"!==c.type&&(this.source=c.source,this.sourceLayer=c["source-layer"],this.filter=c.filter),y.layout&&(this._unevaluatedLayout=new ru(y.layout)),y.paint)){for(var w in this._transitionablePaint=new vs(y.paint),c.paint)this.setPaintProperty(w,c.paint[w],{validate:!1});for(var E in c.layout)this.setLayoutProperty(E,c.layout[E],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Su(y.paint)}}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},l.prototype.getLayoutProperty=function(c){return"visibility"===c?this.visibility:this._unevaluatedLayout.getValue(c)},l.prototype.setLayoutProperty=function(c,y,w){void 0===w&&(w={}),null!=y&&this._validate(nu,"layers."+this.id+".layout."+c,c,y,w)||("visibility"!==c?this._unevaluatedLayout.setValue(c,y):this.visibility=y)},l.prototype.getPaintProperty=function(c){return Je(c,"-transition")?this._transitionablePaint.getTransition(c.slice(0,-11)):this._transitionablePaint.getValue(c)},l.prototype.setPaintProperty=function(c,y,w){if(void 0===w&&(w={}),null!=y&&this._validate(tu,"layers."+this.id+".paint."+c,c,y,w))return!1;if(Je(c,"-transition"))return this._transitionablePaint.setTransition(c.slice(0,-11),y||void 0),!1;var E=this._transitionablePaint._values[c],C="cross-faded-data-driven"===E.property.specification["property-type"],N=E.value.isDataDriven(),q=E.value;this._transitionablePaint.setValue(c,y),this._handleSpecialPaintPropertyUpdate(c);var Q=this._transitionablePaint._values[c].value;return Q.isDataDriven()||N||C||this._handleOverridablePaintPropertyUpdate(c,q,Q)},l.prototype._handleSpecialPaintPropertyUpdate=function(c){},l.prototype._handleOverridablePaintPropertyUpdate=function(c,y,w){return!1},l.prototype.isHidden=function(c){return!!(this.minzoom&&c<this.minzoom)||!!(this.maxzoom&&c>=this.maxzoom)||"none"===this.visibility},l.prototype.updateTransitions=function(c){this._transitioningPaint=this._transitionablePaint.transitioned(c,this._transitioningPaint)},l.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},l.prototype.recalculate=function(c,y){c.getCrossfadeParameters&&(this._crossfadeParameters=c.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(c,void 0,y)),this.paint=this._transitioningPaint.possiblyEvaluate(c,void 0,y)},l.prototype.serialize=function(){var c={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(c.layout=c.layout||{},c.layout.visibility=this.visibility),Ct(c,function(y,w){return!(void 0===y||"layout"===w&&!Object.keys(y).length||"paint"===w&&!Object.keys(y).length)})},l.prototype._validate=function(c,y,w,E,C){return void 0===C&&(C={}),(!C||!1!==C.validate)&&zl(this,c.call(wu,{key:y,layerType:this.type,objectKey:w,value:E,styleSpec:xe,style:{glyphs:!0,sprite:!0}}))},l.prototype.is3D=function(){return!1},l.prototype.isTileClipped=function(){return!1},l.prototype.hasOffscreenPass=function(){return!1},l.prototype.resize=function(){},l.prototype.isStateDependent=function(){for(var c in this.paint._values){var y=this.paint.get(c);if(y instanceof _i&&Ho(y.property.specification)&&("source"===y.value.kind||"composite"===y.value.kind)&&y.value.isStateDependent)return!0}return!1},l}(He),_h={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},il=function(a,l){this._structArray=a,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ni=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Yi(a,l){void 0===l&&(l=1);var c=0,y=0;return{members:a.map(function(w){var E=_h[w.type].BYTES_PER_ELEMENT,C=c=md(c,Math.max(l,E)),N=w.components||1;return y=Math.max(y,E),c+=E*N,{name:w.name,type:w.type,components:N,offset:C}}),size:md(c,Math.max(y,l)),alignment:l}}function md(a,l){return Math.ceil(a/l)*l}Ni.serialize=function(a,l){return a._trim(),l&&(a.isTransferred=!0,l.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}},Ni.deserialize=function(a){var l=Object.create(this.prototype);return l.arrayBuffer=a.arrayBuffer,l.length=a.length,l.capacity=a.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l},Ni.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ni.prototype.clear=function(){this.length=0},Ni.prototype.resize=function(a){this.reserve(a),this.length=a},Ni.prototype.reserve=function(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}},Ni.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Cu=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(c,y){var w=this.length;return this.resize(w+1),this.emplace(w,c,y)},l.prototype.emplace=function(c,y,w){var E=2*c;return this.int16[E+0]=y,this.int16[E+1]=w,c},l}(Ni);Cu.prototype.bytesPerElement=4,on("StructArrayLayout2i4",Cu);var Kn=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(c,y,w,E){var C=this.length;return this.resize(C+1),this.emplace(C,c,y,w,E)},l.prototype.emplace=function(c,y,w,E,C){var N=4*c;return this.int16[N+0]=y,this.int16[N+1]=w,this.int16[N+2]=E,this.int16[N+3]=C,c},l}(Ni);Kn.prototype.bytesPerElement=8,on("StructArrayLayout4i8",Kn);var os=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(c,y,w,E,C,N){var q=this.length;return this.resize(q+1),this.emplace(q,c,y,w,E,C,N)},l.prototype.emplace=function(c,y,w,E,C,N,q){var Q=6*c;return this.int16[Q+0]=y,this.int16[Q+1]=w,this.int16[Q+2]=E,this.int16[Q+3]=C,this.int16[Q+4]=N,this.int16[Q+5]=q,c},l}(Ni);os.prototype.bytesPerElement=12,on("StructArrayLayout2i4i12",os);var mf=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(c,y,w,E,C,N){var q=this.length;return this.resize(q+1),this.emplace(q,c,y,w,E,C,N)},l.prototype.emplace=function(c,y,w,E,C,N,q){var Q=4*c,ne=8*c;return this.int16[Q+0]=y,this.int16[Q+1]=w,this.uint8[ne+4]=E,this.uint8[ne+5]=C,this.uint8[ne+6]=N,this.uint8[ne+7]=q,c},l}(Ni);mf.prototype.bytesPerElement=8,on("StructArrayLayout2i4ub8",mf);var Iu=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(c,y){var w=this.length;return this.resize(w+1),this.emplace(w,c,y)},l.prototype.emplace=function(c,y,w){var E=2*c;return this.float32[E+0]=y,this.float32[E+1]=w,c},l}(Ni);Iu.prototype.bytesPerElement=8,on("StructArrayLayout2f8",Iu);var Bl=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(c,y,w,E,C,N,q,Q,ne,re){var ue=this.length;return this.resize(ue+1),this.emplace(ue,c,y,w,E,C,N,q,Q,ne,re)},l.prototype.emplace=function(c,y,w,E,C,N,q,Q,ne,re,ue){var he=10*c;return this.uint16[he+0]=y,this.uint16[he+1]=w,this.uint16[he+2]=E,this.uint16[he+3]=C,this.uint16[he+4]=N,this.uint16[he+5]=q,this.uint16[he+6]=Q,this.uint16[he+7]=ne,this.uint16[he+8]=re,this.uint16[he+9]=ue,c},l}(Ni);Bl.prototype.bytesPerElement=20,on("StructArrayLayout10ui20",Bl);var Yu=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(c,y,w,E,C,N,q,Q,ne,re,ue,he){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,c,y,w,E,C,N,q,Q,ne,re,ue,he)},l.prototype.emplace=function(c,y,w,E,C,N,q,Q,ne,re,ue,he,Ie){var Pe=12*c;return this.int16[Pe+0]=y,this.int16[Pe+1]=w,this.int16[Pe+2]=E,this.int16[Pe+3]=C,this.uint16[Pe+4]=N,this.uint16[Pe+5]=q,this.uint16[Pe+6]=Q,this.uint16[Pe+7]=ne,this.int16[Pe+8]=re,this.int16[Pe+9]=ue,this.int16[Pe+10]=he,this.int16[Pe+11]=Ie,c},l}(Ni);Yu.prototype.bytesPerElement=24,on("StructArrayLayout4i4ui4i24",Yu);var Xu=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(c,y,w){var E=this.length;return this.resize(E+1),this.emplace(E,c,y,w)},l.prototype.emplace=function(c,y,w,E){var C=3*c;return this.float32[C+0]=y,this.float32[C+1]=w,this.float32[C+2]=E,c},l}(Ni);Xu.prototype.bytesPerElement=12,on("StructArrayLayout3f12",Xu);var gf=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(c){var y=this.length;return this.resize(y+1),this.emplace(y,c)},l.prototype.emplace=function(c,y){return this.uint32[1*c+0]=y,c},l}(Ni);gf.prototype.bytesPerElement=4,on("StructArrayLayout1ul4",gf);var Ec=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(c,y,w,E,C,N,q,Q,ne){var re=this.length;return this.resize(re+1),this.emplace(re,c,y,w,E,C,N,q,Q,ne)},l.prototype.emplace=function(c,y,w,E,C,N,q,Q,ne,re){var ue=10*c,he=5*c;return this.int16[ue+0]=y,this.int16[ue+1]=w,this.int16[ue+2]=E,this.int16[ue+3]=C,this.int16[ue+4]=N,this.int16[ue+5]=q,this.uint32[he+3]=Q,this.uint16[ue+8]=ne,this.uint16[ue+9]=re,c},l}(Ni);Ec.prototype.bytesPerElement=20,on("StructArrayLayout6i1ul2ui20",Ec);var kt=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(c,y,w,E,C,N){var q=this.length;return this.resize(q+1),this.emplace(q,c,y,w,E,C,N)},l.prototype.emplace=function(c,y,w,E,C,N,q){var Q=6*c;return this.int16[Q+0]=y,this.int16[Q+1]=w,this.int16[Q+2]=E,this.int16[Q+3]=C,this.int16[Q+4]=N,this.int16[Q+5]=q,c},l}(Ni);kt.prototype.bytesPerElement=12,on("StructArrayLayout2i2i2i12",kt);var ni=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(c,y,w,E,C){var N=this.length;return this.resize(N+1),this.emplace(N,c,y,w,E,C)},l.prototype.emplace=function(c,y,w,E,C,N){var q=4*c,Q=8*c;return this.float32[q+0]=y,this.float32[q+1]=w,this.float32[q+2]=E,this.int16[Q+6]=C,this.int16[Q+7]=N,c},l}(Ni);ni.prototype.bytesPerElement=16,on("StructArrayLayout2f1f2i16",ni);var yf=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(c,y,w,E){var C=this.length;return this.resize(C+1),this.emplace(C,c,y,w,E)},l.prototype.emplace=function(c,y,w,E,C){var N=12*c,q=3*c;return this.uint8[N+0]=y,this.uint8[N+1]=w,this.float32[q+1]=E,this.float32[q+2]=C,c},l}(Ni);yf.prototype.bytesPerElement=12,on("StructArrayLayout2ub2f12",yf);var Ds=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(c,y,w){var E=this.length;return this.resize(E+1),this.emplace(E,c,y,w)},l.prototype.emplace=function(c,y,w,E){var C=3*c;return this.uint16[C+0]=y,this.uint16[C+1]=w,this.uint16[C+2]=E,c},l}(Ni);Ds.prototype.bytesPerElement=6,on("StructArrayLayout3ui6",Ds);var Ao=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(c,y,w,E,C,N,q,Q,ne,re,ue,he,Ie,Pe,qe,Be,it){var st=this.length;return this.resize(st+1),this.emplace(st,c,y,w,E,C,N,q,Q,ne,re,ue,he,Ie,Pe,qe,Be,it)},l.prototype.emplace=function(c,y,w,E,C,N,q,Q,ne,re,ue,he,Ie,Pe,qe,Be,it,st){var dt=24*c,pt=12*c,Pt=48*c;return this.int16[dt+0]=y,this.int16[dt+1]=w,this.uint16[dt+2]=E,this.uint16[dt+3]=C,this.uint32[pt+2]=N,this.uint32[pt+3]=q,this.uint32[pt+4]=Q,this.uint16[dt+10]=ne,this.uint16[dt+11]=re,this.uint16[dt+12]=ue,this.float32[pt+7]=he,this.float32[pt+8]=Ie,this.uint8[Pt+36]=Pe,this.uint8[Pt+37]=qe,this.uint8[Pt+38]=Be,this.uint32[pt+10]=it,this.int16[dt+22]=st,c},l}(Ni);Ao.prototype.bytesPerElement=48,on("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ao);var iu=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(c,y,w,E,C,N,q,Q,ne,re,ue,he,Ie,Pe,qe,Be,it,st,dt,pt,Pt,Vt,Kt,fn,Qt,Tn,en,sr){var Bn=this.length;return this.resize(Bn+1),this.emplace(Bn,c,y,w,E,C,N,q,Q,ne,re,ue,he,Ie,Pe,qe,Be,it,st,dt,pt,Pt,Vt,Kt,fn,Qt,Tn,en,sr)},l.prototype.emplace=function(c,y,w,E,C,N,q,Q,ne,re,ue,he,Ie,Pe,qe,Be,it,st,dt,pt,Pt,Vt,Kt,fn,Qt,Tn,en,sr,Bn){var bn=34*c,lr=17*c;return this.int16[bn+0]=y,this.int16[bn+1]=w,this.int16[bn+2]=E,this.int16[bn+3]=C,this.int16[bn+4]=N,this.int16[bn+5]=q,this.int16[bn+6]=Q,this.int16[bn+7]=ne,this.uint16[bn+8]=re,this.uint16[bn+9]=ue,this.uint16[bn+10]=he,this.uint16[bn+11]=Ie,this.uint16[bn+12]=Pe,this.uint16[bn+13]=qe,this.uint16[bn+14]=Be,this.uint16[bn+15]=it,this.uint16[bn+16]=st,this.uint16[bn+17]=dt,this.uint16[bn+18]=pt,this.uint16[bn+19]=Pt,this.uint16[bn+20]=Vt,this.uint16[bn+21]=Kt,this.uint16[bn+22]=fn,this.uint32[lr+12]=Qt,this.float32[lr+13]=Tn,this.float32[lr+14]=en,this.float32[lr+15]=sr,this.float32[lr+16]=Bn,c},l}(Ni);iu.prototype.bytesPerElement=68,on("StructArrayLayout8i15ui1ul4f68",iu);var Da=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(c){var y=this.length;return this.resize(y+1),this.emplace(y,c)},l.prototype.emplace=function(c,y){return this.float32[1*c+0]=y,c},l}(Ni);Da.prototype.bytesPerElement=4,on("StructArrayLayout1f4",Da);var $s=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(c,y,w){var E=this.length;return this.resize(E+1),this.emplace(E,c,y,w)},l.prototype.emplace=function(c,y,w,E){var C=3*c;return this.int16[C+0]=y,this.int16[C+1]=w,this.int16[C+2]=E,c},l}(Ni);$s.prototype.bytesPerElement=6,on("StructArrayLayout3i6",$s);var Sc=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(c,y,w){var E=this.length;return this.resize(E+1),this.emplace(E,c,y,w)},l.prototype.emplace=function(c,y,w,E){var C=4*c;return this.uint32[2*c+0]=y,this.uint16[C+2]=w,this.uint16[C+3]=E,c},l}(Ni);Sc.prototype.bytesPerElement=8,on("StructArrayLayout1ul2ui8",Sc);var Tu=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(c,y){var w=this.length;return this.resize(w+1),this.emplace(w,c,y)},l.prototype.emplace=function(c,y,w){var E=2*c;return this.uint16[E+0]=y,this.uint16[E+1]=w,c},l}(Ni);Tu.prototype.bytesPerElement=4,on("StructArrayLayout2ui4",Tu);var vf=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(c){var y=this.length;return this.resize(y+1),this.emplace(y,c)},l.prototype.emplace=function(c,y){return this.uint16[1*c+0]=y,c},l}(Ni);vf.prototype.bytesPerElement=2,on("StructArrayLayout1ui2",vf);var f=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(c,y,w,E){var C=this.length;return this.resize(C+1),this.emplace(C,c,y,w,E)},l.prototype.emplace=function(c,y,w,E,C){var N=4*c;return this.float32[N+0]=y,this.float32[N+1]=w,this.float32[N+2]=E,this.float32[N+3]=C,c},l}(Ni);f.prototype.bytesPerElement=16,on("StructArrayLayout4f16",f);var p=function(a){function l(){a.apply(this,arguments)}a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l;var c={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return c.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},c.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},c.x1.get=function(){return this._structArray.int16[this._pos2+2]},c.y1.get=function(){return this._structArray.int16[this._pos2+3]},c.x2.get=function(){return this._structArray.int16[this._pos2+4]},c.y2.get=function(){return this._structArray.int16[this._pos2+5]},c.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},c.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},c.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},c.anchorPoint.get=function(){return new T(this.anchorPointX,this.anchorPointY)},Object.defineProperties(l.prototype,c),l}(il);p.prototype.size=20;var h=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.get=function(c){return new p(this,c)},l}(Ec);on("CollisionBoxArray",h);var v=function(a){function l(){a.apply(this,arguments)}a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l;var c={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return c.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},c.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},c.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},c.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},c.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},c.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},c.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},c.segment.get=function(){return this._structArray.uint16[this._pos2+10]},c.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},c.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},c.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},c.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},c.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},c.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},c.placedOrientation.set=function(y){this._structArray.uint8[this._pos1+37]=y},c.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},c.hidden.set=function(y){this._structArray.uint8[this._pos1+38]=y},c.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},c.crossTileID.set=function(y){this._structArray.uint32[this._pos4+10]=y},c.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(l.prototype,c),l}(il);v.prototype.size=48;var S=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.get=function(c){return new v(this,c)},l}(Ao);on("PlacedSymbolArray",S);var P=function(a){function l(){a.apply(this,arguments)}a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l;var c={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return c.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},c.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},c.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},c.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},c.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},c.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},c.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},c.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},c.key.get=function(){return this._structArray.uint16[this._pos2+8]},c.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},c.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},c.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},c.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},c.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},c.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},c.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},c.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},c.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},c.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},c.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},c.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},c.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},c.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},c.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},c.crossTileID.set=function(y){this._structArray.uint32[this._pos4+12]=y},c.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},c.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},c.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},c.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(l.prototype,c),l}(il);P.prototype.size=68;var O=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.get=function(c){return new P(this,c)},l}(iu);on("SymbolInstanceArray",O);var H=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.getoffsetX=function(c){return this.float32[1*c+0]},l}(Da);on("GlyphOffsetArray",H);var te=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.getx=function(c){return this.int16[3*c+0]},l.prototype.gety=function(c){return this.int16[3*c+1]},l.prototype.gettileUnitDistanceFromAnchor=function(c){return this.int16[3*c+2]},l}($s);on("SymbolLineVertexArray",te);var ae=function(a){function l(){a.apply(this,arguments)}a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l;var c={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return c.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},c.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},c.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(l.prototype,c),l}(il);ae.prototype.size=8;var ge=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.get=function(c){return new ae(this,c)},l}(Sc);on("FeatureIndexArray",ge);var we=Yi([{name:"a_pos",components:2,type:"Int16"}],4).members,ye=function(a){void 0===a&&(a=[]),this.segments=a};function Le(a,l){return 256*(a=me(Math.floor(a),0,255))+me(Math.floor(l),0,255)}ye.prototype.prepareSegment=function(a,l,c,y){var w=this.segments[this.segments.length-1];return a>ye.MAX_VERTEX_ARRAY_LENGTH&&L("Max vertices per segment is "+ye.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+a),(!w||w.vertexLength+a>ye.MAX_VERTEX_ARRAY_LENGTH||w.sortKey!==y)&&(w={vertexOffset:l.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0},void 0!==y&&(w.sortKey=y),this.segments.push(w)),w},ye.prototype.get=function(){return this.segments},ye.prototype.destroy=function(){for(var a=0,l=this.segments;a<l.length;a+=1){var c=l[a];for(var y in c.vaos)c.vaos[y].destroy()}},ye.simpleSegment=function(a,l,c,y){return new ye([{vertexOffset:a,primitiveOffset:l,vertexLength:c,primitiveLength:y,vaos:{},sortKey:0}])},ye.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,on("SegmentVector",ye);var Re=Yi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Ve=$(function(a){a.exports=function(l,c){var y,w,E,C,N,q,Q,ne;for(w=l.length-(y=3&l.length),E=c,N=3432918353,q=461845907,ne=0;ne<w;)Q=255&l.charCodeAt(ne)|(255&l.charCodeAt(++ne))<<8|(255&l.charCodeAt(++ne))<<16|(255&l.charCodeAt(++ne))<<24,++ne,E=27492+(65535&(C=5*(65535&(E=(E^=Q=(65535&(Q=(Q=(65535&Q)*N+(((Q>>>16)*N&65535)<<16)&4294967295)<<15|Q>>>17))*q+(((Q>>>16)*q&65535)<<16)&4294967295)<<13|E>>>19))+((5*(E>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(Q=0,y){case 3:Q^=(255&l.charCodeAt(ne+2))<<16;case 2:Q^=(255&l.charCodeAt(ne+1))<<8;case 1:E^=Q=(65535&(Q=(Q=(65535&(Q^=255&l.charCodeAt(ne)))*N+(((Q>>>16)*N&65535)<<16)&4294967295)<<15|Q>>>17))*q+(((Q>>>16)*q&65535)<<16)&4294967295}return E^=l.length,E=2246822507*(65535&(E^=E>>>16))+((2246822507*(E>>>16)&65535)<<16)&4294967295,E=3266489909*(65535&(E^=E>>>13))+((3266489909*(E>>>16)&65535)<<16)&4294967295,(E^=E>>>16)>>>0}}),De=$(function(a){a.exports=function(l,c){for(var y,w=l.length,E=c^w,C=0;w>=4;)y=1540483477*(65535&(y=255&l.charCodeAt(C)|(255&l.charCodeAt(++C))<<8|(255&l.charCodeAt(++C))<<16|(255&l.charCodeAt(++C))<<24))+((1540483477*(y>>>16)&65535)<<16),E=1540483477*(65535&E)+((1540483477*(E>>>16)&65535)<<16)^(y=1540483477*(65535&(y^=y>>>24))+((1540483477*(y>>>16)&65535)<<16)),w-=4,++C;switch(w){case 3:E^=(255&l.charCodeAt(C+2))<<16;case 2:E^=(255&l.charCodeAt(C+1))<<8;case 1:E=1540483477*(65535&(E^=255&l.charCodeAt(C)))+((1540483477*(E>>>16)&65535)<<16)}return E=1540483477*(65535&(E^=E>>>13))+((1540483477*(E>>>16)&65535)<<16),(E^=E>>>15)>>>0}}),ze=Ve,Ye=De;ze.murmur3=Ve,ze.murmur2=Ye;var ot=function(){this.ids=[],this.positions=[],this.indexed=!1};ot.prototype.add=function(a,l,c,y){this.ids.push(gt(a)),this.positions.push(l,c,y)},ot.prototype.getPositions=function(a){for(var l=gt(a),c=0,y=this.ids.length-1;c<y;){var w=c+y>>1;this.ids[w]>=l?y=w:c=w+1}for(var E=[];this.ids[c]===l;)E.push({index:this.positions[3*c],start:this.positions[3*c+1],end:this.positions[3*c+2]}),c++;return E},ot.serialize=function(a,l){var c=new Float64Array(a.ids),y=new Uint32Array(a.positions);return function w(E,C,N,q){for(;N<q;){for(var Q=E[N+q>>1],ne=N-1,re=q+1;;){do{ne++}while(E[ne]<Q);do{re--}while(E[re]>Q);if(ne>=re)break;vt(E,ne,re),vt(C,3*ne,3*re),vt(C,3*ne+1,3*re+1),vt(C,3*ne+2,3*re+2)}re-N<q-re?(w(E,C,N,re),N=re+1):(w(E,C,re+1,q),q=re)}}(c,y,0,c.length-1),l&&l.push(c.buffer,y.buffer),{ids:c,positions:y}},ot.deserialize=function(a){var l=new ot;return l.ids=a.ids,l.positions=a.positions,l.indexed=!0,l};var yt=Math.pow(2,53)-1;function gt(a){var l=+a;return!isNaN(l)&&l<=yt?l:ze(String(a))}function vt(a,l,c){var y=a[l];a[l]=a[c],a[c]=y}on("FeaturePositionMap",ot);var Tt=function(a,l){this.gl=a.gl,this.location=l},Gt=function(a){function l(c,y){a.call(this,c,y),this.current=0}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.set=function(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))},l}(Tt),Bt=function(a){function l(c,y){a.call(this,c,y),this.current=0}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.set=function(c){this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))},l}(Tt),$t=function(a){function l(c,y){a.call(this,c,y),this.current=[0,0]}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.set=function(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))},l}(Tt),wn=function(a){function l(c,y){a.call(this,c,y),this.current=[0,0,0]}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.set=function(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))},l}(Tt),rn=function(a){function l(c,y){a.call(this,c,y),this.current=[0,0,0,0]}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.set=function(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3]))},l}(Tt),Rn=function(a){function l(c,y){a.call(this,c,y),this.current=Jn.transparent}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.set=function(c){c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a))},l}(Tt),jr=new Float32Array(16),un=function(a){function l(c,y){a.call(this,c,y),this.current=jr}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.set=function(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(var y=1;y<16;y++)if(c[y]!==this.current[y]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}},l}(Tt);function er(a){return[Le(255*a.r,255*a.g),Le(255*a.b,255*a.a)]}var xr=function(a,l,c){this.value=a,this.uniformNames=l.map(function(y){return"u_"+y}),this.type=c};xr.prototype.setUniform=function(a,l,c){a.set(c.constantOr(this.value))},xr.prototype.getBinding=function(a,l,c){return"color"===this.type?new Rn(a,l):new Bt(a,l)};var tr=function(a,l){this.uniformNames=l.map(function(c){return"u_"+c}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};tr.prototype.setConstantPatternPositions=function(a,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=a.tlbr},tr.prototype.setUniform=function(a,l,c,y){var w="u_pattern_to"===y?this.patternTo:"u_pattern_from"===y?this.patternFrom:"u_pixel_ratio_to"===y?this.pixelRatioTo:"u_pixel_ratio_from"===y?this.pixelRatioFrom:null;w&&a.set(w)},tr.prototype.getBinding=function(a,l,c){return"u_pattern"===c.substr(0,9)?new rn(a,l):new Bt(a,l)};var qn=function(a,l,c,y){this.expression=a,this.type=c,this.maxValue=0,this.paintVertexAttributes=l.map(function(w){return{name:"a_"+w,type:"Float32",components:"color"===c?2:1,offset:0}}),this.paintVertexArray=new y};qn.prototype.populatePaintArray=function(a,l,c,y,w){var E=this.paintVertexArray.length,C=this.expression.evaluate(new ti(0),l,{},y,[],w);this.paintVertexArray.resize(a),this._setPaintValue(E,a,C)},qn.prototype.updatePaintArray=function(a,l,c,y){var w=this.expression.evaluate({zoom:0},c,y);this._setPaintValue(a,l,w)},qn.prototype._setPaintValue=function(a,l,c){if("color"===this.type)for(var y=er(c),w=a;w<l;w++)this.paintVertexArray.emplace(w,y[0],y[1]);else{for(var E=a;E<l;E++)this.paintVertexArray.emplace(E,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}},qn.prototype.upload=function(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},qn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var $n=function(a,l,c,y,w,E){this.expression=a,this.uniformNames=l.map(function(C){return"u_"+C+"_t"}),this.type=c,this.useIntegerZoom=y,this.zoom=w,this.maxValue=0,this.paintVertexAttributes=l.map(function(C){return{name:"a_"+C,type:"Float32",components:"color"===c?4:2,offset:0}}),this.paintVertexArray=new E};$n.prototype.populatePaintArray=function(a,l,c,y,w){var E=this.expression.evaluate(new ti(this.zoom),l,{},y,[],w),C=this.expression.evaluate(new ti(this.zoom+1),l,{},y,[],w),N=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(N,a,E,C)},$n.prototype.updatePaintArray=function(a,l,c,y){var w=this.expression.evaluate({zoom:this.zoom},c,y),E=this.expression.evaluate({zoom:this.zoom+1},c,y);this._setPaintValue(a,l,w,E)},$n.prototype._setPaintValue=function(a,l,c,y){if("color"===this.type)for(var w=er(c),E=er(y),C=a;C<l;C++)this.paintVertexArray.emplace(C,w[0],w[1],E[0],E[1]);else{for(var N=a;N<l;N++)this.paintVertexArray.emplace(N,c,y);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(y))}},$n.prototype.upload=function(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},$n.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},$n.prototype.setUniform=function(a,l){var c=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,y=me(this.expression.interpolationFactor(c,this.zoom,this.zoom+1),0,1);a.set(y)},$n.prototype.getBinding=function(a,l,c){return new Bt(a,l)};var jn=function(a,l,c,y,w,E){this.expression=a,this.type=l,this.useIntegerZoom=c,this.zoom=y,this.layerId=E,this.zoomInPaintVertexArray=new w,this.zoomOutPaintVertexArray=new w};jn.prototype.populatePaintArray=function(a,l,c){var y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(y,a,l.patterns&&l.patterns[this.layerId],c)},jn.prototype.updatePaintArray=function(a,l,c,y,w){this._setPaintValues(a,l,c.patterns&&c.patterns[this.layerId],w)},jn.prototype._setPaintValues=function(a,l,c,y){if(y&&c){var w=y[c.min],E=y[c.mid],C=y[c.max];if(w&&E&&C)for(var N=a;N<l;N++)this.zoomInPaintVertexArray.emplace(N,E.tl[0],E.tl[1],E.br[0],E.br[1],w.tl[0],w.tl[1],w.br[0],w.br[1],E.pixelRatio,w.pixelRatio),this.zoomOutPaintVertexArray.emplace(N,E.tl[0],E.tl[1],E.br[0],E.br[1],C.tl[0],C.tl[1],C.br[0],C.br[1],E.pixelRatio,C.pixelRatio)}},jn.prototype.upload=function(a){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,Re.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,Re.members,this.expression.isStateDependent))},jn.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ln=function(a,l,c){this.binders={},this._buffers=[];var y=[];for(var w in a.paint._values)if(c(w)){var E=a.paint.get(w);if(E instanceof _i&&Ho(E.property.specification)){var C=mo(w,a.type),N=E.value,q=E.property.specification.type,Q=E.property.useIntegerZoom,ne=E.property.specification["property-type"],re="cross-faded"===ne||"cross-faded-data-driven"===ne;if("constant"===N.kind)this.binders[w]=re?new tr(N.value,C):new xr(N.value,C,q),y.push("/u_"+w);else if("source"===N.kind||re){var ue=go(w,q,"source");this.binders[w]=re?new jn(N,q,Q,l,ue,a.id):new qn(N,C,q,ue),y.push("/a_"+w)}else{var he=go(w,q,"composite");this.binders[w]=new $n(N,C,q,Q,l,he),y.push("/z_"+w)}}}this.cacheKey=y.sort().join("")};Ln.prototype.getMaxValue=function(a){var l=this.binders[a];return l instanceof qn||l instanceof $n?l.maxValue:0},Ln.prototype.populatePaintArrays=function(a,l,c,y,w){for(var E in this.binders){var C=this.binders[E];(C instanceof qn||C instanceof $n||C instanceof jn)&&C.populatePaintArray(a,l,c,y,w)}},Ln.prototype.setConstantPatternPositions=function(a,l){for(var c in this.binders){var y=this.binders[c];y instanceof tr&&y.setConstantPatternPositions(a,l)}},Ln.prototype.updatePaintArrays=function(a,l,c,y,w){var E=!1;for(var C in a)for(var N=0,q=l.getPositions(C);N<q.length;N+=1){var Q=q[N],ne=c.feature(Q.index);for(var re in this.binders){var ue=this.binders[re];if((ue instanceof qn||ue instanceof $n||ue instanceof jn)&&!0===ue.expression.isStateDependent){var he=y.paint.get(re);ue.expression=he.value,ue.updatePaintArray(Q.start,Q.end,ne,a[C],w),E=!0}}}return E},Ln.prototype.defines=function(){var a=[];for(var l in this.binders){var c=this.binders[l];(c instanceof xr||c instanceof tr)&&a.push.apply(a,c.uniformNames.map(function(y){return"#define HAS_UNIFORM_"+y}))}return a},Ln.prototype.getBinderAttributes=function(){var a=[];for(var l in this.binders){var c=this.binders[l];if(c instanceof qn||c instanceof $n)for(var y=0;y<c.paintVertexAttributes.length;y++)a.push(c.paintVertexAttributes[y].name);else if(c instanceof jn)for(var w=0;w<Re.members.length;w++)a.push(Re.members[w].name)}return a},Ln.prototype.getBinderUniforms=function(){var a=[];for(var l in this.binders){var c=this.binders[l];if(c instanceof xr||c instanceof tr||c instanceof $n)for(var y=0,w=c.uniformNames;y<w.length;y+=1)a.push(w[y])}return a},Ln.prototype.getPaintVertexBuffers=function(){return this._buffers},Ln.prototype.getUniforms=function(a,l){var c=[];for(var y in this.binders){var w=this.binders[y];if(w instanceof xr||w instanceof tr||w instanceof $n)for(var E=0,C=w.uniformNames;E<C.length;E+=1){var N=C[E];if(l[N]){var q=w.getBinding(a,l[N],N);c.push({name:N,property:y,binding:q})}}}return c},Ln.prototype.setUniforms=function(a,l,c,y){for(var w=0,E=l;w<E.length;w+=1){var C=E[w],N=C.name,q=C.property;this.binders[q].setUniform(C.binding,y,c.get(q),N)}},Ln.prototype.updatePaintBuffers=function(a){for(var l in this._buffers=[],this.binders){var c=this.binders[l];if(a&&c instanceof jn){var y=2===a.fromScale?c.zoomInPaintVertexBuffer:c.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(c instanceof qn||c instanceof $n)&&c.paintVertexBuffer&&this._buffers.push(c.paintVertexBuffer)}},Ln.prototype.upload=function(a){for(var l in this.binders){var c=this.binders[l];(c instanceof qn||c instanceof $n||c instanceof jn)&&c.upload(a)}this.updatePaintBuffers()},Ln.prototype.destroy=function(){for(var a in this.binders){var l=this.binders[a];(l instanceof qn||l instanceof $n||l instanceof jn)&&l.destroy()}};var bi=function(a,l,c){void 0===c&&(c=function(){return!0}),this.programConfigurations={};for(var y=0,w=a;y<w.length;y+=1){var E=w[y];this.programConfigurations[E.id]=new Ln(E,l,c)}this.needsUpload=!1,this._featureMap=new ot,this._bufferOffset=0};function mo(a,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(l+"-","").replace(/-/g,"_")]}function go(a,l,c){var w={"line-pattern":{source:Bl,composite:Bl},"fill-pattern":{source:Bl,composite:Bl},"fill-extrusion-pattern":{source:Bl,composite:Bl}}[a];return w&&w[c]||{color:{source:Iu,composite:f},number:{source:Da,composite:Iu}}[l][c]}bi.prototype.populatePaintArrays=function(a,l,c,y,w,E){for(var C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(a,l,y,w,E);void 0!==l.id&&this._featureMap.add(l.id,c,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0},bi.prototype.updatePaintArrays=function(a,l,c,y){for(var w=0,E=c;w<E.length;w+=1){var C=E[w];this.needsUpload=this.programConfigurations[C.id].updatePaintArrays(a,this._featureMap,l,C,y)||this.needsUpload}},bi.prototype.get=function(a){return this.programConfigurations[a]},bi.prototype.upload=function(a){if(this.needsUpload){for(var l in this.programConfigurations)this.programConfigurations[l].upload(a);this.needsUpload=!1}},bi.prototype.destroy=function(){for(var a in this.programConfigurations)this.programConfigurations[a].destroy()},on("ConstantBinder",xr),on("CrossFadedConstantBinder",tr),on("SourceExpressionBinder",qn),on("CrossFadedCompositeBinder",jn),on("CompositeExpressionBinder",$n),on("ProgramConfiguration",Ln,{omit:["_buffers"]}),on("ProgramConfigurationSet",bi);var uo=Math.pow(2,14)-1,Zo=-uo-1;function yo(a){for(var l=8192/a.extent,c=a.loadGeometry(),y=0;y<c.length;y++)for(var w=c[y],E=0;E<w.length;E++){var C=w[E],N=Math.round(C.x*l),q=Math.round(C.y*l);C.x=me(N,Zo,uo),C.y=me(q,Zo,uo),(N<C.x||N>C.x+1||q<C.y||q>C.y+1)&&L("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return c}function ko(a,l){return{type:a.type,id:a.id,properties:a.properties,geometry:l?yo(a):[]}}function qs(a,l,c,y,w){a.emplaceBack(2*l+(y+1)/2,2*c+(w+1)/2)}var Ga=function(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(l){return l.id}),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new Cu,this.indexArray=new Ds,this.segments=new ye,this.programConfigurations=new bi(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(function(l){return l.isStateDependent()}).map(function(l){return l.id})};function Ha(a,l){for(var c=0;c<a.length;c++)if(as(l,a[c]))return!0;for(var y=0;y<l.length;y++)if(as(a,l[y]))return!0;return!!Ul(a,l)}function jl(a,l,c){return!!as(a,l)||!!wl(l,a,c)}function Ws(a,l){if(1===a.length)return Pu(l,a[0]);for(var c=0;c<l.length;c++)for(var y=l[c],w=0;w<y.length;w++)if(as(a,y[w]))return!0;for(var E=0;E<a.length;E++)if(Pu(l,a[E]))return!0;for(var C=0;C<l.length;C++)if(Ul(a,l[C]))return!0;return!1}function Qu(a,l,c){if(a.length>1){if(Ul(a,l))return!0;for(var y=0;y<l.length;y++)if(wl(l[y],a,c))return!0}for(var w=0;w<a.length;w++)if(wl(a[w],l,c))return!0;return!1}function Ul(a,l){if(0===a.length||0===l.length)return!1;for(var c=0;c<a.length-1;c++)for(var y=a[c],w=a[c+1],E=0;E<l.length-1;E++)if(ou(y,w,l[E],l[E+1]))return!0;return!1}function ou(a,l,c,y){return B(a,c,y)!==B(l,c,y)&&B(a,l,c)!==B(a,l,y)}function wl(a,l,c){var y=c*c;if(1===l.length)return a.distSqr(l[0])<y;for(var w=1;w<l.length;w++)if(ec(a,l[w-1],l[w])<y)return!0;return!1}function ec(a,l,c){var y=l.distSqr(c);if(0===y)return a.distSqr(l);var w=((a.x-l.x)*(c.x-l.x)+(a.y-l.y)*(c.y-l.y))/y;return a.distSqr(w<0?l:w>1?c:c.sub(l)._mult(w)._add(l))}function Pu(a,l){for(var c,y,w,E=!1,C=0;C<a.length;C++)for(var N=0,q=(c=a[C]).length-1;N<c.length;q=N++)(y=c[N]).y>l.y!=(w=c[q]).y>l.y&&l.x<(w.x-y.x)*(l.y-y.y)/(w.y-y.y)+y.x&&(E=!E);return E}function as(a,l){for(var c=!1,y=0,w=a.length-1;y<a.length;w=y++){var E=a[y],C=a[w];E.y>l.y!=C.y>l.y&&l.x<(C.x-E.x)*(l.y-E.y)/(C.y-E.y)+E.x&&(c=!c)}return c}function tc(a,l,c){var y=c[0],w=c[2];if(a.x<y.x&&l.x<y.x||a.x>w.x&&l.x>w.x||a.y<y.y&&l.y<y.y||a.y>w.y&&l.y>w.y)return!1;var E=B(a,l,c[0]);return E!==B(a,l,c[1])||E!==B(a,l,c[2])||E!==B(a,l,c[3])}function Xi(a,l,c){var y=l.paint.get(a).value;return"constant"===y.kind?y.value:c.programConfigurations.get(l.id).getMaxValue(a)}function ol(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function _s(a,l,c,y,w){if(!l[0]&&!l[1])return a;var E=T.convert(l)._mult(w);"viewport"===c&&E._rotate(-y);for(var C=[],N=0;N<a.length;N++)C.push(a[N].sub(E));return C}Ga.prototype.populate=function(a,l,c){var y=this.layers[0],w=[],E=null,C=!1;"circle"===y.type&&(C=!(E=y.layout.get("circle-sort-key")).isConstant());for(var N=0,q=a;N<q.length;N+=1){var Q=q[N],ne=Q.feature,re=Q.id,ue=Q.index,he=Q.sourceLayerIndex,Ie=this.layers[0]._featureFilter.needGeometry,Pe=ko(ne,Ie);if(this.layers[0]._featureFilter.filter(new ti(this.zoom),Pe,c)){var qe=C?E.evaluate(Pe,{},c):void 0,Be={id:re,properties:ne.properties,type:ne.type,sourceLayerIndex:he,index:ue,geometry:Ie?Pe.geometry:yo(ne),patterns:{},sortKey:qe};w.push(Be)}}C&&w.sort(function(fn,Qt){return fn.sortKey-Qt.sortKey});for(var it=0,st=w;it<st.length;it+=1){var dt=st[it],pt=dt.geometry,Pt=dt.index,Vt=dt.sourceLayerIndex,Kt=a[Pt].feature;this.addFeature(dt,pt,Pt,c),l.featureIndex.insert(Kt,pt,Pt,Vt,this.index)}},Ga.prototype.update=function(a,l,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,l,this.stateDependentLayers,c)},Ga.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ga.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ga.prototype.upload=function(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,we),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0},Ga.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ga.prototype.addFeature=function(a,l,c,y){for(var w=0,E=l;w<E.length;w+=1)for(var C=0,N=E[w];C<N.length;C+=1){var q=N[C],Q=q.x,ne=q.y;if(!(Q<0||Q>=8192||ne<0||ne>=8192)){var re=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),ue=re.vertexLength;qs(this.layoutVertexArray,Q,ne,-1,-1),qs(this.layoutVertexArray,Q,ne,1,-1),qs(this.layoutVertexArray,Q,ne,1,1),qs(this.layoutVertexArray,Q,ne,-1,1),this.indexArray.emplaceBack(ue,ue+1,ue+2),this.indexArray.emplaceBack(ue,ue+3,ue+2),re.vertexLength+=4,re.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,c,{},y)},on("CircleBucket",Ga,{omit:["layers"]});var nc=new aa({"circle-sort-key":new zn(xe.layout_circle["circle-sort-key"])}),co={paint:new aa({"circle-radius":new zn(xe.paint_circle["circle-radius"]),"circle-color":new zn(xe.paint_circle["circle-color"]),"circle-blur":new zn(xe.paint_circle["circle-blur"]),"circle-opacity":new zn(xe.paint_circle["circle-opacity"]),"circle-translate":new an(xe.paint_circle["circle-translate"]),"circle-translate-anchor":new an(xe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new an(xe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new an(xe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new zn(xe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new zn(xe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new zn(xe.paint_circle["circle-stroke-opacity"])}),layout:nc},to=typeof Float32Array<"u"?Float32Array:Array;function $a(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function bs(a,l,c){var y=l[0],w=l[1],E=l[2],C=l[3],N=l[4],q=l[5],Q=l[6],ne=l[7],re=l[8],ue=l[9],he=l[10],Ie=l[11],Pe=l[12],qe=l[13],Be=l[14],it=l[15],st=c[0],dt=c[1],pt=c[2],Pt=c[3];return a[0]=st*y+dt*N+pt*re+Pt*Pe,a[1]=st*w+dt*q+pt*ue+Pt*qe,a[2]=st*E+dt*Q+pt*he+Pt*Be,a[3]=st*C+dt*ne+pt*Ie+Pt*it,a[4]=(st=c[4])*y+(dt=c[5])*N+(pt=c[6])*re+(Pt=c[7])*Pe,a[5]=st*w+dt*q+pt*ue+Pt*qe,a[6]=st*E+dt*Q+pt*he+Pt*Be,a[7]=st*C+dt*ne+pt*Ie+Pt*it,a[8]=(st=c[8])*y+(dt=c[9])*N+(pt=c[10])*re+(Pt=c[11])*Pe,a[9]=st*w+dt*q+pt*ue+Pt*qe,a[10]=st*E+dt*Q+pt*he+Pt*Be,a[11]=st*C+dt*ne+pt*Ie+Pt*it,a[12]=(st=c[12])*y+(dt=c[13])*N+(pt=c[14])*re+(Pt=c[15])*Pe,a[13]=st*w+dt*q+pt*ue+Pt*qe,a[14]=st*E+dt*Q+pt*he+Pt*Be,a[15]=st*C+dt*ne+pt*Ie+Pt*it,a}Math.hypot||(Math.hypot=function(){for(var a=arguments,l=0,c=arguments.length;c--;)l+=a[c]*a[c];return Math.sqrt(l)});var gd,a,Cc=bs;function rc(a,l,c){var y=l[0],w=l[1],E=l[2],C=l[3];return a[0]=c[0]*y+c[4]*w+c[8]*E+c[12]*C,a[1]=c[1]*y+c[5]*w+c[9]*E+c[13]*C,a[2]=c[2]*y+c[6]*w+c[10]*E+c[14]*C,a[3]=c[3]*y+c[7]*w+c[11]*E+c[15]*C,a}gd=new to(3),to!=Float32Array&&(gd[0]=0,gd[1]=0,gd[2]=0),a=new to(4),to!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[3]=0);var ic=(function(){var a=new to(2);to!=Float32Array&&(a[0]=0,a[1]=0)}(),function(a){function l(c){a.call(this,c,co)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.createBucket=function(c){return new Ga(c)},l.prototype.queryRadius=function(c){var y=c;return Xi("circle-radius",this,y)+Xi("circle-stroke-width",this,y)+ol(this.paint.get("circle-translate"))},l.prototype.queryIntersectsFeature=function(c,y,w,E,C,N,q,Q){for(var ne=_s(c,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),N.angle,q),re=this.paint.get("circle-radius").evaluate(y,w)+this.paint.get("circle-stroke-width").evaluate(y,w),ue="map"===this.paint.get("circle-pitch-alignment"),he=ue?ne:function(Vt,Kt){return Vt.map(function(fn){return Ic(fn,Kt)})}(ne,Q),Ie=ue?re*q:re,Pe=0,qe=E;Pe<qe.length;Pe+=1)for(var Be=0,it=qe[Pe];Be<it.length;Be+=1){var st=it[Be],dt=ue?st:Ic(st,Q),pt=Ie,Pt=rc([],[st.x,st.y,0,1],Q);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?pt*=Pt[3]/N.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(pt*=N.cameraToCenterDistance/Pt[3]),jl(he,dt,pt))return!0}return!1},l}(lo));function Ic(a,l){var c=rc([],[a.x,a.y,0,1],l);return new T(c[0]/c[3],c[1]/c[3])}var au=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l}(Ga);function Tc(a,l,c,y){var w=l.width,E=l.height;if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==w*E*c)throw new RangeError("mismatched image size")}else y=new Uint8Array(w*E*c);return a.width=w,a.height=E,a.data=y,a}function hm(a,l,c){var y=l.width,w=l.height;if(y!==a.width||w!==a.height){var E=Tc({},{width:y,height:w},c);bh(a,E,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,y),height:Math.min(a.height,w)},c),a.width=y,a.height=w,a.data=E.data}}function bh(a,l,c,y,w,E){if(0===w.width||0===w.height)return l;if(w.width>a.width||w.height>a.height||c.x>a.width-w.width||c.y>a.height-w.height)throw new RangeError("out of range source coordinates for image copy");if(w.width>l.width||w.height>l.height||y.x>l.width-w.width||y.y>l.height-w.height)throw new RangeError("out of range destination coordinates for image copy");for(var C=a.data,N=l.data,q=0;q<w.height;q++)for(var Q=((c.y+q)*a.width+c.x)*E,ne=((y.y+q)*l.width+y.x)*E,re=0;re<w.width*E;re++)N[ne+re]=C[Q+re];return l}on("HeatmapBucket",au,{omit:["layers"]});var oc=function(a,l){Tc(this,a,1,l)};oc.prototype.resize=function(a){hm(this,a,1)},oc.prototype.clone=function(){return new oc({width:this.width,height:this.height},new Uint8Array(this.data))},oc.copy=function(a,l,c,y,w){bh(a,l,c,y,w,1)};var ss=function(a,l){Tc(this,a,4,l)};ss.prototype.resize=function(a){hm(this,a,4)},ss.prototype.replace=function(a,l){l?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a},ss.prototype.clone=function(){return new ss({width:this.width,height:this.height},new Uint8Array(this.data))},ss.copy=function(a,l,c,y,w){bh(a,l,c,y,w,4)},on("AlphaImage",oc),on("RGBAImage",ss);var v0={paint:new aa({"heatmap-radius":new zn(xe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new zn(xe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new an(xe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new rl(xe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new an(xe.paint_heatmap["heatmap-opacity"])})};function _f(a){var l={},c=a.resolution||256,y=a.clips?a.clips.length:1,w=a.image||new ss({width:c,height:y}),E=function(Ie,Pe,qe){l[a.evaluationKey]=qe;var Be=a.expression.evaluate(l);w.data[Ie+Pe+0]=Math.floor(255*Be.r/Be.a),w.data[Ie+Pe+1]=Math.floor(255*Be.g/Be.a),w.data[Ie+Pe+2]=Math.floor(255*Be.b/Be.a),w.data[Ie+Pe+3]=Math.floor(255*Be.a)};if(a.clips)for(var C=0,N=0;C<y;++C,N+=4*c)for(var q=0,Q=0;q<c;q++,Q+=4){var ne=q/(c-1),re=a.clips[C];E(N,Q,re.start*(1-ne)+re.end*ne)}else for(var ue=0,he=0;ue<c;ue++,he+=4)E(0,he,ue/(c-1));return w}var bf=function(a){function l(c){a.call(this,c,v0),this._updateColorRamp()}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.createBucket=function(c){return new au(c)},l.prototype._handleSpecialPaintPropertyUpdate=function(c){"heatmap-color"===c&&this._updateColorRamp()},l.prototype._updateColorRamp=function(){this.colorRamp=_f({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},l.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},l.prototype.queryRadius=function(){return 0},l.prototype.queryIntersectsFeature=function(){return!1},l.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},l}(lo),_0={paint:new aa({"hillshade-illumination-direction":new an(xe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new an(xe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new an(xe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new an(xe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new an(xe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new an(xe.paint_hillshade["hillshade-accent-color"])})},iy=function(a){function l(c){a.call(this,c,_0)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},l}(lo),oy=Yi([{name:"a_pos",components:2,type:"Int16"}],4).members,ac=wh,b0=wh;function wh(a,l,c){c=c||2;var y,w,E,C,N,q,Q,ne=l&&l.length,re=ne?l[0]*c:a.length,ue=xh(a,0,re,c,!0),he=[];if(!ue||ue.next===ue.prev)return he;if(ne&&(ue=function(Pe,qe,Be,it){var st,dt,pt,Pt=[];for(st=0,dt=qe.length;st<dt;st++)(pt=xh(Pe,qe[st]*it,st<dt-1?qe[st+1]*it:Pe.length,it,!1))===pt.next&&(pt.steiner=!0),Pt.push(w0(pt));for(Pt.sort(ay),st=0;st<Pt.length;st++)pm(Pt[st],Be),Be=sc(Be,Be.next);return Be}(a,l,ue,c)),a.length>80*c){y=E=a[0],w=C=a[1];for(var Ie=c;Ie<re;Ie+=c)(N=a[Ie])<y&&(y=N),(q=a[Ie+1])<w&&(w=q),N>E&&(E=N),q>C&&(C=q);Q=0!==(Q=Math.max(E-y,C-w))?1/Q:0}return yd(ue,he,c,y,w,Q),he}function xh(a,l,c,y,w){var E,C;if(w===xf(a,l,c,y)>0)for(E=l;E<c;E+=y)C=S0(E,a[E],a[E+1],C);else for(E=c-y;E>=l;E-=y)C=S0(E,a[E],a[E+1],C);return C&&mm(C,C.next)&&(Sh(C),C=C.next),C}function sc(a,l){if(!a)return a;l||(l=a);var c,y=a;do{if(c=!1,y.steiner||!mm(y,y.next)&&0!==Jo(y.prev,y,y.next))y=y.next;else{if(Sh(y),(y=l=y.prev)===y.next)break;c=!0}}while(c||y!==l);return l}function yd(a,l,c,y,w,E,C){if(a){!C&&E&&function(ne,re,ue,he){var Ie=ne;do{null===Ie.z&&(Ie.z=sy(Ie.x,Ie.y,re,ue,he)),Ie.prevZ=Ie.prev,Ie.nextZ=Ie.next,Ie=Ie.next}while(Ie!==ne);Ie.prevZ.nextZ=null,Ie.prevZ=null,function(Pe){var qe,Be,it,st,dt,pt,Pt,Vt,Kt=1;do{for(Be=Pe,Pe=null,dt=null,pt=0;Be;){for(pt++,it=Be,Pt=0,qe=0;qe<Kt&&(Pt++,it=it.nextZ);qe++);for(Vt=Kt;Pt>0||Vt>0&&it;)0!==Pt&&(0===Vt||!it||Be.z<=it.z)?(st=Be,Be=Be.nextZ,Pt--):(st=it,it=it.nextZ,Vt--),dt?dt.nextZ=st:Pe=st,st.prevZ=dt,dt=st;Be=it}dt.nextZ=null,Kt*=2}while(pt>1)}(Ie)}(a,y,w,E);for(var N,q,Q=a;a.prev!==a.next;)if(N=a.prev,q=a.next,E?vd(a,y,w,E):wf(a))l.push(N.i/c),l.push(a.i/c),l.push(q.i/c),Sh(a),a=q.next,Q=q.next;else if((a=q)===Q){C?1===C?yd(a=_d(sc(a),l,c),l,c,y,w,E,2):2===C&&bd(a,l,c,y,w,E):yd(sc(a),l,c,y,w,E,1);break}}}function wf(a){var l=a.prev,c=a,y=a.next;if(Jo(l,c,y)>=0)return!1;for(var w=a.next.next;w!==a.prev;){if(Cr(l.x,l.y,c.x,c.y,y.x,y.y,w.x,w.y)&&Jo(w.prev,w,w.next)>=0)return!1;w=w.next}return!0}function vd(a,l,c,y){var w=a.prev,E=a,C=a.next;if(Jo(w,E,C)>=0)return!1;for(var N=w.x>E.x?w.x>C.x?w.x:C.x:E.x>C.x?E.x:C.x,q=w.y>E.y?w.y>C.y?w.y:C.y:E.y>C.y?E.y:C.y,Q=sy(w.x<E.x?w.x<C.x?w.x:C.x:E.x<C.x?E.x:C.x,w.y<E.y?w.y<C.y?w.y:C.y:E.y<C.y?E.y:C.y,l,c,y),ne=sy(N,q,l,c,y),re=a.prevZ,ue=a.nextZ;re&&re.z>=Q&&ue&&ue.z<=ne;){if(re!==a.prev&&re!==a.next&&Cr(w.x,w.y,E.x,E.y,C.x,C.y,re.x,re.y)&&Jo(re.prev,re,re.next)>=0||(re=re.prevZ,ue!==a.prev&&ue!==a.next&&Cr(w.x,w.y,E.x,E.y,C.x,C.y,ue.x,ue.y)&&Jo(ue.prev,ue,ue.next)>=0))return!1;ue=ue.nextZ}for(;re&&re.z>=Q;){if(re!==a.prev&&re!==a.next&&Cr(w.x,w.y,E.x,E.y,C.x,C.y,re.x,re.y)&&Jo(re.prev,re,re.next)>=0)return!1;re=re.prevZ}for(;ue&&ue.z<=ne;){if(ue!==a.prev&&ue!==a.next&&Cr(w.x,w.y,E.x,E.y,C.x,C.y,ue.x,ue.y)&&Jo(ue.prev,ue,ue.next)>=0)return!1;ue=ue.nextZ}return!0}function _d(a,l,c){var y=a;do{var w=y.prev,E=y.next.next;!mm(w,E)&&E0(w,y,y.next,E)&&Eh(w,E)&&Eh(E,w)&&(l.push(w.i/c),l.push(y.i/c),l.push(E.i/c),Sh(y),Sh(y.next),y=a=E),y=y.next}while(y!==a);return sc(y)}function bd(a,l,c,y,w,E){var C=a;do{for(var N=C.next.next;N!==C.prev;){if(C.i!==N.i&&x0(C,N)){var q=xd(C,N);return C=sc(C,C.next),q=sc(q,q.next),yd(C,l,c,y,w,E),void yd(q,l,c,y,w,E)}N=N.next}C=C.next}while(C!==a)}function ay(a,l){return a.x-l.x}function pm(a,l){if(l=function(y,w){var E,C=w,N=y.x,q=y.y,Q=-1/0;do{if(q<=C.y&&q>=C.next.y&&C.next.y!==C.y){var ne=C.x+(q-C.y)*(C.next.x-C.x)/(C.next.y-C.y);if(ne<=N&&ne>Q){if(Q=ne,ne===N){if(q===C.y)return C;if(q===C.next.y)return C.next}E=C.x<C.next.x?C:C.next}}C=C.next}while(C!==w);if(!E)return null;if(N===Q)return E;var re,ue=E,he=E.x,Ie=E.y,Pe=1/0;C=E;do{N>=C.x&&C.x>=he&&N!==C.x&&Cr(q<Ie?N:Q,q,he,Ie,q<Ie?Q:N,q,C.x,C.y)&&(re=Math.abs(q-C.y)/(N-C.x),Eh(C,y)&&(re<Pe||re===Pe&&(C.x>E.x||C.x===E.x&&wd(E,C)))&&(E=C,Pe=re)),C=C.next}while(C!==ue);return E}(a,l)){var c=xd(l,a);sc(l,l.next),sc(c,c.next)}}function wd(a,l){return Jo(a.prev,a,l.prev)<0&&Jo(l.next,a,a.next)<0}function sy(a,l,c,y,w){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=32767*(a-c)*w)|a<<8))|a<<4))|a<<2))|a<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=32767*(l-y)*w)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function w0(a){var l=a,c=a;do{(l.x<c.x||l.x===c.x&&l.y<c.y)&&(c=l),l=l.next}while(l!==a);return c}function Cr(a,l,c,y,w,E,C,N){return(w-C)*(l-N)-(a-C)*(E-N)>=0&&(a-C)*(y-N)-(c-C)*(l-N)>=0&&(c-C)*(E-N)-(w-C)*(y-N)>=0}function x0(a,l){return a.next.i!==l.i&&a.prev.i!==l.i&&!function(c,y){var w=c;do{if(w.i!==c.i&&w.next.i!==c.i&&w.i!==y.i&&w.next.i!==y.i&&E0(w,w.next,c,y))return!0;w=w.next}while(w!==c);return!1}(a,l)&&(Eh(a,l)&&Eh(l,a)&&function(c,y){var w=c,E=!1,C=(c.x+y.x)/2,N=(c.y+y.y)/2;do{w.y>N!=w.next.y>N&&w.next.y!==w.y&&C<(w.next.x-w.x)*(N-w.y)/(w.next.y-w.y)+w.x&&(E=!E),w=w.next}while(w!==c);return E}(a,l)&&(Jo(a.prev,a,l.prev)||Jo(a,l.prev,l))||mm(a,l)&&Jo(a.prev,a,a.next)>0&&Jo(l.prev,l,l.next)>0)}function Jo(a,l,c){return(l.y-a.y)*(c.x-l.x)-(l.x-a.x)*(c.y-l.y)}function mm(a,l){return a.x===l.x&&a.y===l.y}function E0(a,l,c,y){var w=ym(Jo(a,l,c)),E=ym(Jo(a,l,y)),C=ym(Jo(c,y,a)),N=ym(Jo(c,y,l));return w!==E&&C!==N||!(0!==w||!gm(a,c,l))||!(0!==E||!gm(a,y,l))||!(0!==C||!gm(c,a,y))||!(0!==N||!gm(c,l,y))}function gm(a,l,c){return l.x<=Math.max(a.x,c.x)&&l.x>=Math.min(a.x,c.x)&&l.y<=Math.max(a.y,c.y)&&l.y>=Math.min(a.y,c.y)}function ym(a){return a>0?1:a<0?-1:0}function Eh(a,l){return Jo(a.prev,a,a.next)<0?Jo(a,l,a.next)>=0&&Jo(a,a.prev,l)>=0:Jo(a,l,a.prev)<0||Jo(a,a.next,l)<0}function xd(a,l){var c=new sa(a.i,a.x,a.y),y=new sa(l.i,l.x,l.y),w=a.next,E=l.prev;return a.next=l,l.prev=a,c.next=w,w.prev=c,y.next=c,c.prev=y,E.next=y,y.prev=E,y}function S0(a,l,c,y){var w=new sa(a,l,c);return y?(w.next=y.next,w.prev=y,y.next.prev=w,y.next=w):(w.prev=w,w.next=w),w}function Sh(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function sa(a,l,c){this.i=a,this.x=l,this.y=c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function xf(a,l,c,y){for(var w=0,E=l,C=c-y;E<c;E+=y)w+=(a[C]-a[E])*(a[E+1]+a[C+1]),C=E;return w}function Ef(a,l,c,y,w){!function E(C,N,q,Q,ne){for(;Q>q;){if(Q-q>600){var re=Q-q+1,ue=N-q+1,he=Math.log(re),Ie=.5*Math.exp(2*he/3),Pe=.5*Math.sqrt(he*Ie*(re-Ie)/re)*(ue-re/2<0?-1:1);E(C,N,Math.max(q,Math.floor(N-ue*Ie/re+Pe)),Math.min(Q,Math.floor(N+(re-ue)*Ie/re+Pe)),ne)}var qe=C[N],Be=q,it=Q;for(Ch(C,q,N),ne(C[Q],qe)>0&&Ch(C,q,Q);Be<it;){for(Ch(C,Be,it),Be++,it--;ne(C[Be],qe)<0;)Be++;for(;ne(C[it],qe)>0;)it--}0===ne(C[q],qe)?Ch(C,q,it):Ch(C,++it,Q),it<=N&&(q=it+1),N<=it&&(Q=it-1)}}(a,l,c||0,y||a.length-1,w||C0)}function Ch(a,l,c){var y=a[l];a[l]=a[c],a[c]=y}function C0(a,l){return a<l?-1:a>l?1:0}function As(a,l){var c=a.length;if(c<=1)return[a];for(var y,w,E=[],C=0;C<c;C++){var N=j(a[C]);0!==N&&(a[C].area=Math.abs(N),void 0===w&&(w=N<0),w===N<0?(y&&E.push(y),y=[a[C]]):y.push(a[C]))}if(y&&E.push(y),l>1)for(var q=0;q<E.length;q++)E[q].length<=l||(Ef(E[q],l,1,E[q].length-1,Du),E[q]=E[q].slice(0,l));return E}function Du(a,l){return l.area-a.area}function Ih(a,l,c){for(var y=c.patternDependencies,w=!1,E=0,C=l;E<C.length;E+=1){var N=C[E].paint.get(a+"-pattern");N.isConstant()||(w=!0);var q=N.constantOr(null);q&&(w=!0,y[q.to]=!0,y[q.from]=!0)}return w}function Ed(a,l,c,y,w){for(var E=w.patternDependencies,C=0,N=l;C<N.length;C+=1){var q=N[C],Q=q.paint.get(a+"-pattern").value;if("constant"!==Q.kind){var ne=Q.evaluate({zoom:y-1},c,{},w.availableImages),re=Q.evaluate({zoom:y},c,{},w.availableImages),ue=Q.evaluate({zoom:y+1},c,{},w.availableImages);re=re&&re.name?re.name:re,ue=ue&&ue.name?ue.name:ue,E[ne=ne&&ne.name?ne.name:ne]=!0,E[re]=!0,E[ue]=!0,c.patterns[q.id]={min:ne,mid:re,max:ue}}}return c}wh.deviation=function(a,l,c,y){var w=l&&l.length,E=Math.abs(xf(a,0,w?l[0]*c:a.length,c));if(w)for(var C=0,N=l.length;C<N;C++)E-=Math.abs(xf(a,l[C]*c,C<N-1?l[C+1]*c:a.length,c));var q=0;for(C=0;C<y.length;C+=3){var Q=y[C]*c,ne=y[C+1]*c,re=y[C+2]*c;q+=Math.abs((a[Q]-a[re])*(a[ne+1]-a[Q+1])-(a[Q]-a[ne])*(a[re+1]-a[Q+1]))}return 0===E&&0===q?0:Math.abs((q-E)/E)},wh.flatten=function(a){for(var l=a[0][0].length,c={vertices:[],holes:[],dimensions:l},y=0,w=0;w<a.length;w++){for(var E=0;E<a[w].length;E++)for(var C=0;C<l;C++)c.vertices.push(a[w][E][C]);w>0&&c.holes.push(y+=a[w-1].length)}return c},ac.default=b0;var Rs=function(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(l){return l.id}),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Cu,this.indexArray=new Ds,this.indexArray2=new Tu,this.programConfigurations=new bi(a.layers,a.zoom),this.segments=new ye,this.segments2=new ye,this.stateDependentLayerIds=this.layers.filter(function(l){return l.isStateDependent()}).map(function(l){return l.id})};Rs.prototype.populate=function(a,l,c){this.hasPattern=Ih("fill",this.layers,l);for(var y=this.layers[0].layout.get("fill-sort-key"),w=!y.isConstant(),E=[],C=0,N=a;C<N.length;C+=1){var q=N[C],Q=q.feature,ne=q.id,re=q.index,ue=q.sourceLayerIndex,he=this.layers[0]._featureFilter.needGeometry,Ie=ko(Q,he);if(this.layers[0]._featureFilter.filter(new ti(this.zoom),Ie,c)){var Pe=w?y.evaluate(Ie,{},c,l.availableImages):void 0,qe={id:ne,properties:Q.properties,type:Q.type,sourceLayerIndex:ue,index:re,geometry:he?Ie.geometry:yo(Q),patterns:{},sortKey:Pe};E.push(qe)}}w&&E.sort(function(Kt,fn){return Kt.sortKey-fn.sortKey});for(var Be=0,it=E;Be<it.length;Be+=1){var st=it[Be],dt=st.geometry,pt=st.index,Pt=st.sourceLayerIndex;if(this.hasPattern){var Vt=Ed("fill",this.layers,st,this.zoom,l);this.patternFeatures.push(Vt)}else this.addFeature(st,dt,pt,c,{});l.featureIndex.insert(a[pt].feature,dt,pt,Pt,this.index)}},Rs.prototype.update=function(a,l,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,l,this.stateDependentLayers,c)},Rs.prototype.addFeatures=function(a,l,c){for(var y=0,w=this.patternFeatures;y<w.length;y+=1){var E=w[y];this.addFeature(E,E.geometry,E.index,l,c)}},Rs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Rs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Rs.prototype.upload=function(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,oy),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0},Rs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Rs.prototype.addFeature=function(a,l,c,y,w){for(var E=0,C=As(l,500);E<C.length;E+=1){for(var N=C[E],q=0,Q=0,ne=N;Q<ne.length;Q+=1)q+=ne[Q].length;for(var re=this.segments.prepareSegment(q,this.layoutVertexArray,this.indexArray),ue=re.vertexLength,he=[],Ie=[],Pe=0,qe=N;Pe<qe.length;Pe+=1){var Be=qe[Pe];if(0!==Be.length){Be!==N[0]&&Ie.push(he.length/2);var it=this.segments2.prepareSegment(Be.length,this.layoutVertexArray,this.indexArray2),st=it.vertexLength;this.layoutVertexArray.emplaceBack(Be[0].x,Be[0].y),this.indexArray2.emplaceBack(st+Be.length-1,st),he.push(Be[0].x),he.push(Be[0].y);for(var dt=1;dt<Be.length;dt++)this.layoutVertexArray.emplaceBack(Be[dt].x,Be[dt].y),this.indexArray2.emplaceBack(st+dt-1,st+dt),he.push(Be[dt].x),he.push(Be[dt].y);it.vertexLength+=Be.length,it.primitiveLength+=Be.length}}for(var pt=ac(he,Ie),Pt=0;Pt<pt.length;Pt+=3)this.indexArray.emplaceBack(ue+pt[Pt],ue+pt[Pt+1],ue+pt[Pt+2]);re.vertexLength+=q,re.primitiveLength+=pt.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,c,w,y)},on("FillBucket",Rs,{omit:["layers","patternFeatures"]});var ly=new aa({"fill-sort-key":new zn(xe.layout_fill["fill-sort-key"])}),I0={paint:new aa({"fill-antialias":new an(xe.paint_fill["fill-antialias"]),"fill-opacity":new zn(xe.paint_fill["fill-opacity"]),"fill-color":new zn(xe.paint_fill["fill-color"]),"fill-outline-color":new zn(xe.paint_fill["fill-outline-color"]),"fill-translate":new an(xe.paint_fill["fill-translate"]),"fill-translate-anchor":new an(xe.paint_fill["fill-translate-anchor"]),"fill-pattern":new eo(xe.paint_fill["fill-pattern"])}),layout:ly},T0=function(a){function l(c){a.call(this,c,I0)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.recalculate=function(c,y){a.prototype.recalculate.call(this,c,y);var w=this.paint._values["fill-outline-color"];"constant"===w.value.kind&&void 0===w.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},l.prototype.createBucket=function(c){return new Rs(c)},l.prototype.queryRadius=function(){return ol(this.paint.get("fill-translate"))},l.prototype.queryIntersectsFeature=function(c,y,w,E,C,N,q){return Ws(_s(c,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),N.angle,q),E)},l.prototype.isTileClipped=function(){return!0},l}(lo),$x=Yi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,P0=Pc;function Pc(a,l,c,y,w){this.properties={},this.extent=c,this.type=0,this._pbf=a,this._geometry=-1,this._keys=y,this._values=w,a.readFields(al,this,l)}function al(a,l,c){1==a?l.id=c.readVarint():2==a?function(y,w){for(var E=y.readVarint()+y.pos;y.pos<E;){var C=w._keys[y.readVarint()],N=w._values[y.readVarint()];w.properties[C]=N}}(c,l):3==a?l.type=c.readVarint():4==a&&(l._geometry=c.pos)}function vm(a){for(var l,c,y=0,w=0,E=a.length,C=E-1;w<E;C=w++)y+=((c=a[C]).x-(l=a[w]).x)*(l.y+c.y);return y}Pc.types=["Unknown","Point","LineString","Polygon"],Pc.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var l,c=a.readVarint()+a.pos,y=1,w=0,E=0,C=0,N=[];a.pos<c;){if(w<=0){var q=a.readVarint();y=7&q,w=q>>3}if(w--,1===y||2===y)E+=a.readSVarint(),C+=a.readSVarint(),1===y&&(l&&N.push(l),l=[]),l.push(new T(E,C));else{if(7!==y)throw new Error("unknown command "+y);l&&l.push(l[0].clone())}}return l&&N.push(l),N},Pc.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var l=a.readVarint()+a.pos,c=1,y=0,w=0,E=0,C=1/0,N=-1/0,q=1/0,Q=-1/0;a.pos<l;){if(y<=0){var ne=a.readVarint();c=7&ne,y=ne>>3}if(y--,1===c||2===c)(w+=a.readSVarint())<C&&(C=w),w>N&&(N=w),(E+=a.readSVarint())<q&&(q=E),E>Q&&(Q=E);else if(7!==c)throw new Error("unknown command "+c)}return[C,q,N,Q]},Pc.prototype.toGeoJSON=function(a,l,c){var y,w,E=this.extent*Math.pow(2,c),C=this.extent*a,N=this.extent*l,q=this.loadGeometry(),Q=Pc.types[this.type];function ne(he){for(var Ie=0;Ie<he.length;Ie++){var Pe=he[Ie];he[Ie]=[360*(Pe.x+C)/E-180,360/Math.PI*Math.atan(Math.exp((180-360*(Pe.y+N)/E)*Math.PI/180))-90]}}switch(this.type){case 1:var re=[];for(y=0;y<q.length;y++)re[y]=q[y][0];ne(q=re);break;case 2:for(y=0;y<q.length;y++)ne(q[y]);break;case 3:for(q=function(he){var Ie=he.length;if(Ie<=1)return[he];for(var Pe,qe,Be=[],it=0;it<Ie;it++){var st=vm(he[it]);0!==st&&(void 0===qe&&(qe=st<0),qe===st<0?(Pe&&Be.push(Pe),Pe=[he[it]]):Pe.push(he[it]))}return Pe&&Be.push(Pe),Be}(q),y=0;y<q.length;y++)for(w=0;w<q[y].length;w++)ne(q[y][w])}1===q.length?q=q[0]:Q="Multi"+Q;var ue={type:"Feature",geometry:{type:Q,coordinates:q},properties:this.properties};return"id"in this&&(ue.id=this.id),ue};var Dc=D0;function D0(a,l){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(uy,this,l),this.length=this._features.length}function uy(a,l,c){15===a?l.version=c.readVarint():1===a?l.name=c.readString():5===a?l.extent=c.readVarint():2===a?l._features.push(c.pos):3===a?l._keys.push(c.readString()):4===a&&l._values.push(function(y){for(var w=null,E=y.readVarint()+y.pos;y.pos<E;){var C=y.readVarint()>>3;w=1===C?y.readString():2===C?y.readFloat():3===C?y.readDouble():4===C?y.readVarint64():5===C?y.readVarint():6===C?y.readSVarint():7===C?y.readBoolean():null}return w}(c))}function A0(a,l,c){if(3===a){var y=new Dc(c,c.readVarint()+c.pos);y.length&&(l[y.name]=y)}}D0.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var l=this._pbf.readVarint()+this._pbf.pos;return new P0(this._pbf,l,this.extent,this._keys,this._values)};var Sd={VectorTile:function(a,l){this.layers=a.readFields(A0,{},l)},VectorTileFeature:P0,VectorTileLayer:Dc},R0=Sd.VectorTileFeature.types,_m=Math.pow(2,13);function Sf(a,l,c,y,w,E,C,N){a.emplaceBack(l,c,2*Math.floor(y*_m)+C,w*_m*2,E*_m*2,Math.round(N))}var Vl=function(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(l){return l.id}),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new os,this.indexArray=new Ds,this.programConfigurations=new bi(a.layers,a.zoom),this.segments=new ye,this.stateDependentLayerIds=this.layers.filter(function(l){return l.isStateDependent()}).map(function(l){return l.id})};function bm(a,l){return a.x===l.x&&(a.x<0||a.x>8192)||a.y===l.y&&(a.y<0||a.y>8192)}Vl.prototype.populate=function(a,l,c){this.features=[],this.hasPattern=Ih("fill-extrusion",this.layers,l);for(var y=0,w=a;y<w.length;y+=1){var E=w[y],C=E.feature,N=E.id,q=E.index,Q=E.sourceLayerIndex,ne=this.layers[0]._featureFilter.needGeometry,re=ko(C,ne);if(this.layers[0]._featureFilter.filter(new ti(this.zoom),re,c)){var ue={id:N,sourceLayerIndex:Q,index:q,geometry:ne?re.geometry:yo(C),properties:C.properties,type:C.type,patterns:{}};this.hasPattern?this.features.push(Ed("fill-extrusion",this.layers,ue,this.zoom,l)):this.addFeature(ue,ue.geometry,q,c,{}),l.featureIndex.insert(C,ue.geometry,q,Q,this.index,!0)}}},Vl.prototype.addFeatures=function(a,l,c){for(var y=0,w=this.features;y<w.length;y+=1){var E=w[y];this.addFeature(E,E.geometry,E.index,l,c)}},Vl.prototype.update=function(a,l,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,l,this.stateDependentLayers,c)},Vl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Vl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Vl.prototype.upload=function(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,$x),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0},Vl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Vl.prototype.addFeature=function(a,l,c,y,w){for(var E=0,C=As(l,500);E<C.length;E+=1){for(var N=C[E],q=0,Q=0,ne=N;Q<ne.length;Q+=1)q+=ne[Q].length;for(var re=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),ue=0,he=N;ue<he.length;ue+=1){var Ie=he[ue];if(0!==Ie.length&&!((lr=Ie).every(function(Xn){return Xn.x<0})||lr.every(function(Xn){return Xn.x>8192})||lr.every(function(Xn){return Xn.y<0})||lr.every(function(Xn){return Xn.y>8192})))for(var Pe=0,qe=0;qe<Ie.length;qe++){var Be=Ie[qe];if(qe>=1){var it=Ie[qe-1];if(!bm(Be,it)){re.vertexLength+4>ye.MAX_VERTEX_ARRAY_LENGTH&&(re=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var st=Be.sub(it)._perp()._unit(),dt=it.dist(Be);Pe+dt>32768&&(Pe=0),Sf(this.layoutVertexArray,Be.x,Be.y,st.x,st.y,0,0,Pe),Sf(this.layoutVertexArray,Be.x,Be.y,st.x,st.y,0,1,Pe),Sf(this.layoutVertexArray,it.x,it.y,st.x,st.y,0,0,Pe+=dt),Sf(this.layoutVertexArray,it.x,it.y,st.x,st.y,0,1,Pe);var pt=re.vertexLength;this.indexArray.emplaceBack(pt,pt+2,pt+1),this.indexArray.emplaceBack(pt+1,pt+2,pt+3),re.vertexLength+=4,re.primitiveLength+=2}}}}if(re.vertexLength+q>ye.MAX_VERTEX_ARRAY_LENGTH&&(re=this.segments.prepareSegment(q,this.layoutVertexArray,this.indexArray)),"Polygon"===R0[a.type]){for(var Pt=[],Vt=[],Kt=re.vertexLength,fn=0,Qt=N;fn<Qt.length;fn+=1){var Tn=Qt[fn];if(0!==Tn.length){Tn!==N[0]&&Vt.push(Pt.length/2);for(var en=0;en<Tn.length;en++){var sr=Tn[en];Sf(this.layoutVertexArray,sr.x,sr.y,0,0,1,1,0),Pt.push(sr.x),Pt.push(sr.y)}}}for(var Bn=ac(Pt,Vt),bn=0;bn<Bn.length;bn+=3)this.indexArray.emplaceBack(Kt+Bn[bn],Kt+Bn[bn+2],Kt+Bn[bn+1]);re.primitiveLength+=Bn.length/3,re.vertexLength+=q}}var lr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,c,w,y)},on("FillExtrusionBucket",Vl,{omit:["layers","features"]});var Th={paint:new aa({"fill-extrusion-opacity":new an(xe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new zn(xe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new an(xe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new an(xe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new eo(xe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new zn(xe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new zn(xe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new an(xe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},qx=function(a){function l(c){a.call(this,c,Th)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.createBucket=function(c){return new Vl(c)},l.prototype.queryRadius=function(){return ol(this.paint.get("fill-extrusion-translate"))},l.prototype.is3D=function(){return!0},l.prototype.queryIntersectsFeature=function(c,y,w,E,C,N,q,Q){var ne=_s(c,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),N.angle,q),re=this.paint.get("fill-extrusion-height").evaluate(y,w),ue=this.paint.get("fill-extrusion-base").evaluate(y,w),he=function(Pe,qe,Be,it){for(var st=[],dt=0,pt=Pe;dt<pt.length;dt+=1){var Pt=pt[dt],Vt=[Pt.x,Pt.y,0,1];rc(Vt,Vt,qe),st.push(new T(Vt[0]/Vt[3],Vt[1]/Vt[3]))}return st}(ne,Q),Ie=function(Pe,qe,Be,it){for(var st=[],dt=[],pt=it[8]*qe,Pt=it[9]*qe,Vt=it[10]*qe,Kt=it[11]*qe,fn=it[8]*Be,Qt=it[9]*Be,Tn=it[10]*Be,en=it[11]*Be,sr=0,Bn=Pe;sr<Bn.length;sr+=1){for(var bn=[],lr=[],Xn=0,Nr=Bn[sr];Xn<Nr.length;Xn+=1){var Mn=Nr[Xn],Ur=Mn.x,Wi=Mn.y,fo=it[0]*Ur+it[4]*Wi+it[12],no=it[1]*Ur+it[5]*Wi+it[13],Zi=it[2]*Ur+it[6]*Wi+it[14],ho=it[3]*Ur+it[7]*Wi+it[15],Ko=Zi+Vt,Bo=ho+Kt,va=fo+fn,Yo=no+Qt,_a=Zi+Tn,_o=ho+en,ua=new T((fo+pt)/Bo,(no+Pt)/Bo);ua.z=Ko/Bo,bn.push(ua);var Rr=new T(va/_o,Yo/_o);Rr.z=_a/_o,lr.push(Rr)}st.push(bn),dt.push(lr)}return[st,dt]}(E,ue,re,Q);return function(Pe,qe,Be){var it=1/0;Ws(Be,qe)&&(it=Ph(Be,qe[0]));for(var st=0;st<qe.length;st++)for(var dt=qe[st],pt=Pe[st],Pt=0;Pt<dt.length-1;Pt++){var Vt=dt[Pt],Kt=[Vt,dt[Pt+1],pt[Pt+1],pt[Pt],Vt];Ha(Be,Kt)&&(it=Math.min(it,Ph(Be,Kt)))}return it!==1/0&&it}(Ie[0],Ie[1],he)},l}(lo);function Au(a,l){return a.x*l.x+a.y*l.y}function Ph(a,l){if(1===a.length){for(var c,y=0,w=l[y++];!c||w.equals(c);)if(!(c=l[y++]))return 1/0;for(;y<l.length;y++){var E=l[y],C=a[0],N=c.sub(w),q=E.sub(w),Q=C.sub(w),ne=Au(N,N),re=Au(N,q),ue=Au(q,q),he=Au(Q,N),Ie=Au(Q,q),Pe=ne*ue-re*re,qe=(ue*he-re*Ie)/Pe,Be=(ne*Ie-re*he)/Pe,it=w.z*(1-qe-Be)+c.z*qe+E.z*Be;if(isFinite(it))return it}return 1/0}for(var st=1/0,dt=0,pt=l;dt<pt.length;dt+=1)st=Math.min(st,pt[dt].z);return st}var Dh=Yi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,M0=Yi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,O0=Sd.VectorTileFeature.types,L0=Math.cos(Math.PI/180*37.5),wm=Math.pow(2,14)/.5,la=function(a){var l=this;this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(c){return c.id}),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(c){l.gradients[c.id]={}}),this.layoutVertexArray=new mf,this.layoutVertexArray2=new Iu,this.indexArray=new Ds,this.programConfigurations=new bi(a.layers,a.zoom),this.segments=new ye,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(c){return c.isStateDependent()}).map(function(c){return c.id})};la.prototype.populate=function(a,l,c){this.hasPattern=Ih("line",this.layers,l);for(var y=this.layers[0].layout.get("line-sort-key"),w=!y.isConstant(),E=[],C=0,N=a;C<N.length;C+=1){var q=N[C],Q=q.feature,ne=q.id,re=q.index,ue=q.sourceLayerIndex,he=this.layers[0]._featureFilter.needGeometry,Ie=ko(Q,he);if(this.layers[0]._featureFilter.filter(new ti(this.zoom),Ie,c)){var Pe=w?y.evaluate(Ie,{},c):void 0,qe={id:ne,properties:Q.properties,type:Q.type,sourceLayerIndex:ue,index:re,geometry:he?Ie.geometry:yo(Q),patterns:{},sortKey:Pe};E.push(qe)}}w&&E.sort(function(Kt,fn){return Kt.sortKey-fn.sortKey});for(var Be=0,it=E;Be<it.length;Be+=1){var st=it[Be],dt=st.geometry,pt=st.index,Pt=st.sourceLayerIndex;if(this.hasPattern){var Vt=Ed("line",this.layers,st,this.zoom,l);this.patternFeatures.push(Vt)}else this.addFeature(st,dt,pt,c,{});l.featureIndex.insert(a[pt].feature,dt,pt,Pt,this.index)}},la.prototype.update=function(a,l,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,l,this.stateDependentLayers,c)},la.prototype.addFeatures=function(a,l,c){for(var y=0,w=this.patternFeatures;y<w.length;y+=1){var E=w[y];this.addFeature(E,E.geometry,E.index,l,c)}},la.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},la.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},la.prototype.upload=function(a){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,M0)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Dh),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0},la.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},la.prototype.lineFeatureClips=function(a){if(a.properties&&a.properties.hasOwnProperty("mapbox_clip_start")&&a.properties.hasOwnProperty("mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}},la.prototype.addFeature=function(a,l,c,y,w){var E=this.layers[0].layout,C=E.get("line-join").evaluate(a,{}),N=E.get("line-cap"),q=E.get("line-miter-limit"),Q=E.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(var ne=0,re=l;ne<re.length;ne+=1)this.addLine(re[ne],a,C,N,q,Q);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,c,w,y)},la.prototype.addLine=function(a,l,c,y,w,E){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var C=0;C<a.length-1;C++)this.totalDistance+=a[C].dist(a[C+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var N="Polygon"===O0[l.type],q=a.length;q>=2&&a[q-1].equals(a[q-2]);)q--;for(var Q=0;Q<q-1&&a[Q].equals(a[Q+1]);)Q++;if(!(q<(N?3:2))){"bevel"===c&&(w=1.05);var ne,re=this.overscaling<=16?122880/(512*this.overscaling):0,ue=this.segments.prepareSegment(10*q,this.layoutVertexArray,this.indexArray),he=void 0,Ie=void 0,Pe=void 0,qe=void 0;this.e1=this.e2=-1,N&&(qe=a[Q].sub(ne=a[q-2])._unit()._perp());for(var Be=Q;Be<q;Be++)if(!(Ie=Be===q-1?N?a[Q+1]:void 0:a[Be+1])||!a[Be].equals(Ie)){qe&&(Pe=qe),ne&&(he=ne),ne=a[Be],qe=Ie?Ie.sub(ne)._unit()._perp():Pe;var it=(Pe=Pe||qe).add(qe);0===it.x&&0===it.y||it._unit();var st=Pe.x*qe.x+Pe.y*qe.y,dt=it.x*qe.x+it.y*qe.y,pt=0!==dt?1/dt:1/0,Pt=2*Math.sqrt(2-2*dt),Vt=dt<L0&&he&&Ie,Kt=Pe.x*qe.y-Pe.y*qe.x>0;if(Vt&&Be>Q){var fn=ne.dist(he);if(fn>2*re){var Qt=ne.sub(ne.sub(he)._mult(re/fn)._round());this.updateDistance(he,Qt),this.addCurrentVertex(Qt,Pe,0,0,ue),he=Qt}}var Tn=he&&Ie,en=Tn?c:N?"butt":y;if(Tn&&"round"===en&&(pt<E?en="miter":pt<=2&&(en="fakeround")),"miter"===en&&pt>w&&(en="bevel"),"bevel"===en&&(pt>2&&(en="flipbevel"),pt<w&&(en="miter")),he&&this.updateDistance(he,ne),"miter"===en)it._mult(pt),this.addCurrentVertex(ne,it,0,0,ue);else if("flipbevel"===en){if(pt>100)it=qe.mult(-1);else{var sr=pt*Pe.add(qe).mag()/Pe.sub(qe).mag();it._perp()._mult(sr*(Kt?-1:1))}this.addCurrentVertex(ne,it,0,0,ue),this.addCurrentVertex(ne,it.mult(-1),0,0,ue)}else if("bevel"===en||"fakeround"===en){var Bn=-Math.sqrt(pt*pt-1),bn=Kt?Bn:0,lr=Kt?0:Bn;if(he&&this.addCurrentVertex(ne,Pe,bn,lr,ue),"fakeround"===en)for(var Xn=Math.round(180*Pt/Math.PI/20),Nr=1;Nr<Xn;Nr++){var Mn=Nr/Xn;if(.5!==Mn){var Ur=Mn-.5;Mn+=Mn*Ur*(Mn-1)*((1.0904+st*(st*(3.55645-1.43519*st)-3.2452))*Ur*Ur+(.848013+st*(.215638*st-1.06021)))}var Wi=qe.sub(Pe)._mult(Mn)._add(Pe)._unit()._mult(Kt?-1:1);this.addHalfVertex(ne,Wi.x,Wi.y,!1,Kt,0,ue)}Ie&&this.addCurrentVertex(ne,qe,-bn,-lr,ue)}else if("butt"===en)this.addCurrentVertex(ne,it,0,0,ue);else if("square"===en){var fo=he?1:-1;this.addCurrentVertex(ne,it,fo,fo,ue)}else"round"===en&&(he&&(this.addCurrentVertex(ne,Pe,0,0,ue),this.addCurrentVertex(ne,Pe,1,1,ue,!0)),Ie&&(this.addCurrentVertex(ne,qe,-1,-1,ue,!0),this.addCurrentVertex(ne,qe,0,0,ue)));if(Vt&&Be<q-1){var no=ne.dist(Ie);if(no>2*re){var Zi=ne.add(Ie.sub(ne)._mult(re/no)._round());this.updateDistance(ne,Zi),this.addCurrentVertex(Zi,qe,0,0,ue),ne=Zi}}}}},la.prototype.addCurrentVertex=function(a,l,c,y,w,E){void 0===E&&(E=!1);var C=l.y*y-l.x,N=-l.y-l.x*y;this.addHalfVertex(a,l.x+l.y*c,l.y-l.x*c,E,!1,c,w),this.addHalfVertex(a,C,N,E,!0,-y,w),this.distance>wm/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(a,l,c,y,w,E))},la.prototype.addHalfVertex=function(a,l,c,y,w,E,C){var N=.5*(this.lineClips?this.scaledDistance*(wm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a.x<<1)+(y?1:0),(a.y<<1)+(w?1:0),Math.round(63*l)+128,Math.round(63*c)+128,1+(0===E?0:E<0?-1:1)|(63&N)<<2,N>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var q=C.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,q),C.primitiveLength++),w?this.e2=q:this.e1=q},la.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},la.prototype.updateDistance=function(a,l){this.distance+=a.dist(l),this.updateScaledDistance()},on("LineBucket",la,{omit:["layers","patternFeatures"]});var Ah=new aa({"line-cap":new an(xe.layout_line["line-cap"]),"line-join":new zn(xe.layout_line["line-join"]),"line-miter-limit":new an(xe.layout_line["line-miter-limit"]),"line-round-limit":new an(xe.layout_line["line-round-limit"]),"line-sort-key":new zn(xe.layout_line["line-sort-key"])}),cy={paint:new aa({"line-opacity":new zn(xe.paint_line["line-opacity"]),"line-color":new zn(xe.paint_line["line-color"]),"line-translate":new an(xe.paint_line["line-translate"]),"line-translate-anchor":new an(xe.paint_line["line-translate-anchor"]),"line-width":new zn(xe.paint_line["line-width"]),"line-gap-width":new zn(xe.paint_line["line-gap-width"]),"line-offset":new zn(xe.paint_line["line-offset"]),"line-blur":new zn(xe.paint_line["line-blur"]),"line-dasharray":new Hs(xe.paint_line["line-dasharray"]),"line-pattern":new eo(xe.paint_line["line-pattern"]),"line-gradient":new rl(xe.paint_line["line-gradient"])}),layout:Ah},Yn=new(function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.possiblyEvaluate=function(c,y){return y=new ti(Math.floor(y.zoom),{now:y.now,fadeDuration:y.fadeDuration,zoomHistory:y.zoomHistory,transition:y.transition}),a.prototype.possiblyEvaluate.call(this,c,y)},l.prototype.evaluate=function(c,y,w,E){return y=_e({},y,{zoom:Math.floor(y.zoom)}),a.prototype.evaluate.call(this,c,y,w,E)},l}(zn))(cy.paint.properties["line-width"].specification);Yn.useIntegerZoom=!0;var dy=function(a){function l(c){a.call(this,c,cy),this.gradientVersion=0}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._handleSpecialPaintPropertyUpdate=function(c){"line-gradient"===c&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof fa,this.gradientVersion=(this.gradientVersion+1)%Z)},l.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},l.prototype.recalculate=function(c,y){a.prototype.recalculate.call(this,c,y),this.paint._values["line-floorwidth"]=Yn.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)},l.prototype.createBucket=function(c){return new la(c)},l.prototype.queryRadius=function(c){var y=c,w=lc(Xi("line-width",this,y),Xi("line-gap-width",this,y)),E=Xi("line-offset",this,y);return w/2+Math.abs(E)+ol(this.paint.get("line-translate"))},l.prototype.queryIntersectsFeature=function(c,y,w,E,C,N,q){var Q=_s(c,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),N.angle,q),ne=q/2*lc(this.paint.get("line-width").evaluate(y,w),this.paint.get("line-gap-width").evaluate(y,w)),re=this.paint.get("line-offset").evaluate(y,w);return re&&(E=function(ue,he){for(var Ie=[],Pe=new T(0,0),qe=0;qe<ue.length;qe++){for(var Be=ue[qe],it=[],st=0;st<Be.length;st++){var dt=Be[st],pt=Be[st+1],Pt=0===st?Pe:dt.sub(Be[st-1])._unit()._perp(),Vt=st===Be.length-1?Pe:pt.sub(dt)._unit()._perp(),Kt=Pt._add(Vt)._unit();Kt._mult(1/(Kt.x*Vt.x+Kt.y*Vt.y)),it.push(Kt._mult(he)._add(dt))}Ie.push(it)}return Ie}(E,re*q)),function(ue,he,Ie){for(var Pe=0;Pe<he.length;Pe++){var qe=he[Pe];if(ue.length>=3)for(var Be=0;Be<qe.length;Be++)if(as(ue,qe[Be]))return!0;if(Qu(ue,qe,Ie))return!0}return!1}(Q,E,ne)},l.prototype.isTileClipped=function(){return!0},l}(lo);function lc(a,l){return l>0?l+2*a:a}var xm=Yi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Cf=Yi([{name:"a_projected_pos",components:3,type:"Float32"}],4),N0=(Yi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Yi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),fy=(Yi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Yi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),k0=Yi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Em(a,l,c){return a.sections.forEach(function(y){var w,C,N;y.text=(w=y.text,C=c,"uppercase"===(N=l.layout.get("text-transform").evaluate(C,{}))?w=w.toLocaleUpperCase():"lowercase"===N&&(w=w.toLocaleLowerCase()),Ki.applyArabicShaping&&(w=Ki.applyArabicShaping(w)),w)}),a}Yi([{name:"triangle",components:3,type:"Uint16"}]),Yi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Yi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Yi([{type:"Float32",name:"offsetX"}]),Yi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var xl={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Sm=function(a,l,c,y,w){var E,C,N=8*w-y-1,q=(1<<N)-1,Q=q>>1,ne=-7,re=c?w-1:0,ue=c?-1:1,he=a[l+re];for(re+=ue,E=he&(1<<-ne)-1,he>>=-ne,ne+=N;ne>0;E=256*E+a[l+re],re+=ue,ne-=8);for(C=E&(1<<-ne)-1,E>>=-ne,ne+=y;ne>0;C=256*C+a[l+re],re+=ue,ne-=8);if(0===E)E=1-Q;else{if(E===q)return C?NaN:1/0*(he?-1:1);C+=Math.pow(2,y),E-=Q}return(he?-1:1)*C*Math.pow(2,E-y)},Cd=function(a,l,c,y,w,E){var C,N,q,Q=8*E-w-1,ne=(1<<Q)-1,re=ne>>1,ue=23===w?Math.pow(2,-24)-Math.pow(2,-77):0,he=y?0:E-1,Ie=y?1:-1,Pe=l<0||0===l&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(N=isNaN(l)?1:0,C=ne):(C=Math.floor(Math.log(l)/Math.LN2),l*(q=Math.pow(2,-C))<1&&(C--,q*=2),(l+=C+re>=1?ue/q:ue*Math.pow(2,1-re))*q>=2&&(C++,q/=2),C+re>=ne?(N=0,C=ne):C+re>=1?(N=(l*q-1)*Math.pow(2,w),C+=re):(N=l*Math.pow(2,re-1)*Math.pow(2,w),C=0));w>=8;a[c+he]=255&N,he+=Ie,N/=256,w-=8);for(C=C<<w|N,Q+=w;Q>0;a[c+he]=255&C,he+=Ie,C/=256,Q-=8);a[c+he-Ie]|=128*Pe},Rh=Ai;function Ai(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}Ai.Varint=0,Ai.Fixed64=1,Ai.Bytes=2,Ai.Fixed32=5;var Id=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function El(a){return a.type===Ai.Bytes?a.readVarint()+a.pos:a.pos+1}function hy(a,l,c){var y=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));c.realloc(y);for(var w=c.pos-1;w>=a;w--)c.buf[w+y]=c.buf[w]}function F0(a,l){for(var c=0;c<a.length;c++)l.writeVarint(a[c])}function Td(a,l){for(var c=0;c<a.length;c++)l.writeSVarint(a[c])}function If(a,l){for(var c=0;c<a.length;c++)l.writeFloat(a[c])}function z0(a,l){for(var c=0;c<a.length;c++)l.writeDouble(a[c])}function Wx(a,l){for(var c=0;c<a.length;c++)l.writeBoolean(a[c])}function py(a,l){for(var c=0;c<a.length;c++)l.writeFixed32(a[c])}function B0(a,l){for(var c=0;c<a.length;c++)l.writeSFixed32(a[c])}function Zx(a,l){for(var c=0;c<a.length;c++)l.writeFixed64(a[c])}function j0(a,l){for(var c=0;c<a.length;c++)l.writeSFixed64(a[c])}function Mh(a,l){return(a[l]|a[l+1]<<8|a[l+2]<<16)+16777216*a[l+3]}function Pd(a,l,c){a[c]=l,a[c+1]=l>>>8,a[c+2]=l>>>16,a[c+3]=l>>>24}function Tf(a,l){return(a[l]|a[l+1]<<8|a[l+2]<<16)+(a[l+3]<<24)}function my(a,l,c){1===a&&c.readMessage(U0,l)}function U0(a,l,c){if(3===a){var y=c.readMessage(gy,{}),w=y.width,E=y.height,C=y.left,N=y.top,q=y.advance;l.push({id:y.id,bitmap:new oc({width:w+6,height:E+6},y.bitmap),metrics:{width:w,height:E,left:C,top:N,advance:q}})}}function gy(a,l,c){1===a?l.id=c.readVarint():2===a?l.bitmap=c.readBytes():3===a?l.width=c.readVarint():4===a?l.height=c.readVarint():5===a?l.left=c.readSVarint():6===a?l.top=c.readSVarint():7===a&&(l.advance=c.readVarint())}function V0(a){for(var l=0,c=0,y=0,w=a;y<w.length;y+=1){var E=w[y];l+=E.w*E.h,c=Math.max(c,E.w)}a.sort(function(Pe,qe){return qe.h-Pe.h});for(var C=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),c),h:1/0}],N=0,q=0,Q=0,ne=a;Q<ne.length;Q+=1)for(var re=ne[Q],ue=C.length-1;ue>=0;ue--){var he=C[ue];if(!(re.w>he.w||re.h>he.h)){if(re.x=he.x,re.y=he.y,q=Math.max(q,re.y+re.h),N=Math.max(N,re.x+re.w),re.w===he.w&&re.h===he.h){var Ie=C.pop();ue<C.length&&(C[ue]=Ie)}else re.h===he.h?(he.x+=re.w,he.w-=re.w):re.w===he.w?(he.y+=re.h,he.h-=re.h):(C.push({x:he.x+re.w,y:he.y,w:he.w-re.w,h:re.h}),he.y+=re.h,he.h-=re.h);break}}return{w:N,h:q,fill:l/(N*q)||0}}Ai.prototype={destroy:function(){this.buf=null},readFields:function(a,l,c){for(c=c||this.length;this.pos<c;){var y=this.readVarint(),w=y>>3,E=this.pos;this.type=7&y,a(w,l,this),this.pos===E&&this.skip(y)}return l},readMessage:function(a,l){return this.readFields(a,l,this.readVarint()+this.pos)},readFixed32:function(){var a=Mh(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=Tf(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=Mh(this.buf,this.pos)+4294967296*Mh(this.buf,this.pos+4);return this.pos+=8,a},readSFixed64:function(){var a=Mh(this.buf,this.pos)+4294967296*Tf(this.buf,this.pos+4);return this.pos+=8,a},readFloat:function(){var a=Sm(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=Sm(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var l,c,y=this.buf;return l=127&(c=y[this.pos++]),c<128?l:(l|=(127&(c=y[this.pos++]))<<7,c<128?l:(l|=(127&(c=y[this.pos++]))<<14,c<128?l:(l|=(127&(c=y[this.pos++]))<<21,c<128?l:function(w,E,C){var N,q,Q=C.buf;if(N=(112&(q=Q[C.pos++]))>>4,q<128||(N|=(127&(q=Q[C.pos++]))<<3,q<128)||(N|=(127&(q=Q[C.pos++]))<<10,q<128)||(N|=(127&(q=Q[C.pos++]))<<17,q<128)||(N|=(127&(q=Q[C.pos++]))<<24,q<128)||(N|=(1&(q=Q[C.pos++]))<<31,q<128))return function Ac(a,l,c){return c?4294967296*l+(a>>>0):4294967296*(l>>>0)+(a>>>0)}(w,N,E);throw new Error("Expected varint not more than 10 bytes")}(l|=(15&(c=y[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var a=this.readVarint()+this.pos,l=this.pos;return this.pos=a,a-l>=12&&Id?Id.decode(this.buf.subarray(l,a)):function(c,y,w){for(var E="",C=y;C<w;){var N,q,Q,ne=c[C],re=null,ue=ne>239?4:ne>223?3:ne>191?2:1;if(C+ue>w)break;1===ue?ne<128&&(re=ne):2===ue?128==(192&(N=c[C+1]))&&(re=(31&ne)<<6|63&N)<=127&&(re=null):3===ue?(q=c[C+2],128==(192&(N=c[C+1]))&&128==(192&q)&&((re=(15&ne)<<12|(63&N)<<6|63&q)<=2047||re>=55296&&re<=57343)&&(re=null)):4===ue&&(q=c[C+2],Q=c[C+3],128==(192&(N=c[C+1]))&&128==(192&q)&&128==(192&Q)&&((re=(15&ne)<<18|(63&N)<<12|(63&q)<<6|63&Q)<=65535||re>=1114112)&&(re=null)),null===re?(re=65533,ue=1):re>65535&&(re-=65536,E+=String.fromCharCode(re>>>10&1023|55296),re=56320|1023&re),E+=String.fromCharCode(re),C+=ue}return E}(this.buf,l,a)},readBytes:function(){var a=this.readVarint()+this.pos,l=this.buf.subarray(this.pos,a);return this.pos=a,l},readPackedVarint:function(a,l){if(this.type!==Ai.Bytes)return a.push(this.readVarint(l));var c=El(this);for(a=a||[];this.pos<c;)a.push(this.readVarint(l));return a},readPackedSVarint:function(a){if(this.type!==Ai.Bytes)return a.push(this.readSVarint());var l=El(this);for(a=a||[];this.pos<l;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==Ai.Bytes)return a.push(this.readBoolean());var l=El(this);for(a=a||[];this.pos<l;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==Ai.Bytes)return a.push(this.readFloat());var l=El(this);for(a=a||[];this.pos<l;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==Ai.Bytes)return a.push(this.readDouble());var l=El(this);for(a=a||[];this.pos<l;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==Ai.Bytes)return a.push(this.readFixed32());var l=El(this);for(a=a||[];this.pos<l;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==Ai.Bytes)return a.push(this.readSFixed32());var l=El(this);for(a=a||[];this.pos<l;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==Ai.Bytes)return a.push(this.readFixed64());var l=El(this);for(a=a||[];this.pos<l;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==Ai.Bytes)return a.push(this.readSFixed64());var l=El(this);for(a=a||[];this.pos<l;)a.push(this.readSFixed64());return a},skip:function(a){var l=7&a;if(l===Ai.Varint)for(;this.buf[this.pos++]>127;);else if(l===Ai.Bytes)this.pos=this.readVarint()+this.pos;else if(l===Ai.Fixed32)this.pos+=4;else{if(l!==Ai.Fixed64)throw new Error("Unimplemented type: "+l);this.pos+=8}},writeTag:function(a,l){this.writeVarint(a<<3|l)},realloc:function(a){for(var l=this.length||16;l<this.pos+a;)l*=2;if(l!==this.length){var c=new Uint8Array(l);c.set(this.buf),this.buf=c,this.length=l}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),Pd(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),Pd(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),Pd(this.buf,-1&a,this.pos),Pd(this.buf,Math.floor(a*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),Pd(this.buf,-1&a,this.pos),Pd(this.buf,Math.floor(a*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(l,c){var y,w,E,N;if(l>=0?(y=l%4294967296|0,w=l/4294967296|0):(w=~(-l/4294967296),4294967295^(y=~(-l%4294967296))?y=y+1|0:(y=0,w=w+1|0)),l>=0x10000000000000000||l<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");c.realloc(10),E=y,(N=c).buf[N.pos++]=127&E|128,E>>>=7,N.buf[N.pos++]=127&E|128,E>>>=7,N.buf[N.pos++]=127&E|128,E>>>=7,N.buf[N.pos++]=127&E|128,N.buf[N.pos]=127&(E>>>=7),function(E,C){var N=(7&E)<<4;C.buf[C.pos++]|=N|((E>>>=3)?128:0),E&&(C.buf[C.pos++]=127&E|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=127&E|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=127&E|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=127&E|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=127&E)))))}(w,c)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(Boolean(a))},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var l=this.pos;this.pos=function(y,w,E){for(var C,N,q=0;q<w.length;q++){if((C=w.charCodeAt(q))>55295&&C<57344){if(!N){C>56319||q+1===w.length?(y[E++]=239,y[E++]=191,y[E++]=189):N=C;continue}if(C<56320){y[E++]=239,y[E++]=191,y[E++]=189,N=C;continue}C=N-55296<<10|C-56320|65536,N=null}else N&&(y[E++]=239,y[E++]=191,y[E++]=189,N=null);C<128?y[E++]=C:(C<2048?y[E++]=C>>6|192:(C<65536?y[E++]=C>>12|224:(y[E++]=C>>18|240,y[E++]=C>>12&63|128),y[E++]=C>>6&63|128),y[E++]=63&C|128)}return E}(this.buf,a,this.pos);var c=this.pos-l;c>=128&&hy(l,c,this),this.pos=l-1,this.writeVarint(c),this.pos+=c},writeFloat:function(a){this.realloc(4),Cd(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),Cd(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var l=a.length;this.writeVarint(l),this.realloc(l);for(var c=0;c<l;c++)this.buf[this.pos++]=a[c]},writeRawMessage:function(a,l){this.pos++;var c=this.pos;a(l,this);var y=this.pos-c;y>=128&&hy(c,y,this),this.pos=c-1,this.writeVarint(y),this.pos+=y},writeMessage:function(a,l,c){this.writeTag(a,Ai.Bytes),this.writeRawMessage(l,c)},writePackedVarint:function(a,l){l.length&&this.writeMessage(a,F0,l)},writePackedSVarint:function(a,l){l.length&&this.writeMessage(a,Td,l)},writePackedBoolean:function(a,l){l.length&&this.writeMessage(a,Wx,l)},writePackedFloat:function(a,l){l.length&&this.writeMessage(a,If,l)},writePackedDouble:function(a,l){l.length&&this.writeMessage(a,z0,l)},writePackedFixed32:function(a,l){l.length&&this.writeMessage(a,py,l)},writePackedSFixed32:function(a,l){l.length&&this.writeMessage(a,B0,l)},writePackedFixed64:function(a,l){l.length&&this.writeMessage(a,Zx,l)},writePackedSFixed64:function(a,l){l.length&&this.writeMessage(a,j0,l)},writeBytesField:function(a,l){this.writeTag(a,Ai.Bytes),this.writeBytes(l)},writeFixed32Field:function(a,l){this.writeTag(a,Ai.Fixed32),this.writeFixed32(l)},writeSFixed32Field:function(a,l){this.writeTag(a,Ai.Fixed32),this.writeSFixed32(l)},writeFixed64Field:function(a,l){this.writeTag(a,Ai.Fixed64),this.writeFixed64(l)},writeSFixed64Field:function(a,l){this.writeTag(a,Ai.Fixed64),this.writeSFixed64(l)},writeVarintField:function(a,l){this.writeTag(a,Ai.Varint),this.writeVarint(l)},writeSVarintField:function(a,l){this.writeTag(a,Ai.Varint),this.writeSVarint(l)},writeStringField:function(a,l){this.writeTag(a,Ai.Bytes),this.writeString(l)},writeFloatField:function(a,l){this.writeTag(a,Ai.Fixed32),this.writeFloat(l)},writeDoubleField:function(a,l){this.writeTag(a,Ai.Fixed64),this.writeDouble(l)},writeBooleanField:function(a,l){this.writeVarintField(a,Boolean(l))}};var Pf=function(a,l){var c=l.pixelRatio,y=l.version,w=l.stretchX,E=l.stretchY,C=l.content;this.paddedRect=a,this.pixelRatio=c,this.stretchX=w,this.stretchY=E,this.content=C,this.version=y},Oh={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Oh.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Oh.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Oh.tlbr.get=function(){return this.tl.concat(this.br)},Oh.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Pf.prototype,Oh);var uc=function(a,l){var c={},y={};this.haveRenderCallbacks=[];var w=[];this.addImages(a,c,w),this.addImages(l,y,w);var E=V0(w),C=new ss({width:E.w||1,height:E.h||1});for(var N in a){var q=a[N],Q=c[N].paddedRect;ss.copy(q.data,C,{x:0,y:0},{x:Q.x+1,y:Q.y+1},q.data)}for(var ne in l){var re=l[ne],ue=y[ne].paddedRect,he=ue.x+1,Ie=ue.y+1,Pe=re.data.width,qe=re.data.height;ss.copy(re.data,C,{x:0,y:0},{x:he,y:Ie},re.data),ss.copy(re.data,C,{x:0,y:qe-1},{x:he,y:Ie-1},{width:Pe,height:1}),ss.copy(re.data,C,{x:0,y:0},{x:he,y:Ie+qe},{width:Pe,height:1}),ss.copy(re.data,C,{x:Pe-1,y:0},{x:he-1,y:Ie},{width:1,height:qe}),ss.copy(re.data,C,{x:0,y:0},{x:he+Pe,y:Ie},{width:1,height:qe})}this.image=C,this.iconPositions=c,this.patternPositions=y};uc.prototype.addImages=function(a,l,c){for(var y in a){var w=a[y],E={x:0,y:0,w:w.data.width+2,h:w.data.height+2};c.push(E),l[y]=new Pf(E,w),w.hasRenderCallback&&this.haveRenderCallbacks.push(y)}},uc.prototype.patchUpdatedImages=function(a,l){for(var c in a.dispatchRenderCallbacks(this.haveRenderCallbacks),a.updatedImages)this.patchUpdatedImage(this.iconPositions[c],a.getImage(c),l),this.patchUpdatedImage(this.patternPositions[c],a.getImage(c),l)},uc.prototype.patchUpdatedImage=function(a,l,c){if(a&&l&&a.version!==l.version){a.version=l.version;var y=a.tl;c.update(l.data,void 0,{x:y[0],y:y[1]})}},on("ImagePosition",Pf),on("ImageAtlas",uc);var ws={horizontal:1,vertical:2,horizontalOnly:3},Gl=function(){this.scale=1,this.fontStack="",this.imageName=null};Gl.forText=function(a,l){var c=new Gl;return c.scale=a||1,c.fontStack=l,c},Gl.forImage=function(a){var l=new Gl;return l.imageName=a,l};var qa=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Lh(a,l,c,y,w,E,C,N,q,Q,ne,re,ue,he,Ie,Pe){var qe,Be=qa.fromFeature(a,w);re===ws.vertical&&Be.verticalizePunctuation();var it=Ki.processBidirectionalText,st=Ki.processStyledBidirectionalText;if(it&&1===Be.sections.length){qe=[];for(var dt=0,pt=it(Be.toString(),kh(Be,Q,E,l,y,he,Ie));dt<pt.length;dt+=1){var Pt=pt[dt],Vt=new qa;Vt.text=Pt,Vt.sections=Be.sections;for(var Kt=0;Kt<Pt.length;Kt++)Vt.sectionIndex.push(0);qe.push(Vt)}}else if(st){qe=[];for(var fn=0,Qt=st(Be.text,Be.sectionIndex,kh(Be,Q,E,l,y,he,Ie));fn<Qt.length;fn+=1){var Tn=Qt[fn],en=new qa;en.text=Tn[0],en.sectionIndex=Tn[1],en.sections=Be.sections,qe.push(en)}}else qe=function(bn,lr){for(var Xn=[],Nr=bn.text,Mn=0,Ur=0,Wi=lr;Ur<Wi.length;Ur+=1){var fo=Wi[Ur];Xn.push(bn.substring(Mn,fo)),Mn=fo}return Mn<Nr.length&&Xn.push(bn.substring(Mn,Nr.length)),Xn}(Be,kh(Be,Q,E,l,y,he,Ie));var sr=[],Bn={positionedLines:sr,text:Be.toString(),top:ne[1],bottom:ne[1],left:ne[0],right:ne[0],writingMode:re,iconsInText:!1,verticalizable:!1};return function(bn,lr,Xn,Nr,Mn,Ur,Wi,fo,no,Zi,ho,Ko){for(var Bo=0,va=-17,Yo=0,_a=0,_o="right"===fo?1:"left"===fo?0:.5,ua=0,Rr=0,xi=Mn;Rr<xi.length;Rr+=1){var Vr=xi[Rr];Vr.trim();var Fr=Vr.getMaxScale(),Za=24*(Fr-1),Aa={positionedGlyphs:[],lineOffset:0};bn.positionedLines[ua]=Aa;var Fi=Aa.positionedGlyphs,ro=0;if(Vr.length()){for(var Ra=0;Ra<Vr.length();Ra++){var $r=Vr.getSection(Ra),Hl=Vr.getSectionIndex(Ra),Ms=Vr.getCharCode(Ra),Cl=0,po=null,sl=null,Os=null,Fc=24,Ou=!(no===ws.horizontal||!ho&&!cd(Ms)||ho&&(Cm[Ms]||(ql=Ms,ln.Arabic(ql)||ln["Arabic Supplement"](ql)||ln["Arabic Extended-A"](ql)||ln["Arabic Presentation Forms-A"](ql)||ln["Arabic Presentation Forms-B"](ql))));if($r.imageName){var zc=Nr[$r.imageName];if(!zc)continue;Os=$r.imageName,bn.iconsInText=bn.iconsInText||!0,sl=zc.paddedRect;var $l=zc.displaySize;$r.scale=24*$r.scale/Ko,Cl=Za+(24-$l[1]*$r.scale),Fc=(po={width:$l[0],height:$l[1],left:1,top:-3,advance:Ou?$l[1]:$l[0]}).advance;var uu=Ou?$l[0]*$r.scale-24*Fr:$l[1]*$r.scale-24*Fr;uu>0&&uu>ro&&(ro=uu)}else{var Wh=Xn[$r.fontStack],Bc=Wh&&Wh[Ms];if(Bc&&Bc.rect)sl=Bc.rect,po=Bc.metrics;else{var Of=lr[$r.fontStack],Zh=Of&&Of[Ms];if(!Zh)continue;po=Zh.metrics}Cl=24*(Fr-$r.scale)}Ou?(bn.verticalizable=!0,Fi.push({glyph:Ms,imageName:Os,x:Bo,y:va+Cl,vertical:Ou,scale:$r.scale,fontStack:$r.fontStack,sectionIndex:Hl,metrics:po,rect:sl}),Bo+=Fc*$r.scale+Zi):(Fi.push({glyph:Ms,imageName:Os,x:Bo,y:va+Cl,vertical:Ou,scale:$r.scale,fontStack:$r.fontStack,sectionIndex:Hl,metrics:po,rect:sl}),Bo+=po.advance*$r.scale+Zi)}0!==Fi.length&&(Yo=Math.max(Bo-Zi,Yo),G0(Fi,0,Fi.length-1,_o,ro)),Bo=0;var Lf=Ur*Fr+ro;Aa.lineOffset=Math.max(ro,Za),va+=Lf,_a=Math.max(Lf,_a),++ua}else va+=Ur,++ua}var ql,kd=va- -17,Nf=Pm(Wi),Lu=Nf.horizontalAlign,Fd=Nf.verticalAlign;(function(kf,Jh,Ff,Ls,Kh,zd,zf,Bf,Yh){var Bd,jf=(Jh-Ff)*Kh;Bd=zd!==zf?-Bf*Ls- -17:(-Ls*Yh+.5)*zf;for(var jd=0,Uf=kf;jd<Uf.length;jd+=1)for(var jc=0,Ir=Uf[jd].positionedGlyphs;jc<Ir.length;jc+=1){var Ud=Ir[jc];Ud.x+=jf,Ud.y+=Bd}})(bn.positionedLines,_o,Lu,Fd,Yo,_a,Ur,kd,Mn.length),bn.top+=-Fd*kd,bn.bottom=bn.top+kd,bn.left+=-Lu*Yo,bn.right=bn.left+Yo}(Bn,l,c,y,qe,C,N,q,re,Q,ue,Pe),!function(bn){for(var lr=0,Xn=bn;lr<Xn.length;lr+=1)if(0!==Xn[lr].positionedGlyphs.length)return!1;return!0}(sr)&&Bn}qa.fromFeature=function(a,l){for(var c=new qa,y=0;y<a.sections.length;y++){var w=a.sections[y];w.image?c.addImageSection(w):c.addTextSection(w,l)}return c},qa.prototype.length=function(){return this.text.length},qa.prototype.getSection=function(a){return this.sections[this.sectionIndex[a]]},qa.prototype.getSectionIndex=function(a){return this.sectionIndex[a]},qa.prototype.getCharCode=function(a){return this.text.charCodeAt(a)},qa.prototype.verticalizePunctuation=function(){this.text=function(a){for(var l="",c=0;c<a.length;c++){var y=a.charCodeAt(c+1)||null,w=a.charCodeAt(c-1)||null;l+=y&&Ps(y)&&!xl[a[c+1]]||w&&Ps(w)&&!xl[a[c-1]]||!xl[a[c]]?a[c]:xl[a[c]]}return l}(this.text)},qa.prototype.trim=function(){for(var a=0,l=0;l<this.text.length&&Cm[this.text.charCodeAt(l)];l++)a++;for(var c=this.text.length,y=this.text.length-1;y>=0&&y>=a&&Cm[this.text.charCodeAt(y)];y--)c--;this.text=this.text.substring(a,c),this.sectionIndex=this.sectionIndex.slice(a,c)},qa.prototype.substring=function(a,l){var c=new qa;return c.text=this.text.substring(a,l),c.sectionIndex=this.sectionIndex.slice(a,l),c.sections=this.sections,c},qa.prototype.toString=function(){return this.text},qa.prototype.getMaxScale=function(){var a=this;return this.sectionIndex.reduce(function(l,c){return Math.max(l,a.sections[c].scale)},0)},qa.prototype.addTextSection=function(a,l){this.text+=a.text,this.sections.push(Gl.forText(a.scale,a.fontStack||l));for(var c=this.sections.length-1,y=0;y<a.text.length;++y)this.sectionIndex.push(c)},qa.prototype.addImageSection=function(a){var l=a.image?a.image.name:"";if(0!==l.length){var c=this.getNextImageSectionCharCode();c?(this.text+=String.fromCharCode(c),this.sections.push(Gl.forImage(l)),this.sectionIndex.push(this.sections.length-1)):L("Reached maximum number of images 6401")}else L("Can't add FormattedSection with an empty image.")},qa.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Cm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Wa={};function Nh(a,l,c,y,w,E){if(l.imageName){var C=y[l.imageName];return C?C.displaySize[0]*l.scale*24/E+w:0}var N=c[l.fontStack],q=N&&N[a];return q?q.metrics.advance*l.scale+w:0}function Im(a,l,c,y){var w=Math.pow(a-l,2);return y?a<l?w/2:2*w:w+Math.abs(c)*c}function yy(a,l,c){var y=0;return 10===a&&(y-=1e4),c&&(y+=150),40!==a&&65288!==a||(y+=50),41!==l&&65289!==l||(y+=50),y}function Tm(a,l,c,y,w,E){for(var C=null,N=Im(l,c,w,E),q=0,Q=y;q<Q.length;q+=1){var ne=Q[q],re=Im(l-ne.x,c,w,E)+ne.badness;re<=N&&(C=ne,N=re)}return{index:a,x:l,priorBreak:C,badness:N}}function kh(a,l,c,y,w,E,C){if("point"!==E)return[];if(!a)return[];for(var N,q=[],Q=function(qe,Be,it,st,dt,pt){for(var Pt=0,Vt=0;Vt<qe.length();Vt++){var Kt=qe.getSection(Vt);Pt+=Nh(qe.getCharCode(Vt),Kt,st,dt,Be,pt)}return Pt/Math.max(1,Math.ceil(Pt/it))}(a,l,c,y,w,C),ne=a.text.indexOf("\u200b")>=0,re=0,ue=0;ue<a.length();ue++){var he=a.getSection(ue),Ie=a.getCharCode(ue);if(Cm[Ie]||(re+=Nh(Ie,he,y,w,l,C)),ue<a.length()-1){var Pe=!((N=Ie)<11904||!(ln["Bopomofo Extended"](N)||ln.Bopomofo(N)||ln["CJK Compatibility Forms"](N)||ln["CJK Compatibility Ideographs"](N)||ln["CJK Compatibility"](N)||ln["CJK Radicals Supplement"](N)||ln["CJK Strokes"](N)||ln["CJK Symbols and Punctuation"](N)||ln["CJK Unified Ideographs Extension A"](N)||ln["CJK Unified Ideographs"](N)||ln["Enclosed CJK Letters and Months"](N)||ln["Halfwidth and Fullwidth Forms"](N)||ln.Hiragana(N)||ln["Ideographic Description Characters"](N)||ln["Kangxi Radicals"](N)||ln["Katakana Phonetic Extensions"](N)||ln.Katakana(N)||ln["Vertical Forms"](N)||ln["Yi Radicals"](N)||ln["Yi Syllables"](N)));(Wa[Ie]||Pe||he.imageName)&&q.push(Tm(ue+1,re,Q,q,yy(Ie,a.getCharCode(ue+1),Pe&&ne),!1))}}return function qe(Be){return Be?qe(Be.priorBreak).concat(Be.index):[]}(Tm(a.length(),re,Q,q,0,!0))}function Pm(a){var l=.5,c=.5;switch(a){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:l,verticalAlign:c}}function G0(a,l,c,y,w){if(y||w)for(var E=a[c],C=(a[c].x+E.metrics.advance*E.scale)*y,N=l;N<=c;N++)a[N].x-=C,a[N].y+=w}function vy(a,l,c,y,w,E){var C,N=a.image;if(N.content){var q=N.content,Q=N.pixelRatio||1;C=[q[0]/Q,q[1]/Q,N.displaySize[0]-q[2]/Q,N.displaySize[1]-q[3]/Q]}var ne,re,ue,he,Ie=l.left*E,Pe=l.right*E;"width"===c||"both"===c?(he=w[0]+Ie-y[3],re=w[0]+Pe+y[1]):re=(he=w[0]+(Ie+Pe-N.displaySize[0])/2)+N.displaySize[0];var qe=l.top*E,Be=l.bottom*E;return"height"===c||"both"===c?(ne=w[1]+qe-y[0],ue=w[1]+Be+y[2]):ue=(ne=w[1]+(qe+Be-N.displaySize[1])/2)+N.displaySize[1],{image:N,top:ne,right:re,bottom:ue,left:he,collisionPadding:C}}Wa[10]=!0,Wa[32]=!0,Wa[38]=!0,Wa[40]=!0,Wa[41]=!0,Wa[43]=!0,Wa[45]=!0,Wa[47]=!0,Wa[173]=!0,Wa[183]=!0,Wa[8203]=!0,Wa[8208]=!0,Wa[8211]=!0,Wa[8231]=!0;var Dd=function(a){function l(c,y,w,E){a.call(this,c,y),this.angle=w,void 0!==E&&(this.segment=E)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.clone=function(){return new l(this.x,this.y,this.angle,this.segment)},l}(T);function Dm(a,l){var c=l.expression;if("constant"===c.kind)return{kind:"constant",layoutSize:c.evaluate(new ti(a+1))};if("source"===c.kind)return{kind:"source"};for(var y=c.zoomStops,w=c.interpolationType,E=0;E<y.length&&y[E]<=a;)E++;for(var C=E=Math.max(0,E-1);C<y.length&&y[C]<a+1;)C++;C=Math.min(y.length-1,C);var N=y[E],q=y[C];return"composite"===c.kind?{kind:"composite",minZoom:N,maxZoom:q,interpolationType:w}:{kind:"camera",minZoom:N,maxZoom:q,minSize:c.evaluate(new ti(N)),maxSize:c.evaluate(new ti(q)),interpolationType:w}}function Ru(a,l,c){var y=l.uSize,w=c.lowerSize;return"source"===a.kind?w/128:"composite"===a.kind?$i(w/128,c.upperSize/128,l.uSizeT):y}function Ad(a,l){var c=0,y=0;if("constant"===a.kind)y=a.layoutSize;else if("source"!==a.kind){var w=a.interpolationType,E=w?me(Xr.interpolationFactor(w,l,a.minZoom,a.maxZoom),0,1):0;"camera"===a.kind?y=$i(a.minSize,a.maxSize,E):c=E}return{uSizeT:c,uSize:y}}on("Anchor",Dd);var H0=Object.freeze({__proto__:null,getSizeData:Dm,evaluateSizeForFeature:Ru,evaluateSizeForZoom:Ad,SIZE_PACK_FACTOR:128});function $0(a,l,c,y,w){if(void 0===l.segment)return!0;for(var E=l,C=l.segment+1,N=0;N>-c/2;){if(--C<0)return!1;N-=a[C].dist(E),E=a[C]}N+=a[C].dist(a[C+1]),C++;for(var q=[],Q=0;N<c/2;){var ne=a[C],re=a[C+1];if(!re)return!1;var ue=a[C-1].angleTo(ne)-ne.angleTo(re);for(ue=Math.abs((ue+3*Math.PI)%(2*Math.PI)-Math.PI),q.push({distance:N,angleDelta:ue}),Q+=ue;N-q[0].distance>y;)Q-=q.shift().angleDelta;if(Q>w)return!1;C++,N+=ne.dist(re)}return!0}function q0(a){for(var l=0,c=0;c<a.length-1;c++)l+=a[c].dist(a[c+1]);return l}function W0(a,l,c){return a?.6*l*c:0}function Z0(a,l){return Math.max(a?a.right-a.left:0,l?l.right-l.left:0)}function Jx(a,l,c,y,w,E){for(var C=W0(c,w,E),N=Z0(c,y)*E,q=0,Q=q0(a)/2,ne=0;ne<a.length-1;ne++){var re=a[ne],ue=a[ne+1],he=re.dist(ue);if(q+he>Q){var Ie=(Q-q)/he,Pe=$i(re.x,ue.x,Ie),qe=$i(re.y,ue.y,Ie),Be=new Dd(Pe,qe,ue.angleTo(re),ne);return Be._round(),!C||$0(a,Be,N,C,l)?Be:void 0}q+=he}}function _y(a,l,c,y,w,E,C,N,q){var Q=W0(y,E,C),ne=Z0(y,w),re=ne*C,ue=0===a[0].x||a[0].x===q||0===a[0].y||a[0].y===q;return l-re<l/4&&(l=re+l/4),function he(Ie,Pe,qe,Be,it,st,dt,pt,Pt){for(var Vt=st/2,Kt=q0(Ie),fn=0,Qt=Pe-qe,Tn=[],en=0;en<Ie.length-1;en++){for(var sr=Ie[en],Bn=Ie[en+1],bn=sr.dist(Bn),lr=Bn.angleTo(sr);Qt+qe<fn+bn;){var Xn=((Qt+=qe)-fn)/bn,Nr=$i(sr.x,Bn.x,Xn),Mn=$i(sr.y,Bn.y,Xn);if(Nr>=0&&Nr<Pt&&Mn>=0&&Mn<Pt&&Qt-Vt>=0&&Qt+Vt<=Kt){var Ur=new Dd(Nr,Mn,lr,en);Ur._round(),Be&&!$0(Ie,Ur,st,Be,it)||Tn.push(Ur)}}fn+=bn}return pt||Tn.length||dt||(Tn=he(Ie,fn/2,qe,Be,it,st,dt,!0,Pt)),Tn}(a,ue?l/2*N%l:(ne/2+2*E)*C*N%l,l,Q,c,re,ue,!1,q)}function by(a,l,c,y,w){for(var E=[],C=0;C<a.length;C++)for(var N=a[C],q=void 0,Q=0;Q<N.length-1;Q++){var ne=N[Q],re=N[Q+1];ne.x<l&&re.x<l||(ne.x<l?ne=new T(l,ne.y+(l-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round():re.x<l&&(re=new T(l,ne.y+(l-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round()),ne.y<c&&re.y<c||(ne.y<c?ne=new T(ne.x+(c-ne.y)/(re.y-ne.y)*(re.x-ne.x),c)._round():re.y<c&&(re=new T(ne.x+(c-ne.y)/(re.y-ne.y)*(re.x-ne.x),c)._round()),ne.x>=y&&re.x>=y||(ne.x>=y?ne=new T(y,ne.y+(y-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round():re.x>=y&&(re=new T(y,ne.y+(y-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round()),ne.y>=w&&re.y>=w||(ne.y>=w?ne=new T(ne.x+(w-ne.y)/(re.y-ne.y)*(re.x-ne.x),w)._round():re.y>=w&&(re=new T(ne.x+(w-ne.y)/(re.y-ne.y)*(re.x-ne.x),w)._round()),q&&ne.equals(q[q.length-1])||E.push(q=[ne]),q.push(re)))))}return E}function wy(a,l,c,y){var w=[],E=a.image,C=E.pixelRatio,N=E.paddedRect.w-2,q=E.paddedRect.h-2,Q=a.right-a.left,ne=a.bottom-a.top,re=E.stretchX||[[0,N]],ue=E.stretchY||[[0,q]],he=function(Nr,Mn){return Nr+Mn[1]-Mn[0]},Ie=re.reduce(he,0),Pe=ue.reduce(he,0),qe=N-Ie,Be=q-Pe,it=0,st=Ie,dt=0,pt=Pe,Pt=0,Vt=qe,Kt=0,fn=Be;if(E.content&&y){var Qt=E.content;it=Fh(re,0,Qt[0]),dt=Fh(ue,0,Qt[1]),st=Fh(re,Qt[0],Qt[2]),pt=Fh(ue,Qt[1],Qt[3]),Pt=Qt[0]-it,Kt=Qt[1]-dt,Vt=Qt[2]-Qt[0]-st,fn=Qt[3]-Qt[1]-pt}var Tn=function(Nr,Mn,Ur,Wi){var fo=Am(Nr.stretch-it,st,Q,a.left),no=zh(Nr.fixed-Pt,Vt,Nr.stretch,Ie),Zi=Am(Mn.stretch-dt,pt,ne,a.top),ho=zh(Mn.fixed-Kt,fn,Mn.stretch,Pe),Ko=Am(Ur.stretch-it,st,Q,a.left),Bo=zh(Ur.fixed-Pt,Vt,Ur.stretch,Ie),va=Am(Wi.stretch-dt,pt,ne,a.top),Yo=zh(Wi.fixed-Kt,fn,Wi.stretch,Pe),_a=new T(fo,Zi),_o=new T(Ko,Zi),ua=new T(Ko,va),Rr=new T(fo,va),xi=new T(no/C,ho/C),Vr=new T(Bo/C,Yo/C),Fr=l*Math.PI/180;if(Fr){var Za=Math.sin(Fr),Aa=Math.cos(Fr),Fi=[Aa,-Za,Za,Aa];_a._matMult(Fi),_o._matMult(Fi),Rr._matMult(Fi),ua._matMult(Fi)}var ro=Nr.stretch+Nr.fixed,Ra=Mn.stretch+Mn.fixed;return{tl:_a,tr:_o,bl:Rr,br:ua,tex:{x:E.paddedRect.x+1+ro,y:E.paddedRect.y+1+Ra,w:Ur.stretch+Ur.fixed-ro,h:Wi.stretch+Wi.fixed-Ra},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:xi,pixelOffsetBR:Vr,minFontScaleX:Vt/C/Q,minFontScaleY:fn/C/ne,isSDF:c}};if(y&&(E.stretchX||E.stretchY))for(var en=xy(re,qe,Ie),sr=xy(ue,Be,Pe),Bn=0;Bn<en.length-1;Bn++)for(var bn=en[Bn],lr=en[Bn+1],Xn=0;Xn<sr.length-1;Xn++)w.push(Tn(bn,sr[Xn],lr,sr[Xn+1]));else w.push(Tn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:N+1},{fixed:0,stretch:q+1}));return w}function Fh(a,l,c){for(var y=0,w=0,E=a;w<E.length;w+=1){var C=E[w];y+=Math.max(l,Math.min(c,C[1]))-Math.max(l,Math.min(c,C[0]))}return y}function xy(a,l,c){for(var y=[{fixed:-1,stretch:0}],w=0,E=a;w<E.length;w+=1){var C=E[w],N=C[0],q=C[1],Q=y[y.length-1];y.push({fixed:N-Q.stretch,stretch:Q.stretch}),y.push({fixed:N-Q.stretch,stretch:Q.stretch+(q-N)})}return y.push({fixed:l+1,stretch:c}),y}function Am(a,l,c,y){return a/l*c+y}function zh(a,l,c,y){return a-l*c/y}var Rc=function(a,l,c,y,w,E,C,N,q,Q){if(this.boxStartIndex=a.length,q){var ne=E.top,re=E.bottom,ue=E.collisionPadding;ue&&(ne-=ue[1],re+=ue[3]);var he=re-ne;he>0&&(he=Math.max(10,he),this.circleDiameter=he)}else{var Ie=E.top*C-N,Pe=E.bottom*C+N,qe=E.left*C-N,Be=E.right*C+N,it=E.collisionPadding;if(it&&(qe-=it[0]*C,Ie-=it[1]*C,Be+=it[2]*C,Pe+=it[3]*C),Q){var st=new T(qe,Ie),dt=new T(Be,Ie),pt=new T(qe,Pe),Pt=new T(Be,Pe),Vt=Q*Math.PI/180;st._rotate(Vt),dt._rotate(Vt),pt._rotate(Vt),Pt._rotate(Vt),qe=Math.min(st.x,dt.x,pt.x,Pt.x),Be=Math.max(st.x,dt.x,pt.x,Pt.x),Ie=Math.min(st.y,dt.y,pt.y,Pt.y),Pe=Math.max(st.y,dt.y,pt.y,Pt.y)}a.emplaceBack(l.x,l.y,qe,Ie,Be,Pe,c,y,w)}this.boxEndIndex=a.length},Mc=function(a,l){if(void 0===a&&(a=[]),void 0===l&&(l=su),this.data=a,this.length=this.data.length,this.compare=l,this.length>0)for(var c=(this.length>>1)-1;c>=0;c--)this._down(c)};function su(a,l){return a<l?-1:a>l?1:0}function Df(a,l,c){void 0===l&&(l=1),void 0===c&&(c=!1);for(var y=1/0,w=1/0,E=-1/0,C=-1/0,N=a[0],q=0;q<N.length;q++){var Q=N[q];(!q||Q.x<y)&&(y=Q.x),(!q||Q.y<w)&&(w=Q.y),(!q||Q.x>E)&&(E=Q.x),(!q||Q.y>C)&&(C=Q.y)}var ne=Math.min(E-y,C-w),re=ne/2,ue=new Mc([],Ey);if(0===ne)return new T(y,w);for(var he=y;he<E;he+=ne)for(var Ie=w;Ie<C;Ie+=ne)ue.push(new Oc(he+re,Ie+re,re,a));for(var Pe=function(it){for(var st=0,dt=0,pt=0,Pt=it[0],Vt=0,Kt=Pt.length,fn=Kt-1;Vt<Kt;fn=Vt++){var Qt=Pt[Vt],Tn=Pt[fn],en=Qt.x*Tn.y-Tn.x*Qt.y;dt+=(Qt.x+Tn.x)*en,pt+=(Qt.y+Tn.y)*en,st+=3*en}return new Oc(dt/st,pt/st,0,it)}(a),qe=ue.length;ue.length;){var Be=ue.pop();(Be.d>Pe.d||!Pe.d)&&(Pe=Be,c&&console.log("found best %d after %d probes",Math.round(1e4*Be.d)/1e4,qe)),Be.max-Pe.d<=l||(ue.push(new Oc(Be.p.x-(re=Be.h/2),Be.p.y-re,re,a)),ue.push(new Oc(Be.p.x+re,Be.p.y-re,re,a)),ue.push(new Oc(Be.p.x-re,Be.p.y+re,re,a)),ue.push(new Oc(Be.p.x+re,Be.p.y+re,re,a)),qe+=4)}return c&&(console.log("num probes: "+qe),console.log("best distance: "+Pe.d)),Pe.p}function Ey(a,l){return l.max-a.max}function Oc(a,l,c,y){this.p=new T(a,l),this.h=c,this.d=function(w,E){for(var C=!1,N=1/0,q=0;q<E.length;q++)for(var Q=E[q],ne=0,re=Q.length,ue=re-1;ne<re;ue=ne++){var he=Q[ne],Ie=Q[ue];he.y>w.y!=Ie.y>w.y&&w.x<(Ie.x-he.x)*(w.y-he.y)/(Ie.y-he.y)+he.x&&(C=!C),N=Math.min(N,ec(w,he,Ie))}return(C?1:-1)*Math.sqrt(N)}(this.p,y),this.max=this.d+this.h*Math.SQRT2}Mc.prototype.push=function(a){this.data.push(a),this.length++,this._up(this.length-1)},Mc.prototype.pop=function(){if(0!==this.length){var a=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),a}},Mc.prototype.peek=function(){return this.data[0]},Mc.prototype._up=function(a){for(var l=this.data,c=this.compare,y=l[a];a>0;){var w=a-1>>1,E=l[w];if(c(y,E)>=0)break;l[a]=E,a=w}l[a]=y},Mc.prototype._down=function(a){for(var l=this.data,c=this.compare,y=this.length>>1,w=l[a];a<y;){var E=1+(a<<1),C=l[E],N=E+1;if(N<this.length&&c(l[N],C)<0&&(E=N,C=l[N]),c(C,w)>=0)break;l[a]=C,a=E}l[a]=w};var Bh=Number.POSITIVE_INFINITY;function J0(a,l){return l[1]!==Bh?function(c,y,w){var E=0,C=0;switch(y=Math.abs(y),w=Math.abs(w),c){case"top-right":case"top-left":case"top":C=w-7;break;case"bottom-right":case"bottom-left":case"bottom":C=7-w}switch(c){case"top-right":case"bottom-right":case"right":E=-y;break;case"top-left":case"bottom-left":case"left":E=y}return[E,C]}(a,l[0],l[1]):function(c,y){var w=0,E=0;y<0&&(y=0);var C=y/Math.sqrt(2);switch(c){case"top-right":case"top-left":E=C-7;break;case"bottom-right":case"bottom-left":E=7-C;break;case"bottom":E=7-y;break;case"top":E=y-7}switch(c){case"top-right":case"bottom-right":w=-C;break;case"top-left":case"bottom-left":w=C;break;case"left":w=y;break;case"right":w=-y}return[w,E]}(a,l[0])}function Sy(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function K0(a,l,c,y,w,E,C,N,q,Q,ne,re,ue,he,Ie){var Pe=function(dt,pt,Pt,Vt,Kt,fn,Qt,Tn){for(var en=Vt.layout.get("text-rotate").evaluate(fn,{})*Math.PI/180,sr=[],Bn=0,bn=pt.positionedLines;Bn<bn.length;Bn+=1)for(var lr=bn[Bn],Xn=0,Nr=lr.positionedGlyphs;Xn<Nr.length;Xn+=1){var Mn=Nr[Xn];if(Mn.rect){var Ur=Mn.rect||{},Wi=4,fo=!0,no=1,Zi=0,ho=(Kt||Tn)&&Mn.vertical,Ko=Mn.metrics.advance*Mn.scale/2;if(Tn&&pt.verticalizable&&(Zi=lr.lineOffset/2-(Mn.imageName?-(24-Mn.metrics.width*Mn.scale)/2:24*(Mn.scale-1))),Mn.imageName){var Bo=Qt[Mn.imageName];fo=Bo.sdf,Wi=1/(no=Bo.pixelRatio)}var va=Kt?[Mn.x+Ko,Mn.y]:[0,0],Yo=Kt?[0,0]:[Mn.x+Ko+Pt[0],Mn.y+Pt[1]-Zi],_a=[0,0];ho&&(_a=Yo,Yo=[0,0]);var _o=(Mn.metrics.left-Wi)*Mn.scale-Ko+Yo[0],ua=(-Mn.metrics.top-Wi)*Mn.scale+Yo[1],Rr=_o+Ur.w*Mn.scale/no,xi=ua+Ur.h*Mn.scale/no,Vr=new T(_o,ua),Fr=new T(Rr,ua),Za=new T(_o,xi),Aa=new T(Rr,xi);if(ho){var Fi=new T(-Ko,Ko- -17),ro=-Math.PI/2,Ra=12-Ko,$r=new T(22-Ra,-(Mn.imageName?Ra:0)),Hl=new(Function.prototype.bind.apply(T,[null].concat(_a)));Vr._rotateAround(ro,Fi)._add($r)._add(Hl),Fr._rotateAround(ro,Fi)._add($r)._add(Hl),Za._rotateAround(ro,Fi)._add($r)._add(Hl),Aa._rotateAround(ro,Fi)._add($r)._add(Hl)}if(en){var Ms=Math.sin(en),Cl=Math.cos(en),po=[Cl,-Ms,Ms,Cl];Vr._matMult(po),Fr._matMult(po),Za._matMult(po),Aa._matMult(po)}var sl=new T(0,0),Os=new T(0,0);sr.push({tl:Vr,tr:Fr,bl:Za,br:Aa,tex:Ur,writingMode:pt.writingMode,glyphOffset:va,sectionIndex:Mn.sectionIndex,isSDF:fo,pixelOffsetTL:sl,pixelOffsetBR:Os,minFontScaleX:0,minFontScaleY:0})}}return sr}(0,c,N,w,E,C,y,a.allowVerticalPlacement),qe=a.textSizeData,Be=null;"source"===qe.kind?(Be=[128*w.layout.get("text-size").evaluate(C,{})])[0]>32640&&L(a.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===qe.kind&&((Be=[128*he.compositeTextSizes[0].evaluate(C,{},Ie),128*he.compositeTextSizes[1].evaluate(C,{},Ie)])[0]>32640||Be[1]>32640)&&L(a.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),a.addSymbols(a.text,Pe,Be,N,E,C,Q,l,q.lineStartIndex,q.lineLength,ue,Ie);for(var it=0,st=ne;it<st.length;it+=1)re[st[it]]=a.text.placedSymbolArray.length-1;return 4*Pe.length}function jh(a){for(var l in a)return a[l];return null}function Rm(a,l,c,y){var w=a.compareText;if(l in w){for(var E=w[l],C=E.length-1;C>=0;C--)if(y.dist(E[C])<c)return!0}else w[l]=[];return w[l].push(y),!1}var Mm=Sd.VectorTileFeature.types,Kx=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Om(a,l,c,y,w,E,C,N,q,Q,ne,re,ue){var he=N?Math.min(32640,Math.round(N[0])):0,Ie=N?Math.min(32640,Math.round(N[1])):0;a.emplaceBack(l,c,Math.round(32*y),Math.round(32*w),E,C,(he<<1)+(q?1:0),Ie,16*Q,16*ne,256*re,256*ue)}function Uh(a,l,c){a.emplaceBack(l.x,l.y,c),a.emplaceBack(l.x,l.y,c),a.emplaceBack(l.x,l.y,c),a.emplaceBack(l.x,l.y,c)}function Y0(a){for(var l=0,c=a.sections;l<c.length;l+=1)if(fd(c[l].text))return!0;return!1}var Rd=function(a){this.layoutVertexArray=new Yu,this.indexArray=new Ds,this.programConfigurations=a,this.segments=new ye,this.dynamicLayoutVertexArray=new Xu,this.opacityVertexArray=new gf,this.placedSymbolArray=new S};Rd.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},Rd.prototype.upload=function(a,l,c,y){this.isEmpty()||(c&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,xm.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,Cf.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,Kx,!0),this.opacityVertexBuffer.itemSize=1),(c||y)&&this.programConfigurations.upload(a))},Rd.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},on("SymbolBuffers",Rd);var Af=function(a,l,c){this.layoutVertexArray=new a,this.layoutAttributes=l,this.indexArray=new c,this.segments=new ye,this.collisionVertexArray=new yf};Af.prototype.upload=function(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,N0.members,!0)},Af.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},on("CollisionBuffers",Af);var wi=function(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(E){return E.id}),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=$a([]),this.placementViewportMatrix=$a([]);var l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Dm(this.zoom,l["text-size"]),this.iconSizeData=Dm(this.zoom,l["icon-size"]);var c=this.layers[0].layout,y=c.get("symbol-sort-key"),w=c.get("symbol-z-order");this.canOverlap=c.get("text-allow-overlap")||c.get("icon-allow-overlap")||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==w&&!y.isConstant(),this.sortFeaturesByY=("viewport-y"===w||"auto"===w&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===c.get("symbol-placement")&&(this.writingModes=c.get("text-writing-mode").map(function(E){return ws[E]})),this.stateDependentLayerIds=this.layers.filter(function(E){return E.isStateDependent()}).map(function(E){return E.id}),this.sourceID=a.sourceID};wi.prototype.createArrays=function(){this.text=new Rd(new bi(this.layers,this.zoom,function(a){return/^text/.test(a)})),this.icon=new Rd(new bi(this.layers,this.zoom,function(a){return/^icon/.test(a)})),this.glyphOffsetArray=new H,this.lineVertexArray=new te,this.symbolInstances=new O},wi.prototype.calculateGlyphDependencies=function(a,l,c,y,w){for(var E=0;E<a.length;E++)if(l[a.charCodeAt(E)]=!0,(c||y)&&w){var C=xl[a.charAt(E)];C&&(l[C.charCodeAt(0)]=!0)}},wi.prototype.populate=function(a,l,c){var y=this.layers[0],w=y.layout,E=w.get("text-font"),C=w.get("text-field"),N=w.get("icon-image"),q=("constant"!==C.value.kind||C.value.value instanceof Hi&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&("constant"!==E.value.kind||E.value.value.length>0),Q="constant"!==N.value.kind||!!N.value.value||Object.keys(N.parameters).length>0,ne=w.get("symbol-sort-key");if(this.features=[],q||Q){for(var re=l.iconDependencies,ue=l.glyphDependencies,he=l.availableImages,Ie=new ti(this.zoom),Pe=0,qe=a;Pe<qe.length;Pe+=1){var Be=qe[Pe],it=Be.feature,st=Be.id,dt=Be.index,pt=Be.sourceLayerIndex,Pt=y._featureFilter.needGeometry,Vt=ko(it,Pt);if(y._featureFilter.filter(Ie,Vt,c)){Pt||(Vt.geometry=yo(it));var Kt=void 0;if(q){var fn=y.getValueAndResolveTokens("text-field",Vt,c,he),Qt=Hi.factory(fn);Y0(Qt)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===el()||this.hasRTLText&&Ki.isParsed())&&(Kt=Em(Qt,y,Vt))}var Tn=void 0;if(Q){var en=y.getValueAndResolveTokens("icon-image",Vt,c,he);Tn=en instanceof nr?en:nr.fromString(en)}if(Kt||Tn){var sr=this.sortFeaturesByKey?ne.evaluate(Vt,{},c):void 0;if(this.features.push({id:st,text:Kt,icon:Tn,index:dt,sourceLayerIndex:pt,geometry:Vt.geometry,properties:it.properties,type:Mm[it.type],sortKey:sr}),Tn&&(re[Tn.name]=!0),Kt){var Bn=E.evaluate(Vt,{},c).join(","),bn="map"===w.get("text-rotation-alignment")&&"point"!==w.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ws.vertical)>=0;for(var lr=0,Xn=Kt.sections;lr<Xn.length;lr+=1){var Nr=Xn[lr];if(Nr.image)re[Nr.image.name]=!0;else{var Mn=ud(Kt.toString()),Ur=Nr.fontStack||Bn,Wi=ue[Ur]=ue[Ur]||{};this.calculateGlyphDependencies(Nr.text,Wi,bn,this.allowVerticalPlacement,Mn)}}}}}}"line"===w.get("symbol-placement")&&(this.features=function(fo){var no={},Zi={},ho=[],Ko=0;function Bo(Fi){ho.push(fo[Fi]),Ko++}function va(Fi,ro,Ra){var $r=Zi[Fi];return delete Zi[Fi],Zi[ro]=$r,ho[$r].geometry[0].pop(),ho[$r].geometry[0]=ho[$r].geometry[0].concat(Ra[0]),$r}function Yo(Fi,ro,Ra){var $r=no[ro];return delete no[ro],no[Fi]=$r,ho[$r].geometry[0].shift(),ho[$r].geometry[0]=Ra[0].concat(ho[$r].geometry[0]),$r}function _a(Fi,ro,Ra){var $r=Ra?ro[0][ro[0].length-1]:ro[0][0];return Fi+":"+$r.x+":"+$r.y}for(var _o=0;_o<fo.length;_o++){var ua=fo[_o],Rr=ua.geometry,xi=ua.text?ua.text.toString():null;if(xi){var Vr=_a(xi,Rr),Fr=_a(xi,Rr,!0);if(Vr in Zi&&Fr in no&&Zi[Vr]!==no[Fr]){var Za=Yo(Vr,Fr,Rr),Aa=va(Vr,Fr,ho[Za].geometry);delete no[Vr],delete Zi[Fr],Zi[_a(xi,ho[Aa].geometry,!0)]=Aa,ho[Za].geometry=null}else Vr in Zi?va(Vr,Fr,Rr):Fr in no?Yo(Vr,Fr,Rr):(Bo(_o),no[Vr]=Ko-1,Zi[Fr]=Ko-1)}else Bo(_o)}return ho.filter(function(Fi){return Fi.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(fo,no){return fo.sortKey-no.sortKey})}},wi.prototype.update=function(a,l,c){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,l,this.layers,c),this.icon.programConfigurations.updatePaintArrays(a,l,this.layers,c))},wi.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},wi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},wi.prototype.upload=function(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},wi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},wi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},wi.prototype.addToLineVertexArray=function(a,l){var c=this.lineVertexArray.length;if(void 0!==a.segment){for(var y=a.dist(l[a.segment+1]),w=a.dist(l[a.segment]),E={},C=a.segment+1;C<l.length;C++)E[C]={x:l[C].x,y:l[C].y,tileUnitDistanceFromAnchor:y},C<l.length-1&&(y+=l[C+1].dist(l[C]));for(var N=a.segment||0;N>=0;N--)E[N]={x:l[N].x,y:l[N].y,tileUnitDistanceFromAnchor:w},N>0&&(w+=l[N-1].dist(l[N]));for(var q=0;q<l.length;q++){var Q=E[q];this.lineVertexArray.emplaceBack(Q.x,Q.y,Q.tileUnitDistanceFromAnchor)}}return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}},wi.prototype.addSymbols=function(a,l,c,y,w,E,C,N,q,Q,ne,re){for(var ue=a.indexArray,he=a.layoutVertexArray,Ie=a.segments.prepareSegment(4*l.length,he,ue,this.canOverlap?E.sortKey:void 0),Pe=this.glyphOffsetArray.length,qe=Ie.vertexLength,Be=this.allowVerticalPlacement&&C===ws.vertical?Math.PI/2:0,it=E.text&&E.text.sections,st=0;st<l.length;st++){var dt=l[st],pt=dt.tl,Pt=dt.tr,Vt=dt.bl,Kt=dt.br,fn=dt.tex,Qt=dt.pixelOffsetTL,Tn=dt.pixelOffsetBR,en=dt.minFontScaleX,sr=dt.minFontScaleY,Bn=dt.glyphOffset,bn=dt.isSDF,lr=dt.sectionIndex,Xn=Ie.vertexLength,Nr=Bn[1];Om(he,N.x,N.y,pt.x,Nr+pt.y,fn.x,fn.y,c,bn,Qt.x,Qt.y,en,sr),Om(he,N.x,N.y,Pt.x,Nr+Pt.y,fn.x+fn.w,fn.y,c,bn,Tn.x,Qt.y,en,sr),Om(he,N.x,N.y,Vt.x,Nr+Vt.y,fn.x,fn.y+fn.h,c,bn,Qt.x,Tn.y,en,sr),Om(he,N.x,N.y,Kt.x,Nr+Kt.y,fn.x+fn.w,fn.y+fn.h,c,bn,Tn.x,Tn.y,en,sr),Uh(a.dynamicLayoutVertexArray,N,Be),ue.emplaceBack(Xn,Xn+1,Xn+2),ue.emplaceBack(Xn+1,Xn+2,Xn+3),Ie.vertexLength+=4,Ie.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Bn[0]),st!==l.length-1&&lr===l[st+1].sectionIndex||a.programConfigurations.populatePaintArrays(he.length,E,E.index,{},re,it&&it[lr])}a.placedSymbolArray.emplaceBack(N.x,N.y,Pe,this.glyphOffsetArray.length-Pe,qe,q,Q,N.segment,c?c[0]:0,c?c[1]:0,y[0],y[1],C,0,!1,0,ne)},wi.prototype._addCollisionDebugVertex=function(a,l,c,y,w,E){return l.emplaceBack(0,0),a.emplaceBack(c.x,c.y,y,w,Math.round(E.x),Math.round(E.y))},wi.prototype.addCollisionDebugVertices=function(a,l,c,y,w,E,C){var N=w.segments.prepareSegment(4,w.layoutVertexArray,w.indexArray),q=N.vertexLength,Q=w.layoutVertexArray,ne=w.collisionVertexArray,re=C.anchorX,ue=C.anchorY;this._addCollisionDebugVertex(Q,ne,E,re,ue,new T(a,l)),this._addCollisionDebugVertex(Q,ne,E,re,ue,new T(c,l)),this._addCollisionDebugVertex(Q,ne,E,re,ue,new T(c,y)),this._addCollisionDebugVertex(Q,ne,E,re,ue,new T(a,y)),N.vertexLength+=4;var he=w.indexArray;he.emplaceBack(q,q+1),he.emplaceBack(q+1,q+2),he.emplaceBack(q+2,q+3),he.emplaceBack(q+3,q),N.primitiveLength+=4},wi.prototype.addDebugCollisionBoxes=function(a,l,c,y){for(var w=a;w<l;w++){var E=this.collisionBoxArray.get(w);this.addCollisionDebugVertices(E.x1,E.y1,E.x2,E.y2,y?this.textCollisionBox:this.iconCollisionBox,E.anchorPoint,c)}},wi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Af(kt,fy.members,Tu),this.iconCollisionBox=new Af(kt,fy.members,Tu);for(var a=0;a<this.symbolInstances.length;a++){var l=this.symbolInstances.get(a);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}},wi.prototype._deserializeCollisionBoxesForSymbol=function(a,l,c,y,w,E,C,N,q){for(var Q={},ne=l;ne<c;ne++){var re=a.get(ne);Q.textBox={x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,anchorPointX:re.anchorPointX,anchorPointY:re.anchorPointY},Q.textFeatureIndex=re.featureIndex;break}for(var ue=y;ue<w;ue++){var he=a.get(ue);Q.verticalTextBox={x1:he.x1,y1:he.y1,x2:he.x2,y2:he.y2,anchorPointX:he.anchorPointX,anchorPointY:he.anchorPointY},Q.verticalTextFeatureIndex=he.featureIndex;break}for(var Ie=E;Ie<C;Ie++){var Pe=a.get(Ie);Q.iconBox={x1:Pe.x1,y1:Pe.y1,x2:Pe.x2,y2:Pe.y2,anchorPointX:Pe.anchorPointX,anchorPointY:Pe.anchorPointY},Q.iconFeatureIndex=Pe.featureIndex;break}for(var qe=N;qe<q;qe++){var Be=a.get(qe);Q.verticalIconBox={x1:Be.x1,y1:Be.y1,x2:Be.x2,y2:Be.y2,anchorPointX:Be.anchorPointX,anchorPointY:Be.anchorPointY},Q.verticalIconFeatureIndex=Be.featureIndex;break}return Q},wi.prototype.deserializeCollisionBoxes=function(a){this.collisionArrays=[];for(var l=0;l<this.symbolInstances.length;l++){var c=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}},wi.prototype.hasTextData=function(){return this.text.segments.get().length>0},wi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},wi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},wi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},wi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},wi.prototype.addIndicesForPlacedSymbol=function(a,l){for(var c=a.placedSymbolArray.get(l),y=c.vertexStartIndex+4*c.numGlyphs,w=c.vertexStartIndex;w<y;w+=4)a.indexArray.emplaceBack(w,w+1,w+2),a.indexArray.emplaceBack(w+1,w+2,w+3)},wi.prototype.getSortedSymbolIndexes=function(a){if(this.sortedAngle===a&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var l=Math.sin(a),c=Math.cos(a),y=[],w=[],E=[],C=0;C<this.symbolInstances.length;++C){E.push(C);var N=this.symbolInstances.get(C);y.push(0|Math.round(l*N.anchorX+c*N.anchorY)),w.push(N.featureIndex)}return E.sort(function(q,Q){return y[q]-y[Q]||w[Q]-w[q]}),E},wi.prototype.addToSortKeyRanges=function(a,l){var c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===l?c.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:a,symbolInstanceEnd:a+1})},wi.prototype.sortFeatures=function(a){var l=this;if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var c=0,y=this.symbolInstanceIndexes;c<y.length;c+=1){var w=this.symbolInstances.get(y[c]);this.featureSortOrder.push(w.featureIndex),[w.rightJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.leftJustifiedTextSymbolIndex].forEach(function(E,C,N){E>=0&&N.indexOf(E)===C&&l.addIndicesForPlacedSymbol(l.text,E)}),w.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,w.verticalPlacedTextSymbolIndex),w.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,w.placedIconSymbolIndex),w.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,w.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},on("SymbolBucket",wi,{omit:["layers","collisionBoxArray","features","compareText"]}),wi.MAX_GLYPHS=65535,wi.addDynamicAttributes=Uh;var Cy=new aa({"symbol-placement":new an(xe.layout_symbol["symbol-placement"]),"symbol-spacing":new an(xe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new an(xe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new zn(xe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new an(xe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new an(xe.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new an(xe.layout_symbol["icon-ignore-placement"]),"icon-optional":new an(xe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new an(xe.layout_symbol["icon-rotation-alignment"]),"icon-size":new zn(xe.layout_symbol["icon-size"]),"icon-text-fit":new an(xe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new an(xe.layout_symbol["icon-text-fit-padding"]),"icon-image":new zn(xe.layout_symbol["icon-image"]),"icon-rotate":new zn(xe.layout_symbol["icon-rotate"]),"icon-padding":new an(xe.layout_symbol["icon-padding"]),"icon-keep-upright":new an(xe.layout_symbol["icon-keep-upright"]),"icon-offset":new zn(xe.layout_symbol["icon-offset"]),"icon-anchor":new zn(xe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new an(xe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new an(xe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new an(xe.layout_symbol["text-rotation-alignment"]),"text-field":new zn(xe.layout_symbol["text-field"]),"text-font":new zn(xe.layout_symbol["text-font"]),"text-size":new zn(xe.layout_symbol["text-size"]),"text-max-width":new zn(xe.layout_symbol["text-max-width"]),"text-line-height":new an(xe.layout_symbol["text-line-height"]),"text-letter-spacing":new zn(xe.layout_symbol["text-letter-spacing"]),"text-justify":new zn(xe.layout_symbol["text-justify"]),"text-radial-offset":new zn(xe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new an(xe.layout_symbol["text-variable-anchor"]),"text-anchor":new zn(xe.layout_symbol["text-anchor"]),"text-max-angle":new an(xe.layout_symbol["text-max-angle"]),"text-writing-mode":new an(xe.layout_symbol["text-writing-mode"]),"text-rotate":new zn(xe.layout_symbol["text-rotate"]),"text-padding":new an(xe.layout_symbol["text-padding"]),"text-keep-upright":new an(xe.layout_symbol["text-keep-upright"]),"text-transform":new zn(xe.layout_symbol["text-transform"]),"text-offset":new zn(xe.layout_symbol["text-offset"]),"text-allow-overlap":new an(xe.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new an(xe.layout_symbol["text-ignore-placement"]),"text-optional":new an(xe.layout_symbol["text-optional"])}),Md={paint:new aa({"icon-opacity":new zn(xe.paint_symbol["icon-opacity"]),"icon-color":new zn(xe.paint_symbol["icon-color"]),"icon-halo-color":new zn(xe.paint_symbol["icon-halo-color"]),"icon-halo-width":new zn(xe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new zn(xe.paint_symbol["icon-halo-blur"]),"icon-translate":new an(xe.paint_symbol["icon-translate"]),"icon-translate-anchor":new an(xe.paint_symbol["icon-translate-anchor"]),"text-opacity":new zn(xe.paint_symbol["text-opacity"]),"text-color":new zn(xe.paint_symbol["text-color"],{runtimeType:Hn,getOverride:function(a){return a.textColor},hasOverride:function(a){return!!a.textColor}}),"text-halo-color":new zn(xe.paint_symbol["text-halo-color"]),"text-halo-width":new zn(xe.paint_symbol["text-halo-width"]),"text-halo-blur":new zn(xe.paint_symbol["text-halo-blur"]),"text-translate":new an(xe.paint_symbol["text-translate"]),"text-translate-anchor":new an(xe.paint_symbol["text-translate-anchor"])}),layout:Cy},Od=function(a){this.type=a.property.overrides?a.property.overrides.runtimeType:hn,this.defaultValue=a};Od.prototype.evaluate=function(a){if(a.formattedSection){var l=this.defaultValue.property.overrides;if(l&&l.hasOverride(a.formattedSection))return l.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default},Od.prototype.eachChild=function(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)},Od.prototype.outputDefined=function(){return!1},Od.prototype.serialize=function(){return null},on("FormatSectionOverride",Od,{omit:["defaultValue"]});var Lm=function(a){function l(c){a.call(this,c,Md)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.recalculate=function(c,y){if(a.prototype.recalculate.call(this,c,y),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var w=this.layout.get("text-writing-mode");if(w){for(var E=[],C=0,N=w;C<N.length;C+=1){var q=N[C];E.indexOf(q)<0&&E.push(q)}this.layout._values["text-writing-mode"]=E}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},l.prototype.getValueAndResolveTokens=function(c,y,w,E){var q,C=this.layout.get(c).evaluate(y,{},w,E),N=this._unevaluatedLayout._values[c];return N.isDataDriven()||br(N.value)||!C?C:(q=y.properties,C.replace(/{([^{}]+)}/g,function(ne,re){return re in q?String(q[re]):""}))},l.prototype.createBucket=function(c){return new wi(c)},l.prototype.queryRadius=function(){return 0},l.prototype.queryIntersectsFeature=function(){return!1},l.prototype._setPaintOverrides=function(){for(var c=0,y=Md.paint.overridableProperties;c<y.length;c+=1){var w=y[c];if(l.hasPaintOverride(this.layout,w)){var E,C=this.paint.get(w),N=new Od(C),q=new Ia(N,C.property.specification);E="constant"===C.value.kind||"source"===C.value.kind?new rt("source",q):new _t("composite",q,C.value.zoomStops,C.value._interpolationType),this.paint._values[w]=new _i(C.property,E,C.parameters)}}},l.prototype._handleOverridablePaintPropertyUpdate=function(c,y,w){return!(!this.layout||y.isDataDriven()||w.isDataDriven())&&l.hasPaintOverride(this.layout,c)},l.hasPaintOverride=function(c,y){var w=c.get("text-field"),E=Md.paint.properties[y],C=!1,N=function(ne){for(var re=0,ue=ne;re<ue.length;re+=1)if(E.overrides&&E.overrides.hasOverride(ue[re]))return void(C=!0)};if("constant"===w.value.kind&&w.value.value instanceof Hi)N(w.value.value.sections);else if("source"===w.value.kind){var q=function(ne){C||(ne instanceof So&&Mi(ne.value)===In?N(ne.value.sections):ne instanceof Nn?N(ne.sections):ne.eachChild(q))},Q=w.value;Q._styleExpression&&q(Q._styleExpression.expression)}return C},l}(lo),X0={paint:new aa({"background-color":new an(xe.paint_background["background-color"]),"background-pattern":new Hs(xe.paint_background["background-pattern"]),"background-opacity":new an(xe.paint_background["background-opacity"])})},ya=function(a){function l(c){a.call(this,c,X0)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l}(lo),Q0={paint:new aa({"raster-opacity":new an(xe.paint_raster["raster-opacity"]),"raster-hue-rotate":new an(xe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new an(xe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new an(xe.paint_raster["raster-brightness-max"]),"raster-saturation":new an(xe.paint_raster["raster-saturation"]),"raster-contrast":new an(xe.paint_raster["raster-contrast"]),"raster-resampling":new an(xe.paint_raster["raster-resampling"]),"raster-fade-duration":new an(xe.paint_raster["raster-fade-duration"])})},eb=function(a){function l(c){a.call(this,c,Q0)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l}(lo),Nm=function(a){function l(c){a.call(this,c,{}),this.implementation=c}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},l.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},l.prototype.recalculate=function(){},l.prototype.updateTransitions=function(){},l.prototype.hasTransition=function(){},l.prototype.serialize=function(){},l.prototype.onAdd=function(c){this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},l.prototype.onRemove=function(c){this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},l}(lo),Iy={circle:ic,heatmap:bf,hillshade:iy,fill:T0,"fill-extrusion":qx,line:dy,symbol:Lm,background:ya,raster:eb},Ty=F.HTMLImageElement,Py=F.HTMLCanvasElement,Dy=F.HTMLVideoElement,Ay=F.ImageData,Vh=F.ImageBitmap,Ld=function(a,l,c,y){this.context=a,this.format=c,this.texture=a.gl.createTexture(),this.update(l,y)};Ld.prototype.update=function(a,l,c){var y=a.width,w=a.height,E=!(this.size&&this.size[0]===y&&this.size[1]===w||c),C=this.context,N=C.gl;if(this.useMipmap=Boolean(l&&l.useMipmap),N.bindTexture(N.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===N.RGBA&&(!l||!1!==l.premultiply)),E)this.size=[y,w],a instanceof Ty||a instanceof Py||a instanceof Dy||a instanceof Ay||Vh&&a instanceof Vh?N.texImage2D(N.TEXTURE_2D,0,this.format,this.format,N.UNSIGNED_BYTE,a):N.texImage2D(N.TEXTURE_2D,0,this.format,y,w,0,this.format,N.UNSIGNED_BYTE,a.data);else{var q=c||{x:0,y:0},Q=q.x,ne=q.y;a instanceof Ty||a instanceof Py||a instanceof Dy||a instanceof Ay||Vh&&a instanceof Vh?N.texSubImage2D(N.TEXTURE_2D,0,Q,ne,N.RGBA,N.UNSIGNED_BYTE,a):N.texSubImage2D(N.TEXTURE_2D,0,Q,ne,y,w,N.RGBA,N.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&N.generateMipmap(N.TEXTURE_2D)},Ld.prototype.bind=function(a,l,c){var y=this.context.gl;y.bindTexture(y.TEXTURE_2D,this.texture),c!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(c=y.LINEAR),a!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,a),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,c||a),this.filter=a),l!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,l),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,l),this.wrap=l)},Ld.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Ld.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Ry=function(a){var l=this;this._callback=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){l._triggered=!1,l._callback()})};Ry.prototype.trigger=function(){var a=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){a._triggered=!1,a._callback()},0))},Ry.prototype.remove=function(){delete this._channel,this._callback=function(){}};var lu=function(a,l,c){this.target=a,this.parent=l,this.mapId=c,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Ee(["receive","process"],this),this.invoker=new Ry(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ee()?a:F};function Gh(a,l,c){var y=2*Math.PI*6378137/256/Math.pow(2,c);return[a*y-2*Math.PI*6378137/2,l*y-2*Math.PI*6378137/2]}lu.prototype.send=function(a,l,c,y,w){var E=this;void 0===w&&(w=!1);var C=Math.round(1e18*Math.random()).toString(36).substring(0,10);c&&(this.callbacks[C]=c);var N=We(this.globalScope)?void 0:[];return this.target.postMessage({id:C,type:a,hasCallback:!!c,targetMapId:y,mustQueue:w,sourceMapId:this.mapId,data:Wo(l,N)},N),{cancel:function(){c&&delete E.callbacks[C],E.target.postMessage({id:C,type:"<cancel>",targetMapId:y,sourceMapId:E.mapId})}}},lu.prototype.receive=function(a){var l=a.data,c=l.id;if(c&&(!l.targetMapId||this.mapId===l.targetMapId))if("<cancel>"===l.type){delete this.tasks[c];var y=this.cancelCallbacks[c];delete this.cancelCallbacks[c],y&&y()}else ee()||l.mustQueue?(this.tasks[c]=l,this.taskQueue.push(c),this.invoker.trigger()):this.processTask(c,l)},lu.prototype.process=function(){if(this.taskQueue.length){var a=this.taskQueue.shift(),l=this.tasks[a];delete this.tasks[a],this.taskQueue.length&&this.invoker.trigger(),l&&this.processTask(a,l)}},lu.prototype.processTask=function(a,l){var c=this;if("<response>"===l.type){var y=this.callbacks[a];delete this.callbacks[a],y&&(l.error?y(wc(l.error)):y(null,wc(l.data)))}else{var w=!1,E=We(this.globalScope)?void 0:[],C=l.hasCallback?function(ne,re){w=!0,delete c.cancelCallbacks[a],c.target.postMessage({id:a,type:"<response>",sourceMapId:c.mapId,error:ne?Wo(ne):null,data:Wo(re,E)},E)}:function(ne){w=!0},N=null,q=wc(l.data);if(this.parent[l.type])N=this.parent[l.type](l.sourceMapId,q,C);else if(this.parent.getWorkerSource){var Q=l.type.split(".");N=this.parent.getWorkerSource(l.sourceMapId,Q[0],q.source)[Q[1]](q,C)}else C(new Error("Could not find function "+l.type));!w&&N&&N.cancel&&(this.cancelCallbacks[a]=N.cancel)}},lu.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Fo=function(a,l){a&&(l?this.setSouthWest(a).setNorthEast(l):4===a.length?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1]))};Fo.prototype.setNorthEast=function(a){return this._ne=a instanceof ki?new ki(a.lng,a.lat):ki.convert(a),this},Fo.prototype.setSouthWest=function(a){return this._sw=a instanceof ki?new ki(a.lng,a.lat):ki.convert(a),this},Fo.prototype.extend=function(a){var l,c,y=this._sw,w=this._ne;if(a instanceof ki)l=a,c=a;else{if(!(a instanceof Fo))return Array.isArray(a)?4===a.length||a.every(Array.isArray)?this.extend(Fo.convert(a)):this.extend(ki.convert(a)):this;if(c=a._ne,!(l=a._sw)||!c)return this}return y||w?(y.lng=Math.min(l.lng,y.lng),y.lat=Math.min(l.lat,y.lat),w.lng=Math.max(c.lng,w.lng),w.lat=Math.max(c.lat,w.lat)):(this._sw=new ki(l.lng,l.lat),this._ne=new ki(c.lng,c.lat)),this},Fo.prototype.getCenter=function(){return new ki((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Fo.prototype.getSouthWest=function(){return this._sw},Fo.prototype.getNorthEast=function(){return this._ne},Fo.prototype.getNorthWest=function(){return new ki(this.getWest(),this.getNorth())},Fo.prototype.getSouthEast=function(){return new ki(this.getEast(),this.getSouth())},Fo.prototype.getWest=function(){return this._sw.lng},Fo.prototype.getSouth=function(){return this._sw.lat},Fo.prototype.getEast=function(){return this._ne.lng},Fo.prototype.getNorth=function(){return this._ne.lat},Fo.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Fo.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Fo.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Fo.prototype.contains=function(a){var l=ki.convert(a),c=l.lng,y=l.lat,w=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(w=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=y&&y<=this._ne.lat&&w},Fo.convert=function(a){return!a||a instanceof Fo?a:new Fo(a)};var ki=function(a,l){if(isNaN(a)||isNaN(l))throw new Error("Invalid LngLat object: ("+a+", "+l+")");if(this.lng=+a,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};ki.prototype.wrap=function(){return new ki(se(this.lng,-180,180),this.lat)},ki.prototype.toArray=function(){return[this.lng,this.lat]},ki.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},ki.prototype.distanceTo=function(a){var l=Math.PI/180,c=this.lat*l,y=a.lat*l,w=Math.sin(c)*Math.sin(y)+Math.cos(c)*Math.cos(y)*Math.cos((a.lng-this.lng)*l);return 6371008.8*Math.acos(Math.min(w,1))},ki.prototype.toBounds=function(a){void 0===a&&(a=0);var l=360*a/40075017,c=l/Math.cos(Math.PI/180*this.lat);return new Fo(new ki(this.lng-c,this.lat-l),new ki(this.lng+c,this.lat+l))},ki.convert=function(a){if(a instanceof ki)return a;if(Array.isArray(a)&&(2===a.length||3===a.length))return new ki(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&"object"==typeof a&&null!==a)return new ki(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Lc=2*Math.PI*6371008.8;function My(a){return Lc*Math.cos(a*Math.PI/180)}function Oy(a){return(180+a)/360}function Ly(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function km(a,l){return a/My(l)}function Fm(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}var Nc=function(a,l,c){void 0===c&&(c=0),this.x=+a,this.y=+l,this.z=+c};Nc.fromLngLat=function(a,l){void 0===l&&(l=0);var c=ki.convert(a);return new Nc(Oy(c.lng),Ly(c.lat),km(l,c.lat))},Nc.prototype.toLngLat=function(){return new ki(360*this.x-180,Fm(this.y))},Nc.prototype.toAltitude=function(){return this.z*My(Fm(this.y))},Nc.prototype.meterInMercatorCoordinateUnits=function(){return 1/Lc*(a=Fm(this.y),1/Math.cos(a*Math.PI/180));var a};var kc=function(a,l,c){this.z=a,this.x=l,this.y=c,this.key=Rf(0,a,a,l,c)};kc.prototype.equals=function(a){return this.z===a.z&&this.x===a.x&&this.y===a.y},kc.prototype.url=function(a,l){var c,y,w,E,C,N=(y=this.y,w=this.z,E=Gh(256*(c=this.x),256*(y=Math.pow(2,w)-y-1),w),C=Gh(256*(c+1),256*(y+1),w),E[0]+","+E[1]+","+C[0]+","+C[1]),q=function(Q,ne,re){for(var ue,he="",Ie=Q;Ie>0;Ie--)he+=(ne&(ue=1<<Ie-1)?1:0)+(re&ue?2:0);return he}(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===l?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",q).replace("{bbox-epsg-3857}",N)},kc.prototype.getTilePoint=function(a){var l=Math.pow(2,this.z);return new T(8192*(a.x*l-this.x),8192*(a.y*l-this.y))},kc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Ny=function(a,l){this.wrap=a,this.canonical=l,this.key=Rf(a,l.z,l.z,l.x,l.y)},vo=function(a,l,c,y,w){this.overscaledZ=a,this.wrap=l,this.canonical=new kc(c,+y,+w),this.key=Rf(l,a,c,y,w)};function Rf(a,l,c,y,w){(a*=2)<0&&(a=-1*a-1);var E=1<<c;return(E*E*a+E*w+y).toString(36)+c.toString(36)+l.toString(36)}vo.prototype.equals=function(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)},vo.prototype.scaledTo=function(a){var l=this.canonical.z-a;return a>this.canonical.z?new vo(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new vo(a,this.wrap,a,this.canonical.x>>l,this.canonical.y>>l)},vo.prototype.calculateScaledKey=function(a,l){var c=this.canonical.z-a;return a>this.canonical.z?Rf(this.wrap*+l,a,this.canonical.z,this.canonical.x,this.canonical.y):Rf(this.wrap*+l,a,a,this.canonical.x>>c,this.canonical.y>>c)},vo.prototype.isChildOf=function(a){if(a.wrap!==this.wrap)return!1;var l=this.canonical.z-a.canonical.z;return 0===a.overscaledZ||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>l&&a.canonical.y===this.canonical.y>>l},vo.prototype.children=function(a){if(this.overscaledZ>=a)return[new vo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var l=this.canonical.z+1,c=2*this.canonical.x,y=2*this.canonical.y;return[new vo(l,this.wrap,l,c,y),new vo(l,this.wrap,l,c+1,y),new vo(l,this.wrap,l,c,y+1),new vo(l,this.wrap,l,c+1,y+1)]},vo.prototype.isLessThan=function(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))},vo.prototype.wrapped=function(){return new vo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},vo.prototype.unwrapTo=function(a){return new vo(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)},vo.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},vo.prototype.toUnwrapped=function(){return new Ny(this.wrap,this.canonical)},vo.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},vo.prototype.getTilePoint=function(a){return this.canonical.getTilePoint(new Nc(a.x-this.wrap,a.y))},on("CanonicalTileID",kc),on("OverscaledTileID",vo,{omit:["posMatrix"]});var Mu=function(a,l,c){if(this.uid=a,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(c&&"mapbox"!==c&&"terrarium"!==c)return L('"'+c+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=l.height;var y=this.dim=l.height-2;this.data=new Uint32Array(l.data.buffer),this.encoding=c||"mapbox";for(var w=0;w<y;w++)this.data[this._idx(-1,w)]=this.data[this._idx(0,w)],this.data[this._idx(y,w)]=this.data[this._idx(y-1,w)],this.data[this._idx(w,-1)]=this.data[this._idx(w,0)],this.data[this._idx(w,y)]=this.data[this._idx(w,y-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(y,-1)]=this.data[this._idx(y-1,0)],this.data[this._idx(-1,y)]=this.data[this._idx(0,y-1)],this.data[this._idx(y,y)]=this.data[this._idx(y-1,y-1)]};Mu.prototype.get=function(a,l){var c=new Uint8Array(this.data.buffer),y=4*this._idx(a,l);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(c[y],c[y+1],c[y+2])},Mu.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Mu.prototype._idx=function(a,l){if(a<-1||a>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(a+1)},Mu.prototype._unpackMapbox=function(a,l,c){return(256*a*256+256*l+c)/10-1e4},Mu.prototype._unpackTerrarium=function(a,l,c){return 256*a+l+c/256-32768},Mu.prototype.getPixels=function(){return new ss({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Mu.prototype.backfillBorder=function(a,l,c){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");var y=l*this.dim,w=l*this.dim+this.dim,E=c*this.dim,C=c*this.dim+this.dim;switch(l){case-1:y=w-1;break;case 1:w=y+1}switch(c){case-1:E=C-1;break;case 1:C=E+1}for(var N=-l*this.dim,q=-c*this.dim,Q=E;Q<C;Q++)for(var ne=y;ne<w;ne++)this.data[this._idx(ne,Q)]=a.data[this._idx(ne+N,Q+q)]},on("DEMData",Mu);var Hh=function(a){this._stringToNumber={},this._numberToString=[];for(var l=0;l<a.length;l++){var c=a[l];this._stringToNumber[c]=l,this._numberToString[l]=c}};Hh.prototype.encode=function(a){return this._stringToNumber[a]},Hh.prototype.decode=function(a){return this._numberToString[a]};var Mf=function(a,l,c,y,w){this.type="Feature",this._vectorTileFeature=a,a._z=l,a._x=c,a._y=y,this.properties=a.properties,this.id=w},zm={geometry:{configurable:!0}};zm.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},zm.geometry.set=function(a){this._geometry=a},Mf.prototype.toJSON=function(){var a={geometry:this.geometry};for(var l in this)"_geometry"!==l&&"_vectorTileFeature"!==l&&(a[l]=this[l]);return a},Object.defineProperties(Mf.prototype,zm);var Nd=function(){this.state={},this.stateChanges={},this.deletedStates={}};Nd.prototype.updateState=function(a,l,c){var y=String(l);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][y]=this.stateChanges[a][y]||{},_e(this.stateChanges[a][y],c),null===this.deletedStates[a])for(var w in this.deletedStates[a]={},this.state[a])w!==y&&(this.deletedStates[a][w]=null);else if(this.deletedStates[a]&&null===this.deletedStates[a][y])for(var E in this.deletedStates[a][y]={},this.state[a][y])c[E]||(this.deletedStates[a][y][E]=null);else for(var C in c)this.deletedStates[a]&&this.deletedStates[a][y]&&null===this.deletedStates[a][y][C]&&delete this.deletedStates[a][y][C]},Nd.prototype.removeFeatureState=function(a,l,c){if(null!==this.deletedStates[a]){var y=String(l);if(this.deletedStates[a]=this.deletedStates[a]||{},c&&void 0!==l)null!==this.deletedStates[a][y]&&(this.deletedStates[a][y]=this.deletedStates[a][y]||{},this.deletedStates[a][y][c]=null);else if(void 0!==l)if(this.stateChanges[a]&&this.stateChanges[a][y])for(c in this.deletedStates[a][y]={},this.stateChanges[a][y])this.deletedStates[a][y][c]=null;else this.deletedStates[a][y]=null;else this.deletedStates[a]=null}},Nd.prototype.getState=function(a,l){var c=String(l),y=_e({},(this.state[a]||{})[c],(this.stateChanges[a]||{})[c]);if(null===this.deletedStates[a])return{};if(this.deletedStates[a]){var w=this.deletedStates[a][l];if(null===w)return{};for(var E in w)delete y[E]}return y},Nd.prototype.initializeTileState=function(a,l){a.setFeatureState(this.state,l)},Nd.prototype.coalesceChanges=function(a,l){var c={};for(var y in this.stateChanges){this.state[y]=this.state[y]||{};var w={};for(var E in this.stateChanges[y])this.state[y][E]||(this.state[y][E]={}),_e(this.state[y][E],this.stateChanges[y][E]),w[E]=this.state[y][E];c[y]=w}for(var C in this.deletedStates){this.state[C]=this.state[C]||{};var N={};if(null===this.deletedStates[C])for(var q in this.state[C])N[q]={},this.state[C][q]={};else for(var Q in this.deletedStates[C]){if(null===this.deletedStates[C][Q])this.state[C][Q]={};else for(var ne=0,re=Object.keys(this.deletedStates[C][Q]);ne<re.length;ne+=1)delete this.state[C][Q][re[ne]];N[Q]=this.state[C][Q]}c[C]=c[C]||{},_e(c[C],N)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(c).length)for(var ue in a)a[ue].setFeatureState(c,l)};var zo=function(a,l){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new oa(8192,16,0),this.grid3D=new oa(8192,16,0),this.featureIndexArray=new ge,this.promoteId=l};function $h(a,l,c,y,w){return nt(a,function(E,C){var N=l instanceof Su?l.get(C):null;return N&&N.evaluate?N.evaluate(c,y,w):N})}function Bm(a){for(var l=1/0,c=1/0,y=-1/0,w=-1/0,E=0,C=a;E<C.length;E+=1){var N=C[E];l=Math.min(l,N.x),c=Math.min(c,N.y),y=Math.max(y,N.x),w=Math.max(w,N.y)}return{minX:l,minY:c,maxX:y,maxY:w}}function jm(a,l){return l-a}zo.prototype.insert=function(a,l,c,y,w,E){var C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,y,w);for(var N=E?this.grid3D:this.grid,q=0;q<l.length;q++){for(var Q=l[q],ne=[1/0,1/0,-1/0,-1/0],re=0;re<Q.length;re++){var ue=Q[re];ne[0]=Math.min(ne[0],ue.x),ne[1]=Math.min(ne[1],ue.y),ne[2]=Math.max(ne[2],ue.x),ne[3]=Math.max(ne[3],ue.y)}ne[0]<8192&&ne[1]<8192&&ne[2]>=0&&ne[3]>=0&&N.insert(C,ne[0],ne[1],ne[2],ne[3])}},zo.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Sd.VectorTile(new Rh(this.rawTileData)).layers,this.sourceLayerCoder=new Hh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},zo.prototype.query=function(a,l,c,y){var w=this;this.loadVTLayers();for(var E=a.params||{},C=8192/a.tileSize/a.scale,N=Ta(E.filter),q=a.queryGeometry,Q=a.queryPadding*C,ne=Bm(q),re=this.grid.query(ne.minX-Q,ne.minY-Q,ne.maxX+Q,ne.maxY+Q),ue=Bm(a.cameraQueryGeometry),Ie=0,Pe=this.grid3D.query(ue.minX-Q,ue.minY-Q,ue.maxX+Q,ue.maxY+Q,function(dt,pt,Pt,Vt){return function(Kt,fn,Qt,Tn,en){for(var sr=0,Bn=Kt;sr<Bn.length;sr+=1){var bn=Bn[sr];if(fn<=bn.x&&Qt<=bn.y&&Tn>=bn.x&&en>=bn.y)return!0}var lr=[new T(fn,Qt),new T(fn,en),new T(Tn,en),new T(Tn,Qt)];if(Kt.length>2)for(var Xn=0,Nr=lr;Xn<Nr.length;Xn+=1)if(as(Kt,Nr[Xn]))return!0;for(var Mn=0;Mn<Kt.length-1;Mn++)if(tc(Kt[Mn],Kt[Mn+1],lr))return!0;return!1}(a.cameraQueryGeometry,dt-Q,pt-Q,Pt+Q,Vt+Q)});Ie<Pe.length;Ie+=1)re.push(Pe[Ie]);re.sort(jm);for(var qe,Be={},it=function(dt){var pt=re[dt];if(pt!==qe){qe=pt;var Pt=w.featureIndexArray.get(pt),Vt=null;w.loadMatchingFeature(Be,Pt.bucketIndex,Pt.sourceLayerIndex,Pt.featureIndex,N,E.layers,E.availableImages,l,c,y,function(Kt,fn,Qt){return Vt||(Vt=yo(Kt)),fn.queryIntersectsFeature(q,Kt,Qt,Vt,w.z,a.transform,C,a.pixelPosMatrix)})}},st=0;st<re.length;st++)it(st);return Be},zo.prototype.loadMatchingFeature=function(a,l,c,y,w,E,C,N,q,Q,ne){var re=this.bucketLayerIDs[l];if(!E||function(Kt,fn){for(var Qt=0;Qt<Kt.length;Qt++)if(fn.indexOf(Kt[Qt])>=0)return!0;return!1}(E,re)){var ue=this.sourceLayerCoder.decode(c),he=this.vtLayers[ue].feature(y);if(w.needGeometry){var Ie=ko(he,!0);if(!w.filter(new ti(this.tileID.overscaledZ),Ie,this.tileID.canonical))return}else if(!w.filter(new ti(this.tileID.overscaledZ),he))return;for(var Pe=this.getId(he,ue),qe=0;qe<re.length;qe++){var Be=re[qe];if(!(E&&E.indexOf(Be)<0)){var it=N[Be];if(it){var st={};void 0!==Pe&&Q&&(st=Q.getState(it.sourceLayer||"_geojsonTileLayer",Pe));var dt=_e({},q[Be]);dt.paint=$h(dt.paint,it.paint,he,st,C),dt.layout=$h(dt.layout,it.layout,he,st,C);var pt=!ne||ne(he,it,st);if(pt){var Pt=new Mf(he,this.z,this.x,this.y,Pe);Pt.layer=dt;var Vt=a[Be];void 0===Vt&&(Vt=a[Be]=[]),Vt.push({featureIndex:y,feature:Pt,intersectionZ:pt})}}}}}},zo.prototype.lookupSymbolFeatures=function(a,l,c,y,w,E,C,N){var q={};this.loadVTLayers();for(var Q=Ta(w),ne=0,re=a;ne<re.length;ne+=1)this.loadMatchingFeature(q,c,y,re[ne],Q,E,C,N,l);return q},zo.prototype.hasLayer=function(a){for(var l=0,c=this.bucketLayerIDs;l<c.length;l+=1)for(var y=0,w=c[l];y<w.length;y+=1)if(a===w[y])return!0;return!1},zo.prototype.getId=function(a,l){var c=a.id;return this.promoteId&&"boolean"==typeof(c=a.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[l]])&&(c=Number(c)),c},on("FeatureIndex",zo,{omit:["rawTileData","sourceLayerCoder"]});var ci=function(a,l){this.tileID=a,this.uid=Ne(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ci.prototype.registerFadeDuration=function(a){var l=a+this.timeAdded;l<Sn.now()||this.fadeEndTime&&l<this.fadeEndTime||(this.fadeEndTime=l)},ci.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},ci.prototype.loadVectorData=function(a,l,c){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){for(var y in a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(Q,ne){var re={};if(!ne)return re;for(var ue=function(){var Pe=Ie[he],qe=Pe.layerIds.map(function(st){return ne.getLayer(st)}).filter(Boolean);if(0!==qe.length){Pe.layers=qe,Pe.stateDependentLayerIds&&(Pe.stateDependentLayers=Pe.stateDependentLayerIds.map(function(st){return qe.filter(function(dt){return dt.id===st})[0]}));for(var Be=0,it=qe;Be<it.length;Be+=1)re[it[Be].id]=Pe}},he=0,Ie=Q;he<Ie.length;he+=1)ue();return re}(a.buckets,l.style),this.hasSymbolBuckets=!1,this.buckets){var w=this.buckets[y];if(w instanceof wi){if(this.hasSymbolBuckets=!0,!c)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var E in this.buckets){var C=this.buckets[E];if(C instanceof wi&&C.hasRTLText){this.hasRTLText=!0,Ki.isLoading()||Ki.isLoaded()||"deferred"!==el()||pd();break}}for(var N in this.queryPadding=0,this.buckets){var q=this.buckets[N];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(N).queryRadius(q))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new h},ci.prototype.unloadVectorData=function(){for(var a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ci.prototype.getBucket=function(a){return this.buckets[a.id]},ci.prototype.upload=function(a){for(var l in this.buckets){var c=this.buckets[l];c.uploadPending()&&c.upload(a)}var y=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ld(a,this.imageAtlas.image,y.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ld(a,this.glyphAtlasImage,y.ALPHA),this.glyphAtlasImage=null)},ci.prototype.prepare=function(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)},ci.prototype.queryRenderedFeatures=function(a,l,c,y,w,E,C,N,q,Q){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:w,scale:E,tileSize:this.tileSize,pixelPosMatrix:Q,transform:N,params:C,queryPadding:this.queryPadding*q},a,l,c):{}},ci.prototype.querySourceFeatures=function(a,l){var c=this.latestFeatureIndex;if(c&&c.rawTileData){var y=c.loadVTLayers(),w=l?l.sourceLayer:"",E=y._geojsonTileLayer||y[w];if(E)for(var C=Ta(l&&l.filter),N=this.tileID.canonical,q=N.z,Q=N.x,ne=N.y,re={z:q,x:Q,y:ne},ue=0;ue<E.length;ue++){var he=E.feature(ue);if(C.needGeometry){var Ie=ko(he,!0);if(!C.filter(new ti(this.tileID.overscaledZ),Ie,this.tileID.canonical))continue}else if(!C.filter(new ti(this.tileID.overscaledZ),he))continue;var Pe=c.getId(he,w),qe=new Mf(he,q,Q,ne,Pe);qe.tile=re,a.push(qe)}}},ci.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},ci.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ci.prototype.setExpiryData=function(a){var l=this.expirationTime;if(a.cacheControl){var c=W(a.cacheControl);c["max-age"]&&(this.expirationTime=Date.now()+1e3*c["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){var y=Date.now(),w=!1;if(this.expirationTime>y)w=!1;else if(l)if(this.expirationTime<l)w=!0;else{var E=this.expirationTime-l;E?this.expirationTime=y+Math.max(E,3e4):w=!0}else w=!0;w?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ci.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},ci.prototype.setFeatureState=function(a,l){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(a).length){var c=this.latestFeatureIndex.loadVTLayers();for(var y in this.buckets)if(l.style.hasLayer(y)){var w=this.buckets[y],E=w.layers[0].sourceLayer||"_geojsonTileLayer",C=c[E],N=a[E];if(C&&N&&0!==Object.keys(N).length){w.update(N,C,this.imageAtlas&&this.imageAtlas.patternPositions||{});var q=l&&l.style&&l.style.getLayer(y);q&&(this.queryPadding=Math.max(this.queryPadding,q.queryRadius(w)))}}}},ci.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},ci.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Sn.now()},ci.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ci.prototype.setHoldDuration=function(a){this.symbolFadeHoldUntil=Sn.now()+a},ci.prototype.setDependencies=function(a,l){for(var c={},y=0,w=l;y<w.length;y+=1)c[w[y]]=!0;this.dependencies[a]=c},ci.prototype.hasDependency=function(a,l){for(var c=0,y=a;c<y.length;c+=1){var w=this.dependencies[y[c]];if(w)for(var E=0,C=l;E<C.length;E+=1)if(w[C[E]])return!0}return!1};var Sl=F.performance,qh=function(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},Sl.mark(this._marks.start)};qh.prototype.finish=function(){Sl.mark(this._marks.end);var a=Sl.getEntriesByName(this._marks.measure);return 0===a.length&&(Sl.measure(this._marks.measure,this._marks.start,this._marks.end),a=Sl.getEntriesByName(this._marks.measure),Sl.clearMarks(this._marks.start),Sl.clearMarks(this._marks.end),Sl.clearMeasures(this._marks.measure)),a},m.Actor=lu,m.AlphaImage=oc,m.CanonicalTileID=kc,m.CollisionBoxArray=h,m.Color=Jn,m.DEMData=Mu,m.DataConstantProperty=an,m.DictionaryCoder=Hh,m.EXTENT=8192,m.ErrorEvent=Xe,m.EvaluationParameters=ti,m.Event=$e,m.Evented=He,m.FeatureIndex=zo,m.FillBucket=Rs,m.FillExtrusionBucket=Vl,m.ImageAtlas=uc,m.ImagePosition=Pf,m.LineBucket=la,m.LngLat=ki,m.LngLatBounds=Fo,m.MercatorCoordinate=Nc,m.ONE_EM=24,m.OverscaledTileID=vo,m.Point=T,m.Point$1=T,m.Properties=aa,m.Protobuf=Rh,m.RGBAImage=ss,m.RequestManager=Gn,m.RequestPerformance=qh,m.ResourceType=Ol,m.SegmentVector=ye,m.SourceFeatureState=Nd,m.StructArrayLayout1ui2=vf,m.StructArrayLayout2f1f2i16=ni,m.StructArrayLayout2i4=Cu,m.StructArrayLayout3ui6=Ds,m.StructArrayLayout4i8=Kn,m.SymbolBucket=wi,m.Texture=Ld,m.Tile=ci,m.Transitionable=vs,m.Uniform1f=Bt,m.Uniform1i=Gt,m.Uniform2f=$t,m.Uniform3f=wn,m.Uniform4f=rn,m.UniformColor=Rn,m.UniformMatrix4f=un,m.UnwrappedTileID=Ny,m.ValidationError=Fe,m.WritingMode=ws,m.ZoomHistory=No,m.add=function(a,l,c){return a[0]=l[0]+c[0],a[1]=l[1]+c[1],a[2]=l[2]+c[2],a},m.addDynamicAttributes=Uh,m.asyncAll=function(a,l,c){if(!a.length)return c(null,[]);var y=a.length,w=new Array(a.length),E=null;a.forEach(function(C,N){l(C,function(q,Q){q&&(E=q),w[N]=Q,0==--y&&c(E,w)})})},m.bezier=Y,m.bindAll=Ee,m.browser=Sn,m.cacheEntryPossiblyAdded=function(a){++xo>oo&&(a.getActor().send("enforceCacheSizeLimit",xa),xo=0)},m.clamp=me,m.clearTileCache=function(a){var l=F.caches.delete("mapbox-tiles");a&&l.catch(a).then(function(){return a()})},m.clipLine=by,m.clone=function(a){var l=new to(16);return l[0]=a[0],l[1]=a[1],l[2]=a[2],l[3]=a[3],l[4]=a[4],l[5]=a[5],l[6]=a[6],l[7]=a[7],l[8]=a[8],l[9]=a[9],l[10]=a[10],l[11]=a[11],l[12]=a[12],l[13]=a[13],l[14]=a[14],l[15]=a[15],l},m.clone$1=Ue,m.clone$2=function(a){var l=new to(3);return l[0]=a[0],l[1]=a[1],l[2]=a[2],l},m.collisionCircleLayout=k0,m.config=It,m.create=function(){var a=new to(16);return to!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},m.create$1=function(){var a=new to(9);return to!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a},m.create$2=function(){var a=new to(4);return to!=Float32Array&&(a[1]=0,a[2]=0),a[0]=1,a[3]=1,a},m.createCommonjsModule=$,m.createExpression=kl,m.createLayout=Yi,m.createStyleLayer=function(a){return"custom"===a.type?new Nm(a):new Iy[a.type](a)},m.cross=function(a,l,c){var y=l[0],w=l[1],E=l[2],C=c[0],N=c[1],q=c[2];return a[0]=w*q-E*N,a[1]=E*C-y*q,a[2]=y*N-w*C,a},m.deepEqual=function a(l,c){if(Array.isArray(l)){if(!Array.isArray(c)||l.length!==c.length)return!1;for(var y=0;y<l.length;y++)if(!a(l[y],c[y]))return!1;return!0}if("object"==typeof l&&null!==l&&null!==c){if("object"!=typeof c||Object.keys(l).length!==Object.keys(c).length)return!1;for(var w in l)if(!a(l[w],c[w]))return!1;return!0}return l===c},m.dot=function(a,l){return a[0]*l[0]+a[1]*l[1]+a[2]*l[2]},m.dot$1=function(a,l){return a[0]*l[0]+a[1]*l[1]+a[2]*l[2]+a[3]*l[3]},m.ease=ie,m.emitValidationErrors=zl,m.endsWith=Je,m.enforceCacheSizeLimit=function(a){wo(),qr&&qr.then(function(l){l.keys().then(function(c){for(var y=0;y<c.length-a;y++)l.delete(c[y])})})},m.evaluateSizeForFeature=Ru,m.evaluateSizeForZoom=Ad,m.evaluateVariableOffset=J0,m.evented=pf,m.extend=_e,m.featureFilter=Ta,m.filterObject=Ct,m.fromRotation=function(a,l){var c=Math.sin(l),y=Math.cos(l);return a[0]=y,a[1]=c,a[2]=0,a[3]=-c,a[4]=y,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},m.getAnchorAlignment=Pm,m.getAnchorJustification=Sy,m.getArrayBuffer=zr,m.getImage=fe,m.getJSON=function(a,l){return Xs(_e(a,{type:"json"}),l)},m.getRTLTextPluginStatus=el,m.getReferrer=Bs,m.getVideo=function(a,l){var c,y,w=F.document.createElement("video");w.muted=!0,w.onloadstart=function(){l(null,w)};for(var E=0;E<a.length;E++){var C=F.document.createElement("source");c=a[E],y=void 0,(y=F.document.createElement("a")).href=c,(y.protocol!==F.document.location.protocol||y.host!==F.document.location.host)&&(w.crossOrigin="Anonymous"),C.src=a[E],w.appendChild(C)}return{cancel:function(){}}},m.identity=$a,m.invert=function(a,l){var c=l[0],y=l[1],w=l[2],E=l[3],C=l[4],N=l[5],q=l[6],Q=l[7],ne=l[8],re=l[9],ue=l[10],he=l[11],Ie=l[12],Pe=l[13],qe=l[14],Be=l[15],it=c*N-y*C,st=c*q-w*C,dt=c*Q-E*C,pt=y*q-w*N,Pt=y*Q-E*N,Vt=w*Q-E*q,Kt=ne*Pe-re*Ie,fn=ne*qe-ue*Ie,Qt=ne*Be-he*Ie,Tn=re*qe-ue*Pe,en=re*Be-he*Pe,sr=ue*Be-he*qe,Bn=it*sr-st*en+dt*Tn+pt*Qt-Pt*fn+Vt*Kt;return Bn?(a[0]=(N*sr-q*en+Q*Tn)*(Bn=1/Bn),a[1]=(w*en-y*sr-E*Tn)*Bn,a[2]=(Pe*Vt-qe*Pt+Be*pt)*Bn,a[3]=(ue*Pt-re*Vt-he*pt)*Bn,a[4]=(q*Qt-C*sr-Q*fn)*Bn,a[5]=(c*sr-w*Qt+E*fn)*Bn,a[6]=(qe*dt-Ie*Vt-Be*st)*Bn,a[7]=(ne*Vt-ue*dt+he*st)*Bn,a[8]=(C*en-N*Qt+Q*Kt)*Bn,a[9]=(y*Qt-c*en-E*Kt)*Bn,a[10]=(Ie*Pt-Pe*dt+Be*it)*Bn,a[11]=(re*dt-ne*Pt-he*it)*Bn,a[12]=(N*fn-C*Tn-q*Kt)*Bn,a[13]=(c*Tn-y*fn+w*Kt)*Bn,a[14]=(Pe*st-Ie*pt-qe*it)*Bn,a[15]=(ne*pt-re*st+ue*it)*Bn,a):null},m.isChar=ln,m.isMapboxURL=ir,m.keysDifference=function(a,l){var c=[];for(var y in a)y in l||c.push(y);return c},m.makeRequest=Xs,m.mapObject=nt,m.mercatorXfromLng=Oy,m.mercatorYfromLat=Ly,m.mercatorZfromAltitude=km,m.mul=Cc,m.multiply=bs,m.mvt=Sd,m.nextPowerOfTwo=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},m.normalize=function(a,l){var c=l[0],y=l[1],w=l[2],E=c*c+y*y+w*w;return E>0&&(E=1/Math.sqrt(E)),a[0]=l[0]*E,a[1]=l[1]*E,a[2]=l[2]*E,a},m.number=$i,m.offscreenCanvasSupported=ur,m.ortho=function(a,l,c,y,w,E,C){var N=1/(l-c),q=1/(y-w),Q=1/(E-C);return a[0]=-2*N,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*q,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*Q,a[11]=0,a[12]=(l+c)*N,a[13]=(w+y)*q,a[14]=(C+E)*Q,a[15]=1,a},m.parseGlyphPBF=function(a){return new Rh(a).readFields(my,[])},m.pbf=Rh,m.performSymbolLayout=function(a,l,c,y,w,E,C){a.createArrays(),a.tilePixelRatio=8192/(512*a.overscaling),a.compareText={},a.iconsNeedLinear=!1;var N=a.layers[0].layout,q=a.layers[0]._unevaluatedLayout._values,Q={};if("composite"===a.textSizeData.kind){var ne=a.textSizeData,re=ne.maxZoom;Q.compositeTextSizes=[q["text-size"].possiblyEvaluate(new ti(ne.minZoom),C),q["text-size"].possiblyEvaluate(new ti(re),C)]}if("composite"===a.iconSizeData.kind){var ue=a.iconSizeData,he=ue.maxZoom;Q.compositeIconSizes=[q["icon-size"].possiblyEvaluate(new ti(ue.minZoom),C),q["icon-size"].possiblyEvaluate(new ti(he),C)]}Q.layoutTextSize=q["text-size"].possiblyEvaluate(new ti(a.zoom+1),C),Q.layoutIconSize=q["icon-size"].possiblyEvaluate(new ti(a.zoom+1),C),Q.textMaxSize=q["text-size"].possiblyEvaluate(new ti(18));for(var Ie=24*N.get("text-line-height"),Pe="map"===N.get("text-rotation-alignment")&&"point"!==N.get("symbol-placement"),qe=N.get("text-keep-upright"),Be=N.get("text-size"),it=function(){var pt=dt[st],Pt=N.get("text-font").evaluate(pt,{},C).join(","),Vt=Be.evaluate(pt,{},C),Kt=Q.layoutTextSize.evaluate(pt,{},C),fn=Q.layoutIconSize.evaluate(pt,{},C),Qt={horizontal:{},vertical:void 0},Tn=pt.text,en=[0,0];if(Tn){var sr=Tn.toString(),Bn=24*N.get("text-letter-spacing").evaluate(pt,{},C),bn=function(Rr){for(var xi=0,Vr=Rr;xi<Vr.length;xi+=1)if(Fr=Vr[xi].charCodeAt(0),ln.Arabic(Fr)||ln["Arabic Supplement"](Fr)||ln["Arabic Extended-A"](Fr)||ln["Arabic Presentation Forms-A"](Fr)||ln["Arabic Presentation Forms-B"](Fr))return!1;var Fr;return!0}(sr)?Bn:0,lr=N.get("text-anchor").evaluate(pt,{},C),Xn=N.get("text-variable-anchor");if(!Xn){var Nr=N.get("text-radial-offset").evaluate(pt,{},C);en=Nr?J0(lr,[24*Nr,Bh]):N.get("text-offset").evaluate(pt,{},C).map(function(Rr){return 24*Rr})}var Mn=Pe?"center":N.get("text-justify").evaluate(pt,{},C),Ur=N.get("symbol-placement"),Wi="point"===Ur?24*N.get("text-max-width").evaluate(pt,{},C):0,fo=function(){a.allowVerticalPlacement&&ud(sr)&&(Qt.vertical=Lh(Tn,l,c,w,Pt,Wi,Ie,lr,"left",bn,en,ws.vertical,!0,Ur,Kt,Vt))};if(!Pe&&Xn){for(var no="auto"===Mn?Xn.map(function(Rr){return Sy(Rr)}):[Mn],Zi=!1,ho=0;ho<no.length;ho++){var Ko=no[ho];if(!Qt.horizontal[Ko])if(Zi)Qt.horizontal[Ko]=Qt.horizontal[0];else{var Bo=Lh(Tn,l,c,w,Pt,Wi,Ie,"center",Ko,bn,en,ws.horizontal,!1,Ur,Kt,Vt);Bo&&(Qt.horizontal[Ko]=Bo,Zi=1===Bo.positionedLines.length)}}fo()}else{"auto"===Mn&&(Mn=Sy(lr));var va=Lh(Tn,l,c,w,Pt,Wi,Ie,lr,Mn,bn,en,ws.horizontal,!1,Ur,Kt,Vt);va&&(Qt.horizontal[Mn]=va),fo(),ud(sr)&&Pe&&qe&&(Qt.vertical=Lh(Tn,l,c,w,Pt,Wi,Ie,lr,Mn,bn,en,ws.vertical,!1,Ur,Kt,Vt))}}var Rr,xi,Fr,Za,Aa,Yo=void 0,_a=!1;if(pt.icon&&pt.icon.name){var _o=y[pt.icon.name];_o&&(Rr=w[pt.icon.name],xi=N.get("icon-offset").evaluate(pt,{},C),Fr=Pm(N.get("icon-anchor").evaluate(pt,{},C)),Yo={image:Rr,top:Aa=xi[1]-Rr.displaySize[1]*Fr.verticalAlign,bottom:Aa+Rr.displaySize[1],left:Za=xi[0]-Rr.displaySize[0]*Fr.horizontalAlign,right:Za+Rr.displaySize[0]},_a=_o.sdf,void 0===a.sdfIcons?a.sdfIcons=_o.sdf:a.sdfIcons!==_o.sdf&&L("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(_o.pixelRatio!==a.pixelRatio||0!==N.get("icon-rotate").constantOr(1))&&(a.iconsNeedLinear=!0))}var ua=jh(Qt.horizontal)||Qt.vertical;a.iconsInText=!!ua&&ua.iconsInText,(ua||Yo)&&function(Rr,xi,Vr,Fr,Za,Aa,Fi,ro,Ra,$r,Hl){var Ms=Aa.textMaxSize.evaluate(xi,{});void 0===Ms&&(Ms=Fi);var Cl,po=Rr.layers[0].layout,sl=po.get("icon-offset").evaluate(xi,{},Hl),Os=jh(Vr.horizontal),Fc=Fi/24,Ou=Rr.tilePixelRatio*Fc,zc=Rr.tilePixelRatio*Ms/24,$l=Rr.tilePixelRatio*ro,uu=Rr.tilePixelRatio*po.get("symbol-spacing"),Wh=po.get("text-padding")*Rr.tilePixelRatio,Bc=po.get("icon-padding")*Rr.tilePixelRatio,Of=po.get("text-max-angle")/180*Math.PI,Zh="map"===po.get("text-rotation-alignment")&&"point"!==po.get("symbol-placement"),Lf="map"===po.get("icon-rotation-alignment")&&"point"!==po.get("symbol-placement"),ql=po.get("symbol-placement"),kd=uu/2,Nf=po.get("icon-text-fit");Fr&&"none"!==Nf&&(Rr.allowVerticalPlacement&&Vr.vertical&&(Cl=vy(Fr,Vr.vertical,Nf,po.get("icon-text-fit-padding"),sl,Fc)),Os&&(Fr=vy(Fr,Os,Nf,po.get("icon-text-fit-padding"),sl,Fc)));var Lu=function(tb,Vd){Vd.x<0||Vd.x>=8192||Vd.y<0||Vd.y>=8192||function(bo,Wl,Yx,cu,ep,Fy,Vf,Zl,Gd,tp,np,Hd,rp,Gm,Jl,zy,ip,Hm,op,Gf,Zs,$d,ap,xs,By){var sp,Uc,qd,Vc,Kl,Wd=bo.addToLineVertexArray(Wl,Yx),jy=0,Uy=0,Vy=0,lp=0,up=-1,cp=-1,Xo={},Gy=ze(""),Hf=0,$f=0;if(void 0===Zl._unevaluatedLayout.getValue("text-radial-offset")?(Hf=(sp=Zl.layout.get("text-offset").evaluate(Zs,{},xs).map(function(Zd){return 24*Zd}))[0],$f=sp[1]):(Hf=24*Zl.layout.get("text-radial-offset").evaluate(Zs,{},xs),$f=Bh),bo.allowVerticalPlacement&&cu.vertical){var Hy=Zl.layout.get("text-rotate").evaluate(Zs,{},xs)+90;Vc=new Rc(Gd,Wl,tp,np,Hd,cu.vertical,rp,Gm,Jl,Hy),Vf&&(Kl=new Rc(Gd,Wl,tp,np,Hd,Vf,ip,Hm,Jl,Hy))}if(ep){var $y=Zl.layout.get("icon-rotate").evaluate(Zs,{}),nb="none"!==Zl.layout.get("icon-text-fit"),rb=wy(ep,$y,ap,nb),$m=Vf?wy(Vf,$y,ap,nb):void 0;qd=new Rc(Gd,Wl,tp,np,Hd,ep,ip,Hm,!1,$y),jy=4*rb.length;var qm=bo.iconSizeData,dp=null;"source"===qm.kind?(dp=[128*Zl.layout.get("icon-size").evaluate(Zs,{})])[0]>32640&&L(bo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===qm.kind&&((dp=[128*$d.compositeIconSizes[0].evaluate(Zs,{},xs),128*$d.compositeIconSizes[1].evaluate(Zs,{},xs)])[0]>32640||dp[1]>32640)&&L(bo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),bo.addSymbols(bo.icon,rb,dp,Gf,op,Zs,!1,Wl,Wd.lineStartIndex,Wd.lineLength,-1,xs),up=bo.icon.placedSymbolArray.length-1,$m&&(Uy=4*$m.length,bo.addSymbols(bo.icon,$m,dp,Gf,op,Zs,ws.vertical,Wl,Wd.lineStartIndex,Wd.lineLength,-1,xs),cp=bo.icon.placedSymbolArray.length-1)}for(var qy in cu.horizontal){var Nu=cu.horizontal[qy];if(!Uc){Gy=ze(Nu.text);var ib=Zl.layout.get("text-rotate").evaluate(Zs,{},xs);Uc=new Rc(Gd,Wl,tp,np,Hd,Nu,rp,Gm,Jl,ib)}var Wm=1===Nu.positionedLines.length;if(Vy+=K0(bo,Wl,Nu,Fy,Zl,Jl,Zs,zy,Wd,cu.vertical?ws.horizontal:ws.horizontalOnly,Wm?Object.keys(cu.horizontal):[qy],Xo,up,$d,xs),Wm)break}cu.vertical&&(lp+=K0(bo,Wl,cu.vertical,Fy,Zl,Jl,Zs,zy,Wd,ws.vertical,["vertical"],Xo,cp,$d,xs));var fp=Uc?Uc.boxStartIndex:bo.collisionBoxArray.length,ob=Uc?Uc.boxEndIndex:bo.collisionBoxArray.length,Wy=Vc?Vc.boxStartIndex:bo.collisionBoxArray.length,ab=Vc?Vc.boxEndIndex:bo.collisionBoxArray.length,sb=qd?qd.boxStartIndex:bo.collisionBoxArray.length,lb=qd?qd.boxEndIndex:bo.collisionBoxArray.length,ub=Kl?Kl.boxStartIndex:bo.collisionBoxArray.length,cb=Kl?Kl.boxEndIndex:bo.collisionBoxArray.length,Yl=-1,hp=function(Zd,pp){return Zd&&Zd.circleDiameter?Math.max(Zd.circleDiameter,pp):pp};Yl=hp(Uc,Yl),Yl=hp(Vc,Yl),Yl=hp(qd,Yl);var Zm=(Yl=hp(Kl,Yl))>-1?1:0;Zm&&(Yl*=By/24),bo.glyphOffsetArray.length>=wi.MAX_GLYPHS&&L("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Zs.sortKey&&bo.addToSortKeyRanges(bo.symbolInstances.length,Zs.sortKey),bo.symbolInstances.emplaceBack(Wl.x,Wl.y,Xo.right>=0?Xo.right:-1,Xo.center>=0?Xo.center:-1,Xo.left>=0?Xo.left:-1,Xo.vertical||-1,up,cp,Gy,fp,ob,Wy,ab,sb,lb,ub,cb,tp,Vy,lp,jy,Uy,Zm,0,rp,Hf,$f,Yl)}(Rr,Vd,tb,Vr,Fr,Za,Cl,Rr.layers[0],Rr.collisionBoxArray,xi.index,xi.sourceLayerIndex,Rr.index,Ou,Wh,Zh,Ra,$l,Bc,Lf,sl,xi,Aa,$r,Hl,Fi)};if("line"===ql)for(var Fd=0,kf=by(xi.geometry,0,0,8192,8192);Fd<kf.length;Fd+=1)for(var Jh=kf[Fd],Ff=0,Ls=_y(Jh,uu,Of,Vr.vertical||Os,Fr,24,zc,Rr.overscaling,8192);Ff<Ls.length;Ff+=1){var Kh=Ls[Ff];Os&&Rm(Rr,Os.text,kd,Kh)||Lu(Jh,Kh)}else if("line-center"===ql)for(var zd=0,zf=xi.geometry;zd<zf.length;zd+=1){var Bf=zf[zd];if(Bf.length>1){var Yh=Jx(Bf,Of,Vr.vertical||Os,Fr,24,zc);Yh&&Lu(Bf,Yh)}}else if("Polygon"===xi.type)for(var Bd=0,jf=As(xi.geometry,0);Bd<jf.length;Bd+=1){var jd=jf[Bd],Uf=Df(jd,16);Lu(jd[0],new Dd(Uf.x,Uf.y,0))}else if("LineString"===xi.type)for(var jc=0,Ir=xi.geometry;jc<Ir.length;jc+=1){var Ud=Ir[jc];Lu(Ud,new Dd(Ud[0].x,Ud[0].y,0))}else if("Point"===xi.type)for(var Xh=0,Um=xi.geometry;Xh<Um.length;Xh+=1)for(var Vm=0,ky=Um[Xh];Vm<ky.length;Vm+=1){var Qh=ky[Vm];Lu([Qh],new Dd(Qh.x,Qh.y,0))}}(a,pt,Qt,Yo,y,Q,Kt,fn,en,_a,C)},st=0,dt=a.features;st<dt.length;st+=1)it();E&&a.generateCollisionDebugBuffers()},m.perspective=function(a,l,c,y,w){var E,C=1/Math.tan(l/2);return a[0]=C/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=C,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,null!=w&&w!==1/0?(a[10]=(w+y)*(E=1/(y-w)),a[14]=2*w*y*E):(a[10]=-1,a[14]=-2*y),a},m.pick=function(a,l){for(var c={},y=0;y<l.length;y++){var w=l[y];w in a&&(c[w]=a[w])}return c},m.plugin=Ki,m.polygonIntersectsPolygon=Ha,m.postMapLoadEvent=io,m.postTurnstileEvent=Ba,m.potpack=V0,m.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],m.register=on,m.registerForPluginStateChange=function(a){return a({pluginStatus:Ji,pluginURL:bl}),pf.on("pluginStateChange",a),a},m.renderColorRamp=_f,m.rotate=function(a,l,c){var y=l[0],w=l[1],E=l[2],C=l[3],N=Math.sin(c),q=Math.cos(c);return a[0]=y*q+E*N,a[1]=w*q+C*N,a[2]=y*-N+E*q,a[3]=w*-N+C*q,a},m.rotateX=function(a,l,c){var y=Math.sin(c),w=Math.cos(c),E=l[4],C=l[5],N=l[6],q=l[7],Q=l[8],ne=l[9],re=l[10],ue=l[11];return l!==a&&(a[0]=l[0],a[1]=l[1],a[2]=l[2],a[3]=l[3],a[12]=l[12],a[13]=l[13],a[14]=l[14],a[15]=l[15]),a[4]=E*w+Q*y,a[5]=C*w+ne*y,a[6]=N*w+re*y,a[7]=q*w+ue*y,a[8]=Q*w-E*y,a[9]=ne*w-C*y,a[10]=re*w-N*y,a[11]=ue*w-q*y,a},m.rotateZ=function(a,l,c){var y=Math.sin(c),w=Math.cos(c),E=l[0],C=l[1],N=l[2],q=l[3],Q=l[4],ne=l[5],re=l[6],ue=l[7];return l!==a&&(a[8]=l[8],a[9]=l[9],a[10]=l[10],a[11]=l[11],a[12]=l[12],a[13]=l[13],a[14]=l[14],a[15]=l[15]),a[0]=E*w+Q*y,a[1]=C*w+ne*y,a[2]=N*w+re*y,a[3]=q*w+ue*y,a[4]=Q*w-E*y,a[5]=ne*w-C*y,a[6]=re*w-N*y,a[7]=ue*w-q*y,a},m.scale=function(a,l,c){var y=c[0],w=c[1],E=c[2];return a[0]=l[0]*y,a[1]=l[1]*y,a[2]=l[2]*y,a[3]=l[3]*y,a[4]=l[4]*w,a[5]=l[5]*w,a[6]=l[6]*w,a[7]=l[7]*w,a[8]=l[8]*E,a[9]=l[9]*E,a[10]=l[10]*E,a[11]=l[11]*E,a[12]=l[12],a[13]=l[13],a[14]=l[14],a[15]=l[15],a},m.scale$1=function(a,l,c){return a[0]=l[0]*c,a[1]=l[1]*c,a[2]=l[2]*c,a[3]=l[3]*c,a},m.scale$2=function(a,l,c){return a[0]=l[0]*c,a[1]=l[1]*c,a[2]=l[2]*c,a},m.setCacheLimits=function(a,l){xa=a,oo=l},m.setRTLTextPlugin=function(a,l,c){if(void 0===c&&(c=!1),"deferred"===Ji||"loading"===Ji||"loaded"===Ji)throw new Error("setRTLTextPlugin cannot be called multiple times.");bl=Sn.resolveURL(a),Ji="deferred",hf=l,xc(),c||pd()},m.sphericalToCartesian=function(a){var l=a[0],c=a[1],y=a[2];return c+=90,c*=Math.PI/180,y*=Math.PI/180,{x:l*Math.cos(c)*Math.sin(y),y:l*Math.sin(c)*Math.sin(y),z:l*Math.cos(y)}},m.sqrLen=function(a){var l=a[0],c=a[1];return l*l+c*c},m.styleSpec=xe,m.sub=function(a,l,c){return a[0]=l[0]-c[0],a[1]=l[1]-c[1],a[2]=l[2]-c[2],a},m.symbolSize=H0,m.transformMat3=function(a,l,c){var y=l[0],w=l[1],E=l[2];return a[0]=y*c[0]+w*c[3]+E*c[6],a[1]=y*c[1]+w*c[4]+E*c[7],a[2]=y*c[2]+w*c[5]+E*c[8],a},m.transformMat4=rc,m.translate=function(a,l,c){var y,w,E,C,N,q,Q,ne,re,ue,he,Ie,Pe=c[0],qe=c[1],Be=c[2];return l===a?(a[12]=l[0]*Pe+l[4]*qe+l[8]*Be+l[12],a[13]=l[1]*Pe+l[5]*qe+l[9]*Be+l[13],a[14]=l[2]*Pe+l[6]*qe+l[10]*Be+l[14],a[15]=l[3]*Pe+l[7]*qe+l[11]*Be+l[15]):(w=l[1],E=l[2],C=l[3],N=l[4],q=l[5],Q=l[6],ne=l[7],re=l[8],ue=l[9],he=l[10],Ie=l[11],a[0]=y=l[0],a[1]=w,a[2]=E,a[3]=C,a[4]=N,a[5]=q,a[6]=Q,a[7]=ne,a[8]=re,a[9]=ue,a[10]=he,a[11]=Ie,a[12]=y*Pe+N*qe+re*Be+l[12],a[13]=w*Pe+q*qe+ue*Be+l[13],a[14]=E*Pe+Q*qe+he*Be+l[14],a[15]=C*Pe+ne*qe+Ie*Be+l[15]),a},m.triggerPluginCompletionEvent=hd,m.uniqueId=Ne,m.validateCustomStyleLayer=function(a){var l=[],c=a.id;return void 0===c&&l.push({message:"layers."+c+': missing required property "id"'}),void 0===a.render&&l.push({message:"layers."+c+': missing required method "render"'}),a.renderingMode&&"2d"!==a.renderingMode&&"3d"!==a.renderingMode&&l.push({message:"layers."+c+': property "renderingMode" must be either "2d" or "3d"'}),l},m.validateLight=_c,m.validateStyle=wu,m.values=function(a){var l=[];for(var c in a)l.push(a[c]);return l},m.vectorTile=Sd,m.version="1.15.3",m.warnOnce=L,m.webpSupported=Cn,m.window=F,m.wrap=se}),X(0,function(m){function $(oe){var le=typeof oe;if("number"===le||"boolean"===le||"string"===le||null==oe)return JSON.stringify(oe);if(Array.isArray(oe)){for(var fe="[",ve=0,Te=oe;ve<Te.length;ve+=1)fe+=$(Te[ve])+",";return fe+"]"}for(var $e=Object.keys(oe).sort(),Xe="{",He=0;He<$e.length;He++)Xe+=JSON.stringify($e[He])+":"+$(oe[$e[He]])+",";return Xe+"}"}function G(oe){for(var le="",fe=0,ve=m.refProperties;fe<ve.length;fe+=1)le+="/"+$(oe[ve[fe]]);return le}var z=function(oe){this.keyCache={},oe&&this.replace(oe)};z.prototype.replace=function(oe){this._layerConfigs={},this._layers={},this.update(oe,[])},z.prototype.update=function(oe,le){for(var fe=this,ve=0,Te=oe;ve<Te.length;ve+=1){var $e=Te[ve];this._layerConfigs[$e.id]=$e;var Xe=this._layers[$e.id]=m.createStyleLayer($e);Xe._featureFilter=m.featureFilter(Xe.filter),this.keyCache[$e.id]&&delete this.keyCache[$e.id]}for(var He=0,xe=le;He<xe.length;He+=1){var Fe=xe[He];delete this.keyCache[Fe],delete this._layerConfigs[Fe],delete this._layers[Fe]}this.familiesBySource={};for(var Rt=0,Ft=function(Ut,Dt){for(var Hn={},Vn=0;Vn<Ut.length;Vn++){var sn=Dt&&Dt[Ut[Vn].id]||G(Ut[Vn]);Dt&&(Dt[Ut[Vn].id]=sn);var ri=Hn[sn];ri||(ri=Hn[sn]=[]),ri.push(Ut[Vn])}var In=[];for(var ui in Hn)In.push(Hn[ui]);return In}(m.values(this._layerConfigs),this.keyCache);Rt<Ft.length;Rt+=1){var ct=Ft[Rt].map(function(Ut){return fe._layers[Ut.id]}),Et=ct[0];if("none"!==Et.visibility){var Zt=Et.source||"",Jt=this.familiesBySource[Zt];Jt||(Jt=this.familiesBySource[Zt]={});var hn=Et.sourceLayer||"_geojsonTileLayer",St=Jt[hn];St||(St=Jt[hn]=[]),St.push(ct)}}};var T=function(oe){var le={},fe=[];for(var ve in oe){var Te=oe[ve],$e=le[ve]={};for(var Xe in Te){var He=Te[+Xe];if(He&&0!==He.bitmap.width&&0!==He.bitmap.height){var xe={x:0,y:0,w:He.bitmap.width+2,h:He.bitmap.height+2};fe.push(xe),$e[Xe]={rect:xe,metrics:He.metrics}}}}var Fe=m.potpack(fe),Rt=new m.AlphaImage({width:Fe.w||1,height:Fe.h||1});for(var Ft in oe){var ct=oe[Ft];for(var Et in ct){var Zt=ct[+Et];if(Zt&&0!==Zt.bitmap.width&&0!==Zt.bitmap.height){var Jt=le[Ft][Et].rect;m.AlphaImage.copy(Zt.bitmap,Rt,{x:0,y:0},{x:Jt.x+1,y:Jt.y+1},Zt.bitmap)}}}this.image=Rt,this.positions=le};m.register("GlyphAtlas",T);var D=function(oe){this.tileID=new m.OverscaledTileID(oe.tileID.overscaledZ,oe.tileID.wrap,oe.tileID.canonical.z,oe.tileID.canonical.x,oe.tileID.canonical.y),this.uid=oe.uid,this.zoom=oe.zoom,this.pixelRatio=oe.pixelRatio,this.tileSize=oe.tileSize,this.source=oe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=oe.showCollisionBoxes,this.collectResourceTiming=!!oe.collectResourceTiming,this.returnDependencies=!!oe.returnDependencies,this.promoteId=oe.promoteId};function F(oe,le,fe){for(var ve=new m.EvaluationParameters(le),Te=0,$e=oe;Te<$e.length;Te+=1)$e[Te].recalculate(ve,fe)}function Z(oe,le){var fe=m.getArrayBuffer(oe.request,function(ve,Te,$e,Xe){ve?le(ve):Te&&le(null,{vectorTile:new m.vectorTile.VectorTile(new m.pbf(Te)),rawData:Te,cacheControl:$e,expires:Xe})});return function(){fe.cancel(),le()}}D.prototype.parse=function(oe,le,fe,ve,Te){var $e=this;this.status="parsing",this.data=oe,this.collisionBoxArray=new m.CollisionBoxArray;var Xe=new m.DictionaryCoder(Object.keys(oe.layers).sort()),He=new m.FeatureIndex(this.tileID,this.promoteId);He.bucketLayerIDs=[];var xe,Fe,Rt,Ft,ct={},Et={featureIndex:He,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:fe},Zt=le.familiesBySource[this.source];for(var Jt in Zt){var hn=oe.layers[Jt];if(hn){1===hn.version&&m.warnOnce('Vector tile source "'+this.source+'" layer "'+Jt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var St=Xe.encode(Jt),Ut=[],Dt=0;Dt<hn.length;Dt++){var Hn=hn.feature(Dt),Vn=He.getId(Hn,Jt);Ut.push({feature:Hn,id:Vn,index:Dt,sourceLayerIndex:St})}for(var sn=0,ri=Zt[Jt];sn<ri.length;sn+=1){var In=ri[sn],ui=In[0];ui.minzoom&&this.zoom<Math.floor(ui.minzoom)||ui.maxzoom&&this.zoom>=ui.maxzoom||"none"!==ui.visibility&&(F(In,this.zoom,fe),(ct[ui.id]=ui.createBucket({index:He.bucketLayerIDs.length,layers:In,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:St,sourceID:this.source})).populate(Ut,Et,this.tileID.canonical),He.bucketLayerIDs.push(In.map(function(Gr){return Gr.id})))}}}var yi=m.mapObject(Et.glyphDependencies,function(Gr){return Object.keys(Gr).map(Number)});Object.keys(yi).length?ve.send("getGlyphs",{uid:this.uid,stacks:yi},function(Gr,On){xe||(xe=Gr,Fe=On,Si.call($e))}):Fe={};var Pr=Object.keys(Et.iconDependencies);Pr.length?ve.send("getImages",{icons:Pr,source:this.source,tileID:this.tileID,type:"icons"},function(Gr,On){xe||(xe=Gr,Rt=On,Si.call($e))}):Rt={};var Yr=Object.keys(Et.patternDependencies);function Si(){if(xe)return Te(xe);if(Fe&&Rt&&Ft){var Gr=new T(Fe),On=new m.ImageAtlas(Rt,Ft);for(var Bi in ct){var Jn=ct[Bi];Jn instanceof m.SymbolBucket?(F(Jn.layers,this.zoom,fe),m.performSymbolLayout(Jn,Fe,Gr.positions,Rt,On.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Jn.hasPattern&&(Jn instanceof m.LineBucket||Jn instanceof m.FillBucket||Jn instanceof m.FillExtrusionBucket)&&(F(Jn.layers,this.zoom,fe),Jn.addFeatures(Et,this.tileID.canonical,On.patternPositions))}this.status="done",Te(null,{buckets:m.values(ct).filter(function(Eo){return!Eo.isEmpty()}),featureIndex:He,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Gr.image,imageAtlas:On,glyphMap:this.returnDependencies?Fe:null,iconMap:this.returnDependencies?Rt:null,glyphPositions:this.returnDependencies?Gr.positions:null})}}Yr.length?ve.send("getImages",{icons:Yr,source:this.source,tileID:this.tileID,type:"patterns"},function(Gr,On){xe||(xe=Gr,Ft=On,Si.call($e))}):Ft={},Si.call(this)};var Y=function(oe,le,fe,ve){this.actor=oe,this.layerIndex=le,this.availableImages=fe,this.loadVectorData=ve||Z,this.loading={},this.loaded={}};Y.prototype.loadTile=function(oe,le){var fe=this,ve=oe.uid;this.loading||(this.loading={});var Te=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new m.RequestPerformance(oe.request),$e=this.loading[ve]=new D(oe);$e.abort=this.loadVectorData(oe,function(Xe,He){if(delete fe.loading[ve],Xe||!He)return $e.status="done",fe.loaded[ve]=$e,le(Xe);var xe=He.rawData,Fe={};He.expires&&(Fe.expires=He.expires),He.cacheControl&&(Fe.cacheControl=He.cacheControl);var Rt={};if(Te){var Ft=Te.finish();Ft&&(Rt.resourceTiming=JSON.parse(JSON.stringify(Ft)))}$e.vectorTile=He.vectorTile,$e.parse(He.vectorTile,fe.layerIndex,fe.availableImages,fe.actor,function(ct,Et){if(ct||!Et)return le(ct);le(null,m.extend({rawTileData:xe.slice(0)},Et,Fe,Rt))}),fe.loaded=fe.loaded||{},fe.loaded[ve]=$e})},Y.prototype.reloadTile=function(oe,le){var fe=this,ve=this.loaded,Te=oe.uid,$e=this;if(ve&&ve[Te]){var Xe=ve[Te];Xe.showCollisionBoxes=oe.showCollisionBoxes;var He=function(xe,Fe){var Rt=Xe.reloadCallback;Rt&&(delete Xe.reloadCallback,Xe.parse(Xe.vectorTile,$e.layerIndex,fe.availableImages,$e.actor,Rt)),le(xe,Fe)};"parsing"===Xe.status?Xe.reloadCallback=He:"done"===Xe.status&&(Xe.vectorTile?Xe.parse(Xe.vectorTile,this.layerIndex,this.availableImages,this.actor,He):He())}},Y.prototype.abortTile=function(oe,le){var fe=this.loading,ve=oe.uid;fe&&fe[ve]&&fe[ve].abort&&(fe[ve].abort(),delete fe[ve]),le()},Y.prototype.removeTile=function(oe,le){var fe=this.loaded,ve=oe.uid;fe&&fe[ve]&&delete fe[ve],le()};var ie=m.window.ImageBitmap,me=function(){this.loaded={}};function se(oe,le){if(0!==oe.length){_e(oe[0],le);for(var fe=1;fe<oe.length;fe++)_e(oe[fe],!le)}}function _e(oe,le){for(var fe=0,ve=0,Te=oe.length,$e=Te-1;ve<Te;$e=ve++)fe+=(oe[ve][0]-oe[$e][0])*(oe[$e][1]+oe[ve][1]);fe>=0!=!!le&&oe.reverse()}me.prototype.loadTile=function(oe,le){var fe=oe.uid,ve=oe.encoding,Te=oe.rawImageData,$e=ie&&Te instanceof ie?this.getImageData(Te):Te,Xe=new m.DEMData(fe,$e,ve);this.loaded=this.loaded||{},this.loaded[fe]=Xe,le(null,Xe)},me.prototype.getImageData=function(oe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(oe.width,oe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=oe.width,this.offscreenCanvas.height=oe.height,this.offscreenCanvasContext.drawImage(oe,0,0,oe.width,oe.height);var le=this.offscreenCanvasContext.getImageData(-1,-1,oe.width+2,oe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new m.RGBAImage({width:le.width,height:le.height},le.data)},me.prototype.removeTile=function(oe){var le=this.loaded,fe=oe.uid;le&&le[fe]&&delete le[fe]};var Me=m.vectorTile.VectorTileFeature.prototype.toGeoJSON,Ne=function(oe){this._feature=oe,this.extent=m.EXTENT,this.type=oe.type,this.properties=oe.tags,"id"in oe&&!isNaN(oe.id)&&(this.id=parseInt(oe.id,10))};Ne.prototype.loadGeometry=function(){if(1===this._feature.type){for(var oe=[],le=0,fe=this._feature.geometry;le<fe.length;le+=1){var ve=fe[le];oe.push([new m.Point$1(ve[0],ve[1])])}return oe}for(var Te=[],$e=0,Xe=this._feature.geometry;$e<Xe.length;$e+=1){for(var He=[],xe=0,Fe=Xe[$e];xe<Fe.length;xe+=1){var Rt=Fe[xe];He.push(new m.Point$1(Rt[0],Rt[1]))}Te.push(He)}return Te},Ne.prototype.toGeoJSON=function(oe,le,fe){return Me.call(this,oe,le,fe)};var Ze=function(oe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=m.EXTENT,this.length=oe.length,this._features=oe};Ze.prototype.feature=function(oe){return new Ne(this._features[oe])};var je=m.vectorTile.VectorTileFeature,Ee=Je;function Je(oe,le){this.options=le||{},this.features=oe,this.length=oe.length}function nt(oe,le){this.id="number"==typeof oe.id?oe.id:void 0,this.type=oe.type,this.rawGeometry=1===oe.type?[oe.geometry]:oe.geometry,this.properties=oe.tags,this.extent=le||4096}Je.prototype.feature=function(oe){return new nt(this.features[oe],this.options.extent)},nt.prototype.loadGeometry=function(){var oe=this.rawGeometry;this.geometry=[];for(var le=0;le<oe.length;le++){for(var fe=oe[le],ve=[],Te=0;Te<fe.length;Te++)ve.push(new m.Point$1(fe[Te][0],fe[Te][1]));this.geometry.push(ve)}return this.geometry},nt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var oe=this.geometry,le=1/0,fe=-1/0,ve=1/0,Te=-1/0,$e=0;$e<oe.length;$e++)for(var Xe=oe[$e],He=0;He<Xe.length;He++){var xe=Xe[He];le=Math.min(le,xe.x),fe=Math.max(fe,xe.x),ve=Math.min(ve,xe.y),Te=Math.max(Te,xe.y)}return[le,ve,fe,Te]},nt.prototype.toGeoJSON=je.prototype.toGeoJSON;var Ct=A,Ue=Ee;function A(oe){var le=new m.pbf;return function(fe,ve){for(var Te in fe.layers)ve.writeMessage(3,L,fe.layers[Te])}(oe,le),le.finish()}function L(oe,le){var fe;le.writeVarintField(15,oe.version||1),le.writeStringField(1,oe.name||""),le.writeVarintField(5,oe.extent||4096);var ve={keys:[],values:[],keycache:{},valuecache:{}};for(fe=0;fe<oe.length;fe++)ve.feature=oe.feature(fe),le.writeMessage(2,B,ve);var Te=ve.keys;for(fe=0;fe<Te.length;fe++)le.writeStringField(3,Te[fe]);var $e=ve.values;for(fe=0;fe<$e.length;fe++)le.writeMessage(4,We,$e[fe])}function B(oe,le){var fe=oe.feature;void 0!==fe.id&&le.writeVarintField(1,fe.id),le.writeMessage(2,j,oe),le.writeVarintField(3,fe.type),le.writeMessage(4,ce,fe)}function j(oe,le){var fe=oe.feature,ve=oe.keys,Te=oe.values,$e=oe.keycache,Xe=oe.valuecache;for(var He in fe.properties){var xe=$e[He];void 0===xe&&(ve.push(He),$e[He]=xe=ve.length-1),le.writeVarint(xe);var Fe=fe.properties[He],Rt=typeof Fe;"string"!==Rt&&"boolean"!==Rt&&"number"!==Rt&&(Fe=JSON.stringify(Fe));var Ft=Rt+":"+Fe,ct=Xe[Ft];void 0===ct&&(Te.push(Fe),Xe[Ft]=ct=Te.length-1),le.writeVarint(ct)}}function ee(oe,le){return(le<<3)+(7&oe)}function W(oe){return oe<<1^oe>>31}function ce(oe,le){for(var fe=oe.loadGeometry(),ve=oe.type,Te=0,$e=0,Xe=fe.length,He=0;He<Xe;He++){var xe=fe[He],Fe=1;1===ve&&(Fe=xe.length),le.writeVarint(ee(1,Fe));for(var Rt=3===ve?xe.length-1:xe.length,Ft=0;Ft<Rt;Ft++){1===Ft&&1!==ve&&le.writeVarint(ee(2,Rt-1));var ct=xe[Ft].x-Te,Et=xe[Ft].y-$e;le.writeVarint(W(ct)),le.writeVarint(W(Et)),Te+=ct,$e+=Et}3===ve&&le.writeVarint(ee(7,1))}}function We(oe,le){var fe=typeof oe;"string"===fe?le.writeStringField(1,oe):"boolean"===fe?le.writeBooleanField(7,oe):"number"===fe&&(oe%1!=0?le.writeDoubleField(3,oe):oe<0?le.writeSVarintField(6,oe):le.writeVarintField(5,oe))}function ut(oe,le,fe,ve){be(oe,fe,ve),be(le,2*fe,2*ve),be(le,2*fe+1,2*ve+1)}function be(oe,le,fe){var ve=oe[le];oe[le]=oe[fe],oe[fe]=ve}function wt(oe,le,fe,ve){var Te=oe-fe,$e=le-ve;return Te*Te+$e*$e}Ct.fromVectorTileJs=A,Ct.fromGeojsonVt=function(oe,le){le=le||{};var fe={};for(var ve in oe)fe[ve]=new Ee(oe[ve].features,le),fe[ve].name=ve,fe[ve].version=le.version,fe[ve].extent=le.extent;return A({layers:fe})},Ct.GeoJSONWrapper=Ue;var bt=function(oe){return oe[0]},Ke=function(oe){return oe[1]},xt=function(oe,le,fe,ve,Te){void 0===le&&(le=bt),void 0===fe&&(fe=Ke),void 0===ve&&(ve=64),void 0===Te&&(Te=Float64Array),this.nodeSize=ve,this.points=oe;for(var $e=oe.length<65536?Uint16Array:Uint32Array,Xe=this.ids=new $e(oe.length),He=this.coords=new Te(2*oe.length),xe=0;xe<oe.length;xe++)Xe[xe]=xe,He[2*xe]=le(oe[xe]),He[2*xe+1]=fe(oe[xe]);!function Fe(Rt,Ft,ct,Et,Zt,Jt){if(!(Zt-Et<=ct)){var hn=Et+Zt>>1;(function St(Ut,Dt,Hn,Vn,sn,ri){for(;sn>Vn;){if(sn-Vn>600){var In=sn-Vn+1,ui=Hn-Vn+1,yi=Math.log(In),Pr=.5*Math.exp(2*yi/3),Yr=.5*Math.sqrt(yi*Pr*(In-Pr)/In)*(ui-In/2<0?-1:1);St(Ut,Dt,Hn,Math.max(Vn,Math.floor(Hn-ui*Pr/In+Yr)),Math.min(sn,Math.floor(Hn+(In-ui)*Pr/In+Yr)),ri)}var Si=Dt[2*Hn+ri],Gr=Vn,On=sn;for(ut(Ut,Dt,Vn,Hn),Dt[2*sn+ri]>Si&&ut(Ut,Dt,Vn,sn);Gr<On;){for(ut(Ut,Dt,Gr,On),Gr++,On--;Dt[2*Gr+ri]<Si;)Gr++;for(;Dt[2*On+ri]>Si;)On--}Dt[2*Vn+ri]===Si?ut(Ut,Dt,Vn,On):ut(Ut,Dt,++On,sn),On<=Hn&&(Vn=On+1),Hn<=On&&(sn=On-1)}})(Rt,Ft,hn,Et,Zt,Jt%2),Fe(Rt,Ft,ct,Et,hn-1,Jt+1),Fe(Rt,Ft,ct,hn+1,Zt,Jt+1)}}(Xe,He,ve,0,Xe.length-1,0)};xt.prototype.range=function(oe,le,fe,ve){return function(Te,$e,Xe,He,xe,Fe,Rt){for(var Ft,ct,Et=[0,Te.length-1,0],Zt=[];Et.length;){var Jt=Et.pop(),hn=Et.pop(),St=Et.pop();if(hn-St<=Rt)for(var Ut=St;Ut<=hn;Ut++)ct=$e[2*Ut+1],(Ft=$e[2*Ut])>=Xe&&Ft<=xe&&ct>=He&&ct<=Fe&&Zt.push(Te[Ut]);else{var Dt=Math.floor((St+hn)/2);ct=$e[2*Dt+1],(Ft=$e[2*Dt])>=Xe&&Ft<=xe&&ct>=He&&ct<=Fe&&Zt.push(Te[Dt]);var Hn=(Jt+1)%2;(0===Jt?Xe<=Ft:He<=ct)&&(Et.push(St),Et.push(Dt-1),Et.push(Hn)),(0===Jt?xe>=Ft:Fe>=ct)&&(Et.push(Dt+1),Et.push(hn),Et.push(Hn))}}return Zt}(this.ids,this.coords,oe,le,fe,ve,this.nodeSize)},xt.prototype.within=function(oe,le,fe){return function(ve,Te,$e,Xe,He,xe){for(var Fe=[0,ve.length-1,0],Rt=[],Ft=He*He;Fe.length;){var ct=Fe.pop(),Et=Fe.pop(),Zt=Fe.pop();if(Et-Zt<=xe)for(var Jt=Zt;Jt<=Et;Jt++)wt(Te[2*Jt],Te[2*Jt+1],$e,Xe)<=Ft&&Rt.push(ve[Jt]);else{var hn=Math.floor((Zt+Et)/2),St=Te[2*hn],Ut=Te[2*hn+1];wt(St,Ut,$e,Xe)<=Ft&&Rt.push(ve[hn]);var Dt=(ct+1)%2;(0===ct?$e-He<=St:Xe-He<=Ut)&&(Fe.push(Zt),Fe.push(hn-1),Fe.push(Dt)),(0===ct?$e+He>=St:Xe+He>=Ut)&&(Fe.push(hn+1),Fe.push(Et),Fe.push(Dt))}}return Rt}(this.ids,this.coords,oe,le,fe,this.nodeSize)};var vn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(oe){return oe}},zt=function(oe){this.options=Ce(Object.create(vn),oe),this.trees=new Array(this.options.maxZoom+1)};function Sn(oe,le,fe,ve,Te){return{x:oe,y:le,zoom:1/0,id:fe,parentId:-1,numPoints:ve,properties:Te}}function It(oe,le){var fe=oe.geometry.coordinates,ve=fe[1];return{x:Zn(fe[0]),y:Wt(ve),zoom:1/0,index:le,parentId:-1}}function Cn(oe){return{type:"Feature",id:oe.id,properties:En(oe),geometry:{type:"Point",coordinates:[(ve=oe.x,360*(ve-.5)),(le=oe.y,fe=(180-360*le)*Math.PI/180,360*Math.atan(Math.exp(fe))/Math.PI-90)]}};var le,fe,ve}function En(oe){var le=oe.numPoints,fe=le>=1e4?Math.round(le/1e3)+"k":le>=1e3?Math.round(le/100)/10+"k":le;return Ce(Ce({},oe.properties),{cluster:!0,cluster_id:oe.id,point_count:le,point_count_abbreviated:fe})}function Zn(oe){return oe/360+.5}function Wt(oe){var le=Math.sin(oe*Math.PI/180),fe=.5-.25*Math.log((1+le)/(1-le))/Math.PI;return fe<0?0:fe>1?1:fe}function Ce(oe,le){for(var fe in le)oe[fe]=le[fe];return oe}function Gn(oe){return oe.x}function ir(oe){return oe.y}function hi(oe,le,fe,ve,Te,$e){var Xe=Te-fe,He=$e-ve;if(0!==Xe||0!==He){var xe=((oe-fe)*Xe+(le-ve)*He)/(Xe*Xe+He*He);xe>1?(fe=Te,ve=$e):xe>0&&(fe+=Xe*xe,ve+=He*xe)}return(Xe=oe-fe)*Xe+(He=le-ve)*He}function Gi(oe,le,fe,ve){var Te={id:void 0===oe?null:oe,type:le,geometry:fe,tags:ve,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function($e){var Xe=$e.geometry,He=$e.type;if("Point"===He||"MultiPoint"===He||"LineString"===He)qt($e,Xe);else if("Polygon"===He||"MultiLineString"===He)for(var xe=0;xe<Xe.length;xe++)qt($e,Xe[xe]);else if("MultiPolygon"===He)for(xe=0;xe<Xe.length;xe++)for(var Fe=0;Fe<Xe[xe].length;Fe++)qt($e,Xe[xe][Fe])}(Te),Te}function qt(oe,le){for(var fe=0;fe<le.length;fe+=3)oe.minX=Math.min(oe.minX,le[fe]),oe.minY=Math.min(oe.minY,le[fe+1]),oe.maxX=Math.max(oe.maxX,le[fe]),oe.maxY=Math.max(oe.maxY,le[fe+1])}function Ot(oe,le,fe,ve){if(le.geometry){var Te=le.geometry.coordinates,$e=le.geometry.type,Xe=Math.pow(fe.tolerance/((1<<fe.maxZoom)*fe.extent),2),He=[],xe=le.id;if(fe.promoteId?xe=le.properties[fe.promoteId]:fe.generateId&&(xe=ve||0),"Point"===$e)za(Te,He);else if("MultiPoint"===$e)for(var Fe=0;Fe<Te.length;Fe++)za(Te[Fe],He);else if("LineString"===$e)wa(Te,He,Xe,!1);else if("MultiLineString"===$e){if(fe.lineMetrics){for(Fe=0;Fe<Te.length;Fe++)wa(Te[Fe],He=[],Xe,!1),oe.push(Gi(xe,"LineString",He,le.properties));return}li(Te,He,Xe,!1)}else if("Polygon"===$e)li(Te,He,Xe,!0);else{if("MultiPolygon"!==$e){if("GeometryCollection"===$e){for(Fe=0;Fe<le.geometry.geometries.length;Fe++)Ot(oe,{id:xe,geometry:le.geometry.geometries[Fe],properties:le.properties},fe,ve);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Fe=0;Fe<Te.length;Fe++){var Rt=[];li(Te[Fe],Rt,Xe,!0),He.push(Rt)}}oe.push(Gi(xe,$e,He,le.properties))}}function za(oe,le){le.push(qr(oe[0])),le.push(Ys(oe[1])),le.push(0)}function wa(oe,le,fe,ve){for(var Te,$e,Xe=0,He=0;He<oe.length;He++){var xe=qr(oe[He][0]),Fe=Ys(oe[He][1]);le.push(xe),le.push(Fe),le.push(0),He>0&&(Xe+=ve?(Te*Fe-xe*$e)/2:Math.sqrt(Math.pow(xe-Te,2)+Math.pow(Fe-$e,2))),Te=xe,$e=Fe}var Rt=le.length-3;le[2]=1,function Ft(ct,Et,Zt,Jt){for(var hn,St=Jt,Ut=Zt-Et>>1,Dt=Zt-Et,Hn=ct[Et],Vn=ct[Et+1],sn=ct[Zt],ri=ct[Zt+1],In=Et+3;In<Zt;In+=3){var ui=hi(ct[In],ct[In+1],Hn,Vn,sn,ri);if(ui>St)hn=In,St=ui;else if(ui===St){var yi=Math.abs(In-Ut);yi<Dt&&(hn=In,Dt=yi)}}St>Jt&&(hn-Et>3&&Ft(ct,Et,hn,Jt),ct[hn+2]=St,Zt-hn>3&&Ft(ct,hn,Zt,Jt))}(le,0,Rt,fe),le[Rt+2]=1,le.size=Math.abs(Xe),le.start=0,le.end=le.size}function li(oe,le,fe,ve){for(var Te=0;Te<oe.length;Te++){var $e=[];wa(oe[Te],$e,fe,ve),le.push($e)}}function qr(oe){return oe/360+.5}function Ys(oe){var le=Math.sin(oe*Math.PI/180),fe=.5-.25*Math.log((1+le)/(1-le))/Math.PI;return fe<0?0:fe>1?1:fe}function Qa(oe,le,fe,ve,Te,$e,Xe,He){if(ve/=le,$e>=(fe/=le)&&Xe<ve)return oe;if(Xe<fe||$e>=ve)return null;for(var xe=[],Fe=0;Fe<oe.length;Fe++){var Rt=oe[Fe],Ft=Rt.geometry,ct=Rt.type,Et=0===Te?Rt.minX:Rt.minY,Zt=0===Te?Rt.maxX:Rt.maxY;if(Et>=fe&&Zt<ve)xe.push(Rt);else if(!(Zt<fe||Et>=ve)){var Jt=[];if("Point"===ct||"MultiPoint"===ct)Mo(Ft,Jt,fe,ve,Te);else if("LineString"===ct)Ba(Ft,Jt,fe,ve,Te,!1,He.lineMetrics);else if("MultiLineString"===ct)io(Ft,Jt,fe,ve,Te,!1);else if("Polygon"===ct)io(Ft,Jt,fe,ve,Te,!0);else if("MultiPolygon"===ct)for(var hn=0;hn<Ft.length;hn++){var St=[];io(Ft[hn],St,fe,ve,Te,!0),St.length&&Jt.push(St)}if(Jt.length){if(He.lineMetrics&&"LineString"===ct){for(hn=0;hn<Jt.length;hn++)xe.push(Gi(Rt.id,ct,Jt[hn],Rt.tags));continue}"LineString"!==ct&&"MultiLineString"!==ct||(1===Jt.length?(ct="LineString",Jt=Jt[0]):ct="MultiLineString"),"Point"!==ct&&"MultiPoint"!==ct||(ct=3===Jt.length?"Point":"MultiPoint"),xe.push(Gi(Rt.id,ct,Jt,Rt.tags))}}}return xe.length?xe:null}function Mo(oe,le,fe,ve,Te){for(var $e=0;$e<oe.length;$e+=3){var Xe=oe[$e+Te];Xe>=fe&&Xe<=ve&&(le.push(oe[$e]),le.push(oe[$e+1]),le.push(oe[$e+2]))}}function Ba(oe,le,fe,ve,Te,$e,Xe){for(var He,xe,Fe=fs(oe),Rt=0===Te?oo:wo,Ft=oe.start,ct=0;ct<oe.length-3;ct+=3){var Et=oe[ct],Zt=oe[ct+1],Jt=oe[ct+2],hn=oe[ct+3],St=oe[ct+4],Ut=0===Te?Et:Zt,Dt=0===Te?hn:St,Hn=!1;Xe&&(He=Math.sqrt(Math.pow(Et-hn,2)+Math.pow(Zt-St,2))),Ut<fe?Dt>fe&&(xe=Rt(Fe,Et,Zt,hn,St,fe),Xe&&(Fe.start=Ft+He*xe)):Ut>ve?Dt<ve&&(xe=Rt(Fe,Et,Zt,hn,St,ve),Xe&&(Fe.start=Ft+He*xe)):xa(Fe,Et,Zt,Jt),Dt<fe&&Ut>=fe&&(xe=Rt(Fe,Et,Zt,hn,St,fe),Hn=!0),Dt>ve&&Ut<=ve&&(xe=Rt(Fe,Et,Zt,hn,St,ve),Hn=!0),!$e&&Hn&&(Xe&&(Fe.end=Ft+He*xe),le.push(Fe),Fe=fs(oe)),Xe&&(Ft+=He)}var Vn=oe.length-3;Et=oe[Vn],Zt=oe[Vn+1],Jt=oe[Vn+2],(Ut=0===Te?Et:Zt)>=fe&&Ut<=ve&&xa(Fe,Et,Zt,Jt),Vn=Fe.length-3,$e&&Vn>=3&&(Fe[Vn]!==Fe[0]||Fe[Vn+1]!==Fe[1])&&xa(Fe,Fe[0],Fe[1],Fe[2]),Fe.length&&le.push(Fe)}function fs(oe){var le=[];return le.size=oe.size,le.start=oe.start,le.end=oe.end,le}function io(oe,le,fe,ve,Te,$e){for(var Xe=0;Xe<oe.length;Xe++)Ba(oe[Xe],le,fe,ve,Te,$e,!1)}function xa(oe,le,fe,ve){oe.push(le),oe.push(fe),oe.push(ve)}function oo(oe,le,fe,ve,Te,$e){var Xe=($e-le)/(ve-le);return oe.push($e),oe.push(fe+(Te-fe)*Xe),oe.push(1),Xe}function wo(oe,le,fe,ve,Te,$e){var Xe=($e-fe)/(Te-fe);return oe.push(le+(ve-le)*Xe),oe.push($e),oe.push(1),Xe}function Ml(oe,le){for(var fe=[],ve=0;ve<oe.length;ve++){var Te,$e=oe[ve],Xe=$e.type;if("Point"===Xe||"MultiPoint"===Xe||"LineString"===Xe)Te=Es($e.geometry,le);else if("MultiLineString"===Xe||"Polygon"===Xe){Te=[];for(var He=0;He<$e.geometry.length;He++)Te.push(Es($e.geometry[He],le))}else if("MultiPolygon"===Xe)for(Te=[],He=0;He<$e.geometry.length;He++){for(var xe=[],Fe=0;Fe<$e.geometry[He].length;Fe++)xe.push(Es($e.geometry[He][Fe],le));Te.push(xe)}fe.push(Gi($e.id,Xe,Te,$e.tags))}return fe}function Es(oe,le){var fe=[];fe.size=oe.size,void 0!==oe.start&&(fe.start=oe.start,fe.end=oe.end);for(var ve=0;ve<oe.length;ve+=3)fe.push(oe[ve]+le,oe[ve+1],oe[ve+2]);return fe}function xo(oe,le){if(oe.transformed)return oe;var fe,ve,Te,$e=1<<oe.z,Xe=oe.x,He=oe.y;for(fe=0;fe<oe.features.length;fe++){var xe=oe.features[fe],Fe=xe.geometry,Rt=xe.type;if(xe.geometry=[],1===Rt)for(ve=0;ve<Fe.length;ve+=2)xe.geometry.push(ur(Fe[ve],Fe[ve+1],le,$e,Xe,He));else for(ve=0;ve<Fe.length;ve++){var Ft=[];for(Te=0;Te<Fe[ve].length;Te+=2)Ft.push(ur(Fe[ve][Te],Fe[ve][Te+1],le,$e,Xe,He));xe.geometry.push(Ft)}}return oe.transformed=!0,oe}function ur(oe,le,fe,ve,Te,$e){return[Math.round(fe*(oe*ve-Te)),Math.round(fe*(le*ve-$e))]}function Ol(oe,le,fe,ve,Te){for(var $e=le===Te.maxZoom?0:Te.tolerance/((1<<le)*Te.extent),Xe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:fe,y:ve,z:le,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},He=0;He<oe.length;He++){Xe.numFeatures++,pl(Xe,oe[He],$e,Te);var xe=oe[He].minX,Fe=oe[He].minY,Rt=oe[He].maxX,Ft=oe[He].maxY;xe<Xe.minX&&(Xe.minX=xe),Fe<Xe.minY&&(Xe.minY=Fe),Rt>Xe.maxX&&(Xe.maxX=Rt),Ft>Xe.maxY&&(Xe.maxY=Ft)}return Xe}function pl(oe,le,fe,ve){var Te=le.geometry,$e=le.type,Xe=[];if("Point"===$e||"MultiPoint"===$e)for(var He=0;He<Te.length;He+=3)Xe.push(Te[He]),Xe.push(Te[He+1]),oe.numPoints++,oe.numSimplified++;else if("LineString"===$e)Bs(Xe,Te,oe,fe,!1,!1);else if("MultiLineString"===$e||"Polygon"===$e)for(He=0;He<Te.length;He++)Bs(Xe,Te[He],oe,fe,"Polygon"===$e,0===He);else if("MultiPolygon"===$e)for(var xe=0;xe<Te.length;xe++){var Fe=Te[xe];for(He=0;He<Fe.length;He++)Bs(Xe,Fe[He],oe,fe,!0,0===He)}if(Xe.length){var Rt=le.tags||null;if("LineString"===$e&&ve.lineMetrics){for(var Ft in Rt={},le.tags)Rt[Ft]=le.tags[Ft];Rt.mapbox_clip_start=Te.start/Te.size,Rt.mapbox_clip_end=Te.end/Te.size}var ct={geometry:Xe,type:"Polygon"===$e||"MultiPolygon"===$e?3:"LineString"===$e||"MultiLineString"===$e?2:1,tags:Rt};null!==le.id&&(ct.id=le.id),oe.features.push(ct)}}function Bs(oe,le,fe,ve,Te,$e){var Xe=ve*ve;if(ve>0&&le.size<(Te?Xe:ve))fe.numPoints+=le.length/3;else{for(var He=[],xe=0;xe<le.length;xe+=3)(0===ve||le[xe+2]>Xe)&&(fe.numSimplified++,He.push(le[xe]),He.push(le[xe+1])),fe.numPoints++;Te&&function(Fe,Rt){for(var Ft=0,ct=0,Et=Fe.length,Zt=Et-2;ct<Et;Zt=ct,ct+=2)Ft+=(Fe[ct]-Fe[Zt])*(Fe[ct+1]+Fe[Zt+1]);if(Ft>0===Rt)for(ct=0,Et=Fe.length;ct<Et/2;ct+=2){var Jt=Fe[ct],hn=Fe[ct+1];Fe[ct]=Fe[Et-2-ct],Fe[ct+1]=Fe[Et-1-ct],Fe[Et-2-ct]=Jt,Fe[Et-1-ct]=hn}}(He,$e),oe.push(He)}}function Oo(oe,le){var fe=(le=this.options=function(Te,$e){for(var Xe in $e)Te[Xe]=$e[Xe];return Te}(Object.create(this.options),le)).debug;if(fe&&console.time("preprocess data"),le.maxZoom<0||le.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(le.promoteId&&le.generateId)throw new Error("promoteId and generateId cannot be used together.");var Te,$e,Xe,He,xe,Fe,ve=function(Te,$e){var Xe=[];if("FeatureCollection"===Te.type)for(var He=0;He<Te.features.length;He++)Ot(Xe,Te.features[He],$e,He);else Ot(Xe,"Feature"===Te.type?Te:{geometry:Te},$e);return Xe}(oe,le);this.tiles={},this.tileCoords=[],fe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",le.indexMaxZoom,le.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Te=ve,$e=le,Xe=$e.buffer/$e.extent,He=Te,xe=Qa(Te,1,-1-Xe,Xe,0,-1,2,$e),Fe=Qa(Te,1,1-Xe,2+Xe,0,-1,2,$e),(xe||Fe)&&(He=Qa(Te,1,-Xe,1+Xe,0,-1,2,$e)||[],xe&&(He=Ml(xe,1).concat(He)),Fe&&(He=He.concat(Ml(Fe,-1)))),ve=He).length&&this.splitTile(ve,0,0,0),fe&&(ve.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function hs(oe,le,fe){return 32*((1<<oe)*fe+le)+oe}function Kr(oe,le){var fe=oe.tileID.canonical;if(!this._geoJSONIndex)return le(null,null);var ve=this._geoJSONIndex.getTile(fe.z,fe.x,fe.y);if(!ve)return le(null,null);var Te=new Ze(ve.features),$e=Ct(Te);0===$e.byteOffset&&$e.byteLength===$e.buffer.byteLength||($e=new Uint8Array($e)),le(null,{vectorTile:Te,rawData:$e.buffer})}zt.prototype.load=function(oe){var le=this.options,fe=le.log,ve=le.minZoom,Te=le.maxZoom,$e=le.nodeSize;fe&&console.time("total time");var Xe="prepare "+oe.length+" points";fe&&console.time(Xe),this.points=oe;for(var He=[],xe=0;xe<oe.length;xe++)oe[xe].geometry&&He.push(It(oe[xe],xe));this.trees[Te+1]=new xt(He,Gn,ir,$e,Float32Array),fe&&console.timeEnd(Xe);for(var Fe=Te;Fe>=ve;Fe--){var Rt=+Date.now();He=this._cluster(He,Fe),this.trees[Fe]=new xt(He,Gn,ir,$e,Float32Array),fe&&console.log("z%d: %d clusters in %dms",Fe,He.length,+Date.now()-Rt)}return fe&&console.timeEnd("total time"),this},zt.prototype.getClusters=function(oe,le){var fe=((oe[0]+180)%360+360)%360-180,ve=Math.max(-90,Math.min(90,oe[1])),Te=180===oe[2]?180:((oe[2]+180)%360+360)%360-180,$e=Math.max(-90,Math.min(90,oe[3]));if(oe[2]-oe[0]>=360)fe=-180,Te=180;else if(fe>Te){var Xe=this.getClusters([fe,ve,180,$e],le),He=this.getClusters([-180,ve,Te,$e],le);return Xe.concat(He)}for(var xe=this.trees[this._limitZoom(le)],Fe=[],Rt=0,Ft=xe.range(Zn(fe),Wt($e),Zn(Te),Wt(ve));Rt<Ft.length;Rt+=1){var ct=xe.points[Ft[Rt]];Fe.push(ct.numPoints?Cn(ct):this.points[ct.index])}return Fe},zt.prototype.getChildren=function(oe){var le=this._getOriginId(oe),fe=this._getOriginZoom(oe),ve="No cluster with the specified id.",Te=this.trees[fe];if(!Te)throw new Error(ve);var $e=Te.points[le];if(!$e)throw new Error(ve);for(var Xe=this.options.radius/(this.options.extent*Math.pow(2,fe-1)),He=[],xe=0,Fe=Te.within($e.x,$e.y,Xe);xe<Fe.length;xe+=1){var Rt=Te.points[Fe[xe]];Rt.parentId===oe&&He.push(Rt.numPoints?Cn(Rt):this.points[Rt.index])}if(0===He.length)throw new Error(ve);return He},zt.prototype.getLeaves=function(oe,le,fe){var ve=[];return this._appendLeaves(ve,oe,le=le||10,fe=fe||0,0),ve},zt.prototype.getTile=function(oe,le,fe){var ve=this.trees[this._limitZoom(oe)],Te=Math.pow(2,oe),$e=this.options,Xe=$e.radius/$e.extent,He=(fe-Xe)/Te,xe=(fe+1+Xe)/Te,Fe={features:[]};return this._addTileFeatures(ve.range((le-Xe)/Te,He,(le+1+Xe)/Te,xe),ve.points,le,fe,Te,Fe),0===le&&this._addTileFeatures(ve.range(1-Xe/Te,He,1,xe),ve.points,Te,fe,Te,Fe),le===Te-1&&this._addTileFeatures(ve.range(0,He,Xe/Te,xe),ve.points,-1,fe,Te,Fe),Fe.features.length?Fe:null},zt.prototype.getClusterExpansionZoom=function(oe){for(var le=this._getOriginZoom(oe)-1;le<=this.options.maxZoom;){var fe=this.getChildren(oe);if(le++,1!==fe.length)break;oe=fe[0].properties.cluster_id}return le},zt.prototype._appendLeaves=function(oe,le,fe,ve,Te){for(var $e=0,Xe=this.getChildren(le);$e<Xe.length;$e+=1){var He=Xe[$e],xe=He.properties;if(xe&&xe.cluster?Te+xe.point_count<=ve?Te+=xe.point_count:Te=this._appendLeaves(oe,xe.cluster_id,fe,ve,Te):Te<ve?Te++:oe.push(He),oe.length===fe)break}return Te},zt.prototype._addTileFeatures=function(oe,le,fe,ve,Te,$e){for(var Xe=0,He=oe;Xe<He.length;Xe+=1){var xe=le[He[Xe]],Fe=xe.numPoints,Rt={type:1,geometry:[[Math.round(this.options.extent*(xe.x*Te-fe)),Math.round(this.options.extent*(xe.y*Te-ve))]],tags:Fe?En(xe):this.points[xe.index].properties},Ft=void 0;Fe?Ft=xe.id:this.options.generateId?Ft=xe.index:this.points[xe.index].id&&(Ft=this.points[xe.index].id),void 0!==Ft&&(Rt.id=Ft),$e.features.push(Rt)}},zt.prototype._limitZoom=function(oe){return Math.max(this.options.minZoom,Math.min(+oe,this.options.maxZoom+1))},zt.prototype._cluster=function(oe,le){for(var fe=[],ve=this.options,Te=ve.reduce,$e=ve.minPoints,Xe=ve.radius/(ve.extent*Math.pow(2,le)),He=0;He<oe.length;He++){var xe=oe[He];if(!(xe.zoom<=le)){xe.zoom=le;for(var Fe=this.trees[le+1],Rt=Fe.within(xe.x,xe.y,Xe),Ft=xe.numPoints||1,ct=Ft,Et=0,Zt=Rt;Et<Zt.length;Et+=1){var Jt=Fe.points[Zt[Et]];Jt.zoom>le&&(ct+=Jt.numPoints||1)}if(ct>=$e){for(var hn=xe.x*Ft,St=xe.y*Ft,Ut=Te&&Ft>1?this._map(xe,!0):null,Dt=(He<<5)+(le+1)+this.points.length,Hn=0,Vn=Rt;Hn<Vn.length;Hn+=1){var sn=Fe.points[Vn[Hn]];if(!(sn.zoom<=le)){sn.zoom=le;var ri=sn.numPoints||1;hn+=sn.x*ri,St+=sn.y*ri,sn.parentId=Dt,Te&&(Ut||(Ut=this._map(xe,!0)),Te(Ut,this._map(sn)))}}xe.parentId=Dt,fe.push(Sn(hn/ct,St/ct,Dt,ct,Ut))}else if(fe.push(xe),ct>1)for(var In=0,ui=Rt;In<ui.length;In+=1){var yi=Fe.points[ui[In]];yi.zoom<=le||(yi.zoom=le,fe.push(yi))}}}return fe},zt.prototype._getOriginId=function(oe){return oe-this.points.length>>5},zt.prototype._getOriginZoom=function(oe){return(oe-this.points.length)%32},zt.prototype._map=function(oe,le){if(oe.numPoints)return le?Ce({},oe.properties):oe.properties;var fe=this.points[oe.index].properties,ve=this.options.map(fe);return le&&ve===fe?Ce({},ve):ve},Oo.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Oo.prototype.splitTile=function(oe,le,fe,ve,Te,$e,Xe){for(var He=[oe,le,fe,ve],xe=this.options,Fe=xe.debug;He.length;){ve=He.pop(),fe=He.pop(),le=He.pop(),oe=He.pop();var Rt=1<<le,Ft=hs(le,fe,ve),ct=this.tiles[Ft];if(!ct&&(Fe>1&&console.time("creation"),ct=this.tiles[Ft]=Ol(oe,le,fe,ve,xe),this.tileCoords.push({z:le,x:fe,y:ve}),Fe)){Fe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",le,fe,ve,ct.numFeatures,ct.numPoints,ct.numSimplified),console.timeEnd("creation"));var Et="z"+le;this.stats[Et]=(this.stats[Et]||0)+1,this.total++}if(ct.source=oe,Te){if(le===xe.maxZoom||le===Te)continue;var Zt=1<<Te-le;if(fe!==Math.floor($e/Zt)||ve!==Math.floor(Xe/Zt))continue}else if(le===xe.indexMaxZoom||ct.numPoints<=xe.indexMaxPoints)continue;if(ct.source=null,0!==oe.length){Fe>1&&console.time("clipping");var Jt,hn,St,Ut,Dt,Hn,Vn=.5*xe.buffer/xe.extent,sn=.5-Vn,ri=.5+Vn,In=1+Vn;Jt=hn=St=Ut=null,Dt=Qa(oe,Rt,fe-Vn,fe+ri,0,ct.minX,ct.maxX,xe),Hn=Qa(oe,Rt,fe+sn,fe+In,0,ct.minX,ct.maxX,xe),oe=null,Dt&&(Jt=Qa(Dt,Rt,ve-Vn,ve+ri,1,ct.minY,ct.maxY,xe),hn=Qa(Dt,Rt,ve+sn,ve+In,1,ct.minY,ct.maxY,xe),Dt=null),Hn&&(St=Qa(Hn,Rt,ve-Vn,ve+ri,1,ct.minY,ct.maxY,xe),Ut=Qa(Hn,Rt,ve+sn,ve+In,1,ct.minY,ct.maxY,xe),Hn=null),Fe>1&&console.timeEnd("clipping"),He.push(Jt||[],le+1,2*fe,2*ve),He.push(hn||[],le+1,2*fe,2*ve+1),He.push(St||[],le+1,2*fe+1,2*ve),He.push(Ut||[],le+1,2*fe+1,2*ve+1)}}},Oo.prototype.getTile=function(oe,le,fe){var ve=this.options,Te=ve.extent,$e=ve.debug;if(oe<0||oe>24)return null;var Xe=1<<oe,He=hs(oe,le=(le%Xe+Xe)%Xe,fe);if(this.tiles[He])return xo(this.tiles[He],Te);$e>1&&console.log("drilling down to z%d-%d-%d",oe,le,fe);for(var xe,Fe=oe,Rt=le,Ft=fe;!xe&&Fe>0;)Fe--,Rt=Math.floor(Rt/2),Ft=Math.floor(Ft/2),xe=this.tiles[hs(Fe,Rt,Ft)];return xe&&xe.source?($e>1&&console.log("found parent tile z%d-%d-%d",Fe,Rt,Ft),$e>1&&console.time("drilling down"),this.splitTile(xe.source,Fe,Rt,Ft,oe,le,fe),$e>1&&console.timeEnd("drilling down"),this.tiles[He]?xo(this.tiles[He],Te):null):null};var Xs=function(oe){function le(fe,ve,Te,$e){oe.call(this,fe,ve,Te,Kr),$e&&(this.loadGeoJSON=$e)}return oe&&(le.__proto__=oe),(le.prototype=Object.create(oe&&oe.prototype)).constructor=le,le.prototype.loadData=function(fe,ve){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=ve,this._pendingLoadDataParams=fe,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},le.prototype._loadData=function(){var fe=this;if(this._pendingCallback&&this._pendingLoadDataParams){var ve=this._pendingCallback,Te=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var $e=!!(Te&&Te.request&&Te.request.collectResourceTiming)&&new m.RequestPerformance(Te.request);this.loadGeoJSON(Te,function(Xe,He){if(Xe||!He)return ve(Xe);if("object"!=typeof He)return ve(new Error("Input data given to '"+Te.source+"' is not a valid GeoJSON object."));!function ct(Et,Zt){var Jt,hn=Et&&Et.type;if("FeatureCollection"===hn)for(Jt=0;Jt<Et.features.length;Jt++)ct(Et.features[Jt],Zt);else if("GeometryCollection"===hn)for(Jt=0;Jt<Et.geometries.length;Jt++)ct(Et.geometries[Jt],Zt);else if("Feature"===hn)ct(Et.geometry,Zt);else if("Polygon"===hn)se(Et.coordinates,Zt);else if("MultiPolygon"===hn)for(Jt=0;Jt<Et.coordinates.length;Jt++)se(Et.coordinates[Jt],Zt);return Et}(He,!0);try{if(Te.filter){var xe=m.createExpression(Te.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===xe.result)throw new Error(xe.value.map(function(ct){return ct.key+": "+ct.message}).join(", "));var Fe=He.features.filter(function(ct){return xe.value.evaluate({zoom:0},ct)});He={type:"FeatureCollection",features:Fe}}fe._geoJSONIndex=Te.cluster?new zt(function(ct){var Et=ct.superclusterOptions,Zt=ct.clusterProperties;if(!Zt||!Et)return Et;for(var Jt={},hn={},St={accumulated:null,zoom:0},Ut={properties:null},Dt=Object.keys(Zt),Hn=0,Vn=Dt;Hn<Vn.length;Hn+=1){var sn=Vn[Hn],ri=Zt[sn],In=ri[0],ui=m.createExpression(ri[1]),yi=m.createExpression("string"==typeof In?[In,["accumulated"],["get",sn]]:In);Jt[sn]=ui.value,hn[sn]=yi.value}return Et.map=function(Pr){Ut.properties=Pr;for(var Yr={},Si=0,Gr=Dt;Si<Gr.length;Si+=1){var On=Gr[Si];Yr[On]=Jt[On].evaluate(St,Ut)}return Yr},Et.reduce=function(Pr,Yr){Ut.properties=Yr;for(var Si=0,Gr=Dt;Si<Gr.length;Si+=1){var On=Gr[Si];St.accumulated=Pr[On],Pr[On]=hn[On].evaluate(St,Ut)}},Et}(Te)).load(He.features):new Oo(ct=He,Te.geojsonVtOptions)}catch(ct){return ve(ct)}var ct;fe.loaded={};var Rt={};if($e){var Ft=$e.finish();Ft&&(Rt.resourceTiming={},Rt.resourceTiming[Te.source]=JSON.parse(JSON.stringify(Ft)))}ve(null,Rt)})}},le.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},le.prototype.reloadTile=function(fe,ve){var Te=this.loaded;return Te&&Te[fe.uid]?oe.prototype.reloadTile.call(this,fe,ve):this.loadTile(fe,ve)},le.prototype.loadGeoJSON=function(fe,ve){if(fe.request)m.getJSON(fe.request,ve);else{if("string"!=typeof fe.data)return ve(new Error("Input data given to '"+fe.source+"' is not a valid GeoJSON object."));try{return ve(null,JSON.parse(fe.data))}catch{return ve(new Error("Input data given to '"+fe.source+"' is not a valid GeoJSON object."))}}},le.prototype.removeSource=function(fe,ve){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ve()},le.prototype.getClusterExpansionZoom=function(fe,ve){try{ve(null,this._geoJSONIndex.getClusterExpansionZoom(fe.clusterId))}catch(Te){ve(Te)}},le.prototype.getClusterChildren=function(fe,ve){try{ve(null,this._geoJSONIndex.getChildren(fe.clusterId))}catch(Te){ve(Te)}},le.prototype.getClusterLeaves=function(fe,ve){try{ve(null,this._geoJSONIndex.getLeaves(fe.clusterId,fe.limit,fe.offset))}catch(Te){ve(Te)}},le}(Y),zr=function(oe){var le=this;this.self=oe,this.actor=new m.Actor(oe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Y,geojson:Xs},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(fe,ve){if(le.workerSourceTypes[fe])throw new Error('Worker source with name "'+fe+'" already registered.');le.workerSourceTypes[fe]=ve},this.self.registerRTLTextPlugin=function(fe){if(m.plugin.isParsed())throw new Error("RTL text plugin already registered.");m.plugin.applyArabicShaping=fe.applyArabicShaping,m.plugin.processBidirectionalText=fe.processBidirectionalText,m.plugin.processStyledBidirectionalText=fe.processStyledBidirectionalText}};return zr.prototype.setReferrer=function(oe,le){this.referrer=le},zr.prototype.setImages=function(oe,le,fe){for(var ve in this.availableImages[oe]=le,this.workerSources[oe]){var Te=this.workerSources[oe][ve];for(var $e in Te)Te[$e].availableImages=le}fe()},zr.prototype.setLayers=function(oe,le,fe){this.getLayerIndex(oe).replace(le),fe()},zr.prototype.updateLayers=function(oe,le,fe){this.getLayerIndex(oe).update(le.layers,le.removedIds),fe()},zr.prototype.loadTile=function(oe,le,fe){this.getWorkerSource(oe,le.type,le.source).loadTile(le,fe)},zr.prototype.loadDEMTile=function(oe,le,fe){this.getDEMWorkerSource(oe,le.source).loadTile(le,fe)},zr.prototype.reloadTile=function(oe,le,fe){this.getWorkerSource(oe,le.type,le.source).reloadTile(le,fe)},zr.prototype.abortTile=function(oe,le,fe){this.getWorkerSource(oe,le.type,le.source).abortTile(le,fe)},zr.prototype.removeTile=function(oe,le,fe){this.getWorkerSource(oe,le.type,le.source).removeTile(le,fe)},zr.prototype.removeDEMTile=function(oe,le){this.getDEMWorkerSource(oe,le.source).removeTile(le)},zr.prototype.removeSource=function(oe,le,fe){if(this.workerSources[oe]&&this.workerSources[oe][le.type]&&this.workerSources[oe][le.type][le.source]){var ve=this.workerSources[oe][le.type][le.source];delete this.workerSources[oe][le.type][le.source],void 0!==ve.removeSource?ve.removeSource(le,fe):fe()}},zr.prototype.loadWorkerSource=function(oe,le,fe){try{this.self.importScripts(le.url),fe()}catch(ve){fe(ve.toString())}},zr.prototype.syncRTLPluginState=function(oe,le,fe){try{m.plugin.setState(le);var ve=m.plugin.getPluginURL();if(m.plugin.isLoaded()&&!m.plugin.isParsed()&&null!=ve){this.self.importScripts(ve);var Te=m.plugin.isParsed();fe(Te?void 0:new Error("RTL Text Plugin failed to import scripts from "+ve),Te)}}catch($e){fe($e.toString())}},zr.prototype.getAvailableImages=function(oe){var le=this.availableImages[oe];return le||(le=[]),le},zr.prototype.getLayerIndex=function(oe){var le=this.layerIndexes[oe];return le||(le=this.layerIndexes[oe]=new z),le},zr.prototype.getWorkerSource=function(oe,le,fe){var ve=this;return this.workerSources[oe]||(this.workerSources[oe]={}),this.workerSources[oe][le]||(this.workerSources[oe][le]={}),this.workerSources[oe][le][fe]||(this.workerSources[oe][le][fe]=new this.workerSourceTypes[le]({send:function(Te,$e,Xe){ve.actor.send(Te,$e,Xe,oe)}},this.getLayerIndex(oe),this.getAvailableImages(oe))),this.workerSources[oe][le][fe]},zr.prototype.getDEMWorkerSource=function(oe,le){return this.demWorkerSources[oe]||(this.demWorkerSources[oe]={}),this.demWorkerSources[oe][le]||(this.demWorkerSources[oe][le]=new me),this.demWorkerSources[oe][le]},zr.prototype.enforceCacheSizeLimit=function(oe,le){m.enforceCacheSizeLimit(le)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new zr(self)),zr}),X(0,function(m){var $=m.createCommonjsModule(function(f){function p(S){return!h(S)}function h(S){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var O,H,te=new Blob([""],{type:"text/javascript"}),ae=URL.createObjectURL(te);try{H=new Worker(ae),O=!0}catch{O=!1}return H&&H.terminate(),URL.revokeObjectURL(ae),O}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var O=document.createElement("canvas");O.width=O.height=1;var H=O.getContext("2d");if(!H)return!1;var te=H.getImageData(0,0,1,1);return te&&te.width===O.width}()?(void 0===v[P=S&&S.failIfMajorPerformanceCaveat]&&(v[P]=function(O){var ae,ge,we,H=(ae=O,ge=document.createElement("canvas"),(we=Object.create(p.webGLContextAttributes)).failIfMajorPerformanceCaveat=ae,ge.probablySupportsContext?ge.probablySupportsContext("webgl",we)||ge.probablySupportsContext("experimental-webgl",we):ge.supportsContext?ge.supportsContext("webgl",we)||ge.supportsContext("experimental-webgl",we):ge.getContext("webgl",we)||ge.getContext("experimental-webgl",we));if(!H)return!1;var te=H.createShader(H.VERTEX_SHADER);return!(!te||H.isContextLost())&&(H.shaderSource(te,"void main() {}"),H.compileShader(te),!0===H.getShaderParameter(te,H.COMPILE_STATUS))}(P)),v[P]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var P}f.exports?f.exports=p:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=p,window.mapboxgl.notSupportedReason=h);var v={};p.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),G={create:function(f,p,h){var v=m.window.document.createElement(f);return void 0!==p&&(v.className=p),h&&h.appendChild(v),v},createNS:function(f,p){return m.window.document.createElementNS(f,p)}},z=m.window.document&&m.window.document.documentElement.style;function T(f){if(!z)return f[0];for(var p=0;p<f.length;p++)if(f[p]in z)return f[p];return f[0]}var D,F=T(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);G.disableDrag=function(){z&&F&&(D=z[F],z[F]="none")},G.enableDrag=function(){z&&F&&(z[F]=D)};var Z=T(["transform","WebkitTransform"]);G.setTransform=function(f,p){f.style[Z]=p};var Y=!1;try{var ie=Object.defineProperty({},"passive",{get:function(){Y=!0}});m.window.addEventListener("test",ie,ie),m.window.removeEventListener("test",ie,ie)}catch{Y=!1}G.addEventListener=function(f,p,h,v){void 0===v&&(v={}),f.addEventListener(p,h,"passive"in v&&Y?v:v.capture)},G.removeEventListener=function(f,p,h,v){void 0===v&&(v={}),f.removeEventListener(p,h,"passive"in v&&Y?v:v.capture)};var me=function(f){f.preventDefault(),f.stopPropagation(),m.window.removeEventListener("click",me,!0)};function se(f){var p=f.userImage;return!!(p&&p.render&&p.render())&&(f.data.replace(new Uint8Array(p.data.buffer)),!0)}G.suppressClick=function(){m.window.addEventListener("click",me,!0),m.window.setTimeout(function(){m.window.removeEventListener("click",me,!0)},0)},G.mousePos=function(f,p){var h=f.getBoundingClientRect();return new m.Point(p.clientX-h.left-f.clientLeft,p.clientY-h.top-f.clientTop)},G.touchPos=function(f,p){for(var h=f.getBoundingClientRect(),v=[],S=0;S<p.length;S++)v.push(new m.Point(p[S].clientX-h.left-f.clientLeft,p[S].clientY-h.top-f.clientTop));return v},G.mouseButton=function(f){return void 0!==m.window.InstallTrigger&&2===f.button&&f.ctrlKey&&m.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:f.button},G.remove=function(f){f.parentNode&&f.parentNode.removeChild(f)};var _e=function(f){function p(){f.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new m.RGBAImage({width:1,height:1}),this.dirty=!0}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.isLoaded=function(){return this.loaded},p.prototype.setLoaded=function(h){if(this.loaded!==h&&(this.loaded=h,h)){for(var v=0,S=this.requestors;v<S.length;v+=1){var P=S[v];this._notify(P.ids,P.callback)}this.requestors=[]}},p.prototype.getImage=function(h){return this.images[h]},p.prototype.addImage=function(h,v){this._validate(h,v)&&(this.images[h]=v)},p.prototype._validate=function(h,v){var S=!0;return this._validateStretch(v.stretchX,v.data&&v.data.width)||(this.fire(new m.ErrorEvent(new Error('Image "'+h+'" has invalid "stretchX" value'))),S=!1),this._validateStretch(v.stretchY,v.data&&v.data.height)||(this.fire(new m.ErrorEvent(new Error('Image "'+h+'" has invalid "stretchY" value'))),S=!1),this._validateContent(v.content,v)||(this.fire(new m.ErrorEvent(new Error('Image "'+h+'" has invalid "content" value'))),S=!1),S},p.prototype._validateStretch=function(h,v){if(!h)return!0;for(var S=0,P=0,O=h;P<O.length;P+=1){var H=O[P];if(H[0]<S||H[1]<H[0]||v<H[1])return!1;S=H[1]}return!0},p.prototype._validateContent=function(h,v){return!(h&&(4!==h.length||h[0]<0||v.data.width<h[0]||h[1]<0||v.data.height<h[1]||h[2]<0||v.data.width<h[2]||h[3]<0||v.data.height<h[3]||h[2]<h[0]||h[3]<h[1]))},p.prototype.updateImage=function(h,v){v.version=this.images[h].version+1,this.images[h]=v,this.updatedImages[h]=!0},p.prototype.removeImage=function(h){var v=this.images[h];delete this.images[h],delete this.patterns[h],v.userImage&&v.userImage.onRemove&&v.userImage.onRemove()},p.prototype.listImages=function(){return Object.keys(this.images)},p.prototype.getImages=function(h,v){var S=!0;if(!this.isLoaded())for(var P=0,O=h;P<O.length;P+=1)this.images[O[P]]||(S=!1);this.isLoaded()||S?this._notify(h,v):this.requestors.push({ids:h,callback:v})},p.prototype._notify=function(h,v){for(var S={},P=0,O=h;P<O.length;P+=1){var H=O[P];this.images[H]||this.fire(new m.Event("styleimagemissing",{id:H}));var te=this.images[H];te?S[H]={data:te.data.clone(),pixelRatio:te.pixelRatio,sdf:te.sdf,version:te.version,stretchX:te.stretchX,stretchY:te.stretchY,content:te.content,hasRenderCallback:Boolean(te.userImage&&te.userImage.render)}:m.warnOnce('Image "'+H+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}v(null,S)},p.prototype.getPixelSize=function(){var h=this.atlasImage;return{width:h.width,height:h.height}},p.prototype.getPattern=function(h){var v=this.patterns[h],S=this.getImage(h);if(!S)return null;if(v&&v.position.version===S.version)return v.position;if(v)v.position.version=S.version;else{var P={w:S.data.width+2,h:S.data.height+2,x:0,y:0},O=new m.ImagePosition(P,S);this.patterns[h]={bin:P,position:O}}return this._updatePatternAtlas(),this.patterns[h].position},p.prototype.bind=function(h){var v=h.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new m.Texture(h,this.atlasImage,v.RGBA),this.atlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE)},p.prototype._updatePatternAtlas=function(){var h=[];for(var v in this.patterns)h.push(this.patterns[v].bin);var S=m.potpack(h),P=S.w,O=S.h,H=this.atlasImage;for(var te in H.resize({width:P||1,height:O||1}),this.patterns){var ae=this.patterns[te].bin,ge=ae.x+1,we=ae.y+1,ye=this.images[te].data,Le=ye.width,Re=ye.height;m.RGBAImage.copy(ye,H,{x:0,y:0},{x:ge,y:we},{width:Le,height:Re}),m.RGBAImage.copy(ye,H,{x:0,y:Re-1},{x:ge,y:we-1},{width:Le,height:1}),m.RGBAImage.copy(ye,H,{x:0,y:0},{x:ge,y:we+Re},{width:Le,height:1}),m.RGBAImage.copy(ye,H,{x:Le-1,y:0},{x:ge-1,y:we},{width:1,height:Re}),m.RGBAImage.copy(ye,H,{x:0,y:0},{x:ge+Le,y:we},{width:1,height:Re})}this.dirty=!0},p.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},p.prototype.dispatchRenderCallbacks=function(h){for(var v=0,S=h;v<S.length;v+=1){var P=S[v];if(!this.callbackDispatchedThisFrame[P]){this.callbackDispatchedThisFrame[P]=!0;var O=this.images[P];se(O)&&this.updateImage(P,O)}}},p}(m.Evented),Me=je,Ne=je,Ze=1e20;function je(f,p,h,v,S,P){this.fontSize=f||24,this.buffer=void 0===p?3:p,this.cutoff=v||.25,this.fontFamily=S||"sans-serif",this.fontWeight=P||"normal",this.radius=h||8;var O=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=O,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(O*O),this.gridInner=new Float64Array(O*O),this.f=new Float64Array(O),this.d=new Float64Array(O),this.z=new Float64Array(O+1),this.v=new Int16Array(O),this.middle=Math.round(O/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Ee(f,p,h,v,S,P,O){for(var H=0;H<p;H++){for(var te=0;te<h;te++)v[te]=f[te*p+H];for(Je(v,S,P,O,h),te=0;te<h;te++)f[te*p+H]=S[te]}for(te=0;te<h;te++){for(H=0;H<p;H++)v[H]=f[te*p+H];for(Je(v,S,P,O,p),H=0;H<p;H++)f[te*p+H]=Math.sqrt(S[H])}}function Je(f,p,h,v,S){h[0]=0,v[0]=-Ze,v[1]=+Ze;for(var P=1,O=0;P<S;P++){for(var H=(f[P]+P*P-(f[h[O]]+h[O]*h[O]))/(2*P-2*h[O]);H<=v[O];)O--,H=(f[P]+P*P-(f[h[O]]+h[O]*h[O]))/(2*P-2*h[O]);h[++O]=P,v[O]=H,v[O+1]=+Ze}for(P=0,O=0;P<S;P++){for(;v[O+1]<P;)O++;p[P]=(P-h[O])*(P-h[O])+f[h[O]]}}je.prototype.draw=function(f){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(f,this.buffer,this.middle);for(var p=this.ctx.getImageData(0,0,this.size,this.size),h=new Uint8ClampedArray(this.size*this.size),v=0;v<this.size*this.size;v++){var S=p.data[4*v+3]/255;this.gridOuter[v]=1===S?0:0===S?Ze:Math.pow(Math.max(0,.5-S),2),this.gridInner[v]=1===S?Ze:0===S?0:Math.pow(Math.max(0,S-.5),2)}for(Ee(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Ee(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),v=0;v<this.size*this.size;v++)h[v]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[v]-this.gridInner[v])/this.radius+this.cutoff))));return h},Me.default=Ne;var nt=function(f,p){this.requestManager=f,this.localIdeographFontFamily=p,this.entries={}};nt.prototype.setURL=function(f){this.url=f},nt.prototype.getGlyphs=function(f,p){var h=this,v=[];for(var S in f)for(var P=0,O=f[S];P<O.length;P+=1)v.push({stack:S,id:O[P]});m.asyncAll(v,function(H,te){var ae=H.stack,ge=H.id,we=h.entries[ae];we||(we=h.entries[ae]={glyphs:{},requests:{},ranges:{}});var ye=we.glyphs[ge];if(void 0===ye){if(ye=h._tinySDF(we,ae,ge))return we.glyphs[ge]=ye,void te(null,{stack:ae,id:ge,glyph:ye});var Le=Math.floor(ge/256);if(256*Le>65535)te(new Error("glyphs > 65535 not supported"));else if(we.ranges[Le])te(null,{stack:ae,id:ge,glyph:ye});else{var Re=we.requests[Le];Re||(Re=we.requests[Le]=[],nt.loadGlyphRange(ae,Le,h.url,h.requestManager,function(Ve,De){if(De){for(var ze in De)h._doesCharSupportLocalGlyph(+ze)||(we.glyphs[+ze]=De[+ze]);we.ranges[Le]=!0}for(var Ye=0,ot=Re;Ye<ot.length;Ye+=1)(0,ot[Ye])(Ve,De);delete we.requests[Le]})),Re.push(function(Ve,De){Ve?te(Ve):De&&te(null,{stack:ae,id:ge,glyph:De[ge]||null})})}}else te(null,{stack:ae,id:ge,glyph:ye})},function(H,te){if(H)p(H);else if(te){for(var ae={},ge=0,we=te;ge<we.length;ge+=1){var ye=we[ge],Le=ye.stack,Re=ye.id,Ve=ye.glyph;(ae[Le]||(ae[Le]={}))[Re]=Ve&&{id:Ve.id,bitmap:Ve.bitmap.clone(),metrics:Ve.metrics}}p(null,ae)}})},nt.prototype._doesCharSupportLocalGlyph=function(f){return!!this.localIdeographFontFamily&&(m.isChar["CJK Unified Ideographs"](f)||m.isChar["Hangul Syllables"](f)||m.isChar.Hiragana(f)||m.isChar.Katakana(f))},nt.prototype._tinySDF=function(f,p,h){var v=this.localIdeographFontFamily;if(v&&this._doesCharSupportLocalGlyph(h)){var S=f.tinySDF;if(!S){var P="400";/bold/i.test(p)?P="900":/medium/i.test(p)?P="500":/light/i.test(p)&&(P="200"),S=f.tinySDF=new nt.TinySDF(24,3,8,.25,v,P)}return{id:h,bitmap:new m.AlphaImage({width:30,height:30},S.draw(String.fromCharCode(h))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},nt.loadGlyphRange=function(f,p,h,v,S){var P=256*p,O=P+255,H=v.transformRequest(v.normalizeGlyphsURL(h).replace("{fontstack}",f).replace("{range}",P+"-"+O),m.ResourceType.Glyphs);m.getArrayBuffer(H,function(te,ae){if(te)S(te);else if(ae){for(var ge={},we=0,ye=m.parseGlyphPBF(ae);we<ye.length;we+=1){var Le=ye[we];ge[Le.id]=Le}S(null,ge)}})},nt.TinySDF=Me;var Ct=function(){this.specification=m.styleSpec.light.position};Ct.prototype.possiblyEvaluate=function(f,p){return m.sphericalToCartesian(f.expression.evaluate(p))},Ct.prototype.interpolate=function(f,p,h){return{x:m.number(f.x,p.x,h),y:m.number(f.y,p.y,h),z:m.number(f.z,p.z,h)}};var Ue=new m.Properties({anchor:new m.DataConstantProperty(m.styleSpec.light.anchor),position:new Ct,color:new m.DataConstantProperty(m.styleSpec.light.color),intensity:new m.DataConstantProperty(m.styleSpec.light.intensity)}),A=function(f){function p(h){f.call(this),this._transitionable=new m.Transitionable(Ue),this.setLight(h),this._transitioning=this._transitionable.untransitioned()}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getLight=function(){return this._transitionable.serialize()},p.prototype.setLight=function(h,v){if(void 0===v&&(v={}),!this._validate(m.validateLight,h,v))for(var S in h){var P=h[S];m.endsWith(S,"-transition")?this._transitionable.setTransition(S.slice(0,-11),P):this._transitionable.setValue(S,P)}},p.prototype.updateTransitions=function(h){this._transitioning=this._transitionable.transitioned(h,this._transitioning)},p.prototype.hasTransition=function(){return this._transitioning.hasTransition()},p.prototype.recalculate=function(h){this.properties=this._transitioning.possiblyEvaluate(h)},p.prototype._validate=function(h,v,S){return(!S||!1!==S.validate)&&m.emitValidationErrors(this,h.call(m.validateStyle,m.extend({value:v,style:{glyphs:!0,sprite:!0},styleSpec:m.styleSpec})))},p}(m.Evented),L=function(f,p){this.width=f,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};L.prototype.getDash=function(f,p){var h=f.join(",")+String(p);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(f,p)),this.dashEntry[h]},L.prototype.getDashRanges=function(f,p,h){var v=[],S=f.length%2==1?-f[f.length-1]*h:0,P=f[0]*h,O=!0;v.push({left:S,right:P,isDash:O,zeroLength:0===f[0]});for(var H=f[0],te=1;te<f.length;te++){var ae=f[te];v.push({left:S=H*h,right:P=(H+=ae)*h,isDash:O=!O,zeroLength:0===ae})}return v},L.prototype.addRoundDash=function(f,p,h){for(var v=p/2,S=-h;S<=h;S++)for(var P=this.width*(this.nextRow+h+S),O=0,H=f[O],te=0;te<this.width;te++){te/H.right>1&&(H=f[++O]);var ae=Math.abs(te-H.left),ge=Math.abs(te-H.right),we=Math.min(ae,ge),ye=void 0,Le=S/h*(v+1);if(H.isDash){var Re=v-Math.abs(Le);ye=Math.sqrt(we*we+Re*Re)}else ye=v-Math.sqrt(we*we+Le*Le);this.data[P+te]=Math.max(0,Math.min(255,ye+128))}},L.prototype.addRegularDash=function(f){for(var p=f.length-1;p>=0;--p){var h=f[p],v=f[p+1];h.zeroLength?f.splice(p,1):v&&v.isDash===h.isDash&&(v.left=h.left,f.splice(p,1))}var S=f[0],P=f[f.length-1];S.isDash===P.isDash&&(S.left=P.left-this.width,P.right=S.right+this.width);for(var O=this.width*this.nextRow,H=0,te=f[H],ae=0;ae<this.width;ae++){ae/te.right>1&&(te=f[++H]);var ge=Math.abs(ae-te.left),we=Math.abs(ae-te.right),ye=Math.min(ge,we);this.data[O+ae]=Math.max(0,Math.min(255,(te.isDash?ye:-ye)+128))}},L.prototype.addDash=function(f,p){var h=p?7:0,v=2*h+1;if(this.nextRow+v>this.height)return m.warnOnce("LineAtlas out of space"),null;for(var S=0,P=0;P<f.length;P++)S+=f[P];if(0!==S){var O=this.width/S,H=this.getDashRanges(f,this.width,O);p?this.addRoundDash(H,O,h):this.addRegularDash(H)}var te={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:S};return this.nextRow+=v,this.dirty=!0,te},L.prototype.bind=function(f){var p=f.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))};var B=function f(p,h){this.workerPool=p,this.actors=[],this.currentActor=0,this.id=m.uniqueId();for(var v=this.workerPool.acquire(this.id),S=0;S<v.length;S++){var P=new f.Actor(v[S],h,this.id);P.name="Worker "+S,this.actors.push(P)}};function j(f,p,h){var v=function(S,P){if(S)return h(S);if(P){var O=m.pick(m.extend(P,f),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);P.vector_layers&&(O.vectorLayers=P.vector_layers,O.vectorLayerIds=O.vectorLayers.map(function(H){return H.id})),O.tiles=p.canonicalizeTileset(O,f.url),h(null,O)}};return f.url?m.getJSON(p.transformRequest(p.normalizeSourceURL(f.url),m.ResourceType.Source),v):m.browser.frame(function(){return v(null,f)})}B.prototype.broadcast=function(f,p,h){m.asyncAll(this.actors,function(v,S){v.send(f,p,S)},h=h||function(){})},B.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},B.prototype.remove=function(){this.actors.forEach(function(f){f.remove()}),this.actors=[],this.workerPool.release(this.id)},B.Actor=m.Actor;var ee=function(f,p,h){this.bounds=m.LngLatBounds.convert(this.validateBounds(f)),this.minzoom=p||0,this.maxzoom=h||24};ee.prototype.validateBounds=function(f){return Array.isArray(f)&&4===f.length?[Math.max(-180,f[0]),Math.max(-90,f[1]),Math.min(180,f[2]),Math.min(90,f[3])]:[-180,-90,180,90]},ee.prototype.contains=function(f){var p=Math.pow(2,f.z),h=Math.floor(m.mercatorXfromLng(this.bounds.getWest())*p),v=Math.floor(m.mercatorYfromLat(this.bounds.getNorth())*p),S=Math.ceil(m.mercatorXfromLng(this.bounds.getEast())*p),P=Math.ceil(m.mercatorYfromLat(this.bounds.getSouth())*p);return f.x>=h&&f.x<S&&f.y>=v&&f.y<P};var W=function(f){function p(h,v,S,P){if(f.call(this),this.id=h,this.dispatcher=S,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,m.extend(this,m.pick(v,["url","scheme","tileSize","promoteId"])),this._options=m.extend({type:"vector"},v),this._collectResourceTiming=v.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(P)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.load=function(){var h=this;this._loaded=!1,this.fire(new m.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=j(this._options,this.map._requestManager,function(v,S){h._tileJSONRequest=null,h._loaded=!0,v?h.fire(new m.ErrorEvent(v)):S&&(m.extend(h,S),S.bounds&&(h.tileBounds=new ee(S.bounds,h.minzoom,h.maxzoom)),m.postTurnstileEvent(S.tiles,h.map._requestManager._customAccessToken),m.postMapLoadEvent(S.tiles,h.map._getMapId(),h.map._requestManager._skuToken,h.map._requestManager._customAccessToken),h.fire(new m.Event("data",{dataType:"source",sourceDataType:"metadata"})),h.fire(new m.Event("data",{dataType:"source",sourceDataType:"content"})))})},p.prototype.loaded=function(){return this._loaded},p.prototype.hasTile=function(h){return!this.tileBounds||this.tileBounds.contains(h.canonical)},p.prototype.onAdd=function(h){this.map=h,this.load()},p.prototype.setSourceProperty=function(h){this._tileJSONRequest&&this._tileJSONRequest.cancel(),h(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},p.prototype.setTiles=function(h){var v=this;return this.setSourceProperty(function(){v._options.tiles=h}),this},p.prototype.setUrl=function(h){var v=this;return this.setSourceProperty(function(){v.url=h,v._options.url=h}),this},p.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},p.prototype.serialize=function(){return m.extend({},this._options)},p.prototype.loadTile=function(h,v){var S=this.map._requestManager.normalizeTileURL(h.tileID.canonical.url(this.tiles,this.scheme)),P={request:this.map._requestManager.transformRequest(S,m.ResourceType.Tile),uid:h.uid,tileID:h.tileID,zoom:h.tileID.overscaledZ,tileSize:this.tileSize*h.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:m.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function O(H,te){return delete h.request,h.aborted?v(null):H&&404!==H.status?v(H):(te&&te.resourceTiming&&(h.resourceTiming=te.resourceTiming),this.map._refreshExpiredTiles&&te&&h.setExpiryData(te),h.loadVectorData(te,this.map.painter),m.cacheEntryPossiblyAdded(this.dispatcher),v(null),void(h.reloadCallback&&(this.loadTile(h,h.reloadCallback),h.reloadCallback=null)))}P.request.collectResourceTiming=this._collectResourceTiming,h.actor&&"expired"!==h.state?"loading"===h.state?h.reloadCallback=v:h.request=h.actor.send("reloadTile",P,O.bind(this)):(h.actor=this.dispatcher.getActor(),h.request=h.actor.send("loadTile",P,O.bind(this)))},p.prototype.abortTile=function(h){h.request&&(h.request.cancel(),delete h.request),h.actor&&h.actor.send("abortTile",{uid:h.uid,type:this.type,source:this.id},void 0)},p.prototype.unloadTile=function(h){h.unloadVectorData(),h.actor&&h.actor.send("removeTile",{uid:h.uid,type:this.type,source:this.id},void 0)},p.prototype.hasTransition=function(){return!1},p}(m.Evented),ce=function(f){function p(h,v,S,P){f.call(this),this.id=h,this.dispatcher=S,this.setEventedParent(P),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=m.extend({type:"raster"},v),m.extend(this,m.pick(v,["url","scheme","tileSize"]))}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.load=function(){var h=this;this._loaded=!1,this.fire(new m.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=j(this._options,this.map._requestManager,function(v,S){h._tileJSONRequest=null,h._loaded=!0,v?h.fire(new m.ErrorEvent(v)):S&&(m.extend(h,S),S.bounds&&(h.tileBounds=new ee(S.bounds,h.minzoom,h.maxzoom)),m.postTurnstileEvent(S.tiles),m.postMapLoadEvent(S.tiles,h.map._getMapId(),h.map._requestManager._skuToken),h.fire(new m.Event("data",{dataType:"source",sourceDataType:"metadata"})),h.fire(new m.Event("data",{dataType:"source",sourceDataType:"content"})))})},p.prototype.loaded=function(){return this._loaded},p.prototype.onAdd=function(h){this.map=h,this.load()},p.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},p.prototype.serialize=function(){return m.extend({},this._options)},p.prototype.hasTile=function(h){return!this.tileBounds||this.tileBounds.contains(h.canonical)},p.prototype.loadTile=function(h,v){var S=this,P=this.map._requestManager.normalizeTileURL(h.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);h.request=m.getImage(this.map._requestManager.transformRequest(P,m.ResourceType.Tile),function(O,H){if(delete h.request,h.aborted)h.state="unloaded",v(null);else if(O)h.state="errored",v(O);else if(H){S.map._refreshExpiredTiles&&h.setExpiryData(H),delete H.cacheControl,delete H.expires;var te=S.map.painter.context,ae=te.gl;h.texture=S.map.painter.getTileTexture(H.width),h.texture?h.texture.update(H,{useMipmap:!0}):(h.texture=new m.Texture(te,H,ae.RGBA,{useMipmap:!0}),h.texture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE,ae.LINEAR_MIPMAP_NEAREST),te.extTextureFilterAnisotropic&&ae.texParameterf(ae.TEXTURE_2D,te.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,te.extTextureFilterAnisotropicMax)),h.state="loaded",m.cacheEntryPossiblyAdded(S.dispatcher),v(null)}})},p.prototype.abortTile=function(h,v){h.request&&(h.request.cancel(),delete h.request),v()},p.prototype.unloadTile=function(h,v){h.texture&&this.map.painter.saveTileTexture(h.texture),v()},p.prototype.hasTransition=function(){return!1},p}(m.Evented),We=function(f){function p(h,v,S,P){f.call(this,h,v,S,P),this.type="raster-dem",this.maxzoom=22,this._options=m.extend({type:"raster-dem"},v),this.encoding=v.encoding||"mapbox"}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},p.prototype.loadTile=function(h,v){var S=this.map._requestManager.normalizeTileURL(h.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function P(O,H){O&&(h.state="errored",v(O)),H&&(h.dem=H,h.needsHillshadePrepare=!0,h.state="loaded",v(null))}h.request=m.getImage(this.map._requestManager.transformRequest(S,m.ResourceType.Tile),function(O,H){if(delete h.request,h.aborted)h.state="unloaded",v(null);else if(O)h.state="errored",v(O);else if(H){this.map._refreshExpiredTiles&&h.setExpiryData(H),delete H.cacheControl,delete H.expires;var te=m.window.ImageBitmap&&H instanceof m.window.ImageBitmap&&m.offscreenCanvasSupported()?H:m.browser.getImageData(H,1),ae={uid:h.uid,coord:h.tileID,source:this.id,rawImageData:te,encoding:this.encoding};h.actor&&"expired"!==h.state||(h.actor=this.dispatcher.getActor(),h.actor.send("loadDEMTile",ae,P.bind(this)))}}.bind(this)),h.neighboringTiles=this._getNeighboringTiles(h.tileID)},p.prototype._getNeighboringTiles=function(h){var v=h.canonical,S=Math.pow(2,v.z),P=(v.x-1+S)%S,O=0===v.x?h.wrap-1:h.wrap,H=(v.x+1+S)%S,te=v.x+1===S?h.wrap+1:h.wrap,ae={};return ae[new m.OverscaledTileID(h.overscaledZ,O,v.z,P,v.y).key]={backfilled:!1},ae[new m.OverscaledTileID(h.overscaledZ,te,v.z,H,v.y).key]={backfilled:!1},v.y>0&&(ae[new m.OverscaledTileID(h.overscaledZ,O,v.z,P,v.y-1).key]={backfilled:!1},ae[new m.OverscaledTileID(h.overscaledZ,h.wrap,v.z,v.x,v.y-1).key]={backfilled:!1},ae[new m.OverscaledTileID(h.overscaledZ,te,v.z,H,v.y-1).key]={backfilled:!1}),v.y+1<S&&(ae[new m.OverscaledTileID(h.overscaledZ,O,v.z,P,v.y+1).key]={backfilled:!1},ae[new m.OverscaledTileID(h.overscaledZ,h.wrap,v.z,v.x,v.y+1).key]={backfilled:!1},ae[new m.OverscaledTileID(h.overscaledZ,te,v.z,H,v.y+1).key]={backfilled:!1}),ae},p.prototype.unloadTile=function(h){h.demTexture&&this.map.painter.saveTileTexture(h.demTexture),h.fbo&&(h.fbo.destroy(),delete h.fbo),h.dem&&delete h.dem,delete h.neighboringTiles,h.state="unloaded",h.actor&&h.actor.send("removeDEMTile",{uid:h.uid,source:this.id})},p}(ce),ut=function(f){function p(h,v,S,P){f.call(this),this.id=h,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=S.getActor(),this.setEventedParent(P),this._data=v.data,this._options=m.extend({},v),this._collectResourceTiming=v.collectResourceTiming,this._resourceTiming=[],void 0!==v.maxzoom&&(this.maxzoom=v.maxzoom),v.type&&(this.type=v.type),v.attribution&&(this.attribution=v.attribution),this.promoteId=v.promoteId;var O=m.EXTENT/this.tileSize;this.workerOptions=m.extend({source:this.id,cluster:v.cluster||!1,geojsonVtOptions:{buffer:(void 0!==v.buffer?v.buffer:128)*O,tolerance:(void 0!==v.tolerance?v.tolerance:.375)*O,extent:m.EXTENT,maxZoom:this.maxzoom,lineMetrics:v.lineMetrics||!1,generateId:v.generateId||!1},superclusterOptions:{maxZoom:void 0!==v.clusterMaxZoom?Math.min(v.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,v.clusterMinPoints||2),extent:m.EXTENT,radius:(v.clusterRadius||50)*O,log:!1,generateId:v.generateId||!1},clusterProperties:v.clusterProperties,filter:v.filter},v.workerOptions)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.load=function(){var h=this;this.fire(new m.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(v){if(v)h.fire(new m.ErrorEvent(v));else{var S={dataType:"source",sourceDataType:"metadata"};h._collectResourceTiming&&h._resourceTiming&&h._resourceTiming.length>0&&(S.resourceTiming=h._resourceTiming,h._resourceTiming=[]),h.fire(new m.Event("data",S))}})},p.prototype.onAdd=function(h){this.map=h,this.load()},p.prototype.setData=function(h){var v=this;return this._data=h,this.fire(new m.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(S){if(S)v.fire(new m.ErrorEvent(S));else{var P={dataType:"source",sourceDataType:"content"};v._collectResourceTiming&&v._resourceTiming&&v._resourceTiming.length>0&&(P.resourceTiming=v._resourceTiming,v._resourceTiming=[]),v.fire(new m.Event("data",P))}}),this},p.prototype.getClusterExpansionZoom=function(h,v){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:h,source:this.id},v),this},p.prototype.getClusterChildren=function(h,v){return this.actor.send("geojson.getClusterChildren",{clusterId:h,source:this.id},v),this},p.prototype.getClusterLeaves=function(h,v,S,P){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:h,limit:v,offset:S},P),this},p.prototype._updateWorkerData=function(h){var v=this;this._loaded=!1;var S=m.extend({},this.workerOptions),P=this._data;"string"==typeof P?(S.request=this.map._requestManager.transformRequest(m.browser.resolveURL(P),m.ResourceType.Source),S.request.collectResourceTiming=this._collectResourceTiming):S.data=JSON.stringify(P),this.actor.send(this.type+".loadData",S,function(O,H){v._removed||H&&H.abandoned||(v._loaded=!0,H&&H.resourceTiming&&H.resourceTiming[v.id]&&(v._resourceTiming=H.resourceTiming[v.id].slice(0)),v.actor.send(v.type+".coalesce",{source:S.source},null),h(O))})},p.prototype.loaded=function(){return this._loaded},p.prototype.loadTile=function(h,v){var S=this,P=h.actor?"reloadTile":"loadTile";h.actor=this.actor,h.request=this.actor.send(P,{type:this.type,uid:h.uid,tileID:h.tileID,zoom:h.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:m.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(O,H){return delete h.request,h.unloadVectorData(),h.aborted?v(null):O?v(O):(h.loadVectorData(H,S.map.painter,"reloadTile"===P),v(null))})},p.prototype.abortTile=function(h){h.request&&(h.request.cancel(),delete h.request),h.aborted=!0},p.prototype.unloadTile=function(h){h.unloadVectorData(),this.actor.send("removeTile",{uid:h.uid,type:this.type,source:this.id})},p.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},p.prototype.serialize=function(){return m.extend({},this._options,{type:this.type,data:this._data})},p.prototype.hasTransition=function(){return!1},p}(m.Evented),be=m.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),wt=function(f){function p(h,v,S,P){f.call(this),this.id=h,this.dispatcher=S,this.coordinates=v.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(P),this.options=v}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.load=function(h,v){var S=this;this._loaded=!1,this.fire(new m.Event("dataloading",{dataType:"source"})),this.url=this.options.url,m.getImage(this.map._requestManager.transformRequest(this.url,m.ResourceType.Image),function(P,O){S._loaded=!0,P?S.fire(new m.ErrorEvent(P)):O&&(S.image=O,h&&(S.coordinates=h),v&&v(),S._finishLoading())})},p.prototype.loaded=function(){return this._loaded},p.prototype.updateImage=function(h){var v=this;return this.image&&h.url?(this.options.url=h.url,this.load(h.coordinates,function(){v.texture=null}),this):this},p.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new m.Event("data",{dataType:"source",sourceDataType:"metadata"})))},p.prototype.onAdd=function(h){this.map=h,this.load()},p.prototype.setCoordinates=function(h){var v=this;this.coordinates=h;var S=h.map(m.MercatorCoordinate.fromLngLat);this.tileID=function(O){for(var H=1/0,te=1/0,ae=-1/0,ge=-1/0,we=0,ye=O;we<ye.length;we+=1){var Le=ye[we];H=Math.min(H,Le.x),te=Math.min(te,Le.y),ae=Math.max(ae,Le.x),ge=Math.max(ge,Le.y)}var Re=Math.max(ae-H,ge-te),Ve=Math.max(0,Math.floor(-Math.log(Re)/Math.LN2)),De=Math.pow(2,Ve);return new m.CanonicalTileID(Ve,Math.floor((H+ae)/2*De),Math.floor((te+ge)/2*De))}(S),this.minzoom=this.maxzoom=this.tileID.z;var P=S.map(function(O){return v.tileID.getTilePoint(O)._round()});return this._boundsArray=new m.StructArrayLayout4i8,this._boundsArray.emplaceBack(P[0].x,P[0].y,0,0),this._boundsArray.emplaceBack(P[1].x,P[1].y,m.EXTENT,0),this._boundsArray.emplaceBack(P[3].x,P[3].y,0,m.EXTENT),this._boundsArray.emplaceBack(P[2].x,P[2].y,m.EXTENT,m.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new m.Event("data",{dataType:"source",sourceDataType:"content"})),this},p.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var h=this.map.painter.context,v=h.gl;for(var S in this.boundsBuffer||(this.boundsBuffer=h.createVertexBuffer(this._boundsArray,be.members)),this.boundsSegments||(this.boundsSegments=m.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new m.Texture(h,this.image,v.RGBA),this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE)),this.tiles){var P=this.tiles[S];"loaded"!==P.state&&(P.state="loaded",P.texture=this.texture)}}},p.prototype.loadTile=function(h,v){this.tileID&&this.tileID.equals(h.tileID.canonical)?(this.tiles[String(h.tileID.wrap)]=h,h.buckets={},v(null)):(h.state="errored",v(null))},p.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},p.prototype.hasTransition=function(){return!1},p}(m.Evented),bt=function(f){function p(h,v,S,P){f.call(this,h,v,S,P),this.roundZoom=!0,this.type="video",this.options=v}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.load=function(){var h=this;this._loaded=!1;var v=this.options;this.urls=[];for(var S=0,P=v.urls;S<P.length;S+=1)this.urls.push(this.map._requestManager.transformRequest(P[S],m.ResourceType.Source).url);m.getVideo(this.urls,function(O,H){h._loaded=!0,O?h.fire(new m.ErrorEvent(O)):H&&(h.video=H,h.video.loop=!0,h.video.addEventListener("playing",function(){h.map.triggerRepaint()}),h.map&&h.video.play(),h._finishLoading())})},p.prototype.pause=function(){this.video&&this.video.pause()},p.prototype.play=function(){this.video&&this.video.play()},p.prototype.seek=function(h){if(this.video){var v=this.video.seekable;h<v.start(0)||h>v.end(0)?this.fire(new m.ErrorEvent(new m.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+v.start(0)+" and "+v.end(0)+"-second mark."))):this.video.currentTime=h}},p.prototype.getVideo=function(){return this.video},p.prototype.onAdd=function(h){this.map||(this.map=h,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},p.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var h=this.map.painter.context,v=h.gl;for(var S in this.boundsBuffer||(this.boundsBuffer=h.createVertexBuffer(this._boundsArray,be.members)),this.boundsSegments||(this.boundsSegments=m.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE),v.texSubImage2D(v.TEXTURE_2D,0,0,0,v.RGBA,v.UNSIGNED_BYTE,this.video)):(this.texture=new m.Texture(h,this.video,v.RGBA),this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE)),this.tiles){var P=this.tiles[S];"loaded"!==P.state&&(P.state="loaded",P.texture=this.texture)}}},p.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},p.prototype.hasTransition=function(){return this.video&&!this.video.paused},p}(wt),Ke=function(f){function p(h,v,S,P){f.call(this,h,v,S,P),v.coordinates?Array.isArray(v.coordinates)&&4===v.coordinates.length&&!v.coordinates.some(function(O){return!Array.isArray(O)||2!==O.length||O.some(function(H){return"number"!=typeof H})})||this.fire(new m.ErrorEvent(new m.ValidationError("sources."+h,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new m.ErrorEvent(new m.ValidationError("sources."+h,null,'missing required property "coordinates"'))),v.animate&&"boolean"!=typeof v.animate&&this.fire(new m.ErrorEvent(new m.ValidationError("sources."+h,null,'optional "animate" property must be a boolean value'))),v.canvas?"string"==typeof v.canvas||v.canvas instanceof m.window.HTMLCanvasElement||this.fire(new m.ErrorEvent(new m.ValidationError("sources."+h,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new m.ErrorEvent(new m.ValidationError("sources."+h,null,'missing required property "canvas"'))),this.options=v,this.animate=void 0===v.animate||v.animate}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof m.window.HTMLCanvasElement?this.options.canvas:m.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new m.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},p.prototype.getCanvas=function(){return this.canvas},p.prototype.onAdd=function(h){this.map=h,this.load(),this.canvas&&this.animate&&this.play()},p.prototype.onRemove=function(){this.pause()},p.prototype.prepare=function(){var h=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,h=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,h=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var v=this.map.painter.context,S=v.gl;for(var P in this.boundsBuffer||(this.boundsBuffer=v.createVertexBuffer(this._boundsArray,be.members)),this.boundsSegments||(this.boundsSegments=m.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(h||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new m.Texture(v,this.canvas,S.RGBA,{premultiply:!0}),this.tiles){var O=this.tiles[P];"loaded"!==O.state&&(O.state="loaded",O.texture=this.texture)}}},p.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},p.prototype.hasTransition=function(){return this._playing},p.prototype._hasInvalidDimensions=function(){for(var h=0,v=[this.canvas.width,this.canvas.height];h<v.length;h+=1){var S=v[h];if(isNaN(S)||S<=0)return!0}return!1},p}(wt),xt={vector:W,raster:ce,"raster-dem":We,geojson:ut,video:bt,image:wt,canvas:Ke};function vn(f,p){var h=m.identity([]);return m.translate(h,h,[1,1,0]),m.scale(h,h,[.5*f.width,.5*f.height,1]),m.multiply(h,h,f.calculatePosMatrix(p.toUnwrapped()))}function zt(f,p,h,v,S,P){var O=function(Ve,De,ze){if(Ve)for(var Ye=0,ot=Ve;Ye<ot.length;Ye+=1){var yt=De[ot[Ye]];if(yt&&yt.source===ze&&"fill-extrusion"===yt.type)return!0}else for(var gt in De){var vt=De[gt];if(vt.source===ze&&"fill-extrusion"===vt.type)return!0}return!1}(S&&S.layers,p,f.id),H=P.maxPitchScaleFactor(),te=f.tilesIn(v,H,O);te.sort(Sn);for(var ae=[],ge=0,we=te;ge<we.length;ge+=1){var ye=we[ge];ae.push({wrappedTileID:ye.tileID.wrapped().key,queryResults:ye.tile.queryRenderedFeatures(p,h,f._state,ye.queryGeometry,ye.cameraQueryGeometry,ye.scale,S,P,H,vn(f.transform,ye.tileID))})}var Le=function(Ve){for(var De={},ze={},Ye=0,ot=Ve;Ye<ot.length;Ye+=1){var yt=ot[Ye],gt=yt.queryResults,vt=yt.wrappedTileID,Tt=ze[vt]=ze[vt]||{};for(var Gt in gt)for(var Bt=gt[Gt],$t=Tt[Gt]=Tt[Gt]||{},wn=De[Gt]=De[Gt]||[],rn=0,Rn=Bt;rn<Rn.length;rn+=1){var jr=Rn[rn];$t[jr.featureIndex]||($t[jr.featureIndex]=!0,wn.push(jr))}}return De}(ae);for(var Re in Le)Le[Re].forEach(function(Ve){var De=Ve.feature,ze=f.getFeatureState(De.layer["source-layer"],De.id);De.source=De.layer.source,De.layer["source-layer"]&&(De.sourceLayer=De.layer["source-layer"]),De.state=ze});return Le}function Sn(f,p){var h=f.tileID,v=p.tileID;return h.overscaledZ-v.overscaledZ||h.canonical.y-v.canonical.y||h.wrap-v.wrap||h.canonical.x-v.canonical.x}var It=function(f,p){this.max=f,this.onRemove=p,this.reset()};It.prototype.reset=function(){for(var f in this.data)for(var p=0,h=this.data[f];p<h.length;p+=1){var v=h[p];v.timeout&&clearTimeout(v.timeout),this.onRemove(v.value)}return this.data={},this.order=[],this},It.prototype.add=function(f,p,h){var v=this,S=f.wrapped().key;void 0===this.data[S]&&(this.data[S]=[]);var P={value:p,timeout:void 0};if(void 0!==h&&(P.timeout=setTimeout(function(){v.remove(f,P)},h)),this.data[S].push(P),this.order.push(S),this.order.length>this.max){var O=this._getAndRemoveByKey(this.order[0]);O&&this.onRemove(O)}return this},It.prototype.has=function(f){return f.wrapped().key in this.data},It.prototype.getAndRemove=function(f){return this.has(f)?this._getAndRemoveByKey(f.wrapped().key):null},It.prototype._getAndRemoveByKey=function(f){var p=this.data[f].shift();return p.timeout&&clearTimeout(p.timeout),0===this.data[f].length&&delete this.data[f],this.order.splice(this.order.indexOf(f),1),p.value},It.prototype.getByKey=function(f){var p=this.data[f];return p?p[0].value:null},It.prototype.get=function(f){return this.has(f)?this.data[f.wrapped().key][0].value:null},It.prototype.remove=function(f,p){if(!this.has(f))return this;var h=f.wrapped().key,v=void 0===p?0:this.data[h].indexOf(p),S=this.data[h][v];return this.data[h].splice(v,1),S.timeout&&clearTimeout(S.timeout),0===this.data[h].length&&delete this.data[h],this.onRemove(S.value),this.order.splice(this.order.indexOf(h),1),this},It.prototype.setMaxSize=function(f){for(this.max=f;this.order.length>this.max;){var p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this},It.prototype.filter=function(f){var p=[];for(var h in this.data)for(var v=0,S=this.data[h];v<S.length;v+=1){var P=S[v];f(P.value)||p.push(P)}for(var O=0,H=p;O<H.length;O+=1){var te=H[O];this.remove(te.value.tileID,te)}};var Cn=function(f,p,h){this.context=f;var v=f.gl;this.buffer=v.createBuffer(),this.dynamicDraw=Boolean(h),this.context.unbindVAO(),f.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer};Cn.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Cn.prototype.updateData=function(f){var p=this.context.gl;this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,f.arrayBuffer)},Cn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var En={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Zn=function(f,p,h,v){this.length=p.length,this.attributes=h,this.itemSize=p.bytesPerElement,this.dynamicDraw=v,this.context=f;var S=f.gl;this.buffer=S.createBuffer(),f.bindVertexBuffer.set(this.buffer),S.bufferData(S.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer};Zn.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Zn.prototype.updateData=function(f){var p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,f.arrayBuffer)},Zn.prototype.enableAttributes=function(f,p){for(var h=0;h<this.attributes.length;h++){var v=p.attributes[this.attributes[h].name];void 0!==v&&f.enableVertexAttribArray(v)}},Zn.prototype.setVertexAttribPointers=function(f,p,h){for(var v=0;v<this.attributes.length;v++){var S=this.attributes[v],P=p.attributes[S.name];void 0!==P&&f.vertexAttribPointer(P,S.components,f[En[S.type]],!1,this.itemSize,S.offset+this.itemSize*(h||0))}},Zn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Wt=function(f){this.gl=f.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Wt.prototype.get=function(){return this.current},Wt.prototype.set=function(f){},Wt.prototype.getDefault=function(){return this.default},Wt.prototype.setDefault=function(){this.set(this.default)};var Ce=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return m.Color.transparent},p.prototype.set=function(h){var v=this.current;(h.r!==v.r||h.g!==v.g||h.b!==v.b||h.a!==v.a||this.dirty)&&(this.gl.clearColor(h.r,h.g,h.b,h.a),this.current=h,this.dirty=!1)},p}(Wt),Gn=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return 1},p.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.clearDepth(h),this.current=h,this.dirty=!1)},p}(Wt),ir=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return 0},p.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.clearStencil(h),this.current=h,this.dirty=!1)},p}(Wt),hi=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return[!0,!0,!0,!0]},p.prototype.set=function(h){var v=this.current;(h[0]!==v[0]||h[1]!==v[1]||h[2]!==v[2]||h[3]!==v[3]||this.dirty)&&(this.gl.colorMask(h[0],h[1],h[2],h[3]),this.current=h,this.dirty=!1)},p}(Wt),Gi=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return!0},p.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.depthMask(h),this.current=h,this.dirty=!1)},p}(Wt),qt=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return 255},p.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.stencilMask(h),this.current=h,this.dirty=!1)},p}(Wt),Ot=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},p.prototype.set=function(h){var v=this.current;(h.func!==v.func||h.ref!==v.ref||h.mask!==v.mask||this.dirty)&&(this.gl.stencilFunc(h.func,h.ref,h.mask),this.current=h,this.dirty=!1)},p}(Wt),za=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){var h=this.gl;return[h.KEEP,h.KEEP,h.KEEP]},p.prototype.set=function(h){var v=this.current;(h[0]!==v[0]||h[1]!==v[1]||h[2]!==v[2]||this.dirty)&&(this.gl.stencilOp(h[0],h[1],h[2]),this.current=h,this.dirty=!1)},p}(Wt),wa=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;h?v.enable(v.STENCIL_TEST):v.disable(v.STENCIL_TEST),this.current=h,this.dirty=!1}},p}(Wt),li=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return[0,1]},p.prototype.set=function(h){var v=this.current;(h[0]!==v[0]||h[1]!==v[1]||this.dirty)&&(this.gl.depthRange(h[0],h[1]),this.current=h,this.dirty=!1)},p}(Wt),qr=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;h?v.enable(v.DEPTH_TEST):v.disable(v.DEPTH_TEST),this.current=h,this.dirty=!1}},p}(Wt),Ys=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.LESS},p.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.depthFunc(h),this.current=h,this.dirty=!1)},p}(Wt),Qa=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;h?v.enable(v.BLEND):v.disable(v.BLEND),this.current=h,this.dirty=!1}},p}(Wt),Mo=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){var h=this.gl;return[h.ONE,h.ZERO]},p.prototype.set=function(h){var v=this.current;(h[0]!==v[0]||h[1]!==v[1]||this.dirty)&&(this.gl.blendFunc(h[0],h[1]),this.current=h,this.dirty=!1)},p}(Wt),Ba=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return m.Color.transparent},p.prototype.set=function(h){var v=this.current;(h.r!==v.r||h.g!==v.g||h.b!==v.b||h.a!==v.a||this.dirty)&&(this.gl.blendColor(h.r,h.g,h.b,h.a),this.current=h,this.dirty=!1)},p}(Wt),fs=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.FUNC_ADD},p.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.blendEquation(h),this.current=h,this.dirty=!1)},p}(Wt),io=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;h?v.enable(v.CULL_FACE):v.disable(v.CULL_FACE),this.current=h,this.dirty=!1}},p}(Wt),xa=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.BACK},p.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.cullFace(h),this.current=h,this.dirty=!1)},p}(Wt),oo=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.CCW},p.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.frontFace(h),this.current=h,this.dirty=!1)},p}(Wt),wo=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.useProgram(h),this.current=h,this.dirty=!1)},p}(Wt),Ml=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.TEXTURE0},p.prototype.set=function(h){(h!==this.current||this.dirty)&&(this.gl.activeTexture(h),this.current=h,this.dirty=!1)},p}(Wt),Es=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){var h=this.gl;return[0,0,h.drawingBufferWidth,h.drawingBufferHeight]},p.prototype.set=function(h){var v=this.current;(h[0]!==v[0]||h[1]!==v[1]||h[2]!==v[2]||h[3]!==v[3]||this.dirty)&&(this.gl.viewport(h[0],h[1],h[2],h[3]),this.current=h,this.dirty=!1)},p}(Wt),xo=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;v.bindFramebuffer(v.FRAMEBUFFER,h),this.current=h,this.dirty=!1}},p}(Wt),ur=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;v.bindRenderbuffer(v.RENDERBUFFER,h),this.current=h,this.dirty=!1}},p}(Wt),Ol=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;v.bindTexture(v.TEXTURE_2D,h),this.current=h,this.dirty=!1}},p}(Wt),pl=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;v.bindBuffer(v.ARRAY_BUFFER,h),this.current=h,this.dirty=!1}},p}(Wt),Bs=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(h){var v=this.gl;v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,h),this.current=h,this.dirty=!1},p}(Wt),Oo=function(f){function p(h){f.call(this,h),this.vao=h.extVertexArrayObject}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(h){this.vao&&(h!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(h),this.current=h,this.dirty=!1)},p}(Wt),hs=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return 4},p.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;v.pixelStorei(v.UNPACK_ALIGNMENT,h),this.current=h,this.dirty=!1}},p}(Wt),Kr=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h),this.current=h,this.dirty=!1}},p}(Wt),Xs=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(h){if(h!==this.current||this.dirty){var v=this.gl;v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,h),this.current=h,this.dirty=!1}},p}(Wt),zr=function(f){function p(h,v){f.call(this,h),this.context=h,this.parent=v}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p}(Wt),oe=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.setDirty=function(){this.dirty=!0},p.prototype.set=function(h){if(h!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var v=this.gl;v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,h,0),this.current=h,this.dirty=!1}},p}(zr),le=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.set=function(h){if(h!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var v=this.gl;v.framebufferRenderbuffer(v.FRAMEBUFFER,v.DEPTH_ATTACHMENT,v.RENDERBUFFER,h),this.current=h,this.dirty=!1}},p}(zr),fe=function(f,p,h,v){this.context=f,this.width=p,this.height=h;var S=this.framebuffer=f.gl.createFramebuffer();this.colorAttachment=new oe(f,S),v&&(this.depthAttachment=new le(f,S))};fe.prototype.destroy=function(){var f=this.context.gl,p=this.colorAttachment.get();if(p&&f.deleteTexture(p),this.depthAttachment){var h=this.depthAttachment.get();h&&f.deleteRenderbuffer(h)}f.deleteFramebuffer(this.framebuffer)};var ve=function(f,p,h){this.func=f,this.mask=p,this.range=h};ve.ReadOnly=!1,ve.ReadWrite=!0,ve.disabled=new ve(519,ve.ReadOnly,[0,1]);var Te=function(f,p,h,v,S,P){this.test=f,this.ref=p,this.mask=h,this.fail=v,this.depthFail=S,this.pass=P};Te.disabled=new Te({func:519,mask:0},0,0,7680,7680,7680);var $e=function(f,p,h){this.blendFunction=f,this.blendColor=p,this.mask=h};$e.disabled=new $e($e.Replace=[1,0],m.Color.transparent,[!1,!1,!1,!1]),$e.unblended=new $e($e.Replace,m.Color.transparent,[!0,!0,!0,!0]),$e.alphaBlended=new $e([1,771],m.Color.transparent,[!0,!0,!0,!0]);var Xe=function(f,p,h){this.enable=f,this.mode=p,this.frontFace=h};Xe.disabled=new Xe(!1,1029,2305),Xe.backCCW=new Xe(!0,1029,2305);var He=function(f){this.gl=f,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ce(this),this.clearDepth=new Gn(this),this.clearStencil=new ir(this),this.colorMask=new hi(this),this.depthMask=new Gi(this),this.stencilMask=new qt(this),this.stencilFunc=new Ot(this),this.stencilOp=new za(this),this.stencilTest=new wa(this),this.depthRange=new li(this),this.depthTest=new qr(this),this.depthFunc=new Ys(this),this.blend=new Qa(this),this.blendFunc=new Mo(this),this.blendColor=new Ba(this),this.blendEquation=new fs(this),this.cullFace=new io(this),this.cullFaceSide=new xa(this),this.frontFace=new oo(this),this.program=new wo(this),this.activeTexture=new Ml(this),this.viewport=new Es(this),this.bindFramebuffer=new xo(this),this.bindRenderbuffer=new ur(this),this.bindTexture=new Ol(this),this.bindVertexBuffer=new pl(this),this.bindElementBuffer=new Bs(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Oo(this),this.pixelStoreUnpack=new hs(this),this.pixelStoreUnpackPremultiplyAlpha=new Kr(this),this.pixelStoreUnpackFlipY=new Xs(this),this.extTextureFilterAnisotropic=f.getExtension("EXT_texture_filter_anisotropic")||f.getExtension("MOZ_EXT_texture_filter_anisotropic")||f.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=f.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=f.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(f.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=f.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=f.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=f.getParameter(f.MAX_TEXTURE_SIZE)};He.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},He.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},He.prototype.createIndexBuffer=function(f,p){return new Cn(this,f,p)},He.prototype.createVertexBuffer=function(f,p,h){return new Zn(this,f,p,h)},He.prototype.createRenderbuffer=function(f,p,h){var v=this.gl,S=v.createRenderbuffer();return this.bindRenderbuffer.set(S),v.renderbufferStorage(v.RENDERBUFFER,f,p,h),this.bindRenderbuffer.set(null),S},He.prototype.createFramebuffer=function(f,p,h){return new fe(this,f,p,h)},He.prototype.clear=function(f){var p=f.color,h=f.depth,v=this.gl,S=0;p&&(S|=v.COLOR_BUFFER_BIT,this.clearColor.set(p),this.colorMask.set([!0,!0,!0,!0])),void 0!==h&&(S|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),v.clear(S)},He.prototype.setCullFace=function(f){!1===f.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(f.mode),this.frontFace.set(f.frontFace))},He.prototype.setDepthMode=function(f){f.func!==this.gl.ALWAYS||f.mask?(this.depthTest.set(!0),this.depthFunc.set(f.func),this.depthMask.set(f.mask),this.depthRange.set(f.range)):this.depthTest.set(!1)},He.prototype.setStencilMode=function(f){f.test.func!==this.gl.ALWAYS||f.mask?(this.stencilTest.set(!0),this.stencilMask.set(f.mask),this.stencilOp.set([f.fail,f.depthFail,f.pass]),this.stencilFunc.set({func:f.test.func,ref:f.ref,mask:f.test.mask})):this.stencilTest.set(!1)},He.prototype.setColorMode=function(f){m.deepEqual(f.blendFunction,$e.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(f.blendFunction),this.blendColor.set(f.blendColor)),this.colorMask.set(f.mask)},He.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var xe=function(f){function p(h,v,S){var P=this;f.call(this),this.id=h,this.dispatcher=S,this.on("data",function(O){"source"===O.dataType&&"metadata"===O.sourceDataType&&(P._sourceLoaded=!0),P._sourceLoaded&&!P._paused&&"source"===O.dataType&&"content"===O.sourceDataType&&(P.reload(),P.transform&&P.update(P.transform))}),this.on("error",function(){P._sourceErrored=!0}),this._source=function(O,H,te,ae){var ge=new xt[H.type](O,H,te,ae);if(ge.id!==O)throw new Error("Expected Source id to be "+O+" instead of "+ge.id);return m.bindAll(["load","abort","unload","serialize","prepare"],ge),ge}(h,v,S,this),this._tiles={},this._cache=new It(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new m.SourceFeatureState}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.onAdd=function(h){this.map=h,this._maxTileCacheSize=h?h._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(h)},p.prototype.onRemove=function(h){this._source&&this._source.onRemove&&this._source.onRemove(h)},p.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var h in this._tiles){var v=this._tiles[h];if("loaded"!==v.state&&"errored"!==v.state)return!1}return!0},p.prototype.getSource=function(){return this._source},p.prototype.pause=function(){this._paused=!0},p.prototype.resume=function(){if(this._paused){var h=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,h&&this.reload(),this.transform&&this.update(this.transform)}},p.prototype._loadTile=function(h,v){return this._source.loadTile(h,v)},p.prototype._unloadTile=function(h){if(this._source.unloadTile)return this._source.unloadTile(h,function(){})},p.prototype._abortTile=function(h){if(this._source.abortTile)return this._source.abortTile(h,function(){})},p.prototype.serialize=function(){return this._source.serialize()},p.prototype.prepare=function(h){for(var v in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var S=this._tiles[v];S.upload(h),S.prepare(this.map.style.imageManager)}},p.prototype.getIds=function(){return m.values(this._tiles).map(function(h){return h.tileID}).sort(Fe).map(function(h){return h.key})},p.prototype.getRenderableIds=function(h){var v=this,S=[];for(var P in this._tiles)this._isIdRenderable(P,h)&&S.push(this._tiles[P]);return h?S.sort(function(O,H){var te=O.tileID,ae=H.tileID,ge=new m.Point(te.canonical.x,te.canonical.y)._rotate(v.transform.angle),we=new m.Point(ae.canonical.x,ae.canonical.y)._rotate(v.transform.angle);return te.overscaledZ-ae.overscaledZ||we.y-ge.y||we.x-ge.x}).map(function(O){return O.tileID.key}):S.map(function(O){return O.tileID}).sort(Fe).map(function(O){return O.key})},p.prototype.hasRenderableParent=function(h){var v=this.findLoadedParent(h,0);return!!v&&this._isIdRenderable(v.tileID.key)},p.prototype._isIdRenderable=function(h,v){return this._tiles[h]&&this._tiles[h].hasData()&&!this._coveredTiles[h]&&(v||!this._tiles[h].holdingForFade())},p.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var h in this._cache.reset(),this._tiles)"errored"!==this._tiles[h].state&&this._reloadTile(h,"reloading")},p.prototype._reloadTile=function(h,v){var S=this._tiles[h];S&&("loading"!==S.state&&(S.state=v),this._loadTile(S,this._tileLoaded.bind(this,S,h,v)))},p.prototype._tileLoaded=function(h,v,S,P){if(P)return h.state="errored",void(404!==P.status?this._source.fire(new m.ErrorEvent(P,{tile:h})):this.update(this.transform));h.timeAdded=m.browser.now(),"expired"===S&&(h.refreshedUponExpiration=!0),this._setTileReloadTimer(v,h),"raster-dem"===this.getSource().type&&h.dem&&this._backfillDEM(h),this._state.initializeTileState(h,this.map?this.map.painter:null),this._source.fire(new m.Event("data",{dataType:"source",tile:h,coord:h.tileID}))},p.prototype._backfillDEM=function(h){for(var v=this.getRenderableIds(),S=0;S<v.length;S++){var P=v[S];if(h.neighboringTiles&&h.neighboringTiles[P]){var O=this.getTileByID(P);H(h,O),H(O,h)}}function H(te,ae){te.needsHillshadePrepare=!0;var ge=ae.tileID.canonical.x-te.tileID.canonical.x,we=ae.tileID.canonical.y-te.tileID.canonical.y,ye=Math.pow(2,te.tileID.canonical.z),Le=ae.tileID.key;0===ge&&0===we||Math.abs(we)>1||(Math.abs(ge)>1&&(1===Math.abs(ge+ye)?ge+=ye:1===Math.abs(ge-ye)&&(ge-=ye)),ae.dem&&te.dem&&(te.dem.backfillBorder(ae.dem,ge,we),te.neighboringTiles&&te.neighboringTiles[Le]&&(te.neighboringTiles[Le].backfilled=!0)))}},p.prototype.getTile=function(h){return this.getTileByID(h.key)},p.prototype.getTileByID=function(h){return this._tiles[h]},p.prototype._retainLoadedChildren=function(h,v,S,P){for(var O in this._tiles){var H=this._tiles[O];if(!(P[O]||!H.hasData()||H.tileID.overscaledZ<=v||H.tileID.overscaledZ>S)){for(var te=H.tileID;H&&H.tileID.overscaledZ>v+1;){var ae=H.tileID.scaledTo(H.tileID.overscaledZ-1);(H=this._tiles[ae.key])&&H.hasData()&&(te=ae)}for(var ge=te;ge.overscaledZ>v;)if(h[(ge=ge.scaledTo(ge.overscaledZ-1)).key]){P[te.key]=te;break}}}},p.prototype.findLoadedParent=function(h,v){if(h.key in this._loadedParentTiles){var S=this._loadedParentTiles[h.key];return S&&S.tileID.overscaledZ>=v?S:null}for(var P=h.overscaledZ-1;P>=v;P--){var O=h.scaledTo(P),H=this._getLoadedTile(O);if(H)return H}},p.prototype._getLoadedTile=function(h){var v=this._tiles[h.key];return v&&v.hasData()?v:this._cache.getByKey(h.wrapped().key)},p.prototype.updateCacheSize=function(h){var v=Math.ceil(h.width/this._source.tileSize)+1,S=Math.ceil(h.height/this._source.tileSize)+1,P=Math.floor(v*S*5),O="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,P):P;this._cache.setMaxSize(O)},p.prototype.handleWrapJump=function(h){var v=Math.round((h-(void 0===this._prevLng?h:this._prevLng))/360);if(this._prevLng=h,v){var S={};for(var P in this._tiles){var O=this._tiles[P];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+v),S[O.tileID.key]=O}for(var H in this._tiles=S,this._timers)clearTimeout(this._timers[H]),delete this._timers[H];for(var te in this._tiles)this._setTileReloadTimer(te,this._tiles[te])}},p.prototype.update=function(h){var v=this;if(this.transform=h,this._sourceLoaded&&!this._paused){var S;this.updateCacheSize(h),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?S=h.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Tt){return new m.OverscaledTileID(Tt.canonical.z,Tt.wrap,Tt.canonical.z,Tt.canonical.x,Tt.canonical.y)}):(S=h.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(S=S.filter(function(Tt){return v._source.hasTile(Tt)}))):S=[];var P=h.coveringZoomLevel(this._source),O=Math.max(P-p.maxOverzooming,this._source.minzoom),H=Math.max(P+p.maxUnderzooming,this._source.minzoom),te=this._updateRetainedTiles(S,P);if(Rt(this._source.type)){for(var ae={},ge={},we=0,ye=Object.keys(te);we<ye.length;we+=1){var Le=ye[we],Re=te[Le],Ve=this._tiles[Le];if(Ve&&!(Ve.fadeEndTime&&Ve.fadeEndTime<=m.browser.now())){var De=this.findLoadedParent(Re,O);De&&(this._addTile(De.tileID),ae[De.tileID.key]=De.tileID),ge[Le]=Re}}for(var ze in this._retainLoadedChildren(ge,P,H,te),ae)te[ze]||(this._coveredTiles[ze]=!0,te[ze]=ae[ze])}for(var Ye in te)this._tiles[Ye].clearFadeHold();for(var ot=0,yt=m.keysDifference(this._tiles,te);ot<yt.length;ot+=1){var gt=yt[ot],vt=this._tiles[gt];vt.hasSymbolBuckets&&!vt.holdingForFade()?vt.setHoldDuration(this.map._fadeDuration):vt.hasSymbolBuckets&&!vt.symbolFadeFinished()||this._removeTile(gt)}this._updateLoadedParentTileCache()}},p.prototype.releaseSymbolFadeTiles=function(){for(var h in this._tiles)this._tiles[h].holdingForFade()&&this._removeTile(h)},p.prototype._updateRetainedTiles=function(h,v){for(var S={},P={},O=Math.max(v-p.maxOverzooming,this._source.minzoom),H=Math.max(v+p.maxUnderzooming,this._source.minzoom),te={},ae=0,ge=h;ae<ge.length;ae+=1){var we=ge[ae],ye=this._addTile(we);S[we.key]=we,ye.hasData()||v<this._source.maxzoom&&(te[we.key]=we)}this._retainLoadedChildren(te,v,H,S);for(var Le=0,Re=h;Le<Re.length;Le+=1){var Ve=Re[Le],De=this._tiles[Ve.key];if(!De.hasData()){if(v+1>this._source.maxzoom){var ze=Ve.children(this._source.maxzoom)[0],Ye=this.getTile(ze);if(Ye&&Ye.hasData()){S[ze.key]=ze;continue}}else{var ot=Ve.children(this._source.maxzoom);if(S[ot[0].key]&&S[ot[1].key]&&S[ot[2].key]&&S[ot[3].key])continue}for(var yt=De.wasRequested(),gt=Ve.overscaledZ-1;gt>=O;--gt){var vt=Ve.scaledTo(gt);if(P[vt.key]||(P[vt.key]=!0,!(De=this.getTile(vt))&&yt&&(De=this._addTile(vt)),De&&(S[vt.key]=vt,yt=De.wasRequested(),De.hasData())))break}}}return S},p.prototype._updateLoadedParentTileCache=function(){for(var h in this._loadedParentTiles={},this._tiles){for(var v=[],S=void 0,P=this._tiles[h].tileID;P.overscaledZ>0;){if(P.key in this._loadedParentTiles){S=this._loadedParentTiles[P.key];break}v.push(P.key);var O=P.scaledTo(P.overscaledZ-1);if(S=this._getLoadedTile(O))break;P=O}for(var H=0,te=v;H<te.length;H+=1)this._loadedParentTiles[te[H]]=S}},p.prototype._addTile=function(h){var v=this._tiles[h.key];if(v)return v;(v=this._cache.getAndRemove(h))&&(this._setTileReloadTimer(h.key,v),v.tileID=h,this._state.initializeTileState(v,this.map?this.map.painter:null),this._cacheTimers[h.key]&&(clearTimeout(this._cacheTimers[h.key]),delete this._cacheTimers[h.key],this._setTileReloadTimer(h.key,v)));var S=Boolean(v);return S||(v=new m.Tile(h,this._source.tileSize*h.overscaleFactor()),this._loadTile(v,this._tileLoaded.bind(this,v,h.key,v.state))),v?(v.uses++,this._tiles[h.key]=v,S||this._source.fire(new m.Event("dataloading",{tile:v,coord:v.tileID,dataType:"source"})),v):null},p.prototype._setTileReloadTimer=function(h,v){var S=this;h in this._timers&&(clearTimeout(this._timers[h]),delete this._timers[h]);var P=v.getExpiryTimeout();P&&(this._timers[h]=setTimeout(function(){S._reloadTile(h,"expired"),delete S._timers[h]},P))},p.prototype._removeTile=function(h){var v=this._tiles[h];v&&(v.uses--,delete this._tiles[h],this._timers[h]&&(clearTimeout(this._timers[h]),delete this._timers[h]),v.uses>0||(v.hasData()&&"reloading"!==v.state?this._cache.add(v.tileID,v,v.getExpiryTimeout()):(v.aborted=!0,this._abortTile(v),this._unloadTile(v))))},p.prototype.clearTiles=function(){for(var h in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(h);this._cache.reset()},p.prototype.tilesIn=function(h,v,S){var P=this,O=[],H=this.transform;if(!H)return O;for(var te=S?H.getCameraQueryGeometry(h):h,ae=h.map(function(gt){return H.pointCoordinate(gt)}),ge=te.map(function(gt){return H.pointCoordinate(gt)}),we=this.getIds(),ye=1/0,Le=1/0,Re=-1/0,Ve=-1/0,De=0,ze=ge;De<ze.length;De+=1){var Ye=ze[De];ye=Math.min(ye,Ye.x),Le=Math.min(Le,Ye.y),Re=Math.max(Re,Ye.x),Ve=Math.max(Ve,Ye.y)}for(var ot=function(gt){var vt=P._tiles[we[gt]];if(!vt.holdingForFade()){var Tt=vt.tileID,Gt=Math.pow(2,H.zoom-vt.tileID.overscaledZ),Bt=v*vt.queryPadding*m.EXTENT/vt.tileSize/Gt,$t=[Tt.getTilePoint(new m.MercatorCoordinate(ye,Le)),Tt.getTilePoint(new m.MercatorCoordinate(Re,Ve))];if($t[0].x-Bt<m.EXTENT&&$t[0].y-Bt<m.EXTENT&&$t[1].x+Bt>=0&&$t[1].y+Bt>=0){var wn=ae.map(function(Rn){return Tt.getTilePoint(Rn)}),rn=ge.map(function(Rn){return Tt.getTilePoint(Rn)});O.push({tile:vt,tileID:Tt,queryGeometry:wn,cameraQueryGeometry:rn,scale:Gt})}}},yt=0;yt<we.length;yt++)ot(yt);return O},p.prototype.getVisibleCoordinates=function(h){for(var v=this,S=this.getRenderableIds(h).map(function(te){return v._tiles[te].tileID}),P=0,O=S;P<O.length;P+=1){var H=O[P];H.posMatrix=this.transform.calculatePosMatrix(H.toUnwrapped())}return S},p.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Rt(this._source.type))for(var h in this._tiles){var v=this._tiles[h];if(void 0!==v.fadeEndTime&&v.fadeEndTime>=m.browser.now())return!0}return!1},p.prototype.setFeatureState=function(h,v,S){this._state.updateState(h=h||"_geojsonTileLayer",v,S)},p.prototype.removeFeatureState=function(h,v,S){this._state.removeFeatureState(h=h||"_geojsonTileLayer",v,S)},p.prototype.getFeatureState=function(h,v){return this._state.getState(h=h||"_geojsonTileLayer",v)},p.prototype.setDependencies=function(h,v,S){var P=this._tiles[h];P&&P.setDependencies(v,S)},p.prototype.reloadTilesForDependencies=function(h,v){for(var S in this._tiles)this._tiles[S].hasDependency(h,v)&&this._reloadTile(S,"reloading");this._cache.filter(function(P){return!P.hasDependency(h,v)})},p}(m.Evented);function Fe(f,p){var h=Math.abs(2*f.wrap)-+(f.wrap<0),v=Math.abs(2*p.wrap)-+(p.wrap<0);return f.overscaledZ-p.overscaledZ||v-h||p.canonical.y-f.canonical.y||p.canonical.x-f.canonical.x}function Rt(f){return"raster"===f||"image"===f||"video"===f}function Ft(){return new m.window.Worker(vf.workerUrl)}xe.maxOverzooming=10,xe.maxUnderzooming=3;var ct="mapboxgl_preloaded_worker_pool",Et=function(){this.active={}};Et.prototype.acquire=function(f){if(!this.workers)for(this.workers=[];this.workers.length<Et.workerCount;)this.workers.push(new Ft);return this.active[f]=!0,this.workers.slice()},Et.prototype.release=function(f){delete this.active[f],0===this.numActive()&&(this.workers.forEach(function(p){p.terminate()}),this.workers=null)},Et.prototype.isPreloaded=function(){return!!this.active[ct]},Et.prototype.numActive=function(){return Object.keys(this.active).length};var Zt,Jt=Math.floor(m.browser.hardwareConcurrency/2);function hn(){return Zt||(Zt=new Et),Zt}function St(f,p){var h={};for(var v in f)"ref"!==v&&(h[v]=f[v]);return m.refProperties.forEach(function(S){S in p&&(h[S]=p[S])}),h}function Ut(f){f=f.slice();for(var p=Object.create(null),h=0;h<f.length;h++)p[f[h].id]=f[h];for(var v=0;v<f.length;v++)"ref"in f[v]&&(f[v]=St(f[v],p[f[v].ref]));return f}Et.workerCount=Math.max(Math.min(Jt,6),1);var Dt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Hn(f,p,h){h.push({command:Dt.addSource,args:[f,p[f]]})}function Vn(f,p,h){p.push({command:Dt.removeSource,args:[f]}),h[f]=!0}function sn(f,p,h,v){Vn(f,h,v),Hn(f,p,h)}function ri(f,p,h){var v;for(v in f[h])if(f[h].hasOwnProperty(v)&&"data"!==v&&!m.deepEqual(f[h][v],p[h][v]))return!1;for(v in p[h])if(p[h].hasOwnProperty(v)&&"data"!==v&&!m.deepEqual(f[h][v],p[h][v]))return!1;return!0}function In(f,p,h,v,S,P){var O;for(O in p=p||{},f=f||{})f.hasOwnProperty(O)&&(m.deepEqual(f[O],p[O])||h.push({command:P,args:[v,O,p[O],S]}));for(O in p)p.hasOwnProperty(O)&&!f.hasOwnProperty(O)&&(m.deepEqual(f[O],p[O])||h.push({command:P,args:[v,O,p[O],S]}))}function ui(f){return f.id}function yi(f,p){return f[p.id]=p,f}var Pr=function(f,p){this.reset(f,p)};Pr.prototype.reset=function(f,p){this.points=f||[],this._distances=[0];for(var h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Pr.prototype.lerp=function(f){if(1===this.points.length)return this.points[0];f=m.clamp(f,0,1);for(var p=1,h=this._distances[p],v=f*this.paddedLength+this.padding;h<v&&p<this._distances.length;)h=this._distances[++p];var S=p-1,P=this._distances[S],O=h-P,H=O>0?(v-P)/O:0;return this.points[S].mult(1-H).add(this.points[p].mult(H))};var Yr=function(f,p,h){var v=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(f/h),this.yCellCount=Math.ceil(p/h);for(var P=0;P<this.xCellCount*this.yCellCount;P++)v.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=f,this.height=p,this.xScale=this.xCellCount/f,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0};function Si(f,p,h,v,S){var P=m.create();return p?(m.scale(P,P,[1/S,1/S,1]),h||m.rotateZ(P,P,v.angle)):m.multiply(P,v.labelPlaneMatrix,f),P}function Gr(f,p,h,v,S){if(p){var P=m.clone(f);return m.scale(P,P,[S,S,1]),h||m.rotateZ(P,P,-v.angle),P}return v.glCoordMatrix}function On(f,p){var h=[f.x,f.y,0,1];So(h,h,p);var v=h[3];return{point:new m.Point(h[0]/v,h[1]/v),signedDistanceFromCamera:v}}function Bi(f,p){return.5+f/p*.5}function Jn(f,p){var h=f[0]/f[3],v=f[1]/f[3];return h>=-p[0]&&h<=p[0]&&v>=-p[1]&&v<=p[1]}function Eo(f,p,h,v,S,P,O,H){var te=v?f.textSizeData:f.iconSizeData,ae=m.evaluateSizeForZoom(te,h.transform.zoom),ge=[256/h.width*2+1,256/h.height*2+1],we=v?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;we.clear();for(var ye=f.lineVertexArray,Le=v?f.text.placedSymbolArray:f.icon.placedSymbolArray,Re=h.transform.width/h.transform.height,Ve=!1,De=0;De<Le.length;De++){var ze=Le.get(De);if(ze.hidden||ze.writingMode===m.WritingMode.vertical&&!Ve)ps(ze.numGlyphs,we);else{Ve=!1;var Ye=[ze.anchorX,ze.anchorY,0,1];if(m.transformMat4(Ye,Ye,p),Jn(Ye,ge)){var ot=Bi(h.transform.cameraToCenterDistance,Ye[3]),yt=m.evaluateSizeForFeature(te,ae,ze),gt=O?yt/ot:yt*ot,vt=new m.Point(ze.anchorX,ze.anchorY),Tt=On(vt,S).point,Gt={},Bt=nr(ze,gt,!1,H,p,S,P,f.glyphOffsetArray,ye,we,Tt,vt,Gt,Re);Ve=Bt.useVertical,(Bt.notEnoughRoom||Ve||Bt.needsFlipping&&nr(ze,gt,!0,H,p,S,P,f.glyphOffsetArray,ye,we,Tt,vt,Gt,Re).notEnoughRoom)&&ps(ze.numGlyphs,we)}else ps(ze.numGlyphs,we)}}v?f.text.dynamicLayoutVertexBuffer.updateData(we):f.icon.dynamicLayoutVertexBuffer.updateData(we)}function Ea(f,p,h,v,S,P,O,H,te,ae,ge){var we=H.glyphStartIndex+H.numGlyphs,ye=H.lineStartIndex,Le=H.lineStartIndex+H.lineLength,Re=p.getoffsetX(H.glyphStartIndex),Ve=p.getoffsetX(we-1),De=Hr(f*Re,h,v,S,P,O,H.segment,ye,Le,te,ae,ge);if(!De)return null;var ze=Hr(f*Ve,h,v,S,P,O,H.segment,ye,Le,te,ae,ge);return ze?{first:De,last:ze}:null}function Hi(f,p,h,v){return f===m.WritingMode.horizontal&&Math.abs(h.y-p.y)>Math.abs(h.x-p.x)*v?{useVertical:!0}:(f===m.WritingMode.vertical?p.y<h.y:p.x>h.x)?{needsFlipping:!0}:null}function nr(f,p,h,v,S,P,O,H,te,ae,ge,we,ye,Le){var Re,Ve=p/24,De=f.lineOffsetX*Ve,ze=f.lineOffsetY*Ve;if(f.numGlyphs>1){var Ye=f.glyphStartIndex+f.numGlyphs,ot=f.lineStartIndex,yt=f.lineStartIndex+f.lineLength,gt=Ea(Ve,H,De,ze,h,ge,we,f,te,P,ye);if(!gt)return{notEnoughRoom:!0};var vt=On(gt.first.point,O).point,Tt=On(gt.last.point,O).point;if(v&&!h){var Gt=Hi(f.writingMode,vt,Tt,Le);if(Gt)return Gt}Re=[gt.first];for(var Bt=f.glyphStartIndex+1;Bt<Ye-1;Bt++)Re.push(Hr(Ve*H.getoffsetX(Bt),De,ze,h,ge,we,f.segment,ot,yt,te,P,ye));Re.push(gt.last)}else{if(v&&!h){var $t=On(we,S).point,wn=f.lineStartIndex+f.segment+1,rn=new m.Point(te.getx(wn),te.gety(wn)),Rn=On(rn,S),jr=Rn.signedDistanceFromCamera>0?Rn.point:es(we,rn,$t,1,S),un=Hi(f.writingMode,$t,jr,Le);if(un)return un}var er=Hr(Ve*H.getoffsetX(f.glyphStartIndex),De,ze,h,ge,we,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,te,P,ye);if(!er)return{notEnoughRoom:!0};Re=[er]}for(var xr=0,tr=Re;xr<tr.length;xr+=1){var qn=tr[xr];m.addDynamicAttributes(ae,qn.point,qn.angle)}return{}}function es(f,p,h,v,S){var P=On(f.add(f.sub(p)._unit()),S).point,O=h.sub(P);return h.add(O._mult(v/O.mag()))}function Hr(f,p,h,v,S,P,O,H,te,ae,ge,we){var ye=v?f-p:f+p,Le=ye>0?1:-1,Re=0;v&&(Le*=-1,Re=Math.PI),Le<0&&(Re+=Math.PI);for(var Ve=Le>0?H+O:H+O+1,De=S,ze=S,Ye=0,ot=0,yt=Math.abs(ye),gt=[];Ye+ot<=yt;){if((Ve+=Le)<H||Ve>=te)return null;if(ze=De,gt.push(De),void 0===(De=we[Ve])){var vt=new m.Point(ae.getx(Ve),ae.gety(Ve)),Tt=On(vt,ge);if(Tt.signedDistanceFromCamera>0)De=we[Ve]=Tt.point;else{var Gt=Ve-Le;De=es(0===Ye?P:new m.Point(ae.getx(Gt),ae.gety(Gt)),vt,ze,yt-Ye+1,ge)}}Ye+=ot,ot=ze.dist(De)}var Bt=(yt-Ye)/ot,$t=De.sub(ze),wn=$t.mult(Bt)._add(ze);wn._add($t._unit()._perp()._mult(h*Le));var rn=Re+Math.atan2(De.y-ze.y,De.x-ze.x);return gt.push(wn),{point:wn,angle:rn,path:gt}}Yr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Yr.prototype.insert=function(f,p,h,v,S){this._forEachCell(p,h,v,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(f),this.bboxes.push(p),this.bboxes.push(h),this.bboxes.push(v),this.bboxes.push(S)},Yr.prototype.insertCircle=function(f,p,h,v){this._forEachCell(p-v,h-v,p+v,h+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(f),this.circles.push(p),this.circles.push(h),this.circles.push(v)},Yr.prototype._insertBoxCell=function(f,p,h,v,S,P){this.boxCells[S].push(P)},Yr.prototype._insertCircleCell=function(f,p,h,v,S,P){this.circleCells[S].push(P)},Yr.prototype._query=function(f,p,h,v,S,P){if(h<0||f>this.width||v<0||p>this.height)return!S&&[];var O=[];if(f<=0&&p<=0&&this.width<=h&&this.height<=v){if(S)return!0;for(var H=0;H<this.boxKeys.length;H++)O.push({key:this.boxKeys[H],x1:this.bboxes[4*H],y1:this.bboxes[4*H+1],x2:this.bboxes[4*H+2],y2:this.bboxes[4*H+3]});for(var te=0;te<this.circleKeys.length;te++){var ae=this.circles[3*te],ge=this.circles[3*te+1],we=this.circles[3*te+2];O.push({key:this.circleKeys[te],x1:ae-we,y1:ge-we,x2:ae+we,y2:ge+we})}return P?O.filter(P):O}return this._forEachCell(f,p,h,v,this._queryCell,O,{hitTest:S,seenUids:{box:{},circle:{}}},P),S?O.length>0:O},Yr.prototype._queryCircle=function(f,p,h,v,S){var P=f-h,O=f+h,H=p-h,te=p+h;if(O<0||P>this.width||te<0||H>this.height)return!v&&[];var ae=[];return this._forEachCell(P,H,O,te,this._queryCellCircle,ae,{hitTest:v,circle:{x:f,y:p,radius:h},seenUids:{box:{},circle:{}}},S),v?ae.length>0:ae},Yr.prototype.query=function(f,p,h,v,S){return this._query(f,p,h,v,!1,S)},Yr.prototype.hitTest=function(f,p,h,v,S){return this._query(f,p,h,v,!0,S)},Yr.prototype.hitTestCircle=function(f,p,h,v){return this._queryCircle(f,p,h,!0,v)},Yr.prototype._queryCell=function(f,p,h,v,S,P,O,H){var te=O.seenUids,ae=this.boxCells[S];if(null!==ae)for(var ge=this.bboxes,we=0,ye=ae;we<ye.length;we+=1){var Le=ye[we];if(!te.box[Le]){te.box[Le]=!0;var Re=4*Le;if(f<=ge[Re+2]&&p<=ge[Re+3]&&h>=ge[Re+0]&&v>=ge[Re+1]&&(!H||H(this.boxKeys[Le]))){if(O.hitTest)return P.push(!0),!0;P.push({key:this.boxKeys[Le],x1:ge[Re],y1:ge[Re+1],x2:ge[Re+2],y2:ge[Re+3]})}}}var Ve=this.circleCells[S];if(null!==Ve)for(var De=this.circles,ze=0,Ye=Ve;ze<Ye.length;ze+=1){var ot=Ye[ze];if(!te.circle[ot]){te.circle[ot]=!0;var yt=3*ot;if(this._circleAndRectCollide(De[yt],De[yt+1],De[yt+2],f,p,h,v)&&(!H||H(this.circleKeys[ot]))){if(O.hitTest)return P.push(!0),!0;var gt=De[yt],vt=De[yt+1],Tt=De[yt+2];P.push({key:this.circleKeys[ot],x1:gt-Tt,y1:vt-Tt,x2:gt+Tt,y2:vt+Tt})}}}},Yr.prototype._queryCellCircle=function(f,p,h,v,S,P,O,H){var te=O.circle,ae=O.seenUids,ge=this.boxCells[S];if(null!==ge)for(var we=this.bboxes,ye=0,Le=ge;ye<Le.length;ye+=1){var Re=Le[ye];if(!ae.box[Re]){ae.box[Re]=!0;var Ve=4*Re;if(this._circleAndRectCollide(te.x,te.y,te.radius,we[Ve+0],we[Ve+1],we[Ve+2],we[Ve+3])&&(!H||H(this.boxKeys[Re])))return P.push(!0),!0}}var De=this.circleCells[S];if(null!==De)for(var ze=this.circles,Ye=0,ot=De;Ye<ot.length;Ye+=1){var yt=ot[Ye];if(!ae.circle[yt]){ae.circle[yt]=!0;var gt=3*yt;if(this._circlesCollide(ze[gt],ze[gt+1],ze[gt+2],te.x,te.y,te.radius)&&(!H||H(this.circleKeys[yt])))return P.push(!0),!0}}},Yr.prototype._forEachCell=function(f,p,h,v,S,P,O,H){for(var te=this._convertToXCellCoord(f),ae=this._convertToYCellCoord(p),ge=this._convertToXCellCoord(h),we=this._convertToYCellCoord(v),ye=te;ye<=ge;ye++)for(var Le=ae;Le<=we;Le++)if(S.call(this,f,p,h,v,this.xCellCount*Le+ye,P,O,H))return},Yr.prototype._convertToXCellCoord=function(f){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(f*this.xScale)))},Yr.prototype._convertToYCellCoord=function(f){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(f*this.yScale)))},Yr.prototype._circlesCollide=function(f,p,h,v,S,P){var O=v-f,H=S-p,te=h+P;return te*te>O*O+H*H},Yr.prototype._circleAndRectCollide=function(f,p,h,v,S,P,O){var H=(P-v)/2,te=Math.abs(f-(v+H));if(te>H+h)return!1;var ae=(O-S)/2,ge=Math.abs(p-(S+ae));if(ge>ae+h)return!1;if(te<=H||ge<=ae)return!0;var we=te-H,ye=ge-ae;return we*we+ye*ye<=h*h};var Mi=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ps(f,p){for(var h=0;h<f;h++){var v=p.length;p.resize(v+4),p.float32.set(Mi,3*v)}}function So(f,p,h){var v=p[0],S=p[1];return f[0]=h[0]*v+h[4]*S+h[12],f[1]=h[1]*v+h[5]*S+h[13],f[3]=h[3]*v+h[7]*S+h[15],f}var cn=function(f,p,h){void 0===p&&(p=new Yr(f.width+200,f.height+200,25)),void 0===h&&(h=new Yr(f.width+200,f.height+200,25)),this.transform=f,this.grid=p,this.ignoredGrid=h,this.pitchfactor=Math.cos(f._pitch)*f.cameraToCenterDistance,this.screenRightBoundary=f.width+100,this.screenBottomBoundary=f.height+100,this.gridRightBoundary=f.width+200,this.gridBottomBoundary=f.height+200};function Co(f,p,h){return p*(m.EXTENT/(f.tileSize*Math.pow(2,h-f.tileID.overscaledZ)))}cn.prototype.placeCollisionBox=function(f,p,h,v,S){var P=this.projectAndGetPerspectiveRatio(v,f.anchorPointX,f.anchorPointY),O=h*P.perspectiveRatio,H=f.x1*O+P.point.x,te=f.y1*O+P.point.y,ae=f.x2*O+P.point.x,ge=f.y2*O+P.point.y;return!this.isInsideGrid(H,te,ae,ge)||!p&&this.grid.hitTest(H,te,ae,ge,S)?{box:[],offscreen:!1}:{box:[H,te,ae,ge],offscreen:this.isOffscreen(H,te,ae,ge)}},cn.prototype.placeCollisionCircles=function(f,p,h,v,S,P,O,H,te,ae,ge,we,ye){var Le=[],Re=new m.Point(p.anchorX,p.anchorY),Ve=On(Re,P),De=Bi(this.transform.cameraToCenterDistance,Ve.signedDistanceFromCamera),ze=(ae?S/De:S*De)/m.ONE_EM,Ye=On(Re,O).point,ot=Ea(ze,v,p.lineOffsetX*ze,p.lineOffsetY*ze,!1,Ye,Re,p,h,O,{}),yt=!1,gt=!1,vt=!0;if(ot){for(var Tt=.5*we*De+ye,Gt=new m.Point(-100,-100),Bt=new m.Point(this.screenRightBoundary,this.screenBottomBoundary),$t=new Pr,wn=ot.first,rn=ot.last,Rn=[],jr=wn.path.length-1;jr>=1;jr--)Rn.push(wn.path[jr]);for(var un=1;un<rn.path.length;un++)Rn.push(rn.path[un]);var er=2.5*Tt;if(H){var xr=Rn.map(function(Ws){return On(Ws,H)});Rn=xr.some(function(Ws){return Ws.signedDistanceFromCamera<=0})?[]:xr.map(function(Ws){return Ws.point})}var tr=[];if(Rn.length>0){for(var qn=Rn[0].clone(),$n=Rn[0].clone(),jn=1;jn<Rn.length;jn++)qn.x=Math.min(qn.x,Rn[jn].x),qn.y=Math.min(qn.y,Rn[jn].y),$n.x=Math.max($n.x,Rn[jn].x),$n.y=Math.max($n.y,Rn[jn].y);tr=qn.x>=Gt.x&&$n.x<=Bt.x&&qn.y>=Gt.y&&$n.y<=Bt.y?[Rn]:$n.x<Gt.x||qn.x>Bt.x||$n.y<Gt.y||qn.y>Bt.y?[]:m.clipLine([Rn],Gt.x,Gt.y,Bt.x,Bt.y)}for(var Ln=0,bi=tr;Ln<bi.length;Ln+=1){var mo;$t.reset(bi[Ln],.25*Tt),mo=$t.length<=.5*Tt?1:Math.ceil($t.paddedLength/er)+1;for(var go=0;go<mo;go++){var uo=go/Math.max(mo-1,1),Zo=$t.lerp(uo),yo=Zo.x+100,ko=Zo.y+100;Le.push(yo,ko,Tt,0);var qs=yo-Tt,Ga=ko-Tt,Ha=yo+Tt,jl=ko+Tt;if(vt=vt&&this.isOffscreen(qs,Ga,Ha,jl),gt=gt||this.isInsideGrid(qs,Ga,Ha,jl),!f&&this.grid.hitTestCircle(yo,ko,Tt,ge)&&(yt=!0,!te))return{circles:[],offscreen:!1,collisionDetected:yt}}}}return{circles:!te&&yt||!gt?[]:Le,offscreen:vt,collisionDetected:yt}},cn.prototype.queryRenderedSymbols=function(f){if(0===f.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var p=[],h=1/0,v=1/0,S=-1/0,P=-1/0,O=0,H=f;O<H.length;O+=1){var te=H[O],ae=new m.Point(te.x+100,te.y+100);h=Math.min(h,ae.x),v=Math.min(v,ae.y),S=Math.max(S,ae.x),P=Math.max(P,ae.y),p.push(ae)}for(var ge={},we={},ye=0,Le=this.grid.query(h,v,S,P).concat(this.ignoredGrid.query(h,v,S,P));ye<Le.length;ye+=1){var Re=Le[ye],Ve=Re.key;if(void 0===ge[Ve.bucketInstanceId]&&(ge[Ve.bucketInstanceId]={}),!ge[Ve.bucketInstanceId][Ve.featureIndex]){var De=[new m.Point(Re.x1,Re.y1),new m.Point(Re.x2,Re.y1),new m.Point(Re.x2,Re.y2),new m.Point(Re.x1,Re.y2)];m.polygonIntersectsPolygon(p,De)&&(ge[Ve.bucketInstanceId][Ve.featureIndex]=!0,void 0===we[Ve.bucketInstanceId]&&(we[Ve.bucketInstanceId]=[]),we[Ve.bucketInstanceId].push(Ve.featureIndex))}}return we},cn.prototype.insertCollisionBox=function(f,p,h,v,S){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:h,featureIndex:v,collisionGroupID:S},f[0],f[1],f[2],f[3])},cn.prototype.insertCollisionCircles=function(f,p,h,v,S){for(var P=p?this.ignoredGrid:this.grid,O={bucketInstanceId:h,featureIndex:v,collisionGroupID:S},H=0;H<f.length;H+=4)P.insertCircle(O,f[H],f[H+1],f[H+2])},cn.prototype.projectAndGetPerspectiveRatio=function(f,p,h){var v=[p,h,0,1];return So(v,v,f),{point:new m.Point((v[0]/v[3]+1)/2*this.transform.width+100,(-v[1]/v[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/v[3]*.5}},cn.prototype.isOffscreen=function(f,p,h,v){return h<100||f>=this.screenRightBoundary||v<100||p>this.screenBottomBoundary},cn.prototype.isInsideGrid=function(f,p,h,v){return h>=0&&f<this.gridRightBoundary&&v>=0&&p<this.gridBottomBoundary},cn.prototype.getViewportMatrix=function(){var f=m.identity([]);return m.translate(f,f,[-100,-100,0]),f};var Vo=function(f,p,h,v){this.opacity=f?Math.max(0,Math.min(1,f.opacity+(f.placed?p:-p))):v&&h?1:0,this.placed=h};Vo.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Nn=function(f,p,h,v,S){this.text=new Vo(f?f.text:null,p,h,S),this.icon=new Vo(f?f.icon:null,p,v,S)};Nn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var ja=function(f,p,h){this.text=f,this.icon=p,this.skipFade=h},cr=function(){this.invProjMatrix=m.create(),this.viewportMatrix=m.create(),this.circles=[]},R=function(f,p,h,v,S){this.bucketInstanceId=f,this.featureIndex=p,this.sourceLayerIndex=h,this.bucketIndex=v,this.tileID=S},K=function(f){this.crossSourceCollisions=f,this.maxGroupID=0,this.collisionGroups={}};function de(f,p,h,v,S){var P=m.getAnchorAlignment(f),O=-(P.horizontalAlign-.5)*p,H=-(P.verticalAlign-.5)*h,te=m.evaluateVariableOffset(f,v);return new m.Point(O+te[0]*S,H+te[1]*S)}function Ge(f,p,h,v,S,P){var O=f.x1,H=f.x2,te=f.y1,ae=f.y2,ge=f.anchorPointX,we=f.anchorPointY,ye=new m.Point(p,h);return v&&ye._rotate(S?P:-P),{x1:O+ye.x,y1:te+ye.y,x2:H+ye.x,y2:ae+ye.y,anchorPointX:ge,anchorPointY:we}}K.prototype.get=function(f){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[f]){var p=++this.maxGroupID;this.collisionGroups[f]={ID:p,predicate:function(h){return h.collisionGroupID===p}}}return this.collisionGroups[f]};var tt=function(f,p,h,v){this.transform=f.clone(),this.collisionIndex=new cn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new K(h),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}};function Qe(f,p,h,v,S){f.emplaceBack(p?1:0,h?1:0,v||0,S||0),f.emplaceBack(p?1:0,h?1:0,v||0,S||0),f.emplaceBack(p?1:0,h?1:0,v||0,S||0),f.emplaceBack(p?1:0,h?1:0,v||0,S||0)}tt.prototype.getBucketParts=function(f,p,h,v){var S=h.getBucket(p),P=h.latestFeatureIndex;if(S&&P&&p.id===S.layerIds[0]){var O=h.collisionBoxArray,H=S.layers[0].layout,te=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),ae=h.tileSize/m.EXTENT,ge=this.transform.calculatePosMatrix(h.tileID.toUnwrapped()),we="map"===H.get("text-pitch-alignment"),ye="map"===H.get("text-rotation-alignment"),Le=Co(h,1,this.transform.zoom),Re=Si(ge,we,ye,this.transform,Le),Ve=null;if(we){var De=Gr(ge,we,ye,this.transform,Le);Ve=m.multiply([],this.transform.labelPlaneMatrix,De)}this.retainedQueryData[S.bucketInstanceId]=new R(S.bucketInstanceId,P,S.sourceLayerIndex,S.index,h.tileID);var ze={bucket:S,layout:H,posMatrix:ge,textLabelPlaneMatrix:Re,labelToScreenMatrix:Ve,scale:te,textPixelRatio:ae,holdingForFade:h.holdingForFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:m.evaluateSizeForZoom(S.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(S.sourceID)};if(v)for(var Ye=0,ot=S.sortKeyRanges;Ye<ot.length;Ye+=1){var yt=ot[Ye];f.push({sortKey:yt.sortKey,symbolInstanceStart:yt.symbolInstanceStart,symbolInstanceEnd:yt.symbolInstanceEnd,parameters:ze})}else f.push({symbolInstanceStart:0,symbolInstanceEnd:S.symbolInstances.length,parameters:ze})}},tt.prototype.attemptAnchorPlacement=function(f,p,h,v,S,P,O,H,te,ae,ge,we,ye,Le,Re){var Ve,De=[we.textOffset0,we.textOffset1],ze=de(f,h,v,De,S),Ye=this.collisionIndex.placeCollisionBox(Ge(p,ze.x,ze.y,P,O,this.transform.angle),ge,H,te,ae.predicate);if(!Re||0!==this.collisionIndex.placeCollisionBox(Ge(Re,ze.x,ze.y,P,O,this.transform.angle),ge,H,te,ae.predicate).box.length)return Ye.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[we.crossTileID]&&this.prevPlacement.placements[we.crossTileID]&&this.prevPlacement.placements[we.crossTileID].text&&(Ve=this.prevPlacement.variableOffsets[we.crossTileID].anchor),this.variableOffsets[we.crossTileID]={textOffset:De,width:h,height:v,anchor:f,textBoxScale:S,prevAnchor:Ve},this.markUsedJustification(ye,f,we,Le),ye.allowVerticalPlacement&&(this.markUsedOrientation(ye,Le,we),this.placedOrientations[we.crossTileID]=Le),{shift:ze,placedGlyphBoxes:Ye}):void 0},tt.prototype.placeLayerBucketPart=function(f,p,h){var v=this,S=f.parameters,P=S.bucket,O=S.layout,H=S.posMatrix,te=S.textLabelPlaneMatrix,ae=S.labelToScreenMatrix,ge=S.textPixelRatio,we=S.holdingForFade,ye=S.collisionBoxArray,Le=S.partiallyEvaluatedTextSize,Re=S.collisionGroup,Ve=O.get("text-optional"),De=O.get("icon-optional"),ze=O.get("text-allow-overlap"),Ye=O.get("icon-allow-overlap"),ot="map"===O.get("text-rotation-alignment"),yt="map"===O.get("text-pitch-alignment"),gt="none"!==O.get("icon-text-fit"),vt="viewport-y"===O.get("symbol-z-order"),Tt=ze&&(Ye||!P.hasIconData()||De),Gt=Ye&&(ze||!P.hasTextData()||Ve);!P.collisionArrays&&ye&&P.deserializeCollisionBoxes(ye);var Bt=function(un,er){if(!p[un.crossTileID])if(we)v.placements[un.crossTileID]=new ja(!1,!1,!1);else{var xr,tr=!1,qn=!1,$n=!0,jn=null,Ln={box:null,offscreen:null},bi={box:null,offscreen:null},mo=null,go=null,uo=0,Zo=0,yo=0;er.textFeatureIndex?uo=er.textFeatureIndex:un.useRuntimeCollisionCircles&&(uo=un.featureIndex),er.verticalTextFeatureIndex&&(Zo=er.verticalTextFeatureIndex);var ko=er.textBox;if(ko){var qs=function(co){var to=m.WritingMode.horizontal;if(P.allowVerticalPlacement&&!co&&v.prevPlacement){var $a=v.prevPlacement.placedOrientations[un.crossTileID];$a&&(v.placedOrientations[un.crossTileID]=$a,v.markUsedOrientation(P,to=$a,un))}return to},Ga=function(co,to){if(P.allowVerticalPlacement&&un.numVerticalGlyphVertices>0&&er.verticalTextBox)for(var $a=0,bs=P.writingModes;$a<bs.length&&(bs[$a]===m.WritingMode.vertical?(Ln=to(),bi=Ln):Ln=co(),!(Ln&&Ln.box&&Ln.box.length));$a+=1);else Ln=co()};if(O.get("text-variable-anchor")){var Ha=O.get("text-variable-anchor");if(v.prevPlacement&&v.prevPlacement.variableOffsets[un.crossTileID]){var jl=v.prevPlacement.variableOffsets[un.crossTileID];Ha.indexOf(jl.anchor)>0&&(Ha=Ha.filter(function(co){return co!==jl.anchor})).unshift(jl.anchor)}var Ws=function(co,to,$a){for(var bs=co.x2-co.x1,gd=co.y2-co.y1,Cc=un.textBoxScale,rc=gt&&!Ye?to:null,ic={box:[],offscreen:!1},Ic=ze?2*Ha.length:Ha.length,au=0;au<Ic;++au){var Tc=v.attemptAnchorPlacement(Ha[au%Ha.length],co,bs,gd,Cc,ot,yt,ge,H,Re,au>=Ha.length,un,P,$a,rc);if(Tc&&(ic=Tc.placedGlyphBoxes)&&ic.box&&ic.box.length){tr=!0,jn=Tc.shift;break}}return ic};Ga(function(){return Ws(ko,er.iconBox,m.WritingMode.horizontal)},function(){var co=er.verticalTextBox;return P.allowVerticalPlacement&&!(Ln&&Ln.box&&Ln.box.length)&&un.numVerticalGlyphVertices>0&&co?Ws(co,er.verticalIconBox,m.WritingMode.vertical):{box:null,offscreen:null}}),Ln&&(tr=Ln.box,$n=Ln.offscreen);var Qu=qs(Ln&&Ln.box);if(!tr&&v.prevPlacement){var Ul=v.prevPlacement.variableOffsets[un.crossTileID];Ul&&(v.variableOffsets[un.crossTileID]=Ul,v.markUsedJustification(P,Ul.anchor,un,Qu))}}else{var ou=function(co,to){var $a=v.collisionIndex.placeCollisionBox(co,ze,ge,H,Re.predicate);return $a&&$a.box&&$a.box.length&&(v.markUsedOrientation(P,to,un),v.placedOrientations[un.crossTileID]=to),$a};Ga(function(){return ou(ko,m.WritingMode.horizontal)},function(){var co=er.verticalTextBox;return P.allowVerticalPlacement&&un.numVerticalGlyphVertices>0&&co?ou(co,m.WritingMode.vertical):{box:null,offscreen:null}}),qs(Ln&&Ln.box&&Ln.box.length)}}if(tr=(xr=Ln)&&xr.box&&xr.box.length>0,$n=xr&&xr.offscreen,un.useRuntimeCollisionCircles){var wl=P.text.placedSymbolArray.get(un.centerJustifiedTextSymbolIndex),ec=m.evaluateSizeForFeature(P.textSizeData,Le,wl),Pu=O.get("text-padding");mo=v.collisionIndex.placeCollisionCircles(ze,wl,P.lineVertexArray,P.glyphOffsetArray,ec,H,te,ae,h,yt,Re.predicate,un.collisionCircleDiameter,Pu),tr=ze||mo.circles.length>0&&!mo.collisionDetected,$n=$n&&mo.offscreen}if(er.iconFeatureIndex&&(yo=er.iconFeatureIndex),er.iconBox){var as=function(co){var to=gt&&jn?Ge(co,jn.x,jn.y,ot,yt,v.transform.angle):co;return v.collisionIndex.placeCollisionBox(to,Ye,ge,H,Re.predicate)};qn=bi&&bi.box&&bi.box.length&&er.verticalIconBox?(go=as(er.verticalIconBox)).box.length>0:(go=as(er.iconBox)).box.length>0,$n=$n&&go.offscreen}var tc=Ve||0===un.numHorizontalGlyphVertices&&0===un.numVerticalGlyphVertices,Xi=De||0===un.numIconVertices;if(tc||Xi?Xi?tc||(qn=qn&&tr):tr=qn&&tr:qn=tr=qn&&tr,tr&&xr&&xr.box&&v.collisionIndex.insertCollisionBox(xr.box,O.get("text-ignore-placement"),P.bucketInstanceId,bi&&bi.box&&Zo?Zo:uo,Re.ID),qn&&go&&v.collisionIndex.insertCollisionBox(go.box,O.get("icon-ignore-placement"),P.bucketInstanceId,yo,Re.ID),mo&&(tr&&v.collisionIndex.insertCollisionCircles(mo.circles,O.get("text-ignore-placement"),P.bucketInstanceId,uo,Re.ID),h)){var ol=P.bucketInstanceId,_s=v.collisionCircleArrays[ol];void 0===_s&&(_s=v.collisionCircleArrays[ol]=new cr);for(var nc=0;nc<mo.circles.length;nc+=4)_s.circles.push(mo.circles[nc+0]),_s.circles.push(mo.circles[nc+1]),_s.circles.push(mo.circles[nc+2]),_s.circles.push(mo.collisionDetected?1:0)}v.placements[un.crossTileID]=new ja(tr||Tt,qn||Gt,$n||P.justReloaded),p[un.crossTileID]=!0}};if(vt)for(var $t=P.getSortedSymbolIndexes(this.transform.angle),wn=$t.length-1;wn>=0;--wn){var rn=$t[wn];Bt(P.symbolInstances.get(rn),P.collisionArrays[rn])}else for(var Rn=f.symbolInstanceStart;Rn<f.symbolInstanceEnd;Rn++)Bt(P.symbolInstances.get(Rn),P.collisionArrays[Rn]);if(h&&P.bucketInstanceId in this.collisionCircleArrays){var jr=this.collisionCircleArrays[P.bucketInstanceId];m.invert(jr.invProjMatrix,H),jr.viewportMatrix=this.collisionIndex.getViewportMatrix()}P.justReloaded=!1},tt.prototype.markUsedJustification=function(f,p,h,v){var S;S=v===m.WritingMode.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[m.getAnchorJustification(p)];for(var P=0,O=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];P<O.length;P+=1){var H=O[P];H>=0&&(f.text.placedSymbolArray.get(H).crossTileID=S>=0&&H!==S?0:h.crossTileID)}},tt.prototype.markUsedOrientation=function(f,p,h){for(var v=p===m.WritingMode.horizontal||p===m.WritingMode.horizontalOnly?p:0,S=p===m.WritingMode.vertical?p:0,P=0,O=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];P<O.length;P+=1)f.text.placedSymbolArray.get(O[P]).placedOrientation=v;h.verticalPlacedTextSymbolIndex&&(f.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=S)},tt.prototype.commit=function(f){this.commitTime=f,this.zoomAtLastRecencyCheck=this.transform.zoom;var p=this.prevPlacement,h=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;var v=p?p.symbolFadeChange(f):1,S=p?p.opacities:{},P=p?p.variableOffsets:{},O=p?p.placedOrientations:{};for(var H in this.placements){var te=this.placements[H],ae=S[H];ae?(this.opacities[H]=new Nn(ae,v,te.text,te.icon),h=h||te.text!==ae.text.placed||te.icon!==ae.icon.placed):(this.opacities[H]=new Nn(null,v,te.text,te.icon,te.skipFade),h=h||te.text||te.icon)}for(var ge in S){var we=S[ge];if(!this.opacities[ge]){var ye=new Nn(we,v,!1,!1);ye.isHidden()||(this.opacities[ge]=ye,h=h||we.text.placed||we.icon.placed)}}for(var Le in P)this.variableOffsets[Le]||!this.opacities[Le]||this.opacities[Le].isHidden()||(this.variableOffsets[Le]=P[Le]);for(var Re in O)this.placedOrientations[Re]||!this.opacities[Re]||this.opacities[Re].isHidden()||(this.placedOrientations[Re]=O[Re]);h?this.lastPlacementChangeTime=f:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:f)},tt.prototype.updateLayerOpacities=function(f,p){for(var h={},v=0,S=p;v<S.length;v+=1){var P=S[v],O=P.getBucket(f);O&&P.latestFeatureIndex&&f.id===O.layerIds[0]&&this.updateBucketOpacities(O,h,P.collisionBoxArray)}},tt.prototype.updateBucketOpacities=function(f,p,h){var v=this;f.hasTextData()&&f.text.opacityVertexArray.clear(),f.hasIconData()&&f.icon.opacityVertexArray.clear(),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexArray.clear(),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexArray.clear();var S=f.layers[0].layout,P=new Nn(null,0,!1,!1,!0),O=S.get("text-allow-overlap"),H=S.get("icon-allow-overlap"),te=S.get("text-variable-anchor"),ae="map"===S.get("text-rotation-alignment"),ge="map"===S.get("text-pitch-alignment"),we="none"!==S.get("icon-text-fit"),ye=new Nn(null,0,O&&(H||!f.hasIconData()||S.get("icon-optional")),H&&(O||!f.hasTextData()||S.get("text-optional")),!0);!f.collisionArrays&&h&&(f.hasIconCollisionBoxData()||f.hasTextCollisionBoxData())&&f.deserializeCollisionBoxes(h);for(var Le=function(ze,Ye,ot){for(var yt=0;yt<Ye/4;yt++)ze.opacityVertexArray.emplaceBack(ot)},Re=function(ze){var Ye=f.symbolInstances.get(ze),ot=Ye.numHorizontalGlyphVertices,yt=Ye.numVerticalGlyphVertices,gt=Ye.crossTileID,vt=v.opacities[gt];p[gt]?vt=P:vt||(v.opacities[gt]=vt=ye),p[gt]=!0;var Tt=Ye.numIconVertices>0,Gt=v.placedOrientations[Ye.crossTileID],Bt=Gt===m.WritingMode.vertical,$t=Gt===m.WritingMode.horizontal||Gt===m.WritingMode.horizontalOnly;if(ot>0||yt>0){var wn=Fn(vt.text);Le(f.text,ot,Bt?kn:wn),Le(f.text,yt,$t?kn:wn);var rn=vt.text.isHidden();[Ye.rightJustifiedTextSymbolIndex,Ye.centerJustifiedTextSymbolIndex,Ye.leftJustifiedTextSymbolIndex].forEach(function(Ln){Ln>=0&&(f.text.placedSymbolArray.get(Ln).hidden=rn||Bt?1:0)}),Ye.verticalPlacedTextSymbolIndex>=0&&(f.text.placedSymbolArray.get(Ye.verticalPlacedTextSymbolIndex).hidden=rn||$t?1:0);var Rn=v.variableOffsets[Ye.crossTileID];Rn&&v.markUsedJustification(f,Rn.anchor,Ye,Gt);var jr=v.placedOrientations[Ye.crossTileID];jr&&(v.markUsedJustification(f,"left",Ye,jr),v.markUsedOrientation(f,jr,Ye))}if(Tt){var un=Fn(vt.icon),er=!(we&&Ye.verticalPlacedIconSymbolIndex&&Bt);Ye.placedIconSymbolIndex>=0&&(Le(f.icon,Ye.numIconVertices,er?un:kn),f.icon.placedSymbolArray.get(Ye.placedIconSymbolIndex).hidden=vt.icon.isHidden()),Ye.verticalPlacedIconSymbolIndex>=0&&(Le(f.icon,Ye.numVerticalIconVertices,er?kn:un),f.icon.placedSymbolArray.get(Ye.verticalPlacedIconSymbolIndex).hidden=vt.icon.isHidden())}if(f.hasIconCollisionBoxData()||f.hasTextCollisionBoxData()){var xr=f.collisionArrays[ze];if(xr){var tr=new m.Point(0,0);if(xr.textBox||xr.verticalTextBox){var qn=!0;if(te){var $n=v.variableOffsets[gt];$n?(tr=de($n.anchor,$n.width,$n.height,$n.textOffset,$n.textBoxScale),ae&&tr._rotate(ge?v.transform.angle:-v.transform.angle)):qn=!1}xr.textBox&&Qe(f.textCollisionBox.collisionVertexArray,vt.text.placed,!qn||Bt,tr.x,tr.y),xr.verticalTextBox&&Qe(f.textCollisionBox.collisionVertexArray,vt.text.placed,!qn||$t,tr.x,tr.y)}var jn=Boolean(!$t&&xr.verticalIconBox);xr.iconBox&&Qe(f.iconCollisionBox.collisionVertexArray,vt.icon.placed,jn,we?tr.x:0,we?tr.y:0),xr.verticalIconBox&&Qe(f.iconCollisionBox.collisionVertexArray,vt.icon.placed,!jn,we?tr.x:0,we?tr.y:0)}}},Ve=0;Ve<f.symbolInstances.length;Ve++)Re(Ve);if(f.sortFeatures(this.transform.angle),this.retainedQueryData[f.bucketInstanceId]&&(this.retainedQueryData[f.bucketInstanceId].featureSortOrder=f.featureSortOrder),f.hasTextData()&&f.text.opacityVertexBuffer&&f.text.opacityVertexBuffer.updateData(f.text.opacityVertexArray),f.hasIconData()&&f.icon.opacityVertexBuffer&&f.icon.opacityVertexBuffer.updateData(f.icon.opacityVertexArray),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexBuffer&&f.iconCollisionBox.collisionVertexBuffer.updateData(f.iconCollisionBox.collisionVertexArray),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexBuffer&&f.textCollisionBox.collisionVertexBuffer.updateData(f.textCollisionBox.collisionVertexArray),f.bucketInstanceId in this.collisionCircleArrays){var De=this.collisionCircleArrays[f.bucketInstanceId];f.placementInvProjMatrix=De.invProjMatrix,f.placementViewportMatrix=De.viewportMatrix,f.collisionCircleArray=De.circles,delete this.collisionCircleArrays[f.bucketInstanceId]}},tt.prototype.symbolFadeChange=function(f){return 0===this.fadeDuration?1:(f-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},tt.prototype.zoomAdjustment=function(f){return Math.max(0,(this.transform.zoom-f)/1.5)},tt.prototype.hasTransitions=function(f){return this.stale||f-this.lastPlacementChangeTime<this.fadeDuration},tt.prototype.stillRecent=function(f,p){var h=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*h>f},tt.prototype.setStale=function(){this.stale=!0};var ft=Math.pow(2,25),jt=Math.pow(2,24),Lt=Math.pow(2,17),Yt=Math.pow(2,16),mt=Math.pow(2,9),tn=Math.pow(2,8),gn=Math.pow(2,1);function Fn(f){if(0===f.opacity&&!f.placed)return 0;if(1===f.opacity&&f.placed)return 4294967295;var p=f.placed?1:0,h=Math.floor(127*f.opacity);return h*ft+p*jt+h*Lt+p*Yt+h*mt+p*tn+h*gn+p}var kn=0,ji=function(f){this._sortAcrossTiles="viewport-y"!==f.layout.get("symbol-z-order")&&!f.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};ji.prototype.continuePlacement=function(f,p,h,v,S){for(var P=this._bucketParts;this._currentTileIndex<f.length;)if(p.getBucketParts(P,v,f[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort(function(O,H){return O.sortKey-H.sortKey}));this._currentPartIndex<P.length;)if(p.placeLayerBucketPart(P[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,S())return!0;return!1};var At=function(f,p,h,v,S,P,O){this.placement=new tt(f,S,P,O),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=h,this._showCollisionBoxes=v,this._done=!1};At.prototype.isDone=function(){return this._done},At.prototype.continuePlacement=function(f,p,h){for(var v=this,S=m.browser.now(),P=function(){var te=m.browser.now()-S;return!v._forceFullPlacement&&te>2};this._currentPlacementIndex>=0;){var O=p[f[this._currentPlacementIndex]],H=this.placement.collisionIndex.transform.zoom;if("symbol"===O.type&&(!O.minzoom||O.minzoom<=H)&&(!O.maxzoom||O.maxzoom>H)){if(this._inProgressLayer||(this._inProgressLayer=new ji(O)),this._inProgressLayer.continuePlacement(h[O.source],this.placement,this._showCollisionBoxes,O,P))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},At.prototype.commit=function(f){return this.placement.commit(f),this.placement};var yn=512/m.EXTENT/2,dr=function(f,p,h){this.tileID=f,this.indexedSymbolInstances={},this.bucketInstanceId=h;for(var v=0;v<p.length;v++){var S=p.get(v),P=S.key;this.indexedSymbolInstances[P]||(this.indexedSymbolInstances[P]=[]),this.indexedSymbolInstances[P].push({crossTileID:S.crossTileID,coord:this.getScaledCoordinates(S,f)})}};dr.prototype.getScaledCoordinates=function(f,p){var h=yn/Math.pow(2,p.canonical.z-this.tileID.canonical.z);return{x:Math.floor((p.canonical.x*m.EXTENT+f.anchorX)*h),y:Math.floor((p.canonical.y*m.EXTENT+f.anchorY)*h)}},dr.prototype.findMatches=function(f,p,h){for(var v=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z),S=0;S<f.length;S++){var P=f.get(S);if(!P.crossTileID){var O=this.indexedSymbolInstances[P.key];if(O)for(var H=this.getScaledCoordinates(P,p),te=0,ae=O;te<ae.length;te+=1){var ge=ae[te];if(Math.abs(ge.coord.x-H.x)<=v&&Math.abs(ge.coord.y-H.y)<=v&&!h[ge.crossTileID]){h[ge.crossTileID]=!0,P.crossTileID=ge.crossTileID;break}}}}};var Dn=function(){this.maxCrossTileID=0};Dn.prototype.generate=function(){return++this.maxCrossTileID};var kr=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};kr.prototype.handleWrapJump=function(f){var p=Math.round((f-this.lng)/360);if(0!==p)for(var h in this.indexes){var v=this.indexes[h],S={};for(var P in v){var O=v[P];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+p),S[O.tileID.key]=O}this.indexes[h]=S}this.lng=f},kr.prototype.addBucket=function(f,p,h){if(this.indexes[f.overscaledZ]&&this.indexes[f.overscaledZ][f.key]){if(this.indexes[f.overscaledZ][f.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(f.overscaledZ,this.indexes[f.overscaledZ][f.key])}for(var v=0;v<p.symbolInstances.length;v++)p.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[f.overscaledZ]||(this.usedCrossTileIDs[f.overscaledZ]={});var S=this.usedCrossTileIDs[f.overscaledZ];for(var P in this.indexes){var O=this.indexes[P];if(Number(P)>f.overscaledZ)for(var H in O){var te=O[H];te.tileID.isChildOf(f)&&te.findMatches(p.symbolInstances,f,S)}else{var ae=O[f.scaledTo(Number(P)).key];ae&&ae.findMatches(p.symbolInstances,f,S)}}for(var ge=0;ge<p.symbolInstances.length;ge++){var we=p.symbolInstances.get(ge);we.crossTileID||(we.crossTileID=h.generate(),S[we.crossTileID]=!0)}return void 0===this.indexes[f.overscaledZ]&&(this.indexes[f.overscaledZ]={}),this.indexes[f.overscaledZ][f.key]=new dr(f,p.symbolInstances,p.bucketInstanceId),!0},kr.prototype.removeBucketCrossTileIDs=function(f,p){for(var h in p.indexedSymbolInstances)for(var v=0,S=p.indexedSymbolInstances[h];v<S.length;v+=1)delete this.usedCrossTileIDs[f][S[v].crossTileID]},kr.prototype.removeStaleBuckets=function(f){var p=!1;for(var h in this.indexes){var v=this.indexes[h];for(var S in v)f[v[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,v[S]),delete v[S],p=!0)}return p};var An=function(){this.layerIndexes={},this.crossTileIDs=new Dn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};An.prototype.addLayer=function(f,p,h){var v=this.layerIndexes[f.id];void 0===v&&(v=this.layerIndexes[f.id]=new kr);var S=!1,P={};v.handleWrapJump(h);for(var O=0,H=p;O<H.length;O+=1){var te=H[O],ae=te.getBucket(f);ae&&f.id===ae.layerIds[0]&&(ae.bucketInstanceId||(ae.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(te.tileID,ae,this.crossTileIDs)&&(S=!0),P[ae.bucketInstanceId]=!0)}return v.removeStaleBuckets(P)&&(S=!0),S},An.prototype.pruneUnusedLayers=function(f){var p={};for(var h in f.forEach(function(v){p[v]=!0}),this.layerIndexes)p[h]||delete this.layerIndexes[h]};var da=function(f,p){return m.emitValidationErrors(f,p&&p.filter(function(h){return"source.canvas"!==h.identifier}))},Qn=m.pick(Dt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),vr=m.pick(Dt,["setCenter","setZoom","setBearing","setPitch"]),Ti=function(){var f={},p=m.styleSpec.$version;for(var h in m.styleSpec.$root){var v,S=m.styleSpec.$root[h];S.required&&null!=(v="version"===h?p:"array"===S.type?[]:{})&&(f[h]=v)}return f}(),Ui=function(f){function p(h,v){var S=this;void 0===v&&(v={}),f.call(this),this.map=h,this.dispatcher=new B(hn(),this),this.imageManager=new _e,this.imageManager.setEventedParent(this),this.glyphManager=new nt(h._requestManager,v.localIdeographFontFamily),this.lineAtlas=new L(256,512),this.crossTileSymbolIndex=new An,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new m.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",m.getReferrer());var P=this;this._rtlTextPluginCallback=p.registerForPluginStateChange(function(O){P.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:O.pluginStatus,pluginURL:O.pluginURL},function(H,te){if(m.triggerPluginCompletionEvent(H),te&&te.every(function(ge){return ge}))for(var ae in P.sourceCaches)P.sourceCaches[ae].reload()})}),this.on("data",function(O){if("source"===O.dataType&&"metadata"===O.sourceDataType){var H=S.sourceCaches[O.sourceId];if(H){var te=H.getSource();if(te&&te.vectorLayerIds)for(var ae in S._layers){var ge=S._layers[ae];ge.source===te.id&&S._validateLayer(ge)}}}})}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.loadURL=function(h,v){var S=this;void 0===v&&(v={}),this.fire(new m.Event("dataloading",{dataType:"style"}));var P="boolean"==typeof v.validate?v.validate:!m.isMapboxURL(h);h=this.map._requestManager.normalizeStyleURL(h,v.accessToken);var O=this.map._requestManager.transformRequest(h,m.ResourceType.Style);this._request=m.getJSON(O,function(H,te){S._request=null,H?S.fire(new m.ErrorEvent(H)):te&&S._load(te,P)})},p.prototype.loadJSON=function(h,v){var S=this;void 0===v&&(v={}),this.fire(new m.Event("dataloading",{dataType:"style"})),this._request=m.browser.frame(function(){S._request=null,S._load(h,!1!==v.validate)})},p.prototype.loadEmpty=function(){this.fire(new m.Event("dataloading",{dataType:"style"})),this._load(Ti,!1)},p.prototype._load=function(h,v){if(!v||!da(this,m.validateStyle(h))){for(var S in this._loaded=!0,this.stylesheet=h,h.sources)this.addSource(S,h.sources[S],{validate:!1});h.sprite?this._loadSprite(h.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(h.glyphs);var P=Ut(this.stylesheet.layers);this._order=P.map(function(ae){return ae.id}),this._layers={},this._serializedLayers={};for(var O=0,H=P;O<H.length;O+=1){var te=H[O];(te=m.createStyleLayer(te)).setEventedParent(this,{layer:{id:te.id}}),this._layers[te.id]=te,this._serializedLayers[te.id]=te.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new A(this.stylesheet.light),this.fire(new m.Event("data",{dataType:"style"})),this.fire(new m.Event("style.load"))}},p.prototype._loadSprite=function(h){var v=this;this._spriteRequest=function(S,P,O){var H,te,ae,ge=m.browser.devicePixelRatio>1?"@2x":"",we=m.getJSON(P.transformRequest(P.normalizeSpriteURL(S,ge,".json"),m.ResourceType.SpriteJSON),function(Re,Ve){we=null,ae||(ae=Re,H=Ve,Le())}),ye=m.getImage(P.transformRequest(P.normalizeSpriteURL(S,ge,".png"),m.ResourceType.SpriteImage),function(Re,Ve){ye=null,ae||(ae=Re,te=Ve,Le())});function Le(){if(ae)O(ae);else if(H&&te){var Re=m.browser.getImageData(te),Ve={};for(var De in H){var ze=H[De],Ye=ze.width,ot=ze.height,yt=ze.x,gt=ze.y,vt=ze.sdf,Tt=ze.pixelRatio,Gt=ze.stretchX,Bt=ze.stretchY,$t=ze.content,wn=new m.RGBAImage({width:Ye,height:ot});m.RGBAImage.copy(Re,wn,{x:yt,y:gt},{x:0,y:0},{width:Ye,height:ot}),Ve[De]={data:wn,pixelRatio:Tt,sdf:vt,stretchX:Gt,stretchY:Bt,content:$t}}O(null,Ve)}}return{cancel:function(){we&&(we.cancel(),we=null),ye&&(ye.cancel(),ye=null)}}}(h,this.map._requestManager,function(S,P){if(v._spriteRequest=null,S)v.fire(new m.ErrorEvent(S));else if(P)for(var O in P)v.imageManager.addImage(O,P[O]);v.imageManager.setLoaded(!0),v._availableImages=v.imageManager.listImages(),v.dispatcher.broadcast("setImages",v._availableImages),v.fire(new m.Event("data",{dataType:"style"}))})},p.prototype._validateLayer=function(h){var v=this.sourceCaches[h.source];if(v){var S=h.sourceLayer;if(S){var P=v.getSource();("geojson"===P.type||P.vectorLayerIds&&-1===P.vectorLayerIds.indexOf(S))&&this.fire(new m.ErrorEvent(new Error('Source layer "'+S+'" does not exist on source "'+P.id+'" as specified by style layer "'+h.id+'"')))}}},p.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var h in this.sourceCaches)if(!this.sourceCaches[h].loaded())return!1;return!!this.imageManager.isLoaded()},p.prototype._serializeLayers=function(h){for(var v=[],S=0,P=h;S<P.length;S+=1){var O=this._layers[P[S]];"custom"!==O.type&&v.push(O.serialize())}return v},p.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var h in this.sourceCaches)if(this.sourceCaches[h].hasTransition())return!0;for(var v in this._layers)if(this._layers[v].hasTransition())return!0;return!1},p.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},p.prototype.update=function(h){if(this._loaded){var v=this._changed;if(this._changed){var S=Object.keys(this._updatedLayers),P=Object.keys(this._removedLayers);for(var O in(S.length||P.length)&&this._updateWorkerLayers(S,P),this._updatedSources){var H=this._updatedSources[O];"reload"===H?this._reloadSource(O):"clear"===H&&this._clearSource(O)}for(var te in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[te].updateTransitions(h);this.light.updateTransitions(h),this._resetUpdates()}var ae={};for(var ge in this.sourceCaches){var we=this.sourceCaches[ge];ae[ge]=we.used,we.used=!1}for(var ye=0,Le=this._order;ye<Le.length;ye+=1){var Re=this._layers[Le[ye]];Re.recalculate(h,this._availableImages),!Re.isHidden(h.zoom)&&Re.source&&(this.sourceCaches[Re.source].used=!0)}for(var Ve in ae){var De=this.sourceCaches[Ve];ae[Ve]!==De.used&&De.fire(new m.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Ve}))}this.light.recalculate(h),this.z=h.zoom,v&&this.fire(new m.Event("data",{dataType:"style"}))}},p.prototype._updateTilesForChangedImages=function(){var h=Object.keys(this._changedImages);if(h.length){for(var v in this.sourceCaches)this.sourceCaches[v].reloadTilesForDependencies(["icons","patterns"],h);this._changedImages={}}},p.prototype._updateWorkerLayers=function(h,v){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(h),removedIds:v})},p.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},p.prototype.setState=function(h){var v=this;if(this._checkLoaded(),da(this,m.validateStyle(h)))return!1;(h=m.clone$1(h)).layers=Ut(h.layers);var S=function(O,H){if(!O)return[{command:Dt.setStyle,args:[H]}];var te=[];try{if(!m.deepEqual(O.version,H.version))return[{command:Dt.setStyle,args:[H]}];m.deepEqual(O.center,H.center)||te.push({command:Dt.setCenter,args:[H.center]}),m.deepEqual(O.zoom,H.zoom)||te.push({command:Dt.setZoom,args:[H.zoom]}),m.deepEqual(O.bearing,H.bearing)||te.push({command:Dt.setBearing,args:[H.bearing]}),m.deepEqual(O.pitch,H.pitch)||te.push({command:Dt.setPitch,args:[H.pitch]}),m.deepEqual(O.sprite,H.sprite)||te.push({command:Dt.setSprite,args:[H.sprite]}),m.deepEqual(O.glyphs,H.glyphs)||te.push({command:Dt.setGlyphs,args:[H.glyphs]}),m.deepEqual(O.transition,H.transition)||te.push({command:Dt.setTransition,args:[H.transition]}),m.deepEqual(O.light,H.light)||te.push({command:Dt.setLight,args:[H.light]});var ae={},ge=[];!function(ye,Le,Re,Ve){var De;for(De in Le=Le||{},ye=ye||{})ye.hasOwnProperty(De)&&(Le.hasOwnProperty(De)||Vn(De,Re,Ve));for(De in Le)Le.hasOwnProperty(De)&&(ye.hasOwnProperty(De)?m.deepEqual(ye[De],Le[De])||("geojson"===ye[De].type&&"geojson"===Le[De].type&&ri(ye,Le,De)?Re.push({command:Dt.setGeoJSONSourceData,args:[De,Le[De].data]}):sn(De,Le,Re,Ve)):Hn(De,Le,Re))}(O.sources,H.sources,ge,ae);var we=[];O.layers&&O.layers.forEach(function(ye){ae[ye.source]?te.push({command:Dt.removeLayer,args:[ye.id]}):we.push(ye)}),te=te.concat(ge),function(ye,Le,Re){Le=Le||[];var Ve,De,ze,Ye,ot,yt,gt,vt=(ye=ye||[]).map(ui),Tt=Le.map(ui),Gt=ye.reduce(yi,{}),Bt=Le.reduce(yi,{}),$t=vt.slice(),wn=Object.create(null);for(Ve=0,De=0;Ve<vt.length;Ve++)Bt.hasOwnProperty(ze=vt[Ve])?De++:(Re.push({command:Dt.removeLayer,args:[ze]}),$t.splice($t.indexOf(ze,De),1));for(Ve=0,De=0;Ve<Tt.length;Ve++)$t[$t.length-1-Ve]!==(ze=Tt[Tt.length-1-Ve])&&(Gt.hasOwnProperty(ze)?(Re.push({command:Dt.removeLayer,args:[ze]}),$t.splice($t.lastIndexOf(ze,$t.length-De),1)):De++,Re.push({command:Dt.addLayer,args:[Bt[ze],yt=$t[$t.length-Ve]]}),$t.splice($t.length-Ve,0,ze),wn[ze]=!0);for(Ve=0;Ve<Tt.length;Ve++)if(Ye=Gt[ze=Tt[Ve]],ot=Bt[ze],!wn[ze]&&!m.deepEqual(Ye,ot))if(m.deepEqual(Ye.source,ot.source)&&m.deepEqual(Ye["source-layer"],ot["source-layer"])&&m.deepEqual(Ye.type,ot.type)){for(gt in In(Ye.layout,ot.layout,Re,ze,null,Dt.setLayoutProperty),In(Ye.paint,ot.paint,Re,ze,null,Dt.setPaintProperty),m.deepEqual(Ye.filter,ot.filter)||Re.push({command:Dt.setFilter,args:[ze,ot.filter]}),m.deepEqual(Ye.minzoom,ot.minzoom)&&m.deepEqual(Ye.maxzoom,ot.maxzoom)||Re.push({command:Dt.setLayerZoomRange,args:[ze,ot.minzoom,ot.maxzoom]}),Ye)Ye.hasOwnProperty(gt)&&"layout"!==gt&&"paint"!==gt&&"filter"!==gt&&"metadata"!==gt&&"minzoom"!==gt&&"maxzoom"!==gt&&(0===gt.indexOf("paint.")?In(Ye[gt],ot[gt],Re,ze,gt.slice(6),Dt.setPaintProperty):m.deepEqual(Ye[gt],ot[gt])||Re.push({command:Dt.setLayerProperty,args:[ze,gt,ot[gt]]}));for(gt in ot)ot.hasOwnProperty(gt)&&!Ye.hasOwnProperty(gt)&&"layout"!==gt&&"paint"!==gt&&"filter"!==gt&&"metadata"!==gt&&"minzoom"!==gt&&"maxzoom"!==gt&&(0===gt.indexOf("paint.")?In(Ye[gt],ot[gt],Re,ze,gt.slice(6),Dt.setPaintProperty):m.deepEqual(Ye[gt],ot[gt])||Re.push({command:Dt.setLayerProperty,args:[ze,gt,ot[gt]]}))}else Re.push({command:Dt.removeLayer,args:[ze]}),yt=$t[$t.lastIndexOf(ze)+1],Re.push({command:Dt.addLayer,args:[ot,yt]})}(we,H.layers,te)}catch(ye){console.warn("Unable to compute style diff:",ye),te=[{command:Dt.setStyle,args:[H]}]}return te}(this.serialize(),h).filter(function(O){return!(O.command in vr)});if(0===S.length)return!1;var P=S.filter(function(O){return!(O.command in Qn)});if(P.length>0)throw new Error("Unimplemented: "+P.map(function(O){return O.command}).join(", ")+".");return S.forEach(function(O){"setTransition"!==O.command&&v[O.command].apply(v,O.args)}),this.stylesheet=h,!0},p.prototype.addImage=function(h,v){if(this.getImage(h))return this.fire(new m.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(h,v),this._afterImageUpdated(h)},p.prototype.updateImage=function(h,v){this.imageManager.updateImage(h,v)},p.prototype.getImage=function(h){return this.imageManager.getImage(h)},p.prototype.removeImage=function(h){if(!this.getImage(h))return this.fire(new m.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(h),this._afterImageUpdated(h)},p.prototype._afterImageUpdated=function(h){this._availableImages=this.imageManager.listImages(),this._changedImages[h]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new m.Event("data",{dataType:"style"}))},p.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},p.prototype.addSource=function(h,v,S){var P=this;if(void 0===S&&(S={}),this._checkLoaded(),void 0!==this.sourceCaches[h])throw new Error("There is already a source with this ID");if(!v.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(v).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(v.type)>=0&&this._validate(m.validateStyle.source,"sources."+h,v,null,S))){this.map&&this.map._collectResourceTiming&&(v.collectResourceTiming=!0);var O=this.sourceCaches[h]=new xe(h,v,this.dispatcher);O.style=this,O.setEventedParent(this,function(){return{isSourceLoaded:P.loaded(),source:O.serialize(),sourceId:h}}),O.onAdd(this.map),this._changed=!0}},p.prototype.removeSource=function(h){if(this._checkLoaded(),void 0===this.sourceCaches[h])throw new Error("There is no source with this ID");for(var v in this._layers)if(this._layers[v].source===h)return this.fire(new m.ErrorEvent(new Error('Source "'+h+'" cannot be removed while layer "'+v+'" is using it.')));var S=this.sourceCaches[h];delete this.sourceCaches[h],delete this._updatedSources[h],S.fire(new m.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:h})),S.setEventedParent(null),S.clearTiles(),S.onRemove&&S.onRemove(this.map),this._changed=!0},p.prototype.setGeoJSONSourceData=function(h,v){this._checkLoaded(),this.sourceCaches[h].getSource().setData(v),this._changed=!0},p.prototype.getSource=function(h){return this.sourceCaches[h]&&this.sourceCaches[h].getSource()},p.prototype.addLayer=function(h,v,S){void 0===S&&(S={}),this._checkLoaded();var P=h.id;if(this.getLayer(P))this.fire(new m.ErrorEvent(new Error('Layer with id "'+P+'" already exists on this map')));else{var O;if("custom"===h.type){if(da(this,m.validateCustomStyleLayer(h)))return;O=m.createStyleLayer(h)}else{if("object"==typeof h.source&&(this.addSource(P,h.source),h=m.clone$1(h),h=m.extend(h,{source:P})),this._validate(m.validateStyle.layer,"layers."+P,h,{arrayIndex:-1},S))return;O=m.createStyleLayer(h),this._validateLayer(O),O.setEventedParent(this,{layer:{id:P}}),this._serializedLayers[O.id]=O.serialize()}var H=v?this._order.indexOf(v):this._order.length;if(v&&-1===H)this.fire(new m.ErrorEvent(new Error('Layer with id "'+v+'" does not exist on this map.')));else{if(this._order.splice(H,0,P),this._layerOrderChanged=!0,this._layers[P]=O,this._removedLayers[P]&&O.source&&"custom"!==O.type){var te=this._removedLayers[P];delete this._removedLayers[P],te.type!==O.type?this._updatedSources[O.source]="clear":(this._updatedSources[O.source]="reload",this.sourceCaches[O.source].pause())}this._updateLayer(O),O.onAdd&&O.onAdd(this.map)}}},p.prototype.moveLayer=function(h,v){if(this._checkLoaded(),this._changed=!0,this._layers[h]){if(h!==v){var S=this._order.indexOf(h);this._order.splice(S,1);var P=v?this._order.indexOf(v):this._order.length;v&&-1===P?this.fire(new m.ErrorEvent(new Error('Layer with id "'+v+'" does not exist on this map.'))):(this._order.splice(P,0,h),this._layerOrderChanged=!0)}}else this.fire(new m.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot be moved.")))},p.prototype.removeLayer=function(h){this._checkLoaded();var v=this._layers[h];if(v){v.setEventedParent(null);var S=this._order.indexOf(h);this._order.splice(S,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[h]=v,delete this._layers[h],delete this._serializedLayers[h],delete this._updatedLayers[h],delete this._updatedPaintProps[h],v.onRemove&&v.onRemove(this.map)}else this.fire(new m.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot be removed.")))},p.prototype.getLayer=function(h){return this._layers[h]},p.prototype.hasLayer=function(h){return h in this._layers},p.prototype.setLayerZoomRange=function(h,v,S){this._checkLoaded();var P=this.getLayer(h);P?P.minzoom===v&&P.maxzoom===S||(null!=v&&(P.minzoom=v),null!=S&&(P.maxzoom=S),this._updateLayer(P)):this.fire(new m.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot have zoom extent.")))},p.prototype.setFilter=function(h,v,S){void 0===S&&(S={}),this._checkLoaded();var P=this.getLayer(h);if(P){if(!m.deepEqual(P.filter,v))return null==v?(P.filter=void 0,void this._updateLayer(P)):void(this._validate(m.validateStyle.filter,"layers."+P.id+".filter",v,null,S)||(P.filter=m.clone$1(v),this._updateLayer(P)))}else this.fire(new m.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot be filtered.")))},p.prototype.getFilter=function(h){return m.clone$1(this.getLayer(h).filter)},p.prototype.setLayoutProperty=function(h,v,S,P){void 0===P&&(P={}),this._checkLoaded();var O=this.getLayer(h);O?m.deepEqual(O.getLayoutProperty(v),S)||(O.setLayoutProperty(v,S,P),this._updateLayer(O)):this.fire(new m.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot be styled.")))},p.prototype.getLayoutProperty=function(h,v){var S=this.getLayer(h);if(S)return S.getLayoutProperty(v);this.fire(new m.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style.")))},p.prototype.setPaintProperty=function(h,v,S,P){void 0===P&&(P={}),this._checkLoaded();var O=this.getLayer(h);O?m.deepEqual(O.getPaintProperty(v),S)||(O.setPaintProperty(v,S,P)&&this._updateLayer(O),this._changed=!0,this._updatedPaintProps[h]=!0):this.fire(new m.ErrorEvent(new Error("The layer '"+h+"' does not exist in the map's style and cannot be styled.")))},p.prototype.getPaintProperty=function(h,v){return this.getLayer(h).getPaintProperty(v)},p.prototype.setFeatureState=function(h,v){this._checkLoaded();var S=h.source,P=h.sourceLayer,O=this.sourceCaches[S];if(void 0!==O){var H=O.getSource().type;"geojson"===H&&P?this.fire(new m.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==H||P?(void 0===h.id&&this.fire(new m.ErrorEvent(new Error("The feature id parameter must be provided."))),O.setFeatureState(P,h.id,v)):this.fire(new m.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new m.ErrorEvent(new Error("The source '"+S+"' does not exist in the map's style.")))},p.prototype.removeFeatureState=function(h,v){this._checkLoaded();var S=h.source,P=this.sourceCaches[S];if(void 0!==P){var O=P.getSource().type,H="vector"===O?h.sourceLayer:void 0;"vector"!==O||H?v&&"string"!=typeof h.id&&"number"!=typeof h.id?this.fire(new m.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):P.removeFeatureState(H,h.id,v):this.fire(new m.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new m.ErrorEvent(new Error("The source '"+S+"' does not exist in the map's style.")))},p.prototype.getFeatureState=function(h){this._checkLoaded();var v=h.source,S=h.sourceLayer,P=this.sourceCaches[v];if(void 0!==P){if("vector"!==P.getSource().type||S)return void 0===h.id&&this.fire(new m.ErrorEvent(new Error("The feature id parameter must be provided."))),P.getFeatureState(S,h.id);this.fire(new m.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new m.ErrorEvent(new Error("The source '"+v+"' does not exist in the map's style.")))},p.prototype.getTransition=function(){return m.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},p.prototype.serialize=function(){return m.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:m.mapObject(this.sourceCaches,function(h){return h.serialize()}),layers:this._serializeLayers(this._order)},function(h){return void 0!==h})},p.prototype._updateLayer=function(h){this._updatedLayers[h.id]=!0,h.source&&!this._updatedSources[h.source]&&"raster"!==this.sourceCaches[h.source].getSource().type&&(this._updatedSources[h.source]="reload",this.sourceCaches[h.source].pause()),this._changed=!0},p.prototype._flattenAndSortRenderedFeatures=function(h){for(var v=this,S=function(Gt){return"fill-extrusion"===v._layers[Gt].type},P={},O=[],H=this._order.length-1;H>=0;H--){var te=this._order[H];if(S(te)){P[te]=H;for(var ae=0,ge=h;ae<ge.length;ae+=1){var we=ge[ae][te];if(we)for(var ye=0,Le=we;ye<Le.length;ye+=1)O.push(Le[ye])}}}O.sort(function(Gt,Bt){return Bt.intersectionZ-Gt.intersectionZ});for(var Re=[],Ve=this._order.length-1;Ve>=0;Ve--){var De=this._order[Ve];if(S(De))for(var ze=O.length-1;ze>=0;ze--){var Ye=O[ze].feature;if(P[Ye.layer.id]<Ve)break;Re.push(Ye),O.pop()}else for(var ot=0,yt=h;ot<yt.length;ot+=1){var gt=yt[ot][De];if(gt)for(var vt=0,Tt=gt;vt<Tt.length;vt+=1)Re.push(Tt[vt].feature)}}return Re},p.prototype.queryRenderedFeatures=function(h,v,S){v&&v.filter&&this._validate(m.validateStyle.filter,"queryRenderedFeatures.filter",v.filter,null,v);var P={};if(v&&v.layers){if(!Array.isArray(v.layers))return this.fire(new m.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var O=0,H=v.layers;O<H.length;O+=1){var te=H[O],ae=this._layers[te];if(!ae)return this.fire(new m.ErrorEvent(new Error("The layer '"+te+"' does not exist in the map's style and cannot be queried for features."))),[];P[ae.source]=!0}}var ge=[];for(var we in v.availableImages=this._availableImages,this.sourceCaches)v.layers&&!P[we]||ge.push(zt(this.sourceCaches[we],this._layers,this._serializedLayers,h,v,S));return this.placement&&ge.push(function(ye,Le,Re,Ve,De,ze,Ye){for(var ot={},yt=ze.queryRenderedSymbols(Ve),gt=[],vt=0,Tt=Object.keys(yt).map(Number);vt<Tt.length;vt+=1)gt.push(Ye[Tt[vt]]);gt.sort(Sn);for(var Gt=function(){var Rn=$t[Bt],jr=Rn.featureIndex.lookupSymbolFeatures(yt[Rn.bucketInstanceId],Le,Rn.bucketIndex,Rn.sourceLayerIndex,De.filter,De.layers,De.availableImages,ye);for(var un in jr){var er=ot[un]=ot[un]||[],xr=jr[un];xr.sort(function($n,jn){var Ln=Rn.featureSortOrder;if(Ln){var bi=Ln.indexOf($n.featureIndex);return Ln.indexOf(jn.featureIndex)-bi}return jn.featureIndex-$n.featureIndex});for(var tr=0,qn=xr;tr<qn.length;tr+=1)er.push(qn[tr])}},Bt=0,$t=gt;Bt<$t.length;Bt+=1)Gt();var wn=function(Rn){ot[Rn].forEach(function(jr){var un=jr.feature,er=Re[ye[Rn].source].getFeatureState(un.layer["source-layer"],un.id);un.source=un.layer.source,un.layer["source-layer"]&&(un.sourceLayer=un.layer["source-layer"]),un.state=er})};for(var rn in ot)wn(rn);return ot}(this._layers,this._serializedLayers,this.sourceCaches,h,v,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ge)},p.prototype.querySourceFeatures=function(h,v){v&&v.filter&&this._validate(m.validateStyle.filter,"querySourceFeatures.filter",v.filter,null,v);var S=this.sourceCaches[h];return S?function(P,O){for(var H=P.getRenderableIds().map(function(Le){return P.getTileByID(Le)}),te=[],ae={},ge=0;ge<H.length;ge++){var we=H[ge],ye=we.tileID.canonical.key;ae[ye]||(ae[ye]=!0,we.querySourceFeatures(te,O))}return te}(S,v):[]},p.prototype.addSourceType=function(h,v,S){return p.getSourceType(h)?S(new Error('A source type called "'+h+'" already exists.')):(p.setSourceType(h,v),v.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:h,url:v.workerSourceURL},S):S(null,null))},p.prototype.getLight=function(){return this.light.getLight()},p.prototype.setLight=function(h,v){void 0===v&&(v={}),this._checkLoaded();var S=this.light.getLight(),P=!1;for(var O in h)if(!m.deepEqual(h[O],S[O])){P=!0;break}if(P){var H={now:m.browser.now(),transition:m.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(h,v),this.light.updateTransitions(H)}},p.prototype._validate=function(h,v,S,P,O){return void 0===O&&(O={}),(!O||!1!==O.validate)&&da(this,h.call(m.validateStyle,m.extend({key:v,style:this.serialize(),value:S,styleSpec:m.styleSpec},P)))},p.prototype._remove=function(){for(var h in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),m.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[h].setEventedParent(null);for(var v in this.sourceCaches)this.sourceCaches[v].clearTiles(),this.sourceCaches[v].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},p.prototype._clearSource=function(h){this.sourceCaches[h].clearTiles()},p.prototype._reloadSource=function(h){this.sourceCaches[h].resume(),this.sourceCaches[h].reload()},p.prototype._updateSources=function(h){for(var v in this.sourceCaches)this.sourceCaches[v].update(h)},p.prototype._generateCollisionBoxes=function(){for(var h in this.sourceCaches)this._reloadSource(h)},p.prototype._updatePlacement=function(h,v,S,P,O){void 0===O&&(O=!1);for(var H=!1,te=!1,ae={},ge=0,we=this._order;ge<we.length;ge+=1){var ye=this._layers[we[ge]];if("symbol"===ye.type){if(!ae[ye.source]){var Le=this.sourceCaches[ye.source];ae[ye.source]=Le.getRenderableIds(!0).map(function(Ye){return Le.getTileByID(Ye)}).sort(function(Ye,ot){return ot.tileID.overscaledZ-Ye.tileID.overscaledZ||(Ye.tileID.isLessThan(ot.tileID)?-1:1)})}var Re=this.crossTileSymbolIndex.addLayer(ye,ae[ye.source],h.center.lng);H=H||Re}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((O=O||this._layerOrderChanged||0===S)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(m.browser.now(),h.zoom))&&(this.pauseablePlacement=new At(h,this._order,O,v,S,P,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ae),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(m.browser.now()),te=!0),H&&this.pauseablePlacement.placement.setStale()),te||H)for(var Ve=0,De=this._order;Ve<De.length;Ve+=1){var ze=this._layers[De[Ve]];"symbol"===ze.type&&this.placement.updateLayerOpacities(ze,ae[ze.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(m.browser.now())},p.prototype._releaseSymbolFadeTiles=function(){for(var h in this.sourceCaches)this.sourceCaches[h].releaseSymbolFadeTiles()},p.prototype.getImages=function(h,v,S){this.imageManager.getImages(v.icons,S),this._updateTilesForChangedImages();var P=this.sourceCaches[v.source];P&&P.setDependencies(v.tileID.key,v.type,v.icons)},p.prototype.getGlyphs=function(h,v,S){this.glyphManager.getGlyphs(v.stacks,S)},p.prototype.getResource=function(h,v,S){return m.makeRequest(v,S)},p}(m.Evented);Ui.getSourceType=function(f){return xt[f]},Ui.setSourceType=function(f,p){xt[f]=p},Ui.registerForPluginStateChange=m.registerForPluginStateChange;var fa=m.createLayout([{name:"a_pos",type:"Int16",components:2}]),$i=vi("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Oe=vi("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),at=vi("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Nt=vi("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),xn=vi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),pi=vi("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),or=vi("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),dn=vi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),qi=vi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Io=vi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Mr=vi("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),ta=vi("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ha=vi("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Ci=vi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Oi=vi("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),Xr=vi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),ts=vi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Ii=vi("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),_r=vi("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ns=vi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Ss=vi("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Go=vi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),Br=vi("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),js=vi("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),Us=vi("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),_u=vi("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function vi(f,p){var h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=p.match(/attribute ([\w]+) ([\w]+)/g),S=f.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),O=P?P.concat(S):S,H={};return{fragmentSource:f=f.replace(h,function(te,ae,ge,we,ye){return H[ye]=!0,"define"===ae?"\n#ifndef HAS_UNIFORM_u_"+ye+"\nvarying "+ge+" "+we+" "+ye+";\n#else\nuniform "+ge+" "+we+" u_"+ye+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+ye+"\n    "+ge+" "+we+" "+ye+" = u_"+ye+";\n#endif\n"}),vertexSource:p=p.replace(h,function(te,ae,ge,we,ye){var Le="float"===we?"vec2":"vec4",Re=ye.match(/color/)?"color":Le;return H[ye]?"define"===ae?"\n#ifndef HAS_UNIFORM_u_"+ye+"\nuniform lowp float u_"+ye+"_t;\nattribute "+ge+" "+Le+" a_"+ye+";\nvarying "+ge+" "+we+" "+ye+";\n#else\nuniform "+ge+" "+we+" u_"+ye+";\n#endif\n":"vec4"===Re?"\n#ifndef HAS_UNIFORM_u_"+ye+"\n    "+ye+" = a_"+ye+";\n#else\n    "+ge+" "+we+" "+ye+" = u_"+ye+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+ye+"\n    "+ye+" = unpack_mix_"+Re+"(a_"+ye+", u_"+ye+"_t);\n#else\n    "+ge+" "+we+" "+ye+" = u_"+ye+";\n#endif\n":"define"===ae?"\n#ifndef HAS_UNIFORM_u_"+ye+"\nuniform lowp float u_"+ye+"_t;\nattribute "+ge+" "+Le+" a_"+ye+";\n#else\nuniform "+ge+" "+we+" u_"+ye+";\n#endif\n":"vec4"===Re?"\n#ifndef HAS_UNIFORM_u_"+ye+"\n    "+ge+" "+we+" "+ye+" = a_"+ye+";\n#else\n    "+ge+" "+we+" "+ye+" = u_"+ye+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+ye+"\n    "+ge+" "+we+" "+ye+" = unpack_mix_"+Re+"(a_"+ye+", u_"+ye+"_t);\n#else\n    "+ge+" "+we+" "+ye+" = u_"+ye+";\n#endif\n"}),staticAttributes:v,staticUniforms:O}}var To=Object.freeze({__proto__:null,prelude:$i,background:Oe,backgroundPattern:at,circle:Nt,clippingMask:xn,heatmap:pi,heatmapTexture:or,collisionBox:dn,collisionCircle:qi,debug:Io,fill:Mr,fillOutline:ta,fillOutlinePattern:ha,fillPattern:Ci,fillExtrusion:Oi,fillExtrusionPattern:Xr,hillshadePrepare:ts,hillshade:Ii,line:_r,lineGradient:ns,linePattern:Ss,lineSDF:Go,raster:Br,symbolIcon:js,symbolSDF:Us,symbolTextAndIcon:_u}),pa=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function ml(f){for(var p=[],h=0;h<f.length;h++)if(null!==f[h]){var v=f[h].split(" ");p.push(v.pop())}return p}pa.prototype.bind=function(f,p,h,v,S,P,O,H){this.context=f;for(var te=this.boundPaintVertexBuffers.length!==v.length,ae=0;!te&&ae<v.length;ae++)this.boundPaintVertexBuffers[ae]!==v[ae]&&(te=!0);f.extVertexArrayObject&&this.vao&&this.boundProgram===p&&this.boundLayoutVertexBuffer===h&&!te&&this.boundIndexBuffer===S&&this.boundVertexOffset===P&&this.boundDynamicVertexBuffer===O&&this.boundDynamicVertexBuffer2===H?(f.bindVertexArrayOES.set(this.vao),O&&O.bind(),S&&S.dynamicDraw&&S.bind(),H&&H.bind()):this.freshBind(p,h,v,S,P,O,H)},pa.prototype.freshBind=function(f,p,h,v,S,P,O){var H,te=f.numAttributes,ae=this.context,ge=ae.gl;if(ae.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ae.extVertexArrayObject.createVertexArrayOES(),ae.bindVertexArrayOES.set(this.vao),H=0,this.boundProgram=f,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=v,this.boundVertexOffset=S,this.boundDynamicVertexBuffer=P,this.boundDynamicVertexBuffer2=O;else{H=ae.currentNumAttributes||0;for(var we=te;we<H;we++)ge.disableVertexAttribArray(we)}p.enableAttributes(ge,f);for(var ye=0,Le=h;ye<Le.length;ye+=1)Le[ye].enableAttributes(ge,f);P&&P.enableAttributes(ge,f),O&&O.enableAttributes(ge,f),p.bind(),p.setVertexAttribPointers(ge,f,S);for(var Re=0,Ve=h;Re<Ve.length;Re+=1){var De=Ve[Re];De.bind(),De.setVertexAttribPointers(ge,f,S)}P&&(P.bind(),P.setVertexAttribPointers(ge,f,S)),v&&v.bind(),O&&(O.bind(),O.setVertexAttribPointers(ge,f,S)),ae.currentNumAttributes=te},pa.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var gl=function(f,p,h,v,S,P){var O=f.gl;this.program=O.createProgram();for(var H=ml(h.staticAttributes),te=v?v.getBinderAttributes():[],ae=H.concat(te),ge=h.staticUniforms?ml(h.staticUniforms):[],we=v?v.getBinderUniforms():[],ye=[],Le=0,Re=ge.concat(we);Le<Re.length;Le+=1){var Ve=Re[Le];ye.indexOf(Ve)<0&&ye.push(Ve)}var De=v?v.defines():[];P&&De.push("#define OVERDRAW_INSPECTOR;");var ze=De.concat($i.fragmentSource,h.fragmentSource).join("\n"),Ye=De.concat($i.vertexSource,h.vertexSource).join("\n"),ot=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())this.failedToCreate=!0;else{O.shaderSource(ot,ze),O.compileShader(ot),O.attachShader(this.program,ot);var yt=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())this.failedToCreate=!0;else{O.shaderSource(yt,Ye),O.compileShader(yt),O.attachShader(this.program,yt),this.attributes={};var gt={};this.numAttributes=ae.length;for(var vt=0;vt<this.numAttributes;vt++)ae[vt]&&(O.bindAttribLocation(this.program,vt,ae[vt]),this.attributes[ae[vt]]=vt);O.linkProgram(this.program),O.deleteShader(yt),O.deleteShader(ot);for(var Tt=0;Tt<ye.length;Tt++){var Gt=ye[Tt];if(Gt&&!gt[Gt]){var Bt=O.getUniformLocation(this.program,Gt);Bt&&(gt[Gt]=Bt)}}this.fixedUniforms=S(f,gt),this.binderUniforms=v?v.getUniforms(f,gt):[]}}};function Qs(f,p,h){var v=1/Co(h,1,p.transform.tileZoom),S=Math.pow(2,h.tileID.overscaledZ),P=h.tileSize*Math.pow(2,p.transform.tileZoom)/S,O=P*(h.tileID.canonical.x+h.tileID.wrap*S),H=P*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[v,f.fromScale,f.toScale],u_fade:f.t,u_pixel_coord_upper:[O>>16,H>>16],u_pixel_coord_lower:[65535&O,65535&H]}}gl.prototype.draw=function(f,p,h,v,S,P,O,H,te,ae,ge,we,ye,Le,Re,Ve){var De,ze=f.gl;if(!this.failedToCreate){for(var Ye in f.program.set(this.program),f.setDepthMode(h),f.setStencilMode(v),f.setColorMode(S),f.setCullFace(P),this.fixedUniforms)this.fixedUniforms[Ye].set(O[Ye]);Le&&Le.setUniforms(f,this.binderUniforms,we,{zoom:ye});for(var ot=(De={},De[ze.LINES]=2,De[ze.TRIANGLES]=3,De[ze.LINE_STRIP]=1,De)[p],yt=0,gt=ge.get();yt<gt.length;yt+=1){var vt=gt[yt],Tt=vt.vaos||(vt.vaos={});(Tt[H]||(Tt[H]=new pa)).bind(f,this,te,Le?Le.getPaintVertexBuffers():[],ae,vt.vertexOffset,Re,Ve),ze.drawElements(p,vt.primitiveLength*ot,ze.UNSIGNED_SHORT,vt.primitiveOffset*ot*2)}}};var yc=function(f,p,h,v){var S=p.style.light,P=S.properties.get("position"),O=[P.x,P.y,P.z],H=m.create$1();"viewport"===S.properties.get("anchor")&&m.fromRotation(H,-p.transform.angle),m.transformMat3(O,O,H);var te=S.properties.get("color");return{u_matrix:f,u_lightpos:O,u_lightintensity:S.properties.get("intensity"),u_lightcolor:[te.r,te.g,te.b],u_vertical_gradient:+h,u_opacity:v}},bu=function(f,p,h,v,S,P,O){return m.extend(yc(f,p,h,v),Qs(P,p,O),{u_height_factor:-Math.pow(2,S.overscaledZ)/O.tileSize/8})},ms=function(f){return{u_matrix:f}},Sa=function(f,p,h,v){return m.extend(ms(f),Qs(h,p,v))},Ll=function(f,p){return{u_matrix:f,u_world:p}},vc=function(f,p,h,v,S){return m.extend(Sa(f,p,h,v),{u_world:S})},na=function(f,p,h,v){var S,P,O=f.transform;if("map"===v.paint.get("circle-pitch-alignment")){var H=Co(h,1,O.zoom);S=!0,P=[H,H]}else S=!1,P=O.pixelsToGLUnits;return{u_camera_to_center_distance:O.cameraToCenterDistance,u_scale_with_map:+("map"===v.paint.get("circle-pitch-scale")),u_matrix:f.translatePosMatrix(p.posMatrix,h,v.paint.get("circle-translate"),v.paint.get("circle-translate-anchor")),u_pitch_with_map:+S,u_device_pixel_ratio:m.browser.devicePixelRatio,u_extrude_scale:P}},ra=function(f,p,h){var v=Co(h,1,p.zoom),S=Math.pow(2,p.zoom-h.tileID.overscaledZ),P=h.tileID.overscaleFactor();return{u_matrix:f,u_camera_to_center_distance:p.cameraToCenterDistance,u_pixels_to_tile_units:v,u_extrude_scale:[p.pixelsToGLUnits[0]/(v*S),p.pixelsToGLUnits[1]/(v*S)],u_overscale_factor:P}},Qr=function(f,p,h){return{u_matrix:f,u_inv_matrix:p,u_camera_to_center_distance:h.cameraToCenterDistance,u_viewport_size:[h.width,h.height]}},Po=function(f,p,h){return void 0===h&&(h=1),{u_matrix:f,u_color:p,u_overlay:0,u_overlay_scale:h}},Vi=function(f){return{u_matrix:f}},Ho=function(f,p,h,v){return{u_matrix:f,u_extrude_scale:Co(p,1,h),u_intensity:v}},ao=function(f,p,h){var v=f.transform;return{u_matrix:Ca(f,p,h),u_ratio:1/Co(p,1,v.zoom),u_device_pixel_ratio:m.browser.devicePixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},_n=function(f,p,h,v){return m.extend(ao(f,p,h),{u_image:0,u_image_height:v})},pn=function(f,p,h,v){var S=f.transform,P=Ua(p,S);return{u_matrix:Ca(f,p,h),u_texsize:p.imageAtlasTexture.size,u_ratio:1/Co(p,1,S.zoom),u_device_pixel_ratio:m.browser.devicePixelRatio,u_image:0,u_scale:[P,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},Pi=function(f,p,h,v,S){var P=f.lineAtlas,O=Ua(p,f.transform),H="round"===h.layout.get("line-cap"),te=P.getDash(v.from,H),ae=P.getDash(v.to,H),ge=te.width*S.fromScale,we=ae.width*S.toScale;return m.extend(ao(f,p,h),{u_patternscale_a:[O/ge,-te.height/2],u_patternscale_b:[O/we,-ae.height/2],u_sdfgamma:P.width/(256*Math.min(ge,we)*m.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:te.y,u_tex_y_b:ae.y,u_mix:S.t})};function Ua(f,p){return 1/Co(f,1,p.tileZoom)}function Ca(f,p,h){return f.translatePosMatrix(p.tileID.posMatrix,p,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}var Do=function(f,p,h,v,S){return{u_matrix:f,u_tl_parent:p,u_scale_parent:h,u_buffer_scale:1,u_fade_t:v.mix,u_opacity:v.opacity*S.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:S.paint.get("raster-brightness-min"),u_brightness_high:S.paint.get("raster-brightness-max"),u_saturation_factor:(O=S.paint.get("raster-saturation"),O>0?1-1/(1.001-O):-O),u_contrast_factor:(P=S.paint.get("raster-contrast"),P>0?1/(1-P):1+P),u_spin_weights:yl(S.paint.get("raster-hue-rotate"))};var P,O};function yl(f){f*=Math.PI/180;var p=Math.sin(f),h=Math.cos(f);return[(2*h+1)/3,(-Math.sqrt(3)*p-h+1)/3,(Math.sqrt(3)*p-h+1)/3]}var Di,Nl=function(f,p,h,v,S,P,O,H,te,ae){var ge=S.transform;return{u_is_size_zoom_constant:+("constant"===f||"source"===f),u_is_size_feature_constant:+("constant"===f||"camera"===f),u_size_t:p?p.uSizeT:0,u_size:p?p.uSize:0,u_camera_to_center_distance:ge.cameraToCenterDistance,u_pitch:ge.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:ge.width/ge.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:P,u_label_plane_matrix:O,u_coord_matrix:H,u_is_text:+te,u_pitch_with_map:+v,u_texsize:ae,u_texture:0}},Ia=function(f,p,h,v,S,P,O,H,te,ae,ge){var we=S.transform;return m.extend(Nl(f,p,h,v,S,P,O,H,te,ae),{u_gamma_scale:v?Math.cos(we._pitch)*we.cameraToCenterDistance:1,u_device_pixel_ratio:m.browser.devicePixelRatio,u_is_halo:+ge})},br=function(f,p,h,v,S,P,O,H,te,ae){return m.extend(Ia(f,p,h,v,S,P,O,H,!0,te,!0),{u_texsize_icon:ae,u_texture_icon:1})},kl=function(f,p,h){return{u_matrix:f,u_opacity:p,u_color:h}},rt=function(f,p,h,v,S,P){return m.extend((H=P,ae=S,ge=(te=h).imageManager.getPattern((O=v).from.toString()),we=te.imageManager.getPattern(O.to.toString()),Le=(ye=te.imageManager.getPixelSize()).width,Re=ye.height,Ve=Math.pow(2,ae.tileID.overscaledZ),ze=(De=ae.tileSize*Math.pow(2,te.transform.tileZoom)/Ve)*(ae.tileID.canonical.x+ae.tileID.wrap*Ve),Ye=De*ae.tileID.canonical.y,{u_image:0,u_pattern_tl_a:ge.tl,u_pattern_br_a:ge.br,u_pattern_tl_b:we.tl,u_pattern_br_b:we.br,u_texsize:[Le,Re],u_mix:H.t,u_pattern_size_a:ge.displaySize,u_pattern_size_b:we.displaySize,u_scale_a:H.fromScale,u_scale_b:H.toScale,u_tile_units_to_pixels:1/Co(ae,1,te.transform.tileZoom),u_pixel_coord_upper:[ze>>16,Ye>>16],u_pixel_coord_lower:[65535&ze,65535&Ye]}),{u_matrix:f,u_opacity:p});var O,H,te,ae,ge,we,ye,Le,Re,Ve,De,ze,Ye},_t={fillExtrusion:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_lightpos:new m.Uniform3f(f,p.u_lightpos),u_lightintensity:new m.Uniform1f(f,p.u_lightintensity),u_lightcolor:new m.Uniform3f(f,p.u_lightcolor),u_vertical_gradient:new m.Uniform1f(f,p.u_vertical_gradient),u_opacity:new m.Uniform1f(f,p.u_opacity)}},fillExtrusionPattern:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_lightpos:new m.Uniform3f(f,p.u_lightpos),u_lightintensity:new m.Uniform1f(f,p.u_lightintensity),u_lightcolor:new m.Uniform3f(f,p.u_lightcolor),u_vertical_gradient:new m.Uniform1f(f,p.u_vertical_gradient),u_height_factor:new m.Uniform1f(f,p.u_height_factor),u_image:new m.Uniform1i(f,p.u_image),u_texsize:new m.Uniform2f(f,p.u_texsize),u_pixel_coord_upper:new m.Uniform2f(f,p.u_pixel_coord_upper),u_pixel_coord_lower:new m.Uniform2f(f,p.u_pixel_coord_lower),u_scale:new m.Uniform3f(f,p.u_scale),u_fade:new m.Uniform1f(f,p.u_fade),u_opacity:new m.Uniform1f(f,p.u_opacity)}},fill:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix)}},fillPattern:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_image:new m.Uniform1i(f,p.u_image),u_texsize:new m.Uniform2f(f,p.u_texsize),u_pixel_coord_upper:new m.Uniform2f(f,p.u_pixel_coord_upper),u_pixel_coord_lower:new m.Uniform2f(f,p.u_pixel_coord_lower),u_scale:new m.Uniform3f(f,p.u_scale),u_fade:new m.Uniform1f(f,p.u_fade)}},fillOutline:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_world:new m.Uniform2f(f,p.u_world)}},fillOutlinePattern:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_world:new m.Uniform2f(f,p.u_world),u_image:new m.Uniform1i(f,p.u_image),u_texsize:new m.Uniform2f(f,p.u_texsize),u_pixel_coord_upper:new m.Uniform2f(f,p.u_pixel_coord_upper),u_pixel_coord_lower:new m.Uniform2f(f,p.u_pixel_coord_lower),u_scale:new m.Uniform3f(f,p.u_scale),u_fade:new m.Uniform1f(f,p.u_fade)}},circle:function(f,p){return{u_camera_to_center_distance:new m.Uniform1f(f,p.u_camera_to_center_distance),u_scale_with_map:new m.Uniform1i(f,p.u_scale_with_map),u_pitch_with_map:new m.Uniform1i(f,p.u_pitch_with_map),u_extrude_scale:new m.Uniform2f(f,p.u_extrude_scale),u_device_pixel_ratio:new m.Uniform1f(f,p.u_device_pixel_ratio),u_matrix:new m.UniformMatrix4f(f,p.u_matrix)}},collisionBox:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_camera_to_center_distance:new m.Uniform1f(f,p.u_camera_to_center_distance),u_pixels_to_tile_units:new m.Uniform1f(f,p.u_pixels_to_tile_units),u_extrude_scale:new m.Uniform2f(f,p.u_extrude_scale),u_overscale_factor:new m.Uniform1f(f,p.u_overscale_factor)}},collisionCircle:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_inv_matrix:new m.UniformMatrix4f(f,p.u_inv_matrix),u_camera_to_center_distance:new m.Uniform1f(f,p.u_camera_to_center_distance),u_viewport_size:new m.Uniform2f(f,p.u_viewport_size)}},debug:function(f,p){return{u_color:new m.UniformColor(f,p.u_color),u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_overlay:new m.Uniform1i(f,p.u_overlay),u_overlay_scale:new m.Uniform1f(f,p.u_overlay_scale)}},clippingMask:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix)}},heatmap:function(f,p){return{u_extrude_scale:new m.Uniform1f(f,p.u_extrude_scale),u_intensity:new m.Uniform1f(f,p.u_intensity),u_matrix:new m.UniformMatrix4f(f,p.u_matrix)}},heatmapTexture:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_world:new m.Uniform2f(f,p.u_world),u_image:new m.Uniform1i(f,p.u_image),u_color_ramp:new m.Uniform1i(f,p.u_color_ramp),u_opacity:new m.Uniform1f(f,p.u_opacity)}},hillshade:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_image:new m.Uniform1i(f,p.u_image),u_latrange:new m.Uniform2f(f,p.u_latrange),u_light:new m.Uniform2f(f,p.u_light),u_shadow:new m.UniformColor(f,p.u_shadow),u_highlight:new m.UniformColor(f,p.u_highlight),u_accent:new m.UniformColor(f,p.u_accent)}},hillshadePrepare:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_image:new m.Uniform1i(f,p.u_image),u_dimension:new m.Uniform2f(f,p.u_dimension),u_zoom:new m.Uniform1f(f,p.u_zoom),u_unpack:new m.Uniform4f(f,p.u_unpack)}},line:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_ratio:new m.Uniform1f(f,p.u_ratio),u_device_pixel_ratio:new m.Uniform1f(f,p.u_device_pixel_ratio),u_units_to_pixels:new m.Uniform2f(f,p.u_units_to_pixels)}},lineGradient:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_ratio:new m.Uniform1f(f,p.u_ratio),u_device_pixel_ratio:new m.Uniform1f(f,p.u_device_pixel_ratio),u_units_to_pixels:new m.Uniform2f(f,p.u_units_to_pixels),u_image:new m.Uniform1i(f,p.u_image),u_image_height:new m.Uniform1f(f,p.u_image_height)}},linePattern:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_texsize:new m.Uniform2f(f,p.u_texsize),u_ratio:new m.Uniform1f(f,p.u_ratio),u_device_pixel_ratio:new m.Uniform1f(f,p.u_device_pixel_ratio),u_image:new m.Uniform1i(f,p.u_image),u_units_to_pixels:new m.Uniform2f(f,p.u_units_to_pixels),u_scale:new m.Uniform3f(f,p.u_scale),u_fade:new m.Uniform1f(f,p.u_fade)}},lineSDF:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_ratio:new m.Uniform1f(f,p.u_ratio),u_device_pixel_ratio:new m.Uniform1f(f,p.u_device_pixel_ratio),u_units_to_pixels:new m.Uniform2f(f,p.u_units_to_pixels),u_patternscale_a:new m.Uniform2f(f,p.u_patternscale_a),u_patternscale_b:new m.Uniform2f(f,p.u_patternscale_b),u_sdfgamma:new m.Uniform1f(f,p.u_sdfgamma),u_image:new m.Uniform1i(f,p.u_image),u_tex_y_a:new m.Uniform1f(f,p.u_tex_y_a),u_tex_y_b:new m.Uniform1f(f,p.u_tex_y_b),u_mix:new m.Uniform1f(f,p.u_mix)}},raster:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_tl_parent:new m.Uniform2f(f,p.u_tl_parent),u_scale_parent:new m.Uniform1f(f,p.u_scale_parent),u_buffer_scale:new m.Uniform1f(f,p.u_buffer_scale),u_fade_t:new m.Uniform1f(f,p.u_fade_t),u_opacity:new m.Uniform1f(f,p.u_opacity),u_image0:new m.Uniform1i(f,p.u_image0),u_image1:new m.Uniform1i(f,p.u_image1),u_brightness_low:new m.Uniform1f(f,p.u_brightness_low),u_brightness_high:new m.Uniform1f(f,p.u_brightness_high),u_saturation_factor:new m.Uniform1f(f,p.u_saturation_factor),u_contrast_factor:new m.Uniform1f(f,p.u_contrast_factor),u_spin_weights:new m.Uniform3f(f,p.u_spin_weights)}},symbolIcon:function(f,p){return{u_is_size_zoom_constant:new m.Uniform1i(f,p.u_is_size_zoom_constant),u_is_size_feature_constant:new m.Uniform1i(f,p.u_is_size_feature_constant),u_size_t:new m.Uniform1f(f,p.u_size_t),u_size:new m.Uniform1f(f,p.u_size),u_camera_to_center_distance:new m.Uniform1f(f,p.u_camera_to_center_distance),u_pitch:new m.Uniform1f(f,p.u_pitch),u_rotate_symbol:new m.Uniform1i(f,p.u_rotate_symbol),u_aspect_ratio:new m.Uniform1f(f,p.u_aspect_ratio),u_fade_change:new m.Uniform1f(f,p.u_fade_change),u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_label_plane_matrix:new m.UniformMatrix4f(f,p.u_label_plane_matrix),u_coord_matrix:new m.UniformMatrix4f(f,p.u_coord_matrix),u_is_text:new m.Uniform1i(f,p.u_is_text),u_pitch_with_map:new m.Uniform1i(f,p.u_pitch_with_map),u_texsize:new m.Uniform2f(f,p.u_texsize),u_texture:new m.Uniform1i(f,p.u_texture)}},symbolSDF:function(f,p){return{u_is_size_zoom_constant:new m.Uniform1i(f,p.u_is_size_zoom_constant),u_is_size_feature_constant:new m.Uniform1i(f,p.u_is_size_feature_constant),u_size_t:new m.Uniform1f(f,p.u_size_t),u_size:new m.Uniform1f(f,p.u_size),u_camera_to_center_distance:new m.Uniform1f(f,p.u_camera_to_center_distance),u_pitch:new m.Uniform1f(f,p.u_pitch),u_rotate_symbol:new m.Uniform1i(f,p.u_rotate_symbol),u_aspect_ratio:new m.Uniform1f(f,p.u_aspect_ratio),u_fade_change:new m.Uniform1f(f,p.u_fade_change),u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_label_plane_matrix:new m.UniformMatrix4f(f,p.u_label_plane_matrix),u_coord_matrix:new m.UniformMatrix4f(f,p.u_coord_matrix),u_is_text:new m.Uniform1i(f,p.u_is_text),u_pitch_with_map:new m.Uniform1i(f,p.u_pitch_with_map),u_texsize:new m.Uniform2f(f,p.u_texsize),u_texture:new m.Uniform1i(f,p.u_texture),u_gamma_scale:new m.Uniform1f(f,p.u_gamma_scale),u_device_pixel_ratio:new m.Uniform1f(f,p.u_device_pixel_ratio),u_is_halo:new m.Uniform1i(f,p.u_is_halo)}},symbolTextAndIcon:function(f,p){return{u_is_size_zoom_constant:new m.Uniform1i(f,p.u_is_size_zoom_constant),u_is_size_feature_constant:new m.Uniform1i(f,p.u_is_size_feature_constant),u_size_t:new m.Uniform1f(f,p.u_size_t),u_size:new m.Uniform1f(f,p.u_size),u_camera_to_center_distance:new m.Uniform1f(f,p.u_camera_to_center_distance),u_pitch:new m.Uniform1f(f,p.u_pitch),u_rotate_symbol:new m.Uniform1i(f,p.u_rotate_symbol),u_aspect_ratio:new m.Uniform1f(f,p.u_aspect_ratio),u_fade_change:new m.Uniform1f(f,p.u_fade_change),u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_label_plane_matrix:new m.UniformMatrix4f(f,p.u_label_plane_matrix),u_coord_matrix:new m.UniformMatrix4f(f,p.u_coord_matrix),u_is_text:new m.Uniform1i(f,p.u_is_text),u_pitch_with_map:new m.Uniform1i(f,p.u_pitch_with_map),u_texsize:new m.Uniform2f(f,p.u_texsize),u_texsize_icon:new m.Uniform2f(f,p.u_texsize_icon),u_texture:new m.Uniform1i(f,p.u_texture),u_texture_icon:new m.Uniform1i(f,p.u_texture_icon),u_gamma_scale:new m.Uniform1f(f,p.u_gamma_scale),u_device_pixel_ratio:new m.Uniform1f(f,p.u_device_pixel_ratio),u_is_halo:new m.Uniform1i(f,p.u_is_halo)}},background:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_opacity:new m.Uniform1f(f,p.u_opacity),u_color:new m.UniformColor(f,p.u_color)}},backgroundPattern:function(f,p){return{u_matrix:new m.UniformMatrix4f(f,p.u_matrix),u_opacity:new m.Uniform1f(f,p.u_opacity),u_image:new m.Uniform1i(f,p.u_image),u_pattern_tl_a:new m.Uniform2f(f,p.u_pattern_tl_a),u_pattern_br_a:new m.Uniform2f(f,p.u_pattern_br_a),u_pattern_tl_b:new m.Uniform2f(f,p.u_pattern_tl_b),u_pattern_br_b:new m.Uniform2f(f,p.u_pattern_br_b),u_texsize:new m.Uniform2f(f,p.u_texsize),u_mix:new m.Uniform1f(f,p.u_mix),u_pattern_size_a:new m.Uniform2f(f,p.u_pattern_size_a),u_pattern_size_b:new m.Uniform2f(f,p.u_pattern_size_b),u_scale_a:new m.Uniform1f(f,p.u_scale_a),u_scale_b:new m.Uniform1f(f,p.u_scale_b),u_pixel_coord_upper:new m.Uniform2f(f,p.u_pixel_coord_upper),u_pixel_coord_lower:new m.Uniform2f(f,p.u_pixel_coord_lower),u_tile_units_to_pixels:new m.Uniform1f(f,p.u_tile_units_to_pixels)}}};function Xt(f,p,h,v,S,P,O){for(var H=f.context,te=H.gl,ae=f.useProgram("collisionBox"),ge=[],we=0,ye=0,Le=0;Le<v.length;Le++){var Re=v[Le],Ve=p.getTile(Re),De=Ve.getBucket(h);if(De){var ze=Re.posMatrix;0===S[0]&&0===S[1]||(ze=f.translatePosMatrix(Re.posMatrix,Ve,S,P));var Ye=O?De.textCollisionBox:De.iconCollisionBox,ot=De.collisionCircleArray;if(ot.length>0){var yt=m.create(),gt=ze;m.mul(yt,De.placementInvProjMatrix,f.transform.glCoordMatrix),m.mul(yt,yt,De.placementViewportMatrix),ge.push({circleArray:ot,circleOffset:ye,transform:gt,invTransform:yt}),ye=we+=ot.length/4}Ye&&ae.draw(H,te.LINES,ve.disabled,Te.disabled,f.colorModeForRenderPass(),Xe.disabled,ra(ze,f.transform,Ve),h.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,null,f.transform.zoom,null,null,Ye.collisionVertexBuffer)}}if(O&&ge.length){var vt=f.useProgram("collisionCircle"),Tt=new m.StructArrayLayout2f1f2i16;Tt.resize(4*we),Tt._trim();for(var Gt=0,Bt=0,$t=ge;Bt<$t.length;Bt+=1)for(var wn=$t[Bt],rn=0;rn<wn.circleArray.length/4;rn++){var Rn=4*rn,jr=wn.circleArray[Rn+0],un=wn.circleArray[Rn+1],er=wn.circleArray[Rn+2],xr=wn.circleArray[Rn+3];Tt.emplace(Gt++,jr,un,er,xr,0),Tt.emplace(Gt++,jr,un,er,xr,1),Tt.emplace(Gt++,jr,un,er,xr,2),Tt.emplace(Gt++,jr,un,er,xr,3)}(!Di||Di.length<2*we)&&(Di=function(mo){var go=2*mo,uo=new m.StructArrayLayout3ui6;uo.resize(go),uo._trim();for(var Zo=0;Zo<go;Zo++){var yo=6*Zo;uo.uint16[yo+0]=4*Zo+0,uo.uint16[yo+1]=4*Zo+1,uo.uint16[yo+2]=4*Zo+2,uo.uint16[yo+3]=4*Zo+2,uo.uint16[yo+4]=4*Zo+3,uo.uint16[yo+5]=4*Zo+0}return uo}(we));for(var tr=H.createIndexBuffer(Di,!0),qn=H.createVertexBuffer(Tt,m.collisionCircleLayout.members,!0),$n=0,jn=ge;$n<jn.length;$n+=1){var Ln=jn[$n],bi=Qr(Ln.transform,Ln.invTransform,f.transform);vt.draw(H,te.TRIANGLES,ve.disabled,Te.disabled,f.colorModeForRenderPass(),Xe.disabled,bi,h.id,qn,tr,m.SegmentVector.simpleSegment(0,2*Ln.circleOffset,Ln.circleArray.length,Ln.circleArray.length/2),null,f.transform.zoom,null,null,null)}qn.destroy(),tr.destroy()}}var mn=m.identity(new Float32Array(16));function Lr(f,p,h,v,S,P){var O=m.getAnchorAlignment(f),H=-(O.horizontalAlign-.5)*p,te=-(O.verticalAlign-.5)*h,ae=m.evaluateVariableOffset(f,v);return new m.Point((H/S+ae[0])*P,(te/S+ae[1])*P)}function Ar(f,p,h,v,S,P,O,H,te,ae,ge){var we=f.text.placedSymbolArray,ye=f.text.dynamicLayoutVertexArray,Le=f.icon.dynamicLayoutVertexArray,Re={};ye.clear();for(var Ve=0;Ve<we.length;Ve++){var De=we.get(Ve),ze=De.hidden||!De.crossTileID||f.allowVerticalPlacement&&!De.placedOrientation?null:v[De.crossTileID];if(ze){var Ye=new m.Point(De.anchorX,De.anchorY),ot=On(Ye,h?H:O),yt=Bi(P.cameraToCenterDistance,ot.signedDistanceFromCamera),gt=S.evaluateSizeForFeature(f.textSizeData,ae,De)*yt/m.ONE_EM;h&&(gt*=f.tilePixelRatio/te);for(var vt=Lr(ze.anchor,ze.width,ze.height,ze.textOffset,ze.textBoxScale,gt),Tt=h?On(Ye.add(vt),O).point:ot.point.add(p?vt.rotate(-P.angle):vt),Gt=f.allowVerticalPlacement&&De.placedOrientation===m.WritingMode.vertical?Math.PI/2:0,Bt=0;Bt<De.numGlyphs;Bt++)m.addDynamicAttributes(ye,Tt,Gt);ge&&De.associatedIconIndex>=0&&(Re[De.associatedIconIndex]={shiftedAnchor:Tt,angle:Gt})}else ps(De.numGlyphs,ye)}if(ge){Le.clear();for(var $t=f.icon.placedSymbolArray,wn=0;wn<$t.length;wn++){var rn=$t.get(wn);if(rn.hidden)ps(rn.numGlyphs,Le);else{var Rn=Re[wn];if(Rn)for(var jr=0;jr<rn.numGlyphs;jr++)m.addDynamicAttributes(Le,Rn.shiftedAnchor,Rn.angle);else ps(rn.numGlyphs,Le)}}f.icon.dynamicLayoutVertexBuffer.updateData(Le)}f.text.dynamicLayoutVertexBuffer.updateData(ye)}function ii(f,p,h){return h.iconsInText&&p?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function Li(f,p,h,v,S,P,O,H,te,ae,ge,we){for(var ye=f.context,Le=ye.gl,Re=f.transform,Ve="map"===H,De="map"===te,ze=Ve&&"point"!==h.layout.get("symbol-placement"),Ye=Ve&&!De&&!ze,ot=!h.layout.get("symbol-sort-key").isConstant(),yt=!1,gt=f.depthModeForSublayer(0,ve.ReadOnly),vt=h.layout.get("text-variable-anchor"),Tt=[],Gt=0,Bt=v;Gt<Bt.length;Gt+=1){var $t=Bt[Gt],wn=p.getTile($t),rn=wn.getBucket(h);if(rn){var Rn=S?rn.text:rn.icon;if(Rn&&Rn.segments.get().length){var jr=Rn.programConfigurations.get(h.id),un=S||rn.sdfIcons,er=S?rn.textSizeData:rn.iconSizeData,xr=De||0!==Re.pitch,tr=f.useProgram(ii(un,S,rn),jr),qn=m.evaluateSizeForZoom(er,Re.zoom),$n=void 0,jn=[0,0],Ln=void 0,bi=void 0,mo=null,go=void 0;if(S)Ln=wn.glyphAtlasTexture,bi=Le.LINEAR,$n=wn.glyphAtlasTexture.size,rn.iconsInText&&(jn=wn.imageAtlasTexture.size,mo=wn.imageAtlasTexture,go=xr||f.options.rotating||f.options.zooming||"composite"===er.kind||"camera"===er.kind?Le.LINEAR:Le.NEAREST);else{var uo=1!==h.layout.get("icon-size").constantOr(0)||rn.iconsNeedLinear;Ln=wn.imageAtlasTexture,bi=un||f.options.rotating||f.options.zooming||uo||xr?Le.LINEAR:Le.NEAREST,$n=wn.imageAtlasTexture.size}var Zo=Co(wn,1,f.transform.zoom),yo=Si($t.posMatrix,De,Ve,f.transform,Zo),ko=Gr($t.posMatrix,De,Ve,f.transform,Zo),qs=vt&&rn.hasTextData(),Ga="none"!==h.layout.get("icon-text-fit")&&qs&&rn.hasIconData();ze&&Eo(rn,$t.posMatrix,f,S,yo,ko,De,ae);var Ha=f.translatePosMatrix($t.posMatrix,wn,P,O),jl=ze||S&&vt||Ga?mn:yo,Ws=f.translatePosMatrix(ko,wn,P,O,!0),Qu=un&&0!==h.paint.get(S?"text-halo-width":"icon-halo-width").constantOr(1),Ul={program:tr,buffers:Rn,uniformValues:un?rn.iconsInText?br(er.kind,qn,Ye,De,f,Ha,jl,Ws,$n,jn):Ia(er.kind,qn,Ye,De,f,Ha,jl,Ws,S,$n,!0):Nl(er.kind,qn,Ye,De,f,Ha,jl,Ws,S,$n),atlasTexture:Ln,atlasTextureIcon:mo,atlasInterpolation:bi,atlasInterpolationIcon:go,isSDF:un,hasHalo:Qu};if(ot&&rn.canOverlap){yt=!0;for(var ou=0,wl=Rn.segments.get();ou<wl.length;ou+=1){var ec=wl[ou];Tt.push({segments:new m.SegmentVector([ec]),sortKey:ec.sortKey,state:Ul})}}else Tt.push({segments:Rn.segments,sortKey:0,state:Ul})}}}yt&&Tt.sort(function(_s,nc){return _s.sortKey-nc.sortKey});for(var Pu=0,as=Tt;Pu<as.length;Pu+=1){var tc=as[Pu],Xi=tc.state;if(ye.activeTexture.set(Le.TEXTURE0),Xi.atlasTexture.bind(Xi.atlasInterpolation,Le.CLAMP_TO_EDGE),Xi.atlasTextureIcon&&(ye.activeTexture.set(Le.TEXTURE1),Xi.atlasTextureIcon&&Xi.atlasTextureIcon.bind(Xi.atlasInterpolationIcon,Le.CLAMP_TO_EDGE)),Xi.isSDF){var ol=Xi.uniformValues;Xi.hasHalo&&(ol.u_is_halo=1,$o(Xi.buffers,tc.segments,h,f,Xi.program,gt,ge,we,ol)),ol.u_is_halo=0}$o(Xi.buffers,tc.segments,h,f,Xi.program,gt,ge,we,Xi.uniformValues)}}function $o(f,p,h,v,S,P,O,H,te){var ae=v.context;S.draw(ae,ae.gl.TRIANGLES,P,O,H,Xe.disabled,te,h.id,f.layoutVertexBuffer,f.indexBuffer,p,h.paint,v.transform.zoom,f.programConfigurations.get(h.id),f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer)}function ar(f,p,h,v,S,P,O){var H,te,ae,ge,we,ye=f.context.gl,Le=h.paint.get("fill-pattern"),Re=Le&&Le.constantOr(1),Ve=h.getCrossfadeParameters();O?(te=Re&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",H=ye.LINES):(te=Re?"fillPattern":"fill",H=ye.TRIANGLES);for(var De=0,ze=v;De<ze.length;De+=1){var Ye=ze[De],ot=p.getTile(Ye);if(!Re||ot.patternsLoaded()){var yt=ot.getBucket(h);if(yt){var gt=yt.programConfigurations.get(h.id),vt=f.useProgram(te,gt);Re&&(f.context.activeTexture.set(ye.TEXTURE0),ot.imageAtlasTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),gt.updatePaintBuffers(Ve));var Tt=Le.constantOr(null);if(Tt&&ot.imageAtlas){var Gt=ot.imageAtlas,Bt=Gt.patternPositions[Tt.to.toString()],$t=Gt.patternPositions[Tt.from.toString()];Bt&&$t&&gt.setConstantPatternPositions(Bt,$t)}var wn=f.translatePosMatrix(Ye.posMatrix,ot,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(O){ge=yt.indexBuffer2,we=yt.segments2;var rn=[ye.drawingBufferWidth,ye.drawingBufferHeight];ae="fillOutlinePattern"===te&&Re?vc(wn,f,Ve,ot,rn):Ll(wn,rn)}else ge=yt.indexBuffer,we=yt.segments,ae=Re?Sa(wn,f,Ve,ot):ms(wn);vt.draw(f.context,H,S,f.stencilModeForClipping(Ye),P,Xe.disabled,ae,h.id,yt.layoutVertexBuffer,ge,we,h.paint,f.transform.zoom,gt)}}}}function Qi(f,p,h,v,S,P,O){for(var H=f.context,te=H.gl,ae=h.paint.get("fill-extrusion-pattern"),ge=ae.constantOr(1),we=h.getCrossfadeParameters(),ye=h.paint.get("fill-extrusion-opacity"),Le=0,Re=v;Le<Re.length;Le+=1){var Ve=Re[Le],De=p.getTile(Ve),ze=De.getBucket(h);if(ze){var Ye=ze.programConfigurations.get(h.id),ot=f.useProgram(ge?"fillExtrusionPattern":"fillExtrusion",Ye);ge&&(f.context.activeTexture.set(te.TEXTURE0),De.imageAtlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE),Ye.updatePaintBuffers(we));var yt=ae.constantOr(null);if(yt&&De.imageAtlas){var gt=De.imageAtlas,vt=gt.patternPositions[yt.to.toString()],Tt=gt.patternPositions[yt.from.toString()];vt&&Tt&&Ye.setConstantPatternPositions(vt,Tt)}var Gt=f.translatePosMatrix(Ve.posMatrix,De,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),Bt=h.paint.get("fill-extrusion-vertical-gradient"),$t=ge?bu(Gt,f,Bt,ye,Ve,we,De):yc(Gt,f,Bt,ye);ot.draw(H,H.gl.TRIANGLES,S,P,O,Xe.backCCW,$t,h.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,h.paint,f.transform.zoom,Ye)}}}function Vs(f,p,h,v,S,P){var O=f.context,H=O.gl,te=p.fbo;if(te){var ae=f.useProgram("hillshade");O.activeTexture.set(H.TEXTURE0),H.bindTexture(H.TEXTURE_2D,te.colorAttachment.get());var ge=function(we,ye,Le){var Re=Le.paint.get("hillshade-shadow-color"),Ve=Le.paint.get("hillshade-highlight-color"),De=Le.paint.get("hillshade-accent-color"),ze=Le.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Le.paint.get("hillshade-illumination-anchor")&&(ze-=we.transform.angle);var Ye,ot,yt,gt=!we.options.moving;return{u_matrix:we.transform.calculatePosMatrix(ye.tileID.toUnwrapped(),gt),u_image:0,u_latrange:(Ye=ye.tileID,ot=Math.pow(2,Ye.canonical.z),yt=Ye.canonical.y,[new m.MercatorCoordinate(0,yt/ot).toLngLat().lat,new m.MercatorCoordinate(0,(yt+1)/ot).toLngLat().lat]),u_light:[Le.paint.get("hillshade-exaggeration"),ze],u_shadow:Re,u_highlight:Ve,u_accent:De}}(f,p,h);ae.draw(O,H.TRIANGLES,v,S,P,Xe.disabled,ge,h.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}}function Ta(f,p,h,v,S,P){var Ve,De,ze,Ye,O=f.context,H=O.gl,te=p.dem;if(te&&te.data){var ae=te.dim,ge=te.stride,we=te.getPixels();if(O.activeTexture.set(H.TEXTURE1),O.pixelStoreUnpackPremultiplyAlpha.set(!1),p.demTexture=p.demTexture||f.getTileTexture(ge),p.demTexture){var ye=p.demTexture;ye.update(we,{premultiply:!1}),ye.bind(H.NEAREST,H.CLAMP_TO_EDGE)}else p.demTexture=new m.Texture(O,we,H.RGBA,{premultiply:!1}),p.demTexture.bind(H.NEAREST,H.CLAMP_TO_EDGE);O.activeTexture.set(H.TEXTURE0);var Le=p.fbo;if(!Le){var Re=new m.Texture(O,{width:ae,height:ae,data:null},H.RGBA);Re.bind(H.LINEAR,H.CLAMP_TO_EDGE),(Le=p.fbo=O.createFramebuffer(ae,ae,!0)).colorAttachment.set(Re.texture)}O.bindFramebuffer.set(Le.framebuffer),O.viewport.set([0,0,ae,ae]),f.useProgram("hillshadePrepare").draw(O,H.TRIANGLES,v,S,P,Xe.disabled,(Ve=p.tileID,ze=(De=te).stride,Ye=m.create(),m.ortho(Ye,0,m.EXTENT,-m.EXTENT,0,0,1),m.translate(Ye,Ye,[0,-m.EXTENT,0]),{u_matrix:Ye,u_image:1,u_dimension:[ze,ze],u_zoom:Ve.overscaledZ,u_unpack:De.getUnpackVector()}),h.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments),p.needsHillshadePrepare=!1}}function ia(f,p,h,v,S){var P=v.paint.get("raster-fade-duration");if(P>0){var O=m.browser.now(),H=(O-f.timeAdded)/P,te=p?(O-p.timeAdded)/P:-1,ae=h.getSource(),ge=S.coveringZoomLevel({tileSize:ae.tileSize,roundZoom:ae.roundZoom}),we=!p||Math.abs(p.tileID.overscaledZ-ge)>Math.abs(f.tileID.overscaledZ-ge),ye=we&&f.refreshedUponExpiration?1:m.clamp(we?H:1-te,0,1);return f.refreshedUponExpiration&&H>=1&&(f.refreshedUponExpiration=!1),p?{opacity:1,mix:1-ye}:{opacity:ye,mix:0}}return{opacity:1,mix:0}}var ma=new m.Color(1,0,0,1),Cs=new m.Color(0,1,0,1),Is=new m.Color(0,0,1,1),so=new m.Color(1,0,1,1),vl=new m.Color(0,1,1,1);function qo(f,p,h,v){Fl(f,0,p+h/2,f.transform.width,h,v)}function rs(f,p,h,v){Fl(f,p-h/2,0,h,f.transform.height,v)}function Fl(f,p,h,v,S,P){var O=f.context,H=O.gl;H.enable(H.SCISSOR_TEST),H.scissor(p*m.browser.devicePixelRatio,h*m.browser.devicePixelRatio,v*m.browser.devicePixelRatio,S*m.browser.devicePixelRatio),O.clear({color:P}),H.disable(H.SCISSOR_TEST)}function mi(f,p,h){var v=f.context,S=v.gl,P=h.posMatrix,O=f.useProgram("debug"),H=ve.disabled,te=Te.disabled,ae=f.colorModeForRenderPass();v.activeTexture.set(S.TEXTURE0),f.emptyTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),O.draw(v,S.LINE_STRIP,H,te,ae,Xe.disabled,Po(P,m.Color.red),"$debug",f.debugBuffer,f.tileBorderIndexBuffer,f.debugSegments);var ge=p.getTileByID(h.key).latestRawTileData,we=Math.floor((ge&&ge.byteLength||0)/1024),ye=p.getTile(h).tileSize,Le=512/Math.min(ye,512)*(h.overscaledZ/f.transform.zoom)*.5,Re=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(Re+=" => "+h.overscaledZ),function(Ve,De){Ve.initDebugOverlayCanvas();var ze=Ve.debugOverlayCanvas,Ye=Ve.context.gl,ot=Ve.debugOverlayCanvas.getContext("2d");ot.clearRect(0,0,ze.width,ze.height),ot.shadowColor="white",ot.shadowBlur=2,ot.lineWidth=1.5,ot.strokeStyle="white",ot.textBaseline="top",ot.font="bold 36px Open Sans, sans-serif",ot.fillText(De,5,5),ot.strokeText(De,5,5),Ve.debugOverlayTexture.update(ze),Ve.debugOverlayTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE)}(f,Re+" "+we+"kb"),O.draw(v,S.TRIANGLES,H,te,$e.alphaBlended,Xe.disabled,Po(P,m.Color.transparent,Le),"$debug",f.debugBuffer,f.quadTriangleIndexBuffer,f.debugSegments)}var ei={symbol:function(f,p,h,v,S){if("translucent"===f.renderPass){var P=Te.disabled,O=f.colorModeForRenderPass();h.layout.get("text-variable-anchor")&&function(H,te,ae,ge,we,ye,Le){for(var Re=te.transform,Ve="map"===we,De="map"===ye,ze=0,Ye=H;ze<Ye.length;ze+=1){var ot=Ye[ze],yt=ge.getTile(ot),gt=yt.getBucket(ae);if(gt&&gt.text&&gt.text.segments.get().length){var vt=m.evaluateSizeForZoom(gt.textSizeData,Re.zoom),Tt=Co(yt,1,te.transform.zoom),Gt=Si(ot.posMatrix,De,Ve,te.transform,Tt),Bt="none"!==ae.layout.get("icon-text-fit")&&gt.hasIconData();if(vt){var $t=Math.pow(2,Re.zoom-yt.tileID.overscaledZ);Ar(gt,Ve,De,Le,m.symbolSize,Re,Gt,ot.posMatrix,$t,vt,Bt)}}}}(v,f,h,p,h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),S),0!==h.paint.get("icon-opacity").constantOr(1)&&Li(f,p,h,v,!1,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),h.layout.get("icon-rotation-alignment"),h.layout.get("icon-pitch-alignment"),h.layout.get("icon-keep-upright"),P,O),0!==h.paint.get("text-opacity").constantOr(1)&&Li(f,p,h,v,!0,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),h.layout.get("text-keep-upright"),P,O),p.map.showCollisionBoxes&&(Xt(f,p,h,v,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),!0),Xt(f,p,h,v,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),!1))}},circle:function(f,p,h,v){if("translucent"===f.renderPass){var S=h.paint.get("circle-opacity"),P=h.paint.get("circle-stroke-width"),O=h.paint.get("circle-stroke-opacity"),H=!h.layout.get("circle-sort-key").isConstant();if(0!==S.constantOr(1)||0!==P.constantOr(1)&&0!==O.constantOr(1)){for(var te=f.context,ae=te.gl,ge=f.depthModeForSublayer(0,ve.ReadOnly),we=Te.disabled,ye=f.colorModeForRenderPass(),Le=[],Re=0;Re<v.length;Re++){var Ve=v[Re],De=p.getTile(Ve),ze=De.getBucket(h);if(ze){var Ye=ze.programConfigurations.get(h.id),ot={programConfiguration:Ye,program:f.useProgram("circle",Ye),layoutVertexBuffer:ze.layoutVertexBuffer,indexBuffer:ze.indexBuffer,uniformValues:na(f,Ve,De,h)};if(H)for(var yt=0,gt=ze.segments.get();yt<gt.length;yt+=1){var vt=gt[yt];Le.push({segments:new m.SegmentVector([vt]),sortKey:vt.sortKey,state:ot})}else Le.push({segments:ze.segments,sortKey:0,state:ot})}}H&&Le.sort(function(wn,rn){return wn.sortKey-rn.sortKey});for(var Tt=0,Gt=Le;Tt<Gt.length;Tt+=1){var Bt=Gt[Tt],$t=Bt.state;$t.program.draw(te,ae.TRIANGLES,ge,we,ye,Xe.disabled,$t.uniformValues,h.id,$t.layoutVertexBuffer,$t.indexBuffer,Bt.segments,h.paint,f.transform.zoom,$t.programConfiguration)}}}},heatmap:function(f,p,h,v){if(0!==h.paint.get("heatmap-opacity"))if("offscreen"===f.renderPass){var S=f.context,P=S.gl,O=Te.disabled,H=new $e([P.ONE,P.ONE],m.Color.transparent,[!0,!0,!0,!0]);(function(Le,Re,Ve){var De=Le.gl;Le.activeTexture.set(De.TEXTURE1),Le.viewport.set([0,0,Re.width/4,Re.height/4]);var ot,yt,gt,vt,Tt,ze=Ve.heatmapFbo;if(ze)De.bindTexture(De.TEXTURE_2D,ze.colorAttachment.get()),Le.bindFramebuffer.set(ze.framebuffer);else{var Ye=De.createTexture();De.bindTexture(De.TEXTURE_2D,Ye),De.texParameteri(De.TEXTURE_2D,De.TEXTURE_WRAP_S,De.CLAMP_TO_EDGE),De.texParameteri(De.TEXTURE_2D,De.TEXTURE_WRAP_T,De.CLAMP_TO_EDGE),De.texParameteri(De.TEXTURE_2D,De.TEXTURE_MIN_FILTER,De.LINEAR),De.texParameteri(De.TEXTURE_2D,De.TEXTURE_MAG_FILTER,De.LINEAR),gt=Ye,vt=ze=Ve.heatmapFbo=Le.createFramebuffer(Re.width/4,Re.height/4,!1),(Tt=(ot=Le).gl).texImage2D(Tt.TEXTURE_2D,0,Tt.RGBA,(yt=Re).width/4,yt.height/4,0,Tt.RGBA,ot.extRenderToTextureHalfFloat?ot.extTextureHalfFloat.HALF_FLOAT_OES:Tt.UNSIGNED_BYTE,null),vt.colorAttachment.set(gt)}})(S,f,h),S.clear({color:m.Color.transparent});for(var te=0;te<v.length;te++){var ae=v[te];if(!p.hasRenderableParent(ae)){var ge=p.getTile(ae),we=ge.getBucket(h);if(we){var ye=we.programConfigurations.get(h.id);f.useProgram("heatmap",ye).draw(S,P.TRIANGLES,ve.disabled,O,H,Xe.disabled,Ho(ae.posMatrix,ge,f.transform.zoom,h.paint.get("heatmap-intensity")),h.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,h.paint,f.transform.zoom,ye)}}}S.viewport.set([0,0,f.width,f.height])}else"translucent"===f.renderPass&&(f.context.setColorMode(f.colorModeForRenderPass()),function(Le,Re){var Ve=Le.context,De=Ve.gl,ze=Re.heatmapFbo;if(ze){Ve.activeTexture.set(De.TEXTURE0),De.bindTexture(De.TEXTURE_2D,ze.colorAttachment.get()),Ve.activeTexture.set(De.TEXTURE1);var Ye=Re.colorRampTexture;Ye||(Ye=Re.colorRampTexture=new m.Texture(Ve,Re.colorRamp,De.RGBA)),Ye.bind(De.LINEAR,De.CLAMP_TO_EDGE),Le.useProgram("heatmapTexture").draw(Ve,De.TRIANGLES,ve.disabled,Te.disabled,Le.colorModeForRenderPass(),Xe.disabled,function(ot,yt,gt,vt){var Tt=m.create();m.ortho(Tt,0,ot.width,ot.height,0,0,1);var Gt=ot.context.gl;return{u_matrix:Tt,u_world:[Gt.drawingBufferWidth,Gt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:yt.paint.get("heatmap-opacity")}}(Le,Re),Re.id,Le.viewportBuffer,Le.quadTriangleIndexBuffer,Le.viewportSegments,Re.paint,Le.transform.zoom)}}(f,h))},line:function(f,p,h,v){if("translucent"===f.renderPass){var S=h.paint.get("line-opacity"),P=h.paint.get("line-width");if(0!==S.constantOr(1)&&0!==P.constantOr(1))for(var O=f.depthModeForSublayer(0,ve.ReadOnly),H=f.colorModeForRenderPass(),te=h.paint.get("line-dasharray"),ae=h.paint.get("line-pattern"),ge=ae.constantOr(1),we=h.paint.get("line-gradient"),ye=h.getCrossfadeParameters(),Le=ge?"linePattern":te?"lineSDF":we?"lineGradient":"line",Re=f.context,Ve=Re.gl,De=!0,ze=0,Ye=v;ze<Ye.length;ze+=1){var ot=Ye[ze],yt=p.getTile(ot);if(!ge||yt.patternsLoaded()){var gt=yt.getBucket(h);if(gt){var vt=gt.programConfigurations.get(h.id),Tt=f.context.program.get(),Gt=f.useProgram(Le,vt),Bt=De||Gt.program!==Tt,$t=ae.constantOr(null);if($t&&yt.imageAtlas){var wn=yt.imageAtlas,rn=wn.patternPositions[$t.to.toString()],Rn=wn.patternPositions[$t.from.toString()];rn&&Rn&&vt.setConstantPatternPositions(rn,Rn)}var jr=ge?pn(f,yt,h,ye):te?Pi(f,yt,h,te,ye):we?_n(f,yt,h,gt.lineClipsArray.length):ao(f,yt,h);if(ge)Re.activeTexture.set(Ve.TEXTURE0),yt.imageAtlasTexture.bind(Ve.LINEAR,Ve.CLAMP_TO_EDGE),vt.updatePaintBuffers(ye);else if(te&&(Bt||f.lineAtlas.dirty))Re.activeTexture.set(Ve.TEXTURE0),f.lineAtlas.bind(Re);else if(we){var un=gt.gradients[h.id],er=un.texture;if(h.gradientVersion!==un.version){var xr=256;if(h.stepInterpolant){var tr=p.getSource().maxzoom,qn=ot.canonical.z===tr?Math.ceil(1<<f.transform.maxZoom-ot.canonical.z):1;xr=m.clamp(m.nextPowerOfTwo(gt.maxLineLength/m.EXTENT*1024*qn),256,Re.maxTextureSize)}un.gradient=m.renderColorRamp({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:xr,image:un.gradient||void 0,clips:gt.lineClipsArray}),un.texture?un.texture.update(un.gradient):un.texture=new m.Texture(Re,un.gradient,Ve.RGBA),un.version=h.gradientVersion,er=un.texture}Re.activeTexture.set(Ve.TEXTURE0),er.bind(h.stepInterpolant?Ve.NEAREST:Ve.LINEAR,Ve.CLAMP_TO_EDGE)}Gt.draw(Re,Ve.TRIANGLES,O,f.stencilModeForClipping(ot),H,Xe.disabled,jr,h.id,gt.layoutVertexBuffer,gt.indexBuffer,gt.segments,h.paint,f.transform.zoom,vt,gt.layoutVertexBuffer2),De=!1}}}}},fill:function(f,p,h,v){var S=h.paint.get("fill-color"),P=h.paint.get("fill-opacity");if(0!==P.constantOr(1)){var O=f.colorModeForRenderPass(),H=h.paint.get("fill-pattern"),te=f.opaquePassEnabledForLayer()&&!H.constantOr(1)&&1===S.constantOr(m.Color.transparent).a&&1===P.constantOr(0)?"opaque":"translucent";if(f.renderPass===te){var ae=f.depthModeForSublayer(1,"opaque"===f.renderPass?ve.ReadWrite:ve.ReadOnly);ar(f,p,h,v,ae,O,!1)}if("translucent"===f.renderPass&&h.paint.get("fill-antialias")){var ge=f.depthModeForSublayer(h.getPaintProperty("fill-outline-color")?2:0,ve.ReadOnly);ar(f,p,h,v,ge,O,!0)}}},"fill-extrusion":function(f,p,h,v){var S=h.paint.get("fill-extrusion-opacity");if(0!==S&&"translucent"===f.renderPass){var P=new ve(f.context.gl.LEQUAL,ve.ReadWrite,f.depthRangeFor3D);if(1!==S||h.paint.get("fill-extrusion-pattern").constantOr(1))Qi(f,p,h,v,P,Te.disabled,$e.disabled),Qi(f,p,h,v,P,f.stencilModeFor3D(),f.colorModeForRenderPass());else{var O=f.colorModeForRenderPass();Qi(f,p,h,v,P,Te.disabled,O)}}},hillshade:function(f,p,h,v){if("offscreen"===f.renderPass||"translucent"===f.renderPass){for(var S=f.context,P=f.depthModeForSublayer(0,ve.ReadOnly),O=f.colorModeForRenderPass(),H="translucent"===f.renderPass?f.stencilConfigForOverlap(v):[{},v],te=H[0],ae=0,ge=H[1];ae<ge.length;ae+=1){var we=ge[ae],ye=p.getTile(we);ye.needsHillshadePrepare&&"offscreen"===f.renderPass?Ta(f,ye,h,P,Te.disabled,O):"translucent"===f.renderPass&&Vs(f,ye,h,P,te[we.overscaledZ],O)}S.viewport.set([0,0,f.width,f.height])}},raster:function(f,p,h,v){if("translucent"===f.renderPass&&0!==h.paint.get("raster-opacity")&&v.length)for(var S=f.context,P=S.gl,O=p.getSource(),H=f.useProgram("raster"),te=f.colorModeForRenderPass(),ae=O instanceof wt?[{},v]:f.stencilConfigForOverlap(v),ge=ae[0],we=ae[1],ye=we[we.length-1].overscaledZ,Le=!f.options.moving,Re=0,Ve=we;Re<Ve.length;Re+=1){var De=Ve[Re],ze=f.depthModeForSublayer(De.overscaledZ-ye,1===h.paint.get("raster-opacity")?ve.ReadWrite:ve.ReadOnly,P.LESS),Ye=p.getTile(De),ot=f.transform.calculatePosMatrix(De.toUnwrapped(),Le);Ye.registerFadeDuration(h.paint.get("raster-fade-duration"));var yt=p.findLoadedParent(De,0),gt=ia(Ye,yt,p,h,f.transform),vt=void 0,Tt=void 0,Gt="nearest"===h.paint.get("raster-resampling")?P.NEAREST:P.LINEAR;S.activeTexture.set(P.TEXTURE0),Ye.texture.bind(Gt,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST),S.activeTexture.set(P.TEXTURE1),yt?(yt.texture.bind(Gt,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST),vt=Math.pow(2,yt.tileID.overscaledZ-Ye.tileID.overscaledZ),Tt=[Ye.tileID.canonical.x*vt%1,Ye.tileID.canonical.y*vt%1]):Ye.texture.bind(Gt,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST);var Bt=Do(ot,Tt||[0,0],vt||1,gt,h);O instanceof wt?H.draw(S,P.TRIANGLES,ze,Te.disabled,te,Xe.disabled,Bt,h.id,O.boundsBuffer,f.quadTriangleIndexBuffer,O.boundsSegments):H.draw(S,P.TRIANGLES,ze,ge[De.overscaledZ],te,Xe.disabled,Bt,h.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}},background:function(f,p,h){var v=h.paint.get("background-color"),S=h.paint.get("background-opacity");if(0!==S){var P=f.context,O=P.gl,H=f.transform,te=H.tileSize,ae=h.paint.get("background-pattern");if(!f.isPatternMissing(ae)){var ge=!ae&&1===v.a&&1===S&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass===ge){var we=Te.disabled,ye=f.depthModeForSublayer(0,"opaque"===ge?ve.ReadWrite:ve.ReadOnly),Le=f.colorModeForRenderPass(),Re=f.useProgram(ae?"backgroundPattern":"background"),Ve=H.coveringTiles({tileSize:te});ae&&(P.activeTexture.set(O.TEXTURE0),f.imageManager.bind(f.context));for(var De=h.getCrossfadeParameters(),ze=0,Ye=Ve;ze<Ye.length;ze+=1){var ot=Ye[ze],yt=f.transform.calculatePosMatrix(ot.toUnwrapped()),gt=ae?rt(yt,S,f,ae,{tileID:ot,tileSize:te},De):kl(yt,S,v);Re.draw(P,O.TRIANGLES,ye,we,Le,Xe.disabled,gt,h.id,f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}}}}},debug:function(f,p,h){for(var v=0;v<h.length;v++)mi(f,p,h[v])},custom:function(f,p,h){var v=f.context,S=h.implementation;if("offscreen"===f.renderPass){var P=S.prerender;P&&(f.setCustomLayerDefaults(),v.setColorMode(f.colorModeForRenderPass()),P.call(S,v.gl,f.transform.customLayerMatrix()),v.setDirty(),f.setBaseState())}else if("translucent"===f.renderPass){f.setCustomLayerDefaults(),v.setColorMode(f.colorModeForRenderPass()),v.setStencilMode(Te.disabled);var O="3d"===S.renderingMode?new ve(f.context.gl.LEQUAL,ve.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,ve.ReadOnly);v.setDepthMode(O),S.render(v.gl,f.transform.customLayerMatrix()),v.setDirty(),f.setBaseState(),v.bindFramebuffer.set(null)}}},Sr=function(f,p){this.context=new He(f),this.transform=p,this._tileTextures={},this.setup(),this.numSublayers=xe.maxUnderzooming+xe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new An,this.gpuTimers={}};Sr.prototype.resize=function(f,p){if(this.width=f*m.browser.devicePixelRatio,this.height=p*m.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var h=0,v=this.style._order;h<v.length;h+=1)this.style._layers[v[h]].resize()},Sr.prototype.setup=function(){var f=this.context,p=new m.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(m.EXTENT,0),p.emplaceBack(0,m.EXTENT),p.emplaceBack(m.EXTENT,m.EXTENT),this.tileExtentBuffer=f.createVertexBuffer(p,fa.members),this.tileExtentSegments=m.SegmentVector.simpleSegment(0,0,4,2);var h=new m.StructArrayLayout2i4;h.emplaceBack(0,0),h.emplaceBack(m.EXTENT,0),h.emplaceBack(0,m.EXTENT),h.emplaceBack(m.EXTENT,m.EXTENT),this.debugBuffer=f.createVertexBuffer(h,fa.members),this.debugSegments=m.SegmentVector.simpleSegment(0,0,4,5);var v=new m.StructArrayLayout4i8;v.emplaceBack(0,0,0,0),v.emplaceBack(m.EXTENT,0,m.EXTENT,0),v.emplaceBack(0,m.EXTENT,0,m.EXTENT),v.emplaceBack(m.EXTENT,m.EXTENT,m.EXTENT,m.EXTENT),this.rasterBoundsBuffer=f.createVertexBuffer(v,be.members),this.rasterBoundsSegments=m.SegmentVector.simpleSegment(0,0,4,2);var S=new m.StructArrayLayout2i4;S.emplaceBack(0,0),S.emplaceBack(1,0),S.emplaceBack(0,1),S.emplaceBack(1,1),this.viewportBuffer=f.createVertexBuffer(S,fa.members),this.viewportSegments=m.SegmentVector.simpleSegment(0,0,4,2);var P=new m.StructArrayLayout1ui2;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=f.createIndexBuffer(P);var O=new m.StructArrayLayout3ui6;O.emplaceBack(0,1,2),O.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=f.createIndexBuffer(O),this.emptyTexture=new m.Texture(f,{width:1,height:1,data:new Uint8Array([0,0,0,0])},f.gl.RGBA);var H=this.context.gl;this.stencilClearMode=new Te({func:H.ALWAYS,mask:0},0,255,H.ZERO,H.ZERO,H.ZERO)},Sr.prototype.clearStencil=function(){var f=this.context,p=f.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var h=m.create();m.ortho(h,0,this.width,this.height,0,0,1),m.scale(h,h,[p.drawingBufferWidth,p.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(f,p.TRIANGLES,ve.disabled,this.stencilClearMode,$e.disabled,Xe.disabled,Vi(h),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Sr.prototype._renderTileClippingMasks=function(f,p){if(this.currentStencilSource!==f.source&&f.isTileClipped()&&p&&p.length){this.currentStencilSource=f.source;var h=this.context,v=h.gl;this.nextStencilID+p.length>256&&this.clearStencil(),h.setColorMode($e.disabled),h.setDepthMode(ve.disabled);var S=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var P=0,O=p;P<O.length;P+=1){var H=O[P],te=this._tileClippingMaskIDs[H.key]=this.nextStencilID++;S.draw(h,v.TRIANGLES,ve.disabled,new Te({func:v.ALWAYS,mask:0},te,255,v.KEEP,v.KEEP,v.REPLACE),$e.disabled,Xe.disabled,Vi(H.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Sr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var f=this.nextStencilID++,p=this.context.gl;return new Te({func:p.NOTEQUAL,mask:255},f,255,p.KEEP,p.KEEP,p.REPLACE)},Sr.prototype.stencilModeForClipping=function(f){var p=this.context.gl;return new Te({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[f.key],0,p.KEEP,p.KEEP,p.REPLACE)},Sr.prototype.stencilConfigForOverlap=function(f){var p,h=this.context.gl,v=f.sort(function(te,ae){return ae.overscaledZ-te.overscaledZ}),S=v[v.length-1].overscaledZ,P=v[0].overscaledZ-S+1;if(P>1){this.currentStencilSource=void 0,this.nextStencilID+P>256&&this.clearStencil();for(var O={},H=0;H<P;H++)O[H+S]=new Te({func:h.GEQUAL,mask:255},H+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=P,[O,v]}return[(p={},p[S]=Te.disabled,p),v]},Sr.prototype.colorModeForRenderPass=function(){var f=this.context.gl;return this._showOverdrawInspector?new $e([f.CONSTANT_COLOR,f.ONE],new m.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?$e.unblended:$e.alphaBlended},Sr.prototype.depthModeForSublayer=function(f,p,h){if(!this.opaquePassEnabledForLayer())return ve.disabled;var v=1-((1+this.currentLayer)*this.numSublayers+f)*this.depthEpsilon;return new ve(h||this.context.gl.LEQUAL,p,[v,v])},Sr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Sr.prototype.render=function(f,p){var h=this;this.style=f,this.options=p,this.lineAtlas=f.lineAtlas,this.imageManager=f.imageManager,this.glyphManager=f.glyphManager,this.symbolFadeChange=f.placement.symbolFadeChange(m.browser.now()),this.imageManager.beginFrame();var v=this.style._order,S=this.style.sourceCaches;for(var P in S){var O=S[P];O.used&&O.prepare(this.context)}var H,te,ae={},ge={},we={};for(var ye in S){var Le=S[ye];ae[ye]=Le.getVisibleCoordinates(),ge[ye]=ae[ye].slice().reverse(),we[ye]=Le.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Re=0;Re<v.length;Re++)if(this.style._layers[v[Re]].is3D()){this.opaquePassCutoff=Re;break}this.renderPass="offscreen";for(var Ve=0,De=v;Ve<De.length;Ve+=1){var ze=this.style._layers[De[Ve]];if(ze.hasOffscreenPass()&&!ze.isHidden(this.transform.zoom)){var Ye=ge[ze.source];("custom"===ze.type||Ye.length)&&this.renderLayer(this,S[ze.source],ze,Ye)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?m.Color.black:m.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(f._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){var ot=this.style._layers[v[this.currentLayer]],yt=S[ot.source],gt=ae[ot.source];this._renderTileClippingMasks(ot,gt),this.renderLayer(this,yt,ot,gt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){var vt=this.style._layers[v[this.currentLayer]],Tt=S[vt.source],Gt=("symbol"===vt.type?we:ge)[vt.source];this._renderTileClippingMasks(vt,ae[vt.source]),this.renderLayer(this,Tt,vt,Gt)}this.options.showTileBoundaries&&(m.values(this.style._layers).forEach(function(Bt){Bt.source&&!Bt.isHidden(h.transform.zoom)&&(Bt.source!==(te&&te.id)&&(te=h.style.sourceCaches[Bt.source]),(!H||H.getSource().maxzoom<te.getSource().maxzoom)&&(H=te))}),H&&ei.debug(this,H,H.getVisibleCoordinates())),this.options.showPadding&&function(Bt){var $t=Bt.transform.padding;qo(Bt,Bt.transform.height-($t.top||0),3,ma),qo(Bt,$t.bottom||0,3,Cs),rs(Bt,$t.left||0,3,Is),rs(Bt,Bt.transform.width-($t.right||0),3,so);var rn,Rn,jr,un,wn=Bt.transform.centerPoint;Fl(rn=Bt,(Rn=wn.x)-1,(jr=Bt.transform.height-wn.y)-10,2,20,un=vl),Fl(rn,Rn-10,jr-1,20,2,un)}(this),this.context.setDefault()},Sr.prototype.renderLayer=function(f,p,h,v){h.isHidden(this.transform.zoom)||("background"===h.type||"custom"===h.type||v.length)&&(this.id=h.id,this.gpuTimingStart(h),ei[h.type](f,p,h,v,this.style.placement.variableOffsets),this.gpuTimingEnd())},Sr.prototype.gpuTimingStart=function(f){if(this.options.gpuTiming){var p=this.context.extTimerQuery,h=this.gpuTimers[f.id];h||(h=this.gpuTimers[f.id]={calls:0,cpuTime:0,query:p.createQueryEXT()}),h.calls++,p.beginQueryEXT(p.TIME_ELAPSED_EXT,h.query)}},Sr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var f=this.context.extTimerQuery;f.endQueryEXT(f.TIME_ELAPSED_EXT)}},Sr.prototype.collectGpuTimers=function(){var f=this.gpuTimers;return this.gpuTimers={},f},Sr.prototype.queryGpuTimers=function(f){var p={};for(var h in f){var v=f[h],S=this.context.extTimerQuery,P=S.getQueryObjectEXT(v.query,S.QUERY_RESULT_EXT)/1e6;S.deleteQueryEXT(v.query),p[h]=P}return p},Sr.prototype.translatePosMatrix=function(f,p,h,v,S){if(!h[0]&&!h[1])return f;var P=S?"map"===v?this.transform.angle:0:"viewport"===v?-this.transform.angle:0;if(P){var O=Math.sin(P),H=Math.cos(P);h=[h[0]*H-h[1]*O,h[0]*O+h[1]*H]}var te=[S?h[0]:Co(p,h[0],this.transform.zoom),S?h[1]:Co(p,h[1],this.transform.zoom),0],ae=new Float32Array(16);return m.translate(ae,f,te),ae},Sr.prototype.saveTileTexture=function(f){var p=this._tileTextures[f.size[0]];p?p.push(f):this._tileTextures[f.size[0]]=[f]},Sr.prototype.getTileTexture=function(f){var p=this._tileTextures[f];return p&&p.length>0?p.pop():null},Sr.prototype.isPatternMissing=function(f){if(!f)return!1;if(!f.from||!f.to)return!0;var p=this.imageManager.getPattern(f.from.toString()),h=this.imageManager.getPattern(f.to.toString());return!p||!h},Sr.prototype.useProgram=function(f,p){this.cache=this.cache||{};var h=""+f+(p?p.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[h]||(this.cache[h]=new gl(this.context,f,To[f],p,_t[f],this._showOverdrawInspector)),this.cache[h]},Sr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Sr.prototype.setBaseState=function(){var f=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(f.FUNC_ADD)},Sr.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=m.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new m.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Sr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Ts=function(f,p){this.points=f,this.planes=p};Ts.fromInvProjectionMatrix=function(f,p,h){var v=Math.pow(2,h),S=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(O){return m.transformMat4([],O,f)}).map(function(O){return m.scale$1([],O,1/O[3]/p*v)}),P=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(O){var H=m.sub([],S[O[0]],S[O[1]]),te=m.sub([],S[O[2]],S[O[1]]),ae=m.normalize([],m.cross([],H,te)),ge=-m.dot(ae,S[O[1]]);return ae.concat(ge)});return new Ts(S,P)};var _l=function(f,p){this.min=f,this.max=p,this.center=m.scale$2([],m.add([],this.min,this.max),.5)};_l.prototype.quadrant=function(f){for(var p=[f%2==0,f<2],h=m.clone$2(this.min),v=m.clone$2(this.max),S=0;S<p.length;S++)h[S]=p[S]?this.min[S]:this.center[S],v[S]=p[S]?this.center[S]:this.max[S];return v[2]=this.max[2],new _l(h,v)},_l.prototype.distanceX=function(f){return Math.max(Math.min(this.max[0],f[0]),this.min[0])-f[0]},_l.prototype.distanceY=function(f){return Math.max(Math.min(this.max[1],f[1]),this.min[1])-f[1]},_l.prototype.intersects=function(f){for(var p=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],h=!0,v=0;v<f.planes.length;v++){for(var S=f.planes[v],P=0,O=0;O<p.length;O++)P+=m.dot$1(S,p[O])>=0;if(0===P)return 0;P!==p.length&&(h=!1)}if(h)return 2;for(var H=0;H<3;H++){for(var te=Number.MAX_VALUE,ae=-Number.MAX_VALUE,ge=0;ge<f.points.length;ge++){var we=f.points[ge][H]-this.min[H];te=Math.min(te,we),ae=Math.max(ae,we)}if(ae<0||te>this.max[H]-this.min[H])return 0}return 1};var Lo=function(f,p,h,v){if(void 0===f&&(f=0),void 0===p&&(p=0),void 0===h&&(h=0),void 0===v&&(v=0),isNaN(f)||f<0||isNaN(p)||p<0||isNaN(h)||h<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=f,this.bottom=p,this.left=h,this.right=v};Lo.prototype.interpolate=function(f,p,h){return null!=p.top&&null!=f.top&&(this.top=m.number(f.top,p.top,h)),null!=p.bottom&&null!=f.bottom&&(this.bottom=m.number(f.bottom,p.bottom,h)),null!=p.left&&null!=f.left&&(this.left=m.number(f.left,p.left,h)),null!=p.right&&null!=f.right&&(this.right=m.number(f.right,p.right,h)),this},Lo.prototype.getCenter=function(f,p){var h=m.clamp((this.left+f-this.right)/2,0,f),v=m.clamp((this.top+p-this.bottom)/2,0,p);return new m.Point(h,v)},Lo.prototype.equals=function(f){return this.top===f.top&&this.bottom===f.bottom&&this.left===f.left&&this.right===f.right},Lo.prototype.clone=function(){return new Lo(this.top,this.bottom,this.left,this.right)},Lo.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Or=function(f,p,h,v,S){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===S||S,this._minZoom=f||0,this._maxZoom=p||22,this._minPitch=h??0,this._maxPitch=v??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new m.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Lo,this._posMatrixCache={},this._alignedPosMatrixCache={}},wr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Or.prototype.clone=function(){var f=new Or(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return f.tileSize=this.tileSize,f.latRange=this.latRange,f.width=this.width,f.height=this.height,f._center=this._center,f.zoom=this.zoom,f.angle=this.angle,f._fov=this._fov,f._pitch=this._pitch,f._unmodified=this._unmodified,f._edgeInsets=this._edgeInsets.clone(),f._calcMatrices(),f},wr.minZoom.get=function(){return this._minZoom},wr.minZoom.set=function(f){this._minZoom!==f&&(this._minZoom=f,this.zoom=Math.max(this.zoom,f))},wr.maxZoom.get=function(){return this._maxZoom},wr.maxZoom.set=function(f){this._maxZoom!==f&&(this._maxZoom=f,this.zoom=Math.min(this.zoom,f))},wr.minPitch.get=function(){return this._minPitch},wr.minPitch.set=function(f){this._minPitch!==f&&(this._minPitch=f,this.pitch=Math.max(this.pitch,f))},wr.maxPitch.get=function(){return this._maxPitch},wr.maxPitch.set=function(f){this._maxPitch!==f&&(this._maxPitch=f,this.pitch=Math.min(this.pitch,f))},wr.renderWorldCopies.get=function(){return this._renderWorldCopies},wr.renderWorldCopies.set=function(f){void 0===f?f=!0:null===f&&(f=!1),this._renderWorldCopies=f},wr.worldSize.get=function(){return this.tileSize*this.scale},wr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},wr.size.get=function(){return new m.Point(this.width,this.height)},wr.bearing.get=function(){return-this.angle/Math.PI*180},wr.bearing.set=function(f){var p=-m.wrap(f,-180,180)*Math.PI/180;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=m.create$2(),m.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},wr.pitch.get=function(){return this._pitch/Math.PI*180},wr.pitch.set=function(f){var p=m.clamp(f,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())},wr.fov.get=function(){return this._fov/Math.PI*180},wr.fov.set=function(f){f=Math.max(.01,Math.min(60,f)),this._fov!==f&&(this._unmodified=!1,this._fov=f/180*Math.PI,this._calcMatrices())},wr.zoom.get=function(){return this._zoom},wr.zoom.set=function(f){var p=Math.min(Math.max(f,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this.scale=this.zoomScale(p),this.tileZoom=Math.floor(p),this.zoomFraction=p-this.tileZoom,this._constrain(),this._calcMatrices())},wr.center.get=function(){return this._center},wr.center.set=function(f){f.lat===this._center.lat&&f.lng===this._center.lng||(this._unmodified=!1,this._center=f,this._constrain(),this._calcMatrices())},wr.padding.get=function(){return this._edgeInsets.toJSON()},wr.padding.set=function(f){this._edgeInsets.equals(f)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,f,1),this._calcMatrices())},wr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Or.prototype.isPaddingEqual=function(f){return this._edgeInsets.equals(f)},Or.prototype.interpolatePadding=function(f,p,h){this._unmodified=!1,this._edgeInsets.interpolate(f,p,h),this._constrain(),this._calcMatrices()},Or.prototype.coveringZoomLevel=function(f){var p=(f.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/f.tileSize));return Math.max(0,p)},Or.prototype.getVisibleUnwrappedCoordinates=function(f){var p=[new m.UnwrappedTileID(0,f)];if(this._renderWorldCopies)for(var h=this.pointCoordinate(new m.Point(0,0)),v=this.pointCoordinate(new m.Point(this.width,0)),S=this.pointCoordinate(new m.Point(this.width,this.height)),P=this.pointCoordinate(new m.Point(0,this.height)),O=Math.floor(Math.min(h.x,v.x,S.x,P.x)),H=Math.floor(Math.max(h.x,v.x,S.x,P.x)),te=O-1;te<=H+1;te++)0!==te&&p.push(new m.UnwrappedTileID(te,f));return p},Or.prototype.coveringTiles=function(f){var p=this.coveringZoomLevel(f),h=p;if(void 0!==f.minzoom&&p<f.minzoom)return[];void 0!==f.maxzoom&&p>f.maxzoom&&(p=f.maxzoom);var v=m.MercatorCoordinate.fromLngLat(this.center),S=Math.pow(2,p),P=[S*v.x,S*v.y,0],O=Ts.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,p),H=f.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(H=p);var te=function(Bt){return{aabb:new _l([Bt*S,0,0],[(Bt+1)*S,S,0]),zoom:0,x:0,y:0,wrap:Bt,fullyVisible:!1}},ae=[],ge=[],we=p,ye=f.reparseOverscaled?h:p;if(this._renderWorldCopies)for(var Le=1;Le<=3;Le++)ae.push(te(-Le)),ae.push(te(Le));for(ae.push(te(0));ae.length>0;){var Re=ae.pop(),Ve=Re.x,De=Re.y,ze=Re.fullyVisible;if(!ze){var Ye=Re.aabb.intersects(O);if(0===Ye)continue;ze=2===Ye}var ot=Re.aabb.distanceX(P),yt=Re.aabb.distanceY(P),gt=Math.max(Math.abs(ot),Math.abs(yt));if(Re.zoom===we||gt>3+(1<<we-Re.zoom)-2&&Re.zoom>=H)ge.push({tileID:new m.OverscaledTileID(Re.zoom===we?ye:Re.zoom,Re.wrap,Re.zoom,Ve,De),distanceSq:m.sqrLen([P[0]-.5-Ve,P[1]-.5-De])});else for(var vt=0;vt<4;vt++){var Tt=(Ve<<1)+vt%2,Gt=(De<<1)+(vt>>1);ae.push({aabb:Re.aabb.quadrant(vt),zoom:Re.zoom+1,x:Tt,y:Gt,wrap:Re.wrap,fullyVisible:ze})}}return ge.sort(function(Bt,$t){return Bt.distanceSq-$t.distanceSq}).map(function(Bt){return Bt.tileID})},Or.prototype.resize=function(f,p){this.width=f,this.height=p,this.pixelsToGLUnits=[2/f,-2/p],this._constrain(),this._calcMatrices()},wr.unmodified.get=function(){return this._unmodified},Or.prototype.zoomScale=function(f){return Math.pow(2,f)},Or.prototype.scaleZoom=function(f){return Math.log(f)/Math.LN2},Or.prototype.project=function(f){var p=m.clamp(f.lat,-this.maxValidLatitude,this.maxValidLatitude);return new m.Point(m.mercatorXfromLng(f.lng)*this.worldSize,m.mercatorYfromLat(p)*this.worldSize)},Or.prototype.unproject=function(f){return new m.MercatorCoordinate(f.x/this.worldSize,f.y/this.worldSize).toLngLat()},wr.point.get=function(){return this.project(this.center)},Or.prototype.setLocationAtPoint=function(f,p){var h=this.pointCoordinate(p),v=this.pointCoordinate(this.centerPoint),S=this.locationCoordinate(f),P=new m.MercatorCoordinate(S.x-(h.x-v.x),S.y-(h.y-v.y));this.center=this.coordinateLocation(P),this._renderWorldCopies&&(this.center=this.center.wrap())},Or.prototype.locationPoint=function(f){return this.coordinatePoint(this.locationCoordinate(f))},Or.prototype.pointLocation=function(f){return this.coordinateLocation(this.pointCoordinate(f))},Or.prototype.locationCoordinate=function(f){return m.MercatorCoordinate.fromLngLat(f)},Or.prototype.coordinateLocation=function(f){return f.toLngLat()},Or.prototype.pointCoordinate=function(f){var p=[f.x,f.y,0,1],h=[f.x,f.y,1,1];m.transformMat4(p,p,this.pixelMatrixInverse),m.transformMat4(h,h,this.pixelMatrixInverse);var v=p[3],S=h[3],P=p[1]/v,O=h[1]/S,H=p[2]/v,te=h[2]/S,ae=H===te?0:(0-H)/(te-H);return new m.MercatorCoordinate(m.number(p[0]/v,h[0]/S,ae)/this.worldSize,m.number(P,O,ae)/this.worldSize)},Or.prototype.coordinatePoint=function(f){var p=[f.x*this.worldSize,f.y*this.worldSize,0,1];return m.transformMat4(p,p,this.pixelMatrix),new m.Point(p[0]/p[3],p[1]/p[3])},Or.prototype.getBounds=function(){return(new m.LngLatBounds).extend(this.pointLocation(new m.Point(0,0))).extend(this.pointLocation(new m.Point(this.width,0))).extend(this.pointLocation(new m.Point(this.width,this.height))).extend(this.pointLocation(new m.Point(0,this.height)))},Or.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new m.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Or.prototype.setMaxBounds=function(f){f?(this.lngRange=[f.getWest(),f.getEast()],this.latRange=[f.getSouth(),f.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Or.prototype.calculatePosMatrix=function(f,p){void 0===p&&(p=!1);var h=f.key,v=p?this._alignedPosMatrixCache:this._posMatrixCache;if(v[h])return v[h];var S=f.canonical,P=this.worldSize/this.zoomScale(S.z),O=S.x+Math.pow(2,S.z)*f.wrap,H=m.identity(new Float64Array(16));return m.translate(H,H,[O*P,S.y*P,0]),m.scale(H,H,[P/m.EXTENT,P/m.EXTENT,1]),m.multiply(H,p?this.alignedProjMatrix:this.projMatrix,H),v[h]=new Float32Array(H),v[h]},Or.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Or.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var f,p,h,v,S=-90,P=90,O=-180,H=180,te=this.size,ae=this._unmodified;if(this.latRange){var ge=this.latRange;S=m.mercatorYfromLat(ge[1])*this.worldSize,f=(P=m.mercatorYfromLat(ge[0])*this.worldSize)-S<te.y?te.y/(P-S):0}if(this.lngRange){var we=this.lngRange;O=m.mercatorXfromLng(we[0])*this.worldSize,p=(H=m.mercatorXfromLng(we[1])*this.worldSize)-O<te.x?te.x/(H-O):0}var ye=this.point,Le=Math.max(p||0,f||0);if(Le)return this.center=this.unproject(new m.Point(p?(H+O)/2:ye.x,f?(P+S)/2:ye.y)),this.zoom+=this.scaleZoom(Le),this._unmodified=ae,void(this._constraining=!1);if(this.latRange){var Re=ye.y,Ve=te.y/2;Re-Ve<S&&(v=S+Ve),Re+Ve>P&&(v=P-Ve)}if(this.lngRange){var De=ye.x,ze=te.x/2;De-ze<O&&(h=O+ze),De+ze>H&&(h=H-ze)}void 0===h&&void 0===v||(this.center=this.unproject(new m.Point(void 0!==h?h:ye.x,void 0!==v?v:ye.y))),this._unmodified=ae,this._constraining=!1}},Or.prototype._calcMatrices=function(){if(this.height){var f=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var p=Math.PI/2+this._pitch,h=this._fov*(.5+f.y/this.height),v=Math.sin(h)*this.cameraToCenterDistance/Math.sin(m.clamp(Math.PI-p-h,.01,Math.PI-.01)),S=this.point,P=S.x,O=S.y,H=1.01*(Math.cos(Math.PI/2-this._pitch)*v+this.cameraToCenterDistance),te=this.height/50,ae=new Float64Array(16);m.perspective(ae,this._fov,this.width/this.height,te,H),ae[8]=2*-f.x/this.width,ae[9]=2*f.y/this.height,m.scale(ae,ae,[1,-1,1]),m.translate(ae,ae,[0,0,-this.cameraToCenterDistance]),m.rotateX(ae,ae,this._pitch),m.rotateZ(ae,ae,this.angle),m.translate(ae,ae,[-P,-O,0]),this.mercatorMatrix=m.scale([],ae,[this.worldSize,this.worldSize,this.worldSize]),m.scale(ae,ae,[1,1,m.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=ae,this.invProjMatrix=m.invert([],this.projMatrix);var ge=this.width%2/2,we=this.height%2/2,ye=Math.cos(this.angle),Le=Math.sin(this.angle),Re=P-Math.round(P)+ye*ge+Le*we,Ve=O-Math.round(O)+ye*we+Le*ge,De=new Float64Array(ae);if(m.translate(De,De,[Re>.5?Re-1:Re,Ve>.5?Ve-1:Ve,0]),this.alignedProjMatrix=De,ae=m.create(),m.scale(ae,ae,[this.width/2,-this.height/2,1]),m.translate(ae,ae,[1,-1,0]),this.labelPlaneMatrix=ae,ae=m.create(),m.scale(ae,ae,[1,-1,1]),m.translate(ae,ae,[-1,-1,0]),m.scale(ae,ae,[2/this.width,2/this.height,1]),this.glCoordMatrix=ae,this.pixelMatrix=m.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(ae=m.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=ae,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Or.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var f=this.pointCoordinate(new m.Point(0,0)),p=[f.x*this.worldSize,f.y*this.worldSize,0,1];return m.transformMat4(p,p,this.pixelMatrix)[3]/this.cameraToCenterDistance},Or.prototype.getCameraPoint=function(){var f=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new m.Point(0,f))},Or.prototype.getCameraQueryGeometry=function(f){var p=this.getCameraPoint();if(1===f.length)return[f[0],p];for(var h=p.x,v=p.y,S=p.x,P=p.y,O=0,H=f;O<H.length;O+=1){var te=H[O];h=Math.min(h,te.x),v=Math.min(v,te.y),S=Math.max(S,te.x),P=Math.max(P,te.y)}return[new m.Point(h,v),new m.Point(S,v),new m.Point(S,P),new m.Point(h,P),new m.Point(h,v)]},Object.defineProperties(Or.prototype,wr);var Gs=function(f){var p,h,v,S;this._hashName=f&&encodeURIComponent(f),m.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(p=this._updateHashUnthrottled.bind(this),h=!1,v=null,S=function(){v=null,h&&(p(),v=setTimeout(S,300),h=!1)},function(){return h=!0,v||S(),v})};Gs.prototype.addTo=function(f){return this._map=f,m.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Gs.prototype.remove=function(){return m.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Gs.prototype.getHashString=function(f){var p=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,v=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,v),P=Math.round(p.lng*S)/S,O=Math.round(p.lat*S)/S,H=this._map.getBearing(),te=this._map.getPitch(),ae="";if(ae+=f?"/"+P+"/"+O+"/"+h:h+"/"+O+"/"+P,(H||te)&&(ae+="/"+Math.round(10*H)/10),te&&(ae+="/"+Math.round(te)),this._hashName){var ge=this._hashName,we=!1,ye=m.window.location.hash.slice(1).split("&").map(function(Le){var Re=Le.split("=")[0];return Re===ge?(we=!0,Re+"="+ae):Le}).filter(function(Le){return Le});return we||ye.push(ge+"="+ae),"#"+ye.join("&")}return"#"+ae},Gs.prototype._getCurrentHash=function(){var f,p=this,h=m.window.location.hash.replace("#","");return this._hashName?(h.split("&").map(function(v){return v.split("=")}).forEach(function(v){v[0]===p._hashName&&(f=v)}),(f&&f[1]||"").split("/")):h.split("/")},Gs.prototype._onHashChange=function(){var f=this._getCurrentHash();if(f.length>=3&&!f.some(function(h){return isNaN(h)})){var p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(f[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:p,pitch:+(f[4]||0)}),!0}return!1},Gs.prototype._updateHashUnthrottled=function(){var f=m.window.location.href.replace(/(#.+)?$/,this.getHashString());try{m.window.history.replaceState(m.window.history.state,null,f)}catch{}};var gs={linearity:.3,easing:m.bezier(0,0,.3,1)},eu=m.extend({deceleration:2500,maxSpeed:1400},gs),ys=m.extend({deceleration:20,maxSpeed:1400},gs),wu=m.extend({deceleration:1e3,maxSpeed:360},gs),_c=m.extend({deceleration:1e3,maxSpeed:90},gs),tu=function(f){this._map=f,this.clear()};function nu(f,p){(!f.duration||f.duration<p.duration)&&(f.duration=p.duration,f.easing=p.easing)}function zl(f,p,h){var v=h.maxSpeed,S=h.linearity,P=h.deceleration,O=m.clamp(f*S/(p/1e3),-v,v),H=Math.abs(O)/(P*S);return{easing:h.easing,duration:1e3*H,amount:O*(H/2)}}tu.prototype.clear=function(){this._inertiaBuffer=[]},tu.prototype.record=function(f){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:m.browser.now(),settings:f})},tu.prototype._drainInertiaBuffer=function(){for(var f=this._inertiaBuffer,p=m.browser.now();f.length>0&&p-f[0].time>160;)f.shift()},tu.prototype._onMoveEnd=function(f){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var p={zoom:0,bearing:0,pitch:0,pan:new m.Point(0,0),pinchAround:void 0,around:void 0},h=0,v=this._inertiaBuffer;h<v.length;h+=1){var S=v[h].settings;p.zoom+=S.zoomDelta||0,p.bearing+=S.bearingDelta||0,p.pitch+=S.pitchDelta||0,S.panDelta&&p.pan._add(S.panDelta),S.around&&(p.around=S.around),S.pinchAround&&(p.pinchAround=S.pinchAround)}var P=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,O={};if(p.pan.mag()){var H=zl(p.pan.mag(),P,m.extend({},eu,f||{}));O.offset=p.pan.mult(H.amount/p.pan.mag()),O.center=this._map.transform.center,nu(O,H)}if(p.zoom){var te=zl(p.zoom,P,ys);O.zoom=this._map.transform.zoom+te.amount,nu(O,te)}if(p.bearing){var ae=zl(p.bearing,P,wu);O.bearing=this._map.transform.bearing+m.clamp(ae.amount,-179,179),nu(O,ae)}if(p.pitch){var ge=zl(p.pitch,P,_c);O.pitch=this._map.transform.pitch+ge.amount,nu(O,ge)}if(O.zoom||O.bearing){var we=void 0===p.pinchAround?p.around:p.pinchAround;O.around=we?this._map.unproject(we):this._map.getCenter()}return this.clear(),m.extend(O,{noMoveStart:!0})}};var oa=function(f){function p(v,S,P,O){void 0===O&&(O={});var H=G.mousePos(S.getCanvasContainer(),P),te=S.unproject(H);f.call(this,v,m.extend({point:H,lngLat:te,originalEvent:P},O)),this._defaultPrevented=!1,this.target=S}f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p;var h={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},h.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,h),p}(m.Event),Pa=function(f){function p(v,S,P){var O="touchend"===v?P.changedTouches:P.touches,H=G.touchPos(S.getCanvasContainer(),O),te=H.map(function(we){return S.unproject(we)}),ae=H.reduce(function(we,ye,Le,Re){return we.add(ye.div(Re.length))},new m.Point(0,0)),ge=S.unproject(ae);f.call(this,v,{points:H,point:ae,lngLats:te,lngLat:ge,originalEvent:P}),this._defaultPrevented=!1}f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p;var h={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},h.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,h),p}(m.Event),Ku=function(f){function p(v,S,P){f.call(this,v,{originalEvent:P}),this._defaultPrevented=!1}f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p;var h={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},h.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,h),p}(m.Event),ga=function(f,p){this._map=f,this._clickTolerance=p.clickTolerance};ga.prototype.reset=function(){delete this._mousedownPos},ga.prototype.wheel=function(f){return this._firePreventable(new Ku(f.type,this._map,f))},ga.prototype.mousedown=function(f,p){return this._mousedownPos=p,this._firePreventable(new oa(f.type,this._map,f))},ga.prototype.mouseup=function(f){this._map.fire(new oa(f.type,this._map,f))},ga.prototype.click=function(f,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new oa(f.type,this._map,f))},ga.prototype.dblclick=function(f){return this._firePreventable(new oa(f.type,this._map,f))},ga.prototype.mouseover=function(f){this._map.fire(new oa(f.type,this._map,f))},ga.prototype.mouseout=function(f){this._map.fire(new oa(f.type,this._map,f))},ga.prototype.touchstart=function(f){return this._firePreventable(new Pa(f.type,this._map,f))},ga.prototype.touchmove=function(f){this._map.fire(new Pa(f.type,this._map,f))},ga.prototype.touchend=function(f){this._map.fire(new Pa(f.type,this._map,f))},ga.prototype.touchcancel=function(f){this._map.fire(new Pa(f.type,this._map,f))},ga.prototype._firePreventable=function(f){if(this._map.fire(f),f.defaultPrevented)return{}},ga.prototype.isEnabled=function(){return!0},ga.prototype.isActive=function(){return!1},ga.prototype.enable=function(){},ga.prototype.disable=function(){};var is=function(f){this._map=f};is.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},is.prototype.mousemove=function(f){this._map.fire(new oa(f.type,this._map,f))},is.prototype.mousedown=function(){this._delayContextMenu=!0},is.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new oa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},is.prototype.contextmenu=function(f){this._delayContextMenu?this._contextMenuEvent=f:this._map.fire(new oa(f.type,this._map,f)),this._map.listens("contextmenu")&&f.preventDefault()},is.prototype.isEnabled=function(){return!0},is.prototype.isActive=function(){return!1},is.prototype.enable=function(){},is.prototype.disable=function(){};var on=function(f,p){this._map=f,this._el=f.getCanvasContainer(),this._container=f.getContainer(),this._clickTolerance=p.clickTolerance||1};function ld(f,p){for(var h={},v=0;v<f.length;v++)h[f[v].identifier]=p[v];return h}on.prototype.isEnabled=function(){return!!this._enabled},on.prototype.isActive=function(){return!!this._active},on.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},on.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},on.prototype.mousedown=function(f,p){this.isEnabled()&&f.shiftKey&&0===f.button&&(G.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)},on.prototype.mousemoveWindow=function(f,p){if(this._active){var h=p;if(!(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)){var v=this._startPos;this._lastPos=h,this._box||(this._box=G.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",f));var S=Math.min(v.x,h.x),P=Math.max(v.x,h.x),O=Math.min(v.y,h.y),H=Math.max(v.y,h.y);G.setTransform(this._box,"translate("+S+"px,"+O+"px)"),this._box.style.width=P-S+"px",this._box.style.height=H-O+"px"}}},on.prototype.mouseupWindow=function(f,p){var h=this;if(this._active&&0===f.button){var v=this._startPos,S=p;if(this.reset(),G.suppressClick(),v.x!==S.x||v.y!==S.y)return this._map.fire(new m.Event("boxzoomend",{originalEvent:f})),{cameraAnimation:function(P){return P.fitScreenCoordinates(v,S,h._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",f)}},on.prototype.keydown=function(f){this._active&&27===f.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",f))},on.prototype.reset=function(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(G.remove(this._box),this._box=null),G.enableDrag(),delete this._startPos,delete this._lastPos},on.prototype._fireEvent=function(f,p){return this._map.fire(new m.Event(f,{originalEvent:p}))};var bc=function(f){this.reset(),this.numTouches=f.numTouches};bc.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},bc.prototype.touchstart=function(f,p,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=f.timeStamp),h.length===this.numTouches&&(this.centroid=function(v){for(var S=new m.Point(0,0),P=0,O=v;P<O.length;P+=1)S._add(O[P]);return S.div(v.length)}(p),this.touches=ld(h,p)))},bc.prototype.touchmove=function(f,p,h){if(!this.aborted&&this.centroid){var v=ld(h,p);for(var S in this.touches){var P=v[S];(!P||P.dist(this.touches[S])>30)&&(this.aborted=!0)}}},bc.prototype.touchend=function(f,p,h){if((!this.centroid||f.timeStamp-this.startTime>500)&&(this.aborted=!0),0===h.length){var v=!this.aborted&&this.centroid;if(this.reset(),v)return v}};var xu=function(f){this.singleTap=new bc(f),this.numTaps=f.numTaps,this.reset()};xu.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},xu.prototype.touchstart=function(f,p,h){this.singleTap.touchstart(f,p,h)},xu.prototype.touchmove=function(f,p,h){this.singleTap.touchmove(f,p,h)},xu.prototype.touchend=function(f,p,h){var v=this.singleTap.touchend(f,p,h);if(v){var S=f.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(v)<30;if(S&&P||this.reset(),this.count++,this.lastTime=f.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}};var Wo=function(){this._zoomIn=new xu({numTouches:1,numTaps:2}),this._zoomOut=new xu({numTouches:2,numTaps:1}),this.reset()};Wo.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Wo.prototype.touchstart=function(f,p,h){this._zoomIn.touchstart(f,p,h),this._zoomOut.touchstart(f,p,h)},Wo.prototype.touchmove=function(f,p,h){this._zoomIn.touchmove(f,p,h),this._zoomOut.touchmove(f,p,h)},Wo.prototype.touchend=function(f,p,h){var v=this,S=this._zoomIn.touchend(f,p,h),P=this._zoomOut.touchend(f,p,h);return S?(this._active=!0,f.preventDefault(),setTimeout(function(){return v.reset()},0),{cameraAnimation:function(O){return O.easeTo({duration:300,zoom:O.getZoom()+1,around:O.unproject(S)},{originalEvent:f})}}):P?(this._active=!0,f.preventDefault(),setTimeout(function(){return v.reset()},0),{cameraAnimation:function(O){return O.easeTo({duration:300,zoom:O.getZoom()-1,around:O.unproject(P)},{originalEvent:f})}}):void 0},Wo.prototype.touchcancel=function(){this.reset()},Wo.prototype.enable=function(){this._enabled=!0},Wo.prototype.disable=function(){this._enabled=!1,this.reset()},Wo.prototype.isEnabled=function(){return this._enabled},Wo.prototype.isActive=function(){return this._active};var wc={0:1,2:2},No=function(f){this.reset(),this._clickTolerance=f.clickTolerance||1};No.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},No.prototype._correctButton=function(f,p){return!1},No.prototype._move=function(f,p){return{}},No.prototype.mousedown=function(f,p){if(!this._lastPoint){var h=G.mouseButton(f);this._correctButton(f,h)&&(this._lastPoint=p,this._eventButton=h)}},No.prototype.mousemoveWindow=function(f,p){var v,P,h=this._lastPoint;if(h)if(f.preventDefault(),P=wc[this._eventButton],void 0===(v=f).buttons||(v.buttons&P)!==P)this.reset();else if(this._moved||!(p.dist(h)<this._clickTolerance))return this._moved=!0,this._lastPoint=p,this._move(h,p)},No.prototype.mouseupWindow=function(f){this._lastPoint&&G.mouseButton(f)===this._eventButton&&(this._moved&&G.suppressClick(),this.reset())},No.prototype.enable=function(){this._enabled=!0},No.prototype.disable=function(){this._enabled=!1,this.reset()},No.prototype.isEnabled=function(){return this._enabled},No.prototype.isActive=function(){return this._active};var ln=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.mousedown=function(h,v){f.prototype.mousedown.call(this,h,v),this._lastPoint&&(this._active=!0)},p.prototype._correctButton=function(h,v){return 0===v&&!h.ctrlKey},p.prototype._move=function(h,v){return{around:v,panDelta:v.sub(h)}},p}(No),ud=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype._correctButton=function(h,v){return 0===v&&h.ctrlKey||2===v},p.prototype._move=function(h,v){var S=.8*(v.x-h.x);if(S)return this._active=!0,{bearingDelta:S}},p.prototype.contextmenu=function(h){h.preventDefault()},p}(No),cd=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype._correctButton=function(h,v){return 0===v&&h.ctrlKey||2===v},p.prototype._move=function(h,v){var S=-.5*(v.y-h.y);if(S)return this._active=!0,{pitchDelta:S}},p.prototype.contextmenu=function(h){h.preventDefault()},p}(No),Ps=function(f){this._minTouches=1,this._clickTolerance=f.clickTolerance||1,this.reset()};Ps.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new m.Point(0,0)},Ps.prototype.touchstart=function(f,p,h){return this._calculateTransform(f,p,h)},Ps.prototype.touchmove=function(f,p,h){if(this._active&&!(h.length<this._minTouches))return f.preventDefault(),this._calculateTransform(f,p,h)},Ps.prototype.touchend=function(f,p,h){this._calculateTransform(f,p,h),this._active&&h.length<this._minTouches&&this.reset()},Ps.prototype.touchcancel=function(){this.reset()},Ps.prototype._calculateTransform=function(f,p,h){h.length>0&&(this._active=!0);var v=ld(h,p),S=new m.Point(0,0),P=new m.Point(0,0),O=0;for(var H in v){var te=v[H],ae=this._touches[H];ae&&(S._add(te),P._add(te.sub(ae)),O++,v[H]=te)}if(this._touches=v,!(O<this._minTouches)&&P.mag()){var ge=P.div(O);if(this._sum._add(ge),!(this._sum.mag()<this._clickTolerance))return{around:S.div(O),panDelta:ge}}},Ps.prototype.enable=function(){this._enabled=!0},Ps.prototype.disable=function(){this._enabled=!1,this.reset()},Ps.prototype.isEnabled=function(){return this._enabled},Ps.prototype.isActive=function(){return this._active};var Va=function(){this.reset()};function dd(f,p,h){for(var v=0;v<f.length;v++)if(f[v].identifier===h)return p[v]}function fd(f,p){return Math.log(f/p)/Math.LN2}Va.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Va.prototype._start=function(f){},Va.prototype._move=function(f,p,h){return{}},Va.prototype.touchstart=function(f,p,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([p[0],p[1]]))},Va.prototype.touchmove=function(f,p,h){if(this._firstTwoTouches){f.preventDefault();var v=this._firstTwoTouches,S=v[1],P=dd(h,p,v[0]),O=dd(h,p,S);if(P&&O){var H=this._aroundCenter?null:P.add(O).div(2);return this._move([P,O],H,f)}}},Va.prototype.touchend=function(f,p,h){if(this._firstTwoTouches){var v=this._firstTwoTouches,S=v[1],P=dd(h,p,v[0]),O=dd(h,p,S);P&&O||(this._active&&G.suppressClick(),this.reset())}},Va.prototype.touchcancel=function(){this.reset()},Va.prototype.enable=function(f){this._enabled=!0,this._aroundCenter=!!f&&"center"===f.around},Va.prototype.disable=function(){this._enabled=!1,this.reset()},Va.prototype.isEnabled=function(){return this._enabled},Va.prototype.isActive=function(){return this._active};var hf=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.reset=function(){f.prototype.reset.call(this),delete this._distance,delete this._startDistance},p.prototype._start=function(h){this._startDistance=this._distance=h[0].dist(h[1])},p.prototype._move=function(h,v){var S=this._distance;if(this._distance=h[0].dist(h[1]),this._active||!(Math.abs(fd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:fd(this._distance,S),pinchAround:v}},p}(Va);function Ji(f,p){return 180*f.angleWith(p)/Math.PI}var bl=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.reset=function(){f.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},p.prototype._start=function(h){this._startVector=this._vector=h[0].sub(h[1]),this._minDiameter=h[0].dist(h[1])},p.prototype._move=function(h,v){var S=this._vector;if(this._vector=h[0].sub(h[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ji(this._vector,S),pinchAround:v}},p.prototype._isBelowThreshold=function(h){this._minDiameter=Math.min(this._minDiameter,h.mag());var v=25/(Math.PI*this._minDiameter)*360,S=Ji(h,this._startVector);return Math.abs(S)<v},p}(Va);function hd(f){return Math.abs(f.y)>Math.abs(f.x)}var xc=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.reset=function(){f.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},p.prototype._start=function(h){this._lastPoints=h,hd(h[0].sub(h[1]))&&(this._valid=!1)},p.prototype._move=function(h,v,S){var P=h[0].sub(this._lastPoints[0]),O=h[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(P,O,S.timeStamp),this._valid)return this._lastPoints=h,this._active=!0,{pitchDelta:(P.y+O.y)/2*-.5}},p.prototype.gestureBeginsVertically=function(h,v,S){if(void 0!==this._valid)return this._valid;var P=h.mag()>=2,O=v.mag()>=2;if(P||O){if(!P||!O)return void 0===this._firstMove&&(this._firstMove=S),S-this._firstMove<100&&void 0;var H=h.y>0==v.y>0;return hd(h)&&hd(v)&&H}},p}(Va),pf={panStep:100,bearingStep:15,pitchStep:10},el=function(){var f=pf;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1};function pd(f){return f*(2-f)}el.prototype.reset=function(){this._active=!1},el.prototype.keydown=function(f){var p=this;if(!(f.altKey||f.ctrlKey||f.metaKey)){var h=0,v=0,S=0,P=0,O=0;switch(f.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:f.shiftKey?v=-1:(f.preventDefault(),P=-1);break;case 39:f.shiftKey?v=1:(f.preventDefault(),P=1);break;case 38:f.shiftKey?S=1:(f.preventDefault(),O=-1);break;case 40:f.shiftKey?S=-1:(f.preventDefault(),O=1);break;default:return}return this._rotationDisabled&&(v=0,S=0),{cameraAnimation:function(H){var te=H.getZoom();H.easeTo({duration:300,easeId:"keyboardHandler",easing:pd,zoom:h?Math.round(te)+h*(f.shiftKey?2:1):te,bearing:H.getBearing()+v*p._bearingStep,pitch:H.getPitch()+S*p._pitchStep,offset:[-P*p._panStep,-O*p._panStep],center:H.getCenter()},{originalEvent:f})}}}},el.prototype.enable=function(){this._enabled=!0},el.prototype.disable=function(){this._enabled=!1,this.reset()},el.prototype.isEnabled=function(){return this._enabled},el.prototype.isActive=function(){return this._active},el.prototype.disableRotation=function(){this._rotationDisabled=!0},el.prototype.enableRotation=function(){this._rotationDisabled=!1};var Ki=function(f,p){this._map=f,this._el=f.getCanvasContainer(),this._handler=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,m.bindAll(["_onTimeout"],this)};Ki.prototype.setZoomRate=function(f){this._defaultZoomRate=f},Ki.prototype.setWheelZoomRate=function(f){this._wheelZoomRate=f},Ki.prototype.isEnabled=function(){return!!this._enabled},Ki.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},Ki.prototype.isZooming=function(){return!!this._zooming},Ki.prototype.enable=function(f){this.isEnabled()||(this._enabled=!0,this._aroundCenter=f&&"center"===f.around)},Ki.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ki.prototype.wheel=function(f){if(this.isEnabled()){var p=f.deltaMode===m.window.WheelEvent.DOM_DELTA_LINE?40*f.deltaY:f.deltaY,h=m.browser.now(),v=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,0!==p&&p%4.000244140625==0?this._type="wheel":0!==p&&Math.abs(p)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,f)):this._type||(this._type=Math.abs(v*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),f.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=f,this._delta-=p,this._active||this._start(f)),f.preventDefault()}},Ki.prototype._onTimeout=function(f){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},Ki.prototype._start=function(f){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var p=G.mousePos(this._el,f);this._around=m.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(p)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Ki.prototype.renderFrame=function(){var f=this;if(this._frameId&&(this._frameId=null,this.isActive())){var p=this._map.transform;if(0!==this._delta){var h="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,v=2/(1+Math.exp(-Math.abs(this._delta*h)));this._delta<0&&0!==v&&(v=1/v);var S="number"==typeof this._targetZoom?p.zoomScale(this._targetZoom):p.scale;this._targetZoom=Math.min(p.maxZoom,Math.max(p.minZoom,p.scaleZoom(S*v))),"wheel"===this._type&&(this._startZoom=p.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var P,O="number"==typeof this._targetZoom?this._targetZoom:p.zoom,H=this._startZoom,te=this._easing,ae=!1;if("wheel"===this._type&&H&&te){var ge=Math.min((m.browser.now()-this._lastWheelEventTime)/200,1),we=te(ge);P=m.number(H,O,we),ge<1?this._frameId||(this._frameId=!0):ae=!0}else P=O,ae=!0;return this._active=!0,ae&&(this._active=!1,this._finishTimeout=setTimeout(function(){f._zooming=!1,f._handler._triggerRenderFrame(),delete f._targetZoom,delete f._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ae,zoomDelta:P-p.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ki.prototype._smoothOutEasing=function(f){var p=m.ease;if(this._prevEase){var h=this._prevEase,v=(m.browser.now()-h.start)/h.duration,S=h.easing(v+.01)-h.easing(v),P=.27/Math.sqrt(S*S+1e-4)*.01,O=Math.sqrt(.0729-P*P);p=m.bezier(P,O,.25,1)}return this._prevEase={start:m.browser.now(),duration:f,easing:p},p},Ki.prototype.reset=function(){this._active=!1};var ti=function(f,p){this._clickZoom=f,this._tapZoom=p};ti.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},ti.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},ti.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},ti.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var tl=function(){this.reset()};tl.prototype.reset=function(){this._active=!1},tl.prototype.dblclick=function(f,p){return f.preventDefault(),{cameraAnimation:function(h){h.easeTo({duration:300,zoom:h.getZoom()+(f.shiftKey?-1:1),around:h.unproject(p)},{originalEvent:f})}}},tl.prototype.enable=function(){this._enabled=!0},tl.prototype.disable=function(){this._enabled=!1,this.reset()},tl.prototype.isEnabled=function(){return this._enabled},tl.prototype.isActive=function(){return this._active};var oi=function(){this._tap=new xu({numTouches:1,numTaps:1}),this.reset()};oi.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},oi.prototype.touchstart=function(f,p,h){this._swipePoint||(this._tapTime&&f.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?h.length>0&&(this._swipePoint=p[0],this._swipeTouch=h[0].identifier):this._tap.touchstart(f,p,h))},oi.prototype.touchmove=function(f,p,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;var v=p[0],S=v.y-this._swipePoint.y;return this._swipePoint=v,f.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(f,p,h)},oi.prototype.touchend=function(f,p,h){this._tapTime?this._swipePoint&&0===h.length&&this.reset():this._tap.touchend(f,p,h)&&(this._tapTime=f.timeStamp)},oi.prototype.touchcancel=function(){this.reset()},oi.prototype.enable=function(){this._enabled=!0},oi.prototype.disable=function(){this._enabled=!1,this.reset()},oi.prototype.isEnabled=function(){return this._enabled},oi.prototype.isActive=function(){return this._active};var vs=function(f,p,h){this._el=f,this._mousePan=p,this._touchPan=h};vs.prototype.enable=function(f){this._inertiaOptions=f||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")},vs.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")},vs.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},vs.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Eu=function(f,p,h){this._pitchWithRotate=f.pitchWithRotate,this._mouseRotate=p,this._mousePitch=h};Eu.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Eu.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Eu.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Eu.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var nl=function(f,p,h,v){this._el=f,this._touchZoom=p,this._touchRotate=h,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0};nl.prototype.enable=function(f){this._touchZoom.enable(f),this._rotationDisabled||this._touchRotate.enable(f),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")},nl.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")},nl.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},nl.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},nl.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},nl.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var ru=function(f){return f.zoom||f.drag||f.pitch||f.rotate},_i=function(f){function p(){f.apply(this,arguments)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p}(m.Event);function Su(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}var an=function(f,p){this._map=f,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new tu(f),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p),m.bindAll(["handleEvent","handleWindowEvent"],this);var h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[m.window.document,"mousemove",{capture:!0}],[m.window.document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[m.window,"blur",void 0]];for(var v=0,S=this._listeners;v<S.length;v+=1){var P=S[v],O=P[0];G.addEventListener(O,P[1],O===m.window.document?this.handleWindowEvent:this.handleEvent,P[2])}};an.prototype.destroy=function(){for(var f=0,p=this._listeners;f<p.length;f+=1){var h=p[f],v=h[0];G.removeEventListener(v,h[1],v===m.window.document?this.handleWindowEvent:this.handleEvent,h[2])}},an.prototype._addDefaultHandlers=function(f){var p=this._map,h=p.getCanvasContainer();this._add("mapEvent",new ga(p,f));var v=p.boxZoom=new on(p,f);this._add("boxZoom",v);var S=new Wo,P=new tl;p.doubleClickZoom=new ti(P,S),this._add("tapZoom",S),this._add("clickZoom",P);var O=new oi;this._add("tapDragZoom",O);var H=p.touchPitch=new xc;this._add("touchPitch",H);var te=new ud(f),ae=new cd(f);p.dragRotate=new Eu(f,te,ae),this._add("mouseRotate",te,["mousePitch"]),this._add("mousePitch",ae,["mouseRotate"]);var ge=new ln(f),we=new Ps(f);p.dragPan=new vs(h,ge,we),this._add("mousePan",ge),this._add("touchPan",we,["touchZoom","touchRotate"]);var ye=new bl,Le=new hf;p.touchZoomRotate=new nl(h,Le,ye,O),this._add("touchRotate",ye,["touchPan","touchZoom"]),this._add("touchZoom",Le,["touchPan","touchRotate"]);var Re=p.scrollZoom=new Ki(p,this);this._add("scrollZoom",Re,["mousePan"]);var Ve=p.keyboard=new el;this._add("keyboard",Ve),this._add("blockableMapEvent",new is(p));for(var De=0,ze=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];De<ze.length;De+=1){var Ye=ze[De];f.interactive&&f[Ye]&&p[Ye].enable(f[Ye])}},an.prototype._add=function(f,p,h){this._handlers.push({handlerName:f,handler:p,allowed:h}),this._handlersById[f]=p},an.prototype.stop=function(f){if(!this._updatingCamera){for(var p=0,h=this._handlers;p<h.length;p+=1)h[p].handler.reset();this._inertia.clear(),this._fireEvents({},{},f),this._changes=[]}},an.prototype.isActive=function(){for(var f=0,p=this._handlers;f<p.length;f+=1)if(p[f].handler.isActive())return!0;return!1},an.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},an.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},an.prototype.isMoving=function(){return Boolean(ru(this._eventsInProgress))||this.isZooming()},an.prototype._blockedByActive=function(f,p,h){for(var v in f)if(v!==h&&(!p||p.indexOf(v)<0))return!0;return!1},an.prototype.handleWindowEvent=function(f){this.handleEvent(f,f.type+"Window")},an.prototype._getMapTouches=function(f){for(var p=[],h=0,v=f;h<v.length;h+=1){var S=v[h];this._el.contains(S.target)&&p.push(S)}return p},an.prototype.handleEvent=function(f,p){if("blur"!==f.type){this._updatingCamera=!0;for(var h="renderFrame"===f.type?void 0:f,v={needsRenderFrame:!1},S={},P={},O=f.touches?this._getMapTouches(f.touches):void 0,H=O?G.touchPos(this._el,O):G.mousePos(this._el,f),te=0,ae=this._handlers;te<ae.length;te+=1){var ge=ae[te],we=ge.handlerName,ye=ge.handler,Le=ge.allowed;if(ye.isEnabled()){var Re=void 0;this._blockedByActive(P,Le,we)?ye.reset():ye[p||f.type]&&(Re=ye[p||f.type](f,H,O),this.mergeHandlerResult(v,S,Re,we,h),Re&&Re.needsRenderFrame&&this._triggerRenderFrame()),(Re||ye.isActive())&&(P[we]=ye)}}var Ve={};for(var De in this._previousActiveHandlers)P[De]||(Ve[De]=h);this._previousActiveHandlers=P,(Object.keys(Ve).length||Su(v))&&(this._changes.push([v,S,Ve]),this._triggerRenderFrame()),(Object.keys(P).length||Su(v))&&this._map._stop(!0),this._updatingCamera=!1;var ze=v.cameraAnimation;ze&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ze(this._map))}else this.stop(!0)},an.prototype.mergeHandlerResult=function(f,p,h,v,S){if(h){m.extend(f,h);var P={handlerName:v,originalEvent:h.originalEvent||S};void 0!==h.zoomDelta&&(p.zoom=P),void 0!==h.panDelta&&(p.drag=P),void 0!==h.pitchDelta&&(p.pitch=P),void 0!==h.bearingDelta&&(p.rotate=P)}},an.prototype._applyChanges=function(){for(var f={},p={},h={},v=0,S=this._changes;v<S.length;v+=1){var P=S[v],O=P[0],H=P[1],te=P[2];O.panDelta&&(f.panDelta=(f.panDelta||new m.Point(0,0))._add(O.panDelta)),O.zoomDelta&&(f.zoomDelta=(f.zoomDelta||0)+O.zoomDelta),O.bearingDelta&&(f.bearingDelta=(f.bearingDelta||0)+O.bearingDelta),O.pitchDelta&&(f.pitchDelta=(f.pitchDelta||0)+O.pitchDelta),void 0!==O.around&&(f.around=O.around),void 0!==O.pinchAround&&(f.pinchAround=O.pinchAround),O.noInertia&&(f.noInertia=O.noInertia),m.extend(p,H),m.extend(h,te)}this._updateMapTransform(f,p,h),this._changes=[]},an.prototype._updateMapTransform=function(f,p,h){var v=this._map,S=v.transform;if(!Su(f))return this._fireEvents(p,h,!0);var P=f.panDelta,O=f.zoomDelta,H=f.bearingDelta,te=f.pitchDelta,ae=f.around,ge=f.pinchAround;void 0!==ge&&(ae=ge),v._stop(!0),ae=ae||v.transform.centerPoint;var we=S.pointLocation(P?ae.sub(P):ae);H&&(S.bearing+=H),te&&(S.pitch+=te),O&&(S.zoom+=O),S.setLocationAtPoint(we,ae),this._map._update(),f.noInertia||this._inertia.record(f),this._fireEvents(p,h,!0)},an.prototype._fireEvents=function(f,p,h){var v=this,S=ru(this._eventsInProgress),P=ru(f),O={};for(var H in f)this._eventsInProgress[H]||(O[H+"start"]=f[H].originalEvent),this._eventsInProgress[H]=f[H];for(var te in!S&&P&&this._fireEvent("movestart",P.originalEvent),O)this._fireEvent(te,O[te]);for(var ae in P&&this._fireEvent("move",P.originalEvent),f)this._fireEvent(ae,f[ae].originalEvent);var ge,we={};for(var ye in this._eventsInProgress){var Le=this._eventsInProgress[ye],Re=Le.handlerName,Ve=Le.originalEvent;this._handlersById[Re].isActive()||(delete this._eventsInProgress[ye],we[ye+"end"]=ge=p[Re]||Ve)}for(var De in we)this._fireEvent(De,we[De]);var ze=ru(this._eventsInProgress);if(h&&(S||P)&&!ze){this._updatingCamera=!0;var Ye=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ot=function(yt){return 0!==yt&&-v._bearingSnap<yt&&yt<v._bearingSnap};Ye?(ot(Ye.bearing||this._map.getBearing())&&(Ye.bearing=0),this._map.easeTo(Ye,{originalEvent:ge})):(this._map.fire(new m.Event("moveend",{originalEvent:ge})),ot(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},an.prototype._fireEvent=function(f,p){this._map.fire(new m.Event(f,p?{originalEvent:p}:{}))},an.prototype._requestFrame=function(){var f=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(p){delete f._frameId,f.handleEvent(new _i("renderFrame",{timeStamp:p})),f._applyChanges()})},an.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var zn=function(f){function p(h,v){f.call(this),this._moving=!1,this._zooming=!1,this.transform=h,this._bearingSnap=v.bearingSnap,m.bindAll(["_renderFrameCallback"],this)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.getCenter=function(){return new m.LngLat(this.transform.center.lng,this.transform.center.lat)},p.prototype.setCenter=function(h,v){return this.jumpTo({center:h},v)},p.prototype.panBy=function(h,v,S){return h=m.Point.convert(h).mult(-1),this.panTo(this.transform.center,m.extend({offset:h},v),S)},p.prototype.panTo=function(h,v,S){return this.easeTo(m.extend({center:h},v),S)},p.prototype.getZoom=function(){return this.transform.zoom},p.prototype.setZoom=function(h,v){return this.jumpTo({zoom:h},v),this},p.prototype.zoomTo=function(h,v,S){return this.easeTo(m.extend({zoom:h},v),S)},p.prototype.zoomIn=function(h,v){return this.zoomTo(this.getZoom()+1,h,v),this},p.prototype.zoomOut=function(h,v){return this.zoomTo(this.getZoom()-1,h,v),this},p.prototype.getBearing=function(){return this.transform.bearing},p.prototype.setBearing=function(h,v){return this.jumpTo({bearing:h},v),this},p.prototype.getPadding=function(){return this.transform.padding},p.prototype.setPadding=function(h,v){return this.jumpTo({padding:h},v),this},p.prototype.rotateTo=function(h,v,S){return this.easeTo(m.extend({bearing:h},v),S)},p.prototype.resetNorth=function(h,v){return this.rotateTo(0,m.extend({duration:1e3},h),v),this},p.prototype.resetNorthPitch=function(h,v){return this.easeTo(m.extend({bearing:0,pitch:0,duration:1e3},h),v),this},p.prototype.snapToNorth=function(h,v){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(h,v):this},p.prototype.getPitch=function(){return this.transform.pitch},p.prototype.setPitch=function(h,v){return this.jumpTo({pitch:h},v),this},p.prototype.cameraForBounds=function(h,v){h=m.LngLatBounds.convert(h);var S=v&&v.bearing||0;return this._cameraForBoxAndBearing(h.getNorthWest(),h.getSouthEast(),S,v)},p.prototype._cameraForBoxAndBearing=function(h,v,S,P){var O={top:0,bottom:0,right:0,left:0};if("number"==typeof(P=m.extend({padding:O,offset:[0,0],maxZoom:this.transform.maxZoom},P)).padding){var H=P.padding;P.padding={top:H,bottom:H,right:H,left:H}}P.padding=m.extend(O,P.padding);var te=this.transform,ae=te.padding,ge=te.project(m.LngLat.convert(h)),we=te.project(m.LngLat.convert(v)),ye=ge.rotate(-S*Math.PI/180),Le=we.rotate(-S*Math.PI/180),Re=new m.Point(Math.max(ye.x,Le.x),Math.max(ye.y,Le.y)),Ve=new m.Point(Math.min(ye.x,Le.x),Math.min(ye.y,Le.y)),De=Re.sub(Ve),ze=(te.width-(ae.left+ae.right+P.padding.left+P.padding.right))/De.x,Ye=(te.height-(ae.top+ae.bottom+P.padding.top+P.padding.bottom))/De.y;if(!(Ye<0||ze<0)){var ot=Math.min(te.scaleZoom(te.scale*Math.min(ze,Ye)),P.maxZoom),yt="number"==typeof P.offset.x?new m.Point(P.offset.x,P.offset.y):m.Point.convert(P.offset),gt=new m.Point((P.padding.left-P.padding.right)/2,(P.padding.top-P.padding.bottom)/2).rotate(S*Math.PI/180),vt=yt.add(gt).mult(te.scale/te.zoomScale(ot));return{center:te.unproject(ge.add(we).div(2).sub(vt)),zoom:ot,bearing:S}}m.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},p.prototype.fitBounds=function(h,v,S){return this._fitInternal(this.cameraForBounds(h,v),v,S)},p.prototype.fitScreenCoordinates=function(h,v,S,P,O){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(m.Point.convert(h)),this.transform.pointLocation(m.Point.convert(v)),S,P),P,O)},p.prototype._fitInternal=function(h,v,S){return h?(delete(v=m.extend(h,v)).padding,v.linear?this.easeTo(v,S):this.flyTo(v,S)):this},p.prototype.jumpTo=function(h,v){this.stop();var S=this.transform,P=!1,O=!1,H=!1;return"zoom"in h&&S.zoom!==+h.zoom&&(P=!0,S.zoom=+h.zoom),void 0!==h.center&&(S.center=m.LngLat.convert(h.center)),"bearing"in h&&S.bearing!==+h.bearing&&(O=!0,S.bearing=+h.bearing),"pitch"in h&&S.pitch!==+h.pitch&&(H=!0,S.pitch=+h.pitch),null==h.padding||S.isPaddingEqual(h.padding)||(S.padding=h.padding),this.fire(new m.Event("movestart",v)).fire(new m.Event("move",v)),P&&this.fire(new m.Event("zoomstart",v)).fire(new m.Event("zoom",v)).fire(new m.Event("zoomend",v)),O&&this.fire(new m.Event("rotatestart",v)).fire(new m.Event("rotate",v)).fire(new m.Event("rotateend",v)),H&&this.fire(new m.Event("pitchstart",v)).fire(new m.Event("pitch",v)).fire(new m.Event("pitchend",v)),this.fire(new m.Event("moveend",v))},p.prototype.easeTo=function(h,v){var S=this;this._stop(!1,h.easeId),(!1===(h=m.extend({offset:[0,0],duration:500,easing:m.ease},h)).animate||!h.essential&&m.browser.prefersReducedMotion)&&(h.duration=0);var P=this.transform,O=this.getZoom(),H=this.getBearing(),te=this.getPitch(),ae=this.getPadding(),ge="zoom"in h?+h.zoom:O,we="bearing"in h?this._normalizeBearing(h.bearing,H):H,ye="pitch"in h?+h.pitch:te,Le="padding"in h?h.padding:P.padding,Re=m.Point.convert(h.offset),Ve=P.centerPoint.add(Re),De=P.pointLocation(Ve),ze=m.LngLat.convert(h.center||De);this._normalizeCenter(ze);var Ye,ot,yt=P.project(De),gt=P.project(ze).sub(yt),vt=P.zoomScale(ge-O);h.around&&(Ye=m.LngLat.convert(h.around),ot=P.locationPoint(Ye));var Tt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ge!==O,this._rotating=this._rotating||H!==we,this._pitching=this._pitching||ye!==te,this._padding=!P.isPaddingEqual(Le),this._easeId=h.easeId,this._prepareEase(v,h.noMoveStart,Tt),this._ease(function(Gt){if(S._zooming&&(P.zoom=m.number(O,ge,Gt)),S._rotating&&(P.bearing=m.number(H,we,Gt)),S._pitching&&(P.pitch=m.number(te,ye,Gt)),S._padding&&(P.interpolatePadding(ae,Le,Gt),Ve=P.centerPoint.add(Re)),Ye)P.setLocationAtPoint(Ye,ot);else{var Bt=P.zoomScale(P.zoom-O),$t=ge>O?Math.min(2,vt):Math.max(.5,vt),wn=Math.pow($t,1-Gt),rn=P.unproject(yt.add(gt.mult(Gt*wn)).mult(Bt));P.setLocationAtPoint(P.renderWorldCopies?rn.wrap():rn,Ve)}S._fireMoveEvents(v)},function(Gt){S._afterEase(v,Gt)},h),this},p.prototype._prepareEase=function(h,v,S){void 0===S&&(S={}),this._moving=!0,v||S.moving||this.fire(new m.Event("movestart",h)),this._zooming&&!S.zooming&&this.fire(new m.Event("zoomstart",h)),this._rotating&&!S.rotating&&this.fire(new m.Event("rotatestart",h)),this._pitching&&!S.pitching&&this.fire(new m.Event("pitchstart",h))},p.prototype._fireMoveEvents=function(h){this.fire(new m.Event("move",h)),this._zooming&&this.fire(new m.Event("zoom",h)),this._rotating&&this.fire(new m.Event("rotate",h)),this._pitching&&this.fire(new m.Event("pitch",h))},p.prototype._afterEase=function(h,v){if(!this._easeId||!v||this._easeId!==v){delete this._easeId;var S=this._zooming,P=this._rotating,O=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,S&&this.fire(new m.Event("zoomend",h)),P&&this.fire(new m.Event("rotateend",h)),O&&this.fire(new m.Event("pitchend",h)),this.fire(new m.Event("moveend",h))}},p.prototype.flyTo=function(h,v){var S=this;if(!h.essential&&m.browser.prefersReducedMotion){var P=m.pick(h,["center","zoom","bearing","pitch","around"]);return this.jumpTo(P,v)}this.stop(),h=m.extend({offset:[0,0],speed:1.2,curve:1.42,easing:m.ease},h);var O=this.transform,H=this.getZoom(),te=this.getBearing(),ae=this.getPitch(),ge=this.getPadding(),we="zoom"in h?m.clamp(+h.zoom,O.minZoom,O.maxZoom):H,ye="bearing"in h?this._normalizeBearing(h.bearing,te):te,Le="pitch"in h?+h.pitch:ae,Re="padding"in h?h.padding:O.padding,Ve=O.zoomScale(we-H),De=m.Point.convert(h.offset),ze=O.centerPoint.add(De),Ye=O.pointLocation(ze),ot=m.LngLat.convert(h.center||Ye);this._normalizeCenter(ot);var yt=O.project(Ye),gt=O.project(ot).sub(yt),vt=h.curve,Tt=Math.max(O.width,O.height),Gt=Tt/Ve,Bt=gt.mag();if("minZoom"in h){var $t=m.clamp(Math.min(h.minZoom,H,we),O.minZoom,O.maxZoom),wn=Tt/O.zoomScale($t-H);vt=Math.sqrt(wn/Bt*2)}var rn=vt*vt;function Rn(jn){var Ln=(Gt*Gt-Tt*Tt+(jn?-1:1)*rn*rn*Bt*Bt)/(2*(jn?Gt:Tt)*rn*Bt);return Math.log(Math.sqrt(Ln*Ln+1)-Ln)}function jr(jn){return(Math.exp(jn)-Math.exp(-jn))/2}function un(jn){return(Math.exp(jn)+Math.exp(-jn))/2}var er=Rn(0),xr=function(jn){return un(er)/un(er+vt*jn)},tr=function(jn){return Tt*((un(er)*(jr(Ln=er+vt*jn)/un(Ln))-jr(er))/rn)/Bt;var Ln},qn=(Rn(1)-er)/vt;if(Math.abs(Bt)<1e-6||!isFinite(qn)){if(Math.abs(Tt-Gt)<1e-6)return this.easeTo(h,v);var $n=Gt<Tt?-1:1;qn=Math.abs(Math.log(Gt/Tt))/vt,tr=function(){return 0},xr=function(jn){return Math.exp($n*vt*jn)}}return h.duration="duration"in h?+h.duration:1e3*qn/("screenSpeed"in h?+h.screenSpeed/vt:+h.speed),h.maxDuration&&h.duration>h.maxDuration&&(h.duration=0),this._zooming=!0,this._rotating=te!==ye,this._pitching=Le!==ae,this._padding=!O.isPaddingEqual(Re),this._prepareEase(v,!1),this._ease(function(jn){var Ln=jn*qn,bi=1/xr(Ln);O.zoom=1===jn?we:H+O.scaleZoom(bi),S._rotating&&(O.bearing=m.number(te,ye,jn)),S._pitching&&(O.pitch=m.number(ae,Le,jn)),S._padding&&(O.interpolatePadding(ge,Re,jn),ze=O.centerPoint.add(De));var mo=1===jn?ot:O.unproject(yt.add(gt.mult(tr(Ln))).mult(bi));O.setLocationAtPoint(O.renderWorldCopies?mo.wrap():mo,ze),S._fireMoveEvents(v)},function(){return S._afterEase(v)},h),this},p.prototype.isEasing=function(){return!!this._easeFrameId},p.prototype.stop=function(){return this._stop()},p.prototype._stop=function(h,v){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var S=this._onEaseEnd;delete this._onEaseEnd,S.call(this,v)}if(!h){var P=this.handlers;P&&P.stop(!1)}return this},p.prototype._ease=function(h,v,S){!1===S.animate||0===S.duration?(h(1),v()):(this._easeStart=m.browser.now(),this._easeOptions=S,this._onEaseFrame=h,this._onEaseEnd=v,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},p.prototype._renderFrameCallback=function(){var h=Math.min((m.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(h)),h<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},p.prototype._normalizeBearing=function(h,v){h=m.wrap(h,-180,180);var S=Math.abs(h-v);return Math.abs(h-360-v)<S&&(h-=360),Math.abs(h+360-v)<S&&(h+=360),h},p.prototype._normalizeCenter=function(h){var v=this.transform;if(v.renderWorldCopies&&!v.lngRange){var S=h.lng-v.center.lng;h.lng+=S>180?-360:S<-180?360:0}},p}(m.Evented),eo=function(f){void 0===f&&(f={}),this.options=f,m.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};eo.prototype.getDefaultPosition=function(){return"bottom-right"},eo.prototype.onAdd=function(f){var p=this.options&&this.options.compact;return this._map=f,this._container=G.create("div","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=G.create("button","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.type="button",this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=G.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),p&&this._container.classList.add("maplibregl-compact","mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===p&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},eo.prototype.onRemove=function(){G.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},eo.prototype._setElementTitle=function(f,p){var h=this._map._getUIString("AttributionControl."+p);f.title=h,f.setAttribute("aria-label",h)},eo.prototype._toggleAttribution=function(){this._container.classList.contains("maplibregl-compact-show")||this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},eo.prototype._updateEditLink=function(){var f=this._editLink;f||(f=this._editLink=this._container.querySelector(".mapbox-improve-map"));var p=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||m.config.ACCESS_TOKEN}];if(f){var h=p.reduce(function(v,S,P){return S.value&&(v+=S.key+"="+S.value+(P<p.length-1?"&":"")),v},"?");f.href=m.config.FEEDBACK_URL+"/"+h+(this._map._hash?this._map._hash.getHashString(!0):""),f.rel="noopener nofollow",this._setElementTitle(f,"MapFeedback")}},eo.prototype._updateData=function(f){!f||"metadata"!==f.sourceDataType&&"visibility"!==f.sourceDataType&&"style"!==f.dataType||(this._updateAttributions(),this._updateEditLink())},eo.prototype._updateAttributions=function(){if(this._map.style){var f=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?f=f.concat(this.options.customAttribution.map(function(H){return"string"!=typeof H?"":H})):"string"==typeof this.options.customAttribution&&f.push(this.options.customAttribution)),this._map.style.stylesheet){var p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}var h=this._map.style.sourceCaches;for(var v in h){var S=h[v];if(S.used){var P=S.getSource();P.attribution&&f.indexOf(P.attribution)<0&&f.push(P.attribution)}}f.sort(function(H,te){return H.length-te.length});var O=(f=f.filter(function(H,te){for(var ae=te+1;ae<f.length;ae++)if(f[ae].indexOf(H)>=0)return!1;return!0})).join(" | ");O!==this._attribHTML&&(this._attribHTML=O,f.length?(this._innerContainer.innerHTML=O,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._editLink=null)}},eo.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("maplibregl-compact","mapboxgl-compact"):this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show")};var Hs=function(){m.bindAll(["_updateLogo"],this),m.bindAll(["_updateCompact"],this)};Hs.prototype.onAdd=function(f){this._map=f,this._container=G.create("div","maplibregl-ctrl mapboxgl-ctrl");var p=G.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Hs.prototype.onRemove=function(){G.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Hs.prototype.getDefaultPosition=function(){return"bottom-left"},Hs.prototype._updateLogo=function(f){f&&"metadata"!==f.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Hs.prototype._logoRequired=function(){if(this._map.style){var f=this._map.style.sourceCaches;for(var p in f)if(f[p].getSource().mapbox_logo)return!0;return!1}},Hs.prototype._updateCompact=function(){var f=this._container.children;if(f.length){var p=f[0];this._map.getCanvasContainer().offsetWidth<250?p.classList.add("maplibregl-compact","mapboxgl-compact"):p.classList.remove("maplibregl-compact","mapboxgl-compact")}};var rl=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};rl.prototype.add=function(f){var p=++this._id;return this._queue.push({callback:f,id:p,cancelled:!1}),p},rl.prototype.remove=function(f){for(var p=this._currentlyRunning,h=0,v=p?this._queue.concat(p):this._queue;h<v.length;h+=1){var S=v[h];if(S.id===f)return void(S.cancelled=!0)}},rl.prototype.run=function(f){void 0===f&&(f=0);var p=this._currentlyRunning=this._queue;this._queue=[];for(var h=0,v=p;h<v.length;h+=1){var S=v[h];if(!S.cancelled&&(S.callback(f),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},rl.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var aa={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},lo=m.window.HTMLImageElement,_h=m.window.HTMLElement,il=m.window.ImageBitmap,Ni={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Yi=function(f){function p(v){var S=this;if(null!=(v=m.extend({},Ni,v)).minZoom&&null!=v.maxZoom&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=v.minPitch&&null!=v.maxPitch&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=v.minPitch&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=v.maxPitch&&v.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var P=new Or(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies);if(f.call(this,P,v),this._interactive=v.interactive,this._maxTileCacheSize=v.maxTileCacheSize,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._crossSourceCollisions=v.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=v.collectResourceTiming,this._renderTaskQueue=new rl,this._controls=[],this._mapId=m.uniqueId(),this._locale=m.extend({},aa,v.locale),this._clickTolerance=v.clickTolerance,this._requestManager=new m.RequestManager(v.transformRequest,v.accessToken),"string"==typeof v.container){if(this._container=m.window.document.getElementById(v.container),!this._container)throw new Error("Container '"+v.container+"' not found.")}else{if(!(v.container instanceof _h))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(v.maxBounds&&this.setMaxBounds(v.maxBounds),m.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return S._update(!1)}),this.on("moveend",function(){return S._update(!1)}),this.on("zoom",function(){return S._update(!0)}),void 0!==m.window&&(m.window.addEventListener("online",this._onWindowOnline,!1),m.window.addEventListener("resize",this._onWindowResize,!1),m.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new an(this,v),this._hash=v.hash&&new Gs("string"==typeof v.hash&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,m.extend({},v.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=v.localIdeographFontFamily,v.style&&this.setStyle(v.style,{localIdeographFontFamily:v.localIdeographFontFamily}),v.attributionControl&&this.addControl(new eo({customAttribution:v.customAttribution})),this.addControl(new Hs,v.logoPosition),this.on("style.load",function(){S.transform.unmodified&&S.jumpTo(S.style.stylesheet)}),this.on("data",function(O){S._update("style"===O.dataType),S.fire(new m.Event(O.dataType+"data",O))}),this.on("dataloading",function(O){S.fire(new m.Event(O.dataType+"dataloading",O))})}f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p;var h={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return p.prototype._getMapId=function(){return this._mapId},p.prototype.addControl=function(v,S){if(void 0===S&&(S=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new m.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var P=v.onAdd(this);this._controls.push(v);var O=this._controlPositions[S];return-1!==S.indexOf("bottom")?O.insertBefore(P,O.firstChild):O.appendChild(P),this},p.prototype.removeControl=function(v){if(!v||!v.onRemove)return this.fire(new m.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var S=this._controls.indexOf(v);return S>-1&&this._controls.splice(S,1),v.onRemove(this),this},p.prototype.hasControl=function(v){return this._controls.indexOf(v)>-1},p.prototype.resize=function(v){var S=this._containerDimensions(),P=S[0],O=S[1];this._resizeCanvas(P,O),this.transform.resize(P,O),this.painter.resize(P,O);var H=!this._moving;return H&&(this.stop(),this.fire(new m.Event("movestart",v)).fire(new m.Event("move",v))),this.fire(new m.Event("resize",v)),H&&this.fire(new m.Event("moveend",v)),this},p.prototype.getBounds=function(){return this.transform.getBounds()},p.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},p.prototype.setMaxBounds=function(v){return this.transform.setMaxBounds(m.LngLatBounds.convert(v)),this._update()},p.prototype.setMinZoom=function(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},p.prototype.getMinZoom=function(){return this.transform.minZoom},p.prototype.setMaxZoom=function(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")},p.prototype.getMaxZoom=function(){return this.transform.maxZoom},p.prototype.setMinPitch=function(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},p.prototype.getMinPitch=function(){return this.transform.minPitch},p.prototype.setMaxPitch=function(v){if((v=v??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")},p.prototype.getMaxPitch=function(){return this.transform.maxPitch},p.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},p.prototype.setRenderWorldCopies=function(v){return this.transform.renderWorldCopies=v,this._update()},p.prototype.project=function(v){return this.transform.locationPoint(m.LngLat.convert(v))},p.prototype.unproject=function(v){return this.transform.pointLocation(m.Point.convert(v))},p.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},p.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},p.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},p.prototype._createDelegatedListener=function(v,S,P){var O,H=this;if("mouseenter"===v||"mouseover"===v){var te=!1;return{layer:S,listener:P,delegates:{mousemove:function(ge){var we=H.getLayer(S)?H.queryRenderedFeatures(ge.point,{layers:[S]}):[];we.length?te||(te=!0,P.call(H,new oa(v,H,ge.originalEvent,{features:we}))):te=!1},mouseout:function(){te=!1}}}}if("mouseleave"===v||"mouseout"===v){var ae=!1;return{layer:S,listener:P,delegates:{mousemove:function(ge){(H.getLayer(S)?H.queryRenderedFeatures(ge.point,{layers:[S]}):[]).length?ae=!0:ae&&(ae=!1,P.call(H,new oa(v,H,ge.originalEvent)))},mouseout:function(ge){ae&&(ae=!1,P.call(H,new oa(v,H,ge.originalEvent)))}}}}return{layer:S,listener:P,delegates:(O={},O[v]=function(ge){var we=H.getLayer(S)?H.queryRenderedFeatures(ge.point,{layers:[S]}):[];we.length&&(ge.features=we,P.call(H,ge),delete ge.features)},O)}},p.prototype.on=function(v,S,P){if(void 0===P)return f.prototype.on.call(this,v,S);var O=this._createDelegatedListener(v,S,P);for(var H in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(O),O.delegates)this.on(H,O.delegates[H]);return this},p.prototype.once=function(v,S,P){if(void 0===P)return f.prototype.once.call(this,v,S);var O=this._createDelegatedListener(v,S,P);for(var H in O.delegates)this.once(H,O.delegates[H]);return this},p.prototype.off=function(v,S,P){var O=this;return void 0===P?f.prototype.off.call(this,v,S):(this._delegatedListeners&&this._delegatedListeners[v]&&function(H){for(var te=H[v],ae=0;ae<te.length;ae++){var ge=te[ae];if(ge.layer===S&&ge.listener===P){for(var we in ge.delegates)O.off(we,ge.delegates[we]);return te.splice(ae,1),O}}}(this._delegatedListeners),this)},p.prototype.queryRenderedFeatures=function(v,S){if(!this.style)return[];var P;if(void 0!==S||void 0===v||v instanceof m.Point||Array.isArray(v)||(S=v,v=void 0),S=S||{},(v=v||[[0,0],[this.transform.width,this.transform.height]])instanceof m.Point||"number"==typeof v[0])P=[m.Point.convert(v)];else{var O=m.Point.convert(v[0]),H=m.Point.convert(v[1]);P=[O,new m.Point(H.x,O.y),H,new m.Point(O.x,H.y),O]}return this.style.queryRenderedFeatures(P,S,this.transform)},p.prototype.querySourceFeatures=function(v,S){return this.style.querySourceFeatures(v,S)},p.prototype.setStyle=function(v,S){return!1!==(S=m.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},S)).diff&&S.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,S),this):(this._localIdeographFontFamily=S.localIdeographFontFamily,this._updateStyle(v,S))},p.prototype.setTransformRequest=function(v){return this._requestManager.setTransformRequest(v),this},p.prototype._getUIString=function(v){var S=this._locale[v];if(null==S)throw new Error("Missing UI string '"+v+"'");return S},p.prototype._updateStyle=function(v,S){return this.style&&(this.style.setEventedParent(null),this.style._remove()),v?(this.style=new Ui(this,S||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof v?this.style.loadURL(v):this.style.loadJSON(v),this):(delete this.style,this)},p.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ui(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},p.prototype._diffStyle=function(v,S){var P=this;if("string"==typeof v){var O=this._requestManager.normalizeStyleURL(v),H=this._requestManager.transformRequest(O,m.ResourceType.Style);m.getJSON(H,function(te,ae){te?P.fire(new m.ErrorEvent(te)):ae&&P._updateDiff(ae,S)})}else"object"==typeof v&&this._updateDiff(v,S)},p.prototype._updateDiff=function(v,S){try{this.style.setState(v)&&this._update(!0)}catch(P){m.warnOnce("Unable to perform style diff: "+(P.message||P.error||P)+".  Rebuilding the style from scratch."),this._updateStyle(v,S)}},p.prototype.getStyle=function(){if(this.style)return this.style.serialize()},p.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():m.warnOnce("There is no style added to the map.")},p.prototype.addSource=function(v,S){return this._lazyInitEmptyStyle(),this.style.addSource(v,S),this._update(!0)},p.prototype.isSourceLoaded=function(v){var S=this.style&&this.style.sourceCaches[v];if(void 0!==S)return S.loaded();this.fire(new m.ErrorEvent(new Error("There is no source with ID '"+v+"'")))},p.prototype.areTilesLoaded=function(){var v=this.style&&this.style.sourceCaches;for(var S in v){var P=v[S]._tiles;for(var O in P){var H=P[O];if("loaded"!==H.state&&"errored"!==H.state)return!1}}return!0},p.prototype.addSourceType=function(v,S,P){return this._lazyInitEmptyStyle(),this.style.addSourceType(v,S,P)},p.prototype.removeSource=function(v){return this.style.removeSource(v),this._update(!0)},p.prototype.getSource=function(v){return this.style.getSource(v)},p.prototype.addImage=function(v,S,P){void 0===P&&(P={});var O=P.pixelRatio;void 0===O&&(O=1);var H=P.sdf;void 0===H&&(H=!1);var te=P.stretchX,ae=P.stretchY,ge=P.content;if(this._lazyInitEmptyStyle(),S instanceof lo||il&&S instanceof il){var we=m.browser.getImageData(S);this.style.addImage(v,{data:new m.RGBAImage({width:we.width,height:we.height},we.data),pixelRatio:O,stretchX:te,stretchY:ae,content:ge,sdf:H,version:0})}else{if(void 0===S.width||void 0===S.height)return this.fire(new m.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var ye=S;this.style.addImage(v,{data:new m.RGBAImage({width:S.width,height:S.height},new Uint8Array(S.data)),pixelRatio:O,stretchX:te,stretchY:ae,content:ge,sdf:H,version:0,userImage:ye}),ye.onAdd&&ye.onAdd(this,v)}},p.prototype.updateImage=function(v,S){var P=this.style.getImage(v);if(!P)return this.fire(new m.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var O=S instanceof lo||il&&S instanceof il?m.browser.getImageData(S):S,H=O.width,te=O.height,ae=O.data;return void 0===H||void 0===te?this.fire(new m.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):H!==P.data.width||te!==P.data.height?this.fire(new m.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(P.data.replace(ae,!(S instanceof lo||il&&S instanceof il)),void this.style.updateImage(v,P))},p.prototype.hasImage=function(v){return v?!!this.style.getImage(v):(this.fire(new m.ErrorEvent(new Error("Missing required image id"))),!1)},p.prototype.removeImage=function(v){this.style.removeImage(v)},p.prototype.loadImage=function(v,S){m.getImage(this._requestManager.transformRequest(v,m.ResourceType.Image),S)},p.prototype.listImages=function(){return this.style.listImages()},p.prototype.addLayer=function(v,S){return this._lazyInitEmptyStyle(),this.style.addLayer(v,S),this._update(!0)},p.prototype.moveLayer=function(v,S){return this.style.moveLayer(v,S),this._update(!0)},p.prototype.removeLayer=function(v){return this.style.removeLayer(v),this._update(!0)},p.prototype.getLayer=function(v){return this.style.getLayer(v)},p.prototype.setLayerZoomRange=function(v,S,P){return this.style.setLayerZoomRange(v,S,P),this._update(!0)},p.prototype.setFilter=function(v,S,P){return void 0===P&&(P={}),this.style.setFilter(v,S,P),this._update(!0)},p.prototype.getFilter=function(v){return this.style.getFilter(v)},p.prototype.setPaintProperty=function(v,S,P,O){return void 0===O&&(O={}),this.style.setPaintProperty(v,S,P,O),this._update(!0)},p.prototype.getPaintProperty=function(v,S){return this.style.getPaintProperty(v,S)},p.prototype.setLayoutProperty=function(v,S,P,O){return void 0===O&&(O={}),this.style.setLayoutProperty(v,S,P,O),this._update(!0)},p.prototype.getLayoutProperty=function(v,S){return this.style.getLayoutProperty(v,S)},p.prototype.setLight=function(v,S){return void 0===S&&(S={}),this._lazyInitEmptyStyle(),this.style.setLight(v,S),this._update(!0)},p.prototype.getLight=function(){return this.style.getLight()},p.prototype.setFeatureState=function(v,S){return this.style.setFeatureState(v,S),this._update()},p.prototype.removeFeatureState=function(v,S){return this.style.removeFeatureState(v,S),this._update()},p.prototype.getFeatureState=function(v){return this.style.getFeatureState(v)},p.prototype.getContainer=function(){return this._container},p.prototype.getCanvasContainer=function(){return this._canvasContainer},p.prototype.getCanvas=function(){return this._canvas},p.prototype._containerDimensions=function(){var v=0,S=0;return this._container&&(v=this._container.clientWidth||400,S=this._container.clientHeight||300),[v,S]},p.prototype._setupContainer=function(){var v=this._container;v.classList.add("maplibregl-map","mapboxgl-map");var S=this._canvasContainer=G.create("div","maplibregl-canvas-container mapboxgl-canvas-container",v);this._interactive&&S.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=G.create("canvas","maplibregl-canvas mapboxgl-canvas",S),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var P=this._containerDimensions();this._resizeCanvas(P[0],P[1]);var O=this._controlContainer=G.create("div","maplibregl-control-container mapboxgl-control-container",v),H=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(te){H[te]=G.create("div","maplibregl-ctrl-"+te+" mapboxgl-ctrl-"+te,O)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},p.prototype._resizeCanvas=function(v,S){var P=m.browser.devicePixelRatio||1;this._canvas.width=P*v,this._canvas.height=P*S,this._canvas.style.width=v+"px",this._canvas.style.height=S+"px"},p.prototype._setupPainter=function(){var v=m.extend({},$.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),S=this._canvas.getContext("webgl",v)||this._canvas.getContext("experimental-webgl",v);S?(this.painter=new Sr(S,this.transform),m.webpSupported.testSupport(S)):this.fire(new m.ErrorEvent(new Error("Failed to initialize WebGL")))},p.prototype._contextLost=function(v){v.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new m.Event("webglcontextlost",{originalEvent:v}))},p.prototype._contextRestored=function(v){this._setupPainter(),this.resize(),this._update(),this.fire(new m.Event("webglcontextrestored",{originalEvent:v}))},p.prototype._onMapScroll=function(v){if(v.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},p.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},p.prototype._update=function(v){return this.style?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this},p.prototype._requestRenderFrame=function(v){return this._update(),this._renderTaskQueue.add(v)},p.prototype._cancelRenderFrame=function(v){this._renderTaskQueue.remove(v)},p.prototype._render=function(v){var S,P=this,O=0,H=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(S=H.createQueryEXT(),H.beginQueryEXT(H.TIME_ELAPSED_EXT,S),O=m.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),!this._removed){var te=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var ae=this.transform.zoom,ge=m.browser.now();this.style.zoomHistory.update(ae,ge);var we=new m.EvaluationParameters(ae,{now:ge,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ye=we.crossFadingFactor();1===ye&&ye===this._crossFadingFactor||(te=!0,this._crossFadingFactor=ye),this.style.update(we)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new m.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new m.Event("load"))),this.style&&(this.style.hasTransitions()||te)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Le=m.browser.now()-O;H.endQueryEXT(H.TIME_ELAPSED_EXT,S),setTimeout(function(){var De=H.getQueryObjectEXT(S,H.QUERY_RESULT_EXT)/1e6;H.deleteQueryEXT(S),P.fire(new m.Event("gpu-timing-frame",{cpuTime:Le,gpuTime:De}))},50)}if(this.listens("gpu-timing-layer")){var Re=this.painter.collectGpuTimers();setTimeout(function(){var De=P.painter.queryGpuTimers(Re);P.fire(new m.Event("gpu-timing-layer",{layerTimes:De}))},50)}var Ve=this._sourcesDirty||this._styleDirty||this._placementDirty;return Ve||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new m.Event("idle")),!this._loaded||this._fullyLoaded||Ve||(this._fullyLoaded=!0),this}},p.prototype.remove=function(){this._hash&&this._hash.remove();for(var v=0,S=this._controls;v<S.length;v+=1)S[v].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==m.window&&(m.window.removeEventListener("resize",this._onWindowResize,!1),m.window.removeEventListener("orientationchange",this._onWindowResize,!1),m.window.removeEventListener("online",this._onWindowOnline,!1));var P=this.painter.context.gl.getExtension("WEBGL_lose_context");P&&P.loseContext(),md(this._canvasContainer),md(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),this._removed=!0,this.fire(new m.Event("remove"))},p.prototype.triggerRepaint=function(){var v=this;this.style&&!this._frame&&(this._frame=m.browser.frame(function(S){v._frame=null,v._render(S)}))},p.prototype._onWindowOnline=function(){this._update()},p.prototype._onWindowResize=function(v){this._trackResize&&this.resize({originalEvent:v})._update()},h.showTileBoundaries.get=function(){return!!this._showTileBoundaries},h.showTileBoundaries.set=function(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())},h.showPadding.get=function(){return!!this._showPadding},h.showPadding.set=function(v){this._showPadding!==v&&(this._showPadding=v,this._update())},h.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},h.showCollisionBoxes.set=function(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())},h.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},h.showOverdrawInspector.set=function(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())},h.repaint.get=function(){return!!this._repaint},h.repaint.set=function(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())},h.vertices.get=function(){return!!this._vertices},h.vertices.set=function(v){this._vertices=v,this._update()},p.prototype._setCacheLimits=function(v,S){m.setCacheLimits(v,S)},h.version.get=function(){return m.version},Object.defineProperties(p.prototype,h),p}(zn);function md(f){f.parentNode&&f.parentNode.removeChild(f)}var Cu={showCompass:!0,showZoom:!0,visualizePitch:!1},Kn=function(f){var p=this;this.options=m.extend({},Cu,f),this._container=G.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(h){return h.preventDefault()}),this.options.showZoom&&(m.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",function(h){return p._map.zoomIn({},{originalEvent:h})}),G.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",function(h){return p._map.zoomOut({},{originalEvent:h})}),G.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(m.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",function(h){p.options.visualizePitch?p._map.resetNorthPitch({},{originalEvent:h}):p._map.resetNorth({},{originalEvent:h})}),this._compassIcon=G.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Kn.prototype._updateZoomButtons=function(){var f=this._map.getZoom(),p=f===this._map.getMaxZoom(),h=f===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=h,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",h.toString())},Kn.prototype._rotateCompassArrow=function(){var f=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=f},Kn.prototype.onAdd=function(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new os(this._map,this._compass,this.options.visualizePitch)),this._container},Kn.prototype.onRemove=function(){G.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Kn.prototype._createButton=function(f,p){var h=G.create("button",f,this._container);return h.type="button",h.addEventListener("click",p),h},Kn.prototype._setButtonTitle=function(f,p){var h=this._map._getUIString("NavigationControl."+p);f.title=h,f.setAttribute("aria-label",h)};var os=function(f,p,h){void 0===h&&(h=!1),this._clickTolerance=10,this.element=p,this.mouseRotate=new ud({clickTolerance:f.dragRotate._mouseRotate._clickTolerance}),this.map=f,h&&(this.mousePitch=new cd({clickTolerance:f.dragRotate._mousePitch._clickTolerance})),m.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),G.addEventListener(p,"mousedown",this.mousedown),G.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),G.addEventListener(p,"touchmove",this.touchmove),G.addEventListener(p,"touchend",this.touchend),G.addEventListener(p,"touchcancel",this.reset)};function mf(f,p,h){if(f=new m.LngLat(f.lng,f.lat),p){var v=new m.LngLat(f.lng-360,f.lat),S=new m.LngLat(f.lng+360,f.lat),P=h.locationPoint(f).distSqr(p);h.locationPoint(v).distSqr(p)<P?f=v:h.locationPoint(S).distSqr(p)<P&&(f=S)}for(;Math.abs(f.lng-h.center.lng)>180;){var O=h.locationPoint(f);if(O.x>=0&&O.y>=0&&O.x<=h.width&&O.y<=h.height)break;f.lng>h.center.lng?f.lng-=360:f.lng+=360}return f}os.prototype.down=function(f,p){this.mouseRotate.mousedown(f,p),this.mousePitch&&this.mousePitch.mousedown(f,p),G.disableDrag()},os.prototype.move=function(f,p){var h=this.map,v=this.mouseRotate.mousemoveWindow(f,p);if(v&&v.bearingDelta&&h.setBearing(h.getBearing()+v.bearingDelta),this.mousePitch){var S=this.mousePitch.mousemoveWindow(f,p);S&&S.pitchDelta&&h.setPitch(h.getPitch()+S.pitchDelta)}},os.prototype.off=function(){var f=this.element;G.removeEventListener(f,"mousedown",this.mousedown),G.removeEventListener(f,"touchstart",this.touchstart,{passive:!1}),G.removeEventListener(f,"touchmove",this.touchmove),G.removeEventListener(f,"touchend",this.touchend),G.removeEventListener(f,"touchcancel",this.reset),this.offTemp()},os.prototype.offTemp=function(){G.enableDrag(),G.removeEventListener(m.window,"mousemove",this.mousemove),G.removeEventListener(m.window,"mouseup",this.mouseup)},os.prototype.mousedown=function(f){this.down(m.extend({},f,{ctrlKey:!0,preventDefault:function(){return f.preventDefault()}}),G.mousePos(this.element,f)),G.addEventListener(m.window,"mousemove",this.mousemove),G.addEventListener(m.window,"mouseup",this.mouseup)},os.prototype.mousemove=function(f){this.move(f,G.mousePos(this.element,f))},os.prototype.mouseup=function(f){this.mouseRotate.mouseupWindow(f),this.mousePitch&&this.mousePitch.mouseupWindow(f),this.offTemp()},os.prototype.touchstart=function(f){1!==f.targetTouches.length?this.reset():(this._startPos=this._lastPos=G.touchPos(this.element,f.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return f.preventDefault()}},this._startPos))},os.prototype.touchmove=function(f){1!==f.targetTouches.length?this.reset():(this._lastPos=G.touchPos(this.element,f.targetTouches)[0],this.move({preventDefault:function(){return f.preventDefault()}},this._lastPos))},os.prototype.touchend=function(f){0===f.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},os.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Iu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Bl(f,p,h){var v=f.classList;for(var S in Iu)v.remove("maplibregl-"+h+"-anchor-"+S,"mapboxgl-"+h+"-anchor-"+S);v.add("maplibregl-"+h+"-anchor-"+p,"mapboxgl-"+h+"-anchor-"+p)}var Yu,Xu=function(f){function p(h,v){if(f.call(this),(h instanceof m.window.HTMLElement||v)&&(h=m.extend({element:h},v)),m.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=h&&h.anchor||"center",this._color=h&&h.color||"#3FB1CE",this._scale=h&&h.scale||1,this._draggable=h&&h.draggable||!1,this._clickTolerance=h&&h.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=h&&h.rotation||0,this._rotationAlignment=h&&h.rotationAlignment||"auto",this._pitchAlignment=h&&h.pitchAlignment&&"auto"!==h.pitchAlignment?h.pitchAlignment:this._rotationAlignment,h&&h.element)this._element=h.element,this._offset=m.Point.convert(h&&h.offset||[0,0]);else{this._defaultMarker=!0,this._element=G.create("div"),this._element.setAttribute("aria-label","Map marker");var S=G.createNS("http://www.w3.org/2000/svg","svg");S.setAttributeNS(null,"display","block"),S.setAttributeNS(null,"height","41px"),S.setAttributeNS(null,"width","27px"),S.setAttributeNS(null,"viewBox","0 0 27 41");var P=G.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"stroke","none"),P.setAttributeNS(null,"stroke-width","1"),P.setAttributeNS(null,"fill","none"),P.setAttributeNS(null,"fill-rule","evenodd");var O=G.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"fill-rule","nonzero");var H=G.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"transform","translate(3.0, 29.0)"),H.setAttributeNS(null,"fill","#000000");for(var te=0,ae=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];te<ae.length;te+=1){var ge=ae[te],we=G.createNS("http://www.w3.org/2000/svg","ellipse");we.setAttributeNS(null,"opacity","0.04"),we.setAttributeNS(null,"cx","10.5"),we.setAttributeNS(null,"cy","5.80029008"),we.setAttributeNS(null,"rx",ge.rx),we.setAttributeNS(null,"ry",ge.ry),H.appendChild(we)}var ye=G.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"fill",this._color);var Le=G.createNS("http://www.w3.org/2000/svg","path");Le.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ye.appendChild(Le);var Re=G.createNS("http://www.w3.org/2000/svg","g");Re.setAttributeNS(null,"opacity","0.25"),Re.setAttributeNS(null,"fill","#000000");var Ve=G.createNS("http://www.w3.org/2000/svg","path");Ve.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Re.appendChild(Ve);var De=G.createNS("http://www.w3.org/2000/svg","g");De.setAttributeNS(null,"transform","translate(6.0, 7.0)"),De.setAttributeNS(null,"fill","#FFFFFF");var ze=G.createNS("http://www.w3.org/2000/svg","g");ze.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Ye=G.createNS("http://www.w3.org/2000/svg","circle");Ye.setAttributeNS(null,"fill","#000000"),Ye.setAttributeNS(null,"opacity","0.25"),Ye.setAttributeNS(null,"cx","5.5"),Ye.setAttributeNS(null,"cy","5.5"),Ye.setAttributeNS(null,"r","5.4999962");var ot=G.createNS("http://www.w3.org/2000/svg","circle");ot.setAttributeNS(null,"fill","#FFFFFF"),ot.setAttributeNS(null,"cx","5.5"),ot.setAttributeNS(null,"cy","5.5"),ot.setAttributeNS(null,"r","5.4999962"),ze.appendChild(Ye),ze.appendChild(ot),O.appendChild(H),O.appendChild(ye),O.appendChild(Re),O.appendChild(De),O.appendChild(ze),S.appendChild(O),S.setAttributeNS(null,"height",41*this._scale+"px"),S.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(S),this._offset=m.Point.convert(h&&h.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",function(yt){yt.preventDefault()}),this._element.addEventListener("mousedown",function(yt){yt.preventDefault()}),Bl(this._element,this._anchor,"marker"),this._popup=null}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.addTo=function(h){return this.remove(),this._map=h,h.getCanvasContainer().appendChild(this._element),h.on("move",this._update),h.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},p.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),G.remove(this._element),this._popup&&this._popup.remove(),this},p.prototype.getLngLat=function(){return this._lngLat},p.prototype.setLngLat=function(h){return this._lngLat=m.LngLat.convert(h),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},p.prototype.getElement=function(){return this._element},p.prototype.setPopup=function(h){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),h){if(!("offset"in h.options)){var v=Math.sqrt(Math.pow(13.5,2)/2);h.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(24.6+v)],"bottom-right":[-v,-1*(24.6+v)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=h,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},p.prototype._onKeyPress=function(h){var v=h.code,S=h.charCode||h.keyCode;"Space"!==v&&"Enter"!==v&&32!==S&&13!==S||this.togglePopup()},p.prototype._onMapClick=function(h){var v=h.originalEvent.target,S=this._element;this._popup&&(v===S||S.contains(v))&&this.togglePopup()},p.prototype.getPopup=function(){return this._popup},p.prototype.togglePopup=function(){var h=this._popup;return h?(h.isOpen()?h.remove():h.addTo(this._map),this):this},p.prototype._update=function(h){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=mf(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var v="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?v="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(v="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var S="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?S="rotateX(0deg)":"map"===this._pitchAlignment&&(S="rotateX("+this._map.getPitch()+"deg)"),h&&"moveend"!==h.type||(this._pos=this._pos.round()),G.setTransform(this._element,Iu[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+S+" "+v)}},p.prototype.getOffset=function(){return this._offset},p.prototype.setOffset=function(h){return this._offset=m.Point.convert(h),this._update(),this},p.prototype._onMove=function(h){if(!this._isDragging){var v=this._clickTolerance||this._map._clickTolerance;this._isDragging=h.point.dist(this._pointerdownPos)>=v}this._isDragging&&(this._pos=h.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new m.Event("dragstart"))),this.fire(new m.Event("drag")))},p.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new m.Event("dragend")),this._state="inactive"},p.prototype._addDragHandler=function(h){this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(this._pos).add(this._offset),this._pointerdownPos=h.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},p.prototype.setDraggable=function(h){return this._draggable=!!h,this._map&&(h?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},p.prototype.isDraggable=function(){return this._draggable},p.prototype.setRotation=function(h){return this._rotation=h||0,this._update(),this},p.prototype.getRotation=function(){return this._rotation},p.prototype.setRotationAlignment=function(h){return this._rotationAlignment=h||"auto",this._update(),this},p.prototype.getRotationAlignment=function(){return this._rotationAlignment},p.prototype.setPitchAlignment=function(h){return this._pitchAlignment=h&&"auto"!==h?h:this._rotationAlignment,this._update(),this},p.prototype.getPitchAlignment=function(){return this._pitchAlignment},p}(m.Evented),gf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Ec=0,kt=!1,ni=function(f){function p(h){f.call(this),this.options=m.extend({},gf,h),m.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.onAdd=function(h){var v;return this._map=h,this._container=G.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),v=this._setupUI,void 0!==Yu?v(Yu):void 0!==m.window.navigator.permissions?m.window.navigator.permissions.query({name:"geolocation"}).then(function(S){v(Yu="denied"!==S.state)}):v(Yu=!!m.window.navigator.geolocation),this._container},p.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(m.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),G.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ec=0,kt=!1},p.prototype._isOutOfMapMaxBounds=function(h){var v=this._map.getMaxBounds(),S=h.coords;return v&&(S.longitude<v.getWest()||S.longitude>v.getEast()||S.latitude<v.getSouth()||S.latitude>v.getNorth())},p.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}},p.prototype._onSuccess=function(h){if(this._map){if(this._isOutOfMapMaxBounds(h))return this._setErrorState(),this.fire(new m.Event("outofmaxbounds",h)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=h,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(h),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(h),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new m.Event("geolocate",h)),this._finish()}},p.prototype._updateCamera=function(h){var v=new m.LngLat(h.coords.longitude,h.coords.latitude),S=h.coords.accuracy,P=this._map.getBearing(),O=m.extend({bearing:P},this.options.fitBoundsOptions);this._map.fitBounds(v.toBounds(S),O,{geolocateSource:!0})},p.prototype._updateMarker=function(h){if(h){var v=new m.LngLat(h.coords.longitude,h.coords.latitude);this._accuracyCircleMarker.setLngLat(v).addTo(this._map),this._userLocationDotMarker.setLngLat(v).addTo(this._map),this._accuracy=h.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},p.prototype._updateCircleRadius=function(){var h=this._map._container.clientHeight/2,v=this._map.unproject([0,h]),S=this._map.unproject([1,h]),P=v.distanceTo(S),O=Math.ceil(2*this._accuracy/P);this._circleElement.style.width=O+"px",this._circleElement.style.height=O+"px"},p.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},p.prototype._onError=function(h){if(this._map){if(this.options.trackUserLocation)if(1===h.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var v=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=v,this._geolocateButton.setAttribute("aria-label",v),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===h.code&&kt)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new m.Event("error",h)),this._finish()}},p.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},p.prototype._setupUI=function(h){var v=this;if(this._container.addEventListener("contextmenu",function(O){return O.preventDefault()}),this._geolocateButton=G.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),G.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===h){m.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var S=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=S,this._geolocateButton.setAttribute("aria-label",S)}else{var P=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=P,this._geolocateButton.setAttribute("aria-label",P)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=G.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Xu(this._dotElement),this._circleElement=G.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Xu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(O){O.geolocateSource||"ACTIVE_LOCK"!==v._watchState||O.originalEvent&&"resize"===O.originalEvent.type||(v._watchState="BACKGROUND",v._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),v._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),v.fire(new m.Event("trackuserlocationend")))})},p.prototype.trigger=function(){if(!this._setup)return m.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new m.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ec--,kt=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new m.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new m.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var h;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Ec>1?(h={maximumAge:6e5,timeout:0},kt=!0):(h=this.options.positionOptions,kt=!1),this._geolocationWatchID=m.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,h)}}else m.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},p.prototype._clearWatch=function(){m.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},p}(m.Evented),yf={maxWidth:100,unit:"metric"},Ds=function(f){this.options=m.extend({},yf,f),m.bindAll(["_onMove","setUnit"],this)};function Ao(f,p,h){var v=h&&h.maxWidth||100,S=f._container.clientHeight/2,P=f.unproject([0,S]),O=f.unproject([v,S]),H=P.distanceTo(O);if(h&&"imperial"===h.unit){var te=3.2808*H;te>5280?iu(p,v,te/5280,f._getUIString("ScaleControl.Miles")):iu(p,v,te,f._getUIString("ScaleControl.Feet"))}else h&&"nautical"===h.unit?iu(p,v,H/1852,f._getUIString("ScaleControl.NauticalMiles")):H>=1e3?iu(p,v,H/1e3,f._getUIString("ScaleControl.Kilometers")):iu(p,v,H,f._getUIString("ScaleControl.Meters"))}function iu(f,p,h,v){var S,P,O,te,ae,H=(S=h,(P=Math.pow(10,(""+Math.floor(S)).length-1))*(O=(O=S/P)>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:(te=O,ae=Math.pow(10,Math.ceil(-Math.log(te)/Math.LN10)),Math.round(te*ae)/ae)));f.style.width=p*(H/h)+"px",f.innerHTML=H+"&nbsp;"+v}Ds.prototype.getDefaultPosition=function(){return"bottom-left"},Ds.prototype._onMove=function(){Ao(this._map,this._container,this.options)},Ds.prototype.onAdd=function(f){return this._map=f,this._container=G.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ds.prototype.onRemove=function(){G.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ds.prototype.setUnit=function(f){this.options.unit=f,Ao(this._map,this._container,this.options)};var Da=function(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof m.window.HTMLElement?this._container=f.container:m.warnOnce("Full screen control 'container' must be a DOM element.")),m.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in m.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in m.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in m.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in m.window.document&&(this._fullscreenchange="MSFullscreenChange")};Da.prototype.onAdd=function(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=G.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",m.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Da.prototype.onRemove=function(){G.remove(this._controlContainer),this._map=null,m.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Da.prototype._checkFullscreenSupport=function(){return!!(m.window.document.fullscreenEnabled||m.window.document.mozFullScreenEnabled||m.window.document.msFullscreenEnabled||m.window.document.webkitFullscreenEnabled)},Da.prototype._setupUI=function(){var f=this._fullscreenButton=G.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);G.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",f).setAttribute("aria-hidden",!0),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),m.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Da.prototype._updateTitle=function(){var f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.title=f},Da.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Da.prototype._isFullscreen=function(){return this._fullscreen},Da.prototype._changeIcon=function(){(m.window.document.fullscreenElement||m.window.document.mozFullScreenElement||m.window.document.webkitFullscreenElement||m.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Da.prototype._onClickFullscreen=function(){this._isFullscreen()?m.window.document.exitFullscreen?m.window.document.exitFullscreen():m.window.document.mozCancelFullScreen?m.window.document.mozCancelFullScreen():m.window.document.msExitFullscreen?m.window.document.msExitFullscreen():m.window.document.webkitCancelFullScreen&&m.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var $s={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Sc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Tu=function(f){function p(h){f.call(this),this.options=m.extend(Object.create($s),h),m.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return f&&(p.__proto__=f),(p.prototype=Object.create(f&&f.prototype)).constructor=p,p.prototype.addTo=function(h){return this._map&&this.remove(),this._map=h,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new m.Event("open")),this},p.prototype.isOpen=function(){return!!this._map},p.prototype.remove=function(){return this._content&&G.remove(this._content),this._container&&(G.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new m.Event("close")),this},p.prototype.getLngLat=function(){return this._lngLat},p.prototype.setLngLat=function(h){return this._lngLat=m.LngLat.convert(h),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this},p.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this},p.prototype.getElement=function(){return this._container},p.prototype.setText=function(h){return this.setDOMContent(m.window.document.createTextNode(h))},p.prototype.setHTML=function(h){var v,S=m.window.document.createDocumentFragment(),P=m.window.document.createElement("body");for(P.innerHTML=h;v=P.firstChild;)S.appendChild(v);return this.setDOMContent(S)},p.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},p.prototype.setMaxWidth=function(h){return this.options.maxWidth=h,this._update(),this},p.prototype.setDOMContent=function(h){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=G.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(h),this._createCloseButton(),this._update(),this._focusFirstElement(),this},p.prototype.addClassName=function(h){this._container&&this._container.classList.add(h)},p.prototype.removeClassName=function(h){this._container&&this._container.classList.remove(h)},p.prototype.setOffset=function(h){return this.options.offset=h,this._update(),this},p.prototype.toggleClassName=function(h){if(this._container)return this._container.classList.toggle(h)},p.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=G.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},p.prototype._onMouseUp=function(h){this._update(h.point)},p.prototype._onMouseMove=function(h){this._update(h.point)},p.prototype._onDrag=function(h){this._update(h.point)},p.prototype._update=function(h){var v=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=G.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=G.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(we){return v._container.classList.add(we)}),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=mf(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||h)){var S=this._pos=this._trackPointer&&h?h:this._map.project(this._lngLat),P=this.options.anchor,O=function we(ye){if(ye){if("number"==typeof ye){var Le=Math.round(Math.sqrt(.5*Math.pow(ye,2)));return{center:new m.Point(0,0),top:new m.Point(0,ye),"top-left":new m.Point(Le,Le),"top-right":new m.Point(-Le,Le),bottom:new m.Point(0,-ye),"bottom-left":new m.Point(Le,-Le),"bottom-right":new m.Point(-Le,-Le),left:new m.Point(ye,0),right:new m.Point(-ye,0)}}if(ye instanceof m.Point||Array.isArray(ye)){var Re=m.Point.convert(ye);return{center:Re,top:Re,"top-left":Re,"top-right":Re,bottom:Re,"bottom-left":Re,"bottom-right":Re,left:Re,right:Re}}return{center:m.Point.convert(ye.center||[0,0]),top:m.Point.convert(ye.top||[0,0]),"top-left":m.Point.convert(ye["top-left"]||[0,0]),"top-right":m.Point.convert(ye["top-right"]||[0,0]),bottom:m.Point.convert(ye.bottom||[0,0]),"bottom-left":m.Point.convert(ye["bottom-left"]||[0,0]),"bottom-right":m.Point.convert(ye["bottom-right"]||[0,0]),left:m.Point.convert(ye.left||[0,0]),right:m.Point.convert(ye.right||[0,0])}}return we(new m.Point(0,0))}(this.options.offset);if(!P){var H,te=this._container.offsetWidth,ae=this._container.offsetHeight;H=S.y+O.bottom.y<ae?["top"]:S.y>this._map.transform.height-ae?["bottom"]:[],S.x<te/2?H.push("left"):S.x>this._map.transform.width-te/2&&H.push("right"),P=0===H.length?"bottom":H.join("-")}var ge=S.add(O[P]).round();G.setTransform(this._container,Iu[P]+" translate("+ge.x+"px,"+ge.y+"px)"),Bl(this._container,P,"popup")}},p.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var h=this._container.querySelector(Sc);h&&h.focus()}},p.prototype._onClose=function(){this.remove()},p}(m.Evented),vf={version:m.version,supported:$,setRTLTextPlugin:m.setRTLTextPlugin,getRTLTextPluginStatus:m.getRTLTextPluginStatus,Map:Yi,NavigationControl:Kn,GeolocateControl:ni,AttributionControl:eo,ScaleControl:Ds,FullscreenControl:Da,Popup:Tu,Marker:Xu,Style:Ui,LngLat:m.LngLat,LngLatBounds:m.LngLatBounds,Point:m.Point,MercatorCoordinate:m.MercatorCoordinate,Evented:m.Evented,config:m.config,prewarm:function(){hn().acquire(ct)},clearPrewarmedResources:function(){var f=Zt;f&&(f.isPreloaded()&&1===f.numActive()?(f.release(ct),Zt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return m.config.ACCESS_TOKEN},set accessToken(f){m.config.ACCESS_TOKEN=f},get baseApiUrl(){return m.config.API_URL},set baseApiUrl(f){m.config.API_URL=f},get workerCount(){return Et.workerCount},set workerCount(f){Et.workerCount=f},get maxParallelImageRequests(){return m.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){m.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage:function(f){m.clearTileCache(f)},workerUrl:"",addProtocol:function(f,p){m.config.REGISTERED_PROTOCOLS[f]=p},removeProtocol:function(f){delete m.config.REGISTERED_PROTOCOLS[f]}};return vf}),V}()},7150:(Ae,J)=>{J.printMsg=function(){console.log("This is a message from the demo package")}},6117:function(Ae,J,U){var V;Ae=U.nmd(Ae),function(X){"object"==typeof global&&global;var z,T=2147483647,D=36,Me=/^xn--/,Ne=/[^\x20-\x7E]/,Ze=/[\x2E\u3002\uFF0E\uFF61]/g,je={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Je=Math.floor,nt=String.fromCharCode;function Ue(bt){throw RangeError(je[bt])}function A(bt,Ke){for(var xt=bt.length,vn=[];xt--;)vn[xt]=Ke(bt[xt]);return vn}function L(bt,Ke){var xt=bt.split("@"),vn="";return xt.length>1&&(vn=xt[0]+"@",bt=xt[1]),vn+A((bt=bt.replace(Ze,".")).split("."),Ke).join(".")}function B(bt){for(var zt,Sn,Ke=[],xt=0,vn=bt.length;xt<vn;)(zt=bt.charCodeAt(xt++))>=55296&&zt<=56319&&xt<vn?56320==(64512&(Sn=bt.charCodeAt(xt++)))?Ke.push(((1023&zt)<<10)+(1023&Sn)+65536):(Ke.push(zt),xt--):Ke.push(zt);return Ke}function j(bt){return A(bt,function(Ke){var xt="";return Ke>65535&&(xt+=nt((Ke-=65536)>>>10&1023|55296),Ke=56320|1023&Ke),xt+nt(Ke)}).join("")}function ee(bt){return bt-48<10?bt-22:bt-65<26?bt-65:bt-97<26?bt-97:D}function W(bt,Ke){return bt+22+75*(bt<26)-((0!=Ke)<<5)}function ce(bt,Ke,xt){var vn=0;for(bt=xt?Je(bt/700):bt>>1,bt+=Je(bt/Ke);bt>455;vn+=D)bt=Je(bt/35);return Je(vn+36*bt/(bt+38))}function We(bt){var vn,Cn,En,Zn,Wt,Ce,Gn,ir,hi,Gi,Ke=[],xt=bt.length,zt=0,Sn=128,It=72;for((Cn=bt.lastIndexOf("-"))<0&&(Cn=0),En=0;En<Cn;++En)bt.charCodeAt(En)>=128&&Ue("not-basic"),Ke.push(bt.charCodeAt(En));for(Zn=Cn>0?Cn+1:0;Zn<xt;){for(Wt=zt,Ce=1,Gn=D;Zn>=xt&&Ue("invalid-input"),((ir=ee(bt.charCodeAt(Zn++)))>=D||ir>Je((T-zt)/Ce))&&Ue("overflow"),zt+=ir*Ce,!(ir<(hi=Gn<=It?1:Gn>=It+26?26:Gn-It));Gn+=D)Ce>Je(T/(Gi=D-hi))&&Ue("overflow"),Ce*=Gi;It=ce(zt-Wt,vn=Ke.length+1,0==Wt),Je(zt/vn)>T-Sn&&Ue("overflow"),Sn+=Je(zt/vn),zt%=vn,Ke.splice(zt++,0,Sn)}return j(Ke)}function ut(bt){var Ke,xt,vn,zt,Sn,It,Cn,En,Zn,Wt,Ce,ir,hi,Gi,qt,Gn=[];for(ir=(bt=B(bt)).length,Ke=128,xt=0,Sn=72,It=0;It<ir;++It)(Ce=bt[It])<128&&Gn.push(nt(Ce));for(vn=zt=Gn.length,zt&&Gn.push("-");vn<ir;){for(Cn=T,It=0;It<ir;++It)(Ce=bt[It])>=Ke&&Ce<Cn&&(Cn=Ce);for(Cn-Ke>Je((T-xt)/(hi=vn+1))&&Ue("overflow"),xt+=(Cn-Ke)*hi,Ke=Cn,It=0;It<ir;++It)if((Ce=bt[It])<Ke&&++xt>T&&Ue("overflow"),Ce==Ke){for(En=xt,Zn=D;!(En<(Wt=Zn<=Sn?1:Zn>=Sn+26?26:Zn-Sn));Zn+=D)Gn.push(nt(W(Wt+(qt=En-Wt)%(Gi=D-Wt),0))),En=Je(qt/Gi);Gn.push(nt(W(En,0))),Sn=ce(xt,hi,vn==zt),xt=0,++vn}++xt,++Ke}return Gn.join("")}z={version:"1.3.2",ucs2:{decode:B,encode:j},decode:We,encode:ut,toASCII:function wt(bt){return L(bt,function(Ke){return Ne.test(Ke)?"xn--"+ut(Ke):Ke})},toUnicode:function be(bt){return L(bt,function(Ke){return Me.test(Ke)?We(Ke.slice(4).toLowerCase()):Ke})}},void 0!==(V=function(){return z}.call(J,U,J,Ae))&&(Ae.exports=V)}()},516:Ae=>{"use strict";function J(U,V){return Object.prototype.hasOwnProperty.call(U,V)}Ae.exports=function(U,V,X,m){X=X||"=";var $={};if("string"!=typeof U||0===U.length)return $;var G=/\+/g;U=U.split(V=V||"&");var z=1e3;m&&"number"==typeof m.maxKeys&&(z=m.maxKeys);var T=U.length;z>0&&T>z&&(T=z);for(var D=0;D<T;++D){var Y,ie,me,se,F=U[D].replace(G,"%20"),Z=F.indexOf(X);Z>=0?(Y=F.substr(0,Z),ie=F.substr(Z+1)):(Y=F,ie=""),me=decodeURIComponent(Y),se=decodeURIComponent(ie),J($,me)?Array.isArray($[me])?$[me].push(se):$[me]=[$[me],se]:$[me]=se}return $}},5776:Ae=>{"use strict";var J=function(U){switch(typeof U){case"string":return U;case"boolean":return U?"true":"false";case"number":return isFinite(U)?U:"";default:return""}};Ae.exports=function(U,V,X,m){return V=V||"&",X=X||"=",null===U&&(U=void 0),"object"==typeof U?Object.keys(U).map(function($){var G=encodeURIComponent(J($))+X;return Array.isArray(U[$])?U[$].map(function(z){return G+encodeURIComponent(J(z))}).join(V):G+encodeURIComponent(J(U[$]))}).join(V):m?encodeURIComponent(J(m))+X+encodeURIComponent(J(U)):""}},7137:(Ae,J,U)=>{"use strict";J.decode=J.parse=U(516),J.encode=J.stringify=U(5776)},7231:Ae=>{"use strict";class J{constructor(V={}){if(!(V.maxSize&&V.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=V.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(V,X){this.cache.set(V,X),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(V){if(this.cache.has(V))return this.cache.get(V);if(this.oldCache.has(V)){const X=this.oldCache.get(V);return this.oldCache.delete(V),this._set(V,X),X}}set(V,X){return this.cache.has(V)?this.cache.set(V,X):this._set(V,X),this}has(V){return this.cache.has(V)||this.oldCache.has(V)}peek(V){return this.cache.has(V)?this.cache.get(V):this.oldCache.has(V)?this.oldCache.get(V):void 0}delete(V){const X=this.cache.delete(V);return X&&this._size--,this.oldCache.delete(V)||X}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[V]of this)yield V}*values(){for(const[,V]of this)yield V}*[Symbol.iterator](){for(const V of this.cache)yield V;for(const V of this.oldCache){const[X]=V;this.cache.has(X)||(yield V)}}get size(){let V=0;for(const X of this.oldCache.keys())this.cache.has(X)||V++;return this._size+V}}Ae.exports=J},6775:function(Ae){var V;V=function(){var U=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function V(z){return z.match(U)||[]}function m(z){return{language:(z=V(z))[1]||"",extlang:z[2]||"",script:z[3]||"",region:z[4]||""}}function $(z,T,D){Object.defineProperty(z,T,{value:D,enumerable:!0})}function G(z,T,D){function F(Z){return V(Z)[z]||""}$(F,"pattern",T),$(m,D,F)}return G(1,/^[a-zA-Z]{2,3}$/,"language"),G(2,/^[a-zA-Z]{3}$/,"extlang"),G(3,/^[a-zA-Z]{4}$/,"script"),G(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),$(m,"split",function X(z){return V(z).filter(function(T,D){return T&&D})}),m},Ae.exports?Ae.exports=V():this.subtag=V()},4208:(Ae,J,U)=>{"use strict";var V=U(8526);Ae.exports=V,typeof window<"u"&&(window.Suggestions=V)},4861:Ae=>{"use strict";var J=function(U){return this.component=U,this.items=[],this.active=U.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,U.el.parentNode.insertBefore(this.wrapper,U.el.nextSibling),this};J.prototype.show=function(){this.element.style.display="block"},J.prototype.hide=function(){this.element.style.display="none"},J.prototype.add=function(U){this.items.push(U)},J.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},J.prototype.isEmpty=function(){return!this.items.length},J.prototype.isVisible=function(){return"block"===this.element.style.display},J.prototype.draw=function(){if(this.element.innerHTML="",0!==this.items.length){for(var U=0;U<this.items.length;U++)this.drawItem(this.items[U],this.active===U);this.show()}else this.hide()},J.prototype.drawItem=function(U,V){var X=document.createElement("li"),m=document.createElement("a");V&&(X.className+=" active"),m.innerHTML=U.string,X.appendChild(m),this.element.appendChild(X),X.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),X.addEventListener("mouseup",function(){this.handleMouseUp.call(this,U)}.bind(this))},J.prototype.handleMouseUp=function(U){this.selectingListItem=!1,this.component.value(U.original),this.clear(),this.draw()},J.prototype.move=function(U){this.active=U,this.draw()},J.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},J.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},J.prototype.drawError=function(U){var V=document.createElement("li");V.innerHTML=U,this.element.appendChild(V),this.show()},Ae.exports=J},8526:(Ae,J,U)=>{"use strict";var V=U(4703),X=U(5780),m=U(4861),$=function(G,z,T){return this.options=V({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},T=T||{}),this.el=G,this.data=z||[],this.list=new m(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(D){this.handleKeyUp(D.keyCode,D)}.bind(this),!1),this.el.addEventListener("keydown",function(D){this.handleKeyDown(D)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(D){this.handlePaste(D)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};$.prototype.handleKeyUp=function(G,z){if(40!==G&&38!==G&&27!==G&&9!==G){if(13===G)return void(this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),z.stopPropagation()));this.handleInputChange(this.el.value)}},$.prototype.handleKeyDown=function(G){switch(G.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&G.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},$.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},$.prototype.handlePaste=function(G){if(G.clipboardData)this.handleInputChange(G.clipboardData.getData("Text"));else{var z=this;setTimeout(function(){z.handleInputChange(G.target.value)},100)}},$.prototype.handleInputChange=function(G){this.query=this.normalize(G),this.list.clear(),this.query.length<this.options.minLength?this.list.draw():this.getCandidates(function(z){for(var T=0;T<z.length&&(this.list.add(z[T]),T!==this.options.limit-1);T++);this.list.draw()}.bind(this))},$.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},$.prototype.update=function(G){this.data=G,this.handleKeyUp()},$.prototype.clear=function(){this.data=[],this.list.clear()},$.prototype.normalize=function(G){return G.toLowerCase()},$.prototype.match=function(G,z){return G.indexOf(z)>-1},$.prototype.value=function(G){if(this.selected=G,this.el.value=this.getItemValue(G||{place_name:this.query}),document.createEvent){var z=document.createEvent("HTMLEvents");z.initEvent("change",!0,!1),this.el.dispatchEvent(z)}else this.el.fireEvent("onchange")},$.prototype.getCandidates=function(G){var z={pre:"<strong>",post:"</strong>",extract:function(D){return this.getItemValue(D)}.bind(this)};G(this.options.filter?X.filter(this.query,this.data,z).map(function(D){return{original:D.original,string:this.render(D.original,D.string)}}.bind(this)):this.data.map(function(D){return{original:D,string:this.render(D)}}.bind(this)))},$.prototype.getItemValue=function(G){return G},$.prototype.render=function(G,z){if(z)return z;for(var T=this.getItemValue(G.original?G.original:G),D=this.normalize(T),F=D.lastIndexOf(this.query);F>-1;){var Z=F+this.query.length;T=T.slice(0,F)+"<strong>"+T.slice(F,Z)+"</strong>"+T.slice(Z),F=D.slice(0,F).lastIndexOf(this.query)}return T},$.prototype.renderError=function(G){this.list.drawError(G)},Ae.exports=$},5080:Ae=>{var J=Ae.exports=function(se){return new U(se)};function U(se){this.value=se}function V(se,_e,Me){var Ne=[],Ze=[],je=!0;return function Ee(Je){var nt=Me?X(Je):Je,Ct={},Ue=!0,A={node:nt,node_:Je,path:[].concat(Ne),parent:Ze[Ze.length-1],parents:Ze,key:Ne.slice(-1)[0],isRoot:0===Ne.length,level:Ne.length,circular:null,update:function(j,ee){A.isRoot||(A.parent.node[A.key]=j),A.node=j,ee&&(Ue=!1)},delete:function(j){delete A.parent.node[A.key],j&&(Ue=!1)},remove:function(j){Y(A.parent.node)?A.parent.node.splice(A.key,1):delete A.parent.node[A.key],j&&(Ue=!1)},keys:null,before:function(j){Ct.before=j},after:function(j){Ct.after=j},pre:function(j){Ct.pre=j},post:function(j){Ct.post=j},stop:function(){je=!1},block:function(){Ue=!1}};if(!je)return A;function L(){if("object"==typeof A.node&&null!==A.node){(!A.keys||A.node_!==A.node)&&(A.keys=m(A.node)),A.isLeaf=0==A.keys.length;for(var j=0;j<Ze.length;j++)if(Ze[j].node_===Je){A.circular=Ze[j];break}}else A.isLeaf=!0,A.keys=null;A.notLeaf=!A.isLeaf,A.notRoot=!A.isRoot}L();var B=_e.call(A,A.node);return void 0!==B&&A.update&&A.update(B),Ct.before&&Ct.before.call(A,A.node),Ue&&("object"==typeof A.node&&null!==A.node&&!A.circular&&(Ze.push(A),L(),ie(A.keys,function(j,ee){Ne.push(j),Ct.pre&&Ct.pre.call(A,A.node[j],j);var W=Ee(A.node[j]);Me&&me.call(A.node,j)&&(A.node[j]=W.node),W.isLast=ee==A.keys.length-1,W.isFirst=0==ee,Ct.post&&Ct.post.call(A,W),Ne.pop()}),Ze.pop()),Ct.after&&Ct.after.call(A,A.node)),A}(se).node}function X(se){if("object"==typeof se&&null!==se){var _e;if(Y(se))_e=[];else if(function G(se){return"[object Date]"===$(se)}(se))_e=new Date(se.getTime?se.getTime():se);else if(function z(se){return"[object RegExp]"===$(se)}(se))_e=new RegExp(se);else if(function T(se){return"[object Error]"===$(se)}(se))_e={message:se.message};else if(function D(se){return"[object Boolean]"===$(se)}(se))_e=new Boolean(se);else if(function F(se){return"[object Number]"===$(se)}(se))_e=new Number(se);else if(function Z(se){return"[object String]"===$(se)}(se))_e=new String(se);else if(Object.create&&Object.getPrototypeOf)_e=Object.create(Object.getPrototypeOf(se));else if(se.constructor===Object)_e={};else{var Ne=function(){};Ne.prototype=se.constructor&&se.constructor.prototype||se.__proto__||{},_e=new Ne}return ie(m(se),function(Ze){_e[Ze]=se[Ze]}),_e}return se}U.prototype.get=function(se){for(var _e=this.value,Me=0;Me<se.length;Me++){var Ne=se[Me];if(!_e||!me.call(_e,Ne)){_e=void 0;break}_e=_e[Ne]}return _e},U.prototype.has=function(se){for(var _e=this.value,Me=0;Me<se.length;Me++){var Ne=se[Me];if(!_e||!me.call(_e,Ne))return!1;_e=_e[Ne]}return!0},U.prototype.set=function(se,_e){for(var Me=this.value,Ne=0;Ne<se.length-1;Ne++){var Ze=se[Ne];me.call(Me,Ze)||(Me[Ze]={}),Me=Me[Ze]}return Me[se[Ne]]=_e,_e},U.prototype.map=function(se){return V(this.value,se,!0)},U.prototype.forEach=function(se){return this.value=V(this.value,se,!1),this.value},U.prototype.reduce=function(se,_e){var Me=1===arguments.length,Ne=Me?this.value:_e;return this.forEach(function(Ze){(!this.isRoot||!Me)&&(Ne=se.call(this,Ne,Ze))}),Ne},U.prototype.paths=function(){var se=[];return this.forEach(function(_e){se.push(this.path)}),se},U.prototype.nodes=function(){var se=[];return this.forEach(function(_e){se.push(this.node)}),se},U.prototype.clone=function(){var se=[],_e=[];return function Me(Ne){for(var Ze=0;Ze<se.length;Ze++)if(se[Ze]===Ne)return _e[Ze];if("object"==typeof Ne&&null!==Ne){var je=X(Ne);return se.push(Ne),_e.push(je),ie(m(Ne),function(Ee){je[Ee]=Me(Ne[Ee])}),se.pop(),_e.pop(),je}return Ne}(this.value)};var m=Object.keys||function(_e){var Me=[];for(var Ne in _e)Me.push(Ne);return Me};function $(se){return Object.prototype.toString.call(se)}var Y=Array.isArray||function(_e){return"[object Array]"===Object.prototype.toString.call(_e)},ie=function(se,_e){if(se.forEach)return se.forEach(_e);for(var Me=0;Me<se.length;Me++)_e(se[Me],Me,se)};ie(m(U.prototype),function(se){J[se]=function(_e){var Me=[].slice.call(arguments,1),Ne=new U(_e);return Ne[se].apply(Ne,Me)}});var me=Object.hasOwnProperty||function(se,_e){return _e in se}},8762:(Ae,J,U)=>{"use strict";var X=U(6117),m=U(796);function $(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}J.Qc=Ee,J.WU=function Je(Ue){return m.isString(Ue)&&(Ue=Ee(Ue)),Ue instanceof $?Ue.format():$.prototype.format.call(Ue)};var G=/^([a-z0-9.+-]+:)/i,z=/:[0-9]*$/,T=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,F=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Z=["'"].concat(F),Y=["%","/","?",";","#"].concat(Z),ie=["/","?","#"],se=/^[+a-z0-9A-Z_-]{0,63}$/,_e=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Me={javascript:!0,"javascript:":!0},Ne={javascript:!0,"javascript:":!0},Ze={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},je=U(7137);function Ee(Ue,A,L){if(Ue&&m.isObject(Ue)&&Ue instanceof $)return Ue;var B=new $;return B.parse(Ue,A,L),B}$.prototype.parse=function(Ue,A,L){if(!m.isString(Ue))throw new TypeError("Parameter 'url' must be a string, not "+typeof Ue);var B=Ue.indexOf("?"),j=-1!==B&&B<Ue.indexOf("#")?"?":"#",ee=Ue.split(j);ee[0]=ee[0].replace(/\\/g,"/");var ce=Ue=ee.join(j);if(ce=ce.trim(),!L&&1===Ue.split("#").length){var We=T.exec(ce);if(We)return this.path=ce,this.href=ce,this.pathname=We[1],We[2]?(this.search=We[2],this.query=A?je.parse(this.search.substr(1)):this.search.substr(1)):A&&(this.search="",this.query={}),this}var ut=G.exec(ce);if(ut){var be=(ut=ut[0]).toLowerCase();this.protocol=be,ce=ce.substr(ut.length)}if(L||ut||ce.match(/^\/\/[^@\/]+@[^@\/]+/)){var wt="//"===ce.substr(0,2);wt&&(!ut||!Ne[ut])&&(ce=ce.substr(2),this.slashes=!0)}if(!Ne[ut]&&(wt||ut&&!Ze[ut])){for(var bt=-1,Ke=0;Ke<ie.length;Ke++)-1!==(xt=ce.indexOf(ie[Ke]))&&(-1===bt||xt<bt)&&(bt=xt);var vn,zt;for(-1!==(zt=-1===bt?ce.lastIndexOf("@"):ce.lastIndexOf("@",bt))&&(vn=ce.slice(0,zt),ce=ce.slice(zt+1),this.auth=decodeURIComponent(vn)),bt=-1,Ke=0;Ke<Y.length;Ke++){var xt;-1!==(xt=ce.indexOf(Y[Ke]))&&(-1===bt||xt<bt)&&(bt=xt)}-1===bt&&(bt=ce.length),this.host=ce.slice(0,bt),ce=ce.slice(bt),this.parseHost(),this.hostname=this.hostname||"";var Sn="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Sn)for(var It=this.hostname.split(/\./),Cn=(Ke=0,It.length);Ke<Cn;Ke++){var En=It[Ke];if(En&&!En.match(se)){for(var Zn="",Wt=0,Ce=En.length;Wt<Ce;Wt++)En.charCodeAt(Wt)>127?Zn+="x":Zn+=En[Wt];if(!Zn.match(se)){var Gn=It.slice(0,Ke),ir=It.slice(Ke+1),hi=En.match(_e);hi&&(Gn.push(hi[1]),ir.unshift(hi[2])),ir.length&&(ce="/"+ir.join(".")+ce),this.hostname=Gn.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),Sn||(this.hostname=X.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,Sn&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==ce[0]&&(ce="/"+ce))}if(!Me[be])for(Ke=0,Cn=Z.length;Ke<Cn;Ke++){var Ot=Z[Ke];if(-1!==ce.indexOf(Ot)){var za=encodeURIComponent(Ot);za===Ot&&(za=escape(Ot)),ce=ce.split(Ot).join(za)}}var wa=ce.indexOf("#");-1!==wa&&(this.hash=ce.substr(wa),ce=ce.slice(0,wa));var li=ce.indexOf("?");return-1!==li?(this.search=ce.substr(li),this.query=ce.substr(li+1),A&&(this.query=je.parse(this.query)),ce=ce.slice(0,li)):A&&(this.search="",this.query={}),ce&&(this.pathname=ce),Ze[be]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},$.prototype.format=function(){var Ue=this.auth||"";Ue&&(Ue=(Ue=encodeURIComponent(Ue)).replace(/%3A/i,":"),Ue+="@");var A=this.protocol||"",L=this.pathname||"",B=this.hash||"",j=!1,ee="";this.host?j=Ue+this.host:this.hostname&&(j=Ue+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(j+=":"+this.port)),this.query&&m.isObject(this.query)&&Object.keys(this.query).length&&(ee=je.stringify(this.query));var W=this.search||ee&&"?"+ee||"";return A&&":"!==A.substr(-1)&&(A+=":"),this.slashes||(!A||Ze[A])&&!1!==j?(j="//"+(j||""),L&&"/"!==L.charAt(0)&&(L="/"+L)):j||(j=""),B&&"#"!==B.charAt(0)&&(B="#"+B),W&&"?"!==W.charAt(0)&&(W="?"+W),A+j+(L=L.replace(/[?#]/g,function(ce){return encodeURIComponent(ce)}))+(W=W.replace("#","%23"))+B},$.prototype.resolve=function(Ue){return this.resolveObject(Ee(Ue,!1,!0)).format()},$.prototype.resolveObject=function(Ue){if(m.isString(Ue)){var A=new $;A.parse(Ue,!1,!0),Ue=A}for(var L=new $,B=Object.keys(this),j=0;j<B.length;j++){var ee=B[j];L[ee]=this[ee]}if(L.hash=Ue.hash,""===Ue.href)return L.href=L.format(),L;if(Ue.slashes&&!Ue.protocol){for(var W=Object.keys(Ue),ce=0;ce<W.length;ce++){var We=W[ce];"protocol"!==We&&(L[We]=Ue[We])}return Ze[L.protocol]&&L.hostname&&!L.pathname&&(L.path=L.pathname="/"),L.href=L.format(),L}if(Ue.protocol&&Ue.protocol!==L.protocol){if(!Ze[Ue.protocol]){for(var ut=Object.keys(Ue),be=0;be<ut.length;be++){var wt=ut[be];L[wt]=Ue[wt]}return L.href=L.format(),L}if(L.protocol=Ue.protocol,Ue.host||Ne[Ue.protocol])L.pathname=Ue.pathname;else{for(var Cn=(Ue.pathname||"").split("/");Cn.length&&!(Ue.host=Cn.shift()););Ue.host||(Ue.host=""),Ue.hostname||(Ue.hostname=""),""!==Cn[0]&&Cn.unshift(""),Cn.length<2&&Cn.unshift(""),L.pathname=Cn.join("/")}return L.search=Ue.search,L.query=Ue.query,L.host=Ue.host||"",L.auth=Ue.auth,L.hostname=Ue.hostname||Ue.host,L.port=Ue.port,(L.pathname||L.search)&&(L.path=(L.pathname||"")+(L.search||"")),L.slashes=L.slashes||Ue.slashes,L.href=L.format(),L}var xt=L.pathname&&"/"===L.pathname.charAt(0),vn=Ue.host||Ue.pathname&&"/"===Ue.pathname.charAt(0),zt=vn||xt||L.host&&Ue.pathname,Sn=zt,It=L.pathname&&L.pathname.split("/")||[],En=(Cn=Ue.pathname&&Ue.pathname.split("/")||[],L.protocol&&!Ze[L.protocol]);if(En&&(L.hostname="",L.port=null,L.host&&(""===It[0]?It[0]=L.host:It.unshift(L.host)),L.host="",Ue.protocol&&(Ue.hostname=null,Ue.port=null,Ue.host&&(""===Cn[0]?Cn[0]=Ue.host:Cn.unshift(Ue.host)),Ue.host=null),zt=zt&&(""===Cn[0]||""===It[0])),vn)L.host=Ue.host||""===Ue.host?Ue.host:L.host,L.hostname=Ue.hostname||""===Ue.hostname?Ue.hostname:L.hostname,L.search=Ue.search,L.query=Ue.query,It=Cn;else if(Cn.length)It||(It=[]),It.pop(),It=It.concat(Cn),L.search=Ue.search,L.query=Ue.query;else if(!m.isNullOrUndefined(Ue.search))return En&&(L.hostname=L.host=It.shift(),(Zn=!!(L.host&&L.host.indexOf("@")>0)&&L.host.split("@"))&&(L.auth=Zn.shift(),L.host=L.hostname=Zn.shift())),L.search=Ue.search,L.query=Ue.query,(!m.isNull(L.pathname)||!m.isNull(L.search))&&(L.path=(L.pathname?L.pathname:"")+(L.search?L.search:"")),L.href=L.format(),L;if(!It.length)return L.pathname=null,L.path=L.search?"/"+L.search:null,L.href=L.format(),L;for(var Wt=It.slice(-1)[0],Ce=(L.host||Ue.host||It.length>1)&&("."===Wt||".."===Wt)||""===Wt,Gn=0,ir=It.length;ir>=0;ir--)"."===(Wt=It[ir])?It.splice(ir,1):".."===Wt?(It.splice(ir,1),Gn++):Gn&&(It.splice(ir,1),Gn--);if(!zt&&!Sn)for(;Gn--;Gn)It.unshift("..");zt&&""!==It[0]&&(!It[0]||"/"!==It[0].charAt(0))&&It.unshift(""),Ce&&"/"!==It.join("/").substr(-1)&&It.push("");var Zn,hi=""===It[0]||It[0]&&"/"===It[0].charAt(0);return En&&(L.hostname=L.host=hi?"":It.length?It.shift():"",(Zn=!!(L.host&&L.host.indexOf("@")>0)&&L.host.split("@"))&&(L.auth=Zn.shift(),L.host=L.hostname=Zn.shift())),(zt=zt||L.host&&It.length)&&!hi&&It.unshift(""),It.length?L.pathname=It.join("/"):(L.pathname=null,L.path=null),(!m.isNull(L.pathname)||!m.isNull(L.search))&&(L.path=(L.pathname?L.pathname:"")+(L.search?L.search:"")),L.auth=Ue.auth||L.auth,L.slashes=L.slashes||Ue.slashes,L.href=L.format(),L},$.prototype.parseHost=function(){var Ue=this.host,A=z.exec(Ue);A&&(":"!==(A=A[0])&&(this.port=A.substr(1)),Ue=Ue.substr(0,Ue.length-A.length)),Ue&&(this.hostname=Ue)}},796:Ae=>{"use strict";Ae.exports={isString:function(J){return"string"==typeof J},isObject:function(J){return"object"==typeof J&&null!==J},isNull:function(J){return null===J},isNullOrUndefined:function(J){return null==J}}},9444:(Ae,J,U)=>{var V=U(4542),X=U(6926),m=X;m.v1=V,m.v4=X,Ae.exports=m},7805:Ae=>{for(var J=[],U=0;U<256;++U)J[U]=(U+256).toString(16).substr(1);Ae.exports=function V(X,m){var $=m||0;return[J[X[$++]],J[X[$++]],J[X[$++]],J[X[$++]],"-",J[X[$++]],J[X[$++]],"-",J[X[$++]],J[X[$++]],"-",J[X[$++]],J[X[$++]],"-",J[X[$++]],J[X[$++]],J[X[$++]],J[X[$++]],J[X[$++]],J[X[$++]]].join("")}},7142:Ae=>{var J=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(J){var U=new Uint8Array(16);Ae.exports=function(){return J(U),U}}else{var V=new Array(16);Ae.exports=function(){for(var $,m=0;m<16;m++)0==(3&m)&&($=4294967296*Math.random()),V[m]=$>>>((3&m)<<3)&255;return V}}},4542:(Ae,J,U)=>{var m,$,V=U(7142),X=U(7805),G=0,z=0;Ae.exports=function T(D,F,Z){var Y=F&&Z||0,ie=F||[],me=(D=D||{}).node||m,se=void 0!==D.clockseq?D.clockseq:$;if(null==me||null==se){var _e=V();null==me&&(me=m=[1|_e[0],_e[1],_e[2],_e[3],_e[4],_e[5]]),null==se&&(se=$=16383&(_e[6]<<8|_e[7]))}var Me=void 0!==D.msecs?D.msecs:(new Date).getTime(),Ne=void 0!==D.nsecs?D.nsecs:z+1,Ze=Me-G+(Ne-z)/1e4;if(Ze<0&&void 0===D.clockseq&&(se=se+1&16383),(Ze<0||Me>G)&&void 0===D.nsecs&&(Ne=0),Ne>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");G=Me,z=Ne,$=se;var je=(1e4*(268435455&(Me+=122192928e5))+Ne)%4294967296;ie[Y++]=je>>>24&255,ie[Y++]=je>>>16&255,ie[Y++]=je>>>8&255,ie[Y++]=255&je;var Ee=Me/4294967296*1e4&268435455;ie[Y++]=Ee>>>8&255,ie[Y++]=255&Ee,ie[Y++]=Ee>>>24&15|16,ie[Y++]=Ee>>>16&255,ie[Y++]=se>>>8|128,ie[Y++]=255&se;for(var Je=0;Je<6;++Je)ie[Y+Je]=me[Je];return F||X(ie)}},6926:(Ae,J,U)=>{var V=U(7142),X=U(7805);Ae.exports=function m($,G,z){var T=G&&z||0;"string"==typeof $&&(G="binary"===$?new Array(16):null,$=null);var D=($=$||{}).random||($.rng||V)();if(D[6]=15&D[6]|64,D[8]=63&D[8]|128,G)for(var F=0;F<16;++F)G[T+F]=D[F];return G||X(D)}},7265:Ae=>{Ae.exports.RADIUS=6378137,Ae.exports.FLATTENING=1/298.257223563,Ae.exports.POLAR_RADIUS=6356752.3142},4703:Ae=>{Ae.exports=function U(){for(var V={},X=0;X<arguments.length;X++){var m=arguments[X];for(var $ in m)J.call(m,$)&&(V[$]=m[$])}return V};var J=Object.prototype.hasOwnProperty},1980:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{__assign:()=>m,__asyncDelegator:()=>Ze,__asyncGenerator:()=>Ne,__asyncValues:()=>je,__await:()=>Me,__awaiter:()=>D,__classPrivateFieldGet:()=>Ct,__classPrivateFieldSet:()=>Ue,__createBinding:()=>Z,__decorate:()=>G,__exportStar:()=>Y,__extends:()=>X,__generator:()=>F,__importDefault:()=>nt,__importStar:()=>Je,__makeTemplateObject:()=>Ee,__metadata:()=>T,__param:()=>z,__read:()=>me,__rest:()=>$,__spread:()=>se,__spreadArrays:()=>_e,__values:()=>ie});var V=function(A,L){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,j){B.__proto__=j}||function(B,j){for(var ee in j)j.hasOwnProperty(ee)&&(B[ee]=j[ee])})(A,L)};function X(A,L){function B(){this.constructor=A}V(A,L),A.prototype=null===L?Object.create(L):(B.prototype=L.prototype,new B)}var m=function(){return m=Object.assign||function(L){for(var B,j=1,ee=arguments.length;j<ee;j++)for(var W in B=arguments[j])Object.prototype.hasOwnProperty.call(B,W)&&(L[W]=B[W]);return L},m.apply(this,arguments)};function $(A,L){var B={};for(var j in A)Object.prototype.hasOwnProperty.call(A,j)&&L.indexOf(j)<0&&(B[j]=A[j]);if(null!=A&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(j=Object.getOwnPropertySymbols(A);ee<j.length;ee++)L.indexOf(j[ee])<0&&Object.prototype.propertyIsEnumerable.call(A,j[ee])&&(B[j[ee]]=A[j[ee]])}return B}function G(A,L,B,j){var ce,ee=arguments.length,W=ee<3?L:null===j?j=Object.getOwnPropertyDescriptor(L,B):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(A,L,B,j);else for(var We=A.length-1;We>=0;We--)(ce=A[We])&&(W=(ee<3?ce(W):ee>3?ce(L,B,W):ce(L,B))||W);return ee>3&&W&&Object.defineProperty(L,B,W),W}function z(A,L){return function(B,j){L(B,j,A)}}function T(A,L){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(A,L)}function D(A,L,B,j){return new(B||(B=Promise))(function(W,ce){function We(wt){try{be(j.next(wt))}catch(bt){ce(bt)}}function ut(wt){try{be(j.throw(wt))}catch(bt){ce(bt)}}function be(wt){wt.done?W(wt.value):function ee(W){return W instanceof B?W:new B(function(ce){ce(W)})}(wt.value).then(We,ut)}be((j=j.apply(A,L||[])).next())})}function F(A,L){var j,ee,W,ce,B={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ce={next:We(0),throw:We(1),return:We(2)},"function"==typeof Symbol&&(ce[Symbol.iterator]=function(){return this}),ce;function We(be){return function(wt){return function ut(be){if(j)throw new TypeError("Generator is already executing.");for(;B;)try{if(j=1,ee&&(W=2&be[0]?ee.return:be[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,be[1])).done)return W;switch(ee=0,W&&(be=[2&be[0],W.value]),be[0]){case 0:case 1:W=be;break;case 4:return B.label++,{value:be[1],done:!1};case 5:B.label++,ee=be[1],be=[0];continue;case 7:be=B.ops.pop(),B.trys.pop();continue;default:if(!(W=(W=B.trys).length>0&&W[W.length-1])&&(6===be[0]||2===be[0])){B=0;continue}if(3===be[0]&&(!W||be[1]>W[0]&&be[1]<W[3])){B.label=be[1];break}if(6===be[0]&&B.label<W[1]){B.label=W[1],W=be;break}if(W&&B.label<W[2]){B.label=W[2],B.ops.push(be);break}W[2]&&B.ops.pop(),B.trys.pop();continue}be=L.call(A,B)}catch(wt){be=[6,wt],ee=0}finally{j=W=0}if(5&be[0])throw be[1];return{value:be[0]?be[1]:void 0,done:!0}}([be,wt])}}}function Z(A,L,B,j){void 0===j&&(j=B),A[j]=L[B]}function Y(A,L){for(var B in A)"default"!==B&&!L.hasOwnProperty(B)&&(L[B]=A[B])}function ie(A){var L="function"==typeof Symbol&&Symbol.iterator,B=L&&A[L],j=0;if(B)return B.call(A);if(A&&"number"==typeof A.length)return{next:function(){return A&&j>=A.length&&(A=void 0),{value:A&&A[j++],done:!A}}};throw new TypeError(L?"Object is not iterable.":"Symbol.iterator is not defined.")}function me(A,L){var B="function"==typeof Symbol&&A[Symbol.iterator];if(!B)return A;var ee,ce,j=B.call(A),W=[];try{for(;(void 0===L||L-- >0)&&!(ee=j.next()).done;)W.push(ee.value)}catch(We){ce={error:We}}finally{try{ee&&!ee.done&&(B=j.return)&&B.call(j)}finally{if(ce)throw ce.error}}return W}function se(){for(var A=[],L=0;L<arguments.length;L++)A=A.concat(me(arguments[L]));return A}function _e(){for(var A=0,L=0,B=arguments.length;L<B;L++)A+=arguments[L].length;var j=Array(A),ee=0;for(L=0;L<B;L++)for(var W=arguments[L],ce=0,We=W.length;ce<We;ce++,ee++)j[ee]=W[ce];return j}function Me(A){return this instanceof Me?(this.v=A,this):new Me(A)}function Ne(A,L,B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,j=B.apply(A,L||[]),W=[];return ee={},ce("next"),ce("throw"),ce("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ce(Ke){j[Ke]&&(ee[Ke]=function(xt){return new Promise(function(vn,zt){W.push([Ke,xt,vn,zt])>1||We(Ke,xt)})})}function We(Ke,xt){try{!function ut(Ke){Ke.value instanceof Me?Promise.resolve(Ke.value.v).then(be,wt):bt(W[0][2],Ke)}(j[Ke](xt))}catch(vn){bt(W[0][3],vn)}}function be(Ke){We("next",Ke)}function wt(Ke){We("throw",Ke)}function bt(Ke,xt){Ke(xt),W.shift(),W.length&&We(W[0][0],W[0][1])}}function Ze(A){var L,B;return L={},j("next"),j("throw",function(ee){throw ee}),j("return"),L[Symbol.iterator]=function(){return this},L;function j(ee,W){L[ee]=A[ee]?function(ce){return(B=!B)?{value:Me(A[ee](ce)),done:"return"===ee}:W?W(ce):ce}:W}}function je(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B,L=A[Symbol.asyncIterator];return L?L.call(A):(A=ie(A),B={},j("next"),j("throw"),j("return"),B[Symbol.asyncIterator]=function(){return this},B);function j(W){B[W]=A[W]&&function(ce){return new Promise(function(We,ut){!function ee(W,ce,We,ut){Promise.resolve(ut).then(function(be){W({value:be,done:We})},ce)}(We,ut,(ce=A[W](ce)).done,ce.value)})}}}function Ee(A,L){return Object.defineProperty?Object.defineProperty(A,"raw",{value:L}):A.raw=L,A}function Je(A){if(A&&A.__esModule)return A;var L={};if(null!=A)for(var B in A)Object.hasOwnProperty.call(A,B)&&(L[B]=A[B]);return L.default=A,L}function nt(A){return A&&A.__esModule?A:{default:A}}function Ct(A,L){if(!L.has(A))throw new TypeError("attempted to get private field on non-instance");return L.get(A)}function Ue(A,L,B){if(!L.has(A))throw new TypeError("attempted to set private field on non-instance");return L.set(A,B),B}},5789:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{__assign:()=>m,__asyncDelegator:()=>Ze,__asyncGenerator:()=>Ne,__asyncValues:()=>je,__await:()=>Me,__awaiter:()=>D,__classPrivateFieldGet:()=>Ct,__classPrivateFieldSet:()=>Ue,__createBinding:()=>Z,__decorate:()=>G,__exportStar:()=>Y,__extends:()=>X,__generator:()=>F,__importDefault:()=>nt,__importStar:()=>Je,__makeTemplateObject:()=>Ee,__metadata:()=>T,__param:()=>z,__read:()=>me,__rest:()=>$,__spread:()=>se,__spreadArrays:()=>_e,__values:()=>ie});var V=function(A,L){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,j){B.__proto__=j}||function(B,j){for(var ee in j)j.hasOwnProperty(ee)&&(B[ee]=j[ee])})(A,L)};function X(A,L){function B(){this.constructor=A}V(A,L),A.prototype=null===L?Object.create(L):(B.prototype=L.prototype,new B)}var m=function(){return m=Object.assign||function(L){for(var B,j=1,ee=arguments.length;j<ee;j++)for(var W in B=arguments[j])Object.prototype.hasOwnProperty.call(B,W)&&(L[W]=B[W]);return L},m.apply(this,arguments)};function $(A,L){var B={};for(var j in A)Object.prototype.hasOwnProperty.call(A,j)&&L.indexOf(j)<0&&(B[j]=A[j]);if(null!=A&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(j=Object.getOwnPropertySymbols(A);ee<j.length;ee++)L.indexOf(j[ee])<0&&Object.prototype.propertyIsEnumerable.call(A,j[ee])&&(B[j[ee]]=A[j[ee]])}return B}function G(A,L,B,j){var ce,ee=arguments.length,W=ee<3?L:null===j?j=Object.getOwnPropertyDescriptor(L,B):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(A,L,B,j);else for(var We=A.length-1;We>=0;We--)(ce=A[We])&&(W=(ee<3?ce(W):ee>3?ce(L,B,W):ce(L,B))||W);return ee>3&&W&&Object.defineProperty(L,B,W),W}function z(A,L){return function(B,j){L(B,j,A)}}function T(A,L){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(A,L)}function D(A,L,B,j){return new(B||(B=Promise))(function(W,ce){function We(wt){try{be(j.next(wt))}catch(bt){ce(bt)}}function ut(wt){try{be(j.throw(wt))}catch(bt){ce(bt)}}function be(wt){wt.done?W(wt.value):function ee(W){return W instanceof B?W:new B(function(ce){ce(W)})}(wt.value).then(We,ut)}be((j=j.apply(A,L||[])).next())})}function F(A,L){var j,ee,W,ce,B={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ce={next:We(0),throw:We(1),return:We(2)},"function"==typeof Symbol&&(ce[Symbol.iterator]=function(){return this}),ce;function We(be){return function(wt){return function ut(be){if(j)throw new TypeError("Generator is already executing.");for(;B;)try{if(j=1,ee&&(W=2&be[0]?ee.return:be[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,be[1])).done)return W;switch(ee=0,W&&(be=[2&be[0],W.value]),be[0]){case 0:case 1:W=be;break;case 4:return B.label++,{value:be[1],done:!1};case 5:B.label++,ee=be[1],be=[0];continue;case 7:be=B.ops.pop(),B.trys.pop();continue;default:if(!(W=(W=B.trys).length>0&&W[W.length-1])&&(6===be[0]||2===be[0])){B=0;continue}if(3===be[0]&&(!W||be[1]>W[0]&&be[1]<W[3])){B.label=be[1];break}if(6===be[0]&&B.label<W[1]){B.label=W[1],W=be;break}if(W&&B.label<W[2]){B.label=W[2],B.ops.push(be);break}W[2]&&B.ops.pop(),B.trys.pop();continue}be=L.call(A,B)}catch(wt){be=[6,wt],ee=0}finally{j=W=0}if(5&be[0])throw be[1];return{value:be[0]?be[1]:void 0,done:!0}}([be,wt])}}}function Z(A,L,B,j){void 0===j&&(j=B),A[j]=L[B]}function Y(A,L){for(var B in A)"default"!==B&&!L.hasOwnProperty(B)&&(L[B]=A[B])}function ie(A){var L="function"==typeof Symbol&&Symbol.iterator,B=L&&A[L],j=0;if(B)return B.call(A);if(A&&"number"==typeof A.length)return{next:function(){return A&&j>=A.length&&(A=void 0),{value:A&&A[j++],done:!A}}};throw new TypeError(L?"Object is not iterable.":"Symbol.iterator is not defined.")}function me(A,L){var B="function"==typeof Symbol&&A[Symbol.iterator];if(!B)return A;var ee,ce,j=B.call(A),W=[];try{for(;(void 0===L||L-- >0)&&!(ee=j.next()).done;)W.push(ee.value)}catch(We){ce={error:We}}finally{try{ee&&!ee.done&&(B=j.return)&&B.call(j)}finally{if(ce)throw ce.error}}return W}function se(){for(var A=[],L=0;L<arguments.length;L++)A=A.concat(me(arguments[L]));return A}function _e(){for(var A=0,L=0,B=arguments.length;L<B;L++)A+=arguments[L].length;var j=Array(A),ee=0;for(L=0;L<B;L++)for(var W=arguments[L],ce=0,We=W.length;ce<We;ce++,ee++)j[ee]=W[ce];return j}function Me(A){return this instanceof Me?(this.v=A,this):new Me(A)}function Ne(A,L,B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,j=B.apply(A,L||[]),W=[];return ee={},ce("next"),ce("throw"),ce("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ce(Ke){j[Ke]&&(ee[Ke]=function(xt){return new Promise(function(vn,zt){W.push([Ke,xt,vn,zt])>1||We(Ke,xt)})})}function We(Ke,xt){try{!function ut(Ke){Ke.value instanceof Me?Promise.resolve(Ke.value.v).then(be,wt):bt(W[0][2],Ke)}(j[Ke](xt))}catch(vn){bt(W[0][3],vn)}}function be(Ke){We("next",Ke)}function wt(Ke){We("throw",Ke)}function bt(Ke,xt){Ke(xt),W.shift(),W.length&&We(W[0][0],W[0][1])}}function Ze(A){var L,B;return L={},j("next"),j("throw",function(ee){throw ee}),j("return"),L[Symbol.iterator]=function(){return this},L;function j(ee,W){L[ee]=A[ee]?function(ce){return(B=!B)?{value:Me(A[ee](ce)),done:"return"===ee}:W?W(ce):ce}:W}}function je(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B,L=A[Symbol.asyncIterator];return L?L.call(A):(A=ie(A),B={},j("next"),j("throw"),j("return"),B[Symbol.asyncIterator]=function(){return this},B);function j(W){B[W]=A[W]&&function(ce){return new Promise(function(We,ut){!function ee(W,ce,We,ut){Promise.resolve(ut).then(function(be){W({value:be,done:We})},ce)}(We,ut,(ce=A[W](ce)).done,ce.value)})}}}function Ee(A,L){return Object.defineProperty?Object.defineProperty(A,"raw",{value:L}):A.raw=L,A}function Je(A){if(A&&A.__esModule)return A;var L={};if(null!=A)for(var B in A)Object.hasOwnProperty.call(A,B)&&(L[B]=A[B]);return L.default=A,L}function nt(A){return A&&A.__esModule?A:{default:A}}function Ct(A,L){if(!L.has(A))throw new TypeError("attempted to get private field on non-instance");return L.get(A)}function Ue(A,L,B){if(!L.has(A))throw new TypeError("attempted to set private field on non-instance");return L.set(A,B),B}},3541:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{__assign:()=>m,__asyncDelegator:()=>Ze,__asyncGenerator:()=>Ne,__asyncValues:()=>je,__await:()=>Me,__awaiter:()=>D,__classPrivateFieldGet:()=>Ct,__classPrivateFieldSet:()=>Ue,__createBinding:()=>Z,__decorate:()=>G,__exportStar:()=>Y,__extends:()=>X,__generator:()=>F,__importDefault:()=>nt,__importStar:()=>Je,__makeTemplateObject:()=>Ee,__metadata:()=>T,__param:()=>z,__read:()=>me,__rest:()=>$,__spread:()=>se,__spreadArrays:()=>_e,__values:()=>ie});var V=function(A,L){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,j){B.__proto__=j}||function(B,j){for(var ee in j)j.hasOwnProperty(ee)&&(B[ee]=j[ee])})(A,L)};function X(A,L){function B(){this.constructor=A}V(A,L),A.prototype=null===L?Object.create(L):(B.prototype=L.prototype,new B)}var m=function(){return m=Object.assign||function(L){for(var B,j=1,ee=arguments.length;j<ee;j++)for(var W in B=arguments[j])Object.prototype.hasOwnProperty.call(B,W)&&(L[W]=B[W]);return L},m.apply(this,arguments)};function $(A,L){var B={};for(var j in A)Object.prototype.hasOwnProperty.call(A,j)&&L.indexOf(j)<0&&(B[j]=A[j]);if(null!=A&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(j=Object.getOwnPropertySymbols(A);ee<j.length;ee++)L.indexOf(j[ee])<0&&Object.prototype.propertyIsEnumerable.call(A,j[ee])&&(B[j[ee]]=A[j[ee]])}return B}function G(A,L,B,j){var ce,ee=arguments.length,W=ee<3?L:null===j?j=Object.getOwnPropertyDescriptor(L,B):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(A,L,B,j);else for(var We=A.length-1;We>=0;We--)(ce=A[We])&&(W=(ee<3?ce(W):ee>3?ce(L,B,W):ce(L,B))||W);return ee>3&&W&&Object.defineProperty(L,B,W),W}function z(A,L){return function(B,j){L(B,j,A)}}function T(A,L){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(A,L)}function D(A,L,B,j){return new(B||(B=Promise))(function(W,ce){function We(wt){try{be(j.next(wt))}catch(bt){ce(bt)}}function ut(wt){try{be(j.throw(wt))}catch(bt){ce(bt)}}function be(wt){wt.done?W(wt.value):function ee(W){return W instanceof B?W:new B(function(ce){ce(W)})}(wt.value).then(We,ut)}be((j=j.apply(A,L||[])).next())})}function F(A,L){var j,ee,W,ce,B={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ce={next:We(0),throw:We(1),return:We(2)},"function"==typeof Symbol&&(ce[Symbol.iterator]=function(){return this}),ce;function We(be){return function(wt){return function ut(be){if(j)throw new TypeError("Generator is already executing.");for(;B;)try{if(j=1,ee&&(W=2&be[0]?ee.return:be[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,be[1])).done)return W;switch(ee=0,W&&(be=[2&be[0],W.value]),be[0]){case 0:case 1:W=be;break;case 4:return B.label++,{value:be[1],done:!1};case 5:B.label++,ee=be[1],be=[0];continue;case 7:be=B.ops.pop(),B.trys.pop();continue;default:if(!(W=(W=B.trys).length>0&&W[W.length-1])&&(6===be[0]||2===be[0])){B=0;continue}if(3===be[0]&&(!W||be[1]>W[0]&&be[1]<W[3])){B.label=be[1];break}if(6===be[0]&&B.label<W[1]){B.label=W[1],W=be;break}if(W&&B.label<W[2]){B.label=W[2],B.ops.push(be);break}W[2]&&B.ops.pop(),B.trys.pop();continue}be=L.call(A,B)}catch(wt){be=[6,wt],ee=0}finally{j=W=0}if(5&be[0])throw be[1];return{value:be[0]?be[1]:void 0,done:!0}}([be,wt])}}}function Z(A,L,B,j){void 0===j&&(j=B),A[j]=L[B]}function Y(A,L){for(var B in A)"default"!==B&&!L.hasOwnProperty(B)&&(L[B]=A[B])}function ie(A){var L="function"==typeof Symbol&&Symbol.iterator,B=L&&A[L],j=0;if(B)return B.call(A);if(A&&"number"==typeof A.length)return{next:function(){return A&&j>=A.length&&(A=void 0),{value:A&&A[j++],done:!A}}};throw new TypeError(L?"Object is not iterable.":"Symbol.iterator is not defined.")}function me(A,L){var B="function"==typeof Symbol&&A[Symbol.iterator];if(!B)return A;var ee,ce,j=B.call(A),W=[];try{for(;(void 0===L||L-- >0)&&!(ee=j.next()).done;)W.push(ee.value)}catch(We){ce={error:We}}finally{try{ee&&!ee.done&&(B=j.return)&&B.call(j)}finally{if(ce)throw ce.error}}return W}function se(){for(var A=[],L=0;L<arguments.length;L++)A=A.concat(me(arguments[L]));return A}function _e(){for(var A=0,L=0,B=arguments.length;L<B;L++)A+=arguments[L].length;var j=Array(A),ee=0;for(L=0;L<B;L++)for(var W=arguments[L],ce=0,We=W.length;ce<We;ce++,ee++)j[ee]=W[ce];return j}function Me(A){return this instanceof Me?(this.v=A,this):new Me(A)}function Ne(A,L,B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,j=B.apply(A,L||[]),W=[];return ee={},ce("next"),ce("throw"),ce("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ce(Ke){j[Ke]&&(ee[Ke]=function(xt){return new Promise(function(vn,zt){W.push([Ke,xt,vn,zt])>1||We(Ke,xt)})})}function We(Ke,xt){try{!function ut(Ke){Ke.value instanceof Me?Promise.resolve(Ke.value.v).then(be,wt):bt(W[0][2],Ke)}(j[Ke](xt))}catch(vn){bt(W[0][3],vn)}}function be(Ke){We("next",Ke)}function wt(Ke){We("throw",Ke)}function bt(Ke,xt){Ke(xt),W.shift(),W.length&&We(W[0][0],W[0][1])}}function Ze(A){var L,B;return L={},j("next"),j("throw",function(ee){throw ee}),j("return"),L[Symbol.iterator]=function(){return this},L;function j(ee,W){L[ee]=A[ee]?function(ce){return(B=!B)?{value:Me(A[ee](ce)),done:"return"===ee}:W?W(ce):ce}:W}}function je(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B,L=A[Symbol.asyncIterator];return L?L.call(A):(A=ie(A),B={},j("next"),j("throw"),j("return"),B[Symbol.asyncIterator]=function(){return this},B);function j(W){B[W]=A[W]&&function(ce){return new Promise(function(We,ut){!function ee(W,ce,We,ut){Promise.resolve(ut).then(function(be){W({value:be,done:We})},ce)}(We,ut,(ce=A[W](ce)).done,ce.value)})}}}function Ee(A,L){return Object.defineProperty?Object.defineProperty(A,"raw",{value:L}):A.raw=L,A}function Je(A){if(A&&A.__esModule)return A;var L={};if(null!=A)for(var B in A)Object.hasOwnProperty.call(A,B)&&(L[B]=A[B]);return L.default=A,L}function nt(A){return A&&A.__esModule?A:{default:A}}function Ct(A,L){if(!L.has(A))throw new TypeError("attempted to get private field on non-instance");return L.get(A)}function Ue(A,L,B){if(!L.has(A))throw new TypeError("attempted to set private field on non-instance");return L.set(A,B),B}},7840:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{__assign:()=>m,__asyncDelegator:()=>Ze,__asyncGenerator:()=>Ne,__asyncValues:()=>je,__await:()=>Me,__awaiter:()=>D,__classPrivateFieldGet:()=>Ct,__classPrivateFieldSet:()=>Ue,__createBinding:()=>Z,__decorate:()=>G,__exportStar:()=>Y,__extends:()=>X,__generator:()=>F,__importDefault:()=>nt,__importStar:()=>Je,__makeTemplateObject:()=>Ee,__metadata:()=>T,__param:()=>z,__read:()=>me,__rest:()=>$,__spread:()=>se,__spreadArrays:()=>_e,__values:()=>ie});var V=function(A,L){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,j){B.__proto__=j}||function(B,j){for(var ee in j)j.hasOwnProperty(ee)&&(B[ee]=j[ee])})(A,L)};function X(A,L){function B(){this.constructor=A}V(A,L),A.prototype=null===L?Object.create(L):(B.prototype=L.prototype,new B)}var m=function(){return m=Object.assign||function(L){for(var B,j=1,ee=arguments.length;j<ee;j++)for(var W in B=arguments[j])Object.prototype.hasOwnProperty.call(B,W)&&(L[W]=B[W]);return L},m.apply(this,arguments)};function $(A,L){var B={};for(var j in A)Object.prototype.hasOwnProperty.call(A,j)&&L.indexOf(j)<0&&(B[j]=A[j]);if(null!=A&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(j=Object.getOwnPropertySymbols(A);ee<j.length;ee++)L.indexOf(j[ee])<0&&Object.prototype.propertyIsEnumerable.call(A,j[ee])&&(B[j[ee]]=A[j[ee]])}return B}function G(A,L,B,j){var ce,ee=arguments.length,W=ee<3?L:null===j?j=Object.getOwnPropertyDescriptor(L,B):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(A,L,B,j);else for(var We=A.length-1;We>=0;We--)(ce=A[We])&&(W=(ee<3?ce(W):ee>3?ce(L,B,W):ce(L,B))||W);return ee>3&&W&&Object.defineProperty(L,B,W),W}function z(A,L){return function(B,j){L(B,j,A)}}function T(A,L){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(A,L)}function D(A,L,B,j){return new(B||(B=Promise))(function(W,ce){function We(wt){try{be(j.next(wt))}catch(bt){ce(bt)}}function ut(wt){try{be(j.throw(wt))}catch(bt){ce(bt)}}function be(wt){wt.done?W(wt.value):function ee(W){return W instanceof B?W:new B(function(ce){ce(W)})}(wt.value).then(We,ut)}be((j=j.apply(A,L||[])).next())})}function F(A,L){var j,ee,W,ce,B={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ce={next:We(0),throw:We(1),return:We(2)},"function"==typeof Symbol&&(ce[Symbol.iterator]=function(){return this}),ce;function We(be){return function(wt){return function ut(be){if(j)throw new TypeError("Generator is already executing.");for(;B;)try{if(j=1,ee&&(W=2&be[0]?ee.return:be[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,be[1])).done)return W;switch(ee=0,W&&(be=[2&be[0],W.value]),be[0]){case 0:case 1:W=be;break;case 4:return B.label++,{value:be[1],done:!1};case 5:B.label++,ee=be[1],be=[0];continue;case 7:be=B.ops.pop(),B.trys.pop();continue;default:if(!(W=(W=B.trys).length>0&&W[W.length-1])&&(6===be[0]||2===be[0])){B=0;continue}if(3===be[0]&&(!W||be[1]>W[0]&&be[1]<W[3])){B.label=be[1];break}if(6===be[0]&&B.label<W[1]){B.label=W[1],W=be;break}if(W&&B.label<W[2]){B.label=W[2],B.ops.push(be);break}W[2]&&B.ops.pop(),B.trys.pop();continue}be=L.call(A,B)}catch(wt){be=[6,wt],ee=0}finally{j=W=0}if(5&be[0])throw be[1];return{value:be[0]?be[1]:void 0,done:!0}}([be,wt])}}}function Z(A,L,B,j){void 0===j&&(j=B),A[j]=L[B]}function Y(A,L){for(var B in A)"default"!==B&&!L.hasOwnProperty(B)&&(L[B]=A[B])}function ie(A){var L="function"==typeof Symbol&&Symbol.iterator,B=L&&A[L],j=0;if(B)return B.call(A);if(A&&"number"==typeof A.length)return{next:function(){return A&&j>=A.length&&(A=void 0),{value:A&&A[j++],done:!A}}};throw new TypeError(L?"Object is not iterable.":"Symbol.iterator is not defined.")}function me(A,L){var B="function"==typeof Symbol&&A[Symbol.iterator];if(!B)return A;var ee,ce,j=B.call(A),W=[];try{for(;(void 0===L||L-- >0)&&!(ee=j.next()).done;)W.push(ee.value)}catch(We){ce={error:We}}finally{try{ee&&!ee.done&&(B=j.return)&&B.call(j)}finally{if(ce)throw ce.error}}return W}function se(){for(var A=[],L=0;L<arguments.length;L++)A=A.concat(me(arguments[L]));return A}function _e(){for(var A=0,L=0,B=arguments.length;L<B;L++)A+=arguments[L].length;var j=Array(A),ee=0;for(L=0;L<B;L++)for(var W=arguments[L],ce=0,We=W.length;ce<We;ce++,ee++)j[ee]=W[ce];return j}function Me(A){return this instanceof Me?(this.v=A,this):new Me(A)}function Ne(A,L,B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,j=B.apply(A,L||[]),W=[];return ee={},ce("next"),ce("throw"),ce("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ce(Ke){j[Ke]&&(ee[Ke]=function(xt){return new Promise(function(vn,zt){W.push([Ke,xt,vn,zt])>1||We(Ke,xt)})})}function We(Ke,xt){try{!function ut(Ke){Ke.value instanceof Me?Promise.resolve(Ke.value.v).then(be,wt):bt(W[0][2],Ke)}(j[Ke](xt))}catch(vn){bt(W[0][3],vn)}}function be(Ke){We("next",Ke)}function wt(Ke){We("throw",Ke)}function bt(Ke,xt){Ke(xt),W.shift(),W.length&&We(W[0][0],W[0][1])}}function Ze(A){var L,B;return L={},j("next"),j("throw",function(ee){throw ee}),j("return"),L[Symbol.iterator]=function(){return this},L;function j(ee,W){L[ee]=A[ee]?function(ce){return(B=!B)?{value:Me(A[ee](ce)),done:"return"===ee}:W?W(ce):ce}:W}}function je(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B,L=A[Symbol.asyncIterator];return L?L.call(A):(A=ie(A),B={},j("next"),j("throw"),j("return"),B[Symbol.asyncIterator]=function(){return this},B);function j(W){B[W]=A[W]&&function(ce){return new Promise(function(We,ut){!function ee(W,ce,We,ut){Promise.resolve(ut).then(function(be){W({value:be,done:We})},ce)}(We,ut,(ce=A[W](ce)).done,ce.value)})}}}function Ee(A,L){return Object.defineProperty?Object.defineProperty(A,"raw",{value:L}):A.raw=L,A}function Je(A){if(A&&A.__esModule)return A;var L={};if(null!=A)for(var B in A)Object.hasOwnProperty.call(A,B)&&(L[B]=A[B]);return L.default=A,L}function nt(A){return A&&A.__esModule?A:{default:A}}function Ct(A,L){if(!L.has(A))throw new TypeError("attempted to get private field on non-instance");return L.get(A)}function Ue(A,L,B){if(!L.has(A))throw new TypeError("attempted to set private field on non-instance");return L.set(A,B),B}},4806:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{__assign:()=>m,__asyncDelegator:()=>Ze,__asyncGenerator:()=>Ne,__asyncValues:()=>je,__await:()=>Me,__awaiter:()=>D,__classPrivateFieldGet:()=>Ct,__classPrivateFieldSet:()=>Ue,__createBinding:()=>Z,__decorate:()=>G,__exportStar:()=>Y,__extends:()=>X,__generator:()=>F,__importDefault:()=>nt,__importStar:()=>Je,__makeTemplateObject:()=>Ee,__metadata:()=>T,__param:()=>z,__read:()=>me,__rest:()=>$,__spread:()=>se,__spreadArrays:()=>_e,__values:()=>ie});var V=function(A,L){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,j){B.__proto__=j}||function(B,j){for(var ee in j)j.hasOwnProperty(ee)&&(B[ee]=j[ee])})(A,L)};function X(A,L){function B(){this.constructor=A}V(A,L),A.prototype=null===L?Object.create(L):(B.prototype=L.prototype,new B)}var m=function(){return m=Object.assign||function(L){for(var B,j=1,ee=arguments.length;j<ee;j++)for(var W in B=arguments[j])Object.prototype.hasOwnProperty.call(B,W)&&(L[W]=B[W]);return L},m.apply(this,arguments)};function $(A,L){var B={};for(var j in A)Object.prototype.hasOwnProperty.call(A,j)&&L.indexOf(j)<0&&(B[j]=A[j]);if(null!=A&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(j=Object.getOwnPropertySymbols(A);ee<j.length;ee++)L.indexOf(j[ee])<0&&Object.prototype.propertyIsEnumerable.call(A,j[ee])&&(B[j[ee]]=A[j[ee]])}return B}function G(A,L,B,j){var ce,ee=arguments.length,W=ee<3?L:null===j?j=Object.getOwnPropertyDescriptor(L,B):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(A,L,B,j);else for(var We=A.length-1;We>=0;We--)(ce=A[We])&&(W=(ee<3?ce(W):ee>3?ce(L,B,W):ce(L,B))||W);return ee>3&&W&&Object.defineProperty(L,B,W),W}function z(A,L){return function(B,j){L(B,j,A)}}function T(A,L){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(A,L)}function D(A,L,B,j){return new(B||(B=Promise))(function(W,ce){function We(wt){try{be(j.next(wt))}catch(bt){ce(bt)}}function ut(wt){try{be(j.throw(wt))}catch(bt){ce(bt)}}function be(wt){wt.done?W(wt.value):function ee(W){return W instanceof B?W:new B(function(ce){ce(W)})}(wt.value).then(We,ut)}be((j=j.apply(A,L||[])).next())})}function F(A,L){var j,ee,W,ce,B={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ce={next:We(0),throw:We(1),return:We(2)},"function"==typeof Symbol&&(ce[Symbol.iterator]=function(){return this}),ce;function We(be){return function(wt){return function ut(be){if(j)throw new TypeError("Generator is already executing.");for(;B;)try{if(j=1,ee&&(W=2&be[0]?ee.return:be[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,be[1])).done)return W;switch(ee=0,W&&(be=[2&be[0],W.value]),be[0]){case 0:case 1:W=be;break;case 4:return B.label++,{value:be[1],done:!1};case 5:B.label++,ee=be[1],be=[0];continue;case 7:be=B.ops.pop(),B.trys.pop();continue;default:if(!(W=(W=B.trys).length>0&&W[W.length-1])&&(6===be[0]||2===be[0])){B=0;continue}if(3===be[0]&&(!W||be[1]>W[0]&&be[1]<W[3])){B.label=be[1];break}if(6===be[0]&&B.label<W[1]){B.label=W[1],W=be;break}if(W&&B.label<W[2]){B.label=W[2],B.ops.push(be);break}W[2]&&B.ops.pop(),B.trys.pop();continue}be=L.call(A,B)}catch(wt){be=[6,wt],ee=0}finally{j=W=0}if(5&be[0])throw be[1];return{value:be[0]?be[1]:void 0,done:!0}}([be,wt])}}}function Z(A,L,B,j){void 0===j&&(j=B),A[j]=L[B]}function Y(A,L){for(var B in A)"default"!==B&&!L.hasOwnProperty(B)&&(L[B]=A[B])}function ie(A){var L="function"==typeof Symbol&&Symbol.iterator,B=L&&A[L],j=0;if(B)return B.call(A);if(A&&"number"==typeof A.length)return{next:function(){return A&&j>=A.length&&(A=void 0),{value:A&&A[j++],done:!A}}};throw new TypeError(L?"Object is not iterable.":"Symbol.iterator is not defined.")}function me(A,L){var B="function"==typeof Symbol&&A[Symbol.iterator];if(!B)return A;var ee,ce,j=B.call(A),W=[];try{for(;(void 0===L||L-- >0)&&!(ee=j.next()).done;)W.push(ee.value)}catch(We){ce={error:We}}finally{try{ee&&!ee.done&&(B=j.return)&&B.call(j)}finally{if(ce)throw ce.error}}return W}function se(){for(var A=[],L=0;L<arguments.length;L++)A=A.concat(me(arguments[L]));return A}function _e(){for(var A=0,L=0,B=arguments.length;L<B;L++)A+=arguments[L].length;var j=Array(A),ee=0;for(L=0;L<B;L++)for(var W=arguments[L],ce=0,We=W.length;ce<We;ce++,ee++)j[ee]=W[ce];return j}function Me(A){return this instanceof Me?(this.v=A,this):new Me(A)}function Ne(A,L,B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,j=B.apply(A,L||[]),W=[];return ee={},ce("next"),ce("throw"),ce("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ce(Ke){j[Ke]&&(ee[Ke]=function(xt){return new Promise(function(vn,zt){W.push([Ke,xt,vn,zt])>1||We(Ke,xt)})})}function We(Ke,xt){try{!function ut(Ke){Ke.value instanceof Me?Promise.resolve(Ke.value.v).then(be,wt):bt(W[0][2],Ke)}(j[Ke](xt))}catch(vn){bt(W[0][3],vn)}}function be(Ke){We("next",Ke)}function wt(Ke){We("throw",Ke)}function bt(Ke,xt){Ke(xt),W.shift(),W.length&&We(W[0][0],W[0][1])}}function Ze(A){var L,B;return L={},j("next"),j("throw",function(ee){throw ee}),j("return"),L[Symbol.iterator]=function(){return this},L;function j(ee,W){L[ee]=A[ee]?function(ce){return(B=!B)?{value:Me(A[ee](ce)),done:"return"===ee}:W?W(ce):ce}:W}}function je(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B,L=A[Symbol.asyncIterator];return L?L.call(A):(A=ie(A),B={},j("next"),j("throw"),j("return"),B[Symbol.asyncIterator]=function(){return this},B);function j(W){B[W]=A[W]&&function(ce){return new Promise(function(We,ut){!function ee(W,ce,We,ut){Promise.resolve(ut).then(function(be){W({value:be,done:We})},ce)}(We,ut,(ce=A[W](ce)).done,ce.value)})}}}function Ee(A,L){return Object.defineProperty?Object.defineProperty(A,"raw",{value:L}):A.raw=L,A}function Je(A){if(A&&A.__esModule)return A;var L={};if(null!=A)for(var B in A)Object.hasOwnProperty.call(A,B)&&(L[B]=A[B]);return L.default=A,L}function nt(A){return A&&A.__esModule?A:{default:A}}function Ct(A,L){if(!L.has(A))throw new TypeError("attempted to get private field on non-instance");return L.get(A)}function Ue(A,L,B){if(!L.has(A))throw new TypeError("attempted to set private field on non-instance");return L.set(A,B),B}},5955:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{__assign:()=>m,__asyncDelegator:()=>Ze,__asyncGenerator:()=>Ne,__asyncValues:()=>je,__await:()=>Me,__awaiter:()=>D,__classPrivateFieldGet:()=>Ct,__classPrivateFieldSet:()=>Ue,__createBinding:()=>Z,__decorate:()=>G,__exportStar:()=>Y,__extends:()=>X,__generator:()=>F,__importDefault:()=>nt,__importStar:()=>Je,__makeTemplateObject:()=>Ee,__metadata:()=>T,__param:()=>z,__read:()=>me,__rest:()=>$,__spread:()=>se,__spreadArrays:()=>_e,__values:()=>ie});var V=function(A,L){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,j){B.__proto__=j}||function(B,j){for(var ee in j)j.hasOwnProperty(ee)&&(B[ee]=j[ee])})(A,L)};function X(A,L){function B(){this.constructor=A}V(A,L),A.prototype=null===L?Object.create(L):(B.prototype=L.prototype,new B)}var m=function(){return m=Object.assign||function(L){for(var B,j=1,ee=arguments.length;j<ee;j++)for(var W in B=arguments[j])Object.prototype.hasOwnProperty.call(B,W)&&(L[W]=B[W]);return L},m.apply(this,arguments)};function $(A,L){var B={};for(var j in A)Object.prototype.hasOwnProperty.call(A,j)&&L.indexOf(j)<0&&(B[j]=A[j]);if(null!=A&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(j=Object.getOwnPropertySymbols(A);ee<j.length;ee++)L.indexOf(j[ee])<0&&Object.prototype.propertyIsEnumerable.call(A,j[ee])&&(B[j[ee]]=A[j[ee]])}return B}function G(A,L,B,j){var ce,ee=arguments.length,W=ee<3?L:null===j?j=Object.getOwnPropertyDescriptor(L,B):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(A,L,B,j);else for(var We=A.length-1;We>=0;We--)(ce=A[We])&&(W=(ee<3?ce(W):ee>3?ce(L,B,W):ce(L,B))||W);return ee>3&&W&&Object.defineProperty(L,B,W),W}function z(A,L){return function(B,j){L(B,j,A)}}function T(A,L){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(A,L)}function D(A,L,B,j){return new(B||(B=Promise))(function(W,ce){function We(wt){try{be(j.next(wt))}catch(bt){ce(bt)}}function ut(wt){try{be(j.throw(wt))}catch(bt){ce(bt)}}function be(wt){wt.done?W(wt.value):function ee(W){return W instanceof B?W:new B(function(ce){ce(W)})}(wt.value).then(We,ut)}be((j=j.apply(A,L||[])).next())})}function F(A,L){var j,ee,W,ce,B={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ce={next:We(0),throw:We(1),return:We(2)},"function"==typeof Symbol&&(ce[Symbol.iterator]=function(){return this}),ce;function We(be){return function(wt){return function ut(be){if(j)throw new TypeError("Generator is already executing.");for(;B;)try{if(j=1,ee&&(W=2&be[0]?ee.return:be[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,be[1])).done)return W;switch(ee=0,W&&(be=[2&be[0],W.value]),be[0]){case 0:case 1:W=be;break;case 4:return B.label++,{value:be[1],done:!1};case 5:B.label++,ee=be[1],be=[0];continue;case 7:be=B.ops.pop(),B.trys.pop();continue;default:if(!(W=(W=B.trys).length>0&&W[W.length-1])&&(6===be[0]||2===be[0])){B=0;continue}if(3===be[0]&&(!W||be[1]>W[0]&&be[1]<W[3])){B.label=be[1];break}if(6===be[0]&&B.label<W[1]){B.label=W[1],W=be;break}if(W&&B.label<W[2]){B.label=W[2],B.ops.push(be);break}W[2]&&B.ops.pop(),B.trys.pop();continue}be=L.call(A,B)}catch(wt){be=[6,wt],ee=0}finally{j=W=0}if(5&be[0])throw be[1];return{value:be[0]?be[1]:void 0,done:!0}}([be,wt])}}}function Z(A,L,B,j){void 0===j&&(j=B),A[j]=L[B]}function Y(A,L){for(var B in A)"default"!==B&&!L.hasOwnProperty(B)&&(L[B]=A[B])}function ie(A){var L="function"==typeof Symbol&&Symbol.iterator,B=L&&A[L],j=0;if(B)return B.call(A);if(A&&"number"==typeof A.length)return{next:function(){return A&&j>=A.length&&(A=void 0),{value:A&&A[j++],done:!A}}};throw new TypeError(L?"Object is not iterable.":"Symbol.iterator is not defined.")}function me(A,L){var B="function"==typeof Symbol&&A[Symbol.iterator];if(!B)return A;var ee,ce,j=B.call(A),W=[];try{for(;(void 0===L||L-- >0)&&!(ee=j.next()).done;)W.push(ee.value)}catch(We){ce={error:We}}finally{try{ee&&!ee.done&&(B=j.return)&&B.call(j)}finally{if(ce)throw ce.error}}return W}function se(){for(var A=[],L=0;L<arguments.length;L++)A=A.concat(me(arguments[L]));return A}function _e(){for(var A=0,L=0,B=arguments.length;L<B;L++)A+=arguments[L].length;var j=Array(A),ee=0;for(L=0;L<B;L++)for(var W=arguments[L],ce=0,We=W.length;ce<We;ce++,ee++)j[ee]=W[ce];return j}function Me(A){return this instanceof Me?(this.v=A,this):new Me(A)}function Ne(A,L,B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,j=B.apply(A,L||[]),W=[];return ee={},ce("next"),ce("throw"),ce("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ce(Ke){j[Ke]&&(ee[Ke]=function(xt){return new Promise(function(vn,zt){W.push([Ke,xt,vn,zt])>1||We(Ke,xt)})})}function We(Ke,xt){try{!function ut(Ke){Ke.value instanceof Me?Promise.resolve(Ke.value.v).then(be,wt):bt(W[0][2],Ke)}(j[Ke](xt))}catch(vn){bt(W[0][3],vn)}}function be(Ke){We("next",Ke)}function wt(Ke){We("throw",Ke)}function bt(Ke,xt){Ke(xt),W.shift(),W.length&&We(W[0][0],W[0][1])}}function Ze(A){var L,B;return L={},j("next"),j("throw",function(ee){throw ee}),j("return"),L[Symbol.iterator]=function(){return this},L;function j(ee,W){L[ee]=A[ee]?function(ce){return(B=!B)?{value:Me(A[ee](ce)),done:"return"===ee}:W?W(ce):ce}:W}}function je(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B,L=A[Symbol.asyncIterator];return L?L.call(A):(A=ie(A),B={},j("next"),j("throw"),j("return"),B[Symbol.asyncIterator]=function(){return this},B);function j(W){B[W]=A[W]&&function(ce){return new Promise(function(We,ut){!function ee(W,ce,We,ut){Promise.resolve(ut).then(function(be){W({value:be,done:We})},ce)}(We,ut,(ce=A[W](ce)).done,ce.value)})}}}function Ee(A,L){return Object.defineProperty?Object.defineProperty(A,"raw",{value:L}):A.raw=L,A}function Je(A){if(A&&A.__esModule)return A;var L={};if(null!=A)for(var B in A)Object.hasOwnProperty.call(A,B)&&(L[B]=A[B]);return L.default=A,L}function nt(A){return A&&A.__esModule?A:{default:A}}function Ct(A,L){if(!L.has(A))throw new TypeError("attempted to get private field on non-instance");return L.get(A)}function Ue(A,L,B){if(!L.has(A))throw new TypeError("attempted to set private field on non-instance");return L.set(A,B),B}},2960:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{__assign:()=>m,__asyncDelegator:()=>Ze,__asyncGenerator:()=>Ne,__asyncValues:()=>je,__await:()=>Me,__awaiter:()=>D,__classPrivateFieldGet:()=>Ct,__classPrivateFieldSet:()=>Ue,__createBinding:()=>Z,__decorate:()=>G,__exportStar:()=>Y,__extends:()=>X,__generator:()=>F,__importDefault:()=>nt,__importStar:()=>Je,__makeTemplateObject:()=>Ee,__metadata:()=>T,__param:()=>z,__read:()=>me,__rest:()=>$,__spread:()=>se,__spreadArrays:()=>_e,__values:()=>ie});var V=function(A,L){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,j){B.__proto__=j}||function(B,j){for(var ee in j)j.hasOwnProperty(ee)&&(B[ee]=j[ee])})(A,L)};function X(A,L){function B(){this.constructor=A}V(A,L),A.prototype=null===L?Object.create(L):(B.prototype=L.prototype,new B)}var m=function(){return m=Object.assign||function(L){for(var B,j=1,ee=arguments.length;j<ee;j++)for(var W in B=arguments[j])Object.prototype.hasOwnProperty.call(B,W)&&(L[W]=B[W]);return L},m.apply(this,arguments)};function $(A,L){var B={};for(var j in A)Object.prototype.hasOwnProperty.call(A,j)&&L.indexOf(j)<0&&(B[j]=A[j]);if(null!=A&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(j=Object.getOwnPropertySymbols(A);ee<j.length;ee++)L.indexOf(j[ee])<0&&Object.prototype.propertyIsEnumerable.call(A,j[ee])&&(B[j[ee]]=A[j[ee]])}return B}function G(A,L,B,j){var ce,ee=arguments.length,W=ee<3?L:null===j?j=Object.getOwnPropertyDescriptor(L,B):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(A,L,B,j);else for(var We=A.length-1;We>=0;We--)(ce=A[We])&&(W=(ee<3?ce(W):ee>3?ce(L,B,W):ce(L,B))||W);return ee>3&&W&&Object.defineProperty(L,B,W),W}function z(A,L){return function(B,j){L(B,j,A)}}function T(A,L){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(A,L)}function D(A,L,B,j){return new(B||(B=Promise))(function(W,ce){function We(wt){try{be(j.next(wt))}catch(bt){ce(bt)}}function ut(wt){try{be(j.throw(wt))}catch(bt){ce(bt)}}function be(wt){wt.done?W(wt.value):function ee(W){return W instanceof B?W:new B(function(ce){ce(W)})}(wt.value).then(We,ut)}be((j=j.apply(A,L||[])).next())})}function F(A,L){var j,ee,W,ce,B={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ce={next:We(0),throw:We(1),return:We(2)},"function"==typeof Symbol&&(ce[Symbol.iterator]=function(){return this}),ce;function We(be){return function(wt){return function ut(be){if(j)throw new TypeError("Generator is already executing.");for(;B;)try{if(j=1,ee&&(W=2&be[0]?ee.return:be[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,be[1])).done)return W;switch(ee=0,W&&(be=[2&be[0],W.value]),be[0]){case 0:case 1:W=be;break;case 4:return B.label++,{value:be[1],done:!1};case 5:B.label++,ee=be[1],be=[0];continue;case 7:be=B.ops.pop(),B.trys.pop();continue;default:if(!(W=(W=B.trys).length>0&&W[W.length-1])&&(6===be[0]||2===be[0])){B=0;continue}if(3===be[0]&&(!W||be[1]>W[0]&&be[1]<W[3])){B.label=be[1];break}if(6===be[0]&&B.label<W[1]){B.label=W[1],W=be;break}if(W&&B.label<W[2]){B.label=W[2],B.ops.push(be);break}W[2]&&B.ops.pop(),B.trys.pop();continue}be=L.call(A,B)}catch(wt){be=[6,wt],ee=0}finally{j=W=0}if(5&be[0])throw be[1];return{value:be[0]?be[1]:void 0,done:!0}}([be,wt])}}}function Z(A,L,B,j){void 0===j&&(j=B),A[j]=L[B]}function Y(A,L){for(var B in A)"default"!==B&&!L.hasOwnProperty(B)&&(L[B]=A[B])}function ie(A){var L="function"==typeof Symbol&&Symbol.iterator,B=L&&A[L],j=0;if(B)return B.call(A);if(A&&"number"==typeof A.length)return{next:function(){return A&&j>=A.length&&(A=void 0),{value:A&&A[j++],done:!A}}};throw new TypeError(L?"Object is not iterable.":"Symbol.iterator is not defined.")}function me(A,L){var B="function"==typeof Symbol&&A[Symbol.iterator];if(!B)return A;var ee,ce,j=B.call(A),W=[];try{for(;(void 0===L||L-- >0)&&!(ee=j.next()).done;)W.push(ee.value)}catch(We){ce={error:We}}finally{try{ee&&!ee.done&&(B=j.return)&&B.call(j)}finally{if(ce)throw ce.error}}return W}function se(){for(var A=[],L=0;L<arguments.length;L++)A=A.concat(me(arguments[L]));return A}function _e(){for(var A=0,L=0,B=arguments.length;L<B;L++)A+=arguments[L].length;var j=Array(A),ee=0;for(L=0;L<B;L++)for(var W=arguments[L],ce=0,We=W.length;ce<We;ce++,ee++)j[ee]=W[ce];return j}function Me(A){return this instanceof Me?(this.v=A,this):new Me(A)}function Ne(A,L,B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,j=B.apply(A,L||[]),W=[];return ee={},ce("next"),ce("throw"),ce("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ce(Ke){j[Ke]&&(ee[Ke]=function(xt){return new Promise(function(vn,zt){W.push([Ke,xt,vn,zt])>1||We(Ke,xt)})})}function We(Ke,xt){try{!function ut(Ke){Ke.value instanceof Me?Promise.resolve(Ke.value.v).then(be,wt):bt(W[0][2],Ke)}(j[Ke](xt))}catch(vn){bt(W[0][3],vn)}}function be(Ke){We("next",Ke)}function wt(Ke){We("throw",Ke)}function bt(Ke,xt){Ke(xt),W.shift(),W.length&&We(W[0][0],W[0][1])}}function Ze(A){var L,B;return L={},j("next"),j("throw",function(ee){throw ee}),j("return"),L[Symbol.iterator]=function(){return this},L;function j(ee,W){L[ee]=A[ee]?function(ce){return(B=!B)?{value:Me(A[ee](ce)),done:"return"===ee}:W?W(ce):ce}:W}}function je(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B,L=A[Symbol.asyncIterator];return L?L.call(A):(A=ie(A),B={},j("next"),j("throw"),j("return"),B[Symbol.asyncIterator]=function(){return this},B);function j(W){B[W]=A[W]&&function(ce){return new Promise(function(We,ut){!function ee(W,ce,We,ut){Promise.resolve(ut).then(function(be){W({value:be,done:We})},ce)}(We,ut,(ce=A[W](ce)).done,ce.value)})}}}function Ee(A,L){return Object.defineProperty?Object.defineProperty(A,"raw",{value:L}):A.raw=L,A}function Je(A){if(A&&A.__esModule)return A;var L={};if(null!=A)for(var B in A)Object.hasOwnProperty.call(A,B)&&(L[B]=A[B]);return L.default=A,L}function nt(A){return A&&A.__esModule?A:{default:A}}function Ct(A,L){if(!L.has(A))throw new TypeError("attempted to get private field on non-instance");return L.get(A)}function Ue(A,L,B){if(!L.has(A))throw new TypeError("attempted to set private field on non-instance");return L.set(A,B),B}},9077:(Ae,J,U)=>{"use strict";U.r(J),U.d(J,{__assign:()=>m,__asyncDelegator:()=>Ze,__asyncGenerator:()=>Ne,__asyncValues:()=>je,__await:()=>Me,__awaiter:()=>D,__classPrivateFieldGet:()=>Ct,__classPrivateFieldSet:()=>Ue,__createBinding:()=>Z,__decorate:()=>G,__exportStar:()=>Y,__extends:()=>X,__generator:()=>F,__importDefault:()=>nt,__importStar:()=>Je,__makeTemplateObject:()=>Ee,__metadata:()=>T,__param:()=>z,__read:()=>me,__rest:()=>$,__spread:()=>se,__spreadArrays:()=>_e,__values:()=>ie});var V=function(A,L){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,j){B.__proto__=j}||function(B,j){for(var ee in j)j.hasOwnProperty(ee)&&(B[ee]=j[ee])})(A,L)};function X(A,L){function B(){this.constructor=A}V(A,L),A.prototype=null===L?Object.create(L):(B.prototype=L.prototype,new B)}var m=function(){return m=Object.assign||function(L){for(var B,j=1,ee=arguments.length;j<ee;j++)for(var W in B=arguments[j])Object.prototype.hasOwnProperty.call(B,W)&&(L[W]=B[W]);return L},m.apply(this,arguments)};function $(A,L){var B={};for(var j in A)Object.prototype.hasOwnProperty.call(A,j)&&L.indexOf(j)<0&&(B[j]=A[j]);if(null!=A&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(j=Object.getOwnPropertySymbols(A);ee<j.length;ee++)L.indexOf(j[ee])<0&&Object.prototype.propertyIsEnumerable.call(A,j[ee])&&(B[j[ee]]=A[j[ee]])}return B}function G(A,L,B,j){var ce,ee=arguments.length,W=ee<3?L:null===j?j=Object.getOwnPropertyDescriptor(L,B):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(A,L,B,j);else for(var We=A.length-1;We>=0;We--)(ce=A[We])&&(W=(ee<3?ce(W):ee>3?ce(L,B,W):ce(L,B))||W);return ee>3&&W&&Object.defineProperty(L,B,W),W}function z(A,L){return function(B,j){L(B,j,A)}}function T(A,L){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(A,L)}function D(A,L,B,j){return new(B||(B=Promise))(function(W,ce){function We(wt){try{be(j.next(wt))}catch(bt){ce(bt)}}function ut(wt){try{be(j.throw(wt))}catch(bt){ce(bt)}}function be(wt){wt.done?W(wt.value):function ee(W){return W instanceof B?W:new B(function(ce){ce(W)})}(wt.value).then(We,ut)}be((j=j.apply(A,L||[])).next())})}function F(A,L){var j,ee,W,ce,B={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ce={next:We(0),throw:We(1),return:We(2)},"function"==typeof Symbol&&(ce[Symbol.iterator]=function(){return this}),ce;function We(be){return function(wt){return function ut(be){if(j)throw new TypeError("Generator is already executing.");for(;B;)try{if(j=1,ee&&(W=2&be[0]?ee.return:be[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,be[1])).done)return W;switch(ee=0,W&&(be=[2&be[0],W.value]),be[0]){case 0:case 1:W=be;break;case 4:return B.label++,{value:be[1],done:!1};case 5:B.label++,ee=be[1],be=[0];continue;case 7:be=B.ops.pop(),B.trys.pop();continue;default:if(!(W=(W=B.trys).length>0&&W[W.length-1])&&(6===be[0]||2===be[0])){B=0;continue}if(3===be[0]&&(!W||be[1]>W[0]&&be[1]<W[3])){B.label=be[1];break}if(6===be[0]&&B.label<W[1]){B.label=W[1],W=be;break}if(W&&B.label<W[2]){B.label=W[2],B.ops.push(be);break}W[2]&&B.ops.pop(),B.trys.pop();continue}be=L.call(A,B)}catch(wt){be=[6,wt],ee=0}finally{j=W=0}if(5&be[0])throw be[1];return{value:be[0]?be[1]:void 0,done:!0}}([be,wt])}}}function Z(A,L,B,j){void 0===j&&(j=B),A[j]=L[B]}function Y(A,L){for(var B in A)"default"!==B&&!L.hasOwnProperty(B)&&(L[B]=A[B])}function ie(A){var L="function"==typeof Symbol&&Symbol.iterator,B=L&&A[L],j=0;if(B)return B.call(A);if(A&&"number"==typeof A.length)return{next:function(){return A&&j>=A.length&&(A=void 0),{value:A&&A[j++],done:!A}}};throw new TypeError(L?"Object is not iterable.":"Symbol.iterator is not defined.")}function me(A,L){var B="function"==typeof Symbol&&A[Symbol.iterator];if(!B)return A;var ee,ce,j=B.call(A),W=[];try{for(;(void 0===L||L-- >0)&&!(ee=j.next()).done;)W.push(ee.value)}catch(We){ce={error:We}}finally{try{ee&&!ee.done&&(B=j.return)&&B.call(j)}finally{if(ce)throw ce.error}}return W}function se(){for(var A=[],L=0;L<arguments.length;L++)A=A.concat(me(arguments[L]));return A}function _e(){for(var A=0,L=0,B=arguments.length;L<B;L++)A+=arguments[L].length;var j=Array(A),ee=0;for(L=0;L<B;L++)for(var W=arguments[L],ce=0,We=W.length;ce<We;ce++,ee++)j[ee]=W[ce];return j}function Me(A){return this instanceof Me?(this.v=A,this):new Me(A)}function Ne(A,L,B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,j=B.apply(A,L||[]),W=[];return ee={},ce("next"),ce("throw"),ce("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ce(Ke){j[Ke]&&(ee[Ke]=function(xt){return new Promise(function(vn,zt){W.push([Ke,xt,vn,zt])>1||We(Ke,xt)})})}function We(Ke,xt){try{!function ut(Ke){Ke.value instanceof Me?Promise.resolve(Ke.value.v).then(be,wt):bt(W[0][2],Ke)}(j[Ke](xt))}catch(vn){bt(W[0][3],vn)}}function be(Ke){We("next",Ke)}function wt(Ke){We("throw",Ke)}function bt(Ke,xt){Ke(xt),W.shift(),W.length&&We(W[0][0],W[0][1])}}function Ze(A){var L,B;return L={},j("next"),j("throw",function(ee){throw ee}),j("return"),L[Symbol.iterator]=function(){return this},L;function j(ee,W){L[ee]=A[ee]?function(ce){return(B=!B)?{value:Me(A[ee](ce)),done:"return"===ee}:W?W(ce):ce}:W}}function je(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B,L=A[Symbol.asyncIterator];return L?L.call(A):(A=ie(A),B={},j("next"),j("throw"),j("return"),B[Symbol.asyncIterator]=function(){return this},B);function j(W){B[W]=A[W]&&function(ce){return new Promise(function(We,ut){!function ee(W,ce,We,ut){Promise.resolve(ut).then(function(be){W({value:be,done:We})},ce)}(We,ut,(ce=A[W](ce)).done,ce.value)})}}}function Ee(A,L){return Object.defineProperty?Object.defineProperty(A,"raw",{value:L}):A.raw=L,A}function Je(A){if(A&&A.__esModule)return A;var L={};if(null!=A)for(var B in A)Object.hasOwnProperty.call(A,B)&&(L[B]=A[B]);return L.default=A,L}function nt(A){return A&&A.__esModule?A:{default:A}}function Ct(A,L){if(!L.has(A))throw new TypeError("attempted to get private field on non-instance");return L.get(A)}function Ue(A,L,B){if(!L.has(A))throw new TypeError("attempted to set private field on non-instance");return L.set(A,B),B}}},Ae=>{Ae(Ae.s=3956)}]);
(self.webpackChunkangular_aws_map=self.webpackChunkangular_aws_map||[]).push([[179],{2242:function(Ee){Ee.exports=function(X){var O={};function L($){if(O[$])return O[$].exports;var v=O[$]={i:$,l:!1,exports:{}};return X[$].call(v.exports,v,v.exports,L),v.l=!0,v.exports}return L.m=X,L.c=O,L.d=function($,v,G){L.o($,v)||Object.defineProperty($,v,{enumerable:!0,get:G})},L.r=function($){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty($,Symbol.toStringTag,{value:"Module"}),Object.defineProperty($,"__esModule",{value:!0})},L.t=function($,v){if(1&v&&($=L($)),8&v||4&v&&"object"==typeof $&&$&&$.__esModule)return $;var G=Object.create(null);if(L.r(G),Object.defineProperty(G,"default",{enumerable:!0,value:$}),2&v&&"string"!=typeof $)for(var q in $)L.d(G,q,function(k){return $[k]}.bind(null,q));return G},L.n=function($){var v=$&&$.__esModule?function(){return $.default}:function(){return $};return L.d(v,"a",v),v},L.o=function($,v){return Object.prototype.hasOwnProperty.call($,v)},L.p="",L(L.s=0)}([function(X,O,L){"use strict";function $(v){for(var G in v)O.hasOwnProperty(G)||(O[G]=v[G])}Object.defineProperty(O,"__esModule",{value:!0}),$(L(1)),$(L(2)),$(L(3)),$(L(4)),$(L(5)),$(L(6)),$(L(7)),$(L(8)),$(L(9)),$(L(10)),$(L(11)),$(L(12)),$(L(13))},function(X,O,L){X.exports={a:"Anchor__a___1_Iz8"}},function(X,O,L){X.exports={button:"Button__button___vS7Mv",signInButton:"Button__signInButton___3bUH-",googleSignInButton:"Button__googleSignInButton___1YiCu",signInButtonIcon:"Button__signInButtonIcon___ihN75",auth0SignInButton:"Button__auth0SignInButton___znnCj",facebookSignInButton:"Button__facebookSignInButton___34Txh",amazonSignInButton:"Button__amazonSignInButton___2EMtl",oAuthSignInButton:"Button__oAuthSignInButton___3UGOl",signInButtonContent:"Button__signInButtonContent___xqTXJ"}},function(X,O,L){X.exports={formContainer:"Form__formContainer___1GA3x",formSection:"Form__formSection___1PPvW",formField:"Form__formField___38Ikl",formRow:"Form__formRow___2mwRs"}},function(X,O,L){X.exports={hint:"Hint__hint___2XngB"}},function(X,O,L){X.exports={input:"Input__input___3e_bf",inputLabel:"Input__inputLabel___3VF0S",label:"Input__label___23sO8",radio:"Input__radio___2hllK"}},function(X,O,L){X.exports={navBar:"Nav__navBar___xtCFA",navRight:"Nav__navRight___1QG2J",nav:"Nav__nav___2Dx2Y",navItem:"Nav__navItem___1LtFQ"}},function(X,O,L){X.exports={photoPickerButton:"PhotoPicker__photoPickerButton___2XdVn",photoPlaceholder:"PhotoPicker__photoPlaceholder___2JXO4",photoPlaceholderIcon:"PhotoPicker__photoPlaceholderIcon___3Et71"}},function(X,O,L){X.exports={container:"Section__container___3YYTG",actionRow:"Section__actionRow___2LWSU",sectionHeader:"Section__sectionHeader___2djyg",sectionHeaderHint:"Section__sectionHeaderHint___3Wxdc",sectionBody:"Section__sectionBody___ihqqd",sectionHeaderContent:"Section__sectionHeaderContent___1UCqa",sectionFooter:"Section__sectionFooter___1T54C",sectionFooterPrimaryContent:"Section__sectionFooterPrimaryContent___2r9ZX",sectionFooterSecondaryContent:"Section__sectionFooterSecondaryContent___Nj41Q"}},function(X,O,L){X.exports={selectInput:"SelectInput__selectInput___3efO4"}},function(X,O,L){X.exports={strike:"Strike__strike___1XV1b",strikeContent:"Strike__strikeContent___10gLb"}},function(X,O,L){X.exports={toast:"Toast__toast___XXr3v",toastClose:"Toast__toastClose___18lU4"}},function(X,O,L){X.exports={totpQrcode:"Totp__totpQrcode___1crLx"}},function(X,O,L){X.exports={sumerianSceneContainer:"XR__sumerianSceneContainer___3nVMt",sumerianScene:"XR__sumerianScene___2Tt7-",loadingOverlay:"XR__loadingOverlay___IbqcI",loadingContainer:"XR__loadingContainer___2Itxb",loadingLogo:"XR__loadingLogo___Ub7xQ",loadingSceneName:"XR__loadingSceneName___3__ne",loadingBar:"XR__loadingBar___2vcke",loadingBarFill:"XR__loadingBarFill___3M-D9",sceneErrorText:"XR__sceneErrorText___2y0tp",sceneBar:"XR__sceneBar___2ShrP",sceneName:"XR__sceneName___1ApHr",sceneActions:"XR__sceneActions___7plGs",actionButton:"XR__actionButton___2poIM",tooltip:"XR__tooltip___UYyhn",actionIcon:"XR__actionIcon___2qnd2",autoShowTooltip:"XR__autoShowTooltip___V1QH7"}}])},3050:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.AwsCrc32=void 0;var L=O(2717),$=O(7736),v=O(1979),G=function(){function q(){this.crc32=new v.Crc32}return q.prototype.update=function(k){(0,$.isEmptyData)(k)||this.crc32.update((0,$.convertToBuffer)(k))},q.prototype.digest=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(k){return[2,(0,$.numToUint8)(this.crc32.digest())]})})},q}();X.AwsCrc32=G},1979:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.AwsCrc32=X.Crc32=X.crc32=void 0;var L=O(2717),$=O(7736);X.crc32=function v(S){return(new G).update(S).digest()};var G=function(){function S(){this.checksum=4294967295}return S.prototype.update=function(M){var H,K;try{for(var J=(0,L.__values)(M),ie=J.next();!ie.done;ie=J.next())this.checksum=this.checksum>>>8^k[255&(this.checksum^ie.value)]}catch(ae){H={error:ae}}finally{try{ie&&!ie.done&&(K=J.return)&&K.call(J)}finally{if(H)throw H.error}}return this},S.prototype.digest=function(){return(4294967295^this.checksum)>>>0},S}();X.Crc32=G;var k=(0,$.uint32ArrayFrom)([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),I=O(3050);Object.defineProperty(X,"AwsCrc32",{enumerable:!0,get:function(){return I.AwsCrc32}})},4285:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0})},7487:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0})},9984:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0})},2093:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0})},4849:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.isMsWindow=void 0;var O=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];X.isMsWindow=function $(v){if(function L(v){return"MSInputMethodContext"in v&&"msCrypto"in v}(v)&&void 0!==v.msCrypto.subtle){var G=v.msCrypto,q=G.getRandomValues,k=G.subtle;return O.map(function(I){return k[I]}).concat(q).every(function(I){return"function"==typeof I})}return!1}},1806:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});var L=O(1980);L.__exportStar(O(4285),X),L.__exportStar(O(7487),X),L.__exportStar(O(9984),X),L.__exportStar(O(2093),X),L.__exportStar(O(4849),X)},9760:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.EMPTY_DATA_SHA_256=X.SHA_256_HMAC_ALGO=X.SHA_256_HASH=void 0,X.SHA_256_HASH={name:"SHA-256"},X.SHA_256_HMAC_ALGO={name:"HMAC",hash:X.SHA_256_HASH},X.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},7895:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.Sha256=void 0;var L=O(9612),$=O(5139),v=O(5979),G=O(710),q=O(1806),k=O(2521),I=function(){function S(M){this.hash=(0,G.supportsWebCrypto)((0,k.locateWindow)())?new $.Sha256(M):(0,q.isMsWindow)((0,k.locateWindow)())?new L.Sha256(M):new v.Sha256(M)}return S.prototype.update=function(M,H){this.hash.update(M,H)},S.prototype.digest=function(){return this.hash.digest()},S}();X.Sha256=I},9612:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.Sha256=void 0;var L=O(5200),$=O(9760),v=O(2622),G=O(2521),q=function(){function S(M){M?(this.operation=function k(S){return new Promise(function(M,H){var K=(0,G.locateWindow)().msCrypto.subtle.importKey("raw",I(S),$.SHA_256_HMAC_ALGO,!1,["sign"]);K.oncomplete=function(){K.result&&M(K.result),H(new Error("ImportKey completed without importing key."))},K.onerror=function(){H(new Error("ImportKey failed to import key."))}})}(M).then(function(H){return(0,G.locateWindow)().msCrypto.subtle.sign($.SHA_256_HMAC_ALGO,H)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,G.locateWindow)().msCrypto.subtle.digest("SHA-256"))}return S.prototype.update=function(M){var H=this;(0,L.isEmptyData)(M)||(this.operation=this.operation.then(function(K){return K.onerror=function(){H.operation=Promise.reject(new Error("Error encountered updating hash"))},K.process(I(M)),K}),this.operation.catch(function(){}))},S.prototype.digest=function(){return this.operation.then(function(M){return new Promise(function(H,K){M.onerror=function(){K(new Error("Error encountered finalizing hash"))},M.oncomplete=function(){M.result&&H(new Uint8Array(M.result)),K(new Error("Error encountered finalizing hash"))},M.finish()})})},S}();function I(S){return"string"==typeof S?(0,v.fromUtf8)(S):ArrayBuffer.isView(S)?new Uint8Array(S.buffer,S.byteOffset,S.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(S)}X.Sha256=q},9801:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.WebCryptoSha256=X.Ie11Sha256=void 0,(0,O(5789).__exportStar)(O(7895),X);var $=O(9612);Object.defineProperty(X,"Ie11Sha256",{enumerable:!0,get:function(){return $.Sha256}});var v=O(5139);Object.defineProperty(X,"WebCryptoSha256",{enumerable:!0,get:function(){return v.Sha256}})},5200:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.isEmptyData=void 0,X.isEmptyData=function O(L){return"string"==typeof L?0===L.length:0===L.byteLength}},5139:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.Sha256=void 0;var L=O(7736),$=O(9760),v=O(2521),G=function(){function q(k){this.toHash=new Uint8Array(0),void 0!==k&&(this.key=new Promise(function(I,S){(0,v.locateWindow)().crypto.subtle.importKey("raw",(0,L.convertToBuffer)(k),$.SHA_256_HMAC_ALGO,!1,["sign"]).then(I,S)}),this.key.catch(function(){}))}return q.prototype.update=function(k){if(!(0,L.isEmptyData)(k)){var I=(0,L.convertToBuffer)(k),S=new Uint8Array(this.toHash.byteLength+I.byteLength);S.set(this.toHash,0),S.set(I,this.toHash.byteLength),this.toHash=S}},q.prototype.digest=function(){var k=this;return this.key?this.key.then(function(I){return(0,v.locateWindow)().crypto.subtle.sign($.SHA_256_HMAC_ALGO,I,k.toHash).then(function(S){return new Uint8Array(S)})}):(0,L.isEmptyData)(this.toHash)?Promise.resolve($.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,v.locateWindow)().crypto.subtle.digest($.SHA_256_HASH,k.toHash)}).then(function(I){return Promise.resolve(new Uint8Array(I))})},q}();X.Sha256=G},6521:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.RawSha256=void 0;var L=O(154),$=function(){function v(){this.state=Int32Array.from(L.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return v.prototype.update=function(G){if(this.finished)throw new Error("Attempted to update an already finished hash.");var q=0,k=G.byteLength;if(this.bytesHashed+=k,8*this.bytesHashed>L.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;k>0;)this.buffer[this.bufferLength++]=G[q++],k--,this.bufferLength===L.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},v.prototype.digest=function(){if(!this.finished){var G=8*this.bytesHashed,q=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),k=this.bufferLength;if(q.setUint8(this.bufferLength++,128),k%L.BLOCK_SIZE>=L.BLOCK_SIZE-8){for(var I=this.bufferLength;I<L.BLOCK_SIZE;I++)q.setUint8(I,0);this.hashBuffer(),this.bufferLength=0}for(I=this.bufferLength;I<L.BLOCK_SIZE-8;I++)q.setUint8(I,0);q.setUint32(L.BLOCK_SIZE-8,Math.floor(G/4294967296),!0),q.setUint32(L.BLOCK_SIZE-4,G),this.hashBuffer(),this.finished=!0}var S=new Uint8Array(L.DIGEST_LENGTH);for(I=0;I<8;I++)S[4*I]=this.state[I]>>>24&255,S[4*I+1]=this.state[I]>>>16&255,S[4*I+2]=this.state[I]>>>8&255,S[4*I+3]=this.state[I]>>>0&255;return S},v.prototype.hashBuffer=function(){for(var q=this.buffer,k=this.state,I=k[0],S=k[1],M=k[2],H=k[3],K=k[4],J=k[5],ie=k[6],Q=k[7],ae=0;ae<L.BLOCK_SIZE;ae++){if(ae<16)this.temp[ae]=(255&q[4*ae])<<24|(255&q[4*ae+1])<<16|(255&q[4*ae+2])<<8|255&q[4*ae+3];else{var me=this.temp[ae-2];this.temp[ae]=(((me>>>17|me<<15)^(me>>>19|me<<13)^me>>>10)+this.temp[ae-7]|0)+((((me=this.temp[ae-15])>>>7|me<<25)^(me>>>18|me<<14)^me>>>3)+this.temp[ae-16]|0)}var fe=(((K>>>6|K<<26)^(K>>>11|K<<21)^(K>>>25|K<<7))+(K&J^~K&ie)|0)+(Q+(L.KEY[ae]+this.temp[ae]|0)|0)|0,pe=((I>>>2|I<<30)^(I>>>13|I<<19)^(I>>>22|I<<10))+(I&S^I&M^S&M)|0;Q=ie,ie=J,J=K,K=H+fe|0,H=M,M=S,S=I,I=fe+pe|0}k[0]+=I,k[1]+=S,k[2]+=M,k[3]+=H,k[4]+=K,k[5]+=J,k[6]+=ie,k[7]+=Q},v}();X.RawSha256=$},154:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.MAX_HASHABLE_LENGTH=X.INIT=X.KEY=X.DIGEST_LENGTH=X.BLOCK_SIZE=void 0,X.BLOCK_SIZE=64,X.DIGEST_LENGTH=32,X.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),X.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],X.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},5979:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),(0,O(5789).__exportStar)(O(9235),X)},9235:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.Sha256=void 0;var L=O(5789),$=O(154),v=O(6521),G=O(7736),q=function(){function I(S){if(this.hash=new v.RawSha256,S){this.outer=new v.RawSha256;var M=function k(I){var S=(0,G.convertToBuffer)(I);if(S.byteLength>$.BLOCK_SIZE){var M=new v.RawSha256;M.update(S),S=M.digest()}var H=new Uint8Array($.BLOCK_SIZE);return H.set(S),H}(S),H=new Uint8Array($.BLOCK_SIZE);H.set(M);for(var K=0;K<$.BLOCK_SIZE;K++)M[K]^=54,H[K]^=92;for(this.hash.update(M),this.outer.update(H),K=0;K<M.byteLength;K++)M[K]=0}}return I.prototype.update=function(S){if(!(0,G.isEmptyData)(S)&&!this.error)try{this.hash.update((0,G.convertToBuffer)(S))}catch(M){this.error=M}},I.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},I.prototype.digest=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(S){return[2,this.digestSync()]})})},I}();X.Sha256=q},6516:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});var L=O(4022),$=function(){function v(){this.state=Int32Array.from(L.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return v.prototype.update=function(G){if(this.finished)throw new Error("Attempted to update an already finished hash.");var q=0,k=G.byteLength;if(this.bytesHashed+=k,8*this.bytesHashed>L.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;k>0;)this.buffer[this.bufferLength++]=G[q++],k--,this.bufferLength===L.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},v.prototype.digest=function(){if(!this.finished){var G=8*this.bytesHashed,q=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),k=this.bufferLength;if(q.setUint8(this.bufferLength++,128),k%L.BLOCK_SIZE>=L.BLOCK_SIZE-8){for(var I=this.bufferLength;I<L.BLOCK_SIZE;I++)q.setUint8(I,0);this.hashBuffer(),this.bufferLength=0}for(I=this.bufferLength;I<L.BLOCK_SIZE-8;I++)q.setUint8(I,0);q.setUint32(L.BLOCK_SIZE-8,Math.floor(G/4294967296),!0),q.setUint32(L.BLOCK_SIZE-4,G),this.hashBuffer(),this.finished=!0}var S=new Uint8Array(L.DIGEST_LENGTH);for(I=0;I<8;I++)S[4*I]=this.state[I]>>>24&255,S[4*I+1]=this.state[I]>>>16&255,S[4*I+2]=this.state[I]>>>8&255,S[4*I+3]=this.state[I]>>>0&255;return S},v.prototype.hashBuffer=function(){for(var q=this.buffer,k=this.state,I=k[0],S=k[1],M=k[2],H=k[3],K=k[4],J=k[5],ie=k[6],Q=k[7],ae=0;ae<L.BLOCK_SIZE;ae++){if(ae<16)this.temp[ae]=(255&q[4*ae])<<24|(255&q[4*ae+1])<<16|(255&q[4*ae+2])<<8|255&q[4*ae+3];else{var me=this.temp[ae-2];this.temp[ae]=(((me>>>17|me<<15)^(me>>>19|me<<13)^me>>>10)+this.temp[ae-7]|0)+((((me=this.temp[ae-15])>>>7|me<<25)^(me>>>18|me<<14)^me>>>3)+this.temp[ae-16]|0)}var fe=(((K>>>6|K<<26)^(K>>>11|K<<21)^(K>>>25|K<<7))+(K&J^~K&ie)|0)+(Q+(L.KEY[ae]+this.temp[ae]|0)|0)|0,pe=((I>>>2|I<<30)^(I>>>13|I<<19)^(I>>>22|I<<10))+(I&S^I&M^S&M)|0;Q=ie,ie=J,J=K,K=H+fe|0,H=M,M=S,S=I,I=fe+pe|0}k[0]+=I,k[1]+=S,k[2]+=M,k[3]+=H,k[4]+=K,k[5]+=J,k[6]+=ie,k[7]+=Q},v}();X.RawSha256=$},4022:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.BLOCK_SIZE=64,X.DIGEST_LENGTH=32,X.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),X.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],X.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},4578:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),O(3541).__exportStar(O(3039),X)},3039:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});var L=O(3541),$=O(4022),v=O(6516),G=O(8259),q=function(){function M(H){if(this.hash=new v.RawSha256,H){this.outer=new v.RawSha256;var K=function k(M){var H=S(M);if(H.byteLength>$.BLOCK_SIZE){var K=new v.RawSha256;K.update(H),H=K.digest()}var J=new Uint8Array($.BLOCK_SIZE);return J.set(H),J}(H),J=new Uint8Array($.BLOCK_SIZE);J.set(K);for(var ie=0;ie<$.BLOCK_SIZE;ie++)K[ie]^=54,J[ie]^=92;for(this.hash.update(K),this.outer.update(J),ie=0;ie<K.byteLength;ie++)K[ie]=0}}return M.prototype.update=function(H){if(!function I(M){return"string"==typeof M?0===M.length:0===M.byteLength}(H)&&!this.error)try{this.hash.update(S(H))}catch(K){this.error=K}},M.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},M.prototype.digest=function(){return L.__awaiter(this,void 0,void 0,function(){return L.__generator(this,function(H){return[2,this.digestSync()]})})},M}();function S(M){return"string"==typeof M?G.fromUtf8(M):ArrayBuffer.isView(M)?new Uint8Array(M.buffer,M.byteOffset,M.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(M)}X.Sha256=q},8259:(Ee,X,O)=>{"use strict";O.r(X),O.d(X,{fromUtf8:()=>q,toUtf8:()=>k});var q=function(I){return"function"==typeof TextEncoder?function v(I){return(new TextEncoder).encode(I)}(I):function(I){for(var S=[],M=0,H=I.length;M<H;M++){var K=I.charCodeAt(M);if(K<128)S.push(K);else if(K<2048)S.push(K>>6|192,63&K|128);else if(M+1<I.length&&55296==(64512&K)&&56320==(64512&I.charCodeAt(M+1))){var J=65536+((1023&K)<<10)+(1023&I.charCodeAt(++M));S.push(J>>18|240,J>>12&63|128,J>>6&63|128,63&J|128)}else S.push(K>>12|224,K>>6&63|128,63&K|128)}return Uint8Array.from(S)}(I)},k=function(I){return"function"==typeof TextDecoder?function G(I){return new TextDecoder("utf-8").decode(I)}(I):function(I){for(var S="",M=0,H=I.length;M<H;M++){var K=I[M];if(K<128)S+=String.fromCharCode(K);else if(192<=K&&K<224){var J=I[++M];S+=String.fromCharCode((31&K)<<6|63&J)}else if(240<=K&&K<365){var Q="%"+[K,I[++M],I[++M],I[++M]].map(function(ae){return ae.toString(16)}).join("%");S+=decodeURIComponent(Q)}else S+=String.fromCharCode((15&K)<<12|(63&I[++M])<<6|63&I[++M])}return S}(I)}},710:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),O(7840).__exportStar(O(933),X)},933:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.supportsZeroByteGCM=X.supportsSubtleCrypto=X.supportsSecureRandom=X.supportsWebCrypto=void 0;var L=O(7840),$=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function G(I){return"object"==typeof I&&"object"==typeof I.crypto&&"function"==typeof I.crypto.getRandomValues}function q(I){return I&&$.every(function(S){return"function"==typeof I[S]})}X.supportsWebCrypto=function v(I){return!(!G(I)||"object"!=typeof I.crypto.subtle)&&q(I.crypto.subtle)},X.supportsSecureRandom=G,X.supportsSubtleCrypto=q,X.supportsZeroByteGCM=function k(I){return L.__awaiter(this,void 0,void 0,function(){var S;return L.__generator(this,function(K){switch(K.label){case 0:if(!q(I))return[2,!1];K.label=1;case 1:return K.trys.push([1,4,,5]),[4,I.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return S=K.sent(),[4,I.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},S,new Uint8Array(0))];case 3:return[2,16===K.sent().byteLength];case 4:return K.sent(),[2,!1];case 5:return[2]}})})}},2862:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.convertToBuffer=void 0;var L=O(2622),$=typeof Buffer<"u"&&Buffer.from?function(G){return Buffer.from(G,"utf8")}:L.fromUtf8;X.convertToBuffer=function v(G){return G instanceof Uint8Array?G:"string"==typeof G?$(G):ArrayBuffer.isView(G)?new Uint8Array(G.buffer,G.byteOffset,G.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(G)}},7736:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.uint32ArrayFrom=X.numToUint8=X.isEmptyData=X.convertToBuffer=void 0;var L=O(2862);Object.defineProperty(X,"convertToBuffer",{enumerable:!0,get:function(){return L.convertToBuffer}});var $=O(5516);Object.defineProperty(X,"isEmptyData",{enumerable:!0,get:function(){return $.isEmptyData}});var v=O(5183);Object.defineProperty(X,"numToUint8",{enumerable:!0,get:function(){return v.numToUint8}});var G=O(6777);Object.defineProperty(X,"uint32ArrayFrom",{enumerable:!0,get:function(){return G.uint32ArrayFrom}})},5516:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.isEmptyData=void 0,X.isEmptyData=function O(L){return"string"==typeof L?0===L.length:0===L.byteLength}},5183:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.numToUint8=void 0,X.numToUint8=function O(L){return new Uint8Array([(4278190080&L)>>24,(16711680&L)>>16,(65280&L)>>8,255&L])}},6777:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.uint32ArrayFrom=void 0,X.uint32ArrayFrom=function O(L){if(!Array.from){for(var $=new Uint32Array(L.length);0<L.length;)$[0]=L[0];return $}return Uint32Array.from(L)}},9684:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0})},7593:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0})},5243:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0})},883:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0})},2625:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.isMsWindow=void 0;var O=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];X.isMsWindow=function $(v){if(function L(v){return"MSInputMethodContext"in v&&"msCrypto"in v}(v)&&void 0!==v.msCrypto.subtle){var G=v.msCrypto,q=G.getRandomValues,k=G.subtle;return O.map(function(I){return k[I]}).concat(q).every(function(I){return"function"==typeof I})}return!1}},5657:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});var L=O(4806);(0,L.__exportStar)(O(9684),X),(0,L.__exportStar)(O(7593),X),(0,L.__exportStar)(O(5243),X),(0,L.__exportStar)(O(883),X),(0,L.__exportStar)(O(2625),X)},7655:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.EMPTY_DATA_SHA_256=X.SHA_256_HMAC_ALGO=X.SHA_256_HASH=void 0,X.SHA_256_HASH={name:"SHA-256"},X.SHA_256_HMAC_ALGO={name:"HMAC",hash:X.SHA_256_HASH},X.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},1198:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.Sha256=void 0;var L=O(7273),$=O(157),v=O(5415),G=O(463),q=O(5657),k=O(2521),I=function(){function S(M){this.hash=(0,G.supportsWebCrypto)((0,k.locateWindow)())?new $.Sha256(M):(0,q.isMsWindow)((0,k.locateWindow)())?new L.Sha256(M):new v.Sha256(M)}return S.prototype.update=function(M,H){this.hash.update(M,H)},S.prototype.digest=function(){return this.hash.digest()},S}();X.Sha256=I},7273:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.Sha256=void 0;var L=O(1739),$=O(7655),v=O(4456),G=O(2521),q=function(){function S(M){M?(this.operation=function k(S){return new Promise(function(M,H){var K=(0,G.locateWindow)().msCrypto.subtle.importKey("raw",I(S),$.SHA_256_HMAC_ALGO,!1,["sign"]);K.oncomplete=function(){K.result&&M(K.result),H(new Error("ImportKey completed without importing key."))},K.onerror=function(){H(new Error("ImportKey failed to import key."))}})}(M).then(function(H){return(0,G.locateWindow)().msCrypto.subtle.sign($.SHA_256_HMAC_ALGO,H)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,G.locateWindow)().msCrypto.subtle.digest("SHA-256"))}return S.prototype.update=function(M){var H=this;(0,L.isEmptyData)(M)||(this.operation=this.operation.then(function(K){return K.onerror=function(){H.operation=Promise.reject(new Error("Error encountered updating hash"))},K.process(I(M)),K}),this.operation.catch(function(){}))},S.prototype.digest=function(){return this.operation.then(function(M){return new Promise(function(H,K){M.onerror=function(){K(new Error("Error encountered finalizing hash"))},M.oncomplete=function(){M.result&&H(new Uint8Array(M.result)),K(new Error("Error encountered finalizing hash"))},M.finish()})})},S}();function I(S){return"string"==typeof S?(0,v.fromUtf8)(S):ArrayBuffer.isView(S)?new Uint8Array(S.buffer,S.byteOffset,S.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(S)}X.Sha256=q},2518:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.WebCryptoSha256=X.Ie11Sha256=void 0,(0,O(5955).__exportStar)(O(1198),X);var $=O(7273);Object.defineProperty(X,"Ie11Sha256",{enumerable:!0,get:function(){return $.Sha256}});var v=O(157);Object.defineProperty(X,"WebCryptoSha256",{enumerable:!0,get:function(){return v.Sha256}})},1739:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.isEmptyData=void 0,X.isEmptyData=function O(L){return"string"==typeof L?0===L.length:0===L.byteLength}},157:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.Sha256=void 0;var L=O(5512),$=O(7655),v=O(2521),G=function(){function q(k){this.toHash=new Uint8Array(0),void 0!==k&&(this.key=new Promise(function(I,S){(0,v.locateWindow)().crypto.subtle.importKey("raw",(0,L.convertToBuffer)(k),$.SHA_256_HMAC_ALGO,!1,["sign"]).then(I,S)}),this.key.catch(function(){}))}return q.prototype.update=function(k){if(!(0,L.isEmptyData)(k)){var I=(0,L.convertToBuffer)(k),S=new Uint8Array(this.toHash.byteLength+I.byteLength);S.set(this.toHash,0),S.set(I,this.toHash.byteLength),this.toHash=S}},q.prototype.digest=function(){var k=this;return this.key?this.key.then(function(I){return(0,v.locateWindow)().crypto.subtle.sign($.SHA_256_HMAC_ALGO,I,k.toHash).then(function(S){return new Uint8Array(S)})}):(0,L.isEmptyData)(this.toHash)?Promise.resolve($.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,v.locateWindow)().crypto.subtle.digest($.SHA_256_HASH,k.toHash)}).then(function(I){return Promise.resolve(new Uint8Array(I))})},q}();X.Sha256=G},1934:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.RawSha256=void 0;var L=O(268),$=function(){function v(){this.state=Int32Array.from(L.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return v.prototype.update=function(G){if(this.finished)throw new Error("Attempted to update an already finished hash.");var q=0,k=G.byteLength;if(this.bytesHashed+=k,8*this.bytesHashed>L.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;k>0;)this.buffer[this.bufferLength++]=G[q++],k--,this.bufferLength===L.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},v.prototype.digest=function(){if(!this.finished){var G=8*this.bytesHashed,q=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),k=this.bufferLength;if(q.setUint8(this.bufferLength++,128),k%L.BLOCK_SIZE>=L.BLOCK_SIZE-8){for(var I=this.bufferLength;I<L.BLOCK_SIZE;I++)q.setUint8(I,0);this.hashBuffer(),this.bufferLength=0}for(I=this.bufferLength;I<L.BLOCK_SIZE-8;I++)q.setUint8(I,0);q.setUint32(L.BLOCK_SIZE-8,Math.floor(G/4294967296),!0),q.setUint32(L.BLOCK_SIZE-4,G),this.hashBuffer(),this.finished=!0}var S=new Uint8Array(L.DIGEST_LENGTH);for(I=0;I<8;I++)S[4*I]=this.state[I]>>>24&255,S[4*I+1]=this.state[I]>>>16&255,S[4*I+2]=this.state[I]>>>8&255,S[4*I+3]=this.state[I]>>>0&255;return S},v.prototype.hashBuffer=function(){for(var q=this.buffer,k=this.state,I=k[0],S=k[1],M=k[2],H=k[3],K=k[4],J=k[5],ie=k[6],Q=k[7],ae=0;ae<L.BLOCK_SIZE;ae++){if(ae<16)this.temp[ae]=(255&q[4*ae])<<24|(255&q[4*ae+1])<<16|(255&q[4*ae+2])<<8|255&q[4*ae+3];else{var me=this.temp[ae-2];this.temp[ae]=(((me>>>17|me<<15)^(me>>>19|me<<13)^me>>>10)+this.temp[ae-7]|0)+((((me=this.temp[ae-15])>>>7|me<<25)^(me>>>18|me<<14)^me>>>3)+this.temp[ae-16]|0)}var fe=(((K>>>6|K<<26)^(K>>>11|K<<21)^(K>>>25|K<<7))+(K&J^~K&ie)|0)+(Q+(L.KEY[ae]+this.temp[ae]|0)|0)|0,pe=((I>>>2|I<<30)^(I>>>13|I<<19)^(I>>>22|I<<10))+(I&S^I&M^S&M)|0;Q=ie,ie=J,J=K,K=H+fe|0,H=M,M=S,S=I,I=fe+pe|0}k[0]+=I,k[1]+=S,k[2]+=M,k[3]+=H,k[4]+=K,k[5]+=J,k[6]+=ie,k[7]+=Q},v}();X.RawSha256=$},268:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.MAX_HASHABLE_LENGTH=X.INIT=X.KEY=X.DIGEST_LENGTH=X.BLOCK_SIZE=void 0,X.BLOCK_SIZE=64,X.DIGEST_LENGTH=32,X.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),X.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],X.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},5415:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),(0,O(2960).__exportStar)(O(316),X)},316:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.Sha256=void 0;var L=O(2960),$=O(268),v=O(1934),G=O(5512),q=function(){function I(S){if(this.hash=new v.RawSha256,S){this.outer=new v.RawSha256;var M=function k(I){var S=(0,G.convertToBuffer)(I);if(S.byteLength>$.BLOCK_SIZE){var M=new v.RawSha256;M.update(S),S=M.digest()}var H=new Uint8Array($.BLOCK_SIZE);return H.set(S),H}(S),H=new Uint8Array($.BLOCK_SIZE);H.set(M);for(var K=0;K<$.BLOCK_SIZE;K++)M[K]^=54,H[K]^=92;for(this.hash.update(M),this.outer.update(H),K=0;K<M.byteLength;K++)M[K]=0}}return I.prototype.update=function(S){if(!(0,G.isEmptyData)(S)&&!this.error)try{this.hash.update((0,G.convertToBuffer)(S))}catch(M){this.error=M}},I.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},I.prototype.digest=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(S){return[2,this.digestSync()]})})},I}();X.Sha256=q},463:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),(0,O(9077).__exportStar)(O(7053),X)},7053:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.supportsZeroByteGCM=X.supportsSubtleCrypto=X.supportsSecureRandom=X.supportsWebCrypto=void 0;var L=O(9077),$=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function G(I){return"object"==typeof I&&"object"==typeof I.crypto&&"function"==typeof I.crypto.getRandomValues}function q(I){return I&&$.every(function(S){return"function"==typeof I[S]})}X.supportsWebCrypto=function v(I){return!(!G(I)||"object"!=typeof I.crypto.subtle)&&q(I.crypto.subtle)},X.supportsSecureRandom=G,X.supportsSubtleCrypto=q,X.supportsZeroByteGCM=function k(I){return(0,L.__awaiter)(this,void 0,void 0,function(){var S;return(0,L.__generator)(this,function(K){switch(K.label){case 0:if(!q(I))return[2,!1];K.label=1;case 1:return K.trys.push([1,4,,5]),[4,I.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return S=K.sent(),[4,I.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},S,new Uint8Array(0))];case 3:return[2,16===K.sent().byteLength];case 4:return K.sent(),[2,!1];case 5:return[2]}})})}},4389:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.convertToBuffer=void 0;var L=O(4456),$=typeof Buffer<"u"&&Buffer.from?function(G){return Buffer.from(G,"utf8")}:L.fromUtf8;X.convertToBuffer=function v(G){return G instanceof Uint8Array?G:"string"==typeof G?$(G):ArrayBuffer.isView(G)?new Uint8Array(G.buffer,G.byteOffset,G.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(G)}},5512:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.uint32ArrayFrom=X.numToUint8=X.isEmptyData=X.convertToBuffer=void 0;var L=O(4389);Object.defineProperty(X,"convertToBuffer",{enumerable:!0,get:function(){return L.convertToBuffer}});var $=O(3666);Object.defineProperty(X,"isEmptyData",{enumerable:!0,get:function(){return $.isEmptyData}});var v=O(1268);Object.defineProperty(X,"numToUint8",{enumerable:!0,get:function(){return v.numToUint8}});var G=O(491);Object.defineProperty(X,"uint32ArrayFrom",{enumerable:!0,get:function(){return G.uint32ArrayFrom}})},3666:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.isEmptyData=void 0,X.isEmptyData=function O(L){return"string"==typeof L?0===L.length:0===L.byteLength}},1268:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.numToUint8=void 0,X.numToUint8=function O(L){return new Uint8Array([(4278190080&L)>>24,(16711680&L)>>16,(65280&L)>>8,255&L])}},491:(Ee,X)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.uint32ArrayFrom=void 0,X.uint32ArrayFrom=function O(L){if(!Uint32Array.from){for(var $=new Uint32Array(L.length),v=0;v<L.length;)$[v]=L[v],v+=1;return $}return Uint32Array.from(L)}},4456:(Ee,X,O)=>{"use strict";O.r(X),O.d(X,{fromUtf8:()=>q,toUtf8:()=>k});var q=function(I){return"function"==typeof TextEncoder?function v(I){return(new TextEncoder).encode(I)}(I):function(I){for(var S=[],M=0,H=I.length;M<H;M++){var K=I.charCodeAt(M);if(K<128)S.push(K);else if(K<2048)S.push(K>>6|192,63&K|128);else if(M+1<I.length&&55296==(64512&K)&&56320==(64512&I.charCodeAt(M+1))){var J=65536+((1023&K)<<10)+(1023&I.charCodeAt(++M));S.push(J>>18|240,J>>12&63|128,J>>6&63|128,63&J|128)}else S.push(K>>12|224,K>>6&63|128,63&K|128)}return Uint8Array.from(S)}(I)},k=function(I){return"function"==typeof TextDecoder?function G(I){return new TextDecoder("utf-8").decode(I)}(I):function(I){for(var S="",M=0,H=I.length;M<H;M++){var K=I[M];if(K<128)S+=String.fromCharCode(K);else if(192<=K&&K<224){var J=I[++M];S+=String.fromCharCode((31&K)<<6|63&J)}else if(240<=K&&K<365){var Q="%"+[K,I[++M],I[++M],I[++M]].map(function(ae){return ae.toString(16)}).join("%");S+=decodeURIComponent(Q)}else S+=String.fromCharCode((15&K)<<12|(63&I[++M])<<6|63&I[++M])}return S}(I)}},2521:(Ee,X,O)=>{"use strict";O.r(X),O.d(X,{locateWindow:()=>$});var L={};function $(){return typeof window<"u"?window:typeof self<"u"?self:L}},2622:(Ee,X,O)=>{"use strict";O.r(X),O.d(X,{fromUtf8:()=>q,toUtf8:()=>k});var q=function(I){return"function"==typeof TextEncoder?function v(I){return(new TextEncoder).encode(I)}(I):function(I){for(var S=[],M=0,H=I.length;M<H;M++){var K=I.charCodeAt(M);if(K<128)S.push(K);else if(K<2048)S.push(K>>6|192,63&K|128);else if(M+1<I.length&&55296==(64512&K)&&56320==(64512&I.charCodeAt(M+1))){var J=65536+((1023&K)<<10)+(1023&I.charCodeAt(++M));S.push(J>>18|240,J>>12&63|128,J>>6&63|128,63&J|128)}else S.push(K>>12|224,K>>6&63|128,63&K|128)}return Uint8Array.from(S)}(I)},k=function(I){return"function"==typeof TextDecoder?function G(I){return new TextDecoder("utf-8").decode(I)}(I):function(I){for(var S="",M=0,H=I.length;M<H;M++){var K=I[M];if(K<128)S+=String.fromCharCode(K);else if(192<=K&&K<224){var J=I[++M];S+=String.fromCharCode((31&K)<<6|63&J)}else if(240<=K&&K<365){var Q="%"+[K,I[++M],I[++M],I[++M]].map(function(ae){return ae.toString(16)}).join("%");S+=decodeURIComponent(Q)}else S+=String.fromCharCode((15&K)<<12|(63&I[++M])<<6|63&I[++M])}return S}(I)}},8604:Ee=>{function X(O){if(!(this instanceof X))return new X(O);this._bbox=O||[1/0,1/0,-1/0,-1/0],this._valid=!!O}Ee.exports=X,X.prototype.include=function(O){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],O[0]),this._bbox[1]=Math.min(this._bbox[1],O[1]),this._bbox[2]=Math.max(this._bbox[2],O[0]),this._bbox[3]=Math.max(this._bbox[3],O[1]),this},X.prototype.equals=function(O){var L;return L=O instanceof X?O.bbox():O,this._bbox[0]==L[0]&&this._bbox[1]==L[1]&&this._bbox[2]==L[2]&&this._bbox[3]==L[3]},X.prototype.center=function(O){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},X.prototype.union=function(O){var L;return this._valid=!0,L=O instanceof X?O.bbox():O,this._bbox[0]=Math.min(this._bbox[0],L[0]),this._bbox[1]=Math.min(this._bbox[1],L[1]),this._bbox[2]=Math.max(this._bbox[2],L[2]),this._bbox[3]=Math.max(this._bbox[3],L[3]),this},X.prototype.bbox=function(){return this._valid?this._bbox:null},X.prototype.contains=function(O){if(!O)return this._fastContains();if(!this._valid)return null;var L=O[0],$=O[1];return this._bbox[0]<=L&&this._bbox[1]<=$&&this._bbox[2]>=L&&this._bbox[3]>=$},X.prototype.intersect=function(O){return this._valid?(L=O instanceof X?O.bbox():O,!(this._bbox[0]>L[2]||this._bbox[2]<L[0]||this._bbox[3]<L[1]||this._bbox[1]>L[3])):null;var L},X.prototype._fastContains=function(){return this._valid?new Function("ll","return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]"):new Function("return null;")},X.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null}},869:(Ee,X,O)=>{var L=O(7265);function v(k){var I=0;if(k&&k.length>0){I+=Math.abs(G(k[0]));for(var S=1;S<k.length;S++)I-=Math.abs(G(k[S]))}return I}function G(k){var I,S,H,K,J,ie,Q=0,ae=k.length;if(ae>2){for(ie=0;ie<ae;ie++)ie===ae-2?(H=ae-2,K=ae-1,J=0):ie===ae-1?(H=ae-1,K=0,J=1):(H=ie,K=ie+1,J=ie+2),I=k[H],S=k[K],Q+=(q(k[J][0])-q(I[0]))*Math.sin(q(S[1]));Q=Q*L.RADIUS*L.RADIUS/2}return Q}function q(k){return k*Math.PI/180}Ee.exports.geometry=function $(k){var S,I=0;switch(k.type){case"Polygon":return v(k.coordinates);case"MultiPolygon":for(S=0;S<k.coordinates.length;S++)I+=v(k.coordinates[S]);return I;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(S=0;S<k.geometries.length;S++)I+=$(k.geometries[S]);return I}},Ee.exports.ring=G},8143:Ee=>{Ee.exports=function O(L){if(!L||!L.type)return null;var $=X[L.type];return $?"geometry"===$?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:L}]}:"feature"===$?{type:"FeatureCollection",features:[L]}:"featurecollection"===$?L:void 0:null};var X={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},8035:(Ee,X,O)=>{var L=O(7923),$=O(8369);Ee.exports.hint=function v(G,q){var k,I=[];if("object"==typeof G)k=G;else{if("string"!=typeof G)return[{message:"Expected string or object as input",line:0}];try{k=L.parse(G)}catch(H){var S=H.message.match(/line (\d+)/);return[{line:parseInt(S[1],10)-1,message:H.message,error:H}]}}return I.concat($.hint(k,q))}},8369:(Ee,X,O)=>{var L=O(4967);Ee.exports.hint=function $(v,G){var q=[],k=0;function M(z){if((!G||!1!==G.noDuplicateMembers)&&z.__duplicateProperties__&&q.push({message:"An object contained duplicate members, making parsing ambigous: "+z.__duplicateProperties__.join(", "),line:z.__line__}),!K(z,"type","string"))if(N[z.type])z&&N[z.type](z);else{var ee=F[z.type.toLowerCase()];q.push(void 0!==ee?{message:"Expected "+ee+" but got "+z.type+" (case sensitive)",line:z.__line__}:{message:"The type "+z.type+" is unknown",line:z.__line__})}}function H(z,ee){return z.every(function(W){return null!==W&&typeof W===ee})}function K(z,ee,W){if(typeof z[ee]>"u")return q.push({message:'"'+ee+'" member required',line:z.__line__});if("array"===W){if(!Array.isArray(z[ee]))return q.push({message:'"'+ee+'" member should be an array, but is an '+typeof z[ee]+" instead",line:z.__line__})}else{if("object"===W&&z[ee]&&z[ee].constructor!==Object)return q.push({message:'"'+ee+'" member should be '+W+", but is an "+z[ee].constructor.name+" instead",line:z.__line__});if(W&&typeof z[ee]!==W)return q.push({message:'"'+ee+'" member should be '+W+", but is an "+typeof z[ee]+" instead",line:z.__line__})}}function ie(z,ee){if(!Array.isArray(z))return q.push({message:"position should be an array, is a "+typeof z+" instead",line:z.__line__||ee});if(z.length<2)return q.push({message:"position must have 2 or more elements",line:z.__line__||ee});if(z.length>3)return q.push({message:"position should not have more than 3 elements",level:"message",line:z.__line__||ee});if(!H(z,"number"))return q.push({message:"each element in a position must be a number",line:z.__line__||ee});if(G&&G.precisionWarning){if(10===k)return k+=1,q.push({message:"truncated warnings: we've encountered coordinate precision warning 10 times, no more warnings will be reported",level:"message",line:z.__line__||ee});k<10&&z.forEach(function(W){var ve=0,Je=String(W).split(".")[1];if(void 0!==Je&&(ve=Je.length),ve>6)return k+=1,q.push({message:"precision of coordinates should be reduced",level:"message",line:z.__line__||ee})})}}function Q(z,ee,W,ve){if(void 0===ve&&void 0!==z.__line__&&(ve=z.__line__),0===W)return ie(z,ve);if(1===W&&ee)if("LinearRing"===ee){if(!Array.isArray(z[z.length-1]))return q.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:ve}),!0;if(z.length<4&&q.push({message:"a LinearRing of coordinates needs to have four or more positions",line:ve}),z.length&&(z[z.length-1].length!==z[0].length||!z[z.length-1].every(function(dt,Ie){return z[0][Ie]===dt})))return q.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:ve}),!0}else if("Line"===ee&&z.length<2)return q.push({message:"a line needs to have two or more coordinates to be valid",line:ve});if(Array.isArray(z))return z.map(function(dt){return Q(dt,ee,W-1,dt.__line__||ve)}).some(function(dt){return dt});q.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:ve})}function ae(z){z.crs&&q.push("object"==typeof z.crs&&z.crs.properties&&"urn:ogc:def:crs:OGC:1.3:CRS84"===z.crs.properties.name?{message:"old-style crs member is not recommended, this object is equivalent to the default and should be removed",line:z.__line__}:{message:"old-style crs member is not recommended",line:z.__line__})}function me(z){if(z.bbox){if(Array.isArray(z.bbox))return H(z.bbox,"number")||q.push({message:"each element in a bbox member must be a number",line:z.bbox.__line__}),4===z.bbox.length||6===z.bbox.length||q.push({message:"bbox must contain 4 elements (for 2D) or 6 elements (for 3D)",line:z.bbox.__line__}),q.length;q.push({message:"bbox member must be an array of numbers, but is a "+typeof z.bbox,line:z.__line__})}}function P(z){ae(z),me(z),void 0!==z.id&&"string"!=typeof z.id&&"number"!=typeof z.id&&q.push({message:'Feature "id" member must have a string or number value',line:z.__line__}),void 0!==z.features&&q.push({message:'Feature object cannot contain a "features" member',line:z.__line__}),void 0!==z.coordinates&&q.push({message:'Feature object cannot contain a "coordinates" member',line:z.__line__}),"Feature"!==z.type&&q.push({message:"GeoJSON features must have a type=feature member",line:z.__line__}),K(z,"properties","object"),K(z,"geometry","object")||z.geometry&&M(z.geometry)}var N={Point:function oe(z){ae(z),me(z),function we(z){void 0!==z.properties&&q.push({message:'geometry object cannot contain a "properties" member',line:z.__line__}),void 0!==z.geometry&&q.push({message:'geometry object cannot contain a "geometry" member',line:z.__line__}),void 0!==z.features&&q.push({message:'geometry object cannot contain a "features" member',line:z.__line__})}(z),K(z,"coordinates","array")||ie(z.coordinates)},Feature:P,MultiPoint:function He(z){ae(z),me(z),K(z,"coordinates","array")||Q(z.coordinates,"",1)},LineString:function Ce(z){ae(z),me(z),K(z,"coordinates","array")||Q(z.coordinates,"Line",1)},MultiLineString:function qe(z){ae(z),me(z),K(z,"coordinates","array")||Q(z.coordinates,"Line",2)},FeatureCollection:function J(z){if(ae(z),me(z),void 0!==z.properties&&q.push({message:'FeatureCollection object cannot contain a "properties" member',line:z.__line__}),void 0!==z.coordinates&&q.push({message:'FeatureCollection object cannot contain a "coordinates" member',line:z.__line__}),!K(z,"features","array")){if(!H(z.features,"object"))return q.push({message:"Every feature must be an object",line:z.__line__});z.features.forEach(P)}},GeometryCollection:function ze(z){ae(z),me(z),K(z,"geometries","array")||(H(z.geometries,"object")||q.push({message:"The geometries array in a GeometryCollection must contain only geometry objects",line:z.__line__}),1===z.geometries.length&&q.push({message:"GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type",line:z.geometries.__line__}),z.geometries.forEach(function(ee){ee&&("GeometryCollection"===ee.type&&q.push({message:"GeometryCollection should avoid nested geometry collections",line:z.geometries.__line__}),M(ee))}))},Polygon:function fe(z){ae(z),me(z),K(z,"coordinates","array")||Q(z.coordinates,"LinearRing",2)||L(z,q)},MultiPolygon:function pe(z){ae(z),me(z),K(z,"coordinates","array")||Q(z.coordinates,"LinearRing",3)||L(z,q)}},F=Object.keys(N).reduce(function(z,ee){return z[ee.toLowerCase()]=ee,z},{});return"object"!=typeof v||null==v?(q.push({message:"The root of a GeoJSON object must be an object.",line:0}),q):(M(v),q.forEach(function(z){({}).hasOwnProperty.call(z,"line")&&void 0===z.line&&delete z.line}),q)}},4967:Ee=>{function X(v){return v*Math.PI/180}function O(v){var G=0;if(v.length>2)for(var q,k,I=0;I<v.length-1;I++)G+=X((k=v[I+1])[0]-(q=v[I])[0])*(2+Math.sin(X(q[1]))+Math.sin(X(k[1])));return G>=0}function L(v){if(v&&v.length>0){if(O(v[0]))return!1;if(!v.slice(1,v.length).every(O))return!1}return!0}Ee.exports=function(G,q){(function $(v){return"Polygon"===v.type?L(v.coordinates):"MultiPolygon"===v.type?v.coordinates.every(L):void 0})(G)||q.push({message:"Polygons and MultiPolygons should follow the right-hand rule",level:"message",line:G.__line__})}},8527:function(Ee){Ee.exports=function(){"use strict";var X=function(j,te){var Se={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},tt={on:function(ut,wt,Qt){if(void 0===Se[ut])throw new Error("Invalid event type: "+ut);Se[ut].push({selector:wt,fn:Qt})},render:function(ut){te.store.featureChanged(ut)}},ct=function(ut,wt){for(var Qt=Se[ut],Kt=Qt.length;Kt--;){var dn=Qt[Kt];if(dn.selector(wt)){dn.fn.call(tt,wt)||te.store.render(),te.ui.updateMapClasses();break}}};return j.start.call(tt),{render:j.render,stop:function(){j.stop&&j.stop()},trash:function(){j.trash&&(j.trash(),te.store.render())},combineFeatures:function(){j.combineFeatures&&j.combineFeatures()},uncombineFeatures:function(){j.uncombineFeatures&&j.uncombineFeatures()},drag:function(ut){ct("drag",ut)},click:function(ut){ct("click",ut)},mousemove:function(ut){ct("mousemove",ut)},mousedown:function(ut){ct("mousedown",ut)},mouseup:function(ut){ct("mouseup",ut)},mouseout:function(ut){ct("mouseout",ut)},keydown:function(ut){ct("keydown",ut)},keyup:function(ut){ct("keyup",ut)},touchstart:function(ut){ct("touchstart",ut)},touchmove:function(ut){ct("touchmove",ut)},touchend:function(ut){ct("touchend",ut)},tap:function(ut){ct("tap",ut)}}},O=6378137;function L(j){var te=0;if(j&&j.length>0){te+=Math.abs($(j[0]));for(var Se=1;Se<j.length;Se++)te-=Math.abs($(j[Se]))}return te}function $(j){var te,Se,tt,ct,ut,wt,Qt=0,Kt=j.length;if(Kt>2){for(wt=0;wt<Kt;wt++)wt===Kt-2?(tt=Kt-2,ct=Kt-1,ut=0):wt===Kt-1?(tt=Kt-1,ct=0,ut=1):(tt=wt,ct=wt+1,ut=wt+2),te=j[tt],Se=j[ct],Qt+=(v(j[ut][0])-v(te[0]))*Math.sin(v(Se[1]));Qt=Qt*O*O/2}return Qt}function v(j){return j*Math.PI/180}var G_geometry=function j(te){var Se,tt=0;switch(te.type){case"Polygon":return L(te.coordinates);case"MultiPolygon":for(Se=0;Se<te.coordinates.length;Se++)tt+=L(te.coordinates[Se]);return tt;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(Se=0;Se<te.geometries.length;Se++)tt+=j(te.geometries[Se]);return tt}},Q="active",me="mapbox-gl-draw-hot",we="mapbox-gl-draw-cold",oe="add",fe="move",Ce="pointer",qe="none",He={POLYGON:"polygon",LINE:"line_string",POINT:"point"},ze="Feature",P="Polygon",N="LineString",F="Point",z="FeatureCollection",dt={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},Ie="draw.create",Rt="draw.update",ar="feature",Zt="midpoint",ne="vertex",er="true",lr="false",Ti=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],Qi={Point:0,LineString:1,Polygon:2};function kt(j,te){var Se=Qi[j.geometry.type]-Qi[te.geometry.type];return 0===Se&&j.geometry.type===P?j.area-te.area:Se}function It(j){if(this._items={},this._nums={},this._length=j?j.length:0,j)for(var te=0,Se=j.length;te<Se;te++)this.add(j[te]),void 0!==j[te]&&("string"==typeof j[te]?this._items[j[te]]=te:this._nums[j[te]]=te)}It.prototype.add=function(j){return this.has(j)||(this._length++,"string"==typeof j?this._items[j]=this._length:this._nums[j]=this._length),this},It.prototype.delete=function(j){return!1===this.has(j)||(this._length--,delete this._items[j],delete this._nums[j]),this},It.prototype.has=function(j){return!("string"!=typeof j&&"number"!=typeof j||void 0===this._items[j]&&void 0===this._nums[j])},It.prototype.values=function(){var j=this,te=[];return Object.keys(this._items).forEach(function(Se){te.push({k:Se,v:j._items[Se]})}),Object.keys(this._nums).forEach(function(Se){te.push({k:JSON.parse(Se),v:j._nums[Se]})}),te.sort(function(Se,tt){return Se.v-tt.v}).map(function(Se){return Se.k})},It.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var ka=[ar,Zt,ne],Le={click:function(j,te,Se){return le(j,te,Se,Se.options.clickBuffer)},touch:function(j,te,Se){return le(j,te,Se,Se.options.touchBuffer)}};function le(j,te,Se,tt){if(null===Se.map)return[];var dn,Ct,ct=j?(void 0===(Ct=tt)&&(Ct=0),[[(dn=j).point.x-Ct,dn.point.y-Ct],[dn.point.x+Ct,dn.point.y+Ct]]):te,ut={};Se.options.styles&&(ut.layers=Se.options.styles.map(function(dn){return dn.id}));var wt=Se.map.queryRenderedFeatures(ct,ut).filter(function(dn){return-1!==ka.indexOf(dn.properties.meta)}),Qt=new It,Kt=[];return wt.forEach(function(dn){var Ct=dn.properties.id;Qt.has(Ct)||(Qt.add(Ct),Kt.push(dn))}),function(dn){return dn.map(function(Ct){return Ct.geometry.type===P&&(Ct.area=G_geometry({type:ze,property:{},geometry:Ct.geometry})),Ct}).sort(kt).map(function(Ct){return delete Ct.area,Ct})}(Kt)}function ce(j,te){var Se=Le.click(j,null,te),tt={mouse:qe};return Se[0]&&(tt.mouse=Se[0].properties.active===er?fe:Ce,tt.feature=Se[0].properties.meta),-1!==te.events.currentModeName().indexOf("draw")&&(tt.mouse=oe),te.ui.queueMapClasses(tt),te.ui.updateMapClasses(),Se[0]}function Ke(j,te){var Se=j.x-te.x,tt=j.y-te.y;return Math.sqrt(Se*Se+tt*tt)}function _t(j,te,Se){void 0===Se&&(Se={});var tt=null!=Se.fineTolerance?Se.fineTolerance:4,ct=null!=Se.grossTolerance?Se.grossTolerance:12,ut=null!=Se.interval?Se.interval:500;j.point=j.point||te.point,j.time=j.time||te.time;var wt=Ke(j.point,te.point);return wt<tt||wt<ct&&te.time-j.time<ut}function Gt(j,te,Se){void 0===Se&&(Se={});var tt=null!=Se.tolerance?Se.tolerance:25,ct=null!=Se.interval?Se.interval:250;return j.point=j.point||te.point,j.time=j.time||te.time,Ke(j.point,te.point)<tt&&te.time-j.time<ct}function Ht(j,te){return j(te={exports:{}},te.exports),te.exports}var Ir=Ht(function(j){var te=j.exports=function(Se,tt){if(tt||(tt=16),void 0===Se&&(Se=128),Se<=0)return"0";for(var ct=Math.log(Math.pow(2,Se))/Math.log(tt),ut=2;ct===1/0;ut*=2)ct=Math.log(Math.pow(2,Se/ut))/Math.log(tt)*ut;var wt=ct-Math.floor(ct),Qt="";for(ut=0;ut<Math.floor(ct);ut++)Qt=Math.floor(Math.random()*tt).toString(tt)+Qt;if(wt){var Kt=Math.pow(tt,wt);Qt=Math.floor(Math.random()*Kt).toString(tt)+Qt}var dn=parseInt(Qt,tt);return dn!==1/0&&dn>=Math.pow(2,Se)?te(Se,tt):Qt};te.rack=function(Se,tt,ct){var ut=function(Qt){var Kt=0;do{if(Kt++>10){if(!ct)throw new Error("too many ID collisions, use more bits");Se+=ct}var dn=te(Se,tt)}while(Object.hasOwnProperty.call(wt,dn));return wt[dn]=Qt,dn},wt=ut.hats={};return ut.get=function(Qt){return ut.hats[Qt]},ut.set=function(Qt,Kt){return ut.hats[Qt]=Kt,ut},ut.bits=Se||128,ut.base=tt||16,ut}}),yr=function(j,te){this.ctx=j,this.properties=te.properties||{},this.coordinates=te.geometry.coordinates,this.id=te.id||Ir(),this.type=te.geometry.type};yr.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},yr.prototype.incomingCoords=function(j){this.setCoordinates(j)},yr.prototype.setCoordinates=function(j){this.coordinates=j,this.changed()},yr.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},yr.prototype.setProperty=function(j,te){this.properties[j]=te},yr.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:ze,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},yr.prototype.internal=function(j){var te={id:this.id,meta:ar,"meta:type":this.type,active:lr,mode:j};if(this.ctx.options.userProperties)for(var Se in this.properties)te["user_"+Se]=this.properties[Se];return{type:ze,properties:te,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var ei=function(j,te){yr.call(this,j,te)};(ei.prototype=Object.create(yr.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},ei.prototype.updateCoordinate=function(j,te,Se){this.coordinates=3===arguments.length?[te,Se]:[j,te],this.changed()},ei.prototype.getCoordinate=function(){return this.getCoordinates()};var ni=function(j,te){yr.call(this,j,te)};(ni.prototype=Object.create(yr.prototype)).isValid=function(){return this.coordinates.length>1},ni.prototype.addCoordinate=function(j,te,Se){this.changed();var tt=parseInt(j,10);this.coordinates.splice(tt,0,[te,Se])},ni.prototype.getCoordinate=function(j){var te=parseInt(j,10);return JSON.parse(JSON.stringify(this.coordinates[te]))},ni.prototype.removeCoordinate=function(j){this.changed(),this.coordinates.splice(parseInt(j,10),1)},ni.prototype.updateCoordinate=function(j,te,Se){var tt=parseInt(j,10);this.coordinates[tt]=[te,Se],this.changed()};var Hr=function(j,te){yr.call(this,j,te),this.coordinates=this.coordinates.map(function(Se){return Se.slice(0,-1)})};(Hr.prototype=Object.create(yr.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(j){return j.length>2})},Hr.prototype.incomingCoords=function(j){this.coordinates=j.map(function(te){return te.slice(0,-1)}),this.changed()},Hr.prototype.setCoordinates=function(j){this.coordinates=j,this.changed()},Hr.prototype.addCoordinate=function(j,te,Se){this.changed();var tt=j.split(".").map(function(ct){return parseInt(ct,10)});this.coordinates[tt[0]].splice(tt[1],0,[te,Se])},Hr.prototype.removeCoordinate=function(j){this.changed();var te=j.split(".").map(function(tt){return parseInt(tt,10)}),Se=this.coordinates[te[0]];Se&&(Se.splice(te[1],1),Se.length<3&&this.coordinates.splice(te[0],1))},Hr.prototype.getCoordinate=function(j){var te=j.split(".").map(function(tt){return parseInt(tt,10)});return JSON.parse(JSON.stringify(this.coordinates[te[0]][te[1]]))},Hr.prototype.getCoordinates=function(){return this.coordinates.map(function(j){return j.concat([j[0]])})},Hr.prototype.updateCoordinate=function(j,te,Se){this.changed();var tt=j.split("."),ct=parseInt(tt[0],10),ut=parseInt(tt[1],10);void 0===this.coordinates[ct]&&(this.coordinates[ct]=[]),this.coordinates[ct][ut]=[te,Se]};var Bs={MultiPoint:ei,MultiLineString:ni,MultiPolygon:Hr},ls=function(j,te,Se,tt,ct){var ut=Se.split("."),wt=parseInt(ut[0],10),Qt=ut[1]?ut.slice(1).join("."):null;return j[wt][te](Qt,tt,ct)},xo=function(j,te){if(yr.call(this,j,te),delete this.coordinates,this.model=Bs[te.geometry.type],void 0===this.model)throw new TypeError(te.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(te.geometry.coordinates)};function Cr(j){this.map=j.map,this.drawConfig=JSON.parse(JSON.stringify(j.options||{})),this._ctx=j}(xo.prototype=Object.create(yr.prototype))._coordinatesToFeatures=function(j){var te=this,Se=this.model.bind(this);return j.map(function(tt){return new Se(te.ctx,{id:Ir(),type:ze,properties:{},geometry:{coordinates:tt,type:te.type.replace("Multi","")}})})},xo.prototype.isValid=function(){return this.features.every(function(j){return j.isValid()})},xo.prototype.setCoordinates=function(j){this.features=this._coordinatesToFeatures(j),this.changed()},xo.prototype.getCoordinate=function(j){return ls(this.features,"getCoordinate",j)},xo.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(j){return j.type===P?j.getCoordinates():j.coordinates})))},xo.prototype.updateCoordinate=function(j,te,Se){ls(this.features,"updateCoordinate",j,te,Se),this.changed()},xo.prototype.addCoordinate=function(j,te,Se){ls(this.features,"addCoordinate",j,te,Se),this.changed()},xo.prototype.removeCoordinate=function(j){ls(this.features,"removeCoordinate",j),this.changed()},xo.prototype.getFeatures=function(){return this.features},Cr.prototype.setSelected=function(j){return this._ctx.store.setSelected(j)},Cr.prototype.setSelectedCoordinates=function(j){var te=this;this._ctx.store.setSelectedCoordinates(j),j.reduce(function(Se,tt){return void 0===Se[tt.feature_id]&&(Se[tt.feature_id]=!0,te._ctx.store.get(tt.feature_id).changed()),Se},{})},Cr.prototype.getSelected=function(){return this._ctx.store.getSelected()},Cr.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},Cr.prototype.isSelected=function(j){return this._ctx.store.isSelected(j)},Cr.prototype.getFeature=function(j){return this._ctx.store.get(j)},Cr.prototype.select=function(j){return this._ctx.store.select(j)},Cr.prototype.deselect=function(j){return this._ctx.store.deselect(j)},Cr.prototype.deleteFeature=function(j,te){return void 0===te&&(te={}),this._ctx.store.delete(j,te)},Cr.prototype.addFeature=function(j){return this._ctx.store.add(j)},Cr.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},Cr.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},Cr.prototype.setActionableState=function(j){return void 0===j&&(j={}),this._ctx.events.actionable({trash:j.trash||!1,combineFeatures:j.combineFeatures||!1,uncombineFeatures:j.uncombineFeatures||!1})},Cr.prototype.changeMode=function(j,te,Se){return void 0===te&&(te={}),void 0===Se&&(Se={}),this._ctx.events.changeMode(j,te,Se)},Cr.prototype.updateUIClasses=function(j){return this._ctx.ui.queueMapClasses(j)},Cr.prototype.activateUIButton=function(j){return this._ctx.ui.setActiveButton(j)},Cr.prototype.featuresAt=function(j,te,Se){if(void 0===Se&&(Se="click"),"click"!==Se&&"touch"!==Se)throw new Error("invalid buffer type");return Le[Se](j,te,this._ctx)},Cr.prototype.newFeature=function(j){var te=j.geometry.type;return te===F?new ei(this._ctx,j):te===N?new ni(this._ctx,j):te===P?new Hr(this._ctx,j):new xo(this._ctx,j)},Cr.prototype.isInstanceOf=function(j,te){if(j===F)return te instanceof ei;if(j===N)return te instanceof ni;if(j===P)return te instanceof Hr;if("MultiFeature"===j)return te instanceof xo;throw new Error("Unknown feature class: "+j)},Cr.prototype.doRender=function(j){return this._ctx.store.featureChanged(j)},Cr.prototype.onSetup=function(){},Cr.prototype.onDrag=function(){},Cr.prototype.onClick=function(){},Cr.prototype.onMouseMove=function(){},Cr.prototype.onMouseDown=function(){},Cr.prototype.onMouseUp=function(){},Cr.prototype.onMouseOut=function(){},Cr.prototype.onKeyUp=function(){},Cr.prototype.onKeyDown=function(){},Cr.prototype.onTouchStart=function(){},Cr.prototype.onTouchMove=function(){},Cr.prototype.onTouchEnd=function(){},Cr.prototype.onTap=function(){},Cr.prototype.onStop=function(){},Cr.prototype.onTrash=function(){},Cr.prototype.onCombineFeature=function(){},Cr.prototype.onUncombineFeature=function(){},Cr.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var ml={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Wu=Object.keys(ml);function ta(j){return[].concat(j).filter(function(te){return void 0!==te})}function Fs(){var j=this;if(!j.ctx.map||void 0===j.ctx.map.getSource(me))return Kt();var te=j.ctx.events.currentModeName();j.ctx.ui.queueMapClasses({mode:te});var Se=[],tt=[];j.isDirty?tt=j.getAllIds():(Se=j.getChangedIds().filter(function(dn){return void 0!==j.get(dn)}),tt=j.sources.hot.filter(function(dn){return dn.properties.id&&-1===Se.indexOf(dn.properties.id)&&void 0!==j.get(dn.properties.id)}).map(function(dn){return dn.properties.id})),j.sources.hot=[];var ct=j.sources.cold.length;j.sources.cold=j.isDirty?[]:j.sources.cold.filter(function(dn){return-1===Se.indexOf(dn.properties.id||dn.properties.parent)});var ut=ct!==j.sources.cold.length||tt.length>0;function wt(dn,Ct){var mn=j.get(dn).internal(te);j.ctx.events.currentModeRender(mn,function(Rn){j.sources[Ct].push(Rn)})}if(Se.forEach(function(dn){return wt(dn,"hot")}),tt.forEach(function(dn){return wt(dn,"cold")}),ut&&j.ctx.map.getSource(we).setData({type:z,features:j.sources.cold}),j.ctx.map.getSource(me).setData({type:z,features:j.sources.hot}),j._emitSelectionChange&&(j.ctx.map.fire("draw.selectionchange",{features:j.getSelected().map(function(dn){return dn.toGeoJSON()}),points:j.getSelectedCoordinates().map(function(dn){return{type:ze,properties:{},geometry:{type:F,coordinates:dn.coordinates}}})}),j._emitSelectionChange=!1),j._deletedFeaturesToEmit.length){var Qt=j._deletedFeaturesToEmit.map(function(dn){return dn.toGeoJSON()});j._deletedFeaturesToEmit=[],j.ctx.map.fire("draw.delete",{features:Qt})}function Kt(){j.isDirty=!1,j.clearChangedIds()}Kt(),j.ctx.map.fire("draw.render",{})}function yi(j){var te,Se=this;this._features={},this._featureIds=new It,this._selectedFeatureIds=new It,this._selectedCoordinates=[],this._changedFeatureIds=new It,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=j,this.sources={hot:[],cold:[]},this.render=function(){te||(te=requestAnimationFrame(function(){te=null,Fs.call(Se)}))},this.isDirty=!1}function Pu(j,te){var Se=j._selectedCoordinates.filter(function(tt){return j._selectedFeatureIds.has(tt.feature_id)});j._selectedCoordinates.length===Se.length||te.silent||(j._emitSelectionChange=!0),j._selectedCoordinates=Se}yi.prototype.createRenderBatch=function(){var j=this,te=this.render,Se=0;return this.render=function(){Se++},function(){j.render=te,Se>0&&j.render()}},yi.prototype.setDirty=function(){return this.isDirty=!0,this},yi.prototype.featureChanged=function(j){return this._changedFeatureIds.add(j),this},yi.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},yi.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},yi.prototype.getAllIds=function(){return this._featureIds.values()},yi.prototype.add=function(j){return this.featureChanged(j.id),this._features[j.id]=j,this._featureIds.add(j.id),this},yi.prototype.delete=function(j,te){var Se=this;return void 0===te&&(te={}),ta(j).forEach(function(tt){Se._featureIds.has(tt)&&(Se._featureIds.delete(tt),Se._selectedFeatureIds.delete(tt),te.silent||-1===Se._deletedFeaturesToEmit.indexOf(Se._features[tt])&&Se._deletedFeaturesToEmit.push(Se._features[tt]),delete Se._features[tt],Se.isDirty=!0)}),Pu(this,te),this},yi.prototype.get=function(j){return this._features[j]},yi.prototype.getAll=function(){var j=this;return Object.keys(this._features).map(function(te){return j._features[te]})},yi.prototype.select=function(j,te){var Se=this;return void 0===te&&(te={}),ta(j).forEach(function(tt){Se._selectedFeatureIds.has(tt)||(Se._selectedFeatureIds.add(tt),Se._changedFeatureIds.add(tt),te.silent||(Se._emitSelectionChange=!0))}),this},yi.prototype.deselect=function(j,te){var Se=this;return void 0===te&&(te={}),ta(j).forEach(function(tt){Se._selectedFeatureIds.has(tt)&&(Se._selectedFeatureIds.delete(tt),Se._changedFeatureIds.add(tt),te.silent||(Se._emitSelectionChange=!0))}),Pu(this,te),this},yi.prototype.clearSelected=function(j){return void 0===j&&(j={}),this.deselect(this._selectedFeatureIds.values(),{silent:j.silent}),this},yi.prototype.setSelected=function(j,te){var Se=this;return void 0===te&&(te={}),j=ta(j),this.deselect(this._selectedFeatureIds.values().filter(function(tt){return-1===j.indexOf(tt)}),{silent:te.silent}),this.select(j.filter(function(tt){return!Se._selectedFeatureIds.has(tt)}),{silent:te.silent}),this},yi.prototype.setSelectedCoordinates=function(j){return this._selectedCoordinates=j,this._emitSelectionChange=!0,this},yi.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},yi.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},yi.prototype.getSelected=function(){var j=this;return this._selectedFeatureIds.values().map(function(te){return j.get(te)})},yi.prototype.getSelectedCoordinates=function(){var j=this;return this._selectedCoordinates.map(function(te){return{coordinates:j.get(te.feature_id).getCoordinate(te.coord_path)}})},yi.prototype.isSelected=function(j){return this._selectedFeatureIds.has(j)},yi.prototype.setFeatureProperty=function(j,te,Se){this.get(j).setProperty(te,Se),this.featureChanged(j)},yi.prototype.storeMapConfig=function(){var j=this;Ti.forEach(function(te){j.ctx.map[te]&&(j._mapInitialConfig[te]=j.ctx.map[te].isEnabled())})},yi.prototype.restoreMapConfig=function(){var j=this;Object.keys(this._mapInitialConfig).forEach(function(te){j._mapInitialConfig[te]?j.ctx.map[te].enable():j.ctx.map[te].disable()})},yi.prototype.getInitialConfigValue=function(j){return void 0===this._mapInitialConfig[j]||this._mapInitialConfig[j]};var si=function(){for(var j=arguments,te={},Se=0;Se<arguments.length;Se++){var tt=j[Se];for(var ct in tt)he.call(tt,ct)&&(te[ct]=tt[ct])}return te},he=Object.prototype.hasOwnProperty,_e=["mode","feature","mouse"];function Te(j){var te=null,Se=null,tt={onRemove:function(){return j.map.off("load",tt.connect),clearInterval(Se),tt.removeLayers(),j.store.restoreMapConfig(),j.ui.removeButtons(),j.events.removeEventListeners(),j.ui.clearMapClasses(),j.map=null,j.container=null,j.store=null,te&&te.parentNode&&te.parentNode.removeChild(te),te=null,this},connect:function(){j.map.off("load",tt.connect),clearInterval(Se),tt.addLayers(),j.store.storeMapConfig(),j.events.addEventListeners()},onAdd:function(ct){var ut=ct.fire;return ct.fire=function(wt,Qt){var Kt=arguments;return 1===ut.length&&1!==arguments.length&&(Kt=[si({},{type:wt},Qt)]),ut.apply(ct,Kt)},j.map=ct,j.events=function(wt){var Qt=Object.keys(wt.options.modes).reduce(function(Vt,Dn){return Vt[Dn]=function fu(j){var te=Object.keys(j);return function(Se,tt){void 0===tt&&(tt={});var ct={},ut=te.reduce(function(wt,Qt){return wt[Qt]=j[Qt],wt},new Cr(Se));return{start:function(){var wt=this;ct=ut.onSetup(tt),Wu.forEach(function(Qt){var Kt,dn=ml[Qt],Ct=function(){return!1};j[dn]&&(Ct=function(){return!0}),wt.on(Qt,Ct,(Kt=dn,function(mn){return ut[Kt](ct,mn)}))})},stop:function(){ut.onStop(ct)},trash:function(){ut.onTrash(ct)},combineFeatures:function(){ut.onCombineFeatures(ct)},uncombineFeatures:function(){ut.onUncombineFeatures(ct)},render:function(wt,Qt){ut.toDisplayFeatures(ct,wt,Qt)}}}}(wt.options.modes[Dn]),Vt},{}),Kt={},dn={},Ct={},mn=null,Rn=null;Ct.drag=function(Vt,Dn){Dn({point:Vt.point,time:(new Date).getTime()})?(wt.ui.queueMapClasses({mouse:"drag"}),Rn.drag(Vt)):Vt.originalEvent.stopPropagation()},Ct.mousedrag=function(Vt){Ct.drag(Vt,function(Dn){return!_t(Kt,Dn)})},Ct.touchdrag=function(Vt){Ct.drag(Vt,function(Dn){return!Gt(dn,Dn)})},Ct.mousemove=function(Vt){if(1===(void 0!==Vt.originalEvent.buttons?Vt.originalEvent.buttons:Vt.originalEvent.which))return Ct.mousedrag(Vt);var Dn=ce(Vt,wt);Vt.featureTarget=Dn,Rn.mousemove(Vt)},Ct.mousedown=function(Vt){Kt={time:(new Date).getTime(),point:Vt.point};var Dn=ce(Vt,wt);Vt.featureTarget=Dn,Rn.mousedown(Vt)},Ct.mouseup=function(Vt){var Dn=ce(Vt,wt);Vt.featureTarget=Dn,_t(Kt,{point:Vt.point,time:(new Date).getTime()})?Rn.click(Vt):Rn.mouseup(Vt)},Ct.mouseout=function(Vt){Rn.mouseout(Vt)},Ct.touchstart=function(Vt){if(Vt.originalEvent.preventDefault(),wt.options.touchEnabled){dn={time:(new Date).getTime(),point:Vt.point};var Dn=Le.touch(Vt,null,wt)[0];Vt.featureTarget=Dn,Rn.touchstart(Vt)}},Ct.touchmove=function(Vt){if(Vt.originalEvent.preventDefault(),wt.options.touchEnabled)return Rn.touchmove(Vt),Ct.touchdrag(Vt)},Ct.touchend=function(Vt){if(Vt.originalEvent.preventDefault(),wt.options.touchEnabled){var Dn=Le.touch(Vt,null,wt)[0];Vt.featureTarget=Dn,Gt(dn,{time:(new Date).getTime(),point:Vt.point})?Rn.tap(Vt):Rn.touchend(Vt)}};var Jn=function(Vt){return!(8===Vt||46===Vt||Vt>=48&&Vt<=57)};function Wn(Vt,Dn,Pr){void 0===Pr&&(Pr={}),Rn.stop();var Gn=Qt[Vt];if(void 0===Gn)throw new Error(Vt+" is not valid");mn=Vt;var oi=Gn(wt,Dn);Rn=X(oi,wt),Pr.silent||wt.map.fire("draw.modechange",{mode:Vt}),wt.store.setDirty(),wt.store.render()}Ct.keydown=function(Vt){"mapboxgl-canvas"===(Vt.srcElement||Vt.target).classList[0]&&(8!==Vt.keyCode&&46!==Vt.keyCode||!wt.options.controls.trash?Jn(Vt.keyCode)?Rn.keydown(Vt):49===Vt.keyCode&&wt.options.controls.point?Wn(dt.DRAW_POINT):50===Vt.keyCode&&wt.options.controls.line_string?Wn(dt.DRAW_LINE_STRING):51===Vt.keyCode&&wt.options.controls.polygon&&Wn(dt.DRAW_POLYGON):(Vt.preventDefault(),Rn.trash()))},Ct.keyup=function(Vt){Jn(Vt.keyCode)&&Rn.keyup(Vt)},Ct.zoomend=function(){wt.store.changeZoom()},Ct.data=function(Vt){if("style"===Vt.dataType){var Dn=wt.setup,Pr=wt.map,oi=wt.store;wt.options.styles.some(function(Vn){return Pr.getLayer(Vn.id)})||(Dn.addLayers(),oi.setDirty(),oi.render())}};var uo={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){Rn=X(Qt[mn=wt.options.defaultMode](wt),wt)},changeMode:Wn,actionable:function(Vt){var Dn=!1;Object.keys(Vt).forEach(function(Pr){if(void 0===uo[Pr])throw new Error("Invalid action type");uo[Pr]!==Vt[Pr]&&(Dn=!0),uo[Pr]=Vt[Pr]}),Dn&&wt.map.fire("draw.actionable",{actions:uo})},currentModeName:function(){return mn},currentModeRender:function(Vt,Dn){return Rn.render(Vt,Dn)},fire:function(Vt,Dn){Ct[Vt]&&Ct[Vt](Dn)},addEventListeners:function(){wt.map.on("mousemove",Ct.mousemove),wt.map.on("mousedown",Ct.mousedown),wt.map.on("mouseup",Ct.mouseup),wt.map.on("data",Ct.data),wt.map.on("touchmove",Ct.touchmove),wt.map.on("touchstart",Ct.touchstart),wt.map.on("touchend",Ct.touchend),wt.container.addEventListener("mouseout",Ct.mouseout),wt.options.keybindings&&(wt.container.addEventListener("keydown",Ct.keydown),wt.container.addEventListener("keyup",Ct.keyup))},removeEventListeners:function(){wt.map.off("mousemove",Ct.mousemove),wt.map.off("mousedown",Ct.mousedown),wt.map.off("mouseup",Ct.mouseup),wt.map.off("data",Ct.data),wt.map.off("touchmove",Ct.touchmove),wt.map.off("touchstart",Ct.touchstart),wt.map.off("touchend",Ct.touchend),wt.container.removeEventListener("mouseout",Ct.mouseout),wt.options.keybindings&&(wt.container.removeEventListener("keydown",Ct.keydown),wt.container.removeEventListener("keyup",Ct.keyup))},trash:function(Vt){Rn.trash(Vt)},combineFeatures:function(){Rn.combineFeatures()},uncombineFeatures:function(){Rn.uncombineFeatures()},getMode:function(){return mn}}}(j),j.ui=function(wt){var Qt={},Kt=null,dn={mode:null,feature:null,mouse:null},Ct={mode:null,feature:null,mouse:null};function mn(Vt){Ct=si(Ct,Vt)}function Rn(){var Vt,Dn;if(wt.container){var Pr=[],Gn=[];_e.forEach(function(oi){Ct[oi]!==dn[oi]&&(Pr.push(oi+"-"+dn[oi]),null!==Ct[oi]&&Gn.push(oi+"-"+Ct[oi]))}),Pr.length>0&&(Vt=wt.container.classList).remove.apply(Vt,Pr),Gn.length>0&&(Dn=wt.container.classList).add.apply(Dn,Gn),dn=si(dn,Ct)}}function Jn(Vt,Dn){void 0===Dn&&(Dn={});var Pr=document.createElement("button");return Pr.className="mapbox-gl-draw_ctrl-draw-btn "+Dn.className,Pr.setAttribute("title",Dn.title),Dn.container.appendChild(Pr),Pr.addEventListener("click",function(Gn){if(Gn.preventDefault(),Gn.stopPropagation(),Gn.target===Kt)return Wn(),void Dn.onDeactivate();uo(Vt),Dn.onActivate()},!0),Pr}function Wn(){Kt&&(Kt.classList.remove(Q),Kt=null)}function uo(Vt){Wn();var Dn=Qt[Vt];Dn&&Dn&&"trash"!==Vt&&(Dn.classList.add(Q),Kt=Dn)}return{setActiveButton:uo,queueMapClasses:mn,updateMapClasses:Rn,clearMapClasses:function(){mn({mode:null,feature:null,mouse:null}),Rn()},addButtons:function(){var Vt=wt.options.controls,Dn=document.createElement("div");return Dn.className="mapboxgl-ctrl-group mapboxgl-ctrl",Vt&&(Vt[He.LINE]&&(Qt[He.LINE]=Jn(He.LINE,{container:Dn,className:"mapbox-gl-draw_line",title:"LineString tool "+(wt.options.keybindings?"(l)":""),onActivate:function(){return wt.events.changeMode(dt.DRAW_LINE_STRING)},onDeactivate:function(){return wt.events.trash()}})),Vt[He.POLYGON]&&(Qt[He.POLYGON]=Jn(He.POLYGON,{container:Dn,className:"mapbox-gl-draw_polygon",title:"Polygon tool "+(wt.options.keybindings?"(p)":""),onActivate:function(){return wt.events.changeMode(dt.DRAW_POLYGON)},onDeactivate:function(){return wt.events.trash()}})),Vt[He.POINT]&&(Qt[He.POINT]=Jn(He.POINT,{container:Dn,className:"mapbox-gl-draw_point",title:"Marker tool "+(wt.options.keybindings?"(m)":""),onActivate:function(){return wt.events.changeMode(dt.DRAW_POINT)},onDeactivate:function(){return wt.events.trash()}})),Vt.trash&&(Qt.trash=Jn("trash",{container:Dn,className:"mapbox-gl-draw_trash",title:"Delete",onActivate:function(){wt.events.trash()}})),Vt.combine_features&&(Qt.combine_features=Jn("combineFeatures",{container:Dn,className:"mapbox-gl-draw_combine",title:"Combine",onActivate:function(){wt.events.combineFeatures()}})),Vt.uncombine_features&&(Qt.uncombine_features=Jn("uncombineFeatures",{container:Dn,className:"mapbox-gl-draw_uncombine",title:"Uncombine",onActivate:function(){wt.events.uncombineFeatures()}}))),Dn},removeButtons:function(){Object.keys(Qt).forEach(function(Vt){var Dn=Qt[Vt];Dn.parentNode&&Dn.parentNode.removeChild(Dn),delete Qt[Vt]})}}}(j),j.container=ct.getContainer(),j.store=new yi(j),te=j.ui.addButtons(),j.options.boxSelect&&(ct.boxZoom.disable(),ct.dragPan.disable(),ct.dragPan.enable()),ct.loaded()?tt.connect():(ct.on("load",tt.connect),Se=setInterval(function(){ct.loaded()&&tt.connect()},16)),j.events.start(),te},addLayers:function(){j.map.addSource(we,{data:{type:z,features:[]},type:"geojson"}),j.map.addSource(me,{data:{type:z,features:[]},type:"geojson"}),j.options.styles.forEach(function(ct){j.map.addLayer(ct)}),j.store.setDirty(!0),j.store.render()},removeLayers:function(){j.options.styles.forEach(function(ct){j.map.getLayer(ct.id)&&j.map.removeLayer(ct.id)}),j.map.getSource(we)&&j.map.removeSource(we),j.map.getSource(me)&&j.map.removeSource(me)}};return j.setup=tt,tt}function Oe(j){return function(te){var Se=te.featureTarget;return!!Se&&!!Se.properties&&Se.properties.meta===j}}function Be(j){return!!j.featureTarget&&!!j.featureTarget.properties&&j.featureTarget.properties.active===er&&j.featureTarget.properties.meta===ar}function it(j){return!!j.featureTarget&&!!j.featureTarget.properties&&j.featureTarget.properties.active===lr&&j.featureTarget.properties.meta===ar}function st(j){return void 0===j.featureTarget}function nt(j){var te=j.featureTarget;return!!te&&!!te.properties&&te.properties.meta===ne}function ke(j){return!!j.originalEvent&&!0===j.originalEvent.shiftKey}function Xe(j){return 27===j.keyCode}function qt(j){return 13===j.keyCode}var Jt=yt;function yt(j,te){this.x=j,this.y=te}function Lt(j,te){var Se=te.getBoundingClientRect();return new Jt(j.clientX-Se.left-(te.clientLeft||0),j.clientY-Se.top-(te.clientTop||0))}function un(j,te,Se,tt){return{type:ze,properties:{meta:ne,parent:j,coord_path:Se,active:tt?er:lr},geometry:{type:F,coordinates:te}}}function ln(j,te,Se){void 0===te&&(te={}),void 0===Se&&(Se=null);var tt,ct=j.geometry,ut=ct.type,wt=ct.coordinates,Qt=j.properties&&j.properties.id,Kt=[];function dn(mn,Rn){var Jn="",Wn=null;mn.forEach(function(uo,Vt){var Dn=null!=Rn?Rn+"."+Vt:String(Vt),Pr=un(Qt,uo,Dn,Ct(Dn));if(te.midpoints&&Wn){var Gn=function(Vn,Na,mr){var Nr=Na.geometry.coordinates,Xi=mr.geometry.coordinates;if(Nr[1]>85||Nr[1]<-85||Xi[1]>85||Xi[1]<-85)return null;var lo={lng:(Nr[0]+Xi[0])/2,lat:(Nr[1]+Xi[1])/2};return{type:ze,properties:{meta:Zt,parent:Vn,lng:lo.lng,lat:lo.lat,coord_path:mr.properties.coord_path},geometry:{type:F,coordinates:[lo.lng,lo.lat]}}}(Qt,Wn,Pr);Gn&&Kt.push(Gn)}Wn=Pr;var oi=JSON.stringify(uo);Jn!==oi&&Kt.push(Pr),0===Vt&&(Jn=oi)})}function Ct(mn){return!!te.selectedPaths&&-1!==te.selectedPaths.indexOf(mn)}return ut===F?Kt.push(un(Qt,wt,Se,Ct(Se))):ut===P?wt.forEach(function(mn,Rn){dn(mn,null!==Se?Se+"."+Rn:String(Rn))}):ut===N?dn(wt,Se):0===ut.indexOf("Multi")&&(tt=ut.replace("Multi",""),wt.forEach(function(mn,Rn){Kt=Kt.concat(ln({type:ze,properties:j.properties,geometry:{type:tt,coordinates:mn}},te,Rn))})),Kt}yt.prototype={clone:function(){return new yt(this.x,this.y)},add:function(j){return this.clone()._add(j)},sub:function(j){return this.clone()._sub(j)},multByPoint:function(j){return this.clone()._multByPoint(j)},divByPoint:function(j){return this.clone()._divByPoint(j)},mult:function(j){return this.clone()._mult(j)},div:function(j){return this.clone()._div(j)},rotate:function(j){return this.clone()._rotate(j)},rotateAround:function(j,te){return this.clone()._rotateAround(j,te)},matMult:function(j){return this.clone()._matMult(j)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(j){return this.x===j.x&&this.y===j.y},dist:function(j){return Math.sqrt(this.distSqr(j))},distSqr:function(j){var te=j.x-this.x,Se=j.y-this.y;return te*te+Se*Se},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(j){return Math.atan2(this.y-j.y,this.x-j.x)},angleWith:function(j){return this.angleWithSep(j.x,j.y)},angleWithSep:function(j,te){return Math.atan2(this.x*te-this.y*j,this.x*j+this.y*te)},_matMult:function(j){var Se=j[2]*this.x+j[3]*this.y;return this.x=j[0]*this.x+j[1]*this.y,this.y=Se,this},_add:function(j){return this.x+=j.x,this.y+=j.y,this},_sub:function(j){return this.x-=j.x,this.y-=j.y,this},_mult:function(j){return this.x*=j,this.y*=j,this},_div:function(j){return this.x/=j,this.y/=j,this},_multByPoint:function(j){return this.x*=j.x,this.y*=j.y,this},_divByPoint:function(j){return this.x/=j.x,this.y/=j.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var j=this.y;return this.y=this.x,this.x=-j,this},_rotate:function(j){var te=Math.cos(j),Se=Math.sin(j),ct=Se*this.x+te*this.y;return this.x=te*this.x-Se*this.y,this.y=ct,this},_rotateAround:function(j,te){var Se=Math.cos(j),tt=Math.sin(j),ut=te.y+tt*(this.x-te.x)+Se*(this.y-te.y);return this.x=te.x+Se*(this.x-te.x)-tt*(this.y-te.y),this.y=ut,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},yt.convert=function(j){return j instanceof yt?j:Array.isArray(j)?new yt(j[0],j[1]):j};var In=function(j){setTimeout(function(){j.map&&j.map.doubleClickZoom&&j._ctx&&j._ctx.store&&j._ctx.store.getInitialConfigValue&&j._ctx.store.getInitialConfigValue("doubleClickZoom")&&j.map.doubleClickZoom.enable()},0)},Bt=function(j){setTimeout(function(){j.map&&j.map.doubleClickZoom&&j.map.doubleClickZoom.disable()},0)},tn=function(j){if(!j||!j.type)return null;var te=jt[j.type];return te?"geometry"===te?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:j}]}:"feature"===te?{type:"FeatureCollection",features:[j]}:"featurecollection"===te?j:void 0:null},jt={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function ir(j){switch(j&&j.type||null){case"FeatureCollection":return j.features=j.features.reduce(function(te,Se){return te.concat(ir(Se))},[]),j;case"Feature":return j.geometry?ir(j.geometry).map(function(te){var Se={type:"Feature",properties:JSON.parse(JSON.stringify(j.properties)),geometry:te};return void 0!==j.id&&(Se.id=j.id),Se}):[j];case"MultiPoint":return j.coordinates.map(function(te){return{type:"Point",coordinates:te}});case"MultiPolygon":return j.coordinates.map(function(te){return{type:"Polygon",coordinates:te}});case"MultiLineString":return j.coordinates.map(function(te){return{type:"LineString",coordinates:te}});case"GeometryCollection":return j.geometries.map(ir).reduce(function(te,Se){return te.concat(Se)},[]);case"Point":case"Polygon":case"LineString":return[j]}}var wn=Ht(function(j){var te=j.exports=function(Ct){return new Se(Ct)};function Se(Ct){this.value=Ct}function tt(Ct,mn,Rn){var Jn=[],Wn=[],uo=!0;return function Vt(Dn){var Pr=Rn?ct(Dn):Dn,Gn={},oi=!0,Vn={node:Pr,node_:Dn,path:[].concat(Jn),parent:Wn[Wn.length-1],parents:Wn,key:Jn.slice(-1)[0],isRoot:0===Jn.length,level:Jn.length,circular:null,update:function(Nr,Xi){Vn.isRoot||(Vn.parent.node[Vn.key]=Nr),Vn.node=Nr,Xi&&(oi=!1)},delete:function(Nr){delete Vn.parent.node[Vn.key],Nr&&(oi=!1)},remove:function(Nr){Qt(Vn.parent.node)?Vn.parent.node.splice(Vn.key,1):delete Vn.parent.node[Vn.key],Nr&&(oi=!1)},keys:null,before:function(Nr){Gn.before=Nr},after:function(Nr){Gn.after=Nr},pre:function(Nr){Gn.pre=Nr},post:function(Nr){Gn.post=Nr},stop:function(){uo=!1},block:function(){oi=!1}};if(!uo)return Vn;function Na(){if("object"==typeof Vn.node&&null!==Vn.node){Vn.keys&&Vn.node_===Vn.node||(Vn.keys=ut(Vn.node)),Vn.isLeaf=0==Vn.keys.length;for(var Nr=0;Nr<Wn.length;Nr++)if(Wn[Nr].node_===Dn){Vn.circular=Wn[Nr];break}}else Vn.isLeaf=!0,Vn.keys=null;Vn.notLeaf=!Vn.isLeaf,Vn.notRoot=!Vn.isRoot}Na();var mr=mn.call(Vn,Vn.node);return void 0!==mr&&Vn.update&&Vn.update(mr),Gn.before&&Gn.before.call(Vn,Vn.node),oi&&("object"!=typeof Vn.node||null===Vn.node||Vn.circular||(Wn.push(Vn),Na(),Kt(Vn.keys,function(Nr,Xi){Jn.push(Nr),Gn.pre&&Gn.pre.call(Vn,Vn.node[Nr],Nr);var lo=Vt(Vn.node[Nr]);Rn&&dn.call(Vn.node,Nr)&&(Vn.node[Nr]=lo.node),lo.isLast=Xi==Vn.keys.length-1,lo.isFirst=0==Xi,Gn.post&&Gn.post.call(Vn,lo),Jn.pop()}),Wn.pop()),Gn.after&&Gn.after.call(Vn,Vn.node)),Vn}(Ct).node}function ct(Ct){if("object"==typeof Ct&&null!==Ct){var mn;if(Qt(Ct))mn=[];else if("[object Date]"===wt(Ct))mn=new Date(Ct.getTime?Ct.getTime():Ct);else if("[object RegExp]"===wt(Ct))mn=new RegExp(Ct);else if("[object Error]"===wt(Ct))mn={message:Ct.message};else if(function(Wn){return"[object Boolean]"===wt(Wn)}(Ct))mn=new Boolean(Ct);else if(function(Wn){return"[object Number]"===wt(Wn)}(Ct))mn=new Number(Ct);else if(function(Wn){return"[object String]"===wt(Wn)}(Ct))mn=new String(Ct);else if(Object.create&&Object.getPrototypeOf)mn=Object.create(Object.getPrototypeOf(Ct));else if(Ct.constructor===Object)mn={};else{var Jn=function(){};Jn.prototype=Ct.constructor&&Ct.constructor.prototype||Ct.__proto__||{},mn=new Jn}return Kt(ut(Ct),function(Wn){mn[Wn]=Ct[Wn]}),mn}return Ct}Se.prototype.get=function(Ct){for(var mn=this.value,Rn=0;Rn<Ct.length;Rn++){var Jn=Ct[Rn];if(!mn||!dn.call(mn,Jn)){mn=void 0;break}mn=mn[Jn]}return mn},Se.prototype.has=function(Ct){for(var mn=this.value,Rn=0;Rn<Ct.length;Rn++){var Jn=Ct[Rn];if(!mn||!dn.call(mn,Jn))return!1;mn=mn[Jn]}return!0},Se.prototype.set=function(Ct,mn){for(var Rn=this.value,Jn=0;Jn<Ct.length-1;Jn++){var Wn=Ct[Jn];dn.call(Rn,Wn)||(Rn[Wn]={}),Rn=Rn[Wn]}return Rn[Ct[Jn]]=mn,mn},Se.prototype.map=function(Ct){return tt(this.value,Ct,!0)},Se.prototype.forEach=function(Ct){return this.value=tt(this.value,Ct,!1),this.value},Se.prototype.reduce=function(Ct,mn){var Rn=1===arguments.length,Jn=Rn?this.value:mn;return this.forEach(function(Wn){this.isRoot&&Rn||(Jn=Ct.call(this,Jn,Wn))}),Jn},Se.prototype.paths=function(){var Ct=[];return this.forEach(function(mn){Ct.push(this.path)}),Ct},Se.prototype.nodes=function(){var Ct=[];return this.forEach(function(mn){Ct.push(this.node)}),Ct},Se.prototype.clone=function(){var Ct=[],mn=[];return function Rn(Jn){for(var Wn=0;Wn<Ct.length;Wn++)if(Ct[Wn]===Jn)return mn[Wn];if("object"==typeof Jn&&null!==Jn){var uo=ct(Jn);return Ct.push(Jn),mn.push(uo),Kt(ut(Jn),function(Vt){uo[Vt]=Rn(Jn[Vt])}),Ct.pop(),mn.pop(),uo}return Jn}(this.value)};var ut=Object.keys||function(Ct){var mn=[];for(var Rn in Ct)mn.push(Rn);return mn};function wt(Ct){return Object.prototype.toString.call(Ct)}var Qt=Array.isArray||function(Ct){return"[object Array]"===Object.prototype.toString.call(Ct)},Kt=function(Ct,mn){if(Ct.forEach)return Ct.forEach(mn);for(var Rn=0;Rn<Ct.length;Rn++)mn(Ct[Rn],Rn,Ct)};Kt(ut(Se.prototype),function(Ct){te[Ct]=function(mn){var Rn=[].slice.call(arguments,1),Jn=new Se(mn);return Jn[Ct].apply(Jn,Rn)}});var dn=Object.hasOwnProperty||function(Ct,mn){return mn in Ct}}),Ii=zn;function zn(j){if(!(this instanceof zn))return new zn(j);this._bbox=j||[1/0,1/0,-1/0,-1/0],this._valid=!!j}zn.prototype.include=function(j){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],j[0]),this._bbox[1]=Math.min(this._bbox[1],j[1]),this._bbox[2]=Math.max(this._bbox[2],j[0]),this._bbox[3]=Math.max(this._bbox[3],j[1]),this},zn.prototype.equals=function(j){var te;return te=j instanceof zn?j.bbox():j,this._bbox[0]==te[0]&&this._bbox[1]==te[1]&&this._bbox[2]==te[2]&&this._bbox[3]==te[3]},zn.prototype.center=function(j){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},zn.prototype.union=function(j){var te;return this._valid=!0,te=j instanceof zn?j.bbox():j,this._bbox[0]=Math.min(this._bbox[0],te[0]),this._bbox[1]=Math.min(this._bbox[1],te[1]),this._bbox[2]=Math.max(this._bbox[2],te[2]),this._bbox[3]=Math.max(this._bbox[3],te[3]),this},zn.prototype.bbox=function(){return this._valid?this._bbox:null},zn.prototype.contains=function(j){if(!j)return this._fastContains();if(!this._valid)return null;var te=j[0],Se=j[1];return this._bbox[0]<=te&&this._bbox[1]<=Se&&this._bbox[2]>=te&&this._bbox[3]>=Se},zn.prototype.intersect=function(j){return this._valid?(te=j instanceof zn?j.bbox():j,!(this._bbox[0]>te[2]||this._bbox[2]<te[0]||this._bbox[3]<te[1]||this._bbox[1]>te[3])):null;var te},zn.prototype._fastContains=function(){return this._valid?new Function("ll","return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]"):new Function("return null;")},zn.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Di={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},Fi=Object.keys(Di),$r=function(j){return _i(j).bbox()};function _i(j){for(var te=Ii(),Se=function(j){if(!j)return[];var te=ir(tn(j)),Se=[];return te.features.forEach(function(tt){tt.geometry&&(Se=Se.concat(function ct(ut){return Array.isArray(ut)&&ut.length&&"number"==typeof ut[0]?[ut]:ut.reduce(function(wt,Qt){return Array.isArray(Qt)&&Array.isArray(Qt[0])?wt.concat(ct(Qt)):(wt.push(Qt),wt)},[])}(tt.geometry.coordinates)))}),Se}(j),tt=0;tt<Se.length;tt++)te.include(Se[tt]);return te}function Hi(j,te){var Se=-90,tt=90,ct=-90,ut=90,wt=270,Qt=-270;j.forEach(function(dn){var Ct=$r(dn),mn=Ct[1],Rn=Ct[3],Jn=Ct[0],Wn=Ct[2];mn>Se&&(Se=mn),Rn<tt&&(tt=Rn),Rn>ct&&(ct=Rn),mn<ut&&(ut=mn),Jn<wt&&(wt=Jn),Wn>Qt&&(Qt=Wn)});var Kt=te;return Se+Kt.lat>85&&(Kt.lat=85-Se),ct+Kt.lat>90&&(Kt.lat=90-ct),tt+Kt.lat<-85&&(Kt.lat=-85-tt),ut+Kt.lat<-90&&(Kt.lat=-90-ut),wt+Kt.lng<=-270&&(Kt.lng+=360*Math.ceil(Math.abs(Kt.lng)/360)),Qt+Kt.lng>=270&&(Kt.lng-=360*Math.ceil(Math.abs(Kt.lng)/360)),Kt}function fi(j,te){var Se=Hi(j.map(function(tt){return tt.toGeoJSON()}),te);j.forEach(function(tt){var ct,ut=tt.getCoordinates(),wt=function(Kt){var dn={lng:Kt[0]+Se.lng,lat:Kt[1]+Se.lat};return[dn.lng,dn.lat]},Qt=function(Kt){return Kt.map(function(dn){return wt(dn)})};tt.type===F?ct=wt(ut):tt.type===N||"MultiPoint"===tt.type?ct=ut.map(wt):tt.type===P||"MultiLineString"===tt.type?ct=ut.map(Qt):"MultiPolygon"===tt.type&&(ct=ut.map(function(Kt){return Kt.map(function(dn){return Qt(dn)})})),tt.incomingCoords(ct)})}$r.polygon=function(j){return _i(j).polygon()},$r.bboxify=function(j){return wn(j).map(function(te){te&&Fi.some(function(Se){return!!te[Se]&&-1!==Di[Se].indexOf(te.type)})&&(te.bbox=_i(te).bbox(),this.update(te))})};var $n={onSetup:function(j){var te=this,Se={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:j.featureIds||[]};return this.setSelected(Se.initiallySelectedFeatureIds.filter(function(tt){return void 0!==te.getFeature(tt)})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),Se},fireUpdate:function(){this.map.fire(Rt,{action:"move",features:this.getSelected().map(function(j){return j.toGeoJSON()})})},fireActionable:function(){var j=this,te=this.getSelected(),Se=te.filter(function(Qt){return j.isInstanceOf("MultiFeature",Qt)}),tt=!1;if(te.length>1){tt=!0;var ct=te[0].type.replace("Multi","");te.forEach(function(Qt){Qt.type.replace("Multi","")!==ct&&(tt=!1)})}this.setActionableState({combineFeatures:tt,uncombineFeatures:Se.length>0,trash:te.length>0})},getUniqueIds:function(j){return j.length?j.map(function(te){return te.properties.id}).filter(function(te){return void 0!==te}).reduce(function(te,Se){return te.add(Se),te},new It).values():[]},stopExtendedInteractions:function(j){j.boxSelectElement&&(j.boxSelectElement.parentNode&&j.boxSelectElement.parentNode.removeChild(j.boxSelectElement),j.boxSelectElement=null),this.map.dragPan.enable(),j.boxSelecting=!1,j.canBoxSelect=!1,j.dragMoving=!1,j.canDragMove=!1},onStop:function(){In(this)},onMouseMove:function(j){return this.stopExtendedInteractions(j),!0},onMouseOut:function(j){return!j.dragMoving||this.fireUpdate()}};$n.onTap=$n.onClick=function(j,te){return st(te)?this.clickAnywhere(j,te):Oe(ne)(te)?this.clickOnVertex(j,te):(Se=te).featureTarget&&Se.featureTarget.properties&&Se.featureTarget.properties.meta===ar?this.clickOnFeature(j,te):void 0;var Se},$n.clickAnywhere=function(j){var te=this,Se=this.getSelectedIds();Se.length&&(this.clearSelectedFeatures(),Se.forEach(function(tt){return te.doRender(tt)})),In(this),this.stopExtendedInteractions(j)},$n.clickOnVertex=function(j,te){this.changeMode(dt.DIRECT_SELECT,{featureId:te.featureTarget.properties.parent,coordPath:te.featureTarget.properties.coord_path,startPos:te.lngLat}),this.updateUIClasses({mouse:fe})},$n.startOnActiveFeature=function(j,te){this.stopExtendedInteractions(j),this.map.dragPan.disable(),this.doRender(te.featureTarget.properties.id),j.canDragMove=!0,j.dragMoveLocation=te.lngLat},$n.clickOnFeature=function(j,te){var Se=this;Bt(this),this.stopExtendedInteractions(j);var tt=ke(te),ct=this.getSelectedIds(),ut=te.featureTarget.properties.id,wt=this.isSelected(ut);if(!tt&&wt&&this.getFeature(ut).type!==F)return this.changeMode(dt.DIRECT_SELECT,{featureId:ut});wt&&tt?(this.deselect(ut),this.updateUIClasses({mouse:Ce}),1===ct.length&&In(this)):!wt&&tt?(this.select(ut),this.updateUIClasses({mouse:fe})):wt||tt||(ct.forEach(function(Qt){return Se.doRender(Qt)}),this.setSelected(ut),this.updateUIClasses({mouse:fe})),this.doRender(ut)},$n.onMouseDown=function(j,te){return Be(te)?this.startOnActiveFeature(j,te):this.drawConfig.boxSelect&&(Se=te).originalEvent&&Se.originalEvent.shiftKey&&0===Se.originalEvent.button?this.startBoxSelect(j,te):void 0;var Se},$n.startBoxSelect=function(j,te){this.stopExtendedInteractions(j),this.map.dragPan.disable(),j.boxSelectStartLocation=Lt(te.originalEvent,this.map.getContainer()),j.canBoxSelect=!0},$n.onTouchStart=function(j,te){if(Be(te))return this.startOnActiveFeature(j,te)},$n.onDrag=function(j,te){return j.canDragMove?this.dragMove(j,te):this.drawConfig.boxSelect&&j.canBoxSelect?this.whileBoxSelect(j,te):void 0},$n.whileBoxSelect=function(j,te){j.boxSelecting=!0,this.updateUIClasses({mouse:oe}),j.boxSelectElement||(j.boxSelectElement=document.createElement("div"),j.boxSelectElement.classList.add("mapbox-gl-draw_boxselect"),this.map.getContainer().appendChild(j.boxSelectElement));var Se=Lt(te.originalEvent,this.map.getContainer()),tt=Math.min(j.boxSelectStartLocation.x,Se.x),ct=Math.max(j.boxSelectStartLocation.x,Se.x),ut=Math.min(j.boxSelectStartLocation.y,Se.y),wt=Math.max(j.boxSelectStartLocation.y,Se.y),Qt="translate("+tt+"px, "+ut+"px)";j.boxSelectElement.style.transform=Qt,j.boxSelectElement.style.WebkitTransform=Qt,j.boxSelectElement.style.width=ct-tt+"px",j.boxSelectElement.style.height=wt-ut+"px"},$n.dragMove=function(j,te){j.dragMoving=!0,te.originalEvent.stopPropagation();var Se={lng:te.lngLat.lng-j.dragMoveLocation.lng,lat:te.lngLat.lat-j.dragMoveLocation.lat};fi(this.getSelected(),Se),j.dragMoveLocation=te.lngLat},$n.onMouseUp=function(j,te){var Se=this;if(j.dragMoving)this.fireUpdate();else if(j.boxSelecting){var tt=[j.boxSelectStartLocation,Lt(te.originalEvent,this.map.getContainer())],ct=this.featuresAt(null,tt,"click"),ut=this.getUniqueIds(ct).filter(function(wt){return!Se.isSelected(wt)});ut.length&&(this.select(ut),ut.forEach(function(wt){return Se.doRender(wt)}),this.updateUIClasses({mouse:fe}))}this.stopExtendedInteractions(j)},$n.toDisplayFeatures=function(j,te,Se){te.properties.active=this.isSelected(te.properties.id)?er:lr,Se(te),this.fireActionable(),te.properties.active===er&&te.geometry.type!==F&&ln(te).forEach(Se)},$n.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},$n.onCombineFeatures=function(){var j=this.getSelected();if(!(0===j.length||j.length<2)){for(var te=[],Se=[],tt=j[0].type.replace("Multi",""),ct=0;ct<j.length;ct++){var ut=j[ct];if(ut.type.replace("Multi","")!==tt)return;ut.type.includes("Multi")?ut.getCoordinates().forEach(function(Qt){te.push(Qt)}):te.push(ut.getCoordinates()),Se.push(ut.toGeoJSON())}if(Se.length>1){var wt=this.newFeature({type:ze,properties:Se[0].properties,geometry:{type:"Multi"+tt,coordinates:te}});this.addFeature(wt),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([wt.id]),this.map.fire("draw.combine",{createdFeatures:[wt.toGeoJSON()],deletedFeatures:Se})}this.fireActionable()}},$n.onUncombineFeatures=function(){var j=this,te=this.getSelected();if(0!==te.length){for(var Se=[],tt=[],ct=function(wt){var Qt=te[wt];j.isInstanceOf("MultiFeature",Qt)&&(Qt.getFeatures().forEach(function(Kt){j.addFeature(Kt),Kt.properties=Qt.properties,Se.push(Kt.toGeoJSON()),j.select([Kt.id])}),j.deleteFeature(Qt.id,{silent:!0}),tt.push(Qt.toGeoJSON()))},ut=0;ut<te.length;ut++)ct(ut);Se.length>1&&this.map.fire("draw.uncombine",{createdFeatures:Se,deletedFeatures:tt}),this.fireActionable()}};var so=Oe(ne),dr=Oe(Zt),Ho={fireUpdate:function(){this.map.fire(Rt,{action:"change_coordinates",features:this.getSelected().map(function(j){return j.toGeoJSON()})})},fireActionable:function(j){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:j.selectedCoordPaths.length>0})},startDragging:function(j,te){this.map.dragPan.disable(),j.canDragMove=!0,j.dragMoveLocation=te.lngLat},stopDragging:function(j){this.map.dragPan.enable(),j.dragMoving=!1,j.canDragMove=!1,j.dragMoveLocation=null},onVertex:function(j,te){this.startDragging(j,te);var Se=te.featureTarget.properties,tt=j.selectedCoordPaths.indexOf(Se.coord_path);ke(te)||-1!==tt?ke(te)&&-1===tt&&j.selectedCoordPaths.push(Se.coord_path):j.selectedCoordPaths=[Se.coord_path];var ct=this.pathsToCoordinates(j.featureId,j.selectedCoordPaths);this.setSelectedCoordinates(ct)},onMidpoint:function(j,te){this.startDragging(j,te);var Se=te.featureTarget.properties;j.feature.addCoordinate(Se.coord_path,Se.lng,Se.lat),this.fireUpdate(),j.selectedCoordPaths=[Se.coord_path]},pathsToCoordinates:function(j,te){return te.map(function(Se){return{feature_id:j,coord_path:Se}})},onFeature:function(j,te){0===j.selectedCoordPaths.length?this.startDragging(j,te):this.stopDragging(j)},dragFeature:function(j,te,Se){fi(this.getSelected(),Se),j.dragMoveLocation=te.lngLat},dragVertex:function(j,te,Se){for(var tt=j.selectedCoordPaths.map(function(Qt){return j.feature.getCoordinate(Qt)}),ct=Hi(tt.map(function(Qt){return{type:ze,properties:{},geometry:{type:F,coordinates:Qt}}}),Se),ut=0;ut<tt.length;ut++){var wt=tt[ut];j.feature.updateCoordinate(j.selectedCoordPaths[ut],wt[0]+ct.lng,wt[1]+ct.lat)}},clickNoTarget:function(){this.changeMode(dt.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(dt.SIMPLE_SELECT)},clickActiveFeature:function(j){j.selectedCoordPaths=[],this.clearSelectedCoordinates(),j.feature.changed()},onSetup:function(j){var te=j.featureId,Se=this.getFeature(te);if(!Se)throw new Error("You must provide a featureId to enter direct_select mode");if(Se.type===F)throw new TypeError("direct_select mode doesn't handle point features");var tt={featureId:te,feature:Se,dragMoveLocation:j.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:j.coordPath?[j.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(te,tt.selectedCoordPaths)),this.setSelected(te),Bt(this),this.setActionableState({trash:!0}),tt},onStop:function(){In(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(j,te,Se){j.featureId===te.properties.id?(te.properties.active=er,Se(te),ln(te,{map:this.map,midpoints:!0,selectedPaths:j.selectedCoordPaths}).forEach(Se)):(te.properties.active=lr,Se(te)),this.fireActionable(j)},onTrash:function(j){j.selectedCoordPaths.sort(function(te,Se){return Se.localeCompare(te,"en",{numeric:!0})}).forEach(function(te){return j.feature.removeCoordinate(te)}),this.fireUpdate(),j.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(j),!1===j.feature.isValid()&&(this.deleteFeature([j.featureId]),this.changeMode(dt.SIMPLE_SELECT,{}))},onMouseMove:function(j,te){var Se=Be(te),tt=so(te),ct=0===j.selectedCoordPaths.length;return this.updateUIClasses(Se&&ct||tt&&!ct?{mouse:fe}:{mouse:qe}),this.stopDragging(j),!0},onMouseOut:function(j){return j.dragMoving&&this.fireUpdate(),!0}};Ho.onTouchStart=Ho.onMouseDown=function(j,te){return so(te)?this.onVertex(j,te):Be(te)?this.onFeature(j,te):dr(te)?this.onMidpoint(j,te):void 0},Ho.onDrag=function(j,te){if(!0===j.canDragMove){j.dragMoving=!0,te.originalEvent.stopPropagation();var Se={lng:te.lngLat.lng-j.dragMoveLocation.lng,lat:te.lngLat.lat-j.dragMoveLocation.lat};j.selectedCoordPaths.length>0?this.dragVertex(j,te,Se):this.dragFeature(j,te,Se),j.dragMoveLocation=te.lngLat}},Ho.onClick=function(j,te){return st(te)?this.clickNoTarget(j,te):Be(te)?this.clickActiveFeature(j,te):it(te)?this.clickInactive(j,te):void this.stopDragging(j)},Ho.onTap=function(j,te){return st(te)?this.clickNoTarget(j,te):Be(te)?this.clickActiveFeature(j,te):it(te)?this.clickInactive(j,te):void 0},Ho.onTouchEnd=Ho.onMouseUp=function(j){j.dragMoving&&this.fireUpdate(),this.stopDragging(j)};var $a={};function fo(j,te){return!!j.lngLat&&j.lngLat.lng===te[0]&&j.lngLat.lat===te[1]}$a.onSetup=function(){var j=this.newFeature({type:ze,properties:{},geometry:{type:F,coordinates:[]}});return this.addFeature(j),this.clearSelectedFeatures(),this.updateUIClasses({mouse:oe}),this.activateUIButton(He.POINT),this.setActionableState({trash:!0}),{point:j}},$a.stopDrawingAndRemove=function(j){this.deleteFeature([j.point.id],{silent:!0}),this.changeMode(dt.SIMPLE_SELECT)},$a.onTap=$a.onClick=function(j,te){this.updateUIClasses({mouse:fe}),j.point.updateCoordinate("",te.lngLat.lng,te.lngLat.lat),this.map.fire(Ie,{features:[j.point.toGeoJSON()]}),this.changeMode(dt.SIMPLE_SELECT,{featureIds:[j.point.id]})},$a.onStop=function(j){this.activateUIButton(),j.point.getCoordinate().length||this.deleteFeature([j.point.id],{silent:!0})},$a.toDisplayFeatures=function(j,te,Se){var tt=te.properties.id===j.point.id;if(te.properties.active=tt?er:lr,!tt)return Se(te)},$a.onTrash=$a.stopDrawingAndRemove,$a.onKeyUp=function(j,te){if(Xe(te)||qt(te))return this.stopDrawingAndRemove(j,te)};var _r={onSetup:function(){var j=this.newFeature({type:ze,properties:{},geometry:{type:P,coordinates:[[]]}});return this.addFeature(j),this.clearSelectedFeatures(),Bt(this),this.updateUIClasses({mouse:oe}),this.activateUIButton(He.POLYGON),this.setActionableState({trash:!0}),{polygon:j,currentVertexPosition:0}},clickAnywhere:function(j,te){if(j.currentVertexPosition>0&&fo(te,j.polygon.coordinates[0][j.currentVertexPosition-1]))return this.changeMode(dt.SIMPLE_SELECT,{featureIds:[j.polygon.id]});this.updateUIClasses({mouse:oe}),j.polygon.updateCoordinate("0."+j.currentVertexPosition,te.lngLat.lng,te.lngLat.lat),j.currentVertexPosition++,j.polygon.updateCoordinate("0."+j.currentVertexPosition,te.lngLat.lng,te.lngLat.lat)},clickOnVertex:function(j){return this.changeMode(dt.SIMPLE_SELECT,{featureIds:[j.polygon.id]})},onMouseMove:function(j,te){j.polygon.updateCoordinate("0."+j.currentVertexPosition,te.lngLat.lng,te.lngLat.lat),nt(te)&&this.updateUIClasses({mouse:Ce})}};_r.onTap=_r.onClick=function(j,te){return nt(te)?this.clickOnVertex(j,te):this.clickAnywhere(j,te)},_r.onKeyUp=function(j,te){Xe(te)?(this.deleteFeature([j.polygon.id],{silent:!0}),this.changeMode(dt.SIMPLE_SELECT)):qt(te)&&this.changeMode(dt.SIMPLE_SELECT,{featureIds:[j.polygon.id]})},_r.onStop=function(j){this.updateUIClasses({mouse:qe}),In(this),this.activateUIButton(),void 0!==this.getFeature(j.polygon.id)&&(j.polygon.removeCoordinate("0."+j.currentVertexPosition),j.polygon.isValid()?this.map.fire(Ie,{features:[j.polygon.toGeoJSON()]}):(this.deleteFeature([j.polygon.id],{silent:!0}),this.changeMode(dt.SIMPLE_SELECT,{},{silent:!0})))},_r.toDisplayFeatures=function(j,te,Se){var tt=te.properties.id===j.polygon.id;if(te.properties.active=tt?er:lr,!tt)return Se(te);if(0!==te.geometry.coordinates.length){var ct=te.geometry.coordinates[0].length;if(!(ct<3)){if(te.properties.meta=ar,Se(un(j.polygon.id,te.geometry.coordinates[0][0],"0.0",!1)),ct>3){var ut=te.geometry.coordinates[0].length-3;Se(un(j.polygon.id,te.geometry.coordinates[0][ut],"0."+ut,!1))}if(ct<=4&&(Se({type:ze,properties:te.properties,geometry:{coordinates:[[te.geometry.coordinates[0][0][0],te.geometry.coordinates[0][0][1]],[te.geometry.coordinates[0][1][0],te.geometry.coordinates[0][1][1]]],type:N}}),3===ct))return;return Se(te)}}},_r.onTrash=function(j){this.deleteFeature([j.polygon.id],{silent:!0}),this.changeMode(dt.SIMPLE_SELECT)};var Cs={onSetup:function(j){var te,Se,tt=(j=j||{}).featureId,ct="forward";if(tt){if(!(te=this.getFeature(tt)))throw new Error("Could not find a feature with the provided featureId");var ut=j.from;if(ut&&"Feature"===ut.type&&ut.geometry&&"Point"===ut.geometry.type&&(ut=ut.geometry),ut&&"Point"===ut.type&&ut.coordinates&&2===ut.coordinates.length&&(ut=ut.coordinates),!ut||!Array.isArray(ut))throw new Error("Please use the `from` property to indicate which point to continue the line from");var wt=te.coordinates.length-1;if(te.coordinates[wt][0]===ut[0]&&te.coordinates[wt][1]===ut[1])te.addCoordinate.apply(te,[Se=wt+1].concat(te.coordinates[wt]));else{if(te.coordinates[0][0]!==ut[0]||te.coordinates[0][1]!==ut[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");ct="backwards",te.addCoordinate.apply(te,[Se=0].concat(te.coordinates[0]))}}else te=this.newFeature({type:ze,properties:{},geometry:{type:N,coordinates:[]}}),Se=0,this.addFeature(te);return this.clearSelectedFeatures(),Bt(this),this.updateUIClasses({mouse:oe}),this.activateUIButton(He.LINE),this.setActionableState({trash:!0}),{line:te,currentVertexPosition:Se,direction:ct}},clickAnywhere:function(j,te){if(j.currentVertexPosition>0&&fo(te,j.line.coordinates[j.currentVertexPosition-1])||"backwards"===j.direction&&fo(te,j.line.coordinates[j.currentVertexPosition+1]))return this.changeMode(dt.SIMPLE_SELECT,{featureIds:[j.line.id]});this.updateUIClasses({mouse:oe}),j.line.updateCoordinate(j.currentVertexPosition,te.lngLat.lng,te.lngLat.lat),"forward"===j.direction?(j.currentVertexPosition++,j.line.updateCoordinate(j.currentVertexPosition,te.lngLat.lng,te.lngLat.lat)):j.line.addCoordinate(0,te.lngLat.lng,te.lngLat.lat)},clickOnVertex:function(j){return this.changeMode(dt.SIMPLE_SELECT,{featureIds:[j.line.id]})},onMouseMove:function(j,te){j.line.updateCoordinate(j.currentVertexPosition,te.lngLat.lng,te.lngLat.lat),nt(te)&&this.updateUIClasses({mouse:Ce})}};Cs.onTap=Cs.onClick=function(j,te){if(nt(te))return this.clickOnVertex(j,te);this.clickAnywhere(j,te)},Cs.onKeyUp=function(j,te){qt(te)?this.changeMode(dt.SIMPLE_SELECT,{featureIds:[j.line.id]}):Xe(te)&&(this.deleteFeature([j.line.id],{silent:!0}),this.changeMode(dt.SIMPLE_SELECT))},Cs.onStop=function(j){In(this),this.activateUIButton(),void 0!==this.getFeature(j.line.id)&&(j.line.removeCoordinate(""+j.currentVertexPosition),j.line.isValid()?this.map.fire(Ie,{features:[j.line.toGeoJSON()]}):(this.deleteFeature([j.line.id],{silent:!0}),this.changeMode(dt.SIMPLE_SELECT,{},{silent:!0})))},Cs.onTrash=function(j){this.deleteFeature([j.line.id],{silent:!0}),this.changeMode(dt.SIMPLE_SELECT)},Cs.toDisplayFeatures=function(j,te,Se){var tt=te.properties.id===j.line.id;if(te.properties.active=tt?er:lr,!tt)return Se(te);te.geometry.coordinates.length<2||(te.properties.meta=ar,Se(un(j.line.id,te.geometry.coordinates["forward"===j.direction?te.geometry.coordinates.length-2:1],""+("forward"===j.direction?te.geometry.coordinates.length-2:1),!1)),Se(te))};var hi={simple_select:$n,direct_select:Ho,draw_point:$a,draw_polygon:_r,draw_line_string:Cs},eo={defaultMode:dt.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}],modes:hi,controls:{},userProperties:!1},zs={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},$o={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Sn(j,te){return j.map(function(Se){return Se.source?Se:si(Se,{id:Se.id+"."+te,source:"hot"===te?me:we})})}var Ko=Ht(function(j,te){var Se="[object Arguments]",tt="[object Map]",ct="[object Object]",ut="[object Set]",wt=/^\[object .+?Constructor\]$/,Qt=/^(?:0|[1-9]\d*)$/,Kt={};Kt["[object Float32Array]"]=Kt["[object Float64Array]"]=Kt["[object Int8Array]"]=Kt["[object Int16Array]"]=Kt["[object Int32Array]"]=Kt["[object Uint8Array]"]=Kt["[object Uint8ClampedArray]"]=Kt["[object Uint16Array]"]=Kt["[object Uint32Array]"]=!0,Kt[Se]=Kt["[object Array]"]=Kt["[object ArrayBuffer]"]=Kt["[object Boolean]"]=Kt["[object DataView]"]=Kt["[object Date]"]=Kt["[object Error]"]=Kt["[object Function]"]=Kt[tt]=Kt["[object Number]"]=Kt[ct]=Kt["[object RegExp]"]=Kt[ut]=Kt["[object String]"]=Kt["[object WeakMap]"]=!1;var dn="object"==typeof global&&global&&global.Object===Object&&global,Ct="object"==typeof self&&self&&self.Object===Object&&self,mn=dn||Ct||Function("return this")(),Rn=te&&!te.nodeType&&te,Jn=Rn&&j&&!j.nodeType&&j,Wn=Jn&&Jn.exports===Rn,uo=Wn&&dn.process,Vt=function(){try{return uo&&uo.binding&&uo.binding("util")}catch{}}(),Dn=Vt&&Vt.isTypedArray;function Pr(ft,Ot){for(var fn=-1,An=null==ft?0:ft.length;++fn<An;)if(Ot(ft[fn],fn,ft))return!0;return!1}function Gn(ft){var Ot=-1,fn=Array(ft.size);return ft.forEach(function(An,ri){fn[++Ot]=[ri,An]}),fn}function oi(ft){var Ot=-1,fn=Array(ft.size);return ft.forEach(function(An){fn[++Ot]=An}),fn}var Vn,Na,mr,Nr=Array.prototype,lo=Object.prototype,La=mn["__core-js_shared__"],ho=Function.prototype.toString,Ge=lo.hasOwnProperty,mt=(Vn=/[^.]+$/.exec(La&&La.keys&&La.keys.IE_PROTO||""))?"Symbol(src)_1."+Vn:"",Xt=lo.toString,Fn=RegExp("^"+ho.call(Ge).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ni=Wn?mn.Buffer:void 0,wr=mn.Symbol,Cn=mn.Uint8Array,po=lo.propertyIsEnumerable,Xo=Nr.splice,Yr=wr?wr.toStringTag:void 0,Ea=Object.getOwnPropertySymbols,Ba=Ni?Ni.isBuffer:void 0,$i=(Na=Object.keys,mr=Object,function(ft){return Na(mr(ft))}),to=co(mn,"DataView"),bi=co(mn,"Map"),Ts=co(mn,"Promise"),Ki=co(mn,"Set"),Lr=co(mn,"WeakMap"),Is=co(Object,"create"),Js=Pn(to),la=Pn(bi),ui=Pn(Ts),hu=Pn(Ki),pu=Pn(Lr),cc=wr?wr.prototype:void 0,zi=cc?cc.valueOf:void 0;function Wo(ft){var Ot=-1,fn=null==ft?0:ft.length;for(this.clear();++Ot<fn;){var An=ft[Ot];this.set(An[0],An[1])}}function Fa(ft){var Ot=-1,fn=null==ft?0:ft.length;for(this.clear();++Ot<fn;){var An=ft[Ot];this.set(An[0],An[1])}}function Ju(ft){var Ot=-1,fn=null==ft?0:ft.length;for(this.clear();++Ot<fn;){var An=ft[Ot];this.set(An[0],An[1])}}function Zu(ft){var Ot=-1,fn=null==ft?0:ft.length;for(this.__data__=new Ju;++Ot<fn;)this.add(ft[Ot])}function Au(ft){var Ot=this.__data__=new Fa(ft);this.size=Ot.size}function dc(ft,Ot){for(var fn=ft.length;fn--;)if(Wi(ft[fn][0],Ot))return fn;return-1}function js(ft){return null==ft?void 0===ft?"[object Undefined]":"[object Null]":Yr&&Yr in Object(ft)?function(Ot){var fn=Ge.call(Ot,Yr),An=Ot[Yr];try{Ot[Yr]=void 0;var ri=!0}catch{}var Xr=Xt.call(Ot);return ri&&(fn?Ot[Yr]=An:delete Ot[Yr]),Xr}(ft):Xt.call(ft)}function Ka(ft){return Wa(ft)&&js(ft)==Se}function gl(ft,Ot,fn,An,ri){return ft===Ot||(null==ft||null==Ot||!Wa(ft)&&!Wa(Ot)?ft!=ft&&Ot!=Ot:function(Xr,Pi,no,da,xr,Eo){var mu=Xa(Xr),Ja=Xa(Pi),Ta=mu?"[object Array]":Po(Xr),za=Ja?"[object Array]":Po(Pi),Zs=(Ta=Ta==Se?ct:Ta)==ct,Ys=(za=za==Se?ct:za)==ct,Ao=Ta==za;if(Ao&&Zo(Xr)){if(!Zo(Pi))return!1;mu=!0,Zs=!1}if(Ao&&!Zs)return Eo||(Eo=new Au),mu||Br(Xr)?Ca(Xr,Pi,no,da,xr,Eo):function(Li,xi,Ur,Qs,el,na,ti){switch(Ur){case"[object DataView]":if(Li.byteLength!=xi.byteLength||Li.byteOffset!=xi.byteOffset)return!1;Li=Li.buffer,xi=xi.buffer;case"[object ArrayBuffer]":return!(Li.byteLength!=xi.byteLength||!na(new Cn(Li),new Cn(xi)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Wi(+Li,+xi);case"[object Error]":return Li.name==xi.name&&Li.message==xi.message;case"[object RegExp]":case"[object String]":return Li==xi+"";case tt:var Fr=Gn;case ut:if(Fr||(Fr=oi),Li.size!=xi.size&&!(1&Qs))return!1;var Us=ti.get(Li);if(Us)return Us==xi;Qs|=2,ti.set(Li,xi);var Ul=Ca(Fr(Li),Fr(xi),Qs,el,na,ti);return ti.delete(Li),Ul;case"[object Symbol]":if(zi)return zi.call(Li)==zi.call(xi)}return!1}(Xr,Pi,Ta,no,da,xr,Eo);if(!(1&no)){var Qu=Zs&&Ge.call(Xr,"__wrapped__"),fa=Ys&&Ge.call(Pi,"__wrapped__");if(Qu||fa){var Ps=Qu?Xr.value():Xr,_l=fa?Pi.value():Pi;return Eo||(Eo=new Au),xr(Ps,_l,no,da,Eo)}}return!!Ao&&(Eo||(Eo=new Au),function(Li,xi,Ur,Qs,el,na){var ti=1&Ur,Fr=wi(Li),gu=Fr.length;if(gu!=wi(xi).length&&!ti)return!1;for(var Ul=gu;Ul--;){var Gs=Fr[Ul];if(!(ti?Gs in xi:Ge.call(xi,Gs)))return!1}var fc=na.get(Li);if(fc&&na.get(xi))return fc==xi;var md=!0;na.set(Li,xi),na.set(xi,Li);for(var Gl=ti;++Ul<gu;){var Vl=Li[Gs=Fr[Ul]],bl=xi[Gs];if(Qs)var Ia=ti?Qs(bl,Vl,Gs,xi,Li,na):Qs(Vl,bl,Gs,Li,xi,na);if(!(void 0===Ia?Vl===bl||el(Vl,bl,Ur,Qs,na):Ia)){md=!1;break}Gl||(Gl="constructor"==Gs)}if(md&&!Gl){var Za=Li.constructor,Vc=xi.constructor;Za==Vc||!("constructor"in Li)||!("constructor"in xi)||"function"==typeof Za&&Za instanceof Za&&"function"==typeof Vc&&Vc instanceof Vc||(md=!1)}return na.delete(Li),na.delete(xi),md}(Xr,Pi,no,da,xr,Eo))}(ft,Ot,fn,An,gl,ri))}function Ca(ft,Ot,fn,An,ri,Xr){var Pi=1&fn,no=ft.length,da=Ot.length;if(no!=da&&!(Pi&&da>no))return!1;var xr=Xr.get(ft);if(xr&&Xr.get(Ot))return xr==Ot;var Eo=-1,mu=!0,Ja=2&fn?new Zu:void 0;for(Xr.set(ft,Ot),Xr.set(Ot,ft);++Eo<no;){var Ta=ft[Eo],za=Ot[Eo];if(An)var Zs=Pi?An(za,Ta,Eo,Ot,ft,Xr):An(Ta,za,Eo,ft,Ot,Xr);if(void 0!==Zs){if(Zs)continue;mu=!1;break}if(Ja){if(!Pr(Ot,function(Ys,Ao){if(!Ja.has(Ao)&&(Ta===Ys||ri(Ta,Ys,fn,An,Xr)))return Ja.push(Ao)})){mu=!1;break}}else if(Ta!==za&&!ri(Ta,za,fn,An,Xr)){mu=!1;break}}return Xr.delete(ft),Xr.delete(Ot),mu}function wi(ft){return An=ca,ri=function yl(ft){return null!=(Ot=ft)&&Ji(Ot.length)&&!Yu(Ot)?function hd(ft,Ot){var fn=Xa(ft),An=!fn&&ds(ft),ri=!fn&&!An&&Zo(ft),Xr=!fn&&!An&&!ri&&Br(ft),Pi=fn||An||ri||Xr,no=Pi?function(Eo,mu){for(var Ja=-1,Ta=Array(Eo);++Ja<Eo;)Ta[Ja]=mu(Ja);return Ta}(ft.length,String):[],da=no.length;for(var xr in ft)!Ot&&!Ge.call(ft,xr)||Pi&&("length"==xr||ri&&("offset"==xr||"parent"==xr)||Xr&&("buffer"==xr||"byteLength"==xr||"byteOffset"==xr)||On(xr,da))||no.push(xr);return no}(ft):function Sa(ft){if(fn=(Ot=ft)&&Ot.constructor,Ot!==("function"==typeof fn&&fn.prototype||lo))return $i(ft);var Ot,fn,ri=[];for(var Xr in Object(ft))Ge.call(ft,Xr)&&"constructor"!=Xr&&ri.push(Xr);return ri}(ft);var Ot}(Ot=ft),Xa(Ot)?ri:function(Xr,Pi){for(var no=-1,da=Pi.length,xr=Xr.length;++no<da;)Xr[xr+no]=Pi[no];return Xr}(ri,An(Ot));var Ot,An,ri}function Jo(ft,Ot){var fn,An,ri=ft.__data__;return("string"==(An=typeof(fn=Ot))||"number"==An||"symbol"==An||"boolean"==An?"__proto__"!==fn:null===fn)?ri["string"==typeof Ot?"string":"hash"]:ri.map}function co(ft,Ot){var fn=ft?.[Ot];return function pd(ft){return!(!vl(ft)||(Ot=ft,mt&&mt in Ot))&&(Yu(ft)?Fn:wt).test(Pn(ft));var Ot}(fn)?fn:void 0}Wo.prototype.clear=function(){this.__data__=Is?Is(null):{},this.size=0},Wo.prototype.delete=function(ft){var Ot=this.has(ft)&&delete this.__data__[ft];return this.size-=Ot?1:0,Ot},Wo.prototype.get=function(ft){var Ot=this.__data__;if(Is){var fn=Ot[ft];return"__lodash_hash_undefined__"===fn?void 0:fn}return Ge.call(Ot,ft)?Ot[ft]:void 0},Wo.prototype.has=function(ft){var Ot=this.__data__;return Is?void 0!==Ot[ft]:Ge.call(Ot,ft)},Wo.prototype.set=function(ft,Ot){var fn=this.__data__;return this.size+=this.has(ft)?0:1,fn[ft]=Is&&void 0===Ot?"__lodash_hash_undefined__":Ot,this},Fa.prototype.clear=function(){this.__data__=[],this.size=0},Fa.prototype.delete=function(ft){var Ot=this.__data__,fn=dc(Ot,ft);return!(fn<0||(fn==Ot.length-1?Ot.pop():Xo.call(Ot,fn,1),--this.size,0))},Fa.prototype.get=function(ft){var Ot=this.__data__,fn=dc(Ot,ft);return fn<0?void 0:Ot[fn][1]},Fa.prototype.has=function(ft){return dc(this.__data__,ft)>-1},Fa.prototype.set=function(ft,Ot){var fn=this.__data__,An=dc(fn,ft);return An<0?(++this.size,fn.push([ft,Ot])):fn[An][1]=Ot,this},Ju.prototype.clear=function(){this.size=0,this.__data__={hash:new Wo,map:new(bi||Fa),string:new Wo}},Ju.prototype.delete=function(ft){var Ot=Jo(this,ft).delete(ft);return this.size-=Ot?1:0,Ot},Ju.prototype.get=function(ft){return Jo(this,ft).get(ft)},Ju.prototype.has=function(ft){return Jo(this,ft).has(ft)},Ju.prototype.set=function(ft,Ot){var fn=Jo(this,ft),An=fn.size;return fn.set(ft,Ot),this.size+=fn.size==An?0:1,this},Zu.prototype.add=Zu.prototype.push=function(ft){return this.__data__.set(ft,"__lodash_hash_undefined__"),this},Zu.prototype.has=function(ft){return this.__data__.has(ft)},Au.prototype.clear=function(){this.__data__=new Fa,this.size=0},Au.prototype.delete=function(ft){var Ot=this.__data__,fn=Ot.delete(ft);return this.size=Ot.size,fn},Au.prototype.get=function(ft){return this.__data__.get(ft)},Au.prototype.has=function(ft){return this.__data__.has(ft)},Au.prototype.set=function(ft,Ot){var fn=this.__data__;if(fn instanceof Fa){var An=fn.__data__;if(!bi||An.length<199)return An.push([ft,Ot]),this.size=++fn.size,this;fn=this.__data__=new Ju(An)}return fn.set(ft,Ot),this.size=fn.size,this};var ca=Ea?function(ft){return null==ft?[]:(ft=Object(ft),function(Ot,fn){for(var An=-1,ri=null==Ot?0:Ot.length,Xr=0,Pi=[];++An<ri;){var no=Ot[An];fn(no)&&(Pi[Xr++]=no)}return Pi}(Ea(ft),function(Ot){return po.call(ft,Ot)}))}:function(){return[]},Po=js;function On(ft,Ot){return!!(Ot=Ot??9007199254740991)&&("number"==typeof ft||Qt.test(ft))&&ft>-1&&ft%1==0&&ft<Ot}function Pn(ft){if(null!=ft){try{return ho.call(ft)}catch{}try{return ft+""}catch{}}return""}function Wi(ft,Ot){return ft===Ot||ft!=ft&&Ot!=Ot}(to&&"[object DataView]"!=Po(new to(new ArrayBuffer(1)))||bi&&Po(new bi)!=tt||Ts&&"[object Promise]"!=Po(Ts.resolve())||Ki&&Po(new Ki)!=ut||Lr&&"[object WeakMap]"!=Po(new Lr))&&(Po=function(ft){var Ot=js(ft),fn=Ot==ct?ft.constructor:void 0,An=fn?Pn(fn):"";if(An)switch(An){case Js:return"[object DataView]";case la:return tt;case ui:return"[object Promise]";case hu:return ut;case pu:return"[object WeakMap]"}return Ot});var ds=Ka(function(){return arguments}())?Ka:function(ft){return Wa(ft)&&Ge.call(ft,"callee")&&!po.call(ft,"callee")},Xa=Array.isArray,Zo=Ba||function(){return!1};function Yu(ft){if(!vl(ft))return!1;var Ot=js(ft);return"[object Function]"==Ot||"[object GeneratorFunction]"==Ot||"[object AsyncFunction]"==Ot||"[object Proxy]"==Ot}function Ji(ft){return"number"==typeof ft&&ft>-1&&ft%1==0&&ft<=9007199254740991}function vl(ft){var Ot=typeof ft;return null!=ft&&("object"==Ot||"function"==Ot)}function Wa(ft){return null!=ft&&"object"==typeof ft}var ft,Br=Dn?(ft=Dn,function(Ot){return ft(Ot)}):function(ft){return Wa(ft)&&Ji(ft.length)&&!!Kt[js(ft)]};j.exports=function(ft,Ot){return gl(ft,Ot)}}),ua={Polygon:Hr,LineString:ni,Point:ei,MultiPolygon:xo,MultiLineString:xo,MultiPoint:xo};var cs=function(j,te){var Se={options:j=function(ct){void 0===ct&&(ct={});var ut=si(ct);return ct.controls||(ut.controls={}),ut.controls=si(!1===ct.displayControlsDefault?$o:zs,ct.controls),(ut=si(eo,ut)).styles=Sn(ut.styles,"cold").concat(Sn(ut.styles,"hot")),ut}(j)};te=function Xn(j,te){return te.modes=dt,te.getFeatureIdsAt=function(Se){return Le.click({point:Se},null,j).map(function(tt){return tt.properties.id})},te.getSelectedIds=function(){return j.store.getSelectedIds()},te.getSelected=function(){return{type:z,features:j.store.getSelectedIds().map(function(Se){return j.store.get(Se)}).map(function(Se){return Se.toGeoJSON()})}},te.getSelectedPoints=function(){return{type:z,features:j.store.getSelectedCoordinates().map(function(Se){return{type:ze,properties:{},geometry:{type:F,coordinates:Se.coordinates}}})}},te.set=function(Se){if(void 0===Se.type||Se.type!==z||!Array.isArray(Se.features))throw new Error("Invalid FeatureCollection");var tt=j.store.createRenderBatch(),ct=j.store.getAllIds().slice(),ut=te.add(Se),wt=new It(ut);return(ct=ct.filter(function(Qt){return!wt.has(Qt)})).length&&te.delete(ct),tt(),ut},te.add=function(Se){var tt=JSON.parse(JSON.stringify(tn(Se))).features.map(function(ct){if(ct.id=ct.id||Ir(),null===ct.geometry)throw new Error("Invalid geometry: null");if(void 0===j.store.get(ct.id)||j.store.get(ct.id).type!==ct.geometry.type){var ut=ua[ct.geometry.type];if(void 0===ut)throw new Error("Invalid geometry type: "+ct.geometry.type+".");var wt=new ut(j,ct);j.store.add(wt)}else{var Qt=j.store.get(ct.id);Qt.properties=ct.properties,Ko(Qt.getCoordinates(),ct.geometry.coordinates)||Qt.incomingCoords(ct.geometry.coordinates)}return ct.id});return j.store.render(),tt},te.get=function(Se){var tt=j.store.get(Se);if(tt)return tt.toGeoJSON()},te.getAll=function(){return{type:z,features:j.store.getAll().map(function(Se){return Se.toGeoJSON()})}},te.delete=function(Se){return j.store.delete(Se,{silent:!0}),te.getMode()!==dt.DIRECT_SELECT||j.store.getSelectedIds().length?j.store.render():j.events.changeMode(dt.SIMPLE_SELECT,void 0,{silent:!0}),te},te.deleteAll=function(){return j.store.delete(j.store.getAllIds(),{silent:!0}),te.getMode()===dt.DIRECT_SELECT?j.events.changeMode(dt.SIMPLE_SELECT,void 0,{silent:!0}):j.store.render(),te},te.changeMode=function(Se,tt){return void 0===tt&&(tt={}),Se===dt.SIMPLE_SELECT&&te.getMode()===dt.SIMPLE_SELECT?(ct=tt.featureIds||[],ut=j.store.getSelectedIds(),ct.length===ut.length&&JSON.stringify(ct.map(function(wt){return wt}).sort())===JSON.stringify(ut.map(function(wt){return wt}).sort())||(j.store.setSelected(tt.featureIds,{silent:!0}),j.store.render()),te):(Se===dt.DIRECT_SELECT&&te.getMode()===dt.DIRECT_SELECT&&tt.featureId===j.store.getSelectedIds()[0]||j.events.changeMode(Se,tt,{silent:!0}),te);var ct,ut},te.getMode=function(){return j.events.getMode()},te.trash=function(){return j.events.trash({silent:!0}),te},te.combineFeatures=function(){return j.events.combineFeatures({silent:!0}),te},te.uncombineFeatures=function(){return j.events.uncombineFeatures({silent:!0}),te},te.setFeatureProperty=function(Se,tt,ct){return j.store.setFeatureProperty(Se,tt,ct),te},te}(Se,te),Se.api=te;var tt=Te(Se);return te.onAdd=tt.onAdd,te.onRemove=tt.onRemove,te.types=He,te.options=j,te};function Tr(j){cs(j,this)}return Tr.modes=hi,Tr}()},4969:Ee=>{"use strict";function X(O,L){this.x=O,this.y=L}Ee.exports=X,X.prototype={clone:function(){return new X(this.x,this.y)},add:function(O){return this.clone()._add(O)},sub:function(O){return this.clone()._sub(O)},multByPoint:function(O){return this.clone()._multByPoint(O)},divByPoint:function(O){return this.clone()._divByPoint(O)},mult:function(O){return this.clone()._mult(O)},div:function(O){return this.clone()._div(O)},rotate:function(O){return this.clone()._rotate(O)},rotateAround:function(O,L){return this.clone()._rotateAround(O,L)},matMult:function(O){return this.clone()._matMult(O)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(O){return this.x===O.x&&this.y===O.y},dist:function(O){return Math.sqrt(this.distSqr(O))},distSqr:function(O){var L=O.x-this.x,$=O.y-this.y;return L*L+$*$},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(O){return Math.atan2(this.y-O.y,this.x-O.x)},angleWith:function(O){return this.angleWithSep(O.x,O.y)},angleWithSep:function(O,L){return Math.atan2(this.x*L-this.y*O,this.x*O+this.y*L)},_matMult:function(O){var $=O[2]*this.x+O[3]*this.y;return this.x=O[0]*this.x+O[1]*this.y,this.y=$,this},_add:function(O){return this.x+=O.x,this.y+=O.y,this},_sub:function(O){return this.x-=O.x,this.y-=O.y,this},_mult:function(O){return this.x*=O,this.y*=O,this},_div:function(O){return this.x/=O,this.y/=O,this},_multByPoint:function(O){return this.x*=O.x,this.y*=O.y,this},_divByPoint:function(O){return this.x/=O.x,this.y/=O.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var O=this.y;return this.y=this.x,this.x=-O,this},_rotate:function(O){var L=Math.cos(O),$=Math.sin(O),G=$*this.x+L*this.y;return this.x=L*this.x-$*this.y,this.y=G,this},_rotateAround:function(O,L){var $=Math.cos(O),v=Math.sin(O),q=L.y+v*(this.x-L.x)+$*(this.y-L.y);return this.x=L.x+$*(this.x-L.x)-v*(this.y-L.y),this.y=q,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},X.convert=function(O){return O instanceof X?O:Array.isArray(O)?new X(O[0],O[1]):O}},1077:Ee=>{Ee.exports={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}},8407:(Ee,X,O)=>{"use strict";var L=O(4208),$=O(3082),v=O(4703),G=O(9069).EventEmitter,q=O(1077),k=O(5765),I=O(6775);function S(M,H){this._eventEmitter=new G,this.options=v({},this.options,H),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geocoderApi=M}S.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,getItemValue:function(M){return"string"==typeof M?M:M.place_name},render:function(M){if("string"==typeof M){var H=M.split(","),K=H[0].toLowerCase().indexOf(this.query.toLowerCase()),J=this.query.length;return'<div class="mapboxgl-ctrl-geocoder--suggestion maplibregl-ctrl-geocoder--suggestion"><svg class="mapboxgl-ctrl-geocoder--suggestion-icon maplibre-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="mapboxgl-ctrl-geocoder--suggestion-info maplibregl-ctrl-geocoder--suggestion-info"><div class="mapboxgl-ctrl-geocoder--suggestion-title maplibregl-ctrl-geocoder--suggestion-title">'+H[0].substring(0,K)+'<span class="mapboxgl-ctrl-geocoder--suggestion-match maplibregl-ctrl-geocoder--suggestion-match">'+H[0].substring(K,K+J)+"</span>"+H[0].substring(K+J)+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address maplibregl-ctrl-geocoder--suggestion-address">'+H.splice(1,H.length).join(",")+"</div></div></div>"}var me=M.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--result maplibregl-ctrl-geocoder--result"><svg class="mapboxgl-ctrl-geocoder--result-icon maplibre-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="mapboxgl-ctrl-geocoder--result-title maplibregl-ctrl-geocoder--result-title">'+me[0]+'</div><div class="mapboxgl-ctrl-geocoder--result-address maplibregl-ctrl-geocoder--result-address">'+me.splice(1,me.length).join(",")+"</div></div></div>"},popupRender:function(M){var H=M.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion maplibre-ctrl-geocoder--suggestion popup-suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title maplibre-ctrl-geocoder--suggestion-title popup-suggestion-title">'+H[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address maplibre-ctrl-geocoder--suggestion-address popup-suggestion-address">'+H.splice(1,H.length).join(",")+"</div></div>"},processResults:function(M,H,K){if(!H||0===H.length)return M;var J=M.map(function(oe){return oe.place_name}),ie=H.filter(function(oe){return!J.includes(oe)});if(ie.length+M.length>K){for(var Q=Math.min(ie.length,Math.floor(K/2));M.length+Q<K;)Q++;for(var ae=[],me=0;me<Q;me++)ae.push(ie[me]);for(var we=0;we<K-Q;we++)ae.push(M[we]);return ae}return ie.length>0?ie.concat(M):M},showResultMarkers:!0,debounceSearch:200},addTo:function(M){function H(J,ie){if(!document.body.contains(ie))throw new Error("Element provided to #addTo() exists, but is not in the DOM");var Q=J.onAdd();ie.appendChild(Q)}if(M._controlContainer)M.addControl(this);else if(M instanceof HTMLElement)H(this,M);else{if("string"!=typeof M)throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element");var K=document.querySelectorAll(M);if(0===K.length)throw new Error("Element ",M,"not found.");if(K.length>1)throw new Error("Geocoder can only be added to a single html element");H(this,K[0])}},onAdd:function(M){if(M&&"string"!=typeof M&&(this._map=M),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);var H=this.container=document.createElement("div");H.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";var K=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",$(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);var J=document.createElement("div");J.classList.add("mapboxgl-ctrl-geocoder--pin-right","maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button maplibregl-ctrl-geocoder--button";var ie=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(ie),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),J.appendChild(this._clearEl),J.appendChild(this._loadingEl),H.appendChild(K),H.appendChild(this._inputEl),H.appendChild(J),this._typeahead=new L(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),H},createIcon:function(M,H){var K=document.createElementNS("http://www.w3.org/2000/svg","svg");if(K.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+M+" maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+M),K.setAttribute("viewBox","0 0 18 18"),K.setAttribute("xml:space","preserve"),K.setAttribute("width",18),K.setAttribute("height",18),"innerHTML"in K)K.innerHTML=H;else{var J=document.createElement("div");J.innerHTML="<svg>"+H.valueOf().toString()+"</svg>",K.appendChild(J.firstChild.firstChild)}return K},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_onPaste:function(M){var H=(M.clipboardData||window.clipboardData).getData("text");H.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(H)},_onKeyDown:function(M){var H=27,K=9;if(M.keyCode===H&&this.options.clearAndBlurOnEsc)return this._clear(M),this._inputEl.blur();var J=M.target&&M.target.shadowRoot?M.target.shadowRoot.activeElement:M.target;if(!J||!J.value)return this.fresh=!0,M.keyCode!==K&&this.clear(M),this._clearEl.style.display="none";if(!M.metaKey&&-1===[K,H,37,39,38,40].indexOf(M.keyCode)){if(13===M.keyCode){if(this.options.showResultsWhileTyping)return void(null==this._typeahead.selected&&this.geocoderApi.getSuggestions?this._geocode(J.value,!0):null==this._typeahead.selected&&this.options.showResultMarkers&&this._fitBoundsForMarkers());this._typeahead.selected||this._geocode(J.value)}J.value.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(J.value)}},_showButton:function(){this._typeahead.selected&&(this._clearEl.style.display="block")},_hideButton:function(){this._typeahead.selected&&(this._clearEl.style.display="none")},_onBlur:function(M){this.options.clearOnBlur&&this._clearOnBlur(M),this.options.collapsed&&this._collapse()},_onChange:function(){var M=this._typeahead.selected;if(M&&"string"==typeof M)this._geocode(M,!0);else if(M&&JSON.stringify(M)!==this.lastSelected){var H;if(this._clearEl.style.display="none",this.options.flyTo)if(this._removeResultMarkers(),M.properties&&q[M.properties.short_code])H=v({},this.options.flyTo),this._map&&this._map.fitBounds(q[M.properties.short_code].bbox,H);else if(M.bbox){var K=M.bbox;H=v({},this.options.flyTo),this._map&&this._map.fitBounds([[K[0],K[1]],[K[2],K[3]]],H)}else H=v({},{zoom:this.options.zoom},this.options.flyTo),M.center?H.center=M.center:M.geometry&&M.geometry.type&&"Point"===M.geometry.type&&M.geometry.coordinates&&(H.center=M.geometry.coordinates),this._map&&this._map.flyTo(H);this.options.marker&&this._maplibregl&&this._handleMarker(M),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(M),this._eventEmitter.emit("result",{result:M})}},_getConfigForRequest:function(){var H=this;return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce(function(J,ie){return H.options[ie]&&(J[ie]=["countries","types","language"].indexOf(ie)>-1?H.options[ie].split(/[\s,]+/):H.options[ie],"proximity"===ie&&H.options[ie]&&"number"==typeof H.options[ie].longitude&&"number"==typeof H.options[ie].latitude&&(J[ie]=[H.options[ie].longitude,H.options[ie].latitude])),J},{})},_geocode:function(M,H){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:M}),this.inputString=M;var ie,K=null,J=this._getConfigForRequest();if(this.options.localGeocoderOnly)ie=Promise.resolve();else if(this.options.reverseGeocode&&/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/.test(M)){var Q=M.split(/[\s(,)?]+/).map(function(oe){return parseFloat(oe,10)}).reverse();"proximity"in(J=v(J,{query:Q,limit:1}))&&delete J.proximity,ie=this.geocoderApi.reverseGeocode(J)}else J=v(J,{query:M}),ie=this.geocoderApi.forwardGeocode(J);var ae=[];this.options.localGeocoder&&((ae=this.options.localGeocoder(M))||(ae=[]));var me=[];return ie.catch(function(oe){K=oe}.bind(this)).then(function(oe){this._loadingEl.style.display="none";var fe={};return(fe=oe||{type:"FeatureCollection",features:[]}).config=J,this.fresh&&(this.fresh=!1),fe.features=fe.features?ae.concat(fe.features):ae,this.options.externalGeocoder?(me=this.options.externalGeocoder(M,fe.features,J)||[]).then(function(pe){return fe.features=fe.features?pe.concat(fe.features):pe,fe},function(){return fe}):this.geocoderApi.getSuggestions&&!H?(this._getSuggestions(M)||[]).then(function(pe){return pe.length>0&&(fe.suggestions=pe),fe},function(){return fe}):fe}.bind(this)).then(function(oe){if(K)throw K;if(this.options.filter&&oe.features.length&&(oe.features=oe.features.filter(this.options.filter)),oe.features.length){this._clearEl.style.display="block",this._eventEmitter.emit("results",oe);var fe=this.options.processResults(oe.features,oe.suggestions,this.options.limit);this._eventEmitter.emit("processedResults",fe),this._typeahead.update(fe),(!this.options.showResultsWhileTyping||H)&&this.options.showResultMarkers&&this._fitBoundsForMarkers()}else this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",oe)}.bind(this)).catch(function(oe){this._loadingEl.style.display="none",ae.length&&this.options.localGeocoder||me.length&&this.options.externalGeocoder?(this._clearEl.style.display="block",this._typeahead.update(ae)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:ae}),this._eventEmitter.emit("error",{error:oe})}.bind(this)),ie},_getSuggestions:function(M){return new Promise(function(H,K){this.geocoderApi.getSuggestions||K(),this._eventEmitter.emit("loadingSuggestions",{query:M});var J=null,ie=[],Q=this._getConfigForRequest();Q=v(Q,{query:M}),this.geocoderApi.getSuggestions(Q).catch(function(me){J=me}.bind(this)).then(function(me){if(J)throw J;me.suggestions.length&&(ie=me.suggestions),H(ie),this._eventEmitter.emit("resultsSuggestions",me)}.bind(this)).catch(function(me){this._eventEmitter.emit("error",{error:me})}.bind(this))}.bind(this))},_clear:function(M){M&&M.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(M){this._clear(M),this._inputEl.focus()},_clearOnBlur:function(M){M.relatedTarget&&this._clear(M)},_onQueryResult:function(M){if(M.features.length){var K=M.features[0];this._typeahead.selected=K,this._inputEl.value=K.place_name,this._onChange()}},_updateProximity:function(){if(this._map)if(this._map.getZoom()>9){var M=this._map.getCenter().wrap();this.setProximity({longitude:M.lng,latitude:M.lat})}else this.setProximity(null)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed","maplibregl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed","maplibregl-ctrl-geocoder--collapsed")},query:function(M){return this._geocode(M).then(this._onQueryResult),this},_renderError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error maplibre-gl-geocoder--error'>There was an error reaching the server</div>")},_renderNoResults:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>No results found</div>")},_renderMessage:function(M){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(M)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var M=this.options.language.split(",")[0],H=I.language(M),K=k.placeholder[H];if(K)return K}return"Search"},_fitBoundsForMarkers:function(){if(!(this._typeahead.data.length<1)){var M=this._typeahead.data.filter(function(ie){return"string"!=typeof ie}).slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){var K=v({},{padding:100},this.options.flyTo),J=new this._maplibregl.LngLatBounds;M.forEach(function(ie){J.extend(ie.geometry.coordinates)}),this._map.fitBounds(J,K)}return M.length>0&&this._maplibregl&&this._handleResultMarkers(M),this}},setInput:function(M){return this._inputEl.value=M,this._typeahead.selected=null,this._typeahead.clear(),M.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(M),this},setProximity:function(M){return this.options.proximity=M,this},getProximity:function(){return this.options.proximity},setRenderFunction:function(M){return M&&"function"==typeof M&&(this._typeahead.render=M),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(M){var H=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=M||this.options.language||H,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(M){return this.options.zoom=M,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(M){return this.options.flyTo=M,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(M){return this.placeholder=M||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(M){return this.options.bbox=M,this},getCountries:function(){return this.options.countries},setCountries:function(M){return this.options.countries=M,this},getTypes:function(){return this.options.types},setTypes:function(M){return this.options.types=M,this},getMinLength:function(){return this.options.minLength},setMinLength:function(M){return this.options.minLength=M,this._typeahead&&(this._typeahead.options.minLength=M),this},getLimit:function(){return this.options.limit},setLimit:function(M){return this.options.limit=M,this._typeahead&&(this._typeahead.options.limit=M),this},getFilter:function(){return this.options.filter},setFilter:function(M){return this.options.filter=M,this},setGeocoderApi:function(M){return this.geocoderApi=M,this},getGeocoderApi:function(){return this.geocoderApi},_handleMarker:function(M){if(this._map){this._removeMarker();var J,K=v({},{color:"#4668F2"},this.options.marker);if(this.mapMarker=new this._maplibregl.Marker(K),this.options.popup){var Q=v({},{},this.options.popup);J=new this._maplibregl.Popup(Q).setHTML(this.options.popupRender(M))}return M.center?(this.mapMarker.setLngLat(M.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(J)):M.geometry&&M.geometry.type&&"Point"===M.geometry.type&&M.geometry.coordinates&&(this.mapMarker.setLngLat(M.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(J)),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},_handleResultMarkers:function(M){if(this._map){this._removeResultMarkers();var K=v({},{color:"#4668F2"},this.options.showResultMarkers);return M.forEach(function(J){if(this.options.showResultMarkers&&this.options.showResultMarkers.element){var ie=this.options.showResultMarkers.element.cloneNode(!0);K=v(K,{element:ie})}var ae,Q=new this._maplibregl.Marker(v({},K,{element:ie}));if(this.options.popup){var we=v({},{},this.options.popup);ae=new this._maplibregl.Popup(we).setHTML(this.options.popupRender(J))}J.center?(Q.setLngLat(J.center).addTo(this._map),this.options.popup&&Q.setPopup(ae)):J.geometry&&J.geometry.type&&"Point"===J.geometry.type&&J.geometry.coordinates&&(Q.setLngLat(J.geometry.coordinates).addTo(this._map),this.options.popup&&Q.setPopup(ae)),this.resultMarkers.push(Q)}.bind(this)),this}},_removeResultMarkers:function(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(M){M.remove()}),this.resultMarkers=[])},on:function(M,H){return this._eventEmitter.on(M,H),this},off:function(M,H){return this._eventEmitter.removeListener(M,H),this}},Ee.exports=S},5765:Ee=>{"use strict";Ee.exports={placeholder:{de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05dc\u05d7\u05e4\u05e9",ja:"\u30b5\u30fc\u30c1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041f\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641c\u7d22",cs:"Vyhled\xe1v\xe1n\xed",hu:"Keres\xe9s",ka:"\u10eb\u10d8\u10d4\u10d1\u10d0",nb:"S\xf8ke",sk:"Vyh\u013ead\xe1vanie",th:"\u0e04\u0e49\u0e19\u0e2b\u0e32",fi:"Hae",is:"Leita",ko:"\uc218\uc0c9",pl:"Szukaj",sl:"Iskanje",fa:"\u062c\u0633\u062a\u062c\u0648",ru:"\u041f\u043e\u0438\u0441\u043a"}}},9121:(Ee,X,O)=>{"use strict";function L(e){return"function"==typeof e}function $(e){const t=e(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const v=$(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function G(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class q{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(L(r))try{r()}catch(o){n=o instanceof v?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{S(o)}catch(a){n=n??[],a instanceof v?n=[...n,...a.errors]:n.push(a)}}if(n)throw new v(n)}}add(n){var t;if(n&&n!==this)if(this.closed)S(n);else{if(n instanceof q){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&G(t,n)}remove(n){const{_finalizers:t}=this;t&&G(t,n),n instanceof q&&n._removeParent(this)}}q.EMPTY=(()=>{const e=new q;return e.closed=!0,e})();const k=q.EMPTY;function I(e){return e instanceof q||e&&"closed"in e&&L(e.remove)&&L(e.add)&&L(e.unsubscribe)}function S(e){L(e)?e():e.unsubscribe()}const M={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},H={setTimeout(e,n,...t){const{delegate:r}=H;return r?.setTimeout?r.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){const{delegate:n}=H;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function K(e){H.setTimeout(()=>{const{onUnhandledError:n}=M;if(!n)throw e;n(e)})}function J(){}const ie=me("C",void 0,void 0);function me(e,n,t){return{kind:e,value:n,error:t}}let we=null;function oe(e){if(M.useDeprecatedSynchronousErrorHandling){const n=!we;if(n&&(we={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:r}=we;if(we=null,t)throw r}}else e()}class pe extends q{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,I(n)&&n.add(this)):this.destination=z}static create(n,t,r){return new ze(n,t,r)}next(n){this.isStopped?F(function ae(e){return me("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?F(function Q(e){return me("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?F(ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ce=Function.prototype.bind;function qe(e,n){return Ce.call(e,n)}class He{constructor(n){this.partialObserver=n}next(n){const{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(r){P(r)}}error(n){const{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(r){P(r)}else P(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){P(t)}}}class ze extends pe{constructor(n,t,r){let i;if(super(),L(n)||!n)i={next:n??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&M.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),i={next:n.next&&qe(n.next,o),error:n.error&&qe(n.error,o),complete:n.complete&&qe(n.complete,o)}):i=n}this.destination=new He(i)}}function P(e){M.useDeprecatedSynchronousErrorHandling?function fe(e){M.useDeprecatedSynchronousErrorHandling&&we&&(we.errorThrown=!0,we.error=e)}(e):K(e)}function F(e,n){const{onStoppedNotification:t}=M;t&&H.setTimeout(()=>t(e,n))}const z={closed:!0,next:J,error:function N(e){throw e},complete:J},ee="function"==typeof Symbol&&Symbol.observable||"@@observable";function W(e){return e}let dt=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function Rt(e){return e&&e instanceof pe||function At(e){return e&&L(e.next)&&L(e.error)&&L(e.complete)}(e)&&I(e)}(t)?t:new ze(t,r,i);return oe(()=>{const{operator:a,source:s}=this;o.add(a?a.call(o,s):s?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Ie(r))((i,o)=>{const a=new ze({next:s=>{try{t(s)}catch(d){o(d),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[ee](){return this}pipe(...t){return function Je(e){return 0===e.length?W:1===e.length?e[0]:function(t){return e.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=Ie(t))((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return e.create=n=>new e(n),e})();function Ie(e){var n;return null!==(n=e??M.Promise)&&void 0!==n?n:Promise}const rt=$(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Et=(()=>{class e extends dt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new sn(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new rt}next(t){oe(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){oe(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){oe(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?k:(this.currentObservers=null,o.push(t),new q(()=>{this.currentObservers=null,G(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new dt;return t.source=this,t}}return e.create=(n,t)=>new sn(n,t),e})();class sn extends Et{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,n)}error(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==r?r:k}}function $t(e){return L(e?.lift)}function kn(e){return n=>{if($t(n))return n.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Nt(e,n,t,r,i){return new Bn(e,n,t,r,i)}class Bn extends pe{constructor(n,t,r,i,o,a){super(n),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=t?function(s){try{t(s)}catch(d){n.error(d)}}:super._next,this._error=i?function(s){try{i(s)}catch(d){n.error(d)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(s){n.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function Nn(e,n){return kn((t,r)=>{let i=0;t.subscribe(Nt(r,o=>{r.next(e.call(n,o,i++))}))})}var ar=function(e,n){return(ar=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])})(e,n)};function Zt(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}ar(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}var ne=function(){return ne=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},ne.apply(this,arguments)};function er(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}function kt(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}function It(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}function le(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function ce(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}function Gt(e,n,t){if(t||2===arguments.length)for(var o,r=0,i=n.length;r<i;r++)(o||!(r in n))&&(o||(o=Array.prototype.slice.call(n,0,r)),o[r]=n[r]);return e.concat(o||Array.prototype.slice.call(n))}function Ht(e){return this instanceof Ht?(this.v=e,this):new Ht(e)}function Ir(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(e,n||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(m){r[m]&&(i[m]=function(E){return new Promise(function(D,R){o.push([m,E,D,R])>1||s(m,E)})})}function s(m,E){try{!function d(m){m.value instanceof Ht?Promise.resolve(m.value.v).then(l,f):_(o[0][2],m)}(r[m](E))}catch(D){_(o[0][3],D)}}function l(m){s("next",m)}function f(m){s("throw",m)}function _(m,E){m(E),o.shift(),o.length&&s(o[0][0],o[0][1])}}const Wu=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function fu(e){return L(e?.then)}function ta(e){return L(e[ee])}function Fs(e){return Symbol.asyncIterator&&L(e?.[Symbol.asyncIterator])}function yi(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const si=function Pu(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function he(e){return L(e?.[si])}function _e(e){return Ir(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:r,done:i}=yield Ht(t.read());if(i)return yield Ht(void 0);yield yield Ht(r)}}finally{t.releaseLock()}})}function Te(e){return L(e?.getReader)}function Oe(e){if(e instanceof dt)return e;if(null!=e){if(ta(e))return function Be(e){return new dt(n=>{const t=e[ee]();if(L(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Wu(e))return function it(e){return new dt(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(fu(e))return function st(e){return new dt(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,K)})}(e);if(Fs(e))return ke(e);if(he(e))return function nt(e){return new dt(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(Te(e))return function Xe(e){return ke(_e(e))}(e)}throw yi(e)}function ke(e){return new dt(n=>{(function qt(e,n){var t,r,i,o;return kt(this,void 0,void 0,function*(){try{for(t=function ei(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=le(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=e[o]&&function(a){return new Promise(function(s,d){!function i(o,a,s,d){Promise.resolve(d).then(function(l){o({value:l,done:s})},a)}(s,d,(a=e[o](a)).done,a.value)})}}}(e);!(r=yield t.next()).done;)if(n.next(r.value),n.closed)return}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function Jt(e,n,t,r=0,i=!1){const o=n.schedule(function(){t(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function Lt(e,n,t=1/0){return L(n)?Lt((r,i)=>Nn((o,a)=>n(r,o,i,a))(Oe(e(r,i))),t):("number"==typeof n&&(t=n),kn((r,i)=>function yt(e,n,t,r,i,o,a,s){const d=[];let l=0,f=0,_=!1;const m=()=>{_&&!d.length&&!l&&n.complete()},E=R=>l<r?D(R):d.push(R),D=R=>{o&&n.next(R),l++;let ye=!1;Oe(t(R,f++)).subscribe(Nt(n,xe=>{i?.(xe),o?E(xe):n.next(xe)},()=>{ye=!0},void 0,()=>{if(ye)try{for(l--;d.length&&l<r;){const xe=d.shift();a?Jt(n,a,()=>D(xe)):D(xe)}m()}catch(xe){n.error(xe)}}))};return e.subscribe(Nt(n,E,()=>{_=!0,m()})),()=>{s?.()}}(r,i,e,t)))}function un(e=1/0){return Lt(W,e)}const ln=new dt(e=>e.complete());function jt(e){return e[e.length-1]}function rr(e){return function tn(e){return e&&L(e.schedule)}(jt(e))?e.pop():void 0}function Ii(e,n=0){return kn((t,r)=>{t.subscribe(Nt(r,i=>Jt(r,e,()=>r.next(i),n),()=>Jt(r,e,()=>r.complete(),n),i=>Jt(r,e,()=>r.error(i),n)))})}function zn(e,n=0){return kn((t,r)=>{r.add(e.schedule(()=>t.subscribe(r),n))})}function Hi(e,n){if(!e)throw new Error("Iterable cannot be null");return new dt(t=>{Jt(t,n,()=>{const r=e[Symbol.asyncIterator]();Jt(t,n,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function so(e,n){return n?function $n(e,n){if(null!=e){if(ta(e))return function Di(e,n){return Oe(e).pipe(zn(n),Ii(n))}(e,n);if(Wu(e))return function $r(e,n){return new dt(t=>{let r=0;return n.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}(e,n);if(fu(e))return function Fi(e,n){return Oe(e).pipe(zn(n),Ii(n))}(e,n);if(Fs(e))return Hi(e,n);if(he(e))return function _i(e,n){return new dt(t=>{let r;return Jt(t,n,()=>{r=e[si](),Jt(t,n,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){return void t.error(a)}o?t.complete():t.next(i)},0,!0)}),()=>L(r?.return)&&r.return()})}(e,n);if(Te(e))return function fi(e,n){return Hi(_e(e),n)}(e,n)}throw yi(e)}(e,n):Oe(e)}function Ho(e){return e<=0?()=>ln:kn((n,t)=>{let r=0;n.subscribe(Nt(t,i=>{++r<=e&&(t.next(i),e<=r&&t.complete())}))})}function fo(e,n,...t){return!0===n?(e(),null):!1===n?null:n(...t).pipe(Ho(1)).subscribe(()=>e())}function _r(e){for(let n in e)if(e[n]===_r)return n;throw Error("Could not find renamed property on target object.")}function hi(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(hi).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}function eo(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const zs=_r({__forward_ref__:_r});function $o(e){return e.__forward_ref__=$o,e.toString=function(){return hi(this())},e}function Sn(e){return function Ko(e){return"function"==typeof e&&e.hasOwnProperty(zs)&&e.__forward_ref__===$o}(e)?e():e}class Xn extends Error{constructor(n,t){super(function cs(e,n){return`NG0${Math.abs(e)}${n?": "+n.trim():""}`}(n,t)),this.code=n}}function j(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function Tr(e){return"string"==typeof e?e:null==e?"":String(e)}(e)}function ct(e,n){throw new Xn(-201,!1)}function Pr(e,n){null==e&&function Gn(e,n,t,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${t} ${r} ${n} <=Actual]`))}(n,e,null,"!=")}function mr(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Xi(e){return{providers:e.providers||[],imports:e.imports||[]}}function lo(e){return La(e,Xt)||La(e,Ni)}function La(e,n){return e.hasOwnProperty(n)?e[n]:null}function mt(e){return e&&(e.hasOwnProperty(Fn)||e.hasOwnProperty(wr))?e[Fn]:null}const Xt=_r({\u0275prov:_r}),Fn=_r({\u0275inj:_r}),Ni=_r({ngInjectableDef:_r}),wr=_r({ngInjectorDef:_r});var Cn=(()=>((Cn=Cn||{})[Cn.Default=0]="Default",Cn[Cn.Host=1]="Host",Cn[Cn.Self=2]="Self",Cn[Cn.SkipSelf=4]="SkipSelf",Cn[Cn.Optional=8]="Optional",Cn))();let po;function Yr(e){const n=po;return po=e,n}function Ea(e,n,t){const r=lo(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Cn.Optional?null:void 0!==n?n:void ct(hi(e))}function $i(e){return{toString:e}.toString()}var to=(()=>((to=to||{})[to.OnPush=0]="OnPush",to[to.Default=1]="Default",to))(),Ki=(()=>{return(e=Ki||(Ki={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",Ki;var e})();const Lr=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),la={},ui=[],hu=_r({\u0275cmp:_r}),pu=_r({\u0275dir:_r}),cc=_r({\u0275pipe:_r}),zi=_r({\u0275mod:_r}),Wo=_r({\u0275fac:_r}),Fa=_r({__NG_ELEMENT_ID__:_r});let Ju=0;function Zu(e){return $i(()=>{const t=!0===e.standalone,r={},i={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===to.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||ui,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Ki.Emulated,id:"c"+Ju++,styles:e.styles||ui,_:null,setInput:null,schemas:e.schemas||null,tView:null},o=e.dependencies,a=e.features;return i.inputs=pd(e.inputs,r),i.outputs=pd(e.outputs),a&&a.forEach(s=>s(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(hd).filter(dc):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(co).filter(dc):null,i})}function hd(e){return wi(e)||Jo(e)}function dc(e){return null!==e}const js={};function Ka(e){return $i(()=>{const n={type:e.type,bootstrap:e.bootstrap||ui,declarations:e.declarations||ui,imports:e.imports||ui,exports:e.exports||ui,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(js[e.id]=e.type),n})}function pd(e,n){if(null==e)return la;const t={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,n&&(n[i]=o)}return t}const Sa=Zu;function wi(e){return e[hu]||null}function Jo(e){return e[pu]||null}function co(e){return e[cc]||null}function ca(e,n){const t=e[zi]||null;if(!t&&!0===n)throw new Error(`Type ${hi(e)} does not have '\u0275mod' property.`);return t}function fa(e){return Array.isArray(e)&&"object"==typeof e[1]}function Ps(e){return Array.isArray(e)&&!0===e[1]}function _l(e){return 0!=(8&e.flags)}function Li(e){return 2==(2&e.flags)}function Ur(e){return null!==e.template}function Qs(e){return 0!=(256&e[2])}function ha(e,n){return e.hasOwnProperty(Wo)?e[Wo]:null}class vd{constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function xn(e){return e.type.prototype.ngOnChanges&&(e.setInput=hf),ff}function ff(){const e=fs(this),n=e?.current;if(n){const t=e.previous;if(t===la)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function hf(e,n,t,r){const i=fs(e)||function pf(e,n){return e[eu]=n}(e,{previous:la,current:null}),o=i.current||(i.current={}),a=i.previous,s=this.declaredInputs[t],d=a[s];o[s]=new vd(d&&d.currentValue,n,a===la),e[r]=n}const eu="__ngSimpleChanges__";function fs(e){return e[eu]||null}let vf;function Ai(e){return!!e.listen}const Ou={createRenderer:(e,n)=>{throw new Error("Renderer3 disabled")}};function ji(e){for(;Array.isArray(e);)e=e[0];return e}function So(e,n){return ji(n[e.index])}function Ro(e,n){const t=n[e];return fa(t)?t:t[0]}function ku(e){return 64==(64&e[2])}function _o(e,n){return null==n?null:e[n]}function yf(e){e[18]=0}function gc(e,n){e[5]+=n;let t=e,r=e[3];for(;null!==r&&(1===n&&1===t[5]||-1===n&&0===t[5]);)r[5]+=n,t=r,r=r[3]}const fr={lFrame:Pt(null),bindingsEnabled:!0};function Hc(){return fr.bindingsEnabled}function Wt(){return fr.lFrame.lView}function Si(){return fr.lFrame.tView}function Yo(){let e=Hl();for(;null!==e&&64===e.type;)e=e.parent;return e}function Hl(){return fr.lFrame.currentTNode}function yu(e,n){const t=fr.lFrame;t.currentTNode=e,t.isParent=n}function bd(){return fr.lFrame.isParent}function Re(e,n){const t=fr.lFrame;t.bindingIndex=t.bindingRootIndex=e,De(n)}function De(e){fr.lFrame.currentDirectiveIndex=e}function Qe(e){fr.lFrame.currentQueryIndex=e}function je(e){const n=e[1];return 2===n.type?n.declTNode:1===n.type?e[6]:null}function Ze(e,n,t){if(t&Cn.SkipSelf){let i=n,o=e;for(;!(i=i.parent,null!==i||t&Cn.Host||(i=je(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;n=i,e=o}const r=fr.lFrame=pt();return r.currentTNode=n,r.lView=e,!0}function at(e){const n=pt(),t=e[1];fr.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function pt(){const e=fr.lFrame,n=null===e?null:e.child;return null===n?Pt(e):n}function Pt(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function Tt(){const e=fr.lFrame;return fr.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Dt=Tt;function Ft(){const e=Tt();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Ln(e){fr.lFrame.selectedIndex=e}function sr(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){const o=e.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:s,ngAfterViewInit:d,ngAfterViewChecked:l,ngOnDestroy:f}=o;a&&(e.contentHooks||(e.contentHooks=[])).push(-t,a),s&&((e.contentHooks||(e.contentHooks=[])).push(t,s),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(t,s)),d&&(e.viewHooks||(e.viewHooks=[])).push(-t,d),l&&((e.viewHooks||(e.viewHooks=[])).push(t,l),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(t,l)),null!=f&&(e.destroyHooks||(e.destroyHooks=[])).push(t,f)}}function or(e,n,t){Ui(e,n,3,t)}function tr(e,n,t,r){(3&e[2])===t&&Ui(e,n,t,r)}function Kn(e,n){let t=e[2];(3&t)===n&&(t&=2047,t+=1,e[2]=t)}function Ui(e,n,t,r){const o=r??-1,a=n.length-1;let s=0;for(let d=void 0!==r?65535&e[18]:0;d<a;d++)if("number"==typeof n[d+1]){if(s=n[d],null!=r&&s>=r)break}else n[d]<0&&(e[18]+=65536),(s<o||-1==o)&&(Lo(e,t,n,d),e[18]=(4294901760&e[18])+d+2),d++}function Lo(e,n,t,r){const i=t[r]<0,o=t[r+1],s=e[i?-t[r]:t[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===n){e[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}class Do{constructor(n,t,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function $c(e,n,t){const r=Ai(e);let i=0;for(;i<t.length;){const o=t[i];if("number"==typeof o){if(0!==o)break;i++;const a=t[i++],s=t[i++],d=t[i++];r?e.setAttribute(n,s,d,a):n.setAttributeNS(a,s,d)}else{const a=o,s=t[++i];$l(a)?r&&e.setProperty(n,a,s):r?e.setAttribute(n,a,s):n.setAttribute(a,s),i++}}return i}function El(e){return 3===e||4===e||6===e}function $l(e){return 64===e.charCodeAt(0)}function nl(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){const i=n[r];"number"==typeof i?t=i:0===t||Kc(e,t,i,null,-1===t||2===t?n[++r]:null)}}return e}function Kc(e,n,t,r,i){let o=0,a=e.length;if(-1===n)a=-1;else for(;o<e.length;){const s=e[o++];if("number"==typeof s){if(s===n){a=-1;break}if(s>n){a=o-1;break}}}for(;o<e.length;){const s=e[o];if("number"==typeof s)break;if(s===t){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==a&&(e.splice(a,0,n),o=a+1),e.splice(o++,0,t),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function _c(e){return-1!==e}function Ds(e){return 32767&e}function bo(e,n){let t=function Xc(e){return e>>16}(e),r=n;for(;t>0;)r=r[15],t--;return r}let Nu=!0;function qs(e){const n=Nu;return Nu=e,n}let ms=0;const Hs={};function wd(e,n){const t=Zc(e,n);if(-1!==t)return t;const r=n[1];r.firstCreatePass&&(e.injectorIndex=n.length,Jc(r.data,e),Jc(n,null),Jc(r.blueprint,null));const i=xd(e,n),o=e.injectorIndex;if(_c(i)){const a=Ds(i),s=bo(i,n),d=s[1].data;for(let l=0;l<8;l++)n[o+l]=s[a+l]|d[a+l]}return n[o+8]=i,o}function Jc(e,n){e.push(0,0,0,0,0,0,0,0,n)}function Zc(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function xd(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,r=null,i=n;for(;null!==i;){if(r=bf(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function Kl(e,n,t){!function _f(e,n,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Fa)&&(r=t[Fa]),null==r&&(r=t[Fa]=ms++);const i=255&r;n.data[e+(i>>5)]|=1<<i}(e,n,t)}function qg(e,n,t){if(t&Cn.Optional)return e;ct()}function jp(e,n,t,r){if(t&Cn.Optional&&void 0===r&&(r=null),0==(t&(Cn.Self|Cn.Host))){const i=e[9],o=Yr(void 0);try{return i?i.get(n,r,t&Cn.Optional):Ea(n,r,t&Cn.Optional)}finally{Yr(o)}}return qg(r,0,t)}function Yc(e,n,t,r=Cn.Default,i){if(null!==e){if(1024&n[2]){const a=function ed(e,n,t,r,i){let o=e,a=n;for(;null!==o&&null!==a&&1024&a[2]&&!(256&a[2]);){const s=Os(o,a,t,r|Cn.Self,Hs);if(s!==Hs)return s;let d=o.parent;if(!d){const l=a[21];if(l){const f=l.get(t,Hs,r);if(f!==Hs)return f}d=bf(a),a=a[15]}o=d}return i}(e,n,t,r,Hs);if(a!==Hs)return a}const o=Os(e,n,t,r,Hs);if(o!==Hs)return o}return jp(n,t,r,i)}function Os(e,n,t,r,i){const o=function c1(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(Fa)?e[Fa]:void 0;return"number"==typeof n?n>=0?255&n:d1:n}(t);if("function"==typeof o){if(!Ze(n,e,r))return r&Cn.Host?qg(i,0,r):jp(n,t,r,i);try{const a=o(r);if(null!=a||r&Cn.Optional)return a;ct()}finally{Dt()}}else if("number"==typeof o){let a=null,s=Zc(e,n),d=-1,l=r&Cn.Host?n[16][6]:null;for((-1===s||r&Cn.SkipSelf)&&(d=-1===s?xd(e,n):n[s+8],-1!==d&&Jy(r,!1)?(a=n[1],s=Ds(d),n=bo(d,n)):s=-1);-1!==s;){const f=n[1];if(Wy(o,s,f.data)){const _=l1(s,n,t,a,r,l);if(_!==Hs)return _}d=n[s+8],-1!==d&&Jy(r,n[1].data[s+8]===l)&&Wy(o,s,n)?(a=f,s=Ds(d),n=bo(d,n)):s=-1}}return i}function l1(e,n,t,r,i,o){const a=n[1],s=a.data[e+8],f=function Ph(e,n,t,r,i){const o=e.providerIndexes,a=n.data,s=1048575&o,d=e.directiveStart,f=o>>20,m=i?s+f:e.directiveEnd;for(let E=r?s:s+f;E<m;E++){const D=a[E];if(E<d&&t===D||E>=d&&D.type===t)return E}if(i){const E=a[d];if(E&&Ur(E)&&E.type===t)return d}return null}(s,a,t,null==r?Li(s)&&Nu:r!=a&&0!=(3&s.type),i&Cn.Host&&o===s);return null!==f?Ah(n,a,f,s):Hs}function Ah(e,n,t,r){let i=e[t];const o=n.data;if(function pa(e){return e instanceof Do}(i)){const a=i;a.resolving&&function te(e,n){const t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new Xn(-200,`Circular dependency in DI detected for ${e}${t}`)}(j(o[t]));const s=qs(a.canSeeViewProviders);a.resolving=!0;const d=a.injectImpl?Yr(a.injectImpl):null;Ze(e,r,Cn.Default);try{i=e[t]=a.factory(void 0,o,e,r),n.firstCreatePass&&t>=r.directiveStart&&function vr(e,n,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=n.type.prototype;if(r){const a=xn(n);(t.preOrderHooks||(t.preOrderHooks=[])).push(e,a),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,a)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-e,i),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,o))}(t,o[t],n)}finally{null!==d&&Yr(d),qs(s),a.resolving=!1,Dt()}}return i}function Wy(e,n,t){return!!(t[n+(e>>5)]&1<<e)}function Jy(e,n){return!(e&Cn.Self||e&Cn.Host&&n)}class Qc{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return Yc(this._tNode,this._lView,n,r,t)}}function d1(){return new Qc(Yo(),Wt())}function bf(e){const n=e[1],t=n.type;return 2===t?n.declTNode:1===t?e[6]:null}const xf="__parameters__";function Sf(e,n,t){return $i(()=>{const r=function Hg(e){return function(...t){if(e){const r=e(...t);for(const i in r)this[i]=r[i]}}}(n);function i(...o){if(this instanceof i)return r.apply(this,o),this;const a=new i(...o);return s.annotation=a,s;function s(d,l,f){const _=d.hasOwnProperty(xf)?d[xf]:Object.defineProperty(d,xf,{value:[]})[xf];for(;_.length<=f;)_.push(null);return(_[f]=_[f]||[]).push(a),d}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class Gr{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=mr({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const h1=new Gr("AnalyzeForEntryComponents");function bc(e,n){e.forEach(t=>Array.isArray(t)?bc(t,n):n(t))}function $p(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function Tf(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}const wc={},Xp="__NG_DI_FLAG__",Wp="ngTempTokenPath",S1=/\n/gm,Yg="__source";let Ra;function Jp(e){const n=Ra;return Ra=e,n}function t_(e,n=Cn.Default){if(void 0===Ra)throw new Xn(-203,!1);return null===Ra?Ea(e,void 0,n):Ra.get(e,n&Cn.Optional?null:void 0,n)}function hr(e,n=Cn.Default){return(function Xo(){return po}()||t_)(Sn(e),n)}function td(e,n=Cn.Default){return hr(e,n)}function Qg(e){const n=[];for(let t=0;t<e.length;t++){const r=Sn(e[t]);if(Array.isArray(r)){if(0===r.length)throw new Xn(900,!1);let i,o=Cn.Default;for(let a=0;a<r.length;a++){const s=r[a],d=T1(s);"number"==typeof d?-1===d?i=s.token:o|=d:i=s}n.push(hr(i,o))}else n.push(hr(r))}return n}function kh(e,n){return e[Xp]=n,e.prototype[Xp]=n,e}function T1(e){return e[Xp]}const rl=kh(Sf("Optional"),8),Pf=kh(Sf("SkipSelf"),4);function io(e){return e.ngOriginalError}class Rd{constructor(){this._console=console}handleError(n){const t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&io(n);for(;t&&io(t);)t=io(t);return t||null}}const zo=new Map;let jh=0;const vv="__ngContext__";function Oi(e,n){fa(n)?(e[vv]=n[20],function cm(e){zo.set(e[20],e)}(n)):e[vv]=n}function ol(e){const n=e[vv];return"number"==typeof n?function Uh(e){return zo.get(e)||null}(n):n||null}function fm(e){const n=ol(e);return n?fa(n)?n:n.lView:null}const re=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Lr))();function Ne(e){return e instanceof Function?e():e}var bt=(()=>((bt=bt||{})[bt.Important=1]="Important",bt[bt.DashCase=2]="DashCase",bt))();function zt(e,n){return undefined(e,n)}function Tn(e){const n=e[3];return Ps(n)?n[3]:n}function pn(e){return Yn(e[13])}function Er(e){return Yn(e[4])}function Yn(e){for(;null!==e&&!Ps(e);)e=e[4];return e}function Sr(e,n,t,r,i){if(null!=r){let o,a=!1;Ps(r)?o=r:fa(r)&&(a=!0,r=r[0]);const s=ji(r);0===e&&null!==t?null==i?ai(n,t,s):di(n,t,s,i||null,!0):1===e&&null!==t?di(n,t,s,i||null,!0):2===e?function kd(e,n,t){const r=Io(e,n);r&&function Qa(e,n,t,r){Ai(e)?e.removeChild(n,t,r):n.removeChild(t)}(e,r,n,t)}(n,s,a):3===e&&n.destroyNode(s),null!=o&&function Gh(e,n,t,r,i){const o=t[7];o!==ji(t)&&Sr(n,e,r,o,i);for(let s=10;s<t.length;s++){const d=t[s];Jl(d[1],d,e,n,r,o)}}(n,e,o,t,i)}}function ci(e,n,t){if(Ai(e))return e.createElement(n,t);{const r=null!==t?function Ru(e){const n=e.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(t):null;return null===r?e.createElement(n):e.createElementNS(r,n)}}function sa(e,n){const t=e[9],r=t.indexOf(n),i=n[3];512&n[2]&&(n[2]&=-513,gc(i,-1)),t.splice(r,1)}function Ga(e,n){if(e.length<=10)return;const t=10+n,r=e[t];if(r){const i=r[17];null!==i&&i!==e&&sa(i,r),n>0&&(e[t-1][4]=r[4]);const o=Tf(e,10+n);!function mo(e,n){Jl(e,n,n[11],2,null,null),n[0]=null,n[6]=null}(r[1],r);const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function va(e,n){if(!(128&n[2])){const t=n[11];Ai(t)&&t.destroyNode&&Jl(e,n,t,3,null,null),function go(e){let n=e[13];if(!n)return Va(e[1],e);for(;n;){let t=null;if(fa(n))t=n[13];else{const r=n[10];r&&(t=r)}if(!t){for(;n&&!n[4]&&n!==e;)fa(n)&&Va(n[1],n),n=n[3];null===n&&(n=e),fa(n)&&Va(n[1],n),t=n&&n[4]}n=t}}(n)}}function Va(e,n){if(!(128&n[2])){n[2]&=-65,n[2]|=128,function Da(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let r=0;r<t.length;r+=2){const i=n[t[r]];if(!(i instanceof Do)){const o=t[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){const s=i[o[a]],d=o[a+1];try{d.call(s)}finally{}}else try{o.call(i)}finally{}}}}(e,n),function jo(e,n){const t=e.cleanup,r=n[7];let i=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const a=t[o+1],s="function"==typeof a?a(n):ji(n[a]),d=r[i=t[o+2]],l=t[o+3];"boolean"==typeof l?s.removeEventListener(t[o],d,l):l>=0?r[i=l]():r[i=-l].unsubscribe(),o+=2}else{const a=r[i=t[o+1]];t[o].call(a)}if(null!==r){for(let o=i+1;o<r.length;o++)r[o]();n[7]=null}}(e,n),1===n[1].type&&Ai(n[11])&&n[11].destroy();const t=n[17];if(null!==t&&Ps(n[3])){t!==n[3]&&sa(t,n);const r=n[19];null!==r&&r.detachView(e)}!function mv(e){zo.delete(e[20])}(n)}}function Wr(e,n,t){return function Vi(e,n,t){let r=n;for(;null!==r&&40&r.type;)r=(n=r).parent;if(null===r)return t[0];if(2&r.flags){const i=e.data[r.directiveStart].encapsulation;if(i===Ki.None||i===Ki.Emulated)return null}return So(r,t)}(e,n.parent,t)}function di(e,n,t,r,i){Ai(e)?e.insertBefore(n,t,r,i):(oo(n)?n.content:n).insertBefore(t,r,i)}function ai(e,n,t){Ai(e)?e.appendChild(n,t):(oo(n)?n.content:n).appendChild(t)}function ys(e,n,t,r,i){null!==r?di(e,n,t,r,i):ai(e,n,t)}function oo(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}function Io(e,n){return Ai(e)?e.parentNode(n):n.parentNode}let iu=function Tl(e,n,t){return 40&e.type?So(e,t):null};function Bu(e,n,t,r){const i=Wr(e,r,n),o=n[11],s=function pi(e,n,t){return iu(e,n,t)}(r.parent||n[6],r,n);if(null!=i)if(Array.isArray(t))for(let d=0;d<t.length;d++)ys(o,i,t[d],s,!1);else ys(o,i,t,s,!1)}function ou(e,n){if(null!==n){const t=n.type;if(3&t)return So(n,e);if(4&t)return Sc(-1,e[n.index]);if(8&t){const r=n.child;if(null!==r)return ou(e,r);{const i=e[n.index];return Ps(i)?Sc(-1,i):ji(i)}}if(32&t)return zt(n,e)()||ji(e[n.index]);{const r=Md(e,n);return null!==r?Array.isArray(r)?r[0]:ou(Tn(e[16]),r):ou(e,n.next)}}return null}function Md(e,n){return null!==n?e[16][6].projection[n.projection]:null}function Sc(e,n){const t=10+e+1;if(t<n.length){const r=n[t],i=r[1].firstChild;if(null!==i)return ou(r,i)}return n[7]}function Il(e,n,t,r,i,o,a){for(;null!=t;){const s=r[t.index],d=t.type;if(a&&0===n&&(s&&Oi(ji(s),r),t.flags|=4),64!=(64&t.flags))if(8&d)Il(e,n,t.child,r,i,o,!1),Sr(n,e,i,s,o);else if(32&d){const l=zt(t,r);let f;for(;f=l();)Sr(n,e,i,f,o);Sr(n,e,i,s,o)}else 16&d?Nd(e,n,r,t,i,o):Sr(n,e,i,s,o);t=a?t.projectionNext:t.next}}function Jl(e,n,t,r,i,o){Il(t,r,e.firstChild,n,i,o,!1)}function Nd(e,n,t,r,i,o){const a=t[16],d=a[6].projection[r.projection];if(Array.isArray(d))for(let l=0;l<d.length;l++)Sr(n,e,i,d[l],o);else Il(e,n,d,a[3],i,o,!0)}function Vh(e,n,t){Ai(e)?e.setAttribute(n,"style",t):n.style.cssText=t}function Pl(e,n,t){Ai(e)?""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t):n.className=t}function zf(e,n,t){let r=e.length;for(;;){const i=e.indexOf(n,t);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=n.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}t=i+1}}const Cc="ng-template";function jf(e,n,t){let r=0;for(;r<e.length;){let i=e[r++];if(t&&"class"===i){if(i=e[r],-1!==zf(i.toLowerCase(),n,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===n)return!0;return!1}}return!1}function Hh(e){return 4===e.type&&e.value!==Cc}function mm(e,n,t){return n===(4!==e.type||t?e.value:Cc)}function $h(e,n,t){let r=4;const i=e.attrs||[],o=function Xh(e){for(let n=0;n<e.length;n++)if(El(e[n]))return n;return e.length}(i);let a=!1;for(let s=0;s<n.length;s++){const d=n[s];if("number"!=typeof d){if(!a)if(4&r){if(r=2|1&r,""!==d&&!mm(e,d,t)||""===d&&1===n.length){if(au(r))return!1;a=!0}}else{const l=8&r?d:n[++s];if(8&r&&null!==e.attrs){if(!jf(e.attrs,l,t)){if(au(r))return!1;a=!0}continue}const _=gm(8&r?"class":d,i,Hh(e),t);if(-1===_){if(au(r))return!1;a=!0;continue}if(""!==l){let m;m=_>o?"":i[_+1].toLowerCase();const E=8&r?m:null;if(E&&-1!==zf(E,l,0)||2&r&&l!==m){if(au(r))return!1;a=!0}}}}else{if(!a&&!au(r)&&!au(d))return!1;if(a&&au(d))continue;a=!1,r=d|1&r}}return au(r)||a}function au(e){return 0==(1&e)}function gm(e,n,t,r){if(null===n)return-1;let i=0;if(r||!t){let o=!1;for(;i<n.length;){const a=n[i];if(a===e)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){let s=n[++i];for(;"string"==typeof s;)s=n[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function vm(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const r=e[t];if("number"==typeof r)return-1;if(r===n)return t;t++}return-1}(n,e)}function Uf(e,n,t=!1){for(let r=0;r<n.length;r++)if($h(e,n[r],t))return!0;return!1}function Wh(e,n){return e?":not("+n.trim()+")":n}function Vf(e){let n=e[0],t=1,r=2,i="",o=!1;for(;t<e.length;){let a=e[t];if("string"==typeof a)if(2&r){const s=e[++t];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""!==i&&!au(a)&&(n+=Wh(o,i),i=""),r=a,o=o||!au(r);t++}return""!==i&&(n+=Wh(o,i)),n}const Vr={};const Zl=new Gr("ENVIRONMENT_INITIALIZER"),bm=new Gr("INJECTOR_DEF_TYPES");function P_(...e){return{\u0275providers:Zh(0,e)}}function Zh(e,...n){const t=[],r=new Set;let i;return bc(n,o=>{const a=o;$f(a,t,[],r)&&(i||(i=[]),i.push(a))}),void 0!==i&&Rl(i,t),t}function Rl(e,n){for(let t=0;t<e.length;t++){const{providers:i}=e[t];bc(i,o=>{n.push(o)})}}function $f(e,n,t,r){if(!(e=Sn(e)))return!1;let i=null,o=mt(e);const a=!o&&wi(e);if(o||a){if(a&&!a.standalone)return!1;i=e}else{const d=e.ngModule;if(o=mt(d),!o)return!1;i=d}const s=r.has(i);if(a){if(s)return!1;if(r.add(i),a.dependencies){const d="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const l of d)$f(l,n,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!s){let l;r.add(i);try{bc(o.imports,f=>{$f(f,n,t,r)&&(l||(l=[]),l.push(f))})}finally{}void 0!==l&&Rl(l,n)}if(!s){const l=ha(i)||(()=>new i);n.push({provide:i,useFactory:l,deps:ui},{provide:bm,useValue:i,multi:!0},{provide:Zl,useValue:()=>hr(i),multi:!0})}const d=o.providers;null==d||s||bc(d,f=>{n.push(f)})}}return i!==e&&void 0!==e.providers}const xm=_r({provide:String,useValue:_r});function Kf(e){return null!==e&&"object"==typeof e&&xm in e}function Dl(e){return"function"==typeof e}const Sm=new Gr("INJECTOR",-1);class wv{get(n,t=wc){if(t===wc){const r=new Error(`NullInjectorError: No provider for ${hi(n)}!`);throw r.name="NullInjectorError",r}return t}}const Cm=new Gr("Set Injector scope."),Yh={},wu={};let Xf;function Tm(){return void 0===Xf&&(Xf=new wv),Xf}class Ks{}class R_ extends Ks{constructor(n,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Pm(n,a=>this.processProvider(a)),this.records.set(Sm,Ol(void 0,this)),i.has("environment")&&this.records.set(Ks,Ol(void 0,this));const o=this.records.get(Cm);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(bm.multi,ui,Cn.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();for(const n of this._onDestroyHooks)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(n){this._onDestroyHooks.push(n)}get(n,t=wc,r=Cn.Default){this.assertNotDestroyed();const i=Jp(this),o=Yr(void 0);try{if(!(r&Cn.SkipSelf)){let s=this.records.get(n);if(void 0===s){const d=function O_(e){return"function"==typeof e||"object"==typeof e&&e instanceof Gr}(n)&&lo(n);s=d&&this.injectableDefInScope(d)?Ol(Im(n),Yh):null,this.records.set(n,s)}if(null!=s)return this.hydrate(n,s)}return(r&Cn.Self?Tm():this.parent).get(n,t=r&Cn.Optional&&t===wc?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Wp]=a[Wp]||[]).unshift(hi(n)),i)throw a;return function r_(e,n,t,r){const i=e[Wp];throw n[Yg]&&i.unshift(n[Yg]),e.message=function I1(e,n,t,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=hi(n);if(Array.isArray(n))i=n.map(hi).join(" -> ");else if("object"==typeof n){let o=[];for(let a in n)if(n.hasOwnProperty(a)){let s=n[a];o.push(a+":"+("string"==typeof s?JSON.stringify(s):hi(s)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${e.replace(S1,"\n  ")}`}("\n"+e.message,i,t,r),e.ngTokenPath=i,e[Wp]=null,e}(a,n,"R3InjectorError",this.source)}throw a}finally{Yr(o),Jp(i)}}resolveInjectorInitializers(){const n=Jp(this),t=Yr(void 0);try{const r=this.get(Zl.multi,ui,Cn.Self);for(const i of r)i()}finally{Jp(n),Yr(t)}}toString(){const n=[],t=this.records;for(const r of t.keys())n.push(hi(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Xn(205,!1)}processProvider(n){let t=Dl(n=Sn(n))?n:Sn(n&&n.provide);const r=function Wf(e){return Kf(e)?Ol(void 0,e.useValue):Ol(function Fd(e,n,t){let r;if(Dl(e)){const i=Sn(e);return ha(i)||Im(i)}if(Kf(e))r=()=>Sn(e.useValue);else if(function bv(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Qg(e.deps||[]));else if(function Em(e){return!(!e||!e.useExisting)}(e))r=()=>hr(Sn(e.useExisting));else{const i=Sn(e&&(e.useClass||e.provide));if(!function Jf(e){return!!e.deps}(e))return ha(i)||Im(i);r=()=>new i(...Qg(e.deps))}return r}(e),Yh)}(n);if(Dl(n)||!0!==n.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Ol(void 0,Yh,!0),i.factory=()=>Qg(i.multi),this.records.set(t,i)),t=n,i.multi.push(n)}this.records.set(t,r)}hydrate(n,t){return t.value===Yh&&(t.value=wu,t.value=t.factory()),"object"==typeof t.value&&t.value&&function D_(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(n){if(!n.providedIn)return!1;const t=Sn(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Im(e){const n=lo(e),t=null!==n?n.factory:ha(e);if(null!==t)return t;if(e instanceof Gr)throw new Xn(204,!1);if(e instanceof Function)return function Bd(e){const n=e.length;if(n>0)throw function ru(e,n){const t=[];for(let r=0;r<e;r++)t.push(n);return t}(n,"?"),new Xn(204,!1);const t=function ho(e){const n=e&&(e[Xt]||e[Ni]);if(n){const t=function Ge(e){if(e.hasOwnProperty("name"))return e.name;const n=(""+e).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),n}return null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new Xn(204,!1)}function Ol(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function M_(e){return!!e.\u0275providers}function Pm(e,n){for(const t of e)Array.isArray(t)?Pm(t,n):M_(t)?Pm(t.\u0275providers,n):n(t)}function Am(e,n=null,t=null,r){const i=Rm(e,n,t,r);return i.resolveInjectorInitializers(),i}function Rm(e,n=null,t=null,r,i=new Set){const o=[t||ui,P_(e)];return r=r||("object"==typeof e?void 0:hi(e)),new R_(o,n||Tm(),r||null,i)}let ya=(()=>{class e{static create(t,r){if(Array.isArray(t))return Am({name:""},r,t,"");{const i=t.name??"";return Am({name:i},t.parent,t.providers,i)}}}return e.THROW_IF_NOT_FOUND=wc,e.NULL=new wv,e.\u0275prov=mr({token:e,providedIn:"any",factory:()=>hr(Sm)}),e.__NG_ELEMENT_ID__=-1,e})();function br(e,n=Cn.Default){const t=Wt();return null===t?hr(e,n):Yc(Yo(),t,Sn(e),n)}function rx(){throw new Error("invalid")}function tI(e,n){const t=e.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],o=t[r+1];if(-1!==o){const a=e.data[o];Qe(i),a.contentQueries(2,n[o],o)}}}function Tv(e,n,t,r,i,o,a,s,d,l,f){const _=n.blueprint.slice();return _[0]=i,_[2]=76|r,(null!==f||e&&1024&e[2])&&(_[2]|=1024),yf(_),_[3]=_[15]=e,_[8]=t,_[10]=a||e&&e[10],_[11]=s||e&&e[11],_[12]=d||e&&e[12]||null,_[9]=l||e&&e[9]||null,_[6]=o,_[20]=function Ec(){return jh++}(),_[21]=f,_[16]=2==n.type?e[16]:_,_}function Nm(e,n,t,r,i){let o=e.data[n];if(null===o)o=function yx(e,n,t,r,i){const o=Hl(),a=bd(),d=e.data[n]=function N3(e,n,t,r,i,o){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,t,n,r,i);return null===e.firstChild&&(e.firstChild=d),null!==o&&(a?null==o.child&&null!==d.parent&&(o.child=d):null===o.next&&(o.next=d)),d}(e,n,t,r,i),function se(){return fr.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const a=function Ya(){const e=fr.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();o.injectorIndex=null===a?-1:a.injectorIndex}return yu(o,!0),o}function Lm(e,n,t,r){if(0===t)return-1;const i=n.length;for(let o=0;o<t;o++)n.push(r),e.blueprint.push(r),e.data.push(null);return i}function Iv(e,n,t){at(n);try{const r=e.viewQuery;null!==r&&Ix(1,r,t);const i=e.template;null!==i&&nI(e,n,i,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&tI(e,n),e.staticViewQueries&&Ix(2,e.viewQuery,t);const o=e.components;null!==o&&function O3(e,n){for(let t=0;t<n.length;t++)Q3(e,n[t])}(n,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[2]&=-5,Ft()}}function Bm(e,n,t,r){const i=n[2];if(128!=(128&i)){at(n);try{yf(n),function B(e){return fr.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&nI(e,n,t,2,r);const a=3==(3&i);if(a){const l=e.preOrderCheckHooks;null!==l&&or(n,l,null)}else{const l=e.preOrderHooks;null!==l&&tr(n,l,0,null),Kn(n,0)}if(function Z3(e){for(let n=pn(e);null!==n;n=Er(n)){if(!n[2])continue;const t=n[9];for(let r=0;r<t.length;r++){const i=t[r],o=i[3];0==(512&i[2])&&gc(o,1),i[2]|=512}}}(n),function J3(e){for(let n=pn(e);null!==n;n=Er(n))for(let t=10;t<n.length;t++){const r=n[t],i=r[1];ku(r)&&Bm(i,r,i.template,r[8])}}(n),null!==e.contentQueries&&tI(e,n),a){const l=e.contentCheckHooks;null!==l&&or(n,l)}else{const l=e.contentHooks;null!==l&&tr(n,l,1),Kn(n,1)}!function R3(e,n){const t=e.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Ln(~i);else{const o=i,a=t[++r],s=t[++r];Re(a,o),s(2,n[o])}}}finally{Ln(-1)}}(e,n);const s=e.components;null!==s&&function D3(e,n){for(let t=0;t<n.length;t++)Y3(e,n[t])}(n,s);const d=e.viewQuery;if(null!==d&&Ix(2,d,r),a){const l=e.viewCheckHooks;null!==l&&or(n,l)}else{const l=e.viewHooks;null!==l&&tr(n,l,2),Kn(n,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[2]&=-41,512&n[2]&&(n[2]&=-513,gc(n[3],-1))}finally{Ft()}}}function M3(e,n,t,r){const i=n[10],a=function zp(e){return 4==(4&e[2])}(n);try{!a&&i.begin&&i.begin(),a&&Iv(e,n,r),Bm(e,n,t,r)}finally{!a&&i.end&&i.end()}}function nI(e,n,t,r,i){const o=function on(){return fr.lFrame.selectedIndex}(),a=2&r;try{Ln(-1),a&&n.length>22&&function ym(e,n,t,r){if(!r)if(3==(3&n[2])){const o=e.preOrderCheckHooks;null!==o&&or(n,o,t)}else{const o=e.preOrderHooks;null!==o&&tr(n,o,0,t)}Ln(t)}(e,n,22,!1),t(r,i)}finally{Ln(o)}}function iI(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=G_(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):n}function G_(e,n,t,r,i,o,a,s,d,l){const f=22+r,_=f+i,m=function k3(e,n){const t=[];for(let r=0;r<n;r++)t.push(r<e?null:Vr);return t}(f,_),E="function"==typeof l?l():l;return m[1]={type:e,blueprint:m,template:t,queries:null,viewQuery:s,declTNode:n,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:d,consts:E,incompleteFirstPass:!1}}function uI(e,n,t){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(n,i):t[r]=[n,i]}return t}function lI(e,n,t,r,i,o){const a=o.hostBindings;if(a){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const d=~n.index;(function U3(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(s)!=d&&s.push(d),s.push(r,i,a)}}function cI(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function dI(e,n){n.flags|=2,(e.components||(e.components=[])).push(n.index)}function $3(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;Ur(n)&&(t[""]=e)}}function fI(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}function hI(e,n,t,r,i){e.data[r]=i;const o=i.factory||(i.factory=ha(i.type)),a=new Do(o,Ur(i),br);e.blueprint[r]=a,t[r]=a,lI(e,n,0,r,Lm(e,t,i.hostVars,Vr),i)}function K3(e,n,t){const r=So(n,e),i=iI(t),o=e[10],a=V_(e,Tv(e,i,null,t.onPush?32:16,r,n,o,o.createRenderer(r,t),null,null,null));e[n.index]=a}function X3(e,n,t,r,i,o){const a=o[n];if(null!==a){const s=r.setInput;for(let d=0;d<a.length;){const l=a[d++],f=a[d++],_=a[d++];null!==s?r.setInput(t,_,l,f):t[f]=_}}}function W3(e,n){let t=null,r=0;for(;r<n.length;){const i=n[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,e[i],n[r+1])),r+=2}else r+=2;else r+=4}return t}function Y3(e,n){const t=Ro(n,e);if(ku(t)){const r=t[1];48&t[2]?Bm(r,t,r.template,t[8]):t[5]>0&&Ex(t)}}function Ex(e){for(let r=pn(e);null!==r;r=Er(r))for(let i=10;i<r.length;i++){const o=r[i];if(512&o[2]){const a=o[1];Bm(a,o,a.template,o[8])}else o[5]>0&&Ex(o)}const t=e[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=Ro(t[r],e);ku(i)&&i[5]>0&&Ex(i)}}function Q3(e,n){const t=Ro(n,e),r=t[1];(function eL(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])})(r,t),Iv(r,t,t[8])}function V_(e,n){return e[13]?e[14][4]=n:e[13]=n,e[14]=n,n}function Tx(e,n,t){const r=n[10];r.begin&&r.begin();try{Bm(e,n,e.template,t)}catch(i){throw function _I(e,n){const t=e[9],r=t?t.get(Rd,null):null;r&&r.handleError(n)}(n,i),i}finally{r.end&&r.end()}}function mI(e){!function Cx(e){for(let n=0;n<e.components.length;n++){const t=e.components[n],r=fm(t);if(null!==r){const i=r[1];M3(i,r,i.template,t)}}}(e[8])}function Ix(e,n,t){Qe(0),n(e,t)}const nL=(()=>Promise.resolve(null))();function q_(e,n,t){let r=t?e.styles:null,i=t?e.classes:null,o=0;if(null!==n)for(let a=0;a<n.length;a++){const s=n[a];"number"==typeof s?o=s:1==o?i=eo(i,s):2==o&&(r=eo(r,s+": "+n[++a]+";"))}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=i:e.classesWithoutHost=i}function hL(){const e=Yo();sr(Wt()[1],e)}function Ox(e,n,t,r,i){const a=i?"class":"style";!function bI(e,n,t,r,i){for(let o=0;o<t.length;){const a=t[o++],s=t[o++],d=n[a],l=e.data[a];null!==l.setInput?l.setInput(d,i,r,s):d[s]=i}}(e,t,n.inputs[a],a,r)}function K_(e,n,t,r){const i=Wt(),o=Si(),a=22+e,s=i[11],d=i[a]=ci(s,n,function zr(){return fr.lFrame.currentNamespace}()),l=o.firstCreatePass?function PL(e,n,t,r,i,o,a){const s=n.consts,l=Nm(n,e,2,i,_o(s,o));return function wx(e,n,t,r){let i=!1;if(Hc()){const o=function q3(e,n,t){const r=e.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const a=r[o];Uf(t,a.selectors,!1)&&(i||(i=[]),Kl(wd(t,n),e,a.type),Ur(a)?(dI(e,t),i.unshift(a)):i.push(a))}return i}(e,n,t),a=null===r?null:{"":-1};if(null!==o){i=!0,fI(t,e.data.length,o.length);for(let f=0;f<o.length;f++){const _=o[f];_.providersResolver&&_.providersResolver(_)}let s=!1,d=!1,l=Lm(e,n,o.length,null);for(let f=0;f<o.length;f++){const _=o[f];t.mergedAttrs=nl(t.mergedAttrs,_.hostAttrs),hI(e,t,n,l,_),$3(l,_,a),null!==_.contentQueries&&(t.flags|=8),(null!==_.hostBindings||null!==_.hostAttrs||0!==_.hostVars)&&(t.flags|=128);const m=_.type.prototype;!s&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t.index),s=!0),!d&&(m.ngOnChanges||m.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t.index),d=!0),l++}!function L3(e,n){const r=n.directiveEnd,i=e.data,o=n.attrs,a=[];let s=null,d=null;for(let l=n.directiveStart;l<r;l++){const f=i[l],_=f.inputs,m=null===o||Hh(n)?null:W3(_,o);a.push(m),s=uI(_,l,s),d=uI(f.outputs,l,d)}null!==s&&(s.hasOwnProperty("class")&&(n.flags|=16),s.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=a,n.inputs=s,n.outputs=d}(e,t)}a&&function H3(e,n,t){if(n){const r=e.localNames=[];for(let i=0;i<n.length;i+=2){const o=t[n[i+1]];if(null==o)throw new Xn(-301,!1);r.push(n[i],o)}}}(t,r,a)}return t.mergedAttrs=nl(t.mergedAttrs,t.attrs),i}(n,t,l,_o(s,a)),null!==l.attrs&&q_(l,l.attrs,!1),null!==l.mergedAttrs&&q_(l,l.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,l),l}(a,o,i,0,n,t,r):o.data[a];yu(l,!0);const f=l.mergedAttrs;null!==f&&$c(s,d,f);const _=l.classes;null!==_&&Pl(s,d,_);const m=l.styles;return null!==m&&Vh(s,d,m),64!=(64&l.flags)&&Bu(o,i,d,l),0===function vc(){return fr.lFrame.elementDepthCount}()&&Oi(d,i),function wl(){fr.lFrame.elementDepthCount++}(),function xi(e){return 1==(1&e.flags)}(l)&&(function _x(e,n,t){!Hc()||(function G3(e,n,t,r){const i=t.directiveStart,o=t.directiveEnd;e.firstCreatePass||wd(t,n),Oi(r,n);const a=t.initialInputs;for(let s=i;s<o;s++){const d=e.data[s],l=Ur(d);l&&K3(n,t,d);const f=Ah(n,e,s,t);Oi(f,n),null!==a&&X3(0,s-i,f,d,0,a),l&&(Ro(t.index,n)[8]=f)}}(e,n,t,So(t,n)),128==(128&t.flags)&&function V3(e,n,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,a=function Me(){return fr.lFrame.currentDirectiveIndex}();try{Ln(o);for(let s=r;s<i;s++){const d=e.data[s],l=n[s];De(s),(null!==d.hostBindings||0!==d.hostVars||null!==d.hostAttrs)&&cI(d,l)}}finally{Ln(-1),De(a)}}(e,n,t))}(o,i,l),function rI(e,n,t){if(_l(n)){const i=n.directiveEnd;for(let o=n.directiveStart;o<i;o++){const a=e.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}}(o,l,i)),null!==r&&function bx(e,n,t=So){const r=n.localNames;if(null!==r){let i=n.index+1;for(let o=0;o<r.length;o+=2){const a=r[o+1],s=-1===a?t(n,e):e[a];e[i++]=s}}}(i,l),K_}function Rv(){let e=Yo();bd()?function yc(){fr.lFrame.isParent=!1}():(e=e.parent,yu(e,!1));const n=e;!function qc(){fr.lFrame.elementDepthCount--}();const t=Si();return t.firstCreatePass&&(sr(t,e),_l(e)&&t.queries.elementEnd(e)),null!=n.classesWithoutHost&&function hs(e){return 0!=(16&e.flags)}(n)&&Ox(t,n,Wt(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function ps(e){return 0!=(32&e.flags)}(n)&&Ox(t,n,Wt(),n.stylesWithoutHost,!1),Rv}function X_(e,n,t,r){return K_(e,n,t,r),Rv(),X_}function W_(e){return!!e&&"function"==typeof e.then}const $I=function HI(e){return!!e&&"function"==typeof e.subscribe};function bP(e,n=""){const t=Wt(),r=Si(),i=e+22,o=r.firstCreatePass?Nm(r,i,1,n,null):r.data[i],a=t[i]=function pr(e,n){return Ai(e)?e.createText(n):e.createTextNode(n)}(t[11],n);Bu(r,t,a,o),yu(o,!1)}const Wm="en-US";let VP=Wm;class bF{resolveComponentFactory(n){throw function _F(e){const n=Error(`No component factory found for ${hi(e)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=e,n}(n)}}let Lv=(()=>{class e{}return e.NULL=new bF,e})();class eh{}class gA{}class vA{}function xF(){return Zm(Yo(),Wt())}function Zm(e,n){return new th(So(e,n))}let th=(()=>{class e{constructor(t){this.nativeElement=t}}return e.__NG_ELEMENT_ID__=xF,e})();class yA{}let TF=(()=>{class e{}return e.\u0275prov=mr({token:e,providedIn:"root",factory:()=>null}),e})();class r0{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const IF=new r0("14.0.4"),Hx={};function o0(e,n,t,r,i=!1){for(;null!==t;){const o=n[t.index];if(null!==o&&r.push(ji(o)),Ps(o))for(let s=10;s<o.length;s++){const d=o[s],l=d[1].firstChild;null!==l&&o0(d[1],d,l,r)}const a=t.type;if(8&a)o0(e,n,t.child,r);else if(32&a){const s=zt(t,n);let d;for(;d=s();)r.push(d)}else if(16&a){const s=Md(n,t);if(Array.isArray(s))r.push(...s);else{const d=Tn(n[16]);o0(d[1],d,s,r,!0)}}t=i?t.projectionNext:t.next}return r}class Bv{constructor(n,t){this._lView=n,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,t=n[1];return o0(t,n,t.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(Ps(n)){const t=n[8],r=t?t.indexOf(this):-1;r>-1&&(Ga(n,r),Tf(t,r))}this._attachedToViewContainer=!1}va(this._lView[1],this._lView)}onDestroy(n){!function sI(e,n,t,r){const i=function gI(e){return e[7]||(e[7]=[])}(n);null===t?i.push(r):(i.push(t),e.firstCreatePass&&function vI(e){return e.cleanup||(e.cleanup=[])}(e).push(r,i.length-1))}(this._lView[1],this._lView,null,n)}markForCheck(){!function Sx(e){for(;e;){e[2]|=32;const n=Tn(e);if(Qs(e)&&!n)return e;e=n}return null}(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Tx(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Xn(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function To(e,n){Jl(e,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Xn(902,!1);this._appRef=n}}class PF extends Bv{constructor(n){super(n),this._view=n}detectChanges(){mI(this._view)}checkNoChanges(){}get context(){return null}}class $x extends Lv{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=wi(n);return new Kx(t,this.ngModule)}}function _A(e){const n=[];for(let t in e)e.hasOwnProperty(t)&&n.push({propName:e[t],templateName:t});return n}class RF{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,r){const i=this.injector.get(n,Hx,r);return i!==Hx||t===Hx?i:this.parentInjector.get(n,t,r)}}class Kx extends vA{constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function Jh(e){return e.map(Vf).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return _A(this.componentDef.inputs)}get outputs(){return _A(this.componentDef.outputs)}create(n,t,r,i){let o=(i=i||this.ngModule)instanceof Ks?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new RF(n,o):n,s=a.get(yA,Ou),d=a.get(TF,null),l=s.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",_=r?function aI(e,n,t){if(Ai(e))return e.selectRootElement(n,t===Ki.ShadowDom);let r="string"==typeof n?e.querySelector(n):n;return r.textContent="",r}(l,r,this.componentDef.encapsulation):ci(s.createRenderer(null,this.componentDef),f,function AF(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(f)),m=this.componentDef.onPush?288:272,E=function DI(e,n){return{components:[],scheduler:e||re,clean:nL,playerHandler:n||null,flags:0}}(),D=G_(0,null,null,1,0,null,null,null,null,null),R=Tv(null,D,E,m,null,null,s,l,d,a,null);let ye,xe;at(R);try{const et=function AI(e,n,t,r,i,o){const a=t[1];t[22]=e;const d=Nm(a,22,2,"#host",null),l=d.mergedAttrs=n.hostAttrs;null!==l&&(q_(d,l,!0),null!==e&&($c(i,e,l),null!==d.classes&&Pl(i,e,d.classes),null!==d.styles&&Vh(i,e,d.styles)));const f=r.createRenderer(e,n),_=Tv(t,iI(n),null,n.onPush?32:16,t[22],d,r,f,o||null,null,null);return a.firstCreatePass&&(Kl(wd(d,t),a,n.type),dI(a,d),fI(d,t.length,1)),V_(t,_),t[22]=_}(_,this.componentDef,R,s,l);if(_)if(r)$c(l,_,["ng-version",IF.full]);else{const{attrs:We,classes:vt}=function Ld(e){const n=[],t=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&n.push(o,e[++r]):8===i&&t.push(o);else{if(!au(i))break;i=o}r++}return{attrs:n,classes:t}}(this.componentDef.selectors[0]);We&&$c(l,_,We),vt&&vt.length>0&&Pl(l,_,vt.join(" "))}if(xe=function Mu(e,n){return e.data[n]}(D,22),void 0!==t){const We=xe.projection=[];for(let vt=0;vt<this.ngContentSelectors.length;vt++){const Mt=t[vt];We.push(null!=Mt?Array.from(Mt):null)}}ye=function RI(e,n,t,r,i){const o=t[1],a=function j3(e,n,t){const r=Yo();e.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),hI(e,r,n,Lm(e,n,1,null),t));const i=Ah(n,e,r.directiveStart,r);Oi(i,n);const o=So(r,n);return o&&Oi(o,n),i}(o,t,n);if(r.components.push(a),e[8]=a,null!==i)for(const d of i)d(a,n);if(n.contentQueries){const d=Yo();n.contentQueries(1,a,d.directiveStart)}const s=Yo();return!o.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(Ln(s.index),lI(t[1],s,0,s.directiveStart,s.directiveEnd,n),cI(n,a)),a}(et,this.componentDef,R,E,[hL]),Iv(D,R,null)}finally{Ft()}return new OF(this.componentType,ye,Zm(xe,R),R,xe)}}class OF extends class wF{}{constructor(n,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new PF(i),this.componentType=n}get injector(){return new Qc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}class bA extends eh{constructor(n,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new $x(this);const r=ca(n);this._bootstrapComponents=Ne(r.bootstrap),this._r3Injector=Rm(n,t,[{provide:eh,useValue:this},{provide:Lv,useValue:this.componentFactoryResolver}],hi(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(n)}get(n,t=ya.THROW_IF_NOT_FOUND,r=Cn.Default){return n===ya||n===eh||n===Sm?this:this._r3Injector.get(n,t,r)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Xx extends gA{constructor(n){super(),this.moduleType=n}create(n){return new bA(this.moduleType,n)}}class kF extends eh{constructor(n,t,r){super(),this.componentFactoryResolver=new $x(this),this.instance=null;const i=new R_([...n,{provide:eh,useValue:this},{provide:Lv,useValue:this.componentFactoryResolver}],t||Tm(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function a0(e,n=null,t=null){return new kF(e,n,t).injector}function Wx(e){return n=>{setTimeout(e,void 0,n)}}const zu=class t4 extends Et{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,t,r){let i=n,o=t||(()=>null),a=r;if(n&&"object"==typeof n){const d=n;i=d.next?.bind(d),o=d.error?.bind(d),a=d.complete?.bind(d)}this.__isAsync&&(o=Wx(o),i&&(i=Wx(i)),a&&(a=Wx(a)));const s=super.subscribe({next:i,error:o,complete:a});return n instanceof q&&n.add(s),s}};let Dc=(()=>{class e{}return e.__NG_ELEMENT_ID__=a4,e})();function a4(){return function PA(e,n){let t;const r=n[e.index];if(Ps(r))t=r;else{let i;if(8&e.type)i=ji(r);else{const o=n[11];i=o.createComment("");const a=So(e,n);di(o,Io(o,a),i,function es(e,n){return Ai(e)?e.nextSibling(n):n.nextSibling}(o,a),!1)}n[e.index]=t=function pI(e,n,t,r){return new Array(e,!0,!1,n,null,0,r,t,null,null)}(r,n,i,e),V_(n,t)}return new TA(t,e,n)}(Yo(),Wt())}const s4=Dc,TA=class extends s4{constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return Zm(this._hostTNode,this._hostLView)}get injector(){return new Qc(this._hostTNode,this._hostLView)}get parentInjector(){const n=xd(this._hostTNode,this._hostLView);if(_c(n)){const t=bo(n,this._hostLView),r=Ds(n);return new Qc(t[1].data[r+8],t)}return new Qc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=IA(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=n.createEmbeddedView(t||{},o);return this.insert(a,i),a}createComponent(n,t,r,i,o){const a=n&&!function Oh(e){return"function"==typeof e}(n);let s;if(a)s=t;else{const _=t||{};s=_.index,r=_.injector,i=_.projectableNodes,o=_.environmentInjector||_.ngModuleRef}const d=a?n:new Kx(wi(n)),l=r||this.parentInjector;if(!o&&null==d.ngModule){const m=(a?l:this.parentInjector).get(Ks,null);m&&(o=m)}const f=d.create(l,i,void 0,o);return this.insert(f.hostView,s),f}insert(n,t){const r=n._lView,i=r[1];if(function ro(e){return Ps(e[3])}(r)){const f=this.indexOf(n);if(-1!==f)this.detach(f);else{const _=r[3],m=new TA(_,_[6],_[3]);m.detach(m.indexOf(n))}}const o=this._adjustIndex(t),a=this._lContainer;!function ko(e,n,t,r){const i=10+r,o=t.length;r>0&&(t[i-1][4]=n),r<o-10?(n[4]=t[i],$p(t,10+r,n)):(t.push(n),n[4]=null),n[3]=t;const a=n[17];null!==a&&t!==a&&function ga(e,n){const t=e[9];n[16]!==n[3][3][16]&&(e[2]=!0),null===t?e[9]=[n]:t.push(n)}(a,n);const s=n[19];null!==s&&s.insertView(e),n[2]|=64}(i,r,a,o);const s=Sc(o,a),d=r[11],l=Io(d,a[7]);return null!==l&&function Mo(e,n,t,r,i,o){r[0]=i,r[6]=n,Jl(e,r,t,1,i,o)}(i,a[6],d,r,l,s),n.attachToViewContainerRef(),$p(Zx(a),o,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=IA(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),r=Ga(this._lContainer,t);r&&(Tf(Zx(this._lContainer),t),va(r[1],r))}detach(n){const t=this._adjustIndex(n,-1),r=Ga(this._lContainer,t);return r&&null!=Tf(Zx(this._lContainer),t)?new Bv(r):null}_adjustIndex(n,t=0){return n??this.length+t}};function IA(e){return e[8]}function Zx(e){return e[8]||(e[8]=[])}function l0(...e){}const c0=new Gr("Application Initializer");let d0=(()=>{class e{constructor(t){this.appInits=t,this.resolve=l0,this.reject=l0,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(W_(o))t.push(o);else if($I(o)){const a=new Promise((s,d)=>{o.subscribe({complete:s,error:d})});t.push(a)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(hr(c0,8))},e.\u0275prov=mr({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Uv=new Gr("AppId",{providedIn:"root",factory:function YA(){return`${cE()}${cE()}${cE()}`}});function cE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const QA=new Gr("Platform Initializer"),eR=new Gr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),tR=new Gr("appBootstrapListener");let B4=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=mr({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Gd=new Gr("LocaleId",{providedIn:"root",factory:()=>td(Gd,Cn.Optional|Cn.SkipSelf)||function F4(){return typeof $localize<"u"&&$localize.locale||Wm}()});class j4{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}}let dE=(()=>{class e{compileModuleSync(t){return new Xx(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=Ne(ca(t).declarations).reduce((a,s)=>{const d=wi(s);return d&&a.push(new Kx(d)),a},[]);return new j4(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=mr({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const G4=(()=>Promise.resolve(0))();function fE(e){typeof Zone>"u"?G4.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class _s{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new zu(!1),this.onMicrotaskEmpty=new zu(!1),this.onStable=new zu(!1),this.onError=new zu(!1),typeof Zone>"u")throw new Xn(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function V4(){let e=Lr.requestAnimationFrame,n=Lr.cancelAnimationFrame;if(typeof Zone<"u"&&e&&n){const t=e[Zone.__symbol__("OriginalDelegate")];t&&(e=t);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function $4(e){const n=()=>{!function H4(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Lr,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,pE(e),e.isCheckStableRunning=!0,hE(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),pE(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,a,s)=>{try{return nR(e),t.invokeTask(i,o,a,s)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&n(),rR(e)}},onInvoke:(t,r,i,o,a,s,d)=>{try{return nR(e),t.invoke(i,o,a,s,d)}finally{e.shouldCoalesceRunChangeDetection&&n(),rR(e)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,pE(e),hE(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_s.isInAngularZone())throw new Xn(909,!1)}static assertNotInAngularZone(){if(_s.isInAngularZone())throw new Xn(909,!1)}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,i){const o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,n,q4,l0,l0);try{return o.runTask(a,t,r)}finally{o.cancelTask(a)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}}const q4={};function hE(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function pE(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function nR(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function rR(e){e._nesting--,hE(e)}class K4{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new zu,this.onMicrotaskEmpty=new zu,this.onStable=new zu,this.onError=new zu}run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,i){return n.apply(t,r)}}const iR=new Gr(""),f0=new Gr("");let vE,mE=(()=>{class e{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,vE||(function X4(e){vE=e}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_s.assertNotInAngularZone(),fE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())fE(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return e.\u0275fac=function(t){return new(t||e)(hr(_s),hr(gE),hr(f0))},e.\u0275prov=mr({token:e,factory:e.\u0275fac}),e})(),gE=(()=>{class e{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return vE?.findTestabilityInTree(this,t,r)??null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=mr({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),nh=null;const oR=new Gr("AllowMultipleToken"),yE=new Gr("PlatformDestroyListeners");class aR{constructor(n,t){this.name=n,this.token=t}}function uR(e,n,t=[]){const r=`Platform: ${n}`,i=new Gr(r);return(o=[])=>{let a=_E();if(!a||a.injector.get(oR,!1)){const s=[...t,...o,{provide:i,useValue:!0}];e?e(s):function Z4(e){if(nh&&!nh.get(oR,!1))throw new Xn(400,!1);nh=e;const n=e.get(cR);(function sR(e){const n=e.get(QA,null);n&&n.forEach(t=>t())})(e)}(function lR(e=[],n){return ya.create({name:n,providers:[{provide:Cm,useValue:"platform"},{provide:yE,useValue:new Set([()=>nh=null])},...e]})}(s,r))}return function Q4(e){const n=_E();if(!n)throw new Xn(401,!1);return n}()}}function _E(){return nh?.get(cR)??null}let cR=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function ez(e,n){let t;return t="noop"===e?new K4:("zone.js"===e?void 0:e)||new _s(n),t}(r?.ngZone,function dR(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:_s,useValue:i}];return i.run(()=>{const a=ya.create({providers:o,parent:this.injector,name:t.moduleType.name}),s=t.create(a),d=s.injector.get(Rd,null);if(!d)throw new Xn(402,!1);return i.runOutsideAngular(()=>{const l=i.onError.subscribe({next:f=>{d.handleError(f)}});s.onDestroy(()=>{p0(this._modules,s),l.unsubscribe()})}),function fR(e,n,t){try{const r=t();return W_(r)?r.catch(i=>{throw n.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>e.handleError(r)),r}}(d,i,()=>{const l=s.injector.get(d0);return l.runInitializers(),l.donePromise.then(()=>(function qP(e){Pr(e,"Expected localeId to be defined"),"string"==typeof e&&(VP=e.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Gd,Wm)||Wm),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=hR({},r);return function W4(e,n,t){const r=new Xx(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(h0);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new Xn(403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Xn(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(yE,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(hr(ya))},e.\u0275prov=mr({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function hR(e,n){return Array.isArray(n)?n.reduce(hR,e):{...e,...n}}let h0=(()=>{class e{constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new dt(s=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{s.next(this._stable),s.complete()})}),a=new dt(s=>{let d;this._zone.runOutsideAngular(()=>{d=this._zone.onStable.subscribe(()=>{_s.assertNotInAngularZone(),fE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,s.next(!0))})})});const l=this._zone.onUnstable.subscribe(()=>{_s.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{s.next(!1)}))});return()=>{d.unsubscribe(),l.unsubscribe()}});this.isStable=function dr(...e){const n=rr(e),t=function wn(e,n){return"number"==typeof jt(e)?e.pop():n}(e,1/0),r=e;return r.length?1===r.length?Oe(r[0]):un(t)(so(r,n)):ln}(o,a.pipe(function $a(e={}){const{connector:n=(()=>new Et),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let a=null,s=null,d=null,l=0,f=!1,_=!1;const m=()=>{s?.unsubscribe(),s=null},E=()=>{m(),a=d=null,f=_=!1},D=()=>{const R=a;E(),R?.unsubscribe()};return kn((R,ye)=>{l++,!_&&!f&&m();const xe=d=d??n();ye.add(()=>{l--,0===l&&!_&&!f&&(s=fo(D,i))}),xe.subscribe(ye),a||(a=new ze({next:et=>xe.next(et),error:et=>{_=!0,m(),s=fo(E,t,et),xe.error(et)},complete:()=>{f=!0,m(),s=fo(E,r),xe.complete()}}),so(R).subscribe(a))})(o)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof vA;if(!this._injector.get(d0).done)throw!i&&function Qm(e){const n=wi(e)||Jo(e)||co(e);return null!==n&&n.standalone}(t),new Xn(405,false);let a;a=i?t:this._injector.get(Lv).resolveComponentFactory(t),this.componentTypes.push(a.componentType);const s=function J4(e){return e.isBoundToModule}(a)?void 0:this._injector.get(eh),l=a.create(ya.NULL,[],r||a.selector,s),f=l.location.nativeElement,_=l.injector.get(iR,null);return _?.registerApplication(f),l.onDestroy(()=>{this.detachView(l.hostView),p0(this.components,l),_?.unregisterApplication(f)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new Xn(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;p0(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(tR,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>p0(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Xn(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(t){return new(t||e)(hr(_s),hr(ya),hr(Rd))},e.\u0275prov=mr({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function p0(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}let mR=!0,bE=(()=>{class e{}return e.__NG_ELEMENT_ID__=rz,e})();function rz(e){return function iz(e,n,t){if(Li(e)&&!t){const r=Ro(e.index,n);return new Bv(r,r)}return 47&e.type?new Bv(n[16],n):null}(Yo(),Wt(),16==(16&e))}const vz=uR(null,"core",[]);let yz=(()=>{class e{constructor(t){}}return e.\u0275fac=function(t){return new(t||e)(hr(h0))},e.\u0275mod=Ka({type:e}),e.\u0275inj=Xi({}),e})(),y0=null;function rh(){return y0}const sl=new Gr("DocumentToken");let _0=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=mr({token:e,factory:function(){return function xz(){return hr(TR)}()},providedIn:"platform"}),e})();const Ez=new Gr("Location Initialized");let TR=(()=>{class e extends _0{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return rh().getBaseHref(this._doc)}onPopState(t){const r=rh().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=rh().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){IR()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){IR()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(hr(sl))},e.\u0275prov=mr({token:e,factory:function(){return function Sz(){return new TR(hr(sl))}()},providedIn:"platform"}),e})();function IR(){return!!window.history.pushState}function CE(e,n){if(0==e.length)return n;if(0==n.length)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n}function PR(e){const n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)}function qd(e){return e&&"?"!==e[0]?"?"+e:e}let op=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=mr({token:e,factory:function(){return function Cz(){const e=hr(sl).location;return new RR(hr(_0),e&&e.origin||"")}()},providedIn:"root"}),e})();const AR=new Gr("appBaseHref");let RR=(()=>{class e extends op{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return CE(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+qd(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const a=this.prepareExternalUrl(i+qd(o));this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){const a=this.prepareExternalUrl(i+qd(o));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return e.\u0275fac=function(t){return new(t||e)(hr(_0),hr(AR,8))},e.\u0275prov=mr({token:e,factory:e.\u0275fac}),e})(),Tz=(()=>{class e extends op{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=CE(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let a=this.prepareExternalUrl(i+qd(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){let a=this.prepareExternalUrl(i+qd(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return e.\u0275fac=function(t){return new(t||e)(hr(_0),hr(AR,8))},e.\u0275prov=mr({token:e,factory:e.\u0275fac}),e})(),TE=(()=>{class e{constructor(t){this._subject=new zu,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=PR(DR(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+qd(r))}normalize(t){return e.stripTrailingSlash(function Pz(e,n){return e&&n.startsWith(e)?n.substring(e.length):n}(this._baseHref,DR(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qd(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qd(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return e.normalizeQueryParams=qd,e.joinWithSlash=CE,e.stripTrailingSlash=PR,e.\u0275fac=function(t){return new(t||e)(hr(op))},e.\u0275prov=mr({token:e,factory:function(){return function Iz(){return new TE(hr(op))}()},providedIn:"root"}),e})();function DR(e){return e.replace(/\/index.html$/,"")}let Hj=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ka({type:e}),e.\u0275inj=Xi({}),e})();let Wj=(()=>{class e{}return e.\u0275prov=mr({token:e,providedIn:"root",factory:()=>new Jj(hr(sl),window)}),e})();class Jj{constructor(n,t){this.document=n,this.window=t,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const t=function Zj(e,n){const t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const a=o.getElementById(n)||o.querySelector(`[name="${n}"]`);if(a)return a}i=r.nextNode()}}return null}(this.document,n);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=n)}}scrollToElement(n){const t=n.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=KR(this.window.history)||KR(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function KR(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class jE extends class Qj extends class wz{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function bz(e){y0||(y0=e)}(new jE)}onAndCancel(n,t,r){return n.addEventListener(t,r,!1),()=>{n.removeEventListener(t,r,!1)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function eU(){return Hv=Hv||document.querySelector("base"),Hv?Hv.getAttribute("href"):null}();return null==t?null:function tU(e){A0=A0||document.createElement("a"),A0.setAttribute("href",e);const n=A0.pathname;return"/"===n.charAt(0)?n:`/${n}`}(t)}resetBaseElement(){Hv=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function dj(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===n)return decodeURIComponent(o)}return null}(document.cookie,n)}}let A0,Hv=null;const XR=new Gr("TRANSITION_ID"),rU=[{provide:c0,useFactory:function nU(e,n,t){return()=>{t.get(d0).donePromise.then(()=>{const r=rh(),i=n.querySelectorAll(`style[ng-transition="${e}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[XR,sl,ya],multi:!0}];let oU=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=mr({token:e,factory:e.\u0275fac}),e})();const R0=new Gr("EventManagerPlugins");let D0=(()=>{class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const a=i[o];if(a.supports(t))return this._eventNameToPlugin.set(t,a),a}throw new Error(`No event manager plugin found for event ${t}`)}}return e.\u0275fac=function(t){return new(t||e)(hr(R0),hr(_s))},e.\u0275prov=mr({token:e,factory:e.\u0275fac}),e})();class WR{constructor(n){this._doc=n}addGlobalEventListener(n,t,r){const i=rh().getGlobalEventTarget(this._doc,n);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let JR=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=mr({token:e,factory:e.\u0275fac}),e})(),$v=(()=>{class e extends JR{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const a=this._doc.createElement("style");a.textContent=o,i.push(r.appendChild(a))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ZR),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ZR))}}return e.\u0275fac=function(t){return new(t||e)(hr(sl))},e.\u0275prov=mr({token:e,factory:e.\u0275fac}),e})();function ZR(e){rh().remove(e)}const UE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},GE=/%COMP%/g;function O0(e,n,t){for(let r=0;r<n.length;r++){let i=n[r];Array.isArray(i)?O0(e,i,t):(i=i.replace(GE,e),t.push(i))}return t}function e2(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&(n.preventDefault(),n.returnValue=!1)}}let VE=(()=>{class e{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new qE(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Ki.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new dU(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case Ki.ShadowDom:return new fU(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=O0(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(hr(D0),hr($v),hr(Uv))},e.\u0275prov=mr({token:e,factory:e.\u0275fac}),e})();class qE{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,t){return t?document.createElementNS(UE[t]||t,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,t){(n2(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&(n2(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){n&&n.removeChild(t)}selectRootElement(n,t){let r="string"==typeof n?document.querySelector(n):n;if(!r)throw new Error(`The selector "${n}" did not match any elements`);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,i){if(i){t=i+":"+t;const o=UE[i];o?n.setAttributeNS(o,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){const i=UE[r];i?n.removeAttributeNS(i,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,i){i&(bt.DashCase|bt.Important)?n.style.setProperty(t,r,i&bt.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&bt.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){n[t]=r}setValue(n,t){n.nodeValue=t}listen(n,t,r){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,t,e2(r)):this.eventManager.addEventListener(n,t,e2(r))}}function n2(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class dU extends qE{constructor(n,t,r,i){super(n),this.component=r;const o=O0(i+"-"+r.id,r.styles,[]);t.addStyles(o),this.contentAttr=function uU(e){return"_ngcontent-%COMP%".replace(GE,e)}(i+"-"+r.id),this.hostAttr=function lU(e){return"_nghost-%COMP%".replace(GE,e)}(i+"-"+r.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,t){const r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}}class fU extends qE{constructor(n,t,r,i){super(n),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=O0(i.id,i.styles,[]);for(let a=0;a<o.length;a++){const s=document.createElement("style");s.textContent=o[a],this.shadowRoot.appendChild(s)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(this.nodeOrShadowRoot(n),t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let hU=(()=>{class e extends WR{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return e.\u0275fac=function(t){return new(t||e)(hr(sl))},e.\u0275prov=mr({token:e,factory:e.\u0275fac}),e})();const r2=["alt","control","meta","shift"],mU={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},i2={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},gU={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let vU=(()=>{class e extends WR{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,r,i){const o=e.parseEventName(r),a=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>rh().onAndCancel(t,o.domEventName,a))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let a="";if(r2.forEach(d=>{const l=r.indexOf(d);l>-1&&(r.splice(l,1),a+=d+".")}),a+=o,0!=r.length||0===o.length)return null;const s={};return s.domEventName=i,s.fullKey=a,s}static getEventFullKey(t){let r="",i=function yU(e){let n=e.key;if(null==n){if(n=e.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===e.location&&i2.hasOwnProperty(n)&&(n=i2[n]))}return mU[n]||n}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),r2.forEach(o=>{o!=i&&gU[o](t)&&(r+=o+".")}),r+=i,r}static eventCallback(t,r,i){return o=>{e.getEventFullKey(o)===t&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return e.\u0275fac=function(t){return new(t||e)(hr(sl))},e.\u0275prov=mr({token:e,factory:e.\u0275fac}),e})();const o2=[{provide:eR,useValue:"browser"},{provide:QA,useValue:function _U(){jE.makeCurrent()},multi:!0},{provide:sl,useFactory:function wU(){return function yo(e){vf=e}(document),document},deps:[]}],xU=uR(vz,"browser",o2),a2=new Gr(""),s2=[{provide:f0,useClass:class iU{addToWindow(n){Lr.getAngularTestability=(r,i=!0)=>{const o=n.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},Lr.getAllAngularTestabilities=()=>n.getAllTestabilities(),Lr.getAllAngularRootElements=()=>n.getAllRootElements(),Lr.frameworkStabilizers||(Lr.frameworkStabilizers=[]),Lr.frameworkStabilizers.push(r=>{const i=Lr.getAllAngularTestabilities();let o=i.length,a=!1;const s=function(d){a=a||d,o--,0==o&&r(a)};i.forEach(function(d){d.whenStable(s)})})}findTestabilityInTree(n,t,r){return null==t?null:n.getTestability(t)??(r?rh().isShadowRoot(t)?this.findTestabilityInTree(n,t.host,!0):this.findTestabilityInTree(n,t.parentElement,!0):null)}},deps:[]},{provide:iR,useClass:mE,deps:[_s,gE,f0]},{provide:mE,useClass:mE,deps:[_s,gE,f0]}],u2=[{provide:Cm,useValue:"root"},{provide:Rd,useFactory:function bU(){return new Rd},deps:[]},{provide:R0,useClass:hU,multi:!0,deps:[sl,_s,eR]},{provide:R0,useClass:vU,multi:!0,deps:[sl]},{provide:VE,useClass:VE,deps:[D0,$v,Uv]},{provide:yA,useExisting:VE},{provide:JR,useExisting:$v},{provide:$v,useClass:$v,deps:[sl]},{provide:D0,useClass:D0,deps:[R0,_s]},{provide:class Yj{},useClass:oU,deps:[]},[]];let EU=(()=>{class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:Uv,useValue:t.appId},{provide:XR,useExisting:Uv},rU]}}}return e.\u0275fac=function(t){return new(t||e)(hr(a2,12))},e.\u0275mod=Ka({type:e}),e.\u0275inj=Xi({providers:[...u2,...s2],imports:[Hj,yz]}),e})(),l2=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return e.\u0275fac=function(t){return new(t||e)(hr(sl))},e.\u0275prov=mr({token:e,factory:function(t){let r=null;return r=t?new t:function CU(){return new l2(hr(sl))}(),r},providedIn:"root"}),e})();function gi(...e){return so(e,rr(e))}typeof window<"u"&&window;class kc extends Et{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:r}=this;if(n)throw t;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}}const{isArray:kU}=Array,{getPrototypeOf:NU,prototype:LU,keys:BU}=Object;const{isArray:jU}=Array;function f2(...e){const n=rr(e),t=function ir(e){return L(jt(e))?e.pop():void 0}(e),{args:r,keys:i}=function FU(e){if(1===e.length){const n=e[0];if(kU(n))return{args:n,keys:null};if(function zU(e){return e&&"object"==typeof e&&NU(e)===LU}(n)){const t=BU(n);return{args:t.map(r=>n[r]),keys:t}}}return{args:e,keys:null}}(e);if(0===r.length)return so([],n);const o=new dt(function qU(e,n,t=W){return r=>{h2(n,()=>{const{length:i}=e,o=new Array(i);let a=i,s=i;for(let d=0;d<i;d++)h2(n,()=>{const l=so(e[d],n);let f=!1;l.subscribe(Nt(r,_=>{o[d]=_,f||(f=!0,s--),s||r.next(t(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}(r,n,i?a=>function VU(e,n){return e.reduce((t,r,i)=>(t[r]=n[i],t),{})}(i,a):W));return t?o.pipe(function GU(e){return Nn(n=>function UU(e,n){return jU(n)?e(...n):e(n)}(e,n))}(t)):o}function h2(e,n,t){e?Jt(t,e,n):n()}function Kv(e,n){const t=L(e)?e:()=>e,r=i=>i.error(t());return new dt(n?i=>n.schedule(r,0,i):r)}const Xv=$(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function KE(...e){return function HU(){return un(1)}()(so(e,rr(e)))}function p2(e){return new dt(n=>{Oe(e()).subscribe(n)})}function XE(){return kn((e,n)=>{let t=null;e._refCount++;const r=Nt(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(t=null);const i=e._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),n.unsubscribe()});e.subscribe(r),r.closed||(t=e.connect())})}class m2 extends dt{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,$t(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new q;const t=this.getSubject();n.add(this.source.subscribe(Nt(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=q.EMPTY)}return n}refCount(){return XE()(this)}}function ap(e,n){return kn((t,r)=>{let i=null,o=0,a=!1;const s=()=>a&&!i&&r.complete();t.subscribe(Nt(r,d=>{i?.unsubscribe();let l=0;const f=o++;Oe(e(d,f)).subscribe(i=Nt(r,_=>r.next(n?n(d,_,f,l++):_),()=>{i=null,s()}))},()=>{a=!0,s()}))})}function KU(e,n,t,r,i){return(o,a)=>{let s=t,d=n,l=0;o.subscribe(Nt(a,f=>{const _=l++;d=s?e(d,f,_):(s=!0,f),r&&a.next(d)},i&&(()=>{s&&a.next(d),a.complete()})))}}function g2(e,n){return kn(KU(e,n,arguments.length>=2,!0))}function ng(e,n){return kn((t,r)=>{let i=0;t.subscribe(Nt(r,o=>e.call(n,o,i++)&&r.next(o)))})}function sp(e){return kn((n,t)=>{let o,r=null,i=!1;r=n.subscribe(Nt(t,void 0,void 0,a=>{o=Oe(e(a,sp(e)(n))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Wv(e,n){return L(n)?Lt(e,n,1):Lt(e,1)}function WE(e){return e<=0?()=>ln:kn((n,t)=>{let r=[];n.subscribe(Nt(t,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function v2(e=XU){return kn((n,t)=>{let r=!1;n.subscribe(Nt(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(e())))})}function XU(){return new Xv}function JE(e){return kn((n,t)=>{let r=!1;n.subscribe(Nt(t,i=>{r=!0,t.next(i)},()=>{r||t.next(e),t.complete()}))})}function up(e,n){const t=arguments.length>=2;return r=>r.pipe(e?ng((i,o)=>e(i,o,r)):W,Ho(1),t?JE(n):v2(()=>new Xv))}function Eu(e,n,t){const r=L(e)||n||t?{next:e,error:n,complete:t}:e;return r?kn((i,o)=>{var a;null===(a=r.subscribe)||void 0===a||a.call(r);let s=!0;i.subscribe(Nt(o,d=>{var l;null===(l=r.next)||void 0===l||l.call(r,d),o.next(d)},()=>{var d;s=!1,null===(d=r.complete)||void 0===d||d.call(r),o.complete()},d=>{var l;s=!1,null===(l=r.error)||void 0===l||l.call(r,d),o.error(d)},()=>{var d,l;s&&(null===(d=r.unsubscribe)||void 0===d||d.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):W}function ZE(e){return kn((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}class $d{constructor(n,t){this.id=n,this.url=t}}class YE extends $d{constructor(n,t,r="imperative",i=null){super(n,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Jv extends $d{constructor(n,t,r){super(n,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class y2 extends $d{constructor(n,t,r){super(n,t),this.reason=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ZU extends $d{constructor(n,t,r){super(n,t),this.error=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class YU extends $d{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QU extends $d{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class e5 extends $d{constructor(n,t,r,i,o){super(n,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class t5 extends $d{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class n5 extends $d{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class r5{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class i5{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class o5{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class a5{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class s5{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class u5{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _2{constructor(n,t,r){this.routerEvent=n,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ri="primary";class c5{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function rg(e){return new c5(e)}const b2="ngNavigationCancelingError";function QE(e){const n=Error("NavigationCancelingError: "+e);return n[b2]=!0,n}function f5(e,n,t){const r=t.path.split("/");if(r.length>e.length||"full"===t.pathMatch&&(n.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const a=r[o],s=e[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function sd(e,n){const t=e?Object.keys(e):void 0,r=n?Object.keys(n):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!w2(e[i],n[i]))return!1;return!0}function w2(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const t=[...e].sort(),r=[...n].sort();return t.every((i,o)=>r[o]===i)}return e===n}function x2(e){return Array.prototype.concat.apply([],e)}function E2(e){return e.length>0?e[e.length-1]:null}function su(e,n){for(const t in e)e.hasOwnProperty(t)&&n(e[t],t)}function Nc(e){return $I(e)?e:W_(e)?so(Promise.resolve(e)):gi(e)}const m5={exact:function T2(e,n,t){if(!cp(e.segments,n.segments)||!M0(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!e.children[r]||!T2(e.children[r],n.children[r],t))return!1;return!0},subset:I2},S2={exact:function g5(e,n){return sd(e,n)},subset:function v5(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>w2(e[t],n[t]))},ignored:()=>!0};function C2(e,n,t){return m5[t.paths](e.root,n.root,t.matrixParams)&&S2[t.queryParams](e.queryParams,n.queryParams)&&!("exact"===t.fragment&&e.fragment!==n.fragment)}function I2(e,n,t){return P2(e,n,n.segments,t)}function P2(e,n,t,r){if(e.segments.length>t.length){const i=e.segments.slice(0,t.length);return!(!cp(i,t)||n.hasChildren()||!M0(i,t,r))}if(e.segments.length===t.length){if(!cp(e.segments,t)||!M0(e.segments,t,r))return!1;for(const i in n.children)if(!e.children[i]||!I2(e.children[i],n.children[i],r))return!1;return!0}{const i=t.slice(0,e.segments.length),o=t.slice(e.segments.length);return!!(cp(e.segments,i)&&M0(e.segments,i,r)&&e.children[Ri])&&P2(e.children[Ri],n,o,r)}}function M0(e,n,t){return n.every((r,i)=>S2[t](e[i].parameters,r.parameters))}class lp{constructor(n,t,r){this.root=n,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=rg(this.queryParams)),this._queryParamMap}toString(){return b5.serialize(this)}}class qi{constructor(n,t){this.segments=n,this.children=t,this.parent=null,su(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return k0(this)}}class Zv{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=rg(this.parameters)),this._parameterMap}toString(){return M2(this)}}function cp(e,n){return e.length===n.length&&e.every((t,r)=>t.path===n[r].path)}class A2{}class R2{parse(n){const t=new A5(n);return new lp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){const t=`/${Yv(n.root,!0)}`,r=function E5(e){const n=Object.keys(e).map(t=>{const r=e[t];return Array.isArray(r)?r.map(i=>`${N0(t)}=${N0(i)}`).join("&"):`${N0(t)}=${N0(r)}`}).filter(t=>!!t);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${t}${r}${"string"==typeof n.fragment?`#${function w5(e){return encodeURI(e)}(n.fragment)}`:""}`}}const b5=new R2;function k0(e){return e.segments.map(n=>M2(n)).join("/")}function Yv(e,n){if(!e.hasChildren())return k0(e);if(n){const t=e.children[Ri]?Yv(e.children[Ri],!1):"",r=[];return su(e.children,(i,o)=>{o!==Ri&&r.push(`${o}:${Yv(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function _5(e,n){let t=[];return su(e.children,(r,i)=>{i===Ri&&(t=t.concat(n(r,i)))}),su(e.children,(r,i)=>{i!==Ri&&(t=t.concat(n(r,i)))}),t}(e,(r,i)=>i===Ri?[Yv(e.children[Ri],!1)]:[`${i}:${Yv(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[Ri]?`${k0(e)}/${t[0]}`:`${k0(e)}/(${t.join("//")})`}}function D2(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function N0(e){return D2(e).replace(/%3B/gi,";")}function eS(e){return D2(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function L0(e){return decodeURIComponent(e)}function O2(e){return L0(e.replace(/\+/g,"%20"))}function M2(e){return`${eS(e.path)}${function x5(e){return Object.keys(e).map(n=>`;${eS(n)}=${eS(e[n])}`).join("")}(e.parameters)}`}const S5=/^[^\/()?;=#]+/;function B0(e){const n=e.match(S5);return n?n[0]:""}const C5=/^[^=?&#]+/,I5=/^[^&#]+/;class A5{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qi([],{}):new qi([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(r[Ri]=new qi(n,t)),r}parseSegment(){const n=B0(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(n),new Zv(L0(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const t=B0(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=B0(this.remaining);i&&(r=i,this.capture(r))}n[L0(t)]=L0(r)}parseQueryParam(n){const t=function T5(e){const n=e.match(C5);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const a=function P5(e){const n=e.match(I5);return n?n[0]:""}(this.remaining);a&&(r=a,this.capture(r))}const i=O2(t),o=O2(r);if(n.hasOwnProperty(i)){let a=n[i];Array.isArray(a)||(a=[a],n[i]=a),a.push(o)}else n[i]=o}parseParens(n){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=B0(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=Ri);const a=this.parseChildren();t[o]=1===Object.keys(a).length?a[Ri]:new qi([],a),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Error(`Expected "${n}".`)}}class k2{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){const t=tS(n,this._root);return t?t.children.map(r=>r.value):[]}firstChild(n){const t=tS(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){const t=nS(n,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return nS(n,this._root).map(t=>t.value)}}function tS(e,n){if(e===n.value)return n;for(const t of n.children){const r=tS(e,t);if(r)return r}return null}function nS(e,n){if(e===n.value)return[n];for(const t of n.children){const r=nS(e,t);if(r.length)return r.unshift(n),r}return[]}class Kd{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}}function ig(e){const n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}class N2 extends k2{constructor(n,t){super(n),this.snapshot=t,rS(this,n)}toString(){return this.snapshot.toString()}}function L2(e,n){const t=function R5(e,n){const a=new F0([],{},{},"",{},Ri,n,null,e.root,-1,{});return new F2("",new Kd(a,[]))}(e,n),r=new kc([new Zv("",{})]),i=new kc({}),o=new kc({}),a=new kc({}),s=new kc(""),d=new og(r,i,a,s,o,Ri,n,t.root);return d.snapshot=t.root,new N2(new Kd(d,[]),t)}class og{constructor(n,t,r,i,o,a,s,d){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this._futureSnapshot=d}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Nn(n=>rg(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Nn(n=>rg(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function B2(e,n="emptyOnly"){const t=e.pathFromRoot;let r=0;if("always"!==n)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function D5(e){return e.reduce((n,t)=>({params:{...n.params,...t.params},data:{...n.data,...t.data},resolve:{...t.data,...n.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class F0{constructor(n,t,r,i,o,a,s,d,l,f,_,m){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=d,this._urlSegment=l,this._lastPathIndex=f,this._correctedLastPathIndex=m??f,this._resolve=_}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=rg(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=rg(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class F2 extends k2{constructor(n,t){super(t),this.url=n,rS(this,t)}toString(){return z2(this._root)}}function rS(e,n){n.value._routerState=e,n.children.forEach(t=>rS(e,t))}function z2(e){const n=e.children.length>0?` { ${e.children.map(z2).join(", ")} } `:"";return`${e.value}${n}`}function iS(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,sd(n.queryParams,t.queryParams)||e.queryParams.next(t.queryParams),n.fragment!==t.fragment&&e.fragment.next(t.fragment),sd(n.params,t.params)||e.params.next(t.params),function h5(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!sd(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.url.next(t.url),sd(n.data,t.data)||e.data.next(t.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function oS(e,n){const t=sd(e.params,n.params)&&function y5(e,n){return cp(e,n)&&e.every((t,r)=>sd(t.parameters,n[r].parameters))}(e.url,n.url);return t&&!(!e.parent!=!n.parent)&&(!e.parent||oS(e.parent,n.parent))}function Qv(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=n.value;const i=function M5(e,n,t){return n.children.map(r=>{for(const i of t.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Qv(e,r,i);return Qv(e,r)})}(e,n,t);return new Kd(r,i)}{if(e.shouldAttach(n.value)){const o=e.retrieve(n.value);if(null!==o){const a=o.route;return a.value._futureSnapshot=n.value,a.children=n.children.map(s=>Qv(e,s)),a}}const r=function k5(e){return new og(new kc(e.url),new kc(e.params),new kc(e.queryParams),new kc(e.fragment),new kc(e.data),e.outlet,e.component,e)}(n.value),i=n.children.map(o=>Qv(e,o));return new Kd(r,i)}}function z0(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function ey(e){return"object"==typeof e&&null!=e&&e.outlets}function aS(e,n,t,r,i){let o={};if(r&&su(r,(s,d)=>{o[d]=Array.isArray(s)?s.map(l=>`${l}`):`${s}`}),e===n)return new lp(t,o,i);const a=j2(e,n,t);return new lp(a,o,i)}function j2(e,n,t){const r={};return su(e.children,(i,o)=>{r[o]=i===n?t:j2(i,n,t)}),new qi(e.segments,r)}class U2{constructor(n,t,r){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=r,n&&r.length>0&&z0(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(ey);if(i&&i!==E2(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sS{constructor(n,t,r){this.segmentGroup=n,this.processChildren=t,this.index=r}}function G2(e,n,t){if(e||(e=new qi([],{})),0===e.segments.length&&e.hasChildren())return j0(e,n,t);const r=function j5(e,n,t){let r=0,i=n;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=t.length)return o;const a=e.segments[i],s=t[r];if(ey(s))break;const d=`${s}`,l=r<t.length-1?t[r+1]:null;if(i>0&&void 0===d)break;if(d&&l&&"object"==typeof l&&void 0===l.outlets){if(!q2(d,l,a))return o;r+=2}else{if(!q2(d,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,n,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const o=new qi(e.segments.slice(0,r.pathIndex),{});return o.children[Ri]=new qi(e.segments.slice(r.pathIndex),e.children),j0(o,0,i)}return r.match&&0===i.length?new qi(e.segments,{}):r.match&&!e.hasChildren()?uS(e,n,t):r.match?j0(e,0,i):uS(e,n,t)}function j0(e,n,t){if(0===t.length)return new qi(e.segments,{});{const r=function z5(e){return ey(e[0])?e[0].outlets:{[Ri]:e}}(t),i={};return su(r,(o,a)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[a]=G2(e.children[a],n,o))}),su(e.children,(o,a)=>{void 0===r[a]&&(i[a]=o)}),new qi(e.segments,i)}}function uS(e,n,t){const r=e.segments.slice(0,n);let i=0;for(;i<t.length;){const o=t[i];if(ey(o)){const d=U5(o.outlets);return new qi(r,d)}if(0===i&&z0(t[0])){r.push(new Zv(e.segments[n].path,V2(t[0]))),i++;continue}const a=ey(o)?o.outlets[Ri]:`${o}`,s=i<t.length-1?t[i+1]:null;a&&s&&z0(s)?(r.push(new Zv(a,V2(s))),i+=2):(r.push(new Zv(a,{})),i++)}return new qi(r,{})}function U5(e){const n={};return su(e,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(n[r]=uS(new qi([],{}),0,t))}),n}function V2(e){const n={};return su(e,(t,r)=>n[r]=`${t}`),n}function q2(e,n,t){return e==t.path&&sd(n,t.parameters)}class G5{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ty,this.attachRef=null}}class ty{constructor(){this.contexts=new Map}onChildOutletCreated(n,t){const r=this.getOrCreateContext(n);r.outlet=t,this.contexts.set(n,r)}onChildOutletDestroyed(n){const t=this.getContext(n);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let t=this.getContext(n);return t||(t=new G5,this.contexts.set(n,t)),t}getContext(n){return this.contexts.get(n)||null}}let H2=(()=>{class e{constructor(t,r,i,o,a){this.parentContexts=t,this.location=r,this.changeDetector=o,this.environmentInjector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new zu,this.deactivateEvents=new zu,this.attachEvents=new zu,this.detachEvents=new zu,this.name=i||Ri,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const i=this.location,a=t._futureSnapshot.component,s=this.parentContexts.getOrCreateContext(this.name).children,d=new V5(t,s,i.injector);if(r&&function q5(e){return!!e.resolveComponentFactory}(r)){const l=r.resolveComponentFactory(a);this.activated=i.createComponent(l,i.length,d)}else this.activated=i.createComponent(a,{index:i.length,injector:d,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(br(ty),br(Dc),function Rh(e){return function Ed(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const t=e.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(El(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===n)return t[i+1];i+=2}}}return null}(Yo(),e)}("name"),br(bE),br(Ks))},e.\u0275dir=Sa({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),e})();class V5{constructor(n,t,r){this.route=n,this.childContexts=t,this.parent=r}get(n,t){return n===og?this.route:n===ty?this.childContexts:this.parent.get(n,t)}}let $2=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Zu({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&X_(0,"router-outlet")},dependencies:[H2],encapsulation:2}),e})();function K2(e,n){return e.providers&&!e._injector&&(e._injector=a0(e.providers,n,`Route: ${e.path}`)),e._injector??n}function cS(e){const n=e.children&&e.children.map(cS),t=n?{...e,children:n}:{...e};return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==Ri&&(t.component=$2),t}function tc(e){return e.outlet||Ri}function X2(e,n){const t=e.filter(r=>tc(r)===n);return t.push(...e.filter(r=>tc(r)!==n)),t}function W2(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class W5{constructor(n,t,r,i){this.routeReuseStrategy=n,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(n){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,n),iS(this.futureState.root),this.activateChildRoutes(t,r,n)}deactivateChildRoutes(n,t,r){const i=ig(t);n.children.forEach(o=>{const a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),su(i,(o,a)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(n,t,r){const i=n.value,o=t?t.value:null;if(i===o)if(i.component){const a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(n,t,a.children)}else this.deactivateChildRoutes(n,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=ig(n);for(const a of Object.keys(o))this.deactivateRouteAndItsChildren(o[a],i);if(r&&r.outlet){const a=r.outlet.detach(),s=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:a,route:n,contexts:s})}}deactivateRouteAndOutlet(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=ig(n);for(const a of Object.keys(o))this.deactivateRouteAndItsChildren(o[a],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(n,t,r){const i=ig(t);n.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new u5(o.value.snapshot))}),n.children.length&&this.forwardEvent(new a5(n.value.snapshot))}activateRoutes(n,t,r){const i=n.value,o=t?t.value:null;if(iS(i),i===o)if(i.component){const a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,t,a.children)}else this.activateChildRoutes(n,t,r);else if(i.component){const a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const s=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),iS(s.route.value),this.activateChildRoutes(n,null,a.children)}else{const s=W2(i.snapshot),d=s?.get(Lv)??null;a.attachRef=null,a.route=i,a.resolver=d,a.injector=s,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(n,null,a.children)}}else this.activateChildRoutes(n,null,r)}}function oh(e){return"function"==typeof e}function dp(e){return e instanceof lp}const ny=Symbol("INITIAL_VALUE");function ry(){return ap(e=>f2(e.map(n=>n.pipe(Ho(1),function $U(...e){const n=rr(e);return kn((t,r)=>{(n?KE(e,t,n):KE(e,t)).subscribe(r)})}(ny)))).pipe(g2((n,t)=>{let r=!1;return t.reduce((i,o,a)=>i!==ny?i:(o===ny&&(r=!0),r||!1!==o&&a!==t.length-1&&!dp(o)?i:o),n)},ny),ng(n=>n!==ny),Nn(n=>dp(n)?n:!0===n),Ho(1)))}const J2={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function U0(e,n,t){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{...J2}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(n.matcher||f5)(t,e,n);if(!i)return{...J2};const o={};su(i.posParams,(s,d)=>{o[d]=s.path});const a=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function G0(e,n,t,r,i="corrected"){if(t.length>0&&function r6(e,n,t){return t.some(r=>V0(e,n,r)&&tc(r)!==Ri)}(e,t,r)){const a=new qi(n,function n6(e,n,t,r){const i={};i[Ri]=r,r._sourceSegment=e,r._segmentIndexShift=n.length;for(const o of t)if(""===o.path&&tc(o)!==Ri){const a=new qi([],{});a._sourceSegment=e,a._segmentIndexShift=n.length,i[tc(o)]=a}return i}(e,n,r,new qi(t,e.children)));return a._sourceSegment=e,a._segmentIndexShift=n.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function i6(e,n,t){return t.some(r=>V0(e,n,r))}(e,t,r)){const a=new qi(e.segments,function t6(e,n,t,r,i,o){const a={};for(const s of r)if(V0(e,t,s)&&!i[tc(s)]){const d=new qi([],{});d._sourceSegment=e,d._segmentIndexShift="legacy"===o?e.segments.length:n.length,a[tc(s)]=d}return{...i,...a}}(e,n,t,r,e.children,i));return a._sourceSegment=e,a._segmentIndexShift=n.length,{segmentGroup:a,slicedSegments:t}}const o=new qi(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:t}}function V0(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path}function Z2(e,n,t,r){return!!(tc(e)===r||r!==Ri&&V0(n,t,e))&&("**"===e.path||U0(n,e,t).matched)}function Y2(e,n,t){return 0===n.length&&!e.children[t]}class q0{constructor(n){this.segmentGroup=n||null}}class Q2{constructor(n){this.urlTree=n}}function iy(e){return Kv(new q0(e))}function eD(e){return Kv(new Q2(e))}class u6{constructor(n,t,r,i,o){this.injector=n,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const n=G0(this.urlTree.root,[],[],this.config).segmentGroup,t=new qi(n.segments,n.children);return this.expandSegmentGroup(this.injector,this.config,t,Ri).pipe(Nn(o=>this.createUrlTree(dS(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(sp(o=>{if(o instanceof Q2)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof q0?this.noMatchError(o):o}))}match(n){return this.expandSegmentGroup(this.injector,this.config,n.root,Ri).pipe(Nn(i=>this.createUrlTree(dS(i),n.queryParams,n.fragment))).pipe(sp(i=>{throw i instanceof q0?this.noMatchError(i):i}))}noMatchError(n){return new Error(`Cannot match any routes. URL Segment: '${n.segmentGroup}'`)}createUrlTree(n,t,r){const i=n.segments.length>0?new qi([],{[Ri]:n}):n;return new lp(i,t,r)}expandSegmentGroup(n,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(n,t,r).pipe(Nn(o=>new qi([],o))):this.expandSegment(n,r,t,r.segments,i,!0)}expandChildren(n,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return so(i).pipe(Wv(o=>{const a=r.children[o],s=X2(t,o);return this.expandSegmentGroup(n,s,a,o).pipe(Nn(d=>({segment:d,outlet:o})))}),g2((o,a)=>(o[a.outlet]=a.segment,o),{}),function WU(e,n){const t=arguments.length>=2;return r=>r.pipe(e?ng((i,o)=>e(i,o,r)):W,WE(1),t?JE(n):v2(()=>new Xv))}())}expandSegment(n,t,r,i,o,a){return so(r).pipe(Wv(s=>this.expandSegmentAgainstRoute(n,t,r,s,i,o,a).pipe(sp(l=>{if(l instanceof q0)return gi(null);throw l}))),up(s=>!!s),sp((s,d)=>{if(s instanceof Xv||"EmptyError"===s.name)return Y2(t,i,o)?gi(new qi([],{})):iy(t);throw s}))}expandSegmentAgainstRoute(n,t,r,i,o,a,s){return Z2(i,t,o,a)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(n,t,i,o,a):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,t,r,i,o,a):iy(t):iy(t)}expandSegmentAgainstRouteUsingRedirect(n,t,r,i,o,a){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,i,a):this.expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,i,o,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?eD(o):this.lineralizeSegments(r,o).pipe(Lt(a=>{const s=new qi(a,{});return this.expandSegment(n,s,t,a,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,i,o,a){const{matched:s,consumedSegments:d,remainingSegments:l,positionalParamSegments:f}=U0(t,i,o);if(!s)return iy(t);const _=this.applyRedirectCommands(d,i.redirectTo,f);return i.redirectTo.startsWith("/")?eD(_):this.lineralizeSegments(i,_).pipe(Lt(m=>this.expandSegment(n,t,r,m.concat(l),a,!1)))}matchSegmentAgainstRoute(n,t,r,i,o){if("**"===r.path)return n=K2(r,n),r.loadChildren?(r._loadedRoutes?gi({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(n,r)).pipe(Nn(_=>(r._loadedRoutes=_.routes,r._loadedInjector=_.injector,new qi(i,{})))):gi(new qi(i,{}));const{matched:a,consumedSegments:s,remainingSegments:d}=U0(t,r,i);return a?(n=K2(r,n),this.getChildConfig(n,r,i).pipe(Lt(f=>{const _=f.injector??n,m=f.routes,{segmentGroup:E,slicedSegments:D}=G0(t,s,d,m),R=new qi(E.segments,E.children);if(0===D.length&&R.hasChildren())return this.expandChildren(_,m,R).pipe(Nn(We=>new qi(s,We)));if(0===m.length&&0===D.length)return gi(new qi(s,{}));const ye=tc(r)===o;return this.expandSegment(_,R,m,D,ye?Ri:o,!0).pipe(Nn(et=>new qi(s.concat(et.segments),et.children)))}))):iy(t)}getChildConfig(n,t,r){return t.children?gi({routes:t.children,injector:n}):t.loadChildren?void 0!==t._loadedRoutes?gi({routes:t._loadedRoutes,injector:t._loadedInjector}):this.runCanLoadGuards(n,t,r).pipe(Lt(i=>i?this.configLoader.loadChildren(n,t).pipe(Eu(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function a6(e){return Kv(QE(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`))}(t))):gi({routes:[],injector:n})}runCanLoadGuards(n,t,r){const i=t.canLoad;return i&&0!==i.length?gi(i.map(a=>{const s=n.get(a);let d;if(function Z5(e){return e&&oh(e.canLoad)}(s))d=s.canLoad(t,r);else{if(!oh(s))throw new Error("Invalid CanLoad guard");d=s(t,r)}return Nc(d)})).pipe(ry(),Eu(a=>{if(!dp(a))return;const s=QE(`Redirecting to "${this.urlSerializer.serialize(a)}"`);throw s.url=a,s}),Nn(a=>!0===a)):gi(!0)}lineralizeSegments(n,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return gi(r);if(i.numberOfChildren>1||!i.children[Ri])return Kv(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n.redirectTo}'`));i=i.children[Ri]}}applyRedirectCommands(n,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),n,r)}applyRedirectCreatreUrlTree(n,t,r,i){const o=this.createSegmentGroup(n,t.root,r,i);return new lp(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){const r={};return su(n,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const s=i.substring(1);r[o]=t[s]}else r[o]=i}),r}createSegmentGroup(n,t,r,i){const o=this.createSegments(n,t.segments,r,i);let a={};return su(t.children,(s,d)=>{a[d]=this.createSegmentGroup(n,s,r,i)}),new qi(o,a)}createSegments(n,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(n,o,i):this.findOrReturn(o,r))}findPosParam(n,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${n}'. Cannot find '${t.path}'.`);return i}findOrReturn(n,t){let r=0;for(const i of t){if(i.path===n.path)return t.splice(r),i;r++}return n}}function dS(e){const n={};for(const r of Object.keys(e.children)){const o=dS(e.children[r]);(o.segments.length>0||o.hasChildren())&&(n[r]=o)}return function l6(e){if(1===e.numberOfChildren&&e.children[Ri]){const n=e.children[Ri];return new qi(e.segments.concat(n.segments),n.children)}return e}(new qi(e.segments,n))}class tD{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class H0{constructor(n,t){this.component=n,this.route=t}}function d6(e,n,t){const r=e._root;return oy(r,n?n._root:null,t,[r.value])}function $0(e,n,t){return(W2(n)??t).get(e)}function oy(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=ig(n);return e.children.forEach(a=>{(function h6(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,a=n?n.value:null,s=t?t.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const d=function p6(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!cp(e.url,n.url);case"pathParamsOrQueryParamsChange":return!cp(e.url,n.url)||!sd(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!oS(e,n)||!sd(e.queryParams,n.queryParams);default:return!oS(e,n)}}(a,o,o.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new tD(r)):(o.data=a.data,o._resolvedData=a._resolvedData),oy(e,n,o.component?s?s.children:null:t,r,i),d&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new H0(s.outlet.component,a))}else a&&ay(n,s,i),i.canActivateChecks.push(new tD(r)),oy(e,null,o.component?s?s.children:null:t,r,i)})(a,o[a.value.outlet],t,r.concat([a.value]),i),delete o[a.value.outlet]}),su(o,(a,s)=>ay(a,t.getContext(s),i)),i}function ay(e,n,t){const r=ig(e),i=e.value;su(r,(o,a)=>{ay(o,i.component?n?n.children.getContext(a):null:n,t)}),t.canDeactivateChecks.push(new H0(i.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,i))}class E6{}function rD(e){return new dt(n=>n.error(e))}class C6{constructor(n,t,r,i,o,a){this.rootComponentType=n,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a}recognize(){const n=G0(this.urlTree.root,[],[],this.config.filter(a=>void 0===a.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,n,Ri);if(null===t)return null;const r=new F0([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ri,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Kd(r,t),o=new F2(this.url,i);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(n){const t=n.value,r=B2(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),n.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(n,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(n,t):this.processSegment(n,t,t.segments,r)}processChildren(n,t){const r=[];for(const o of Object.keys(t.children)){const a=t.children[o],s=X2(n,o),d=this.processSegmentGroup(s,a,o);if(null===d)return null;r.push(...d)}const i=iD(r);return function T6(e){e.sort((n,t)=>n.value.outlet===Ri?-1:t.value.outlet===Ri?1:n.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(n,t,r,i){for(const o of n){const a=this.processSegmentAgainstRoute(o,t,r,i);if(null!==a)return a}return Y2(t,r,i)?[]:null}processSegmentAgainstRoute(n,t,r,i){if(n.redirectTo||!Z2(n,t,r,i))return null;let o,a=[],s=[];if("**"===n.path){const E=r.length>0?E2(r).parameters:{},D=aD(t)+r.length;o=new F0(r,E,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,uD(n),tc(n),n.component??n._loadedComponent??null,n,oD(t),D,lD(n),D)}else{const E=U0(t,n,r);if(!E.matched)return null;a=E.consumedSegments,s=E.remainingSegments;const D=aD(t)+a.length;o=new F0(a,E.parameters,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,uD(n),tc(n),n.component??n._loadedComponent??null,n,oD(t),D,lD(n),D)}const d=function I6(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(n),{segmentGroup:l,slicedSegments:f}=G0(t,a,s,d.filter(E=>void 0===E.redirectTo),this.relativeLinkResolution);if(0===f.length&&l.hasChildren()){const E=this.processChildren(d,l);return null===E?null:[new Kd(o,E)]}if(0===d.length&&0===f.length)return[new Kd(o,[])];const _=tc(n)===i,m=this.processSegment(d,l,f,_?Ri:i);return null===m?null:[new Kd(o,m)]}}function P6(e){const n=e.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function iD(e){const n=[],t=new Set;for(const r of e){if(!P6(r)){n.push(r);continue}const i=n.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):n.push(r)}for(const r of t){const i=iD(r.children);n.push(new Kd(r.value,i))}return n.filter(r=>!t.has(r))}function oD(e){let n=e;for(;n._sourceSegment;)n=n._sourceSegment;return n}function aD(e){let n=e,t=n._segmentIndexShift??0;for(;n._sourceSegment;)n=n._sourceSegment,t+=n._segmentIndexShift??0;return t-1}function uD(e){return e.data||{}}function lD(e){return e.resolve||{}}const fS=Symbol("RouteTitle");function cD(e){return"string"==typeof e.title||null===e.title}function hS(e){return ap(n=>{const t=e(n);return t?so(t).pipe(Nn(()=>n)):gi(n)})}class B6 extends class L6{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}}{}const pS=new Gr("ROUTES");let mS=(()=>{class e{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return gi(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Nc(t.loadComponent()).pipe(Eu(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ZE(()=>{this.componentLoaders.delete(t)})),i=new m2(r,()=>new Et).pipe(XE());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return gi({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Nn(s=>{this.onLoadEndListener&&this.onLoadEndListener(r);let d,l,f=!1;Array.isArray(s)?l=s:(d=s.create(t).injector,l=x2(d.get(pS,[],Cn.Self|Cn.Optional)));return{routes:l.map(cS),injector:d}}),ZE(()=>{this.childrenLoaders.delete(r)})),a=new m2(o,()=>new Et).pipe(XE());return this.childrenLoaders.set(r,a),a}loadModuleFactoryOrRoutes(t){return Nc(t()).pipe(Lt(r=>r instanceof gA||Array.isArray(r)?gi(r):so(this.compiler.compileModuleAsync(r))))}}return e.\u0275fac=function(t){return new(t||e)(hr(ya),hr(dE))},e.\u0275prov=mr({token:e,factory:e.\u0275fac}),e})();class z6{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,t){return n}}function U6(e){throw e}function G6(e,n,t){return n.parse("/")}const V6={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},q6={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Uu=(()=>{class e{constructor(t,r,i,o,a,s,d){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=d,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Et,this.errorHandler=U6,this.malformedUriErrorHandler=G6,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>gi(void 0),this.urlHandlingStrategy=new z6,this.routeReuseStrategy=new B6,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=a.get(mS),this.configLoader.onLoadEndListener=m=>this.triggerEvent(new i5(m)),this.configLoader.onLoadStartListener=m=>this.triggerEvent(new r5(m)),this.ngModule=a.get(eh),this.console=a.get(B4);const _=a.get(_s);this.isNgZoneEnabled=_ instanceof _s&&_s.isInAngularZone(),this.resetConfig(d),this.currentUrlTree=function p5(){return new lp(new qi([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=L2(this.currentUrlTree,this.rootComponentType),this.transitions=new kc({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ng(i=>0!==i.id),Nn(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),ap(i=>{let o=!1,a=!1;return gi(i).pipe(Eu(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ap(s=>{const d=this.browserUrlTree.toString(),l=!this.navigated||s.extractedUrl.toString()!==d||d!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||l)&&this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return fD(s.source)&&(this.browserUrlTree=s.extractedUrl),gi(s).pipe(ap(_=>{const m=this.transitions.getValue();return r.next(new YE(_.id,this.serializeUrl(_.extractedUrl),_.source,_.restoredState)),m!==this.transitions.getValue()?ln:Promise.resolve(_)}),function c6(e,n,t,r){return ap(i=>function s6(e,n,t,r,i){return new u6(e,n,t,r,i).apply()}(e,n,t,i.extractedUrl,r).pipe(Nn(o=>({...i,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Eu(_=>{this.currentNavigation={...this.currentNavigation,finalUrl:_.urlAfterRedirects}}),function A6(e,n,t,r,i){return Lt(o=>function S6(e,n,t,r,i="emptyOnly",o="legacy"){try{const a=new C6(e,n,t,r,i,o).recognize();return null===a?rD(new E6):gi(a)}catch(a){return rD(a)}}(e,n,o.urlAfterRedirects,t(o.urlAfterRedirects),r,i).pipe(Nn(a=>({...o,targetSnapshot:a}))))}(this.rootComponentType,this.config,_=>this.serializeUrl(_),this.paramsInheritanceStrategy,this.relativeLinkResolution),Eu(_=>{if("eager"===this.urlUpdateStrategy){if(!_.extras.skipLocationChange){const E=this.urlHandlingStrategy.merge(_.urlAfterRedirects,_.rawUrl);this.setBrowserUrl(E,_)}this.browserUrlTree=_.urlAfterRedirects}const m=new YU(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);r.next(m)}));if(l&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:m,extractedUrl:E,source:D,restoredState:R,extras:ye}=s,xe=new YE(m,this.serializeUrl(E),D,R);r.next(xe);const et=L2(E,this.rootComponentType).snapshot;return gi({...s,targetSnapshot:et,urlAfterRedirects:E,extras:{...ye,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=s.rawUrl,s.resolve(null),ln}),Eu(s=>{const d=new QU(s.id,this.serializeUrl(s.extractedUrl),this.serializeUrl(s.urlAfterRedirects),s.targetSnapshot);this.triggerEvent(d)}),Nn(s=>({...s,guards:d6(s.targetSnapshot,s.currentSnapshot,this.rootContexts)})),function m6(e,n){return Lt(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return 0===a.length&&0===o.length?gi({...t,guardsResult:!0}):function g6(e,n,t,r){return so(e).pipe(Lt(i=>function x6(e,n,t,r,i){const o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return o&&0!==o.length?gi(o.map(s=>{const d=$0(s,n,i);let l;if(function e6(e){return e&&oh(e.canDeactivate)}(d))l=Nc(d.canDeactivate(e,n,t,r));else{if(!oh(d))throw new Error("Invalid CanDeactivate guard");l=Nc(d(e,n,t,r))}return l.pipe(up())})).pipe(ry()):gi(!0)}(i.component,i.route,t,n,r)),up(i=>!0!==i,!0))}(a,r,i,e).pipe(Lt(s=>s&&function J5(e){return"boolean"==typeof e}(s)?function v6(e,n,t,r){return so(n).pipe(Wv(i=>KE(function _6(e,n){return null!==e&&n&&n(new o5(e)),gi(!0)}(i.route.parent,r),function y6(e,n){return null!==e&&n&&n(new s5(e)),gi(!0)}(i.route,r),function w6(e,n,t){const r=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(a=>function f6(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(a)).filter(a=>null!==a).map(a=>p2(()=>gi(a.guards.map(d=>{const l=$0(d,a.node,t);let f;if(function Q5(e){return e&&oh(e.canActivateChild)}(l))f=Nc(l.canActivateChild(r,e));else{if(!oh(l))throw new Error("Invalid CanActivateChild guard");f=Nc(l(r,e))}return f.pipe(up())})).pipe(ry())));return gi(o).pipe(ry())}(e,i.path,t),function b6(e,n,t){const r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||0===r.length)return gi(!0);const i=r.map(o=>p2(()=>{const a=$0(o,n,t);let s;if(function Y5(e){return e&&oh(e.canActivate)}(a))s=Nc(a.canActivate(n,e));else{if(!oh(a))throw new Error("Invalid CanActivate guard");s=Nc(a(n,e))}return s.pipe(up())}));return gi(i).pipe(ry())}(e,i.route,t))),up(i=>!0!==i,!0))}(r,o,e,n):gi(s)),Nn(s=>({...t,guardsResult:s})))})}(this.ngModule.injector,s=>this.triggerEvent(s)),Eu(s=>{if(dp(s.guardsResult)){const l=QE(`Redirecting to "${this.serializeUrl(s.guardsResult)}"`);throw l.url=s.guardsResult,l}const d=new e5(s.id,this.serializeUrl(s.extractedUrl),this.serializeUrl(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.triggerEvent(d)}),ng(s=>!!s.guardsResult||(this.restoreHistory(s),this.cancelNavigationTransition(s,""),!1)),hS(s=>{if(s.guards.canActivateChecks.length)return gi(s).pipe(Eu(d=>{const l=new t5(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(l)}),ap(d=>{let l=!1;return gi(d).pipe(function R6(e,n){return Lt(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return gi(t);let o=0;return so(i).pipe(Wv(a=>function D6(e,n,t,r){const i=e.routeConfig,o=e._resolve;return void 0!==i?.title&&!cD(i)&&(o[fS]=i.title),function O6(e,n,t,r){const i=function M6(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return gi({});const o={};return so(i).pipe(Lt(a=>function k6(e,n,t,r){const i=$0(e,n,r);return Nc(i.resolve?i.resolve(n,t):i(n,t))}(e[a],n,t,r).pipe(up(),Eu(s=>{o[a]=s}))),WE(1),function JU(e){return Nn(()=>e)}(o),sp(a=>a instanceof Xv?ln:Kv(a)))}(o,e,n,r).pipe(Nn(a=>(e._resolvedData=a,e.data=B2(e,t).resolve,i&&cD(i)&&(e.data[fS]=i.title),null)))}(a.route,r,e,n)),Eu(()=>o++),WE(1),Lt(a=>o===i.length?gi(t):ln))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Eu({next:()=>l=!0,complete:()=>{l||(this.restoreHistory(d),this.cancelNavigationTransition(d,"At least one route resolver didn't emit any value."))}}))}),Eu(d=>{const l=new n5(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(l)}))}),hS(()=>this.afterPreactivation()),hS(s=>{const d=l=>{const f=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(l.routeConfig).pipe(Eu(_=>{l.component=_}),Nn(()=>{})));for(const _ of l.children)f.push(...d(_));return f};return f2(d(s.targetSnapshot.root)).pipe(JE(),Ho(1))}),Nn(s=>{const d=function O5(e,n,t){const r=Qv(e,n._root,t?t._root:void 0);return new N2(r,n)}(this.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return{...s,targetRouterState:d}}),Eu(s=>{this.currentUrlTree=s.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),this.routerState=s.targetRouterState,"deferred"===this.urlUpdateStrategy&&(s.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,s),this.browserUrlTree=s.urlAfterRedirects)}),((e,n,t)=>Nn(r=>(new W5(n,r.targetRouterState,r.currentRouterState,t).activate(e),r)))(this.rootContexts,this.routeReuseStrategy,s=>this.triggerEvent(s)),Eu({next(){o=!0},complete(){o=!0}}),ZE(()=>{o||a||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),sp(s=>{if(a=!0,function d5(e){return e&&e[b2]}(s)){const d=dp(s.url);d||(this.navigated=!0,this.restoreHistory(i,!0));const l=new y2(i.id,this.serializeUrl(i.extractedUrl),s.message);if(r.next(l),d){const f=this.urlHandlingStrategy.merge(s.url,this.rawUrlTree),_={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||fD(i.source)};this.scheduleNavigation(f,"imperative",null,_,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const d=new ZU(i.id,this.serializeUrl(i.extractedUrl),s);r.next(d);try{i.resolve(this.errorHandler(s))}catch(l){i.reject(l)}}return ln}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},o=t.state?.navigationId?t.state:null;if(o){const s={...o};delete s.navigationId,delete s.\u0275routerPageId,0!==Object.keys(s).length&&(i.state=s)}const a=this.parseUrl(t.url);this.scheduleNavigation(a,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(cS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:s,preserveFragment:d}=r,l=i||this.routerState.root,f=d?this.currentUrlTree.fragment:a;let _=null;switch(s){case"merge":_={...this.currentUrlTree.queryParams,...o};break;case"preserve":_=this.currentUrlTree.queryParams;break;default:_=o||null}return null!==_&&(_=this.removeEmptyProps(_)),function N5(e,n,t,r,i){if(0===t.length)return aS(n.root,n.root,n.root,r,i);const o=function L5(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new U2(!0,0,e);let n=0,t=!1;const r=e.reduce((i,o,a)=>{if("object"==typeof o&&null!=o){if(o.outlets){const s={};return su(o.outlets,(d,l)=>{s[l]="string"==typeof d?d.split("/"):d}),[...i,{outlets:s}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===a?(o.split("/").forEach((s,d)=>{0==d&&"."===s||(0==d&&""===s?t=!0:".."===s?n++:""!=s&&i.push(s))}),i):[...i,o]},[]);return new U2(t,n,r)}(t);return o.toRoot()?aS(n.root,n.root,new qi([],{}),r,i):function a(d){const l=function B5(e,n,t,r){return e.isAbsolute?new sS(n.root,!0,0):-1===r?new sS(t,t===n.root,0):function F5(e,n,t){let r=e,i=n,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new sS(r,!1,i-o)}(t,r+(z0(e.commands[0])?0:1),e.numberOfDoubleDots)}(o,n,e.snapshot?._urlSegment,d),f=l.processChildren?j0(l.segmentGroup,l.index,o.commands):G2(l.segmentGroup,l.index,o.commands);return aS(n.root,l.segmentGroup,f,r,i)}(e.snapshot?._lastPathIndex)}(l,this.currentUrlTree,t,_,f??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=dp(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function H6(e){for(let n=0;n<e.length;n++){const t=e[n];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${n}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...V6}:!1===r?{...q6}:r,dp(t))return C2(this.currentUrlTree,t,i);const o=this.parseUrl(t);return C2(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Jv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,o,a){if(this.disposed)return Promise.resolve(!1);let s,d,l;a?(s=a.resolve,d=a.reject,l=a.promise):l=new Promise((m,E)=>{s=m,d=E});const f=++this.navigationId;let _;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),_=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):_=0,this.setTransition({id:f,targetPageId:_,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:s,reject:d,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new y2(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return e.\u0275fac=function(t){rx()},e.\u0275prov=mr({token:e,factory:e.\u0275fac}),e})();function fD(e){return"imperative"!==e}class hD{buildTitle(n){let t,r=n.root;for(;void 0!==r;)t=this.getResolvedTitleForRoute(r)??t,r=r.children.find(i=>i.outlet===Ri);return t}getResolvedTitleForRoute(n){return n.data[fS]}}let X6=(()=>{class e extends hD{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(t){return new(t||e)(hr(l2))},e.\u0275prov=mr({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class pD{}let mD=(()=>{class e{constructor(t,r,i,o,a){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(ng(t=>t instanceof Jv),Wv(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=a0(o.providers,t,`Route: ${o.path}`));const a=o._injector??t,s=o._loadedInjector??a;o.loadChildren&&!o._loadedRoutes||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(a,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(s,o.children??o._loadedRoutes))}return so(i).pipe(un())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):gi(null);const o=i.pipe(Lt(a=>null===a?gi(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));return r.loadComponent&&!r._loadedComponent?so([o,this.loader.loadComponent(r)]).pipe(un()):o})}}return e.\u0275fac=function(t){return new(t||e)(hr(Uu),hr(dE),hr(Ks),hr(pD),hr(mS))},e.\u0275prov=mr({token:e,factory:e.\u0275fac}),e})();const gD=new Gr("");let W6=(()=>{class e{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof YE?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Jv&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof _2&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new _2(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){rx()},e.\u0275prov=mr({token:e,factory:e.\u0275fac}),e})();const yS=new Gr("ROUTER_CONFIGURATION",{providedIn:"root",factory:()=>({})}),vD=new Gr("ROUTER_FORROOT_GUARD"),yD=new Gr(""),J6=[TE,{provide:A2,useClass:R2},{provide:Uu,useFactory:function n8(e,n,t,r,i,o,a={},s,d,l,f){const _=new Uu(null,e,n,t,r,i,x2(o));return l&&(_.urlHandlingStrategy=l),f&&(_.routeReuseStrategy=f),_.titleStrategy=d??s,function r8(e,n){e.errorHandler&&(n.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(n.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(n.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(n.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(n.urlUpdateStrategy=e.urlUpdateStrategy),e.canceledNavigationResolution&&(n.canceledNavigationResolution=e.canceledNavigationResolution)}(a,_),_},deps:[A2,ty,TE,ya,dE,pS,yS,X6,[hD,new rl],[class F6{},new rl],[class N6{},new rl]]},ty,{provide:og,useFactory:function i8(e){return e.routerState.root},deps:[Uu]},mS];function Z6(){return new aR("Router",Uu)}let _D=(()=>{class e{constructor(t,r){}static forRoot(t,r){return{ngModule:e,providers:[J6,[],bD(t),{provide:vD,useFactory:t8,deps:[[Uu,new rl,new Pf]]},{provide:yS,useValue:r||{}},r?.useHash?{provide:op,useClass:Tz}:{provide:op,useClass:RR},{provide:gD,useFactory:()=>{const e=td(Uu),n=td(Wj),t=td(yS);return t.scrollOffset&&n.setOffset(t.scrollOffset),new W6(e,n,t)}},r?.preloadingStrategy?d8(r.preloadingStrategy):[],{provide:aR,multi:!0,useFactory:Z6},r?.initialNavigation?a8(r):[],[{provide:wD,useFactory:o8},{provide:tR,multi:!0,useExisting:wD}]]}}static forChild(t){return{ngModule:e,providers:[bD(t)]}}}return e.\u0275fac=function(t){return new(t||e)(hr(vD,8),hr(Uu,8))},e.\u0275mod=Ka({type:e}),e.\u0275inj=Xi({}),e})();function t8(e){return"guarded"}function bD(e){return[{provide:h1,multi:!0,useValue:e},{provide:pS,multi:!0,useValue:e}]}function o8(){const e=td(ya);return n=>{const t=e.get(h0);if(n!==t.components[0])return;const r=e.get(Uu),i=e.get(xD);null===e.get(_S,null,Cn.Optional)&&r.initialNavigation(),e.get(yD,null,Cn.Optional)?.setUpPreloading(),e.get(gD,null,Cn.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const wD=new Gr("");function a8(e){return["disabled"===e.initialNavigation?[{provide:c0,multi:!0,useFactory:()=>{const e=td(Uu);return()=>{e.setUpLocationChangeListener()}}},{provide:_S,useValue:"disabled"}]:[],"enabledBlocking"===e.initialNavigation?[{provide:_S,useValue:"enabledBlocking"},{provide:c0,multi:!0,deps:[ya],useFactory:e=>{const n=e.get(Ez,Promise.resolve(null));let t=!1;return()=>n.then(()=>new Promise(r=>{const i=e.get(Uu),o=e.get(xD);i.afterPreactivation=()=>t?gi(void 0):(t=!0,r(!0),o),i.initialNavigation()}))}}]:[]]}const xD=new Gr("",{factory:()=>new Et}),_S=new Gr("");function d8(e){return[mD,{provide:yD,useExisting:mD},{provide:pD,useExisting:e}]}const f8=[];let h8=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ka({type:e}),e.\u0275inj=Xi({imports:[_D.forRoot(f8),_D]}),e})();var m8=function(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},g8=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},ag=function(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(g8(arguments[n]));return e},ED={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5},nc=(()=>{return(e=nc||(nc={})).DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",nc;var e})(),_a=function(){function e(n,t){void 0===t&&(t=nc.WARN),this.name=n,this.level=t,this._pluggables=[]}return e.prototype._padding=function(n){return n<10?"0"+n:""+n},e.prototype._ts=function(){var n=new Date;return[this._padding(n.getMinutes()),this._padding(n.getSeconds())].join(":")+"."+n.getMilliseconds()},e.prototype.configure=function(n){return n?(this._config=n,this._config):this._config},e.prototype._log=function(n){for(var t,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var a=this.level;e.LOG_LEVEL&&(a=e.LOG_LEVEL),typeof window<"u"&&window.LOG_LEVEL&&(a=window.LOG_LEVEL);var s=ED[a],d=ED[n];if(d>=s){var l=console.log.bind(console);n===nc.ERROR&&console.error&&(l=console.error.bind(console)),n===nc.WARN&&console.warn&&(l=console.warn.bind(console));var f="["+n+"] "+this._ts()+" "+this.name,_="";if(1===i.length&&"string"==typeof i[0])l(_=f+" - "+i[0]);else if(1===i.length)_=f+" "+i[0],l(f,i[0]);else if("string"==typeof i[0]){var m=i.slice(1);1===m.length&&(m=m[0]),_=f+" - "+i[0]+" "+m,l(f+" - "+i[0],m)}else _=f+" "+i,l(f,i);try{for(var E=m8(this._pluggables),D=E.next();!D.done;D=E.next()){var R=D.value,ye={message:_,timestamp:Date.now()};R.pushLogs([ye])}}catch(xe){t={error:xe}}finally{try{D&&!D.done&&(r=E.return)&&r.call(E)}finally{if(t)throw t.error}}}},e.prototype.log=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._log.apply(this,ag([nc.INFO],n))},e.prototype.info=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._log.apply(this,ag([nc.INFO],n))},e.prototype.warn=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._log.apply(this,ag([nc.WARN],n))},e.prototype.error=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._log.apply(this,ag([nc.ERROR],n))},e.prototype.debug=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._log.apply(this,ag([nc.DEBUG],n))},e.prototype.verbose=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._log.apply(this,ag([nc.VERBOSE],n))},e.prototype.addPluggable=function(n){n&&"Logging"===n.getCategoryName()&&(this._pluggables.push(n),n.configure(this._config))},e.prototype.listPluggables=function(){return this._pluggables},e.LOG_LEVEL=null,e}(),bS=new _a("Amplify"),y8=function(){function e(){this._components=[],this._config={},this._modules={},this.Auth=null,this.Analytics=null,this.API=null,this.Credentials=null,this.Storage=null,this.I18n=null,this.Cache=null,this.PubSub=null,this.Interactions=null,this.Pushnotification=null,this.UI=null,this.XR=null,this.Predictions=null,this.DataStore=null,this.Geo=null,this.Logger=_a,this.ServiceWorker=null}return e.prototype.register=function(n){bS.debug("component registered in amplify",n),this._components.push(n),"function"==typeof n.getModuleName?(this._modules[n.getModuleName()]=n,this[n.getModuleName()]=n):bS.debug("no getModuleName method for component",n),n.configure(this._config)},e.prototype.configure=function(n){var t=this;return n?(this._config=Object.assign(this._config,n),bS.debug("amplify config",this._config),Object.entries(this._modules).forEach(function(r){var i=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}(r,2),a=i[1];Object.keys(a).forEach(function(s){t._modules[s]&&(a[s]=t._modules[s])})}),this._components.map(function(r){r.configure(t._config)}),this._config):this._config},e.prototype.addPluggable=function(n){n&&n.getCategory&&"function"==typeof n.getCategory&&this._components.map(function(t){t.addPluggable&&"function"==typeof t.addPluggable&&t.addPluggable(n)})},e}(),Gu=new y8,_8=[{type:"text/plain",ext:"txt"},{type:"text/html",ext:"html"},{type:"text/javascript",ext:"js"},{type:"text/css",ext:"css"},{type:"text/csv",ext:"csv"},{type:"text/yaml",ext:"yml"},{type:"text/yaml",ext:"yaml"},{type:"text/calendar",ext:"ics"},{type:"text/calendar",ext:"ical"},{type:"image/apng",ext:"apng"},{type:"image/bmp",ext:"bmp"},{type:"image/gif",ext:"gif"},{type:"image/x-icon",ext:"ico"},{type:"image/x-icon",ext:"cur"},{type:"image/jpeg",ext:"jpg"},{type:"image/jpeg",ext:"jpeg"},{type:"image/jpeg",ext:"jfif"},{type:"image/jpeg",ext:"pjp"},{type:"image/jpeg",ext:"pjpeg"},{type:"image/png",ext:"png"},{type:"image/svg+xml",ext:"svg"},{type:"image/tiff",ext:"tif"},{type:"image/tiff",ext:"tiff"},{type:"image/webp",ext:"webp"},{type:"application/json",ext:"json"},{type:"application/xml",ext:"xml"},{type:"application/x-sh",ext:"sh"},{type:"application/zip",ext:"zip"},{type:"application/x-rar-compressed",ext:"rar"},{type:"application/x-tar",ext:"tar"},{type:"application/x-bzip",ext:"bz"},{type:"application/x-bzip2",ext:"bz2"},{type:"application/pdf",ext:"pdf"},{type:"application/java-archive",ext:"jar"},{type:"application/msword",ext:"doc"},{type:"application/vnd.ms-excel",ext:"xls"},{type:"application/vnd.ms-excel",ext:"xlsx"},{type:"message/rfc822",ext:"eml"}],b8=function(e){return void 0===e&&(e={}),0===Object.keys(e).length},w8=function(e,n,t){if(!e||!e.sort)return!1;var r=t&&"desc"===t?-1:1;return e.sort(function(i,o){var a=i[n],s=o[n];return typeof s>"u"?typeof a>"u"?0:1*r:typeof a>"u"||a<s?-1*r:a>s?1*r:0}),!0},x8=function(e,n){var t=Object.assign({},e);return n&&("string"==typeof n?delete t[n]:n.forEach(function(r){delete t[r]})),t},E8=function(e,n){void 0===n&&(n="application/octet-stream");var t=e.toLowerCase(),r=_8.filter(function(i){return t.endsWith("."+i.ext)});return r.length>0?r[0].type:n},S8=function(e){var n=e.toLowerCase();return!!n.startsWith("text/")||"application/json"===n||"application/xml"===n||"application/sh"===n},C8=function(){for(var e="",n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",t=32;t>0;t-=1)e+=n[Math.floor(Math.random()*n.length)];return e},SD=function(e){if(e.isResolved)return e;var n=!0,t=!1,r=!1,i=e.then(function(o){return r=!0,n=!1,o},function(o){throw t=!0,n=!1,o});return i.isFullfilled=function(){return r},i.isPending=function(){return n},i.isRejected=function(){return t},i},T8=function(){if(typeof self>"u")return!1;var e=self;return typeof e.WorkerGlobalScope<"u"&&self instanceof e.WorkerGlobalScope},fp=function(){return{isBrowser:typeof window<"u"&&typeof window.document<"u",isNode:typeof process<"u"&&null!=process.versions&&null!=process.versions.node}},CD=function(e,n,t){if(void 0===n&&(n=[]),void 0===t&&(t=[]),!wS(e))return e;var r={};for(var i in e)e.hasOwnProperty(i)&&(r[n.includes(i)?i:i[0].toLowerCase()+i.slice(1)]=t.includes(i)?e[i]:CD(e[i],n,t));return r},TD=function(e,n,t){if(void 0===n&&(n=[]),void 0===t&&(t=[]),!wS(e))return e;var r={};for(var i in e)e.hasOwnProperty(i)&&(r[n.includes(i)?i:i[0].toUpperCase()+i.slice(1)]=t.includes(i)?e[i]:TD(e[i],n,t));return r},wS=function(e){return!(!(e instanceof Object)||e instanceof Array||e instanceof Function||e instanceof Number||e instanceof String||e instanceof Boolean)},K0=function(){function e(){}return e.isEmpty=b8,e.sortByField=w8,e.objectLessAttributes=x8,e.filenameToContentType=E8,e.isTextFile=S8,e.generateRandomString=C8,e.makeQuerablePromise=SD,e.isWebWorker=T8,e.browserOrNode=fp,e.transferKeyToLowerCase=CD,e.transferKeyToUpperCase=TD,e.isStrictObject=wS,e}(),I8=function(){function e(){this._logger=new _a("ServiceWorker")}return Object.defineProperty(e.prototype,"serviceWorker",{get:function(){return this._serviceWorker},enumerable:!0,configurable:!0}),e.prototype.register=function(n,t){var r=this;return void 0===n&&(n="/service-worker.js"),void 0===t&&(t="/"),this._logger.debug("registering "+n),this._logger.debug("registering service worker with scope "+t),new Promise(function(i,o){if(!navigator||!("serviceWorker"in navigator))return o(new Error("Service Worker not available"));navigator.serviceWorker.register(n,{scope:t}).then(function(a){return a.installing?r._serviceWorker=a.installing:a.waiting?r._serviceWorker=a.waiting:a.active&&(r._serviceWorker=a.active),r._registration=a,r._setupListeners(),r._logger.debug("Service Worker Registration Success: "+a),i(a)}).catch(function(a){return r._logger.debug("Service Worker Registration Failed "+a),o(a)})})},e.prototype.enablePush=function(n){var t=this;if(!this._registration)throw new Error("Service Worker not registered");return this._publicKey=n,new Promise(function(r,i){if(!fp().isBrowser)return i(new Error("Service Worker not available"));t._registration.pushManager.getSubscription().then(function(o){if(!o)return t._logger.debug("User is NOT subscribed to push"),t._registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t._urlB64ToUint8Array(n)}).then(function(a){t._subscription=a,t._logger.debug("User subscribed: "+JSON.stringify(a)),r(a)}).catch(function(a){t._logger.error(a)});t._subscription=o,t._logger.debug("User is subscribed to push: "+JSON.stringify(o)),r(o)})})},e.prototype._urlB64ToUint8Array=function(n){for(var r=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),i=window.atob(r),o=new Uint8Array(i.length),a=0;a<i.length;++a)o[a]=i.charCodeAt(a);return o},e.prototype.send=function(n){this._serviceWorker&&this._serviceWorker.postMessage("object"==typeof n?JSON.stringify(n):n)},e.prototype._setupListeners=function(){var n=this;this._serviceWorker.addEventListener("statechange",function(t){var r=n._serviceWorker.state;n._logger.debug("ServiceWorker statechange: "+r),Gu.Analytics&&"function"==typeof Gu.Analytics.record&&Gu.Analytics.record({name:"ServiceWorker",attributes:{state:r}})}),this._serviceWorker.addEventListener("message",function(t){n._logger.debug("ServiceWorker message event: "+t)})},e}(),sy=(()=>{return(e=sy||(sy={})).Cognito="COGNITO",e.Google="Google",e.Facebook="Facebook",e.Amazon="LoginWithAmazon",e.Apple="SignInWithApple",sy;var e})();function xS(e){return e&&!!["provider"].find(function(t){return e.hasOwnProperty(t)})}function hp(e){return void 0!==e.redirectSignIn}var e,wo=(()=>{return(e=wo||(wo={})).NoConfig="noConfig",e.MissingAuthConfig="missingAuthConfig",e.EmptyUsername="emptyUsername",e.InvalidUsername="invalidUsername",e.EmptyPassword="emptyPassword",e.EmptyCode="emptyCode",e.SignUpError="signUpError",e.NoMFA="noMFA",e.InvalidMFA="invalidMFA",e.EmptyChallengeResponse="emptyChallengeResponse",e.NoUserSession="noUserSession",e.Default="default",e.DeviceConfig="deviceConfig",e.NetworkError="networkError",wo;var e})(),uy=function(){return uy=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},uy.apply(this,arguments)},ID=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},PD=function(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(ID(arguments[n]));return e},Wd=new _a("Hub"),D8=typeof Symbol<"u"&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",M8=function(){function e(n){this.listeners=[],this.patterns=[],this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=n}return e.prototype.remove=function(n,t){if(n instanceof RegExp){var r=this.patterns.find(function(o){return o.pattern.source===n.source});if(!r)return void Wd.warn("No listeners for "+n);this.patterns=PD(this.patterns.filter(function(o){return o!==r}))}else{var i=this.listeners[n];if(!i)return void Wd.warn("No listeners for "+n);this.listeners[n]=PD(i.filter(function(o){return o.callback!==t}))}},e.prototype.dispatch=function(n,t,r,i){void 0===r&&(r=""),this.protectedChannels.indexOf(n)>-1&&(i===D8||Wd.warn("WARNING: "+n+" is protected and dispatching on it can have unintended consequences"));var a={channel:n,payload:uy({},t),source:r,patternInfo:[]};try{this._toListeners(a)}catch(s){Wd.error(s)}},e.prototype.listen=function(n,t,r){var o,i=this;if(void 0===r&&(r="noname"),function O8(e){return void 0!==e.onHubCapsule}(t))Wd.warn("WARNING onHubCapsule is Deprecated. Please pass in a callback."),o=t.onHubCapsule.bind(t);else{if("function"!=typeof t)throw new Error("No callback supplied to Hub");o=t}if(n instanceof RegExp)this.patterns.push({pattern:n,callback:o});else{var a=this.listeners[n];a||(this.listeners[n]=a=[]),a.push({name:r,callback:o})}return function(){i.remove(n,o)}},e.prototype._toListeners=function(n){var t=n.channel,r=n.payload,i=this.listeners[t];if(i&&i.forEach(function(a){Wd.debug("Dispatching to "+t+" with ",r);try{a.callback(n)}catch(s){Wd.error(s)}}),this.patterns.length>0){if(!r.message)return void Wd.warn("Cannot perform pattern matching without a message key");var o=r.message;this.patterns.forEach(function(a){var s=o.match(a.pattern);if(s){var l=ID(s).slice(1),f=uy(uy({},n),{patternInfo:l});try{a.callback(f)}catch(_){Wd.error(_)}}})}},e}(),Jd=new M8("__default__"),pp={},k8=function(){function e(){}return e.setItem=function(n,t){return pp[n]=t,pp[n]},e.getItem=function(n){return Object.prototype.hasOwnProperty.call(pp,n)?pp[n]:void 0},e.removeItem=function(n){return delete pp[n]},e.clear=function(){return pp={}},e}(),X0=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.amplify.test-ls",1),this.storageWindow.removeItem("aws.amplify.test-ls")}catch{this.storageWindow=k8}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),N8=(e=function(n,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(n,t)},function(n,t){function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),F8=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},z8=function(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(F8(arguments[n]));return e},W0=new _a("Util"),mp=function(e){function n(t){var r=e.call(this,t)||this;return r.nonRetryable=!0,r}return N8(n,e),n}(Error);function AD(e,n,t,r){return void 0===r&&(r=1),function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function(){var i,o;return function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(a){switch(a.label){case 0:if("function"!=typeof e)throw Error("functionToRetry must be a function");W0.debug(e.name+" attempt #"+r+" with this vars: "+JSON.stringify(n)),a.label=1;case 1:return a.trys.push([1,3,,8]),[4,e.apply(void 0,z8(n))];case 2:return[2,a.sent()];case 3:if(i=a.sent(),W0.debug("error on "+e.name,i),function(e){return e&&e.nonRetryable}(i))throw W0.debug(e.name+" non retryable error",i),i;return o=t(r,n,i),W0.debug(e.name+" retrying in "+o+" ms"),!1===o?[3,6]:[4,new Promise(function(s){return setTimeout(s,o)})];case 4:return a.sent(),[4,AD(e,n,t,r+1)];case 5:return[2,a.sent()];case 6:throw i;case 7:return[3,8];case 8:return[2]}})})}var DD=function(e,n,t){return void 0===t&&(t=3e5),AD(e,n,function U8(e){return void 0===e&&(e=3e5),function(r){var i=100*Math.pow(2,r)+100*Math.random();return!(i>e)&&i}}(t))},ah=new _a("CognitoCredentials"),q8=new Promise(function(e,n){return fp().isBrowser?window.gapi&&window.gapi.auth2&&window.gapi.auth2?(ah.debug("google api already loaded"),e()):void setTimeout(function(){return e()},2e3):(ah.debug("not in the browser, directly resolved"),e())}),H8=function(){function e(){this.initialized=!1,this.refreshGoogleToken=this.refreshGoogleToken.bind(this),this._refreshGoogleTokenImpl=this._refreshGoogleTokenImpl.bind(this)}return e.prototype.refreshGoogleToken=function(){return function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function(){return function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(n){switch(n.label){case 0:return this.initialized?[3,2]:(ah.debug("need to wait for the Google SDK loaded"),[4,q8]);case 1:n.sent(),this.initialized=!0,ah.debug("finish waiting"),n.label=2;case 2:return[2,this._refreshGoogleTokenImpl()]}})})},e.prototype._refreshGoogleTokenImpl=function(){var n=null;return fp().isBrowser&&(n=window.gapi&&window.gapi.auth2?window.gapi.auth2:null),n?new Promise(function(t,r){n.getAuthInstance().then(function(i){i||(ah.debug("google Auth undefined"),r(new mp("google Auth undefined")));var o=i.currentUser.get();o.isSignedIn()?(ah.debug("refreshing the google access token"),o.reloadAuthResponse().then(function(a){t({token:a.id_token,expires_at:a.expires_at})}).catch(function(a){r(a&&"network_error"===a.error?"Network error reloading google auth response":new mp("Failed to reload google auth response"))})):r(new mp("User is not signed in with Google"))}).catch(function(i){ah.debug("Failed to refresh google token",i),r(new mp("Failed to refresh google token"))})}):(ah.debug("no gapi auth2 available"),Promise.reject("no gapi auth2 available"))},e}(),gp=new _a("CognitoCredentials"),X8=new Promise(function(e,n){return fp().isBrowser?window.FB?(gp.debug("FB SDK already loaded"),e()):void setTimeout(function(){return e()},2e3):(gp.debug("not in the browser, directly resolved"),e())}),W8=function(){function e(){this.initialized=!1,this.refreshFacebookToken=this.refreshFacebookToken.bind(this),this._refreshFacebookTokenImpl=this._refreshFacebookTokenImpl.bind(this)}return e.prototype.refreshFacebookToken=function(){return function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function(){return function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(n){switch(n.label){case 0:return this.initialized?[3,2]:(gp.debug("need to wait for the Facebook SDK loaded"),[4,X8]);case 1:n.sent(),this.initialized=!0,gp.debug("finish waiting"),n.label=2;case 2:return[2,this._refreshFacebookTokenImpl()]}})})},e.prototype._refreshFacebookTokenImpl=function(){var n=null;if(fp().isBrowser&&(n=window.FB),!n){var t="no fb sdk available";return gp.debug(t),Promise.reject(new mp(t))}return new Promise(function(r,i){n.getLoginStatus(function(o){if(o&&o.authResponse){var s=o.authResponse,d=s.accessToken,_=1e3*s.expiresIn+(new Date).getTime();d||(gp.debug(a="the jwtToken is undefined"),i(new mp(a))),r({token:d,expires_at:_})}else{var a;gp.debug(a="no response from facebook when refreshing the jwt token"),i(new mp(a))}},{scope:"public_profile,email"})})},e}(),J8=new H8,Z8=new W8,ES="aws-amplify/4.5.7",sh={userAgent:ES+" js",product:"",navigator:null,isReactNative:!1};typeof navigator<"u"&&navigator.product&&("ReactNative"===(sh.product=navigator.product||"",sh.navigator=navigator||null,navigator.product)?(sh.userAgent=ES+" react-native",sh.isReactNative=!0):(sh.userAgent=ES+" js",sh.isReactNative=!1));var Lc=function(){return sh.userAgent};function CS(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}function TS(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}var Z0=(()=>(function(e){e.filterSensitiveLog=function(n){return ne({},n)}}(Z0||(Z0={})),Z0))(),Y0=(()=>(function(e){e.filterSensitiveLog=function(n){return ne({},n)}}(Y0||(Y0={})),Y0))(),Q0=(()=>(function(e){e.filterSensitiveLog=function(n){return ne({},n)}}(Q0||(Q0={})),Q0))(),eb=(()=>(function(e){e.filterSensitiveLog=function(n){return ne({},n)}}(eb||(eb={})),eb))(),ly=function(){function e(n){this.statusCode=n.statusCode,this.headers=n.headers||{},this.body=n.body}return e.isInstance=function(n){return!!n&&("number"==typeof n.statusCode&&"object"==typeof n.headers)},e}(),vp=function(){return vp=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},vp.apply(this,arguments)};function Q8(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}var ns=function(){function e(n){this.method=n.method||"GET",this.hostname=n.hostname||"localhost",this.port=n.port,this.query=n.query||{},this.headers=n.headers||{},this.body=n.body,this.protocol=n.protocol?":"!==n.protocol.substr(-1)?n.protocol+":":n.protocol:"https:",this.path=n.path?"/"!==n.path.charAt(0)?"/"+n.path:n.path:"/"}return e.isInstance=function(n){return!!n&&("method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&"object"==typeof n.query&&"object"==typeof n.headers)},e.prototype.clone=function(){var n=new e(vp(vp({},this),{headers:vp({},this.headers)}));return n.query&&(n.query=function tG(e){return Object.keys(e).reduce(function(n,t){var r,i=e[t];return vp(vp({},n),((r={})[t]=Array.isArray(i)?function eG(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(Q8(arguments[n]));return e}(i):i,r))},{})}(n.query)),n},e}(),cG=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,s,d,l,f,_,m,E,D,R,ye,xe;return It(this,function(et){switch(et.label){case 0:return r=[ne({},e)],xe={},[4,Mi(e.body,n)];case 1:switch(t=ne.apply(void 0,r.concat([(xe.body=et.sent(),xe)])),o="UnknownError",o=ss(e,t.body)){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":return[3,6];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return s=[{}],[4,nb(t,n)];case 3:return i=ne.apply(void 0,[ne.apply(void 0,s.concat([et.sent()])),{name:o,$metadata:xt(e)}]),[3,19];case 4:return d=[{}],[4,rs(t,n)];case 5:return i=ne.apply(void 0,[ne.apply(void 0,d.concat([et.sent()])),{name:o,$metadata:xt(e)}]),[3,19];case 6:return l=[{}],[4,PG(t,n)];case 7:return i=ne.apply(void 0,[ne.apply(void 0,l.concat([et.sent()])),{name:o,$metadata:xt(e)}]),[3,19];case 8:return f=[{}],[4,is(t,n)];case 9:return i=ne.apply(void 0,[ne.apply(void 0,f.concat([et.sent()])),{name:o,$metadata:xt(e)}]),[3,19];case 10:return _=[{}],[4,xs(t,n)];case 11:return i=ne.apply(void 0,[ne.apply(void 0,_.concat([et.sent()])),{name:o,$metadata:xt(e)}]),[3,19];case 12:return m=[{}],[4,rc(t,n)];case 13:return i=ne.apply(void 0,[ne.apply(void 0,m.concat([et.sent()])),{name:o,$metadata:xt(e)}]),[3,19];case 14:return E=[{}],[4,Ns(t,n)];case 15:return i=ne.apply(void 0,[ne.apply(void 0,E.concat([et.sent()])),{name:o,$metadata:xt(e)}]),[3,19];case 16:return D=[{}],[4,os(t,n)];case 17:return i=ne.apply(void 0,[ne.apply(void 0,D.concat([et.sent()])),{name:o,$metadata:xt(e)}]),[3,19];case 18:o=(R=t.body).code||R.Code||o,i=ne(ne({},R),{name:""+o,message:R.message||R.Message||o,$fault:"client",$metadata:xt(e)}),et.label=19;case 19:return i.message=ye=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(ye),i))]}})})},fG=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,s,d,l,f,_,m,E,D,R,ye,xe;return It(this,function(et){switch(et.label){case 0:return r=[ne({},e)],xe={},[4,Mi(e.body,n)];case 1:switch(t=ne.apply(void 0,r.concat([(xe.body=et.sent(),xe)])),o="UnknownError",o=ss(e,t.body)){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return s=[{}],[4,nb(t,n)];case 3:return i=ne.apply(void 0,[ne.apply(void 0,s.concat([et.sent()])),{name:o,$metadata:xt(e)}]),[3,19];case 4:return d=[{}],[4,rs(t,n)];case 5:return i=ne.apply(void 0,[ne.apply(void 0,d.concat([et.sent()])),{name:o,$metadata:xt(e)}]),[3,19];case 6:return l=[{}],[4,is(t,n)];case 7:return i=ne.apply(void 0,[ne.apply(void 0,l.concat([et.sent()])),{name:o,$metadata:xt(e)}]),[3,19];case 8:return f=[{}],[4,PS(t,n)];case 9:return i=ne.apply(void 0,[ne.apply(void 0,f.concat([et.sent()])),{name:o,$metadata:xt(e)}]),[3,19];case 10:return _=[{}],[4,xs(t,n)];case 11:return i=ne.apply(void 0,[ne.apply(void 0,_.concat([et.sent()])),{name:o,$metadata:xt(e)}]),[3,19];case 12:return m=[{}],[4,rc(t,n)];case 13:return i=ne.apply(void 0,[ne.apply(void 0,m.concat([et.sent()])),{name:o,$metadata:xt(e)}]),[3,19];case 14:return E=[{}],[4,Ns(t,n)];case 15:return i=ne.apply(void 0,[ne.apply(void 0,E.concat([et.sent()])),{name:o,$metadata:xt(e)}]),[3,19];case 16:return D=[{}],[4,os(t,n)];case 17:return i=ne.apply(void 0,[ne.apply(void 0,D.concat([et.sent()])),{name:o,$metadata:xt(e)}]),[3,19];case 18:o=(R=t.body).code||R.Code||o,i=ne(ne({},R),{name:""+o,message:R.message||R.Message||o,$fault:"client",$metadata:xt(e)}),et.label=19;case 19:return i.message=ye=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(ye),i))]}})})},nb=function(e,n){return kt(void 0,void 0,void 0,function(){var r;return It(this,function(o){return r=hV(e.body,n),[2,ne({name:"ExternalServiceException",$fault:"client",$metadata:xt(e)},r)]})})},rs=function(e,n){return kt(void 0,void 0,void 0,function(){var r;return It(this,function(o){return r=EV(e.body,n),[2,ne({name:"InternalErrorException",$fault:"server",$metadata:xt(e)},r)]})})},PG=function(e,n){return kt(void 0,void 0,void 0,function(){var r;return It(this,function(o){return r=SV(e.body,n),[2,ne({name:"InvalidIdentityPoolConfigurationException",$fault:"client",$metadata:xt(e)},r)]})})},is=function(e,n){return kt(void 0,void 0,void 0,function(){var r;return It(this,function(o){return r=CV(e.body,n),[2,ne({name:"InvalidParameterException",$fault:"client",$metadata:xt(e)},r)]})})},PS=function(e,n){return kt(void 0,void 0,void 0,function(){var r;return It(this,function(o){return r=TV(e.body,n),[2,ne({name:"LimitExceededException",$fault:"client",$metadata:xt(e)},r)]})})},xs=function(e,n){return kt(void 0,void 0,void 0,function(){var r;return It(this,function(o){return r=NV(e.body,n),[2,ne({name:"NotAuthorizedException",$fault:"client",$metadata:xt(e)},r)]})})},rc=function(e,n){return kt(void 0,void 0,void 0,function(){var r;return It(this,function(o){return r=BV(e.body,n),[2,ne({name:"ResourceConflictException",$fault:"client",$metadata:xt(e)},r)]})})},Ns=function(e,n){return kt(void 0,void 0,void 0,function(){var r;return It(this,function(o){return r=FV(e.body,n),[2,ne({name:"ResourceNotFoundException",$fault:"client",$metadata:xt(e)},r)]})})},os=function(e,n){return kt(void 0,void 0,void 0,function(){var r;return It(this,function(o){return r=HV(e.body,n),[2,ne({name:"TooManyRequestsException",$fault:"client",$metadata:xt(e)},r)]})})},cy=function(e,n){return Object.entries(e).reduce(function(t,r){var i,o=ce(r,2),a=o[0],s=o[1];return null===s?t:ne(ne({},t),((i={})[a]=s,i))},{})},lV=function(e,n){return{AccessKeyId:null!=e.AccessKeyId?e.AccessKeyId:void 0,Expiration:null!=e.Expiration?new Date(Math.round(1e3*e.Expiration)):void 0,SecretKey:null!=e.SecretKey?e.SecretKey:void 0,SessionToken:null!=e.SessionToken?e.SessionToken:void 0}},hV=function(e,n){return{message:null!=e.message?e.message:void 0}},EV=function(e,n){return{message:null!=e.message?e.message:void 0}},SV=function(e,n){return{message:null!=e.message?e.message:void 0}},CV=function(e,n){return{message:null!=e.message?e.message:void 0}},TV=function(e,n){return{message:null!=e.message?e.message:void 0}},NV=function(e,n){return{message:null!=e.message?e.message:void 0}},BV=function(e,n){return{message:null!=e.message?e.message:void 0}},FV=function(e,n){return{message:null!=e.message?e.message:void 0}},HV=function(e,n){return{message:null!=e.message?e.message:void 0}},xt=function(e){var n;return{httpStatusCode:e.statusCode,requestId:null!==(n=e.headers["x-amzn-requestid"])&&void 0!==n?n:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},as=function(e,n,t,r,i){return kt(void 0,void 0,void 0,function(){var o,s,f;return It(this,function(_){switch(_.label){case 0:return[4,e.endpoint()];case 1:return o=_.sent(),f={protocol:void 0===(s=o.protocol)?"https":s,hostname:o.hostname,port:o.port,method:"POST",path:t,headers:n},void 0!==r&&(f.hostname=r),void 0!==i&&(f.body=i),[2,new ns(f)]}})})},Mi=function(e,n){return function(e,n){return function(e,n){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):n.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,n).then(function(t){return n.utf8Encoder(t)})}(e,n).then(function(t){return t.length?JSON.parse(t):{}})},ss=function(e,n){var r=function(o){var a=o;return a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},i=("x-amzn-errortype",Object.keys(e.headers).find(function(s){return s.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==i?r(e.headers[i]):void 0!==n.code?r(n.code):void 0!==n.__type?r(n.__type):""},rb=function(){return rb=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},rb.apply(this,arguments)};function VD(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}function qD(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}var QV={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},eq={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Nl(e,n,t){return{applyToStack:function(r){r.add(function(e,n){return function(t,r){return function(i){return VD(void 0,void 0,void 0,function(){var o,a;return qD(this,function(s){switch(s.label){case 0:return[4,t(i)];case 1:return o=s.sent().response,[4,n(o,e)];case 2:return a=s.sent(),[2,{response:o,output:a}]}})})}}}(e,t),QV),r.add(function(e,n){return function(t,r){return function(i){return VD(void 0,void 0,void 0,function(){var o;return qD(this,function(a){switch(a.label){case 0:return[4,n(i.input,e)];case 1:return o=a.sent(),[2,t(rb(rb({},i),{request:o}))]}})})}}}(e,n),eq)}}}var ud=function(){return ud=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},ud.apply(this,arguments)};function tq(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}function kS(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(tq(arguments[n]));return e}var ab=function(){var e=[],n=[],t=new Set,a=function(f){return e.forEach(function(_){f.add(_.middleware,ud({},_))}),n.forEach(function(_){f.addRelativeTo(_.middleware,ud({},_))}),f},s=function(f){var _=[];return f.before.forEach(function(m){0===m.before.length&&0===m.after.length?_.push(m):_.push.apply(_,kS(s(m)))}),_.push(f),f.after.reverse().forEach(function(m){0===m.before.length&&0===m.after.length?_.push(m):_.push.apply(_,kS(s(m)))}),_},l={add:function(f,_){void 0===_&&(_={});var m=_.name,E=_.override,D=ud({step:"initialize",priority:"normal",middleware:f},_);if(m){if(t.has(m)){if(!E)throw new Error("Duplicate middleware name '"+m+"'");var R=e.findIndex(function(xe){return xe.name===m}),ye=e[R];if(ye.step!==D.step||ye.priority!==D.priority)throw new Error('"'+m+'" middleware with '+ye.priority+" priority in "+ye.step+" step cannot be overridden by same-name middleware with "+D.priority+" priority in "+D.step+" step.");e.splice(R,1)}t.add(m)}e.push(D)},addRelativeTo:function(f,_){var m=_.name,E=_.override,D=ud({middleware:f},_);if(m){if(t.has(m)){if(!E)throw new Error("Duplicate middleware name '"+m+"'");var R=n.findIndex(function(xe){return xe.name===m}),ye=n[R];if(ye.toMiddleware!==D.toMiddleware||ye.relation!==D.relation)throw new Error('"'+m+'" middleware '+ye.relation+' "'+ye.toMiddleware+'" middleware cannot be overridden by same-name middleware '+D.relation+' "'+D.toMiddleware+'" middleware.');n.splice(R,1)}t.add(m)}n.push(D)},clone:function(){return a(ab())},use:function(f){f.applyToStack(l)},remove:function(f){return"string"==typeof f?function(f){var _=!1,m=function(E){return!E.name||E.name!==f||(_=!0,t.delete(f),!1)};return e=e.filter(m),n=n.filter(m),_}(f):function(f){var _=!1,m=function(E){return E.middleware!==f||(_=!0,E.name&&t.delete(E.name),!1)};return e=e.filter(m),n=n.filter(m),_}(f)},removeByTag:function(f){var _=!1,m=function(E){var D=E.tags,R=E.name;return!D||!D.includes(f)||(R&&t.delete(R),_=!0,!1)};return e=e.filter(m),n=n.filter(m),_},concat:function(f){var _=a(ab());return _.use(f),_},applyToStack:a,resolve:function(f,_){var m,E;try{for(var D=function MS(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(function(){var f=[],_=[],m={};e.forEach(function(D){var R=ud(ud({},D),{before:[],after:[]});R.name&&(m[R.name]=R),f.push(R)}),n.forEach(function(D){var R=ud(ud({},D),{before:[],after:[]});R.name&&(m[R.name]=R),_.push(R)}),_.forEach(function(D){if(D.toMiddleware){var R=m[D.toMiddleware];if(void 0===R)throw new Error(D.toMiddleware+" is not found when adding "+(D.name||"anonymous")+" middleware "+D.relation+" "+D.toMiddleware);"after"===D.relation&&R.after.push(D),"before"===D.relation&&R.before.push(D)}});var E=function(f){return f.sort(function(_,m){return $D[m.step]-$D[_.step]||KD[m.priority||"normal"]-KD[_.priority||"normal"]})}(f).map(s).reduce(function(D,R){return D.push.apply(D,kS(R)),D},[]);return E.map(function(D){return D.middleware})}().reverse()),R=D.next();!R.done;R=D.next())f=(0,R.value)(f,_)}catch(xe){m={error:xe}}finally{try{R&&!R.done&&(E=D.return)&&E.call(D)}finally{if(m)throw m.error}}return f}};return l},$D={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},KD={high:3,normal:2,low:1},XD=function(){function e(n){this.middlewareStack=ab(),this.config=n}return e.prototype.send=function(n,t,r){var o="function"==typeof t?t:r,a=n.resolveMiddleware(this.middlewareStack,this.config,"function"!=typeof t?t:void 0);if(!o)return a(n).then(function(s){return s.output});a(n).then(function(s){return o(null,s.output)},function(s){return o(s)}).catch(function(){})},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),Ll=function e(){this.middlewareStack=ab()};function Es(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(n){return"%"+n.charCodeAt(0).toString(16)})}var fy=function(e){return Array.isArray(e)?e:[e]},WD=function(e){var n="#text";for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t][n]?e[t]=e[t][n]:"object"==typeof e[t]&&null!==e[t]&&(e[t]=WD(e[t]));return e},NS=function(e,n){return(NS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(e,n)};function rq(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}function iq(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(rq(arguments[n]));return e}var ub=function(){var e=Object.getPrototypeOf(this).constructor,n=Function.bind.apply(String,iq([null],arguments)),t=new n;return Object.setPrototypeOf(t,e.prototype),t};ub.prototype=Object.create(String.prototype,{constructor:{value:ub,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(ub,String),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}(function nq(e,n){function t(){this.constructor=e}NS(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)})(n,e),n.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},n.prototype.toJSON=function(){return e.prototype.toString.call(this)},n.fromObject=function(t){return t instanceof n?t:new n(t instanceof String||"string"==typeof t?t:JSON.stringify(t))}}(ub);var oq=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],aq=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function yp(e){var n=e.getUTCFullYear(),t=e.getUTCMonth(),r=e.getUTCDay(),i=e.getUTCDate(),o=e.getUTCHours(),a=e.getUTCMinutes(),s=e.getUTCSeconds();return oq[r]+", "+(i<10?"0"+i:""+i)+" "+aq[t]+" "+n+" "+(o<10?"0"+o:""+o)+":"+(a<10?"0"+a:""+a)+":"+(s<10?"0"+s:""+s)+" GMT"}var us="***SensitiveInformation***",LS=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Zt(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(Nl(r,this.serialize,this.deserialize));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"CognitoIdentityClient",commandName:"GetCredentialsForIdentityCommand",inputFilterSensitiveLog:Z0.filterSensitiveLog,outputFilterSensitiveLog:Y0.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r;return It(this,function(i){return t={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetCredentialsForIdentity"},r=JSON.stringify(function(e,n){return ne(ne(ne({},null!=e.CustomRoleArn&&{CustomRoleArn:e.CustomRoleArn}),null!=e.IdentityId&&{IdentityId:e.IdentityId}),null!=e.Logins&&{Logins:cy(e.Logins,n)})}(e,n)),[2,as(n,t,"/",void 0,r)]})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i;return It(this,function(o){switch(o.label){case 0:return e.statusCode>=300?[2,cG(e,n)]:[4,Mi(e.body,n)];case 1:return t=o.sent(),r=function(e,n){return{Credentials:null!=e.Credentials?lV(e.Credentials):void 0,IdentityId:null!=e.IdentityId?e.IdentityId:void 0}}(t),i=ne({$metadata:xt(e)},r),[2,Promise.resolve(i)]}})})}(t,r)},n}(Ll),BS=function(e,n){return(BS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(e,n)},cb=function(e){function n(t,r){void 0===r&&(r=!0);var i=e.call(this,t)||this;return i.tryNextLink=r,i}return function sq(e,n){function t(){this.constructor=e}BS(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}(n,e),n}(Error);function eO(e){return Promise.all(Object.keys(e).reduce(function(n,t){var r=e[t];return n.push("string"==typeof r?[t,r]:r().then(function(i){return[t,i]})),n},[])).then(function(n){return n.reduce(function(t,r){var i=function kD(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}(r,2);return t[i[0]]=i[1],t},{})})}function hy(e){var n=this;return function(){return CS(n,void 0,void 0,function(){var t,r,i,o,a,s,d,f,_,m,E,D;return TS(this,function(R){switch(R.label){case 0:return _=(f=e.client).send,m=LS.bind,D={CustomRoleArn:e.customRoleArn,IdentityId:e.identityId},e.logins?[4,eO(e.logins)]:[3,2];case 1:return E=R.sent(),[3,3];case 2:E=void 0,R.label=3;case 3:return[4,_.apply(f,[new(m.apply(LS,[void 0,(D.Logins=E,D)]))])];case 4:return t=R.sent().Credentials,r=void 0===t?function cq(){throw new cb("Response from Amazon Cognito contained no credentials")}():t,o=void 0===(i=r.AccessKeyId)?function lq(){throw new cb("Response from Amazon Cognito contained no access key ID")}():i,a=r.Expiration,d=void 0===(s=r.SecretKey)?function dq(){throw new cb("Response from Amazon Cognito contained no secret key")}():s,[2,{identityId:e.identityId,accessKeyId:o,secretAccessKey:d,sessionToken:r.SessionToken,expiration:a}]}})})}}var py=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Zt(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(Nl(r,this.serialize,this.deserialize));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"CognitoIdentityClient",commandName:"GetIdCommand",inputFilterSensitiveLog:Q0.filterSensitiveLog,outputFilterSensitiveLog:eb.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r;return It(this,function(i){return t={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetId"},r=JSON.stringify(function(e,n){return ne(ne(ne({},null!=e.AccountId&&{AccountId:e.AccountId}),null!=e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId}),null!=e.Logins&&{Logins:cy(e.Logins,n)})}(e,n)),[2,as(n,t,"/",void 0,r)]})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i;return It(this,function(o){switch(o.label){case 0:return e.statusCode>=300?[2,fG(e,n)]:[4,Mi(e.body,n)];case 1:return t=o.sent(),r=function(e,n){return{IdentityId:null!=e.IdentityId?e.IdentityId:void 0}}(t),i=ne({$metadata:xt(e)},r),[2,Promise.resolve(i)]}})})}(t,r)},n}(Ll),FS="IdentityIds",fq=function(){function e(n){void 0===n&&(n="aws:cognito-identity-ids"),this.dbName=n}return e.prototype.getItem=function(n){return this.withObjectStore("readonly",function(t){var r=t.get(n);return new Promise(function(i){r.onerror=function(){return i(null)},r.onsuccess=function(){return i(r.result?r.result.value:null)}})}).catch(function(){return null})},e.prototype.removeItem=function(n){return this.withObjectStore("readwrite",function(t){var r=t.delete(n);return new Promise(function(i,o){r.onerror=function(){return o(r.error)},r.onsuccess=function(){return i()}})})},e.prototype.setItem=function(n,t){return this.withObjectStore("readwrite",function(r){var i=r.put({id:n,value:t});return new Promise(function(o,a){i.onerror=function(){return a(i.error)},i.onsuccess=function(){return o()}})})},e.prototype.getDb=function(){var n=self.indexedDB.open(this.dbName,1);return new Promise(function(t,r){n.onsuccess=function(){t(n.result)},n.onerror=function(){r(n.error)},n.onblocked=function(){r(new Error("Unable to access DB"))},n.onupgradeneeded=function(){var i=n.result;i.onerror=function(){r(new Error("Failed to create object store"))},i.createObjectStore(FS,{keyPath:"id"})}})},e.prototype.withObjectStore=function(n,t){return this.getDb().then(function(r){var i=r.transaction(FS,n);return i.oncomplete=function(){return r.close()},new Promise(function(o,a){i.onerror=function(){return a(i.error)},o(t(i.objectStore(FS)))}).catch(function(o){throw r.close(),o})})},e}(),hq=function(){function e(n){void 0===n&&(n={}),this.store=n}return e.prototype.getItem=function(n){return n in this.store?this.store[n]:null},e.prototype.removeItem=function(n){delete this.store[n]},e.prototype.setItem=function(n,t){this.store[n]=t},e}(),pq=new hq;var tO=O(9801);function rO(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}function iO(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}var _p=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,wq)},wq=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function VS(e){var n,t,r=[];try{for(var i=function GS(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var a=o.value,s=e[a];if(a=_p(a),Array.isArray(s))for(var d=0,l=s.length;d<l;d++)r.push(a+"="+_p(s[d]));else{var f=a;(s||"string"==typeof s)&&(f+="="+_p(s)),r.push(f)}}}catch(_){n={error:_}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(n)throw n.error}}return r.join("&")}function xq(e){return void 0===e&&(e=0),new Promise(function(n,t){e&&setTimeout(function(){var r=new Error("Request did not complete within "+e+" ms");r.name="TimeoutError",t(r)},e)})}for(var aO=function(){function e(n){this.requestTimeout=(void 0===n?{}:n).requestTimeout}return e.prototype.destroy=function(){},e.prototype.handle=function(n,t){var i=(void 0===t?{}:t).abortSignal,o=this.requestTimeout;if(i?.aborted){var a=new Error("Request aborted");return a.name="AbortError",Promise.reject(a)}var s=n.path;if(n.query){var d=VS(n.query);d&&(s+="?"+d)}var l=n.port,f=n.method,_=n.protocol+"//"+n.hostname+(l?":"+l:"")+s,E={body:"GET"===f||"HEAD"===f?void 0:n.body,headers:new Headers(n.headers),method:f};typeof AbortController<"u"&&(E.signal=i);var D=new Request(_,E),R=[fetch(D).then(function(ye){var xe,et,We=ye.headers,vt={};try{for(var Mt=function jS(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(We.entries()),en=Mt.next();!en.done;en=Mt.next()){var nr=en.value;vt[nr[0]]=nr[1]}}catch(Zr){xe={error:Zr}}finally{try{en&&!en.done&&(et=Mt.return)&&et.call(Mt)}finally{if(xe)throw xe.error}}return void 0!==ye.body?{response:new ly({headers:vt,statusCode:ye.status,body:ye.body})}:ye.blob().then(function(Zr){return{response:new ly({headers:vt,statusCode:ye.status,body:Zr})}})}),xq(o)];return i&&R.push(new Promise(function(ye,xe){i.onabort=function(){var et=new Error("Request aborted");et.name="AbortError",xe(et)}})),Promise.race(R)},e}(),bp={},sg=new Array(64),uu=0,my="A".charCodeAt(0),qS="Z".charCodeAt(0);uu+my<=qS;uu++){var uh=String.fromCharCode(uu+my);bp[uh]=uu,sg[uu]=uh}for(uu=0,my="a".charCodeAt(0),qS="z".charCodeAt(0);uu+my<=qS;uu++)uh=String.fromCharCode(uu+my),bp[uh]=gy=uu+26,sg[gy]=uh;for(uu=0;uu<10;uu++){var gy;bp[uu.toString(10)]=uu+52,uh=uu.toString(10),bp[uh]=gy=uu+52,sg[gy]=uh}function HS(e){var n=e.length/4*3;"=="===e.substr(-2)?n-=2:"="===e.substr(-1)&&n--;for(var t=new ArrayBuffer(n),r=new DataView(t),i=0;i<e.length;i+=4){for(var o=0,a=0,s=i,d=i+3;s<=d;s++)"="!==e[s]?(o|=bp[e[s]]<<6*(d-s),a+=6):o>>=6;var l=i/4*3;o>>=a%8;for(var f=Math.floor(a/8),_=0;_<f;_++){var m=8*(f-_-1);r.setUint8(l+_,(o&255<<m)>>m)}}return new Uint8Array(t)}function sO(e){for(var n="",t=0;t<e.length;t+=3){for(var r=0,i=0,o=t,a=Math.min(t+3,e.length);o<a;o++)r|=e[o]<<8*(a-o-1),i+=8;var s=Math.ceil(i/6);r<<=6*s-i;for(var d=1;d<=s;d++){var l=6*(s-d);n+=sg[(r&63<<l)>>l]}n+="==".slice(0,4-s)}return n}bp["+"]=62,sg[62]="+",bp["/"]=63,sg[63]="/";var uO=function(e){return"function"==typeof Blob&&e instanceof Blob?function Sq(e){return rO(this,void 0,void 0,function(){var n,t;return iO(this,function(r){switch(r.label){case 0:return[4,Tq(e)];case 1:return n=r.sent(),t=HS(n),[2,new Uint8Array(t)]}})})}(e):function Cq(e){return rO(this,void 0,void 0,function(){var n,t,r,i,o,a,s;return iO(this,function(d){switch(d.label){case 0:n=new Uint8Array(0),t=e.getReader(),r=!1,d.label=1;case 1:return r?[3,3]:[4,t.read()];case 2:return i=d.sent(),o=i.done,(a=i.value)&&(s=n,(n=new Uint8Array(s.length+a.length)).set(s),n.set(a,s.length)),r=o,[3,1];case 3:return[2,n]}})})}(e)};function Tq(e){return new Promise(function(n,t){var r=new FileReader;r.onloadend=function(){var i;if(2!==r.readyState)return t(new Error("Reader aborted too early"));var o=null!==(i=r.result)&&void 0!==i?i:"",a=o.indexOf(",");n(o.substring(a>-1?a+1:o.length))},r.onabort=function(){return t(new Error("Read aborted"))},r.onerror=function(){return t(r.error)},r.readAsDataURL(e)})}var lO=function(e){return function(){return Promise.reject(e)}},hb=function(){return hb=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},hb.apply(this,arguments)};function KS(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}function pb(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}function Iq(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}var Rq={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},dO=function(e){return{applyToStack:function(n){n.add(function(e){return function(n,t){return function(r){return KS(void 0,void 0,void 0,function(){var i;return pb(this,function(o){return!(null===(i=e?.retryStrategy)||void 0===i)&&i.mode&&(t.userAgent=function Pq(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(Iq(arguments[n]));return e}(t.userAgent||[],[["cfg/retry-mode",e.retryStrategy.mode]])),[2,e.retryStrategy.retry(n,r)]})})}}}(e),Rq)}}},Mq=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],kq=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Nq=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],Lq=[500,502,503,504],fO=function(e){var n,t;return 429===(null===(n=e.$metadata)||void 0===n?void 0:n.httpStatusCode)||kq.includes(e.name)||1==(null===(t=e.$retryable)||void 0===t?void 0:t.throttling)},jq=O(9444),Zq=function(e,n){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,n)*e))},Yq=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return Mq.includes(e.name)}(e)||fO(e)||function(e){var n;return Nq.includes(e.name)||Lq.includes((null===(n=e.$metadata)||void 0===n?void 0:n.httpStatusCode)||0)}(e))},Qq=function(){function e(n,t){var r,i,o;this.maxAttemptsProvider=n,this.mode="standard",this.retryDecider=null!==(r=t?.retryDecider)&&void 0!==r?r:Yq,this.delayDecider=null!==(i=t?.delayDecider)&&void 0!==i?i:Zq,this.retryQuota=null!==(o=t?.retryQuota)&&void 0!==o?o:function(e){var t=500,r=function(s){return"TimeoutError"===s.name?10:5},i=function(s){return r(s)<=t};return Object.freeze({hasRetryTokens:i,retrieveRetryTokens:function(s){if(!i(s))throw new Error("No retry token available");var d=r(s);return t-=d,d},releaseRetryTokens:function(s){t+=s??1,t=Math.min(t,500)}})}()}return e.prototype.shouldRetry=function(n,t,r){return t<r&&this.retryDecider(n)&&this.retryQuota.hasRetryTokens(n)},e.prototype.getMaxAttempts=function(){return KS(this,void 0,void 0,function(){var n;return pb(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return n=r.sent(),[3,3];case 2:return r.sent(),n=3,[3,3];case 3:return[2,n]}})})},e.prototype.retry=function(n,t){return KS(this,void 0,void 0,function(){var r,i,o,a,s,d,l,f;return pb(this,function(_){switch(_.label){case 0:return i=0,o=0,[4,this.getMaxAttempts()];case 1:a=_.sent(),ns.isInstance(s=t.request)&&(s.headers["amz-sdk-invocation-id"]=(0,jq.v4)()),d=function(){var m,E,D,R,ye;return pb(this,function(xe){switch(xe.label){case 0:return xe.trys.push([0,2,,5]),ns.isInstance(s)&&(s.headers["amz-sdk-request"]="attempt="+(i+1)+"; max="+a),[4,n(t)];case 1:return m=xe.sent(),E=m.response,D=m.output,l.retryQuota.releaseRetryTokens(r),D.$metadata.attempts=i+1,D.$metadata.totalRetryDelay=o,[2,{value:{response:E,output:D}}];case 2:return R=xe.sent(),i++,l.shouldRetry(R,i,a)?(r=l.retryQuota.retrieveRetryTokens(R),ye=l.delayDecider(fO(R)?500:100,i),o+=ye,[4,new Promise(function(et){return setTimeout(et,ye)})]):[3,4];case 3:return xe.sent(),[2,"continue"];case 4:throw R.$metadata||(R.$metadata={}),R.$metadata.attempts=i,R.$metadata.totalRetryDelay=o,R;case 5:return[2]}})},l=this,_.label=2;case 2:return[5,d()];case 3:return"object"==typeof(f=_.sent())?[2,f.value]:[3,2];case 4:return[2]}})})},e}(),gO=function(e){var n=eH(e.maxAttempts);return hb(hb({},e),{maxAttempts:n,retryStrategy:e.retryStrategy||new Qq(n)})},eH=function(e){if(void 0===e&&(e=3),"number"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e};function vO(e){if("string"==typeof e){for(var n=e.length,t=n-1;t>=0;t--){var r=e.charCodeAt(t);r>127&&r<=2047?n++:r>2047&&r<=65535&&(n+=2)}return n}return"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:void 0}var aH=O(7230),WS=O.n(aH),bO=function(e){var n=e.serviceId,t=e.clientVersion;return function(){return function rH(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}(void 0,void 0,void 0,function(){var r,i,o,a,s,d,l,f,_;return function iH(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(m){return r=null!==(o=window?.navigator)&&void 0!==o&&o.userAgent?WS().parse(window.navigator.userAgent):void 0,i=[["aws-sdk-js",t],["os/"+((null===(a=r?.os)||void 0===a?void 0:a.name)||"other"),null===(s=r?.os)||void 0===s?void 0:s.version],["lang/js"],["md/browser",(null!==(l=null===(d=r?.browser)||void 0===d?void 0:d.name)&&void 0!==l?l:"unknown")+"_"+(null!==(_=null===(f=r?.browser)||void 0===f?void 0:f.version)&&void 0!==_?_:"unknown")]],n&&i.push(["api/"+n,t]),[2,i]})})}},_y=O(2622),wO="cognito-identity.{region}.amazonaws.com",dH=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),fH=new Set(["cn-north-1","cn-northwest-1"]),hH=new Set(["us-iso-east-1"]),pH=new Set(["us-isob-east-1"]),mH=new Set(["us-gov-east-1","us-gov-west-1"]);function EO(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}var SO=function(e){var s,n=new URL(e),t=n.hostname,r=n.pathname,i=n.port,o=n.protocol,a=n.search;return a&&(s=function vH(e){var n,t,r={};if(e=e.replace(/^\?/,""))try{for(var i=function ZS(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e.split("&")),o=i.next();!o.done;o=i.next()){var s=EO(o.value.split("="),2),d=s[0],l=s[1],f=void 0===l?null:l;d=decodeURIComponent(d),f&&(f=decodeURIComponent(f)),d in r?Array.isArray(r[d])?r[d].push(f):r[d]=[r[d],f]:r[d]=f}}catch(_){n={error:_}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(n)throw n.error}}return r}(a)),{hostname:t,port:i?parseInt(i):void 0,protocol:o,path:r,query:s}},CO={apiVersion:"2014-06-30",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,n){var t=void 0;switch(e){case"ap-northeast-1":t={hostname:"cognito-identity.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":t={hostname:"cognito-identity.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":t={hostname:"cognito-identity.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":t={hostname:"cognito-identity.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":t={hostname:"cognito-identity.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":t={hostname:"cognito-identity.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":t={hostname:"cognito-identity.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":t={hostname:"cognito-identity.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":t={hostname:"cognito-identity.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":t={hostname:"cognito-identity.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":t={hostname:"cognito-identity.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":t={hostname:"cognito-identity.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-east-1":t={hostname:"cognito-identity-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-east-2":t={hostname:"cognito-identity-fips.us-east-2.amazonaws.com",partition:"aws",signingRegion:"us-east-2"};break;case"fips-us-gov-west-1":t={hostname:"cognito-identity-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"fips-us-west-2":t={hostname:"cognito-identity-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"sa-east-1":t={hostname:"cognito-identity.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":t={hostname:"cognito-identity.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":t={hostname:"cognito-identity.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-west-1":t={hostname:"cognito-identity.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-west-1":t={hostname:"cognito-identity.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":t={hostname:"cognito-identity.us-west-2.amazonaws.com",partition:"aws"};break;default:dH.has(e)&&(t={hostname:wO.replace("{region}",e),partition:"aws"}),fH.has(e)&&(t={hostname:"cognito-identity.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),hH.has(e)&&(t={hostname:"cognito-identity.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),pH.has(e)&&(t={hostname:"cognito-identity.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),mH.has(e)&&(t={hostname:"cognito-identity.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===t&&(t={hostname:wO.replace("{region}",e),partition:"aws"})}return Promise.resolve(ne({signingService:"cognito-identity"},t))},serviceId:"Cognito Identity",urlParser:SO},yH=ne(ne({},CO),{runtime:"browser",base64Decoder:HS,base64Encoder:sO,bodyLengthChecker:vO,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:bO({serviceId:CO.serviceId,clientVersion:"3.6.1"}),maxAttempts:3,region:lO("Region is missing"),requestHandler:new aO,sha256:tO.Sha256,streamCollector:uO,utf8Decoder:_y.fromUtf8,utf8Encoder:_y.toUtf8}),lg=function(){return lg=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},lg.apply(this,arguments)};var IO=function(e){var n;return lg(lg({},e),{tls:null===(n=e.tls)||void 0===n||n,endpoint:e.endpoint?xH(e):function(){return EH(e)},isCustomEndpoint:!!e.endpoint})},xH=function(e){var n=e.endpoint;if("string"==typeof n){var r=Promise.resolve((0,e.urlParser)(n));return function(){return r}}if("object"==typeof n){var i=Promise.resolve(n);return function(){return i}}return n},EH=function(e){return function _H(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}(void 0,void 0,void 0,function(){var n,t,r,o,a;return function bH(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(s){switch(s.label){case 0:return t=void 0===(n=e.tls)||n,[4,e.region()];case 1:if(r=s.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");return[4,e.regionInfoProvider(r)];case 2:if(!(o=(null!==(a=s.sent())&&void 0!==a?a:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((t?"https:":"http:")+"//"+o)]}})})},PO=function(e){if(!e.region)throw new Error("Region is missing");return lg(lg({},e),{region:TH(e.region)})},TH=function(e){if("string"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e},cg=function(){return cg=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},cg.apply(this,arguments)};var RO="content-length",DH={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},DO=function(e){return{applyToStack:function(n){n.add(function RH(e){var n=this;return function(t){return function(r){return function IH(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}(n,void 0,void 0,function(){var i,o,a,s,d;return function PH(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(l){return ns.isInstance(i=r.request)&&(a=i.headers,(o=i.body)&&-1===Object.keys(a).map(function(f){return f.toLowerCase()}).indexOf(RO)&&void 0!==(s=e(o))&&(i.headers=cg(cg({},i.headers),((d={})[RO]=String(s),d)))),[2,t(cg(cg({},r),{request:i}))]})})}}}(e.bodyLengthChecker),DH)}}};var LH={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},kO=function(e){return{applyToStack:function(n){n.add(function(e){return function(n){return function(t){return function OH(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}(void 0,void 0,void 0,function(){var r,i;return function MH(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(a){return ns.isInstance(t.request)?(r=t.request,(void 0===(i=(e.requestHandler.metadata||{}).handlerProtocol)?"":i).indexOf("h2")>=0&&!r.headers[":authority"]?(delete r.headers.host,r.headers[":authority"]=""):r.headers.host||(r.headers.host=r.hostname),[2,n(t)]):[2,n(t)]})})}}}(e),LH)}}};var UH=function(){return function(e,n){return function(t){return function FH(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}(void 0,void 0,void 0,function(){var r,i,o,a,s,d,l,f,_;return function zH(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(m){switch(m.label){case 0:return r=n.clientName,i=n.commandName,o=n.inputFilterSensitiveLog,a=n.logger,s=n.outputFilterSensitiveLog,[4,e(t)];case 1:return d=m.sent(),a?("function"==typeof a.info&&(f=(l=d.output).$metadata,_=function BH(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}(l,["$metadata"]),a.info({clientName:r,commandName:i,input:o(t.input),output:s(_),metadata:f})),[2,d]):[2,d]}})})}}},GH={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},BO=function(e){return{applyToStack:function(n){n.add(UH(),GH)}}},dg=function(){return dg=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},dg.apply(this,arguments)};function FO(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}function zO(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}var Zd=function(){return Zd=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},Zd.apply(this,arguments)};function Yd(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}function Qd(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}function ef(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function qH(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}for(var GO={},iC={},by=0;by<256;by++){var wy=by.toString(16).toLowerCase();1===wy.length&&(wy="0"+wy),GO[by]=wy,iC[wy]=by}function ll(e){for(var n="",t=0;t<e.byteLength;t++)n+=GO[e[t]];return n}var VO="X-Amz-Date",qO="X-Amz-Signature",HO="X-Amz-Security-Token",$O="authorization",KO=VO.toLowerCase(),YH=[$O,KO,"date"],QH=qO.toLowerCase(),oC="x-amz-content-sha256",e7=HO.toLowerCase(),t7={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},n7=/^proxy-/,r7=/^sec-/,aC="AWS4-HMAC-SHA256",i7="AWS4-HMAC-SHA256-PAYLOAD",XO="aws4_request",fg={},Sb=[];function sC(e,n,t){return e+"/"+n+"/"+t+"/"+XO}function WO(e,n,t){var r=new e(n);return r.update(t),r.digest()}function JO(e,n,t){var r,i,o=e.headers,a={};try{for(var s=ef(Object.keys(o).sort()),d=s.next();!d.done;d=s.next()){var l=d.value,f=l.toLowerCase();(f in t7||n?.has(f)||n7.test(f)||r7.test(f))&&(!t||t&&!t.has(f))||(a[f]=o[l].trim().replace(/\s+/g," "))}}catch(_){r={error:_}}finally{try{d&&!d.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a}function uC(e,n){var t=e.headers,r=e.body;return Yd(this,void 0,void 0,function(){var i,o,a,s,d,l,f;return Qd(this,function(_){switch(_.label){case 0:try{for(i=ef(Object.keys(t)),o=i.next();!o.done;o=i.next())if((a=o.value).toLowerCase()===oC)return[2,t[a]]}catch(m){l={error:m}}finally{try{o&&!o.done&&(f=i.return)&&f.call(i)}finally{if(l)throw l.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||function(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)}(r)?((s=new n).update(r),d=ll,[4,s.digest()]):[3,3];case 2:return[2,d.apply(void 0,[_.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}})})}function ZO(e){var n=e.headers,t=e.query,r=function VH(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}(e,["headers","query"]);return Zd(Zd({},r),{headers:Zd({},n),query:t?f7(t):void 0})}function f7(e){return Object.keys(e).reduce(function(n,t){var r,i=e[t];return Zd(Zd({},n),((r={})[t]=Array.isArray(i)?function HH(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(qH(arguments[n]));return e}(i):i,r))},{})}function YO(e){var n,t;e="function"==typeof e.clone?e.clone():ZO(e);try{for(var r=ef(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;YH.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(a){n={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(n)throw n.error}}return e}var QO=function(){function e(n){var t=n.applyChecksum,r=n.credentials,i=n.region,a=n.sha256,s=n.uriEscapePath,d=void 0===s||s;this.service=n.service,this.sha256=a,this.uriEscapePath=d,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=g7(i),this.credentialProvider=v7(r)}return e.prototype.presign=function(n,t){return void 0===t&&(t={}),Yd(this,void 0,void 0,function(){var r,i,o,a,s,d,l,f,_,m,E,D,R,ye,xe,et,We,vt,Mt,en,nr,Qn,Zr,Ci;return Qd(this,function(cr){switch(cr.label){case 0:return i=void 0===(r=t.signingDate)?new Date:r,a=void 0===(o=t.expiresIn)?3600:o,s=t.unsignableHeaders,d=t.unhoistableHeaders,l=t.signableHeaders,f=t.signingRegion,_=t.signingService,[4,this.credentialProvider()];case 1:return m=cr.sent(),null==f?[3,2]:(D=f,[3,4]);case 2:return[4,this.regionProvider()];case 3:D=cr.sent(),cr.label=4;case 4:return E=D,R=Cb(i),ye=R.longDate,xe=R.shortDate,a>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(et=sC(xe,E,_??this.service),We=function h7(e,n){var t,r,i;void 0===n&&(n={});var o="function"==typeof e.clone?e.clone():ZO(e),a=o.headers,s=o.query,d=void 0===s?{}:s;try{for(var l=ef(Object.keys(a)),f=l.next();!f.done;f=l.next()){var _=f.value,m=_.toLowerCase();"x-amz-"===m.substr(0,6)&&(null===(i=n.unhoistableHeaders)||void 0===i||!i.has(m))&&(d[_]=a[_],delete a[_])}}catch(E){t={error:E}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return Zd(Zd({},e),{headers:a,query:d})}(YO(n),{unhoistableHeaders:d}),m.sessionToken&&(We.query[HO]=m.sessionToken),We.query["X-Amz-Algorithm"]=aC,We.query["X-Amz-Credential"]=m.accessKeyId+"/"+et,We.query[VO]=ye,We.query["X-Amz-Expires"]=a.toString(10),vt=JO(We,s,l),We.query["X-Amz-SignedHeaders"]=eM(vt),Mt=We.query,en=qO,nr=this.getSignature,Qn=[ye,et,this.getSigningKey(m,E,xe,_)],Zr=this.createCanonicalRequest,Ci=[We,vt],[4,uC(n,this.sha256)]);case 5:return[4,nr.apply(this,Qn.concat([Zr.apply(this,Ci.concat([cr.sent()]))]))];case 6:return Mt[en]=cr.sent(),[2,We]}})})},e.prototype.sign=function(n,t){return Yd(this,void 0,void 0,function(){return Qd(this,function(r){return"string"==typeof n?[2,this.signString(n,t)]:n.headers&&n.payload?[2,this.signEvent(n,t)]:[2,this.signRequest(n,t)]})})},e.prototype.signEvent=function(n,t){var r=n.headers,i=n.payload,o=t.signingDate,a=void 0===o?new Date:o,s=t.priorSignature,d=t.signingRegion,l=t.signingService;return Yd(this,void 0,void 0,function(){var f,_,m,D,R,ye,xe,et,We,vt;return Qd(this,function(Mt){switch(Mt.label){case 0:return null==d?[3,1]:(_=d,[3,3]);case 1:return[4,this.regionProvider()];case 2:_=Mt.sent(),Mt.label=3;case 3:return f=_,m=Cb(a),D=m.longDate,R=sC(m.shortDate,f,l??this.service),[4,uC({headers:{},body:i},this.sha256)];case 4:return ye=Mt.sent(),(xe=new this.sha256).update(r),We=ll,[4,xe.digest()];case 5:return et=We.apply(void 0,[Mt.sent()]),vt=[i7,D,R,s,et,ye].join("\n"),[2,this.signString(vt,{signingDate:a,signingRegion:f,signingService:l})]}})})},e.prototype.signString=function(n,t){var r=void 0===t?{}:t,i=r.signingDate,o=void 0===i?new Date:i,a=r.signingRegion,s=r.signingService;return Yd(this,void 0,void 0,function(){var d,l,f,_,m,E,D,R;return Qd(this,function(ye){switch(ye.label){case 0:return[4,this.credentialProvider()];case 1:return d=ye.sent(),null==a?[3,2]:(f=a,[3,4]);case 2:return[4,this.regionProvider()];case 3:f=ye.sent(),ye.label=4;case 4:return l=f,_=Cb(o).shortDate,D=(E=this.sha256).bind,[4,this.getSigningKey(d,l,_,s)];case 5:return(m=new(D.apply(E,[void 0,ye.sent()]))).update(n),R=ll,[4,m.digest()];case 6:return[2,R.apply(void 0,[ye.sent()])]}})})},e.prototype.signRequest=function(n,t){var r=void 0===t?{}:t,i=r.signingDate,o=void 0===i?new Date:i,a=r.signableHeaders,s=r.unsignableHeaders,d=r.signingRegion,l=r.signingService;return Yd(this,void 0,void 0,function(){var f,_,m,E,D,R,ye,xe,et,We,vt;return Qd(this,function(Mt){switch(Mt.label){case 0:return[4,this.credentialProvider()];case 1:return f=Mt.sent(),null==d?[3,2]:(m=d,[3,4]);case 2:return[4,this.regionProvider()];case 3:m=Mt.sent(),Mt.label=4;case 4:return _=m,E=YO(n),D=Cb(o),R=D.longDate,xe=sC(ye=D.shortDate,_,l??this.service),E.headers[KO]=R,f.sessionToken&&(E.headers[e7]=f.sessionToken),[4,uC(E,this.sha256)];case 5:return et=Mt.sent(),!function d7(e,n){var t,r;e=e.toLowerCase();try{for(var i=ef(Object.keys(n)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(s){t={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return!1}(oC,E.headers)&&this.applyChecksum&&(E.headers[oC]=et),We=JO(E,s,a),[4,this.getSignature(R,xe,this.getSigningKey(f,_,ye,l),this.createCanonicalRequest(E,We,et))];case 6:return vt=Mt.sent(),E.headers[$O]=aC+" Credential="+f.accessKeyId+"/"+xe+", SignedHeaders="+eM(We)+", Signature="+vt,[2,E]}})})},e.prototype.createCanonicalRequest=function(n,t,r){var i=Object.keys(t).sort();return n.method+"\n"+this.getCanonicalPath(n)+"\n"+function l7(e){var n,t,r=e.query,i=void 0===r?{}:r,o=[],a={},s=function(_){if(_.toLowerCase()===QH)return"continue";o.push(_);var m=i[_];"string"==typeof m?a[_]=_p(_)+"="+_p(m):Array.isArray(m)&&(a[_]=m.slice(0).sort().reduce(function(E,D){return E.concat([_p(_)+"="+_p(D)])},[]).join("&"))};try{for(var d=ef(Object.keys(i).sort()),l=d.next();!l.done;l=d.next())s(l.value)}catch(_){n={error:_}}finally{try{l&&!l.done&&(t=d.return)&&t.call(d)}finally{if(n)throw n.error}}return o.map(function(_){return a[_]}).filter(function(_){return _}).join("&")}(n)+"\n"+i.map(function(o){return o+":"+t[o]}).join("\n")+"\n\n"+i.join(";")+"\n"+r},e.prototype.createStringToSign=function(n,t,r){return Yd(this,void 0,void 0,function(){var i,o;return Qd(this,function(a){switch(a.label){case 0:return(i=new this.sha256).update(r),[4,i.digest()];case 1:return o=a.sent(),[2,aC+"\n"+n+"\n"+t+"\n"+ll(o)]}})})},e.prototype.getCanonicalPath=function(n){var t=n.path;return this.uriEscapePath?"/"+encodeURIComponent(t.replace(/^\//,"")).replace(/%2F/g,"/"):t},e.prototype.getSignature=function(n,t,r,i){return Yd(this,void 0,void 0,function(){var o,a,s,d,l;return Qd(this,function(f){switch(f.label){case 0:return[4,this.createStringToSign(n,t,i)];case 1:return o=f.sent(),d=(s=this.sha256).bind,[4,r];case 2:return(a=new(d.apply(s,[void 0,f.sent()]))).update(o),l=ll,[4,a.digest()];case 3:return[2,l.apply(void 0,[f.sent()])]}})})},e.prototype.getSigningKey=function(n,t,r,i){return function(e,n,t,r,i){return Yd(void 0,void 0,void 0,function(){var o,a,s,d,l,_,m,E;return Qd(this,function(D){switch(D.label){case 0:return[4,WO(e,n.secretAccessKey,n.accessKeyId)];case 1:if(o=D.sent(),(a=t+":"+r+":"+i+":"+ll(o)+":"+n.sessionToken)in fg)return[2,fg[a]];for(Sb.push(a);Sb.length>50;)delete fg[Sb.shift()];s="AWS4"+n.secretAccessKey,D.label=2;case 2:D.trys.push([2,7,8,9]),d=ef([t,r,i,XO]),l=d.next(),D.label=3;case 3:return l.done?[3,6]:[4,WO(e,s,l.value)];case 4:s=D.sent(),D.label=5;case 5:return l=d.next(),[3,3];case 6:return[3,9];case 7:return _=D.sent(),m={error:_},[3,9];case 8:try{l&&!l.done&&(E=d.return)&&E.call(d)}finally{if(m)throw m.error}return[7];case 9:return[2,fg[a]=s]}})})}(this.sha256,n,r,t,i||this.service)},e}(),Cb=function(e){var n=function p7(e){return function m7(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}(e).replace(/[\-:]/g,"");return{longDate:n,shortDate:n.substr(0,8)}},eM=function(e){return Object.keys(e).sort().join(";")},g7=function(e){if("string"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e},v7=function(e){if("object"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e};function tM(e){var l,n=this,r=lC(e.credentials||e.credentialDefaultProvider(e)),i=e.signingEscapePath,o=void 0===i||i,a=e.systemClockOffset,s=void 0===a?e.systemClockOffset||0:a,d=e.sha256;return l=e.signer?lC(e.signer):function(){return lC(e.region)().then(function(f){return FO(n,void 0,void 0,function(){return zO(this,function(_){switch(_.label){case 0:return[4,e.regionInfoProvider(f)];case 1:return[2,[_.sent()||{},f]]}})})}).then(function(f){var _=function UO(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}(f,2),m=_[0],R=m.signingService;return e.signingRegion=e.signingRegion||m.signingRegion||_[1],e.signingName=e.signingName||R||e.serviceId,new QO({credentials:r,region:e.signingRegion,service:e.signingName,sha256:d,uriEscapePath:o})})},dg(dg({},e),{systemClockOffset:s,signingEscapePath:o,credentials:r,signer:l})}function lC(e){if("object"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e}function b7(e){return function(n,t){return function(r){return FO(this,void 0,void 0,function(){var i,o,a,s,d,l,f,_,m;return zO(this,function(E){switch(E.label){case 0:return ns.isInstance(r.request)?"function"!=typeof e.signer?[3,2]:[4,e.signer()]:[2,n(r)];case 1:return o=E.sent(),[3,3];case 2:o=e.signer,E.label=3;case 3:return i=o,s=n,d=[dg({},r)],m={},[4,i.sign(r.request,{signingDate:new Date(Date.now()+e.systemClockOffset),signingRegion:t.signing_region,signingService:t.signing_service})];case 4:return[4,s.apply(void 0,[dg.apply(void 0,d.concat([(m.request=E.sent(),m)]))])];case 5:return a=E.sent(),(f=(l=a.response.headers)&&(l.date||l.Date))&&function(e,n){return Math.abs(function(e){return new Date(Date.now()+e)}(n).getTime()-e)>=3e5}(_=Date.parse(f),e.systemClockOffset)&&(e.systemClockOffset=_-Date.now()),[2,a]}})})}}}var w7={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},hg=function(){return hg=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},hg.apply(this,arguments)};function rM(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}function iM(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(rM(arguments[n]));return e}function oM(e){return hg(hg({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}var dC="user-agent",T7=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,fC=function(e){var n=rM(e,2),t=n[0],r=n[1],i=t.indexOf("/"),o=t.substring(0,i),a=t.substring(i+1);return"api"===o&&(a=a.toLowerCase()),[o,a,r].filter(function(s){return s&&s.length>0}).map(function(s){return s?.replace(T7,"_")}).join("/")},P7={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},sM=function(e){return{applyToStack:function(n){n.add(function(e){return function(n,t){return function(r){return function E7(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}(void 0,void 0,void 0,function(){var i,o,a,s,d,l,f,_;return function S7(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(m){switch(m.label){case 0:return ns.isInstance(i=r.request)?(o=i.headers,a=(null===(f=t?.userAgent)||void 0===f?void 0:f.map(fC))||[],[4,e.defaultUserAgentProvider()]):[2,n(r)];case 1:return s=m.sent().map(fC),d=(null===(_=e?.customUserAgent)||void 0===_?void 0:_.map(fC))||[],o["x-amz-user-agent"]=iM(s,a,d).join(" "),l=iM(s.filter(function(E){return E.startsWith("aws-sdk-")}),d).join(" "),"browser"!==e.runtime&&l&&(o[dC]=o[dC]?o[dC]+" "+l:l),[2,n(hg(hg({},r),{request:i}))]}})})}}}(e),P7)}}},hC=function(e){function n(t){var r=this,i=ne(ne({},yH),t),o=PO(i),s=tM(IO(o)),f=oM(gO(s));return(r=e.call(this,f)||this).config=f,r.middlewareStack.use(dO(r.config)),r.middlewareStack.use(DO(r.config)),r.middlewareStack.use(kO(r.config)),r.middlewareStack.use(BO()),r.middlewareStack.use(sM(r.config)),r}return Zt(n,e),n.prototype.destroy=function(){e.prototype.destroy.call(this)},n}(XD),Ib=function(){return Ib=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Ib.apply(this,arguments)},cl=function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})},dl=function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},ki=new _a("Credentials"),D7=function(){function e(n){this._gettingCredPromise=null,this._refreshHandlers={},this.Auth=void 0,this.configure(n),this._refreshHandlers.google=J8.refreshGoogleToken,this._refreshHandlers.facebook=Z8.refreshFacebookToken}return e.prototype.getModuleName=function(){return"Credentials"},e.prototype.getCredSource=function(){return this._credentials_source},e.prototype.configure=function(n){if(!n)return this._config||{};this._config=Object.assign({},this._config,n);var t=this._config.refreshHandlers;return t&&(this._refreshHandlers=Ib(Ib({},this._refreshHandlers),t)),this._storage=this._config.storage,this._storage||(this._storage=(new X0).getStorage()),this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),this._config},e.prototype.get=function(){return ki.debug("getting credentials"),this._pickupCredentials()},e.prototype._getCognitoIdentityIdStorageKey=function(n){return"CognitoIdentityId-"+n},e.prototype._pickupCredentials=function(){return ki.debug("picking up credentials"),this._gettingCredPromise&&this._gettingCredPromise.isPending()?ki.debug("getting old cred promise"):(ki.debug("getting new cred promise"),this._gettingCredPromise=SD(this._keepAlive())),this._gettingCredPromise},e.prototype._keepAlive=function(){return cl(this,void 0,void 0,function(){var n,t,r,i,o,a,d;return dl(this,function(l){switch(l.label){case 0:if(ki.debug("checking if credentials exists and not expired"),(n=this._credentials)&&!this._isExpired(n)&&!this._isPastTTL())return ki.debug("credentials not changed and not expired, directly return"),[2,Promise.resolve(n)];if(ki.debug("need to get a new credential or refresh the existing one"),!(r=void 0===(t=this.Auth)?Gu.Auth:t)||"function"!=typeof r.currentUserCredentials)return[2,Promise.reject("No Auth module registered in Amplify")];if(this._isExpired(n)||!this._isPastTTL())return[3,6];ki.debug("ttl has passed but token is not yet expired"),l.label=1;case 1:return l.trys.push([1,5,,6]),[4,r.currentUserPoolUser()];case 2:return i=l.sent(),[4,r.currentSession()];case 3:return o=l.sent(),a=o.refreshToken,[4,new Promise(function(f,_){i.refreshSession(a,function(m,E){return m?_(m):f(E)})})];case 4:return l.sent(),[3,6];case 5:return d=l.sent(),ki.debug("Error attempting to refreshing the session",d),[3,6];case 6:return[2,r.currentUserCredentials()]}})})},e.prototype.refreshFederatedToken=function(n){ki.debug("Getting federated credentials");var t=n.provider,r=n.user,i=n.token,o=n.identity_id,a=n.expires_at;a=1970===new Date(a).getFullYear()?1e3*a:a;var s=this;return ki.debug("checking if federated jwt token expired"),a>(new Date).getTime()?(ki.debug("token not expired"),this._setCredentialsFromFederation({provider:t,token:i,user:r,identity_id:o,expires_at:a})):s._refreshHandlers[t]&&"function"==typeof s._refreshHandlers[t]?(ki.debug("getting refreshed jwt token from federation provider"),this._providerRefreshWithRetry({refreshHandler:s._refreshHandlers[t],provider:t,user:r})):(ki.debug("no refresh handler for provider:",t),this.clear(),Promise.reject("no refresh handler for provider"))},e.prototype._providerRefreshWithRetry=function(n){var t=this,i=n.provider,o=n.user;return DD(n.refreshHandler,[],1e4).then(function(s){return ki.debug("refresh federated token sucessfully",s),t._setCredentialsFromFederation({provider:i,token:s.token,user:o,identity_id:s.identity_id,expires_at:s.expires_at})}).catch(function(s){return"string"==typeof s&&0===s.toLowerCase().lastIndexOf("network error",s.length)||t.clear(),ki.debug("refresh federated token failed",s),Promise.reject("refreshing federation token failed: "+s)})},e.prototype._isExpired=function(n){if(!n)return ki.debug("no credentials for expiration check"),!0;ki.debug("are these credentials expired?",n);var t=Date.now();return n.expiration.getTime()<=t},e.prototype._isPastTTL=function(){return this._nextCredentialsRefresh<=Date.now()},e.prototype._setCredentialsForGuest=function(){return cl(this,void 0,void 0,function(){var n,t,r,o,a,s,d,_=this;return dl(this,function(m){switch(m.label){case 0:return ki.debug("setting credentials for guest"),t=(n=this._config).identityPoolId,r=n.region,n.mandatorySignIn?[2,Promise.reject("cannot get guest credentials when mandatory signin enabled")]:t?r?(a=this,[4,this._getGuestIdentityId()]):(ki.debug("region is not configured for getting the credentials"),[2,Promise.reject("region is not configured for getting the credentials")]):(ki.debug("No Cognito Identity pool provided for unauthenticated access"),[2,Promise.reject("No Cognito Identity pool provided for unauthenticated access")]);case 1:return o=a._identityId=m.sent(),s=new hC({region:r,customUserAgent:Lc()}),d=void 0,d=o?hy({identityId:o,client:s})():cl(_,void 0,void 0,function(){var E;return dl(this,function(ye){switch(ye.label){case 0:return[4,s.send(new py({IdentityPoolId:t}))];case 1:return E=ye.sent().IdentityId,this._identityId=E,[2,hy({client:s,identityId:E})()]}})}).catch(function(E){return cl(_,void 0,void 0,function(){return dl(this,function(D){throw E})})}),[2,this._loadCredentials(d,"guest",!1,null).then(function(E){return E}).catch(function(E){return cl(_,void 0,void 0,function(){var R=this;return dl(this,function(ye){switch(ye.label){case 0:return"ResourceNotFoundException"===E.name&&E.message==="Identity '"+o+"' not found."?(ki.debug("Failed to load guest credentials"),[4,this._removeGuestIdentityId()]):[3,2];case 1:return ye.sent(),d=cl(R,void 0,void 0,function(){var xe;return dl(this,function(vt){switch(vt.label){case 0:return[4,s.send(new py({IdentityPoolId:t}))];case 1:return xe=vt.sent().IdentityId,this._identityId=xe,[2,hy({client:s,identityId:xe})()]}})}).catch(function(xe){return cl(R,void 0,void 0,function(){return dl(this,function(et){throw xe})})}),[2,this._loadCredentials(d,"guest",!1,null)];case 2:return[2,E]}})})})]}})})},e.prototype._setCredentialsFromFederation=function(n){var t=n.provider,r=n.token,i=n.identity_id,a={google:"accounts.google.com",facebook:"graph.facebook.com",amazon:"www.amazon.com",developer:"cognito-identity.amazonaws.com"}[t]||t;if(!a)return Promise.reject("You must specify a federated provider");var s={};s[a]=r;var d=this._config,l=d.identityPoolId,f=d.region;if(!l)return ki.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!f)return ki.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var _=new hC({region:f,customUserAgent:Lc()}),m=void 0;return m=i?hy({identityId:i,logins:s,client:_})():function gq(e){var n=this,t=e.accountId,r=e.cache,i=void 0===r?function mq(){return"object"==typeof self&&self.indexedDB?new fq:"object"==typeof window&&window.localStorage?window.localStorage:pq}():r,o=e.client,a=e.customRoleArn,s=e.identityPoolId,d=e.logins,l=e.userIdentifier,f=void 0===l?d&&0!==Object.keys(d).length?void 0:"ANONYMOUS":l,_=f?"aws:cognito-identity-credentials:"+s+":"+f:void 0,m=function(){return CS(n,void 0,void 0,function(){var E,D,R,ye,xe,et,We,vt,Mt;return TS(this,function(en){switch(en.label){case 0:return(D=_)?[4,i.getItem(_)]:[3,2];case 1:D=en.sent(),en.label=2;case 2:return(E=D)?[3,7]:(et=(xe=o).send,We=py.bind,Mt={AccountId:t,IdentityPoolId:s},d?[4,eO(d)]:[3,4]);case 3:return vt=en.sent(),[3,5];case 4:vt=void 0,en.label=5;case 5:return[4,et.apply(xe,[new(We.apply(py,[void 0,(Mt.Logins=vt,Mt)]))])];case 6:R=en.sent().IdentityId,ye=void 0===R?function vq(){throw new cb("Response from Amazon Cognito contained no identity ID")}():R,E=ye,_&&Promise.resolve(i.setItem(_,E)).catch(function(){}),en.label=7;case 7:return[2,(m=hy({client:o,customRoleArn:a,logins:d,identityId:E}))()]}})})};return function(){return m().catch(function(E){return CS(n,void 0,void 0,function(){return TS(this,function(D){throw _&&Promise.resolve(i.removeItem(_)).catch(function(){}),E})})})}}({logins:s,identityPoolId:l,client:_})(),this._loadCredentials(m,"federated",!0,n)},e.prototype._setCredentialsFromSession=function(n){var t=this;ki.debug("set credentials from session");var r=n.getIdToken().getJwtToken(),i=this._config,o=i.region,a=i.userPoolId,s=i.identityPoolId;if(!s)return ki.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!o)return ki.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var l={};l["cognito-idp."+o+".amazonaws.com/"+a]=r;var f=new hC({region:o,customUserAgent:Lc()}),m=cl(t,void 0,void 0,function(){var E,D,R,ye,xe,et,We,vt,Mt,en;return dl(this,function(nr){switch(nr.label){case 0:return[4,this._getGuestIdentityId()];case 1:return(E=nr.sent())?[3,3]:[4,f.send(new py({IdentityPoolId:s,Logins:l}))];case 2:R=nr.sent().IdentityId,D=R,nr.label=3;case 3:return[4,f.send(new LS({IdentityId:E||D,Logins:l}))];case 4:return ye=nr.sent(),et=(xe=ye.Credentials).AccessKeyId,We=xe.Expiration,vt=xe.SecretKey,Mt=xe.SessionToken,this._identityId=en=ye.IdentityId,E?(ki.debug("The guest identity "+E+" has been successfully linked to the logins"),E===en&&ki.debug("The guest identity "+E+" has become the primary identity"),[4,this._removeGuestIdentityId()]):[3,6];case 5:nr.sent(),nr.label=6;case 6:return[2,{accessKeyId:et,secretAccessKey:vt,sessionToken:Mt,expiration:We,identityId:en}]}})}).catch(function(E){return cl(t,void 0,void 0,function(){return dl(this,function(D){throw E})})});return this._loadCredentials(m,"userPool",!0,null)},e.prototype._loadCredentials=function(n,t,r,i){var o=this,a=this;return new Promise(function(s,d){n.then(function(l){return cl(o,void 0,void 0,function(){var f,_,m,E,D;return dl(this,function(R){switch(R.label){case 0:if(ki.debug("Load credentials successfully",l),this._identityId&&!l.identityId&&(l.identityId=this._identityId),a._credentials=l,a._credentials.authenticated=r,a._credentials_source=t,a._nextCredentialsRefresh=(new Date).getTime()+3e6,"federated"===t){f=Object.assign({id:this._credentials.identityId},i.user),_=i.provider,m=i.token,E=i.expires_at,D=i.identity_id;try{this._storage.setItem("aws-amplify-federatedInfo",JSON.stringify({provider:_,token:m,user:f,expires_at:E,identity_id:D}))}catch(ye){ki.debug("Failed to put federated info into auth storage",ye)}}return"guest"!==t?[3,2]:[4,this._setGuestIdentityId(l.identityId)];case 1:R.sent(),R.label=2;case 2:return s(a._credentials),[2]}})})}).catch(function(l){if(l)return ki.debug("Failed to load credentials",n),ki.debug("Error loading credentials",l),void d(l)})})},e.prototype.set=function(n,t){return"session"===t?this._setCredentialsFromSession(n):"federation"===t?this._setCredentialsFromFederation(n):"guest"===t?this._setCredentialsForGuest():(ki.debug("no source specified for setting credentials"),Promise.reject("invalid source"))},e.prototype.clear=function(){return cl(this,void 0,void 0,function(){return dl(this,function(n){return this._credentials=null,this._credentials_source=null,ki.debug("removing aws-amplify-federatedInfo from storage"),this._storage.removeItem("aws-amplify-federatedInfo"),[2]})})},e.prototype._getGuestIdentityId=function(){return cl(this,void 0,void 0,function(){var n,t;return dl(this,function(r){switch(r.label){case 0:n=this._config.identityPoolId,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._storageSync];case 2:return r.sent(),[2,this._storage.getItem(this._getCognitoIdentityIdStorageKey(n))];case 3:return t=r.sent(),ki.debug("Failed to get the cached guest identityId",t),[3,4];case 4:return[2]}})})},e.prototype._setGuestIdentityId=function(n){return cl(this,void 0,void 0,function(){var t,r;return dl(this,function(i){switch(i.label){case 0:t=this._config.identityPoolId,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._storageSync];case 2:return i.sent(),this._storage.setItem(this._getCognitoIdentityIdStorageKey(t),n),[3,4];case 3:return r=i.sent(),ki.debug("Failed to cache guest identityId",r),[3,4];case 4:return[2]}})})},e.prototype._removeGuestIdentityId=function(){return cl(this,void 0,void 0,function(){var n;return dl(this,function(t){return ki.debug("removing "+this._getCognitoIdentityIdStorageKey(n=this._config.identityPoolId)+" from storage"),this._storage.removeItem(this._getCognitoIdentityIdStorageKey(n)),[2]})})},e.prototype.shear=function(n){return{accessKeyId:n.accessKeyId,sessionToken:n.sessionToken,secretAccessKey:n.secretAccessKey,identityId:n.identityId,authenticated:n.authenticated}},e}(),ic=new D7(null);Gu.register(ic);var Pb=function(){return Pb=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Pb.apply(this,arguments)},O7=new _a("Parser"),uM=function(e){var r,n={};return e.aws_mobile_analytics_app_id&&(n.Analytics={AWSPinpoint:{appId:e.aws_mobile_analytics_app_id,region:e.aws_mobile_analytics_app_region}}),(e.aws_cognito_identity_pool_id||e.aws_user_pools_id)&&(n.Auth={userPoolId:e.aws_user_pools_id,userPoolWebClientId:e.aws_user_pools_web_client_id,region:e.aws_cognito_region,identityPoolId:e.aws_cognito_identity_pool_id,identityPoolRegion:e.aws_cognito_region,mandatorySignIn:"enable"===e.aws_mandatory_sign_in}),r=e.aws_user_files_s3_bucket?{AWSS3:{bucket:e.aws_user_files_s3_bucket,region:e.aws_user_files_s3_bucket_region,dangerouslyConnectToHttpEndpointForTesting:e.aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing}}:e?e.Storage||e:{},e.Logging&&(n.Logging=Pb(Pb({},e.Logging),{region:e.aws_project_region})),e.geo&&(n.Geo=Object.assign({},e.geo),e.geo.amazon_location_service&&(n.Geo={AmazonLocationService:e.geo.amazon_location_service})),n.Analytics=Object.assign({},n.Analytics,e.Analytics),n.Auth=Object.assign({},n.Auth,e.Auth),n.Storage=Object.assign({},r),n.Logging=Object.assign({},n.Logging,e.Logging),O7.debug("parse config",e,"to amplifyconfig",n),n},pC=function(){function e(){}return e.parseMobilehubConfig=uM,e}(),Ab=O(3555);function lM(e,n){void 0===n&&(n={});var t=function L7(e){return e&&"j"===e[0]&&":"===e[1]?e.substr(2):e}(e);if(function N7(e,n){return typeof n>"u"&&(n=!e||"{"!==e[0]&&"["!==e[0]&&'"'!==e[0]),!n}(t,n.doNotParse))try{return JSON.parse(t)}catch{}return e}var wp=function(){return wp=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},wp.apply(this,arguments)},B7=function(){function e(n,t){var r=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function k7(e,n){return"string"==typeof e?Ab.Q(e,n):"object"==typeof e&&null!==e?e:{}}(n,t),new Promise(function(){r.HAS_DOCUMENT_COOKIE=function M7(){return"object"==typeof document&&"string"==typeof document.cookie}()}).catch(function(){})}return e.prototype._updateBrowserValues=function(n){!this.HAS_DOCUMENT_COOKIE||(this.cookies=Ab.Q(document.cookie,n))},e.prototype._emitChange=function(n){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](n)},e.prototype.get=function(n,t,r){return void 0===t&&(t={}),this._updateBrowserValues(r),lM(this.cookies[n],t)},e.prototype.getAll=function(n,t){void 0===n&&(n={}),this._updateBrowserValues(t);var r={};for(var i in this.cookies)r[i]=lM(this.cookies[i],n);return r},e.prototype.set=function(n,t,r){var i;"object"==typeof t&&(t=JSON.stringify(t)),this.cookies=wp(wp({},this.cookies),((i={})[n]=t,i)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=Ab.q(n,t,r)),this._emitChange({name:n,value:t,options:r})},e.prototype.remove=function(n,t){var r=t=wp(wp({},t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=wp({},this.cookies),delete this.cookies[n],this.HAS_DOCUMENT_COOKIE&&(document.cookie=Ab.q(n,"",r)),this._emitChange({name:n,value:void 0,options:t})},e.prototype.addChangeListener=function(n){this.changeListeners.push(n)},e.prototype.removeChangeListener=function(n){var t=this.changeListeners.indexOf(n);t>=0&&this.changeListeners.splice(t,1)},e}();const mC=B7;var oc,cM=fp().isBrowser,F7=function(){function e(n){void 0===n&&(n={}),this.cookies=new mC,this.store=cM?window.localStorage:Object.create(null),this.cookies=n.req?new mC(n.req.headers.cookie):new mC,Object.assign(this.store,this.cookies.getAll())}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.entries(this.store).length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){var n=this;Array.from(new Array(this.length)).map(function(t,r){return n.key(r)}).forEach(function(t){return n.removeItem(t)})},e.prototype.getItem=function(n){return this.getLocalItem(n)},e.prototype.getLocalItem=function(n){return Object.prototype.hasOwnProperty.call(this.store,n)?this.store[n]:null},e.prototype.getUniversalItem=function(n){return this.cookies.get(n)},e.prototype.key=function(n){return Object.keys(this.store)[n]},e.prototype.removeItem=function(n){this.removeLocalItem(n),this.removeUniversalItem(n)},e.prototype.removeLocalItem=function(n){delete this.store[n]},e.prototype.removeUniversalItem=function(n){this.cookies.remove(n,{path:"/"})},e.prototype.setItem=function(n,t){switch(this.setLocalItem(n,t),n.split(".").pop()){case"LastAuthUser":case"accessToken":case"refreshToken":case"idToken":cM?this.setUniversalItem(n,t):this.setLocalItem(n,t)}},e.prototype.setLocalItem=function(n,t){this.store[n]=t},e.prototype.setUniversalItem=function(n,t){this.cookies.set(n,t,{path:"/",sameSite:!0,secure:"localhost"!==window.location.hostname})},e}(),U7=function(){function e(t){var r=t||{},o=r.Username,a=r.Password,s=r.AuthParameters,d=r.ClientMetadata;this.validationData=r.ValidationData||{},this.authParameters=s||{},this.clientMetadata=d||{},this.username=o,this.password=a}var n=e.prototype;return n.getUsername=function(){return this.username},n.getPassword=function(){return this.password},n.getValidationData=function(){return this.validationData},n.getAuthParameters=function(){return this.authParameters},n.getClientMetadata=function(){return this.clientMetadata},e}(),ea=O(3172),G7=O(7585),lh=O.n(G7),V7=(O(7412),O(1817)),dM=O.n(V7),q7=O(6135),Rb=O.n(q7);if(typeof window<"u"&&window.crypto&&(oc=window.crypto),!oc&&typeof window<"u"&&window.msCrypto&&(oc=window.msCrypto),!oc&&typeof global<"u"&&global.crypto&&(oc=global.crypto),!oc)try{oc=O(6249)}catch{}function H7(){if(oc){if("function"==typeof oc.getRandomValues)try{return oc.getRandomValues(new Uint32Array(1))[0]}catch{}if("function"==typeof oc.randomBytes)try{return oc.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")}var K7=function(){function e(t,r){t=this.words=t||[],this.sigBytes=null!=r?r:4*t.length}var n=e.prototype;return n.random=function(r){for(var i=[],o=0;o<r;o+=4)i.push(H7());return new e(i,r)},n.toString=function(){return function $7(e){for(var n=e.words,t=e.sigBytes,r=[],i=0;i<t;i++){var o=n[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")}(this)},e}();const Ls=Qr;function Qr(e,n){null!=e&&this.fromString(e,n)}function Vu(){return new Qr(null)}var ch,hM=typeof navigator<"u";hM&&"Microsoft Internet Explorer"==navigator.appName?(Qr.prototype.am=function J7(e,n,t,r,i,o){for(var a=32767&n,s=n>>15;--o>=0;){var d=32767&this[e],l=this[e++]>>15,f=s*d+l*a;i=((d=a*d+((32767&f)<<15)+t[r]+(1073741823&i))>>>30)+(f>>>15)+s*l+(i>>>30),t[r++]=1073741823&d}return i},ch=30):hM&&"Netscape"!=navigator.appName?(Qr.prototype.am=function W7(e,n,t,r,i,o){for(;--o>=0;){var a=n*this[e++]+t[r]+i;i=Math.floor(a/67108864),t[r++]=67108863&a}return i},ch=26):(Qr.prototype.am=function Z7(e,n,t,r,i,o){for(var a=16383&n,s=n>>14;--o>=0;){var d=16383&this[e],l=this[e++]>>14,f=s*d+l*a;i=((d=a*d+((16383&f)<<14)+t[r]+i)>>28)+(f>>14)+s*l,t[r++]=268435455&d}return i},ch=28),Qr.prototype.DB=ch,Qr.prototype.DM=(1<<ch)-1,Qr.prototype.DV=1<<ch,Qr.prototype.FV=Math.pow(2,52),Qr.prototype.F1=52-ch,Qr.prototype.F2=2*ch-52;var pg,ac,Db=new Array;for(pg="0".charCodeAt(0),ac=0;ac<=9;++ac)Db[pg++]=ac;for(pg="a".charCodeAt(0),ac=10;ac<36;++ac)Db[pg++]=ac;for(pg="A".charCodeAt(0),ac=10;ac<36;++ac)Db[pg++]=ac;function pM(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function Q7(e,n){return Db[e.charCodeAt(n)]??-1}function vC(e){var n=Vu();return n.fromInt(e),n}function yC(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function mg(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function _C(e){return ea.lW.from((new K7).random(e).toString(),"hex")}mg.prototype.convert=function C$(e){var n=Vu();return e.abs().dlShiftTo(this.m.t,n),n.divRemTo(this.m,null,n),e.s<0&&n.compareTo(Qr.ZERO)>0&&this.m.subTo(n,n),n},mg.prototype.revert=function T$(e){var n=Vu();return e.copyTo(n),this.reduce(n),n},mg.prototype.reduce=function I$(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var n=0;n<this.m.t;++n){var t=32767&e[n],r=t*this.mpl+((t*this.mph+(e[n]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[t=n+this.m.t]+=this.m.am(0,r,e,n,0,this.m.t);e[t]>=e.DV;)e[t]-=e.DV,e[++t]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},mg.prototype.mulTo=function A$(e,n,t){e.multiplyTo(n,t),this.reduce(t)},mg.prototype.sqrTo=function P$(e,n){e.squareTo(n),this.reduce(n)},Qr.prototype.copyTo=function e$(e){for(var n=this.t-1;n>=0;--n)e[n]=this[n];e.t=this.t,e.s=this.s},Qr.prototype.fromInt=function t$(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},Qr.prototype.fromString=function n$(e,n){var t;if(16==n)t=4;else if(8==n)t=3;else if(2==n)t=1;else if(32==n)t=5;else{if(4!=n)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}this.t=0,this.s=0;for(var r=e.length,i=!1,o=0;--r>=0;){var a=Q7(e,r);a<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=a:o+t>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,(o+=t)>=this.DB&&(o-=this.DB))}this.clamp(),i&&Qr.ZERO.subTo(this,this)},Qr.prototype.clamp=function r$(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},Qr.prototype.dlShiftTo=function l$(e,n){var t;for(t=this.t-1;t>=0;--t)n[t+e]=this[t];for(t=e-1;t>=0;--t)n[t]=0;n.t=this.t+e,n.s=this.s},Qr.prototype.drShiftTo=function c$(e,n){for(var t=e;t<this.t;++t)n[t-e]=this[t];n.t=Math.max(this.t-e,0),n.s=this.s},Qr.prototype.lShiftTo=function d$(e,n){var s,t=e%this.DB,r=this.DB-t,i=(1<<r)-1,o=Math.floor(e/this.DB),a=this.s<<t&this.DM;for(s=this.t-1;s>=0;--s)n[s+o+1]=this[s]>>r|a,a=(this[s]&i)<<t;for(s=o-1;s>=0;--s)n[s]=0;n[o]=a,n.t=this.t+o+1,n.s=this.s,n.clamp()},Qr.prototype.rShiftTo=function f$(e,n){n.s=this.s;var t=Math.floor(e/this.DB);if(t>=this.t)n.t=0;else{var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;n[0]=this[t]>>r;for(var a=t+1;a<this.t;++a)n[a-t-1]|=(this[a]&o)<<i,n[a-t]=this[a]>>r;r>0&&(n[this.t-t-1]|=(this.s&o)<<i),n.t=this.t-t,n.clamp()}},Qr.prototype.subTo=function h$(e,n){for(var t=0,r=0,i=Math.min(e.t,this.t);t<i;)r+=this[t]-e[t],n[t++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;t<this.t;)r+=this[t],n[t++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;t<e.t;)r-=e[t],n[t++]=r&this.DM,r>>=this.DB;r-=e.s}n.s=r<0?-1:0,r<-1?n[t++]=this.DV+r:r>0&&(n[t++]=r),n.t=t,n.clamp()},Qr.prototype.multiplyTo=function p$(e,n){var t=this.abs(),r=e.abs(),i=t.t;for(n.t=i+r.t;--i>=0;)n[i]=0;for(i=0;i<r.t;++i)n[i+t.t]=t.am(0,r[i],n,i,0,t.t);n.s=0,n.clamp(),this.s!=e.s&&Qr.ZERO.subTo(n,n)},Qr.prototype.squareTo=function m$(e){for(var n=this.abs(),t=e.t=2*n.t;--t>=0;)e[t]=0;for(t=0;t<n.t-1;++t){var r=n.am(t,n[t],e,2*t,0,1);(e[t+n.t]+=n.am(t+1,2*n[t],e,2*t+1,r,n.t-t-1))>=n.DV&&(e[t+n.t]-=n.DV,e[t+n.t+1]=1)}e.t>0&&(e[e.t-1]+=n.am(t,n[t],e,2*t,0,1)),e.s=0,e.clamp()},Qr.prototype.divRemTo=function g$(e,n,t){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return n?.fromInt(0),void(null!=t&&this.copyTo(t));null==t&&(t=Vu());var o=Vu(),a=this.s,s=e.s,d=this.DB-yC(r[r.t-1]);d>0?(r.lShiftTo(d,o),i.lShiftTo(d,t)):(r.copyTo(o),i.copyTo(t));var l=o.t,f=o[l-1];if(0!=f){var _=f*(1<<this.F1)+(l>1?o[l-2]>>this.F2:0),m=this.FV/_,E=(1<<this.F1)/_,D=1<<this.F2,R=t.t,ye=R-l,xe=n??Vu();for(o.dlShiftTo(ye,xe),t.compareTo(xe)>=0&&(t[t.t++]=1,t.subTo(xe,t)),Qr.ONE.dlShiftTo(l,xe),xe.subTo(o,o);o.t<l;)o[o.t++]=0;for(;--ye>=0;){var et=t[--R]==f?this.DM:Math.floor(t[R]*m+(t[R-1]+D)*E);if((t[R]+=o.am(0,et,t,ye,0,l))<et)for(o.dlShiftTo(ye,xe),t.subTo(xe,t);t[R]<--et;)t.subTo(xe,t)}null!=n&&(t.drShiftTo(l,n),a!=s&&Qr.ZERO.subTo(n,n)),t.t=l,t.clamp(),d>0&&t.rShiftTo(d,t),a<0&&Qr.ZERO.subTo(t,t)}}},Qr.prototype.invDigit=function y$(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var n=3&e;return(n=(n=(n=(n=n*(2-(15&e)*n)&15)*(2-(255&e)*n)&255)*(2-((65535&e)*n&65535))&65535)*(2-e*n%this.DV)%this.DV)>0?this.DV-n:-n},Qr.prototype.addTo=function b$(e,n){for(var t=0,r=0,i=Math.min(e.t,this.t);t<i;)r+=this[t]+e[t],n[t++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;t<this.t;)r+=this[t],n[t++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;t<e.t;)r+=e[t],n[t++]=r&this.DM,r>>=this.DB;r+=e.s}n.s=r<0?-1:0,r>0?n[t++]=r:r<-1&&(n[t++]=this.DV+r),n.t=t,n.clamp()},Qr.prototype.toString=function i$(e){if(this.s<0)return"-"+this.negate().toString(e);var n;if(16==e)n=4;else if(8==e)n=3;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}var r,t=(1<<n)-1,i=!1,o="",a=this.t,s=this.DB-a*this.DB%n;if(a-- >0)for(s<this.DB&&(r=this[a]>>s)>0&&(i=!0,o=pM(r));a>=0;)s<n?(r=(this[a]&(1<<s)-1)<<n-s,r|=this[--a]>>(s+=this.DB-n)):(r=this[a]>>(s-=n)&t,s<=0&&(s+=this.DB,--a)),r>0&&(i=!0),i&&(o+=pM(r));return i?o:"0"},Qr.prototype.negate=function o$(){var e=Vu();return Qr.ZERO.subTo(this,e),e},Qr.prototype.abs=function a$(){return this.s<0?this.negate():this},Qr.prototype.compareTo=function s$(e){var n=this.s-e.s;if(0!=n)return n;var t=this.t;if(0!=(n=t-e.t))return this.s<0?-n:n;for(;--t>=0;)if(0!=(n=this[t]-e[t]))return n;return 0},Qr.prototype.bitLength=function u$(){return this.t<=0?0:this.DB*(this.t-1)+yC(this[this.t-1]^this.s&this.DM)},Qr.prototype.mod=function v$(e){var n=Vu();return this.abs().divRemTo(e,null,n),this.s<0&&n.compareTo(Qr.ZERO)>0&&e.subTo(n,n),n},Qr.prototype.equals=function _$(e){return 0==this.compareTo(e)},Qr.prototype.add=function w$(e){var n=Vu();return this.addTo(e,n),n},Qr.prototype.subtract=function x$(e){var n=Vu();return this.subTo(e,n),n},Qr.prototype.multiply=function E$(e){var n=Vu();return this.multiplyTo(e,n),n},Qr.prototype.divide=function S$(e){var n=Vu();return this.divRemTo(e,n,null),n},Qr.prototype.modPow=function R$(e,n,t){var i,r=e.bitLength(),o=vC(1),a=new mg(n);if(r<=0)return o;i=r<18?1:r<48?3:r<144?4:r<768?5:6;var s=new Array,d=3,l=i-1,f=(1<<i)-1;if(s[1]=a.convert(this),i>1){var _=Vu();for(a.sqrTo(s[1],_);d<=f;)s[d]=Vu(),a.mulTo(_,s[d-2],s[d]),d+=2}var E,ye,m=e.t-1,D=!0,R=Vu();for(r=yC(e[m])-1;m>=0;){for(r>=l?E=e[m]>>r-l&f:(E=(e[m]&(1<<r+1)-1)<<l-r,m>0&&(E|=e[m-1]>>this.DB+r-l)),d=i;0==(1&E);)E>>=1,--d;if((r-=d)<0&&(r+=this.DB,--m),D)s[E].copyTo(o),D=!1;else{for(;d>1;)a.sqrTo(o,R),a.sqrTo(R,o),d-=2;d>0?a.sqrTo(o,R):(ye=o,o=R,R=ye),a.mulTo(R,s[E],o)}for(;m>=0&&0==(e[m]&1<<r);)a.sqrTo(o,R),ye=o,o=R,R=ye,--r<0&&(r=this.DB-1,--m)}var xe=a.revert(o);return t(null,xe),xe},Qr.ZERO=vC(0),Qr.ONE=vC(1);var D$=/^[89a-f]/i,gg=function(){function e(t){this.N=new Ls("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new Ls("2",16),this.k=new Ls(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=ea.lW.from("Caldera Derived Key","utf8"),this.poolName=t}var n=e.prototype;return n.getSmallAValue=function(){return this.smallAValue},n.getLargeAValue=function(r){var i=this;this.largeAValue?r(null,this.largeAValue):this.calculateA(this.smallAValue,function(o,a){o&&r(o,null),i.largeAValue=a,r(null,i.largeAValue)})},n.generateRandomSmallA=function(){var r=_C(128).toString("hex");return new Ls(r,16)},n.generateRandomString=function(){return _C(40).toString("base64")},n.getRandomPassword=function(){return this.randomPassword},n.getSaltDevices=function(){return this.SaltToHashDevices},n.getVerifierDevices=function(){return this.verifierDevices},n.generateHashDevice=function(r,i,o){var a=this;this.randomPassword=this.generateRandomString();var d=this.hash(""+r+i+":"+this.randomPassword),l=_C(16).toString("hex");this.SaltToHashDevices=this.padHex(new Ls(l,16)),this.g.modPow(new Ls(this.hexHash(this.SaltToHashDevices+d),16),this.N,function(f,_){f&&o(f,null),a.verifierDevices=a.padHex(_),o(null,null)})},n.calculateA=function(r,i){var o=this;this.g.modPow(r,this.N,function(a,s){a&&i(a,null),s.mod(o.N).equals(Ls.ZERO)&&i(new Error("Illegal paramater. A mod N cannot be 0."),null),i(null,s)})},n.calculateU=function(r,i){return this.UHexHash=this.hexHash(this.padHex(r)+this.padHex(i)),new Ls(this.UHexHash,16)},n.hash=function(r){var i=r instanceof ea.lW?lh().lib.WordArray.create(r):r,o=dM()(i).toString();return new Array(64-o.length).join("0")+o},n.hexHash=function(r){return this.hash(ea.lW.from(r,"hex"))},n.computehkdf=function(r,i){var o=lh().lib.WordArray.create(ea.lW.concat([this.infoBits,ea.lW.from(String.fromCharCode(1),"utf8")])),a=r instanceof ea.lW?lh().lib.WordArray.create(r):r,s=i instanceof ea.lW?lh().lib.WordArray.create(i):i,d=Rb()(a,s),l=Rb()(o,d);return ea.lW.from(l.toString(),"hex").slice(0,16)},n.getPasswordAuthenticationKey=function(r,i,o,a,s){var d=this;if(o.mod(this.N).equals(Ls.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,o),this.UValue.equals(Ls.ZERO))throw new Error("U cannot be zero.");var f=this.hash(""+this.poolName+r+":"+i),_=new Ls(this.hexHash(this.padHex(a)+f),16);this.calculateS(_,o,function(m,E){m&&s(m,null);var D=d.computehkdf(ea.lW.from(d.padHex(E),"hex"),ea.lW.from(d.padHex(d.UValue),"hex"));s(null,D)})},n.calculateS=function(r,i,o){var a=this;this.g.modPow(r,this.N,function(s,d){s&&o(s,null),i.subtract(a.k.multiply(d)).modPow(a.smallAValue.add(a.UValue.multiply(r)),a.N,function(f,_){f&&o(f,null),o(null,_.mod(a.N))})})},n.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},n.padHex=function(r){if(!(r instanceof Ls))throw new Error("Not a BigInteger");var i=r.compareTo(Ls.ZERO)<0,o=r.abs().toString(16);if(o=D$.test(o=o.length%2!=0?"0"+o:o)?"00"+o:o,i){var a=o.split("").map(function(d){var l=15&~parseInt(d,16);return"0123456789ABCDEF".charAt(l)}).join("");(o=new Ls(a,16).add(Ls.ONE).toString(16)).toUpperCase().startsWith("FF8")&&(o=o.substring(2))}return o},e}(),mM=function(){function e(t){this.jwtToken=t||"",this.payload=this.decodePayload()}var n=e.prototype;return n.getJwtToken=function(){return this.jwtToken},n.getExpiration=function(){return this.payload.exp},n.getIssuedAt=function(){return this.payload.iat},n.decodePayload=function(){var r=this.jwtToken.split(".")[1];try{return JSON.parse(ea.lW.from(r,"base64").toString("utf8"))}catch{return{}}},e}();function bC(e,n){return(bC=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r})(e,n)}var wC=function(e){function n(t){return e.call(this,(void 0===t?{}:t).AccessToken||"")||this}return function k$(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,bC(e,n)}(n,e),n}(mM);function xC(e,n){return(xC=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r})(e,n)}var EC=function(e){function n(t){return e.call(this,(void 0===t?{}:t).IdToken||"")||this}return function N$(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,xC(e,n)}(n,e),n}(mM),SC=function(){function e(t){this.token=(void 0===t?{}:t).RefreshToken||""}return e.prototype.getToken=function(){return this.token},e}(),L$=O(8319),CC=O.n(L$),TC=function(){function e(t){var r=void 0===t?{}:t,i=r.IdToken,o=r.RefreshToken,a=r.AccessToken,s=r.ClockDrift;if(null==a||null==i)throw new Error("Id token and Access Token must be present.");this.idToken=i,this.refreshToken=o,this.accessToken=a,this.clockDrift=void 0===s?this.calculateClockDrift():s}var n=e.prototype;return n.getIdToken=function(){return this.idToken},n.getRefreshToken=function(){return this.refreshToken},n.getAccessToken=function(){return this.accessToken},n.getClockDrift=function(){return this.clockDrift},n.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},n.isValid=function(){var i=Math.floor(new Date/1e3)-this.clockDrift;return i<this.accessToken.getExpiration()&&i<this.idToken.getExpiration()},e}(),B$=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],F$=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],gM=function(){function e(){}return e.prototype.getNowString=function(){var r=new Date,i=F$[r.getUTCDay()],o=B$[r.getUTCMonth()],a=r.getUTCDate(),s=r.getUTCHours();s<10&&(s="0"+s);var d=r.getUTCMinutes();d<10&&(d="0"+d);var l=r.getUTCSeconds();return l<10&&(l="0"+l),i+" "+o+" "+a+" "+s+":"+d+":"+l+" UTC "+r.getUTCFullYear()},e}(),vg=function(){function e(t){var r=void 0===t?{}:t,o=r.Value;this.Name=r.Name||"",this.Value=o||""}var n=e.prototype;return n.getValue=function(){return this.Value},n.setValue=function(r){return this.Value=r,this},n.getName=function(){return this.Name},n.setName=function(r){return this.Name=r,this},n.toString=function(){return JSON.stringify(this)},n.toJSON=function(){return{Name:this.Name,Value:this.Value}},e}(),xp={},z$=function(){function e(){}return e.setItem=function(t,r){return xp[t]=r,xp[t]},e.getItem=function(t){return Object.prototype.hasOwnProperty.call(xp,t)?xp[t]:void 0},e.removeItem=function(t){return delete xp[t]},e.clear=function(){return xp={}},e}(),vM=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch{this.storageWindow=z$}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),yM=typeof navigator<"u"?navigator.userAgent:"nodejs",IC=function(){function e(t){if(null==t||null==t.Username||null==t.Pool)throw new Error("Username and Pool information are required.");this.username=t.Username||"",this.pool=t.Pool,this.Session=null,this.client=t.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=t.Storage||(new vM).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var n=e.prototype;return n.setSignInUserSession=function(r){this.clearCachedUserData(),this.signInUserSession=r,this.cacheTokens()},n.getSignInUserSession=function(){return this.signInUserSession},n.getUsername=function(){return this.username},n.getAuthenticationFlowType=function(){return this.authenticationFlowType},n.setAuthenticationFlowType=function(r){this.authenticationFlowType=r},n.initiateAuth=function(r,i){var o=this,a=r.getAuthParameters();a.USERNAME=this.username;var s=0!==Object.keys(r.getValidationData()).length?r.getValidationData():r.getClientMetadata(),d={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:a,ClientMetadata:s};this.getUserContextData()&&(d.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",d,function(l,f){if(l)return i.onFailure(l);var m=f.ChallengeParameters;return"CUSTOM_CHALLENGE"===f.ChallengeName?(o.Session=f.Session,i.customChallenge(m)):(o.signInUserSession=o.getCognitoUserSession(f.AuthenticationResult),o.cacheTokens(),i.onSuccess(o.signInUserSession))})},n.authenticateUser=function(r,i){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(r,i):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(r,i):i.onFailure(new Error("Authentication flow type is invalid."))},n.authenticateUserDefaultAuth=function(r,i){var d,l,o=this,a=new gg(this.pool.getUserPoolId().split("_")[1]),s=new gM,f={};null!=this.deviceKey&&(f.DEVICE_KEY=this.deviceKey),f.USERNAME=this.username,a.getLargeAValue(function(_,m){_&&i.onFailure(_),f.SRP_A=m.toString(16),"CUSTOM_AUTH"===o.authenticationFlowType&&(f.CHALLENGE_NAME="SRP_A");var E=0!==Object.keys(r.getValidationData()).length?r.getValidationData():r.getClientMetadata(),D={AuthFlow:o.authenticationFlowType,ClientId:o.pool.getClientId(),AuthParameters:f,ClientMetadata:E};o.getUserContextData(o.username)&&(D.UserContextData=o.getUserContextData(o.username)),o.client.request("InitiateAuth",D,function(R,ye){if(R)return i.onFailure(R);var xe=ye.ChallengeParameters;o.username=xe.USER_ID_FOR_SRP,o.userDataKey=o.keyPrefix+"."+o.username+".userData",d=new Ls(xe.SRP_B,16),l=new Ls(xe.SALT,16),o.getCachedDeviceKeyAndPassword(),a.getPasswordAuthenticationKey(o.username,r.getPassword(),d,l,function(et,We){et&&i.onFailure(et);var vt=s.getNowString(),Mt=lh().lib.WordArray.create(ea.lW.concat([ea.lW.from(o.pool.getUserPoolId().split("_")[1],"utf8"),ea.lW.from(o.username,"utf8"),ea.lW.from(xe.SECRET_BLOCK,"base64"),ea.lW.from(vt,"utf8")])),en=lh().lib.WordArray.create(We),nr=CC().stringify(Rb()(Mt,en)),Qn={};Qn.USERNAME=o.username,Qn.PASSWORD_CLAIM_SECRET_BLOCK=xe.SECRET_BLOCK,Qn.TIMESTAMP=vt,Qn.PASSWORD_CLAIM_SIGNATURE=nr,null!=o.deviceKey&&(Qn.DEVICE_KEY=o.deviceKey);var Ci={ChallengeName:"PASSWORD_VERIFIER",ClientId:o.pool.getClientId(),ChallengeResponses:Qn,Session:ye.Session,ClientMetadata:E};o.getUserContextData()&&(Ci.UserContextData=o.getUserContextData()),function cr(ba,wa){return o.client.request("RespondToAuthChallenge",ba,function(Ma,Ws){return Ma&&"ResourceNotFoundException"===Ma.code&&-1!==Ma.message.toLowerCase().indexOf("device")?(Qn.DEVICE_KEY=null,o.deviceKey=null,o.randomPassword=null,o.deviceGroupKey=null,o.clearCachedDeviceKeyAndPassword(),cr(ba,wa)):wa(Ma,Ws)})}(Ci,function(cr,ba){return cr?i.onFailure(cr):o.authenticateUserInternal(ba,a,i)})})})})},n.authenticateUserPlainUsernamePassword=function(r,i){var o=this,a={};if(a.USERNAME=this.username,a.PASSWORD=r.getPassword(),a.PASSWORD){var s=new gg(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(a.DEVICE_KEY=this.deviceKey);var d=0!==Object.keys(r.getValidationData()).length?r.getValidationData():r.getClientMetadata(),l={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:a,ClientMetadata:d};this.getUserContextData(this.username)&&(l.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",l,function(f,_){return f?i.onFailure(f):o.authenticateUserInternal(_,s,i)})}else i.onFailure(new Error("PASSWORD parameter is required"))},n.authenticateUserInternal=function(r,i,o){var a=this,s=r.ChallengeName,d=r.ChallengeParameters;if("SMS_MFA"===s)return this.Session=r.Session,o.mfaRequired(s,d);if("SELECT_MFA_TYPE"===s)return this.Session=r.Session,o.selectMFAType(s,d);if("MFA_SETUP"===s)return this.Session=r.Session,o.mfaSetup(s,d);if("SOFTWARE_TOKEN_MFA"===s)return this.Session=r.Session,o.totpRequired(s,d);if("CUSTOM_CHALLENGE"===s)return this.Session=r.Session,o.customChallenge(d);if("NEW_PASSWORD_REQUIRED"===s){this.Session=r.Session;var l=null,f=null,_=[],m=i.getNewPasswordRequiredChallengeUserAttributePrefix();if(d&&(l=JSON.parse(r.ChallengeParameters.userAttributes),f=JSON.parse(r.ChallengeParameters.requiredAttributes)),f)for(var E=0;E<f.length;E++)_[E]=f[E].substr(m.length);return o.newPasswordRequired(l,_)}if("DEVICE_SRP_AUTH"===s)return this.Session=r.Session,void this.getDeviceResponse(o);this.signInUserSession=this.getCognitoUserSession(r.AuthenticationResult),this.challengeName=s,this.cacheTokens();var D=r.AuthenticationResult.NewDeviceMetadata;if(null==D)return o.onSuccess(this.signInUserSession);i.generateHashDevice(r.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,r.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(R){if(R)return o.onFailure(R);var ye={Salt:ea.lW.from(i.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:ea.lW.from(i.getVerifierDevices(),"hex").toString("base64")};a.verifierDevices=ye.PasswordVerifier,a.deviceGroupKey=D.DeviceGroupKey,a.randomPassword=i.getRandomPassword(),a.client.request("ConfirmDevice",{DeviceKey:D.DeviceKey,AccessToken:a.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:ye,DeviceName:yM},function(xe,et){return xe?o.onFailure(xe):(a.deviceKey=r.AuthenticationResult.NewDeviceMetadata.DeviceKey,a.cacheDeviceKeyAndPassword(),!0===et.UserConfirmationNecessary?o.onSuccess(a.signInUserSession,et.UserConfirmationNecessary):o.onSuccess(a.signInUserSession))})})},n.completeNewPasswordChallenge=function(r,i,o,a){var s=this;if(!r)return o.onFailure(new Error("New password is required."));var d=new gg(this.pool.getUserPoolId().split("_")[1]),l=d.getNewPasswordRequiredChallengeUserAttributePrefix(),f={};i&&Object.keys(i).forEach(function(m){f[l+m]=i[m]}),f.NEW_PASSWORD=r,f.USERNAME=this.username;var _={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:f,Session:this.Session,ClientMetadata:a};this.getUserContextData()&&(_.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",_,function(m,E){return m?o.onFailure(m):s.authenticateUserInternal(E,d,o)})},n.getDeviceResponse=function(r,i){var o=this,a=new gg(this.deviceGroupKey),s=new gM,d={};d.USERNAME=this.username,d.DEVICE_KEY=this.deviceKey,a.getLargeAValue(function(l,f){l&&r.onFailure(l),d.SRP_A=f.toString(16);var _={ChallengeName:"DEVICE_SRP_AUTH",ClientId:o.pool.getClientId(),ChallengeResponses:d,ClientMetadata:i,Session:o.Session};o.getUserContextData()&&(_.UserContextData=o.getUserContextData()),o.client.request("RespondToAuthChallenge",_,function(m,E){if(m)return r.onFailure(m);var D=E.ChallengeParameters,R=new Ls(D.SRP_B,16),ye=new Ls(D.SALT,16);a.getPasswordAuthenticationKey(o.deviceKey,o.randomPassword,R,ye,function(xe,et){if(xe)return r.onFailure(xe);var We=s.getNowString(),vt=lh().lib.WordArray.create(ea.lW.concat([ea.lW.from(o.deviceGroupKey,"utf8"),ea.lW.from(o.deviceKey,"utf8"),ea.lW.from(D.SECRET_BLOCK,"base64"),ea.lW.from(We,"utf8")])),Mt=lh().lib.WordArray.create(et),en=CC().stringify(Rb()(vt,Mt)),nr={};nr.USERNAME=o.username,nr.PASSWORD_CLAIM_SECRET_BLOCK=D.SECRET_BLOCK,nr.TIMESTAMP=We,nr.PASSWORD_CLAIM_SIGNATURE=en,nr.DEVICE_KEY=o.deviceKey;var Qn={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:o.pool.getClientId(),ChallengeResponses:nr,Session:E.Session};o.getUserContextData()&&(Qn.UserContextData=o.getUserContextData()),o.client.request("RespondToAuthChallenge",Qn,function(Zr,Ci){return Zr?r.onFailure(Zr):(o.signInUserSession=o.getCognitoUserSession(Ci.AuthenticationResult),o.cacheTokens(),r.onSuccess(o.signInUserSession))})})})})},n.confirmRegistration=function(r,i,o,a){var s={ClientId:this.pool.getClientId(),ConfirmationCode:r,Username:this.username,ForceAliasCreation:i,ClientMetadata:a};this.getUserContextData()&&(s.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",s,function(d){return d?o(d,null):o(null,"SUCCESS")})},n.sendCustomChallengeAnswer=function(r,i,o){var a=this,s={};s.USERNAME=this.username,s.ANSWER=r;var d=new gg(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(s.DEVICE_KEY=this.deviceKey);var l={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:s,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:o};this.getUserContextData()&&(l.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",l,function(f,_){return f?i.onFailure(f):a.authenticateUserInternal(_,d,i)})},n.sendMFACode=function(r,i,o,a){var s=this,d={};d.USERNAME=this.username,d.SMS_MFA_CODE=r;var l=o||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===l&&(d.SOFTWARE_TOKEN_MFA_CODE=r),null!=this.deviceKey&&(d.DEVICE_KEY=this.deviceKey);var f={ChallengeName:l,ChallengeResponses:d,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:a};this.getUserContextData()&&(f.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",f,function(_,m){if(_)return i.onFailure(_);if("DEVICE_SRP_AUTH"!==m.ChallengeName){if(s.signInUserSession=s.getCognitoUserSession(m.AuthenticationResult),s.cacheTokens(),null==m.AuthenticationResult.NewDeviceMetadata)return i.onSuccess(s.signInUserSession);var D=new gg(s.pool.getUserPoolId().split("_")[1]);D.generateHashDevice(m.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,m.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(R){if(R)return i.onFailure(R);var ye={Salt:ea.lW.from(D.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:ea.lW.from(D.getVerifierDevices(),"hex").toString("base64")};s.verifierDevices=ye.PasswordVerifier,s.deviceGroupKey=m.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,s.randomPassword=D.getRandomPassword(),s.client.request("ConfirmDevice",{DeviceKey:m.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:s.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:ye,DeviceName:yM},function(xe,et){return xe?i.onFailure(xe):(s.deviceKey=m.AuthenticationResult.NewDeviceMetadata.DeviceKey,s.cacheDeviceKeyAndPassword(),!0===et.UserConfirmationNecessary?i.onSuccess(s.signInUserSession,et.UserConfirmationNecessary):i.onSuccess(s.signInUserSession))})})}else s.getDeviceResponse(i)})},n.changePassword=function(r,i,o,a){if(null==this.signInUserSession||!this.signInUserSession.isValid())return o(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:r,ProposedPassword:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:a},function(s){return s?o(s,null):o(null,"SUCCESS")})},n.enableMFA=function(r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return r(new Error("User is not authenticated"),null);var i=[];i.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?r(a,null):r(null,"SUCCESS")})},n.setUserMfaPreference=function(r,i,o){if(null==this.signInUserSession||!this.signInUserSession.isValid())return o(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:r,SoftwareTokenMfaSettings:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?o(a,null):o(null,"SUCCESS")})},n.disableMFA=function(r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return r(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(o){return o?r(o,null):r(null,"SUCCESS")})},n.deleteUser=function(r,i){var o=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return r(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:i},function(a){return a?r(a,null):(o.clearCachedUser(),r(null,"SUCCESS"))})},n.updateAttributes=function(r,i,o){var a=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:r,ClientMetadata:o},function(s){return s?i(s,null):a.getUserData(function(){return i(null,"SUCCESS")},{bypassCache:!0})})},n.getUserAttributes=function(r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return r(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(i,o){if(i)return r(i,null);for(var a=[],s=0;s<o.UserAttributes.length;s++){var l=new vg({Name:o.UserAttributes[s].Name,Value:o.UserAttributes[s].Value});a.push(l)}return r(null,a)})},n.getMFAOptions=function(r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return r(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(i,o){return i?r(i,null):r(null,o.MFAOptions)})},n.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},n.refreshSessionIfPossible=function(r){var i=this;return void 0===r&&(r={}),new Promise(function(o){var a=i.signInUserSession.getRefreshToken();a&&a.getToken()?i.refreshSession(a,o,r.clientMetadata):o()})},n.getUserData=function(r,i){var o=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),r(new Error("User is not authenticated"),null);var a=this.getUserDataFromCache();if(a)if(this.isFetchUserDataAndTokenRequired(i))this.fetchUserData().then(function(s){return o.refreshSessionIfPossible(i).then(function(){return s})}).then(function(s){return r(null,s)}).catch(r);else try{return void r(null,JSON.parse(a))}catch(s){return this.clearCachedUserData(),void r(s,null)}else this.fetchUserData().then(function(s){r(null,s)}).catch(r)},n.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},n.isFetchUserDataAndTokenRequired=function(r){var o=(r||{}).bypassCache;return void 0!==o&&o},n.fetchUserData=function(){var r=this;return this.createGetUserRequest().then(function(i){return r.cacheUserData(i),i})},n.deleteAttributes=function(r,i){var o=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?i(a,null):o.getUserData(function(){return i(null,"SUCCESS")},{bypassCache:!0})})},n.resendConfirmationCode=function(r,i){var o={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:i};this.client.request("ResendConfirmationCode",o,function(a,s){return a?r(a,null):r(null,s)})},n.getSession=function(r,i){if(void 0===i&&(i={}),null==this.username)return r(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return r(null,this.signInUserSession);var o="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,a=o+".idToken",s=o+".accessToken",d=o+".refreshToken",l=o+".clockDrift";if(this.storage.getItem(a)){var f=new EC({IdToken:this.storage.getItem(a)}),_=new wC({AccessToken:this.storage.getItem(s)}),m=new SC({RefreshToken:this.storage.getItem(d)}),E=parseInt(this.storage.getItem(l),0)||0,R=new TC({IdToken:f,AccessToken:_,RefreshToken:m,ClockDrift:E});if(R.isValid())return this.signInUserSession=R,r(null,this.signInUserSession);if(!m.getToken())return r(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(m,r,i.clientMetadata)}else r(new Error("Local storage is missing an ID Token, Please authenticate"),null)},n.refreshSession=function(r,i,o){var a=this,s=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(i):i,d={};d.REFRESH_TOKEN=r.getToken();var l="CognitoIdentityServiceProvider."+this.pool.getClientId(),f=l+".LastAuthUser";this.storage.getItem(f)&&(this.username=this.storage.getItem(f),this.deviceKey=this.storage.getItem(l+"."+this.username+".deviceKey"),d.DEVICE_KEY=this.deviceKey);var m={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:d,ClientMetadata:o};this.getUserContextData()&&(m.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",m,function(E,D){if(E)return"NotAuthorizedException"===E.code&&a.clearCachedUser(),s(E,null);if(D){var R=D.AuthenticationResult;return Object.prototype.hasOwnProperty.call(R,"RefreshToken")||(R.RefreshToken=r.getToken()),a.signInUserSession=a.getCognitoUserSession(R),a.cacheTokens(),s(null,a.signInUserSession)}})},n.cacheTokens=function(){var r="CognitoIdentityServiceProvider."+this.pool.getClientId(),o=r+"."+this.username+".accessToken",a=r+"."+this.username+".refreshToken",s=r+"."+this.username+".clockDrift",d=r+".LastAuthUser";this.storage.setItem(r+"."+this.username+".idToken",this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(o,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(a,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(s,""+this.signInUserSession.getClockDrift()),this.storage.setItem(d,this.username)},n.cacheUserData=function(r){this.storage.setItem(this.userDataKey,JSON.stringify(r))},n.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},n.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},n.cacheDeviceKeyAndPassword=function(){var r="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,o=r+".randomPasswordKey",a=r+".deviceGroupKey";this.storage.setItem(r+".deviceKey",this.deviceKey),this.storage.setItem(o,this.randomPassword),this.storage.setItem(a,this.deviceGroupKey)},n.getCachedDeviceKeyAndPassword=function(){var r="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,i=r+".deviceKey",o=r+".randomPasswordKey",a=r+".deviceGroupKey";this.storage.getItem(i)&&(this.deviceKey=this.storage.getItem(i),this.randomPassword=this.storage.getItem(o),this.deviceGroupKey=this.storage.getItem(a))},n.clearCachedDeviceKeyAndPassword=function(){var r="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,o=r+".randomPasswordKey",a=r+".deviceGroupKey";this.storage.removeItem(r+".deviceKey"),this.storage.removeItem(o),this.storage.removeItem(a)},n.clearCachedTokens=function(){var r="CognitoIdentityServiceProvider."+this.pool.getClientId(),o=r+"."+this.username+".accessToken",a=r+"."+this.username+".refreshToken",s=r+".LastAuthUser",d=r+"."+this.username+".clockDrift";this.storage.removeItem(r+"."+this.username+".idToken"),this.storage.removeItem(o),this.storage.removeItem(a),this.storage.removeItem(s),this.storage.removeItem(d)},n.getCognitoUserSession=function(r){var i=new EC(r),o=new wC(r),a=new SC(r);return new TC({IdToken:i,AccessToken:o,RefreshToken:a})},n.forgotPassword=function(r,i){var o={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:i};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",o,function(a,s){return a?r.onFailure(a):"function"==typeof r.inputVerificationCode?r.inputVerificationCode(s):r.onSuccess(s)})},n.confirmPassword=function(r,i,o,a){var s={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:r,Password:i,ClientMetadata:a};this.getUserContextData()&&(s.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",s,function(d){return d?o.onFailure(d):o.onSuccess("SUCCESS")})},n.getAttributeVerificationCode=function(r,i,o){if(null==this.signInUserSession||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:o},function(a,s){return a?i.onFailure(a):"function"==typeof i.inputVerificationCode?i.inputVerificationCode(s):i.onSuccess("SUCCESS")})},n.verifyAttribute=function(r,i,o){if(null==this.signInUserSession||!this.signInUserSession.isValid())return o.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:r,Code:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?o.onFailure(a):o.onSuccess("SUCCESS")})},n.getDevice=function(r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(i,o){return i?r.onFailure(i):r.onSuccess(o)})},n.forgetSpecificDevice=function(r,i){if(null==this.signInUserSession||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:r},function(o){return o?i.onFailure(o):i.onSuccess("SUCCESS")})},n.forgetDevice=function(r){var i=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:r.onFailure,onSuccess:function(a){return i.deviceKey=null,i.deviceGroupKey=null,i.randomPassword=null,i.clearCachedDeviceKeyAndPassword(),r.onSuccess(a)}})},n.setDeviceStatusRemembered=function(r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(i){return i?r.onFailure(i):r.onSuccess("SUCCESS")})},n.setDeviceStatusNotRemembered=function(r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(i){return i?r.onFailure(i):r.onSuccess("SUCCESS")})},n.listDevices=function(r,i,o){if(null==this.signInUserSession||!this.signInUserSession.isValid())return o.onFailure(new Error("User is not authenticated"));var a={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:r};i&&(a.PaginationToken=i),this.client.request("ListDevices",a,function(s,d){return s?o.onFailure(s):o.onSuccess(d)})},n.globalSignOut=function(r){var i=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(o){return o?r.onFailure(o):(i.clearCachedUser(),r.onSuccess("SUCCESS"))})},n.signOut=function(r){var i=this;r&&"function"==typeof r?this.getSession(function(o,a){if(o)return r(o);i.revokeTokens(function(s){i.cleanClientData(),r(s)})}):this.cleanClientData()},n.revokeTokens=function(r){if(void 0===r&&(r=function(){}),"function"!=typeof r)throw new Error("Invalid revokeTokenCallback. It should be a function.");if(!this.signInUserSession)return r(new Error("User is not authenticated"));if(!this.signInUserSession.getAccessToken())return r(new Error("No Access token available"));var s=this.signInUserSession.getRefreshToken().getToken(),d=this.signInUserSession.getAccessToken();if(this.isSessionRevocable(d)&&s)return this.revokeToken({token:s,callback:r});r()},n.isSessionRevocable=function(r){if(r&&"function"==typeof r.decodePayload)try{return!!r.decodePayload().origin_jti}catch{}return!1},n.cleanClientData=function(){this.signInUserSession=null,this.clearCachedUser()},n.revokeToken=function(r){var o=r.callback;this.client.requestWithRetry("RevokeToken",{Token:r.token,ClientId:this.pool.getClientId()},function(a){if(a)return o(a);o()})},n.sendMFASelectionAnswer=function(r,i){var o=this,a={};a.USERNAME=this.username,a.ANSWER=r;var s={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:a,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(s.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",s,function(d,l){return d?i.onFailure(d):(o.Session=l.Session,"SMS_MFA"===r?i.mfaRequired(l.ChallengeName,l.ChallengeParameters):"SOFTWARE_TOKEN_MFA"===r?i.totpRequired(l.ChallengeName,l.ChallengeParameters):void 0)})},n.getUserContextData=function(){return this.pool.getUserContextData(this.username)},n.associateSoftwareToken=function(r){var i=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(o,a){return o?r.onFailure(o):r.associateSecretCode(a.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(o,a){return o?r.onFailure(o):(i.Session=a.Session,r.associateSecretCode(a.SecretCode))})},n.verifySoftwareToken=function(r,i,o){var a=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:r,FriendlyDeviceName:i},function(s,d){return s?o.onFailure(s):o.onSuccess(d)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:r,FriendlyDeviceName:i},function(s,d){if(s)return o.onFailure(s);a.Session=d.Session;var l={};l.USERNAME=a.username;var f={ChallengeName:"MFA_SETUP",ClientId:a.pool.getClientId(),ChallengeResponses:l,Session:a.Session};a.getUserContextData()&&(f.UserContextData=a.getUserContextData()),a.client.request("RespondToAuthChallenge",f,function(_,m){return _?o.onFailure(_):(a.signInUserSession=a.getCognitoUserSession(m.AuthenticationResult),a.cacheTokens(),o.onSuccess(a.signInUserSession))})})},e}(),PC=(O(3024),"aws-amplify/5.0.4"),Ep={userAgent:PC+" js",product:"",navigator:null,isReactNative:!1};function tf(){}typeof navigator<"u"&&navigator.product&&("ReactNative"===(Ep.product=navigator.product||"",Ep.navigator=navigator||null,navigator.product)?(Ep.userAgent=PC+" react-native",Ep.isReactNative=!0):(Ep.userAgent=PC+" js",Ep.isReactNative=!1)),tf.prototype.userAgent=Ep.userAgent;const V$=tf;function Ob(e){var n="function"==typeof Map?new Map:void 0;return Ob=function(r){if(null===r||!function H$(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(r))return r;if("function"!=typeof r)throw new TypeError("Super expression must either be null or a function");if(typeof n<"u"){if(n.has(r))return n.get(r);n.set(r,i)}function i(){return Mb(r,arguments,AC(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),xy(i,r)},Ob(e)}function Mb(e,n,t){return(Mb=q$()?Reflect.construct:function(i,o,a){var s=[null];s.push.apply(s,o);var l=new(Function.bind.apply(i,s));return a&&xy(l,a.prototype),l}).apply(null,arguments)}function q$(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xy(e,n){return(xy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r})(e,n)}function AC(e){return(AC=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var $$=function(e){function n(t,r,i,o){var a;return(a=e.call(this,t)||this).code=r,a.name=i,a.statusCode=o,a}return function _M(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,xy(e,n)}(n,e),n}(Ob(Error)),K$=function(){function e(t,r,i){this.endpoint=r||"https://cognito-idp."+t+".amazonaws.com/";var a=(i||{}).credentials;this.fetchOptions=a?{credentials:a}:{}}var n=e.prototype;return n.promisifyRequest=function(r,i){var o=this;return new Promise(function(a,s){o.request(r,i,function(d,l){d?s(new $$(d.message,d.code,d.name,d.statusCode)):a(l)})})},n.requestWithRetry=function(r,i,o){var a=this;(function Z$(e,n,t){return void 0===t&&(t=3e5),bM(e,n,function W$(e){return function(r){var i=100*Math.pow(2,r)+100*Math.random();return!(i>e)&&i}}(t))})(function(d){return new Promise(function(l,f){a.request(r,d,function(_,m){_?f(_):l(m)})})},[i],5e3).then(function(d){return o(null,d)}).catch(function(d){return o(d)})},n.request=function(r,i,o){var d,s=Object.assign({},this.fetchOptions,{headers:{"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+r,"X-Amz-User-Agent":V$.prototype.userAgent},method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(i)});fetch(this.endpoint,s).then(function(f){return d=f,f},function(f){throw f instanceof TypeError?new Error("Network error"):f}).then(function(f){return f.json().catch(function(){return{}})}).then(function(f){if(d.ok)return o(null,f);var _=(f.__type||f.code).split("#").pop(),m=new Error(f.message||f.Message||null);return m.name=_,m.code=_,o(m)}).catch(function(f){if(d&&d.headers&&d.headers.get("x-amzn-errortype"))try{var _=d.headers.get("x-amzn-errortype").split(":")[0],m=new Error(d.status?d.status.toString():null);return m.code=_,m.name=_,m.statusCode=d.status,o(m)}catch{return o(f)}else f instanceof Error&&"Network error"===f.message&&(f.code="NetworkError");return o(f)})},e}();function bM(e,n,t,r){if(void 0===r&&(r=1),"function"!=typeof e)throw Error("functionToRetry must be a function");return JSON.stringify(n),e.apply(void 0,n).catch(function(i){if(function(n){return n&&n.nonRetryable}(i))throw i;var o=t(r,n,i);if(!1!==o)return new Promise(function(a){return setTimeout(a,o)}).then(function(){return bM(e,n,t,r+1)});throw i})}Error;var Q$=function(){function e(t,r){var i=t||{},o=i.UserPoolId,a=i.ClientId,s=i.endpoint,d=i.fetchOptions,l=i.AdvancedSecurityDataCollectionFlag;if(!o||!a)throw new Error("Both UserPoolId and ClientId are required.");if(o.length>55||!/^[\w-]+_[0-9a-zA-Z]+$/.test(o))throw new Error("Invalid UserPoolId format.");var f=o.split("_")[0];this.userPoolId=o,this.clientId=a,this.client=new K$(f,s,d),this.advancedSecurityDataCollectionFlag=!1!==l,this.storage=t.Storage||(new vM).getStorage(),r&&(this.wrapRefreshSessionCallback=r)}var n=e.prototype;return n.getUserPoolId=function(){return this.userPoolId},n.getClientId=function(){return this.clientId},n.signUp=function(r,i,o,a,s,d){var l=this,f={ClientId:this.clientId,Username:r,Password:i,UserAttributes:o,ValidationData:a,ClientMetadata:d};this.getUserContextData(r)&&(f.UserContextData=this.getUserContextData(r)),this.client.request("SignUp",f,function(_,m){if(_)return s(_,null);var D={user:new IC({Username:r,Pool:l,Storage:l.storage}),userConfirmed:m.UserConfirmed,userSub:m.UserSub,codeDeliveryDetails:m.CodeDeliveryDetails};return s(null,D)})},n.getCurrentUser=function(){var i=this.storage.getItem("CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser");return i?new IC({Username:i,Pool:this,Storage:this.storage}):null},n.getUserContextData=function(r){if(!(typeof AmazonCognitoAdvancedSecurityData>"u")){var i=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var o=i.getData(r,this.userPoolId,this.clientId);if(o)return{EncodedData:o}}return{}}},e}(),Ey=O(7355),e9=function(){function e(t){if(!t.domain)throw new Error("The domain of cookieStorage can not be undefined.");if(this.domain=t.domain,this.path=t.path?t.path:"/",this.expires=Object.prototype.hasOwnProperty.call(t,"expires")?t.expires:365,this.secure=!Object.prototype.hasOwnProperty.call(t,"secure")||t.secure,Object.prototype.hasOwnProperty.call(t,"sameSite")){if(!["strict","lax","none"].includes(t.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===t.sameSite&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=t.sameSite}else this.sameSite=null}var n=e.prototype;return n.setItem=function(r,i){var o={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(o.sameSite=this.sameSite),Ey.set(r,i,o),Ey.get(r)},n.getItem=function(r){return Ey.get(r)},n.removeItem=function(r){var i={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(i.sameSite=this.sameSite),Ey.remove(r,i)},n.clear=function(){for(var r=Ey.get(),i=Object.keys(r).length,o=0;o<i;++o)this.removeItem(Object.keys(r)[o]);return{}},e}(),qu=O(8762),n9=function(e){var n=window.open(e,"_self");return n?Promise.resolve(n):Promise.reject()},Hu=function(){return Hu=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Hu.apply(this,arguments)},Nb=function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})},Lb=function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},Sp=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},s9=typeof Symbol<"u"&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",RC=function(e,n,t){Jd.dispatch("auth",{event:e,data:n,message:t},"Auth",s9)},yg=new _a("OAuth"),u9=function(){function e(n){var t=n.config,r=n.cognitoClientId,i=n.scopes,o=void 0===i?[]:i;if(this._urlOpener=t.urlOpener||n9,this._config=t,this._cognitoClientId=r,!this.isValidScopes(o))throw Error("scopes must be a String Array");this._scopes=o}return e.prototype.isValidScopes=function(n){return Array.isArray(n)&&n.every(function(t){return"string"==typeof t})},e.prototype.oauthSignIn=function(n,t,r,i,o,a){void 0===n&&(n="code"),void 0===o&&(o=sy.Cognito);var s=this._generateState(32),d=a?s+"-"+function z7(e){return e.split("").map(function(n){return n.charCodeAt(0).toString(16).padStart(2,"0")}).join("")}(a):s;!function(e){window.sessionStorage.setItem("oauth_state",e)}(d);var l=this._generateRandom(128);!function(e){window.sessionStorage.setItem("ouath_pkce_key",e)}(l);var f=this._generateChallenge(l),m=this._scopes.join(" "),D="https://"+t+"/oauth2/authorize?"+Object.entries(Hu(Hu({redirect_uri:r,response_type:n,client_id:i,identity_provider:o,scope:m,state:d},"code"===n?{code_challenge:f}:{}),"code"===n?{code_challenge_method:"S256"}:{})).map(function(R){var ye=Sp(R,2),et=ye[1];return encodeURIComponent(ye[0])+"="+encodeURIComponent(et)}).join("&");yg.debug("Redirecting to "+D),this._urlOpener(D,r)},e.prototype._handleCodeFlow=function(n){return Nb(this,void 0,void 0,function(){var t,r,i,o,a,s,d,l,f,_,m,E,D,R;return Lb(this,function(ye){switch(ye.label){case 0:return t=((0,qu.Qc)(n).query||"").split("&").map(function(xe){return xe.split("=")}).reduce(function(xe,et){var We,vt=Sp(et,2),Mt=vt[0],en=vt[1];return Hu(Hu({},xe),((We={})[Mt]=en,We))},{code:void 0}).code,r=(0,qu.Qc)(n).pathname||"/",i=(0,qu.Qc)(this._config.redirectSignIn).pathname||"/",t&&r===i?(RC("codeFlow",{},"Retrieving tokens from "+(o="https://"+this._config.domain+"/oauth2/token")),a=hp(this._config)?this._cognitoClientId:this._config.clientID,s=hp(this._config)?this._config.redirectSignIn:this._config.redirectUri,d=function(){var e=window.sessionStorage.getItem("ouath_pkce_key");return window.sessionStorage.removeItem("ouath_pkce_key"),e}(),l=Hu({grant_type:"authorization_code",code:t,client_id:a,redirect_uri:s},d?{code_verifier:d}:{}),yg.debug("Calling token endpoint: "+o+" with",l),f=Object.entries(l).map(function(xe){var et=Sp(xe,2),vt=et[1];return encodeURIComponent(et[0])+"="+encodeURIComponent(vt)}).join("&"),[4,fetch(o,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:f})]):[2];case 1:return[4,ye.sent().json()];case 2:if(_=ye.sent(),m=_.access_token,E=_.refresh_token,D=_.id_token,R=_.error)throw new Error(R);return[2,{accessToken:m,refreshToken:E,idToken:D}]}})})},e.prototype._handleImplicitFlow=function(n){return Nb(this,void 0,void 0,function(){var t,r,i;return Lb(this,function(o){return t=((0,qu.Qc)(n).hash||"#").substr(1).split("&").map(function(a){return a.split("=")}).reduce(function(a,s){var d,l=Sp(s,2),f=l[0],_=l[1];return Hu(Hu({},a),((d={})[f]=_,d))},{id_token:void 0,access_token:void 0}),r=t.id_token,i=t.access_token,RC("implicitFlow",{},"Got tokens from "+n),yg.debug("Retrieving implicit tokens from "+n+" with"),[2,{accessToken:i,idToken:r,refreshToken:null}]})})},e.prototype.handleAuthResponse=function(n){return Nb(this,void 0,void 0,function(){var t,i,o,a,s,d;return Lb(this,function(l){switch(l.label){case 0:if(l.trys.push([0,5,,6]),t=n?Hu(Hu({},((0,qu.Qc)(n).hash||"#").substr(1).split("&").map(function(f){return f.split("=")}).reduce(function(f,_){var m=Sp(_,2);return f[m[0]]=m[1],f},{})),((0,qu.Qc)(n).query||"").split("&").map(function(f){return f.split("=")}).reduce(function(f,_){var m=Sp(_,2);return f[m[0]]=m[1],f},{})):{},i=t.error_description,t.error)throw new Error(i);return o=this._validateState(t),yg.debug("Starting "+this._config.responseType+" flow with "+n),"code"!==this._config.responseType?[3,2]:(a=[{}],[4,this._handleCodeFlow(n)]);case 1:return[2,Hu.apply(void 0,[Hu.apply(void 0,a.concat([l.sent()])),{state:o}])];case 2:return s=[{}],[4,this._handleImplicitFlow(n)];case 3:return[2,Hu.apply(void 0,[Hu.apply(void 0,s.concat([l.sent()])),{state:o}])];case 4:return[3,6];case 5:throw d=l.sent(),yg.error("Error handling auth response.",d),d;case 6:return[2]}})})},e.prototype._validateState=function(n){if(n){var t=function(){var e=window.sessionStorage.getItem("oauth_state");return window.sessionStorage.removeItem("oauth_state"),e}(),r=n.state;if(t&&t!==r)throw new Error("Invalid state in OAuth flow");return r}},e.prototype.signOut=function(){return Nb(this,void 0,void 0,function(){var n,t,r;return Lb(this,function(i){return n="https://"+this._config.domain+"/logout?",t=hp(this._config)?this._cognitoClientId:this._config.oauth.clientID,r=hp(this._config)?this._config.redirectSignOut:this._config.returnTo,n+=Object.entries({client_id:t,logout_uri:encodeURIComponent(r)}).map(function(o){var a=Sp(o,2);return a[0]+"="+a[1]}).join("&"),RC("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+n),yg.debug("Signing out from "+n),[2,this._urlOpener(n,r)]})})},e.prototype._generateState=function(n){for(var t="",r=n,i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";r>0;--r)t+=i[Math.round(Math.random()*(i.length-1))];return t},e.prototype._generateChallenge=function(n){return this._base64URL(dM()(n))},e.prototype._base64URL=function(n){return n.toString(CC()).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},e.prototype._generateRandom=function(n){var r=new Uint8Array(n);if(typeof window<"u"&&window.crypto)window.crypto.getRandomValues(r);else for(var i=0;i<n;i+=1)r[i]=Math.random()*"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~".length|0;return this._bufferToString(r)},e.prototype._bufferToString=function(n){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=[],i=0;i<n.byteLength;i+=1)r.push(t[n[i]%t.length]);return r.join("")},e}();const l9=u9;var lu=(()=>(function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool"}(lu||(lu={})),lu))(),wM=function(){var e=function(n,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(n,t)};return function(n,t){function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),d9=new _a("AuthError"),dh=function(e){function n(t){var r=this,i=h9[t],o=i.message,a=i.log;return(r=e.call(this,o)||this).constructor=n,Object.setPrototypeOf(r,n.prototype),r.name="AuthError",r.log=a||o,d9.error(r.log),r}return wM(n,e),n}(Error),f9=function(e){function n(t){var r=e.call(this,t)||this;return r.constructor=n,Object.setPrototypeOf(r,n.prototype),r.name="NoUserPoolError",r}return wM(n,e),n}(dh),h9={noConfig:{message:lu.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of amplify packages in your node_modules.\n\t\t\t\tRefer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)\n        "},missingAuthConfig:{message:lu.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties.\n            This error is typically caused by one of the following scenarios:\n\n            1. Did you run `amplify push` after adding auth via `amplify add auth`?\n                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n\n            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.\n        "},emptyUsername:{message:lu.EMPTY_USERNAME},invalidUsername:{message:lu.INVALID_USERNAME},emptyPassword:{message:lu.EMPTY_PASSWORD},emptyCode:{message:lu.EMPTY_CODE},signUpError:{message:lu.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:lu.NO_MFA},invalidMFA:{message:lu.INVALID_MFA},emptyChallengeResponse:{message:lu.EMPTY_CHALLENGE},noUserSession:{message:lu.NO_USER_SESSION},deviceConfig:{message:lu.DEVICE_CONFIG},networkError:{message:lu.NETWORK_ERROR},default:{message:lu.DEFAULT_MSG}},Bb=function(){return Bb=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Bb.apply(this,arguments)},Go=function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})},Vo=function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},xM=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},an=new _a("AuthClass"),EM="aws.cognito.signin.user.admin",m9=typeof Symbol<"u"&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",qo=function(e,n,t){Jd.dispatch("auth",{event:e,data:n,message:t},"Auth",m9)},v9=function(){function e(n){var t=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.Credentials=ic,this.wrapRefreshSessionCallback=function(r){return function(o,a){return a?qo("tokenRefresh",void 0,"New token retrieved"):qo("tokenRefresh_failure",o,"Failed to retrieve new token"),r(o,a)}},this.configure(n),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),Jd.listen("auth",function(r){switch(r.payload.event){case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true")}})}return e.prototype.getModuleName=function(){return"Auth"},e.prototype.configure=function(n){var t=this;if(!n)return this._config||{};an.debug("configure Auth");var r=Object.assign({},this._config,pC.parseMobilehubConfig(n).Auth,n);this._config=r;var i=this._config,o=i.userPoolId,a=i.userPoolWebClientId,s=i.cookieStorage,d=i.oauth,l=i.region,f=i.identityPoolId,_=i.mandatorySignIn,m=i.refreshHandlers,E=i.identityPoolRegion,D=i.clientMetadata,R=i.endpoint;if(this._config.storage){if(!this._isValidAuthStorage(this._config.storage))throw an.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=this._config.storage}else this._storage=s?new e9(s):n.ssr?new F7:(new X0).getStorage();if(this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),o){var ye={UserPoolId:o,ClientId:a,endpoint:R};ye.Storage=this._storage,this.userPool=new Q$(ye,this.wrapRefreshSessionCallback)}this.Credentials.configure({mandatorySignIn:_,region:E||l,userPoolId:o,identityPoolId:f,refreshHandlers:m,storage:this._storage});var xe=d?hp(this._config.oauth)?d:d.awsCognito:void 0;if(xe){var et=Object.assign({cognitoClientId:a,UserPoolId:o,domain:xe.domain,scopes:xe.scope,redirectSignIn:xe.redirectSignIn,redirectSignOut:xe.redirectSignOut,responseType:xe.responseType,Storage:this._storage,urlOpener:xe.urlOpener,clientMetadata:D},xe.options);this._oAuthHandler=new l9({scopes:et.scopes,config:et,cognitoClientId:et.cognitoClientId});var We={};!function(e){if(K0.browserOrNode().isBrowser&&window.location)vt={url:window.location.href},We[Mt=vt.url]||(We[Mt]=!0,t._handleAuthResponse(Mt));else if(!K0.browserOrNode().isNode)throw new Error("Not supported");var vt,Mt}()}return qo("configured",null,"The Auth category has been configured successfully"),this._config},e.prototype.signUp=function(n){for(var t=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];if(!this.userPool)return this.rejectNoUserPool();var l,o=null,a=null,s=[],d=null;if(n&&"string"==typeof n){o=n,a=r?r[0]:null;var f=r?r[1]:null,_=r?r[2]:null;f&&s.push(new vg({Name:"email",Value:f})),_&&s.push(new vg({Name:"phone_number",Value:_}))}else{if(!n||"object"!=typeof n)return this.rejectAuthError(wo.SignUpError);o=n.username,a=n.password,n&&n.clientMetadata?l=n.clientMetadata:this._config.clientMetadata&&(l=this._config.clientMetadata);var m=n.attributes;m&&Object.keys(m).map(function(D){s.push(new vg({Name:D,Value:m[D]}))});var E=n.validationData;E&&(d=[],Object.keys(E).map(function(D){d.push(new vg({Name:D,Value:E[D]}))}))}return o?a?(an.debug("signUp attrs:",s),an.debug("signUp validation data:",d),new Promise(function(D,R){t.userPool.signUp(o,a,s,d,function(ye,xe){ye?(qo("signUp_failure",ye,o+" failed to signup"),R(ye)):(qo("signUp",xe,o+" has signed up successfully"),D(xe))},l)})):this.rejectAuthError(wo.EmptyPassword):this.rejectAuthError(wo.EmptyUsername)},e.prototype.confirmSignUp=function(n,t,r){if(!this.userPool)return this.rejectNoUserPool();if(!n)return this.rejectAuthError(wo.EmptyUsername);if(!t)return this.rejectAuthError(wo.EmptyCode);var a,i=this.createCognitoUser(n),o=!r||"boolean"!=typeof r.forceAliasCreation||r.forceAliasCreation;return r&&r.clientMetadata?a=r.clientMetadata:this._config.clientMetadata&&(a=this._config.clientMetadata),new Promise(function(s,d){i.confirmRegistration(t,o,function(l,f){l?d(l):s(f)},a)})},e.prototype.resendSignUp=function(n,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!n)return this.rejectAuthError(wo.EmptyUsername);var r=this.createCognitoUser(n);return new Promise(function(i,o){r.resendConfirmationCode(function(a,s){a?o(a):i(s)},t)})},e.prototype.signIn=function(n,t,r){if(void 0===r&&(r=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var i=null,o=null,a={};if("string"==typeof n)i=n,o=t;else{if(!function R8(e){return!!e.username}(n))return this.rejectAuthError(wo.InvalidUsername);typeof t<"u"&&an.warn("The password should be defined under the first parameter object!"),i=n.username,o=n.password,a=n.validationData}if(!i)return this.rejectAuthError(wo.EmptyUsername);var s=new U7({Username:i,Password:o,ValidationData:a,ClientMetadata:r});return o?this.signInWithPassword(s):this.signInWithoutPassword(s)},e.prototype.authCallbacks=function(n,t,r){var i=this,o=this;return{onSuccess:function(a){return Go(i,void 0,void 0,function(){var s,d,l,f;return Vo(this,function(_){switch(_.label){case 0:an.debug(a),delete n.challengeName,delete n.challengeParam,_.label=1;case 1:return _.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return _.sent(),[4,this.Credentials.set(a,"session")];case 3:return s=_.sent(),an.debug("succeed to get cognito credentials",s),[3,9];case 4:return d=_.sent(),an.debug("cannot get cognito credentials",d),[3,9];case 5:return _.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return l=_.sent(),o.user=l,qo("signIn",l,"A user "+n.getUsername()+" has been signed in"),t(l),[3,8];case 7:return f=_.sent(),an.error("Failed to get the signed in user",f),r(f),[3,8];case 8:return[7];case 9:return[2]}})})},onFailure:function(a){an.debug("signIn failure",a),qo("signIn_failure",a,n.getUsername()+" failed to signin"),r(a)},customChallenge:function(a){an.debug("signIn custom challenge answer required"),n.challengeName="CUSTOM_CHALLENGE",n.challengeParam=a,t(n)},mfaRequired:function(a,s){an.debug("signIn MFA required"),n.challengeName=a,n.challengeParam=s,t(n)},mfaSetup:function(a,s){an.debug("signIn mfa setup",a),n.challengeName=a,n.challengeParam=s,t(n)},newPasswordRequired:function(a,s){an.debug("signIn new password"),n.challengeName="NEW_PASSWORD_REQUIRED",n.challengeParam={userAttributes:a,requiredAttributes:s},t(n)},totpRequired:function(a,s){an.debug("signIn totpRequired"),n.challengeName=a,n.challengeParam=s,t(n)},selectMFAType:function(a,s){an.debug("signIn selectMFAType",a),n.challengeName=a,n.challengeParam=s,t(n)}}},e.prototype.signInWithPassword=function(n){var t=this;if(this.pendingSignIn)throw new Error("Pending sign-in attempt already in progress");var r=this.createCognitoUser(n.getUsername());return this.pendingSignIn=new Promise(function(i,o){r.authenticateUser(n,t.authCallbacks(r,function(a){t.pendingSignIn=null,i(a)},function(a){t.pendingSignIn=null,o(a)}))}),this.pendingSignIn},e.prototype.signInWithoutPassword=function(n){var t=this,r=this.createCognitoUser(n.getUsername());return r.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise(function(i,o){r.initiateAuth(n,t.authCallbacks(r,i,o))})},e.prototype.getMFAOptions=function(n){return new Promise(function(t,r){n.getMFAOptions(function(i,o){if(i)return an.debug("get MFA Options failed",i),void r(i);an.debug("get MFA options success",o),t(o)})})},e.prototype.getPreferredMFA=function(n,t){var r=this,i=this;return new Promise(function(o,a){n.getUserData(function(l,f){return Go(r,void 0,void 0,function(){var _,m;return Vo(this,function(E){switch(E.label){case 0:if(!l)return[3,5];if(an.debug("getting preferred mfa failed",l),!this.isSessionInvalid(l))return[3,4];E.label=1;case 1:return E.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(n)];case 2:return E.sent(),[3,4];case 3:return _=E.sent(),a(new Error("Session is invalid due to: "+l.message+" and failed to clean up invalid session: "+_.message)),[2];case 4:return a(l),[2];case 5:return(m=i._getMfaTypeFromUserData(f))?(o(m),[2]):(a("invalid MFA Type"),[2])}})})},{bypassCache:!!t&&t.bypassCache,clientMetadata:r._config.clientMetadata})})},e.prototype._getMfaTypeFromUserData=function(n){var t=null,r=n.PreferredMfaSetting;if(r)t=r;else{var i=n.UserMFASettingList;i?0===i.length?t="NOMFA":an.debug("invalid case for getPreferredMFA",n):t=n.MFAOptions?"SMS_MFA":"NOMFA"}return t},e.prototype._getUserData=function(n,t){var r=this;return new Promise(function(i,o){n.getUserData(function(a,s){return Go(r,void 0,void 0,function(){var d;return Vo(this,function(l){switch(l.label){case 0:if(!a)return[3,5];if(an.debug("getting user data failed",a),!this.isSessionInvalid(a))return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(n)];case 2:return l.sent(),[3,4];case 3:return d=l.sent(),o(new Error("Session is invalid due to: "+a.message+" and failed to clean up invalid session: "+d.message)),[2];case 4:return o(a),[2];case 5:i(s),l.label=6;case 6:return[2]}})})},t)})},e.prototype.setPreferredMFA=function(n,t){return Go(this,void 0,void 0,function(){var r,i,o,a,d,l,_=this;return Vo(this,function(m){switch(m.label){case 0:return[4,this._getUserData(n,{bypassCache:!0,clientMetadata:r=this._config.clientMetadata})];case 1:switch(i=m.sent(),o=null,a=null,t){case"TOTP":case"SOFTWARE_TOKEN_MFA":return[3,2];case"SMS":case"SMS_MFA":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return a={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return o={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return d=i.UserMFASettingList,[4,this._getMfaTypeFromUserData(i)];case 5:if("NOMFA"===(l=m.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===l)o={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==l)return[2,this.rejectAuthError(wo.InvalidMFA)];a={PreferredMfa:!1,Enabled:!1}}return d&&0!==d.length&&d.forEach(function(E){"SMS_MFA"===E?o={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===E&&(a={PreferredMfa:!1,Enabled:!1})}),[3,7];case 6:return an.debug("no validmfa method provided"),[2,this.rejectAuthError(wo.NoMFA)];case 7:return[2,new Promise(function(E,D){n.setUserMfaPreference(o,a,function(R,ye){if(R)return an.debug("Set user mfa preference error",R),D(R);an.debug("Set user mfa success",ye),an.debug("Caching the latest user data into local"),n.getUserData(function(xe,et){return Go(_,void 0,void 0,function(){var We;return Vo(this,function(vt){switch(vt.label){case 0:if(!xe)return[3,5];if(an.debug("getting user data failed",xe),!this.isSessionInvalid(xe))return[3,4];vt.label=1;case 1:return vt.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(n)];case 2:return vt.sent(),[3,4];case 3:return We=vt.sent(),D(new Error("Session is invalid due to: "+xe.message+" and failed to clean up invalid session: "+We.message)),[2];case 4:return[2,D(xe)];case 5:return[2,E(ye)]}})})},{bypassCache:!0,clientMetadata:r})})})]}})})},e.prototype.disableSMS=function(n){return new Promise(function(t,r){n.disableMFA(function(i,o){if(i)return an.debug("disable mfa failed",i),void r(i);an.debug("disable mfa succeed",o),t(o)})})},e.prototype.enableSMS=function(n){return new Promise(function(t,r){n.enableMFA(function(i,o){if(i)return an.debug("enable mfa failed",i),void r(i);an.debug("enable mfa succeed",o),t(o)})})},e.prototype.setupTOTP=function(n){return new Promise(function(t,r){n.associateSoftwareToken({onFailure:function(i){an.debug("associateSoftwareToken failed",i),r(i)},associateSecretCode:function(i){an.debug("associateSoftwareToken sucess",i),t(i)}})})},e.prototype.verifyTotpToken=function(n,t){return an.debug("verification totp token",n,t),new Promise(function(r,i){n.verifySoftwareToken(t,"My TOTP device",{onFailure:function(o){an.debug("verifyTotpToken failed",o),i(o)},onSuccess:function(o){qo("signIn",n,"A user "+n.getUsername()+" has been signed in"),an.debug("verifyTotpToken success",o),r(o)}})})},e.prototype.confirmSignIn=function(n,t,r,i){var o=this;if(void 0===i&&(i=this._config.clientMetadata),!t)return this.rejectAuthError(wo.EmptyCode);var a=this;return new Promise(function(s,d){n.sendMFACode(t,{onSuccess:function(l){return Go(o,void 0,void 0,function(){var f,_;return Vo(this,function(m){switch(m.label){case 0:an.debug(l),m.label=1;case 1:return m.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return m.sent(),[4,this.Credentials.set(l,"session")];case 3:return f=m.sent(),an.debug("succeed to get cognito credentials",f),[3,6];case 4:return _=m.sent(),an.debug("cannot get cognito credentials",_),[3,6];case 5:return a.user=n,qo("signIn",n,"A user "+n.getUsername()+" has been signed in"),s(n),[7];case 6:return[2]}})})},onFailure:function(l){an.debug("confirm signIn failure",l),d(l)}},r,i)})},e.prototype.completeNewPassword=function(n,t,r,i){var o=this;if(void 0===r&&(r={}),void 0===i&&(i=this._config.clientMetadata),!t)return this.rejectAuthError(wo.EmptyPassword);var a=this;return new Promise(function(s,d){n.completeNewPasswordChallenge(t,r,{onSuccess:function(l){return Go(o,void 0,void 0,function(){var f,_;return Vo(this,function(m){switch(m.label){case 0:an.debug(l),m.label=1;case 1:return m.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return m.sent(),[4,this.Credentials.set(l,"session")];case 3:return f=m.sent(),an.debug("succeed to get cognito credentials",f),[3,6];case 4:return _=m.sent(),an.debug("cannot get cognito credentials",_),[3,6];case 5:return a.user=n,qo("signIn",n,"A user "+n.getUsername()+" has been signed in"),s(n),[7];case 6:return[2]}})})},onFailure:function(l){an.debug("completeNewPassword failure",l),qo("completeNewPassword_failure",l,o.user+" failed to complete the new password flow"),d(l)},mfaRequired:function(l,f){an.debug("signIn MFA required"),n.challengeName=l,n.challengeParam=f,s(n)},mfaSetup:function(l,f){an.debug("signIn mfa setup",l),n.challengeName=l,n.challengeParam=f,s(n)},totpRequired:function(l,f){an.debug("signIn mfa setup",l),n.challengeName=l,n.challengeParam=f,s(n)}},i)})},e.prototype.sendCustomChallengeAnswer=function(n,t,r){var i=this;return void 0===r&&(r=this._config.clientMetadata),this.userPool?t?new Promise(function(a,s){n.sendCustomChallengeAnswer(t,i.authCallbacks(n,a,s),r)}):this.rejectAuthError(wo.EmptyChallengeResponse):this.rejectNoUserPool()},e.prototype.deleteUserAttributes=function(n,t){var r=this;return new Promise(function(i,o){r.userSession(n).then(function(a){n.deleteAttributes(t,function(s,d){return s?o(s):i(d)})})})},e.prototype.deleteUser=function(){return Go(this,void 0,void 0,function(){var n,t,r=this;return Vo(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._storageSync];case 1:return i.sent(),[3,3];case 2:throw n=i.sent(),an.debug("Failed to sync cache info into memory",n),new Error(n);case 3:return t=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise(function(o,a){return Go(r,void 0,void 0,function(){var s,d=this;return Vo(this,function(l){if(this.userPool){if(!(s=this.userPool.getCurrentUser()))return an.debug("Failed to get user from user pool"),[2,a(new Error("No current user."))];s.getSession(function(f,_){return Go(d,void 0,void 0,function(){var m,E=this;return Vo(this,function(D){switch(D.label){case 0:if(!f)return[3,5];if(an.debug("Failed to get the user session",f),!this.isSessionInvalid(f))return[3,4];D.label=1;case 1:return D.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(s)];case 2:return D.sent(),[3,4];case 3:return m=D.sent(),a(new Error("Session is invalid due to: "+f.message+" and failed to clean up invalid session: "+m.message)),[2];case 4:return[2,a(f)];case 5:s.deleteUser(function(R,ye){if(R)a(R);else{qo("userDeleted",ye,"The authenticated user has been deleted."),s.signOut(),E.user=null;try{E.cleanCachedItems()}catch{an.debug("failed to clear cached items")}t?E.oAuthSignOutRedirect(o,a):(qo("signOut",E.user,"A user has been signed out"),o(ye))}}),D.label=6;case 6:return[2]}})})})}else an.debug("no Congito User pool"),a(new Error("Cognito User pool does not exist"));return[2]})})})]}})})},e.prototype.updateUserAttributes=function(n,t,r){void 0===r&&(r=this._config.clientMetadata);var i=[],o=this;return new Promise(function(a,s){o.userSession(n).then(function(d){for(var l in t)"sub"!==l&&l.indexOf("_verified")<0&&i.push({Name:l,Value:t[l]});n.updateAttributes(i,function(_,m){return _?s(_):a(m)},r)})})},e.prototype.userAttributes=function(n){var t=this;return new Promise(function(r,i){t.userSession(n).then(function(o){n.getUserAttributes(function(a,s){a?i(a):r(s)})})})},e.prototype.verifiedContact=function(n){var t=this;return this.userAttributes(n).then(function(r){var i=t.attributesToObject(r),o={},a={};return i.email&&(i.email_verified?a.email=i.email:o.email=i.email),i.phone_number&&(i.phone_number_verified?a.phone_number=i.phone_number:o.phone_number=i.phone_number),{verified:a,unverified:o}})},e.prototype.isErrorWithMessage=function(n){return"object"==typeof n&&Object.prototype.hasOwnProperty.call(n,"message")},e.prototype.isTokenRevokedError=function(n){return this.isErrorWithMessage(n)&&"Access Token has been revoked"===n.message},e.prototype.isRefreshTokenRevokedError=function(n){return this.isErrorWithMessage(n)&&"Refresh Token has been revoked"===n.message},e.prototype.isUserDisabledError=function(n){return this.isErrorWithMessage(n)&&"User is disabled."===n.message},e.prototype.isUserDoesNotExistError=function(n){return this.isErrorWithMessage(n)&&"User does not exist."===n.message},e.prototype.isRefreshTokenExpiredError=function(n){return this.isErrorWithMessage(n)&&"Refresh Token has expired"===n.message},e.prototype.isSignedInHostedUI=function(){return this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI")},e.prototype.isSessionInvalid=function(n){return this.isUserDisabledError(n)||this.isUserDoesNotExistError(n)||this.isTokenRevokedError(n)||this.isRefreshTokenRevokedError(n)||this.isRefreshTokenExpiredError(n)},e.prototype.cleanUpInvalidSession=function(n){return Go(this,void 0,void 0,function(){var r=this;return Vo(this,function(i){switch(i.label){case 0:n.signOut(),this.user=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.cleanCachedItems()];case 2:return i.sent(),[3,4];case 3:return i.sent(),an.debug("failed to clear cached items"),[3,4];case 4:return this.isSignedInHostedUI()?[2,new Promise(function(o,a){r.oAuthSignOutRedirect(o,a)})]:(qo("signOut",this.user,"A user has been signed out"),[2])}})})},e.prototype.currentUserPoolUser=function(n){var t=this;return this.userPool?new Promise(function(r,i){t._storageSync.then(function(){return Go(t,void 0,void 0,function(){var o,s=this;return Vo(this,function(d){switch(d.label){case 0:return this.isOAuthInProgress()?(an.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise(function(l){var f=setTimeout(function(){an.debug("OAuth signIn in progress timeout"),Jd.remove("auth",_),l()},1e4);function _(m){var D=m.payload.event;("cognitoHostedUI"===D||"cognitoHostedUI_failure"===D)&&(an.debug("OAuth signIn resolved: "+D),clearTimeout(f),Jd.remove("auth",_),l())}Jd.listen("auth",_)})]):[3,2];case 1:d.sent(),d.label=2;case 2:return(o=this.userPool.getCurrentUser())?(o.getSession(function(l,f){return Go(s,void 0,void 0,function(){var _,m,E,D,ye=this;return Vo(this,function(xe){switch(xe.label){case 0:if(!l)return[3,5];if(an.debug("Failed to get the user session",l),!this.isSessionInvalid(l))return[3,4];xe.label=1;case 1:return xe.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(o)];case 2:return xe.sent(),[3,4];case 3:return _=xe.sent(),i(new Error("Session is invalid due to: "+l.message+" and failed to clean up invalid session: "+_.message)),[2];case 4:return i(l),[2];case 5:return(m=!!n&&n.bypassCache)?[4,this.Credentials.clear()]:[3,7];case 6:xe.sent(),xe.label=7;case 7:return E=this._config.clientMetadata,(void 0===(D=f.getAccessToken().decodePayload().scope)?"":D).split(" ").includes(EM)?(o.getUserData(function(et,We){return Go(ye,void 0,void 0,function(){var vt,Mt,en,nr,Zr,Ci;return Vo(this,function(cr){switch(cr.label){case 0:if(!et)return[3,7];if(an.debug("getting user data failed",et),!this.isSessionInvalid(et))return[3,5];cr.label=1;case 1:return cr.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(o)];case 2:return cr.sent(),[3,4];case 3:return vt=cr.sent(),i(new Error("Session is invalid due to: "+et.message+" and failed to clean up invalid session: "+vt.message)),[2];case 4:return i(et),[3,6];case 5:r(o),cr.label=6;case 6:return[2];case 7:for(Mt=We.PreferredMfaSetting||"NOMFA",en=[],nr=0;nr<We.UserAttributes.length;nr++)Zr=new vg({Name:We.UserAttributes[nr].Name,Value:We.UserAttributes[nr].Value}),en.push(Zr);return Ci=this.attributesToObject(en),Object.assign(o,{attributes:Ci,preferredMFA:Mt}),[2,r(o)]}})})},{bypassCache:m,clientMetadata:E}),[2]):(an.debug("Unable to get the user data because the "+EM+" is not in the scopes of the access token"),[2,r(o)])}})})},{clientMetadata:this._config.clientMetadata}),[2]):(an.debug("Failed to get user from user pool"),i("No current user"),[2])}})})}).catch(function(o){return an.debug("Failed to sync cache info into memory",o),i(o)})}):this.rejectNoUserPool()},e.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},e.prototype.currentAuthenticatedUser=function(n){return Go(this,void 0,void 0,function(){var t,r,i,o,a;return Vo(this,function(s){switch(s.label){case 0:an.debug("getting current authenticated user"),t=null,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._storageSync];case 2:return s.sent(),[3,4];case 3:throw r=s.sent(),an.debug("Failed to sync cache info into memory",r),r;case 4:try{(i=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")))&&(t=Bb(Bb({},i.user),{token:i.token}))}catch{an.debug("cannot load federated user from auth storage")}return t?(this.user=t,an.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:an.debug("get current authenticated userpool user"),o=null,s.label=6;case 6:return s.trys.push([6,8,,9]),[4,this.currentUserPoolUser(n)];case 7:return o=s.sent(),[3,9];case 8:return"No userPool"===(a=s.sent())&&an.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),an.debug("The user is not authenticated by the error",a),[2,Promise.reject("The user is not authenticated")];case 9:return this.user=o,[2,this.user]}})})},e.prototype.currentSession=function(){var n=this;return an.debug("Getting current session"),this.userPool?new Promise(function(t,r){n.currentUserPoolUser().then(function(i){n.userSession(i).then(function(o){t(o)}).catch(function(o){an.debug("Failed to get the current session",o),r(o)})}).catch(function(i){an.debug("Failed to get the current user",i),r(i)})}):this.rejectNoUserPool()},e.prototype.userSession=function(n){var t=this;if(!n)return an.debug("the user is null"),this.rejectAuthError(wo.NoUserSession);var r=this._config.clientMetadata;return new Promise(function(i,o){an.debug("Getting the session from this user:",n),n.getSession(function(a,s){return Go(t,void 0,void 0,function(){var d;return Vo(this,function(l){switch(l.label){case 0:if(!a)return[3,5];if(an.debug("Failed to get the session from user",n),!this.isSessionInvalid(a))return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(n)];case 2:return l.sent(),[3,4];case 3:return d=l.sent(),o(new Error("Session is invalid due to: "+a.message+" and failed to clean up invalid session: "+d.message)),[2];case 4:return o(a),[2];case 5:return an.debug("Succeed to get the user session",s),i(s),[2]}})})},{clientMetadata:r})})},e.prototype.currentUserCredentials=function(){return Go(this,void 0,void 0,function(){var n,t,r=this;return Vo(this,function(i){switch(i.label){case 0:an.debug("Getting current user credentials"),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._storageSync];case 2:return i.sent(),[3,4];case 3:throw n=i.sent(),an.debug("Failed to sync cache info into memory",n),n;case 4:t=null;try{t=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(o){an.debug("failed to get or parse item aws-amplify-federatedInfo",o)}return t?[2,this.Credentials.refreshFederatedToken(t)]:[2,this.currentSession().then(function(o){return an.debug("getting session success",o),r.Credentials.set(o,"session")}).catch(function(){return an.debug("getting guest credentials"),r.Credentials.set(null,"guest")})]}})})},e.prototype.currentCredentials=function(){return an.debug("getting current credentials"),this.Credentials.get()},e.prototype.verifyUserAttribute=function(n,t,r){return void 0===r&&(r=this._config.clientMetadata),new Promise(function(i,o){n.getAttributeVerificationCode(t,{onSuccess:function(a){return i(a)},onFailure:function(a){return o(a)}},r)})},e.prototype.verifyUserAttributeSubmit=function(n,t,r){return r?new Promise(function(i,o){n.verifyAttribute(t,r,{onSuccess:function(a){i(a)},onFailure:function(a){o(a)}})}):this.rejectAuthError(wo.EmptyCode)},e.prototype.verifyCurrentUserAttribute=function(n){var t=this;return t.currentUserPoolUser().then(function(r){return t.verifyUserAttribute(r,n)})},e.prototype.verifyCurrentUserAttributeSubmit=function(n,t){var r=this;return r.currentUserPoolUser().then(function(i){return r.verifyUserAttributeSubmit(i,n,t)})},e.prototype.cognitoIdentitySignOut=function(n,t){return Go(this,void 0,void 0,function(){var r,i,o=this;return Vo(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this._storageSync];case 1:return a.sent(),[3,3];case 2:throw r=a.sent(),an.debug("Failed to sync cache info into memory",r),r;case 3:return i=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise(function(s,d){n&&n.global?(an.debug("user global sign out",t),t.getSession(function(f,_){return Go(o,void 0,void 0,function(){var m,E=this;return Vo(this,function(D){switch(D.label){case 0:if(!f)return[3,5];if(an.debug("failed to get the user session",f),!this.isSessionInvalid(f))return[3,4];D.label=1;case 1:return D.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(t)];case 2:return D.sent(),[3,4];case 3:return m=D.sent(),d(new Error("Session is invalid due to: "+f.message+" and failed to clean up invalid session: "+m.message)),[2];case 4:return[2,d(f)];case 5:return t.globalSignOut({onSuccess:function(R){if(an.debug("global sign out success"),!i)return s();E.oAuthSignOutRedirect(s,d)},onFailure:function(R){return an.debug("global sign out failed",R),d(R)}}),[2]}})})},{clientMetadata:o._config.clientMetadata})):(an.debug("user sign out",t),t.signOut(function(){if(!i)return s();o.oAuthSignOutRedirect(s,d)}))})]}})})},e.prototype.oAuthSignOutRedirect=function(n,t){K0.browserOrNode().isBrowser?this.oAuthSignOutRedirectOrReject(t):this.oAuthSignOutAndResolve(n)},e.prototype.oAuthSignOutAndResolve=function(n){this._oAuthHandler.signOut(),n()},e.prototype.oAuthSignOutRedirectOrReject=function(n){this._oAuthHandler.signOut(),setTimeout(function(){return n(Error("Signout timeout fail"))},3e3)},e.prototype.signOut=function(n){return Go(this,void 0,void 0,function(){var r;return Vo(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return i.sent(),[3,3];case 2:return i.sent(),an.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(r=this.userPool.getCurrentUser())?[4,this.cognitoIdentitySignOut(n,r)]:[3,5]:[3,7];case 4:return i.sent(),[3,6];case 5:an.debug("no current Cognito user"),i.label=6;case 6:return[3,8];case 7:an.debug("no Cognito User pool"),i.label=8;case 8:return qo("signOut",this.user,"A user has been signed out"),this.user=null,[2]}})})},e.prototype.cleanCachedItems=function(){return Go(this,void 0,void 0,function(){return Vo(this,function(n){switch(n.label){case 0:return[4,this.Credentials.clear()];case 1:return n.sent(),[2]}})})},e.prototype.changePassword=function(n,t,r,i){var o=this;return void 0===i&&(i=this._config.clientMetadata),new Promise(function(a,s){o.userSession(n).then(function(d){n.changePassword(t,r,function(l,f){return l?(an.debug("change password failure",l),s(l)):a(f)},i)})})},e.prototype.forgotPassword=function(n,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!n)return this.rejectAuthError(wo.EmptyUsername);var r=this.createCognitoUser(n);return new Promise(function(i,o){r.forgotPassword({onSuccess:function(){i()},onFailure:function(a){an.debug("forgot password failure",a),qo("forgotPassword_failure",a,n+" forgotPassword failed"),o(a)},inputVerificationCode:function(a){qo("forgotPassword",r,n+" has initiated forgot password flow"),i(a)}},t)})},e.prototype.forgotPasswordSubmit=function(n,t,r,i){if(void 0===i&&(i=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!n)return this.rejectAuthError(wo.EmptyUsername);if(!t)return this.rejectAuthError(wo.EmptyCode);if(!r)return this.rejectAuthError(wo.EmptyPassword);var o=this.createCognitoUser(n);return new Promise(function(a,s){o.confirmPassword(t,r,{onSuccess:function(d){qo("forgotPasswordSubmit",o,n+" forgotPasswordSubmit successful"),a(d)},onFailure:function(d){qo("forgotPasswordSubmit_failure",d,n+" forgotPasswordSubmit failed"),s(d)}},i)})},e.prototype.currentUserInfo=function(){return Go(this,void 0,void 0,function(){var n,t,r,i,o,s,d;return Vo(this,function(l){switch(l.label){case 0:return(n=this.Credentials.getCredSource())&&"aws"!==n&&"userPool"!==n?[3,9]:[4,this.currentUserPoolUser().catch(function(f){return an.error(f)})];case 1:if(!(d=l.sent()))return[2,null];l.label=2;case 2:return l.trys.push([2,8,,9]),[4,this.userAttributes(d)];case 3:t=l.sent(),r=this.attributesToObject(t),i=null,l.label=4;case 4:return l.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return i=l.sent(),[3,7];case 6:return o=l.sent(),an.debug("Failed to retrieve credentials while getting current user info",o),[3,7];case 7:return[2,{id:i?i.identityId:void 0,username:d.getUsername(),attributes:r}];case 8:return s=l.sent(),an.error("currentUserInfo error",s),[2,{}];case 9:return"federated"===n?[2,(d=this.user)||{}]:[2]}})})},e.prototype.federatedSignIn=function(n,t,r){return Go(this,void 0,void 0,function(){var i,o,a,s,d,l,E,D;return Vo(this,function(R){switch(R.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(typeof n>"u"&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return xS(n)||function P8(e){return e&&!!["customProvider"].find(function(t){return e.hasOwnProperty(t)})}(n)||function A8(e){return e&&!!["customState"].find(function(t){return e.hasOwnProperty(t)})}(n)||typeof n>"u"?(d=xS(i=n||{provider:sy.Cognito})?i.provider:i.customProvider,xS(i),o=i.customState,this._config.userPoolId&&(a=hp(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,s=hp(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,s,a,d,o)),[3,4]):[3,1];case 1:d=n;try{(l=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&an.warn("There is already a signed in user: "+l+" in your app.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch{}return[4,this.Credentials.set({provider:d,token:t.token,identity_id:t.identity_id,user:r,expires_at:t.expires_at},"federation")];case 2:return E=R.sent(),[4,this.currentAuthenticatedUser()];case 3:return D=R.sent(),qo("signIn",D,"A user "+D.username+" has been signed in"),an.debug("federated sign in credentials",E),[2,E];case 4:return[2]}})})},e.prototype._handleAuthResponse=function(n){return Go(this,void 0,void 0,function(){var t,r,i,o,a,d,l,f,_,m,E,D,R;return Vo(this,function(ye){switch(ye.label){case 0:if(this.oAuthFlowInProgress)return an.debug("Skipping URL "+n+" current flow in progress"),[2];ye.label=1;case 1:if(ye.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(qo("parsingCallbackUrl",{url:n},"The callback url is being parsed"),t=n||(K0.browserOrNode().isBrowser?window.location.href:""),r=!!((0,qu.Qc)(t).query||"").split("&").map(function(xe){return xe.split("=")}).find(function(xe){var We=xM(xe,1)[0];return"code"===We||"error"===We}),i=!!((0,qu.Qc)(t).hash||"#").substr(1).split("&").map(function(xe){return xe.split("=")}).find(function(xe){var We=xM(xe,1)[0];return"access_token"===We||"error"===We}),!r&&!i)return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),ye.label=2;case 2:return ye.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(t)];case 3:return o=ye.sent(),a=o.accessToken,d=o.refreshToken,l=o.state,f=new TC({IdToken:new EC({IdToken:o.idToken}),RefreshToken:new SC({RefreshToken:d}),AccessToken:new wC({AccessToken:a})}),_=void 0,this._config.identityPoolId?[4,this.Credentials.set(f,"session")]:[3,5];case 4:_=ye.sent(),an.debug("AWS credentials",_),ye.label=5;case 5:return m=/-/.test(l),(E=this.createCognitoUser(f.getIdToken().decodePayload()["cognito:username"])).setSignInUserSession(f),window&&typeof window.history<"u"&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),qo("signIn",E,"A user "+E.getUsername()+" has been signed in"),qo("cognitoHostedUI",E,"A user "+E.getUsername()+" has been signed in via Cognito Hosted UI"),m&&(D=l.split("-").splice(1).join("-"),qo("customOAuthState",function j7(e){return e.match(/.{2}/g).map(function(n){return String.fromCharCode(parseInt(n,16))}).join("")}(D),"State for user "+E.getUsername())),[2,_];case 6:return R=ye.sent(),an.debug("Error in cognito hosted auth response",R),window&&typeof window.history<"u"&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),qo("signIn_failure",R,"The OAuth response flow failed"),qo("cognitoHostedUI_failure",R,"A failure occurred when returning to the Cognito Hosted UI"),qo("customState_failure",R,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}})})},e.prototype.essentialCredentials=function(n){return{accessKeyId:n.accessKeyId,sessionToken:n.sessionToken,secretAccessKey:n.secretAccessKey,identityId:n.identityId,authenticated:n.authenticated}},e.prototype.attributesToObject=function(n){var t=this,r={};return n&&n.map(function(i){r[i.Name]="email_verified"===i.Name||"phone_number_verified"===i.Name?t.isTruthyString(i.Value)||!0===i.Value:i.Value}),r},e.prototype.isTruthyString=function(n){return"function"==typeof n.toLowerCase&&"true"===n.toLowerCase()},e.prototype.createCognitoUser=function(n){var t={Username:n,Pool:this.userPool};t.Storage=this._storage;var r=this._config.authenticationFlowType,i=new IC(t);return r&&i.setAuthenticationFlowType(r),i},e.prototype._isValidAuthStorage=function(n){return!!n&&"function"==typeof n.getItem&&"function"==typeof n.setItem&&"function"==typeof n.removeItem&&"function"==typeof n.clear},e.prototype.noUserPoolErrorHandler=function(n){return!n||n.userPoolId&&n.identityPoolId?wo.NoConfig:wo.MissingAuthConfig},e.prototype.rejectAuthError=function(n){return Promise.reject(new dh(n))},e.prototype.rejectNoUserPool=function(){var n=this.noUserPoolErrorHandler(this._config);return Promise.reject(new f9(n))},e.prototype.rememberDevice=function(){return Go(this,void 0,void 0,function(){var n,t;return Vo(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return n=r.sent(),[3,3];case 2:return t=r.sent(),an.debug("The user is not authenticated by the error",t),[2,Promise.reject("The user is not authenticated")];case 3:return n.getCachedDeviceKeyAndPassword(),[2,new Promise(function(i,o){n.setDeviceStatusRemembered({onSuccess:function(a){i(a)},onFailure:function(a){o("InvalidParameterException"===a.code?new dh(wo.DeviceConfig):"NetworkError"===a.code?new dh(wo.NetworkError):a)}})})]}})})},e.prototype.forgetDevice=function(){return Go(this,void 0,void 0,function(){var n,t;return Vo(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return n=r.sent(),[3,3];case 2:return t=r.sent(),an.debug("The user is not authenticated by the error",t),[2,Promise.reject("The user is not authenticated")];case 3:return n.getCachedDeviceKeyAndPassword(),[2,new Promise(function(i,o){n.forgetDevice({onSuccess:function(a){i(a)},onFailure:function(a){o("InvalidParameterException"===a.code?new dh(wo.DeviceConfig):"NetworkError"===a.code?new dh(wo.NetworkError):a)}})})]}})})},e.prototype.fetchDevices=function(){return Go(this,void 0,void 0,function(){var n,t;return Vo(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return n=r.sent(),[3,3];case 2:throw t=r.sent(),an.debug("The user is not authenticated by the error",t),new Error("The user is not authenticated");case 3:return n.getCachedDeviceKeyAndPassword(),[2,new Promise(function(i,o){n.listDevices(60,null,{onSuccess:function(s){var d=s.Devices.map(function(l){var f=l.DeviceAttributes.find(function(m){return"device_name"===m.Name})||{};return{id:l.DeviceKey,name:f.Value}});i(d)},onFailure:function(s){o("InvalidParameterException"===s.code?new dh(wo.DeviceConfig):"NetworkError"===s.code?new dh(wo.NetworkError):s)}})})]}})})},e}(),SM=new v9(null);Gu.register(SM);var Bc={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new X0).getStorage()};function CM(e){var n=0;n=e.length;for(var t=e.length;t>=0;t-=1){var r=e.charCodeAt(t);r>127&&r<=2047?n+=1:r>2047&&r<=65535&&(n+=2),r>=56320&&r<=57343&&(t-=1)}return n}function _g(){return(new Date).getTime()}function Fb(e){return Number.isInteger?Number.isInteger(e):function y9(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}(e)}var zb={},nf=(function(){function e(){}e.clear=function(){zb={}},e.getItem=function(n){return zb[n]||null},e.setItem=function(n,t){zb[n]=t},e.removeItem=function(n){delete zb[n]}}(),new _a("StorageCache")),_9=function(){function e(n){this.config=Object.assign({},n),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}return e.prototype.getModuleName=function(){return"Cache"},e.prototype.checkConfig=function(){Fb(this.config.capacityInBytes)||(nf.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=Bc.capacityInBytes),Fb(this.config.itemMaxSize)||(nf.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=Bc.itemMaxSize),Fb(this.config.defaultTTL)||(nf.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=Bc.defaultTTL),Fb(this.config.defaultPriority)||(nf.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=Bc.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(nf.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=Bc.itemMaxSize),(this.config.defaultPriority>5||this.config.defaultPriority<1)&&(nf.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=Bc.defaultPriority),(Number(this.config.warningThreshold)>1||Number(this.config.warningThreshold)<0)&&(nf.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=Bc.warningThreshold),this.config.capacityInBytes>5242880&&(nf.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=Bc.capacityInBytes)},e.prototype.fillCacheItem=function(n,t,r){var i={key:n,data:t,timestamp:_g(),visitedTime:_g(),priority:r.priority,expires:r.expires,type:typeof t,byteSize:0};return i.byteSize=CM(JSON.stringify(i)),i.byteSize=CM(JSON.stringify(i)),i},e.prototype.configure=function(n){return n?(n.keyPrefix&&nf.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,n,n.Cache),this.checkConfig(),this.config):this.config},e}(),b9=function(){var e=function(n,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(n,t)};return function(n,t){function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),$u=new _a("Cache"),w9=function(e){function n(t){var r=this,i=t?Object.assign({},Bc,t):Bc;return(r=e.call(this,i)||this).config.storage=i.storage,r.getItem=r.getItem.bind(r),r.setItem=r.setItem.bind(r),r.removeItem=r.removeItem.bind(r),r}return b9(n,e),n.prototype._decreaseCurSizeInBytes=function(t){var r=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(r-t).toString())},n.prototype._increaseCurSizeInBytes=function(t){var r=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(r+t).toString())},n.prototype._refreshItem=function(t,r){return t.visitedTime=_g(),this.config.storage.setItem(r,JSON.stringify(t)),t},n.prototype._isExpired=function(t){var r=this.config.storage.getItem(t),i=JSON.parse(r);return _g()>=i.expires},n.prototype._removeItem=function(t,r){var i=r||JSON.parse(this.config.storage.getItem(t)).byteSize;this._decreaseCurSizeInBytes(i),this.config.storage.removeItem(t)},n.prototype._setItem=function(t,r){this._increaseCurSizeInBytes(r.byteSize);try{this.config.storage.setItem(t,JSON.stringify(r))}catch(i){this._decreaseCurSizeInBytes(r.byteSize),$u.error("Failed to set item "+i)}},n.prototype._sizeToPop=function(t){var r=this.getCacheCurSize()+t-this.config.capacityInBytes,i=(1-this.config.warningThreshold)*this.config.capacityInBytes;return r>i?r:i},n.prototype._isCacheFull=function(t){return t+this.getCacheCurSize()>this.config.capacityInBytes},n.prototype._findValidKeys=function(){for(var t=[],r=[],i=0;i<this.config.storage.length;i+=1)r.push(this.config.storage.key(i));for(i=0;i<r.length;i+=1){var o=r[i];0===o.indexOf(this.config.keyPrefix)&&o!==this.cacheCurSizeKey&&(this._isExpired(o)?this._removeItem(o):t.push(o))}return t},n.prototype._popOutItems=function(t,r){for(var i=[],o=r,a=0;a<t.length;a+=1){var s=this.config.storage.getItem(t[a]);if(null!=s){var d=JSON.parse(s);i.push(d)}}for(i.sort(function(l,f){return l.priority>f.priority?-1:l.priority<f.priority?1:l.visitedTime<f.visitedTime?-1:1}),a=0;a<i.length;a+=1)if(this._removeItem(i[a].key,i[a].byteSize),(o-=i[a].byteSize)<=0)return},n.prototype.setItem=function(t,r,i){$u.log("Set item: key is "+t+", value is "+r+" with options: "+i);var o=this.config.keyPrefix+t;if(o!==this.config.keyPrefix&&o!==this.cacheCurSizeKey)if(typeof r>"u")$u.warn("The value of item should not be undefined!");else{var a={priority:i&&void 0!==i.priority?i.priority:this.config.defaultPriority,expires:i&&void 0!==i.expires?i.expires:this.config.defaultTTL+_g()};if(a.priority<1||a.priority>5)$u.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else{var s=this.fillCacheItem(o,r,a);if(s.byteSize>this.config.itemMaxSize)$u.warn("Item with key: "+t+" you are trying to put into is too big!");else try{var d=this.config.storage.getItem(o);if(d&&this._removeItem(o,JSON.parse(d).byteSize),this._isCacheFull(s.byteSize)){var l=this._findValidKeys();if(this._isCacheFull(s.byteSize)){var f=this._sizeToPop(s.byteSize);this._popOutItems(l,f)}}this._setItem(o,s)}catch(_){$u.warn("setItem failed! "+_)}}}else $u.warn("Invalid key: should not be empty or 'CurSize'")},n.prototype.getItem=function(t,r){$u.log("Get item: key is "+t+" with options "+r);var i=null,o=this.config.keyPrefix+t;if(o===this.config.keyPrefix||o===this.cacheCurSizeKey)return $u.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(i=this.config.storage.getItem(o))){if(!this._isExpired(o)){var a=JSON.parse(i);return(a=this._refreshItem(a,o)).data}this._removeItem(o,JSON.parse(i).byteSize),i=null}if(r&&void 0!==r.callback){var s=r.callback();return null!==s&&this.setItem(t,s,r),s}return null}catch(d){return $u.warn("getItem failed! "+d),null}},n.prototype.removeItem=function(t){$u.log("Remove item: key is "+t);var r=this.config.keyPrefix+t;if(r!==this.config.keyPrefix&&r!==this.cacheCurSizeKey)try{var i=this.config.storage.getItem(r);i&&this._removeItem(r,JSON.parse(i).byteSize)}catch(o){$u.warn("removeItem failed! "+o)}},n.prototype.clear=function(){$u.log("Clear Cache");for(var t=[],r=0;r<this.config.storage.length;r+=1){var i=this.config.storage.key(r);0===i.indexOf(this.config.keyPrefix)&&t.push(i)}try{for(r=0;r<t.length;r+=1)this.config.storage.removeItem(t[r])}catch(o){$u.warn("clear failed! "+o)}},n.prototype.getAllKeys=function(){for(var t=[],r=0;r<this.config.storage.length;r+=1){var i=this.config.storage.key(r);0===i.indexOf(this.config.keyPrefix)&&i!==this.cacheCurSizeKey&&t.push(i.substring(this.config.keyPrefix.length))}return t},n.prototype.getCacheCurSize=function(){var t=this.config.storage.getItem(this.cacheCurSizeKey);return t||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),t="0"),Number(t)},n.prototype.createInstance=function(t){return(!t.keyPrefix||t.keyPrefix===Bc.keyPrefix)&&($u.error("invalid keyPrefix, setting keyPrefix with timeStamp"),t.keyPrefix=_g.toString()),new n(t)},n}(_9),TM=new w9;const x9=TM;Gu.register(TM);var jb=(()=>(function(e){e.filterSensitiveLog=function(n){return ne({},n)}}(jb||(jb={})),jb))(),Ub=(()=>(function(e){e.filterSensitiveLog=function(n){return ne({},n)}}(Ub||(Ub={})),Ub))(),Gb=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne({},n),n.SSEKMSKeyId&&{SSEKMSKeyId:us})}}(Gb||(Gb={})),Gb))(),Vb=(()=>(function(e){e.filterSensitiveLog=function(n){return ne({},n)}}(Vb||(Vb={})),Vb))(),qb=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne(ne({},n),n.SSEKMSKeyId&&{SSEKMSKeyId:us}),n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:us})}}(qb||(qb={})),qb))(),Hb=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne(ne(ne(ne({},n),n.SSECustomerKey&&{SSECustomerKey:us}),n.SSEKMSKeyId&&{SSEKMSKeyId:us}),n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:us}),n.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:us})}}(Hb||(Hb={})),Hb))(),$b=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne(ne({},n),n.SSEKMSKeyId&&{SSEKMSKeyId:us}),n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:us})}}($b||($b={})),$b))(),Kb=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne(ne(ne({},n),n.SSECustomerKey&&{SSECustomerKey:us}),n.SSEKMSKeyId&&{SSEKMSKeyId:us}),n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:us})}}(Kb||(Kb={})),Kb))(),Xb=(()=>(function(e){e.filterSensitiveLog=function(n){return ne({},n)}}(Xb||(Xb={})),Xb))(),Wb=(()=>(function(e){e.filterSensitiveLog=function(n){return ne({},n)}}(Wb||(Wb={})),Wb))(),Jb=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne({},n),n.SSEKMSKeyId&&{SSEKMSKeyId:us})}}(Jb||(Jb={})),Jb))(),Zb=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne({},n),n.SSECustomerKey&&{SSECustomerKey:us})}}(Zb||(Zb={})),Zb))(),Yb=(()=>(function(e){e.filterSensitiveLog=function(n){return ne({},n)}}(Yb||(Yb={})),Yb))(),Qb=(()=>(function(e){e.filterSensitiveLog=function(n){return ne({},n)}}(Qb||(Qb={})),Qb))(),ew=(()=>(function(e){e.filterSensitiveLog=function(n){return ne({},n)}}(ew||(ew={})),ew))(),tw=(()=>(function(e){e.filterSensitiveLog=function(n){return ne({},n)}}(tw||(tw={})),tw))(),nw=(()=>(function(e){e.filterSensitiveLog=function(n){return ne({},n)}}(nw||(nw={})),nw))(),rw=(()=>(function(e){e.filterSensitiveLog=function(n){return ne({},n)}}(rw||(rw={})),rw))(),iw=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne(ne({},n),n.SSEKMSKeyId&&{SSEKMSKeyId:us}),n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:us})}}(iw||(iw={})),iw))(),ow=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne(ne(ne({},n),n.SSECustomerKey&&{SSECustomerKey:us}),n.SSEKMSKeyId&&{SSEKMSKeyId:us}),n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:us})}}(ow||(ow={})),ow))();function S9(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var sw=function(){function e(n,t){void 0===t&&(t=[]),this.name=n,this.children=t,this.attributes={}}return e.prototype.withName=function(n){return this.name=n,this},e.prototype.addAttribute=function(n,t){return this.attributes[n]=t,this},e.prototype.addChildNode=function(n){return this.children.push(n),this},e.prototype.removeAttribute=function(n){return delete this.attributes[n],this},e.prototype.toString=function(){var n,t,r=Boolean(this.children.length),i="<"+this.name,o=this.attributes;try{for(var a=function OC(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.keys(o)),s=a.next();!s.done;s=a.next()){var d=s.value,l=o[d];typeof l<"u"&&null!==l&&(i+=" "+d+'="'+S9(""+l)+'"')}}catch(f){n={error:f}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(n)throw n.error}}return i+(r?">"+this.children.map(function(f){return f.toString()}).join("")+"</"+this.name+">":"/>")},e}(),PM=function(){function e(n){this.value=n}return e.prototype.toString=function(){return function C9(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(""+this.value)},e}(),T9=O(6705),z9=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,s,d,l,f;return It(this,function(_){switch(_.label){case 0:return r=[ne({},e)],f={},[4,Ut(e.body,n)];case 1:switch(t=ne.apply(void 0,r.concat([(f.body=_.sent(),f)])),o="UnknownError",o=gn(e,t.body)){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return s=[{}],[4,UX(t,n)];case 3:return i=ne.apply(void 0,[ne.apply(void 0,s.concat([_.sent()])),{name:o,$metadata:lt(e)}]),[3,5];case 4:o=(d=t.body).code||d.Code||o,i=ne(ne({},d),{name:""+o,message:d.message||d.Message||o,$fault:"client",$metadata:lt(e)}),_.label=5;case 5:return i.message=l=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}})})},U9=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,a,s,d;return It(this,function(l){switch(l.label){case 0:return r=[ne({},e)],d={},[4,Ut(e.body,n)];case 1:return t=ne.apply(void 0,r.concat([(d.body=l.sent(),d)])),o="UnknownError",o=gn(e,t.body),o=(a=t.body).code||a.Code||o,(i=ne(ne({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:lt(e)})).message=s=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}})})},V9=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,s,d,l,f;return It(this,function(_){switch(_.label){case 0:return r=[ne({},e)],f={},[4,Ut(e.body,n)];case 1:switch(t=ne.apply(void 0,r.concat([(f.body=_.sent(),f)])),o="UnknownError",o=gn(e,t.body)){case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":return[3,2]}return[3,4];case 2:return s=[{}],[4,VX(t,n)];case 3:return i=ne.apply(void 0,[ne.apply(void 0,s.concat([_.sent()])),{name:o,$metadata:lt(e)}]),[3,5];case 4:o=(d=t.body).code||d.Code||o,i=ne(ne({},d),{name:""+o,message:d.message||d.Message||o,$fault:"client",$metadata:lt(e)}),_.label=5;case 5:return i.message=l=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}})})},$9=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,a,s,d;return It(this,function(l){switch(l.label){case 0:return r=[ne({},e)],d={},[4,Ut(e.body,n)];case 1:return t=ne.apply(void 0,r.concat([(d.body=l.sent(),d)])),o="UnknownError",o=gn(e,t.body),o=(a=t.body).code||a.Code||o,(i=ne(ne({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:lt(e)})).message=s=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}})})},sK=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,a,s,d;return It(this,function(l){switch(l.label){case 0:return r=[ne({},e)],d={},[4,Ut(e.body,n)];case 1:return t=ne.apply(void 0,r.concat([(d.body=l.sent(),d)])),o="UnknownError",o=gn(e,t.body),o=(a=t.body).code||a.Code||o,(i=ne(ne({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:lt(e)})).message=s=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}})})},OK=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,s,d,l,f,_;return It(this,function(m){switch(m.label){case 0:return r=[ne({},e)],_={},[4,Ut(e.body,n)];case 1:switch(t=ne.apply(void 0,r.concat([(_.body=m.sent(),_)])),o="UnknownError",o=gn(e,t.body)){case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":return[3,2];case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,4]}return[3,6];case 2:return s=[{}],[4,jX(t,n)];case 3:return i=ne.apply(void 0,[ne.apply(void 0,s.concat([m.sent()])),{name:o,$metadata:lt(e)}]),[3,7];case 4:return d=[{}],[4,uw(t,n)];case 5:return i=ne.apply(void 0,[ne.apply(void 0,d.concat([m.sent()])),{name:o,$metadata:lt(e)}]),[3,7];case 6:o=(l=t.body).code||l.Code||o,i=ne(ne({},l),{name:""+o,message:l.message||l.Message||o,$fault:"client",$metadata:lt(e)}),m.label=7;case 7:return i.message=f=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(f),i))]}})})},WK=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,s,d,l,f;return It(this,function(_){switch(_.label){case 0:return r=[ne({},e)],f={},[4,Ut(e.body,n)];case 1:switch(t=ne.apply(void 0,r.concat([(f.body=_.sent(),f)])),o="UnknownError",o=gn(e,t.body)){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return s=[{}],[4,MC(t,n)];case 3:return i=ne.apply(void 0,[ne.apply(void 0,s.concat([_.sent()])),{name:o,$metadata:lt(e)}]),[3,5];case 4:o=(d=t.body).code||d.Code||o,i=ne(ne({},d),{name:""+o,message:d.message||d.Message||o,$fault:"client",$metadata:lt(e)}),_.label=5;case 5:return i.message=l=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}})})},ZK=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,s,d,l,f;return It(this,function(_){switch(_.label){case 0:return r=[ne({},e)],f={},[4,Ut(e.body,n)];case 1:switch(t=ne.apply(void 0,r.concat([(f.body=_.sent(),f)])),o="UnknownError",o=gn(e,t.body)){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return s=[{}],[4,MC(t,n)];case 3:return i=ne.apply(void 0,[ne.apply(void 0,s.concat([_.sent()])),{name:o,$metadata:lt(e)}]),[3,5];case 4:o=(d=t.body).code||d.Code||o,i=ne(ne({},d),{name:""+o,message:d.message||d.Message||o,$fault:"client",$metadata:lt(e)}),_.label=5;case 5:return i.message=l=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}})})},eX=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,a,s,d;return It(this,function(l){switch(l.label){case 0:return r=[ne({},e)],d={},[4,Ut(e.body,n)];case 1:return t=ne.apply(void 0,r.concat([(d.body=l.sent(),d)])),o="UnknownError",o=gn(e,t.body),o=(a=t.body).code||a.Code||o,(i=ne(ne({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:lt(e)})).message=s=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}})})},bX=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,a,s,d;return It(this,function(l){switch(l.label){case 0:return r=[ne({},e)],d={},[4,Ut(e.body,n)];case 1:return t=ne.apply(void 0,r.concat([(d.body=l.sent(),d)])),o="UnknownError",o=gn(e,t.body),o=(a=t.body).code||a.Code||o,(i=ne(ne({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:lt(e)})).message=s=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}})})},RX=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,a,s,d;return It(this,function(l){switch(l.label){case 0:return r=[ne({},e)],d={},[4,Ut(e.body,n)];case 1:return t=ne.apply(void 0,r.concat([(d.body=l.sent(),d)])),o="UnknownError",o=gn(e,t.body),o=(a=t.body).code||a.Code||o,(i=ne(ne({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:lt(e)})).message=s=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}})})},jX=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r;return It(this,function(i){return t={name:"InvalidObjectState",$fault:"client",$metadata:lt(e),AccessTier:void 0,StorageClass:void 0},void 0!==(r=e.body).AccessTier&&(t.AccessTier=r.AccessTier),void 0!==r.StorageClass&&(t.StorageClass=r.StorageClass),[2,t]})})},MC=function(e,n){return kt(void 0,void 0,void 0,function(){return It(this,function(i){return[2,{name:"NoSuchBucket",$fault:"client",$metadata:lt(e)}]})})},uw=function(e,n){return kt(void 0,void 0,void 0,function(){return It(this,function(i){return[2,{name:"NoSuchKey",$fault:"client",$metadata:lt(e)}]})})},UX=function(e,n){return kt(void 0,void 0,void 0,function(){return It(this,function(i){return[2,{name:"NoSuchUpload",$fault:"client",$metadata:lt(e)}]})})},VX=function(e,n){return kt(void 0,void 0,void 0,function(){return It(this,function(i){return[2,{name:"ObjectNotInActiveTierError",$fault:"client",$metadata:lt(e)}]})})},oW=function(e,n){return e.filter(function(t){return null!=t}).map(function(t){if(null===t)return null;var r=function(e,n){var t=new sw("CompletedPart");if(null!=e.ETag){var r=new sw("ETag").addChildNode(new PM(e.ETag)).withName("ETag");t.addChildNode(r)}return null!=e.PartNumber&&(r=new sw("PartNumber").addChildNode(new PM(String(e.PartNumber))).withName("PartNumber"),t.addChildNode(r)),t}(t);return r.withName("member")})},lw=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){var t={Prefix:void 0};return void 0!==e.Prefix&&(t.Prefix=e.Prefix),t}(t)})},GM=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){var t={Key:void 0,LastModified:void 0,ETag:void 0,Size:void 0,StorageClass:void 0,Owner:void 0};return void 0!==e.Key&&(t.Key=e.Key),void 0!==e.LastModified&&(t.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(t.ETag=e.ETag),void 0!==e.Size&&(t.Size=parseInt(e.Size)),void 0!==e.StorageClass&&(t.StorageClass=e.StorageClass),void 0!==e.Owner&&(t.Owner=fh(e.Owner,n)),t}(t,n)})},fh=function(e,n){var t={DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(t.DisplayName=e.DisplayName),void 0!==e.ID&&(t.ID=e.ID),t},lt=function(e){var n;return{httpStatusCode:e.statusCode,requestId:null!==(n=e.headers["x-amzn-requestid"])&&void 0!==n?n:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},Jr=function(e,n){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):n.streamCollector(e)||Promise.resolve(new Uint8Array)},$e=function(e){return!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)},Ut=function(e,n){return function(e,n){return Jr(e,n).then(function(t){return n.utf8Encoder(t)})}(e,n).then(function(t){if(t.length){var r=(0,T9.parse)(t,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:function(s,d){return function(e){return e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")}(s)}}),i="#text",o=Object.keys(r)[0],a=r[o];return a[i]&&(a[o]=a[i],delete a[i]),WD(a)}return{}})},gn=function(e,n){return void 0!==n.Code?n.Code:404==e.statusCode?"NotFound":""},ld=function(){return ld=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},ld.apply(this,arguments)};function Sy(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}var XM=function(e){return"string"==typeof e&&0===e.indexOf("arn:")&&e.split(":").length>=6},sQ=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,uQ=/(\d+\.){3}\d+/,lQ=/\.\./,WM=/\./,cQ=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,JM=/^s3(-external-1)?\.amazonaws\.com$/,UC="amazonaws.com",fw=function(e){return GC(e)?e.replace(/fips-|-fips/,""):e},ZM=function(e){var n=e.match(cQ);return[n[2],e.replace(new RegExp("^"+n[0]),"")]},GC=function(e){return e.startsWith("fips-")||e.endsWith("-fips")},YM=function(e,n){return e===n||fw(e)===n||e===fw(n)},QM=function(e,n){if(void 0===n&&(n={tlsCompatible:!0}),e.length>=64||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||n?.tlsCompatible&&WM.test(e))throw new Error("Invalid DNS label "+e)},ek=function(e){var n=e.isCustomEndpoint,i=e.accelerateEndpoint;if(n){if(e.dualstackEndpoint)throw new Error("Dualstack endpoint is not supported with custom endpoint");if(i)throw new Error("Accelerate endpoint is not supported with custom endpoint")}return function(e){return"string"==typeof e.bucketName}(e)?TQ(ld(ld({},e),{isCustomEndpoint:n})):CQ(ld(ld({},e),{isCustomEndpoint:n}))},CQ=function(e){var n=e.isCustomEndpoint,t=e.baseHostname,r=Sy(n?[e.clientRegion,t]:function(e){return JM.test(e)?[e.replace("."+UC,""),UC]:ZM(e)}(t),2),i=r[0],o=r[1],s=e.dualstackEndpoint,d=void 0!==s&&s,l=e.accelerateEndpoint,_=e.tlsCompatible,m=void 0===_||_,E=e.useArnRegion,D=e.bucketName,R=e.clientPartition,ye=void 0===R?"aws":R,xe=e.clientSigningRegion,et=void 0===xe?i:xe;!function(e){if(e.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!e.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")}({pathStyleEndpoint:e.pathStyleEndpoint,accelerateEndpoint:void 0!==l&&l,tlsCompatible:m});var We=D.service,vt=D.partition,Mt=D.accountId,en=D.region,nr=D.resource;(function(e){if("s3"!==e&&"s3-outposts"!==e)throw new Error("Expect 's3' or 's3-outposts' in ARN service component")})(We),function(e,n){if(e!==n.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+e+'" but expected "'+n.clientPartition+'"')}(vt,{clientPartition:ye}),function(e){if(!/[0-9]{12}/.exec(e))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(Mt),function(e,n){if(""===e)throw new Error("ARN region is empty");if(!n.useArnRegion&&!YM(e,n.clientRegion)&&!YM(e,n.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+n.clientRegion);if(n.useArnRegion&&GC(e))throw new Error("Endpoint does not support FIPS region")}(en,{useArnRegion:E,clientRegion:i,clientSigningRegion:et});var Qn=function(e){var n=e.includes(":")?":":"/",t=Sy(e.split(n)),r=t[0],i=t.slice(1);if("accesspoint"===r){if(1!==i.length||""===i[0])throw new Error("Access Point ARN should have one resource accesspoint"+n+"{accesspointname}");return{accesspointName:i[0]}}if("outpost"===r){if(!i[0]||"accesspoint"!==i[1]||!i[2]||3!==i.length)throw new Error("Outpost ARN should have resource outpost"+n+"{outpostId}"+n+"accesspoint"+n+"{accesspointName}");var o=Sy(i,3);return{outpostId:o[0],accesspointName:o[2]}}throw new Error("ARN resource should begin with 'accesspoint"+n+"' or 'outpost"+n+"'")}(nr),Zr=Qn.accesspointName,Ci=Qn.outpostId;QM(Zr+"-"+Mt,{tlsCompatible:m});var cr=E?en:i,ba=E?en:et;return Ci?(function(e){if("s3-outposts"!==e)throw new Error("Expect 's3-posts' in Outpost ARN service component")}(We),QM(Ci,{tlsCompatible:m}),function(e){if(e)throw new Error("Dualstack endpoint is not supported with Outpost")}(d),function(e){if(GC(e??""))throw new Error("FIPS region is not supported with Outpost, got "+e)}(cr),{bucketEndpoint:!0,hostname:Zr+"-"+Mt+"."+Ci+(n?"":".s3-outposts."+cr)+"."+o,signingRegion:ba,signingService:"s3-outposts"}):(function(e){if("s3"!==e)throw new Error("Expect 's3' in Accesspoint ARN service component")}(We),{bucketEndpoint:!0,hostname:Zr+"-"+Mt+(n?"":".s3-accesspoint"+(d?".dualstack":"")+"."+cr)+"."+o,signingRegion:ba})},TQ=function(e){var n=e.accelerateEndpoint,t=void 0!==n&&n,i=e.baseHostname,o=e.bucketName,a=e.dualstackEndpoint,s=void 0!==a&&a,d=e.pathStyleEndpoint,l=void 0!==d&&d,f=e.tlsCompatible,_=void 0===f||f,m=e.isCustomEndpoint,D=Sy(void 0!==m&&m?[e.clientRegion,i]:function(e){return JM.test(e)?["us-east-1",UC]:ZM(e)}(i),2),R=D[0],ye=D[1];return l||!function(e){return sQ.test(e)&&!uQ.test(e)&&!lQ.test(e)}(o)||_&&WM.test(o)?{bucketEndpoint:!1,hostname:s?"s3.dualstack."+R+"."+ye:i}:(t?i="s3-accelerate"+(s?".dualstack":"")+"."+ye:s&&(i="s3.dualstack."+R+"."+ye),{bucketEndpoint:!0,hostname:o+"."+i})},IQ=function(e){return function(n,t){return function(r){return function iQ(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}(void 0,void 0,void 0,function(){var i,o,a,s,d,l,f,_,m,E,D,R,ye,xe,et,We,vt,Mt;return function oQ(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(en){switch(en.label){case 0:return i=r.input.Bucket,o=e.bucketEndpoint,ns.isInstance(a=r.request)?e.bucketEndpoint?(a.hostname=i,[3,7]):[3,1]:[3,8];case 1:return XM(i)?(s=function(e){var n=e.split(":");if(n.length<6||"arn"!==n[0])throw new Error("Malformed ARN");var t=function KM(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}(n);return{partition:t[1],service:t[2],region:t[3],accountId:t[4],resource:t.slice(5).join(":")}}(i),d=fw,[4,e.region()]):[3,5];case 2:return xe=d.apply(void 0,[en.sent()]),[4,e.regionInfoProvider(xe)];case 3:return l=en.sent()||{},f=l.partition,m=void 0===(_=l.signingRegion)?xe:_,[4,e.useArnRegion()];case 4:return E=en.sent(),D=ek({bucketName:s,baseHostname:a.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===a.protocol,useArnRegion:E,clientPartition:f,clientSigningRegion:m,clientRegion:xe,isCustomEndpoint:e.isCustomEndpoint}),vt=D.hostname,Mt=D.bucketEndpoint,ye=D.signingService,(R=D.signingRegion)&&R!==m&&(t.signing_region=R),ye&&"s3"!==ye&&(t.signing_service=ye),a.hostname=vt,o=Mt,[3,7];case 5:return et=fw,[4,e.region()];case 6:xe=et.apply(void 0,[en.sent()]),We=ek({bucketName:i,clientRegion:xe,baseHostname:a.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===a.protocol,isCustomEndpoint:e.isCustomEndpoint}),Mt=We.bucketEndpoint,a.hostname=vt=We.hostname,o=Mt,en.label=7;case 7:o&&(a.path=a.path.replace(/^(\/)?[^\/]+/,""),""===a.path&&(a.path="/")),en.label=8;case 8:return[2,n(ld(ld({},r),{request:a}))]}})})}}},PQ={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware",override:!0},Fc=function(e){return{applyToStack:function(n){n.addRelativeTo(IQ(e),PQ)}}},Iy=function(){return Iy=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},Iy.apply(this,arguments)};function qC(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}function HC(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}var OQ={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},NQ={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware",override:!0},nk=function(e,n){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):n.streamCollector(e)||Promise.resolve(new Uint8Array)},FQ=function(e,n){return nk(e,n).then(function(t){return n.utf8Encoder(t)})},zQ={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},rk=function(e){return{applyToStack:function(n){n.addRelativeTo(function(e){return function(n){return function(t){return qC(void 0,void 0,void 0,function(){var r,i,o,a,s,d,l;return HC(this,function(f){switch(f.label){case 0:return[4,n(t)];case 1:return r=f.sent(),ly.isInstance(i=r.response)?(a=i.body,(o=i.statusCode)<200&&o>=300?[2,r]:[4,nk(a,e)]):[2,r];case 2:return s=f.sent(),[4,FQ(s,e)];case 3:if(d=f.sent(),0===s.length)throw(l=new Error("S3 aborted request")).name="InternalError",l;return d&&d.match("<Error>")&&(i.statusCode=400),i.body=s,[2,r]}})})}}}(e),zQ)}}},Tp=function(){return Tp=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},Tp.apply(this,arguments)};var qQ={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Py=function(e){return{applyToStack:function(n){n.add(function VQ(e){var n=this;return function(t){return function(r){return function jQ(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}(n,void 0,void 0,function(){var i,o,a,s,d,l,f,_,m,E,D,R,ye,xe,et,We,vt;return function UQ(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(Mt){switch(Mt.label){case 0:i=Tp({},r.input),o=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],Mt.label=1;case 1:Mt.trys.push([1,6,7,8]),a=function KC(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),s=a.next(),Mt.label=2;case 2:return s.done?[3,5]:(l=i[(d=s.value).target])?(f=ArrayBuffer.isView(l)?new Uint8Array(l.buffer,l.byteOffset,l.byteLength):"string"==typeof l?e.utf8Decoder(l):new Uint8Array(l),_=e.base64Encoder(f),(m=new e.md5).update(f),E=[Tp({},i)],(vt={})[d.target]=_,D=d.hash,ye=(R=e).base64Encoder,[4,m.digest()]):[3,4];case 3:i=Tp.apply(void 0,E.concat([(vt[D]=ye.apply(R,[Mt.sent()]),vt)])),Mt.label=4;case 4:return s=a.next(),[3,2];case 5:return[3,8];case 6:return xe=Mt.sent(),et={error:xe},[3,8];case 7:try{s&&!s.done&&(We=a.return)&&We.call(a)}finally{if(et)throw et.error}return[7];case 8:return[2,t(Tp(Tp({},r),{input:i}))]}})})}}}(e),qQ)}}},HQ=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Zt(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(Nl(r,this.serialize,this.deserialize)),this.middlewareStack.use(rk(r)),this.middlewareStack.use(Py(r)),this.middlewareStack.use(Fc(r));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"S3Client",commandName:"CopyObjectCommand",inputFilterSensitiveLog:Hb.filterSensitiveLog,outputFilterSensitiveLog:qb.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,s,l;return It(this,function(m){switch(m.label){case 0:if(t=ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne({},$e(e.ACL)&&{"x-amz-acl":e.ACL}),$e(e.CacheControl)&&{"cache-control":e.CacheControl}),$e(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),$e(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),$e(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),$e(e.ContentType)&&{"content-type":e.ContentType}),$e(e.CopySource)&&{"x-amz-copy-source":e.CopySource}),$e(e.CopySourceIfMatch)&&{"x-amz-copy-source-if-match":e.CopySourceIfMatch}),$e(e.CopySourceIfModifiedSince)&&{"x-amz-copy-source-if-modified-since":yp(e.CopySourceIfModifiedSince).toString()}),$e(e.CopySourceIfNoneMatch)&&{"x-amz-copy-source-if-none-match":e.CopySourceIfNoneMatch}),$e(e.CopySourceIfUnmodifiedSince)&&{"x-amz-copy-source-if-unmodified-since":yp(e.CopySourceIfUnmodifiedSince).toString()}),$e(e.Expires)&&{expires:yp(e.Expires).toString()}),$e(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),$e(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),$e(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),$e(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),$e(e.MetadataDirective)&&{"x-amz-metadata-directive":e.MetadataDirective}),$e(e.TaggingDirective)&&{"x-amz-tagging-directive":e.TaggingDirective}),$e(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),$e(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),$e(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),$e(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),$e(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),$e(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),$e(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),$e(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),$e(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),$e(e.CopySourceSSECustomerAlgorithm)&&{"x-amz-copy-source-server-side-encryption-customer-algorithm":e.CopySourceSSECustomerAlgorithm}),$e(e.CopySourceSSECustomerKey)&&{"x-amz-copy-source-server-side-encryption-customer-key":e.CopySourceSSECustomerKey}),$e(e.CopySourceSSECustomerKeyMD5)&&{"x-amz-copy-source-server-side-encryption-customer-key-md5":e.CopySourceSSECustomerKeyMD5}),$e(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),$e(e.Tagging)&&{"x-amz-tagging":e.Tagging}),$e(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),$e(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),$e(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),$e(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),$e(e.ExpectedSourceBucketOwner)&&{"x-amz-source-expected-bucket-owner":e.ExpectedSourceBucketOwner}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce(function(E,D){var R;return ne(ne({},E),((R={})["x-amz-meta-"+D.toLowerCase()]=e.Metadata[D],R))},{})),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Es(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(E){return Es(E)}).join("/")),o={"x-id":"CopyObject"},[4,n.endpoint()];case 1:return s=m.sent(),[2,new ns({protocol:void 0===(l=s.protocol)?"https":l,hostname:s.hostname,port:s.port,method:"PUT",headers:t,path:r,query:o,body:void 0})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r;return It(this,function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,V9(e,n)]:(t={$metadata:lt(e),BucketKeyEnabled:void 0,CopyObjectResult:void 0,CopySourceVersionId:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(t.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-copy-source-version-id"]&&(t.CopySourceVersionId=e.headers["x-amz-copy-source-version-id"]),void 0!==e.headers["x-amz-version-id"]&&(t.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(t.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ut(e.body,n)]);case 1:return r=i.sent(),t.CopyObjectResult=function(e,n){var t={ETag:void 0,LastModified:void 0};return void 0!==e.ETag&&(t.ETag=e.ETag),void 0!==e.LastModified&&(t.LastModified=new Date(e.LastModified)),t}(r),[2,Promise.resolve(t)]}})})}(t,r)},n}(Ll),ik=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Zt(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(Nl(r,this.serialize,this.deserialize)),this.middlewareStack.use(Py(r)),this.middlewareStack.use(Fc(r));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"S3Client",commandName:"GetObjectCommand",inputFilterSensitiveLog:Zb.filterSensitiveLog,outputFilterSensitiveLog:Jb.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,s,l;return It(this,function(m){switch(m.label){case 0:if(t=ne(ne(ne(ne(ne(ne(ne(ne(ne(ne({},$e(e.IfMatch)&&{"if-match":e.IfMatch}),$e(e.IfModifiedSince)&&{"if-modified-since":yp(e.IfModifiedSince).toString()}),$e(e.IfNoneMatch)&&{"if-none-match":e.IfNoneMatch}),$e(e.IfUnmodifiedSince)&&{"if-unmodified-since":yp(e.IfUnmodifiedSince).toString()}),$e(e.Range)&&{range:e.Range}),$e(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),$e(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),$e(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),$e(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),$e(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Es(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(E){return Es(E)}).join("/")),o=ne(ne(ne(ne(ne(ne(ne(ne({"x-id":"GetObject"},void 0!==e.ResponseCacheControl&&{"response-cache-control":e.ResponseCacheControl}),void 0!==e.ResponseContentDisposition&&{"response-content-disposition":e.ResponseContentDisposition}),void 0!==e.ResponseContentEncoding&&{"response-content-encoding":e.ResponseContentEncoding}),void 0!==e.ResponseContentLanguage&&{"response-content-language":e.ResponseContentLanguage}),void 0!==e.ResponseContentType&&{"response-content-type":e.ResponseContentType}),void 0!==e.ResponseExpires&&{"response-expires":(e.ResponseExpires.toISOString().split(".")[0]+"Z").toString()}),void 0!==e.VersionId&&{versionId:e.VersionId}),void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()}),[4,n.endpoint()];case 1:return s=m.sent(),[2,new ns({protocol:void 0===(l=s.protocol)?"https":l,hostname:s.hostname,port:s.port,method:"GET",headers:t,path:r,query:o,body:void 0})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t;return It(this,function(i){return 200!==e.statusCode&&e.statusCode>=300?[2,OK(e,n)]:(t={$metadata:lt(e),AcceptRanges:void 0,Body:void 0,BucketKeyEnabled:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==e.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===e.headers["x-amz-delete-marker"]),void 0!==e.headers["accept-ranges"]&&(t.AcceptRanges=e.headers["accept-ranges"]),void 0!==e.headers["x-amz-expiration"]&&(t.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-restore"]&&(t.Restore=e.headers["x-amz-restore"]),void 0!==e.headers["last-modified"]&&(t.LastModified=new Date(e.headers["last-modified"])),void 0!==e.headers["content-length"]&&(t.ContentLength=parseInt(e.headers["content-length"],10)),void 0!==e.headers.etag&&(t.ETag=e.headers.etag),void 0!==e.headers["x-amz-missing-meta"]&&(t.MissingMeta=parseInt(e.headers["x-amz-missing-meta"],10)),void 0!==e.headers["x-amz-version-id"]&&(t.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["cache-control"]&&(t.CacheControl=e.headers["cache-control"]),void 0!==e.headers["content-disposition"]&&(t.ContentDisposition=e.headers["content-disposition"]),void 0!==e.headers["content-encoding"]&&(t.ContentEncoding=e.headers["content-encoding"]),void 0!==e.headers["content-language"]&&(t.ContentLanguage=e.headers["content-language"]),void 0!==e.headers["content-range"]&&(t.ContentRange=e.headers["content-range"]),void 0!==e.headers["content-type"]&&(t.ContentType=e.headers["content-type"]),void 0!==e.headers.expires&&(t.Expires=new Date(e.headers.expires)),void 0!==e.headers["x-amz-website-redirect-location"]&&(t.WebsiteRedirectLocation=e.headers["x-amz-website-redirect-location"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-storage-class"]&&(t.StorageClass=e.headers["x-amz-storage-class"]),void 0!==e.headers["x-amz-request-charged"]&&(t.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-replication-status"]&&(t.ReplicationStatus=e.headers["x-amz-replication-status"]),void 0!==e.headers["x-amz-mp-parts-count"]&&(t.PartsCount=parseInt(e.headers["x-amz-mp-parts-count"],10)),void 0!==e.headers["x-amz-tagging-count"]&&(t.TagCount=parseInt(e.headers["x-amz-tagging-count"],10)),void 0!==e.headers["x-amz-object-lock-mode"]&&(t.ObjectLockMode=e.headers["x-amz-object-lock-mode"]),void 0!==e.headers["x-amz-object-lock-retain-until-date"]&&(t.ObjectLockRetainUntilDate=new Date(e.headers["x-amz-object-lock-retain-until-date"])),void 0!==e.headers["x-amz-object-lock-legal-hold"]&&(t.ObjectLockLegalHoldStatus=e.headers["x-amz-object-lock-legal-hold"]),Object.keys(e.headers).forEach(function(o){void 0===t.Metadata&&(t.Metadata={}),o.startsWith("x-amz-meta-")&&(t.Metadata[o.substring(11)]=e.headers[o])}),t.Body=e.body,[2,Promise.resolve(t)])})})}(t,r)},n}(Ll),$Q=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Zt(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(Nl(r,this.serialize,this.deserialize)),this.middlewareStack.use(Fc(r));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"S3Client",commandName:"DeleteObjectCommand",inputFilterSensitiveLog:Wb.filterSensitiveLog,outputFilterSensitiveLog:Xb.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,s,l;return It(this,function(m){switch(m.label){case 0:if(t=ne(ne(ne(ne({},$e(e.MFA)&&{"x-amz-mfa":e.MFA}),$e(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),$e(e.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":e.BypassGovernanceRetention.toString()}),$e(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Es(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(E){return Es(E)}).join("/")),o=ne({"x-id":"DeleteObject"},void 0!==e.VersionId&&{versionId:e.VersionId}),[4,n.endpoint()];case 1:return s=m.sent(),[2,new ns({protocol:void 0===(l=s.protocol)?"https":l,hostname:s.hostname,port:s.port,method:"DELETE",headers:t,path:r,query:o,body:void 0})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t;return It(this,function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,sK(e,n)]:(t={$metadata:lt(e),DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},void 0!==e.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===e.headers["x-amz-delete-marker"]),void 0!==e.headers["x-amz-version-id"]&&(t.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-request-charged"]&&(t.RequestCharged=e.headers["x-amz-request-charged"]),[4,Jr(e.body,n)]);case 1:return r.sent(),[2,Promise.resolve(t)]}})})}(t,r)},n}(Ll),KQ=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Zt(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(Nl(r,this.serialize,this.deserialize)),this.middlewareStack.use(Fc(r));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"S3Client",commandName:"ListObjectsCommand",inputFilterSensitiveLog:Qb.filterSensitiveLog,outputFilterSensitiveLog:Yb.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,s,l;return It(this,function(m){switch(m.label){case 0:if(t=ne(ne({},$e(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),$e(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",Es(i)),o=ne(ne(ne(ne(ne({},void 0!==e.Delimiter&&{delimiter:e.Delimiter}),void 0!==e.EncodingType&&{"encoding-type":e.EncodingType}),void 0!==e.Marker&&{marker:e.Marker}),void 0!==e.MaxKeys&&{"max-keys":e.MaxKeys.toString()}),void 0!==e.Prefix&&{prefix:e.Prefix}),[4,n.endpoint()];case 1:return s=m.sent(),[2,new ns({protocol:void 0===(l=s.protocol)?"https":l,hostname:s.hostname,port:s.port,method:"GET",headers:t,path:r,query:o,body:void 0})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r;return It(this,function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,WK(e,n)]:(t={$metadata:lt(e),CommonPrefixes:void 0,Contents:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,Marker:void 0,MaxKeys:void 0,Name:void 0,NextMarker:void 0,Prefix:void 0},[4,Ut(e.body,n)]);case 1:return""===(r=i.sent()).CommonPrefixes&&(t.CommonPrefixes=[]),void 0!==r.CommonPrefixes&&(t.CommonPrefixes=lw(fy(r.CommonPrefixes))),""===r.Contents&&(t.Contents=[]),void 0!==r.Contents&&(t.Contents=GM(fy(r.Contents),n)),void 0!==r.Delimiter&&(t.Delimiter=r.Delimiter),void 0!==r.EncodingType&&(t.EncodingType=r.EncodingType),void 0!==r.IsTruncated&&(t.IsTruncated="true"==r.IsTruncated),void 0!==r.Marker&&(t.Marker=r.Marker),void 0!==r.MaxKeys&&(t.MaxKeys=parseInt(r.MaxKeys)),void 0!==r.Name&&(t.Name=r.Name),void 0!==r.NextMarker&&(t.NextMarker=r.NextMarker),void 0!==r.Prefix&&(t.Prefix=r.Prefix),[2,Promise.resolve(t)]}})})}(t,r)},n}(Ll);function XQ(e){var n=e.port,t=e.query,r=e.protocol,i=e.path,o=e.hostname;r&&":"!==r.substr(-1)&&(r+=":"),n&&(o+=":"+n),i&&"/"!==i.charAt(0)&&(i="/"+i);var a=t?VS(t):"";return a&&"?"!==a[0]&&(a="?"+a),r+"//"+o+i+a}function ak(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}function sk(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}function JQ(e,n){return ak(this,void 0,void 0,function(){var t,r,o=this;return sk(this,function(a){switch(a.label){case 0:return t=function(s){return function(d){return ak(o,void 0,void 0,function(){return sk(this,function(l){return[2,{output:{request:d.request},response:void 0}]})})}},(r=e.middlewareStack.clone()).add(t,{step:"build",priority:"low"}),[4,n.resolveMiddleware(r,e.config,void 0)(n).then(function(s){return s.output.request})];case 1:return[2,a.sent()]}})})}var gw=function(){return gw=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},gw.apply(this,arguments)};var ree=function(){function e(n){var t=gw({service:n.signingName||n.service||"s3",uriEscapePath:n.uriEscapePath||!1},n);this.signer=new QO(t)}return e.prototype.presign=function(n,t){void 0===t&&(t={});var r=t.unsignableHeaders,i=void 0===r?new Set:r,o=t.unhoistableHeaders,a=void 0===o?new Set:o,s=function ZQ(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}(t,["unsignableHeaders","unhoistableHeaders"]);return function YQ(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function(){return function QQ(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(d){return i.add("content-type"),Object.keys(n.headers).map(function(l){return l.toLowerCase()}).filter(function(l){return l.startsWith("x-amz-server-side-encryption")}).forEach(function(l){a.add(l)}),n.headers["X-Amz-Content-Sha256"]="UNSIGNED-PAYLOAD",n.headers.host||(n.headers.host=n.hostname),[2,this.signer.presign(n,gw({expiresIn:900,unsignableHeaders:i,unhoistableHeaders:a},s))]})})},e}(),iee=O(3014),hh=O.n(iee),cd=(()=>(function(e){e.NO_CREDENTIALS="No credentials",e.NO_SRC_KEY='source param should be an object with the property "key" with value of type string',e.NO_DEST_KEY='destination param should be an object with the property "key" with value of type string',e.INVALID_BLOB="Object must be an instance of Blob"}(cd||(cd={})),cd))(),Eg=(()=>(function(e){e.UPLOAD_PAUSED_MESSAGE="paused"}(Eg||(Eg={})),Eg))(),aee=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},JC=new _a("axios-http-handler"),Ay="sendUploadProgress",yw="sendDownloadProgress",ck=function(e,n){var t,r;try{for(var i=function(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.entries(e)),o=i.next();!o.done;o=i.next()){var a=aee(o.value,2),s=a[0],d=a[1];s!==n&&s.toUpperCase()===n.toUpperCase()&&(e[n]=d,delete e[s])}}catch(l){t={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},lee=[function(e,n){return function see(e){return typeof Blob<"u"&&e instanceof Blob}(e)?(ck(n,"Content-Type"),ck(n,"Accept"),e):hh().defaults.transformRequest[0].call(null,e,n)}],cee=function(){function e(n,t,r){void 0===n&&(n={}),this.httpOptions=n,this.emitter=t,this.cancelTokenSource=r}return e.prototype.destroy=function(){},e.prototype.handle=function(n,t){var r=this.httpOptions.requestTimeout,i=t.emitter||this.emitter,o=n.path;if(n.query){var a=VS(n.query);a&&(o+="?"+a)}var s=n.port,l={};l.url=n.protocol+"//"+n.hostname+(s?":"+s:"")+o,l.method=n.method,l.headers=n.headers,delete l.headers.host,n.body?l.data=n.body:l.headers[Object.keys(l.headers).find(function(_){return"content-type"===_.toLowerCase()})]&&(l.data=null),i&&(l.onUploadProgress=function(_){i.emit(Ay,_),JC.debug(_)},l.onDownloadProgress=function(_){i.emit(yw,_),JC.debug(_)}),this.cancelTokenSource&&(l.cancelToken=this.cancelTokenSource.token),t.cancelTokenSource&&(l.cancelToken=t.cancelTokenSource.token),l.responseType="blob",sh.isReactNative&&(l.transformRequest=lee);var f=[hh().request(l).then(function(_){return{response:new ly({headers:_.headers,statusCode:_.status,body:_.data})}}).catch(function(_){var m,E;if(_.message!==Eg.UPLOAD_PAUSED_MESSAGE&&JC.error(_.message),hh().isCancel(_)||!function uee(e){return typeof e<"u"&&Object.prototype.hasOwnProperty.call(e,"response")&&typeof e.response<"u"&&Object.prototype.hasOwnProperty.call(e.response,"status")&&"number"==typeof e.response.status}(_))throw _;return{response:new ly({statusCode:_.response.status,body:null===(m=_.response)||void 0===m?void 0:m.data,headers:null===(E=_.response)||void 0===E?void 0:E.headers})}}),dee(r)];return Promise.race(f)},e}();function dee(e){return void 0===e&&(e=0),new Promise(function(n,t){e&&setTimeout(function(){var r=new Error("Request did not complete within "+e+" ms");r.name="TimeoutError",t(r)},e)})}var fee=typeof Symbol<"u"&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",dk="contentLengthMiddleware",Ry="__uploadInProgress",Bl=function(e,n,t,r,i){if(e){var o={attrs:t};r&&(o.metrics=r),Jd.dispatch("storage",{event:n,data:o,message:i},"Storage",fee)}},fk=O(1979);function _w(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}var YC=function(){function e(n){if(this.bytes=n,8!==n.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}return e.fromNumber=function(n){if(n>0x8000000000000000||n<-0x8000000000000000)throw new Error(n+" is too large (or, if negative, too small) to represent as an Int64");for(var t=new Uint8Array(8),r=7,i=Math.abs(Math.round(n));r>-1&&i>0;r--,i/=256)t[r]=i;return n<0&&pk(t),new e(t)},e.prototype.valueOf=function(){var n=this.bytes.slice(0),t=128&n[0];return t&&pk(n),parseInt(ll(n),16)*(t?-1:1)},e.prototype.toString=function(){return String(this.valueOf())},e}();function pk(e){for(var n=0;n<8;n++)e[n]^=255;for(n=7;n>-1&&(e[n]++,0===e[n]);n--);}var bee=function(){function e(n,t){this.toUtf8=n,this.fromUtf8=t}return e.prototype.format=function(n){var t,r,i,o,a=[];try{for(var s=_w(Object.keys(n)),d=s.next();!d.done;d=s.next()){var l=d.value,f=this.fromUtf8(l);a.push(Uint8Array.from([f.byteLength]),f,this.formatHeaderValue(n[l]))}}catch(ye){t={error:ye}}finally{try{d&&!d.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}var _=new Uint8Array(a.reduce(function(ye,xe){return ye+xe.byteLength},0)),m=0;try{for(var E=_w(a),D=E.next();!D.done;D=E.next()){var R=D.value;_.set(R,m),m+=R.byteLength}}catch(ye){i={error:ye}}finally{try{D&&!D.done&&(o=E.return)&&o.call(E)}finally{if(i)throw i.error}}return _},e.prototype.formatHeaderValue=function(n){switch(n.type){case"boolean":return Uint8Array.from([n.value?0:1]);case"byte":return Uint8Array.from([2,n.value]);case"short":var t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,n.value,!1),new Uint8Array(t.buffer);case"integer":var r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,n.value,!1),new Uint8Array(r.buffer);case"long":var i=new Uint8Array(9);return i[0]=5,i.set(n.value.bytes,1),i;case"binary":var o=new DataView(new ArrayBuffer(3+n.value.byteLength));o.setUint8(0,6),o.setUint16(1,n.value.byteLength,!1);var a=new Uint8Array(o.buffer);return a.set(n.value,3),a;case"string":var s=this.fromUtf8(n.value),d=new DataView(new ArrayBuffer(3+s.byteLength));d.setUint8(0,7),d.setUint16(1,s.byteLength,!1);var l=new Uint8Array(d.buffer);return l.set(s,3),l;case"timestamp":var f=new Uint8Array(9);return f[0]=8,f.set(YC.fromNumber(n.value.valueOf()).bytes,1),f;case"uuid":if(!Aee.test(n.value))throw new Error("Invalid UUID received: "+n.value);var _=new Uint8Array(17);return _[0]=9,_.set(function $H(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var n=new Uint8Array(e.length/2),t=0;t<e.length;t+=2){var r=e.substr(t,2).toLowerCase();if(!(r in iC))throw new Error("Cannot decode unrecognized sequence "+r+" as hexadecimal");n[t/2]=iC[r]}return n}(n.value.replace(/\-/g,"")),1),_}},e.prototype.parse=function(n){for(var t={},r=0;r<n.byteLength;){var i=n.getUint8(r++),o=this.toUtf8(new Uint8Array(n.buffer,n.byteOffset+r,i));switch(r+=i,n.getUint8(r++)){case 0:t[o]={type:mk,value:!0};break;case 1:t[o]={type:mk,value:!1};break;case 2:t[o]={type:wee,value:n.getInt8(r++)};break;case 3:t[o]={type:xee,value:n.getInt16(r,!1)},r+=2;break;case 4:t[o]={type:Eee,value:n.getInt32(r,!1)},r+=4;break;case 5:t[o]={type:See,value:new YC(new Uint8Array(n.buffer,n.byteOffset+r,8))},r+=8;break;case 6:var a=n.getUint16(r,!1);r+=2,t[o]={type:Cee,value:new Uint8Array(n.buffer,n.byteOffset+r,a)},r+=a;break;case 7:var s=n.getUint16(r,!1);r+=2,t[o]={type:Tee,value:this.toUtf8(new Uint8Array(n.buffer,n.byteOffset+r,s))},r+=s;break;case 8:t[o]={type:Iee,value:new Date(new YC(new Uint8Array(n.buffer,n.byteOffset+r,8)).valueOf())},r+=8;break;case 9:var d=new Uint8Array(n.buffer,n.byteOffset+r,16);r+=16,t[o]={type:Pee,value:ll(d.subarray(0,4))+"-"+ll(d.subarray(4,6))+"-"+ll(d.subarray(6,8))+"-"+ll(d.subarray(8,10))+"-"+ll(d.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return t},e}(),mk="boolean",wee="byte",xee="short",Eee="integer",See="long",Cee="binary",Tee="string",Iee="timestamp",Pee="uuid",Aee=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,vk=function(){function e(n,t){this.headerMarshaller=new bee(n,t)}return e.prototype.marshall=function(n){var r=n.body,i=this.headerMarshaller.format(n.headers),o=i.byteLength+r.byteLength+16,a=new Uint8Array(o),s=new DataView(a.buffer,a.byteOffset,a.byteLength),d=new fk.Crc32;return s.setUint32(0,o,!1),s.setUint32(4,i.byteLength,!1),s.setUint32(8,d.update(a.subarray(0,8)).digest(),!1),a.set(i,12),a.set(r,i.byteLength+12),s.setUint32(o-4,d.update(a.subarray(8,o-4)).digest(),!1),a},e.prototype.unmarshall=function(n){var t=function Dee(e){var n=e.byteLength,t=e.byteOffset,r=e.buffer;if(n<16)throw new Error("Provided message too short to accommodate event stream message overhead");var i=new DataView(r,t,n),o=i.getUint32(0,!1);if(n!==o)throw new Error("Reported message length does not match received message length");var a=i.getUint32(4,!1),s=i.getUint32(8,!1),d=i.getUint32(n-4,!1),l=(new fk.Crc32).update(new Uint8Array(r,t,8));if(s!==l.digest())throw new Error("The prelude checksum specified in the message ("+s+") does not match the calculated CRC32 checksum ("+l.digest()+")");if(l.update(new Uint8Array(r,t+8,n-12)),d!==l.digest())throw new Error("The message checksum ("+l.digest()+") did not match the expected value of "+d);return{headers:new DataView(r,t+8+4,a),body:new Uint8Array(r,t+8+4+a,o-a-16)}}(n),i=t.body;return{headers:this.headerMarshaller.parse(t.headers),body:i}},e.prototype.formatHeaders=function(n){return this.headerMarshaller.format(n)},e}();function eT(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}function Xs(e){return this instanceof Xs?(this.v=e,this):new Xs(e)}function tT(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(e,n||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(m){r[m]&&(i[m]=function(E){return new Promise(function(D,R){o.push([m,E,D,R])>1||s(m,E)})})}function s(m,E){try{!function d(m){m.value instanceof Xs?Promise.resolve(m.value.v).then(l,f):_(o[0][2],m)}(r[m](E))}catch(D){_(o[0][3],D)}}function l(m){s("next",m)}function f(m){s("throw",m)}function _(m,E){m(E),o.shift(),o.length&&s(o[0][0],o[0][1])}}function bk(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function _k(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=e[o]&&function(a){return new Promise(function(s,d){!function i(o,a,s,d){Promise.resolve(d).then(function(l){o({value:l,done:s})},a)}(s,d,(a=e[o](a)).done,a.value)})}}}var Nee=function(){function e(n){var t=n.utf8Encoder;this.eventMarshaller=new vk(t,n.utf8Decoder),this.utfEncoder=t}return e.prototype.deserialize=function(n,t){var r=function Mee(e){var n,t=0,r=0,i=null,o=null,a=function(d){if("number"!=typeof d)throw new Error("Attempted to allocate an event message where size was not a number: "+d);t=d,r=4,i=new Uint8Array(d),new DataView(i.buffer).setUint32(0,d,!1)};return(n={})[Symbol.asyncIterator]=function(){return tT(this,arguments,function(){var d,l,f,m,E,D,R,ye;return eT(this,function(xe){switch(xe.label){case 0:d=e[Symbol.asyncIterator](),xe.label=1;case 1:return[4,Xs(d.next())];case 2:return l=xe.sent(),f=l.value,l.done?t?[3,4]:[4,Xs(void 0)]:[3,10];case 3:return[2,xe.sent()];case 4:return t!==r?[3,7]:[4,Xs(i)];case 5:return[4,xe.sent()];case 6:return xe.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,Xs(void 0)];case 9:return[2,xe.sent()];case 10:m=f.length,E=0,xe.label=11;case 11:if(!(E<m))return[3,15];if(!i){if(D=m-E,o||(o=new Uint8Array(4)),R=Math.min(4-r,D),o.set(f.slice(E,E+R),r),E+=R,(r+=R)<4)return[3,15];a(new DataView(o.buffer).getUint32(0,!1)),o=null}return ye=Math.min(t-r,m-E),i.set(f.slice(E,E+ye),r),r+=ye,E+=ye,t&&t===r?[4,Xs(i)]:[3,14];case 12:return[4,xe.sent()];case 13:xe.sent(),i=null,t=0,r=0,xe.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}})})},n}(n),i=function kee(e,n){var t;return(t={})[Symbol.asyncIterator]=function(){return tT(this,arguments,function(){var r,i,a,s,d,l,_,m,D,R,ye,xe,et,We;return eT(this,function(vt){switch(vt.label){case 0:vt.trys.push([0,12,13,18]),r=bk(e),vt.label=1;case 1:return[4,Xs(r.next())];case 2:if((i=vt.sent()).done)return[3,11];if(a=n.eventMarshaller.unmarshall(i.value),"error"!==(s=a.headers[":message-type"].value))return[3,3];throw(d=new Error(a.headers[":error-message"].value||"UnknownError")).name=a.headers[":error-code"].value,d;case 3:return"exception"!==s?[3,5]:((ye={})[l=a.headers[":exception-type"].value]=a,[4,Xs(n.deserializer(ye))]);case 4:throw(_=vt.sent()).$unknown?((m=new Error(n.toUtf8(a.body))).name=l,m):_[l];case 5:return"event"!==s?[3,9]:((xe={})[a.headers[":event-type"].value]=a,[4,Xs(n.deserializer(xe))]);case 6:return(D=vt.sent()).$unknown?[3,10]:[4,Xs(D)];case 7:return[4,vt.sent()];case 8:return vt.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+a.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return R=vt.sent(),et={error:R},[3,18];case 13:return vt.trys.push([13,,16,17]),i&&!i.done&&(We=r.return)?[4,Xs(We.call(r))]:[3,15];case 14:vt.sent(),vt.label=15;case 15:return[3,17];case 16:if(et)throw et.error;return[7];case 17:return[7];case 18:return[2]}})})},t}(r,{eventMarshaller:this.eventMarshaller,deserializer:t,toUtf8:this.utfEncoder});return i},e.prototype.serialize=function(n,t){var r,i=this;return(r={})[Symbol.asyncIterator]=function(){return tT(this,arguments,function(){var a,s,f,_,m;return eT(this,function(E){switch(E.label){case 0:E.trys.push([0,7,8,13]),a=bk(n),E.label=1;case 1:return[4,Xs(a.next())];case 2:return(s=E.sent()).done?[3,6]:[4,Xs(i.eventMarshaller.marshall(t(s.value)))];case 3:return[4,E.sent()];case 4:E.sent(),E.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return f=E.sent(),_={error:f},[3,13];case 8:return E.trys.push([8,,11,12]),s&&!s.done&&(m=a.return)?[4,Xs(m.call(a))]:[3,10];case 9:E.sent(),E.label=10;case 10:return[3,12];case 11:if(_)throw _.error;return[7];case 12:return[7];case 13:return[4,Xs(new Uint8Array(0))];case 14:return[4,E.sent()];case 15:return E.sent(),[2]}})})},r},e}();function xk(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}function Pp(e){return this instanceof Pp?(this.v=e,this):new Pp(e)}function Fee(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(e,n||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(m){r[m]&&(i[m]=function(E){return new Promise(function(D,R){o.push([m,E,D,R])>1||s(m,E)})})}function s(m,E){try{!function d(m){m.value instanceof Pp?Promise.resolve(m.value.v).then(l,f):_(o[0][2],m)}(r[m](E))}catch(D){_(o[0][3],D)}}function l(m){s("next",m)}function f(m){s("throw",m)}function _(m,E){m(E),o.shift(),o.length&&s(o[0][0],o[0][1])}}var Uee=function(){function e(n){var t=n.utf8Encoder,r=n.utf8Decoder;this.eventMarshaller=new vk(t,r),this.universalMarshaller=new Nee({utf8Decoder:r,utf8Encoder:t})}return e.prototype.deserialize=function(n,t){var r=Gee(n)?function(e){var n;return(n={})[Symbol.asyncIterator]=function(){return Fee(this,arguments,function(){var t,r,o;return xk(this,function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Pp(t.read())];case 3:return r=a.sent(),o=r.value,r.done?[4,Pp(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Pp(o)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})},n}(n):n;return this.universalMarshaller.deserialize(r,t)},e.prototype.serialize=function(n,t){var r=this.universalMarshaller.serialize(n,t);return"function"==typeof ReadableStream?function(e){var n=e[Symbol.asyncIterator]();return new ReadableStream({pull:function(t){return function Lee(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function(){var r,o;return xk(this,function(a){switch(a.label){case 0:return[4,n.next()];case 1:return r=a.sent(),o=r.value,r.done?[2,t.close()]:(t.enqueue(o),[2])}})})}})}(r):r},e}(),Gee=function(e){return"function"==typeof ReadableStream&&e instanceof ReadableStream};function Kee(e,n,t){return void 0===t&&(t=1048576),new Promise(function(r,i){var o=new FileReader;o.addEventListener("error",i),o.addEventListener("abort",i);var a=e.size,s=0;function d(){s>=a?r():o.readAsArrayBuffer(e.slice(s,Math.min(a,s+t)))}o.addEventListener("load",function(l){var f=l.target.result;n(new Uint8Array(f)),s+=f.byteLength,d()}),d()})}var Qee=[1732584193,4023233417,2562383102,271733878],ete=function(){function e(){this.state=Uint32Array.from(Qee),this.buffer=new DataView(new ArrayBuffer(64)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(n){if(!function tte(e){return"string"==typeof e?0===e.length:0===e.byteLength}(n)){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=function nte(e){return"string"==typeof e?(0,_y.fromUtf8)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}(n),r=0,i=t.byteLength;for(this.bytesHashed+=i;i>0;)this.buffer.setUint8(this.bufferLength++,t[r++]),i--,64===this.bufferLength&&(this.hashBuffer(),this.bufferLength=0)}},e.prototype.digest=function(){return function Wee(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function(){var n,t,r,o,a,s;return function Jee(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(d){if(!this.finished){if(r=(n=this).bufferLength,o=8*n.bytesHashed,(t=n.buffer).setUint8(this.bufferLength++,128),r%64>=56){for(s=this.bufferLength;s<64;s++)t.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(s=this.bufferLength;s<56;s++)t.setUint8(s,0);t.setUint32(56,o>>>0,!0),t.setUint32(60,Math.floor(o/4294967296),!0),this.hashBuffer(),this.finished=!0}for(a=new DataView(new ArrayBuffer(16)),s=0;s<4;s++)a.setUint32(4*s,this.state[s],!0);return[2,new Uint8Array(a.buffer,a.byteOffset,a.byteLength)]})})},e.prototype.hashBuffer=function(){var t=this.buffer,r=this.state,i=r[0],o=r[1],a=r[2],s=r[3];i=Su(i,o,a,s,t.getUint32(0,!0),7,3614090360),s=Su(s,i,o,a,t.getUint32(4,!0),12,3905402710),a=Su(a,s,i,o,t.getUint32(8,!0),17,606105819),o=Su(o,a,s,i,t.getUint32(12,!0),22,3250441966),i=Su(i,o,a,s,t.getUint32(16,!0),7,4118548399),s=Su(s,i,o,a,t.getUint32(20,!0),12,1200080426),a=Su(a,s,i,o,t.getUint32(24,!0),17,2821735955),o=Su(o,a,s,i,t.getUint32(28,!0),22,4249261313),i=Su(i,o,a,s,t.getUint32(32,!0),7,1770035416),s=Su(s,i,o,a,t.getUint32(36,!0),12,2336552879),a=Su(a,s,i,o,t.getUint32(40,!0),17,4294925233),o=Su(o,a,s,i,t.getUint32(44,!0),22,2304563134),i=Su(i,o,a,s,t.getUint32(48,!0),7,1804603682),s=Su(s,i,o,a,t.getUint32(52,!0),12,4254626195),a=Su(a,s,i,o,t.getUint32(56,!0),17,2792965006),i=Cu(i,o=Su(o,a,s,i,t.getUint32(60,!0),22,1236535329),a,s,t.getUint32(4,!0),5,4129170786),s=Cu(s,i,o,a,t.getUint32(24,!0),9,3225465664),a=Cu(a,s,i,o,t.getUint32(44,!0),14,643717713),o=Cu(o,a,s,i,t.getUint32(0,!0),20,3921069994),i=Cu(i,o,a,s,t.getUint32(20,!0),5,3593408605),s=Cu(s,i,o,a,t.getUint32(40,!0),9,38016083),a=Cu(a,s,i,o,t.getUint32(60,!0),14,3634488961),o=Cu(o,a,s,i,t.getUint32(16,!0),20,3889429448),i=Cu(i,o,a,s,t.getUint32(36,!0),5,568446438),s=Cu(s,i,o,a,t.getUint32(56,!0),9,3275163606),a=Cu(a,s,i,o,t.getUint32(12,!0),14,4107603335),o=Cu(o,a,s,i,t.getUint32(32,!0),20,1163531501),i=Cu(i,o,a,s,t.getUint32(52,!0),5,2850285829),s=Cu(s,i,o,a,t.getUint32(8,!0),9,4243563512),a=Cu(a,s,i,o,t.getUint32(28,!0),14,1735328473),i=Tu(i,o=Cu(o,a,s,i,t.getUint32(48,!0),20,2368359562),a,s,t.getUint32(20,!0),4,4294588738),s=Tu(s,i,o,a,t.getUint32(32,!0),11,2272392833),a=Tu(a,s,i,o,t.getUint32(44,!0),16,1839030562),o=Tu(o,a,s,i,t.getUint32(56,!0),23,4259657740),i=Tu(i,o,a,s,t.getUint32(4,!0),4,2763975236),s=Tu(s,i,o,a,t.getUint32(16,!0),11,1272893353),a=Tu(a,s,i,o,t.getUint32(28,!0),16,4139469664),o=Tu(o,a,s,i,t.getUint32(40,!0),23,3200236656),i=Tu(i,o,a,s,t.getUint32(52,!0),4,681279174),s=Tu(s,i,o,a,t.getUint32(0,!0),11,3936430074),a=Tu(a,s,i,o,t.getUint32(12,!0),16,3572445317),o=Tu(o,a,s,i,t.getUint32(24,!0),23,76029189),i=Tu(i,o,a,s,t.getUint32(36,!0),4,3654602809),s=Tu(s,i,o,a,t.getUint32(48,!0),11,3873151461),a=Tu(a,s,i,o,t.getUint32(60,!0),16,530742520),i=Iu(i,o=Tu(o,a,s,i,t.getUint32(8,!0),23,3299628645),a,s,t.getUint32(0,!0),6,4096336452),s=Iu(s,i,o,a,t.getUint32(28,!0),10,1126891415),a=Iu(a,s,i,o,t.getUint32(56,!0),15,2878612391),o=Iu(o,a,s,i,t.getUint32(20,!0),21,4237533241),i=Iu(i,o,a,s,t.getUint32(48,!0),6,1700485571),s=Iu(s,i,o,a,t.getUint32(12,!0),10,2399980690),a=Iu(a,s,i,o,t.getUint32(40,!0),15,4293915773),o=Iu(o,a,s,i,t.getUint32(4,!0),21,2240044497),i=Iu(i,o,a,s,t.getUint32(32,!0),6,1873313359),s=Iu(s,i,o,a,t.getUint32(60,!0),10,4264355552),a=Iu(a,s,i,o,t.getUint32(24,!0),15,2734768916),o=Iu(o,a,s,i,t.getUint32(52,!0),21,1309151649),i=Iu(i,o,a,s,t.getUint32(16,!0),6,4149444226),s=Iu(s,i,o,a,t.getUint32(44,!0),10,3174756917),a=Iu(a,s,i,o,t.getUint32(8,!0),15,718787259),o=Iu(o,a,s,i,t.getUint32(36,!0),21,3951481745),r[0]=i+r[0]&4294967295,r[1]=o+r[1]&4294967295,r[2]=a+r[2]&4294967295,r[3]=s+r[3]&4294967295},e}();function Ew(e,n,t,r,i,o){return((n=(n+e&4294967295)+(r+o&4294967295)&4294967295)<<i|n>>>32-i)+t&4294967295}function Su(e,n,t,r,i,o,a){return Ew(n&t|~n&r,e,n,i,o,a)}function Cu(e,n,t,r,i,o,a){return Ew(n&r|t&~r,e,n,i,o,a)}function Tu(e,n,t,r,i,o,a){return Ew(n^t^r,e,n,i,o,a)}function Iu(e,n,t,r,i,o,a){return Ew(t^(n|~r),e,n,i,o,a)}var Pk="s3.{region}.amazonaws.com",ste=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),ute=new Set(["cn-north-1","cn-northwest-1"]),lte=new Set(["us-iso-east-1"]),cte=new Set(["us-isob-east-1"]),dte=new Set(["us-gov-east-1","us-gov-west-1"]),Ak={apiVersion:"2006-03-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,n){var t=void 0;switch(e){case"af-south-1":t={hostname:"s3.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":t={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":t={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":t={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":t={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":t={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":t={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"aws-global":t={hostname:"s3.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"ca-central-1":t={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":t={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":t={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":t={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":t={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":t={hostname:"s3.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":t={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":t={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":t={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":t={hostname:"s3-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":t={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":t={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":t={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":t={hostname:"s3.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":t={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":t={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":t={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":t={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":t={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":t={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":t={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:ste.has(e)&&(t={hostname:Pk.replace("{region}",e),partition:"aws"}),ute.has(e)&&(t={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),lte.has(e)&&(t={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),cte.has(e)&&(t={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),dte.has(e)&&(t={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===t&&(t={hostname:Pk.replace("{region}",e),partition:"aws"})}return Promise.resolve(ne({signingService:"s3"},t))},serviceId:"S3",signingEscapePath:!1,urlParser:SO,useArnRegion:!1},hte=ne(ne({},Ak),{runtime:"browser",base64Decoder:HS,base64Encoder:sO,bodyLengthChecker:vO,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:bO({serviceId:Ak.serviceId,clientVersion:"3.6.1"}),eventStreamSerdeProvider:function(e){return new Uee(e)},maxAttempts:3,md5:ete,region:lO("Region is missing"),requestHandler:new aO,sha256:tO.Sha256,streamCollector:uO,streamHasher:function(n,t){return function qee(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function(){var r;return function Hee(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(i){switch(i.label){case 0:return r=new n,[4,Kee(t,function(o){r.update(o)})];case 1:return i.sent(),[2,r.digest()]}})})},utf8Decoder:_y.fromUtf8,utf8Encoder:_y.toUtf8}),Sw=function(){return Sw=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},Sw.apply(this,arguments)},Sg=function(){return Sg=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},Sg.apply(this,arguments)};var bte={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},wte=function(e){return{applyToStack:function(n){n.add(function _te(e){var n=this;return function(t){return function(r){return function gte(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})}(n,void 0,void 0,function(){var i;return function vte(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(o){return ns.isInstance(i=r.request)&&i.body&&"node"===e.runtime&&(i.headers=Sg(Sg({},i.headers),{Expect:"100-continue"})),[2,t(Sg(Sg({},r),{request:i}))]})})}}}(e),bte)}}},xte=function(e){function n(t){var r=this,i=ne(ne({},hte),t),o=PO(i),s=tM(IO(o)),f=function AQ(e){var n=e.bucketEndpoint,t=void 0!==n&&n,r=e.forcePathStyle,i=void 0!==r&&r,o=e.useAccelerateEndpoint,a=void 0!==o&&o,s=e.useDualstackEndpoint,d=void 0!==s&&s,l=e.useArnRegion,f=void 0!==l&&l;return ld(ld({},e),{bucketEndpoint:t,forcePathStyle:i,useAccelerateEndpoint:a,useDualstackEndpoint:d,useArnRegion:"function"==typeof f?f:function(){return Promise.resolve(f)}})}(gO(s)),m=function(e){return Sw(Sw({},e),{eventStreamMarshaller:e.eventStreamSerdeProvider(e)})}(oM(f));return(r=e.call(this,m)||this).config=m,r.middlewareStack.use(function(e){return{applyToStack:function(n){n.addRelativeTo(b7(e),w7)}}}(r.config)),r.middlewareStack.use(dO(r.config)),r.middlewareStack.use(DO(r.config)),r.middlewareStack.use(kO(r.config)),r.middlewareStack.use(BO()),r.middlewareStack.use({applyToStack:function(n){n.add(function DQ(){var e=this;return function(n){return function(t){return qC(e,void 0,void 0,function(){var r,i;return HC(this,function(o){if("string"==typeof(r=t.input.Bucket)&&!XM(r)&&r.indexOf("/")>=0)throw(i=new Error("Bucket name shouldn't contain '/', received '"+r+"'")).name="InvalidBucketName",i;return[2,n(Iy({},t))]})})}}}(),OQ)}}),r.middlewareStack.use(function(e){return{applyToStack:function(n){n.add(function(e){return function(n){return function(t){return qC(void 0,void 0,void 0,function(){var r,i;return HC(this,function(o){switch(o.label){case 0:return!ns.isInstance(r=t.request)||e.isCustomEndpoint?[2,n(Iy({},t))]:"s3.amazonaws.com"!==r.hostname?[3,1]:(r.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return i="aws-global",[4,e.region()];case 2:i===o.sent()&&(r.hostname="s3.amazonaws.com"),o.label=3;case 3:return[2,n(Iy({},t))]}})})}}}(e),NQ)}}}(r.config)),r.middlewareStack.use(wte(r.config)),r.middlewareStack.use(sM(r.config)),r}return Zt(n,e),n.prototype.destroy=function(){e.prototype.destroy.call(this)},n}(XD),Cg=function(){return Cg=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Cg.apply(this,arguments)},sT=function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})},uT=function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},Ok=new _a("S3ClientUtils"),Mk={accessKeyId:"",secretAccessKey:""},kk=function(e){var o=e.customPrefix||{},a=e.identityId||e.credentials.identityId,s=(void 0!==o.private?o.private:"private/")+a+"/",d=(void 0!==o.protected?o.protected:"protected/")+a+"/",l=void 0!==o.public?o.public:"public/";switch(e.level){case"private":return s;case"protected":return d;default:return l}},Nk=function(e,n){return function(t,r){return function(i){return sT(void 0,void 0,void 0,function(){var o,a,s,d;return uT(this,function(f){switch(f.label){case 0:return[4,ic.get()];case 1:return o=f.sent(),a=ic.shear(o),s=kk(Cg(Cg({},e),{credentials:a})),d=Object.assign({},i.input),Object.prototype.hasOwnProperty.call(i.input,"Key")?(d.Key=s+n,i.input=d):Object.prototype.hasOwnProperty.call(i.input,"Prefix")&&(d.Prefix=s+n,i.input=d),[2,t(i)]}})})}}},Lk=function(e){return function(n,t){return function(r){return sT(void 0,void 0,void 0,function(){var i,o;return uT(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,n(r)];case 1:return[2,a.sent()];case 2:throw function(e){return e.ServerTime&&"string"==typeof e.Code&&"RequestTimeTooSkewed"===e.Code}(i=a.sent())&&(o=new Date(i.ServerTime),e.systemClockOffset=o.getTime()-Date.now()),i;case 3:return[2]}})})}}},Bk={step:"finalizeRequest",name:"autoAdjustClockskewMiddleware"},Fk={step:"initialize",name:"addPrefixMiddleware"},Ste=function(){return sT(void 0,void 0,void 0,function(){var e,n,t;return uT(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,ic.get()];case 1:return(e=r.sent())?(n=ic.shear(e),Ok.debug("credentials provider get credentials",n),[2,n]):[2,Mk];case 2:return t=r.sent(),Ok.warn("credentials provider error",t),[2,Mk];case 3:return[2]}})})},zk=function(e,n){var r=e.cancelTokenSource,o=e.useAccelerateEndpoint,a={};e.dangerouslyConnectToHttpEndpointForTesting&&(a={endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0});var s=new xte(Cg(Cg({region:e.region,credentials:Ste,customUserAgent:Lc()},a),{requestHandler:new cee({},n,r),useAccelerateEndpoint:o}));return s.middlewareStack.remove(dk),s},Cte=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Zt(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(Nl(r,this.serialize,this.deserialize)),this.middlewareStack.use(Py(r)),this.middlewareStack.use(Fc(r));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:ow.filterSensitiveLog,outputFilterSensitiveLog:iw.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,a,d,f;return It(this,function(E){switch(E.label){case 0:if(t=ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne({"content-type":"application/octet-stream"},$e(e.ACL)&&{"x-amz-acl":e.ACL}),$e(e.CacheControl)&&{"cache-control":e.CacheControl}),$e(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),$e(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),$e(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),$e(e.ContentLength)&&{"content-length":e.ContentLength.toString()}),$e(e.ContentMD5)&&{"content-md5":e.ContentMD5}),$e(e.ContentType)&&{"content-type":e.ContentType}),$e(e.Expires)&&{expires:yp(e.Expires).toString()}),$e(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),$e(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),$e(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),$e(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),$e(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),$e(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),$e(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),$e(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),$e(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),$e(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),$e(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),$e(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),$e(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),$e(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),$e(e.Tagging)&&{"x-amz-tagging":e.Tagging}),$e(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),$e(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),$e(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),$e(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce(function(D,R){var ye;return ne(ne({},D),((ye={})["x-amz-meta-"+R.toLowerCase()]=e.Metadata[R],ye))},{})),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Es(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(D){return Es(D)}).join("/")),o={"x-id":"PutObject"},void 0!==e.Body&&(a=e.Body),[4,n.endpoint()];case 1:return d=E.sent(),[2,new ns({protocol:void 0===(f=d.protocol)?"https":f,hostname:d.hostname,port:d.port,method:"PUT",headers:t,path:r,query:o,body:a})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t;return It(this,function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,bX(e,n)]:(t={$metadata:lt(e),BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(t.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers.etag&&(t.ETag=e.headers.etag),void 0!==e.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-version-id"]&&(t.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(t.RequestCharged=e.headers["x-amz-request-charged"]),[4,Jr(e.body,n)]);case 1:return r.sent(),[2,Promise.resolve(t)]}})})}(t,r)},n}(Ll),jk=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Zt(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(Nl(r,this.serialize,this.deserialize)),this.middlewareStack.use(Py(r)),this.middlewareStack.use(Fc(r));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"S3Client",commandName:"CreateMultipartUploadCommand",inputFilterSensitiveLog:Kb.filterSensitiveLog,outputFilterSensitiveLog:$b.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,s,l;return It(this,function(m){switch(m.label){case 0:if(t=ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne(ne({},$e(e.ACL)&&{"x-amz-acl":e.ACL}),$e(e.CacheControl)&&{"cache-control":e.CacheControl}),$e(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),$e(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),$e(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),$e(e.ContentType)&&{"content-type":e.ContentType}),$e(e.Expires)&&{expires:yp(e.Expires).toString()}),$e(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),$e(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),$e(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),$e(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),$e(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),$e(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),$e(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),$e(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),$e(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),$e(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),$e(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),$e(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),$e(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),$e(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),$e(e.Tagging)&&{"x-amz-tagging":e.Tagging}),$e(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),$e(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),$e(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),$e(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce(function(E,D){var R;return ne(ne({},E),((R={})["x-amz-meta-"+D.toLowerCase()]=e.Metadata[D],R))},{})),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Es(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(E){return Es(E)}).join("/")),o={uploads:""},[4,n.endpoint()];case 1:return s=m.sent(),[2,new ns({protocol:void 0===(l=s.protocol)?"https":l,hostname:s.hostname,port:s.port,method:"POST",headers:t,path:r,query:o,body:void 0})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r;return It(this,function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,$9(e,n)]:(t={$metadata:lt(e),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,BucketKeyEnabled:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==e.headers["x-amz-abort-date"]&&(t.AbortDate=new Date(e.headers["x-amz-abort-date"])),void 0!==e.headers["x-amz-abort-rule-id"]&&(t.AbortRuleId=e.headers["x-amz-abort-rule-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(t.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ut(e.body,n)]);case 1:return void 0!==(r=i.sent()).Bucket&&(t.Bucket=r.Bucket),void 0!==r.Key&&(t.Key=r.Key),void 0!==r.UploadId&&(t.UploadId=r.UploadId),[2,Promise.resolve(t)]}})})}(t,r)},n}(Ll),Iw=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne({},n),n.SSEKMSKeyId&&{SSEKMSKeyId:us})}}(Iw||(Iw={})),Iw))(),Pw=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne({},n),n.SSECustomerKey&&{SSECustomerKey:us})}}(Pw||(Pw={})),Pw))(),Uk=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Zt(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(Nl(r,this.serialize,this.deserialize)),this.middlewareStack.use(Py(r)),this.middlewareStack.use(Fc(r));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"S3Client",commandName:"UploadPartCommand",inputFilterSensitiveLog:Pw.filterSensitiveLog,outputFilterSensitiveLog:Iw.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,a,d,f;return It(this,function(E){switch(E.label){case 0:if(t=ne(ne(ne(ne(ne(ne(ne({"content-type":"application/octet-stream"},$e(e.ContentLength)&&{"content-length":e.ContentLength.toString()}),$e(e.ContentMD5)&&{"content-md5":e.ContentMD5}),$e(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),$e(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),$e(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),$e(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),$e(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Es(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(D){return Es(D)}).join("/")),o=ne(ne({"x-id":"UploadPart"},void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()}),void 0!==e.UploadId&&{uploadId:e.UploadId}),void 0!==e.Body&&(a=e.Body),[4,n.endpoint()];case 1:return d=E.sent(),[2,new ns({protocol:void 0===(f=d.protocol)?"https":f,hostname:d.hostname,port:d.port,method:"PUT",headers:t,path:r,query:o,body:a})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t;return It(this,function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,RX(e,n)]:(t={$metadata:lt(e),BucketKeyEnabled:void 0,ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==e.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers.etag&&(t.ETag=e.headers.etag),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(t.RequestCharged=e.headers["x-amz-request-charged"]),[4,Jr(e.body,n)]);case 1:return r.sent(),[2,Promise.resolve(t)]}})})}(t,r)},n}(Ll),Gk=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Zt(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(Nl(r,this.serialize,this.deserialize)),this.middlewareStack.use(rk(r)),this.middlewareStack.use(Fc(r));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"S3Client",commandName:"CompleteMultipartUploadCommand",inputFilterSensitiveLog:Vb.filterSensitiveLog,outputFilterSensitiveLog:Gb.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,a,s,d,f;return It(this,function(E){switch(E.label){case 0:if(t=ne(ne({"content-type":"application/xml"},$e(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),$e(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Es(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(D){return Es(D)}).join("/")),o=ne({},void 0!==e.UploadId&&{uploadId:e.UploadId}),void 0!==e.MultipartUpload&&(s=function(e,n){var t=new sw("CompletedMultipartUpload");return null!=e.Parts&&oW(e.Parts,n).map(function(i){i=i.withName("Part"),t.addChildNode(i)}),t}(e.MultipartUpload,n),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,n.endpoint()];case 1:return d=E.sent(),[2,new ns({protocol:void 0===(f=d.protocol)?"https":f,hostname:d.hostname,port:d.port,method:"POST",headers:t,path:r,query:o,body:a})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r;return It(this,function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,U9(e,n)]:(t={$metadata:lt(e),Bucket:void 0,BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(t.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-version-id"]&&(t.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(t.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ut(e.body,n)]);case 1:return void 0!==(r=i.sent()).Bucket&&(t.Bucket=r.Bucket),void 0!==r.ETag&&(t.ETag=r.ETag),void 0!==r.Key&&(t.Key=r.Key),void 0!==r.Location&&(t.Location=r.Location),[2,Promise.resolve(t)]}})})}(t,r)},n}(Ll),Vk=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Zt(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(Nl(r,this.serialize,this.deserialize)),this.middlewareStack.use(Fc(r));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"S3Client",commandName:"AbortMultipartUploadCommand",inputFilterSensitiveLog:Ub.filterSensitiveLog,outputFilterSensitiveLog:jb.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,s,l;return It(this,function(m){switch(m.label){case 0:if(t=ne(ne({},$e(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),$e(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Es(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(E){return Es(E)}).join("/")),o=ne({"x-id":"AbortMultipartUpload"},void 0!==e.UploadId&&{uploadId:e.UploadId}),[4,n.endpoint()];case 1:return s=m.sent(),[2,new ns({protocol:void 0===(l=s.protocol)?"https":l,hostname:s.hostname,port:s.port,method:"DELETE",headers:t,path:r,query:o,body:void 0})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t;return It(this,function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,z9(e,n)]:(t={$metadata:lt(e),RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(t.RequestCharged=e.headers["x-amz-request-charged"]),[4,Jr(e.body,n)]);case 1:return r.sent(),[2,Promise.resolve(t)]}})})}(t,r)},n}(Ll),qk=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Zt(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(Nl(r,this.serialize,this.deserialize)),this.middlewareStack.use(Fc(r));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"S3Client",commandName:"ListPartsCommand",inputFilterSensitiveLog:rw.filterSensitiveLog,outputFilterSensitiveLog:nw.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,s,l;return It(this,function(m){switch(m.label){case 0:if(t=ne(ne({},$e(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),$e(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Es(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map(function(E){return Es(E)}).join("/")),o=ne(ne(ne({"x-id":"ListParts"},void 0!==e.MaxParts&&{"max-parts":e.MaxParts.toString()}),void 0!==e.PartNumberMarker&&{"part-number-marker":e.PartNumberMarker}),void 0!==e.UploadId&&{uploadId:e.UploadId}),[4,n.endpoint()];case 1:return s=m.sent(),[2,new ns({protocol:void 0===(l=s.protocol)?"https":l,hostname:s.hostname,port:s.port,method:"GET",headers:t,path:r,query:o,body:void 0})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r;return It(this,function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,eX(e,n)]:(t={$metadata:lt(e),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},void 0!==e.headers["x-amz-abort-date"]&&(t.AbortDate=new Date(e.headers["x-amz-abort-date"])),void 0!==e.headers["x-amz-abort-rule-id"]&&(t.AbortRuleId=e.headers["x-amz-abort-rule-id"]),void 0!==e.headers["x-amz-request-charged"]&&(t.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ut(e.body,n)]);case 1:return void 0!==(r=i.sent()).Bucket&&(t.Bucket=r.Bucket),void 0!==r.Initiator&&(t.Initiator=function(e,n){var t={ID:void 0,DisplayName:void 0};return void 0!==e.ID&&(t.ID=e.ID),void 0!==e.DisplayName&&(t.DisplayName=e.DisplayName),t}(r.Initiator)),void 0!==r.IsTruncated&&(t.IsTruncated="true"==r.IsTruncated),void 0!==r.Key&&(t.Key=r.Key),void 0!==r.MaxParts&&(t.MaxParts=parseInt(r.MaxParts)),void 0!==r.NextPartNumberMarker&&(t.NextPartNumberMarker=r.NextPartNumberMarker),void 0!==r.Owner&&(t.Owner=fh(r.Owner,n)),void 0!==r.PartNumberMarker&&(t.PartNumberMarker=r.PartNumberMarker),""===r.Part&&(t.Parts=[]),void 0!==r.Part&&(t.Parts=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){var t={PartNumber:void 0,LastModified:void 0,ETag:void 0,Size:void 0};return void 0!==e.PartNumber&&(t.PartNumber=parseInt(e.PartNumber)),void 0!==e.LastModified&&(t.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(t.ETag=e.ETag),void 0!==e.Size&&(t.Size=parseInt(e.Size)),t}(t)})}(fy(r.Part))),void 0!==r.StorageClass&&(t.StorageClass=r.StorageClass),void 0!==r.UploadId&&(t.UploadId=r.UploadId),[2,Promise.resolve(t)]}})})}(t,r)},n}(Ll),lT=O(9069),Dy=function(){return Dy=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Dy.apply(this,arguments)},Ap=function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})},Rp=function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},Tg=new _a("AWSS3ProviderManagedUpload"),Tte=function(){function e(n,t,r){this.minPartSize=5242880,this.queueSize=4,this.body=null,this.params=null,this.opts=null,this.completedParts=[],this.uploadId=null,this.bytesUploaded=0,this.totalBytesToUpload=0,this.emitter=null,this.params=n,this.opts=t,this.emitter=r,this.s3client=this._createNewS3Client(t,r)}return e.prototype.upload=function(){return Ap(this,void 0,void 0,function(){var n,t,r,i,o,a,s,d=this;return Rp(this,function(l){switch(l.label){case 0:return l.trys.push([0,10,,12]),n=this,[4,this.validateAndSanitizeBody(this.params.Body)];case 1:return n.body=l.sent(),this.totalBytesToUpload=this.byteLength(this.body),this.totalBytesToUpload<=this.minPartSize?(this.params.Body=this.body,t=new Cte(this.params),[2,this.s3client.send(t)]):[3,2];case 2:return r=this,[4,this.createMultiPartUpload()];case 3:r.uploadId=l.sent(),i=Math.ceil(this.totalBytesToUpload/this.minPartSize),o=this.createParts(),a=0,l.label=4;case 4:return a<i?[4,this.uploadParts(this.uploadId,o.slice(a,a+this.queueSize))]:[3,7];case 5:l.sent(),l.label=6;case 6:return a+=this.queueSize,[3,4];case 7:return o.map(function(f){d.removeEventListener(f)}),[4,this.finishMultiPartUpload(this.uploadId)];case 8:return[2,l.sent()];case 9:return[3,12];case 10:return s=l.sent(),[4,this.cleanup(this.uploadId)];case 11:throw l.sent(),Tg.error("Error. Cancelling the multipart upload."),s;case 12:return[2]}})})},e.prototype.createParts=function(){try{for(var n=[],t=0;t<this.totalBytesToUpload;){var r=Math.min(t+this.minPartSize,this.totalBytesToUpload);n.push({bodyPart:this.body.slice(t,r),partNumber:n.length+1,emitter:new lT.EventEmitter,_lastUploadedBytes:0}),t+=this.minPartSize}return n}catch(i){throw Tg.error(i),i}},e.prototype.createMultiPartUpload=function(){return Ap(this,void 0,void 0,function(){var n,t,r;return Rp(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=new jk(this.params),[4,this.s3client.send(n)];case 1:return t=i.sent(),Tg.debug(t.UploadId),[2,t.UploadId];case 2:throw r=i.sent(),Tg.error(r),r;case 3:return[2]}})})},e.prototype.uploadParts=function(n,t){return Ap(this,void 0,void 0,function(){var r,i,o,a=this;return Rp(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,Promise.all(t.map(function(d){return Ap(a,void 0,void 0,function(){var l,f,E,D,R;return Rp(this,function(xe){switch(xe.label){case 0:return this.setupEventListener(d),l={emitter:d.emitter},D=(f=this.params).SSECustomerKey,R=f.SSECustomerKeyMD5,[4,this.s3client.send(new Uk(Dy(Dy(Dy({PartNumber:d.partNumber,Body:d.bodyPart,UploadId:n,Key:f.Key,Bucket:f.Bucket},(E=f.SSECustomerAlgorithm)&&{SSECustomerAlgorithm:E}),D&&{SSECustomerKey:D}),R&&{SSECustomerKeyMD5:R})),l)];case 1:return[2,xe.sent()]}})})}))];case 1:for(r=s.sent(),i=0;i<r.length;i++)this.completedParts.push({PartNumber:t[i].partNumber,ETag:r[i].ETag});return[3,3];case 2:throw o=s.sent(),Tg.error("Error happened while uploading a part. Cancelling the multipart upload"),o;case 3:return[2]}})})},e.prototype.finishMultiPartUpload=function(n){return Ap(this,void 0,void 0,function(){var r,o;return Rp(this,function(a){switch(a.label){case 0:r=new Gk({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:n,MultipartUpload:{Parts:this.completedParts}}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.s3client.send(r)];case 2:return[2,a.sent().Key];case 3:throw o=a.sent(),Tg.error("Error happened while finishing the upload."),o;case 4:return[2]}})})},e.prototype.cleanup=function(n){return Ap(this,void 0,void 0,function(){var t,r;return Rp(this,function(i){switch(i.label){case 0:return this.body=null,this.completedParts=[],this.bytesUploaded=0,this.totalBytesToUpload=0,[4,this.s3client.send(new Vk(t={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:n}))];case 1:return i.sent(),[4,this.s3client.send(new qk(t))];case 2:if((r=i.sent())&&r.Parts&&r.Parts.length>0)throw new Error("Multipart upload clean up failed.");return[2]}})})},e.prototype.removeEventListener=function(n){n.emitter.removeAllListeners(Ay),n.emitter.removeAllListeners(yw)},e.prototype.setupEventListener=function(n){var t=this;n.emitter.on(Ay,function(r){t.progressChanged(n.partNumber,r.loaded-n._lastUploadedBytes),n._lastUploadedBytes=r.loaded})},e.prototype.progressChanged=function(n,t){this.bytesUploaded+=t,this.emitter.emit(Ay,{loaded:this.bytesUploaded,total:this.totalBytesToUpload,part:n,key:this.params.Key})},e.prototype.byteLength=function(n){if(null==n)return 0;if("number"==typeof n.byteLength)return n.byteLength;if("number"==typeof n.length)return n.length;if("number"==typeof n.size)return n.size;if("string"!=typeof n.path)throw new Error("Cannot determine length of "+n)},e.prototype.validateAndSanitizeBody=function(n){return Ap(this,void 0,void 0,function(){return Rp(this,function(t){return this.isGenericObject(n)?[2,JSON.stringify(n)]:[2,n]})})},e.prototype.isGenericObject=function(n){if(null!==n&&"object"==typeof n)try{return!(this.byteLength(n)>=0)}catch{return!0}return!1},e.prototype._createNewS3Client=function(n,t){var r=zk(n,t);return r.middlewareStack.add(Nk(this.opts,this.params.Key),Fk),r.middlewareStack.add(Lk(r.config),Bk),r},e}(),Ite=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Zt(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(Nl(r,this.serialize,this.deserialize)),this.middlewareStack.use(Fc(r));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"S3Client",commandName:"ListObjectsV2Command",inputFilterSensitiveLog:tw.filterSensitiveLog,outputFilterSensitiveLog:ew.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,s,l;return It(this,function(m){switch(m.label){case 0:if(t=ne(ne({},$e(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),$e(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",Es(i)),o=ne(ne(ne(ne(ne(ne(ne({"list-type":"2"},void 0!==e.Delimiter&&{delimiter:e.Delimiter}),void 0!==e.EncodingType&&{"encoding-type":e.EncodingType}),void 0!==e.MaxKeys&&{"max-keys":e.MaxKeys.toString()}),void 0!==e.Prefix&&{prefix:e.Prefix}),void 0!==e.ContinuationToken&&{"continuation-token":e.ContinuationToken}),void 0!==e.FetchOwner&&{"fetch-owner":e.FetchOwner.toString()}),void 0!==e.StartAfter&&{"start-after":e.StartAfter}),[4,n.endpoint()];case 1:return s=m.sent(),[2,new ns({protocol:void 0===(l=s.protocol)?"https":l,hostname:s.hostname,port:s.port,method:"GET",headers:t,path:r,query:o,body:void 0})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r;return It(this,function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,ZK(e,n)]:(t={$metadata:lt(e),CommonPrefixes:void 0,Contents:void 0,ContinuationToken:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,KeyCount:void 0,MaxKeys:void 0,Name:void 0,NextContinuationToken:void 0,Prefix:void 0,StartAfter:void 0},[4,Ut(e.body,n)]);case 1:return""===(r=i.sent()).CommonPrefixes&&(t.CommonPrefixes=[]),void 0!==r.CommonPrefixes&&(t.CommonPrefixes=lw(fy(r.CommonPrefixes))),""===r.Contents&&(t.Contents=[]),void 0!==r.Contents&&(t.Contents=GM(fy(r.Contents),n)),void 0!==r.ContinuationToken&&(t.ContinuationToken=r.ContinuationToken),void 0!==r.Delimiter&&(t.Delimiter=r.Delimiter),void 0!==r.EncodingType&&(t.EncodingType=r.EncodingType),void 0!==r.IsTruncated&&(t.IsTruncated="true"==r.IsTruncated),void 0!==r.KeyCount&&(t.KeyCount=parseInt(r.KeyCount)),void 0!==r.MaxKeys&&(t.MaxKeys=parseInt(r.MaxKeys)),void 0!==r.Name&&(t.Name=r.Name),void 0!==r.NextContinuationToken&&(t.NextContinuationToken=r.NextContinuationToken),void 0!==r.Prefix&&(t.Prefix=r.Prefix),void 0!==r.StartAfter&&(t.StartAfter=r.StartAfter),[2,Promise.resolve(t)]}})})}(t,r)},n}(Ll),Fl=function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})},zl=function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},Pte=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},fl=new _a("AWSS3UploadTask"),Ha=(()=>(function(e){e[e.INIT=0]="INIT",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.PAUSED=2]="PAUSED",e[e.CANCELLED=3]="CANCELLED",e[e.COMPLETED=4]="COMPLETED"}(Ha||(Ha={})),Ha))(),sc=(()=>(function(e){e.CANCEL="cancel",e.UPLOAD_COMPLETE="uploadComplete",e.UPLOAD_PROGRESS="uploadPartProgress",e.ERROR="error"}(sc||(sc={})),sc))();function Ote(e,n){return e.PartNumber-n.PartNumber}var $k=function(){function e(n){var t=n.s3Client,r=n.file,i=n.emitter,o=n.storage,a=n.params,s=n.level,d=n.prefixPromise;this.partSize=5242880,this.queueSize=4,this.inProgress=[],this.completedParts=[],this.queued=[],this.bytesUploaded=0,this.totalBytes=0,this.state=Ha.INIT,this.prefixPromise=d,this.s3client=t,this.s3client.middlewareStack.remove(dk),this.storage=o,this.storageSync=Promise.resolve(),"function"==typeof this.storage.sync&&(this.storageSync=this.storage.sync()),this.params=a,this.file=r,this.totalBytes=this.file.size,this.bytesUploaded=0,this.emitter=i,this.queued=[],this.fileId=this._getFileId(s),this._validateParams(),this.emitter.on(sc.ERROR,function(){})}return Object.defineProperty(e.prototype,"percent",{get:function(){return this.bytesUploaded/this.totalBytes*100},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInProgress",{get:function(){return this.state===Ha.IN_PROGRESS},enumerable:!0,configurable:!0}),e.prototype._listSingleFile=function(n){var t=n.key,r=n.bucket;return Fl(this,void 0,void 0,function(){var i,o,a,s;return zl(this,function(l){switch(l.label){case 0:return[4,this.s3client.send(new Ite({Bucket:r,Prefix:t}))];case 1:return i=l.sent(),a=void 0===(o=i.Contents)?[]:o,[4,this.prefixPromise];case 2:return s=l.sent(),[2,a.find(function(f){return f.Key===""+s+t})]}})})},e.prototype._getFileId=function(n){return function(e){return typeof e<"u"&&e instanceof File}(this.file)?[this.file.name,this.file.lastModified,this.file.size,this.file.type,this.params.Bucket,n,this.params.Key].join("-"):[this.file.size,this.file.type,this.params.Bucket,n,this.params.Key].join("-")},e.prototype._findCachedUploadParts=function(){return Fl(this,void 0,void 0,function(){var n,t;return zl(this,function(i){switch(i.label){case 0:return[4,this._listCachedUploadTasks()];case 1:return n=i.sent(),0!==Object.keys(n).length&&Object.prototype.hasOwnProperty.call(n,this.fileId)?((t=n[this.fileId]).lastTouched=Date.now(),this.storage.setItem(Ry,JSON.stringify(n)),[4,this.s3client.send(new qk({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:t.uploadId}))]):[2,{parts:[],uploadId:null}];case 2:return[2,{parts:i.sent().Parts||[],uploadId:t.uploadId}]}})})},e.prototype._emitEvent=function(n,t){this.emitter.emit(n,t)},e.prototype._validateParams=function(){if(this.file.size/this.partSize>1e4)throw new Error("Too many parts. Number of parts is "+this.file.size/this.partSize+", maximum is 10000.")},e.prototype._listCachedUploadTasks=function(){return Fl(this,void 0,void 0,function(){var n;return zl(this,function(t){switch(t.label){case 0:return[4,this.storageSync];case 1:return t.sent(),n=this.storage.getItem(Ry)||"{}",[2,JSON.parse(n)]}})})},e.prototype._cache=function(n){return Fl(this,void 0,void 0,function(){var t;return zl(this,function(r){switch(r.label){case 0:return[4,this._listCachedUploadTasks()];case 1:return(t=r.sent())[this.fileId]=n,this.storage.setItem(Ry,JSON.stringify(t)),[2]}})})},e.prototype._isCached=function(){return Fl(this,void 0,void 0,function(){var n,t;return zl(this,function(r){switch(r.label){case 0:return t=(n=Object.prototype.hasOwnProperty).call,[4,this._listCachedUploadTasks()];case 1:return[2,t.apply(n,[r.sent(),this.fileId])]}})})},e.prototype._removeFromCache=function(){return Fl(this,void 0,void 0,function(){var n;return zl(this,function(t){switch(t.label){case 0:return[4,this._listCachedUploadTasks()];case 1:return delete(n=t.sent())[this.fileId],this.storage.setItem(Ry,JSON.stringify(n)),[2]}})})},e.prototype._onPartUploadCompletion=function(n){var t=n.eTag,r=n.partNumber,i=n.chunk;return Fl(this,void 0,void 0,function(){return zl(this,function(o){return this.completedParts.push({ETag:t,PartNumber:r}),this.bytesUploaded+=function(e){if("string"==typeof e)return e.length;if(function(e){return typeof e<"u"&&e instanceof ArrayBuffer}(e))return e.byteLength;if(function(e){return typeof e<"u"&&e instanceof Blob}(e))return e.size;throw new Error("Cannot determine byte length of "+e)}(i),this._emitEvent(sc.UPLOAD_PROGRESS,{loaded:this.bytesUploaded,total:this.totalBytes}),this.inProgress=this.inProgress.filter(function(a){return a.uploadPartInput.PartNumber!==r}),this.queued.length&&this.state!==Ha.PAUSED&&this._startNextPart(),this._isDone()&&this._completeUpload(),[2]})})},e.prototype._completeUpload=function(){return Fl(this,void 0,void 0,function(){var n;return zl(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.s3client.send(new Gk({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:this.uploadId,MultipartUpload:{Parts:this.completedParts.sort(Ote)}}))];case 1:return t.sent(),this._verifyFileSize(),this._emitEvent(sc.UPLOAD_COMPLETE,{key:this.params.Bucket+"/"+this.params.Key}),this._removeFromCache(),this.state=Ha.COMPLETED,[3,3];case 2:return n=t.sent(),fl.error("error completing upload",n),this._emitEvent(sc.ERROR,n),[3,3];case 3:return[2]}})})},e.prototype._makeUploadPartRequest=function(n,t){return Fl(this,void 0,void 0,function(){var r,i;return zl(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this.s3client.send(new Uk(n),{cancelTokenSource:t})];case 1:return r=o.sent(),[4,this._onPartUploadCompletion({eTag:r.ETag,partNumber:n.PartNumber,chunk:n.Body})];case 2:return o.sent(),[3,4];case 3:return i=o.sent(),this.state===Ha.PAUSED?fl.log("upload paused"):this.state===Ha.CANCELLED?fl.log("upload aborted"):fl.error("error starting next part of upload: ",i),!hh().isCancel(i)&&i.message!==Eg.UPLOAD_PAUSED_MESSAGE&&(this._emitEvent(sc.ERROR,i),this.pause()),[3,4];case 4:return[2]}})})},e.prototype._startNextPart=function(){if(this.queued.length>0&&this.state!==Ha.PAUSED){var n=hh().CancelToken.source(),t=this.queued.shift();this.inProgress.push({uploadPartInput:t,s3Request:this._makeUploadPartRequest(t,n),cancel:n.cancel})}},e.prototype._verifyFileSize=function(){return Fl(this,void 0,void 0,function(){var n,t;return zl(this,function(r){switch(r.label){case 0:return[4,this._listSingleFile({key:this.params.Key,bucket:this.params.Bucket})];case 1:if(n=r.sent(),!(t=Boolean(n&&n.Size===this.file.size)))throw new Error("File size does not match between local file and file on s3");return[2,t]}})})},e.prototype._isDone=function(){return!this.queued.length&&!this.inProgress.length&&this.bytesUploaded===this.totalBytes},e.prototype._createParts=function(){for(var n=this.file.size,t=[],r=0;r<n;){var i=Math.min(r+this.partSize,n);t.push({Body:this.file.slice(r,i),Key:this.params.Key,Bucket:this.params.Bucket,PartNumber:t.length+1,UploadId:this.uploadId}),r+=this.partSize}return t},e.prototype._initCachedUploadParts=function(n){this.bytesUploaded+=n.reduce(function(r,i){return r+i.Size},0);var t=new Set(n.map(function(r){return r.PartNumber}));this.queued=this.queued.filter(function(r){return!t.has(r.PartNumber)}),this.completedParts=n.map(function(r){return{PartNumber:r.PartNumber,ETag:r.ETag}}),this._emitEvent(sc.UPLOAD_PROGRESS,{loaded:this.bytesUploaded,total:this.totalBytes})},e.prototype._initMultipartUpload=function(){return Fl(this,void 0,void 0,function(){var n;return zl(this,function(t){switch(t.label){case 0:return[4,this.s3client.send(new jk(this.params))];case 1:return n=t.sent(),this._cache({uploadId:n.UploadId,lastTouched:Date.now(),bucket:this.params.Bucket,key:this.params.Key,fileName:this.file instanceof File?this.file.name:""}),[2,n.UploadId]}})})},e.prototype._initializeUploadTask=function(){return Fl(this,void 0,void 0,function(){var n,t,r,i;return zl(this,function(o){switch(o.label){case 0:this.state=Ha.IN_PROGRESS,o.label=1;case 1:return o.trys.push([1,7,,8]),[4,this._isCached()];case 2:return o.sent()?[4,this._findCachedUploadParts()]:[3,4];case 3:return n=o.sent(),t=n.parts,this.uploadId=r=n.uploadId,this.queued=this._createParts(),this._initCachedUploadParts(t),this._startUpload(),[3,6];case 4:return this.uploadId?[3,6]:[4,this._initMultipartUpload()];case 5:r=o.sent(),this.uploadId=r,this.queued=this._createParts(),this._startUpload(),o.label=6;case 6:return[3,8];case 7:return i=o.sent(),hh().isCancel(i)||fl.error("Error initializing the upload task",i),[3,8];case 8:return[2]}})})},e.prototype.resume=function(){this.state===Ha.CANCELLED?fl.warn("This task has already been cancelled"):this.state===Ha.COMPLETED?fl.warn("This task has already been completed"):this.state===Ha.IN_PROGRESS?fl.warn("Upload task already in progress"):this.uploadId?this._startUpload():this._initializeUploadTask()},e.prototype._startUpload=function(){this.state=Ha.IN_PROGRESS;for(var n=0;n<this.queueSize;n++)this._startNextPart()},e.prototype._cancel=function(){return Fl(this,void 0,void 0,function(){var n;return zl(this,function(t){switch(t.label){case 0:return this.state!==Ha.CANCELLED?[3,1]:(fl.warn("This task has already been cancelled"),[2,!1]);case 1:return this.state!==Ha.COMPLETED?[3,2]:(fl.warn("This task has already been completed"),[2,!1]);case 2:this.pause(),this.queued=[],this.completedParts=[],this.bytesUploaded=0,this.state=Ha.CANCELLED,t.label=3;case 3:return t.trys.push([3,6,,7]),[4,this.s3client.send(new Vk({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:this.uploadId}))];case 4:return t.sent(),[4,this._removeFromCache()];case 5:return t.sent(),[2,!0];case 6:return n=t.sent(),fl.error("Error cancelling upload task",n),[2,!1];case 7:return[2]}})})},e.prototype.pause=function(){var n;this.state===Ha.CANCELLED?fl.warn("This task has already been cancelled"):this.state===Ha.COMPLETED?fl.warn("This task has already been completed"):this.state===Ha.PAUSED&&fl.warn("This task is already paused"),this.state=Ha.PAUSED;var t=this.inProgress.splice(0,this.inProgress.length);t.forEach(function(r){r.cancel(Eg.UPLOAD_PAUSED_MESSAGE)}),(n=this.queued).unshift.apply(n,function(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(Pte(arguments[n]));return e}(t.map(function(r){return r.uploadPartInput})))},e}(),dd=function(){return dd=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},dd.apply(this,arguments)},Oy=function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})},My=function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},Ss=new _a("AWSS3Provider"),kte=function(){function e(n){var t=this;this._config=n||{},this._storage=(new X0).getStorage(),Jd.listen("auth",function(r){var i=r.payload;("signOut"===i.event||"signIn"===i.event)&&t._storage.removeItem(Ry)}),Ss.debug("Storage Options",this._config)}return e.prototype.getCategory=function(){return e.CATEGORY},e.prototype.getProviderName=function(){return e.PROVIDER_NAME},e.prototype.configure=function(n){if(Ss.debug("configure Storage",n),!n)return this._config;var t=pC.parseMobilehubConfig(n);return this._config=Object.assign({},this._config,t.Storage),this._config.bucket||Ss.debug("Do not have bucket yet"),this._config},e.prototype.startResumableUpload=function(n,t){var r=n.s3Client,i=n.emitter,o=n.key,a=n.file,s=n.params,d=t.progressCallback,l=t.completeCallback,f=t.errorCallback,_=t.track,m=void 0!==_&&_;if(!(a instanceof Blob))throw new Error(cd.INVALID_BLOB);i.on(sc.UPLOAD_PROGRESS,function(R){d&&("function"==typeof d?d(R):Ss.warn("progressCallback should be a function, not a "+typeof d))}),i.on(sc.UPLOAD_COMPLETE,function(R){l&&("function"==typeof l?l(R):Ss.warn("completeCallback should be a function, not a "+typeof l))}),i.on(sc.ERROR,function(R){f&&("function"==typeof f?f(R):Ss.warn("errorCallback should be a function, not a "+typeof f))});var E=ic.get().then(function(R){var ye=ic.shear(R);return kk(dd(dd({},t),{credentials:ye}))}),D=new $k({s3Client:r,file:a,emitter:i,level:t.level,storage:this._storage,params:s,prefixPromise:E});return Bl(m,"upload",{method:"put",result:"success"},null,"Upload Task created successfully for "+o),D.resume(),D},e.prototype.copy=function(n,t,r){return Oy(this,void 0,void 0,function(){var o,a,s,d,l,f,_,m,E,D,R,ye,xe,et,We,vt,Mt,en,nr,Qn,Zr,Ci,cr,ba,wa;return My(this,function(Ma){switch(Ma.label){case 0:return[4,this._ensureCredentials()];case 1:if(!Ma.sent()||!this._isWithCredentials(this._config))throw new Error(cd.NO_CREDENTIALS);if(o=Object.assign({},this._config,r),a=o.acl,s=o.bucket,d=o.cacheControl,l=o.expires,f=o.track,_=o.serverSideEncryption,m=o.SSECustomerAlgorithm,E=o.SSECustomerKey,D=o.SSECustomerKeyMD5,R=o.SSEKMSKeyId,xe=void 0===(ye=n.level)?"public":ye,et=n.identityId,Mt=void 0===(vt=t.level)?"public":vt,en=t.key,!(We=n.key)||"string"!=typeof We)throw new Error(cd.NO_SRC_KEY);if(!en||"string"!=typeof en)throw new Error(cd.NO_DEST_KEY);"protected"!==xe&&et&&Ss.warn('You may copy files from another user if the source level is "protected", currently it\'s '+xe),nr=this._prefix(dd(dd(dd({},o),{level:xe}),et&&{identityId:et})),Qn=this._prefix(dd(dd({},o),{level:Mt})),Ss.debug("copying "+(Zr=s+"/"+nr+We)+" to "+(Ci=""+Qn+en)),cr={Bucket:s,CopySource:Zr,Key:Ci,MetadataDirective:"COPY"},d&&(cr.CacheControl=d),l&&(cr.Expires=l),_&&(cr.ServerSideEncryption=_),m&&(cr.SSECustomerAlgorithm=m),E&&(cr.SSECustomerKey=E),D&&(cr.SSECustomerKeyMD5=D),R&&(cr.SSEKMSKeyId=R),a&&(cr.ACL=a),ba=this._createNewS3Client(o),Ma.label=2;case 2:return Ma.trys.push([2,4,,5]),[4,ba.send(new HQ(cr))];case 3:return Ma.sent(),Bl(f,"copy",{method:"copy",result:"success"},null,"Copy success from "+We+" to "+en),[2,{key:en}];case 4:throw wa=Ma.sent(),Bl(f,"copy",{method:"copy",result:"failed"},null,"Copy failed from "+We+" to "+en),wa;case 5:return[2]}})})},e.prototype.get=function(n,t){return Oy(this,void 0,void 0,function(){var i,o,a,s,d,l,f,_,m,E,D,R,ye,xe,et,We,vt,Mt,en,nr,Qn,Zr,Ci,cr,ba,wa,Ma;return My(this,function(Ws){switch(Ws.label){case 0:return[4,this._ensureCredentials()];case 1:if(!Ws.sent()||!this._isWithCredentials(this._config))throw new Error(cd.NO_CREDENTIALS);if(i=Object.assign({},this._config,t),o=i.bucket,a=i.download,s=i.cacheControl,d=i.contentDisposition,l=i.contentEncoding,f=i.contentLanguage,_=i.contentType,m=i.expires,E=i.track,D=i.SSECustomerAlgorithm,R=i.SSECustomerKey,ye=i.SSECustomerKeyMD5,xe=i.progressCallback,et=this._prefix(i),We=et+n,vt=new lT.EventEmitter,Mt=this._createNewS3Client(i,vt),Ss.debug("get "+n+" from "+We),en={Bucket:o,Key:We},s&&(en.ResponseCacheControl=s),d&&(en.ResponseContentDisposition=d),l&&(en.ResponseContentEncoding=l),f&&(en.ResponseContentLanguage=f),_&&(en.ResponseContentType=_),D&&(en.SSECustomerAlgorithm=D),R&&(en.SSECustomerKey=R),ye&&(en.SSECustomerKeyMD5=ye),!0!==a)return[3,5];nr=new ik(en),Ws.label=2;case 2:return Ws.trys.push([2,4,,5]),xe&&("function"==typeof xe?vt.on(yw,function(Fp){xe(Fp)}):Ss.warn("progressCallback should be a function, not a "+typeof xe)),[4,Mt.send(nr)];case 3:return Qn=Ws.sent(),vt.removeAllListeners(yw),Bl(E,"download",{method:"get",result:"success"},{fileSize:Number(Qn.Body.size||Qn.Body.length)},"Download success for "+n),[2,Qn];case 4:throw Zr=Ws.sent(),Bl(E,"download",{method:"get",result:"failed"},null,"Download failed with "+Zr.message),Zr;case 5:return Ws.trys.push([5,8,,9]),Ci=new ree(dd({},Mt.config)),[4,JQ(Mt,new ik(en))];case 6:return cr=Ws.sent(),wa=XQ,[4,Ci.presign(cr,{expiresIn:m||900})];case 7:return ba=wa.apply(void 0,[Ws.sent()]),Bl(E,"getSignedUrl",{method:"get",result:"success"},null,"Signed URL: "+ba),[2,ba];case 8:throw Ma=Ws.sent(),Ss.warn("get signed url error",Ma),Bl(E,"getSignedUrl",{method:"get",result:"failed"},null,"Could not get a signed URL for "+n),Ma;case 9:return[2]}})})},e.prototype.put=function(n,t,r){var i=Object.assign({},this._config,r),o=i.bucket,a=i.track,s=i.progressCallback,d=i.level,l=i.resumable,_=i.contentDisposition,m=i.contentEncoding,E=i.cacheControl,D=i.expires,R=i.metadata,ye=i.tagging,xe=i.acl,et=i.serverSideEncryption,We=i.SSECustomerAlgorithm,vt=i.SSECustomerKey,Mt=i.SSECustomerKeyMD5,en=i.SSEKMSKeyId,Qn={Bucket:o,Key:n,Body:t,ContentType:i.contentType||"binary/octet-stream"};E&&(Qn.CacheControl=E),_&&(Qn.ContentDisposition=_),m&&(Qn.ContentEncoding=m),D&&(Qn.Expires=D),R&&(Qn.Metadata=R),ye&&(Qn.Tagging=ye),et&&(Qn.ServerSideEncryption=et),We&&(Qn.SSECustomerAlgorithm=We),vt&&(Qn.SSECustomerKey=vt),Mt&&(Qn.SSECustomerKeyMD5=Mt),en&&(Qn.SSEKMSKeyId=en);var Zr=new lT.EventEmitter,Ci=new Tte(Qn,i,Zr);if(xe&&(Qn.ACL=xe),!0===l){var cr=this._createNewS3Client(i);return cr.middlewareStack.add(Nk(i,n),Fk),this.startResumableUpload({bucket:o,key:n,s3Client:cr,file:t,emitter:Zr,accessLevel:d,params:Qn},r)}try{return s&&("function"==typeof s?Zr.on(Ay,function(wa){s(wa)}):Ss.warn("progressCallback should be a function, not a "+typeof s)),Ci.upload().then(function(wa){return Ss.debug("upload result",wa),Bl(a,"upload",{method:"put",result:"success"},null,"Upload success for "+n),{key:n}})}catch(wa){throw Ss.warn("error uploading",wa),Bl(a,"upload",{method:"put",result:"failed"},null,"Error uploading "+n),wa}},e.prototype.remove=function(n,t){return Oy(this,void 0,void 0,function(){var i,o,a,s,d,l,_,m,E;return My(this,function(D){switch(D.label){case 0:return[4,this._ensureCredentials()];case 1:if(!D.sent()||!this._isWithCredentials(this._config))throw new Error(cd.NO_CREDENTIALS);i=Object.assign({},this._config,t),o=i.bucket,a=i.track,s=this._prefix(i),d=s+n,l=this._createNewS3Client(i),Ss.debug("remove "+n+" from "+d),_=new $Q({Bucket:o,Key:d}),D.label=2;case 2:return D.trys.push([2,4,,5]),[4,l.send(_)];case 3:return m=D.sent(),Bl(a,"delete",{method:"remove",result:"success"},null,"Deleted "+n+" successfully"),[2,m];case 4:throw E=D.sent(),Bl(a,"delete",{method:"remove",result:"failed"},null,"Deletion of "+n+" failed with "+E),E;case 5:return[2]}})})},e.prototype.list=function(n,t){return Oy(this,void 0,void 0,function(){var i,o,a,s,d,l,f,m,E,D,R;return My(this,function(ye){switch(ye.label){case 0:return[4,this._ensureCredentials()];case 1:if(!ye.sent()||!this._isWithCredentials(this._config))throw new Error(cd.NO_CREDENTIALS);i=Object.assign({},this._config,t),o=i.bucket,a=i.track,s=i.maxKeys,d=this._prefix(i),l=d+n,f=this._createNewS3Client(i),Ss.debug("list "+n+" from "+l),m=new KQ({Bucket:o,Prefix:l,MaxKeys:s}),ye.label=2;case 2:return ye.trys.push([2,4,,5]),[4,f.send(m)];case 3:return E=ye.sent(),D=[],E&&E.Contents&&(D=E.Contents.map(function(xe){return{key:xe.Key.substr(d.length),eTag:xe.ETag,lastModified:xe.LastModified,size:xe.Size}})),Bl(a,"list",{method:"list",result:"success"},null,D.length+" items returned from list operation"),Ss.debug("list",D),[2,D];case 4:throw R=ye.sent(),Ss.warn("list error",R),Bl(a,"list",{method:"list",result:"failed"},null,"Listing items failed: "+R.message),R;case 5:return[2]}})})},e.prototype._ensureCredentials=function(){return Oy(this,void 0,void 0,function(){var n,t,r;return My(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,ic.get()];case 1:return(n=i.sent())?(t=ic.shear(n),Ss.debug("set credentials for storage",t),this._config.credentials=t,[2,!0]):[2,!1];case 2:return r=i.sent(),Ss.warn("ensure credentials error",r),[2,!1];case 3:return[2]}})})},e.prototype._isWithCredentials=function(n){return"object"==typeof n&&n.hasOwnProperty("credentials")},e.prototype._prefix=function(n){var i=n.customPrefix||{},o=n.identityId||n.credentials.identityId,a=(void 0!==i.private?i.private:"private/")+o+"/",s=(void 0!==i.protected?i.protected:"protected/")+o+"/",d=void 0!==i.public?i.public:"public/";switch(n.level){case"private":return a;case"protected":return s;default:return d}},e.prototype._createNewS3Client=function(n,t){var r=zk(n,t);return r.middlewareStack.add(Lk(r.config),Bk),r},e.CATEGORY="Storage",e.PROVIDER_NAME="AWSS3",e}(),fd=function(){return fd=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},fd.apply(this,arguments)},rf=new _a("StorageClass"),gh="AWSS3",Xk=function(){function e(){this._config={},this._pluggables=[],this._cancelTokenSourceMap=new WeakMap,rf.debug("Storage Options",this._config),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.list=this.list.bind(this)}return e.prototype.getModuleName=function(){return"Storage"},e.prototype.addPluggable=function(n){if(n&&"Storage"===n.getCategory())return this._pluggables.push(n),n.configure(this._config[n.getProviderName()])},e.prototype.getPluggable=function(n){var t=this._pluggables.find(function(r){return r.getProviderName()===n});return void 0===t?(rf.debug("No plugin found with providerName",n),null):t},e.prototype.removePluggable=function(n){this._pluggables=this._pluggables.filter(function(t){return t.getProviderName()!==n})},e.prototype.configure=function(n){var t=this;if(rf.debug("configure Storage"),!n)return this._config;var r=pC.parseMobilehubConfig(n),i=Object.keys(r.Storage),o=["bucket","region","level","track","customPrefix","serverSideEncryption","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId"],a=function(d){return o.some(function(l){return l===d})};return i&&i.find(function(l){return a(l)})&&!r.Storage[gh]&&(r.Storage[gh]={}),Object.entries(r.Storage).map(function(d){var l=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}(d,2),f=l[0],_=l[1];f&&a(f)&&void 0!==_&&(r.Storage[gh][f]=_,delete r.Storage[f])}),Object.keys(r.Storage).forEach(function(d){"string"!=typeof r.Storage[d]&&(t._config[d]=fd(fd({},t._config[d]),r.Storage[d]))}),this._pluggables.forEach(function(d){d.configure(t._config[d.getProviderName()])}),0===this._pluggables.length&&this.addPluggable(new kte),this._config},e.prototype.getCancellableTokenSource=function(){return hh().CancelToken.source()},e.prototype.updateRequestToBeCancellable=function(n,t){this._cancelTokenSourceMap.set(n,t)},e.prototype.isUploadTask=function(n){return typeof n<"u"&&"function"==typeof n.pause&&"function"==typeof n.resume},e.prototype.cancel=function(n,t){if(n instanceof $k)return n._cancel();var r=this._cancelTokenSourceMap.get(n);r?r.cancel(t):rf.debug("The request does not map to any cancel token")},e.prototype.copy=function(n,t,r){var i=r?.provider||gh,o=this._pluggables.find(function(d){return d.getProviderName()===i});if(void 0===o)return rf.debug("No plugin found with providerName",i),Promise.reject("No plugin found in Storage for the provider");var a=this.getCancellableTokenSource();if("function"!=typeof o.copy)return Promise.reject(".copy is not implemented on provider "+o.getProviderName());var s=o.copy(n,t,fd(fd({},r),{cancelTokenSource:a}));return this.updateRequestToBeCancellable(s,a),s},e.prototype.get=function(n,t){var r=t?.provider||gh,i=this._pluggables.find(function(s){return s.getProviderName()===r});if(void 0===i)return rf.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider");var o=this.getCancellableTokenSource(),a=i.get(n,fd(fd({},t),{cancelTokenSource:o}));return this.updateRequestToBeCancellable(a,o),a},e.prototype.isCancelError=function(n){return hh().isCancel(n)},e.prototype.put=function(n,t,r){var i=r?.provider||gh,o=this._pluggables.find(function(d){return d.getProviderName()===i});if(void 0===o)return rf.debug("No plugin found with providerName",i),Promise.reject("No plugin found in Storage for the provider");var a=this.getCancellableTokenSource(),s=o.put(n,t,fd(fd({},r),{cancelTokenSource:a}));return this.isUploadTask(s)||this.updateRequestToBeCancellable(s,a),s},e.prototype.remove=function(n,t){var r=t?.provider||gh,i=this._pluggables.find(function(o){return o.getProviderName()===r});return void 0===i?(rf.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider")):i.remove(n,t)},e.prototype.list=function(n,t){var r=t?.provider||gh,i=this._pluggables.find(function(o){return o.getProviderName()===r});return void 0===i?(rf.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider")):i.list(n,t)},e}(),ky=function(){return ky=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},ky.apply(this,arguments)},cT=new _a("Storage"),af=null,Bte=function(){if(af)return af;cT.debug("Create Storage Instance, debug"),(af=new Xk).vault=new Xk;var e=af.configure;return af.configure=function(n){cT.debug("storage configure called");var t=ky({},e.call(af,n));Object.keys(t).forEach(function(r){"string"!=typeof t[r]&&(t[r]=ky(ky({},t[r]),{level:"private"}))}),cT.debug("storage vault configure called"),af.vault.configure(t)},af}();Gu.register(Bte),O(2242),Gu.Auth=SM,Gu.Cache=x9,Gu.ServiceWorker=I8;const Fte=Gu;var Wk=O(4578),vh={clockOffset:0,getDateWithClockOffset:function(){return vh.clockOffset?new Date((new Date).getTime()+vh.clockOffset):new Date},getClockOffset:function(){return vh.clockOffset},getHeaderStringFromDate:function(e){return void 0===e&&(e=vh.getDateWithClockOffset()),e.toISOString().replace(/[:\-]|\.\d{3}/g,"")},getDateFromHeaderString:function(e){var n=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}(e.match(/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2}).+/),7),r=n[2],i=n[3],o=n[4],a=n[5],s=n[6];return new Date(Date.UTC(Number(n[1]),Number(r)-1,Number(i),Number(o),Number(a),Number(s)))},isClockSkewed:function(e){return Math.abs(e.getTime()-vh.getDateWithClockOffset().getTime())>=3e5},isClockSkewError:function(e){if(!e.response||!e.response.headers)return!1;var n=e.response.headers;return Boolean(["BadRequestException","InvalidSignatureException"].includes(n["x-amzn-errortype"])&&(n.date||n.Date))},setClockOffset:function(e){vh.clockOffset=e}},jl=function(){return jl=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},jl.apply(this,arguments)},Jk=new _a("Signer"),Aw="AWS4-HMAC-SHA256",Ny=function(e,n){var t=new Wk.Sha256(e);return t.update(n),t.digestSync()},Zk=function(e){var n=e||"",t=new Wk.Sha256;return t.update(n),ll(t.digestSync())},qte=function(e){return e&&0!==e.length?e.split("&").map(function(n){var t=n.split("=");if(1===t.length)return n;var r=function(e){return e.replace(/[!'()*]/g,function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})}(t[1]);return t[0]+"="+r}).sort(function(n,t){var r=n.split("=")[0],i=t.split("=")[0];return r===i?n<t?-1:1:r<i?-1:1}).join("&"):""},Hte=function(e){return e&&0!==Object.keys(e).length?Object.keys(e).map(function(n){return{key:n.toLowerCase(),value:e[n]?e[n].trim().replace(/\s+/g," "):""}}).sort(function(n,t){return n.key<t.key?-1:1}).map(function(n){return n.key+":"+n.value}).join("\n")+"\n":""},Yk=function(e){return Object.keys(e).map(function(n){return n.toLowerCase()}).sort().join(";")},Qk=function(e){var n=(0,qu.Qc)(e.url);return[e.method||"/",encodeURIComponent(n.pathname).replace(/%2F/gi,"/"),qte(n.query),Hte(e.headers),Yk(e.headers),Zk(e.data)].join("\n")},eN=function(e){var i=((0,qu.Qc)(e.url).host.match(/([^\.]+)\.(?:([^\.]*)\.)?amazonaws\.com$/)||[]).slice(1,3);return"es"===i[1]&&(i=i.reverse()),{service:e.service||i[0],region:e.region||i[1]}},tN=function(e,n,t){return[e,n,t,"aws4_request"].join("/")},nN=function(e,n,t,r){return[e,t,r,Zk(n)].join("\n")},rN=function(e,n,t){Jk.debug(t);var i=Ny("AWS4"+e,n),o=Ny(i,t.region),a=Ny(o,t.service);return Ny(a,"aws4_request")},iN=function(e,n){return ll(Ny(e,n))},Kte=function(){function e(){}return e.sign=function(n,t,r){void 0===r&&(r=null),n.headers=n.headers||{};var o=vh.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),a=o.substr(0,8),s=(0,qu.Qc)(n.url);n.headers.host=s.host,n.headers["x-amz-date"]=o,t.session_token&&(n.headers["X-Amz-Security-Token"]=t.session_token);var d=Qk(n);Jk.debug(d);var l=r||eN(n),f=tN(a,l.region,l.service),_=nN(Aw,d,o,f),m=rN(t.secret_key,a,l),E=iN(m,_),D=function(e,n,t,r,i){return["AWS4-HMAC-SHA256 Credential="+n+"/"+t,"SignedHeaders="+r,"Signature="+i].join(", ")}(0,t.access_key,f,Yk(n.headers),E);return n.headers.Authorization=D,n},e.signUrl=function(n,t,r,i){var o="object"==typeof n?n.url:n,a="object"==typeof n?n.method:"GET",s="object"==typeof n?n.body:void 0,d=vh.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),l=d.substr(0,8),m=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}((0,qu.Qc)(o,!0,!0),["search"]),D={host:m.host},R=r||eN({url:(0,qu.WU)(m)}),ye=R.region,xe=R.service,et=tN(l,ye,xe),We=t.session_token&&"iotdevicegateway"!==xe,vt=jl(jl(jl({"X-Amz-Algorithm":Aw,"X-Amz-Credential":[t.access_key,et].join("/"),"X-Amz-Date":d.substr(0,16)},We?{"X-Amz-Security-Token":""+t.session_token}:{}),i?{"X-Amz-Expires":""+i}:{}),{"X-Amz-SignedHeaders":Object.keys(D).join(",")}),Mt=Qk({method:a,url:(0,qu.WU)(jl(jl({},m),{query:jl(jl({},m.query),vt)})),headers:D,data:s}),en=nN(Aw,Mt,d,et),nr=rN(t.secret_key,l,{region:ye,service:xe}),Qn=iN(nr,en),Zr=jl({"X-Amz-Signature":Qn},t.session_token&&{"X-Amz-Security-Token":t.session_token});return(0,qu.WU)({protocol:m.protocol,slashes:!0,hostname:m.hostname,port:m.port,pathname:m.pathname,query:jl(jl(jl({},m.query),vt),Zr)})},e}(),Xte=O(7691),oN=O.n(Xte),rne=function(e){var n=e.endpoint;if("string"==typeof n){var r=Promise.resolve((0,e.urlParser)(n));return function(){return r}}if("object"==typeof n){var i=Promise.resolve(n);return function(){return i}}return n},aN=function(e){return"string"==typeof e&&(e.startsWith("fips-")||e.endsWith("-fips"))},sN=function(e){return aN(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e},uN=function(e,n){var t;void 0===e&&(e=[]);var r=n.useFipsEndpoint,i=n.useDualstackEndpoint;return null===(t=e.find(function(o){var a=o.tags;return r===a.includes("fips")&&i===a.includes("dualstack")}))||void 0===t?void 0:t.hostname},dne=function(e,n){var t,r,i,o,a,s,d=n.useFipsEndpoint,l=void 0!==d&&d,f=n.useDualstackEndpoint,_=void 0!==f&&f,m=n.signingService,E=n.regionHash,D=n.partitionHash,R=function(e,n){var t,r=n.partitionHash;return null!==(t=Object.keys(r||{}).find(function(i){return r[i].regions.includes(e)}))&&void 0!==t?t:"aws"}(e,{partitionHash:D}),ye=e in E?e:null!==(r=null===(t=D[R])||void 0===t?void 0:t.endpoint)&&void 0!==r?r:e,xe={useFipsEndpoint:l,useDualstackEndpoint:_},vt=function(e,n){var r=n.partitionHostname;return n.regionHostname||(r?r.replace("{region}",e):void 0)}(ye,{regionHostname:uN(null===(i=E[ye])||void 0===i?void 0:i.variants,xe),partitionHostname:uN(null===(o=D[R])||void 0===o?void 0:o.variants,xe)});if(void 0===vt)throw new Error("Endpoint resolution failed for: "+{resolvedRegion:ye,useFipsEndpoint:l,useDualstackEndpoint:_});var Mt=function(e,n){var t=n.signingRegion;if(t)return t;if(n.useFipsEndpoint){var o=n.regionRegex.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),a=e.match(o);if(a)return a[0].slice(1,-1)}}(vt,{signingRegion:null===(a=E[ye])||void 0===a?void 0:a.signingRegion,regionRegex:D[R].regionRegex,useFipsEndpoint:l});return ne(ne({partition:R,signingService:m,hostname:vt},Mt&&{signingRegion:Mt}),(null===(s=E[ye])||void 0===s?void 0:s.signingService)&&{signingService:E[ye].signingService})},uc=function(){function e(n){this.method=n.method||"GET",this.hostname=n.hostname||"localhost",this.port=n.port,this.query=n.query||{},this.headers=n.headers||{},this.body=n.body,this.protocol=n.protocol?":"!==n.protocol.substr(-1)?n.protocol+":":n.protocol:"https:",this.path=n.path?"/"!==n.path.charAt(0)?"/"+n.path:n.path:"/"}return e.isInstance=function(n){return!!n&&("method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&"object"==typeof n.query&&"object"==typeof n.headers)},e.prototype.clone=function(){var n=new e(ne(ne({},this),{headers:ne({},this.headers)}));return n.query&&(n.query=function fne(e){return Object.keys(e).reduce(function(n,t){var r,i=e[t];return ne(ne({},n),((r={})[t]=Array.isArray(i)?Gt([],ce(i)):i,r))},{})}(n.query)),n},e}(),dT=function(){function e(n){this.statusCode=n.statusCode,this.headers=n.headers||{},this.body=n.body}return e.isInstance=function(n){return!!n&&("number"==typeof n.statusCode&&"object"==typeof n.headers)},e}();function Ig(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}var Ow,lN="content-length",pne={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},vne={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},bne={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Op=(()=>(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"}(Op||(Op={})),Op))(),cN=Op.STANDARD,xne=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],Ene=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Sne=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],Cne=[500,502,503,504],fT=function(e){var n,t;return 429===(null===(n=e.$metadata)||void 0===n?void 0:n.httpStatusCode)||Ene.includes(e.name)||1==(null===(t=e.$retryable)||void 0===t?void 0:t.throttling)},Ane=function(){function e(n){var t,r,i,o,a;this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=null!==(t=n?.beta)&&void 0!==t?t:.7,this.minCapacity=null!==(r=n?.minCapacity)&&void 0!==r?r:1,this.minFillRate=null!==(i=n?.minFillRate)&&void 0!==i?i:.5,this.scaleConstant=null!==(o=n?.scaleConstant)&&void 0!==o?o:.4,this.smooth=null!==(a=n?.smooth)&&void 0!==a?a:.8;var s=this.getCurrentTimeInSeconds();this.lastThrottleTime=s,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}return e.prototype.getCurrentTimeInSeconds=function(){return Date.now()/1e3},e.prototype.getSendToken=function(){return kt(this,void 0,void 0,function(){return It(this,function(n){return[2,this.acquireTokenBucket(1)]})})},e.prototype.acquireTokenBucket=function(n){return kt(this,void 0,void 0,function(){var t;return It(this,function(r){switch(r.label){case 0:return this.enabled?(this.refillTokenBucket(),n>this.currentCapacity?(t=(n-this.currentCapacity)/this.fillRate*1e3,[4,new Promise(function(i){return setTimeout(i,t)})]):[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return this.currentCapacity=this.currentCapacity-n,[2]}})})},e.prototype.refillTokenBucket=function(){var n=this.getCurrentTimeInSeconds();this.lastTimestamp?(this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+(n-this.lastTimestamp)*this.fillRate),this.lastTimestamp=n):this.lastTimestamp=n},e.prototype.updateClientSendingRate=function(n){var t;if(this.updateMeasuredRate(),fT(n)){var r=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=r,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),t=this.cubicThrottle(r),this.enableTokenBucket()}else this.calculateTimeWindow(),t=this.cubicSuccess(this.getCurrentTimeInSeconds());var i=Math.min(t,2*this.measuredTxRate);this.updateTokenBucketRate(i)},e.prototype.calculateTimeWindow=function(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))},e.prototype.cubicThrottle=function(n){return this.getPrecise(n*this.beta)},e.prototype.cubicSuccess=function(n){return this.getPrecise(this.scaleConstant*Math.pow(n-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)},e.prototype.enableTokenBucket=function(){this.enabled=!0},e.prototype.updateTokenBucketRate=function(n){this.refillTokenBucket(),this.fillRate=Math.max(n,this.minFillRate),this.maxCapacity=Math.max(n,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)},e.prototype.updateMeasuredRate=function(){var n=this.getCurrentTimeInSeconds(),t=Math.floor(2*n)/2;this.requestCount++,t>this.lastTxRateBucket&&(this.measuredTxRate=this.getPrecise(this.requestCount/(t-this.lastTxRateBucket)*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=t)},e.prototype.getPrecise=function(n){return parseFloat(n.toFixed(8))},e}(),Rne=new Uint8Array(16);function Dne(){if(!Ow&&!(Ow=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ow(Rne)}const One=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,kne=function Mne(e){return"string"==typeof e&&One.test(e)};for(var cu=[],hT=0;hT<256;++hT)cu.push((hT+256).toString(16).substr(1));const Fne=function Bne(e,n,t){var r=(e=e||{}).random||(e.rng||Dne)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){t=t||0;for(var i=0;i<16;++i)n[t+i]=r[i];return n}return function Nne(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(cu[e[n+0]]+cu[e[n+1]]+cu[e[n+2]]+cu[e[n+3]]+"-"+cu[e[n+4]]+cu[e[n+5]]+"-"+cu[e[n+6]]+cu[e[n+7]]+"-"+cu[e[n+8]]+cu[e[n+9]]+"-"+cu[e[n+10]]+cu[e[n+11]]+cu[e[n+12]]+cu[e[n+13]]+cu[e[n+14]]+cu[e[n+15]]).toLowerCase();if(!kne(t))throw TypeError("Stringified UUID is invalid");return t}(r)};var Wne=function(e,n){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,n)*e))},Jne=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return xne.includes(e.name)}(e)||fT(e)||function(e){var n;return Sne.includes(e.name)||Cne.includes((null===(n=e.$metadata)||void 0===n?void 0:n.httpStatusCode)||0)}(e))},dN=function(){function e(n,t){var r,i,o;this.maxAttemptsProvider=n,this.mode=Op.STANDARD,this.retryDecider=null!==(r=t?.retryDecider)&&void 0!==r?r:Jne,this.delayDecider=null!==(i=t?.delayDecider)&&void 0!==i?i:Wne,this.retryQuota=null!==(o=t?.retryQuota)&&void 0!==o?o:function(e,n){var a=(n?.noRetryIncrement,1),s=(n?.retryCost,5),d=(n?.timeoutRetryCost,10),l=500,f=function(D){return"TimeoutError"===D.name?d:s},_=function(D){return f(D)<=l};return Object.freeze({hasRetryTokens:_,retrieveRetryTokens:function(D){if(!_(D))throw new Error("No retry token available");var R=f(D);return l-=R,R},releaseRetryTokens:function(D){l+=D??a,l=Math.min(l,500)}})}()}return e.prototype.shouldRetry=function(n,t,r){return t<r&&this.retryDecider(n)&&this.retryQuota.hasRetryTokens(n)},e.prototype.getMaxAttempts=function(){return kt(this,void 0,void 0,function(){var n;return It(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return n=r.sent(),[3,3];case 2:return r.sent(),n=3,[3,3];case 3:return[2,n]}})})},e.prototype.retry=function(n,t,r){return kt(this,void 0,void 0,function(){var i,o,a,s,d,l,f,_;return It(this,function(m){switch(m.label){case 0:return o=0,a=0,[4,this.getMaxAttempts()];case 1:s=m.sent(),uc.isInstance(d=t.request)&&(d.headers["amz-sdk-invocation-id"]=Fne()),l=function(){var E,D,R,ye,xe,et;return It(this,function(We){switch(We.label){case 0:return We.trys.push([0,4,,7]),uc.isInstance(d)&&(d.headers["amz-sdk-request"]="attempt="+(o+1)+"; max="+s),r?.beforeRequest?[4,r.beforeRequest()]:[3,2];case 1:We.sent(),We.label=2;case 2:return[4,n(t)];case 3:return E=We.sent(),D=E.response,R=E.output,r?.afterRequest&&r.afterRequest(D),f.retryQuota.releaseRetryTokens(i),R.$metadata.attempts=o+1,R.$metadata.totalRetryDelay=a,[2,{value:{response:D,output:R}}];case 4:return ye=We.sent(),xe=Zne(ye),o++,f.shouldRetry(xe,o,s)?(i=f.retryQuota.retrieveRetryTokens(xe),et=f.delayDecider(fT(xe)?500:100,o),a+=et,[4,new Promise(function(vt){return setTimeout(vt,et)})]):[3,6];case 5:return We.sent(),[2,"continue"];case 6:throw xe.$metadata||(xe.$metadata={}),xe.$metadata.attempts=o,xe.$metadata.totalRetryDelay=a,xe;case 7:return[2]}})},f=this,m.label=2;case 2:return[5,l()];case 3:return"object"==typeof(_=m.sent())?[2,_.value]:[3,2];case 4:return[2]}})})},e}(),Zne=function(e){return e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):"string"==typeof e?new Error(e):new Error("AWS SDK error wrapper for "+e)},Yne=function(e){function n(t,r){var i=this,o=r??{},a=o.rateLimiter,s=er(o,["rateLimiter"]);return(i=e.call(this,t,s)||this).rateLimiter=a??new Ane,i.mode=Op.ADAPTIVE,i}return Zt(n,e),n.prototype.retry=function(t,r){return kt(this,void 0,void 0,function(){var i=this;return It(this,function(o){return[2,e.prototype.retry.call(this,t,r,{beforeRequest:function(){return kt(i,void 0,void 0,function(){return It(this,function(a){return[2,this.rateLimiter.getSendToken()]})})},afterRequest:function(a){i.rateLimiter.updateClientSendingRate(a)}})]})})},n}(dN),ere=function(e){return kt(void 0,void 0,void 0,function(){return It(this,function(n){switch(n.label){case 0:return"string"==typeof e?[2,e]:[4,e()];case 1:return[2,n.sent()]}})})},sre={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0};(function(e){function n(t,r){void 0===r&&(r=!0);var i=e.call(this,t)||this;return i.tryNextLink=r,i}Zt(n,e),n.from=function(t,r){return void 0===r&&(r=!0),Object.defineProperty(t,"tryNextLink",{value:r,configurable:!1,enumerable:!1,writable:!1}),t}})(Error),function(e){function n(t,r){void 0===r&&(r=!0);var i=e.call(this,t)||this;return i.tryNextLink=r,i.name="CredentialsProviderError",i}Zt(n,e),n.from=function(t,r){return void 0===r&&(r=!0),Object.defineProperty(t,"tryNextLink",{value:r,configurable:!1,enumerable:!1,writable:!1}),t}}(Error);for(var pN={},pT={},Ly=0;Ly<256;Ly++){var By=Ly.toString(16).toLowerCase();1===By.length&&(By="0"+By),pN[Ly]=By,pT[By]=Ly}function Pg(e){for(var n="",t=0;t<e.byteLength;t++)n+=pN[e[t]];return n}var mN="X-Amz-Date",gN="X-Amz-Signature",vN="X-Amz-Security-Token",yN="authorization",_N=mN.toLowerCase(),mre=[yN,_N,"date"],gre=gN.toLowerCase(),mT="x-amz-content-sha256",vre=vN.toLowerCase(),yre={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},_re=/^proxy-/,bre=/^sec-/,gT="AWS4-HMAC-SHA256",wre="AWS4-HMAC-SHA256-PAYLOAD",bN="aws4_request",Ag={},Mw=[],vT=function(e,n,t){return e+"/"+n+"/"+t+"/"+bN},wN=function(e,n,t){var r=new e(n);return r.update(t),r.digest()},xN=function(e,n,t){var r,i,o=e.headers,a={};try{for(var s=le(Object.keys(o).sort()),d=s.next();!d.done;d=s.next()){var l=d.value,f=l.toLowerCase();(f in yre||n?.has(f)||_re.test(f)||bre.test(f))&&(!t||t&&!t.has(f))||(a[f]=o[l].trim().replace(/\s+/g," "))}}catch(_){r={error:_}}finally{try{d&&!d.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a},Mp=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,Tre)},Tre=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()},yT=function(e,n){var t=e.headers,r=e.body;return kt(void 0,void 0,void 0,function(){var i,o,a,s,d,l,f;return It(this,function(_){switch(_.label){case 0:try{for(i=le(Object.keys(t)),o=i.next();!o.done;o=i.next())if((a=o.value).toLowerCase()===mT)return[2,t[a]]}catch(m){l={error:m}}finally{try{o&&!o.done&&(f=i.return)&&f.call(i)}finally{if(l)throw l.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||function(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)}(r)?((s=new n).update(r),d=Pg,[4,s.digest()]):[3,3];case 2:return[2,d.apply(void 0,[_.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}})})},EN=function(e){var n=e.headers,t=e.query,r=er(e,["headers","query"]);return ne(ne({},r),{headers:ne({},n),query:t?Rre(t):void 0})},Rre=function(e){return Object.keys(e).reduce(function(n,t){var r,i=e[t];return ne(ne({},n),((r={})[t]=Array.isArray(i)?Gt([],ce(i)):i,r))},{})},SN=function(e){var n,t;e="function"==typeof e.clone?e.clone():EN(e);try{for(var r=le(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;mre.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(a){n={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(n)throw n.error}}return e},Lre=function(){function e(n){var t=n.applyChecksum,r=n.credentials,i=n.region,a=n.sha256,s=n.uriEscapePath,d=void 0===s||s;this.service=n.service,this.sha256=a,this.uriEscapePath=d,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=function(e){if("string"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e}(i),this.credentialProvider=function(e){if("object"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e}(r)}return e.prototype.presign=function(n,t){return void 0===t&&(t={}),kt(this,void 0,void 0,function(){var r,i,o,a,s,d,l,f,_,m,E,D,R,ye,xe,et,We,vt,Mt,en,nr,Qn,Zr,Ci;return It(this,function(cr){switch(cr.label){case 0:return i=void 0===(r=t.signingDate)?new Date:r,a=void 0===(o=t.expiresIn)?3600:o,s=t.unsignableHeaders,d=t.unhoistableHeaders,l=t.signableHeaders,f=t.signingRegion,_=t.signingService,[4,this.credentialProvider()];case 1:return m=cr.sent(),null==f?[3,2]:(D=f,[3,4]);case 2:return[4,this.regionProvider()];case 3:D=cr.sent(),cr.label=4;case 4:return E=D,R=kw(i),ye=R.longDate,xe=R.shortDate,a>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(et=vT(xe,E,_??this.service),We=function(e,n){var t,r,i;void 0===n&&(n={});var o="function"==typeof e.clone?e.clone():EN(e),a=o.headers,s=o.query,d=void 0===s?{}:s;try{for(var l=le(Object.keys(a)),f=l.next();!f.done;f=l.next()){var _=f.value,m=_.toLowerCase();"x-amz-"===m.substr(0,6)&&(null===(i=n.unhoistableHeaders)||void 0===i||!i.has(m))&&(d[_]=a[_],delete a[_])}}catch(E){t={error:E}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return ne(ne({},e),{headers:a,query:d})}(SN(n),{unhoistableHeaders:d}),m.sessionToken&&(We.query[vN]=m.sessionToken),We.query["X-Amz-Algorithm"]=gT,We.query["X-Amz-Credential"]=m.accessKeyId+"/"+et,We.query[mN]=ye,We.query["X-Amz-Expires"]=a.toString(10),vt=xN(We,s,l),We.query["X-Amz-SignedHeaders"]=CN(vt),Mt=We.query,en=gN,nr=this.getSignature,Qn=[ye,et,this.getSigningKey(m,E,xe,_)],Zr=this.createCanonicalRequest,Ci=[We,vt],[4,yT(n,this.sha256)]);case 5:return[4,nr.apply(this,Qn.concat([Zr.apply(this,Ci.concat([cr.sent()]))]))];case 6:return Mt[en]=cr.sent(),[2,We]}})})},e.prototype.sign=function(n,t){return kt(this,void 0,void 0,function(){return It(this,function(r){return"string"==typeof n?[2,this.signString(n,t)]:n.headers&&n.payload?[2,this.signEvent(n,t)]:[2,this.signRequest(n,t)]})})},e.prototype.signEvent=function(n,t){var r=n.headers,i=n.payload,o=t.signingDate,a=void 0===o?new Date:o,s=t.priorSignature,d=t.signingRegion,l=t.signingService;return kt(this,void 0,void 0,function(){var f,_,m,D,R,ye,xe,et,We,vt;return It(this,function(Mt){switch(Mt.label){case 0:return null==d?[3,1]:(_=d,[3,3]);case 1:return[4,this.regionProvider()];case 2:_=Mt.sent(),Mt.label=3;case 3:return f=_,m=kw(a),D=m.longDate,R=vT(m.shortDate,f,l??this.service),[4,yT({headers:{},body:i},this.sha256)];case 4:return ye=Mt.sent(),(xe=new this.sha256).update(r),We=Pg,[4,xe.digest()];case 5:return et=We.apply(void 0,[Mt.sent()]),vt=[wre,D,R,s,et,ye].join("\n"),[2,this.signString(vt,{signingDate:a,signingRegion:f,signingService:l})]}})})},e.prototype.signString=function(n,t){var r=void 0===t?{}:t,i=r.signingDate,o=void 0===i?new Date:i,a=r.signingRegion,s=r.signingService;return kt(this,void 0,void 0,function(){var d,l,f,_,m,E,D,R;return It(this,function(ye){switch(ye.label){case 0:return[4,this.credentialProvider()];case 1:return d=ye.sent(),null==a?[3,2]:(f=a,[3,4]);case 2:return[4,this.regionProvider()];case 3:f=ye.sent(),ye.label=4;case 4:return l=f,_=kw(o).shortDate,D=(E=this.sha256).bind,[4,this.getSigningKey(d,l,_,s)];case 5:return(m=new(D.apply(E,[void 0,ye.sent()]))).update(n),R=Pg,[4,m.digest()];case 6:return[2,R.apply(void 0,[ye.sent()])]}})})},e.prototype.signRequest=function(n,t){var r=void 0===t?{}:t,i=r.signingDate,o=void 0===i?new Date:i,a=r.signableHeaders,s=r.unsignableHeaders,d=r.signingRegion,l=r.signingService;return kt(this,void 0,void 0,function(){var f,_,m,E,D,R,ye,xe,et,We,vt;return It(this,function(Mt){switch(Mt.label){case 0:return[4,this.credentialProvider()];case 1:return f=Mt.sent(),null==d?[3,2]:(m=d,[3,4]);case 2:return[4,this.regionProvider()];case 3:m=Mt.sent(),Mt.label=4;case 4:return _=m,E=SN(n),D=kw(o),R=D.longDate,xe=vT(ye=D.shortDate,_,l??this.service),E.headers[_N]=R,f.sessionToken&&(E.headers[vre]=f.sessionToken),[4,yT(E,this.sha256)];case 5:return et=Mt.sent(),!function(e,n){var t,r;e=e.toLowerCase();try{for(var i=le(Object.keys(n)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(s){t={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return!1}(mT,E.headers)&&this.applyChecksum&&(E.headers[mT]=et),We=xN(E,s,a),[4,this.getSignature(R,xe,this.getSigningKey(f,_,ye,l),this.createCanonicalRequest(E,We,et))];case 6:return vt=Mt.sent(),E.headers[yN]=gT+" Credential="+f.accessKeyId+"/"+xe+", SignedHeaders="+CN(We)+", Signature="+vt,[2,E]}})})},e.prototype.createCanonicalRequest=function(n,t,r){var i=Object.keys(t).sort();return n.method+"\n"+this.getCanonicalPath(n)+"\n"+function(e){var n,t,r=e.query,i=void 0===r?{}:r,o=[],a={},s=function(_){if(_.toLowerCase()===gre)return"continue";o.push(_);var m=i[_];"string"==typeof m?a[_]=Mp(_)+"="+Mp(m):Array.isArray(m)&&(a[_]=m.slice(0).sort().reduce(function(E,D){return E.concat([Mp(_)+"="+Mp(D)])},[]).join("&"))};try{for(var d=le(Object.keys(i).sort()),l=d.next();!l.done;l=d.next())s(l.value)}catch(_){n={error:_}}finally{try{l&&!l.done&&(t=d.return)&&t.call(d)}finally{if(n)throw n.error}}return o.map(function(_){return a[_]}).filter(function(_){return _}).join("&")}(n)+"\n"+i.map(function(o){return o+":"+t[o]}).join("\n")+"\n\n"+i.join(";")+"\n"+r},e.prototype.createStringToSign=function(n,t,r){return kt(this,void 0,void 0,function(){var i,o;return It(this,function(a){switch(a.label){case 0:return(i=new this.sha256).update(r),[4,i.digest()];case 1:return o=a.sent(),[2,gT+"\n"+n+"\n"+t+"\n"+Pg(o)]}})})},e.prototype.getCanonicalPath=function(n){var t=n.path;return this.uriEscapePath?"/"+encodeURIComponent(t.replace(/^\//,"")).replace(/%2F/g,"/"):t},e.prototype.getSignature=function(n,t,r,i){return kt(this,void 0,void 0,function(){var o,a,s,d,l;return It(this,function(f){switch(f.label){case 0:return[4,this.createStringToSign(n,t,i)];case 1:return o=f.sent(),d=(s=this.sha256).bind,[4,r];case 2:return(a=new(d.apply(s,[void 0,f.sent()]))).update(o),l=Pg,[4,a.digest()];case 3:return[2,l.apply(void 0,[f.sent()])]}})})},e.prototype.getSigningKey=function(n,t,r,i){return function(e,n,t,r,i){return kt(void 0,void 0,void 0,function(){var o,a,s,d,l,_,m,E;return It(this,function(D){switch(D.label){case 0:return[4,wN(e,n.secretAccessKey,n.accessKeyId)];case 1:if(o=D.sent(),(a=t+":"+r+":"+i+":"+Pg(o)+":"+n.sessionToken)in Ag)return[2,Ag[a]];for(Mw.push(a);Mw.length>50;)delete Ag[Mw.shift()];s="AWS4"+n.secretAccessKey,D.label=2;case 2:D.trys.push([2,7,8,9]),d=le([t,r,i,bN]),l=d.next(),D.label=3;case 3:return l.done?[3,6]:[4,wN(e,s,l.value)];case 4:s=D.sent(),D.label=5;case 5:return l=d.next(),[3,3];case 6:return[3,9];case 7:return _=D.sent(),m={error:_},[3,9];case 8:try{l&&!l.done&&(E=d.return)&&E.call(d)}finally{if(m)throw m.error}return[7];case 9:return[2,Ag[a]=s]}})})}(this.sha256,n,r,t,i||this.service)},e}(),kw=function(e){var n=function(e){return function(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}(e).replace(/[\-:]/g,"");return{longDate:n,shortDate:n.substr(0,8)}},CN=function(e){return Object.keys(e).sort().join(";")},Fy=function(e){if("object"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e},IN=function(e){return new Date(Date.now()+e)},PN=function(e,n){var t=Date.parse(e);return function(e,n){return Math.abs(IN(n).getTime()-e)>=3e5}(t,n)?t-Date.now():n},AN=function(e){var n,t,r;return dT.isInstance(e)?null!==(t=null===(n=e.headers)||void 0===n?void 0:n.date)&&void 0!==t?t:null===(r=e.headers)||void 0===r?void 0:r.Date:void 0},Ure={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},RN="user-agent",_T="x-amz-user-agent",qre=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,bT=function(e){var n=ce(e,2),t=n[0],r=n[1],i=t.indexOf("/"),o=t.substring(0,i),a=t.substring(i+1);return"api"===o&&(a=a.toLowerCase()),[o,a,r].filter(function(s){return s&&s.length>0}).map(function(s){return s?.replace(qre,"_")}).join("/")},$re={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Nw=function(){var e=[],n=[],t=new Set,a=function(f){return e.forEach(function(_){f.add(_.middleware,ne({},_))}),n.forEach(function(_){f.addRelativeTo(_.middleware,ne({},_))}),f},s=function(f){var _=[];return f.before.forEach(function(m){0===m.before.length&&0===m.after.length?_.push(m):_.push.apply(_,Gt([],ce(s(m))))}),_.push(f),f.after.reverse().forEach(function(m){0===m.before.length&&0===m.after.length?_.push(m):_.push.apply(_,Gt([],ce(s(m))))}),_},l={add:function(f,_){void 0===_&&(_={});var m=_.name,E=_.override,D=ne({step:"initialize",priority:"normal",middleware:f},_);if(m){if(t.has(m)){if(!E)throw new Error("Duplicate middleware name '"+m+"'");var R=e.findIndex(function(xe){return xe.name===m}),ye=e[R];if(ye.step!==D.step||ye.priority!==D.priority)throw new Error('"'+m+'" middleware with '+ye.priority+" priority in "+ye.step+" step cannot be overridden by same-name middleware with "+D.priority+" priority in "+D.step+" step.");e.splice(R,1)}t.add(m)}e.push(D)},addRelativeTo:function(f,_){var m=_.name,E=_.override,D=ne({middleware:f},_);if(m){if(t.has(m)){if(!E)throw new Error("Duplicate middleware name '"+m+"'");var R=n.findIndex(function(xe){return xe.name===m}),ye=n[R];if(ye.toMiddleware!==D.toMiddleware||ye.relation!==D.relation)throw new Error('"'+m+'" middleware '+ye.relation+' "'+ye.toMiddleware+'" middleware cannot be overridden by same-name middleware '+D.relation+' "'+D.toMiddleware+'" middleware.');n.splice(R,1)}t.add(m)}n.push(D)},clone:function(){return a(Nw())},use:function(f){f.applyToStack(l)},remove:function(f){return"string"==typeof f?function(f){var _=!1,m=function(E){return!E.name||E.name!==f||(_=!0,t.delete(f),!1)};return e=e.filter(m),n=n.filter(m),_}(f):function(f){var _=!1,m=function(E){return E.middleware!==f||(_=!0,E.name&&t.delete(E.name),!1)};return e=e.filter(m),n=n.filter(m),_}(f)},removeByTag:function(f){var _=!1,m=function(E){var D=E.tags,R=E.name;return!D||!D.includes(f)||(R&&t.delete(R),_=!0,!1)};return e=e.filter(m),n=n.filter(m),_},concat:function(f){var _=a(Nw());return _.use(f),_},applyToStack:a,resolve:function(f,_){var m,E;try{for(var D=le(function(){var f=[],_=[],m={};e.forEach(function(D){var R=ne(ne({},D),{before:[],after:[]});R.name&&(m[R.name]=R),f.push(R)}),n.forEach(function(D){var R=ne(ne({},D),{before:[],after:[]});R.name&&(m[R.name]=R),_.push(R)}),_.forEach(function(D){if(D.toMiddleware){var R=m[D.toMiddleware];if(void 0===R)throw new Error(D.toMiddleware+" is not found when adding "+(D.name||"anonymous")+" middleware "+D.relation+" "+D.toMiddleware);"after"===D.relation&&R.after.push(D),"before"===D.relation&&R.before.push(D)}});var E=function(f){return f.sort(function(_,m){return ON[m.step]-ON[_.step]||MN[m.priority||"normal"]-MN[_.priority||"normal"]})}(f).map(s).reduce(function(D,R){return D.push.apply(D,Gt([],ce(R))),D},[]);return E.map(function(D){return D.middleware})}().reverse()),R=D.next();!R.done;R=D.next())f=(0,R.value)(f,_)}catch(xe){m={error:xe}}finally{try{R&&!R.done&&(E=D.return)&&E.call(D)}finally{if(m)throw m.error}}return f}};return l},ON={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},MN={high:3,normal:2,low:1},Xre=function(){function e(n){this.middlewareStack=Nw(),this.config=n}return e.prototype.send=function(n,t,r){var o="function"==typeof t?t:r,a=n.resolveMiddleware(this.middlewareStack,this.config,"function"!=typeof t?t:void 0);if(!o)return a(n).then(function(s){return s.output});a(n).then(function(s){return o(null,s.output)},function(s){return o(s)}).catch(function(){})},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),Rg=function e(){this.middlewareStack=Nw()},zc="***SensitiveInformation***",Wre=function(e){if(null!=e){if("boolean"==typeof e)return e;throw new TypeError("Expected boolean, got "+typeof e)}},Lw=function(e){if(null!=e){if("number"==typeof e)return e;throw new TypeError("Expected number, got "+typeof e)}},Jre=Math.ceil(Math.pow(2,127)*(2-Math.pow(2,-23))),zy=function(e){return ET(e,32)},ET=function(e,n){var t=function(e){if(null!=e){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError("Expected integer, got "+typeof e)}}(e);if(void 0!==t&&Zre(t,n)!==t)throw new TypeError("Expected "+n+"-bit integer, got "+e);return t},Zre=function(e,n){switch(n){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},lc=function(e,n){if(null==e)throw n?new TypeError("Expected a non-null value for "+n):new TypeError("Expected a non-null value");return e},kp=function(e){if(null!=e){if("object"==typeof e&&!Array.isArray(e))return e;throw new TypeError("Expected object, got "+typeof e)}},Yi=function(e){if(null!=e){if("string"==typeof e)return e;throw new TypeError("Expected string, got "+typeof e)}},Qre=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Dg=function(e){var n=e.match(Qre);if(null===n||n[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},jy=function(e){return"string"==typeof e?LN(e):Lw(e)},LN=function(e){switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error("Unable to parse float value: "+e)}},ST=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],rie=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),Og=function(e){if(null!=e){if("string"!=typeof e)throw new TypeError("RFC-3339 date-times must be expressed as strings");var n=rie.exec(e);if(!n)throw new TypeError("Invalid RFC-3339 date-time value");var t=ce(n,8),o=t[2],a=t[3],s=t[4],d=t[5],l=t[6],f=t[7],_=function(e){return function(e){return ET(e,16)}("string"==typeof e?Dg(e):e)}(Uy(t[1])),m=yh(o,"month",1,12),E=yh(a,"day",1,31);return Bw(_,m,E,{hours:s,minutes:d,seconds:l,fractionalMilliseconds:f})}},Bw=function(e,n,t,r){var i=n-1;return die(e,i,t),new Date(Date.UTC(e,i,t,yh(r.hours,"hour",0,23),yh(r.minutes,"minute",0,59),yh(r.seconds,"seconds",0,60),hie(r.fractionalMilliseconds)))},cie=[31,28,31,30,31,30,31,31,30,31,30,31],die=function(e,n,t){var r=cie[n];if(1===n&&fie(e)&&(r=29),t>r)throw new TypeError("Invalid day for "+ST[n]+" in "+e+": "+t)},fie=function(e){return e%4==0&&(e%100!=0||e%400==0)},yh=function(e,n,t,r){var i=function(e){return function(e){return ET(e,8)}("string"==typeof e?Dg(e):e)}(Uy(e));if(i<t||i>r)throw new TypeError(n+" must be between "+t+" and "+r+", inclusive");return i},hie=function(e){return null==e?0:1e3*function(e){return function(e){var n=Lw(e);if(void 0!==n&&!Number.isNaN(n)&&n!==1/0&&n!==-1/0&&Math.abs(n)>Jre)throw new TypeError("Expected 32-bit float, got "+e);return n}("string"==typeof e?Dg(e):e)}("0."+e)},Uy=function(e){for(var n=0;n<e.length-1&&"0"===e.charAt(n);)n++;return 0===n?e:e.slice(n)},pie=function(e){switch(e){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};function Np(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})}var Fw=function(){var e=Object.getPrototypeOf(this).constructor,n=Function.bind.apply(String,Gt([null],ce(arguments))),t=new n;return Object.setPrototypeOf(t,e.prototype),t};Fw.prototype=Object.create(String.prototype,{constructor:{value:Fw,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(Fw,String),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}Zt(n,e),n.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},n.prototype.toJSON=function(){return e.prototype.toString.call(this)},n.fromObject=function(t){return t instanceof n?t:new n(t instanceof String||"string"==typeof t?t:JSON.stringify(t))}}(Fw);var BN=function(e){if(e!=e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}};var gie=O(2518);function yie(e){return void 0===e&&(e=0),new Promise(function(n,t){e&&setTimeout(function(){var r=new Error("Request did not complete within "+e+" ms");r.name="TimeoutError",t(r)},e)})}for(var _ie=function(){function e(n){var t=this;"function"==typeof n?this.configProvider=function(){return kt(t,void 0,void 0,function(){return It(this,function(r){switch(r.label){case 0:return[4,n()];case 1:return[2,r.sent()||{}]}})})}:this.config=n??{}}return e.prototype.destroy=function(){},e.prototype.handle=function(n,t){var i=(void 0===t?{}:t).abortSignal;return kt(this,void 0,void 0,function(){var o,a,s,d,l,f,_,m,D,R,ye;return It(this,function(xe){switch(xe.label){case 0:return!this.config&&this.configProvider?(o=this,[4,this.configProvider()]):[3,2];case 1:o.config=xe.sent(),xe.label=2;case 2:return a=this.config.requestTimeout,i?.aborted?((s=new Error("Request aborted")).name="AbortError",[2,Promise.reject(s)]):(d=n.path,n.query&&(l=function vie(e){var n,t,r=[];try{for(var i=le(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var a=o.value,s=e[a];if(a=Mp(a),Array.isArray(s))for(var d=0,l=s.length;d<l;d++)r.push(a+"="+Mp(s[d]));else{var f=a;(s||"string"==typeof s)&&(f+="="+Mp(s)),r.push(f)}}}catch(_){n={error:_}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(n)throw n.error}}return r.join("&")}(n.query),l&&(d+="?"+l)),m=n.protocol+"//"+n.hostname+((f=n.port)?":"+f:"")+d,D={body:"GET"===(_=n.method)||"HEAD"===_?void 0:n.body,headers:new Headers(n.headers),method:_},typeof AbortController<"u"&&(D.signal=i),R=new Request(m,D),ye=[fetch(R).then(function(et){var We,vt,Mt=et.headers,en={};try{for(var nr=le(Mt.entries()),Qn=nr.next();!Qn.done;Qn=nr.next()){var Zr=Qn.value;en[Zr[0]]=Zr[1]}}catch(cr){We={error:cr}}finally{try{Qn&&!Qn.done&&(vt=nr.return)&&vt.call(nr)}finally{if(We)throw We.error}}return void 0!==et.body?{response:new dT({headers:en,statusCode:et.status,body:et.body})}:et.blob().then(function(cr){return{response:new dT({headers:en,statusCode:et.status,body:cr})}})}),yie(a)],i&&ye.push(new Promise(function(et,We){i.onabort=function(){var vt=new Error("Request aborted");vt.name="AbortError",We(vt)}})),[2,Promise.race(ye)])}})})},e}(),_h={},Mg=new Array(64),du=0,Gy="A".charCodeAt(0),TT="Z".charCodeAt(0);du+Gy<=TT;du++){var bh=String.fromCharCode(du+Gy);_h[bh]=du,Mg[du]=bh}for(du=0,Gy="a".charCodeAt(0),TT="z".charCodeAt(0);du+Gy<=TT;du++)bh=String.fromCharCode(du+Gy),_h[bh]=Vy=du+26,Mg[Vy]=bh;for(du=0;du<10;du++){var Vy;_h[du.toString(10)]=du+52,bh=du.toString(10),_h[bh]=Vy=du+52,Mg[Vy]=bh}function FN(e){var n=e.length/4*3;"=="===e.substr(-2)?n-=2:"="===e.substr(-1)&&n--;for(var t=new ArrayBuffer(n),r=new DataView(t),i=0;i<e.length;i+=4){for(var o=0,a=0,s=i,d=i+3;s<=d;s++)if("="!==e[s]){if(!(e[s]in _h))throw new TypeError("Invalid character "+e[s]+" in base64 string.");o|=_h[e[s]]<<6*(d-s),a+=6}else o>>=6;var l=i/4*3;o>>=a%8;for(var f=Math.floor(a/8),_=0;_<f;_++){var m=8*(f-_-1);r.setUint8(l+_,(o&255<<m)>>m)}}return new Uint8Array(t)}function wie(e){for(var n="",t=0;t<e.length;t+=3){for(var r=0,i=0,o=t,a=Math.min(t+3,e.length);o<a;o++)r|=e[o]<<8*(a-o-1),i+=8;var s=Math.ceil(i/6);r<<=6*s-i;for(var d=1;d<=s;d++){var l=6*(s-d);n+=Mg[(r&63<<l)>>l]}n+="==".slice(0,4-s)}return n}_h["+"]=62,Mg[62]="+",_h["/"]=63,Mg[63]="/";var xie=function(e){return"function"==typeof Blob&&e instanceof Blob?function Eie(e){return kt(this,void 0,void 0,function(){var n,t;return It(this,function(r){switch(r.label){case 0:return[4,Cie(e)];case 1:return n=r.sent(),t=FN(n),[2,new Uint8Array(t)]}})})}(e):function Sie(e){return kt(this,void 0,void 0,function(){var n,t,r,i,o,a,s;return It(this,function(d){switch(d.label){case 0:n=new Uint8Array(0),t=e.getReader(),r=!1,d.label=1;case 1:return r?[3,3]:[4,t.read()];case 2:return i=d.sent(),o=i.done,(a=i.value)&&(s=n,(n=new Uint8Array(s.length+a.length)).set(s),n.set(a,s.length)),r=o,[3,1];case 3:return[2,n]}})})}(e)};function Cie(e){return new Promise(function(n,t){var r=new FileReader;r.onloadend=function(){var i;if(2!==r.readyState)return t(new Error("Reader aborted too early"));var o=null!==(i=r.result)&&void 0!==i?i:"",a=o.indexOf(",");n(o.substring(a>-1?a+1:o.length))},r.onabort=function(){return t(new Error("Read aborted"))},r.onerror=function(){return t(r.error)},r.readAsDataURL(e)})}var Tie=function(e){return function(){return Promise.reject(e)}};function Iie(e){if("string"==typeof e){for(var n=e.length,t=n-1;t>=0;t--){var r=e.charCodeAt(t);r>127&&r<=2047?n++:r>2047&&r<=65535&&(n+=2)}return n}return"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:void 0}var Pie=function(e){var n=e.serviceId,t=e.clientVersion;return function(){return kt(void 0,void 0,void 0,function(){var r,i,o,a,s,d,l,f,_;return It(this,function(m){return r=typeof window<"u"&&(null===(o=window?.navigator)||void 0===o?void 0:o.userAgent)?WS().parse(window.navigator.userAgent):void 0,i=[["aws-sdk-js",t],["os/"+((null===(a=r?.os)||void 0===a?void 0:a.name)||"other"),null===(s=r?.os)||void 0===s?void 0:s.version],["lang/js"],["md/browser",(null!==(l=null===(d=r?.browser)||void 0===d?void 0:d.name)&&void 0!==l?l:"unknown")+"_"+(null!==(_=null===(f=r?.browser)||void 0===f?void 0:f.version)&&void 0!==_?_:"unknown")]],n&&i.push(["api/"+n,t]),[2,i]})})}},zN=O(4456),Rie=function(e){var s,n=new URL(e),t=n.hostname,r=n.pathname,i=n.port,o=n.protocol,a=n.search;return a&&(s=function Aie(e){var n,t,r={};if(e=e.replace(/^\?/,""))try{for(var i=le(e.split("&")),o=i.next();!o.done;o=i.next()){var s=ce(o.value.split("="),2),d=s[0],l=s[1],f=void 0===l?null:l;d=decodeURIComponent(d),f&&(f=decodeURIComponent(f)),d in r?Array.isArray(r[d])?r[d].push(f):r[d]=[r[d],f]:r[d]=f}}catch(_){n={error:_}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(n)throw n.error}}return r}(a)),{hostname:t,port:i?parseInt(i):void 0,protocol:o,path:r,query:s}},Die={},Oie={aws:{regions:["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-southeast-1","ap-southeast-2","ap-southeast-3","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"],regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.amazonaws.com",tags:[]},{hostname:"geo-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"geo-fips.{region}.api.aws",tags:["dualstack","fips"]},{hostname:"geo.{region}.api.aws",tags:["dualstack"]}]},"aws-cn":{regions:["cn-north-1","cn-northwest-1"],regionRegex:"^cn\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.amazonaws.com.cn",tags:[]},{hostname:"geo-fips.{region}.amazonaws.com.cn",tags:["fips"]},{hostname:"geo-fips.{region}.api.amazonwebservices.com.cn",tags:["dualstack","fips"]},{hostname:"geo.{region}.api.amazonwebservices.com.cn",tags:["dualstack"]}]},"aws-iso":{regions:["us-iso-east-1","us-iso-west-1"],regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.c2s.ic.gov",tags:[]},{hostname:"geo-fips.{region}.c2s.ic.gov",tags:["fips"]}]},"aws-iso-b":{regions:["us-isob-east-1"],regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.sc2s.sgov.gov",tags:[]},{hostname:"geo-fips.{region}.sc2s.sgov.gov",tags:["fips"]}]},"aws-us-gov":{regions:["us-gov-east-1","us-gov-west-1"],regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",variants:[{hostname:"geo.{region}.amazonaws.com",tags:[]},{hostname:"geo-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"geo-fips.{region}.api.aws",tags:["dualstack","fips"]},{hostname:"geo.{region}.api.aws",tags:["dualstack"]}]}},Mie=function(e,n){return kt(void 0,void 0,void 0,function(){return It(this,function(t){return[2,dne(e,ne(ne({},n),{signingService:"geo",regionHash:Die,partitionHash:Oie}))]})})};(function(e){function n(t,r){void 0===r&&(r=!0);var i=e.call(this,t)||this;return i.tryNextLink=r,i}Zt(n,e),n.from=function(t,r){return void 0===r&&(r=!0),Object.defineProperty(t,"tryNextLink",{value:r,configurable:!1,enumerable:!1,writable:!1}),t}})(Error),function(e){function n(t,r){void 0===r&&(r=!0);var i=e.call(this,t)||this;return i.tryNextLink=r,i.name="CredentialsProviderError",i}Zt(n,e),n.from=function(t,r){return void 0===r&&(r=!0),Object.defineProperty(t,"tryNextLink",{value:r,configurable:!1,enumerable:!1,writable:!1}),t}}(Error);var Lie=["in-region","cross-region","mobile","standard","legacy"],Fie=function(){var e,n,r=null===(n=(typeof window<"u"&&(null===(e=window?.navigator)||void 0===e?void 0:e.userAgent)?WS().parse(window.navigator.userAgent):void 0)?.platform)||void 0===n?void 0:n.type;return"tablet"===r||"mobile"===r},zie=function(e){var n,t,r,i,o,a,s,d,l,f,_,m,E,D,R,ye=function(e){var t=(void 0===e?{}:e).defaultsMode;return function(e,n,t){var r,i,o,a=function(){return kt(void 0,void 0,void 0,function(){return It(this,function(d){switch(d.label){case 0:i||(i=e()),d.label=1;case 1:return d.trys.push([1,,3,4]),[4,i];case 2:return r=d.sent(),o=!0,[3,4];case 3:return i=void 0,[7];case 4:return[2,r]}})})};return function(){return kt(void 0,void 0,void 0,function(){return It(this,function(d){switch(d.label){case 0:return o?[3,2]:[4,a()];case 1:r=d.sent(),d.label=2;case 2:return[2,r]}})})}}(function(){return kt(void 0,void 0,void 0,function(){var r,i;return It(this,function(o){switch(o.label){case 0:return"function"!=typeof t?[3,2]:[4,t()];case 1:return i=o.sent(),[3,3];case 2:i=t,o.label=3;case 3:switch((r=i)?.toLowerCase()){case"auto":return[2,Promise.resolve(Fie()?"mobile":"standard")];case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return[2,Promise.resolve(r?.toLocaleLowerCase())];case void 0:return[2,Promise.resolve("legacy")];default:throw new Error('Invalid parameter for "defaultsMode", expect '+Lie.join(", ")+", got "+r)}return[2]}})})})}(e),xe=function(){return ye().then(pie)},et=function(e){var n,t,r,i,o;return{apiVersion:"2020-11-19",disableHostPrefix:null!==(n=e?.disableHostPrefix)&&void 0!==n&&n,logger:null!==(t=e?.logger)&&void 0!==t?t:{},regionInfoProvider:null!==(r=e?.regionInfoProvider)&&void 0!==r?r:Mie,serviceId:null!==(i=e?.serviceId)&&void 0!==i?i:"Location",urlParser:null!==(o=e?.urlParser)&&void 0!==o?o:Rie}}(e);return ne(ne(ne({},et),e),{runtime:"browser",defaultsMode:ye,base64Decoder:null!==(n=e?.base64Decoder)&&void 0!==n?n:FN,base64Encoder:null!==(t=e?.base64Encoder)&&void 0!==t?t:wie,bodyLengthChecker:null!==(r=e?.bodyLengthChecker)&&void 0!==r?r:Iie,credentialDefaultProvider:null!==(i=e?.credentialDefaultProvider)&&void 0!==i?i:function(We){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:null!==(o=e?.defaultUserAgentProvider)&&void 0!==o?o:Pie({serviceId:et.serviceId,clientVersion:"3.48.0"}),maxAttempts:null!==(a=e?.maxAttempts)&&void 0!==a?a:3,region:null!==(s=e?.region)&&void 0!==s?s:Tie("Region is missing"),requestHandler:null!==(d=e?.requestHandler)&&void 0!==d?d:new _ie(xe),retryMode:null!==(l=e?.retryMode)&&void 0!==l?l:function(){return kt(void 0,void 0,void 0,function(){return It(this,function(We){switch(We.label){case 0:return[4,xe()];case 1:return[2,We.sent().retryMode||cN]}})})},sha256:null!==(f=e?.sha256)&&void 0!==f?f:gie.Sha256,streamCollector:null!==(_=e?.streamCollector)&&void 0!==_?_:xie,useDualstackEndpoint:null!==(m=e?.useDualstackEndpoint)&&void 0!==m?m:function(){return Promise.resolve(!1)},useFipsEndpoint:null!==(E=e?.useFipsEndpoint)&&void 0!==E?E:function(){return Promise.resolve(!1)},utf8Decoder:null!==(D=e?.utf8Decoder)&&void 0!==D?D:zN.fromUtf8,utf8Encoder:null!==(R=e?.utf8Encoder)&&void 0!==R?R:zN.toUtf8})},Ng=function(e){function n(t){var r=this,o=function(e){var n=e.region,t=e.useFipsEndpoint;if(!n)throw new Error("Region is missing");return ne(ne({},e),{region:function(){return kt(void 0,void 0,void 0,function(){var r;return It(this,function(i){switch(i.label){case 0:return"string"==typeof n?[2,sN(n)]:[4,n()];case 1:return r=i.sent(),[2,sN(r)]}})})},useFipsEndpoint:function(){return kt(void 0,void 0,void 0,function(){var i;return It(this,function(o){switch(o.label){case 0:return"string"!=typeof n?[3,1]:(i=n,[3,3]);case 1:return[4,n()];case 2:i=o.sent(),o.label=3;case 3:return aN(i)?[2,!0]:[2,"boolean"==typeof t?Promise.resolve(t):t()]}})})}})}(zie(t)),s=function(e){var n=function(e){if(void 0===e&&(e=3),"number"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e}(e.maxAttempts);return ne(ne({},e),{maxAttempts:n,retryStrategy:function(){return kt(void 0,void 0,void 0,function(){return It(this,function(r){switch(r.label){case 0:return e.retryStrategy?[2,e.retryStrategy]:[4,ere(e.retryMode)];case 1:return r.sent()===Op.ADAPTIVE?[2,new Yne(n)]:[2,new dN(n)]}})})}})}(function(e){var n,t=function(e){if("boolean"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e}(e.useDualstackEndpoint),r=e.endpoint,i=e.useFipsEndpoint;return ne(ne({},e),{tls:null===(n=e.tls)||void 0===n||n,endpoint:r?rne(ne(ne({},e),{endpoint:r})):function(){return function(e){return kt(void 0,void 0,void 0,function(){var n,t,r,o,a,s,d;return It(this,function(l){switch(l.label){case 0:return t=void 0===(n=e.tls)||n,[4,e.region()];case 1:if(r=l.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");return[4,e.useDualstackEndpoint()];case 2:return o=l.sent(),[4,e.useFipsEndpoint()];case 3:return a=l.sent(),[4,e.regionInfoProvider(r,{useDualstackEndpoint:o,useFipsEndpoint:a})];case 4:if(!(s=(null!==(d=l.sent())&&void 0!==d?d:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((t?"https:":"http:")+"//"+s)]}})})}(ne(ne({},e),{useDualstackEndpoint:t,useFipsEndpoint:i}))},isCustomEndpoint:!!r,useDualstackEndpoint:t})}(o)),l=function(e){var s,n=e.credentials?function(e){return"function"==typeof e?function(e,n,t){var r,i,o,a=function(){return kt(void 0,void 0,void 0,function(){return It(this,function(d){switch(d.label){case 0:i||(i=e()),d.label=1;case 1:return d.trys.push([1,,3,4]),[4,i];case 2:return r=d.sent(),o=!0,[3,4];case 3:return i=void 0,[7];case 4:return[2,r]}})})};if(void 0===n)return function(){return kt(void 0,void 0,void 0,function(){return It(this,function(d){switch(d.label){case 0:return o?[3,2]:[4,a()];case 1:r=d.sent(),d.label=2;case 2:return[2,r]}})})};var s=!1;return function(){return kt(void 0,void 0,void 0,function(){return It(this,function(d){switch(d.label){case 0:return o?[3,2]:[4,a()];case 1:r=d.sent(),d.label=2;case 2:return s?[2,r]:t&&!t(r)?(s=!0,[2,r]):n(r)?[4,a()]:[3,4];case 3:return d.sent(),[2,r];case 4:return[2,r]}})})}}(e,function(n){return void 0!==n.expiration&&n.expiration.getTime()-Date.now()<3e5},function(n){return void 0!==n.expiration}):Fy(e)}(e.credentials):e.credentialDefaultProvider(e),t=e.signingEscapePath,r=void 0===t||t,i=e.systemClockOffset,o=void 0===i?e.systemClockOffset||0:i,a=e.sha256;return s=e.signer?Fy(e.signer):function(){return Fy(e.region)().then(function(d){return kt(void 0,void 0,void 0,function(){var l,f,_,m;return It(this,function(E){switch(E.label){case 0:return f=(l=e).regionInfoProvider,_=[d],m={},[4,e.useFipsEndpoint()];case 1:return m.useFipsEndpoint=E.sent(),[4,e.useDualstackEndpoint()];case 2:return[4,f.apply(l,_.concat([(m.useDualstackEndpoint=E.sent(),m)]))];case 3:return[2,[E.sent()||{},d]]}})})}).then(function(d){var l=ce(d,2),f=l[0],E=f.signingService;e.signingRegion=e.signingRegion||f.signingRegion||l[1],e.signingName=e.signingName||E||e.serviceId;var D=ne(ne({},e),{credentials:n,region:e.signingRegion,service:e.signingName,sha256:a,uriEscapePath:r});return new(e.signerConstructor||Lre)(D)})},ne(ne({},e),{systemClockOffset:o,signingEscapePath:r,credentials:n,signer:s})}(s),f=function Vre(e){return ne(ne({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}(l);return(r=e.call(this,f)||this).config=f,r.middlewareStack.use(function(e){return{applyToStack:function(n){n.add(function(e){return function(n,t){return function(r){return kt(void 0,void 0,void 0,function(){var i;return It(this,function(o){switch(o.label){case 0:return[4,e.retryStrategy()];case 1:return(i=o.sent())?.mode&&(t.userAgent=Gt(Gt([],ce(t.userAgent||[])),[["cfg/retry-mode",i.mode]])),[2,i.retry(n,r)]}})})}}}(e),sre)}}}(r.config)),r.middlewareStack.use(function(e){return{applyToStack:function(n){n.add(function hne(e){var n=this;return function(t){return function(r){return kt(n,void 0,void 0,function(){var i,o,a,s,d;return It(this,function(l){return uc.isInstance(i=r.request)&&(a=i.headers,(o=i.body)&&-1===Object.keys(a).map(function(f){return f.toLowerCase()}).indexOf(lN)&&void 0!==(s=e(o))&&(i.headers=ne(ne({},i.headers),((d={})[lN]=String(s),d)))),[2,t(ne(ne({},r),{request:i}))]})})}}}(e.bodyLengthChecker),pne)}}}(r.config)),r.middlewareStack.use(function(e){return{applyToStack:function(n){n.add(function(e){return function(n){return function(t){return kt(void 0,void 0,void 0,function(){var r,i;return It(this,function(a){return uc.isInstance(t.request)?(r=t.request,(void 0===(i=(e.requestHandler.metadata||{}).handlerProtocol)?"":i).indexOf("h2")>=0&&!r.headers[":authority"]?(delete r.headers.host,r.headers[":authority"]=""):r.headers.host||(r.headers.host=r.hostname),[2,n(t)]):[2,n(t)]})})}}}(e),vne)}}}(r.config)),r.middlewareStack.use({applyToStack:function(n){n.add(function(e,n){return function(t){return kt(void 0,void 0,void 0,function(){var r,i,o,a,s,d,l,f,_;return It(this,function(m){switch(m.label){case 0:return r=n.clientName,i=n.commandName,o=n.inputFilterSensitiveLog,a=n.logger,s=n.outputFilterSensitiveLog,[4,e(t)];case 1:return d=m.sent(),a?("function"==typeof a.info&&(f=(l=d.output).$metadata,_=er(l,["$metadata"]),a.info({clientName:r,commandName:i,input:o(t.input),output:s(_),metadata:f})),[2,d]):[2,d]}})})}},bne)}}),r.middlewareStack.use(function(e){return{applyToStack:function(n){n.addRelativeTo(function(e){return function(n,t){return function(r){return kt(this,void 0,void 0,function(){var i,o,a,s,d,l;return It(this,function(f){switch(f.label){case 0:return uc.isInstance(r.request)?[4,e.signer()]:[2,n(r)];case 1:return i=f.sent(),a=n,s=[ne({},r)],l={},[4,i.sign(r.request,{signingDate:IN(e.systemClockOffset),signingRegion:t.signing_region,signingService:t.signing_service})];case 2:return[4,a.apply(void 0,[ne.apply(void 0,s.concat([(l.request=f.sent(),l)]))]).catch(function(_){var m,E=null!==(m=_.ServerTime)&&void 0!==m?m:AN(_.$response);throw E&&(e.systemClockOffset=PN(E,e.systemClockOffset)),_})];case 3:return o=f.sent(),(d=AN(o.response))&&(e.systemClockOffset=PN(d,e.systemClockOffset)),[2,o]}})})}}}(e),Ure)}}}(r.config)),r.middlewareStack.use(function(e){return{applyToStack:function(n){n.add(function(e){return function(n,t){return function(r){return kt(void 0,void 0,void 0,function(){var i,o,a,s,d,l,f,_,m;return It(this,function(E){switch(E.label){case 0:return uc.isInstance(i=r.request)?(o=i.headers,a=(null===(_=t?.userAgent)||void 0===_?void 0:_.map(bT))||[],[4,e.defaultUserAgentProvider()]):[2,n(r)];case 1:return s=E.sent().map(bT),d=(null===(m=e?.customUserAgent)||void 0===m?void 0:m.map(bT))||[],l=Gt(Gt(Gt([],ce(s)),ce(a)),ce(d)).join(" "),f=Gt(Gt([],ce(s.filter(function(D){return D.startsWith("aws-sdk-")}))),ce(d)).join(" "),"browser"!==e.runtime?(f&&(o[_T]=o[_T]?o[RN]+" "+f:f),o[RN]=l):o[_T]=l,[2,n(ne(ne({},r),{request:i}))]}})})}}}(e),$re)}}}(r.config)),r}return Zt(n,e),n.prototype.destroy=function(){e.prototype.destroy.call(this)},n}(Xre),Gie={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Vie={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Lg(e,n,t){return{applyToStack:function(r){r.add(function(e,n){return function(t,r){return function(i){return kt(void 0,void 0,void 0,function(){var o,a,s;return It(this,function(d){switch(d.label){case 0:return[4,t(i)];case 1:o=d.sent().response,d.label=2;case 2:return d.trys.push([2,4,,5]),[4,n(o,e)];case 3:return a=d.sent(),[2,{response:o,output:a}];case 4:throw s=d.sent(),Object.assign(s,{$response:o});case 5:return[2]}})})}}}(e,t),Gie),r.add(function(e,n){return function(t,r){return function(i){return kt(void 0,void 0,void 0,function(){var o;return It(this,function(a){switch(a.label){case 0:return[4,n(i.input,e)];case 1:return o=a.sent(),[2,t(ne(ne({},i),{request:o}))]}})})}}}(e,n),Vie)}}}var zw=(()=>(function(e){e.filterSensitiveLog=function(n){return ne({},n)}}(zw||(zw={})),zw))(),jw=(()=>(function(e){e.filterSensitiveLog=function(n){return ne({},n)}}(jw||(jw={})),jw))(),Bg=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne({},n),n.Polygon&&{Polygon:n.Polygon.map(function(t){return zc})})}}(Bg||(Bg={})),Bg))(),Uw=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne({},n),n.Geometry&&{Geometry:Bg.filterSensitiveLog(n.Geometry)})}}(Uw||(Uw={})),Uw))(),Gw=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne({},n),n.Entries&&{Entries:n.Entries.map(function(t){return Uw.filterSensitiveLog(t)})})}}(Gw||(Gw={})),Gw))(),Vw=(()=>(function(e){e.filterSensitiveLog=function(n){return ne({},n)}}(Vw||(Vw={})),Vw))(),qw=(()=>(function(e){e.filterSensitiveLog=function(n){return ne({},n)}}(qw||(qw={})),qw))(),Hw=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne({},n),n.Geometry&&{Geometry:Bg.filterSensitiveLog(n.Geometry)})}}(Hw||(Hw={})),Hw))(),$w=(()=>(function(e){e.filterSensitiveLog=function(n){return ne({},n)}}($w||($w={})),$w))(),Kw=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne({},n),n.Geometry&&{Geometry:Bg.filterSensitiveLog(n.Geometry)})}}(Kw||(Kw={})),Kw))(),Xw=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne({},n),n.Entries&&{Entries:n.Entries.map(function(t){return Kw.filterSensitiveLog(t)})})}}(Xw||(Xw={})),Xw))(),Ww=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne({},n),n.Position&&{Position:zc})}}(Ww||(Ww={})),Ww))(),Jw=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne({},n),n.Point&&{Point:zc})}}(Jw||(Jw={})),Jw))(),Hy=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne({},n),n.Geometry&&{Geometry:Jw.filterSensitiveLog(n.Geometry)})}}(Hy||(Hy={})),Hy))(),Zw=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne({},n),n.Place&&{Place:Hy.filterSensitiveLog(n.Place)})}}(Zw||(Zw={})),Zw))(),Yw=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne({},n),n.Position&&{Position:zc})}}(Yw||(Yw={})),Yw))(),Qw=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne(ne({},n),n.Summary&&{Summary:Yw.filterSensitiveLog(n.Summary)}),n.Results&&{Results:n.Results.map(function(t){return Zw.filterSensitiveLog(t)})})}}(Qw||(Qw={})),Qw))(),e1=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne(ne(ne({},n),n.Text&&{Text:zc}),n.BiasPosition&&{BiasPosition:zc}),n.FilterBBox&&{FilterBBox:zc})}}(e1||(e1={})),e1))(),t1=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne({},n),n.Place&&{Place:Hy.filterSensitiveLog(n.Place)})}}(t1||(t1={})),t1))(),n1=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne(ne(ne(ne({},n),n.Text&&{Text:zc}),n.BiasPosition&&{BiasPosition:zc}),n.FilterBBox&&{FilterBBox:zc}),n.ResultBBox&&{ResultBBox:zc})}}(n1||(n1={})),n1))(),r1=(()=>(function(e){e.filterSensitiveLog=function(n){return ne(ne(ne({},n),n.Summary&&{Summary:n1.filterSensitiveLog(n.Summary)}),n.Results&&{Results:n.Results.map(function(t){return t1.filterSensitiveLog(t)})})}}(r1||(r1={})),r1))(),Qie=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,s,d,l,f,_,m,E,D;return It(this,function(R){switch(R.label){case 0:return r=[ne({},e)],D={},[4,vn(e.body,n)];case 1:switch(t=ne.apply(void 0,r.concat([(D.body=R.sent(),D)])),o="UnknownError",o=Mr(e,t.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return s=[{}],[4,Ar(t,n)];case 3:return i=ne.apply(void 0,[ne.apply(void 0,s.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 4:return d=[{}],[4,Rr(t,n)];case 5:return i=ne.apply(void 0,[ne.apply(void 0,d.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 6:return l=[{}],[4,vi(t,n)];case 7:return i=ne.apply(void 0,[ne.apply(void 0,l.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 8:return f=[{}],[4,Dr(t,n)];case 9:return i=ne.apply(void 0,[ne.apply(void 0,f.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 10:return _=[{}],[4,Or(t,n)];case 11:return i=ne.apply(void 0,[ne.apply(void 0,_.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 12:o=(m=t.body).code||m.Code||o,i=ne(ne({},m),{name:""+o,message:m.message||m.Message||o,$fault:"client",$metadata:Ae(e)}),R.label=13;case 13:return i.message=E=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(E),i))]}})})},roe=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,s,d,l,f,_,m,E,D;return It(this,function(R){switch(R.label){case 0:return r=[ne({},e)],D={},[4,vn(e.body,n)];case 1:switch(t=ne.apply(void 0,r.concat([(D.body=R.sent(),D)])),o="UnknownError",o=Mr(e,t.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return s=[{}],[4,Ar(t,n)];case 3:return i=ne.apply(void 0,[ne.apply(void 0,s.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 4:return d=[{}],[4,Rr(t,n)];case 5:return i=ne.apply(void 0,[ne.apply(void 0,d.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 6:return l=[{}],[4,vi(t,n)];case 7:return i=ne.apply(void 0,[ne.apply(void 0,l.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 8:return f=[{}],[4,Dr(t,n)];case 9:return i=ne.apply(void 0,[ne.apply(void 0,f.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 10:return _=[{}],[4,Or(t,n)];case 11:return i=ne.apply(void 0,[ne.apply(void 0,_.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 12:o=(m=t.body).code||m.Code||o,i=ne(ne({},m),{name:""+o,message:m.message||m.Message||o,$fault:"client",$metadata:Ae(e)}),R.label=13;case 13:return i.message=E=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(E),i))]}})})},Toe=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,s,d,l,f,_,m,E,D;return It(this,function(R){switch(R.label){case 0:return r=[ne({},e)],D={},[4,vn(e.body,n)];case 1:switch(t=ne.apply(void 0,r.concat([(D.body=R.sent(),D)])),o="UnknownError",o=Mr(e,t.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return s=[{}],[4,Ar(t,n)];case 3:return i=ne.apply(void 0,[ne.apply(void 0,s.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 4:return d=[{}],[4,Rr(t,n)];case 5:return i=ne.apply(void 0,[ne.apply(void 0,d.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 6:return l=[{}],[4,vi(t,n)];case 7:return i=ne.apply(void 0,[ne.apply(void 0,l.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 8:return f=[{}],[4,Dr(t,n)];case 9:return i=ne.apply(void 0,[ne.apply(void 0,f.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 10:return _=[{}],[4,Or(t,n)];case 11:return i=ne.apply(void 0,[ne.apply(void 0,_.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 12:o=(m=t.body).code||m.Code||o,i=ne(ne({},m),{name:""+o,message:m.message||m.Message||o,$fault:"client",$metadata:Ae(e)}),R.label=13;case 13:return i.message=E=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(E),i))]}})})},koe=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,s,d,l,f,_,m,E,D;return It(this,function(R){switch(R.label){case 0:return r=[ne({},e)],D={},[4,vn(e.body,n)];case 1:switch(t=ne.apply(void 0,r.concat([(D.body=R.sent(),D)])),o="UnknownError",o=Mr(e,t.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return s=[{}],[4,Ar(t,n)];case 3:return i=ne.apply(void 0,[ne.apply(void 0,s.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 4:return d=[{}],[4,Rr(t,n)];case 5:return i=ne.apply(void 0,[ne.apply(void 0,d.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 6:return l=[{}],[4,vi(t,n)];case 7:return i=ne.apply(void 0,[ne.apply(void 0,l.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 8:return f=[{}],[4,Dr(t,n)];case 9:return i=ne.apply(void 0,[ne.apply(void 0,f.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 10:return _=[{}],[4,Or(t,n)];case 11:return i=ne.apply(void 0,[ne.apply(void 0,_.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 12:o=(m=t.body).code||m.Code||o,i=ne(ne({},m),{name:""+o,message:m.message||m.Message||o,$fault:"client",$metadata:Ae(e)}),R.label=13;case 13:return i.message=E=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(E),i))]}})})},Voe=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,s,d,l,f,_,m,E,D;return It(this,function(R){switch(R.label){case 0:return r=[ne({},e)],D={},[4,vn(e.body,n)];case 1:switch(t=ne.apply(void 0,r.concat([(D.body=R.sent(),D)])),o="UnknownError",o=Mr(e,t.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return s=[{}],[4,Ar(t,n)];case 3:return i=ne.apply(void 0,[ne.apply(void 0,s.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 4:return d=[{}],[4,Rr(t,n)];case 5:return i=ne.apply(void 0,[ne.apply(void 0,d.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 6:return l=[{}],[4,vi(t,n)];case 7:return i=ne.apply(void 0,[ne.apply(void 0,l.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 8:return f=[{}],[4,Dr(t,n)];case 9:return i=ne.apply(void 0,[ne.apply(void 0,f.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 10:return _=[{}],[4,Or(t,n)];case 11:return i=ne.apply(void 0,[ne.apply(void 0,_.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 12:o=(m=t.body).code||m.Code||o,i=ne(ne({},m),{name:""+o,message:m.message||m.Message||o,$fault:"client",$metadata:Ae(e)}),R.label=13;case 13:return i.message=E=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(E),i))]}})})},$oe=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o,s,d,l,f,_,m,E,D;return It(this,function(R){switch(R.label){case 0:return r=[ne({},e)],D={},[4,vn(e.body,n)];case 1:switch(t=ne.apply(void 0,r.concat([(D.body=R.sent(),D)])),o="UnknownError",o=Mr(e,t.body)){case"AccessDeniedException":case"com.amazonaws.location#AccessDeniedException":return[3,2];case"InternalServerException":case"com.amazonaws.location#InternalServerException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.location#ResourceNotFoundException":return[3,6];case"ThrottlingException":case"com.amazonaws.location#ThrottlingException":return[3,8];case"ValidationException":case"com.amazonaws.location#ValidationException":return[3,10]}return[3,12];case 2:return s=[{}],[4,Ar(t,n)];case 3:return i=ne.apply(void 0,[ne.apply(void 0,s.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 4:return d=[{}],[4,Rr(t,n)];case 5:return i=ne.apply(void 0,[ne.apply(void 0,d.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 6:return l=[{}],[4,vi(t,n)];case 7:return i=ne.apply(void 0,[ne.apply(void 0,l.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 8:return f=[{}],[4,Dr(t,n)];case 9:return i=ne.apply(void 0,[ne.apply(void 0,f.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 10:return _=[{}],[4,Or(t,n)];case 11:return i=ne.apply(void 0,[ne.apply(void 0,_.concat([R.sent()])),{name:o,$metadata:Ae(e)}]),[3,13];case 12:o=(m=t.body).code||m.Code||o,i=ne(ne({},m),{name:""+o,message:m.message||m.Message||o,$fault:"client",$metadata:Ae(e)}),R.label=13;case 13:return i.message=E=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(E),i))]}})})},Ar=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r;return It(this,function(i){return t={name:"AccessDeniedException",$fault:"client",$metadata:Ae(e),Message:void 0},null!=(r=e.body).message&&(t.Message=Yi(r.message)),[2,t]})})},Rr=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r;return It(this,function(i){return t={name:"InternalServerException",$fault:"server",$retryable:{},$metadata:Ae(e),Message:void 0},null!=(r=e.body).message&&(t.Message=Yi(r.message)),[2,t]})})},vi=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r;return It(this,function(i){return t={name:"ResourceNotFoundException",$fault:"client",$metadata:Ae(e),Message:void 0},null!=(r=e.body).message&&(t.Message=Yi(r.message)),[2,t]})})},Dr=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r;return It(this,function(i){return t={name:"ThrottlingException",$fault:"client",$retryable:{},$metadata:Ae(e),Message:void 0},null!=(r=e.body).message&&(t.Message=Yi(r.message)),[2,t]})})},Or=function(e,n){return kt(void 0,void 0,void 0,function(){var t,r;return It(this,function(i){return t={name:"ValidationException",$fault:"client",$metadata:Ae(e),FieldList:void 0,Message:void 0,Reason:void 0},null!=(r=e.body).fieldList&&(t.FieldList=vse(r.fieldList,n)),null!=r.message&&(t.Message=Yi(r.message)),null!=r.reason&&(t.Reason=Yi(r.reason)),[2,t]})})},nae=function(e,n){return e.filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){return ne(ne({},null!=e.GeofenceId&&{GeofenceId:e.GeofenceId}),null!=e.Geometry&&{Geometry:$N(e.Geometry,n)})}(t,n)})},jN=function(e,n){return e.filter(function(t){return null!=t}).map(function(t){return null===t?null:BN(t)})},VN=function(e,n){return e.filter(function(t){return null!=t}).map(function(t){return null===t?null:t})},$N=function(e,n){return ne({},null!=e.Polygon&&{Polygon:aae(e.Polygon,n)})},KN=function(e,n){return e.filter(function(t){return null!=t}).map(function(t){return null===t?null:t})},aae=function(e,n){return e.filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){return e.filter(function(t){return null!=t}).map(function(t){return null===t?null:sf(t,n)})}(t,n)})},sf=function(e,n){return e.filter(function(t){return null!=t}).map(function(t){return null===t?null:BN(t)})},zg=function(e,n){return{Code:Yi(e.Code),Message:Yi(e.Message)}},i1=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:jy(t)})},WN=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:Yi(t)})},ZN=function(e,n){return{Polygon:null!=e.Polygon?Lae(e.Polygon,n):void 0}},Lae=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:hl(t,n)})}(t,n)})},YN=function(e,n){return{AddressNumber:Yi(e.AddressNumber),Country:Yi(e.Country),Geometry:null!=e.Geometry?Qae(e.Geometry,n):void 0,Interpolated:Wre(e.Interpolated),Label:Yi(e.Label),Municipality:Yi(e.Municipality),Neighborhood:Yi(e.Neighborhood),PostalCode:Yi(e.PostalCode),Region:Yi(e.Region),Street:Yi(e.Street),SubRegion:Yi(e.SubRegion),TimeZone:null!=e.TimeZone?mse(e.TimeZone,n):void 0}},Qae=function(e,n){return{Point:null!=e.Point?hl(e.Point,n):void 0}},hl=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:jy(t)})},mse=function(e,n){return{Name:Yi(e.Name),Offset:zy(e.Offset)}},vse=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){return{Message:Yi(e.message),Name:Yi(e.name)}}(t)})},Ae=function(e){var n;return{httpStatusCode:e.statusCode,requestId:null!==(n=e.headers["x-amzn-requestid"])&&void 0!==n?n:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},vn=function(e,n){return function(e,n){return function(e,n){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):n.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,n).then(function(t){return n.utf8Encoder(t)})}(e,n).then(function(t){return t.length?JSON.parse(t):{}})},Mr=function(e,n){var r=function(o){var a=o;return a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},i=("x-amzn-errortype",Object.keys(e.headers).find(function(s){return s.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==i?r(e.headers[i]):void 0!==n.code?r(n.code):void 0!==n.__type?r(n.__type):""},_se=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Zt(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(Lg(r,this.serialize,this.deserialize));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"SearchPlaceIndexForTextCommand",inputFilterSensitiveLog:e1.filterSensitiveLog,outputFilterSensitiveLog:r1.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,i,o,a,s,d,l,f,_,m;return It(this,function(E){switch(E.label){case 0:return[4,n.endpoint()];case 1:if(t=E.sent(),o=void 0===(i=t.protocol)?"https":i,a=t.port,d={"content-type":"application/json"},l=((s=t.path)?.endsWith("/")?s.slice(0,-1):s||"")+"/places/v0/indexes/{IndexName}/search/text",void 0===e.IndexName)throw new Error("No value provided for input HTTP label: IndexName.");if((f=e.IndexName).length<=0)throw new Error("Empty value provided for input HTTP label: IndexName.");return l=l.replace("{IndexName}",Np(f)),_=JSON.stringify(ne(ne(ne(ne(ne(ne({},null!=e.BiasPosition&&{BiasPosition:sf(e.BiasPosition,n)}),null!=e.FilterBBox&&{FilterBBox:jN(e.FilterBBox)}),null!=e.FilterCountries&&{FilterCountries:VN(e.FilterCountries)}),null!=e.Language&&{Language:e.Language}),null!=e.MaxResults&&{MaxResults:e.MaxResults}),null!=e.Text&&{Text:e.Text})),[4,n.endpoint()];case 2:if(m=E.sent().hostname,!0!==n.disableHostPrefix&&!Ig(m="places."+m))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new uc({protocol:o,hostname:m,port:a,method:"POST",headers:d,path:l,body:_})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o;return It(this,function(a){switch(a.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,$oe(e,n)]:(t={$metadata:Ae(e),Results:void 0,Summary:void 0},i=lc,o=kp,[4,vn(e.body,n)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[a.sent()]),"body"])).Results&&(t.Results=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){return{Distance:jy(e.Distance),Place:null!=e.Place?YN(e.Place,n):void 0,Relevance:jy(e.Relevance)}}(t,n)})}(r.Results,n)),null!=r.Summary&&(t.Summary=function(e,n){return{BiasPosition:null!=e.BiasPosition?hl(e.BiasPosition,n):void 0,DataSource:Yi(e.DataSource),FilterBBox:null!=e.FilterBBox?i1(e.FilterBBox):void 0,FilterCountries:null!=e.FilterCountries?WN(e.FilterCountries):void 0,Language:Yi(e.Language),MaxResults:zy(e.MaxResults),ResultBBox:null!=e.ResultBBox?i1(e.ResultBBox):void 0,Text:Yi(e.Text)}}(r.Summary,n)),[2,Promise.resolve(t)]}})})}(t,r)},n}(Rg),bse=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Zt(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(Lg(r,this.serialize,this.deserialize));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"SearchPlaceIndexForPositionCommand",inputFilterSensitiveLog:Ww.filterSensitiveLog,outputFilterSensitiveLog:Qw.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,i,o,a,s,d,l,f,_,m;return It(this,function(E){switch(E.label){case 0:return[4,n.endpoint()];case 1:if(t=E.sent(),o=void 0===(i=t.protocol)?"https":i,a=t.port,d={"content-type":"application/json"},l=((s=t.path)?.endsWith("/")?s.slice(0,-1):s||"")+"/places/v0/indexes/{IndexName}/search/position",void 0===e.IndexName)throw new Error("No value provided for input HTTP label: IndexName.");if((f=e.IndexName).length<=0)throw new Error("Empty value provided for input HTTP label: IndexName.");return l=l.replace("{IndexName}",Np(f)),_=JSON.stringify(ne(ne(ne({},null!=e.Language&&{Language:e.Language}),null!=e.MaxResults&&{MaxResults:e.MaxResults}),null!=e.Position&&{Position:sf(e.Position,n)})),[4,n.endpoint()];case 2:if(m=E.sent().hostname,!0!==n.disableHostPrefix&&!Ig(m="places."+m))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new uc({protocol:o,hostname:m,port:a,method:"POST",headers:d,path:l,body:_})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o;return It(this,function(a){switch(a.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Voe(e,n)]:(t={$metadata:Ae(e),Results:void 0,Summary:void 0},i=lc,o=kp,[4,vn(e.body,n)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[a.sent()]),"body"])).Results&&(t.Results=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){return{Distance:jy(e.Distance),Place:null!=e.Place?YN(e.Place,n):void 0}}(t,n)})}(r.Results,n)),null!=r.Summary&&(t.Summary=function(e,n){return{DataSource:Yi(e.DataSource),Language:Yi(e.Language),MaxResults:zy(e.MaxResults),Position:null!=e.Position?hl(e.Position,n):void 0}}(r.Summary,n)),[2,Promise.resolve(t)]}})})}(t,r)},n}(Rg),wse=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Zt(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(Lg(r,this.serialize,this.deserialize));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"GetGeofenceCommand",inputFilterSensitiveLog:qw.filterSensitiveLog,outputFilterSensitiveLog:Hw.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,i,o,a,s,d,l,f,m;return It(this,function(E){switch(E.label){case 0:return[4,n.endpoint()];case 1:if(t=E.sent(),o=void 0===(i=t.protocol)?"https":i,a=t.port,d={},l=((s=t.path)?.endsWith("/")?s.slice(0,-1):s||"")+"/geofencing/v0/collections/{CollectionName}/geofences/{GeofenceId}",void 0===e.CollectionName)throw new Error("No value provided for input HTTP label: CollectionName.");if((f=e.CollectionName).length<=0)throw new Error("Empty value provided for input HTTP label: CollectionName.");if(l=l.replace("{CollectionName}",Np(f)),void 0===e.GeofenceId)throw new Error("No value provided for input HTTP label: GeofenceId.");if((f=e.GeofenceId).length<=0)throw new Error("Empty value provided for input HTTP label: GeofenceId.");return l=l.replace("{GeofenceId}",Np(f)),[4,n.endpoint()];case 2:if(m=E.sent().hostname,!0!==n.disableHostPrefix&&!Ig(m="geofencing."+m))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new uc({protocol:o,hostname:m,port:a,method:"GET",headers:d,path:l,body:void 0})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o;return It(this,function(a){switch(a.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Toe(e,n)]:(t={$metadata:Ae(e),CreateTime:void 0,GeofenceId:void 0,Geometry:void 0,Status:void 0,UpdateTime:void 0},i=lc,o=kp,[4,vn(e.body,n)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[a.sent()]),"body"])).CreateTime&&(t.CreateTime=lc(Og(r.CreateTime))),null!=r.GeofenceId&&(t.GeofenceId=Yi(r.GeofenceId)),null!=r.Geometry&&(t.Geometry=ZN(r.Geometry,n)),null!=r.Status&&(t.Status=Yi(r.Status)),null!=r.UpdateTime&&(t.UpdateTime=lc(Og(r.UpdateTime))),[2,Promise.resolve(t)]}})})}(t,r)},n}(Rg),xse=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Zt(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(Lg(r,this.serialize,this.deserialize));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"ListGeofencesCommand",inputFilterSensitiveLog:$w.filterSensitiveLog,outputFilterSensitiveLog:Xw.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,i,o,a,s,d,l,f,_,m;return It(this,function(E){switch(E.label){case 0:return[4,n.endpoint()];case 1:if(t=E.sent(),o=void 0===(i=t.protocol)?"https":i,a=t.port,d={"content-type":"application/json"},l=((s=t.path)?.endsWith("/")?s.slice(0,-1):s||"")+"/geofencing/v0/collections/{CollectionName}/list-geofences",void 0===e.CollectionName)throw new Error("No value provided for input HTTP label: CollectionName.");if((f=e.CollectionName).length<=0)throw new Error("Empty value provided for input HTTP label: CollectionName.");return l=l.replace("{CollectionName}",Np(f)),_=JSON.stringify(ne({},null!=e.NextToken&&{NextToken:e.NextToken})),[4,n.endpoint()];case 2:if(m=E.sent().hostname,!0!==n.disableHostPrefix&&!Ig(m="geofencing."+m))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new uc({protocol:o,hostname:m,port:a,method:"POST",headers:d,path:l,body:_})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o;return It(this,function(a){switch(a.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,koe(e,n)]:(t={$metadata:Ae(e),Entries:void 0,NextToken:void 0},i=lc,o=kp,[4,vn(e.body,n)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[a.sent()]),"body"])).Entries&&(t.Entries=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){return{CreateTime:null!=e.CreateTime?lc(Og(e.CreateTime)):void 0,GeofenceId:Yi(e.GeofenceId),Geometry:null!=e.Geometry?ZN(e.Geometry,n):void 0,Status:Yi(e.Status),UpdateTime:null!=e.UpdateTime?lc(Og(e.UpdateTime)):void 0}}(t,n)})}(r.Entries,n)),null!=r.NextToken&&(t.NextToken=Yi(r.NextToken)),[2,Promise.resolve(t)]}})})}(t,r)},n}(Rg),Ese=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Zt(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(Lg(r,this.serialize,this.deserialize));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"BatchPutGeofenceCommand",inputFilterSensitiveLog:Gw.filterSensitiveLog,outputFilterSensitiveLog:Vw.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,i,o,a,s,d,l,f,_,m;return It(this,function(E){switch(E.label){case 0:return[4,n.endpoint()];case 1:if(t=E.sent(),o=void 0===(i=t.protocol)?"https":i,a=t.port,d={"content-type":"application/json"},l=((s=t.path)?.endsWith("/")?s.slice(0,-1):s||"")+"/geofencing/v0/collections/{CollectionName}/put-geofences",void 0===e.CollectionName)throw new Error("No value provided for input HTTP label: CollectionName.");if((f=e.CollectionName).length<=0)throw new Error("Empty value provided for input HTTP label: CollectionName.");return l=l.replace("{CollectionName}",Np(f)),_=JSON.stringify(ne({},null!=e.Entries&&{Entries:nae(e.Entries,n)})),[4,n.endpoint()];case 2:if(m=E.sent().hostname,!0!==n.disableHostPrefix&&!Ig(m="geofencing."+m))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new uc({protocol:o,hostname:m,port:a,method:"POST",headers:d,path:l,body:_})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o;return It(this,function(a){switch(a.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,roe(e,n)]:(t={$metadata:Ae(e),Errors:void 0,Successes:void 0},i=lc,o=kp,[4,vn(e.body,n)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[a.sent()]),"body"])).Errors&&(t.Errors=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){return{Error:null!=e.Error?zg(e.Error,n):void 0,GeofenceId:Yi(e.GeofenceId)}}(t,n)})}(r.Errors,n)),null!=r.Successes&&(t.Successes=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){return{CreateTime:null!=e.CreateTime?lc(Og(e.CreateTime)):void 0,GeofenceId:Yi(e.GeofenceId),UpdateTime:null!=e.UpdateTime?lc(Og(e.UpdateTime)):void 0}}(t)})}(r.Successes)),[2,Promise.resolve(t)]}})})}(t,r)},n}(Rg),Sse=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return Zt(n,e),n.prototype.resolveMiddleware=function(t,r,i){this.middlewareStack.use(Lg(r,this.serialize,this.deserialize));var o=t.concat(this.middlewareStack),f=r.requestHandler;return o.resolve(function(_){return f.handle(_.request,i||{})},{logger:r.logger,clientName:"LocationClient",commandName:"BatchDeleteGeofenceCommand",inputFilterSensitiveLog:zw.filterSensitiveLog,outputFilterSensitiveLog:jw.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,i,o,a,s,d,l,f,_,m;return It(this,function(E){switch(E.label){case 0:return[4,n.endpoint()];case 1:if(t=E.sent(),o=void 0===(i=t.protocol)?"https":i,a=t.port,d={"content-type":"application/json"},l=((s=t.path)?.endsWith("/")?s.slice(0,-1):s||"")+"/geofencing/v0/collections/{CollectionName}/delete-geofences",void 0===e.CollectionName)throw new Error("No value provided for input HTTP label: CollectionName.");if((f=e.CollectionName).length<=0)throw new Error("Empty value provided for input HTTP label: CollectionName.");return l=l.replace("{CollectionName}",Np(f)),_=JSON.stringify(ne({},null!=e.GeofenceIds&&{GeofenceIds:KN(e.GeofenceIds)})),[4,n.endpoint()];case 2:if(m=E.sent().hostname,!0!==n.disableHostPrefix&&!Ig(m="geofencing."+m))throw new Error("ValidationError: prefixed hostname must be hostname compatible.");return[2,new uc({protocol:o,hostname:m,port:a,method:"POST",headers:d,path:l,body:_})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return kt(void 0,void 0,void 0,function(){var t,r,i,o;return It(this,function(a){switch(a.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Qie(e,n)]:(t={$metadata:Ae(e),Errors:void 0},i=lc,o=kp,[4,vn(e.body,n)]);case 1:return null!=(r=i.apply(void 0,[o.apply(void 0,[a.sent()]),"body"])).Errors&&(t.Errors=function(e,n){return(e||[]).filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){return{Error:null!=e.Error?zg(e.Error,n):void 0,GeofenceId:Yi(e.GeofenceId)}}(t,n)})}(r.Errors,n)),[2,Promise.resolve(t)]}})})}(t,r)},n}(Rg);var DT=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o};function a3(e,n){if(!Number.isFinite(e)||!Number.isFinite(n))throw new Error("Invalid coordinates: ["+e+","+n+"]");if(n<-90||90<n)throw new Error("Latitude must be between -90 and 90 degrees inclusive.");if(e<-180||180<e)throw new Error("Longitude must be between -180 and 180 degrees inclusive.")}function OT(e){if(!/^[-._\p{L}\p{N}]+$/iu.test(e))throw new Error("Invalid geofenceId: '"+e+"' - IDs can only contain alphanumeric characters, hyphens, underscores and periods.")}function s3(e,n){var t=n?n+": ":"";if(e.length<4)throw new Error(t+"LinearRing must contain 4 or more coordinates.");var r=[];if(e.forEach(function(f){try{a3(f[0],f[1])}catch(_){r.push({coordinates:f,error:_.message})}}),r.length>0)throw new Error(t+"One or more of the coordinates in the Polygon LinearRing are not valid: "+JSON.stringify(r));var i=DT(e[0],2),o=i[0],a=i[1],s=DT(e[e.length-1],2);if(o!==s[0]||a!==s[1])throw new Error(t+"LinearRing's first and last coordinates are not the same");if(function Ose(e){for(var i,o,n=function Rse(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(e),t=0,r=1;r<n.length;)i=o||n[0],t+=((o=n[r])[0]-i[0])*(o[1]+i[1]),r++;return t>0}(e))throw new Error(t+"LinearRing coordinates must be wound counterclockwise")}var jc=function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})},Uc=function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},Nse=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Xu=new _a("AmazonLocationServiceProvider"),Bse=function(){function e(n){this._config=n||{},Xu.debug("Geo Options",this._config)}return e.prototype.getCategory=function(){return e.CATEGORY},e.prototype.getProviderName=function(){return e.PROVIDER_NAME},e.prototype.configure=function(n){return Xu.debug("configure Amazon Location Service Provider",n),n?(this._config=Object.assign({},this._config,n),this._config):this._config},e.prototype.getAvailableMaps=function(){this._verifyMapResources();var n=[],t=this._config.maps.items,r=this._config.region;for(var i in t)n.push({mapName:i,style:t[i].style,region:r});return n},e.prototype.getDefaultMap=function(){this._verifyMapResources();var n=this._config.maps.default;return{mapName:n,style:this._config.maps.items[n].style,region:this._config.region}},e.prototype.searchByText=function(n,t){return jc(this,void 0,void 0,function(){var i,o,a,s,d,l;return Uc(this,function(_){switch(_.label){case 0:return[4,this._ensureCredentials()];case 1:if(!_.sent())throw new Error("No credentials");if(this._verifySearchIndex(t?.searchIndexName),i={Text:n,IndexName:this._config.search_indices.default},t){if(i.FilterCountries=t.countries,i.MaxResults=t.maxResults,t.searchIndexName&&(i.IndexName=t.searchIndexName),t.biasPosition&&t.searchAreaConstraints)throw new Error("BiasPosition and SearchAreaConstraints are mutually exclusive, please remove one or the other from the options object");t.biasPosition&&(i.BiasPosition=t.biasPosition),t.searchAreaConstraints&&(i.FilterBBox=t.searchAreaConstraints)}o=new Ng({credentials:this._config.credentials,region:this._config.region,customUserAgent:Lc()}),a=new _se(i),_.label=2;case 2:return _.trys.push([2,4,,5]),[4,o.send(a)];case 3:return s=_.sent(),[3,5];case 4:throw d=_.sent(),Xu.debug(d),d;case 5:return l=s.Results.map(function(m){return m.Place}),[2,oN()(l,{deep:!0})]}})})},e.prototype.searchByCoordinates=function(n,t){return jc(this,void 0,void 0,function(){var i,o,a,s,d,l;return Uc(this,function(_){switch(_.label){case 0:return[4,this._ensureCredentials()];case 1:if(!_.sent())throw new Error("No credentials");this._verifySearchIndex(t?.searchIndexName),i={Position:n,IndexName:this._config.search_indices.default},t&&(t.searchIndexName&&(i.IndexName=t.searchIndexName),i.MaxResults=t.maxResults),o=new Ng({credentials:this._config.credentials,region:this._config.region,customUserAgent:Lc()}),a=new bse(i),_.label=2;case 2:return _.trys.push([2,4,,5]),[4,o.send(a)];case 3:return s=_.sent(),[3,5];case 4:throw d=_.sent(),Xu.debug(d),d;case 5:return l=s.Results.map(function(m){return m.Place}),[2,oN()(l[0],{deep:!0})]}})})},e.prototype.saveGeofences=function(n,t){return jc(this,void 0,void 0,function(){var i,o,a,d=this;return Uc(this,function(l){switch(l.label){case 0:if(n.length<1)throw new Error("Geofence input array is empty");return[4,this._ensureCredentials()];case 1:if(!l.sent())throw new Error("No credentials");try{this._verifyGeofenceCollections(t?.collectionName)}catch(f){throw Xu.debug(f),f}for(function kse(e){var n={};e.forEach(function(t){if(!t.geofenceId)throw new Error("Geofence '"+t+"' is missing geofenceId");var r=t.geofenceId;if(OT(r),n[r])throw new Error("Duplicate geofenceId: "+r);if(n[r]=!0,!t.geometry)throw new Error("Geofence '"+r+"' is missing geometry");var i=t.geometry;if(!i.polygon)throw new Error("Geofence '"+r+"' is missing geometry.polygon");var o=i.polygon;try{!function Mse(e,n){var t=n?n+": ":"";if(!Array.isArray(e))throw new Error(t+"Polygon is of incorrect structure. It should be an array of LinearRings");if(e.length<1)throw new Error(t+"Polygon must have a single LinearRing array.");if(e.length>1)throw new Error(t+"Polygon must have a single LinearRing array. Note: We do not currently support polygons with holes, multipolygons, polygons that are wound clockwise, or that cross the antimeridian.");if(e.reduce(function(i,o){return i+o.length},0)>1e3)throw new Error(t+"Polygon has more than the maximum 1000 vertices.");e.forEach(function(i){s3(i,n)})}(o,r)}catch(d){if(d.message.includes("Polygon has more than the maximum 1000 vertices."))throw new Error("Geofence '"+r+"' has more than the maximum of 1000 vertices")}s3(DT(o,1)[0],r)})}(n),i=n.map(function(f){return{GeofenceId:f.geofenceId,Geometry:{Polygon:f.geometry.polygon}}}),o={successes:[],errors:[]},a=[];i.length>0;)a.push(i.splice(0,10));return[4,Promise.all(a.map(function(f){return jc(d,void 0,void 0,function(){var _,m;return Uc(this,function(E){switch(E.label){case 0:return E.trys.push([0,2,,3]),[4,this._AmazonLocationServiceBatchPutGeofenceCall(f,t?.collectionName||this._config.geofenceCollections.default)];case 1:return _=E.sent(),[3,3];case 2:return m=E.sent(),f.forEach(function(D){o.errors.push({geofenceId:D.GeofenceId,error:{code:"APIConnectionError",message:m.message}})}),[2];case 3:return _.Successes.forEach(function(D){o.successes.push({geofenceId:D.GeofenceId,createTime:D.CreateTime,updateTime:D.UpdateTime})}),_.Errors.forEach(function(D){var R=D.Error;o.errors.push({error:{code:R.Code,message:R.Message},geofenceId:D.GeofenceId})}),[2]}})})}))];case 2:return l.sent(),[2,o]}})})},e.prototype.getGeofence=function(n,t){return jc(this,void 0,void 0,function(){var i,a,s,d;return Uc(this,function(R){switch(R.label){case 0:return[4,this._ensureCredentials()];case 1:if(!R.sent())throw new Error("No credentials");try{this._verifyGeofenceCollections(t?.collectionName)}catch(ye){throw Xu.debug(ye),ye}OT(n),i=new Ng({credentials:this._config.credentials,region:this._config.region,customUserAgent:Lc()}),a=new wse({GeofenceId:n,CollectionName:t?.collectionName||this._config.geofenceCollections.default}),R.label=2;case 2:return R.trys.push([2,4,,5]),[4,i.send(a)];case 3:return s=R.sent(),[3,5];case 4:throw d=R.sent(),Xu.debug(d),d;case 5:return[2,{createTime:s.CreateTime,geofenceId:s.GeofenceId,geometry:{polygon:s.Geometry.Polygon},status:s.Status,updateTime:s.UpdateTime}]}})})},e.prototype.listGeofences=function(n){return jc(this,void 0,void 0,function(){var r,o,a,s,d;return Uc(this,function(_){switch(_.label){case 0:return[4,this._ensureCredentials()];case 1:if(!_.sent())throw new Error("No credentials");try{this._verifyGeofenceCollections(n?.collectionName)}catch(m){throw Xu.debug(m),m}r=new Ng({credentials:this._config.credentials,region:this._config.region,customUserAgent:Lc()}),o=new xse({NextToken:n?.nextToken,CollectionName:n?.collectionName||this._config.geofenceCollections.default}),_.label=2;case 2:return _.trys.push([2,4,,5]),[4,r.send(o)];case 3:return a=_.sent(),[3,5];case 4:throw s=_.sent(),Xu.debug(s),s;case 5:return d=a.NextToken,[2,{entries:a.Entries.map(function(m){return{geofenceId:m.GeofenceId,createTime:m.CreateTime,updateTime:m.UpdateTime,status:m.Status,geometry:{polygon:m.Geometry.Polygon}}}),nextToken:d}]}})})},e.prototype.deleteGeofences=function(n,t){return jc(this,void 0,void 0,function(){var i,o,a,s,d=this;return Uc(this,function(l){switch(l.label){case 0:if(n.length<1)throw new Error("GeofenceId input array is empty");return[4,this._ensureCredentials()];case 1:if(!l.sent())throw new Error("No credentials");if(this._verifyGeofenceCollections(t?.collectionName),(i=n.filter(function(f){try{OT(f)}catch{return!0}})).length>0)throw new Error("Invalid geofence ids: "+i.join(", "));for(o={successes:[],errors:[]},a=[],s=0;s<n.length;)a.push(n.slice(s,s+=10));return[4,Promise.all(a.map(function(f){return jc(d,void 0,void 0,function(){var _,m,E,D;return Uc(this,function(R){switch(R.label){case 0:return R.trys.push([0,2,,3]),[4,this._AmazonLocationServiceBatchDeleteGeofenceCall(f,t?.collectionName||this._config.geofenceCollections.default)];case 1:return _=R.sent(),[3,3];case 2:return m=R.sent(),f.forEach(function(ye){o.errors.push({geofenceId:ye,error:{code:m.message,message:m.message}})}),[2];case 3:return E=_.Errors.map(function(ye){return ye.geofenceId}),(D=o.successes).push.apply(D,function(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(Nse(arguments[n]));return e}(f.filter(function(ye){return!E.includes(ye)}))),[2]}})})}))];case 2:return l.sent(),[2,o]}})})},e.prototype._ensureCredentials=function(){return jc(this,void 0,void 0,function(){var n,t,r;return Uc(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,ic.get()];case 1:return(n=i.sent())?(t=ic.shear(n),Xu.debug("Set credentials for storage. Credentials are:",t),this._config.credentials=t,[2,!0]):[2,!1];case 2:return r=i.sent(),Xu.debug("Ensure credentials error. Credentials are:",r),[2,!1];case 3:return[2]}})})},e.prototype._verifyMapResources=function(){var n;if(!this._config.maps)throw Xu.debug(n="No map resources found in amplify config, run 'amplify add geo' to create one and run `amplify push` after"),new Error(n);if(!this._config.maps.default)throw Xu.debug(n="No default map resource found in amplify config, run 'amplify add geo' to create one and run `amplify push` after"),new Error(n)},e.prototype._verifySearchIndex=function(n){if(!(this._config.search_indices&&this._config.search_indices.default||n)){var t="No Search Index found in amplify config, please run `amplify add geo` to create one and run `amplify push` after.";throw Xu.debug(t),new Error(t)}},e.prototype._verifyGeofenceCollections=function(n){if(!(this._config.geofenceCollections&&this._config.geofenceCollections.default||n)){var t="No Geofence Collections found, please run `amplify add geo` to create one and run `amplify push` after.";throw Xu.debug(t),new Error(t)}},e.prototype._AmazonLocationServiceBatchPutGeofenceCall=function(n,t){return jc(this,void 0,void 0,function(){var r,i,o,a;return Uc(this,function(d){switch(d.label){case 0:r={Entries:n,CollectionName:t||this._config.geofenceCollections.default},i=new Ng({credentials:this._config.credentials,region:this._config.region,customUserAgent:Lc()}),o=new Ese(r),d.label=1;case 1:return d.trys.push([1,3,,4]),[4,i.send(o)];case 2:return a=d.sent(),[3,4];case 3:throw d.sent();case 4:return[2,a]}})})},e.prototype._AmazonLocationServiceBatchDeleteGeofenceCall=function(n,t){return jc(this,void 0,void 0,function(){var r,i,o,a;return Uc(this,function(d){switch(d.label){case 0:r={GeofenceIds:n,CollectionName:t||this._config.geofenceCollections.default},i=new Ng({credentials:this._config.credentials,region:this._config.region,customUserAgent:Lc()}),o=new Sse(r),d.label=1;case 1:return d.trys.push([1,3,,4]),[4,i.send(o)];case 2:return a=d.sent(),[3,4];case 3:throw d.sent();case 4:return[2,a]}})})},e.CATEGORY="Geo",e.PROVIDER_NAME="AmazonLocationService",e}(),Ug=function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})},Gg=function(e,n){var r,i,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function d(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(f){l=[6,f],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}},uf=new _a("Geo"),wh="AmazonLocationService",zse=function(){function e(){this._config={},this._pluggables=[],uf.debug("Geo Options",this._config)}return e.prototype.getModuleName=function(){return e.MODULE},e.prototype.addPluggable=function(n){if(n&&"Geo"===n.getCategory())return this._pluggables.push(n),n.configure(this._config[n.getProviderName()])},e.prototype.getPluggable=function(n){var t=this._pluggables.find(function(r){return r.getProviderName()===n});if(void 0===t)throw uf.debug("No plugin found with providerName",n),new Error("No plugin found in Geo for the provider");return t},e.prototype.removePluggable=function(n){this._pluggables=this._pluggables.filter(function(t){return t.getProviderName()!==n})},e.prototype.configure=function(n){var t=this;if(uf.debug("configure Geo"),!n)return this._config;var r=uM(n);return this._config=Object.assign({},this._config,r.Geo,n),this._pluggables.forEach(function(i){i.configure(t._config[i.getProviderName()])}),0===this._pluggables.length&&this.addPluggable(new Bse),this._config},e.prototype.getAvailableMaps=function(n){return void 0===n&&(n=wh),this.getPluggable(n).getAvailableMaps()},e.prototype.getDefaultMap=function(n){return void 0===n&&(n=wh),this.getPluggable(n).getDefaultMap()},e.prototype.searchByText=function(n,t){return Ug(this,void 0,void 0,function(){var r,o,a;return Gg(this,function(s){switch(s.label){case 0:o=this.getPluggable(void 0===(r=(t||{}).providerName)?wh:r),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,o.searchByText(n,t)];case 2:return[2,s.sent()];case 3:throw a=s.sent(),uf.debug(a),a;case 4:return[2]}})})},e.prototype.searchByCoordinates=function(n,t){return Ug(this,void 0,void 0,function(){var r,o,a,s,d,l;return Gg(this,function(f){switch(f.label){case 0:o=this.getPluggable(void 0===(r=(t||{}).providerName)?wh:r),a=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,a,r=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}(n,2),s=a[0],d=a[1],f.label=1;case 1:return f.trys.push([1,3,,4]),a3(s,d),[4,o.searchByCoordinates(n,t)];case 2:return[2,f.sent()];case 3:throw l=f.sent(),uf.debug(l),l;case 4:return[2]}})})},e.prototype.saveGeofences=function(n,t){return Ug(this,void 0,void 0,function(){var r,o,a,s;return Gg(this,function(d){switch(d.label){case 0:o=this.getPluggable(void 0===(r=(t||{}).providerName)?wh:r),a=Array.isArray(n)?n:[n],d.label=1;case 1:return d.trys.push([1,3,,4]),[4,o.saveGeofences(a,t)];case 2:return[2,d.sent()];case 3:throw s=d.sent(),uf.debug(s),s;case 4:return[2]}})})},e.prototype.getGeofence=function(n,t){return Ug(this,void 0,void 0,function(){var r,o,a;return Gg(this,function(s){switch(s.label){case 0:o=this.getPluggable(void 0===(r=(t||{}).providerName)?wh:r),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,o.getGeofence(n,t)];case 2:return[2,s.sent()];case 3:throw a=s.sent(),uf.debug(a),a;case 4:return[2]}})})},e.prototype.listGeofences=function(n){return Ug(this,void 0,void 0,function(){var t,i,o;return Gg(this,function(a){switch(a.label){case 0:i=this.getPluggable(void 0===(t=(n||{}).providerName)?wh:t),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,i.listGeofences(n)];case 2:return[2,a.sent()];case 3:throw o=a.sent(),uf.debug(o),o;case 4:return[2]}})})},e.prototype.deleteGeofences=function(n,t){return Ug(this,void 0,void 0,function(){var r,o,a,s;return Gg(this,function(d){switch(d.label){case 0:o=this.getPluggable(void 0===(r=(t||{}).providerName)?wh:r),a=Array.isArray(n)?n:[n],d.label=1;case 1:return d.trys.push([1,3,,4]),[4,o.deleteGeofences(a,t)];case 2:return[2,d.sent()];case 3:throw s=d.sent(),uf.debug(s),s;case 4:return[2]}})})},e.MODULE="Geo",e}(),o1=new zse;Gu.register(o1);var $y=O(4987),a1=function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function s(f){try{l(r.next(f))}catch(_){a(_)}}function d(f){try{l(r.throw(f))}catch(_){a(_)}}function l(f){f.done?o(f.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(f.value).then(s,d)}l((r=r.apply(e,n||[])).next())})};class s1{constructor(n,t){this.refreshCredentials=()=>a1(this,void 0,void 0,function*(){try{this.credentials=yield Gu.Auth.currentCredentials()}catch(r){throw console.error(`Failed to refresh credentials: ${r}`),r}}),this.refreshCredentialsWithRetry=()=>a1(this,void 0,void 0,function*(){try{yield DD(this.refreshCredentials,[],3e5),this.activeTimeout&&clearTimeout(this.activeTimeout);const o=new Date(this.credentials.expiration).getTime()-(new Date).getTime()-1e4;this.activeTimeout=window.setTimeout(this.refreshCredentialsWithRetry,o)}catch(r){console.error(`Failed to refresh credentials: ${r}`)}}),this.transformRequest=(r,i)=>{if("Style"===i&&!r.includes("://")){if(null==this.region)throw new Error("AWS region for map is undefined. Please verify that the region is set in aws-exports.js or that you are providing an AWS region parameter to createMap");r=`https://maps.geo.${this.region}.amazonaws.com/maps/v0/maps/${r}/style-descriptor`}if(r.includes("amazonaws.com")){const o=r+`?x-amz-user-agent=${encodeURIComponent((e=>e.replace(/\./g,"%2E"))(Lc()))}`;return{url:Kte.signUrl(o,{access_key:this.credentials.accessKeyId,secret_key:this.credentials.secretAccessKey,session_token:this.credentials.sessionToken})}}},this.credentials=n,this.region=t,this.activeTimeout=null,this.refreshCredentialsWithRetry(),Jd.listen("auth",r=>{switch(r.payload.event){case"signIn":case"signOut":case"tokenRefresh":this.refreshCredentialsWithRetry()}})}}s1.createMapLibreMap=e=>a1(void 0,void 0,void 0,function*(){const{region:n,mapConstructor:t=$y.Map}=e,r=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}(e,["region","mapConstructor"]),i=o1.getDefaultMap(),a=new s1(yield Gu.Auth.currentCredentials(),n||i.region).transformRequest;return new t(Object.assign(Object.assign({},r),{style:e.style||i.mapName,transformRequest:a}))}),O(8407),O(209),O(8527),O(3913);const m3_amplify={Auth:{identityPoolId:"us-east-1:57a33aaf-0026-44e3-908c-7fb9d5730b9f",region:"us-east-1"},geo:{AmazonLocationService:{maps:{items:{AmazonMap:{style:"Default style"}},default:"AmazonMap"},region:"us-east-1"}}};let lue=(()=>{class e{constructor(){Fte.configure(m3_amplify)}ngAfterViewInit(){this.loadMap()}getCurrentPosition(){return new dt(t=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(r=>{t.next({latitude:r.coords.latitude,longitude:r.coords.longitude}),t.complete()}):t.error()})}loadMap(){(e=>a1(void 0,void 0,void 0,function*(){return s1.createMapLibreMap(e)}))({container:"map",center:[0,0],zoom:0}).then(t=>{this.map=t,this.map.addControl(new $y.NavigationControl),this.map.addControl(new $y.GeolocateControl),this.getCurrentPosition().subscribe(r=>{this.map.flyTo({center:[r.longitude,r.latitude],zoom:13});const i=new $y.Marker;i.setLngLat([r.longitude,r.latitude]),i.setPopup((new $y.Popup).setHTML("Angular AWS Map")),i.addTo(this.map)})})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Zu({type:e,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container-fluid","py-3"],["id","map"]],template:function(t,r){1&t&&(K_(0,"div",0)(1,"h1"),bP(2,"Angular AWS Map"),Rv(),X_(3,"div",1),Rv())},styles:["#map[_ngcontent-%COMP%]{height:400px;width:100%;max-width:600px}"]}),e})(),cue=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ka({type:e,bootstrap:[lue]}),e.\u0275inj=Xi({imports:[EU,h8]}),e})();(function nz(){mR=!1})(),xU().bootstrapModule(cue).catch(e=>console.error(e))},1437:function(Ee,X,O){"use strict";var L=this&&this.__importDefault||function(q){return q&&q.__esModule?q:{default:q}};Object.defineProperty(X,"__esModule",{value:!0});var $=L(O(9814)),v=O(8275);X.default=function G(q,k,I){void 0===I&&(I={});for(var S=I.steps||64,M=I.properties?I.properties:!Array.isArray(q)&&"Feature"===q.type&&q.properties?q.properties:{},H=[],K=0;K<S;K++)H.push($.default(q,k,-360*K/S,I).geometry.coordinates);return H.push(H[0]),v.polygon([H],M)}},9814:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});var L=O(8275),$=O(8418);X.default=function v(G,q,k,I){void 0===I&&(I={});var S=$.getCoord(G),M=L.degreesToRadians(S[0]),H=L.degreesToRadians(S[1]),K=L.degreesToRadians(k),J=L.lengthToRadians(q,I.units),ie=Math.asin(Math.sin(H)*Math.cos(J)+Math.cos(H)*Math.sin(J)*Math.cos(K)),Q=M+Math.atan2(Math.sin(K)*Math.sin(J)*Math.cos(H),Math.cos(J)-Math.sin(H)*Math.sin(ie)),ae=L.radiansToDegrees(Q),me=L.radiansToDegrees(ie);return L.point([ae,me],I.properties)}},2777:(Ee,X,O)=>{"use strict";var $=O(8418),v=O(8275);X.Z=function G(q,k,I){void 0===I&&(I={});var S=$.getCoord(q),M=$.getCoord(k),H=v.degreesToRadians(M[1]-S[1]),K=v.degreesToRadians(M[0]-S[0]),J=v.degreesToRadians(S[1]),ie=v.degreesToRadians(M[1]),Q=Math.pow(Math.sin(H/2),2)+Math.pow(Math.sin(K/2),2)*Math.cos(J)*Math.cos(ie);return v.radiansToLength(2*Math.atan2(Math.sqrt(Q),Math.sqrt(1-Q)),I.units)}},8275:(Ee,X)=>{"use strict";function O(N,F,z){void 0===z&&(z={});var ee={type:"Feature"};return(0===z.id||z.id)&&(ee.id=z.id),z.bbox&&(ee.bbox=z.bbox),ee.properties=F||{},ee.geometry=N,ee}function $(N,F,z){if(void 0===z&&(z={}),!N)throw new Error("coordinates is required");if(!Array.isArray(N))throw new Error("coordinates must be an Array");if(N.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!qe(N[0])||!qe(N[1]))throw new Error("coordinates must contain numbers");return O({type:"Point",coordinates:N},F,z)}function G(N,F,z){void 0===z&&(z={});for(var ee=0,W=N;ee<W.length;ee++){var ve=W[ee];if(ve.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Je=0;Je<ve[ve.length-1].length;Je++)if(ve[ve.length-1][Je]!==ve[0][Je])throw new Error("First and last Position are not equivalent.")}return O({type:"Polygon",coordinates:N},F,z)}function k(N,F,z){if(void 0===z&&(z={}),N.length<2)throw new Error("coordinates must be an array of two or more positions");return O({type:"LineString",coordinates:N},F,z)}function S(N,F){void 0===F&&(F={});var z={type:"FeatureCollection"};return F.id&&(z.id=F.id),F.bbox&&(z.bbox=F.bbox),z.features=N,z}function M(N,F,z){return void 0===z&&(z={}),O({type:"MultiLineString",coordinates:N},F,z)}function H(N,F,z){return void 0===z&&(z={}),O({type:"MultiPoint",coordinates:N},F,z)}function K(N,F,z){return void 0===z&&(z={}),O({type:"MultiPolygon",coordinates:N},F,z)}function Q(N,F){void 0===F&&(F="kilometers");var z=X.factors[F];if(!z)throw new Error(F+" units is invalid");return N*z}function ae(N,F){void 0===F&&(F="kilometers");var z=X.factors[F];if(!z)throw new Error(F+" units is invalid");return N/z}function oe(N){return N%(2*Math.PI)*180/Math.PI}function qe(N){return!isNaN(N)&&null!==N&&!Array.isArray(N)}Object.defineProperty(X,"__esModule",{value:!0}),X.earthRadius=6371008.8,X.factors={centimeters:100*X.earthRadius,centimetres:100*X.earthRadius,degrees:X.earthRadius/111325,feet:3.28084*X.earthRadius,inches:39.37*X.earthRadius,kilometers:X.earthRadius/1e3,kilometres:X.earthRadius/1e3,meters:X.earthRadius,metres:X.earthRadius,miles:X.earthRadius/1609.344,millimeters:1e3*X.earthRadius,millimetres:1e3*X.earthRadius,nauticalmiles:X.earthRadius/1852,radians:1,yards:1.0936*X.earthRadius},X.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/X.earthRadius,yards:1.0936133},X.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},X.feature=O,X.geometry=function L(N,F,z){switch(void 0===z&&(z={}),N){case"Point":return $(F).geometry;case"LineString":return k(F).geometry;case"Polygon":return G(F).geometry;case"MultiPoint":return H(F).geometry;case"MultiLineString":return M(F).geometry;case"MultiPolygon":return K(F).geometry;default:throw new Error(N+" is invalid")}},X.point=$,X.points=function v(N,F,z){return void 0===z&&(z={}),S(N.map(function(ee){return $(ee,F)}),z)},X.polygon=G,X.polygons=function q(N,F,z){return void 0===z&&(z={}),S(N.map(function(ee){return G(ee,F)}),z)},X.lineString=k,X.lineStrings=function I(N,F,z){return void 0===z&&(z={}),S(N.map(function(ee){return k(ee,F)}),z)},X.featureCollection=S,X.multiLineString=M,X.multiPoint=H,X.multiPolygon=K,X.geometryCollection=function J(N,F,z){return void 0===z&&(z={}),O({type:"GeometryCollection",geometries:N},F,z)},X.round=function ie(N,F){if(void 0===F&&(F=0),F&&!(F>=0))throw new Error("precision must be a positive number");var z=Math.pow(10,F||0);return Math.round(N*z)/z},X.radiansToLength=Q,X.lengthToRadians=ae,X.lengthToDegrees=function me(N,F){return oe(ae(N,F))},X.bearingToAzimuth=function we(N){var F=N%360;return F<0&&(F+=360),F},X.radiansToDegrees=oe,X.degreesToRadians=function fe(N){return N%360*Math.PI/180},X.convertLength=function pe(N,F,z){if(void 0===F&&(F="kilometers"),void 0===z&&(z="kilometers"),!(N>=0))throw new Error("length must be a positive number");return Q(ae(N,F),z)},X.convertArea=function Ce(N,F,z){if(void 0===F&&(F="meters"),void 0===z&&(z="kilometers"),!(N>=0))throw new Error("area must be a positive number");var ee=X.areaFactors[F];if(!ee)throw new Error("invalid original units");var W=X.areaFactors[z];if(!W)throw new Error("invalid final units");return N/ee*W},X.isNumber=qe,X.isObject=function He(N){return!!N&&N.constructor===Object},X.validateBBox=function ze(N){if(!N)throw new Error("bbox is required");if(!Array.isArray(N))throw new Error("bbox must be an Array");if(4!==N.length&&6!==N.length)throw new Error("bbox must be an Array of 4 or 6 numbers");N.forEach(function(F){if(!qe(F))throw new Error("bbox must only contain numbers")})},X.validateId=function P(N){if(!N)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof N))throw new Error("id must be a number or a string")}},8418:(Ee,X,O)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});var L=O(8275);X.getCoord=function $(H){if(!H)throw new Error("coord is required");if(!Array.isArray(H)){if("Feature"===H.type&&null!==H.geometry&&"Point"===H.geometry.type)return H.geometry.coordinates;if("Point"===H.type)return H.coordinates}if(Array.isArray(H)&&H.length>=2&&!Array.isArray(H[0])&&!Array.isArray(H[1]))return H;throw new Error("coord must be GeoJSON Point or an Array of numbers")},X.getCoords=function v(H){if(Array.isArray(H))return H;if("Feature"===H.type){if(null!==H.geometry)return H.geometry.coordinates}else if(H.coordinates)return H.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},X.containsNumber=function G(H){if(H.length>1&&L.isNumber(H[0])&&L.isNumber(H[1]))return!0;if(Array.isArray(H[0])&&H[0].length)return G(H[0]);throw new Error("coordinates must only contain numbers")},X.geojsonType=function q(H,K,J){if(!K||!J)throw new Error("type and name required");if(!H||H.type!==K)throw new Error("Invalid input to "+J+": must be a "+K+", given "+H.type)},X.featureOf=function k(H,K,J){if(!H)throw new Error("No feature passed");if(!J)throw new Error(".featureOf() requires a name");if(!H||"Feature"!==H.type||!H.geometry)throw new Error("Invalid input to "+J+", Feature with geometry required");if(!H.geometry||H.geometry.type!==K)throw new Error("Invalid input to "+J+": must be a "+K+", given "+H.geometry.type)},X.collectionOf=function I(H,K,J){if(!H)throw new Error("No featureCollection passed");if(!J)throw new Error(".collectionOf() requires a name");if(!H||"FeatureCollection"!==H.type)throw new Error("Invalid input to "+J+", FeatureCollection required");for(var ie=0,Q=H.features;ie<Q.length;ie++){var ae=Q[ie];if(!ae||"Feature"!==ae.type||!ae.geometry)throw new Error("Invalid input to "+J+", Feature with geometry required");if(!ae.geometry||ae.geometry.type!==K)throw new Error("Invalid input to "+J+": must be a "+K+", given "+ae.geometry.type)}},X.getGeom=function S(H){return"Feature"===H.type?H.geometry:H},X.getType=function M(H,K){return"FeatureCollection"===H.type?"FeatureCollection":"GeometryCollection"===H.type?"GeometryCollection":"Feature"===H.type&&null!==H.geometry?H.geometry.type:H.type}},3014:(Ee,X,O)=>{Ee.exports=O(7114)},7729:(Ee,X,O)=>{"use strict";var L=O(4701),$=O(858),v=O(5738),G=O(1625),q=O(5215),k=O(2099),I=O(6100),S=O(5593),M=O(3324),H=O(1413);Ee.exports=function(J){return new Promise(function(Q,ae){var fe,me=J.data,we=J.headers,oe=J.responseType;function pe(){J.cancelToken&&J.cancelToken.unsubscribe(fe),J.signal&&J.signal.removeEventListener("abort",fe)}L.isFormData(me)&&delete we["Content-Type"];var Ce=new XMLHttpRequest;if(J.auth){var qe=J.auth.username||"",He=J.auth.password?unescape(encodeURIComponent(J.auth.password)):"";we.Authorization="Basic "+btoa(qe+":"+He)}var ze=q(J.baseURL,J.url);function P(){if(Ce){var F="getAllResponseHeaders"in Ce?k(Ce.getAllResponseHeaders()):null;$(function(ve){Q(ve),pe()},function(ve){ae(ve),pe()},{data:oe&&"text"!==oe&&"json"!==oe?Ce.response:Ce.responseText,status:Ce.status,statusText:Ce.statusText,headers:F,config:J,request:Ce}),Ce=null}}if(Ce.open(J.method.toUpperCase(),G(ze,J.params,J.paramsSerializer),!0),Ce.timeout=J.timeout,"onloadend"in Ce?Ce.onloadend=P:Ce.onreadystatechange=function(){!Ce||4!==Ce.readyState||0===Ce.status&&(!Ce.responseURL||0!==Ce.responseURL.indexOf("file:"))||setTimeout(P)},Ce.onabort=function(){!Ce||(ae(S("Request aborted",J,"ECONNABORTED",Ce)),Ce=null)},Ce.onerror=function(){ae(S("Network Error",J,null,Ce)),Ce=null},Ce.ontimeout=function(){var z=J.timeout?"timeout of "+J.timeout+"ms exceeded":"timeout exceeded";J.timeoutErrorMessage&&(z=J.timeoutErrorMessage),ae(S(z,J,(J.transitional||M.transitional).clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",Ce)),Ce=null},L.isStandardBrowserEnv()){var N=(J.withCredentials||I(ze))&&J.xsrfCookieName?v.read(J.xsrfCookieName):void 0;N&&(we[J.xsrfHeaderName]=N)}"setRequestHeader"in Ce&&L.forEach(we,function(z,ee){typeof me>"u"&&"content-type"===ee.toLowerCase()?delete we[ee]:Ce.setRequestHeader(ee,z)}),L.isUndefined(J.withCredentials)||(Ce.withCredentials=!!J.withCredentials),oe&&"json"!==oe&&(Ce.responseType=J.responseType),"function"==typeof J.onDownloadProgress&&Ce.addEventListener("progress",J.onDownloadProgress),"function"==typeof J.onUploadProgress&&Ce.upload&&Ce.upload.addEventListener("progress",J.onUploadProgress),(J.cancelToken||J.signal)&&(fe=function(F){!Ce||(ae(!F||F&&F.type?new H("canceled"):F),Ce.abort(),Ce=null)},J.cancelToken&&J.cancelToken.subscribe(fe),J.signal&&(J.signal.aborted?fe():J.signal.addEventListener("abort",fe))),me||(me=null),Ce.send(me)})}},7114:(Ee,X,O)=>{"use strict";var L=O(4701),$=O(2414),v=O(6490),G=O(2971),I=function k(S){var M=new v(S),H=$(v.prototype.request,M);return L.extend(H,v.prototype,M),L.extend(H,M),H.create=function(J){return k(G(S,J))},H}(O(3324));I.Axios=v,I.Cancel=O(1413),I.CancelToken=O(3056),I.isCancel=O(8827),I.VERSION=O(1773).version,I.all=function(M){return Promise.all(M)},I.spread=O(9211),I.isAxiosError=O(4603),Ee.exports=I,Ee.exports.default=I},1413:Ee=>{"use strict";function X(O){this.message=O}X.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},X.prototype.__CANCEL__=!0,Ee.exports=X},3056:(Ee,X,O)=>{"use strict";var L=O(1413);function $(v){if("function"!=typeof v)throw new TypeError("executor must be a function.");var G;this.promise=new Promise(function(I){G=I});var q=this;this.promise.then(function(k){if(q._listeners){var I,S=q._listeners.length;for(I=0;I<S;I++)q._listeners[I](k);q._listeners=null}}),this.promise.then=function(k){var I,S=new Promise(function(M){q.subscribe(M),I=M}).then(k);return S.cancel=function(){q.unsubscribe(I)},S},v(function(I){q.reason||(q.reason=new L(I),G(q.reason))})}$.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},$.prototype.subscribe=function(G){this.reason?G(this.reason):this._listeners?this._listeners.push(G):this._listeners=[G]},$.prototype.unsubscribe=function(G){if(this._listeners){var q=this._listeners.indexOf(G);-1!==q&&this._listeners.splice(q,1)}},$.source=function(){var G;return{token:new $(function(I){G=I}),cancel:G}},Ee.exports=$},8827:Ee=>{"use strict";Ee.exports=function(O){return!(!O||!O.__CANCEL__)}},6490:(Ee,X,O)=>{"use strict";var L=O(4701),$=O(1625),v=O(607),G=O(957),q=O(2971),k=O(4828),I=k.validators;function S(M){this.defaults=M,this.interceptors={request:new v,response:new v}}S.prototype.request=function(H,K){"string"==typeof H?(K=K||{}).url=H:K=H||{},(K=q(this.defaults,K)).method=K.method?K.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var J=K.transitional;void 0!==J&&k.assertOptions(J,{silentJSONParsing:I.transitional(I.boolean),forcedJSONParsing:I.transitional(I.boolean),clarifyTimeoutError:I.transitional(I.boolean)},!1);var ie=[],Q=!0;this.interceptors.request.forEach(function(qe){"function"==typeof qe.runWhen&&!1===qe.runWhen(K)||(Q=Q&&qe.synchronous,ie.unshift(qe.fulfilled,qe.rejected))});var me,ae=[];if(this.interceptors.response.forEach(function(qe){ae.push(qe.fulfilled,qe.rejected)}),!Q){var we=[G,void 0];for(Array.prototype.unshift.apply(we,ie),we=we.concat(ae),me=Promise.resolve(K);we.length;)me=me.then(we.shift(),we.shift());return me}for(var oe=K;ie.length;){var fe=ie.shift(),pe=ie.shift();try{oe=fe(oe)}catch(Ce){pe(Ce);break}}try{me=G(oe)}catch(Ce){return Promise.reject(Ce)}for(;ae.length;)me=me.then(ae.shift(),ae.shift());return me},S.prototype.getUri=function(H){return H=q(this.defaults,H),$(H.url,H.params,H.paramsSerializer).replace(/^\?/,"")},L.forEach(["delete","get","head","options"],function(H){S.prototype[H]=function(K,J){return this.request(q(J||{},{method:H,url:K,data:(J||{}).data}))}}),L.forEach(["post","put","patch"],function(H){S.prototype[H]=function(K,J,ie){return this.request(q(ie||{},{method:H,url:K,data:J}))}}),Ee.exports=S},607:(Ee,X,O)=>{"use strict";var L=O(4701);function $(){this.handlers=[]}$.prototype.use=function(G,q,k){return this.handlers.push({fulfilled:G,rejected:q,synchronous:!!k&&k.synchronous,runWhen:k?k.runWhen:null}),this.handlers.length-1},$.prototype.eject=function(G){this.handlers[G]&&(this.handlers[G]=null)},$.prototype.forEach=function(G){L.forEach(this.handlers,function(k){null!==k&&G(k)})},Ee.exports=$},5215:(Ee,X,O)=>{"use strict";var L=O(8692),$=O(4554);Ee.exports=function(G,q){return G&&!L(q)?$(G,q):q}},5593:(Ee,X,O)=>{"use strict";var L=O(5124);Ee.exports=function(v,G,q,k,I){var S=new Error(v);return L(S,G,q,k,I)}},957:(Ee,X,O)=>{"use strict";var L=O(4701),$=O(5134),v=O(8827),G=O(3324),q=O(1413);function k(I){if(I.cancelToken&&I.cancelToken.throwIfRequested(),I.signal&&I.signal.aborted)throw new q("canceled")}Ee.exports=function(S){return k(S),S.headers=S.headers||{},S.data=$.call(S,S.data,S.headers,S.transformRequest),S.headers=L.merge(S.headers.common||{},S.headers[S.method]||{},S.headers),L.forEach(["delete","get","head","post","put","patch","common"],function(K){delete S.headers[K]}),(S.adapter||G.adapter)(S).then(function(K){return k(S),K.data=$.call(S,K.data,K.headers,S.transformResponse),K},function(K){return v(K)||(k(S),K&&K.response&&(K.response.data=$.call(S,K.response.data,K.response.headers,S.transformResponse))),Promise.reject(K)})}},5124:Ee=>{"use strict";Ee.exports=function(O,L,$,v,G){return O.config=L,$&&(O.code=$),O.request=v,O.response=G,O.isAxiosError=!0,O.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},O}},2971:(Ee,X,O)=>{"use strict";var L=O(4701);Ee.exports=function(v,G){G=G||{};var q={};function k(J,ie){return L.isPlainObject(J)&&L.isPlainObject(ie)?L.merge(J,ie):L.isPlainObject(ie)?L.merge({},ie):L.isArray(ie)?ie.slice():ie}function I(J){return L.isUndefined(G[J])?L.isUndefined(v[J])?void 0:k(void 0,v[J]):k(v[J],G[J])}function S(J){if(!L.isUndefined(G[J]))return k(void 0,G[J])}function M(J){return L.isUndefined(G[J])?L.isUndefined(v[J])?void 0:k(void 0,v[J]):k(void 0,G[J])}function H(J){return J in G?k(v[J],G[J]):J in v?k(void 0,v[J]):void 0}var K={url:S,method:S,data:S,baseURL:M,transformRequest:M,transformResponse:M,paramsSerializer:M,timeout:M,timeoutMessage:M,withCredentials:M,adapter:M,responseType:M,xsrfCookieName:M,xsrfHeaderName:M,onUploadProgress:M,onDownloadProgress:M,decompress:M,maxContentLength:M,maxBodyLength:M,transport:M,httpAgent:M,httpsAgent:M,cancelToken:M,socketPath:M,responseEncoding:M,validateStatus:H};return L.forEach(Object.keys(v).concat(Object.keys(G)),function(ie){var Q=K[ie]||I,ae=Q(ie);L.isUndefined(ae)&&Q!==H||(q[ie]=ae)}),q}},858:(Ee,X,O)=>{"use strict";var L=O(5593);Ee.exports=function(v,G,q){var k=q.config.validateStatus;q.status&&k&&!k(q.status)?G(L("Request failed with status code "+q.status,q.config,null,q.request,q)):v(q)}},5134:(Ee,X,O)=>{"use strict";var L=O(4701),$=O(3324);Ee.exports=function(G,q,k){var I=this||$;return L.forEach(k,function(M){G=M.call(I,G,q)}),G}},3324:(Ee,X,O)=>{"use strict";var L=O(4701),$=O(5620),v=O(5124),G={"Content-Type":"application/x-www-form-urlencoded"};function q(M,H){!L.isUndefined(M)&&L.isUndefined(M["Content-Type"])&&(M["Content-Type"]=H)}var S={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function k(){var M;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&"[object process]"===Object.prototype.toString.call(process))&&(M=O(7729)),M}(),transformRequest:[function(H,K){return $(K,"Accept"),$(K,"Content-Type"),L.isFormData(H)||L.isArrayBuffer(H)||L.isBuffer(H)||L.isStream(H)||L.isFile(H)||L.isBlob(H)?H:L.isArrayBufferView(H)?H.buffer:L.isURLSearchParams(H)?(q(K,"application/x-www-form-urlencoded;charset=utf-8"),H.toString()):L.isObject(H)||K&&"application/json"===K["Content-Type"]?(q(K,"application/json"),function I(M,H,K){if(L.isString(M))try{return(H||JSON.parse)(M),L.trim(M)}catch(J){if("SyntaxError"!==J.name)throw J}return(K||JSON.stringify)(M)}(H)):H}],transformResponse:[function(H){var K=this.transitional||S.transitional,Q=!(K&&K.silentJSONParsing)&&"json"===this.responseType;if(Q||K&&K.forcedJSONParsing&&L.isString(H)&&H.length)try{return JSON.parse(H)}catch(ae){if(Q)throw"SyntaxError"===ae.name?v(ae,this,"E_JSON_PARSE"):ae}return H}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(H){return H>=200&&H<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};L.forEach(["delete","get","head"],function(H){S.headers[H]={}}),L.forEach(["post","put","patch"],function(H){S.headers[H]=L.merge(G)}),Ee.exports=S},1773:Ee=>{Ee.exports={version:"0.26.0"}},2414:Ee=>{"use strict";Ee.exports=function(O,L){return function(){for(var v=new Array(arguments.length),G=0;G<v.length;G++)v[G]=arguments[G];return O.apply(L,v)}}},1625:(Ee,X,O)=>{"use strict";var L=O(4701);function $(v){return encodeURIComponent(v).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}Ee.exports=function(G,q,k){if(!q)return G;var I;if(k)I=k(q);else if(L.isURLSearchParams(q))I=q.toString();else{var S=[];L.forEach(q,function(K,J){null===K||typeof K>"u"||(L.isArray(K)?J+="[]":K=[K],L.forEach(K,function(Q){L.isDate(Q)?Q=Q.toISOString():L.isObject(Q)&&(Q=JSON.stringify(Q)),S.push($(J)+"="+$(Q))}))}),I=S.join("&")}if(I){var M=G.indexOf("#");-1!==M&&(G=G.slice(0,M)),G+=(-1===G.indexOf("?")?"?":"&")+I}return G}},4554:Ee=>{"use strict";Ee.exports=function(O,L){return L?O.replace(/\/+$/,"")+"/"+L.replace(/^\/+/,""):O}},5738:(Ee,X,O)=>{"use strict";var L=O(4701);Ee.exports=L.isStandardBrowserEnv()?{write:function(G,q,k,I,S,M){var H=[];H.push(G+"="+encodeURIComponent(q)),L.isNumber(k)&&H.push("expires="+new Date(k).toGMTString()),L.isString(I)&&H.push("path="+I),L.isString(S)&&H.push("domain="+S),!0===M&&H.push("secure"),document.cookie=H.join("; ")},read:function(G){var q=document.cookie.match(new RegExp("(^|;\\s*)("+G+")=([^;]*)"));return q?decodeURIComponent(q[3]):null},remove:function(G){this.write(G,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},8692:Ee=>{"use strict";Ee.exports=function(O){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(O)}},4603:(Ee,X,O)=>{"use strict";var L=O(4701);Ee.exports=function(v){return L.isObject(v)&&!0===v.isAxiosError}},6100:(Ee,X,O)=>{"use strict";var L=O(4701);Ee.exports=L.isStandardBrowserEnv()?function(){var q,v=/(msie|trident)/i.test(navigator.userAgent),G=document.createElement("a");function k(I){var S=I;return v&&(G.setAttribute("href",S),S=G.href),G.setAttribute("href",S),{href:G.href,protocol:G.protocol?G.protocol.replace(/:$/,""):"",host:G.host,search:G.search?G.search.replace(/^\?/,""):"",hash:G.hash?G.hash.replace(/^#/,""):"",hostname:G.hostname,port:G.port,pathname:"/"===G.pathname.charAt(0)?G.pathname:"/"+G.pathname}}return q=k(window.location.href),function(S){var M=L.isString(S)?k(S):S;return M.protocol===q.protocol&&M.host===q.host}}():function(){return!0}},5620:(Ee,X,O)=>{"use strict";var L=O(4701);Ee.exports=function(v,G){L.forEach(v,function(k,I){I!==G&&I.toUpperCase()===G.toUpperCase()&&(v[G]=k,delete v[I])})}},2099:(Ee,X,O)=>{"use strict";var L=O(4701),$=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Ee.exports=function(G){var k,I,S,q={};return G&&L.forEach(G.split("\n"),function(H){if(S=H.indexOf(":"),k=L.trim(H.substr(0,S)).toLowerCase(),I=L.trim(H.substr(S+1)),k){if(q[k]&&$.indexOf(k)>=0)return;q[k]="set-cookie"===k?(q[k]?q[k]:[]).concat([I]):q[k]?q[k]+", "+I:I}}),q}},9211:Ee=>{"use strict";Ee.exports=function(O){return function($){return O.apply(null,$)}}},4828:(Ee,X,O)=>{"use strict";var L=O(1773).version,$={};["object","boolean","number","function","string","symbol"].forEach(function(q,k){$[q]=function(S){return typeof S===q||"a"+(k<1?"n ":" ")+q}});var v={};$.transitional=function(k,I,S){function M(H,K){return"[Axios v"+L+"] Transitional option '"+H+"'"+K+(S?". "+S:"")}return function(H,K,J){if(!1===k)throw new Error(M(K," has been removed"+(I?" in "+I:"")));return I&&!v[K]&&(v[K]=!0,console.warn(M(K," has been deprecated since v"+I+" and will be removed in the near future"))),!k||k(H,K,J)}},Ee.exports={assertOptions:function G(q,k,I){if("object"!=typeof q)throw new TypeError("options must be an object");for(var S=Object.keys(q),M=S.length;M-- >0;){var H=S[M],K=k[H];if(K){var J=q[H],ie=void 0===J||K(J,H,q);if(!0!==ie)throw new TypeError("option "+H+" must be "+ie)}else if(!0!==I)throw Error("Unknown option "+H)}},validators:$}},4701:(Ee,X,O)=>{"use strict";var L=O(2414),$=Object.prototype.toString;function v(P){return Array.isArray(P)}function G(P){return typeof P>"u"}function k(P){return"[object ArrayBuffer]"===$.call(P)}function K(P){return null!==P&&"object"==typeof P}function J(P){if("[object Object]"!==$.call(P))return!1;var N=Object.getPrototypeOf(P);return null===N||N===Object.prototype}function me(P){return"[object Function]"===$.call(P)}function Ce(P,N){if(!(null===P||typeof P>"u"))if("object"!=typeof P&&(P=[P]),v(P))for(var F=0,z=P.length;F<z;F++)N.call(null,P[F],F,P);else for(var ee in P)Object.prototype.hasOwnProperty.call(P,ee)&&N.call(null,P[ee],ee,P)}Ee.exports={isArray:v,isArrayBuffer:k,isBuffer:function q(P){return null!==P&&!G(P)&&null!==P.constructor&&!G(P.constructor)&&"function"==typeof P.constructor.isBuffer&&P.constructor.isBuffer(P)},isFormData:function I(P){return"[object FormData]"===$.call(P)},isArrayBufferView:function S(P){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(P):P&&P.buffer&&k(P.buffer)},isString:function M(P){return"string"==typeof P},isNumber:function H(P){return"number"==typeof P},isObject:K,isPlainObject:J,isUndefined:G,isDate:function ie(P){return"[object Date]"===$.call(P)},isFile:function Q(P){return"[object File]"===$.call(P)},isBlob:function ae(P){return"[object Blob]"===$.call(P)},isFunction:me,isStream:function we(P){return K(P)&&me(P.pipe)},isURLSearchParams:function oe(P){return"[object URLSearchParams]"===$.call(P)},isStandardBrowserEnv:function pe(){return(!(typeof navigator<"u")||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&typeof window<"u"&&typeof document<"u"},forEach:Ce,merge:function qe(){var P={};function N(ee,W){P[W]=J(P[W])&&J(ee)?qe(P[W],ee):J(ee)?qe({},ee):v(ee)?ee.slice():ee}for(var F=0,z=arguments.length;F<z;F++)Ce(arguments[F],N);return P},extend:function He(P,N,F){return Ce(N,function(ee,W){P[W]=F&&"function"==typeof ee?L(ee,F):ee}),P},trim:function fe(P){return P.trim?P.trim():P.replace(/^\s+|\s+$/g,"")},stripBOM:function ze(P){return 65279===P.charCodeAt(0)&&(P=P.slice(1)),P}}},5343:(Ee,X)=>{"use strict";X.byteLength=function I(ie){var Q=k(ie),me=Q[1];return 3*(Q[0]+me)/4-me},X.toByteArray=function M(ie){var Q,Ce,ae=k(ie),me=ae[0],we=ae[1],oe=new $(function S(ie,Q,ae){return 3*(Q+ae)/4-ae}(0,me,we)),fe=0,pe=we>0?me-4:me;for(Ce=0;Ce<pe;Ce+=4)Q=L[ie.charCodeAt(Ce)]<<18|L[ie.charCodeAt(Ce+1)]<<12|L[ie.charCodeAt(Ce+2)]<<6|L[ie.charCodeAt(Ce+3)],oe[fe++]=Q>>16&255,oe[fe++]=Q>>8&255,oe[fe++]=255&Q;return 2===we&&(Q=L[ie.charCodeAt(Ce)]<<2|L[ie.charCodeAt(Ce+1)]>>4,oe[fe++]=255&Q),1===we&&(Q=L[ie.charCodeAt(Ce)]<<10|L[ie.charCodeAt(Ce+1)]<<4|L[ie.charCodeAt(Ce+2)]>>2,oe[fe++]=Q>>8&255,oe[fe++]=255&Q),oe},X.fromByteArray=function J(ie){for(var Q,ae=ie.length,me=ae%3,we=[],fe=0,pe=ae-me;fe<pe;fe+=16383)we.push(K(ie,fe,fe+16383>pe?pe:fe+16383));return 1===me?we.push(O[(Q=ie[ae-1])>>2]+O[Q<<4&63]+"=="):2===me&&we.push(O[(Q=(ie[ae-2]<<8)+ie[ae-1])>>10]+O[Q>>4&63]+O[Q<<2&63]+"="),we.join("")};for(var O=[],L=[],$=typeof Uint8Array<"u"?Uint8Array:Array,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",G=0,q=v.length;G<q;++G)O[G]=v[G],L[v.charCodeAt(G)]=G;function k(ie){var Q=ie.length;if(Q%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ae=ie.indexOf("=");return-1===ae&&(ae=Q),[ae,ae===Q?0:4-ae%4]}function H(ie){return O[ie>>18&63]+O[ie>>12&63]+O[ie>>6&63]+O[63&ie]}function K(ie,Q,ae){for(var we=[],oe=Q;oe<ae;oe+=3)we.push(H((ie[oe]<<16&16711680)+(ie[oe+1]<<8&65280)+(255&ie[oe+2])));return we.join("")}L["-".charCodeAt(0)]=62,L["_".charCodeAt(0)]=63},7230:function(Ee){Ee.exports=function(X){var O={};function L($){if(O[$])return O[$].exports;var v=O[$]={i:$,l:!1,exports:{}};return X[$].call(v.exports,v,v.exports,L),v.l=!0,v.exports}return L.m=X,L.c=O,L.d=function($,v,G){L.o($,v)||Object.defineProperty($,v,{enumerable:!0,get:G})},L.r=function($){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty($,Symbol.toStringTag,{value:"Module"}),Object.defineProperty($,"__esModule",{value:!0})},L.t=function($,v){if(1&v&&($=L($)),8&v||4&v&&"object"==typeof $&&$&&$.__esModule)return $;var G=Object.create(null);if(L.r(G),Object.defineProperty(G,"default",{enumerable:!0,value:$}),2&v&&"string"!=typeof $)for(var q in $)L.d(G,q,function(k){return $[k]}.bind(null,q));return G},L.n=function($){var v=$&&$.__esModule?function(){return $.default}:function(){return $};return L.d(v,"a",v),v},L.o=function($,v){return Object.prototype.hasOwnProperty.call($,v)},L.p="",L(L.s=90)}({17:function(X,O,L){"use strict";O.__esModule=!0,O.default=void 0;var $=L(18),v=function(){function G(){}return G.getFirstMatch=function(q,k){var I=k.match(q);return I&&I.length>0&&I[1]||""},G.getSecondMatch=function(q,k){var I=k.match(q);return I&&I.length>1&&I[2]||""},G.matchAndReturnConst=function(q,k,I){if(q.test(k))return I},G.getWindowsVersionName=function(q){switch(q){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},G.getMacOSVersionName=function(q){var k=q.split(".").splice(0,2).map(function(I){return parseInt(I,10)||0});if(k.push(0),10===k[0])switch(k[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},G.getAndroidVersionName=function(q){var k=q.split(".").splice(0,2).map(function(I){return parseInt(I,10)||0});if(k.push(0),!(1===k[0]&&k[1]<5))return 1===k[0]&&k[1]<6?"Cupcake":1===k[0]&&k[1]>=6?"Donut":2===k[0]&&k[1]<2?"Eclair":2===k[0]&&2===k[1]?"Froyo":2===k[0]&&k[1]>2?"Gingerbread":3===k[0]?"Honeycomb":4===k[0]&&k[1]<1?"Ice Cream Sandwich":4===k[0]&&k[1]<4?"Jelly Bean":4===k[0]&&k[1]>=4?"KitKat":5===k[0]?"Lollipop":6===k[0]?"Marshmallow":7===k[0]?"Nougat":8===k[0]?"Oreo":9===k[0]?"Pie":void 0},G.getVersionPrecision=function(q){return q.split(".").length},G.compareVersions=function(q,k,I){void 0===I&&(I=!1);var S=G.getVersionPrecision(q),M=G.getVersionPrecision(k),H=Math.max(S,M),K=0,J=G.map([q,k],function(ie){var Q=H-G.getVersionPrecision(ie),ae=ie+new Array(Q+1).join(".0");return G.map(ae.split("."),function(me){return new Array(20-me.length).join("0")+me}).reverse()});for(I&&(K=H-Math.min(S,M)),H-=1;H>=K;){if(J[0][H]>J[1][H])return 1;if(J[0][H]===J[1][H]){if(H===K)return 0;H-=1}else if(J[0][H]<J[1][H])return-1}},G.map=function(q,k){var I,S=[];if(Array.prototype.map)return Array.prototype.map.call(q,k);for(I=0;I<q.length;I+=1)S.push(k(q[I]));return S},G.find=function(q,k){var I,S;if(Array.prototype.find)return Array.prototype.find.call(q,k);for(I=0,S=q.length;I<S;I+=1){var M=q[I];if(k(M,I))return M}},G.assign=function(q){for(var k,I,S=q,M=arguments.length,H=new Array(M>1?M-1:0),K=1;K<M;K++)H[K-1]=arguments[K];if(Object.assign)return Object.assign.apply(Object,[q].concat(H));var J=function(){var ie=H[k];"object"==typeof ie&&null!==ie&&Object.keys(ie).forEach(function(Q){S[Q]=ie[Q]})};for(k=0,I=H.length;k<I;k+=1)J();return q},G.getBrowserAlias=function(q){return $.BROWSER_ALIASES_MAP[q]},G.getBrowserTypeByAlias=function(q){return $.BROWSER_MAP[q]||""},G}();O.default=v,X.exports=O.default},18:function(X,O,L){"use strict";O.__esModule=!0,O.ENGINE_MAP=O.OS_MAP=O.PLATFORMS_MAP=O.BROWSER_MAP=O.BROWSER_ALIASES_MAP=void 0,O.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},O.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},O.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},O.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},O.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(X,O,L){"use strict";O.__esModule=!0,O.default=void 0;var $,v=($=L(91))&&$.__esModule?$:{default:$},G=L(18);function q(I,S){for(var M=0;M<S.length;M++){var H=S[M];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(I,H.key,H)}}var k=function(){function I(){}var S,H;return I.getParser=function(K,J){if(void 0===J&&(J=!1),"string"!=typeof K)throw new Error("UserAgent should be a string");return new v.default(K,J)},I.parse=function(K){return new v.default(K).getResult()},S=I,H=[{key:"BROWSER_MAP",get:function(){return G.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return G.ENGINE_MAP}},{key:"OS_MAP",get:function(){return G.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return G.PLATFORMS_MAP}}],null&&q(S.prototype,null),H&&q(S,H),I}();O.default=k,X.exports=O.default},91:function(X,O,L){"use strict";O.__esModule=!0,O.default=void 0;var $=I(L(92)),v=I(L(93)),G=I(L(94)),q=I(L(95)),k=I(L(17));function I(M){return M&&M.__esModule?M:{default:M}}var S=function(){function M(K,J){if(void 0===J&&(J=!1),null==K||""===K)throw new Error("UserAgent parameter can't be empty");this._ua=K,this.parsedResult={},!0!==J&&this.parse()}var H=M.prototype;return H.getUA=function(){return this._ua},H.test=function(K){return K.test(this._ua)},H.parseBrowser=function(){var K=this;this.parsedResult.browser={};var J=k.default.find($.default,function(ie){if("function"==typeof ie.test)return ie.test(K);if(ie.test instanceof Array)return ie.test.some(function(Q){return K.test(Q)});throw new Error("Browser's test function is not valid")});return J&&(this.parsedResult.browser=J.describe(this.getUA())),this.parsedResult.browser},H.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},H.getBrowserName=function(K){return K?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},H.getBrowserVersion=function(){return this.getBrowser().version},H.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},H.parseOS=function(){var K=this;this.parsedResult.os={};var J=k.default.find(v.default,function(ie){if("function"==typeof ie.test)return ie.test(K);if(ie.test instanceof Array)return ie.test.some(function(Q){return K.test(Q)});throw new Error("Browser's test function is not valid")});return J&&(this.parsedResult.os=J.describe(this.getUA())),this.parsedResult.os},H.getOSName=function(K){var J=this.getOS().name;return K?String(J).toLowerCase()||"":J||""},H.getOSVersion=function(){return this.getOS().version},H.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},H.getPlatformType=function(K){void 0===K&&(K=!1);var J=this.getPlatform().type;return K?String(J).toLowerCase()||"":J||""},H.parsePlatform=function(){var K=this;this.parsedResult.platform={};var J=k.default.find(G.default,function(ie){if("function"==typeof ie.test)return ie.test(K);if(ie.test instanceof Array)return ie.test.some(function(Q){return K.test(Q)});throw new Error("Browser's test function is not valid")});return J&&(this.parsedResult.platform=J.describe(this.getUA())),this.parsedResult.platform},H.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},H.getEngineName=function(K){return K?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},H.parseEngine=function(){var K=this;this.parsedResult.engine={};var J=k.default.find(q.default,function(ie){if("function"==typeof ie.test)return ie.test(K);if(ie.test instanceof Array)return ie.test.some(function(Q){return K.test(Q)});throw new Error("Browser's test function is not valid")});return J&&(this.parsedResult.engine=J.describe(this.getUA())),this.parsedResult.engine},H.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},H.getResult=function(){return k.default.assign({},this.parsedResult)},H.satisfies=function(K){var J=this,ie={},Q=0,ae={},me=0;if(Object.keys(K).forEach(function(ze){var P=K[ze];"string"==typeof P?(ae[ze]=P,me+=1):"object"==typeof P&&(ie[ze]=P,Q+=1)}),Q>0){var we=Object.keys(ie),oe=k.default.find(we,function(ze){return J.isOS(ze)});if(oe){var fe=this.satisfies(ie[oe]);if(void 0!==fe)return fe}var pe=k.default.find(we,function(ze){return J.isPlatform(ze)});if(pe){var Ce=this.satisfies(ie[pe]);if(void 0!==Ce)return Ce}}if(me>0){var qe=Object.keys(ae),He=k.default.find(qe,function(ze){return J.isBrowser(ze,!0)});if(void 0!==He)return this.compareVersion(ae[He])}},H.isBrowser=function(K,J){void 0===J&&(J=!1);var ie=this.getBrowserName().toLowerCase(),Q=K.toLowerCase(),ae=k.default.getBrowserTypeByAlias(Q);return J&&ae&&(Q=ae.toLowerCase()),Q===ie},H.compareVersion=function(K){var J=[0],ie=K,Q=!1,ae=this.getBrowserVersion();if("string"==typeof ae)return">"===K[0]||"<"===K[0]?(ie=K.substr(1),"="===K[1]?(Q=!0,ie=K.substr(2)):J=[],J.push(">"===K[0]?1:-1)):"="===K[0]?ie=K.substr(1):"~"===K[0]&&(Q=!0,ie=K.substr(1)),J.indexOf(k.default.compareVersions(ae,ie,Q))>-1},H.isOS=function(K){return this.getOSName(!0)===String(K).toLowerCase()},H.isPlatform=function(K){return this.getPlatformType(!0)===String(K).toLowerCase()},H.isEngine=function(K){return this.getEngineName(!0)===String(K).toLowerCase()},H.is=function(K,J){return void 0===J&&(J=!1),this.isBrowser(K,J)||this.isOS(K)||this.isPlatform(K)},H.some=function(K){var J=this;return void 0===K&&(K=[]),K.some(function(ie){return J.is(ie)})},M}();O.default=S,X.exports=O.default},92:function(X,O,L){"use strict";O.__esModule=!0,O.default=void 0;var $,v=($=L(17))&&$.__esModule?$:{default:$},G=/version\/(\d+(\.?_?\d+)+)/i;O.default=[{test:[/googlebot/i],describe:function(k){var I={name:"Googlebot"},S=v.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,k)||v.default.getFirstMatch(G,k);return S&&(I.version=S),I}},{test:[/opera/i],describe:function(k){var I={name:"Opera"},S=v.default.getFirstMatch(G,k)||v.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/opr\/|opios/i],describe:function(k){var I={name:"Opera"},S=v.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,k)||v.default.getFirstMatch(G,k);return S&&(I.version=S),I}},{test:[/SamsungBrowser/i],describe:function(k){var I={name:"Samsung Internet for Android"},S=v.default.getFirstMatch(G,k)||v.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/Whale/i],describe:function(k){var I={name:"NAVER Whale Browser"},S=v.default.getFirstMatch(G,k)||v.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/MZBrowser/i],describe:function(k){var I={name:"MZ Browser"},S=v.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,k)||v.default.getFirstMatch(G,k);return S&&(I.version=S),I}},{test:[/focus/i],describe:function(k){var I={name:"Focus"},S=v.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,k)||v.default.getFirstMatch(G,k);return S&&(I.version=S),I}},{test:[/swing/i],describe:function(k){var I={name:"Swing"},S=v.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,k)||v.default.getFirstMatch(G,k);return S&&(I.version=S),I}},{test:[/coast/i],describe:function(k){var I={name:"Opera Coast"},S=v.default.getFirstMatch(G,k)||v.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(k){var I={name:"Opera Touch"},S=v.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,k)||v.default.getFirstMatch(G,k);return S&&(I.version=S),I}},{test:[/yabrowser/i],describe:function(k){var I={name:"Yandex Browser"},S=v.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,k)||v.default.getFirstMatch(G,k);return S&&(I.version=S),I}},{test:[/ucbrowser/i],describe:function(k){var I={name:"UC Browser"},S=v.default.getFirstMatch(G,k)||v.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/Maxthon|mxios/i],describe:function(k){var I={name:"Maxthon"},S=v.default.getFirstMatch(G,k)||v.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/epiphany/i],describe:function(k){var I={name:"Epiphany"},S=v.default.getFirstMatch(G,k)||v.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/puffin/i],describe:function(k){var I={name:"Puffin"},S=v.default.getFirstMatch(G,k)||v.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/sleipnir/i],describe:function(k){var I={name:"Sleipnir"},S=v.default.getFirstMatch(G,k)||v.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/k-meleon/i],describe:function(k){var I={name:"K-Meleon"},S=v.default.getFirstMatch(G,k)||v.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/micromessenger/i],describe:function(k){var I={name:"WeChat"},S=v.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,k)||v.default.getFirstMatch(G,k);return S&&(I.version=S),I}},{test:[/qqbrowser/i],describe:function(k){var I={name:/qqbrowserlite/i.test(k)?"QQ Browser Lite":"QQ Browser"},S=v.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,k)||v.default.getFirstMatch(G,k);return S&&(I.version=S),I}},{test:[/msie|trident/i],describe:function(k){var I={name:"Internet Explorer"},S=v.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/\sedg\//i],describe:function(k){var I={name:"Microsoft Edge"},S=v.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/edg([ea]|ios)/i],describe:function(k){var I={name:"Microsoft Edge"},S=v.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/vivaldi/i],describe:function(k){var I={name:"Vivaldi"},S=v.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/seamonkey/i],describe:function(k){var I={name:"SeaMonkey"},S=v.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/sailfish/i],describe:function(k){var I={name:"Sailfish"},S=v.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,k);return S&&(I.version=S),I}},{test:[/silk/i],describe:function(k){var I={name:"Amazon Silk"},S=v.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/phantom/i],describe:function(k){var I={name:"PhantomJS"},S=v.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/slimerjs/i],describe:function(k){var I={name:"SlimerJS"},S=v.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(k){var I={name:"BlackBerry"},S=v.default.getFirstMatch(G,k)||v.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/(web|hpw)[o0]s/i],describe:function(k){var I={name:"WebOS Browser"},S=v.default.getFirstMatch(G,k)||v.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/bada/i],describe:function(k){var I={name:"Bada"},S=v.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/tizen/i],describe:function(k){var I={name:"Tizen"},S=v.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,k)||v.default.getFirstMatch(G,k);return S&&(I.version=S),I}},{test:[/qupzilla/i],describe:function(k){var I={name:"QupZilla"},S=v.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,k)||v.default.getFirstMatch(G,k);return S&&(I.version=S),I}},{test:[/firefox|iceweasel|fxios/i],describe:function(k){var I={name:"Firefox"},S=v.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/electron/i],describe:function(k){var I={name:"Electron"},S=v.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/MiuiBrowser/i],describe:function(k){var I={name:"Miui"},S=v.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/chromium/i],describe:function(k){var I={name:"Chromium"},S=v.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,k)||v.default.getFirstMatch(G,k);return S&&(I.version=S),I}},{test:[/chrome|crios|crmo/i],describe:function(k){var I={name:"Chrome"},S=v.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/GSA/i],describe:function(k){var I={name:"Google Search"},S=v.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:function(k){var I=!k.test(/like android/i),S=k.test(/android/i);return I&&S},describe:function(k){var I={name:"Android Browser"},S=v.default.getFirstMatch(G,k);return S&&(I.version=S),I}},{test:[/playstation 4/i],describe:function(k){var I={name:"PlayStation 4"},S=v.default.getFirstMatch(G,k);return S&&(I.version=S),I}},{test:[/safari|applewebkit/i],describe:function(k){var I={name:"Safari"},S=v.default.getFirstMatch(G,k);return S&&(I.version=S),I}},{test:[/.*/i],describe:function(k){var I=-1!==k.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:v.default.getFirstMatch(I,k),version:v.default.getSecondMatch(I,k)}}}],X.exports=O.default},93:function(X,O,L){"use strict";O.__esModule=!0,O.default=void 0;var $,v=($=L(17))&&$.__esModule?$:{default:$},G=L(18);O.default=[{test:[/Roku\/DVP/],describe:function(k){var I=v.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,k);return{name:G.OS_MAP.Roku,version:I}}},{test:[/windows phone/i],describe:function(k){var I=v.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,k);return{name:G.OS_MAP.WindowsPhone,version:I}}},{test:[/windows /i],describe:function(k){var I=v.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,k),S=v.default.getWindowsVersionName(I);return{name:G.OS_MAP.Windows,version:I,versionName:S}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(k){var I={name:G.OS_MAP.iOS},S=v.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,k);return S&&(I.version=S),I}},{test:[/macintosh/i],describe:function(k){var I=v.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,k).replace(/[_\s]/g,"."),S=v.default.getMacOSVersionName(I),M={name:G.OS_MAP.MacOS,version:I};return S&&(M.versionName=S),M}},{test:[/(ipod|iphone|ipad)/i],describe:function(k){var I=v.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,k).replace(/[_\s]/g,".");return{name:G.OS_MAP.iOS,version:I}}},{test:function(k){var I=!k.test(/like android/i),S=k.test(/android/i);return I&&S},describe:function(k){var I=v.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,k),S=v.default.getAndroidVersionName(I),M={name:G.OS_MAP.Android,version:I};return S&&(M.versionName=S),M}},{test:[/(web|hpw)[o0]s/i],describe:function(k){var I=v.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,k),S={name:G.OS_MAP.WebOS};return I&&I.length&&(S.version=I),S}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(k){var I=v.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,k)||v.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,k)||v.default.getFirstMatch(/\bbb(\d+)/i,k);return{name:G.OS_MAP.BlackBerry,version:I}}},{test:[/bada/i],describe:function(k){var I=v.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,k);return{name:G.OS_MAP.Bada,version:I}}},{test:[/tizen/i],describe:function(k){var I=v.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,k);return{name:G.OS_MAP.Tizen,version:I}}},{test:[/linux/i],describe:function(){return{name:G.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:G.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(k){var I=v.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,k);return{name:G.OS_MAP.PlayStation4,version:I}}}],X.exports=O.default},94:function(X,O,L){"use strict";O.__esModule=!0,O.default=void 0;var $,v=($=L(17))&&$.__esModule?$:{default:$},G=L(18);O.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(k){var I=v.default.getFirstMatch(/(can-l01)/i,k)&&"Nova",S={type:G.PLATFORMS_MAP.mobile,vendor:"Huawei"};return I&&(S.model=I),S}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:G.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:G.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:G.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:G.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:G.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:G.PLATFORMS_MAP.tablet}}},{test:function(k){var I=k.test(/ipod|iphone/i),S=k.test(/like (ipod|iphone)/i);return I&&!S},describe:function(k){var I=v.default.getFirstMatch(/(ipod|iphone)/i,k);return{type:G.PLATFORMS_MAP.mobile,vendor:"Apple",model:I}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:G.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:G.PLATFORMS_MAP.mobile}}},{test:function(k){return"blackberry"===k.getBrowserName(!0)},describe:function(){return{type:G.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(k){return"bada"===k.getBrowserName(!0)},describe:function(){return{type:G.PLATFORMS_MAP.mobile}}},{test:function(k){return"windows phone"===k.getBrowserName()},describe:function(){return{type:G.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(k){var I=Number(String(k.getOSVersion()).split(".")[0]);return"android"===k.getOSName(!0)&&I>=3},describe:function(){return{type:G.PLATFORMS_MAP.tablet}}},{test:function(k){return"android"===k.getOSName(!0)},describe:function(){return{type:G.PLATFORMS_MAP.mobile}}},{test:function(k){return"macos"===k.getOSName(!0)},describe:function(){return{type:G.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(k){return"windows"===k.getOSName(!0)},describe:function(){return{type:G.PLATFORMS_MAP.desktop}}},{test:function(k){return"linux"===k.getOSName(!0)},describe:function(){return{type:G.PLATFORMS_MAP.desktop}}},{test:function(k){return"playstation 4"===k.getOSName(!0)},describe:function(){return{type:G.PLATFORMS_MAP.tv}}},{test:function(k){return"roku"===k.getOSName(!0)},describe:function(){return{type:G.PLATFORMS_MAP.tv}}}],X.exports=O.default},95:function(X,O,L){"use strict";O.__esModule=!0,O.default=void 0;var $,v=($=L(17))&&$.__esModule?$:{default:$},G=L(18);O.default=[{test:function(k){return"microsoft edge"===k.getBrowserName(!0)},describe:function(k){if(/\sedg\//i.test(k))return{name:G.ENGINE_MAP.Blink};var I=v.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,k);return{name:G.ENGINE_MAP.EdgeHTML,version:I}}},{test:[/trident/i],describe:function(k){var I={name:G.ENGINE_MAP.Trident},S=v.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:function(k){return k.test(/presto/i)},describe:function(k){var I={name:G.ENGINE_MAP.Presto},S=v.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:function(k){var I=k.test(/gecko/i),S=k.test(/like gecko/i);return I&&!S},describe:function(k){var I={name:G.ENGINE_MAP.Gecko},S=v.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:G.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(k){var I={name:G.ENGINE_MAP.WebKit},S=v.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,k);return S&&(I.version=S),I}}],X.exports=O.default}})},3172:(Ee,X,O)=>{"use strict";var $=O(5343),v=O(8461),G=O(6425);function k(){return S.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function I(Le,le){if(k()<le)throw new RangeError("Invalid typed array length");return S.TYPED_ARRAY_SUPPORT?(Le=new Uint8Array(le)).__proto__=S.prototype:(null===Le&&(Le=new S(le)),Le.length=le),Le}function S(Le,le,ce){if(!(S.TYPED_ARRAY_SUPPORT||this instanceof S))return new S(Le,le,ce);if("number"==typeof Le){if("string"==typeof le)throw new Error("If encoding is specified then the first argument must be a string");return J(this,Le)}return M(this,Le,le,ce)}function M(Le,le,ce,Ke){if("number"==typeof le)throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&le instanceof ArrayBuffer?function ae(Le,le,ce,Ke){if(ce<0||le.byteLength<ce)throw new RangeError("'offset' is out of bounds");if(le.byteLength<ce+(Ke||0))throw new RangeError("'length' is out of bounds");return le=void 0===ce&&void 0===Ke?new Uint8Array(le):void 0===Ke?new Uint8Array(le,ce):new Uint8Array(le,ce,Ke),S.TYPED_ARRAY_SUPPORT?(Le=le).__proto__=S.prototype:Le=Q(Le,le),Le}(Le,le,ce,Ke):"string"==typeof le?function ie(Le,le,ce){if(("string"!=typeof ce||""===ce)&&(ce="utf8"),!S.isEncoding(ce))throw new TypeError('"encoding" must be a valid string encoding');var Ke=0|fe(le,ce),_t=(Le=I(Le,Ke)).write(le,ce);return _t!==Ke&&(Le=Le.slice(0,_t)),Le}(Le,le,ce):function me(Le,le){if(S.isBuffer(le)){var ce=0|we(le.length);return 0===(Le=I(Le,ce)).length||le.copy(Le,0,0,ce),Le}if(le){if(typeof ArrayBuffer<"u"&&le.buffer instanceof ArrayBuffer||"length"in le)return"number"!=typeof le.length||function ka(Le){return Le!=Le}(le.length)?I(Le,0):Q(Le,le);if("Buffer"===le.type&&G(le.data))return Q(Le,le.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(Le,le)}function H(Le){if("number"!=typeof Le)throw new TypeError('"size" argument must be a number');if(Le<0)throw new RangeError('"size" argument must not be negative')}function J(Le,le){if(H(le),Le=I(Le,le<0?0:0|we(le)),!S.TYPED_ARRAY_SUPPORT)for(var ce=0;ce<le;++ce)Le[ce]=0;return Le}function Q(Le,le){var ce=le.length<0?0:0|we(le.length);Le=I(Le,ce);for(var Ke=0;Ke<ce;Ke+=1)Le[Ke]=255&le[Ke];return Le}function we(Le){if(Le>=k())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+k().toString(16)+" bytes");return 0|Le}function fe(Le,le){if(S.isBuffer(Le))return Le.length;if(typeof ArrayBuffer<"u"&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(Le)||Le instanceof ArrayBuffer))return Le.byteLength;"string"!=typeof Le&&(Le=""+Le);var ce=Le.length;if(0===ce)return 0;for(var Ke=!1;;)switch(le){case"ascii":case"latin1":case"binary":return ce;case"utf8":case"utf-8":case void 0:return lr(Le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ce;case"hex":return ce>>>1;case"base64":return kt(Le).length;default:if(Ke)return lr(Le).length;le=(""+le).toLowerCase(),Ke=!0}}function pe(Le,le,ce){var Ke=!1;if((void 0===le||le<0)&&(le=0),le>this.length||((void 0===ce||ce>this.length)&&(ce=this.length),ce<=0)||(ce>>>=0)<=(le>>>=0))return"";for(Le||(Le="utf8");;)switch(Le){case"hex":return Rt(this,le,ce);case"utf8":case"utf-8":return ve(this,le,ce);case"ascii":return Ie(this,le,ce);case"latin1":case"binary":return At(this,le,ce);case"base64":return W(this,le,ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return rt(this,le,ce);default:if(Ke)throw new TypeError("Unknown encoding: "+Le);Le=(Le+"").toLowerCase(),Ke=!0}}function Ce(Le,le,ce){var Ke=Le[le];Le[le]=Le[ce],Le[ce]=Ke}function qe(Le,le,ce,Ke,_t){if(0===Le.length)return-1;if("string"==typeof ce?(Ke=ce,ce=0):ce>2147483647?ce=2147483647:ce<-2147483648&&(ce=-2147483648),ce=+ce,isNaN(ce)&&(ce=_t?0:Le.length-1),ce<0&&(ce=Le.length+ce),ce>=Le.length){if(_t)return-1;ce=Le.length-1}else if(ce<0){if(!_t)return-1;ce=0}if("string"==typeof le&&(le=S.from(le,Ke)),S.isBuffer(le))return 0===le.length?-1:He(Le,le,ce,Ke,_t);if("number"==typeof le)return le&=255,S.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?_t?Uint8Array.prototype.indexOf.call(Le,le,ce):Uint8Array.prototype.lastIndexOf.call(Le,le,ce):He(Le,[le],ce,Ke,_t);throw new TypeError("val must be string, number or Buffer")}function He(Le,le,ce,Ke,_t){var ei,Gt=1,Ht=Le.length,Ir=le.length;if(void 0!==Ke&&("ucs2"===(Ke=String(Ke).toLowerCase())||"ucs-2"===Ke||"utf16le"===Ke||"utf-16le"===Ke)){if(Le.length<2||le.length<2)return-1;Gt=2,Ht/=2,Ir/=2,ce/=2}function yr(ls,xo){return 1===Gt?ls[xo]:ls.readUInt16BE(xo*Gt)}if(_t){var ni=-1;for(ei=ce;ei<Ht;ei++)if(yr(Le,ei)===yr(le,-1===ni?0:ei-ni)){if(-1===ni&&(ni=ei),ei-ni+1===Ir)return ni*Gt}else-1!==ni&&(ei-=ei-ni),ni=-1}else for(ce+Ir>Ht&&(ce=Ht-Ir),ei=ce;ei>=0;ei--){for(var Hr=!0,Bs=0;Bs<Ir;Bs++)if(yr(Le,ei+Bs)!==yr(le,Bs)){Hr=!1;break}if(Hr)return ei}return-1}function ze(Le,le,ce,Ke){ce=Number(ce)||0;var _t=Le.length-ce;Ke?(Ke=Number(Ke))>_t&&(Ke=_t):Ke=_t;var Gt=le.length;if(Gt%2!=0)throw new TypeError("Invalid hex string");Ke>Gt/2&&(Ke=Gt/2);for(var Ht=0;Ht<Ke;++Ht){var Ir=parseInt(le.substr(2*Ht,2),16);if(isNaN(Ir))return Ht;Le[ce+Ht]=Ir}return Ht}function P(Le,le,ce,Ke){return It(lr(le,Le.length-ce),Le,ce,Ke)}function N(Le,le,ce,Ke){return It(function Ti(Le){for(var le=[],ce=0;ce<Le.length;++ce)le.push(255&Le.charCodeAt(ce));return le}(le),Le,ce,Ke)}function F(Le,le,ce,Ke){return N(Le,le,ce,Ke)}function z(Le,le,ce,Ke){return It(kt(le),Le,ce,Ke)}function ee(Le,le,ce,Ke){return It(function Qi(Le,le){for(var ce,Ke,Gt=[],Ht=0;Ht<Le.length&&!((le-=2)<0);++Ht)Ke=(ce=Le.charCodeAt(Ht))>>8,Gt.push(ce%256),Gt.push(Ke);return Gt}(le,Le.length-ce),Le,ce,Ke)}function W(Le,le,ce){return $.fromByteArray(0===le&&ce===Le.length?Le:Le.slice(le,ce))}function ve(Le,le,ce){ce=Math.min(Le.length,ce);for(var Ke=[],_t=le;_t<ce;){var yr,ei,ni,Hr,Gt=Le[_t],Ht=null,Ir=Gt>239?4:Gt>223?3:Gt>191?2:1;if(_t+Ir<=ce)switch(Ir){case 1:Gt<128&&(Ht=Gt);break;case 2:128==(192&(yr=Le[_t+1]))&&(Hr=(31&Gt)<<6|63&yr)>127&&(Ht=Hr);break;case 3:ei=Le[_t+2],128==(192&(yr=Le[_t+1]))&&128==(192&ei)&&(Hr=(15&Gt)<<12|(63&yr)<<6|63&ei)>2047&&(Hr<55296||Hr>57343)&&(Ht=Hr);break;case 4:ei=Le[_t+2],ni=Le[_t+3],128==(192&(yr=Le[_t+1]))&&128==(192&ei)&&128==(192&ni)&&(Hr=(15&Gt)<<18|(63&yr)<<12|(63&ei)<<6|63&ni)>65535&&Hr<1114112&&(Ht=Hr)}null===Ht?(Ht=65533,Ir=1):Ht>65535&&(Ke.push((Ht-=65536)>>>10&1023|55296),Ht=56320|1023&Ht),Ke.push(Ht),_t+=Ir}return function dt(Le){var le=Le.length;if(le<=4096)return String.fromCharCode.apply(String,Le);for(var ce="",Ke=0;Ke<le;)ce+=String.fromCharCode.apply(String,Le.slice(Ke,Ke+=4096));return ce}(Ke)}function Ie(Le,le,ce){var Ke="";ce=Math.min(Le.length,ce);for(var _t=le;_t<ce;++_t)Ke+=String.fromCharCode(127&Le[_t]);return Ke}function At(Le,le,ce){var Ke="";ce=Math.min(Le.length,ce);for(var _t=le;_t<ce;++_t)Ke+=String.fromCharCode(Le[_t]);return Ke}function Rt(Le,le,ce){var Ke=Le.length;(!le||le<0)&&(le=0),(!ce||ce<0||ce>Ke)&&(ce=Ke);for(var _t="",Gt=le;Gt<ce;++Gt)_t+=er(Le[Gt]);return _t}function rt(Le,le,ce){for(var Ke=Le.slice(le,ce),_t="",Gt=0;Gt<Ke.length;Gt+=2)_t+=String.fromCharCode(Ke[Gt]+256*Ke[Gt+1]);return _t}function Et(Le,le,ce){if(Le%1!=0||Le<0)throw new RangeError("offset is not uint");if(Le+le>ce)throw new RangeError("Trying to access beyond buffer length")}function sn(Le,le,ce,Ke,_t,Gt){if(!S.isBuffer(Le))throw new TypeError('"buffer" argument must be a Buffer instance');if(le>_t||le<Gt)throw new RangeError('"value" argument is out of bounds');if(ce+Ke>Le.length)throw new RangeError("Index out of range")}function $t(Le,le,ce,Ke){le<0&&(le=65535+le+1);for(var _t=0,Gt=Math.min(Le.length-ce,2);_t<Gt;++_t)Le[ce+_t]=(le&255<<8*(Ke?_t:1-_t))>>>8*(Ke?_t:1-_t)}function kn(Le,le,ce,Ke){le<0&&(le=4294967295+le+1);for(var _t=0,Gt=Math.min(Le.length-ce,4);_t<Gt;++_t)Le[ce+_t]=le>>>8*(Ke?_t:3-_t)&255}function Nt(Le,le,ce,Ke,_t,Gt){if(ce+Ke>Le.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("Index out of range")}function Bn(Le,le,ce,Ke,_t){return _t||Nt(Le,0,ce,4),v.write(Le,le,ce,Ke,23,4),ce+4}function Nn(Le,le,ce,Ke,_t){return _t||Nt(Le,0,ce,8),v.write(Le,le,ce,Ke,52,8),ce+8}X.lW=S,X.h2=50,S.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:function q(){try{var Le=new Uint8Array(1);return Le.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===Le.foo()&&"function"==typeof Le.subarray&&0===Le.subarray(1,1).byteLength}catch{return!1}}(),k(),S.poolSize=8192,S._augment=function(Le){return Le.__proto__=S.prototype,Le},S.from=function(Le,le,ce){return M(null,Le,le,ce)},S.TYPED_ARRAY_SUPPORT&&(S.prototype.__proto__=Uint8Array.prototype,S.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&S[Symbol.species]===S&&Object.defineProperty(S,Symbol.species,{value:null,configurable:!0})),S.alloc=function(Le,le,ce){return function K(Le,le,ce,Ke){return H(le),le<=0?I(Le,le):void 0!==ce?"string"==typeof Ke?I(Le,le).fill(ce,Ke):I(Le,le).fill(ce):I(Le,le)}(null,Le,le,ce)},S.allocUnsafe=function(Le){return J(null,Le)},S.allocUnsafeSlow=function(Le){return J(null,Le)},S.isBuffer=function(le){return!(null==le||!le._isBuffer)},S.compare=function(le,ce){if(!S.isBuffer(le)||!S.isBuffer(ce))throw new TypeError("Arguments must be Buffers");if(le===ce)return 0;for(var Ke=le.length,_t=ce.length,Gt=0,Ht=Math.min(Ke,_t);Gt<Ht;++Gt)if(le[Gt]!==ce[Gt]){Ke=le[Gt],_t=ce[Gt];break}return Ke<_t?-1:_t<Ke?1:0},S.isEncoding=function(le){switch(String(le).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},S.concat=function(le,ce){if(!G(le))throw new TypeError('"list" argument must be an Array of Buffers');if(0===le.length)return S.alloc(0);var Ke;if(void 0===ce)for(ce=0,Ke=0;Ke<le.length;++Ke)ce+=le[Ke].length;var _t=S.allocUnsafe(ce),Gt=0;for(Ke=0;Ke<le.length;++Ke){var Ht=le[Ke];if(!S.isBuffer(Ht))throw new TypeError('"list" argument must be an Array of Buffers');Ht.copy(_t,Gt),Gt+=Ht.length}return _t},S.byteLength=fe,S.prototype._isBuffer=!0,S.prototype.swap16=function(){var le=this.length;if(le%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ce=0;ce<le;ce+=2)Ce(this,ce,ce+1);return this},S.prototype.swap32=function(){var le=this.length;if(le%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ce=0;ce<le;ce+=4)Ce(this,ce,ce+3),Ce(this,ce+1,ce+2);return this},S.prototype.swap64=function(){var le=this.length;if(le%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ce=0;ce<le;ce+=8)Ce(this,ce,ce+7),Ce(this,ce+1,ce+6),Ce(this,ce+2,ce+5),Ce(this,ce+3,ce+4);return this},S.prototype.toString=function(){var le=0|this.length;return 0===le?"":0===arguments.length?ve(this,0,le):pe.apply(this,arguments)},S.prototype.equals=function(le){if(!S.isBuffer(le))throw new TypeError("Argument must be a Buffer");return this===le||0===S.compare(this,le)},S.prototype.inspect=function(){var le="",ce=X.h2;return this.length>0&&(le=this.toString("hex",0,ce).match(/.{2}/g).join(" "),this.length>ce&&(le+=" ... ")),"<Buffer "+le+">"},S.prototype.compare=function(le,ce,Ke,_t,Gt){if(!S.isBuffer(le))throw new TypeError("Argument must be a Buffer");if(void 0===ce&&(ce=0),void 0===Ke&&(Ke=le?le.length:0),void 0===_t&&(_t=0),void 0===Gt&&(Gt=this.length),ce<0||Ke>le.length||_t<0||Gt>this.length)throw new RangeError("out of range index");if(_t>=Gt&&ce>=Ke)return 0;if(_t>=Gt)return-1;if(ce>=Ke)return 1;if(this===le)return 0;for(var Ht=(Gt>>>=0)-(_t>>>=0),Ir=(Ke>>>=0)-(ce>>>=0),yr=Math.min(Ht,Ir),ei=this.slice(_t,Gt),ni=le.slice(ce,Ke),Hr=0;Hr<yr;++Hr)if(ei[Hr]!==ni[Hr]){Ht=ei[Hr],Ir=ni[Hr];break}return Ht<Ir?-1:Ir<Ht?1:0},S.prototype.includes=function(le,ce,Ke){return-1!==this.indexOf(le,ce,Ke)},S.prototype.indexOf=function(le,ce,Ke){return qe(this,le,ce,Ke,!0)},S.prototype.lastIndexOf=function(le,ce,Ke){return qe(this,le,ce,Ke,!1)},S.prototype.write=function(le,ce,Ke,_t){if(void 0===ce)_t="utf8",Ke=this.length,ce=0;else if(void 0===Ke&&"string"==typeof ce)_t=ce,Ke=this.length,ce=0;else{if(!isFinite(ce))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ce|=0,isFinite(Ke)?(Ke|=0,void 0===_t&&(_t="utf8")):(_t=Ke,Ke=void 0)}var Gt=this.length-ce;if((void 0===Ke||Ke>Gt)&&(Ke=Gt),le.length>0&&(Ke<0||ce<0)||ce>this.length)throw new RangeError("Attempt to write outside buffer bounds");_t||(_t="utf8");for(var Ht=!1;;)switch(_t){case"hex":return ze(this,le,ce,Ke);case"utf8":case"utf-8":return P(this,le,ce,Ke);case"ascii":return N(this,le,ce,Ke);case"latin1":case"binary":return F(this,le,ce,Ke);case"base64":return z(this,le,ce,Ke);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,le,ce,Ke);default:if(Ht)throw new TypeError("Unknown encoding: "+_t);_t=(""+_t).toLowerCase(),Ht=!0}},S.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},S.prototype.slice=function(le,ce){var _t,Ke=this.length;if((le=~~le)<0?(le+=Ke)<0&&(le=0):le>Ke&&(le=Ke),(ce=void 0===ce?Ke:~~ce)<0?(ce+=Ke)<0&&(ce=0):ce>Ke&&(ce=Ke),ce<le&&(ce=le),S.TYPED_ARRAY_SUPPORT)(_t=this.subarray(le,ce)).__proto__=S.prototype;else{var Gt=ce-le;_t=new S(Gt,void 0);for(var Ht=0;Ht<Gt;++Ht)_t[Ht]=this[Ht+le]}return _t},S.prototype.readUIntLE=function(le,ce,Ke){le|=0,ce|=0,Ke||Et(le,ce,this.length);for(var _t=this[le],Gt=1,Ht=0;++Ht<ce&&(Gt*=256);)_t+=this[le+Ht]*Gt;return _t},S.prototype.readUIntBE=function(le,ce,Ke){le|=0,ce|=0,Ke||Et(le,ce,this.length);for(var _t=this[le+--ce],Gt=1;ce>0&&(Gt*=256);)_t+=this[le+--ce]*Gt;return _t},S.prototype.readUInt8=function(le,ce){return ce||Et(le,1,this.length),this[le]},S.prototype.readUInt16LE=function(le,ce){return ce||Et(le,2,this.length),this[le]|this[le+1]<<8},S.prototype.readUInt16BE=function(le,ce){return ce||Et(le,2,this.length),this[le]<<8|this[le+1]},S.prototype.readUInt32LE=function(le,ce){return ce||Et(le,4,this.length),(this[le]|this[le+1]<<8|this[le+2]<<16)+16777216*this[le+3]},S.prototype.readUInt32BE=function(le,ce){return ce||Et(le,4,this.length),16777216*this[le]+(this[le+1]<<16|this[le+2]<<8|this[le+3])},S.prototype.readIntLE=function(le,ce,Ke){le|=0,ce|=0,Ke||Et(le,ce,this.length);for(var _t=this[le],Gt=1,Ht=0;++Ht<ce&&(Gt*=256);)_t+=this[le+Ht]*Gt;return _t>=(Gt*=128)&&(_t-=Math.pow(2,8*ce)),_t},S.prototype.readIntBE=function(le,ce,Ke){le|=0,ce|=0,Ke||Et(le,ce,this.length);for(var _t=ce,Gt=1,Ht=this[le+--_t];_t>0&&(Gt*=256);)Ht+=this[le+--_t]*Gt;return Ht>=(Gt*=128)&&(Ht-=Math.pow(2,8*ce)),Ht},S.prototype.readInt8=function(le,ce){return ce||Et(le,1,this.length),128&this[le]?-1*(255-this[le]+1):this[le]},S.prototype.readInt16LE=function(le,ce){ce||Et(le,2,this.length);var Ke=this[le]|this[le+1]<<8;return 32768&Ke?4294901760|Ke:Ke},S.prototype.readInt16BE=function(le,ce){ce||Et(le,2,this.length);var Ke=this[le+1]|this[le]<<8;return 32768&Ke?4294901760|Ke:Ke},S.prototype.readInt32LE=function(le,ce){return ce||Et(le,4,this.length),this[le]|this[le+1]<<8|this[le+2]<<16|this[le+3]<<24},S.prototype.readInt32BE=function(le,ce){return ce||Et(le,4,this.length),this[le]<<24|this[le+1]<<16|this[le+2]<<8|this[le+3]},S.prototype.readFloatLE=function(le,ce){return ce||Et(le,4,this.length),v.read(this,le,!0,23,4)},S.prototype.readFloatBE=function(le,ce){return ce||Et(le,4,this.length),v.read(this,le,!1,23,4)},S.prototype.readDoubleLE=function(le,ce){return ce||Et(le,8,this.length),v.read(this,le,!0,52,8)},S.prototype.readDoubleBE=function(le,ce){return ce||Et(le,8,this.length),v.read(this,le,!1,52,8)},S.prototype.writeUIntLE=function(le,ce,Ke,_t){le=+le,ce|=0,Ke|=0,_t||sn(this,le,ce,Ke,Math.pow(2,8*Ke)-1,0);var Ht=1,Ir=0;for(this[ce]=255&le;++Ir<Ke&&(Ht*=256);)this[ce+Ir]=le/Ht&255;return ce+Ke},S.prototype.writeUIntBE=function(le,ce,Ke,_t){le=+le,ce|=0,Ke|=0,_t||sn(this,le,ce,Ke,Math.pow(2,8*Ke)-1,0);var Ht=Ke-1,Ir=1;for(this[ce+Ht]=255&le;--Ht>=0&&(Ir*=256);)this[ce+Ht]=le/Ir&255;return ce+Ke},S.prototype.writeUInt8=function(le,ce,Ke){return le=+le,ce|=0,Ke||sn(this,le,ce,1,255,0),S.TYPED_ARRAY_SUPPORT||(le=Math.floor(le)),this[ce]=255&le,ce+1},S.prototype.writeUInt16LE=function(le,ce,Ke){return le=+le,ce|=0,Ke||sn(this,le,ce,2,65535,0),S.TYPED_ARRAY_SUPPORT?(this[ce]=255&le,this[ce+1]=le>>>8):$t(this,le,ce,!0),ce+2},S.prototype.writeUInt16BE=function(le,ce,Ke){return le=+le,ce|=0,Ke||sn(this,le,ce,2,65535,0),S.TYPED_ARRAY_SUPPORT?(this[ce]=le>>>8,this[ce+1]=255&le):$t(this,le,ce,!1),ce+2},S.prototype.writeUInt32LE=function(le,ce,Ke){return le=+le,ce|=0,Ke||sn(this,le,ce,4,4294967295,0),S.TYPED_ARRAY_SUPPORT?(this[ce+3]=le>>>24,this[ce+2]=le>>>16,this[ce+1]=le>>>8,this[ce]=255&le):kn(this,le,ce,!0),ce+4},S.prototype.writeUInt32BE=function(le,ce,Ke){return le=+le,ce|=0,Ke||sn(this,le,ce,4,4294967295,0),S.TYPED_ARRAY_SUPPORT?(this[ce]=le>>>24,this[ce+1]=le>>>16,this[ce+2]=le>>>8,this[ce+3]=255&le):kn(this,le,ce,!1),ce+4},S.prototype.writeIntLE=function(le,ce,Ke,_t){if(le=+le,ce|=0,!_t){var Gt=Math.pow(2,8*Ke-1);sn(this,le,ce,Ke,Gt-1,-Gt)}var Ht=0,Ir=1,yr=0;for(this[ce]=255&le;++Ht<Ke&&(Ir*=256);)le<0&&0===yr&&0!==this[ce+Ht-1]&&(yr=1),this[ce+Ht]=(le/Ir>>0)-yr&255;return ce+Ke},S.prototype.writeIntBE=function(le,ce,Ke,_t){if(le=+le,ce|=0,!_t){var Gt=Math.pow(2,8*Ke-1);sn(this,le,ce,Ke,Gt-1,-Gt)}var Ht=Ke-1,Ir=1,yr=0;for(this[ce+Ht]=255&le;--Ht>=0&&(Ir*=256);)le<0&&0===yr&&0!==this[ce+Ht+1]&&(yr=1),this[ce+Ht]=(le/Ir>>0)-yr&255;return ce+Ke},S.prototype.writeInt8=function(le,ce,Ke){return le=+le,ce|=0,Ke||sn(this,le,ce,1,127,-128),S.TYPED_ARRAY_SUPPORT||(le=Math.floor(le)),le<0&&(le=255+le+1),this[ce]=255&le,ce+1},S.prototype.writeInt16LE=function(le,ce,Ke){return le=+le,ce|=0,Ke||sn(this,le,ce,2,32767,-32768),S.TYPED_ARRAY_SUPPORT?(this[ce]=255&le,this[ce+1]=le>>>8):$t(this,le,ce,!0),ce+2},S.prototype.writeInt16BE=function(le,ce,Ke){return le=+le,ce|=0,Ke||sn(this,le,ce,2,32767,-32768),S.TYPED_ARRAY_SUPPORT?(this[ce]=le>>>8,this[ce+1]=255&le):$t(this,le,ce,!1),ce+2},S.prototype.writeInt32LE=function(le,ce,Ke){return le=+le,ce|=0,Ke||sn(this,le,ce,4,2147483647,-2147483648),S.TYPED_ARRAY_SUPPORT?(this[ce]=255&le,this[ce+1]=le>>>8,this[ce+2]=le>>>16,this[ce+3]=le>>>24):kn(this,le,ce,!0),ce+4},S.prototype.writeInt32BE=function(le,ce,Ke){return le=+le,ce|=0,Ke||sn(this,le,ce,4,2147483647,-2147483648),le<0&&(le=4294967295+le+1),S.TYPED_ARRAY_SUPPORT?(this[ce]=le>>>24,this[ce+1]=le>>>16,this[ce+2]=le>>>8,this[ce+3]=255&le):kn(this,le,ce,!1),ce+4},S.prototype.writeFloatLE=function(le,ce,Ke){return Bn(this,le,ce,!0,Ke)},S.prototype.writeFloatBE=function(le,ce,Ke){return Bn(this,le,ce,!1,Ke)},S.prototype.writeDoubleLE=function(le,ce,Ke){return Nn(this,le,ce,!0,Ke)},S.prototype.writeDoubleBE=function(le,ce,Ke){return Nn(this,le,ce,!1,Ke)},S.prototype.copy=function(le,ce,Ke,_t){if(Ke||(Ke=0),!_t&&0!==_t&&(_t=this.length),ce>=le.length&&(ce=le.length),ce||(ce=0),_t>0&&_t<Ke&&(_t=Ke),_t===Ke||0===le.length||0===this.length)return 0;if(ce<0)throw new RangeError("targetStart out of bounds");if(Ke<0||Ke>=this.length)throw new RangeError("sourceStart out of bounds");if(_t<0)throw new RangeError("sourceEnd out of bounds");_t>this.length&&(_t=this.length),le.length-ce<_t-Ke&&(_t=le.length-ce+Ke);var Ht,Gt=_t-Ke;if(this===le&&Ke<ce&&ce<_t)for(Ht=Gt-1;Ht>=0;--Ht)le[Ht+ce]=this[Ht+Ke];else if(Gt<1e3||!S.TYPED_ARRAY_SUPPORT)for(Ht=0;Ht<Gt;++Ht)le[Ht+ce]=this[Ht+Ke];else Uint8Array.prototype.set.call(le,this.subarray(Ke,Ke+Gt),ce);return Gt},S.prototype.fill=function(le,ce,Ke,_t){if("string"==typeof le){if("string"==typeof ce?(_t=ce,ce=0,Ke=this.length):"string"==typeof Ke&&(_t=Ke,Ke=this.length),1===le.length){var Gt=le.charCodeAt(0);Gt<256&&(le=Gt)}if(void 0!==_t&&"string"!=typeof _t)throw new TypeError("encoding must be a string");if("string"==typeof _t&&!S.isEncoding(_t))throw new TypeError("Unknown encoding: "+_t)}else"number"==typeof le&&(le&=255);if(ce<0||this.length<ce||this.length<Ke)throw new RangeError("Out of range index");if(Ke<=ce)return this;var Ht;if(ce>>>=0,Ke=void 0===Ke?this.length:Ke>>>0,le||(le=0),"number"==typeof le)for(Ht=ce;Ht<Ke;++Ht)this[Ht]=le;else{var Ir=S.isBuffer(le)?le:lr(new S(le,_t).toString()),yr=Ir.length;for(Ht=0;Ht<Ke-ce;++Ht)this[Ht+ce]=Ir[Ht%yr]}return this};var ar=/[^+\/0-9A-Za-z-_]/g;function er(Le){return Le<16?"0"+Le.toString(16):Le.toString(16)}function lr(Le,le){le=le||1/0;for(var ce,Ke=Le.length,_t=null,Gt=[],Ht=0;Ht<Ke;++Ht){if((ce=Le.charCodeAt(Ht))>55295&&ce<57344){if(!_t){if(ce>56319){(le-=3)>-1&&Gt.push(239,191,189);continue}if(Ht+1===Ke){(le-=3)>-1&&Gt.push(239,191,189);continue}_t=ce;continue}if(ce<56320){(le-=3)>-1&&Gt.push(239,191,189),_t=ce;continue}ce=65536+(_t-55296<<10|ce-56320)}else _t&&(le-=3)>-1&&Gt.push(239,191,189);if(_t=null,ce<128){if((le-=1)<0)break;Gt.push(ce)}else if(ce<2048){if((le-=2)<0)break;Gt.push(ce>>6|192,63&ce|128)}else if(ce<65536){if((le-=3)<0)break;Gt.push(ce>>12|224,ce>>6&63|128,63&ce|128)}else{if(!(ce<1114112))throw new Error("Invalid code point");if((le-=4)<0)break;Gt.push(ce>>18|240,ce>>12&63|128,ce>>6&63|128,63&ce|128)}}return Gt}function kt(Le){return $.toByteArray(function Zt(Le){if((Le=function ne(Le){return Le.trim?Le.trim():Le.replace(/^\s+|\s+$/g,"")}(Le).replace(ar,"")).length<2)return"";for(;Le.length%4!=0;)Le+="=";return Le}(Le))}function It(Le,le,ce,Ke){for(var _t=0;_t<Ke&&!(_t+ce>=le.length||_t>=Le.length);++_t)le[_t+ce]=Le[_t];return _t}},7691:(Ee,X,O)=>{"use strict";const L=O(1395),$=O(3724),q=new(O(7231))({maxSize:1e5}),k=S=>!("object"!=typeof S||null===S||S instanceof RegExp||S instanceof Error||S instanceof Date),I=(S,M)=>{if(!k(S))return S;M={deep:!1,pascalCase:!1,...M};const{exclude:H,pascalCase:K,stopPaths:J,deep:ie}=M,Q=new Set(J),ae=me=>(we,oe)=>{if(ie&&k(oe)){const fe=void 0===me?we:`${me}.${we}`;Q.has(fe)||(oe=L(oe,ae(fe)))}if(!H||!((S,M)=>S.some(H=>"string"==typeof H?H===M:(H.lastIndex=0,H.test(M))))(H,we)){const fe=K?`${we}_`:we;if(q.has(fe))we=q.get(fe);else{const pe=$(we,{pascalCase:K});we.length<100&&q.set(fe,pe),we=pe}}return[we,oe]};return L(S,ae(void 0))};Ee.exports=(S,M)=>Array.isArray(S)?Object.keys(S).map(H=>I(S[H],M)):I(S,M)},3724:Ee=>{"use strict";const O=(L,$)=>{if("string"!=typeof L&&!Array.isArray(L))throw new TypeError("Expected the input to be `string | string[]`");return $=Object.assign({pascalCase:!1},$),L=Array.isArray(L)?L.map(q=>q.trim()).filter(q=>q.length).join("-"):L.trim(),0===L.length?"":1===L.length?$.pascalCase?L.toUpperCase():L.toLowerCase():(L!==L.toLowerCase()&&(L=(L=>{let $=!1,v=!1,G=!1;for(let q=0;q<L.length;q++){const k=L[q];$&&/[a-zA-Z]/.test(k)&&k.toUpperCase()===k?(L=L.slice(0,q)+"-"+L.slice(q),$=!1,G=v,v=!0,q++):v&&G&&/[a-zA-Z]/.test(k)&&k.toLowerCase()===k?(L=L.slice(0,q-1)+"-"+L.slice(q-1),G=v,v=!1,$=!0):($=k.toLowerCase()===k&&k.toUpperCase()!==k,G=v,v=k.toUpperCase()===k&&k.toLowerCase()!==k)}return L})(L)),L=L.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(q,k)=>k.toUpperCase()).replace(/\d+(\w|$)/g,q=>q.toUpperCase()),q=L,$.pascalCase?q.charAt(0).toUpperCase()+q.slice(1):q);var q};Ee.exports=O,Ee.exports.default=O},3555:(Ee,X)=>{"use strict";X.Q=function v(k,I){if("string"!=typeof k)throw new TypeError("argument str must be a string");for(var S={},M=I||{},H=k.split(";"),K=M.decode||O,J=0;J<H.length;J++){var ie=H[J],Q=ie.indexOf("=");if(!(Q<0)){var ae=ie.substring(0,Q).trim();if(null==S[ae]){var me=ie.substring(Q+1,ie.length).trim();'"'===me[0]&&(me=me.slice(1,-1)),S[ae]=q(me,K)}}}return S},X.q=function G(k,I,S){var M=S||{},H=M.encode||L;if("function"!=typeof H)throw new TypeError("option encode is invalid");if(!$.test(k))throw new TypeError("argument name is invalid");var K=H(I);if(K&&!$.test(K))throw new TypeError("argument val is invalid");var J=k+"="+K;if(null!=M.maxAge){var ie=M.maxAge-0;if(isNaN(ie)||!isFinite(ie))throw new TypeError("option maxAge is invalid");J+="; Max-Age="+Math.floor(ie)}if(M.domain){if(!$.test(M.domain))throw new TypeError("option domain is invalid");J+="; Domain="+M.domain}if(M.path){if(!$.test(M.path))throw new TypeError("option path is invalid");J+="; Path="+M.path}if(M.expires){if("function"!=typeof M.expires.toUTCString)throw new TypeError("option expires is invalid");J+="; Expires="+M.expires.toUTCString()}if(M.httpOnly&&(J+="; HttpOnly"),M.secure&&(J+="; Secure"),M.sameSite)switch("string"==typeof M.sameSite?M.sameSite.toLowerCase():M.sameSite){case!0:J+="; SameSite=Strict";break;case"lax":J+="; SameSite=Lax";break;case"strict":J+="; SameSite=Strict";break;case"none":J+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return J};var O=decodeURIComponent,L=encodeURIComponent,$=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function q(k,I){try{return I(k)}catch{return k}}},7585:function(Ee,X,O){var L;Ee.exports=(L=L||function($,v){var G;if(typeof window<"u"&&window.crypto&&(G=window.crypto),typeof self<"u"&&self.crypto&&(G=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(G=globalThis.crypto),!G&&typeof window<"u"&&window.msCrypto&&(G=window.msCrypto),!G&&typeof global<"u"&&global.crypto&&(G=global.crypto),!G)try{G=O(2480)}catch{}var q=function(){if(G){if("function"==typeof G.getRandomValues)try{return G.getRandomValues(new Uint32Array(1))[0]}catch{}if("function"==typeof G.randomBytes)try{return G.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},k=Object.create||function(){function oe(){}return function(fe){var pe;return oe.prototype=fe,pe=new oe,oe.prototype=null,pe}}(),I={},S=I.lib={},M=S.Base={extend:function(oe){var fe=k(this);return oe&&fe.mixIn(oe),(!fe.hasOwnProperty("init")||this.init===fe.init)&&(fe.init=function(){fe.$super.init.apply(this,arguments)}),fe.init.prototype=fe,fe.$super=this,fe},create:function(){var oe=this.extend();return oe.init.apply(oe,arguments),oe},init:function(){},mixIn:function(oe){for(var fe in oe)oe.hasOwnProperty(fe)&&(this[fe]=oe[fe]);oe.hasOwnProperty("toString")&&(this.toString=oe.toString)},clone:function(){return this.init.prototype.extend(this)}},H=S.WordArray=M.extend({init:function(oe,fe){oe=this.words=oe||[],this.sigBytes=null!=fe?fe:4*oe.length},toString:function(oe){return(oe||J).stringify(this)},concat:function(oe){var fe=this.words,pe=oe.words,Ce=this.sigBytes,qe=oe.sigBytes;if(this.clamp(),Ce%4)for(var He=0;He<qe;He++)fe[Ce+He>>>2]|=(pe[He>>>2]>>>24-He%4*8&255)<<24-(Ce+He)%4*8;else for(var P=0;P<qe;P+=4)fe[Ce+P>>>2]=pe[P>>>2];return this.sigBytes+=qe,this},clamp:function(){var oe=this.words,fe=this.sigBytes;oe[fe>>>2]&=4294967295<<32-fe%4*8,oe.length=$.ceil(fe/4)},clone:function(){var oe=M.clone.call(this);return oe.words=this.words.slice(0),oe},random:function(oe){for(var fe=[],pe=0;pe<oe;pe+=4)fe.push(q());return new H.init(fe,oe)}}),K=I.enc={},J=K.Hex={stringify:function(oe){for(var fe=oe.words,pe=oe.sigBytes,Ce=[],qe=0;qe<pe;qe++){var He=fe[qe>>>2]>>>24-qe%4*8&255;Ce.push((He>>>4).toString(16)),Ce.push((15&He).toString(16))}return Ce.join("")},parse:function(oe){for(var fe=oe.length,pe=[],Ce=0;Ce<fe;Ce+=2)pe[Ce>>>3]|=parseInt(oe.substr(Ce,2),16)<<24-Ce%8*4;return new H.init(pe,fe/2)}},ie=K.Latin1={stringify:function(oe){for(var fe=oe.words,pe=oe.sigBytes,Ce=[],qe=0;qe<pe;qe++)Ce.push(String.fromCharCode(fe[qe>>>2]>>>24-qe%4*8&255));return Ce.join("")},parse:function(oe){for(var fe=oe.length,pe=[],Ce=0;Ce<fe;Ce++)pe[Ce>>>2]|=(255&oe.charCodeAt(Ce))<<24-Ce%4*8;return new H.init(pe,fe)}},Q=K.Utf8={stringify:function(oe){try{return decodeURIComponent(escape(ie.stringify(oe)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(oe){return ie.parse(unescape(encodeURIComponent(oe)))}},ae=S.BufferedBlockAlgorithm=M.extend({reset:function(){this._data=new H.init,this._nDataBytes=0},_append:function(oe){"string"==typeof oe&&(oe=Q.parse(oe)),this._data.concat(oe),this._nDataBytes+=oe.sigBytes},_process:function(oe){var fe,pe=this._data,Ce=pe.words,qe=pe.sigBytes,He=this.blockSize,P=qe/(4*He),N=(P=oe?$.ceil(P):$.max((0|P)-this._minBufferSize,0))*He,F=$.min(4*N,qe);if(N){for(var z=0;z<N;z+=He)this._doProcessBlock(Ce,z);fe=Ce.splice(0,N),pe.sigBytes-=F}return new H.init(fe,F)},clone:function(){var oe=M.clone.call(this);return oe._data=this._data.clone(),oe},_minBufferSize:0}),we=(S.Hasher=ae.extend({cfg:M.extend(),init:function(oe){this.cfg=this.cfg.extend(oe),this.reset()},reset:function(){ae.reset.call(this),this._doReset()},update:function(oe){return this._append(oe),this._process(),this},finalize:function(oe){return oe&&this._append(oe),this._doFinalize()},blockSize:16,_createHelper:function(oe){return function(fe,pe){return new oe.init(pe).finalize(fe)}},_createHmacHelper:function(oe){return function(fe,pe){return new we.HMAC.init(oe,pe).finalize(fe)}}}),I.algo={});return I}(Math),L)},8319:function(Ee,X,O){var L,G;Ee.exports=(L=O(7585),G=L.lib.WordArray,L.enc.Base64={stringify:function(S){var M=S.words,H=S.sigBytes,K=this._map;S.clamp();for(var J=[],ie=0;ie<H;ie+=3)for(var we=(M[ie>>>2]>>>24-ie%4*8&255)<<16|(M[ie+1>>>2]>>>24-(ie+1)%4*8&255)<<8|M[ie+2>>>2]>>>24-(ie+2)%4*8&255,oe=0;oe<4&&ie+.75*oe<H;oe++)J.push(K.charAt(we>>>6*(3-oe)&63));var fe=K.charAt(64);if(fe)for(;J.length%4;)J.push(fe);return J.join("")},parse:function(S){var M=S.length,H=this._map,K=this._reverseMap;if(!K){K=this._reverseMap=[];for(var J=0;J<H.length;J++)K[H.charCodeAt(J)]=J}var ie=H.charAt(64);if(ie){var Q=S.indexOf(ie);-1!==Q&&(M=Q)}return function I(S,M,H){for(var K=[],J=0,ie=0;ie<M;ie++)if(ie%4){var Q=H[S.charCodeAt(ie-1)]<<ie%4*2,ae=H[S.charCodeAt(ie)]>>>6-ie%4*2;K[J>>>2]|=(Q|ae)<<24-J%4*8,J++}return G.create(K,J)}(S,M,K)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},L.enc.Base64)},6135:function(Ee,X,O){var L;Ee.exports=(L=O(7585),O(1817),O(3764),L.HmacSHA256)},3764:function(Ee,X,O){var L,k;Ee.exports=(L=O(7585),k=L.enc.Utf8,void(L.algo.HMAC=L.lib.Base.extend({init:function(M,H){M=this._hasher=new M.init,"string"==typeof H&&(H=k.parse(H));var K=M.blockSize,J=4*K;H.sigBytes>J&&(H=M.finalize(H)),H.clamp();for(var ie=this._oKey=H.clone(),Q=this._iKey=H.clone(),ae=ie.words,me=Q.words,we=0;we<K;we++)ae[we]^=1549556828,me[we]^=909522486;ie.sigBytes=Q.sigBytes=J,this.reset()},reset:function(){var M=this._hasher;M.reset(),M.update(this._iKey)},update:function(M){return this._hasher.update(M),this},finalize:function(M){var H=this._hasher,K=H.finalize(M);return H.reset(),H.finalize(this._oKey.clone().concat(K))}})))},7412:function(Ee,X,O){var L;Ee.exports=(L=O(7585),function(){if("function"==typeof ArrayBuffer){var G=L.lib.WordArray,q=G.init,k=G.init=function(I){if(I instanceof ArrayBuffer&&(I=new Uint8Array(I)),(I instanceof Int8Array||typeof Uint8ClampedArray<"u"&&I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array)&&(I=new Uint8Array(I.buffer,I.byteOffset,I.byteLength)),I instanceof Uint8Array){for(var S=I.byteLength,M=[],H=0;H<S;H++)M[H>>>2]|=I[H]<<24-H%4*8;q.call(this,M,S)}else q.apply(this,arguments)};k.prototype=G}}(),L.lib.WordArray)},1817:function(Ee,X,O){var L;Ee.exports=(L=O(7585),function($){var v=L,G=v.lib,q=G.WordArray,k=G.Hasher,I=v.algo,S=[],M=[];!function(){function J(me){for(var we=$.sqrt(me),oe=2;oe<=we;oe++)if(!(me%oe))return!1;return!0}function ie(me){return 4294967296*(me-(0|me))|0}for(var Q=2,ae=0;ae<64;)J(Q)&&(ae<8&&(S[ae]=ie($.pow(Q,.5))),M[ae]=ie($.pow(Q,1/3)),ae++),Q++}();var H=[],K=I.SHA256=k.extend({_doReset:function(){this._hash=new q.init(S.slice(0))},_doProcessBlock:function(J,ie){for(var Q=this._hash.words,ae=Q[0],me=Q[1],we=Q[2],oe=Q[3],fe=Q[4],pe=Q[5],Ce=Q[6],qe=Q[7],He=0;He<64;He++){if(He<16)H[He]=0|J[ie+He];else{var ze=H[He-15],N=H[He-2];H[He]=((ze<<25|ze>>>7)^(ze<<14|ze>>>18)^ze>>>3)+H[He-7]+((N<<15|N>>>17)^(N<<13|N>>>19)^N>>>10)+H[He-16]}var ee=ae&me^ae&we^me&we,Je=qe+((fe<<26|fe>>>6)^(fe<<21|fe>>>11)^(fe<<7|fe>>>25))+(fe&pe^~fe&Ce)+M[He]+H[He];qe=Ce,Ce=pe,pe=fe,fe=oe+Je|0,oe=we,we=me,me=ae,ae=Je+(((ae<<30|ae>>>2)^(ae<<19|ae>>>13)^(ae<<10|ae>>>22))+ee)|0}Q[0]=Q[0]+ae|0,Q[1]=Q[1]+me|0,Q[2]=Q[2]+we|0,Q[3]=Q[3]+oe|0,Q[4]=Q[4]+fe|0,Q[5]=Q[5]+pe|0,Q[6]=Q[6]+Ce|0,Q[7]=Q[7]+qe|0},_doFinalize:function(){var J=this._data,ie=J.words,Q=8*this._nDataBytes,ae=8*J.sigBytes;return ie[ae>>>5]|=128<<24-ae%32,ie[14+(ae+64>>>9<<4)]=$.floor(Q/4294967296),ie[15+(ae+64>>>9<<4)]=Q,J.sigBytes=4*ie.length,this._process(),this._hash},clone:function(){var J=k.clone.call(this);return J._hash=this._hash.clone(),J}});v.SHA256=k._createHelper(K),v.HmacSHA256=k._createHmacHelper(K)}(Math),L.SHA256)},209:Ee=>{function X(O,L,$){var v,G,q,k,I;function S(){var H=Date.now()-k;H<L&&H>=0?v=setTimeout(S,L-H):(v=null,$||(I=O.apply(q,G),q=G=null))}null==L&&(L=100);var M=function(){q=this,G=arguments,k=Date.now();var H=$&&!v;return v||(v=setTimeout(S,L)),H&&(I=O.apply(q,G),q=G=null),I};return M.clear=function(){v&&(clearTimeout(v),v=null)},M.flush=function(){v&&(I=O.apply(q,G),q=G=null,clearTimeout(v),v=null)},M}X.debounce=X,Ee.exports=X},9069:Ee=>{"use strict";var L,X="object"==typeof Reflect?Reflect:null,O=X&&"function"==typeof X.apply?X.apply:function(pe,Ce,qe){return Function.prototype.apply.call(pe,Ce,qe)};L=X&&"function"==typeof X.ownKeys?X.ownKeys:Object.getOwnPropertySymbols?function(pe){return Object.getOwnPropertyNames(pe).concat(Object.getOwnPropertySymbols(pe))}:function(pe){return Object.getOwnPropertyNames(pe)};var v=Number.isNaN||function(pe){return pe!=pe};function G(){G.init.call(this)}Ee.exports=G,Ee.exports.once=function me(fe,pe){return new Promise(function(Ce,qe){function He(P){fe.removeListener(pe,ze),qe(P)}function ze(){"function"==typeof fe.removeListener&&fe.removeListener("error",He),Ce([].slice.call(arguments))}oe(fe,pe,ze,{once:!0}),"error"!==pe&&function we(fe,pe,Ce){"function"==typeof fe.on&&oe(fe,"error",pe,Ce)}(fe,He,{once:!0})})},G.EventEmitter=G,G.prototype._events=void 0,G.prototype._eventsCount=0,G.prototype._maxListeners=void 0;var q=10;function k(fe){if("function"!=typeof fe)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof fe)}function I(fe){return void 0===fe._maxListeners?G.defaultMaxListeners:fe._maxListeners}function S(fe,pe,Ce,qe){var He,ze,P;if(k(Ce),void 0===(ze=fe._events)?(ze=fe._events=Object.create(null),fe._eventsCount=0):(void 0!==ze.newListener&&(fe.emit("newListener",pe,Ce.listener?Ce.listener:Ce),ze=fe._events),P=ze[pe]),void 0===P)P=ze[pe]=Ce,++fe._eventsCount;else if("function"==typeof P?P=ze[pe]=qe?[Ce,P]:[P,Ce]:qe?P.unshift(Ce):P.push(Ce),(He=I(fe))>0&&P.length>He&&!P.warned){P.warned=!0;var N=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(pe)+" listeners added. Use emitter.setMaxListeners() to increase limit");N.name="MaxListenersExceededWarning",N.emitter=fe,N.type=pe,N.count=P.length,function $(fe){console&&console.warn&&console.warn(fe)}(N)}return fe}function M(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function H(fe,pe,Ce){var qe={fired:!1,wrapFn:void 0,target:fe,type:pe,listener:Ce},He=M.bind(qe);return He.listener=Ce,qe.wrapFn=He,He}function K(fe,pe,Ce){var qe=fe._events;if(void 0===qe)return[];var He=qe[pe];return void 0===He?[]:"function"==typeof He?Ce?[He.listener||He]:[He]:Ce?function ae(fe){for(var pe=new Array(fe.length),Ce=0;Ce<pe.length;++Ce)pe[Ce]=fe[Ce].listener||fe[Ce];return pe}(He):ie(He,He.length)}function J(fe){var pe=this._events;if(void 0!==pe){var Ce=pe[fe];if("function"==typeof Ce)return 1;if(void 0!==Ce)return Ce.length}return 0}function ie(fe,pe){for(var Ce=new Array(pe),qe=0;qe<pe;++qe)Ce[qe]=fe[qe];return Ce}function oe(fe,pe,Ce,qe){if("function"==typeof fe.on)qe.once?fe.once(pe,Ce):fe.on(pe,Ce);else{if("function"!=typeof fe.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof fe);fe.addEventListener(pe,function He(ze){qe.once&&fe.removeEventListener(pe,He),Ce(ze)})}}Object.defineProperty(G,"defaultMaxListeners",{enumerable:!0,get:function(){return q},set:function(fe){if("number"!=typeof fe||fe<0||v(fe))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+fe+".");q=fe}}),G.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},G.prototype.setMaxListeners=function(pe){if("number"!=typeof pe||pe<0||v(pe))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+pe+".");return this._maxListeners=pe,this},G.prototype.getMaxListeners=function(){return I(this)},G.prototype.emit=function(pe){for(var Ce=[],qe=1;qe<arguments.length;qe++)Ce.push(arguments[qe]);var He="error"===pe,ze=this._events;if(void 0!==ze)He=He&&void 0===ze.error;else if(!He)return!1;if(He){var P;if(Ce.length>0&&(P=Ce[0]),P instanceof Error)throw P;var N=new Error("Unhandled error."+(P?" ("+P.message+")":""));throw N.context=P,N}var F=ze[pe];if(void 0===F)return!1;if("function"==typeof F)O(F,this,Ce);else{var z=F.length,ee=ie(F,z);for(qe=0;qe<z;++qe)O(ee[qe],this,Ce)}return!0},G.prototype.on=G.prototype.addListener=function(pe,Ce){return S(this,pe,Ce,!1)},G.prototype.prependListener=function(pe,Ce){return S(this,pe,Ce,!0)},G.prototype.once=function(pe,Ce){return k(Ce),this.on(pe,H(this,pe,Ce)),this},G.prototype.prependOnceListener=function(pe,Ce){return k(Ce),this.prependListener(pe,H(this,pe,Ce)),this},G.prototype.off=G.prototype.removeListener=function(pe,Ce){var qe,He,ze,P,N;if(k(Ce),void 0===(He=this._events))return this;if(void 0===(qe=He[pe]))return this;if(qe===Ce||qe.listener===Ce)0==--this._eventsCount?this._events=Object.create(null):(delete He[pe],He.removeListener&&this.emit("removeListener",pe,qe.listener||Ce));else if("function"!=typeof qe){for(ze=-1,P=qe.length-1;P>=0;P--)if(qe[P]===Ce||qe[P].listener===Ce){N=qe[P].listener,ze=P;break}if(ze<0)return this;0===ze?qe.shift():function Q(fe,pe){for(;pe+1<fe.length;pe++)fe[pe]=fe[pe+1];fe.pop()}(qe,ze),1===qe.length&&(He[pe]=qe[0]),void 0!==He.removeListener&&this.emit("removeListener",pe,N||Ce)}return this},G.prototype.removeAllListeners=function(pe){var Ce,qe,He;if(void 0===(qe=this._events))return this;if(void 0===qe.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==qe[pe]&&(0==--this._eventsCount?this._events=Object.create(null):delete qe[pe]),this;if(0===arguments.length){var P,ze=Object.keys(qe);for(He=0;He<ze.length;++He)"removeListener"!==(P=ze[He])&&this.removeAllListeners(P);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Ce=qe[pe]))this.removeListener(pe,Ce);else if(void 0!==Ce)for(He=Ce.length-1;He>=0;He--)this.removeListener(pe,Ce[He]);return this},G.prototype.listeners=function(pe){return K(this,pe,!0)},G.prototype.rawListeners=function(pe){return K(this,pe,!1)},G.listenerCount=function(fe,pe){return"function"==typeof fe.listenerCount?fe.listenerCount(pe):J.call(fe,pe)},G.prototype.listenerCount=J,G.prototype.eventNames=function(){return this._eventsCount>0?L(this._events):[]}},8107:(Ee,X,O)=>{"use strict";const L=O(1919).buildOptions,$={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(Q){return Q},attrValueProcessor:function(Q){return Q}},v=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function G(Q){this.options=L(Q,$,v),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=J),this.isCDATA=this.options.cdataTagName?ie:function(){return!1},this.replaceCDATAstr=q,this.replaceCDATAarr=k,this.options.format?(this.indentate=K,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=H,this.buildObjNode=S):(this.buildTextNode=M,this.buildObjNode=I),this.buildTextValNode=M,this.buildObjectNode=I}function q(Q,ae){return Q=this.options.tagValueProcessor(""+Q),""===this.options.cdataPositionChar||""===Q?Q+"<![CDATA["+ae+"]]"+this.tagEndChar:Q.replace(this.options.cdataPositionChar,"<![CDATA["+ae+"]]"+this.tagEndChar)}function k(Q,ae){if(Q=this.options.tagValueProcessor(""+Q),""===this.options.cdataPositionChar||""===Q)return Q+"<![CDATA["+ae.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let me in ae)Q=Q.replace(this.options.cdataPositionChar,"<![CDATA["+ae[me]+"]]>");return Q+this.newLine}function I(Q,ae,me,we){return me&&!Q.includes("<")?this.indentate(we)+"<"+ae+me+">"+Q+"</"+ae+this.tagEndChar:this.indentate(we)+"<"+ae+me+this.tagEndChar+Q+this.indentate(we)+"</"+ae+this.tagEndChar}function S(Q,ae,me,we){return""!==Q?this.buildObjectNode(Q,ae,me,we):this.indentate(we)+"<"+ae+me+"/"+this.tagEndChar}function M(Q,ae,me,we){return this.indentate(we)+"<"+ae+me+">"+this.options.tagValueProcessor(Q)+"</"+ae+this.tagEndChar}function H(Q,ae,me,we){return""!==Q?this.buildTextValNode(Q,ae,me,we):this.indentate(we)+"<"+ae+me+"/"+this.tagEndChar}function K(Q){return this.options.indentBy.repeat(Q)}function J(Q){return!!Q.startsWith(this.options.attributeNamePrefix)&&Q.substr(this.attrPrefixLen)}function ie(Q){return Q===this.options.cdataTagName}G.prototype.parse=function(Q){return this.j2x(Q,0).val},G.prototype.j2x=function(Q,ae){let me="",we="";const oe=Object.keys(Q),fe=oe.length;for(let pe=0;pe<fe;pe++){const Ce=oe[pe];if(!(typeof Q[Ce]>"u"))if(null===Q[Ce])we+=this.indentate(ae)+"<"+Ce+"/"+this.tagEndChar;else if(Q[Ce]instanceof Date)we+=this.buildTextNode(Q[Ce],Ce,"",ae);else if("object"!=typeof Q[Ce]){const qe=this.isAttribute(Ce);qe?me+=" "+qe+'="'+this.options.attrValueProcessor(""+Q[Ce])+'"':this.isCDATA(Ce)?we+=this.replaceCDATAstr(Q[this.options.textNodeName]?Q[this.options.textNodeName]:"",Q[Ce]):Ce===this.options.textNodeName?Q[this.options.cdataTagName]||(we+=this.options.tagValueProcessor(""+Q[Ce])):we+=this.buildTextNode(Q[Ce],Ce,"",ae)}else if(Array.isArray(Q[Ce]))if(this.isCDATA(Ce))we+=this.indentate(ae),we+=this.replaceCDATAarr(Q[this.options.textNodeName]?Q[this.options.textNodeName]:"",Q[Ce]);else{const qe=Q[Ce].length;for(let He=0;He<qe;He++){const ze=Q[Ce][He];if(!(typeof ze>"u"))if(null===ze)we+=this.indentate(ae)+"<"+Ce+"/"+this.tagEndChar;else if("object"==typeof ze){const P=this.j2x(ze,ae+1);we+=this.buildObjNode(P.val,Ce,P.attrStr,ae)}else we+=this.buildTextNode(ze,Ce,"",ae)}}else if(this.options.attrNodeName&&Ce===this.options.attrNodeName){const qe=Object.keys(Q[Ce]),He=qe.length;for(let ze=0;ze<He;ze++)me+=" "+qe[ze]+'="'+this.options.attrValueProcessor(""+Q[Ce][qe[ze]])+'"'}else{const qe=this.j2x(Q[Ce],ae+1);we+=this.buildObjNode(qe.val,Ce,qe.attrStr,ae)}}return{attrStr:me,val:we}},Ee.exports=G},6242:(Ee,X,O)=>{"use strict";const L=function(J){return String.fromCharCode(J)},$={nilChar:L(176),missingChar:L(201),nilPremitive:L(175),missingPremitive:L(200),emptyChar:L(178),emptyValue:L(177),boundryChar:L(179),objStart:L(198),arrStart:L(204),arrayEnd:L(185)},v=[$.nilChar,$.nilPremitive,$.missingChar,$.missingPremitive,$.boundryChar,$.emptyChar,$.emptyValue,$.arrayEnd,$.objStart,$.arrStart],G=function(J,ie,Q){if("string"==typeof ie)return q(J&&J[0]&&void 0!==J[0].val?J[0].val:J,ie);{const ae=function S(J){return void 0===J?$.missingChar:null===J?$.nilChar:!(J.child&&0===Object.keys(J.child).length&&(!J.attrsMap||0===Object.keys(J.attrsMap).length))||$.emptyChar}(J);if(!0===ae){let me="";if(Array.isArray(ie)){me+=$.arrStart;const we=ie[0],oe=J.length;if("string"==typeof we)for(let fe=0;fe<oe;fe++){const pe=q(J[fe].val,we);me=k(me,pe)}else for(let fe=0;fe<oe;fe++){const pe=G(J[fe],we,Q);me=k(me,pe)}me+=$.arrayEnd}else{me+=$.objStart;const we=Object.keys(ie);Array.isArray(J)&&(J=J[0]);for(let oe in we){const fe=we[oe];let pe;pe=G(!Q.ignoreAttributes&&J.attrsMap&&J.attrsMap[fe]?J.attrsMap[fe]:fe===Q.textNodeName?J.val:J.child[fe],ie[fe],Q),me=k(me,pe)}}return me}return ae}},q=function(J){switch(J){case void 0:return $.missingPremitive;case null:return $.nilPremitive;case"":return $.emptyValue;default:return J}},k=function(J,ie){return!I(ie[0])&&!I(J[J.length-1])&&(J+=$.boundryChar),J+ie},I=function(J){return-1!==v.indexOf(J)},M=O(2664),H=O(1919).buildOptions;X.convert2nimn=function(J,ie,Q){return Q=H(Q,M.defaultOptions,M.props),G(J,ie,Q)}},5847:(Ee,X,O)=>{"use strict";const L=O(1919),$=function(v,G,q){const k={};if((!v.child||L.isEmptyObject(v.child))&&(!v.attrsMap||L.isEmptyObject(v.attrsMap)))return L.isExist(v.val)?v.val:"";if(L.isExist(v.val)&&("string"!=typeof v.val||""!==v.val&&v.val!==G.cdataPositionChar)){const S=L.isTagNameInArrayMode(v.tagname,G.arrayMode,q);k[G.textNodeName]=S?[v.val]:v.val}L.merge(k,v.attrsMap,G.arrayMode);const I=Object.keys(v.child);for(let S=0;S<I.length;S++){const M=I[S];if(v.child[M]&&v.child[M].length>1){k[M]=[];for(let H in v.child[M])v.child[M].hasOwnProperty(H)&&k[M].push($(v.child[M][H],G,M))}else{const H=$(v.child[M][0],G,M),K=!0===G.arrayMode&&"object"==typeof H||L.isTagNameInArrayMode(M,G.arrayMode,q);k[M]=K?[H]:H}}return k};X.convertToJson=$},1207:(Ee,X,O)=>{"use strict";const L=O(1919),$=O(1919).buildOptions,v=O(2664),q=function(S,M,H){let K="{";const J=Object.keys(S.child);for(let ae=0;ae<J.length;ae++){var ie=J[ae];if(S.child[ie]&&S.child[ie].length>1){for(var Q in K+='"'+ie+'" : [ ',S.child[ie])K+=q(S.child[ie][Q],M)+" , ";K=K.substr(0,K.length-1)+" ] "}else K+='"'+ie+'" : '+q(S.child[ie][0],M)+" ,"}return L.merge(K,S.attrsMap),L.isEmptyObject(K)?L.isExist(S.val)?S.val:"":(L.isExist(S.val)&&("string"==typeof S.val&&(""===S.val||S.val===M.cdataPositionChar)||(K+='"'+M.textNodeName+'" : '+function k(S){return!0!==S&&!1!==S&&isNaN(S)?'"'+S+'"':S}(S.val))),","===K[K.length-1]&&(K=K.substr(0,K.length-2)),K+"}")};X.convertToJsonString=function(S,M){return(M=$(M,v.defaultOptions,v.props)).indentBy=M.indentBy||"",q(S,M,0)}},6705:(Ee,X,O)=>{"use strict";const L=O(5847),$=O(2664),v=O(2664),G=O(1919).buildOptions,q=O(7370);X.parse=function(I,S,M){if(M){!0===M&&(M={});const K=q.validate(I,M);if(!0!==K)throw Error(K.err.msg)}S=G(S,v.defaultOptions,v.props);const H=$.getTraversalObj(I,S);return L.convertToJson(H,S)},X.convertTonimn=O(6242).convert2nimn,X.getTraversalObj=$.getTraversalObj,X.convertToJson=L.convertToJson,X.convertToJsonString=O(1207).convertToJsonString,X.validate=q.validate,X.j2xParser=O(8107),X.parseToNimn=function(I,S,M){return X.convertTonimn(X.getTraversalObj(I,M),S,M)}},1919:(Ee,X)=>{"use strict";const $="[:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",v=new RegExp("^"+$+"$");X.isExist=function(k){return typeof k<"u"},X.isEmptyObject=function(k){return 0===Object.keys(k).length},X.merge=function(k,I,S){if(I){const M=Object.keys(I),H=M.length;for(let K=0;K<H;K++)k[M[K]]="strict"===S?[I[M[K]]]:I[M[K]]}},X.getValue=function(k){return X.isExist(k)?k:""},X.buildOptions=function(k,I,S){var M={};if(!k)return I;for(let H=0;H<S.length;H++)M[S[H]]=void 0!==k[S[H]]?k[S[H]]:I[S[H]];return M},X.isTagNameInArrayMode=function(k,I,S){return!1!==I&&(I instanceof RegExp?I.test(k):"function"==typeof I?!!I(k,S):"strict"===I)},X.isName=function(k){const I=v.exec(k);return!(null===I||typeof I>"u")},X.getAllMatches=function(k,I){const S=[];let M=I.exec(k);for(;M;){const H=[],K=M.length;for(let J=0;J<K;J++)H.push(M[J]);S.push(H),M=I.exec(k)}return S},X.nameRegexp=$},7370:(Ee,X,O)=>{"use strict";const L=O(1919),$={allowBooleanAttributes:!1},v=["allowBooleanAttributes"];function G(oe,fe){for(var pe=fe;fe<oe.length;fe++)if("?"==oe[fe]||" "==oe[fe]){var Ce=oe.substr(pe,fe-pe);if(fe>5&&"xml"===Ce)return ie("InvalidXml","XML declaration allowed only at the start of the document.",me(oe,fe));if("?"==oe[fe]&&">"==oe[fe+1]){fe++;break}continue}return fe}function q(oe,fe){if(oe.length>fe+5&&"-"===oe[fe+1]&&"-"===oe[fe+2]){for(fe+=3;fe<oe.length;fe++)if("-"===oe[fe]&&"-"===oe[fe+1]&&">"===oe[fe+2]){fe+=2;break}}else if(oe.length>fe+8&&"D"===oe[fe+1]&&"O"===oe[fe+2]&&"C"===oe[fe+3]&&"T"===oe[fe+4]&&"Y"===oe[fe+5]&&"P"===oe[fe+6]&&"E"===oe[fe+7]){let pe=1;for(fe+=8;fe<oe.length;fe++)if("<"===oe[fe])pe++;else if(">"===oe[fe]&&(pe--,0===pe))break}else if(oe.length>fe+9&&"["===oe[fe+1]&&"C"===oe[fe+2]&&"D"===oe[fe+3]&&"A"===oe[fe+4]&&"T"===oe[fe+5]&&"A"===oe[fe+6]&&"["===oe[fe+7])for(fe+=8;fe<oe.length;fe++)if("]"===oe[fe]&&"]"===oe[fe+1]&&">"===oe[fe+2]){fe+=2;break}return fe}function S(oe,fe){let pe="",Ce="",qe=!1;for(;fe<oe.length;fe++){if('"'===oe[fe]||"'"===oe[fe])if(""===Ce)Ce=oe[fe];else{if(Ce!==oe[fe])continue;Ce=""}else if(">"===oe[fe]&&""===Ce){qe=!0;break}pe+=oe[fe]}return""===Ce&&{value:pe,index:fe,tagClosed:qe}}X.validate=function(oe,fe){fe=L.buildOptions(fe,$,v);const pe=[];let Ce=!1,qe=!1;"\ufeff"===oe[0]&&(oe=oe.substr(1));for(let He=0;He<oe.length;He++)if("<"===oe[He]&&"?"===oe[He+1]){if(He+=2,He=G(oe,He),He.err)return He}else{if("<"!==oe[He]){if(" "===oe[He]||"\t"===oe[He]||"\n"===oe[He]||"\r"===oe[He])continue;return ie("InvalidChar","char '"+oe[He]+"' is not expected.",me(oe,He))}if(He++,"!"===oe[He]){He=q(oe,He);continue}{let ze=!1;"/"===oe[He]&&(ze=!0,He++);let P="";for(;He<oe.length&&">"!==oe[He]&&" "!==oe[He]&&"\t"!==oe[He]&&"\n"!==oe[He]&&"\r"!==oe[He];He++)P+=oe[He];if(P=P.trim(),"/"===P[P.length-1]&&(P=P.substring(0,P.length-1),He--),!ae(P)){let z;return z=0===P.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '"+P+"' is an invalid name.",ie("InvalidTag",z,me(oe,He))}const N=S(oe,He);if(!1===N)return ie("InvalidAttr","Attributes for '"+P+"' have open quote.",me(oe,He));let F=N.value;if(He=N.index,"/"===F[F.length-1]){F=F.substring(0,F.length-1);const z=H(F,fe);if(!0!==z)return ie(z.err.code,z.err.msg,me(oe,He-F.length+z.err.line));Ce=!0}else if(ze){if(!N.tagClosed)return ie("InvalidTag","Closing tag '"+P+"' doesn't have proper closing.",me(oe,He));if(F.trim().length>0)return ie("InvalidTag","Closing tag '"+P+"' can't have attributes or invalid starting.",me(oe,He));{const z=pe.pop();if(P!==z)return ie("InvalidTag","Closing tag '"+z+"' is expected inplace of '"+P+"'.",me(oe,He));0==pe.length&&(qe=!0)}}else{const z=H(F,fe);if(!0!==z)return ie(z.err.code,z.err.msg,me(oe,He-F.length+z.err.line));if(!0===qe)return ie("InvalidXml","Multiple possible root nodes found.",me(oe,He));pe.push(P),Ce=!0}for(He++;He<oe.length;He++)if("<"===oe[He]){if("!"===oe[He+1]){He++,He=q(oe,He);continue}if("?"!==oe[He+1])break;if(He=G(oe,++He),He.err)return He}else if("&"===oe[He]){const z=J(oe,He);if(-1==z)return ie("InvalidChar","char '&' is not expected.",me(oe,He));He=z}"<"===oe[He]&&He--}}return Ce?!(pe.length>0)||ie("InvalidXml","Invalid '"+JSON.stringify(pe,null,4).replace(/\r?\n/g,"")+"' found.",1):ie("InvalidXml","Start tag expected.",1)};const M=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function H(oe,fe){const pe=L.getAllMatches(oe,M),Ce={};for(let qe=0;qe<pe.length;qe++){if(0===pe[qe][1].length)return ie("InvalidAttr","Attribute '"+pe[qe][2]+"' has no space in starting.",we(oe,pe[qe][0]));if(void 0===pe[qe][3]&&!fe.allowBooleanAttributes)return ie("InvalidAttr","boolean attribute '"+pe[qe][2]+"' is not allowed.",we(oe,pe[qe][0]));const He=pe[qe][2];if(!Q(He))return ie("InvalidAttr","Attribute '"+He+"' is an invalid name.",we(oe,pe[qe][0]));if(Ce.hasOwnProperty(He))return ie("InvalidAttr","Attribute '"+He+"' is repeated.",we(oe,pe[qe][0]));Ce[He]=1}return!0}function J(oe,fe){if(";"===oe[++fe])return-1;if("#"===oe[fe])return function K(oe,fe){let pe=/\d/;for("x"===oe[fe]&&(fe++,pe=/[\da-fA-F]/);fe<oe.length;fe++){if(";"===oe[fe])return fe;if(!oe[fe].match(pe))break}return-1}(oe,++fe);let pe=0;for(;fe<oe.length;fe++,pe++)if(!(oe[fe].match(/\w/)&&pe<20)){if(";"===oe[fe])break;return-1}return fe}function ie(oe,fe,pe){return{err:{code:oe,msg:fe,line:pe}}}function Q(oe){return L.isName(oe)}function ae(oe){return L.isName(oe)}function me(oe,fe){return oe.substring(0,fe).split(/\r?\n/).length}function we(oe,fe){return oe.indexOf(fe)+fe.length}},976:Ee=>{"use strict";Ee.exports=function(X,O,L){this.tagname=X,this.parent=O,this.child={},this.attrsMap={},this.val=L,this.addChild=function($){Array.isArray(this.child[$.tagname])?this.child[$.tagname].push($):this.child[$.tagname]=[$]}}},2664:(Ee,X,O)=>{"use strict";const L=O(1919),$=O(1919).buildOptions,v=O(976);"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,L.nameRegexp),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const q={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(ae,me){return ae},attrValueProcessor:function(ae,me){return ae},stopNodes:[]};X.defaultOptions=q;const k=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];function I(ae,me,we){return me&&(we.trimValues&&(me=me.trim()),me=M(me=we.tagValueProcessor(me,ae),we.parseNodeValue,we.parseTrueNumberOnly)),me}function S(ae,me){if(me.ignoreNameSpace){const we=ae.split(":"),oe="/"===ae.charAt(0)?"/":"";if("xmlns"===we[0])return"";2===we.length&&(ae=oe+we[1])}return ae}function M(ae,me,we){if(me&&"string"==typeof ae){let oe;return""===ae.trim()||isNaN(ae)?oe="true"===ae||"false"!==ae&&ae:(-1!==ae.indexOf("0x")?oe=Number.parseInt(ae,16):-1!==ae.indexOf(".")?(oe=Number.parseFloat(ae),ae=ae.replace(/\.?0+$/,"")):oe=Number.parseInt(ae,10),we&&(oe=String(oe)===ae?oe:ae)),oe}return L.isExist(ae)?ae:""}X.props=k;const H=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function K(ae,me){if(!me.ignoreAttributes&&"string"==typeof ae){ae=ae.replace(/\r?\n/g," ");const we=L.getAllMatches(ae,H),oe=we.length,fe={};for(let pe=0;pe<oe;pe++){const Ce=S(we[pe][1],me);Ce.length&&(void 0!==we[pe][4]?(me.trimValues&&(we[pe][4]=we[pe][4].trim()),we[pe][4]=me.attrValueProcessor(we[pe][4],Ce),fe[me.attributeNamePrefix+Ce]=M(we[pe][4],me.parseAttributeValue,me.parseTrueNumberOnly)):me.allowBooleanAttributes&&(fe[me.attributeNamePrefix+Ce]=!0))}if(!Object.keys(fe).length)return;if(me.attrNodeName){const pe={};return pe[me.attrNodeName]=fe,pe}return fe}}function ie(ae,me){let we,oe="";for(let fe=me;fe<ae.length;fe++){let pe=ae[fe];if(we)pe===we&&(we="");else if('"'===pe||"'"===pe)we=pe;else{if(">"===pe)return{data:oe,index:fe};"\t"===pe&&(pe=" ")}oe+=pe}}function Q(ae,me,we,oe){const fe=ae.indexOf(me,we);if(-1===fe)throw new Error(oe);return fe+me.length-1}X.getTraversalObj=function(ae,me){ae=ae.replace(/\r\n?/g,"\n"),me=$(me,q,k);const we=new v("!xml");let oe=we,fe="";for(let pe=0;pe<ae.length;pe++)if("<"===ae[pe])if("/"===ae[pe+1]){const qe=Q(ae,">",pe,"Closing Tag is not closed.");let He=ae.substring(pe+2,qe).trim();if(me.ignoreNameSpace){const ze=He.indexOf(":");-1!==ze&&(He=He.substr(ze+1))}oe&&(oe.val=oe.val?L.getValue(oe.val)+""+I(He,fe,me):I(He,fe,me)),me.stopNodes.length&&me.stopNodes.includes(oe.tagname)&&(oe.child=[],null==oe.attrsMap&&(oe.attrsMap={}),oe.val=ae.substr(oe.startIndex+1,pe-oe.startIndex-1)),oe=oe.parent,fe="",pe=qe}else if("?"===ae[pe+1])pe=Q(ae,"?>",pe,"Pi Tag is not closed.");else if("!--"===ae.substr(pe+1,3))pe=Q(ae,"--\x3e",pe,"Comment is not closed.");else if("!D"===ae.substr(pe+1,2)){const qe=Q(ae,">",pe,"DOCTYPE is not closed.");pe=ae.substring(pe,qe).indexOf("[")>=0?ae.indexOf("]>",pe)+1:qe}else if("!["===ae.substr(pe+1,2)){const qe=Q(ae,"]]>",pe,"CDATA is not closed.")-2,He=ae.substring(pe+9,qe);if(fe&&(oe.val=L.getValue(oe.val)+""+I(oe.tagname,fe,me),fe=""),me.cdataTagName){const ze=new v(me.cdataTagName,oe,He);oe.addChild(ze),oe.val=L.getValue(oe.val)+me.cdataPositionChar,He&&(ze.val=He)}else oe.val=(oe.val||"")+(He||"");pe=qe+2}else{const qe=ie(ae,pe+1);let He=qe.data;const ze=qe.index,P=He.indexOf(" ");let N=He,F=!0;if(-1!==P&&(N=He.substr(0,P).replace(/\s\s*$/,""),He=He.substr(P+1)),me.ignoreNameSpace){const z=N.indexOf(":");-1!==z&&(N=N.substr(z+1),F=N!==qe.data.substr(z+1))}if(oe&&fe&&"!xml"!==oe.tagname&&(oe.val=L.getValue(oe.val)+""+I(oe.tagname,fe,me)),He.length>0&&He.lastIndexOf("/")===He.length-1){"/"===N[N.length-1]?(N=N.substr(0,N.length-1),He=N):He=He.substr(0,He.length-1);const z=new v(N,oe,"");N!==He&&(z.attrsMap=K(He,me)),oe.addChild(z)}else{const z=new v(N,oe);me.stopNodes.length&&me.stopNodes.includes(z.tagname)&&(z.startIndex=ze),N!==He&&F&&(z.attrsMap=K(He,me)),oe.addChild(z),oe=z}fe="",pe=ze}else fe+=ae[pe];return we}},4067:(Ee,X)=>{X.printMsg=function(){console.log("This is a message from the demo package")}},5780:Ee=>{var O;Ee.exports=O={},O.simpleFilter=function(L,$){return $.filter(function(v){return O.test(L,v)})},O.test=function(L,$){return null!==O.match(L,$)},O.match=function(L,$,v){var J,G=0,q=[],k=$.length,I=0,S=0,M=(v=v||{}).pre||"",H=v.post||"",K=v.caseSensitive&&$||$.toLowerCase();L=v.caseSensitive&&L||L.toLowerCase();for(var ie=0;ie<k;ie++)J=$[ie],K[ie]===L[G]?(J=M+J+H,G+=1,S+=1+S):S=0,I+=S,q[q.length]=J;return G===L.length?(I=K===L?1/0:I,{rendered:q.join(""),score:I}):null},O.filter=function(L,$,v){return $&&0!==$.length?"string"!=typeof L?$:(v=v||{},$.reduce(function(G,q,k,I){var S=q;v.extract&&(S=v.extract(q));var M=O.match(L,S,v);return null!=M&&(G[G.length]={string:M.rendered,score:M.score,index:k,original:q}),G},[]).sort(function(G,q){return q.score-G.score||G.index-q.index})):[]}},3334:Ee=>{var X=Ee.exports=function(O,L){if(L||(L=16),void 0===O&&(O=128),O<=0)return"0";for(var $=Math.log(Math.pow(2,O))/Math.log(L),v=2;$===1/0;v*=2)$=Math.log(Math.pow(2,O/v))/Math.log(L)*v;var G=$-Math.floor($),q="";for(v=0;v<Math.floor($);v++)q=Math.floor(Math.random()*L).toString(L)+q;if(G){var I=Math.pow(L,G);q=Math.floor(Math.random()*I).toString(L)+q}var S=parseInt(q,L);return S!==1/0&&S>=Math.pow(2,O)?X(O,L):q};X.rack=function(O,L,$){var v=function(q){var k=0;do{if(k++>10){if(!$)throw new Error("too many ID collisions, use more bits");O+=$}var I=X(O,L)}while(Object.hasOwnProperty.call(G,I));return G[I]=q,I},G=v.hats={};return v.get=function(q){return v.hats[q]},v.set=function(q,k){return v.hats[q]=k,v},v.bits=O||128,v.base=L||16,v}},8461:(Ee,X)=>{X.read=function(O,L,$,v,G){var q,k,I=8*G-v-1,S=(1<<I)-1,M=S>>1,H=-7,K=$?G-1:0,J=$?-1:1,ie=O[L+K];for(K+=J,q=ie&(1<<-H)-1,ie>>=-H,H+=I;H>0;q=256*q+O[L+K],K+=J,H-=8);for(k=q&(1<<-H)-1,q>>=-H,H+=v;H>0;k=256*k+O[L+K],K+=J,H-=8);if(0===q)q=1-M;else{if(q===S)return k?NaN:1/0*(ie?-1:1);k+=Math.pow(2,v),q-=M}return(ie?-1:1)*k*Math.pow(2,q-v)},X.write=function(O,L,$,v,G,q){var k,I,S,M=8*q-G-1,H=(1<<M)-1,K=H>>1,J=23===G?Math.pow(2,-24)-Math.pow(2,-77):0,ie=v?0:q-1,Q=v?1:-1,ae=L<0||0===L&&1/L<0?1:0;for(L=Math.abs(L),isNaN(L)||L===1/0?(I=isNaN(L)?1:0,k=H):(k=Math.floor(Math.log(L)/Math.LN2),L*(S=Math.pow(2,-k))<1&&(k--,S*=2),(L+=k+K>=1?J/S:J*Math.pow(2,1-K))*S>=2&&(k++,S/=2),k+K>=H?(I=0,k=H):k+K>=1?(I=(L*S-1)*Math.pow(2,G),k+=K):(I=L*Math.pow(2,K-1)*Math.pow(2,G),k=0));G>=8;O[$+ie]=255&I,ie+=Q,I/=256,G-=8);for(k=k<<G|I,M+=G;M>0;O[$+ie]=255&k,ie+=Q,k/=256,M-=8);O[$+ie-Q]|=128*ae}},6425:Ee=>{var X={}.toString;Ee.exports=Array.isArray||function(O){return"[object Array]"==X.call(O)}},3024:(Ee,X,O)=>{Ee.exports=self.fetch||(self.fetch=O(5557).default||O(5557))},7355:(Ee,X,O)=>{var L,$,v;void 0!==($="function"==typeof(L=v=function(){function v(){for(var k=0,I={};k<arguments.length;k++){var S=arguments[k];for(var M in S)I[M]=S[M]}return I}function G(k){return k.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function q(k){function I(){}function S(H,K,J){if(!(typeof document>"u")){"number"==typeof(J=v({path:"/"},I.defaults,J)).expires&&(J.expires=new Date(1*new Date+864e5*J.expires)),J.expires=J.expires?J.expires.toUTCString():"";try{var ie=JSON.stringify(K);/^[\{\[]/.test(ie)&&(K=ie)}catch{}K=k.write?k.write(K,H):encodeURIComponent(String(K)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),H=encodeURIComponent(String(H)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var Q="";for(var ae in J)!J[ae]||(Q+="; "+ae,!0!==J[ae]&&(Q+="="+J[ae].split(";")[0]));return document.cookie=H+"="+K+Q}}function M(H,K){if(!(typeof document>"u")){for(var J={},ie=document.cookie?document.cookie.split("; "):[],Q=0;Q<ie.length;Q++){var ae=ie[Q].split("="),me=ae.slice(1).join("=");!K&&'"'===me.charAt(0)&&(me=me.slice(1,-1));try{var we=G(ae[0]);if(me=(k.read||k)(me,we)||G(me),K)try{me=JSON.parse(me)}catch{}if(J[we]=me,H===we)break}catch{}}return H?J[H]:J}}return I.set=S,I.get=function(H){return M(H,!1)},I.getJSON=function(H){return M(H,!0)},I.remove=function(H,K){S(H,"",v(K,{expires:-1}))},I.defaults={},I.withConverter=q,I}(function(){})})?L.call(X,O,X,Ee):L)&&(Ee.exports=$),Ee.exports=v()},7923:(Ee,X,O)=>{Ee=O.nmd(Ee);var L=function(){var $=function(me,we,oe,fe){for(oe=oe||{},fe=me.length;fe--;oe[me[fe]]=we);return oe},v=[1,12],G=[1,13],q=[1,9],k=[1,10],I=[1,11],S=[1,14],M=[1,15],H=[14,18,22,24],K=[18,22],J=[22,24],ie={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(we,oe,fe,pe,Ce,qe,He){var ze=qe.length-1;switch(Ce){case 1:this.$=we.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(we);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=qe[ze-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=qe[ze-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[qe[ze-2],qe[ze]];break;case 16:this.$={},this.$[qe[ze][0]]=qe[ze][1];break;case 17:this.$=qe[ze-2],void 0!==qe[ze-2][qe[ze][0]]&&(this.$.__duplicateProperties__||Object.defineProperty(this.$,"__duplicateProperties__",{value:[],enumerable:!1}),this.$.__duplicateProperties__.push(qe[ze][0])),qe[ze-2][qe[ze][0]]=qe[ze][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[qe[ze]];break;case 21:this.$=qe[ze-2],qe[ze-2].push(qe[ze])}},table:[{3:5,4:v,5:6,6:G,7:3,8:q,9:4,10:k,11:I,12:1,13:2,15:7,16:8,17:S,23:M},{1:[3]},{14:[1,16]},$(H,[2,7]),$(H,[2,8]),$(H,[2,9]),$(H,[2,10]),$(H,[2,11]),$(H,[2,12]),$(H,[2,3]),$(H,[2,4]),$(H,[2,5]),$([14,18,21,22,24],[2,1]),$(H,[2,2]),{3:20,4:v,18:[1,17],19:18,20:19},{3:5,4:v,5:6,6:G,7:3,8:q,9:4,10:k,11:I,13:23,15:7,16:8,17:S,23:M,24:[1,21],25:22},{1:[2,6]},$(H,[2,13]),{18:[1,24],22:[1,25]},$(K,[2,16]),{21:[1,26]},$(H,[2,18]),{22:[1,28],24:[1,27]},$(J,[2,20]),$(H,[2,14]),{3:20,4:v,20:29},{3:5,4:v,5:6,6:G,7:3,8:q,9:4,10:k,11:I,13:30,15:7,16:8,17:S,23:M},$(H,[2,19]),{3:5,4:v,5:6,6:G,7:3,8:q,9:4,10:k,11:I,13:31,15:7,16:8,17:S,23:M},$(K,[2,17]),$(K,[2,15]),$(J,[2,21])],defaultActions:{16:[2,6]},parseError:function(we,oe){if(!oe.recoverable){let pe=function(Ce,qe){this.message=Ce,this.hash=qe};throw pe.prototype=Error,new pe(we,oe)}this.trace(we)},parse:function(we){var oe=this,fe=[0],Ce=[null],qe=[],He=this.table,ze="",P=0,N=0,F=0,z=2,ee=1,W=qe.slice.call(arguments,1),ve=Object.create(this.lexer),Je={yy:{}};for(var dt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,dt)&&(Je.yy[dt]=this.yy[dt]);ve.setInput(we,Je.yy),Je.yy.lexer=ve,Je.yy.parser=this,typeof ve.yylloc>"u"&&(ve.yylloc={});var Ie=ve.yylloc;qe.push(Ie);var At=ve.options&&ve.options.ranges;this.parseError="function"==typeof Je.yy.parseError?Je.yy.parseError:Object.getPrototypeOf(this).parseError;for(var Et,sn,$t,kn,Bn,ar,Zt,er,rt=function(){var Ti;return"number"!=typeof(Ti=ve.lex()||ee)&&(Ti=oe.symbols_[Ti]||Ti),Ti},Nn={};;){if(this.defaultActions[$t=fe[fe.length-1]]?kn=this.defaultActions[$t]:((null===Et||typeof Et>"u")&&(Et=rt()),kn=He[$t]&&He[$t][Et]),typeof kn>"u"||!kn.length||!kn[0]){var lr="";for(ar in er=[],He[$t])this.terminals_[ar]&&ar>z&&er.push("'"+this.terminals_[ar]+"'");lr=ve.showPosition?"Parse error on line "+(P+1)+":\n"+ve.showPosition()+"\nExpecting "+er.join(", ")+", got '"+(this.terminals_[Et]||Et)+"'":"Parse error on line "+(P+1)+": Unexpected "+(Et==ee?"end of input":"'"+(this.terminals_[Et]||Et)+"'"),this.parseError(lr,{text:ve.match,token:this.terminals_[Et]||Et,line:ve.yylineno,loc:Ie,expected:er})}if(kn[0]instanceof Array&&kn.length>1)throw new Error("Parse Error: multiple actions possible at state: "+$t+", token: "+Et);switch(kn[0]){case 1:fe.push(Et),Ce.push(ve.yytext),qe.push(ve.yylloc),fe.push(kn[1]),Et=null,sn?(Et=sn,sn=null):(N=ve.yyleng,ze=ve.yytext,P=ve.yylineno,Ie=ve.yylloc,F>0&&F--);break;case 2:if(Nn.$=Ce[Ce.length-(Zt=this.productions_[kn[1]][1])],Nn._$={first_line:qe[qe.length-(Zt||1)].first_line,last_line:qe[qe.length-1].last_line,first_column:qe[qe.length-(Zt||1)].first_column,last_column:qe[qe.length-1].last_column},At&&(Nn._$.range=[qe[qe.length-(Zt||1)].range[0],qe[qe.length-1].range[1]]),typeof(Bn=this.performAction.apply(Nn,[ze,N,P,Je.yy,kn[1],Ce,qe].concat(W)))<"u")return Bn;Zt&&(fe=fe.slice(0,-1*Zt*2),Ce=Ce.slice(0,-1*Zt),qe=qe.slice(0,-1*Zt)),fe.push(this.productions_[kn[1]][0]),Ce.push(Nn.$),qe.push(Nn._$),fe.push(He[fe[fe.length-2]][fe[fe.length-1]]);break;case 3:return!0}}return!0}};function ae(){this.yy={}}return ie.lexer={EOF:1,parseError:function(oe,fe){if(!this.yy.parser)throw new Error(oe);this.yy.parser.parseError(oe,fe)},setInput:function(we,oe){return this.yy=oe||this.yy||{},this._input=we,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var we=this._input[0];return this.yytext+=we,this.yyleng++,this.offset++,this.match+=we,this.matched+=we,we.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),we},unput:function(we){var oe=we.length,fe=we.split(/(?:\r\n?|\n)/g);this._input=we+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-oe),this.offset-=oe;var pe=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),fe.length-1&&(this.yylineno-=fe.length-1);var Ce=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:fe?(fe.length===pe.length?this.yylloc.first_column:0)+pe[pe.length-fe.length].length-fe[0].length:this.yylloc.first_column-oe},this.options.ranges&&(this.yylloc.range=[Ce[0],Ce[0]+this.yyleng-oe]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(we){this.unput(this.match.slice(we))},pastInput:function(){var we=this.matched.substr(0,this.matched.length-this.match.length);return(we.length>20?"...":"")+we.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var we=this.match;return we.length<20&&(we+=this._input.substr(0,20-we.length)),(we.substr(0,20)+(we.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var we=this.pastInput(),oe=new Array(we.length+1).join("-");return we+this.upcomingInput()+"\n"+oe+"^"},test_match:function(we,oe){var fe,pe,Ce;if(this.options.backtrack_lexer&&(Ce={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ce.yylloc.range=this.yylloc.range.slice(0))),(pe=we[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=pe.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:pe?pe[pe.length-1].length-pe[pe.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+we[0].length},this.yytext+=we[0],this.match+=we[0],this.matches=we,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(we[0].length),this.matched+=we[0],fe=this.performAction.call(this,this.yy,this,oe,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),fe)return fe;if(this._backtrack){for(var qe in Ce)this[qe]=Ce[qe];return!1}return!1},next:function(){if(this.done)return this.EOF;var we,oe,fe,pe;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Ce=this._currentRules(),qe=0;qe<Ce.length;qe++)if((fe=this._input.match(this.rules[Ce[qe]]))&&(!oe||fe[0].length>oe[0].length)){if(oe=fe,pe=qe,this.options.backtrack_lexer){if(!1!==(we=this.test_match(fe,Ce[qe])))return we;if(this._backtrack){oe=!1;continue}return!1}if(!this.options.flex)break}return oe?!1!==(we=this.test_match(oe,Ce[pe]))&&we:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(oe){this.conditionStack.push(oe)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(oe){return(oe=this.conditionStack.length-1-Math.abs(oe||0))>=0?this.conditionStack[oe]:"INITIAL"},pushState:function(oe){this.begin(oe)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(oe,fe,pe,Ce){switch(pe){case 0:break;case 1:return 6;case 2:return fe.yytext=fe.yytext.substr(1,fe.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}},ae.prototype=ie,ie.Parser=ae,new ae}();X.parser=L,X.Parser=L.Parser,X.parse=function(){return L.parse.apply(L,arguments)},X.main=function(v){v[1]||(console.log("Usage: "+v[0]+" FILE"),process.exit(1));var G=O(4067).readFileSync(O(7150).normalize(v[1]),"utf8");return X.parser.parse(G)},O.c[O.s]===Ee&&X.main(process.argv.slice(1))},3082:Ee=>{var $=/^\s+|\s+$/g,v=/^[-+]0x[0-9a-f]+$/i,G=/^0b[01]+$/i,q=/^0o[0-7]+$/i,k=parseInt,I="object"==typeof global&&global&&global.Object===Object&&global,S="object"==typeof self&&self&&self.Object===Object&&self,M=I||S||Function("return this")(),K=Object.prototype.toString,J=Math.max,ie=Math.min,Q=function(){return M.Date.now()};function me(pe){var Ce=typeof pe;return!!pe&&("object"==Ce||"function"==Ce)}function fe(pe){if("number"==typeof pe)return pe;if(function oe(pe){return"symbol"==typeof pe||function we(pe){return!!pe&&"object"==typeof pe}(pe)&&"[object Symbol]"==K.call(pe)}(pe))return NaN;if(me(pe)){var Ce="function"==typeof pe.valueOf?pe.valueOf():pe;pe=me(Ce)?Ce+"":Ce}if("string"!=typeof pe)return 0===pe?pe:+pe;pe=pe.replace($,"");var qe=G.test(pe);return qe||q.test(pe)?k(pe.slice(2),qe?2:8):v.test(pe)?NaN:+pe}Ee.exports=function ae(pe,Ce,qe){var He,ze,P,N,F,z,ee=0,W=!1,ve=!1,Je=!0;if("function"!=typeof pe)throw new TypeError("Expected a function");function dt(Nt){var Bn=He,Nn=ze;return He=ze=void 0,ee=Nt,N=pe.apply(Nn,Bn)}function Ie(Nt){return ee=Nt,F=setTimeout(rt,Ce),W?dt(Nt):N}function Rt(Nt){var Bn=Nt-z;return void 0===z||Bn>=Ce||Bn<0||ve&&Nt-ee>=P}function rt(){var Nt=Q();if(Rt(Nt))return Et(Nt);F=setTimeout(rt,function At(Nt){var ar=Ce-(Nt-z);return ve?ie(ar,P-(Nt-ee)):ar}(Nt))}function Et(Nt){return F=void 0,Je&&He?dt(Nt):(He=ze=void 0,N)}function kn(){var Nt=Q(),Bn=Rt(Nt);if(He=arguments,ze=this,z=Nt,Bn){if(void 0===F)return Ie(z);if(ve)return F=setTimeout(rt,Ce),dt(z)}return void 0===F&&(F=setTimeout(rt,Ce)),N}return Ce=fe(Ce)||0,me(qe)&&(W=!!qe.leading,P=(ve="maxWait"in qe)?J(fe(qe.maxWait)||0,Ce):P,Je="trailing"in qe?!!qe.trailing:Je),kn.cancel=function sn(){void 0!==F&&clearTimeout(F),ee=0,He=z=ze=F=void 0},kn.flush=function $t(){return void 0===F?N:Et(Q())},kn}},8222:(Ee,X,O)=>{Ee=O.nmd(Ee);var $="__lodash_hash_undefined__",q=9007199254740991,k="[object Arguments]",I="[object Array]",M="[object Boolean]",H="[object Date]",K="[object Error]",J="[object Function]",Q="[object Map]",ae="[object Number]",we="[object Object]",oe="[object Promise]",pe="[object RegExp]",Ce="[object Set]",qe="[object String]",P="[object WeakMap]",N="[object ArrayBuffer]",F="[object DataView]",Et=/^\[object .+?Constructor\]$/,sn=/^(?:0|[1-9]\d*)$/,$t={};$t["[object Float32Array]"]=$t["[object Float64Array]"]=$t["[object Int8Array]"]=$t["[object Int16Array]"]=$t["[object Int32Array]"]=$t["[object Uint8Array]"]=$t["[object Uint8ClampedArray]"]=$t["[object Uint16Array]"]=$t["[object Uint32Array]"]=!0,$t[k]=$t[I]=$t[N]=$t[M]=$t[F]=$t[H]=$t[K]=$t[J]=$t[Q]=$t[ae]=$t[we]=$t[pe]=$t[Ce]=$t[qe]=$t[P]=!1;var kn="object"==typeof global&&global&&global.Object===Object&&global,Nt="object"==typeof self&&self&&self.Object===Object&&self,Bn=kn||Nt||Function("return this")(),Nn=X&&!X.nodeType&&X,ar=Nn&&Ee&&!Ee.nodeType&&Ee,Zt=ar&&ar.exports===Nn,ne=Zt&&kn.process,er=function(){try{return ne&&ne.binding&&ne.binding("util")}catch{}}(),lr=er&&er.isTypedArray;function kt(Ge,mt){for(var Xt=-1,Fn=null==Ge?0:Ge.length;++Xt<Fn;)if(mt(Ge[Xt],Xt,Ge))return!0;return!1}function Le(Ge,mt){return Ge.has(mt)}function ce(Ge){var mt=-1,Xt=Array(Ge.size);return Ge.forEach(function(Fn,Ni){Xt[++mt]=[Ni,Fn]}),Xt}function _t(Ge){var mt=-1,Xt=Array(Ge.size);return Ge.forEach(function(Fn){Xt[++mt]=Fn}),Xt}var Ge,Gt=Array.prototype,Ir=Object.prototype,yr=Bn["__core-js_shared__"],ei=Function.prototype.toString,ni=Ir.hasOwnProperty,Hr=(Ge=/[^.]+$/.exec(yr&&yr.keys&&yr.keys.IE_PROTO||""))?"Symbol(src)_1."+Ge:"",Bs=Ir.toString,ls=RegExp("^"+ei.call(ni).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xo=Zt?Bn.Buffer:void 0,Cr=Bn.Symbol,ml=Bn.Uint8Array,Wu=Ir.propertyIsEnumerable,fu=Gt.splice,ta=Cr?Cr.toStringTag:void 0,Fs=Object.getOwnPropertySymbols,yi=xo?xo.isBuffer:void 0,Pu=function Ke(Ge,mt){return function(Xt){return Ge(mt(Xt))}}(Object.keys,Object),si=ut(Bn,"DataView"),he=ut(Bn,"Map"),_e=ut(Bn,"Promise"),Te=ut(Bn,"Set"),Oe=ut(Bn,"WeakMap"),Be=ut(Object,"create"),it=Wn(si),st=Wn(he),nt=Wn(_e),ke=Wn(Te),Xe=Wn(Oe),qt=Cr?Cr.prototype:void 0,Jt=qt?qt.valueOf:void 0;function yt(Ge){var mt=-1,Xt=null==Ge?0:Ge.length;for(this.clear();++mt<Xt;){var Fn=Ge[mt];this.set(Fn[0],Fn[1])}}function tn(Ge){var mt=-1,Xt=null==Ge?0:Ge.length;for(this.clear();++mt<Xt;){var Fn=Ge[mt];this.set(Fn[0],Fn[1])}}function zn(Ge){var mt=-1,Xt=null==Ge?0:Ge.length;for(this.clear();++mt<Xt;){var Fn=Ge[mt];this.set(Fn[0],Fn[1])}}function fi(Ge){var mt=-1,Xt=null==Ge?0:Ge.length;for(this.__data__=new zn;++mt<Xt;)this.add(Ge[mt])}function dr(Ge){var mt=this.__data__=new tn(Ge);this.size=mt.size}function eo(Ge,mt){for(var Xt=Ge.length;Xt--;)if(uo(Ge[Xt][0],mt))return Xt;return-1}function $o(Ge){return null==Ge?void 0===Ge?"[object Undefined]":"[object Null]":ta&&ta in Object(Ge)?function wt(Ge){var mt=ni.call(Ge,ta),Xt=Ge[ta];try{Ge[ta]=void 0;var Fn=!0}catch{}var Ni=Bs.call(Ge);return Fn&&(mt?Ge[ta]=Xt:delete Ge[ta]),Ni}(Ge):function Jn(Ge){return Bs.call(Ge)}(Ge)}function Sn(Ge){return Nr(Ge)&&$o(Ge)==k}function Ko(Ge,mt,Xt,Fn,Ni){return Ge===mt||(null==Ge||null==mt||!Nr(Ge)&&!Nr(mt)?Ge!=Ge&&mt!=mt:function ua(Ge,mt,Xt,Fn,Ni,wr){var Cn=Dn(Ge),po=Dn(mt),Xo=Cn?I:Kt(Ge),Yr=po?I:Kt(mt),Ea=(Xo=Xo==k?we:Xo)==we,Ba=(Yr=Yr==k?we:Yr)==we,$i=Xo==Yr;if($i&&Gn(Ge)){if(!Gn(mt))return!1;Cn=!0,Ea=!1}if($i&&!Ea)return wr||(wr=new dr),Cn||Xi(Ge)?j(Ge,mt,Xt,Fn,Ni,wr):function te(Ge,mt,Xt,Fn,Ni,wr,Cn){switch(Xt){case F:if(Ge.byteLength!=mt.byteLength||Ge.byteOffset!=mt.byteOffset)return!1;Ge=Ge.buffer,mt=mt.buffer;case N:return!(Ge.byteLength!=mt.byteLength||!wr(new ml(Ge),new ml(mt)));case M:case H:case ae:return uo(+Ge,+mt);case K:return Ge.name==mt.name&&Ge.message==mt.message;case pe:case qe:return Ge==mt+"";case Q:var po=ce;case Ce:if(po||(po=_t),Ge.size!=mt.size&&!(1&Fn))return!1;var Yr=Cn.get(Ge);if(Yr)return Yr==mt;Fn|=2,Cn.set(Ge,mt);var Ea=j(po(Ge),po(mt),Fn,Ni,wr,Cn);return Cn.delete(Ge),Ea;case"[object Symbol]":if(Jt)return Jt.call(Ge)==Jt.call(mt)}return!1}(Ge,mt,Xo,Xt,Fn,Ni,wr);if(!(1&Xt)){var to=Ea&&ni.call(Ge,"__wrapped__"),bi=Ba&&ni.call(mt,"__wrapped__");if(to||bi){var Ts=to?Ge.value():Ge,Ki=bi?mt.value():mt;return wr||(wr=new dr),Ni(Ts,Ki,Xt,Fn,wr)}}return!!$i&&(wr||(wr=new dr),function Se(Ge,mt,Xt,Fn,Ni,wr){var Cn=1&Xt,po=tt(Ge),Xo=po.length;if(Xo!=tt(mt).length&&!Cn)return!1;for(var Ba=Xo;Ba--;){var $i=po[Ba];if(!(Cn?$i in mt:ni.call(mt,$i)))return!1}var to=wr.get(Ge);if(to&&wr.get(mt))return to==mt;var bi=!0;wr.set(Ge,mt),wr.set(mt,Ge);for(var Ts=Cn;++Ba<Xo;){var Ki=Ge[$i=po[Ba]],Lr=mt[$i];if(Fn)var Is=Cn?Fn(Lr,Ki,$i,mt,Ge,wr):Fn(Ki,Lr,$i,Ge,mt,wr);if(!(void 0===Is?Ki===Lr||Ni(Ki,Lr,Xt,Fn,wr):Is)){bi=!1;break}Ts||(Ts="constructor"==$i)}if(bi&&!Ts){var Js=Ge.constructor,la=mt.constructor;Js!=la&&"constructor"in Ge&&"constructor"in mt&&!("function"==typeof Js&&Js instanceof Js&&"function"==typeof la&&la instanceof la)&&(bi=!1)}return wr.delete(Ge),wr.delete(mt),bi}(Ge,mt,Xt,Fn,Ni,wr))}(Ge,mt,Xt,Fn,Ko,Ni))}function j(Ge,mt,Xt,Fn,Ni,wr){var Cn=1&Xt,po=Ge.length,Xo=mt.length;if(po!=Xo&&!(Cn&&Xo>po))return!1;var Yr=wr.get(Ge);if(Yr&&wr.get(mt))return Yr==mt;var Ea=-1,Ba=!0,$i=2&Xt?new fi:void 0;for(wr.set(Ge,mt),wr.set(mt,Ge);++Ea<po;){var to=Ge[Ea],bi=mt[Ea];if(Fn)var Ts=Cn?Fn(bi,to,Ea,mt,Ge,wr):Fn(to,bi,Ea,Ge,mt,wr);if(void 0!==Ts){if(Ts)continue;Ba=!1;break}if($i){if(!kt(mt,function(Ki,Lr){if(!Le($i,Lr)&&(to===Ki||Ni(to,Ki,Xt,Fn,wr)))return $i.push(Lr)})){Ba=!1;break}}else if(to!==bi&&!Ni(to,bi,Xt,Fn,wr)){Ba=!1;break}}return wr.delete(Ge),wr.delete(mt),Ba}function tt(Ge){return function zs(Ge,mt,Xt){var Fn=mt(Ge);return Dn(Ge)?Fn:function Qi(Ge,mt){for(var Xt=-1,Fn=mt.length,Ni=Ge.length;++Xt<Fn;)Ge[Ni+Xt]=mt[Xt];return Ge}(Fn,Xt(Ge))}(Ge,lo,Qt)}function ct(Ge,mt){var Xt=Ge.__data__;return function Ct(Ge){var mt=typeof Ge;return"string"==mt||"number"==mt||"symbol"==mt||"boolean"==mt?"__proto__"!==Ge:null===Ge}(mt)?Xt["string"==typeof mt?"string":"hash"]:Xt.map}function ut(Ge,mt){var Xt=function le(Ge,mt){return Ge?.[mt]}(Ge,mt);return function Xn(Ge){return!(!mr(Ge)||function mn(Ge){return!!Hr&&Hr in Ge}(Ge))&&(Vn(Ge)?ls:Et).test(Wn(Ge))}(Xt)?Xt:void 0}yt.prototype.clear=function Lt(){this.__data__=Be?Be(null):{},this.size=0},yt.prototype.delete=function un(Ge){var mt=this.has(Ge)&&delete this.__data__[Ge];return this.size-=mt?1:0,mt},yt.prototype.get=function ln(Ge){var mt=this.__data__;if(Be){var Xt=mt[Ge];return Xt===$?void 0:Xt}return ni.call(mt,Ge)?mt[Ge]:void 0},yt.prototype.has=function In(Ge){var mt=this.__data__;return Be?void 0!==mt[Ge]:ni.call(mt,Ge)},yt.prototype.set=function Bt(Ge,mt){var Xt=this.__data__;return this.size+=this.has(Ge)?0:1,Xt[Ge]=Be&&void 0===mt?$:mt,this},tn.prototype.clear=function jt(){this.__data__=[],this.size=0},tn.prototype.delete=function ir(Ge){var mt=this.__data__,Xt=eo(mt,Ge);return!(Xt<0||(Xt==mt.length-1?mt.pop():fu.call(mt,Xt,1),--this.size,0))},tn.prototype.get=function rr(Ge){var mt=this.__data__,Xt=eo(mt,Ge);return Xt<0?void 0:mt[Xt][1]},tn.prototype.has=function wn(Ge){return eo(this.__data__,Ge)>-1},tn.prototype.set=function Ii(Ge,mt){var Xt=this.__data__,Fn=eo(Xt,Ge);return Fn<0?(++this.size,Xt.push([Ge,mt])):Xt[Fn][1]=mt,this},zn.prototype.clear=function Di(){this.size=0,this.__data__={hash:new yt,map:new(he||tn),string:new yt}},zn.prototype.delete=function Fi(Ge){var mt=ct(this,Ge).delete(Ge);return this.size-=mt?1:0,mt},zn.prototype.get=function $r(Ge){return ct(this,Ge).get(Ge)},zn.prototype.has=function _i(Ge){return ct(this,Ge).has(Ge)},zn.prototype.set=function Hi(Ge,mt){var Xt=ct(this,Ge),Fn=Xt.size;return Xt.set(Ge,mt),this.size+=Xt.size==Fn?0:1,this},fi.prototype.add=fi.prototype.push=function $n(Ge){return this.__data__.set(Ge,$),this},fi.prototype.has=function so(Ge){return this.__data__.has(Ge)},dr.prototype.clear=function Ho(){this.__data__=new tn,this.size=0},dr.prototype.delete=function $a(Ge){var mt=this.__data__,Xt=mt.delete(Ge);return this.size=mt.size,Xt},dr.prototype.get=function fo(Ge){return this.__data__.get(Ge)},dr.prototype.has=function _r(Ge){return this.__data__.has(Ge)},dr.prototype.set=function Cs(Ge,mt){var Xt=this.__data__;if(Xt instanceof tn){var Fn=Xt.__data__;if(!he||Fn.length<199)return Fn.push([Ge,mt]),this.size=++Xt.size,this;Xt=this.__data__=new zn(Fn)}return Xt.set(Ge,mt),this.size=Xt.size,this};var Qt=Fs?function(Ge){return null==Ge?[]:(Ge=Object(Ge),function Ti(Ge,mt){for(var Xt=-1,Fn=null==Ge?0:Ge.length,Ni=0,wr=[];++Xt<Fn;){var Cn=Ge[Xt];mt(Cn,Xt,Ge)&&(wr[Ni++]=Cn)}return wr}(Fs(Ge),function(mt){return Wu.call(Ge,mt)}))}:function La(){return[]},Kt=$o;function dn(Ge,mt){return!!(mt=mt??q)&&("number"==typeof Ge||sn.test(Ge))&&Ge>-1&&Ge%1==0&&Ge<mt}function Wn(Ge){if(null!=Ge){try{return ei.call(Ge)}catch{}try{return Ge+""}catch{}}return""}function uo(Ge,mt){return Ge===mt||Ge!=Ge&&mt!=mt}(si&&Kt(new si(new ArrayBuffer(1)))!=F||he&&Kt(new he)!=Q||_e&&Kt(_e.resolve())!=oe||Te&&Kt(new Te)!=Ce||Oe&&Kt(new Oe)!=P)&&(Kt=function(Ge){var mt=$o(Ge),Xt=mt==we?Ge.constructor:void 0,Fn=Xt?Wn(Xt):"";if(Fn)switch(Fn){case it:return F;case st:return Q;case nt:return oe;case ke:return Ce;case Xe:return P}return mt});var Vt=Sn(function(){return arguments}())?Sn:function(Ge){return Nr(Ge)&&ni.call(Ge,"callee")&&!Wu.call(Ge,"callee")},Dn=Array.isArray,Gn=yi||function ho(){return!1};function Vn(Ge){if(!mr(Ge))return!1;var mt=$o(Ge);return mt==J||"[object GeneratorFunction]"==mt||"[object AsyncFunction]"==mt||"[object Proxy]"==mt}function Na(Ge){return"number"==typeof Ge&&Ge>-1&&Ge%1==0&&Ge<=q}function mr(Ge){var mt=typeof Ge;return null!=Ge&&("object"==mt||"function"==mt)}function Nr(Ge){return null!=Ge&&"object"==typeof Ge}var Xi=lr?function ka(Ge){return function(mt){return Ge(mt)}}(lr):function cs(Ge){return Nr(Ge)&&Na(Ge.length)&&!!$t[$o(Ge)]};function lo(Ge){return function Pr(Ge){return null!=Ge&&Na(Ge.length)&&!Vn(Ge)}(Ge)?function hi(Ge,mt){var Xt=Dn(Ge),Fn=!Xt&&Vt(Ge),Ni=!Xt&&!Fn&&Gn(Ge),wr=!Xt&&!Fn&&!Ni&&Xi(Ge),Cn=Xt||Fn||Ni||wr,po=Cn?function It(Ge,mt){for(var Xt=-1,Fn=Array(Ge);++Xt<Ge;)Fn[Xt]=mt(Xt);return Fn}(Ge.length,String):[],Xo=po.length;for(var Yr in Ge)(mt||ni.call(Ge,Yr))&&(!Cn||!("length"==Yr||Ni&&("offset"==Yr||"parent"==Yr)||wr&&("buffer"==Yr||"byteLength"==Yr||"byteOffset"==Yr)||dn(Yr,Xo)))&&po.push(Yr);return po}(Ge):function Tr(Ge){if(!function Rn(Ge){var mt=Ge&&Ge.constructor;return Ge===("function"==typeof mt&&mt.prototype||Ir)}(Ge))return Pu(Ge);var mt=[];for(var Xt in Object(Ge))ni.call(Ge,Xt)&&"constructor"!=Xt&&mt.push(Xt);return mt}(Ge)}Ee.exports=function oi(Ge,mt){return Ko(Ge,mt)}},1395:Ee=>{"use strict";const X=v=>"object"==typeof v&&null!==v,O=Symbol("skip"),L=v=>X(v)&&!(v instanceof RegExp)&&!(v instanceof Error)&&!(v instanceof Date),$=(v,G,q,k=new WeakMap)=>{if(q={deep:!1,target:{},...q},k.has(v))return k.get(v);k.set(v,q.target);const{target:I}=q;delete q.target;const S=M=>M.map(H=>L(H)?$(H,G,q,k):H);if(Array.isArray(v))return S(v);for(const[M,H]of Object.entries(v)){const K=G(M,H,v);if(K===O)continue;let[J,ie,{shouldRecurse:Q=!0}={}]=K;"__proto__"!==J&&(q.deep&&Q&&L(ie)&&(ie=Array.isArray(ie)?S(ie):$(ie,G,q,k)),I[J]=ie)}return I};Ee.exports=(v,G,q)=>{if(!X(v))throw new TypeError(`Expected an object, got \`${v}\` (${typeof v})`);return $(v,G,q)},Ee.exports.mapObjectSkip=O},3913:(Ee,X,O)=>{const L=O(970),$=O(9390),v=O(5041),G=O(5238);Ee.exports={CircleMode:L,DragCircleMode:$,DirectMode:v,SimpleSelectMode:G}},970:(Ee,X,O)=>{const L=O(3331),$=O(1319),v=O(4054),G=O(1437).default,q={...L.modes.draw_polygon};q.onSetup=function(I){const S=this.newFeature({type:$.geojsonTypes.FEATURE,properties:{isCircle:!0,center:[]},geometry:{type:$.geojsonTypes.POLYGON,coordinates:[[]]}});return this.addFeature(S),this.clearSelectedFeatures(),v.disable(this),this.updateUIClasses({mouse:$.cursors.ADD}),this.activateUIButton($.types.POLYGON),this.setActionableState({trash:!0}),{initialRadiusInKm:I.initialRadiusInKm||2,polygon:S,currentVertexPosition:0}},q.clickAnywhere=function(I,S){if(0===I.currentVertexPosition){I.currentVertexPosition++;const M=[S.lngLat.lng,S.lngLat.lat],H=G(M,I.initialRadiusInKm);I.polygon.incomingCoords(H.geometry.coordinates),I.polygon.properties.center=M,I.polygon.properties.radiusInKm=I.initialRadiusInKm}return this.changeMode($.modes.SIMPLE_SELECT,{featureIds:[I.polygon.id]})},Ee.exports=q},5041:(Ee,X,O)=>{const L=O(3331),$=O(2120),v=O(3905),G=O(1319),q=O(9374),k=O(2777).Z,I=O(8275),S=O(1437).default,M=O(3901),H=L.modes.direct_select;H.dragFeature=function(K,J,ie){v(this.getSelected(),ie),this.getSelected().filter(Q=>Q.properties.isCircle).map(Q=>Q.properties.center).forEach(Q=>{Q[0]+=ie.lng,Q[1]+=ie.lat}),K.dragMoveLocation=J.lngLat},H.dragVertex=function(K,J,ie){if(K.feature.properties.isCircle){const Q=K.feature.properties.center,ae=[J.lngLat.lng,J.lngLat.lat],me=k(I.point(Q),I.point(ae),{units:"kilometers"}),we=S(Q,me);K.feature.incomingCoords(we.geometry.coordinates),K.feature.properties.radiusInKm=me}else{const Q=K.selectedCoordPaths.map(we=>K.feature.getCoordinate(we)),ae=Q.map(we=>({type:G.geojsonTypes.FEATURE,properties:{},geometry:{type:G.geojsonTypes.POINT,coordinates:we}})),me=q(ae,ie);for(let we=0;we<Q.length;we++){const oe=Q[we];K.feature.updateCoordinate(K.selectedCoordPaths[we],oe[0]+me.lng,oe[1]+me.lat)}}},H.toDisplayFeatures=function(K,J,ie){K.featureId===J.properties.id?(J.properties.active=G.activeStates.ACTIVE,ie(J),(J.properties.user_isCircle?M(J):$(J,{map:this.map,midpoints:!0,selectedPaths:K.selectedCoordPaths})).forEach(ie)):(J.properties.active=G.activeStates.INACTIVE,ie(J)),this.fireActionable(K)},Ee.exports=H},9390:(Ee,X,O)=>{const L=O(3331),$=O(1319),v=O(4054),G=O(3609),q=O(1437).default,k=O(2777).Z,I=O(8275),S={...L.modes.draw_polygon};S.onSetup=function(M){const H=this.newFeature({type:$.geojsonTypes.FEATURE,properties:{isCircle:!0,center:[]},geometry:{type:$.geojsonTypes.POLYGON,coordinates:[[]]}});return this.addFeature(H),this.clearSelectedFeatures(),v.disable(this),G.disable(this),this.updateUIClasses({mouse:$.cursors.ADD}),this.activateUIButton($.types.POLYGON),this.setActionableState({trash:!0}),{polygon:H,currentVertexPosition:0}},S.onMouseDown=S.onTouchStart=function(M,H){0===M.polygon.properties.center.length&&(M.polygon.properties.center=[H.lngLat.lng,H.lngLat.lat])},S.onDrag=S.onMouseMove=function(M,H){const K=M.polygon.properties.center;if(K.length>0){const J=k(I.point(K),I.point([H.lngLat.lng,H.lngLat.lat]),{units:"kilometers"}),ie=q(K,J);M.polygon.incomingCoords(ie.geometry.coordinates),M.polygon.properties.radiusInKm=J}},S.onMouseUp=S.onTouchEnd=function(M,H){return G.enable(this),this.changeMode($.modes.SIMPLE_SELECT,{featureIds:[M.polygon.id]})},S.onClick=S.onTap=function(M,H){M.polygon.properties.center=[]},S.toDisplayFeatures=function(M,H,K){return H.properties.active=H.properties.id===M.polygon.id?$.activeStates.ACTIVE:$.activeStates.INACTIVE,K(H)},Ee.exports=S},5238:(Ee,X,O)=>{const L=O(3331),$=O(2120),v=O(3905),G=O(1319),q=O(3901),k=L.modes.simple_select;k.dragMove=function(I,S){I.dragMoving=!0,S.originalEvent.stopPropagation();const M={lng:S.lngLat.lng-I.dragMoveLocation.lng,lat:S.lngLat.lat-I.dragMoveLocation.lat};v(this.getSelected(),M),this.getSelected().filter(H=>H.properties.isCircle).map(H=>H.properties.center).forEach(H=>{H[0]+=M.lng,H[1]+=M.lat}),I.dragMoveLocation=S.lngLat},k.toDisplayFeatures=function(I,S,M){S.properties.active=this.isSelected(S.properties.id)?G.activeStates.ACTIVE:G.activeStates.INACTIVE,M(S),this.fireActionable(),S.properties.active===G.activeStates.ACTIVE&&S.geometry.type!==G.geojsonTypes.POINT&&(S.properties.user_isCircle?q(S):$(S)).forEach(M)},Ee.exports=k},3901:(Ee,X,O)=>{const L=O(5340);Ee.exports=function $(v){const{properties:G,geometry:q}=v;if(!G.user_isCircle)return null;const k=[],I=q.coordinates[0].slice(0,-1);for(let S=0;S<I.length;S+=Math.round(I.length/4))k.push(L(G.id,I[S],`0.${S}`,!1));return k}},3609:Ee=>{Ee.exports={enable(X){setTimeout(()=>{!X.map||!X.map.dragPan||!X._ctx||!X._ctx.store||!X._ctx.store.getInitialConfigValue||!X._ctx.store.getInitialConfigValue("dragPan")||X.map.dragPan.enable()},0)},disable(X){setTimeout(()=>{!X.map||!X.map.doubleClickZoom||X.map.dragPan.disable()},0)}}},6844:Ee=>{Ee.exports=function(O){return function L($){return Array.isArray($)&&$.length&&"number"==typeof $[0]?[$]:$.reduce(function(v,G){return Array.isArray(G)&&Array.isArray(G[0])?v.concat(L(G)):(v.push(G),v)},[])}(O)}},7301:(Ee,X,O)=>{var L=O(8143),$=O(8714),v=O(6844);Ee.exports=function(G){if(!G)return[];var q=$(L(G)),k=[];return q.features.forEach(function(I){!I.geometry||(k=k.concat(v(I.geometry.coordinates)))}),k}},5988:(Ee,X,O)=>{var L=O(7301),$=O(5080),v=O(8604),G={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},q=Object.keys(G);function k(I){for(var M=v(),H=L(I),K=0;K<H.length;K++)M.include(H[K]);return M}Ee.exports=function(I){return k(I).bbox()},Ee.exports.polygon=function(I){return k(I).polygon()},Ee.exports.bboxify=function(I){return $(I).map(function(S){S&&q.some(function(H){return!!S[H]&&-1!==G[H].indexOf(S.type)})&&(S.bbox=k(S).bbox(),this.update(S))})}},3331:(Ee,X,O)=>{const L=O(1726),$=O(9043),v=O(7997),G=O(1319);Ee.exports=function(k){!function(k,I){const S={options:k=$(k)};I=v(S,I),S.api=I;const M=L(S);I.onAdd=M.onAdd,I.onRemove=M.onRemove,I.types=G.types,I.options=k}(k,this)},Ee.exports.modes=O(5073)},7997:(Ee,X,O)=>{const L=O(8222),$=O(8143),v=O(3334),G=O(2447),q=O(3888),k=O(8035),I=O(1319),S=O(6330),M={Polygon:O(5165),LineString:O(4479),Point:O(4158),MultiPolygon:O(5315),MultiLineString:O(5315),MultiPoint:O(5315)};Ee.exports=function(H,K){return K.modes=I.modes,K.getFeatureIdsAt=function(J){return G.click({point:J},null,H).map(Q=>Q.properties.id)},K.getSelectedIds=function(){return H.store.getSelectedIds()},K.getSelected=function(){return{type:I.geojsonTypes.FEATURE_COLLECTION,features:H.store.getSelectedIds().map(J=>H.store.get(J)).map(J=>J.toGeoJSON())}},K.getSelectedPoints=function(){return{type:I.geojsonTypes.FEATURE_COLLECTION,features:H.store.getSelectedCoordinates().map(J=>({type:I.geojsonTypes.FEATURE,properties:{},geometry:{type:I.geojsonTypes.POINT,coordinates:J.coordinates}}))}},K.set=function(J){if(void 0===J.type||J.type!==I.geojsonTypes.FEATURE_COLLECTION||!Array.isArray(J.features))throw new Error("Invalid FeatureCollection");const ie=H.store.createRenderBatch();let Q=H.store.getAllIds().slice();const ae=K.add(J),me=new S(ae);return Q=Q.filter(we=>!me.has(we)),Q.length&&K.delete(Q),ie(),ae},K.add=function(J){const ie=k.hint(J,{precisionWarning:!1}).filter(me=>"message"!==me.level);if(ie.length)throw new Error(ie[0].message);const ae=JSON.parse(JSON.stringify($(J))).features.map(me=>{if(me.id=me.id||v(),null===me.geometry)throw new Error("Invalid geometry: null");if(void 0===H.store.get(me.id)||H.store.get(me.id).type!==me.geometry.type){const we=M[me.geometry.type];if(void 0===we)throw new Error(`Invalid geometry type: ${me.geometry.type}.`);const oe=new we(H,me);H.store.add(oe)}else{const we=H.store.get(me.id);we.properties=me.properties,L(we.getCoordinates(),me.geometry.coordinates)||we.incomingCoords(me.geometry.coordinates)}return me.id});return H.store.render(),ae},K.get=function(J){const ie=H.store.get(J);if(ie)return ie.toGeoJSON()},K.getAll=function(){return{type:I.geojsonTypes.FEATURE_COLLECTION,features:H.store.getAll().map(J=>J.toGeoJSON())}},K.delete=function(J){return H.store.delete(J,{silent:!0}),K.getMode()!==I.modes.DIRECT_SELECT||H.store.getSelectedIds().length?H.store.render():H.events.changeMode(I.modes.SIMPLE_SELECT,void 0,{silent:!0}),K},K.deleteAll=function(){return H.store.delete(H.store.getAllIds(),{silent:!0}),K.getMode()===I.modes.DIRECT_SELECT?H.events.changeMode(I.modes.SIMPLE_SELECT,void 0,{silent:!0}):H.store.render(),K},K.changeMode=function(J,ie={}){return J===I.modes.SIMPLE_SELECT&&K.getMode()===I.modes.SIMPLE_SELECT?(q(ie.featureIds||[],H.store.getSelectedIds())||(H.store.setSelected(ie.featureIds,{silent:!0}),H.store.render()),K):(J===I.modes.DIRECT_SELECT&&K.getMode()===I.modes.DIRECT_SELECT&&ie.featureId===H.store.getSelectedIds()[0]||H.events.changeMode(J,ie,{silent:!0}),K)},K.getMode=function(){return H.events.getMode()},K.trash=function(){return H.events.trash({silent:!0}),K},K.combineFeatures=function(){return H.events.combineFeatures({silent:!0}),K},K.uncombineFeatures=function(){return H.events.uncombineFeatures({silent:!0}),K},K.setFeatureProperty=function(J,ie,Q){return H.store.setFeatureProperty(J,ie,Q),K},K}},1319:Ee=>{Ee.exports={classes:{CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},sources:{HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},cursors:{ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},types:{POLYGON:"polygon",LINE:"line_string",POINT:"point"},geojsonTypes:{FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},modes:{DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},events:{CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},updateActions:{MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},meta:{FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},activeStates:{ACTIVE:"true",INACTIVE:"false"},interactions:["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],LAT_MIN:-90,LAT_RENDERED_MIN:-85,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}},5262:(Ee,X,O)=>{const L=O(4699),$=O(166),v=O(2447),G=O(7715),q=O(2423),k=O(1319),I=O(3595);Ee.exports=function(S){const M=Object.keys(S.options.modes).reduce((pe,Ce)=>(pe[Ce]=I(S.options.modes[Ce]),pe),{});let H={},K={};const J={};let ie=null,Q=null;J.drag=function(pe,Ce){Ce({point:pe.point,time:(new Date).getTime()})?(S.ui.queueMapClasses({mouse:k.cursors.DRAG}),Q.drag(pe)):pe.originalEvent.stopPropagation()},J.mousedrag=function(pe){J.drag(pe,Ce=>!G(H,Ce))},J.touchdrag=function(pe){J.drag(pe,Ce=>!q(K,Ce))},J.mousemove=function(pe){if(1===(void 0!==pe.originalEvent.buttons?pe.originalEvent.buttons:pe.originalEvent.which))return J.mousedrag(pe);const qe=$(pe,S);pe.featureTarget=qe,Q.mousemove(pe)},J.mousedown=function(pe){H={time:(new Date).getTime(),point:pe.point};const Ce=$(pe,S);pe.featureTarget=Ce,Q.mousedown(pe)},J.mouseup=function(pe){const Ce=$(pe,S);pe.featureTarget=Ce,G(H,{point:pe.point,time:(new Date).getTime()})?Q.click(pe):Q.mouseup(pe)},J.mouseout=function(pe){Q.mouseout(pe)},J.touchstart=function(pe){if(pe.originalEvent.preventDefault(),!S.options.touchEnabled)return;K={time:(new Date).getTime(),point:pe.point};const Ce=v.touch(pe,null,S)[0];pe.featureTarget=Ce,Q.touchstart(pe)},J.touchmove=function(pe){if(pe.originalEvent.preventDefault(),S.options.touchEnabled)return Q.touchmove(pe),J.touchdrag(pe)},J.touchend=function(pe){if(pe.originalEvent.preventDefault(),!S.options.touchEnabled)return;const Ce=v.touch(pe,null,S)[0];pe.featureTarget=Ce,q(K,{time:(new Date).getTime(),point:pe.point})?Q.tap(pe):Q.touchend(pe)};const ae=pe=>!(8===pe||46===pe||pe>=48&&pe<=57);function me(pe,Ce,qe={}){Q.stop();const He=M[pe];if(void 0===He)throw new Error(`${pe} is not valid`);ie=pe;const ze=He(S,Ce);Q=L(ze,S),qe.silent||S.map.fire(k.events.MODE_CHANGE,{mode:pe}),S.store.setDirty(),S.store.render()}J.keydown=function(pe){"mapboxgl-canvas"===(pe.srcElement||pe.target).classList[0]&&(8!==pe.keyCode&&46!==pe.keyCode||!S.options.controls.trash?ae(pe.keyCode)?Q.keydown(pe):49===pe.keyCode&&S.options.controls.point?me(k.modes.DRAW_POINT):50===pe.keyCode&&S.options.controls.line_string?me(k.modes.DRAW_LINE_STRING):51===pe.keyCode&&S.options.controls.polygon&&me(k.modes.DRAW_POLYGON):(pe.preventDefault(),Q.trash()))},J.keyup=function(pe){ae(pe.keyCode)&&Q.keyup(pe)},J.zoomend=function(){S.store.changeZoom()},J.data=function(pe){if("style"===pe.dataType){const{setup:Ce,map:qe,options:He,store:ze}=S;He.styles.some(N=>qe.getLayer(N.id))||(Ce.addLayers(),ze.setDirty(),ze.render())}};const we={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){ie=S.options.defaultMode,Q=L(M[ie](S),S)},changeMode:me,actionable:function oe(pe){let Ce=!1;Object.keys(pe).forEach(qe=>{if(void 0===we[qe])throw new Error("Invalid action type");we[qe]!==pe[qe]&&(Ce=!0),we[qe]=pe[qe]}),Ce&&S.map.fire(k.events.ACTIONABLE,{actions:we})},currentModeName:function(){return ie},currentModeRender:function(pe,Ce){return Q.render(pe,Ce)},fire:function(pe,Ce){J[pe]&&J[pe](Ce)},addEventListeners:function(){S.map.on("mousemove",J.mousemove),S.map.on("mousedown",J.mousedown),S.map.on("mouseup",J.mouseup),S.map.on("data",J.data),S.map.on("touchmove",J.touchmove),S.map.on("touchstart",J.touchstart),S.map.on("touchend",J.touchend),S.container.addEventListener("mouseout",J.mouseout),S.options.keybindings&&(S.container.addEventListener("keydown",J.keydown),S.container.addEventListener("keyup",J.keyup))},removeEventListeners:function(){S.map.off("mousemove",J.mousemove),S.map.off("mousedown",J.mousedown),S.map.off("mouseup",J.mouseup),S.map.off("data",J.data),S.map.off("touchmove",J.touchmove),S.map.off("touchstart",J.touchstart),S.map.off("touchend",J.touchend),S.container.removeEventListener("mouseout",J.mouseout),S.options.keybindings&&(S.container.removeEventListener("keydown",J.keydown),S.container.removeEventListener("keyup",J.keyup))},trash:function(pe){Q.trash(pe)},combineFeatures:function(){Q.combineFeatures()},uncombineFeatures:function(){Q.uncombineFeatures()},getMode:function(){return ie}}}},684:(Ee,X,O)=>{const L=O(3334),$=O(1319),v=function(G,q){this.ctx=G,this.properties=q.properties||{},this.coordinates=q.geometry.coordinates,this.id=q.id||L(),this.type=q.geometry.type};v.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},v.prototype.incomingCoords=function(G){this.setCoordinates(G)},v.prototype.setCoordinates=function(G){this.coordinates=G,this.changed()},v.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},v.prototype.setProperty=function(G,q){this.properties[G]=q},v.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:$.geojsonTypes.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},v.prototype.internal=function(G){const q={id:this.id,meta:$.meta.FEATURE,"meta:type":this.type,active:$.activeStates.INACTIVE,mode:G};if(this.ctx.options.userProperties)for(const k in this.properties)q[`user_${k}`]=this.properties[k];return{type:$.geojsonTypes.FEATURE,properties:q,geometry:{coordinates:this.getCoordinates(),type:this.type}}},Ee.exports=v},4479:(Ee,X,O)=>{const L=O(684),$=function(v,G){L.call(this,v,G)};($.prototype=Object.create(L.prototype)).isValid=function(){return this.coordinates.length>1},$.prototype.addCoordinate=function(v,G,q){this.changed();const k=parseInt(v,10);this.coordinates.splice(k,0,[G,q])},$.prototype.getCoordinate=function(v){const G=parseInt(v,10);return JSON.parse(JSON.stringify(this.coordinates[G]))},$.prototype.removeCoordinate=function(v){this.changed(),this.coordinates.splice(parseInt(v,10),1)},$.prototype.updateCoordinate=function(v,G,q){const k=parseInt(v,10);this.coordinates[k]=[G,q],this.changed()},Ee.exports=$},5315:(Ee,X,O)=>{const L=O(684),$=O(1319),v=O(3334),G={MultiPoint:O(4158),MultiLineString:O(4479),MultiPolygon:O(5165)},q=(I,S,M,H,K)=>{const J=M.split("."),ie=parseInt(J[0],10),Q=J[1]?J.slice(1).join("."):null;return I[ie][S](Q,H,K)},k=function(I,S){if(L.call(this,I,S),delete this.coordinates,this.model=G[S.geometry.type],void 0===this.model)throw new TypeError(`${S.geometry.type} is not a valid type`);this.features=this._coordinatesToFeatures(S.geometry.coordinates)};(k.prototype=Object.create(L.prototype))._coordinatesToFeatures=function(I){const S=this.model.bind(this);return I.map(M=>new S(this.ctx,{id:v(),type:$.geojsonTypes.FEATURE,properties:{},geometry:{coordinates:M,type:this.type.replace("Multi","")}}))},k.prototype.isValid=function(){return this.features.every(I=>I.isValid())},k.prototype.setCoordinates=function(I){this.features=this._coordinatesToFeatures(I),this.changed()},k.prototype.getCoordinate=function(I){return q(this.features,"getCoordinate",I)},k.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(I=>I.type===$.geojsonTypes.POLYGON?I.getCoordinates():I.coordinates)))},k.prototype.updateCoordinate=function(I,S,M){q(this.features,"updateCoordinate",I,S,M),this.changed()},k.prototype.addCoordinate=function(I,S,M){q(this.features,"addCoordinate",I,S,M),this.changed()},k.prototype.removeCoordinate=function(I){q(this.features,"removeCoordinate",I),this.changed()},k.prototype.getFeatures=function(){return this.features},Ee.exports=k},4158:(Ee,X,O)=>{const L=O(684),$=function(v,G){L.call(this,v,G)};($.prototype=Object.create(L.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},$.prototype.updateCoordinate=function(v,G,q){this.coordinates=3===arguments.length?[G,q]:[v,G],this.changed()},$.prototype.getCoordinate=function(){return this.getCoordinates()},Ee.exports=$},5165:(Ee,X,O)=>{const L=O(684),$=function(v,G){L.call(this,v,G),this.coordinates=this.coordinates.map(q=>q.slice(0,-1))};($.prototype=Object.create(L.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(v=>v.length>2)},$.prototype.incomingCoords=function(v){this.coordinates=v.map(G=>G.slice(0,-1)),this.changed()},$.prototype.setCoordinates=function(v){this.coordinates=v,this.changed()},$.prototype.addCoordinate=function(v,G,q){this.changed();const k=v.split(".").map(S=>parseInt(S,10));this.coordinates[k[0]].splice(k[1],0,[G,q])},$.prototype.removeCoordinate=function(v){this.changed();const G=v.split(".").map(k=>parseInt(k,10)),q=this.coordinates[G[0]];q&&(q.splice(G[1],1),q.length<3&&this.coordinates.splice(G[0],1))},$.prototype.getCoordinate=function(v){const G=v.split(".").map(k=>parseInt(k,10));return JSON.parse(JSON.stringify(this.coordinates[G[0]][G[1]]))},$.prototype.getCoordinates=function(){return this.coordinates.map(v=>v.concat([v[0]]))},$.prototype.updateCoordinate=function(v,G,q){this.changed();const k=v.split("."),I=parseInt(k[0],10),S=parseInt(k[1],10);void 0===this.coordinates[I]&&(this.coordinates[I]=[]),this.coordinates[I][S]=[G,q]},Ee.exports=$},8747:(Ee,X,O)=>{const L=O(1319);Ee.exports={isOfMetaType:function($){return function(v){const G=v.featureTarget;return!(!G||!G.properties)&&G.properties.meta===$}},isShiftMousedown:function($){return!(!$.originalEvent||!$.originalEvent.shiftKey)&&0===$.originalEvent.button},isActiveFeature:function($){return!(!$.featureTarget||!$.featureTarget.properties)&&$.featureTarget.properties.active===L.activeStates.ACTIVE&&$.featureTarget.properties.meta===L.meta.FEATURE},isInactiveFeature:function($){return!(!$.featureTarget||!$.featureTarget.properties)&&$.featureTarget.properties.active===L.activeStates.INACTIVE&&$.featureTarget.properties.meta===L.meta.FEATURE},noTarget:function($){return void 0===$.featureTarget},isFeature:function($){return!(!$.featureTarget||!$.featureTarget.properties)&&$.featureTarget.properties.meta===L.meta.FEATURE},isVertex:function($){const v=$.featureTarget;return!(!v||!v.properties)&&v.properties.meta===L.meta.VERTEX},isShiftDown:function($){return!!$.originalEvent&&!0===$.originalEvent.shiftKey},isEscapeKey:function($){return 27===$.keyCode},isEnterKey:function($){return 13===$.keyCode},true:function(){return!0}}},9374:(Ee,X,O)=>{const L=O(5988),$=O(1319),{LAT_MIN:v,LAT_MAX:G,LAT_RENDERED_MIN:q,LAT_RENDERED_MAX:k,LNG_MIN:I,LNG_MAX:S}=$;Ee.exports=function(M,H){let K=v,J=G,ie=v,Q=G,ae=S,me=I;M.forEach(oe=>{const fe=L(oe),pe=fe[1],Ce=fe[3],qe=fe[0],He=fe[2];pe>K&&(K=pe),Ce<J&&(J=Ce),Ce>ie&&(ie=Ce),pe<Q&&(Q=pe),qe<ae&&(ae=qe),He>me&&(me=He)});const we=H;return K+we.lat>k&&(we.lat=k-K),ie+we.lat>G&&(we.lat=G-ie),J+we.lat<q&&(we.lat=q-J),Q+we.lat<v&&(we.lat=v-Q),ae+we.lng<=I&&(we.lng+=360*Math.ceil(Math.abs(we.lng)/360)),me+we.lng>=S&&(we.lng-=360*Math.ceil(Math.abs(we.lng)/360)),we}},856:(Ee,X,O)=>{const L=O(1319);Ee.exports=function($,v,G,q){const k=v.geometry.coordinates,I=G.geometry.coordinates;if(k[1]>L.LAT_RENDERED_MAX||k[1]<L.LAT_RENDERED_MIN||I[1]>L.LAT_RENDERED_MAX||I[1]<L.LAT_RENDERED_MIN)return null;const S=q.project([k[0],k[1]]),M=q.project([I[0],I[1]]),H=q.unproject([(S.x+M.x)/2,(S.y+M.y)/2]);return{type:L.geojsonTypes.FEATURE,properties:{meta:L.meta.MIDPOINT,parent:$,lng:H.lng,lat:H.lat,coord_path:G.properties.coord_path},geometry:{type:L.geojsonTypes.POINT,coordinates:[H.lng,H.lat]}}}},2120:(Ee,X,O)=>{const L=O(5340),$=O(856),v=O(1319);Ee.exports=function G(q,k={},I=null){const{type:S,coordinates:M}=q.geometry,H=q.properties&&q.properties.id;let K=[];function J(ae,me){let we="",oe=null;ae.forEach((fe,pe)=>{const Ce=null!=me?`${me}.${pe}`:String(pe),qe=L(H,fe,Ce,ie(Ce));if(k.midpoints&&oe){const ze=$(H,oe,qe,k.map);ze&&K.push(ze)}oe=qe;const He=JSON.stringify(fe);we!==He&&K.push(qe),0===pe&&(we=He)})}function ie(ae){return!!k.selectedPaths&&-1!==k.selectedPaths.indexOf(ae)}return S===v.geojsonTypes.POINT?K.push(L(H,M,I,ie(I))):S===v.geojsonTypes.POLYGON?M.forEach((ae,me)=>{J(ae,null!==I?`${I}.${me}`:String(me))}):S===v.geojsonTypes.LINE_STRING?J(M,I):0===S.indexOf(v.geojsonTypes.MULTI_PREFIX)&&function Q(){const ae=S.replace(v.geojsonTypes.MULTI_PREFIX,"");M.forEach((me,we)=>{K=K.concat(G({type:v.geojsonTypes.FEATURE,properties:q.properties,geometry:{type:ae,coordinates:me}},k,we))})}(),K}},5340:(Ee,X,O)=>{const L=O(1319);Ee.exports=function($,v,G,q){return{type:L.geojsonTypes.FEATURE,properties:{meta:L.meta.VERTEX,parent:$,coord_path:G,active:q?L.activeStates.ACTIVE:L.activeStates.INACTIVE},geometry:{type:L.geojsonTypes.POINT,coordinates:v}}}},4054:Ee=>{Ee.exports={enable(X){setTimeout(()=>{!X.map||!X.map.doubleClickZoom||!X._ctx||!X._ctx.store||!X._ctx.store.getInitialConfigValue||!X._ctx.store.getInitialConfigValue("doubleClickZoom")||X.map.doubleClickZoom.enable()},0)},disable(X){setTimeout(()=>{!X.map||!X.map.doubleClickZoom||X.map.doubleClickZoom.disable()},0)}}},5025:Ee=>{Ee.exports=function(X,O){const L=X.x-O.x,$=X.y-O.y;return Math.sqrt(L*L+$*$)}},2447:(Ee,X,O)=>{const L=O(3953),$=O(633),v=O(1319),G=O(6330),q=[v.meta.FEATURE,v.meta.MIDPOINT,v.meta.VERTEX];function S(M,H,K,J){if(null===K.map)return[];const ie=M?$(M,J):H,Q={};K.options.styles&&(Q.layers=K.options.styles.map(oe=>oe.id));const ae=K.map.queryRenderedFeatures(ie,Q).filter(oe=>-1!==q.indexOf(oe.properties.meta)),me=new G,we=[];return ae.forEach(oe=>{const fe=oe.properties.id;me.has(fe)||(me.add(fe),we.push(oe))}),L(we)}Ee.exports={click:function k(M,H,K){return S(M,H,K,K.options.clickBuffer)},touch:function I(M,H,K){return S(M,H,K,K.options.touchBuffer)}}},166:(Ee,X,O)=>{const L=O(2447),$=O(1319);Ee.exports=function(G,q){const k=L.click(G,null,q),I={mouse:$.cursors.NONE};return k[0]&&(I.mouse=k[0].properties.active===$.activeStates.ACTIVE?$.cursors.MOVE:$.cursors.POINTER,I.feature=k[0].properties.meta),-1!==q.events.currentModeName().indexOf("draw")&&(I.mouse=$.cursors.ADD),q.ui.queueMapClasses(I),q.ui.updateMapClasses(),k[0]}},7715:(Ee,X,O)=>{const L=O(5025);Ee.exports=function(k,I,S={}){const M=null!=S.fineTolerance?S.fineTolerance:4,H=null!=S.grossTolerance?S.grossTolerance:12,K=null!=S.interval?S.interval:500;k.point=k.point||I.point,k.time=k.time||I.time;const J=L(k.point,I.point);return J<M||J<H&&I.time-k.time<K}},3873:Ee=>{Ee.exports=function X(O,L){return!!O.lngLat&&O.lngLat.lng===L[0]&&O.lngLat.lat===L[1]}},2423:(Ee,X,O)=>{const L=O(5025);Ee.exports=function(q,k,I={}){const S=null!=I.tolerance?I.tolerance:25,M=null!=I.interval?I.interval:250;return q.point=q.point||k.point,q.time=q.time||k.time,L(q.point,k.point)<S&&k.time-q.time<M}},633:Ee=>{Ee.exports=function X(O,L=0){return[[O.point.x-L,O.point.y-L],[O.point.x+L,O.point.y+L]]}},4699:Ee=>{Ee.exports=function(O,L){const $={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},v={on:function(q,k,I){if(void 0===$[q])throw new Error(`Invalid event type: ${q}`);$[q].push({selector:k,fn:I})},render:function(q){L.store.featureChanged(q)}},G=function(q,k){const I=$[q];let S=I.length;for(;S--;){const M=I[S];if(M.selector(k)){M.fn.call(v,k),L.store.render(),L.ui.updateMapClasses();break}}};return O.start.call(v),{render:O.render,stop:function(){O.stop&&O.stop()},trash:function(){O.trash&&(O.trash(),L.store.render())},combineFeatures:function(){O.combineFeatures&&O.combineFeatures()},uncombineFeatures:function(){O.uncombineFeatures&&O.uncombineFeatures()},drag:function(q){G("drag",q)},click:function(q){G("click",q)},mousemove:function(q){G("mousemove",q)},mousedown:function(q){G("mousedown",q)},mouseup:function(q){G("mouseup",q)},mouseout:function(q){G("mouseout",q)},keydown:function(q){G("keydown",q)},keyup:function(q){G("keyup",q)},touchstart:function(q){G("touchstart",q)},touchmove:function(q){G("touchmove",q)},touchend:function(q){G("touchend",q)},tap:function(q){G("tap",q)}}}},4840:(Ee,X,O)=>{const L=O(4969);Ee.exports=function $(v,G){const q=G.getBoundingClientRect();return new L(v.clientX-q.left-(G.clientLeft||0),v.clientY-q.top-(G.clientTop||0))}},3905:(Ee,X,O)=>{const L=O(9374),$=O(1319);Ee.exports=function(v,G){const q=L(v.map(k=>k.toGeoJSON()),G);v.forEach(k=>{const I=k.getCoordinates(),S=J=>{const ie={lng:J[0]+q.lng,lat:J[1]+q.lat};return[ie.lng,ie.lat]},M=J=>J.map(ie=>S(ie));let K;k.type===$.geojsonTypes.POINT?K=S(I):k.type===$.geojsonTypes.LINE_STRING||k.type===$.geojsonTypes.MULTI_POINT?K=I.map(S):k.type===$.geojsonTypes.POLYGON||k.type===$.geojsonTypes.MULTI_LINE_STRING?K=I.map(M):k.type===$.geojsonTypes.MULTI_POLYGON&&(K=I.map(J=>J.map(ie=>M(ie)))),k.incomingCoords(K)})}},3953:(Ee,X,O)=>{const L=O(869),$=O(1319),v={Point:0,LineString:1,Polygon:2};function G(k,I){const S=v[k.geometry.type]-v[I.geometry.type];return 0===S&&k.geometry.type===$.geojsonTypes.POLYGON?k.area-I.area:S}Ee.exports=function q(k){return k.map(I=>(I.geometry.type===$.geojsonTypes.POLYGON&&(I.area=L.geometry({type:$.geojsonTypes.FEATURE,property:{},geometry:I.geometry})),I)).sort(G).map(I=>(delete I.area,I))}},6330:Ee=>{function X(O){if(this._items={},this._nums={},this._length=O?O.length:0,O)for(let L=0,$=O.length;L<$;L++)this.add(O[L]),void 0!==O[L]&&("string"==typeof O[L]?this._items[O[L]]=L:this._nums[O[L]]=L)}X.prototype.add=function(O){return this.has(O)||(this._length++,"string"==typeof O?this._items[O]=this._length:this._nums[O]=this._length),this},X.prototype.delete=function(O){return!1===this.has(O)||(this._length--,delete this._items[O],delete this._nums[O]),this},X.prototype.has=function(O){return!("string"!=typeof O&&"number"!=typeof O||void 0===this._items[O]&&void 0===this._nums[O])},X.prototype.values=function(){const O=[];return Object.keys(this._items).forEach(L=>{O.push({k:L,v:this._items[L]})}),Object.keys(this._nums).forEach(L=>{O.push({k:JSON.parse(L),v:this._nums[L]})}),O.sort((L,$)=>L.v-$.v).map(L=>L.k)},X.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this},Ee.exports=X},3888:Ee=>{Ee.exports=function(X,O){return X.length===O.length&&JSON.stringify(X.map(L=>L).sort())===JSON.stringify(O.map(L=>L).sort())}},6313:Ee=>{Ee.exports=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}]},5479:Ee=>{Ee.exports=function X(O,L,$){let v,G;function q(){v=!1,G&&(k.apply($,G),G=!1)}function k(){v?G=arguments:(v=!0,O.apply($,arguments),setTimeout(q,L))}return k}},859:Ee=>{Ee.exports=function X(O){return[].concat(O).filter(L=>void 0!==L)}},4261:(Ee,X,O)=>{const{noTarget:L,isOfMetaType:$,isInactiveFeature:v,isShiftDown:G}=O(8747),q=O(2120),k=O(9374),I=O(4054),S=O(1319),M=O(8747),H=O(3905),K=$(S.meta.VERTEX),J=$(S.meta.MIDPOINT),ie={fireUpdate:function(){this.map.fire(S.events.UPDATE,{action:S.updateActions.CHANGE_COORDINATES,features:this.getSelected().map(Q=>Q.toGeoJSON())})},fireActionable:function(Q){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:Q.selectedCoordPaths.length>0})},startDragging:function(Q,ae){this.map.dragPan.disable(),Q.canDragMove=!0,Q.dragMoveLocation=ae.lngLat},stopDragging:function(Q){this.map.dragPan.enable(),Q.dragMoving=!1,Q.canDragMove=!1,Q.dragMoveLocation=null},onVertex:function(Q,ae){this.startDragging(Q,ae);const me=ae.featureTarget.properties,we=Q.selectedCoordPaths.indexOf(me.coord_path);G(ae)||-1!==we?G(ae)&&-1===we&&Q.selectedCoordPaths.push(me.coord_path):Q.selectedCoordPaths=[me.coord_path];const oe=this.pathsToCoordinates(Q.featureId,Q.selectedCoordPaths);this.setSelectedCoordinates(oe)},onMidpoint:function(Q,ae){this.startDragging(Q,ae);const me=ae.featureTarget.properties;Q.feature.addCoordinate(me.coord_path,me.lng,me.lat),this.fireUpdate(),Q.selectedCoordPaths=[me.coord_path]},pathsToCoordinates:function(Q,ae){return ae.map(me=>({feature_id:Q,coord_path:me}))},onFeature:function(Q,ae){0===Q.selectedCoordPaths.length?this.startDragging(Q,ae):this.stopDragging(Q)},dragFeature:function(Q,ae,me){H(this.getSelected(),me),Q.dragMoveLocation=ae.lngLat},dragVertex:function(Q,ae,me){const we=Q.selectedCoordPaths.map(pe=>Q.feature.getCoordinate(pe)),oe=we.map(pe=>({type:S.geojsonTypes.FEATURE,properties:{},geometry:{type:S.geojsonTypes.POINT,coordinates:pe}})),fe=k(oe,me);for(let pe=0;pe<we.length;pe++){const Ce=we[pe];Q.feature.updateCoordinate(Q.selectedCoordPaths[pe],Ce[0]+fe.lng,Ce[1]+fe.lat)}},clickNoTarget:function(){this.changeMode(S.modes.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(S.modes.SIMPLE_SELECT)},clickActiveFeature:function(Q){Q.selectedCoordPaths=[],this.clearSelectedCoordinates(),Q.feature.changed()},onSetup:function(Q){const ae=Q.featureId,me=this.getFeature(ae);if(!me)throw new Error("You must provide a featureId to enter direct_select mode");if(me.type===S.geojsonTypes.POINT)throw new TypeError("direct_select mode doesn't handle point features");const we={featureId:ae,feature:me,dragMoveLocation:Q.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:Q.coordPath?[Q.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(ae,we.selectedCoordPaths)),this.setSelected(ae),I.disable(this),this.setActionableState({trash:!0}),we},onStop:function(){I.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(Q,ae,me){Q.featureId===ae.properties.id?(ae.properties.active=S.activeStates.ACTIVE,me(ae),q(ae,{map:this.map,midpoints:!0,selectedPaths:Q.selectedCoordPaths}).forEach(me)):(ae.properties.active=S.activeStates.INACTIVE,me(ae)),this.fireActionable(Q)},onTrash:function(Q){Q.selectedCoordPaths.sort().reverse().forEach(ae=>Q.feature.removeCoordinate(ae)),this.fireUpdate(),Q.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(Q),!1===Q.feature.isValid()&&(this.deleteFeature([Q.featureId]),this.changeMode(S.modes.SIMPLE_SELECT,{}))},onMouseMove:function(Q,ae){const me=M.isActiveFeature(ae),we=K(ae),oe=0===Q.selectedCoordPaths.length;this.updateUIClasses(me&&oe||we&&!oe?{mouse:S.cursors.MOVE}:{mouse:S.cursors.NONE}),this.stopDragging(Q)},onMouseOut:function(Q){Q.dragMoving&&this.fireUpdate()}};ie.onTouchStart=ie.onMouseDown=function(Q,ae){return K(ae)?this.onVertex(Q,ae):M.isActiveFeature(ae)?this.onFeature(Q,ae):J(ae)?this.onMidpoint(Q,ae):void 0},ie.onDrag=function(Q,ae){if(!0!==Q.canDragMove)return;Q.dragMoving=!0,ae.originalEvent.stopPropagation();const me={lng:ae.lngLat.lng-Q.dragMoveLocation.lng,lat:ae.lngLat.lat-Q.dragMoveLocation.lat};Q.selectedCoordPaths.length>0?this.dragVertex(Q,ae,me):this.dragFeature(Q,ae,me),Q.dragMoveLocation=ae.lngLat},ie.onClick=function(Q,ae){return L(ae)?this.clickNoTarget(Q,ae):M.isActiveFeature(ae)?this.clickActiveFeature(Q,ae):v(ae)?this.clickInactive(Q,ae):void this.stopDragging(Q)},ie.onTap=function(Q,ae){return L(ae)?this.clickNoTarget(Q,ae):M.isActiveFeature(ae)?this.clickActiveFeature(Q,ae):v(ae)?this.clickInactive(Q,ae):void 0},ie.onTouchEnd=ie.onMouseUp=function(Q){Q.dragMoving&&this.fireUpdate(),this.stopDragging(Q)},Ee.exports=ie},3070:(Ee,X,O)=>{const L=O(8747),$=O(3873),v=O(4054),G=O(1319),q=O(5340),k={onSetup:function(I){const S=(I=I||{}).featureId;let M,H,K="forward";if(S){if(M=this.getFeature(S),!M)throw new Error("Could not find a feature with the provided featureId");let J=I.from;if(J&&"Feature"===J.type&&J.geometry&&"Point"===J.geometry.type&&(J=J.geometry),J&&"Point"===J.type&&J.coordinates&&2===J.coordinates.length&&(J=J.coordinates),!J||!Array.isArray(J))throw new Error("Please use the `from` property to indicate which point to continue the line from");const ie=M.coordinates.length-1;if(M.coordinates[ie][0]===J[0]&&M.coordinates[ie][1]===J[1])H=ie+1,M.addCoordinate(H,...M.coordinates[ie]);else{if(M.coordinates[0][0]!==J[0]||M.coordinates[0][1]!==J[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");K="backwards",H=0,M.addCoordinate(H,...M.coordinates[0])}}else M=this.newFeature({type:G.geojsonTypes.FEATURE,properties:{},geometry:{type:G.geojsonTypes.LINE_STRING,coordinates:[]}}),H=0,this.addFeature(M);return this.clearSelectedFeatures(),v.disable(this),this.updateUIClasses({mouse:G.cursors.ADD}),this.activateUIButton(G.types.LINE),this.setActionableState({trash:!0}),{line:M,currentVertexPosition:H,direction:K}},clickAnywhere:function(I,S){if(I.currentVertexPosition>0&&$(S,I.line.coordinates[I.currentVertexPosition-1])||"backwards"===I.direction&&$(S,I.line.coordinates[I.currentVertexPosition+1]))return this.changeMode(G.modes.SIMPLE_SELECT,{featureIds:[I.line.id]});this.updateUIClasses({mouse:G.cursors.ADD}),I.line.updateCoordinate(I.currentVertexPosition,S.lngLat.lng,S.lngLat.lat),"forward"===I.direction?(I.currentVertexPosition++,I.line.updateCoordinate(I.currentVertexPosition,S.lngLat.lng,S.lngLat.lat)):I.line.addCoordinate(0,S.lngLat.lng,S.lngLat.lat)},clickOnVertex:function(I){return this.changeMode(G.modes.SIMPLE_SELECT,{featureIds:[I.line.id]})},onMouseMove:function(I,S){I.line.updateCoordinate(I.currentVertexPosition,S.lngLat.lng,S.lngLat.lat),L.isVertex(S)&&this.updateUIClasses({mouse:G.cursors.POINTER})}};k.onTap=k.onClick=function(I,S){if(L.isVertex(S))return this.clickOnVertex(I,S);this.clickAnywhere(I,S)},k.onKeyUp=function(I,S){L.isEnterKey(S)?this.changeMode(G.modes.SIMPLE_SELECT,{featureIds:[I.line.id]}):L.isEscapeKey(S)&&(this.deleteFeature([I.line.id],{silent:!0}),this.changeMode(G.modes.SIMPLE_SELECT))},k.onStop=function(I){v.enable(this),this.activateUIButton(),void 0!==this.getFeature(I.line.id)&&(I.line.removeCoordinate(`${I.currentVertexPosition}`),I.line.isValid()?this.map.fire(G.events.CREATE,{features:[I.line.toGeoJSON()]}):(this.deleteFeature([I.line.id],{silent:!0}),this.changeMode(G.modes.SIMPLE_SELECT,{},{silent:!0})))},k.onTrash=function(I){this.deleteFeature([I.line.id],{silent:!0}),this.changeMode(G.modes.SIMPLE_SELECT)},k.toDisplayFeatures=function(I,S,M){const H=S.properties.id===I.line.id;if(S.properties.active=H?G.activeStates.ACTIVE:G.activeStates.INACTIVE,!H)return M(S);S.geometry.coordinates.length<2||(S.properties.meta=G.meta.FEATURE,M(q(I.line.id,S.geometry.coordinates["forward"===I.direction?S.geometry.coordinates.length-2:1],""+("forward"===I.direction?S.geometry.coordinates.length-2:1),!1)),M(S))},Ee.exports=k},7182:(Ee,X,O)=>{const L=O(8747),$=O(1319),v={onSetup:function(){const G=this.newFeature({type:$.geojsonTypes.FEATURE,properties:{},geometry:{type:$.geojsonTypes.POINT,coordinates:[]}});return this.addFeature(G),this.clearSelectedFeatures(),this.updateUIClasses({mouse:$.cursors.ADD}),this.activateUIButton($.types.POINT),this.setActionableState({trash:!0}),{point:G}},stopDrawingAndRemove:function(G){this.deleteFeature([G.point.id],{silent:!0}),this.changeMode($.modes.SIMPLE_SELECT)}};v.onTap=v.onClick=function(G,q){this.updateUIClasses({mouse:$.cursors.MOVE}),G.point.updateCoordinate("",q.lngLat.lng,q.lngLat.lat),this.map.fire($.events.CREATE,{features:[G.point.toGeoJSON()]}),this.changeMode($.modes.SIMPLE_SELECT,{featureIds:[G.point.id]})},v.onStop=function(G){this.activateUIButton(),G.point.getCoordinate().length||this.deleteFeature([G.point.id],{silent:!0})},v.toDisplayFeatures=function(G,q,k){const I=q.properties.id===G.point.id;if(q.properties.active=I?$.activeStates.ACTIVE:$.activeStates.INACTIVE,!I)return k(q)},v.onTrash=v.stopDrawingAndRemove,v.onKeyUp=function(G,q){if(L.isEscapeKey(q)||L.isEnterKey(q))return this.stopDrawingAndRemove(G,q)},Ee.exports=v},7615:(Ee,X,O)=>{const L=O(8747),$=O(4054),v=O(1319),G=O(3873),q=O(5340),k={onSetup:function(){const I=this.newFeature({type:v.geojsonTypes.FEATURE,properties:{},geometry:{type:v.geojsonTypes.POLYGON,coordinates:[[]]}});return this.addFeature(I),this.clearSelectedFeatures(),$.disable(this),this.updateUIClasses({mouse:v.cursors.ADD}),this.activateUIButton(v.types.POLYGON),this.setActionableState({trash:!0}),{polygon:I,currentVertexPosition:0}},clickAnywhere:function(I,S){if(I.currentVertexPosition>0&&G(S,I.polygon.coordinates[0][I.currentVertexPosition-1]))return this.changeMode(v.modes.SIMPLE_SELECT,{featureIds:[I.polygon.id]});this.updateUIClasses({mouse:v.cursors.ADD}),I.polygon.updateCoordinate(`0.${I.currentVertexPosition}`,S.lngLat.lng,S.lngLat.lat),I.currentVertexPosition++,I.polygon.updateCoordinate(`0.${I.currentVertexPosition}`,S.lngLat.lng,S.lngLat.lat)},clickOnVertex:function(I){return this.changeMode(v.modes.SIMPLE_SELECT,{featureIds:[I.polygon.id]})},onMouseMove:function(I,S){I.polygon.updateCoordinate(`0.${I.currentVertexPosition}`,S.lngLat.lng,S.lngLat.lat),L.isVertex(S)&&this.updateUIClasses({mouse:v.cursors.POINTER})}};k.onTap=k.onClick=function(I,S){return L.isVertex(S)?this.clickOnVertex(I,S):this.clickAnywhere(I,S)},k.onKeyUp=function(I,S){L.isEscapeKey(S)?(this.deleteFeature([I.polygon.id],{silent:!0}),this.changeMode(v.modes.SIMPLE_SELECT)):L.isEnterKey(S)&&this.changeMode(v.modes.SIMPLE_SELECT,{featureIds:[I.polygon.id]})},k.onStop=function(I){this.updateUIClasses({mouse:v.cursors.NONE}),$.enable(this),this.activateUIButton(),void 0!==this.getFeature(I.polygon.id)&&(I.polygon.removeCoordinate(`0.${I.currentVertexPosition}`),I.polygon.isValid()?this.map.fire(v.events.CREATE,{features:[I.polygon.toGeoJSON()]}):(this.deleteFeature([I.polygon.id],{silent:!0}),this.changeMode(v.modes.SIMPLE_SELECT,{},{silent:!0})))},k.toDisplayFeatures=function(I,S,M){const H=S.properties.id===I.polygon.id;if(S.properties.active=H?v.activeStates.ACTIVE:v.activeStates.INACTIVE,!H)return M(S);if(0===S.geometry.coordinates.length)return;const K=S.geometry.coordinates[0].length;if(!(K<3)){if(S.properties.meta=v.meta.FEATURE,M(q(I.polygon.id,S.geometry.coordinates[0][0],"0.0",!1)),K>3){const J=S.geometry.coordinates[0].length-3;M(q(I.polygon.id,S.geometry.coordinates[0][J],`0.${J}`,!1))}if(K<=4&&(M({type:v.geojsonTypes.FEATURE,properties:S.properties,geometry:{coordinates:[[S.geometry.coordinates[0][0][0],S.geometry.coordinates[0][0][1]],[S.geometry.coordinates[0][1][0],S.geometry.coordinates[0][1][1]]],type:v.geojsonTypes.LINE_STRING}}),3===K))return;return M(S)}},k.onTrash=function(I){this.deleteFeature([I.polygon.id],{silent:!0}),this.changeMode(v.modes.SIMPLE_SELECT)},Ee.exports=k},5073:(Ee,X,O)=>{Ee.exports={simple_select:O(3313),direct_select:O(4261),draw_point:O(7182),draw_polygon:O(7615),draw_line_string:O(3070)}},3083:(Ee,X,O)=>{const L=Ee.exports=O(2245);L.prototype.onSetup=function(){},L.prototype.onDrag=function(){},L.prototype.onClick=function(){},L.prototype.onMouseMove=function(){},L.prototype.onMouseDown=function(){},L.prototype.onMouseUp=function(){},L.prototype.onMouseOut=function(){},L.prototype.onKeyUp=function(){},L.prototype.onKeyDown=function(){},L.prototype.onTouchStart=function(){},L.prototype.onTouchMove=function(){},L.prototype.onTouchEnd=function(){},L.prototype.onTap=function(){},L.prototype.onStop=function(){},L.prototype.onTrash=function(){},L.prototype.onCombineFeature=function(){},L.prototype.onUncombineFeature=function(){},L.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")}},2245:(Ee,X,O)=>{const L=O(1319),$=O(2447),v=O(4158),G=O(4479),q=O(5165),k=O(5315),I=Ee.exports=function(S){this.map=S.map,this.drawConfig=JSON.parse(JSON.stringify(S.options||{})),this._ctx=S};I.prototype.setSelected=function(S){return this._ctx.store.setSelected(S)},I.prototype.setSelectedCoordinates=function(S){this._ctx.store.setSelectedCoordinates(S),S.reduce((M,H)=>(void 0===M[H.feature_id]&&(M[H.feature_id]=!0,this._ctx.store.get(H.feature_id).changed()),M),{})},I.prototype.getSelected=function(){return this._ctx.store.getSelected()},I.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},I.prototype.isSelected=function(S){return this._ctx.store.isSelected(S)},I.prototype.getFeature=function(S){return this._ctx.store.get(S)},I.prototype.select=function(S){return this._ctx.store.select(S)},I.prototype.deselect=function(S){return this._ctx.store.deselect(S)},I.prototype.deleteFeature=function(S,M={}){return this._ctx.store.delete(S,M)},I.prototype.addFeature=function(S){return this._ctx.store.add(S)},I.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},I.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},I.prototype.setActionableState=function(S={}){return this._ctx.events.actionable({trash:S.trash||!1,combineFeatures:S.combineFeatures||!1,uncombineFeatures:S.uncombineFeatures||!1})},I.prototype.changeMode=function(S,M={},H={}){return this._ctx.events.changeMode(S,M,H)},I.prototype.updateUIClasses=function(S){return this._ctx.ui.queueMapClasses(S)},I.prototype.activateUIButton=function(S){return this._ctx.ui.setActiveButton(S)},I.prototype.featuresAt=function(S,M,H="click"){if("click"!==H&&"touch"!==H)throw new Error("invalid buffer type");return $[H](S,M,this._ctx)},I.prototype.newFeature=function(S){const M=S.geometry.type;return M===L.geojsonTypes.POINT?new v(this._ctx,S):M===L.geojsonTypes.LINE_STRING?new G(this._ctx,S):M===L.geojsonTypes.POLYGON?new q(this._ctx,S):new k(this._ctx,S)},I.prototype.isInstanceOf=function(S,M){if(S===L.geojsonTypes.POINT)return M instanceof v;if(S===L.geojsonTypes.LINE_STRING)return M instanceof G;if(S===L.geojsonTypes.POLYGON)return M instanceof q;if("MultiFeature"===S)return M instanceof k;throw new Error(`Unknown feature class: ${S}`)},I.prototype.doRender=function(S){return this._ctx.store.featureChanged(S)}},3595:(Ee,X,O)=>{const L=O(3083),$={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},v=Object.keys($);Ee.exports=function(G){const q=Object.keys(G);return function(k,I={}){let S={};const M=q.reduce((K,J)=>(K[J]=G[J],K),new L(k));return{start:function(){S=M.onSetup(I),v.forEach(K=>{const J=$[K];let ie=()=>!1;G[J]&&(ie=()=>!0),this.on(K,ie,function H(K){return function(J){M[K](S,J)}}(J))})},stop:function(){M.onStop(S)},trash:function(){M.onTrash(S)},combineFeatures:function(){M.onCombineFeatures(S)},uncombineFeatures:function(){M.onUncombineFeatures(S)},render:function(K,J){M.toDisplayFeatures(S,K,J)}}}}},3313:(Ee,X,O)=>{const L=O(8747),$=O(4840),v=O(2120),G=O(6330),q=O(4054),k=O(3905),I=O(1319),S={onSetup:function(M){const H={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoveing:!1,canDragMove:!1,initiallySelectedFeatureIds:M.featureIds||[]};return this.setSelected(H.initiallySelectedFeatureIds.filter(K=>void 0!==this.getFeature(K))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),H},fireUpdate:function(){this.map.fire(I.events.UPDATE,{action:I.updateActions.MOVE,features:this.getSelected().map(M=>M.toGeoJSON())})},fireActionable:function(){const M=this.getSelected(),H=M.filter(Q=>this.isInstanceOf("MultiFeature",Q));let K=!1;if(M.length>1){K=!0;const Q=M[0].type.replace("Multi","");M.forEach(ae=>{ae.type.replace("Multi","")!==Q&&(K=!1)})}this.setActionableState({combineFeatures:K,uncombineFeatures:H.length>0,trash:M.length>0})},getUniqueIds:function(M){return M.length?M.map(K=>K.properties.id).filter(K=>void 0!==K).reduce((K,J)=>(K.add(J),K),new G).values():[]},stopExtendedInteractions:function(M){M.boxSelectElement&&(M.boxSelectElement.parentNode&&M.boxSelectElement.parentNode.removeChild(M.boxSelectElement),M.boxSelectElement=null),this.map.dragPan.enable(),M.boxSelecting=!1,M.canBoxSelect=!1,M.dragMoving=!1,M.canDragMove=!1},onStop:function(){q.enable(this)},onMouseMove:function(M){return this.stopExtendedInteractions(M)},onMouseOut:function(M){if(M.dragMoving)return this.fireUpdate()}};S.onTap=S.onClick=function(M,H){return L.noTarget(H)?this.clickAnywhere(M,H):L.isOfMetaType(I.meta.VERTEX)(H)?this.clickOnVertex(M,H):L.isFeature(H)?this.clickOnFeature(M,H):void 0},S.clickAnywhere=function(M){const H=this.getSelectedIds();H.length&&(this.clearSelectedFeatures(),H.forEach(K=>this.doRender(K))),q.enable(this),this.stopExtendedInteractions(M)},S.clickOnVertex=function(M,H){this.changeMode(I.modes.DIRECT_SELECT,{featureId:H.featureTarget.properties.parent,coordPath:H.featureTarget.properties.coord_path,startPos:H.lngLat}),this.updateUIClasses({mouse:I.cursors.MOVE})},S.startOnActiveFeature=function(M,H){this.stopExtendedInteractions(M),this.map.dragPan.disable(),this.doRender(H.featureTarget.properties.id),M.canDragMove=!0,M.dragMoveLocation=H.lngLat},S.clickOnFeature=function(M,H){q.disable(this),this.stopExtendedInteractions(M);const K=L.isShiftDown(H),J=this.getSelectedIds(),ie=H.featureTarget.properties.id,Q=this.isSelected(ie);if(!K&&Q&&this.getFeature(ie).type!==I.geojsonTypes.POINT)return this.changeMode(I.modes.DIRECT_SELECT,{featureId:ie});Q&&K?(this.deselect(ie),this.updateUIClasses({mouse:I.cursors.POINTER}),1===J.length&&q.enable(this)):!Q&&K?(this.select(ie),this.updateUIClasses({mouse:I.cursors.MOVE})):!Q&&!K&&(J.forEach(ae=>this.doRender(ae)),this.setSelected(ie),this.updateUIClasses({mouse:I.cursors.MOVE})),this.doRender(ie)},S.onMouseDown=function(M,H){return L.isActiveFeature(H)?this.startOnActiveFeature(M,H):this.drawConfig.boxSelect&&L.isShiftMousedown(H)?this.startBoxSelect(M,H):void 0},S.startBoxSelect=function(M,H){this.stopExtendedInteractions(M),this.map.dragPan.disable(),M.boxSelectStartLocation=$(H.originalEvent,this.map.getContainer()),M.canBoxSelect=!0},S.onTouchStart=function(M,H){if(L.isActiveFeature(H))return this.startOnActiveFeature(M,H)},S.onDrag=function(M,H){return M.canDragMove?this.dragMove(M,H):this.drawConfig.boxSelect&&M.canBoxSelect?this.whileBoxSelect(M,H):void 0},S.whileBoxSelect=function(M,H){M.boxSelecting=!0,this.updateUIClasses({mouse:I.cursors.ADD}),M.boxSelectElement||(M.boxSelectElement=document.createElement("div"),M.boxSelectElement.classList.add(I.classes.BOX_SELECT),this.map.getContainer().appendChild(M.boxSelectElement));const K=$(H.originalEvent,this.map.getContainer()),J=Math.min(M.boxSelectStartLocation.x,K.x),ie=Math.max(M.boxSelectStartLocation.x,K.x),Q=Math.min(M.boxSelectStartLocation.y,K.y),ae=Math.max(M.boxSelectStartLocation.y,K.y),me=`translate(${J}px, ${Q}px)`;M.boxSelectElement.style.transform=me,M.boxSelectElement.style.WebkitTransform=me,M.boxSelectElement.style.width=ie-J+"px",M.boxSelectElement.style.height=ae-Q+"px"},S.dragMove=function(M,H){M.dragMoving=!0,H.originalEvent.stopPropagation();const K={lng:H.lngLat.lng-M.dragMoveLocation.lng,lat:H.lngLat.lat-M.dragMoveLocation.lat};k(this.getSelected(),K),M.dragMoveLocation=H.lngLat},S.onMouseUp=function(M,H){if(M.dragMoving)this.fireUpdate();else if(M.boxSelecting){const K=[M.boxSelectStartLocation,$(H.originalEvent,this.map.getContainer())],J=this.featuresAt(null,K,"click"),ie=this.getUniqueIds(J).filter(Q=>!this.isSelected(Q));ie.length&&(this.select(ie),ie.forEach(Q=>this.doRender(Q)),this.updateUIClasses({mouse:I.cursors.MOVE}))}this.stopExtendedInteractions(M)},S.toDisplayFeatures=function(M,H,K){H.properties.active=this.isSelected(H.properties.id)?I.activeStates.ACTIVE:I.activeStates.INACTIVE,K(H),this.fireActionable(),H.properties.active===I.activeStates.ACTIVE&&H.geometry.type!==I.geojsonTypes.POINT&&v(H).forEach(K)},S.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},S.onCombineFeatures=function(){const M=this.getSelected();if(0===M.length||M.length<2)return;const H=[],K=[],J=M[0].type.replace("Multi","");for(let ie=0;ie<M.length;ie++){const Q=M[ie];if(Q.type.replace("Multi","")!==J)return;Q.type.includes("Multi")?Q.getCoordinates().forEach(ae=>{H.push(ae)}):H.push(Q.getCoordinates()),K.push(Q.toGeoJSON())}if(K.length>1){const ie=this.newFeature({type:I.geojsonTypes.FEATURE,properties:K[0].properties,geometry:{type:`Multi${J}`,coordinates:H}});this.addFeature(ie),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([ie.id]),this.map.fire(I.events.COMBINE_FEATURES,{createdFeatures:[ie.toGeoJSON()],deletedFeatures:K})}this.fireActionable()},S.onUncombineFeatures=function(){const M=this.getSelected();if(0===M.length)return;const H=[],K=[];for(let J=0;J<M.length;J++){const ie=M[J];this.isInstanceOf("MultiFeature",ie)&&(ie.getFeatures().forEach(Q=>{this.addFeature(Q),Q.properties=ie.properties,H.push(Q.toGeoJSON()),this.select([Q.id])}),this.deleteFeature(ie.id,{silent:!0}),K.push(ie.toGeoJSON()))}H.length>1&&this.map.fire(I.events.UNCOMBINE_FEATURES,{createdFeatures:H,deletedFeatures:K}),this.fireActionable()},Ee.exports=S},9043:(Ee,X,O)=>{const L=O(4703),$=O(1319),v={defaultMode:$.modes.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:O(6313),modes:O(5073),controls:{},userProperties:!1},G={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},q={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function k(I,S){return I.map(M=>M.source?M:L(M,{id:`${M.id}.${S}`,source:"hot"===S?$.sources.HOT:$.sources.COLD}))}Ee.exports=function(I={}){let S=L(I);return I.controls||(S.controls={}),S.controls=L(!1===I.displayControlsDefault?q:G,I.controls),S=L(v,S),S.styles=k(S.styles,"cold").concat(k(S.styles,"hot")),S}},1300:(Ee,X,O)=>{const L=O(1319);Ee.exports=function(){const v=this;if(!v.ctx.map||void 0===v.ctx.map.getSource(L.sources.HOT))return K();const q=v.ctx.events.currentModeName();v.ctx.ui.queueMapClasses({mode:q});let k=[],I=[];v.isDirty?I=v.getAllIds():(k=v.getChangedIds().filter(J=>void 0!==v.get(J)),I=v.sources.hot.filter(J=>J.properties.id&&-1===k.indexOf(J.properties.id)&&void 0!==v.get(J.properties.id)).map(J=>J.properties.id)),v.sources.hot=[];const S=v.sources.cold.length;v.sources.cold=v.isDirty?[]:v.sources.cold.filter(J=>-1===k.indexOf(J.properties.id||J.properties.parent));const M=S!==v.sources.cold.length||I.length>0;function H(J,ie){const ae=v.get(J).internal(q);v.ctx.events.currentModeRender(ae,me=>{v.sources[ie].push(me)})}if(k.forEach(J=>H(J,"hot")),I.forEach(J=>H(J,"cold")),M&&v.ctx.map.getSource(L.sources.COLD).setData({type:L.geojsonTypes.FEATURE_COLLECTION,features:v.sources.cold}),v.ctx.map.getSource(L.sources.HOT).setData({type:L.geojsonTypes.FEATURE_COLLECTION,features:v.sources.hot}),v._emitSelectionChange&&(v.ctx.map.fire(L.events.SELECTION_CHANGE,{features:v.getSelected().map(J=>J.toGeoJSON()),points:v.getSelectedCoordinates().map(J=>({type:L.geojsonTypes.FEATURE,properties:{},geometry:{type:L.geojsonTypes.POINT,coordinates:J.coordinates}}))}),v._emitSelectionChange=!1),v._deletedFeaturesToEmit.length){const J=v._deletedFeaturesToEmit.map(ie=>ie.toGeoJSON());v._deletedFeaturesToEmit=[],v.ctx.map.fire(L.events.DELETE,{features:J})}function K(){v.isDirty=!1,v.clearChangedIds()}K(),v.ctx.map.fire(L.events.RENDER,{})}},1726:(Ee,X,O)=>{const L=O(5262),$=O(2152),v=O(2605),G=O(1319),q=O(4703);Ee.exports=function(k){let I=null,S=null;const M={onRemove:function(){return k.map.off("load",M.connect),clearInterval(S),M.removeLayers(),k.store.restoreMapConfig(),k.ui.removeButtons(),k.events.removeEventListeners(),k.ui.clearMapClasses(),k.map=null,k.container=null,k.store=null,I&&I.parentNode&&I.parentNode.removeChild(I),I=null,this},connect:function(){k.map.off("load",M.connect),clearInterval(S),M.addLayers(),k.store.storeMapConfig(),k.events.addEventListeners()},onAdd:function(H){{const K=H.fire;H.fire=function(J,ie){let Q=arguments;return 1===K.length&&1!==arguments.length&&(Q=[q({},{type:J},ie)]),K.apply(H,Q)}}return k.map=H,k.events=L(k),k.ui=v(k),k.container=H.getContainer(),k.store=new $(k),I=k.ui.addButtons(),k.options.boxSelect&&(H.boxZoom.disable(),H.dragPan.disable(),H.dragPan.enable()),H.loaded()?M.connect():(H.on("load",M.connect),S=setInterval(()=>{H.loaded()&&M.connect()},16)),k.events.start(),I},addLayers:function(){k.map.addSource(G.sources.COLD,{data:{type:G.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),k.map.addSource(G.sources.HOT,{data:{type:G.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),k.options.styles.forEach(H=>{k.map.addLayer(H)}),k.store.setDirty(!0),k.store.render()},removeLayers:function(){k.options.styles.forEach(H=>{k.map.getLayer(H.id)&&k.map.removeLayer(H.id)}),k.map.getSource(G.sources.COLD)&&k.map.removeSource(G.sources.COLD),k.map.getSource(G.sources.HOT)&&k.map.removeSource(G.sources.HOT)}};return k.setup=M,M}},2152:(Ee,X,O)=>{const L=O(5479),$=O(859),v=O(6330),G=O(1300),q=O(1319).interactions,k=Ee.exports=function(S){this._features={},this._featureIds=new v,this._selectedFeatureIds=new v,this._selectedCoordinates=[],this._changedFeatureIds=new v,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=S,this.sources={hot:[],cold:[]},this.render=L(G,16,this),this.isDirty=!1};function I(S){const M=this._selectedCoordinates.filter(H=>this._selectedFeatureIds.has(H.feature_id));this._selectedCoordinates.length!==M.length&&!S.silent&&(this._emitSelectionChange=!0),this._selectedCoordinates=M}k.prototype.createRenderBatch=function(){const S=this.render;let M=0;return this.render=function(){M++},()=>{this.render=S,M>0&&this.render()}},k.prototype.setDirty=function(){return this.isDirty=!0,this},k.prototype.featureChanged=function(S){return this._changedFeatureIds.add(S),this},k.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},k.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},k.prototype.getAllIds=function(){return this._featureIds.values()},k.prototype.add=function(S){return this.featureChanged(S.id),this._features[S.id]=S,this._featureIds.add(S.id),this},k.prototype.delete=function(S,M={}){return $(S).forEach(H=>{!this._featureIds.has(H)||(this._featureIds.delete(H),this._selectedFeatureIds.delete(H),M.silent||-1===this._deletedFeaturesToEmit.indexOf(this._features[H])&&this._deletedFeaturesToEmit.push(this._features[H]),delete this._features[H],this.isDirty=!0)}),I.call(this,M),this},k.prototype.get=function(S){return this._features[S]},k.prototype.getAll=function(){return Object.keys(this._features).map(S=>this._features[S])},k.prototype.select=function(S,M={}){return $(S).forEach(H=>{this._selectedFeatureIds.has(H)||(this._selectedFeatureIds.add(H),this._changedFeatureIds.add(H),M.silent||(this._emitSelectionChange=!0))}),this},k.prototype.deselect=function(S,M={}){return $(S).forEach(H=>{!this._selectedFeatureIds.has(H)||(this._selectedFeatureIds.delete(H),this._changedFeatureIds.add(H),M.silent||(this._emitSelectionChange=!0))}),I.call(this,M),this},k.prototype.clearSelected=function(S={}){return this.deselect(this._selectedFeatureIds.values(),{silent:S.silent}),this},k.prototype.setSelected=function(S,M={}){return S=$(S),this.deselect(this._selectedFeatureIds.values().filter(H=>-1===S.indexOf(H)),{silent:M.silent}),this.select(S.filter(H=>!this._selectedFeatureIds.has(H)),{silent:M.silent}),this},k.prototype.setSelectedCoordinates=function(S){return this._selectedCoordinates=S,this._emitSelectionChange=!0,this},k.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},k.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},k.prototype.getSelected=function(){return this._selectedFeatureIds.values().map(S=>this.get(S))},k.prototype.getSelectedCoordinates=function(){return this._selectedCoordinates.map(M=>({coordinates:this.get(M.feature_id).getCoordinate(M.coord_path)}))},k.prototype.isSelected=function(S){return this._selectedFeatureIds.has(S)},k.prototype.setFeatureProperty=function(S,M,H){this.get(S).setProperty(M,H),this.featureChanged(S)},k.prototype.storeMapConfig=function(){q.forEach(S=>{this.ctx.map[S]&&(this._mapInitialConfig[S]=this.ctx.map[S].isEnabled())})},k.prototype.restoreMapConfig=function(){Object.keys(this._mapInitialConfig).forEach(S=>{this._mapInitialConfig[S]?this.ctx.map[S].enable():this.ctx.map[S].disable()})},k.prototype.getInitialConfigValue=function(S){return void 0===this._mapInitialConfig[S]||this._mapInitialConfig[S]}},2605:(Ee,X,O)=>{const L=O(4703),$=O(1319),v=["mode","feature","mouse"];Ee.exports=function(G){const q={};let k=null,I={mode:null,feature:null,mouse:null},S={mode:null,feature:null,mouse:null};function H(we){S=L(S,we)}function K(){if(!G.container)return;const we=[],oe=[];v.forEach(fe=>{S[fe]!==I[fe]&&(we.push(`${fe}-${I[fe]}`),null!==S[fe]&&oe.push(`${fe}-${S[fe]}`))}),we.length>0&&G.container.classList.remove.apply(G.container.classList,we),oe.length>0&&G.container.classList.add.apply(G.container.classList,oe),I=L(I,S)}function J(we,oe={}){const fe=document.createElement("button");return fe.className=`${$.classes.CONTROL_BUTTON} ${oe.className}`,fe.setAttribute("title",oe.title),oe.container.appendChild(fe),fe.addEventListener("click",pe=>{pe.preventDefault(),pe.stopPropagation(),pe.target!==k?(Q(we),oe.onActivate()):ie()},!0),fe}function ie(){!k||(k.classList.remove($.classes.ACTIVE_BUTTON),k=null)}function Q(we){ie();const oe=q[we];!oe||oe&&"trash"!==we&&(oe.classList.add($.classes.ACTIVE_BUTTON),k=oe)}return{setActiveButton:Q,queueMapClasses:H,updateMapClasses:K,clearMapClasses:function M(){H({mode:null,feature:null,mouse:null}),K()},addButtons:function ae(){const we=G.options.controls,oe=document.createElement("div");return oe.className=`${$.classes.CONTROL_GROUP} ${$.classes.CONTROL_BASE}`,we&&(we[$.types.LINE]&&(q[$.types.LINE]=J($.types.LINE,{container:oe,className:$.classes.CONTROL_BUTTON_LINE,title:"LineString tool "+(G.options.keybindings?"(l)":""),onActivate:()=>G.events.changeMode($.modes.DRAW_LINE_STRING)})),we[$.types.POLYGON]&&(q[$.types.POLYGON]=J($.types.POLYGON,{container:oe,className:$.classes.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(G.options.keybindings?"(p)":""),onActivate:()=>G.events.changeMode($.modes.DRAW_POLYGON)})),we[$.types.POINT]&&(q[$.types.POINT]=J($.types.POINT,{container:oe,className:$.classes.CONTROL_BUTTON_POINT,title:"Marker tool "+(G.options.keybindings?"(m)":""),onActivate:()=>G.events.changeMode($.modes.DRAW_POINT)})),we.trash&&(q.trash=J("trash",{container:oe,className:$.classes.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:()=>{G.events.trash()}})),we.combine_features&&(q.combine_features=J("combineFeatures",{container:oe,className:$.classes.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:()=>{G.events.combineFeatures()}})),we.uncombine_features&&(q.uncombine_features=J("uncombineFeatures",{container:oe,className:$.classes.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:()=>{G.events.uncombineFeatures()}}))),oe},removeButtons:function me(){Object.keys(q).forEach(we=>{const oe=q[we];oe.parentNode&&oe.parentNode.removeChild(oe),delete q[we]})}}}},8714:Ee=>{Ee.exports=function X(O){switch(O&&O.type||null){case"FeatureCollection":return O.features=O.features.reduce(function(L,$){return L.concat(X($))},[]),O;case"Feature":return O.geometry?X(O.geometry).map(function(L){var $={type:"Feature",properties:JSON.parse(JSON.stringify(O.properties)),geometry:L};return void 0!==O.id&&($.id=O.id),$}):O;case"MultiPoint":return O.coordinates.map(function(L){return{type:"Point",coordinates:L}});case"MultiPolygon":return O.coordinates.map(function(L){return{type:"Polygon",coordinates:L}});case"MultiLineString":return O.coordinates.map(function(L){return{type:"LineString",coordinates:L}});case"GeometryCollection":return O.geometries.map(X).reduce(function(L,$){return L.concat($)},[]);case"Point":case"Polygon":case"LineString":return[O]}}},4987:function(Ee){Ee.exports=function(){"use strict";var X,O,L;function $(v,G){if(X)if(O){var q="var sharedChunk = {}; ("+X+")(sharedChunk); ("+O+")(sharedChunk);",k={};X(k),L=G(k),typeof window<"u"&&(L.workerUrl=window.URL.createObjectURL(new Blob([q],{type:"text/javascript"})))}else O=G;else X=G}return $(0,function(v){function G(u,c){return u(c={exports:{}},c.exports),c.exports}var q=k;function k(u,c,h,b){this.cx=3*u,this.bx=3*(h-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(b-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=b,this.p2x=h,this.p2y=b}k.prototype.sampleCurveX=function(u){return((this.ax*u+this.bx)*u+this.cx)*u},k.prototype.sampleCurveY=function(u){return((this.ay*u+this.by)*u+this.cy)*u},k.prototype.sampleCurveDerivativeX=function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},k.prototype.solveCurveX=function(u,c){var h,b,x,C,A;for(void 0===c&&(c=1e-6),x=u,A=0;A<8;A++){if(C=this.sampleCurveX(x)-u,Math.abs(C)<c)return x;var V=this.sampleCurveDerivativeX(x);if(Math.abs(V)<1e-6)break;x-=C/V}if((x=u)<(h=0))return h;if(x>(b=1))return b;for(;h<b;){if(C=this.sampleCurveX(x),Math.abs(C-u)<c)return x;u>C?h=x:b=x,x=.5*(b-h)+h}return x},k.prototype.solve=function(u,c){return this.sampleCurveY(this.solveCurveX(u,c))};var I=S;function S(u,c){this.x=u,this.y=c}S.prototype={clone:function(){return new S(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,c){return this.clone()._rotateAround(u,c)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var c=u.x-this.x,h=u.y-this.y;return c*c+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,c){return Math.atan2(this.x*c-this.y*u,this.x*u+this.y*c)},_matMult:function(u){var c=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=c,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var c=Math.cos(u),h=Math.sin(u),b=h*this.x+c*this.y;return this.x=c*this.x-h*this.y,this.y=b,this},_rotateAround:function(u,c){var h=Math.cos(u),b=Math.sin(u),x=c.y+b*(this.x-c.x)+h*(this.y-c.y);return this.x=c.x+h*(this.x-c.x)-b*(this.y-c.y),this.y=x,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},S.convert=function(u){return u instanceof S?u:Array.isArray(u)?new S(u[0],u[1]):u};var M=typeof self<"u"?self:{},H=Math.pow(2,53)-1;function K(u,c,h,b){var x=new q(u,c,h,b);return function(C){return x.solve(C)}}var J=K(.25,.1,.25,1);function ie(u,c,h){return Math.min(h,Math.max(c,u))}function Q(u,c,h){var b=h-c,x=((u-c)%b+b)%b+c;return x===c?h:x}function ae(u){for(var c=[],h=arguments.length-1;h-- >0;)c[h]=arguments[h+1];for(var b=0,x=c;b<x.length;b+=1){var C=x[b];for(var A in C)u[A]=C[A]}return u}var me=1;function we(){return me++}function oe(){return function u(c){return c?(c^16*Math.random()>>c/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,u)}()}function fe(u){return!!u&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(u)}function pe(u,c){u.forEach(function(h){c[h]&&(c[h]=c[h].bind(c))})}function Ce(u,c){return-1!==u.indexOf(c,u.length-c.length)}function qe(u,c,h){var b={};for(var x in u)b[x]=c.call(h||this,u[x],x,u);return b}function He(u,c,h){var b={};for(var x in u)c.call(h||this,u[x],x,u)&&(b[x]=u[x]);return b}function ze(u){return Array.isArray(u)?u.map(ze):"object"==typeof u&&u?qe(u,ze):u}var P={};function N(u){P[u]||(typeof console<"u"&&console.warn(u),P[u]=!0)}function F(u,c,h){return(h.y-u.y)*(c.x-u.x)>(c.y-u.y)*(h.x-u.x)}function z(u){for(var c=0,h=0,b=u.length,x=b-1,C=void 0,A=void 0;h<b;x=h++)c+=((A=u[x]).x-(C=u[h]).x)*(C.y+A.y);return c}function ee(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function W(u){var c={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(b,x,C,A){var V=C||A;return c[x]=!V||V.toLowerCase(),""}),c["max-age"]){var h=parseInt(c["max-age"],10);isNaN(h)?delete c["max-age"]:c["max-age"]=h}return c}var ve=null;function Je(u){if(null==ve){var c=u.navigator?u.navigator.userAgent:null;ve=!!u.safari||!(!c||!(/\b(iPad|iPhone|iPod)\b/.test(c)||c.match("Safari")&&!c.match("Chrome")))}return ve}function dt(u){try{var c=M[u];return c.setItem("_mapbox_test_",1),c.removeItem("_mapbox_test_"),!0}catch{return!1}}var Ie,At,Rt,rt,Et=M.performance&&M.performance.now?M.performance.now.bind(M.performance):Date.now.bind(Date),sn=M.requestAnimationFrame||M.mozRequestAnimationFrame||M.webkitRequestAnimationFrame||M.msRequestAnimationFrame,$t=M.cancelAnimationFrame||M.mozCancelAnimationFrame||M.webkitCancelAnimationFrame||M.msCancelAnimationFrame,kn={now:Et,frame:function(u){var c=sn(u);return{cancel:function(){return $t(c)}}},getImageData:function(u,c){void 0===c&&(c=0);var h=M.document.createElement("canvas"),b=h.getContext("2d");if(!b)throw new Error("failed to create canvas 2d context");return h.width=u.width,h.height=u.height,b.drawImage(u,0,0,u.width,u.height),b.getImageData(-c,-c,u.width+2*c,u.height+2*c)},resolveURL:function(u){return Ie||(Ie=M.document.createElement("a")),Ie.href=u,Ie.href},hardwareConcurrency:M.navigator&&M.navigator.hardwareConcurrency||4,get devicePixelRatio(){return M.devicePixelRatio},get prefersReducedMotion(){return!!M.matchMedia&&(null==At&&(At=M.matchMedia("(prefers-reduced-motion: reduce)")),At.matches)}},Nt={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},Bn={supported:!1,testSupport:function(u){!Nn&&rt&&(ar?Zt(u):Rt=u)}},Nn=!1,ar=!1;function Zt(u){var c=u.createTexture();u.bindTexture(u.TEXTURE_2D,c);try{if(u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,rt),u.isContextLost())return;Bn.supported=!0}catch{}u.deleteTexture(c),Nn=!0}M.document&&((rt=M.document.createElement("img")).onload=function(){Rt&&Zt(Rt),Rt=null,ar=!0},rt.onerror=function(){Nn=!0,Rt=null},rt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ne="01",er=function(u,c){this._transformRequestFn=u,this._customAccessToken=c,this._createSkuToken()};function lr(u){return 0===u.indexOf("mapbox:")}er.prototype._createSkuToken=function(){var u=function(){for(var c="",h=0;h<10;h++)c+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ne,c].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=u.token,this._skuTokenExpiresAt=u.tokenExpiresAt},er.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},er.prototype.transformRequest=function(u,c){return this._transformRequestFn&&this._transformRequestFn(u,c)||{url:u}},er.prototype.normalizeStyleURL=function(u,c){if(!lr(u))return u;var h=It(u);return h.path="/styles/v1"+h.path,this._makeAPIURL(h,this._customAccessToken||c)},er.prototype.normalizeGlyphsURL=function(u,c){if(!lr(u))return u;var h=It(u);return h.path="/fonts/v1"+h.path,this._makeAPIURL(h,this._customAccessToken||c)},er.prototype.normalizeSourceURL=function(u,c){if(!lr(u))return u;var h=It(u);return h.path="/v4/"+h.authority+".json",h.params.push("secure"),this._makeAPIURL(h,this._customAccessToken||c)},er.prototype.normalizeSpriteURL=function(u,c,h,b){var x=It(u);return lr(u)?(x.path="/styles/v1"+x.path+"/sprite"+c+h,this._makeAPIURL(x,this._customAccessToken||b)):(x.path+=""+c+h,ka(x))},er.prototype.normalizeTileURL=function(u,c){if(this._isSkuTokenExpired()&&this._createSkuToken(),u&&!lr(u))return u;var h=It(u);h.path=h.path.replace(/(\.(png|jpg)\d*)(?=$)/,(kn.devicePixelRatio>=2||512===c?"@2x":"")+(Bn.supported?".webp":"$1")),h.path=h.path.replace(/^.+\/v4\//,"/"),h.path="/v4"+h.path;var b=this._customAccessToken||function(x){for(var C=0,A=x;C<A.length;C+=1){var V=A[C].match(/^access_token=(.*)$/);if(V)return V[1]}return null}(h.params)||Nt.ACCESS_TOKEN;return Nt.REQUIRE_ACCESS_TOKEN&&b&&this._skuToken&&h.params.push("sku="+this._skuToken),this._makeAPIURL(h,b)},er.prototype.canonicalizeTileURL=function(u,c){var h=It(u);if(!h.path.match(/(^\/v4\/)/)||!h.path.match(/\.[\w]+$/))return u;var b="mapbox://tiles/";b+=h.path.replace("/v4/","");var x=h.params;return c&&(x=x.filter(function(C){return!C.match(/^access_token=/)})),x.length&&(b+="?"+x.join("&")),b},er.prototype.canonicalizeTileset=function(u,c){for(var h=!!c&&lr(c),b=[],x=0,C=u.tiles||[];x<C.length;x+=1){var A=C[x];Qi(A)?b.push(this.canonicalizeTileURL(A,h)):b.push(A)}return b},er.prototype._makeAPIURL=function(u,c){var h="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",b=It(Nt.API_URL);if(u.protocol=b.protocol,u.authority=b.authority,"http"===u.protocol){var x=u.params.indexOf("secure");x>=0&&u.params.splice(x,1)}if("/"!==b.path&&(u.path=""+b.path+u.path),!Nt.REQUIRE_ACCESS_TOKEN)return ka(u);if(!(c=c||Nt.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+h);if("s"===c[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+h);return u.params=u.params.filter(function(C){return-1===C.indexOf("access_token")}),u.params.push("access_token="+c),ka(u)},er.prototype.setTransformRequest=function(u){this._transformRequestFn=u};var Ti=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Qi(u){return Ti.test(u)}var kt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function It(u){var c=u.match(kt);if(!c)throw new Error("Unable to parse URL object");return{protocol:c[1],authority:c[2],path:c[3]||"/",params:c[4]?c[4].split("&"):[]}}function ka(u){var c=u.params.length?"?"+u.params.join("&"):"";return u.protocol+"://"+u.authority+u.path+c}function Le(u){if(!u)return null;var c=u.split(".");if(!c||3!==c.length)return null;try{return JSON.parse(decodeURIComponent(M.atob(c[1]).split("").map(function(h){return"%"+("00"+h.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var le=function(u){this.type=u,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};le.prototype.getStorageKey=function(u){var c,h=Le(Nt.ACCESS_TOKEN);return c=h&&h.u?M.btoa(encodeURIComponent(h.u).replace(/%([0-9A-F]{2})/g,function(b,x){return String.fromCharCode(Number("0x"+x))})):Nt.ACCESS_TOKEN||"",u?"mapbox.eventData."+u+":"+c:"mapbox.eventData:"+c},le.prototype.fetchEventData=function(){var u=dt("localStorage"),c=this.getStorageKey(),h=this.getStorageKey("uuid");if(u)try{var b=M.localStorage.getItem(c);b&&(this.eventData=JSON.parse(b));var x=M.localStorage.getItem(h);x&&(this.anonId=x)}catch{N("Unable to read from LocalStorage")}},le.prototype.saveEventData=function(){var u=dt("localStorage"),c=this.getStorageKey(),h=this.getStorageKey("uuid");if(u)try{M.localStorage.setItem(h,this.anonId),Object.keys(this.eventData).length>=1&&M.localStorage.setItem(c,JSON.stringify(this.eventData))}catch{N("Unable to write to LocalStorage")}},le.prototype.processRequests=function(u){},le.prototype.postEvent=function(u,c,h,b){var x=this;if(Nt.EVENTS_URL){var C=It(Nt.EVENTS_URL);C.params.push("access_token="+(b||Nt.ACCESS_TOKEN||""));var A={event:this.type,created:new Date(u).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.15.3",skuId:ne,userId:this.anonId},V=c?ae(A,c):A,Y={url:ka(C),headers:{"Content-Type":"text/plain"},body:JSON.stringify([V])};this.pendingRequest=he(Y,function(re){x.pendingRequest=null,h(re),x.saveEventData(),x.processRequests(b)})}},le.prototype.queueRequest=function(u,c){this.queue.push(u),this.processRequests(c)};var ce,Ke,_t=function(u){function c(){u.call(this,"map.load"),this.success={},this.skuToken=""}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.postMapLoadEvent=function(h,b,x,C){this.skuToken=x,(Nt.EVENTS_URL&&C||Nt.ACCESS_TOKEN&&Array.isArray(h)&&h.some(function(A){return lr(A)||Qi(A)}))&&this.queueRequest({id:b,timestamp:Date.now()},C)},c.prototype.processRequests=function(h){var b=this;if(!this.pendingRequest&&0!==this.queue.length){var x=this.queue.shift(),C=x.id,A=x.timestamp;C&&this.success[C]||(this.anonId||this.fetchEventData(),fe(this.anonId)||(this.anonId=oe()),this.postEvent(A,{skuToken:this.skuToken},function(V){V||C&&(b.success[C]=!0)},h))}},c}(le),Gt=new(function(u){function c(h){u.call(this,"appUserTurnstile"),this._customAccessToken=h}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.postTurnstileEvent=function(h,b){Nt.EVENTS_URL&&Nt.ACCESS_TOKEN&&Array.isArray(h)&&h.some(function(x){return lr(x)||Qi(x)})&&this.queueRequest(Date.now(),b)},c.prototype.processRequests=function(h){var b=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var x=Le(Nt.ACCESS_TOKEN),C=x?x.u:Nt.ACCESS_TOKEN,A=C!==this.eventData.tokenU;fe(this.anonId)||(this.anonId=oe(),A=!0);var V=this.queue.shift();if(this.eventData.lastSuccess){var Y=new Date(this.eventData.lastSuccess),re=new Date(V),ue=(V-this.eventData.lastSuccess)/864e5;A=A||ue>=1||ue<-1||Y.getDate()!==re.getDate()}else A=!0;if(!A)return this.processRequests();this.postEvent(V,{"enabled.telemetry":!1},function(de){de||(b.eventData.lastSuccess=V,b.eventData.tokenU=C)},h)}},c}(le)),Ht=Gt.postTurnstileEvent.bind(Gt),Ir=new _t,yr=Ir.postMapLoadEvent.bind(Ir),ei=500,ni=50;function Hr(){M.caches&&!ce&&(ce=M.caches.open("mapbox-tiles"))}function Bs(u){var c=u.indexOf("?");return c<0?u:u.slice(0,c)}var ls,xo=1/0;function Cr(){return null==ls&&(ls=M.OffscreenCanvas&&new M.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof M.createImageBitmap),ls}var ml={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ml);var Wu=function(u){function c(h,b,x){401===b&&Qi(x)&&(h+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),u.call(this,h),this.status=b,this.url=x,this.name=this.constructor.name,this.message=h}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},c}(Error),fu=ee()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===M.location.protocol?M.parent:M).location.href};function ta(u,c){var h,b=new M.AbortController,x=new M.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:fu(),signal:b.signal}),C=!1,A=!1,V=(h=x.url).indexOf("sku=")>0&&Qi(h);"json"===u.type&&x.headers.set("Accept","application/json");var Y=function(ue,de,be){if(!A){if(ue&&"SecurityError"!==ue.message&&N(ue),de&&be)return re(de);var Pe=Date.now();M.fetch(x).then(function(Ne){if(Ne.ok){var Fe=V?Ne.clone():null;return re(Ne,Fe,Pe)}return c(new Wu(Ne.statusText,Ne.status,u.url))}).catch(function(Ne){20!==Ne.code&&c(new Error(Ne.message))})}},re=function(ue,de,be){("arrayBuffer"===u.type?ue.arrayBuffer():"json"===u.type?ue.json():ue.text()).then(function(Pe){A||(de&&be&&function(Ne,Fe,ot){if(Hr(),ce){var Ye={status:Fe.status,statusText:Fe.statusText,headers:new M.Headers};Fe.headers.forEach(function(gt,bt){return Ye.headers.set(bt,gt)});var ht=W(Fe.headers.get("Cache-Control")||"");ht["no-store"]||(ht["max-age"]&&Ye.headers.set("Expires",new Date(ot+1e3*ht["max-age"]).toUTCString()),new Date(Ye.headers.get("Expires")).getTime()-ot<42e4||function(gt,bt){if(void 0===Ke)try{new Response(new ReadableStream),Ke=!0}catch{Ke=!1}Ke?bt(gt.body):gt.blob().then(bt)}(Fe,function(gt){var bt=new M.Response(gt,Ye);Hr(),ce&&ce.then(function(St){return St.put(Bs(Ne.url),bt)}).catch(function(St){return N(St.message)})}))}}(x,de,be),C=!0,c(null,Pe,ue.headers.get("Cache-Control"),ue.headers.get("Expires")))}).catch(function(Pe){A||c(new Error(Pe.message))})};return V?function(ue,de){if(Hr(),!ce)return de(null);var be=Bs(ue.url);ce.then(function(Pe){Pe.match(be).then(function(Ne){var Fe=function(ot){if(!ot)return!1;var Ye=new Date(ot.headers.get("Expires")||0),ht=W(ot.headers.get("Cache-Control")||"");return Ye>Date.now()&&!ht["no-cache"]}(Ne);Pe.delete(be),Fe&&Pe.put(be,Ne.clone()),de(null,Ne,Fe)}).catch(de)}).catch(de)}(x,Y):Y(null,null),{cancel:function(){A=!0,C||b.abort()}}}var Fs,yi,Pu=function(u,c){if(/:\/\//.test(u.url)&&!/^https?:|^file:/.test(u.url)){if(ee()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",u,c);if(!ee()){var h=u.url.substring(0,u.url.indexOf("://"));return(Nt.REGISTERED_PROTOCOLS[h]||ta)(u,c)}}if(!(/^file:/.test(b=u.url)||/^file:/.test(fu())&&!/^\w+:/.test(b))){if(M.fetch&&M.Request&&M.AbortController&&M.Request.prototype.hasOwnProperty("signal"))return ta(u,c);if(ee()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",u,c,void 0,!0)}var b;return function(x,C){var A=new M.XMLHttpRequest;for(var V in A.open(x.method||"GET",x.url,!0),"arrayBuffer"===x.type&&(A.responseType="arraybuffer"),x.headers)A.setRequestHeader(V,x.headers[V]);return"json"===x.type&&(A.responseType="text",A.setRequestHeader("Accept","application/json")),A.withCredentials="include"===x.credentials,A.onerror=function(){C(new Error(A.statusText))},A.onload=function(){if((A.status>=200&&A.status<300||0===A.status)&&null!==A.response){var Y=A.response;if("json"===x.type)try{Y=JSON.parse(A.response)}catch(re){return C(re)}C(null,Y,A.getResponseHeader("Cache-Control"),A.getResponseHeader("Expires"))}else C(new Wu(A.statusText,A.status,x.url))},A.send(x.body),{cancel:function(){return A.abort()}}}(u,c)},si=function(u,c){return Pu(ae(u,{type:"arrayBuffer"}),c)},he=function(u,c){return Pu(ae(u,{method:"POST"}),c)},_e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Fs=[],yi=0;var Te=function(u,c){if(Bn.supported&&(u.headers||(u.headers={}),u.headers.accept="image/webp,*/*"),yi>=Nt.MAX_PARALLEL_IMAGE_REQUESTS){var h={requestParameters:u,callback:c,cancelled:!1,cancel:function(){this.cancelled=!0}};return Fs.push(h),h}yi++;var b=!1,x=function(){if(!b)for(b=!0,yi--;Fs.length&&yi<Nt.MAX_PARALLEL_IMAGE_REQUESTS;){var A=Fs.shift();A.cancelled||(A.cancel=Te(A.requestParameters,A.callback).cancel)}},C=si(u,function(A,V,Y,re){var de,be;x(),A?c(A):V&&(Cr()?(de=c,be=new M.Blob([new Uint8Array(V)],{type:"image/png"}),M.createImageBitmap(be).then(function(Pe){de(null,Pe)}).catch(function(Pe){de(new Error("Could not load image because of "+Pe.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(ue,de,be,Pe){var Ne=new M.Image,Fe=M.URL;Ne.onload=function(){de(null,Ne),Fe.revokeObjectURL(Ne.src),Ne.onload=null,M.requestAnimationFrame(function(){Ne.src=_e})},Ne.onerror=function(){return de(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ot=new M.Blob([new Uint8Array(ue)],{type:"image/png"});Ne.cacheControl=be,Ne.expires=Pe,Ne.src=ue.byteLength?Fe.createObjectURL(ot):_e}(V,c,Y,re))});return{cancel:function(){C.cancel(),x()}}};function Oe(u,c,h){h[u]&&-1!==h[u].indexOf(c)||(h[u]=h[u]||[],h[u].push(c))}function Be(u,c,h){if(h&&h[u]){var b=h[u].indexOf(c);-1!==b&&h[u].splice(b,1)}}var it=function(u,c){void 0===c&&(c={}),ae(this,c),this.type=u},st=function(u){function c(h,b){void 0===b&&(b={}),u.call(this,"error",ae({error:h},b))}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c}(it),nt=function(){};nt.prototype.on=function(u,c){return this._listeners=this._listeners||{},Oe(u,c,this._listeners),this},nt.prototype.off=function(u,c){return Be(u,c,this._listeners),Be(u,c,this._oneTimeListeners),this},nt.prototype.once=function(u,c){return this._oneTimeListeners=this._oneTimeListeners||{},Oe(u,c,this._oneTimeListeners),this},nt.prototype.fire=function(u,c){"string"==typeof u&&(u=new it(u,c||{}));var h=u.type;if(this.listens(h)){u.target=this;for(var b=0,x=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];b<x.length;b+=1)x[b].call(this,u);for(var C=0,A=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];C<A.length;C+=1){var V=A[C];Be(h,V,this._oneTimeListeners),V.call(this,u)}var Y=this._eventedParent;Y&&(ae(u,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),Y.fire(u))}else u instanceof st&&console.error(u.error);return this},nt.prototype.listens=function(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)},nt.prototype.setEventedParent=function(u,c){return this._eventedParent=u,this._eventedParentData=c,this};var ke={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Xe=function(u,c,h,b){this.message=(u?u+": ":"")+h,b&&(this.identifier=b),null!=c&&c.__line__&&(this.line=c.__line__)};function qt(u){var c=u.value;return c?[new Xe(u.key,c,"constants have been deprecated as of v8")]:[]}function Jt(u){for(var c=[],h=arguments.length-1;h-- >0;)c[h]=arguments[h+1];for(var b=0,x=c;b<x.length;b+=1){var C=x[b];for(var A in C)u[A]=C[A]}return u}function yt(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function Lt(u){if(Array.isArray(u))return u.map(Lt);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){var c={};for(var h in u)c[h]=Lt(u[h]);return c}return yt(u)}var un=function(u){function c(h,b){u.call(this,b),this.message=b,this.key=h}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c}(Error),ln=function(u,c){void 0===c&&(c=[]),this.parent=u,this.bindings={};for(var h=0,b=c;h<b.length;h+=1){var x=b[h];this.bindings[x[0]]=x[1]}};ln.prototype.concat=function(u){return new ln(this,u)},ln.prototype.get=function(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(u+" not found in scope.")},ln.prototype.has=function(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)};var In={kind:"null"},Bt={kind:"number"},tn={kind:"string"},jt={kind:"boolean"},ir={kind:"color"},rr={kind:"object"},wn={kind:"value"},Ii={kind:"collator"},zn={kind:"formatted"},Di={kind:"resolvedImage"};function Fi(u,c){return{kind:"array",itemType:u,N:c}}function $r(u){if("array"===u.kind){var c=$r(u.itemType);return"number"==typeof u.N?"array<"+c+", "+u.N+">":"value"===u.itemType.kind?"array":"array<"+c+">"}return u.kind}var _i=[In,Bt,tn,jt,ir,zn,rr,Fi(wn),Di];function Hi(u,c){if("error"===c.kind)return null;if("array"===u.kind){if("array"===c.kind&&(0===c.N&&"value"===c.itemType.kind||!Hi(u.itemType,c.itemType))&&("number"!=typeof u.N||u.N===c.N))return null}else{if(u.kind===c.kind)return null;if("value"===u.kind)for(var h=0,b=_i;h<b.length;h+=1)if(!Hi(b[h],c))return null}return"Expected "+$r(u)+" but found "+$r(c)+" instead."}function fi(u,c){return c.some(function(h){return h.kind===u.kind})}function $n(u,c){return c.some(function(h){return"null"===h?null===u:"array"===h?Array.isArray(u):"object"===h?u&&!Array.isArray(u)&&"object"==typeof u:h===typeof u})}var so=G(function(u,c){var h={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function b(V){return(V=Math.round(V))<0?0:V>255?255:V}function x(V){return b("%"===V[V.length-1]?parseFloat(V)/100*255:parseInt(V))}function C(V){return(Y="%"===V[V.length-1]?parseFloat(V)/100:parseFloat(V))<0?0:Y>1?1:Y;var Y}function A(V,Y,re){return re<0?re+=1:re>1&&(re-=1),6*re<1?V+(Y-V)*re*6:2*re<1?Y:3*re<2?V+(Y-V)*(2/3-re)*6:V}try{c.parseCSSColor=function(V){var Y,re=V.replace(/ /g,"").toLowerCase();if(re in h)return h[re].slice();if("#"===re[0])return 4===re.length?(Y=parseInt(re.substr(1),16))>=0&&Y<=4095?[(3840&Y)>>4|(3840&Y)>>8,240&Y|(240&Y)>>4,15&Y|(15&Y)<<4,1]:null:7===re.length&&(Y=parseInt(re.substr(1),16))>=0&&Y<=16777215?[(16711680&Y)>>16,(65280&Y)>>8,255&Y,1]:null;var ue=re.indexOf("("),de=re.indexOf(")");if(-1!==ue&&de+1===re.length){var be=re.substr(0,ue),Pe=re.substr(ue+1,de-(ue+1)).split(","),Ne=1;switch(be){case"rgba":if(4!==Pe.length)return null;Ne=C(Pe.pop());case"rgb":return 3!==Pe.length?null:[x(Pe[0]),x(Pe[1]),x(Pe[2]),Ne];case"hsla":if(4!==Pe.length)return null;Ne=C(Pe.pop());case"hsl":if(3!==Pe.length)return null;var Fe=(parseFloat(Pe[0])%360+360)%360/360,ot=C(Pe[1]),Ye=C(Pe[2]),ht=Ye<=.5?Ye*(ot+1):Ye+ot-Ye*ot,gt=2*Ye-ht;return[b(255*A(gt,ht,Fe+1/3)),b(255*A(gt,ht,Fe)),b(255*A(gt,ht,Fe-1/3)),Ne];default:return null}}return null}}catch{}}).parseCSSColor,dr=function(u,c,h,b){void 0===b&&(b=1),this.r=u,this.g=c,this.b=h,this.a=b};dr.parse=function(u){if(u){if(u instanceof dr)return u;if("string"==typeof u){var c=so(u);if(c)return new dr(c[0]/255*c[3],c[1]/255*c[3],c[2]/255*c[3],c[3])}}},dr.prototype.toString=function(){var u=this.toArray(),c=u[1],h=u[2],b=u[3];return"rgba("+Math.round(u[0])+","+Math.round(c)+","+Math.round(h)+","+b+")"},dr.prototype.toArray=function(){var u=this.a;return 0===u?[0,0,0,0]:[255*this.r/u,255*this.g/u,255*this.b/u,u]},dr.black=new dr(0,0,0,1),dr.white=new dr(1,1,1,1),dr.transparent=new dr(0,0,0,0),dr.red=new dr(1,0,0,1);var Ho=function(u,c,h){this.sensitivity=u?c?"variant":"case":c?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Ho.prototype.compare=function(u,c){return this.collator.compare(u,c)},Ho.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var $a=function(u,c,h,b,x){this.text=u,this.image=c,this.scale=h,this.fontStack=b,this.textColor=x},fo=function(u){this.sections=u};fo.fromString=function(u){return new fo([new $a(u,null,null,null,null)])},fo.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(u){return 0!==u.text.length||u.image&&0!==u.image.name.length})},fo.factory=function(u){return u instanceof fo?u:fo.fromString(u)},fo.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(u){return u.text}).join("")},fo.prototype.serialize=function(){for(var u=["format"],c=0,h=this.sections;c<h.length;c+=1){var b=h[c];if(b.image)u.push(["image",b.image.name]);else{u.push(b.text);var x={};b.fontStack&&(x["text-font"]=["literal",b.fontStack.split(",")]),b.scale&&(x["font-scale"]=b.scale),b.textColor&&(x["text-color"]=["rgba"].concat(b.textColor.toArray())),u.push(x)}}return u};var _r=function(u){this.name=u.name,this.available=u.available};function Cs(u,c,h,b){return"number"==typeof u&&u>=0&&u<=255&&"number"==typeof c&&c>=0&&c<=255&&"number"==typeof h&&h>=0&&h<=255?void 0===b||"number"==typeof b&&b>=0&&b<=1?null:"Invalid rgba value ["+[u,c,h,b].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof b?[u,c,h,b]:[u,c,h]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function hi(u){if(null===u||"string"==typeof u||"boolean"==typeof u||"number"==typeof u||u instanceof dr||u instanceof Ho||u instanceof fo||u instanceof _r)return!0;if(Array.isArray(u)){for(var c=0,h=u;c<h.length;c+=1)if(!hi(h[c]))return!1;return!0}if("object"==typeof u){for(var b in u)if(!hi(u[b]))return!1;return!0}return!1}function eo(u){if(null===u)return In;if("string"==typeof u)return tn;if("boolean"==typeof u)return jt;if("number"==typeof u)return Bt;if(u instanceof dr)return ir;if(u instanceof Ho)return Ii;if(u instanceof fo)return zn;if(u instanceof _r)return Di;if(Array.isArray(u)){for(var c,h=u.length,b=0,x=u;b<x.length;b+=1){var C=eo(x[b]);if(c){if(c===C)continue;c=wn;break}c=C}return Fi(c||wn,h)}return rr}function zs(u){var c=typeof u;return null===u?"":"string"===c||"number"===c||"boolean"===c?String(u):u instanceof dr||u instanceof fo||u instanceof _r?u.toString():JSON.stringify(u)}_r.prototype.toString=function(){return this.name},_r.fromString=function(u){return u?new _r({name:u,available:!1}):null},_r.prototype.serialize=function(){return["image",this.name]};var $o=function(u,c){this.type=u,this.value=c};$o.parse=function(u,c){if(2!==u.length)return c.error("'literal' expression requires exactly one argument, but found "+(u.length-1)+" instead.");if(!hi(u[1]))return c.error("invalid value");var h=u[1],b=eo(h),x=c.expectedType;return"array"!==b.kind||0!==b.N||!x||"array"!==x.kind||"number"==typeof x.N&&0!==x.N||(b=x),new $o(b,h)},$o.prototype.evaluate=function(){return this.value},$o.prototype.eachChild=function(){},$o.prototype.outputDefined=function(){return!0},$o.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof dr?["rgba"].concat(this.value.toArray()):this.value instanceof fo?this.value.serialize():this.value};var Sn=function(u){this.name="ExpressionEvaluationError",this.message=u};Sn.prototype.toJSON=function(){return this.message};var Ko={string:tn,number:Bt,boolean:jt,object:rr},ua=function(u,c){this.type=u,this.args=c};ua.parse=function(u,c){if(u.length<2)return c.error("Expected at least one argument.");var h,b=1,x=u[0];if("array"===x){var C,A;if(u.length>2){var V=u[1];if("string"!=typeof V||!(V in Ko)||"object"===V)return c.error('The item type argument of "array" must be one of string, number, boolean',1);C=Ko[V],b++}else C=wn;if(u.length>3){if(null!==u[2]&&("number"!=typeof u[2]||u[2]<0||u[2]!==Math.floor(u[2])))return c.error('The length argument to "array" must be a positive integer literal',2);A=u[2],b++}h=Fi(C,A)}else h=Ko[x];for(var Y=[];b<u.length;b++){var re=c.parse(u[b],b,wn);if(!re)return null;Y.push(re)}return new ua(h,Y)},ua.prototype.evaluate=function(u){for(var c=0;c<this.args.length;c++){var h=this.args[c].evaluate(u);if(!Hi(this.type,eo(h)))return h;if(c===this.args.length-1)throw new Sn("Expected value to be of type "+$r(this.type)+", but found "+$r(eo(h))+" instead.")}return null},ua.prototype.eachChild=function(u){this.args.forEach(u)},ua.prototype.outputDefined=function(){return this.args.every(function(u){return u.outputDefined()})},ua.prototype.serialize=function(){var u=this.type,c=[u.kind];if("array"===u.kind){var h=u.itemType;if("string"===h.kind||"number"===h.kind||"boolean"===h.kind){c.push(h.kind);var b=u.N;("number"==typeof b||this.args.length>1)&&c.push(b)}}return c.concat(this.args.map(function(x){return x.serialize()}))};var Xn=function(u){this.type=zn,this.sections=u};Xn.parse=function(u,c){if(u.length<2)return c.error("Expected at least one argument.");var h=u[1];if(!Array.isArray(h)&&"object"==typeof h)return c.error("First argument must be an image or text section.");for(var b=[],x=!1,C=1;C<=u.length-1;++C){var A=u[C];if(x&&"object"==typeof A&&!Array.isArray(A)){x=!1;var V=null;if(A["font-scale"]&&!(V=c.parse(A["font-scale"],1,Bt)))return null;var Y=null;if(A["text-font"]&&!(Y=c.parse(A["text-font"],1,Fi(tn))))return null;var re=null;if(A["text-color"]&&!(re=c.parse(A["text-color"],1,ir)))return null;var ue=b[b.length-1];ue.scale=V,ue.font=Y,ue.textColor=re}else{var de=c.parse(u[C],1,wn);if(!de)return null;var be=de.type.kind;if("string"!==be&&"value"!==be&&"null"!==be&&"resolvedImage"!==be)return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,b.push({content:de,scale:null,font:null,textColor:null})}}return new Xn(b)},Xn.prototype.evaluate=function(u){return new fo(this.sections.map(function(c){var h=c.content.evaluate(u);return eo(h)===Di?new $a("",h,null,null,null):new $a(zs(h),null,c.scale?c.scale.evaluate(u):null,c.font?c.font.evaluate(u).join(","):null,c.textColor?c.textColor.evaluate(u):null)}))},Xn.prototype.eachChild=function(u){for(var c=0,h=this.sections;c<h.length;c+=1){var b=h[c];u(b.content),b.scale&&u(b.scale),b.font&&u(b.font),b.textColor&&u(b.textColor)}},Xn.prototype.outputDefined=function(){return!1},Xn.prototype.serialize=function(){for(var u=["format"],c=0,h=this.sections;c<h.length;c+=1){var b=h[c];u.push(b.content.serialize());var x={};b.scale&&(x["font-scale"]=b.scale.serialize()),b.font&&(x["text-font"]=b.font.serialize()),b.textColor&&(x["text-color"]=b.textColor.serialize()),u.push(x)}return u};var cs=function(u){this.type=Di,this.input=u};cs.parse=function(u,c){if(2!==u.length)return c.error("Expected two arguments.");var h=c.parse(u[1],1,tn);return h?new cs(h):c.error("No image name provided.")},cs.prototype.evaluate=function(u){var c=this.input.evaluate(u),h=_r.fromString(c);return h&&u.availableImages&&(h.available=u.availableImages.indexOf(c)>-1),h},cs.prototype.eachChild=function(u){u(this.input)},cs.prototype.outputDefined=function(){return!1},cs.prototype.serialize=function(){return["image",this.input.serialize()]};var Tr={"to-boolean":jt,"to-color":ir,"to-number":Bt,"to-string":tn},j=function(u,c){this.type=u,this.args=c};j.parse=function(u,c){if(u.length<2)return c.error("Expected at least one argument.");var h=u[0];if(("to-boolean"===h||"to-string"===h)&&2!==u.length)return c.error("Expected one argument.");for(var b=Tr[h],x=[],C=1;C<u.length;C++){var A=c.parse(u[C],C,wn);if(!A)return null;x.push(A)}return new j(b,x)},j.prototype.evaluate=function(u){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(u));if("color"===this.type.kind){for(var c,h,b=0,x=this.args;b<x.length;b+=1){if(h=null,(c=x[b].evaluate(u))instanceof dr)return c;if("string"==typeof c){var C=u.parseColor(c);if(C)return C}else if(Array.isArray(c)&&!(h=c.length<3||c.length>4?"Invalid rbga value "+JSON.stringify(c)+": expected an array containing either three or four numeric values.":Cs(c[0],c[1],c[2],c[3])))return new dr(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new Sn(h||"Could not parse color from value '"+("string"==typeof c?c:String(JSON.stringify(c)))+"'")}if("number"===this.type.kind){for(var A=null,V=0,Y=this.args;V<Y.length;V+=1){if(null===(A=Y[V].evaluate(u)))return 0;var re=Number(A);if(!isNaN(re))return re}throw new Sn("Could not convert "+JSON.stringify(A)+" to number.")}return"formatted"===this.type.kind?fo.fromString(zs(this.args[0].evaluate(u))):"resolvedImage"===this.type.kind?_r.fromString(zs(this.args[0].evaluate(u))):zs(this.args[0].evaluate(u))},j.prototype.eachChild=function(u){this.args.forEach(u)},j.prototype.outputDefined=function(){return this.args.every(function(u){return u.outputDefined()})},j.prototype.serialize=function(){if("formatted"===this.type.kind)return new Xn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new cs(this.args[0]).serialize();var u=["to-"+this.type.kind];return this.eachChild(function(c){u.push(c.serialize())}),u};var te=["Unknown","Point","LineString","Polygon"],Se=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Se.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Se.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?te[this.feature.type]:this.feature.type:null},Se.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Se.prototype.canonicalID=function(){return this.canonical},Se.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Se.prototype.parseColor=function(u){var c=this._parseColorCache[u];return c||(c=this._parseColorCache[u]=dr.parse(u)),c};var tt=function(u,c,h,b){this.name=u,this.type=c,this._evaluate=h,this.args=b};tt.prototype.evaluate=function(u){return this._evaluate(u,this.args)},tt.prototype.eachChild=function(u){this.args.forEach(u)},tt.prototype.outputDefined=function(){return!1},tt.prototype.serialize=function(){return[this.name].concat(this.args.map(function(u){return u.serialize()}))},tt.parse=function(u,c){var h,b=u[0],x=tt.definitions[b];if(!x)return c.error('Unknown expression "'+b+'". If you wanted a literal array, use ["literal", [...]].',0);for(var C=Array.isArray(x)?x[0]:x.type,A=Array.isArray(x)?[[x[1],x[2]]]:x.overloads,V=A.filter(function(jn){var pn=jn[0];return!Array.isArray(pn)||pn.length===u.length-1}),Y=null,re=0,ue=V;re<ue.length;re+=1){var de=ue[re],be=de[0],Pe=de[1];Y=new Xi(c.registry,c.path,null,c.scope);for(var Ne=[],Fe=!1,ot=1;ot<u.length;ot++){var Ye=u[ot],ht=Array.isArray(be)?be[ot-1]:be.type,gt=Y.parse(Ye,1+Ne.length,ht);if(!gt){Fe=!0;break}Ne.push(gt)}if(!Fe)if(Array.isArray(be)&&be.length!==Ne.length)Y.error("Expected "+be.length+" arguments, but found "+Ne.length+" instead.");else{for(var bt=0;bt<Ne.length;bt++){var St=Array.isArray(be)?be[bt]:be.type,zt=Ne[bt];Y.concat(bt+1).checkSubtype(St,zt.type)}if(0===Y.errors.length)return new tt(b,C,Pe,Ne)}}if(1===V.length)(h=c.errors).push.apply(h,Y.errors);else{for(var nn=(V.length?V:A).map(function(jn){var pn;return pn=jn[0],Array.isArray(pn)?"("+pn.map($r).join(", ")+")":"("+$r(pn.type)+"...)"}).join(" | "),cn=[],Tn=1;Tn<u.length;Tn++){var hn=c.parse(u[Tn],1+cn.length);if(!hn)return null;cn.push($r(hn.type))}c.error("Expected arguments of type "+nn+", but found ("+cn.join(", ")+") instead.")}return null},tt.register=function(u,c){for(var h in tt.definitions=c,c)u[h]=tt};var ct=function(u,c,h){this.type=Ii,this.locale=h,this.caseSensitive=u,this.diacriticSensitive=c};function ut(u,c){u[0]=Math.min(u[0],c[0]),u[1]=Math.min(u[1],c[1]),u[2]=Math.max(u[2],c[0]),u[3]=Math.max(u[3],c[1])}function wt(u,c){return!(u[0]<=c[0]||u[2]>=c[2]||u[1]<=c[1]||u[3]>=c[3])}function Qt(u,c){var h=(180+u[0])/360,b=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,x=Math.pow(2,c.z);return[Math.round(h*x*8192),Math.round(b*x*8192)]}function Kt(u,c,h){return c[1]>u[1]!=h[1]>u[1]&&u[0]<(h[0]-c[0])*(u[1]-c[1])/(h[1]-c[1])+c[0]}function dn(u,c){for(var h,b,x,C,A,V,Y,re=!1,ue=0,de=c.length;ue<de;ue++)for(var be=c[ue],Pe=0,Ne=be.length;Pe<Ne-1;Pe++){if((C=(h=u)[0]-(b=be[Pe])[0])*(Y=h[1]-(x=be[Pe+1])[1])-(V=h[0]-x[0])*(A=h[1]-b[1])==0&&C*V<=0&&A*Y<=0)return!1;Kt(u,be[Pe],be[Pe+1])&&(re=!re)}return re}function Ct(u,c){for(var h=0;h<c.length;h++)if(dn(u,c[h]))return!0;return!1}function mn(u,c,h,b){var x=b[0]-h[0],C=b[1]-h[1],A=(u[0]-h[0])*C-x*(u[1]-h[1]),V=(c[0]-h[0])*C-x*(c[1]-h[1]);return A>0&&V<0||A<0&&V>0}function Rn(u,c,h){for(var b=0,x=h;b<x.length;b+=1)for(var C=x[b],A=0;A<C.length-1;++A)if((de=[(ue=C[A+1])[0]-(re=C[A])[0],ue[1]-re[1]])[0]*(be=[(Y=c)[0]-(V=u)[0],Y[1]-V[1]])[1]-de[1]*be[0]!=0&&mn(V,Y,re,ue)&&mn(re,ue,V,Y))return!0;var V,Y,re,ue,de,be;return!1}function Jn(u,c){for(var h=0;h<u.length;++h)if(!dn(u[h],c))return!1;for(var b=0;b<u.length-1;++b)if(Rn(u[b],u[b+1],c))return!1;return!0}function Wn(u,c){for(var h=0;h<c.length;h++)if(Jn(u,c[h]))return!0;return!1}function uo(u,c,h){for(var b=[],x=0;x<u.length;x++){for(var C=[],A=0;A<u[x].length;A++){var V=Qt(u[x][A],h);ut(c,V),C.push(V)}b.push(C)}return b}function Vt(u,c,h){for(var b=[],x=0;x<u.length;x++){var C=uo(u[x],c,h);b.push(C)}return b}function Dn(u,c,h,b){if(u[0]<h[0]||u[0]>h[2]){var x=.5*b,C=u[0]-h[0]>x?-b:h[0]-u[0]>x?b:0;0===C&&(C=u[0]-h[2]>x?-b:h[2]-u[0]>x?b:0),u[0]+=C}ut(c,u)}function Pr(u,c,h,b){for(var x=8192*Math.pow(2,b.z),C=[8192*b.x,8192*b.y],A=[],V=0,Y=u;V<Y.length;V+=1)for(var re=0,ue=Y[V];re<ue.length;re+=1){var de=ue[re],be=[de.x+C[0],de.y+C[1]];Dn(be,c,h,x),A.push(be)}return A}function Gn(u,c,h,b){for(var x,C=8192*Math.pow(2,b.z),A=[8192*b.x,8192*b.y],V=[],Y=0,re=u;Y<re.length;Y+=1){for(var ue=[],de=0,be=re[Y];de<be.length;de+=1){var Pe=be[de],Ne=[Pe.x+A[0],Pe.y+A[1]];ut(c,Ne),ue.push(Ne)}V.push(ue)}if(c[2]-c[0]<=C/2){(x=c)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(var Fe=0,ot=V;Fe<ot.length;Fe+=1)for(var Ye=0,ht=ot[Fe];Ye<ht.length;Ye+=1)Dn(ht[Ye],c,h,C)}return V}ct.parse=function(u,c){if(2!==u.length)return c.error("Expected one argument.");var h=u[1];if("object"!=typeof h||Array.isArray(h))return c.error("Collator options argument must be an object.");var b=c.parse(void 0!==h["case-sensitive"]&&h["case-sensitive"],1,jt);if(!b)return null;var x=c.parse(void 0!==h["diacritic-sensitive"]&&h["diacritic-sensitive"],1,jt);if(!x)return null;var C=null;return h.locale&&!(C=c.parse(h.locale,1,tn))?null:new ct(b,x,C)},ct.prototype.evaluate=function(u){return new Ho(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)},ct.prototype.eachChild=function(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)},ct.prototype.outputDefined=function(){return!1},ct.prototype.serialize=function(){var u={};return u["case-sensitive"]=this.caseSensitive.serialize(),u["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(u.locale=this.locale.serialize()),["collator",u]};var oi=function(u,c){this.type=jt,this.geojson=u,this.geometries=c};function Vn(u){if(u instanceof tt&&("get"===u.name&&1===u.args.length||"feature-state"===u.name||"has"===u.name&&1===u.args.length||"properties"===u.name||"geometry-type"===u.name||"id"===u.name||/^filter-/.test(u.name))||u instanceof oi)return!1;var c=!0;return u.eachChild(function(h){c&&!Vn(h)&&(c=!1)}),c}function Na(u){if(u instanceof tt&&"feature-state"===u.name)return!1;var c=!0;return u.eachChild(function(h){c&&!Na(h)&&(c=!1)}),c}function mr(u,c){if(u instanceof tt&&c.indexOf(u.name)>=0)return!1;var h=!0;return u.eachChild(function(b){h&&!mr(b,c)&&(h=!1)}),h}oi.parse=function(u,c){if(2!==u.length)return c.error("'within' expression requires exactly one argument, but found "+(u.length-1)+" instead.");if(hi(u[1])){var h=u[1];if("FeatureCollection"===h.type)for(var b=0;b<h.features.length;++b){var x=h.features[b].geometry.type;if("Polygon"===x||"MultiPolygon"===x)return new oi(h,h.features[b].geometry)}else if("Feature"===h.type){var C=h.geometry.type;if("Polygon"===C||"MultiPolygon"===C)return new oi(h,h.geometry)}else if("Polygon"===h.type||"MultiPolygon"===h.type)return new oi(h,h)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")},oi.prototype.evaluate=function(u){if(null!=u.geometry()&&null!=u.canonicalID()){if("Point"===u.geometryType())return function(c,h){var b=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],C=c.canonicalID();if("Polygon"===h.type){var A=uo(h.coordinates,x,C),V=Pr(c.geometry(),b,x,C);if(!wt(b,x))return!1;for(var Y=0,re=V;Y<re.length;Y+=1)if(!dn(re[Y],A))return!1}if("MultiPolygon"===h.type){var ue=Vt(h.coordinates,x,C),de=Pr(c.geometry(),b,x,C);if(!wt(b,x))return!1;for(var be=0,Pe=de;be<Pe.length;be+=1)if(!Ct(Pe[be],ue))return!1}return!0}(u,this.geometries);if("LineString"===u.geometryType())return function(c,h){var b=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],C=c.canonicalID();if("Polygon"===h.type){var A=uo(h.coordinates,x,C),V=Gn(c.geometry(),b,x,C);if(!wt(b,x))return!1;for(var Y=0,re=V;Y<re.length;Y+=1)if(!Jn(re[Y],A))return!1}if("MultiPolygon"===h.type){var ue=Vt(h.coordinates,x,C),de=Gn(c.geometry(),b,x,C);if(!wt(b,x))return!1;for(var be=0,Pe=de;be<Pe.length;be+=1)if(!Wn(Pe[be],ue))return!1}return!0}(u,this.geometries)}return!1},oi.prototype.eachChild=function(){},oi.prototype.outputDefined=function(){return!0},oi.prototype.serialize=function(){return["within",this.geojson]};var Nr=function(u,c){this.type=c.type,this.name=u,this.boundExpression=c};Nr.parse=function(u,c){if(2!==u.length||"string"!=typeof u[1])return c.error("'var' expression requires exactly one string literal argument.");var h=u[1];return c.scope.has(h)?new Nr(h,c.scope.get(h)):c.error('Unknown variable "'+h+'". Make sure "'+h+'" has been bound in an enclosing "let" expression before using it.',1)},Nr.prototype.evaluate=function(u){return this.boundExpression.evaluate(u)},Nr.prototype.eachChild=function(){},Nr.prototype.outputDefined=function(){return!1},Nr.prototype.serialize=function(){return["var",this.name]};var Xi=function(u,c,h,b,x){void 0===c&&(c=[]),void 0===b&&(b=new ln),void 0===x&&(x=[]),this.registry=u,this.path=c,this.key=c.map(function(C){return"["+C+"]"}).join(""),this.scope=b,this.errors=x,this.expectedType=h};function lo(u,c){for(var h,b=u.length-1,x=0,C=b,A=0;x<=C;)if((h=u[A=Math.floor((x+C)/2)])<=c){if(A===b||c<u[A+1])return A;x=A+1}else{if(!(h>c))throw new Sn("Input is not a number.");C=A-1}return 0}Xi.prototype.parse=function(u,c,h,b,x){return void 0===x&&(x={}),c?this.concat(c,h,b)._parse(u,x):this._parse(u,x)},Xi.prototype._parse=function(u,c){function h(re,ue,de){return"assert"===de?new ua(ue,[re]):"coerce"===de?new j(ue,[re]):re}if(null!==u&&"string"!=typeof u&&"boolean"!=typeof u&&"number"!=typeof u||(u=["literal",u]),Array.isArray(u)){if(0===u.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var b=u[0];if("string"!=typeof b)return this.error("Expression name must be a string, but found "+typeof b+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var x=this.registry[b];if(x){var C=x.parse(u,this);if(!C)return null;if(this.expectedType){var A=this.expectedType,V=C.type;if("string"!==A.kind&&"number"!==A.kind&&"boolean"!==A.kind&&"object"!==A.kind&&"array"!==A.kind||"value"!==V.kind)if("color"!==A.kind&&"formatted"!==A.kind&&"resolvedImage"!==A.kind||"value"!==V.kind&&"string"!==V.kind){if(this.checkSubtype(A,V))return null}else C=h(C,A,c.typeAnnotation||"coerce");else C=h(C,A,c.typeAnnotation||"assert")}if(!(C instanceof $o)&&"resolvedImage"!==C.type.kind&&function re(ue){if(ue instanceof Nr)return re(ue.boundExpression);if(ue instanceof tt&&"error"===ue.name||ue instanceof ct||ue instanceof oi)return!1;var de=ue instanceof j||ue instanceof ua,be=!0;return ue.eachChild(function(Pe){be=de?be&&re(Pe):be&&Pe instanceof $o}),!!be&&Vn(ue)&&mr(ue,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(C)){var Y=new Se;try{C=new $o(C.type,C.evaluate(Y))}catch(re){return this.error(re.message),null}}return C}return this.error('Unknown expression "'+b+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===u?"'undefined' value invalid. Use null instead.":"object"==typeof u?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof u+" instead.")},Xi.prototype.concat=function(u,c,h){var b="number"==typeof u?this.path.concat(u):this.path,x=h?this.scope.concat(h):this.scope;return new Xi(this.registry,b,c||null,x,this.errors)},Xi.prototype.error=function(u){for(var c=[],h=arguments.length-1;h-- >0;)c[h]=arguments[h+1];var b=""+this.key+c.map(function(x){return"["+x+"]"}).join("");this.errors.push(new un(b,u))},Xi.prototype.checkSubtype=function(u,c){var h=Hi(u,c);return h&&this.error(h),h};var La=function(u,c,h){this.type=u,this.input=c,this.labels=[],this.outputs=[];for(var b=0,x=h;b<x.length;b+=1){var C=x[b],A=C[1];this.labels.push(C[0]),this.outputs.push(A)}};function ho(u,c,h){return u*(1-h)+c*h}La.parse=function(u,c){if(u.length-1<4)return c.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if((u.length-1)%2!=0)return c.error("Expected an even number of arguments.");var h=c.parse(u[1],1,Bt);if(!h)return null;var b=[],x=null;c.expectedType&&"value"!==c.expectedType.kind&&(x=c.expectedType);for(var C=1;C<u.length;C+=2){var A=1===C?-1/0:u[C],V=u[C+1],Y=C,re=C+1;if("number"!=typeof A)return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Y);if(b.length&&b[b.length-1][0]>=A)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Y);var ue=c.parse(V,re,x);if(!ue)return null;x=x||ue.type,b.push([A,ue])}return new La(x,h,b)},La.prototype.evaluate=function(u){var c=this.labels,h=this.outputs;if(1===c.length)return h[0].evaluate(u);var b=this.input.evaluate(u);if(b<=c[0])return h[0].evaluate(u);var x=c.length;return b>=c[x-1]?h[x-1].evaluate(u):h[lo(c,b)].evaluate(u)},La.prototype.eachChild=function(u){u(this.input);for(var c=0,h=this.outputs;c<h.length;c+=1)u(h[c])},La.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})},La.prototype.serialize=function(){for(var u=["step",this.input.serialize()],c=0;c<this.labels.length;c++)c>0&&u.push(this.labels[c]),u.push(this.outputs[c].serialize());return u};var Ge=Object.freeze({__proto__:null,number:ho,color:function(u,c,h){return new dr(ho(u.r,c.r,h),ho(u.g,c.g,h),ho(u.b,c.b,h),ho(u.a,c.a,h))},array:function(u,c,h){return u.map(function(b,x){return ho(b,c[x],h)})}}),mt=6/29*3*(6/29),Xt=Math.PI/180,Fn=180/Math.PI;function Ni(u){return u>.008856451679035631?Math.pow(u,1/3):u/mt+4/29}function wr(u){return u>6/29?u*u*u:mt*(u-4/29)}function Cn(u){return 255*(u<=.0031308?12.92*u:1.055*Math.pow(u,1/2.4)-.055)}function po(u){return(u/=255)<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function Xo(u){var c=po(u.r),h=po(u.g),b=po(u.b),x=Ni((.4124564*c+.3575761*h+.1804375*b)/.95047),C=Ni((.2126729*c+.7151522*h+.072175*b)/1);return{l:116*C-16,a:500*(x-C),b:200*(C-Ni((.0193339*c+.119192*h+.9503041*b)/1.08883)),alpha:u.a}}function Yr(u){var c=(u.l+16)/116,h=isNaN(u.a)?c:c+u.a/500,b=isNaN(u.b)?c:c-u.b/200;return c=1*wr(c),h=.95047*wr(h),b=1.08883*wr(b),new dr(Cn(3.2404542*h-1.5371385*c-.4985314*b),Cn(-.969266*h+1.8760108*c+.041556*b),Cn(.0556434*h-.2040259*c+1.0572252*b),u.alpha)}function Ea(u,c,h){var b=c-u;return u+h*(b>180||b<-180?b-360*Math.round(b/360):b)}var Ba={forward:Xo,reverse:Yr,interpolate:function(u,c,h){return{l:ho(u.l,c.l,h),a:ho(u.a,c.a,h),b:ho(u.b,c.b,h),alpha:ho(u.alpha,c.alpha,h)}}},$i={forward:function(u){var c=Xo(u),h=c.l,b=c.a,x=c.b,C=Math.atan2(x,b)*Fn;return{h:C<0?C+360:C,c:Math.sqrt(b*b+x*x),l:h,alpha:u.a}},reverse:function(u){var c=u.h*Xt,h=u.c;return Yr({l:u.l,a:Math.cos(c)*h,b:Math.sin(c)*h,alpha:u.alpha})},interpolate:function(u,c,h){return{h:Ea(u.h,c.h,h),c:ho(u.c,c.c,h),l:ho(u.l,c.l,h),alpha:ho(u.alpha,c.alpha,h)}}},to=Object.freeze({__proto__:null,lab:Ba,hcl:$i}),bi=function(u,c,h,b,x){this.type=u,this.operator=c,this.interpolation=h,this.input=b,this.labels=[],this.outputs=[];for(var C=0,A=x;C<A.length;C+=1){var V=A[C],Y=V[1];this.labels.push(V[0]),this.outputs.push(Y)}};function Ts(u,c,h,b){var x=b-h,C=u-h;return 0===x?0:1===c?C/x:(Math.pow(c,C)-1)/(Math.pow(c,x)-1)}bi.interpolationFactor=function(u,c,h,b){var x=0;if("exponential"===u.name)x=Ts(c,u.base,h,b);else if("linear"===u.name)x=Ts(c,1,h,b);else if("cubic-bezier"===u.name){var C=u.controlPoints;x=new q(C[0],C[1],C[2],C[3]).solve(Ts(c,1,h,b))}return x},bi.parse=function(u,c){var h=u[0],b=u[1],x=u[2],C=u.slice(3);if(!Array.isArray(b)||0===b.length)return c.error("Expected an interpolation type expression.",1);if("linear"===b[0])b={name:"linear"};else if("exponential"===b[0]){var A=b[1];if("number"!=typeof A)return c.error("Exponential interpolation requires a numeric base.",1,1);b={name:"exponential",base:A}}else{if("cubic-bezier"!==b[0])return c.error("Unknown interpolation type "+String(b[0]),1,0);var V=b.slice(1);if(4!==V.length||V.some(function(ot){return"number"!=typeof ot||ot<0||ot>1}))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);b={name:"cubic-bezier",controlPoints:V}}if(u.length-1<4)return c.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if((u.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(!(x=c.parse(x,2,Bt)))return null;var Y=[],re=null;"interpolate-hcl"===h||"interpolate-lab"===h?re=ir:c.expectedType&&"value"!==c.expectedType.kind&&(re=c.expectedType);for(var ue=0;ue<C.length;ue+=2){var de=C[ue],be=C[ue+1],Pe=ue+3,Ne=ue+4;if("number"!=typeof de)return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Pe);if(Y.length&&Y[Y.length-1][0]>=de)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Pe);var Fe=c.parse(be,Ne,re);if(!Fe)return null;re=re||Fe.type,Y.push([de,Fe])}return"number"===re.kind||"color"===re.kind||"array"===re.kind&&"number"===re.itemType.kind&&"number"==typeof re.N?new bi(re,h,b,x,Y):c.error("Type "+$r(re)+" is not interpolatable.")},bi.prototype.evaluate=function(u){var c=this.labels,h=this.outputs;if(1===c.length)return h[0].evaluate(u);var b=this.input.evaluate(u);if(b<=c[0])return h[0].evaluate(u);var x=c.length;if(b>=c[x-1])return h[x-1].evaluate(u);var C=lo(c,b),A=bi.interpolationFactor(this.interpolation,b,c[C],c[C+1]),V=h[C].evaluate(u),Y=h[C+1].evaluate(u);return"interpolate"===this.operator?Ge[this.type.kind.toLowerCase()](V,Y,A):"interpolate-hcl"===this.operator?$i.reverse($i.interpolate($i.forward(V),$i.forward(Y),A)):Ba.reverse(Ba.interpolate(Ba.forward(V),Ba.forward(Y),A))},bi.prototype.eachChild=function(u){u(this.input);for(var c=0,h=this.outputs;c<h.length;c+=1)u(h[c])},bi.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})},bi.prototype.serialize=function(){var u;u="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var c=[this.operator,u,this.input.serialize()],h=0;h<this.labels.length;h++)c.push(this.labels[h],this.outputs[h].serialize());return c};var Ki=function(u,c){this.type=u,this.args=c};Ki.parse=function(u,c){if(u.length<2)return c.error("Expectected at least one argument.");var h=null,b=c.expectedType;b&&"value"!==b.kind&&(h=b);for(var x=[],C=0,A=u.slice(1);C<A.length;C+=1){var V=c.parse(A[C],1+x.length,h,void 0,{typeAnnotation:"omit"});if(!V)return null;h=h||V.type,x.push(V)}var Y=b&&x.some(function(re){return Hi(b,re.type)});return new Ki(Y?wn:h,x)},Ki.prototype.evaluate=function(u){for(var c,h=null,b=0,x=0,C=this.args;x<C.length&&(b++,(h=C[x].evaluate(u))&&h instanceof _r&&!h.available&&(c||(c=h.name),h=null,b===this.args.length&&(h=c)),null===h);x+=1);return h},Ki.prototype.eachChild=function(u){this.args.forEach(u)},Ki.prototype.outputDefined=function(){return this.args.every(function(u){return u.outputDefined()})},Ki.prototype.serialize=function(){var u=["coalesce"];return this.eachChild(function(c){u.push(c.serialize())}),u};var Lr=function(u,c){this.type=c.type,this.bindings=[].concat(u),this.result=c};Lr.prototype.evaluate=function(u){return this.result.evaluate(u)},Lr.prototype.eachChild=function(u){for(var c=0,h=this.bindings;c<h.length;c+=1)u(h[c][1]);u(this.result)},Lr.parse=function(u,c){if(u.length<4)return c.error("Expected at least 3 arguments, but found "+(u.length-1)+" instead.");for(var h=[],b=1;b<u.length-1;b+=2){var x=u[b];if("string"!=typeof x)return c.error("Expected string, but found "+typeof x+" instead.",b);if(/[^a-zA-Z0-9_]/.test(x))return c.error("Variable names must contain only alphanumeric characters or '_'.",b);var C=c.parse(u[b+1],b+1);if(!C)return null;h.push([x,C])}var A=c.parse(u[u.length-1],u.length-1,c.expectedType,h);return A?new Lr(h,A):null},Lr.prototype.outputDefined=function(){return this.result.outputDefined()},Lr.prototype.serialize=function(){for(var u=["let"],c=0,h=this.bindings;c<h.length;c+=1){var b=h[c];u.push(b[0],b[1].serialize())}return u.push(this.result.serialize()),u};var Is=function(u,c,h){this.type=u,this.index=c,this.input=h};Is.parse=function(u,c){if(3!==u.length)return c.error("Expected 2 arguments, but found "+(u.length-1)+" instead.");var h=c.parse(u[1],1,Bt),b=c.parse(u[2],2,Fi(c.expectedType||wn));return h&&b?new Is(b.type.itemType,h,b):null},Is.prototype.evaluate=function(u){var c=this.index.evaluate(u),h=this.input.evaluate(u);if(c<0)throw new Sn("Array index out of bounds: "+c+" < 0.");if(c>=h.length)throw new Sn("Array index out of bounds: "+c+" > "+(h.length-1)+".");if(c!==Math.floor(c))throw new Sn("Array index must be an integer, but found "+c+" instead.");return h[c]},Is.prototype.eachChild=function(u){u(this.index),u(this.input)},Is.prototype.outputDefined=function(){return!1},Is.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Js=function(u,c){this.type=jt,this.needle=u,this.haystack=c};Js.parse=function(u,c){if(3!==u.length)return c.error("Expected 2 arguments, but found "+(u.length-1)+" instead.");var h=c.parse(u[1],1,wn),b=c.parse(u[2],2,wn);return h&&b?fi(h.type,[jt,tn,Bt,In,wn])?new Js(h,b):c.error("Expected first argument to be of type boolean, string, number or null, but found "+$r(h.type)+" instead"):null},Js.prototype.evaluate=function(u){var c=this.needle.evaluate(u),h=this.haystack.evaluate(u);if(!h)return!1;if(!$n(c,["boolean","string","number","null"]))throw new Sn("Expected first argument to be of type boolean, string, number or null, but found "+$r(eo(c))+" instead.");if(!$n(h,["string","array"]))throw new Sn("Expected second argument to be of type array or string, but found "+$r(eo(h))+" instead.");return h.indexOf(c)>=0},Js.prototype.eachChild=function(u){u(this.needle),u(this.haystack)},Js.prototype.outputDefined=function(){return!0},Js.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var la=function(u,c,h){this.type=Bt,this.needle=u,this.haystack=c,this.fromIndex=h};la.parse=function(u,c){if(u.length<=2||u.length>=5)return c.error("Expected 3 or 4 arguments, but found "+(u.length-1)+" instead.");var h=c.parse(u[1],1,wn),b=c.parse(u[2],2,wn);if(!h||!b)return null;if(!fi(h.type,[jt,tn,Bt,In,wn]))return c.error("Expected first argument to be of type boolean, string, number or null, but found "+$r(h.type)+" instead");if(4===u.length){var x=c.parse(u[3],3,Bt);return x?new la(h,b,x):null}return new la(h,b)},la.prototype.evaluate=function(u){var c=this.needle.evaluate(u),h=this.haystack.evaluate(u);if(!$n(c,["boolean","string","number","null"]))throw new Sn("Expected first argument to be of type boolean, string, number or null, but found "+$r(eo(c))+" instead.");if(!$n(h,["string","array"]))throw new Sn("Expected second argument to be of type array or string, but found "+$r(eo(h))+" instead.");if(this.fromIndex){var b=this.fromIndex.evaluate(u);return h.indexOf(c,b)}return h.indexOf(c)},la.prototype.eachChild=function(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)},la.prototype.outputDefined=function(){return!1},la.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var u=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),u]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var ui=function(u,c,h,b,x,C){this.inputType=u,this.type=c,this.input=h,this.cases=b,this.outputs=x,this.otherwise=C};ui.parse=function(u,c){if(u.length<5)return c.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if(u.length%2!=1)return c.error("Expected an even number of arguments.");var h,b;c.expectedType&&"value"!==c.expectedType.kind&&(b=c.expectedType);for(var x={},C=[],A=2;A<u.length-1;A+=2){var V=u[A],Y=u[A+1];Array.isArray(V)||(V=[V]);var re=c.concat(A);if(0===V.length)return re.error("Expected at least one branch label.");for(var ue=0,de=V;ue<de.length;ue+=1){var be=de[ue];if("number"!=typeof be&&"string"!=typeof be)return re.error("Branch labels must be numbers or strings.");if("number"==typeof be&&Math.abs(be)>Number.MAX_SAFE_INTEGER)return re.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof be&&Math.floor(be)!==be)return re.error("Numeric branch labels must be integer values.");if(h){if(re.checkSubtype(h,eo(be)))return null}else h=eo(be);if(void 0!==x[String(be)])return re.error("Branch labels must be unique.");x[String(be)]=C.length}var Pe=c.parse(Y,A,b);if(!Pe)return null;b=b||Pe.type,C.push(Pe)}var Ne=c.parse(u[1],1,wn);if(!Ne)return null;var Fe=c.parse(u[u.length-1],u.length-1,b);return Fe?"value"!==Ne.type.kind&&c.concat(1).checkSubtype(h,Ne.type)?null:new ui(h,b,Ne,x,C,Fe):null},ui.prototype.evaluate=function(u){var c=this.input.evaluate(u);return(eo(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(u)},ui.prototype.eachChild=function(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)},ui.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})&&this.otherwise.outputDefined()},ui.prototype.serialize=function(){for(var u=this,c=["match",this.input.serialize()],h=[],b={},x=0,C=Object.keys(this.cases).sort();x<C.length;x+=1){var A=C[x];void 0===(de=b[this.cases[A]])?(b[this.cases[A]]=h.length,h.push([this.cases[A],[A]])):h[de][1].push(A)}for(var V=function(Pe){return"number"===u.inputType.kind?Number(Pe):Pe},Y=0,re=h;Y<re.length;Y+=1){var ue=re[Y],de=ue[0],be=ue[1];c.push(1===be.length?V(be[0]):be.map(V)),c.push(this.outputs[outputIndex$1].serialize())}return c.push(this.otherwise.serialize()),c};var hu=function(u,c,h){this.type=u,this.branches=c,this.otherwise=h};hu.parse=function(u,c){if(u.length<4)return c.error("Expected at least 3 arguments, but found only "+(u.length-1)+".");if(u.length%2!=0)return c.error("Expected an odd number of arguments.");var h;c.expectedType&&"value"!==c.expectedType.kind&&(h=c.expectedType);for(var b=[],x=1;x<u.length-1;x+=2){var C=c.parse(u[x],x,jt);if(!C)return null;var A=c.parse(u[x+1],x+1,h);if(!A)return null;b.push([C,A]),h=h||A.type}var V=c.parse(u[u.length-1],u.length-1,h);return V?new hu(h,b,V):null},hu.prototype.evaluate=function(u){for(var c=0,h=this.branches;c<h.length;c+=1){var b=h[c],x=b[1];if(b[0].evaluate(u))return x.evaluate(u)}return this.otherwise.evaluate(u)},hu.prototype.eachChild=function(u){for(var c=0,h=this.branches;c<h.length;c+=1){var b=h[c],x=b[1];u(b[0]),u(x)}u(this.otherwise)},hu.prototype.outputDefined=function(){return this.branches.every(function(u){return u[1].outputDefined()})&&this.otherwise.outputDefined()},hu.prototype.serialize=function(){var u=["case"];return this.eachChild(function(c){u.push(c.serialize())}),u};var pu=function(u,c,h,b){this.type=u,this.input=c,this.beginIndex=h,this.endIndex=b};function cc(u,c){return"=="===u||"!="===u?"boolean"===c.kind||"string"===c.kind||"number"===c.kind||"null"===c.kind||"value"===c.kind:"string"===c.kind||"number"===c.kind||"value"===c.kind}function zi(u,c,h,b){return 0===b.compare(c,h)}function Wo(u,c,h){var b="=="!==u&&"!="!==u;return function(){function x(C,A,V){this.type=jt,this.lhs=C,this.rhs=A,this.collator=V,this.hasUntypedArgument="value"===C.type.kind||"value"===A.type.kind}return x.parse=function(C,A){if(3!==C.length&&4!==C.length)return A.error("Expected two or three arguments.");var V=C[0],Y=A.parse(C[1],1,wn);if(!Y)return null;if(!cc(V,Y.type))return A.concat(1).error('"'+V+"\" comparisons are not supported for type '"+$r(Y.type)+"'.");var re=A.parse(C[2],2,wn);if(!re)return null;if(!cc(V,re.type))return A.concat(2).error('"'+V+"\" comparisons are not supported for type '"+$r(re.type)+"'.");if(Y.type.kind!==re.type.kind&&"value"!==Y.type.kind&&"value"!==re.type.kind)return A.error("Cannot compare types '"+$r(Y.type)+"' and '"+$r(re.type)+"'.");b&&("value"===Y.type.kind&&"value"!==re.type.kind?Y=new ua(re.type,[Y]):"value"!==Y.type.kind&&"value"===re.type.kind&&(re=new ua(Y.type,[re])));var ue=null;if(4===C.length){if("string"!==Y.type.kind&&"string"!==re.type.kind&&"value"!==Y.type.kind&&"value"!==re.type.kind)return A.error("Cannot use collator to compare non-string types.");if(!(ue=A.parse(C[3],3,Ii)))return null}return new x(Y,re,ue)},x.prototype.evaluate=function(C){var A=this.lhs.evaluate(C),V=this.rhs.evaluate(C);if(b&&this.hasUntypedArgument){var Y=eo(A),re=eo(V);if(Y.kind!==re.kind||"string"!==Y.kind&&"number"!==Y.kind)throw new Sn('Expected arguments for "'+u+'" to be (string, string) or (number, number), but found ('+Y.kind+", "+re.kind+") instead.")}if(this.collator&&!b&&this.hasUntypedArgument){var ue=eo(A),de=eo(V);if("string"!==ue.kind||"string"!==de.kind)return c(C,A,V)}return this.collator?h(C,A,V,this.collator.evaluate(C)):c(C,A,V)},x.prototype.eachChild=function(C){C(this.lhs),C(this.rhs),this.collator&&C(this.collator)},x.prototype.outputDefined=function(){return!0},x.prototype.serialize=function(){var C=[u];return this.eachChild(function(A){C.push(A.serialize())}),C},x}()}pu.parse=function(u,c){if(u.length<=2||u.length>=5)return c.error("Expected 3 or 4 arguments, but found "+(u.length-1)+" instead.");var h=c.parse(u[1],1,wn),b=c.parse(u[2],2,Bt);if(!h||!b)return null;if(!fi(h.type,[Fi(wn),tn,wn]))return c.error("Expected first argument to be of type array or string, but found "+$r(h.type)+" instead");if(4===u.length){var x=c.parse(u[3],3,Bt);return x?new pu(h.type,h,b,x):null}return new pu(h.type,h,b)},pu.prototype.evaluate=function(u){var c=this.input.evaluate(u),h=this.beginIndex.evaluate(u);if(!$n(c,["string","array"]))throw new Sn("Expected first argument to be of type array or string, but found "+$r(eo(c))+" instead.");if(this.endIndex){var b=this.endIndex.evaluate(u);return c.slice(h,b)}return c.slice(h)},pu.prototype.eachChild=function(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)},pu.prototype.outputDefined=function(){return!1},pu.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var u=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),u]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Fa=Wo("==",function(u,c,h){return c===h},zi),Ju=Wo("!=",function(u,c,h){return c!==h},function(u,c,h,b){return!zi(0,c,h,b)}),Zu=Wo("<",function(u,c,h){return c<h},function(u,c,h,b){return b.compare(c,h)<0}),Au=Wo(">",function(u,c,h){return c>h},function(u,c,h,b){return b.compare(c,h)>0}),hd=Wo("<=",function(u,c,h){return c<=h},function(u,c,h,b){return b.compare(c,h)<=0}),dc=Wo(">=",function(u,c,h){return c>=h},function(u,c,h,b){return b.compare(c,h)>=0}),js=function(u,c,h,b,x){this.type=tn,this.number=u,this.locale=c,this.currency=h,this.minFractionDigits=b,this.maxFractionDigits=x};js.parse=function(u,c){if(3!==u.length)return c.error("Expected two arguments.");var h=c.parse(u[1],1,Bt);if(!h)return null;var b=u[2];if("object"!=typeof b||Array.isArray(b))return c.error("NumberFormat options argument must be an object.");var x=null;if(b.locale&&!(x=c.parse(b.locale,1,tn)))return null;var C=null;if(b.currency&&!(C=c.parse(b.currency,1,tn)))return null;var A=null;if(b["min-fraction-digits"]&&!(A=c.parse(b["min-fraction-digits"],1,Bt)))return null;var V=null;return b["max-fraction-digits"]&&!(V=c.parse(b["max-fraction-digits"],1,Bt))?null:new js(h,x,C,A,V)},js.prototype.evaluate=function(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))},js.prototype.eachChild=function(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)},js.prototype.outputDefined=function(){return!1},js.prototype.serialize=function(){var u={};return this.locale&&(u.locale=this.locale.serialize()),this.currency&&(u.currency=this.currency.serialize()),this.minFractionDigits&&(u["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(u["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),u]};var Ka=function(u){this.type=Bt,this.input=u};Ka.parse=function(u,c){if(2!==u.length)return c.error("Expected 1 argument, but found "+(u.length-1)+" instead.");var h=c.parse(u[1],1);return h?"array"!==h.type.kind&&"string"!==h.type.kind&&"value"!==h.type.kind?c.error("Expected argument of type string or array, but found "+$r(h.type)+" instead."):new Ka(h):null},Ka.prototype.evaluate=function(u){var c=this.input.evaluate(u);if("string"==typeof c||Array.isArray(c))return c.length;throw new Sn("Expected value to be of type string or array, but found "+$r(eo(c))+" instead.")},Ka.prototype.eachChild=function(u){u(this.input)},Ka.prototype.outputDefined=function(){return!1},Ka.prototype.serialize=function(){var u=["length"];return this.eachChild(function(c){u.push(c.serialize())}),u};var gl={"==":Fa,"!=":Ju,">":Au,"<":Zu,">=":dc,"<=":hd,array:ua,at:Is,boolean:ua,case:hu,coalesce:Ki,collator:ct,format:Xn,image:cs,in:Js,"index-of":la,interpolate:bi,"interpolate-hcl":bi,"interpolate-lab":bi,length:Ka,let:Lr,literal:$o,match:ui,number:ua,"number-format":js,object:ua,slice:pu,step:La,string:ua,"to-boolean":j,"to-color":j,"to-number":j,"to-string":j,var:Nr,within:oi};function pd(u,c){var h=c[0],b=c[1],x=c[2],C=c[3];h=h.evaluate(u),b=b.evaluate(u),x=x.evaluate(u);var A=C?C.evaluate(u):1,V=Cs(h,b,x,A);if(V)throw new Sn(V);return new dr(h/255*A,b/255*A,x/255*A,A)}function Sa(u,c){return u in c}function Ca(u,c){var h=c[u];return void 0===h?null:h}function wi(u){return{type:u}}function Jo(u){return{result:"success",value:u}}function co(u){return{result:"error",value:u}}function ca(u){return"data-driven"===u["property-type"]||"cross-faded-data-driven"===u["property-type"]}function Po(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function On(u){return!!u.expression&&u.expression.interpolated}function Pn(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":null===u?"null":typeof u}function Wi(u){return"object"==typeof u&&null!==u&&!Array.isArray(u)}function ds(u){return u}function Xa(u,c,h){return void 0!==u?u:void 0!==c?c:void 0!==h?h:void 0}function Zo(u,c,h,b,x){return Xa(typeof h===x?b[h]:void 0,u.default,c.default)}function Yu(u,c,h){if("number"!==Pn(h))return Xa(u.default,c.default);var b=u.stops.length;if(1===b||h<=u.stops[0][0])return u.stops[0][1];if(h>=u.stops[b-1][0])return u.stops[b-1][1];var x=lo(u.stops.map(function(C){return C[0]}),h);return u.stops[x][1]}function Ji(u,c,h){var b=void 0!==u.base?u.base:1;if("number"!==Pn(h))return Xa(u.default,c.default);var x=u.stops.length;if(1===x||h<=u.stops[0][0])return u.stops[0][1];if(h>=u.stops[x-1][0])return u.stops[x-1][1];var be,Pe,Fe,ot,C=lo(u.stops.map(function(de){return de[0]}),h),A=(be=b,ot=h-(Pe=u.stops[C][0]),0==(Fe=u.stops[C+1][0]-Pe)?0:1===be?ot/Fe:(Math.pow(be,ot)-1)/(Math.pow(be,Fe)-1)),V=u.stops[C][1],Y=u.stops[C+1][1],re=Ge[c.type]||ds;if(u.colorSpace&&"rgb"!==u.colorSpace){var ue=to[u.colorSpace];re=function(de,be){return ue.reverse(ue.interpolate(ue.forward(de),ue.forward(be),A))}}return"function"==typeof V.evaluate?{evaluate:function(){for(var de=[],be=arguments.length;be--;)de[be]=arguments[be];var Pe=V.evaluate.apply(void 0,de),Ne=Y.evaluate.apply(void 0,de);if(void 0!==Pe&&void 0!==Ne)return re(Pe,Ne,A)}}:re(V,Y,A)}function vl(u,c,h){return"color"===c.type?h=dr.parse(h):"formatted"===c.type?h=fo.fromString(h.toString()):"resolvedImage"===c.type?h=_r.fromString(h.toString()):Pn(h)===c.type||"enum"===c.type&&c.values[h]||(h=void 0),Xa(h,u.default,c.default)}tt.register(gl,{error:[{kind:"error"},[tn],function(u,c){throw new Sn(c[0].evaluate(u))}],typeof:[tn,[wn],function(u,c){return $r(eo(c[0].evaluate(u)))}],"to-rgba":[Fi(Bt,4),[ir],function(u,c){return c[0].evaluate(u).toArray()}],rgb:[ir,[Bt,Bt,Bt],pd],rgba:[ir,[Bt,Bt,Bt,Bt],pd],has:{type:jt,overloads:[[[tn],function(u,c){return Sa(c[0].evaluate(u),u.properties())}],[[tn,rr],function(u,c){var h=c[1];return Sa(c[0].evaluate(u),h.evaluate(u))}]]},get:{type:wn,overloads:[[[tn],function(u,c){return Ca(c[0].evaluate(u),u.properties())}],[[tn,rr],function(u,c){var h=c[1];return Ca(c[0].evaluate(u),h.evaluate(u))}]]},"feature-state":[wn,[tn],function(u,c){return Ca(c[0].evaluate(u),u.featureState||{})}],properties:[rr,[],function(u){return u.properties()}],"geometry-type":[tn,[],function(u){return u.geometryType()}],id:[wn,[],function(u){return u.id()}],zoom:[Bt,[],function(u){return u.globals.zoom}],"heatmap-density":[Bt,[],function(u){return u.globals.heatmapDensity||0}],"line-progress":[Bt,[],function(u){return u.globals.lineProgress||0}],accumulated:[wn,[],function(u){return void 0===u.globals.accumulated?null:u.globals.accumulated}],"+":[Bt,wi(Bt),function(u,c){for(var h=0,b=0,x=c;b<x.length;b+=1)h+=x[b].evaluate(u);return h}],"*":[Bt,wi(Bt),function(u,c){for(var h=1,b=0,x=c;b<x.length;b+=1)h*=x[b].evaluate(u);return h}],"-":{type:Bt,overloads:[[[Bt,Bt],function(u,c){var h=c[1];return c[0].evaluate(u)-h.evaluate(u)}],[[Bt],function(u,c){return-c[0].evaluate(u)}]]},"/":[Bt,[Bt,Bt],function(u,c){var h=c[1];return c[0].evaluate(u)/h.evaluate(u)}],"%":[Bt,[Bt,Bt],function(u,c){var h=c[1];return c[0].evaluate(u)%h.evaluate(u)}],ln2:[Bt,[],function(){return Math.LN2}],pi:[Bt,[],function(){return Math.PI}],e:[Bt,[],function(){return Math.E}],"^":[Bt,[Bt,Bt],function(u,c){var h=c[1];return Math.pow(c[0].evaluate(u),h.evaluate(u))}],sqrt:[Bt,[Bt],function(u,c){return Math.sqrt(c[0].evaluate(u))}],log10:[Bt,[Bt],function(u,c){return Math.log(c[0].evaluate(u))/Math.LN10}],ln:[Bt,[Bt],function(u,c){return Math.log(c[0].evaluate(u))}],log2:[Bt,[Bt],function(u,c){return Math.log(c[0].evaluate(u))/Math.LN2}],sin:[Bt,[Bt],function(u,c){return Math.sin(c[0].evaluate(u))}],cos:[Bt,[Bt],function(u,c){return Math.cos(c[0].evaluate(u))}],tan:[Bt,[Bt],function(u,c){return Math.tan(c[0].evaluate(u))}],asin:[Bt,[Bt],function(u,c){return Math.asin(c[0].evaluate(u))}],acos:[Bt,[Bt],function(u,c){return Math.acos(c[0].evaluate(u))}],atan:[Bt,[Bt],function(u,c){return Math.atan(c[0].evaluate(u))}],min:[Bt,wi(Bt),function(u,c){return Math.min.apply(Math,c.map(function(h){return h.evaluate(u)}))}],max:[Bt,wi(Bt),function(u,c){return Math.max.apply(Math,c.map(function(h){return h.evaluate(u)}))}],abs:[Bt,[Bt],function(u,c){return Math.abs(c[0].evaluate(u))}],round:[Bt,[Bt],function(u,c){var h=c[0].evaluate(u);return h<0?-Math.round(-h):Math.round(h)}],floor:[Bt,[Bt],function(u,c){return Math.floor(c[0].evaluate(u))}],ceil:[Bt,[Bt],function(u,c){return Math.ceil(c[0].evaluate(u))}],"filter-==":[jt,[tn,wn],function(u,c){var h=c[0],b=c[1];return u.properties()[h.value]===b.value}],"filter-id-==":[jt,[wn],function(u,c){var h=c[0];return u.id()===h.value}],"filter-type-==":[jt,[tn],function(u,c){var h=c[0];return u.geometryType()===h.value}],"filter-<":[jt,[tn,wn],function(u,c){var h=c[0],b=c[1],x=u.properties()[h.value],C=b.value;return typeof x==typeof C&&x<C}],"filter-id-<":[jt,[wn],function(u,c){var h=c[0],b=u.id(),x=h.value;return typeof b==typeof x&&b<x}],"filter->":[jt,[tn,wn],function(u,c){var h=c[0],b=c[1],x=u.properties()[h.value],C=b.value;return typeof x==typeof C&&x>C}],"filter-id->":[jt,[wn],function(u,c){var h=c[0],b=u.id(),x=h.value;return typeof b==typeof x&&b>x}],"filter-<=":[jt,[tn,wn],function(u,c){var h=c[0],b=c[1],x=u.properties()[h.value],C=b.value;return typeof x==typeof C&&x<=C}],"filter-id-<=":[jt,[wn],function(u,c){var h=c[0],b=u.id(),x=h.value;return typeof b==typeof x&&b<=x}],"filter->=":[jt,[tn,wn],function(u,c){var h=c[0],b=c[1],x=u.properties()[h.value],C=b.value;return typeof x==typeof C&&x>=C}],"filter-id->=":[jt,[wn],function(u,c){var h=c[0],b=u.id(),x=h.value;return typeof b==typeof x&&b>=x}],"filter-has":[jt,[wn],function(u,c){return c[0].value in u.properties()}],"filter-has-id":[jt,[],function(u){return null!==u.id()&&void 0!==u.id()}],"filter-type-in":[jt,[Fi(tn)],function(u,c){return c[0].value.indexOf(u.geometryType())>=0}],"filter-id-in":[jt,[Fi(wn)],function(u,c){return c[0].value.indexOf(u.id())>=0}],"filter-in-small":[jt,[tn,Fi(wn)],function(u,c){var h=c[0];return c[1].value.indexOf(u.properties()[h.value])>=0}],"filter-in-large":[jt,[tn,Fi(wn)],function(u,c){var h=c[0],b=c[1];return function(x,C,A,V){for(;A<=V;){var Y=A+V>>1;if(C[Y]===x)return!0;C[Y]>x?V=Y-1:A=Y+1}return!1}(u.properties()[h.value],b.value,0,b.value.length-1)}],all:{type:jt,overloads:[[[jt,jt],function(u,c){var h=c[1];return c[0].evaluate(u)&&h.evaluate(u)}],[wi(jt),function(u,c){for(var h=0,b=c;h<b.length;h+=1)if(!b[h].evaluate(u))return!1;return!0}]]},any:{type:jt,overloads:[[[jt,jt],function(u,c){var h=c[1];return c[0].evaluate(u)||h.evaluate(u)}],[wi(jt),function(u,c){for(var h=0,b=c;h<b.length;h+=1)if(b[h].evaluate(u))return!0;return!1}]]},"!":[jt,[jt],function(u,c){return!c[0].evaluate(u)}],"is-supported-script":[jt,[tn],function(u,c){var h=u.globals&&u.globals.isSupportedScript;return!h||h(c[0].evaluate(u))}],upcase:[tn,[tn],function(u,c){return c[0].evaluate(u).toUpperCase()}],downcase:[tn,[tn],function(u,c){return c[0].evaluate(u).toLowerCase()}],concat:[tn,wi(wn),function(u,c){return c.map(function(h){return zs(h.evaluate(u))}).join("")}],"resolved-locale":[tn,[Ii],function(u,c){return c[0].evaluate(u).resolvedLocale()}]});var Wa=function(u,c){var h;this.expression=u,this._warningHistory={},this._evaluator=new Se,this._defaultValue=c?"color"===(h=c).type&&Wi(h.default)?new dr(0,0,0,0):"color"===h.type?dr.parse(h.default)||null:void 0===h.default?null:h.default:null,this._enumValues=c&&"enum"===c.type?c.values:null};function Br(u){return Array.isArray(u)&&u.length>0&&"string"==typeof u[0]&&u[0]in gl}function yl(u,c){var x,C,h=new Xi(gl,[],c?(C={color:ir,string:tn,number:Bt,enum:tn,boolean:jt,formatted:zn,resolvedImage:Di},"array"===(x=c).type?Fi(C[x.value]||wn,x.length):C[x.type]):void 0),b=h.parse(u,void 0,void 0,void 0,c&&"string"===c.type?{typeAnnotation:"coerce"}:void 0);return b?Jo(new Wa(b,c)):co(h.errors)}Wa.prototype.evaluateWithoutErrorHandling=function(u,c,h,b,x,C){return this._evaluator.globals=u,this._evaluator.feature=c,this._evaluator.featureState=h,this._evaluator.canonical=b,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=C,this.expression.evaluate(this._evaluator)},Wa.prototype.evaluate=function(u,c,h,b,x,C){this._evaluator.globals=u,this._evaluator.feature=c||null,this._evaluator.featureState=h||null,this._evaluator.canonical=b,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=C||null;try{var A=this.expression.evaluate(this._evaluator);if(null==A||"number"==typeof A&&A!=A)return this._defaultValue;if(this._enumValues&&!(A in this._enumValues))throw new Sn("Expected value to be one of "+Object.keys(this._enumValues).map(function(V){return JSON.stringify(V)}).join(", ")+", but found "+JSON.stringify(A)+" instead.");return A}catch(V){return this._warningHistory[V.message]||(this._warningHistory[V.message]=!0,typeof console<"u"&&console.warn(V.message)),this._defaultValue}};var ft=function(u,c){this.kind=u,this._styleExpression=c,this.isStateDependent="constant"!==u&&!Na(c.expression)};ft.prototype.evaluateWithoutErrorHandling=function(u,c,h,b,x,C){return this._styleExpression.evaluateWithoutErrorHandling(u,c,h,b,x,C)},ft.prototype.evaluate=function(u,c,h,b,x,C){return this._styleExpression.evaluate(u,c,h,b,x,C)};var Ot=function(u,c,h,b){this.kind=u,this.zoomStops=h,this._styleExpression=c,this.isStateDependent="camera"!==u&&!Na(c.expression),this.interpolationType=b};function fn(u,c){if("error"===(u=yl(u,c)).result)return u;var h=u.value.expression,b=Vn(h);if(!b&&!ca(c))return co([new un("","data expressions not supported")]);var x=mr(h,["zoom"]);if(!x&&!Po(c))return co([new un("","zoom expressions not supported")]);var C=function A(V){var Y=null;if(V instanceof Lr)Y=A(V.result);else if(V instanceof Ki)for(var re=0,ue=V.args;re<ue.length&&!(Y=A(ue[re]));re+=1);else(V instanceof La||V instanceof bi)&&V.input instanceof tt&&"zoom"===V.input.name&&(Y=V);return Y instanceof un||V.eachChild(function(de){var be=A(de);be instanceof un?Y=be:!Y&&be?Y=new un("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):Y&&be&&Y!==be&&(Y=new un("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),Y}(h);return C||x?C instanceof un?co([C]):C instanceof bi&&!On(c)?co([new un("",'"interpolate" expressions cannot be used with this property')]):Jo(C?new Ot(b?"camera":"composite",u.value,C.labels,C instanceof bi?C.interpolation:void 0):new ft(b?"constant":"source",u.value)):co([new un("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Ot.prototype.evaluateWithoutErrorHandling=function(u,c,h,b,x,C){return this._styleExpression.evaluateWithoutErrorHandling(u,c,h,b,x,C)},Ot.prototype.evaluate=function(u,c,h,b,x,C){return this._styleExpression.evaluate(u,c,h,b,x,C)},Ot.prototype.interpolationFactor=function(u,c,h){return this.interpolationType?bi.interpolationFactor(this.interpolationType,u,c,h):0};var An=function(u,c){this._parameters=u,this._specification=c,Jt(this,function h(b,x){var C,A,V,Y="color"===x.type,re=b.stops&&"object"==typeof b.stops[0][0],ue=re||!(re||void 0!==b.property),de=b.type||(On(x)?"exponential":"interval");if(Y&&((b=Jt({},b)).stops&&(b.stops=b.stops.map(function(hn){return[hn[0],dr.parse(hn[1])]})),b.default=dr.parse(b.default?b.default:x.default)),b.colorSpace&&"rgb"!==b.colorSpace&&!to[b.colorSpace])throw new Error("Unknown color space: "+b.colorSpace);if("exponential"===de)C=Ji;else if("interval"===de)C=Yu;else if("categorical"===de){C=Zo,A=Object.create(null);for(var be=0,Pe=b.stops;be<Pe.length;be+=1){var Ne=Pe[be];A[Ne[0]]=Ne[1]}V=typeof b.stops[0][0]}else{if("identity"!==de)throw new Error('Unknown function type "'+de+'"');C=vl}if(re){for(var Fe={},ot=[],Ye=0;Ye<b.stops.length;Ye++){var ht=b.stops[Ye],gt=ht[0].zoom;void 0===Fe[gt]&&(Fe[gt]={zoom:gt,type:b.type,property:b.property,default:b.default,stops:[]},ot.push(gt)),Fe[gt].stops.push([ht[0].value,ht[1]])}for(var bt=[],St=0,zt=ot;St<zt.length;St+=1){var nn=zt[St];bt.push([Fe[nn].zoom,h(Fe[nn],x)])}var cn={name:"linear"};return{kind:"composite",interpolationType:cn,interpolationFactor:bi.interpolationFactor.bind(void 0,cn),zoomStops:bt.map(function(hn){return hn[0]}),evaluate:function(hn,jn){var pn=hn.zoom;return Ji({stops:bt,base:b.base},x,pn).evaluate(pn,jn)}}}if(ue){var Tn="exponential"===de?{name:"exponential",base:void 0!==b.base?b.base:1}:null;return{kind:"camera",interpolationType:Tn,interpolationFactor:bi.interpolationFactor.bind(void 0,Tn),zoomStops:b.stops.map(function(hn){return hn[0]}),evaluate:function(hn){return C(b,x,hn.zoom,A,V)}}}return{kind:"source",evaluate:function(hn,jn){var pn=jn&&jn.properties?jn.properties[b.property]:void 0;return void 0===pn?Xa(b.default,x.default):C(b,x,pn,A,V)}}}(this._parameters,this._specification))};function ri(u){var c=u.key,h=u.value,b=u.valueSpec||{},x=u.objectElementValidators||{},C=u.style,A=u.styleSpec,V=[],Y=Pn(h);if("object"!==Y)return[new Xe(c,h,"object expected, "+Y+" found")];for(var re in h){var ue=re.split(".")[0],de=b[ue]||b["*"],be=void 0;if(x[ue])be=x[ue];else if(b[ue])be=Fr;else if(x["*"])be=x["*"];else{if(!b["*"]){V.push(new Xe(c,h[re],'unknown property "'+re+'"'));continue}be=Fr}V=V.concat(be({key:(c&&c+".")+re,value:h[re],valueSpec:de,style:C,styleSpec:A,object:h,objectKey:re},h))}for(var Pe in b)x[Pe]||b[Pe].required&&void 0===b[Pe].default&&void 0===h[Pe]&&V.push(new Xe(c,h,'missing required property "'+Pe+'"'));return V}function Xr(u){var c=u.value,h=u.valueSpec,b=u.style,x=u.styleSpec,C=u.key,A=u.arrayElementValidator||Fr;if("array"!==Pn(c))return[new Xe(C,c,"array expected, "+Pn(c)+" found")];if(h.length&&c.length!==h.length)return[new Xe(C,c,"array length "+h.length+" expected, length "+c.length+" found")];if(h["min-length"]&&c.length<h["min-length"])return[new Xe(C,c,"array length at least "+h["min-length"]+" expected, length "+c.length+" found")];var V={type:h.value,values:h.values};x.$version<7&&(V.function=h.function),"object"===Pn(h.value)&&(V=h.value);for(var Y=[],re=0;re<c.length;re++)Y=Y.concat(A({array:c,arrayIndex:re,value:c[re],valueSpec:V,style:b,styleSpec:x,key:C+"["+re+"]"}));return Y}function Pi(u){var c=u.key,h=u.value,b=u.valueSpec,x=Pn(h);return"number"===x&&h!=h&&(x="NaN"),"number"!==x?[new Xe(c,h,"number expected, "+x+" found")]:"minimum"in b&&h<b.minimum?[new Xe(c,h,h+" is less than the minimum value "+b.minimum)]:"maximum"in b&&h>b.maximum?[new Xe(c,h,h+" is greater than the maximum value "+b.maximum)]:[]}function no(u){var c,h,b,x=u.valueSpec,C=yt(u.value.type),A={},V="categorical"!==C&&void 0===u.value.property,Y=!V,re="array"===Pn(u.value.stops)&&"array"===Pn(u.value.stops[0])&&"object"===Pn(u.value.stops[0][0]),ue=ri({key:u.key,value:u.value,valueSpec:u.styleSpec.function,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(Pe){if("identity"===C)return[new Xe(Pe.key,Pe.value,'identity function may not have a "stops" property')];var Ne=[],Fe=Pe.value;return Ne=Ne.concat(Xr({key:Pe.key,value:Fe,valueSpec:Pe.valueSpec,style:Pe.style,styleSpec:Pe.styleSpec,arrayElementValidator:de})),"array"===Pn(Fe)&&0===Fe.length&&Ne.push(new Xe(Pe.key,Fe,"array must have at least one stop")),Ne},default:function(Pe){return Fr({key:Pe.key,value:Pe.value,valueSpec:x,style:Pe.style,styleSpec:Pe.styleSpec})}}});return"identity"===C&&V&&ue.push(new Xe(u.key,u.value,'missing required property "property"')),"identity"===C||u.value.stops||ue.push(new Xe(u.key,u.value,'missing required property "stops"')),"exponential"===C&&u.valueSpec.expression&&!On(u.valueSpec)&&ue.push(new Xe(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(Y&&!ca(u.valueSpec)?ue.push(new Xe(u.key,u.value,"property functions not supported")):V&&!Po(u.valueSpec)&&ue.push(new Xe(u.key,u.value,"zoom functions not supported"))),"categorical"!==C&&!re||void 0!==u.value.property||ue.push(new Xe(u.key,u.value,'"property" property is required')),ue;function de(Pe){var Ne=[],Fe=Pe.value,ot=Pe.key;if("array"!==Pn(Fe))return[new Xe(ot,Fe,"array expected, "+Pn(Fe)+" found")];if(2!==Fe.length)return[new Xe(ot,Fe,"array length 2 expected, length "+Fe.length+" found")];if(re){if("object"!==Pn(Fe[0]))return[new Xe(ot,Fe,"object expected, "+Pn(Fe[0])+" found")];if(void 0===Fe[0].zoom)return[new Xe(ot,Fe,"object stop key must have zoom")];if(void 0===Fe[0].value)return[new Xe(ot,Fe,"object stop key must have value")];if(b&&b>yt(Fe[0].zoom))return[new Xe(ot,Fe[0].zoom,"stop zoom values must appear in ascending order")];yt(Fe[0].zoom)!==b&&(b=yt(Fe[0].zoom),h=void 0,A={}),Ne=Ne.concat(ri({key:ot+"[0]",value:Fe[0],valueSpec:{zoom:{}},style:Pe.style,styleSpec:Pe.styleSpec,objectElementValidators:{zoom:Pi,value:be}}))}else Ne=Ne.concat(be({key:ot+"[0]",value:Fe[0],valueSpec:{},style:Pe.style,styleSpec:Pe.styleSpec},Fe));return Br(Lt(Fe[1]))?Ne.concat([new Xe(ot+"[1]",Fe[1],"expressions are not allowed in function stops.")]):Ne.concat(Fr({key:ot+"[1]",value:Fe[1],valueSpec:x,style:Pe.style,styleSpec:Pe.styleSpec}))}function be(Pe,Ne){var Fe=Pn(Pe.value),ot=yt(Pe.value),Ye=null!==Pe.value?Pe.value:Ne;if(c){if(Fe!==c)return[new Xe(Pe.key,Ye,Fe+" stop domain type must match previous stop domain type "+c)]}else c=Fe;if("number"!==Fe&&"string"!==Fe&&"boolean"!==Fe)return[new Xe(Pe.key,Ye,"stop domain value must be a number, string, or boolean")];if("number"!==Fe&&"categorical"!==C){var ht="number expected, "+Fe+" found";return ca(x)&&void 0===C&&(ht+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Xe(Pe.key,Ye,ht)]}return"categorical"!==C||"number"!==Fe||isFinite(ot)&&Math.floor(ot)===ot?"categorical"!==C&&"number"===Fe&&void 0!==h&&ot<h?[new Xe(Pe.key,Ye,"stop domain values must appear in ascending order")]:(h=ot,"categorical"===C&&ot in A?[new Xe(Pe.key,Ye,"stop domain values must be unique")]:(A[ot]=!0,[])):[new Xe(Pe.key,Ye,"integer expected, found "+ot)]}}function da(u){var c=("property"===u.expressionContext?fn:yl)(Lt(u.value),u.valueSpec);if("error"===c.result)return c.value.map(function(b){return new Xe(""+u.key+b.key,u.value,b.message)});var h=c.value.expression||c.value._styleExpression.expression;if("property"===u.expressionContext&&"text-font"===u.propertyKey&&!h.outputDefined())return[new Xe(u.key,u.value,'Invalid data expression for "'+u.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===u.expressionContext&&"layout"===u.propertyType&&!Na(h))return[new Xe(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===u.expressionContext&&!Na(h))return[new Xe(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&0===u.expressionContext.indexOf("cluster")){if(!mr(h,["zoom","feature-state"]))return[new Xe(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===u.expressionContext&&!Vn(h))return[new Xe(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function xr(u){var c=u.key,h=u.value,b=u.valueSpec,x=[];return Array.isArray(b.values)?-1===b.values.indexOf(yt(h))&&x.push(new Xe(c,h,"expected one of ["+b.values.join(", ")+"], "+JSON.stringify(h)+" found")):-1===Object.keys(b.values).indexOf(yt(h))&&x.push(new Xe(c,h,"expected one of ["+Object.keys(b.values).join(", ")+"], "+JSON.stringify(h)+" found")),x}function Eo(u){if(!0===u||!1===u)return!0;if(!Array.isArray(u)||0===u.length)return!1;switch(u[0]){case"has":return u.length>=2&&"$id"!==u[1]&&"$type"!==u[1];case"in":return u.length>=3&&("string"!=typeof u[1]||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==u.length||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(var c=0,h=u.slice(1);c<h.length;c+=1){var b=h[c];if(!Eo(b)&&"boolean"!=typeof b)return!1}return!0;default:return!0}}An.deserialize=function(u){return new An(u._parameters,u._specification)},An.serialize=function(u){return{_parameters:u._parameters,_specification:u._specification}};var mu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ja(u){if(null==u)return{filter:function(){return!0},needGeometry:!1};Eo(u)||(u=za(u));var c=yl(u,mu);if("error"===c.result)throw new Error(c.value.map(function(h){return h.key+": "+h.message}).join(", "));return{filter:function(h,b,x){return c.value.evaluate(h,b,{},x)},needGeometry:function h(b){if(!Array.isArray(b))return!1;if("within"===b[0])return!0;for(var x=1;x<b.length;x++)if(h(b[x]))return!0;return!1}(u)}}function Ta(u,c){return u<c?-1:u>c?1:0}function za(u){if(!u)return!0;var c,h=u[0];return u.length<=1?"any"!==h:"=="===h?Zs(u[1],u[2],"=="):"!="===h?Qu(Zs(u[1],u[2],"==")):"<"===h||">"===h||"<="===h||">="===h?Zs(u[1],u[2],h):"any"===h?(c=u.slice(1),["any"].concat(c.map(za))):"all"===h?["all"].concat(u.slice(1).map(za)):"none"===h?["all"].concat(u.slice(1).map(za).map(Qu)):"in"===h?Ys(u[1],u.slice(2)):"!in"===h?Qu(Ys(u[1],u.slice(2))):"has"===h?Ao(u[1]):"!has"===h?Qu(Ao(u[1])):"within"!==h||u}function Zs(u,c,h){switch(u){case"$type":return["filter-type-"+h,c];case"$id":return["filter-id-"+h,c];default:return["filter-"+h,u,c]}}function Ys(u,c){if(0===c.length)return!1;switch(u){case"$type":return["filter-type-in",["literal",c]];case"$id":return["filter-id-in",["literal",c]];default:return c.length>200&&!c.some(function(h){return typeof h!=typeof c[0]})?["filter-in-large",u,["literal",c.sort(Ta)]]:["filter-in-small",u,["literal",c]]}}function Ao(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function Qu(u){return["!",u]}function fa(u){return Eo(Lt(u.value))?da(Jt({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function c(h){var b=h.value,x=h.key;if("array"!==Pn(b))return[new Xe(x,b,"array expected, "+Pn(b)+" found")];var C,A=h.styleSpec,V=[];if(b.length<1)return[new Xe(x,b,"filter array must have at least 1 element")];switch(V=V.concat(xr({key:x+"[0]",value:b[0],valueSpec:A.filter_operator,style:h.style,styleSpec:h.styleSpec})),yt(b[0])){case"<":case"<=":case">":case">=":b.length>=2&&"$type"===yt(b[1])&&V.push(new Xe(x,b,'"$type" cannot be use with operator "'+b[0]+'"'));case"==":case"!=":3!==b.length&&V.push(new Xe(x,b,'filter array for operator "'+b[0]+'" must have 3 elements'));case"in":case"!in":b.length>=2&&"string"!==(C=Pn(b[1]))&&V.push(new Xe(x+"[1]",b[1],"string expected, "+C+" found"));for(var Y=2;Y<b.length;Y++)C=Pn(b[Y]),"$type"===yt(b[1])?V=V.concat(xr({key:x+"["+Y+"]",value:b[Y],valueSpec:A.geometry_type,style:h.style,styleSpec:h.styleSpec})):"string"!==C&&"number"!==C&&"boolean"!==C&&V.push(new Xe(x+"["+Y+"]",b[Y],"string, number, or boolean expected, "+C+" found"));break;case"any":case"all":case"none":for(var re=1;re<b.length;re++)V=V.concat(c({key:x+"["+re+"]",value:b[re],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":C=Pn(b[1]),2!==b.length?V.push(new Xe(x,b,'filter array for "'+b[0]+'" operator must have 2 elements')):"string"!==C&&V.push(new Xe(x+"[1]",b[1],"string expected, "+C+" found"));break;case"within":C=Pn(b[1]),2!==b.length?V.push(new Xe(x,b,'filter array for "'+b[0]+'" operator must have 2 elements')):"object"!==C&&V.push(new Xe(x+"[1]",b[1],"object expected, "+C+" found"))}return V}(u)}function Ps(u,c){var h=u.key,b=u.style,x=u.styleSpec,C=u.value,A=u.objectKey,V=x[c+"_"+u.layerType];if(!V)return[];var Y=A.match(/^(.*)-transition$/);if("paint"===c&&Y&&V[Y[1]]&&V[Y[1]].transition)return Fr({key:h,value:C,valueSpec:x.transition,style:b,styleSpec:x});var re,ue=u.valueSpec||V[A];if(!ue)return[new Xe(h,C,'unknown property "'+A+'"')];if("string"===Pn(C)&&ca(ue)&&!ue.tokens&&(re=/^{([^}]+)}$/.exec(C)))return[new Xe(h,C,'"'+A+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(re[1])+" }`.")];var de=[];return"symbol"===u.layerType&&("text-field"===A&&b&&!b.glyphs&&de.push(new Xe(h,C,'use of "text-field" requires a style "glyphs" property')),"text-font"===A&&Wi(Lt(C))&&"identity"===yt(C.type)&&de.push(new Xe(h,C,'"text-font" does not support identity functions'))),de.concat(Fr({key:u.key,value:C,valueSpec:ue,style:b,styleSpec:x,expressionContext:"property",propertyType:c,propertyKey:A}))}function _l(u){return Ps(u,"paint")}function Li(u){return Ps(u,"layout")}function xi(u){var c=[],h=u.value,b=u.key,x=u.style,C=u.styleSpec;h.type||h.ref||c.push(new Xe(b,h,'either "type" or "ref" is required'));var A,V=yt(h.type),Y=yt(h.ref);if(h.id)for(var re=yt(h.id),ue=0;ue<u.arrayIndex;ue++){var de=x.layers[ue];yt(de.id)===re&&c.push(new Xe(b,h.id,'duplicate layer id "'+h.id+'", previously used at line '+de.id.__line__))}if("ref"in h)["type","source","source-layer","filter","layout"].forEach(function(Ne){Ne in h&&c.push(new Xe(b,h[Ne],'"'+Ne+'" is prohibited for ref layers'))}),x.layers.forEach(function(Ne){yt(Ne.id)===Y&&(A=Ne)}),A?A.ref?c.push(new Xe(b,h.ref,"ref cannot reference another ref layer")):V=yt(A.type):c.push(new Xe(b,h.ref,'ref layer "'+Y+'" not found'));else if("background"!==V)if(h.source){var be=x.sources&&x.sources[h.source],Pe=be&&yt(be.type);be?"vector"===Pe&&"raster"===V?c.push(new Xe(b,h.source,'layer "'+h.id+'" requires a raster source')):"raster"===Pe&&"raster"!==V?c.push(new Xe(b,h.source,'layer "'+h.id+'" requires a vector source')):"vector"!==Pe||h["source-layer"]?"raster-dem"===Pe&&"hillshade"!==V?c.push(new Xe(b,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==V||!h.paint||!h.paint["line-gradient"]||"geojson"===Pe&&be.lineMetrics||c.push(new Xe(b,h,'layer "'+h.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):c.push(new Xe(b,h,'layer "'+h.id+'" must specify a "source-layer"')):c.push(new Xe(b,h.source,'source "'+h.source+'" not found'))}else c.push(new Xe(b,h,'missing required property "source"'));return c=c.concat(ri({key:b,value:h,valueSpec:C.layer,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Fr({key:b+".type",value:h.type,valueSpec:C.layer.type,style:u.style,styleSpec:u.styleSpec,object:h,objectKey:"type"})},filter:fa,layout:function(Ne){return ri({layer:h,key:Ne.key,value:Ne.value,style:Ne.style,styleSpec:Ne.styleSpec,objectElementValidators:{"*":function(Fe){return Li(Jt({layerType:V},Fe))}}})},paint:function(Ne){return ri({layer:h,key:Ne.key,value:Ne.value,style:Ne.style,styleSpec:Ne.styleSpec,objectElementValidators:{"*":function(Fe){return _l(Jt({layerType:V},Fe))}}})}}}))}function Ur(u){var c=u.value,h=u.key,b=Pn(c);return"string"!==b?[new Xe(h,c,"string expected, "+b+" found")]:[]}var Qs={promoteId:function(u){var c=u.key,h=u.value;if("string"===Pn(h))return Ur({key:c,value:h});var b=[];for(var x in h)b.push.apply(b,Ur({key:c+"."+x,value:h[x]}));return b}};function el(u){var c=u.value,h=u.key,b=u.styleSpec,x=u.style;if(!c.type)return[new Xe(h,c,'"type" is required')];var C,A=yt(c.type);switch(A){case"vector":case"raster":case"raster-dem":return ri({key:h,value:c,valueSpec:b["source_"+A.replace("-","_")],style:u.style,styleSpec:b,objectElementValidators:Qs});case"geojson":if(C=ri({key:h,value:c,valueSpec:b.source_geojson,style:x,styleSpec:b,objectElementValidators:Qs}),c.cluster)for(var V in c.clusterProperties){var Y=c.clusterProperties[V],re=Y[0],ue="string"==typeof re?[re,["accumulated"],["get",V]]:re;C.push.apply(C,da({key:h+"."+V+".map",value:Y[1],expressionContext:"cluster-map"})),C.push.apply(C,da({key:h+"."+V+".reduce",value:ue,expressionContext:"cluster-reduce"}))}return C;case"video":return ri({key:h,value:c,valueSpec:b.source_video,style:x,styleSpec:b});case"image":return ri({key:h,value:c,valueSpec:b.source_image,style:x,styleSpec:b});case"canvas":return[new Xe(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return xr({key:h+".type",value:c.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:x,styleSpec:b})}}function na(u){var c=u.value,h=u.styleSpec,b=h.light,x=u.style,C=[],A=Pn(c);if(void 0===c)return C;if("object"!==A)return C.concat([new Xe("light",c,"object expected, "+A+" found")]);for(var V in c){var Y=V.match(/^(.*)-transition$/);C=C.concat(Y&&b[Y[1]]&&b[Y[1]].transition?Fr({key:V,value:c[V],valueSpec:h.transition,style:x,styleSpec:h}):b[V]?Fr({key:V,value:c[V],valueSpec:b[V],style:x,styleSpec:h}):[new Xe(V,c[V],'unknown property "'+V+'"')])}return C}var ti={"*":function(){return[]},array:Xr,boolean:function(u){var c=u.value,h=u.key,b=Pn(c);return"boolean"!==b?[new Xe(h,c,"boolean expected, "+b+" found")]:[]},number:Pi,color:function(u){var c=u.key,h=u.value,b=Pn(h);return"string"!==b?[new Xe(c,h,"color expected, "+b+" found")]:null===so(h)?[new Xe(c,h,'color expected, "'+h+'" found')]:[]},constants:qt,enum:xr,filter:fa,function:no,layer:xi,object:ri,source:el,light:na,string:Ur,formatted:function(u){return 0===Ur(u).length?[]:da(u)},resolvedImage:function(u){return 0===Ur(u).length?[]:da(u)}};function Fr(u){var c=u.value,h=u.valueSpec,b=u.styleSpec;return h.expression&&Wi(yt(c))?no(u):h.expression&&Br(Lt(c))?da(u):h.type&&ti[h.type]?ti[h.type](u):ri(Jt({},u,{valueSpec:h.type?b[h.type]:h}))}function gu(u){var c=u.value,h=u.key,b=Ur(u);return b.length||(-1===c.indexOf("{fontstack}")&&b.push(new Xe(h,c,'"glyphs" url must include a "{fontstack}" token')),-1===c.indexOf("{range}")&&b.push(new Xe(h,c,'"glyphs" url must include a "{range}" token'))),b}function Us(u,c){void 0===c&&(c=ke);var h=[];return h=h.concat(Fr({key:"",value:u,valueSpec:c.$root,styleSpec:c,style:u,objectElementValidators:{glyphs:gu,"*":function(){return[]}}})),u.constants&&(h=h.concat(qt({key:"constants",value:u.constants,style:u,styleSpec:c}))),Ul(h)}function Ul(u){return[].concat(u).sort(function(c,h){return c.line-h.line})}function Gs(u){return function(){for(var c=[],h=arguments.length;h--;)c[h]=arguments[h];return Ul(u.apply(this,c))}}Us.source=Gs(el),Us.light=Gs(na),Us.layer=Gs(xi),Us.filter=Gs(fa),Us.paintProperty=Gs(_l),Us.layoutProperty=Gs(Li);var fc=Us,md=fc.light,Gl=fc.paintProperty,Vl=fc.layoutProperty;function bl(u,c){var h=!1;if(c&&c.length)for(var b=0,x=c;b<x.length;b+=1)u.fire(new st(new Error(x[b].message))),h=!0;return h}var Ia=Za;function Za(u,c,h){var b=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;var x=new Int32Array(this.arrayBuffer);u=x[0],this.d=(c=x[1])+2*(h=x[2]);for(var C=0;C<this.d*this.d;C++){var A=x[3+C],V=x[3+C+1];b.push(A===V?null:x.subarray(A,V))}var Y=x[3+b.length+1];this.keys=x.subarray(x[3+b.length],Y),this.bboxes=x.subarray(Y),this.insert=this._insertReadonly}else{this.d=c+2*h;for(var re=0;re<this.d*this.d;re++)b.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=u,this.padding=h,this.scale=c/u,this.uid=0;var ue=h/c*u;this.min=-ue,this.max=u+ue}Za.prototype.insert=function(u,c,h,b,x){this._forEachCell(c,h,b,x,this._insertCell,this.uid++),this.keys.push(u),this.bboxes.push(c),this.bboxes.push(h),this.bboxes.push(b),this.bboxes.push(x)},Za.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Za.prototype._insertCell=function(u,c,h,b,x,C){this.cells[x].push(C)},Za.prototype.query=function(u,c,h,b,x){var C=this.min,A=this.max;if(u<=C&&c<=C&&A<=h&&A<=b&&!x)return Array.prototype.slice.call(this.keys);var V=[];return this._forEachCell(u,c,h,b,this._queryCell,V,{},x),V},Za.prototype._queryCell=function(u,c,h,b,x,C,A,V){var Y=this.cells[x];if(null!==Y)for(var re=this.keys,ue=this.bboxes,de=0;de<Y.length;de++){var be=Y[de];if(void 0===A[be]){var Pe=4*be;(V?V(ue[Pe+0],ue[Pe+1],ue[Pe+2],ue[Pe+3]):u<=ue[Pe+2]&&c<=ue[Pe+3]&&h>=ue[Pe+0]&&b>=ue[Pe+1])?(A[be]=!0,C.push(re[be])):A[be]=!1}}},Za.prototype._forEachCell=function(u,c,h,b,x,C,A,V){for(var Y=this._convertToCellCoord(u),re=this._convertToCellCoord(c),ue=this._convertToCellCoord(h),de=this._convertToCellCoord(b),be=Y;be<=ue;be++)for(var Pe=re;Pe<=de;Pe++){var Ne=this.d*Pe+be;if((!V||V(this._convertFromCellCoord(be),this._convertFromCellCoord(Pe),this._convertFromCellCoord(be+1),this._convertFromCellCoord(Pe+1)))&&x.call(this,u,c,h,b,Ne,C,A,V))return}},Za.prototype._convertFromCellCoord=function(u){return(u-this.padding)/this.scale},Za.prototype._convertToCellCoord=function(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))},Za.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var u=this.cells,c=3+this.cells.length+1+1,h=0,b=0;b<this.cells.length;b++)h+=this.cells[b].length;var x=new Int32Array(c+h+this.keys.length+this.bboxes.length);x[0]=this.extent,x[1]=this.n,x[2]=this.padding;for(var C=c,A=0;A<u.length;A++){var V=u[A];x[3+A]=C,x.set(V,C),C+=V.length}return x[3+u.length]=C,x.set(this.keys,C),x[3+u.length+1]=C+=this.keys.length,x.set(this.bboxes,C),C+=this.bboxes.length,x.buffer};var Vc=M.ImageData,ja=M.ImageBitmap,As={};function _n(u,c,h){void 0===h&&(h={}),Object.defineProperty(c,"_classRegistryKey",{value:u,writeable:!1}),As[u]={klass:c,omit:h.omit||[],shallow:h.shallow||[]}}for(var df in _n("Object",Object),Ia.serialize=function(u,c){var h=u.toArrayBuffer();return c&&c.push(h),{buffer:h}},Ia.deserialize=function(u){return new Ia(u.buffer)},_n("Grid",Ia),_n("Color",dr),_n("Error",Error),_n("ResolvedImage",_r),_n("StylePropertyFunction",An),_n("StyleExpression",Wa,{omit:["_evaluator"]}),_n("ZoomDependentExpression",Ot),_n("ZoomConstantExpression",ft),_n("CompoundExpression",tt,{omit:["_evaluate"]}),gl)gl[df]._classRegistryKey||_n("Expression_"+df,gl[df]);function gd(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&"ArrayBuffer"===u.constructor.name)}function hc(u){return ja&&u instanceof ja}function ha(u,c){if(null==u||"boolean"==typeof u||"number"==typeof u||"string"==typeof u||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp)return u;if(gd(u)||hc(u))return c&&c.push(u),u;if(ArrayBuffer.isView(u)){var h=u;return c&&c.push(h.buffer),h}if(u instanceof Vc)return c&&c.push(u.data.buffer),u;if(Array.isArray(u)){for(var b=[],x=0,C=u;x<C.length;x+=1)b.push(ha(C[x],c));return b}if("object"==typeof u){var A=u.constructor,V=A._classRegistryKey;if(!V)throw new Error("can't serialize object of unregistered class");var Y=A.serialize?A.serialize(u,c):{};if(!A.serialize){for(var re in u)if(u.hasOwnProperty(re)&&!(As[V].omit.indexOf(re)>=0)){var ue=u[re];Y[re]=As[V].shallow.indexOf(re)>=0?ue:ha(ue,c)}u instanceof Error&&(Y.message=u.message)}if(Y.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==V&&(Y.$name=V),Y}throw new Error("can't serialize object of type "+typeof u)}function vd(u){if(null==u||"boolean"==typeof u||"number"==typeof u||"string"==typeof u||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||gd(u)||hc(u)||ArrayBuffer.isView(u)||u instanceof Vc)return u;if(Array.isArray(u))return u.map(vd);if("object"==typeof u){var c=u.$name||"Object",h=As[c].klass;if(!h)throw new Error("can't deserialize unregistered class "+c);if(h.deserialize)return h.deserialize(u);for(var b=Object.create(h.prototype),x=0,C=Object.keys(u);x<C.length;x+=1){var A=C[x];if("$name"!==A){var V=u[A];b[A]=As[c].shallow.indexOf(A)>=0?V:vd(V)}}return b}throw new Error("can't deserialize object of type "+typeof u)}var ra=function(){this.first=!0};ra.prototype.update=function(u,c){var h=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=c),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=h,!0))};var xn={"Latin-1 Supplement":function(u){return u>=128&&u<=255},Arabic:function(u){return u>=1536&&u<=1791},"Arabic Supplement":function(u){return u>=1872&&u<=1919},"Arabic Extended-A":function(u){return u>=2208&&u<=2303},"Hangul Jamo":function(u){return u>=4352&&u<=4607},"Unified Canadian Aboriginal Syllabics":function(u){return u>=5120&&u<=5759},Khmer:function(u){return u>=6016&&u<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(u){return u>=6320&&u<=6399},"General Punctuation":function(u){return u>=8192&&u<=8303},"Letterlike Symbols":function(u){return u>=8448&&u<=8527},"Number Forms":function(u){return u>=8528&&u<=8591},"Miscellaneous Technical":function(u){return u>=8960&&u<=9215},"Control Pictures":function(u){return u>=9216&&u<=9279},"Optical Character Recognition":function(u){return u>=9280&&u<=9311},"Enclosed Alphanumerics":function(u){return u>=9312&&u<=9471},"Geometric Shapes":function(u){return u>=9632&&u<=9727},"Miscellaneous Symbols":function(u){return u>=9728&&u<=9983},"Miscellaneous Symbols and Arrows":function(u){return u>=11008&&u<=11263},"CJK Radicals Supplement":function(u){return u>=11904&&u<=12031},"Kangxi Radicals":function(u){return u>=12032&&u<=12255},"Ideographic Description Characters":function(u){return u>=12272&&u<=12287},"CJK Symbols and Punctuation":function(u){return u>=12288&&u<=12351},Hiragana:function(u){return u>=12352&&u<=12447},Katakana:function(u){return u>=12448&&u<=12543},Bopomofo:function(u){return u>=12544&&u<=12591},"Hangul Compatibility Jamo":function(u){return u>=12592&&u<=12687},Kanbun:function(u){return u>=12688&&u<=12703},"Bopomofo Extended":function(u){return u>=12704&&u<=12735},"CJK Strokes":function(u){return u>=12736&&u<=12783},"Katakana Phonetic Extensions":function(u){return u>=12784&&u<=12799},"Enclosed CJK Letters and Months":function(u){return u>=12800&&u<=13055},"CJK Compatibility":function(u){return u>=13056&&u<=13311},"CJK Unified Ideographs Extension A":function(u){return u>=13312&&u<=19903},"Yijing Hexagram Symbols":function(u){return u>=19904&&u<=19967},"CJK Unified Ideographs":function(u){return u>=19968&&u<=40959},"Yi Syllables":function(u){return u>=40960&&u<=42127},"Yi Radicals":function(u){return u>=42128&&u<=42191},"Hangul Jamo Extended-A":function(u){return u>=43360&&u<=43391},"Hangul Syllables":function(u){return u>=44032&&u<=55215},"Hangul Jamo Extended-B":function(u){return u>=55216&&u<=55295},"Private Use Area":function(u){return u>=57344&&u<=63743},"CJK Compatibility Ideographs":function(u){return u>=63744&&u<=64255},"Arabic Presentation Forms-A":function(u){return u>=64336&&u<=65023},"Vertical Forms":function(u){return u>=65040&&u<=65055},"CJK Compatibility Forms":function(u){return u>=65072&&u<=65103},"Small Form Variants":function(u){return u>=65104&&u<=65135},"Arabic Presentation Forms-B":function(u){return u>=65136&&u<=65279},"Halfwidth and Fullwidth Forms":function(u){return u>=65280&&u<=65519}};function ff(u){for(var c=0,h=u;c<h.length;c+=1)if(hf(h[c].charCodeAt(0)))return!0;return!1}function hf(u){return!(746!==u&&747!==u&&(u<4352||!(xn["Bopomofo Extended"](u)||xn.Bopomofo(u)||xn["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||xn["CJK Compatibility Ideographs"](u)||xn["CJK Compatibility"](u)||xn["CJK Radicals Supplement"](u)||xn["CJK Strokes"](u)||!(!xn["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||12336===u)||xn["CJK Unified Ideographs Extension A"](u)||xn["CJK Unified Ideographs"](u)||xn["Enclosed CJK Letters and Months"](u)||xn["Hangul Compatibility Jamo"](u)||xn["Hangul Jamo Extended-A"](u)||xn["Hangul Jamo Extended-B"](u)||xn["Hangul Jamo"](u)||xn["Hangul Syllables"](u)||xn.Hiragana(u)||xn["Ideographic Description Characters"](u)||xn.Kanbun(u)||xn["Kangxi Radicals"](u)||xn["Katakana Phonetic Extensions"](u)||xn.Katakana(u)&&12540!==u||!(!xn["Halfwidth and Fullwidth Forms"](u)||65288===u||65289===u||65293===u||u>=65306&&u<=65310||65339===u||65341===u||65343===u||u>=65371&&u<=65503||65507===u||u>=65512&&u<=65519)||!(!xn["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||xn["Unified Canadian Aboriginal Syllabics"](u)||xn["Unified Canadian Aboriginal Syllabics Extended"](u)||xn["Vertical Forms"](u)||xn["Yijing Hexagram Symbols"](u)||xn["Yi Syllables"](u)||xn["Yi Radicals"](u))))}function eu(u){return!(hf(u)||(c=u,xn["Latin-1 Supplement"](c)&&(167===c||169===c||174===c||177===c||188===c||189===c||190===c||215===c||247===c)||xn["General Punctuation"](c)&&(8214===c||8224===c||8225===c||8240===c||8241===c||8251===c||8252===c||8258===c||8263===c||8264===c||8265===c||8273===c)||xn["Letterlike Symbols"](c)||xn["Number Forms"](c)||xn["Miscellaneous Technical"](c)&&(c>=8960&&c<=8967||c>=8972&&c<=8991||c>=8996&&c<=9e3||9003===c||c>=9085&&c<=9114||c>=9150&&c<=9165||9167===c||c>=9169&&c<=9179||c>=9186&&c<=9215)||xn["Control Pictures"](c)&&9251!==c||xn["Optical Character Recognition"](c)||xn["Enclosed Alphanumerics"](c)||xn["Geometric Shapes"](c)||xn["Miscellaneous Symbols"](c)&&!(c>=9754&&c<=9759)||xn["Miscellaneous Symbols and Arrows"](c)&&(c>=11026&&c<=11055||c>=11088&&c<=11097||c>=11192&&c<=11243)||xn["CJK Symbols and Punctuation"](c)||xn.Katakana(c)||xn["Private Use Area"](c)||xn["CJK Compatibility Forms"](c)||xn["Small Form Variants"](c)||xn["Halfwidth and Fullwidth Forms"](c)||8734===c||8756===c||8757===c||c>=9984&&c<=10087||c>=10102&&c<=10131||65532===c||65533===c));var c}function fs(u){return u>=1424&&u<=2303||xn["Arabic Presentation Forms-A"](u)||xn["Arabic Presentation Forms-B"](u)}function pf(u,c){return!(!c&&fs(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||xn.Khmer(u))}function mf(u){for(var c=0,h=u;c<h.length;c+=1)if(fs(h[c].charCodeAt(0)))return!0;return!1}var xh=null,vo="unavailable",tl=null,gf=function(u){u&&"string"==typeof u&&u.indexOf("NetworkError")>-1&&(vo="error"),xh&&xh(u)};function yd(){Eh.fire(new it("pluginStateChange",{pluginStatus:vo,pluginURL:tl}))}var Eh=new nt,Ru=function(){return vo},vf=function(){if("deferred"!==vo||!tl)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");vo="loading",yd(),tl&&si({url:tl},function(u){u?gf(u):(vo="loaded",yd())})},yo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===vo||null!=yo.applyArabicShaping},isLoading:function(){return"loading"===vo},setState:function(u){vo=u.pluginStatus,tl=u.pluginURL},isParsed:function(){return null!=yo.applyArabicShaping&&null!=yo.processBidirectionalText&&null!=yo.processStyledBidirectionalText},getPluginURL:function(){return tl}},Ei=function(u,c){this.zoom=u,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.zoomHistory=c.zoomHistory,this.transition=c.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ra,this.transition={})};Ei.prototype.isSupportedScript=function(u){return function(c,h){for(var b=0,x=c;b<x.length;b+=1)if(!pf(x[b].charCodeAt(0),h))return!1;return!0}(u,yo.isLoaded())},Ei.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Ei.prototype.getCrossfadeParameters=function(){var u=this.zoom,c=u-Math.floor(u),h=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*c}};var Du=function(u,c){this.property=u,this.value=c,this.expression=function(h,b){if(Wi(h))return new An(h,b);if(Br(h)){var x=fn(h,b);if("error"===x.result)throw new Error(x.value.map(function(A){return A.key+": "+A.message}).join(", "));return x.value}var C=h;return"string"==typeof h&&"color"===b.type&&(C=dr.parse(h)),{kind:"constant",evaluate:function(){return C}}}(void 0===c?u.specification.default:c,u.specification)};Du.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Du.prototype.possiblyEvaluate=function(u,c,h){return this.property.possiblyEvaluate(this,u,c,h)};var Ai=function(u){this.property=u,this.value=new Du(u,void 0)};Ai.prototype.transitioned=function(u,c){return new pc(this.property,this.value,c,ae({},u.transition,this.transition),u.now)},Ai.prototype.untransitioned=function(){return new pc(this.property,this.value,null,{},0)};var Vs=function(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)};Vs.prototype.getValue=function(u){return ze(this._values[u].value.value)},Vs.prototype.setValue=function(u,c){this._values.hasOwnProperty(u)||(this._values[u]=new Ai(this._values[u].property)),this._values[u].value=new Du(this._values[u].property,null===c?void 0:ze(c))},Vs.prototype.getTransition=function(u){return ze(this._values[u].transition)},Vs.prototype.setTransition=function(u,c){this._values.hasOwnProperty(u)||(this._values[u]=new Ai(this._values[u].property)),this._values[u].transition=ze(c)||void 0},Vs.prototype.serialize=function(){for(var u={},c=0,h=Object.keys(this._values);c<h.length;c+=1){var b=h[c],x=this.getValue(b);void 0!==x&&(u[b]=x);var C=this.getTransition(b);void 0!==C&&(u[b+"-transition"]=C)}return u},Vs.prototype.transitioned=function(u,c){for(var h=new Ou(this._properties),b=0,x=Object.keys(this._values);b<x.length;b+=1){var C=x[b];h._values[C]=this._values[C].transitioned(u,c._values[C])}return h},Vs.prototype.untransitioned=function(){for(var u=new Ou(this._properties),c=0,h=Object.keys(this._values);c<h.length;c+=1){var b=h[c];u._values[b]=this._values[b].untransitioned()}return u};var pc=function(u,c,h,b,x){this.property=u,this.value=c,this.begin=x+b.delay||0,this.end=this.begin+b.duration||0,u.specification.transition&&(b.delay||b.duration)&&(this.prior=h)};pc.prototype.possiblyEvaluate=function(u,c,h){var b=u.now||0,x=this.value.possiblyEvaluate(u,c,h),C=this.prior;if(C){if(b>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(b<this.begin)return C.possiblyEvaluate(u,c,h);var A=(b-this.begin)/(this.end-this.begin);return this.property.interpolate(C.possiblyEvaluate(u,c,h),x,function(V){if(V<=0)return 0;if(V>=1)return 1;var Y=V*V,re=Y*V;return 4*(V<.5?re:3*(V-Y)+re-.75)}(A))}return x};var Ou=function(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)};Ou.prototype.possiblyEvaluate=function(u,c,h){for(var b=new mc(this._properties),x=0,C=Object.keys(this._values);x<C.length;x+=1){var A=C[x];b._values[A]=this._values[A].possiblyEvaluate(u,c,h)}return b},Ou.prototype.hasTransition=function(){for(var u=0,c=Object.keys(this._values);u<c.length;u+=1)if(this._values[c[u]].prior)return!0;return!1};var ql=function(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues)};ql.prototype.getValue=function(u){return ze(this._values[u].value)},ql.prototype.setValue=function(u,c){this._values[u]=new Du(this._values[u].property,null===c?void 0:ze(c))},ql.prototype.serialize=function(){for(var u={},c=0,h=Object.keys(this._values);c<h.length;c+=1){var b=h[c],x=this.getValue(b);void 0!==x&&(u[b]=x)}return u},ql.prototype.possiblyEvaluate=function(u,c,h){for(var b=new mc(this._properties),x=0,C=Object.keys(this._values);x<C.length;x+=1){var A=C[x];b._values[A]=this._values[A].possiblyEvaluate(u,c,h)}return b};var ji=function(u,c,h){this.property=u,this.value=c,this.parameters=h};ji.prototype.isConstant=function(){return"constant"===this.value.kind},ji.prototype.constantOr=function(u){return"constant"===this.value.kind?this.value.value:u},ji.prototype.evaluate=function(u,c,h,b){return this.property.evaluate(this.value,this.parameters,u,c,h,b)};var mc=function(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)};mc.prototype.get=function(u){return this._values[u]};var bn=function(u){this.specification=u};bn.prototype.possiblyEvaluate=function(u,c){return u.expression.evaluate(c)},bn.prototype.interpolate=function(u,c,h){var b=Ge[this.specification.type];return b?b(u,c,h):u};var Zn=function(u,c){this.specification=u,this.overrides=c};Zn.prototype.possiblyEvaluate=function(u,c,h,b){return new ji(this,"constant"===u.expression.kind||"camera"===u.expression.kind?{kind:"constant",value:u.expression.evaluate(c,null,{},h,b)}:u.expression,c)},Zn.prototype.interpolate=function(u,c,h){if("constant"!==u.value.kind||"constant"!==c.value.kind)return u;if(void 0===u.value.value||void 0===c.value.value)return new ji(this,{kind:"constant",value:void 0},u.parameters);var b=Ge[this.specification.type];return b?new ji(this,{kind:"constant",value:b(u.value.value,c.value.value,h)},u.parameters):u},Zn.prototype.evaluate=function(u,c,h,b,x,C){return"constant"===u.kind?u.value:u.evaluate(c,h,b,x,C)};var So=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.possiblyEvaluate=function(h,b,x,C){if(void 0===h.value)return new ji(this,{kind:"constant",value:void 0},b);if("constant"===h.expression.kind){var A=h.expression.evaluate(b,null,{},x,C),V="resolvedImage"===h.property.specification.type&&"string"!=typeof A?A.name:A,Y=this._calculate(V,V,V,b);return new ji(this,{kind:"constant",value:Y},b)}if("camera"===h.expression.kind){var re=this._calculate(h.expression.evaluate({zoom:b.zoom-1}),h.expression.evaluate({zoom:b.zoom}),h.expression.evaluate({zoom:b.zoom+1}),b);return new ji(this,{kind:"constant",value:re},b)}return new ji(this,h.expression,b)},c.prototype.evaluate=function(h,b,x,C,A,V){if("source"===h.kind){var Y=h.evaluate(b,x,C,A,V);return this._calculate(Y,Y,Y,b)}return"composite"===h.kind?this._calculate(h.evaluate({zoom:Math.floor(b.zoom)-1},x,C),h.evaluate({zoom:Math.floor(b.zoom)},x,C),h.evaluate({zoom:Math.floor(b.zoom)+1},x,C),b):h.value},c.prototype._calculate=function(h,b,x,C){return C.zoom>C.zoomHistory.lastIntegerZoom?{from:h,to:b}:{from:x,to:b}},c.prototype.interpolate=function(h){return h},c}(Zn),vu=function(u){this.specification=u};vu.prototype.possiblyEvaluate=function(u,c,h,b){if(void 0!==u.value){if("constant"===u.expression.kind){var x=u.expression.evaluate(c,null,{},h,b);return this._calculate(x,x,x,c)}return this._calculate(u.expression.evaluate(new Ei(Math.floor(c.zoom-1),c)),u.expression.evaluate(new Ei(Math.floor(c.zoom),c)),u.expression.evaluate(new Ei(Math.floor(c.zoom+1),c)),c)}},vu.prototype._calculate=function(u,c,h,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:u,to:c}:{from:h,to:c}},vu.prototype.interpolate=function(u){return u};var Mu=function(u){this.specification=u};Mu.prototype.possiblyEvaluate=function(u,c,h,b){return!!u.expression.evaluate(c,null,{},h,b)},Mu.prototype.interpolate=function(){return!1};var Pa=function(u){for(var c in this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],u){var h=u[c];h.specification.overridable&&this.overridableProperties.push(c);var b=this.defaultPropertyValues[c]=new Du(h,void 0),x=this.defaultTransitionablePropertyValues[c]=new Ai(h);this.defaultTransitioningPropertyValues[c]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=b.possiblyEvaluate({})}};_n("DataDrivenProperty",Zn),_n("DataConstantProperty",bn),_n("CrossFadedDataDrivenProperty",So),_n("CrossFadedProperty",vu),_n("ColorRampProperty",Mu);var Ro=function(u){function c(h,b){if(u.call(this),this.id=h.id,this.type=h.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==h.type&&(this.metadata=h.metadata,this.minzoom=h.minzoom,this.maxzoom=h.maxzoom,"background"!==h.type&&(this.source=h.source,this.sourceLayer=h["source-layer"],this.filter=h.filter),b.layout&&(this._unevaluatedLayout=new ql(b.layout)),b.paint)){for(var x in this._transitionablePaint=new Vs(b.paint),h.paint)this.setPaintProperty(x,h.paint[x],{validate:!1});for(var C in h.layout)this.setLayoutProperty(C,h.layout[C],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new mc(b.paint)}}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},c.prototype.getLayoutProperty=function(h){return"visibility"===h?this.visibility:this._unevaluatedLayout.getValue(h)},c.prototype.setLayoutProperty=function(h,b,x){void 0===x&&(x={}),null!=b&&this._validate(Vl,"layers."+this.id+".layout."+h,h,b,x)||("visibility"!==h?this._unevaluatedLayout.setValue(h,b):this.visibility=b)},c.prototype.getPaintProperty=function(h){return Ce(h,"-transition")?this._transitionablePaint.getTransition(h.slice(0,-11)):this._transitionablePaint.getValue(h)},c.prototype.setPaintProperty=function(h,b,x){if(void 0===x&&(x={}),null!=b&&this._validate(Gl,"layers."+this.id+".paint."+h,h,b,x))return!1;if(Ce(h,"-transition"))return this._transitionablePaint.setTransition(h.slice(0,-11),b||void 0),!1;var C=this._transitionablePaint._values[h],A="cross-faded-data-driven"===C.property.specification["property-type"],V=C.value.isDataDriven(),Y=C.value;this._transitionablePaint.setValue(h,b),this._handleSpecialPaintPropertyUpdate(h);var re=this._transitionablePaint._values[h].value;return re.isDataDriven()||V||A||this._handleOverridablePaintPropertyUpdate(h,Y,re)},c.prototype._handleSpecialPaintPropertyUpdate=function(h){},c.prototype._handleOverridablePaintPropertyUpdate=function(h,b,x){return!1},c.prototype.isHidden=function(h){return!!(this.minzoom&&h<this.minzoom)||!!(this.maxzoom&&h>=this.maxzoom)||"none"===this.visibility},c.prototype.updateTransitions=function(h){this._transitioningPaint=this._transitionablePaint.transitioned(h,this._transitioningPaint)},c.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},c.prototype.recalculate=function(h,b){h.getCrossfadeParameters&&(this._crossfadeParameters=h.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(h,void 0,b)),this.paint=this._transitioningPaint.possiblyEvaluate(h,void 0,b)},c.prototype.serialize=function(){var h={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(h.layout=h.layout||{},h.layout.visibility=this.visibility),He(h,function(b,x){return!(void 0===b||"layout"===x&&!Object.keys(b).length||"paint"===x&&!Object.keys(b).length)})},c.prototype._validate=function(h,b,x,C,A){return void 0===A&&(A={}),(!A||!1!==A.validate)&&bl(this,h.call(fc,{key:b,layerType:this.type,objectKey:x,value:C,styleSpec:ke,style:{glyphs:!0,sprite:!0}}))},c.prototype.is3D=function(){return!1},c.prototype.isTileClipped=function(){return!1},c.prototype.hasOffscreenPass=function(){return!1},c.prototype.resize=function(){},c.prototype.isStateDependent=function(){for(var h in this.paint._values){var b=this.paint.get(h);if(b instanceof ji&&ca(b.property.specification)&&("source"===b.value.kind||"composite"===b.value.kind)&&b.value.isStateDependent)return!0}return!1},c}(nt),zp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ku=function(u,c){this._structArray=u,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ro=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function _o(u,c){void 0===c&&(c=1);var h=0,b=0;return{members:u.map(function(x){var C=zp[x.type].BYTES_PER_ELEMENT,A=h=yf(h,Math.max(c,C)),V=x.components||1;return b=Math.max(b,C),h+=C*V,{name:x.name,type:x.type,components:V,offset:A}}),size:yf(h,Math.max(b,c)),alignment:c}}function yf(u,c){return Math.ceil(u/c)*c}ro.serialize=function(u,c){return u._trim(),c&&(u.isTransferred=!0,c.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}},ro.deserialize=function(u){var c=Object.create(this.prototype);return c.arrayBuffer=u.arrayBuffer,c.length=u.length,c.capacity=u.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c},ro.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},ro.prototype.clear=function(){this.length=0},ro.prototype.resize=function(u){this.reserve(u),this.length=u},ro.prototype.reserve=function(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}},ro.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var gc=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,b){var x=this.length;return this.resize(x+1),this.emplace(x,h,b)},c.prototype.emplace=function(h,b,x){var C=2*h;return this.int16[C+0]=b,this.int16[C+1]=x,h},c}(ro);gc.prototype.bytesPerElement=4,_n("StructArrayLayout2i4",gc);var fr=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,b,x,C){var A=this.length;return this.resize(A+1),this.emplace(A,h,b,x,C)},c.prototype.emplace=function(h,b,x,C,A){var V=4*h;return this.int16[V+0]=b,this.int16[V+1]=x,this.int16[V+2]=C,this.int16[V+3]=A,h},c}(ro);fr.prototype.bytesPerElement=8,_n("StructArrayLayout4i8",fr);var Rs=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,b,x,C,A,V){var Y=this.length;return this.resize(Y+1),this.emplace(Y,h,b,x,C,A,V)},c.prototype.emplace=function(h,b,x,C,A,V,Y){var re=6*h;return this.int16[re+0]=b,this.int16[re+1]=x,this.int16[re+2]=C,this.int16[re+3]=A,this.int16[re+4]=V,this.int16[re+5]=Y,h},c}(ro);Rs.prototype.bytesPerElement=12,_n("StructArrayLayout2i4i12",Rs);var Sh=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,b,x,C,A,V){var Y=this.length;return this.resize(Y+1),this.emplace(Y,h,b,x,C,A,V)},c.prototype.emplace=function(h,b,x,C,A,V,Y){var re=4*h,ue=8*h;return this.int16[re+0]=b,this.int16[re+1]=x,this.uint8[ue+4]=C,this.uint8[ue+5]=A,this.uint8[ue+6]=V,this.uint8[ue+7]=Y,h},c}(ro);Sh.prototype.bytesPerElement=8,_n("StructArrayLayout2i4ub8",Sh);var vc=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,b){var x=this.length;return this.resize(x+1),this.emplace(x,h,b)},c.prototype.emplace=function(h,b,x){var C=2*h;return this.float32[C+0]=b,this.float32[C+1]=x,h},c}(ro);vc.prototype.bytesPerElement=8,_n("StructArrayLayout2f8",vc);var wl=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,b,x,C,A,V,Y,re,ue,de){var be=this.length;return this.resize(be+1),this.emplace(be,h,b,x,C,A,V,Y,re,ue,de)},c.prototype.emplace=function(h,b,x,C,A,V,Y,re,ue,de,be){var Pe=10*h;return this.uint16[Pe+0]=b,this.uint16[Pe+1]=x,this.uint16[Pe+2]=C,this.uint16[Pe+3]=A,this.uint16[Pe+4]=V,this.uint16[Pe+5]=Y,this.uint16[Pe+6]=re,this.uint16[Pe+7]=ue,this.uint16[Pe+8]=de,this.uint16[Pe+9]=be,h},c}(ro);wl.prototype.bytesPerElement=20,_n("StructArrayLayout10ui20",wl);var qc=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,b,x,C,A,V,Y,re,ue,de,be,Pe){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,h,b,x,C,A,V,Y,re,ue,de,be,Pe)},c.prototype.emplace=function(h,b,x,C,A,V,Y,re,ue,de,be,Pe,Ne){var Fe=12*h;return this.int16[Fe+0]=b,this.int16[Fe+1]=x,this.int16[Fe+2]=C,this.int16[Fe+3]=A,this.uint16[Fe+4]=V,this.uint16[Fe+5]=Y,this.uint16[Fe+6]=re,this.uint16[Fe+7]=ue,this.int16[Fe+8]=de,this.int16[Fe+9]=be,this.int16[Fe+10]=Pe,this.int16[Fe+11]=Ne,h},c}(ro);qc.prototype.bytesPerElement=24,_n("StructArrayLayout4i4ui4i24",qc);var Hc=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,b,x){var C=this.length;return this.resize(C+1),this.emplace(C,h,b,x)},c.prototype.emplace=function(h,b,x,C){var A=3*h;return this.float32[A+0]=b,this.float32[A+1]=x,this.float32[A+2]=C,h},c}(ro);Hc.prototype.bytesPerElement=12,_n("StructArrayLayout3f12",Hc);var Ch=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h){var b=this.length;return this.resize(b+1),this.emplace(b,h)},c.prototype.emplace=function(h,b){return this.uint32[1*h+0]=b,h},c}(ro);Ch.prototype.bytesPerElement=4,_n("StructArrayLayout1ul4",Ch);var _d=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,b,x,C,A,V,Y,re,ue){var de=this.length;return this.resize(de+1),this.emplace(de,h,b,x,C,A,V,Y,re,ue)},c.prototype.emplace=function(h,b,x,C,A,V,Y,re,ue,de){var be=10*h,Pe=5*h;return this.int16[be+0]=b,this.int16[be+1]=x,this.int16[be+2]=C,this.int16[be+3]=A,this.int16[be+4]=V,this.int16[be+5]=Y,this.uint32[Pe+3]=re,this.uint16[be+8]=ue,this.uint16[be+9]=de,h},c}(ro);_d.prototype.bytesPerElement=20,_n("StructArrayLayout6i1ul2ui20",_d);var Wt=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,b,x,C,A,V){var Y=this.length;return this.resize(Y+1),this.emplace(Y,h,b,x,C,A,V)},c.prototype.emplace=function(h,b,x,C,A,V,Y){var re=6*h;return this.int16[re+0]=b,this.int16[re+1]=x,this.int16[re+2]=C,this.int16[re+3]=A,this.int16[re+4]=V,this.int16[re+5]=Y,h},c}(ro);Wt.prototype.bytesPerElement=12,_n("StructArrayLayout2i2i2i12",Wt);var Si=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,b,x,C,A){var V=this.length;return this.resize(V+1),this.emplace(V,h,b,x,C,A)},c.prototype.emplace=function(h,b,x,C,A,V){var Y=4*h,re=8*h;return this.float32[Y+0]=b,this.float32[Y+1]=x,this.float32[Y+2]=C,this.int16[re+6]=A,this.int16[re+7]=V,h},c}(ro);Si.prototype.bytesPerElement=16,_n("StructArrayLayout2f1f2i16",Si);var Th=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,b,x,C){var A=this.length;return this.resize(A+1),this.emplace(A,h,b,x,C)},c.prototype.emplace=function(h,b,x,C,A){var V=12*h,Y=3*h;return this.uint8[V+0]=b,this.uint8[V+1]=x,this.float32[Y+1]=C,this.float32[Y+2]=A,h},c}(ro);Th.prototype.bytesPerElement=12,_n("StructArrayLayout2ub2f12",Th);var tu=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,b,x){var C=this.length;return this.resize(C+1),this.emplace(C,h,b,x)},c.prototype.emplace=function(h,b,x,C){var A=3*h;return this.uint16[A+0]=b,this.uint16[A+1]=x,this.uint16[A+2]=C,h},c}(ro);tu.prototype.bytesPerElement=6,_n("StructArrayLayout3ui6",tu);var Yo=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,b,x,C,A,V,Y,re,ue,de,be,Pe,Ne,Fe,ot,Ye,ht){var gt=this.length;return this.resize(gt+1),this.emplace(gt,h,b,x,C,A,V,Y,re,ue,de,be,Pe,Ne,Fe,ot,Ye,ht)},c.prototype.emplace=function(h,b,x,C,A,V,Y,re,ue,de,be,Pe,Ne,Fe,ot,Ye,ht,gt){var bt=24*h,St=12*h,zt=48*h;return this.int16[bt+0]=b,this.int16[bt+1]=x,this.uint16[bt+2]=C,this.uint16[bt+3]=A,this.uint32[St+2]=V,this.uint32[St+3]=Y,this.uint32[St+4]=re,this.uint16[bt+10]=ue,this.uint16[bt+11]=de,this.uint16[bt+12]=be,this.float32[St+7]=Pe,this.float32[St+8]=Ne,this.uint8[zt+36]=Fe,this.uint8[zt+37]=ot,this.uint8[zt+38]=Ye,this.uint32[St+10]=ht,this.int16[bt+22]=gt,h},c}(ro);Yo.prototype.bytesPerElement=48,_n("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Yo);var Hl=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,b,x,C,A,V,Y,re,ue,de,be,Pe,Ne,Fe,ot,Ye,ht,gt,bt,St,zt,nn,cn,Tn,hn,jn,pn,Er){var Yn=this.length;return this.resize(Yn+1),this.emplace(Yn,h,b,x,C,A,V,Y,re,ue,de,be,Pe,Ne,Fe,ot,Ye,ht,gt,bt,St,zt,nn,cn,Tn,hn,jn,pn,Er)},c.prototype.emplace=function(h,b,x,C,A,V,Y,re,ue,de,be,Pe,Ne,Fe,ot,Ye,ht,gt,bt,St,zt,nn,cn,Tn,hn,jn,pn,Er,Yn){var Mn=34*h,Sr=17*h;return this.int16[Mn+0]=b,this.int16[Mn+1]=x,this.int16[Mn+2]=C,this.int16[Mn+3]=A,this.int16[Mn+4]=V,this.int16[Mn+5]=Y,this.int16[Mn+6]=re,this.int16[Mn+7]=ue,this.uint16[Mn+8]=de,this.uint16[Mn+9]=be,this.uint16[Mn+10]=Pe,this.uint16[Mn+11]=Ne,this.uint16[Mn+12]=Fe,this.uint16[Mn+13]=ot,this.uint16[Mn+14]=Ye,this.uint16[Mn+15]=ht,this.uint16[Mn+16]=gt,this.uint16[Mn+17]=bt,this.uint16[Mn+18]=St,this.uint16[Mn+19]=zt,this.uint16[Mn+20]=nn,this.uint16[Mn+21]=cn,this.uint16[Mn+22]=Tn,this.uint32[Sr+12]=hn,this.float32[Sr+13]=jn,this.float32[Sr+14]=pn,this.float32[Sr+15]=Er,this.float32[Sr+16]=Yn,h},c}(ro);Hl.prototype.bytesPerElement=68,_n("StructArrayLayout8i15ui1ul4f68",Hl);var Ya=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h){var b=this.length;return this.resize(b+1),this.emplace(b,h)},c.prototype.emplace=function(h,b){return this.float32[1*h+0]=b,h},c}(ro);Ya.prototype.bytesPerElement=4,_n("StructArrayLayout1f4",Ya);var yu=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,b,x){var C=this.length;return this.resize(C+1),this.emplace(C,h,b,x)},c.prototype.emplace=function(h,b,x,C){var A=3*h;return this.int16[A+0]=b,this.int16[A+1]=x,this.int16[A+2]=C,h},c}(ro);yu.prototype.bytesPerElement=6,_n("StructArrayLayout3i6",yu);var bd=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,b,x){var C=this.length;return this.resize(C+1),this.emplace(C,h,b,x)},c.prototype.emplace=function(h,b,x,C){var A=4*h;return this.uint32[2*h+0]=b,this.uint16[A+2]=x,this.uint16[A+3]=C,h},c}(ro);bd.prototype.bytesPerElement=8,_n("StructArrayLayout1ul2ui8",bd);var yc=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,b){var x=this.length;return this.resize(x+1),this.emplace(x,h,b)},c.prototype.emplace=function(h,b,x){var C=2*h;return this.uint16[C+0]=b,this.uint16[C+1]=x,h},c}(ro);yc.prototype.bytesPerElement=4,_n("StructArrayLayout2ui4",yc);var Ih=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h){var b=this.length;return this.resize(b+1),this.emplace(b,h)},c.prototype.emplace=function(h,b){return this.uint16[1*h+0]=b,h},c}(ro);Ih.prototype.bytesPerElement=2,_n("StructArrayLayout1ui2",Ih);var p=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},c.prototype.emplaceBack=function(h,b,x,C){var A=this.length;return this.resize(A+1),this.emplace(A,h,b,x,C)},c.prototype.emplace=function(h,b,x,C,A){var V=4*h;return this.float32[V+0]=b,this.float32[V+1]=x,this.float32[V+2]=C,this.float32[V+3]=A,h},c}(ro);p.prototype.bytesPerElement=16,_n("StructArrayLayout4f16",p);var y=function(u){function c(){u.apply(this,arguments)}u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c;var h={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return h.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},h.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},h.x1.get=function(){return this._structArray.int16[this._pos2+2]},h.y1.get=function(){return this._structArray.int16[this._pos2+3]},h.x2.get=function(){return this._structArray.int16[this._pos2+4]},h.y2.get=function(){return this._structArray.int16[this._pos2+5]},h.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},h.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},h.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},h.anchorPoint.get=function(){return new I(this.anchorPointX,this.anchorPointY)},Object.defineProperties(c.prototype,h),c}(ku);y.prototype.size=20;var g=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.get=function(h){return new y(this,h)},c}(_d);_n("CollisionBoxArray",g);var w=function(u){function c(){u.apply(this,arguments)}u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c;var h={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return h.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},h.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},h.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},h.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},h.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},h.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},h.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},h.segment.get=function(){return this._structArray.uint16[this._pos2+10]},h.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},h.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},h.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},h.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},h.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},h.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},h.placedOrientation.set=function(b){this._structArray.uint8[this._pos1+37]=b},h.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},h.hidden.set=function(b){this._structArray.uint8[this._pos1+38]=b},h.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},h.crossTileID.set=function(b){this._structArray.uint32[this._pos4+10]=b},h.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(c.prototype,h),c}(ku);w.prototype.size=48;var T=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.get=function(h){return new w(this,h)},c}(Yo);_n("PlacedSymbolArray",T);var B=function(u){function c(){u.apply(this,arguments)}u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c;var h={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return h.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},h.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},h.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},h.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},h.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},h.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},h.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},h.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},h.key.get=function(){return this._structArray.uint16[this._pos2+8]},h.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},h.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},h.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},h.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},h.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},h.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},h.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},h.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},h.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},h.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},h.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},h.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},h.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},h.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},h.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},h.crossTileID.set=function(b){this._structArray.uint32[this._pos4+12]=b},h.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},h.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},h.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},h.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(c.prototype,h),c}(ku);B.prototype.size=68;var U=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.get=function(h){return new B(this,h)},c}(Hl);_n("SymbolInstanceArray",U);var Z=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.getoffsetX=function(h){return this.float32[1*h+0]},c}(Ya);_n("GlyphOffsetArray",Z);var se=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.getx=function(h){return this.int16[3*h+0]},c.prototype.gety=function(h){return this.int16[3*h+1]},c.prototype.gettileUnitDistanceFromAnchor=function(h){return this.int16[3*h+2]},c}(yu);_n("SymbolLineVertexArray",se);var ge=function(u){function c(){u.apply(this,arguments)}u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c;var h={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return h.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},h.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},h.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(c.prototype,h),c}(ku);ge.prototype.size=8;var Re=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.get=function(h){return new ge(this,h)},c}(bd);_n("FeatureIndexArray",Re);var Me=_o([{name:"a_pos",components:2,type:"Int16"}],4).members,De=function(u){void 0===u&&(u=[]),this.segments=u};function Ve(u,c){return 256*(u=ie(Math.floor(u),0,255))+ie(Math.floor(c),0,255)}De.prototype.prepareSegment=function(u,c,h,b){var x=this.segments[this.segments.length-1];return u>De.MAX_VERTEX_ARRAY_LENGTH&&N("Max vertices per segment is "+De.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+u),(!x||x.vertexLength+u>De.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==b)&&(x={vertexOffset:c.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},void 0!==b&&(x.sortKey=b),this.segments.push(x)),x},De.prototype.get=function(){return this.segments},De.prototype.destroy=function(){for(var u=0,c=this.segments;u<c.length;u+=1){var h=c[u];for(var b in h.vaos)h.vaos[b].destroy()}},De.simpleSegment=function(u,c,h,b){return new De([{vertexOffset:u,primitiveOffset:c,vertexLength:h,primitiveLength:b,vaos:{},sortKey:0}])},De.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,_n("SegmentVector",De);var Ue=_o([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Qe=G(function(u){u.exports=function(c,h){var b,x,C,A,V,Y,re,ue;for(x=c.length-(b=3&c.length),C=h,V=3432918353,Y=461845907,ue=0;ue<x;)re=255&c.charCodeAt(ue)|(255&c.charCodeAt(++ue))<<8|(255&c.charCodeAt(++ue))<<16|(255&c.charCodeAt(++ue))<<24,++ue,C=27492+(65535&(A=5*(65535&(C=(C^=re=(65535&(re=(re=(65535&re)*V+(((re>>>16)*V&65535)<<16)&4294967295)<<15|re>>>17))*Y+(((re>>>16)*Y&65535)<<16)&4294967295)<<13|C>>>19))+((5*(C>>>16)&65535)<<16)&4294967295))+((58964+(A>>>16)&65535)<<16);switch(re=0,b){case 3:re^=(255&c.charCodeAt(ue+2))<<16;case 2:re^=(255&c.charCodeAt(ue+1))<<8;case 1:C^=re=(65535&(re=(re=(65535&(re^=255&c.charCodeAt(ue)))*V+(((re>>>16)*V&65535)<<16)&4294967295)<<15|re>>>17))*Y+(((re>>>16)*Y&65535)<<16)&4294967295}return C^=c.length,C=2246822507*(65535&(C^=C>>>16))+((2246822507*(C>>>16)&65535)<<16)&4294967295,C=3266489909*(65535&(C^=C>>>13))+((3266489909*(C>>>16)&65535)<<16)&4294967295,(C^=C>>>16)>>>0}}),je=G(function(u){u.exports=function(c,h){for(var b,x=c.length,C=h^x,A=0;x>=4;)b=1540483477*(65535&(b=255&c.charCodeAt(A)|(255&c.charCodeAt(++A))<<8|(255&c.charCodeAt(++A))<<16|(255&c.charCodeAt(++A))<<24))+((1540483477*(b>>>16)&65535)<<16),C=1540483477*(65535&C)+((1540483477*(C>>>16)&65535)<<16)^(b=1540483477*(65535&(b^=b>>>24))+((1540483477*(b>>>16)&65535)<<16)),x-=4,++A;switch(x){case 3:C^=(255&c.charCodeAt(A+2))<<16;case 2:C^=(255&c.charCodeAt(A+1))<<8;case 1:C=1540483477*(65535&(C^=255&c.charCodeAt(A)))+((1540483477*(C>>>16)&65535)<<16)}return C=1540483477*(65535&(C^=C>>>13))+((1540483477*(C>>>16)&65535)<<16),(C^=C>>>15)>>>0}}),Ze=Qe,at=je;Ze.murmur3=Qe,Ze.murmur2=at;var pt=function(){this.ids=[],this.positions=[],this.indexed=!1};pt.prototype.add=function(u,c,h,b){this.ids.push(Tt(u)),this.positions.push(c,h,b)},pt.prototype.getPositions=function(u){for(var c=Tt(u),h=0,b=this.ids.length-1;h<b;){var x=h+b>>1;this.ids[x]>=c?b=x:h=x+1}for(var C=[];this.ids[h]===c;)C.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return C},pt.serialize=function(u,c){var h=new Float64Array(u.ids),b=new Uint32Array(u.positions);return function x(C,A,V,Y){for(;V<Y;){for(var re=C[V+Y>>1],ue=V-1,de=Y+1;;){do{ue++}while(C[ue]<re);do{de--}while(C[de]>re);if(ue>=de)break;Dt(C,ue,de),Dt(A,3*ue,3*de),Dt(A,3*ue+1,3*de+1),Dt(A,3*ue+2,3*de+2)}de-V<Y-de?(x(C,A,V,de),V=de+1):(x(C,A,de+1,Y),Y=de)}}(h,b,0,h.length-1),c&&c.push(h.buffer,b.buffer),{ids:h,positions:b}},pt.deserialize=function(u){var c=new pt;return c.ids=u.ids,c.positions=u.positions,c.indexed=!0,c};var Pt=Math.pow(2,53)-1;function Tt(u){var c=+u;return!isNaN(c)&&c<=Pt?c:Ze(String(u))}function Dt(u,c,h){var b=u[c];u[c]=u[h],u[h]=b}_n("FeaturePositionMap",pt);var Ft=function(u,c){this.gl=u.gl,this.location=c},rn=function(u){function c(h,b){u.call(this,h,b),this.current=0}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.set=function(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))},c}(Ft),Yt=function(u){function c(h,b){u.call(this,h,b),this.current=0}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.set=function(h){this.current!==h&&(this.current=h,this.gl.uniform1f(this.location,h))},c}(Ft),on=function(u){function c(h,b){u.call(this,h,b),this.current=[0,0]}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.set=function(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))},c}(Ft),Ln=function(u){function c(h,b){u.call(this,h,b),this.current=[0,0,0]}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.set=function(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))},c}(Ft),yn=function(u){function c(h,b){u.call(this,h,b),this.current=[0,0,0,0]}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.set=function(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]&&h[3]===this.current[3]||(this.current=h,this.gl.uniform4f(this.location,h[0],h[1],h[2],h[3]))},c}(Ft),qn=function(u){function c(h,b){u.call(this,h,b),this.current=dr.transparent}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.set=function(h){h.r===this.current.r&&h.g===this.current.g&&h.b===this.current.b&&h.a===this.current.a||(this.current=h,this.gl.uniform4f(this.location,h.r,h.g,h.b,h.a))},c}(Ft),li=new Float32Array(16),En=function(u){function c(h,b){u.call(this,h,b),this.current=li}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.set=function(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(var b=1;b<16;b++)if(h[b]!==this.current[b]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}},c}(Ft);function gr(u){return[Ve(255*u.r,255*u.g),Ve(255*u.b,255*u.a)]}var zr=function(u,c,h){this.value=u,this.uniformNames=c.map(function(b){return"u_"+b}),this.type=h};zr.prototype.setUniform=function(u,c,h){u.set(h.constantOr(this.value))},zr.prototype.getBinding=function(u,c,h){return"color"===this.type?new qn(u,c):new Yt(u,c)};var vr=function(u,c){this.uniformNames=c.map(function(h){return"u_"+h}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};vr.prototype.setConstantPatternPositions=function(u,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=u.tlbr},vr.prototype.setUniform=function(u,c,h,b){var x="u_pattern_to"===b?this.patternTo:"u_pattern_from"===b?this.patternFrom:"u_pixel_ratio_to"===b?this.pixelRatioTo:"u_pixel_ratio_from"===b?this.pixelRatioFrom:null;x&&u.set(x)},vr.prototype.getBinding=function(u,c,h){return"u_pattern"===h.substr(0,9)?new yn(u,c):new Yt(u,c)};var sr=function(u,c,h,b){this.expression=u,this.type=h,this.maxValue=0,this.paintVertexAttributes=c.map(function(x){return{name:"a_"+x,type:"Float32",components:"color"===h?2:1,offset:0}}),this.paintVertexArray=new b};sr.prototype.populatePaintArray=function(u,c,h,b,x){var C=this.paintVertexArray.length,A=this.expression.evaluate(new Ei(0),c,{},b,[],x);this.paintVertexArray.resize(u),this._setPaintValue(C,u,A)},sr.prototype.updatePaintArray=function(u,c,h,b){var x=this.expression.evaluate({zoom:0},h,b);this._setPaintValue(u,c,x)},sr.prototype._setPaintValue=function(u,c,h){if("color"===this.type)for(var b=gr(h),x=u;x<c;x++)this.paintVertexArray.emplace(x,b[0],b[1]);else{for(var C=u;C<c;C++)this.paintVertexArray.emplace(C,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}},sr.prototype.upload=function(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},sr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var or=function(u,c,h,b,x,C){this.expression=u,this.uniformNames=c.map(function(A){return"u_"+A+"_t"}),this.type=h,this.useIntegerZoom=b,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=c.map(function(A){return{name:"a_"+A,type:"Float32",components:"color"===h?4:2,offset:0}}),this.paintVertexArray=new C};or.prototype.populatePaintArray=function(u,c,h,b,x){var C=this.expression.evaluate(new Ei(this.zoom),c,{},b,[],x),A=this.expression.evaluate(new Ei(this.zoom+1),c,{},b,[],x),V=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(V,u,C,A)},or.prototype.updatePaintArray=function(u,c,h,b){var x=this.expression.evaluate({zoom:this.zoom},h,b),C=this.expression.evaluate({zoom:this.zoom+1},h,b);this._setPaintValue(u,c,x,C)},or.prototype._setPaintValue=function(u,c,h,b){if("color"===this.type)for(var x=gr(h),C=gr(b),A=u;A<c;A++)this.paintVertexArray.emplace(A,x[0],x[1],C[0],C[1]);else{for(var V=u;V<c;V++)this.paintVertexArray.emplace(V,h,b);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(b))}},or.prototype.upload=function(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},or.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},or.prototype.setUniform=function(u,c){var h=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,b=ie(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);u.set(b)},or.prototype.getBinding=function(u,c,h){return new Yt(u,c)};var tr=function(u,c,h,b,x,C){this.expression=u,this.type=c,this.useIntegerZoom=h,this.zoom=b,this.layerId=C,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x};tr.prototype.populatePaintArray=function(u,c,h){var b=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(b,u,c.patterns&&c.patterns[this.layerId],h)},tr.prototype.updatePaintArray=function(u,c,h,b,x){this._setPaintValues(u,c,h.patterns&&h.patterns[this.layerId],x)},tr.prototype._setPaintValues=function(u,c,h,b){if(b&&h){var x=b[h.min],C=b[h.mid],A=b[h.max];if(x&&C&&A)for(var V=u;V<c;V++)this.zoomInPaintVertexArray.emplace(V,C.tl[0],C.tl[1],C.br[0],C.br[1],x.tl[0],x.tl[1],x.br[0],x.br[1],C.pixelRatio,x.pixelRatio),this.zoomOutPaintVertexArray.emplace(V,C.tl[0],C.tl[1],C.br[0],C.br[1],A.tl[0],A.tl[1],A.br[0],A.br[1],C.pixelRatio,A.pixelRatio)}},tr.prototype.upload=function(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,Ue.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,Ue.members,this.expression.isStateDependent))},tr.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Kn=function(u,c,h){this.binders={},this._buffers=[];var b=[];for(var x in u.paint._values)if(h(x)){var C=u.paint.get(x);if(C instanceof ji&&ca(C.property.specification)){var A=Lo(x,u.type),V=C.value,Y=C.property.specification.type,re=C.property.useIntegerZoom,ue=C.property.specification["property-type"],de="cross-faded"===ue||"cross-faded-data-driven"===ue;if("constant"===V.kind)this.binders[x]=de?new vr(V.value,A):new zr(V.value,A,Y),b.push("/u_"+x);else if("source"===V.kind||de){var be=Bo(x,Y,"source");this.binders[x]=de?new tr(V,Y,re,c,be,u.id):new sr(V,A,Y,be),b.push("/a_"+x)}else{var Pe=Bo(x,Y,"composite");this.binders[x]=new or(V,A,Y,re,c,Pe),b.push("/z_"+x)}}}this.cacheKey=b.sort().join("")};Kn.prototype.getMaxValue=function(u){var c=this.binders[u];return c instanceof sr||c instanceof or?c.maxValue:0},Kn.prototype.populatePaintArrays=function(u,c,h,b,x){for(var C in this.binders){var A=this.binders[C];(A instanceof sr||A instanceof or||A instanceof tr)&&A.populatePaintArray(u,c,h,b,x)}},Kn.prototype.setConstantPatternPositions=function(u,c){for(var h in this.binders){var b=this.binders[h];b instanceof vr&&b.setConstantPatternPositions(u,c)}},Kn.prototype.updatePaintArrays=function(u,c,h,b,x){var C=!1;for(var A in u)for(var V=0,Y=c.getPositions(A);V<Y.length;V+=1){var re=Y[V],ue=h.feature(re.index);for(var de in this.binders){var be=this.binders[de];if((be instanceof sr||be instanceof or||be instanceof tr)&&!0===be.expression.isStateDependent){var Pe=b.paint.get(de);be.expression=Pe.value,be.updatePaintArray(re.start,re.end,ue,u[A],x),C=!0}}}return C},Kn.prototype.defines=function(){var u=[];for(var c in this.binders){var h=this.binders[c];(h instanceof zr||h instanceof vr)&&u.push.apply(u,h.uniformNames.map(function(b){return"#define HAS_UNIFORM_"+b}))}return u},Kn.prototype.getBinderAttributes=function(){var u=[];for(var c in this.binders){var h=this.binders[c];if(h instanceof sr||h instanceof or)for(var b=0;b<h.paintVertexAttributes.length;b++)u.push(h.paintVertexAttributes[b].name);else if(h instanceof tr)for(var x=0;x<Ue.members.length;x++)u.push(Ue.members[x].name)}return u},Kn.prototype.getBinderUniforms=function(){var u=[];for(var c in this.binders){var h=this.binders[c];if(h instanceof zr||h instanceof vr||h instanceof or)for(var b=0,x=h.uniformNames;b<x.length;b+=1)u.push(x[b])}return u},Kn.prototype.getPaintVertexBuffers=function(){return this._buffers},Kn.prototype.getUniforms=function(u,c){var h=[];for(var b in this.binders){var x=this.binders[b];if(x instanceof zr||x instanceof vr||x instanceof or)for(var C=0,A=x.uniformNames;C<A.length;C+=1){var V=A[C];if(c[V]){var Y=x.getBinding(u,c[V],V);h.push({name:V,property:b,binding:Y})}}}return h},Kn.prototype.setUniforms=function(u,c,h,b){for(var x=0,C=c;x<C.length;x+=1){var A=C[x],V=A.name,Y=A.property;this.binders[Y].setUniform(A.binding,b,h.get(Y),V)}},Kn.prototype.updatePaintBuffers=function(u){for(var c in this._buffers=[],this.binders){var h=this.binders[c];if(u&&h instanceof tr){var b=2===u.fromScale?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;b&&this._buffers.push(b)}else(h instanceof sr||h instanceof or)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}},Kn.prototype.upload=function(u){for(var c in this.binders){var h=this.binders[c];(h instanceof sr||h instanceof or||h instanceof tr)&&h.upload(u)}this.updatePaintBuffers()},Kn.prototype.destroy=function(){for(var u in this.binders){var c=this.binders[u];(c instanceof sr||c instanceof or||c instanceof tr)&&c.destroy()}};var Ui=function(u,c,h){void 0===h&&(h=function(){return!0}),this.programConfigurations={};for(var b=0,x=u;b<x.length;b+=1){var C=x[b];this.programConfigurations[C.id]=new Kn(C,c,h)}this.needsUpload=!1,this._featureMap=new pt,this._bufferOffset=0};function Lo(u,c){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(c+"-","").replace(/-/g,"_")]}function Bo(u,c,h){var x={"line-pattern":{source:wl,composite:wl},"fill-pattern":{source:wl,composite:wl},"fill-extrusion-pattern":{source:wl,composite:wl}}[u];return x&&x[h]||{color:{source:vc,composite:p},number:{source:Ya,composite:vc}}[c][h]}Ui.prototype.populatePaintArrays=function(u,c,h,b,x,C){for(var A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(u,c,b,x,C);void 0!==c.id&&this._featureMap.add(c.id,h,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0},Ui.prototype.updatePaintArrays=function(u,c,h,b){for(var x=0,C=h;x<C.length;x+=1){var A=C[x];this.needsUpload=this.programConfigurations[A.id].updatePaintArrays(u,this._featureMap,c,A,b)||this.needsUpload}},Ui.prototype.get=function(u){return this.programConfigurations[u]},Ui.prototype.upload=function(u){if(this.needsUpload){for(var c in this.programConfigurations)this.programConfigurations[c].upload(u);this.needsUpload=!1}},Ui.prototype.destroy=function(){for(var u in this.programConfigurations)this.programConfigurations[u].destroy()},_n("ConstantBinder",zr),_n("CrossFadedConstantBinder",vr),_n("SourceExpressionBinder",sr),_n("CrossFadedCompositeBinder",tr),_n("CompositeExpressionBinder",or),_n("ProgramConfiguration",Kn,{omit:["_buffers"]}),_n("ProgramConfigurationSet",Ui);var Do=Math.pow(2,14)-1,pa=-Do-1;function Fo(u){for(var c=8192/u.extent,h=u.loadGeometry(),b=0;b<h.length;b++)for(var x=h[b],C=0;C<x.length;C++){var A=x[C],V=Math.round(A.x*c),Y=Math.round(A.y*c);A.x=ie(V,pa,Do),A.y=ie(Y,pa,Do),(V<A.x||V>A.x+1||Y<A.y||Y>A.y+1)&&N("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return h}function ia(u,c){return{type:u.type,id:u.id,properties:u.properties,geometry:c?Fo(u):[]}}function _u(u,c,h,b,x){u.emplaceBack(2*c+(b+1)/2,2*h+(x+1)/2)}var hs=function(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(c){return c.id}),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new gc,this.indexArray=new tu,this.segments=new De,this.programConfigurations=new Ui(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter(function(c){return c.isStateDependent()}).map(function(c){return c.id})};function ps(u,c){for(var h=0;h<u.length;h++)if(Ds(c,u[h]))return!0;for(var b=0;b<c.length;b++)if(Ds(u,c[b]))return!0;return!!El(u,c)}function xl(u,c,h){return!!Ds(u,c)||!!nl(c,u,h)}function bu(u,c){if(1===u.length)return _c(c,u[0]);for(var h=0;h<c.length;h++)for(var b=c[h],x=0;x<b.length;x++)if(Ds(u,b[x]))return!0;for(var C=0;C<u.length;C++)if(_c(c,u[C]))return!0;for(var A=0;A<c.length;A++)if(El(u,c[A]))return!0;return!1}function $c(u,c,h){if(u.length>1){if(El(u,c))return!0;for(var b=0;b<c.length;b++)if(nl(c[b],u,h))return!0}for(var x=0;x<u.length;x++)if(nl(u[x],c,h))return!0;return!1}function El(u,c){if(0===u.length||0===c.length)return!1;for(var h=0;h<u.length-1;h++)for(var b=u[h],x=u[h+1],C=0;C<c.length-1;C++)if($l(b,x,c[C],c[C+1]))return!0;return!1}function $l(u,c,h,b){return F(u,h,b)!==F(c,h,b)&&F(u,c,h)!==F(u,c,b)}function nl(u,c,h){var b=h*h;if(1===c.length)return u.distSqr(c[0])<b;for(var x=1;x<c.length;x++)if(Kc(u,c[x-1],c[x])<b)return!0;return!1}function Kc(u,c,h){var b=c.distSqr(h);if(0===b)return u.distSqr(c);var x=((u.x-c.x)*(h.x-c.x)+(u.y-c.y)*(h.y-c.y))/b;return u.distSqr(x<0?c:x>1?h:h.sub(c)._mult(x)._add(c))}function _c(u,c){for(var h,b,x,C=!1,A=0;A<u.length;A++)for(var V=0,Y=(h=u[A]).length-1;V<h.length;Y=V++)(b=h[V]).y>c.y!=(x=h[Y]).y>c.y&&c.x<(x.x-b.x)*(c.y-b.y)/(x.y-b.y)+b.x&&(C=!C);return C}function Ds(u,c){for(var h=!1,b=0,x=u.length-1;b<u.length;x=b++){var C=u[b],A=u[x];C.y>c.y!=A.y>c.y&&c.x<(A.x-C.x)*(c.y-C.y)/(A.y-C.y)+C.x&&(h=!h)}return h}function Xc(u,c,h){var b=h[0],x=h[2];if(u.x<b.x&&c.x<b.x||u.x>x.x&&c.x>x.x||u.y<b.y&&c.y<b.y||u.y>x.y&&c.y>x.y)return!1;var C=F(u,c,h[0]);return C!==F(u,c,h[1])||C!==F(u,c,h[2])||C!==F(u,c,h[3])}function bo(u,c,h){var b=c.paint.get(u).value;return"constant"===b.kind?b.value:h.programConfigurations.get(c.id).getMaxValue(u)}function Nu(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function qs(u,c,h,b,x){if(!c[0]&&!c[1])return u;var C=I.convert(c)._mult(x);"viewport"===h&&C._rotate(-b);for(var A=[],V=0;V<u.length;V++)A.push(u[V].sub(C));return A}hs.prototype.populate=function(u,c,h){var b=this.layers[0],x=[],C=null,A=!1;"circle"===b.type&&(A=!(C=b.layout.get("circle-sort-key")).isConstant());for(var V=0,Y=u;V<Y.length;V+=1){var re=Y[V],ue=re.feature,de=re.id,be=re.index,Pe=re.sourceLayerIndex,Ne=this.layers[0]._featureFilter.needGeometry,Fe=ia(ue,Ne);if(this.layers[0]._featureFilter.filter(new Ei(this.zoom),Fe,h)){var ot=A?C.evaluate(Fe,{},h):void 0,Ye={id:de,properties:ue.properties,type:ue.type,sourceLayerIndex:Pe,index:be,geometry:Ne?Fe.geometry:Fo(ue),patterns:{},sortKey:ot};x.push(Ye)}}A&&x.sort(function(Tn,hn){return Tn.sortKey-hn.sortKey});for(var ht=0,gt=x;ht<gt.length;ht+=1){var bt=gt[ht],St=bt.geometry,zt=bt.index,nn=bt.sourceLayerIndex,cn=u[zt].feature;this.addFeature(bt,St,zt,h),c.featureIndex.insert(cn,St,zt,nn,this.index)}},hs.prototype.update=function(u,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,c,this.stateDependentLayers,h)},hs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},hs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},hs.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Me),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0},hs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},hs.prototype.addFeature=function(u,c,h,b){for(var x=0,C=c;x<C.length;x+=1)for(var A=0,V=C[x];A<V.length;A+=1){var Y=V[A],re=Y.x,ue=Y.y;if(!(re<0||re>=8192||ue<0||ue>=8192)){var de=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,u.sortKey),be=de.vertexLength;_u(this.layoutVertexArray,re,ue,-1,-1),_u(this.layoutVertexArray,re,ue,1,-1),_u(this.layoutVertexArray,re,ue,1,1),_u(this.layoutVertexArray,re,ue,-1,1),this.indexArray.emplaceBack(be,be+1,be+2),this.indexArray.emplaceBack(be,be+3,be+2),de.vertexLength+=4,de.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,h,{},b)},_n("CircleBucket",hs,{omit:["layers"]});var Wc=new Pa({"circle-sort-key":new Zn(ke.layout_circle["circle-sort-key"])}),Oo={paint:new Pa({"circle-radius":new Zn(ke.paint_circle["circle-radius"]),"circle-color":new Zn(ke.paint_circle["circle-color"]),"circle-blur":new Zn(ke.paint_circle["circle-blur"]),"circle-opacity":new Zn(ke.paint_circle["circle-opacity"]),"circle-translate":new bn(ke.paint_circle["circle-translate"]),"circle-translate-anchor":new bn(ke.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new bn(ke.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new bn(ke.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Zn(ke.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Zn(ke.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Zn(ke.paint_circle["circle-stroke-opacity"])}),layout:Wc},Co=typeof Float32Array<"u"?Float32Array:Array;function ms(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function Hs(u,c,h){var b=c[0],x=c[1],C=c[2],A=c[3],V=c[4],Y=c[5],re=c[6],ue=c[7],de=c[8],be=c[9],Pe=c[10],Ne=c[11],Fe=c[12],ot=c[13],Ye=c[14],ht=c[15],gt=h[0],bt=h[1],St=h[2],zt=h[3];return u[0]=gt*b+bt*V+St*de+zt*Fe,u[1]=gt*x+bt*Y+St*be+zt*ot,u[2]=gt*C+bt*re+St*Pe+zt*Ye,u[3]=gt*A+bt*ue+St*Ne+zt*ht,u[4]=(gt=h[4])*b+(bt=h[5])*V+(St=h[6])*de+(zt=h[7])*Fe,u[5]=gt*x+bt*Y+St*be+zt*ot,u[6]=gt*C+bt*re+St*Pe+zt*Ye,u[7]=gt*A+bt*ue+St*Ne+zt*ht,u[8]=(gt=h[8])*b+(bt=h[9])*V+(St=h[10])*de+(zt=h[11])*Fe,u[9]=gt*x+bt*Y+St*be+zt*ot,u[10]=gt*C+bt*re+St*Pe+zt*Ye,u[11]=gt*A+bt*ue+St*Ne+zt*ht,u[12]=(gt=h[12])*b+(bt=h[13])*V+(St=h[14])*de+(zt=h[15])*Fe,u[13]=gt*x+bt*Y+St*be+zt*ot,u[14]=gt*C+bt*re+St*Pe+zt*Ye,u[15]=gt*A+bt*ue+St*Ne+zt*ht,u}Math.hypot||(Math.hypot=function(){for(var u=arguments,c=0,h=arguments.length;h--;)c+=u[h]*u[h];return Math.sqrt(c)});var _f,u,wd=Hs;function Jc(u,c,h){var b=c[0],x=c[1],C=c[2],A=c[3];return u[0]=h[0]*b+h[4]*x+h[8]*C+h[12]*A,u[1]=h[1]*b+h[5]*x+h[9]*C+h[13]*A,u[2]=h[2]*b+h[6]*x+h[10]*C+h[14]*A,u[3]=h[3]*b+h[7]*x+h[11]*C+h[15]*A,u}_f=new Co(3),Co!=Float32Array&&(_f[0]=0,_f[1]=0,_f[2]=0),u=new Co(4),Co!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0,u[3]=0);var Zc=(function(){var u=new Co(2);Co!=Float32Array&&(u[0]=0,u[1]=0)}(),function(u){function c(h){u.call(this,h,Oo)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.createBucket=function(h){return new hs(h)},c.prototype.queryRadius=function(h){var b=h;return bo("circle-radius",this,b)+bo("circle-stroke-width",this,b)+Nu(this.paint.get("circle-translate"))},c.prototype.queryIntersectsFeature=function(h,b,x,C,A,V,Y,re){for(var ue=qs(h,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),V.angle,Y),de=this.paint.get("circle-radius").evaluate(b,x)+this.paint.get("circle-stroke-width").evaluate(b,x),be="map"===this.paint.get("circle-pitch-alignment"),Pe=be?ue:function(nn,cn){return nn.map(function(Tn){return xd(Tn,cn)})}(ue,re),Ne=be?de*Y:de,Fe=0,ot=C;Fe<ot.length;Fe+=1)for(var Ye=0,ht=ot[Fe];Ye<ht.length;Ye+=1){var gt=ht[Ye],bt=be?gt:xd(gt,re),St=Ne,zt=Jc([],[gt.x,gt.y,0,1],re);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?St*=zt[3]/V.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(St*=V.cameraToCenterDistance/zt[3]),xl(Pe,bt,St))return!0}return!1},c}(Ro));function xd(u,c){var h=Jc([],[u.x,u.y,0,1],c);return new I(h[0]/h[3],h[1]/h[3])}var Kl=function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c}(hs);function Ed(u,c,h,b){var x=c.width,C=c.height;if(b){if(b instanceof Uint8ClampedArray)b=new Uint8Array(b.buffer);else if(b.length!==x*C*h)throw new RangeError("mismatched image size")}else b=new Uint8Array(x*C*h);return u.width=x,u.height=C,u.data=b,u}function qg(u,c,h){var b=c.width,x=c.height;if(b!==u.width||x!==u.height){var C=Ed({},{width:b,height:x},h);jp(u,C,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,b),height:Math.min(u.height,x)},h),u.width=b,u.height=x,u.data=C.data}}function jp(u,c,h,b,x,C){if(0===x.width||0===x.height)return c;if(x.width>u.width||x.height>u.height||h.x>u.width-x.width||h.y>u.height-x.height)throw new RangeError("out of range source coordinates for image copy");if(x.width>c.width||x.height>c.height||b.x>c.width-x.width||b.y>c.height-x.height)throw new RangeError("out of range destination coordinates for image copy");for(var A=u.data,V=c.data,Y=0;Y<x.height;Y++)for(var re=((h.y+Y)*u.width+h.x)*C,ue=((b.y+Y)*c.width+b.x)*C,de=0;de<x.width*C;de++)V[ue+de]=A[re+de];return c}_n("HeatmapBucket",Kl,{omit:["layers"]});var Yc=function(u,c){Ed(this,u,1,c)};Yc.prototype.resize=function(u){qg(this,u,1)},Yc.prototype.clone=function(){return new Yc({width:this.width,height:this.height},new Uint8Array(this.data))},Yc.copy=function(u,c,h,b,x){jp(u,c,h,b,x,1)};var Os=function(u,c){Ed(this,u,4,c)};Os.prototype.resize=function(u){qg(this,u,4)},Os.prototype.replace=function(u,c){c?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u},Os.prototype.clone=function(){return new Os({width:this.width,height:this.height},new Uint8Array(this.data))},Os.copy=function(u,c,h,b,x){jp(u,c,h,b,x,4)},_n("AlphaImage",Yc),_n("RGBAImage",Os);var l1={paint:new Pa({"heatmap-radius":new Zn(ke.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Zn(ke.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new bn(ke.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Mu(ke.paint_heatmap["heatmap-color"]),"heatmap-opacity":new bn(ke.paint_heatmap["heatmap-opacity"])})};function Ph(u){var c={},h=u.resolution||256,b=u.clips?u.clips.length:1,x=u.image||new Os({width:h,height:b}),C=function(Ne,Fe,ot){c[u.evaluationKey]=ot;var Ye=u.expression.evaluate(c);x.data[Ne+Fe+0]=Math.floor(255*Ye.r/Ye.a),x.data[Ne+Fe+1]=Math.floor(255*Ye.g/Ye.a),x.data[Ne+Fe+2]=Math.floor(255*Ye.b/Ye.a),x.data[Ne+Fe+3]=Math.floor(255*Ye.a)};if(u.clips)for(var A=0,V=0;A<b;++A,V+=4*h)for(var Y=0,re=0;Y<h;Y++,re+=4){var ue=Y/(h-1),de=u.clips[A];C(V,re,de.start*(1-ue)+de.end*ue)}else for(var be=0,Pe=0;be<h;be++,Pe+=4)C(0,Pe,be/(h-1));return x}var Ah=function(u){function c(h){u.call(this,h,l1),this._updateColorRamp()}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.createBucket=function(h){return new Kl(h)},c.prototype._handleSpecialPaintPropertyUpdate=function(h){"heatmap-color"===h&&this._updateColorRamp()},c.prototype._updateColorRamp=function(){this.colorRamp=Ph({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},c.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},c.prototype.queryRadius=function(){return 0},c.prototype.queryIntersectsFeature=function(){return!1},c.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},c}(Ro),c1={paint:new Pa({"hillshade-illumination-direction":new bn(ke.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new bn(ke.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new bn(ke.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new bn(ke.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new bn(ke.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new bn(ke.paint_hillshade["hillshade-accent-color"])})},Wy=function(u){function c(h){u.call(this,h,c1)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},c}(Ro),Jy=_o([{name:"a_pos",components:2,type:"Int16"}],4).members,Qc=Up,d1=Up;function Up(u,c,h){h=h||2;var b,x,C,A,V,Y,re,ue=c&&c.length,de=ue?c[0]*h:u.length,be=Gp(u,0,de,h,!0),Pe=[];if(!be||be.next===be.prev)return Pe;if(ue&&(be=function(Fe,ot,Ye,ht){var gt,bt,St,zt=[];for(gt=0,bt=ot.length;gt<bt;gt++)(St=Gp(Fe,ot[gt]*ht,gt<bt-1?ot[gt+1]*ht:Fe.length,ht,!1))===St.next&&(St.steiner=!0),zt.push(f1(St));for(zt.sort(Zy),gt=0;gt<zt.length;gt++)Hg(zt[gt],Ye),Ye=ed(Ye,Ye.next);return Ye}(u,c,be,h)),u.length>80*h){b=C=u[0],x=A=u[1];for(var Ne=h;Ne<de;Ne+=h)(V=u[Ne])<b&&(b=V),(Y=u[Ne+1])<x&&(x=Y),V>C&&(C=V),Y>A&&(A=Y);re=0!==(re=Math.max(C-b,A-x))?1/re:0}return bf(be,Pe,h,b,x,re),Pe}function Gp(u,c,h,b,x){var C,A;if(x===Dh(u,c,h,b)>0)for(C=c;C<h;C+=b)A=m1(C,u[C],u[C+1],A);else for(C=h-b;C>=c;C-=b)A=m1(C,u[C],u[C+1],A);return A&&$g(A,A.next)&&(qp(A),A=A.next),A}function ed(u,c){if(!u)return u;c||(c=u);var h,b=u;do{if(h=!1,b.steiner||!$g(b,b.next)&&0!==ma(b.prev,b,b.next))b=b.next;else{if(qp(b),(b=c=b.prev)===b.next)break;h=!0}}while(h||b!==c);return c}function bf(u,c,h,b,x,C,A){if(u){!A&&C&&function(ue,de,be,Pe){var Ne=ue;do{null===Ne.z&&(Ne.z=Yy(Ne.x,Ne.y,de,be,Pe)),Ne.prevZ=Ne.prev,Ne.nextZ=Ne.next,Ne=Ne.next}while(Ne!==ue);Ne.prevZ.nextZ=null,Ne.prevZ=null,function(Fe){var ot,Ye,ht,gt,bt,St,zt,nn,cn=1;do{for(Ye=Fe,Fe=null,bt=null,St=0;Ye;){for(St++,ht=Ye,zt=0,ot=0;ot<cn&&(zt++,ht=ht.nextZ);ot++);for(nn=cn;zt>0||nn>0&&ht;)0!==zt&&(0===nn||!ht||Ye.z<=ht.z)?(gt=Ye,Ye=Ye.nextZ,zt--):(gt=ht,ht=ht.nextZ,nn--),bt?bt.nextZ=gt:Fe=gt,gt.prevZ=bt,bt=gt;Ye=ht}bt.nextZ=null,cn*=2}while(St>1)}(Ne)}(u,b,x,C);for(var V,Y,re=u;u.prev!==u.next;)if(V=u.prev,Y=u.next,C?wf(u,b,x,C):Rh(u))c.push(V.i/h),c.push(u.i/h),c.push(Y.i/h),qp(u),u=Y.next,re=Y.next;else if((u=Y)===re){A?1===A?bf(u=xf(ed(u),c,h),c,h,b,x,C,2):2===A&&Ef(u,c,h,b,x,C):bf(ed(u),c,h,b,x,C,1);break}}}function Rh(u){var c=u.prev,h=u,b=u.next;if(ma(c,h,b)>=0)return!1;for(var x=u.next.next;x!==u.prev;){if(Gr(c.x,c.y,h.x,h.y,b.x,b.y,x.x,x.y)&&ma(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function wf(u,c,h,b){var x=u.prev,C=u,A=u.next;if(ma(x,C,A)>=0)return!1;for(var V=x.x>C.x?x.x>A.x?x.x:A.x:C.x>A.x?C.x:A.x,Y=x.y>C.y?x.y>A.y?x.y:A.y:C.y>A.y?C.y:A.y,re=Yy(x.x<C.x?x.x<A.x?x.x:A.x:C.x<A.x?C.x:A.x,x.y<C.y?x.y<A.y?x.y:A.y:C.y<A.y?C.y:A.y,c,h,b),ue=Yy(V,Y,c,h,b),de=u.prevZ,be=u.nextZ;de&&de.z>=re&&be&&be.z<=ue;){if(de!==u.prev&&de!==u.next&&Gr(x.x,x.y,C.x,C.y,A.x,A.y,de.x,de.y)&&ma(de.prev,de,de.next)>=0||(de=de.prevZ,be!==u.prev&&be!==u.next&&Gr(x.x,x.y,C.x,C.y,A.x,A.y,be.x,be.y)&&ma(be.prev,be,be.next)>=0))return!1;be=be.nextZ}for(;de&&de.z>=re;){if(de!==u.prev&&de!==u.next&&Gr(x.x,x.y,C.x,C.y,A.x,A.y,de.x,de.y)&&ma(de.prev,de,de.next)>=0)return!1;de=de.prevZ}for(;be&&be.z<=ue;){if(be!==u.prev&&be!==u.next&&Gr(x.x,x.y,C.x,C.y,A.x,A.y,be.x,be.y)&&ma(be.prev,be,be.next)>=0)return!1;be=be.nextZ}return!0}function xf(u,c,h){var b=u;do{var x=b.prev,C=b.next.next;!$g(x,C)&&p1(x,b,b.next,C)&&Vp(x,C)&&Vp(C,x)&&(c.push(x.i/h),c.push(b.i/h),c.push(C.i/h),qp(b),qp(b.next),b=u=C),b=b.next}while(b!==u);return ed(b)}function Ef(u,c,h,b,x,C){var A=u;do{for(var V=A.next.next;V!==A.prev;){if(A.i!==V.i&&h1(A,V)){var Y=Cf(A,V);return A=ed(A,A.next),Y=ed(Y,Y.next),bf(A,c,h,b,x,C),void bf(Y,c,h,b,x,C)}V=V.next}A=A.next}while(A!==u)}function Zy(u,c){return u.x-c.x}function Hg(u,c){if(c=function(b,x){var C,A=x,V=b.x,Y=b.y,re=-1/0;do{if(Y<=A.y&&Y>=A.next.y&&A.next.y!==A.y){var ue=A.x+(Y-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(ue<=V&&ue>re){if(re=ue,ue===V){if(Y===A.y)return A;if(Y===A.next.y)return A.next}C=A.x<A.next.x?A:A.next}}A=A.next}while(A!==x);if(!C)return null;if(V===re)return C;var de,be=C,Pe=C.x,Ne=C.y,Fe=1/0;A=C;do{V>=A.x&&A.x>=Pe&&V!==A.x&&Gr(Y<Ne?V:re,Y,Pe,Ne,Y<Ne?re:V,Y,A.x,A.y)&&(de=Math.abs(Y-A.y)/(V-A.x),Vp(A,b)&&(de<Fe||de===Fe&&(A.x>C.x||A.x===C.x&&Sf(C,A)))&&(C=A,Fe=de)),A=A.next}while(A!==be);return C}(u,c)){var h=Cf(c,u);ed(c,c.next),ed(h,h.next)}}function Sf(u,c){return ma(u.prev,u,c.prev)<0&&ma(c.next,u,u.next)<0}function Yy(u,c,h,b,x){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=32767*(u-h)*x)|u<<8))|u<<4))|u<<2))|u<<1))|(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=32767*(c-b)*x)|c<<8))|c<<4))|c<<2))|c<<1))<<1}function f1(u){var c=u,h=u;do{(c.x<h.x||c.x===h.x&&c.y<h.y)&&(h=c),c=c.next}while(c!==u);return h}function Gr(u,c,h,b,x,C,A,V){return(x-A)*(c-V)-(u-A)*(C-V)>=0&&(u-A)*(b-V)-(h-A)*(c-V)>=0&&(h-A)*(C-V)-(x-A)*(b-V)>=0}function h1(u,c){return u.next.i!==c.i&&u.prev.i!==c.i&&!function(h,b){var x=h;do{if(x.i!==h.i&&x.next.i!==h.i&&x.i!==b.i&&x.next.i!==b.i&&p1(x,x.next,h,b))return!0;x=x.next}while(x!==h);return!1}(u,c)&&(Vp(u,c)&&Vp(c,u)&&function(h,b){var x=h,C=!1,A=(h.x+b.x)/2,V=(h.y+b.y)/2;do{x.y>V!=x.next.y>V&&x.next.y!==x.y&&A<(x.next.x-x.x)*(V-x.y)/(x.next.y-x.y)+x.x&&(C=!C),x=x.next}while(x!==h);return C}(u,c)&&(ma(u.prev,u,c.prev)||ma(u,c.prev,c))||$g(u,c)&&ma(u.prev,u,u.next)>0&&ma(c.prev,c,c.next)>0)}function ma(u,c,h){return(c.y-u.y)*(h.x-c.x)-(c.x-u.x)*(h.y-c.y)}function $g(u,c){return u.x===c.x&&u.y===c.y}function p1(u,c,h,b){var x=Xg(ma(u,c,h)),C=Xg(ma(u,c,b)),A=Xg(ma(h,b,u)),V=Xg(ma(h,b,c));return x!==C&&A!==V||!(0!==x||!Kg(u,h,c))||!(0!==C||!Kg(u,b,c))||!(0!==A||!Kg(h,u,b))||!(0!==V||!Kg(h,c,b))}function Kg(u,c,h){return c.x<=Math.max(u.x,h.x)&&c.x>=Math.min(u.x,h.x)&&c.y<=Math.max(u.y,h.y)&&c.y>=Math.min(u.y,h.y)}function Xg(u){return u>0?1:u<0?-1:0}function Vp(u,c){return ma(u.prev,u,u.next)<0?ma(u,c,u.next)>=0&&ma(u,u.prev,c)>=0:ma(u,c,u.prev)<0||ma(u,u.next,c)<0}function Cf(u,c){var h=new Aa(u.i,u.x,u.y),b=new Aa(c.i,c.x,c.y),x=u.next,C=c.prev;return u.next=c,c.prev=u,h.next=x,x.prev=h,b.next=h,h.prev=b,C.next=b,b.prev=C,b}function m1(u,c,h,b){var x=new Aa(u,c,h);return b?(x.next=b.next,x.prev=b,b.next.prev=x,b.next=x):(x.prev=x,x.next=x),x}function qp(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function Aa(u,c,h){this.i=u,this.x=c,this.y=h,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Dh(u,c,h,b){for(var x=0,C=c,A=h-b;C<h;C+=b)x+=(u[A]-u[C])*(u[C+1]+u[A+1]),A=C;return x}function Oh(u,c,h,b,x){!function C(A,V,Y,re,ue){for(;re>Y;){if(re-Y>600){var de=re-Y+1,be=V-Y+1,Pe=Math.log(de),Ne=.5*Math.exp(2*Pe/3),Fe=.5*Math.sqrt(Pe*Ne*(de-Ne)/de)*(be-de/2<0?-1:1);C(A,V,Math.max(Y,Math.floor(V-be*Ne/de+Fe)),Math.min(re,Math.floor(V+(de-be)*Ne/de+Fe)),ue)}var ot=A[V],Ye=Y,ht=re;for(Hp(A,Y,V),ue(A[re],ot)>0&&Hp(A,Y,re);Ye<ht;){for(Hp(A,Ye,ht),Ye++,ht--;ue(A[Ye],ot)<0;)Ye++;for(;ue(A[ht],ot)>0;)ht--}0===ue(A[Y],ot)?Hp(A,Y,ht):Hp(A,++ht,re),ht<=V&&(Y=ht+1),V<=ht&&(re=ht-1)}}(u,c,h||0,b||u.length-1,x||g1)}function Hp(u,c,h){var b=u[c];u[c]=u[h],u[h]=b}function g1(u,c){return u<c?-1:u>c?1:0}function nu(u,c){var h=u.length;if(h<=1)return[u];for(var b,x,C=[],A=0;A<h;A++){var V=z(u[A]);0!==V&&(u[A].area=Math.abs(V),void 0===x&&(x=V<0),x===V<0?(b&&C.push(b),b=[u[A]]):b.push(u[A]))}if(b&&C.push(b),c>1)for(var Y=0;Y<C.length;Y++)C[Y].length<=c||(Oh(C[Y],c,1,C[Y].length-1,bc),C[Y]=C[Y].slice(0,c));return C}function bc(u,c){return c.area-u.area}function $p(u,c,h){for(var b=h.patternDependencies,x=!1,C=0,A=c;C<A.length;C+=1){var V=A[C].paint.get(u+"-pattern");V.isConstant()||(x=!0);var Y=V.constantOr(null);Y&&(x=!0,b[Y.to]=!0,b[Y.from]=!0)}return x}function Tf(u,c,h,b,x){for(var C=x.patternDependencies,A=0,V=c;A<V.length;A+=1){var Y=V[A],re=Y.paint.get(u+"-pattern").value;if("constant"!==re.kind){var ue=re.evaluate({zoom:b-1},h,{},x.availableImages),de=re.evaluate({zoom:b},h,{},x.availableImages),be=re.evaluate({zoom:b+1},h,{},x.availableImages);de=de&&de.name?de.name:de,be=be&&be.name?be.name:be,C[ue=ue&&ue.name?ue.name:ue]=!0,C[de]=!0,C[be]=!0,h.patterns[Y.id]={min:ue,mid:de,max:be}}}return h}Up.deviation=function(u,c,h,b){var x=c&&c.length,C=Math.abs(Dh(u,0,x?c[0]*h:u.length,h));if(x)for(var A=0,V=c.length;A<V;A++)C-=Math.abs(Dh(u,c[A]*h,A<V-1?c[A+1]*h:u.length,h));var Y=0;for(A=0;A<b.length;A+=3){var re=b[A]*h,ue=b[A+1]*h,de=b[A+2]*h;Y+=Math.abs((u[re]-u[de])*(u[ue+1]-u[re+1])-(u[re]-u[ue])*(u[de+1]-u[re+1]))}return 0===C&&0===Y?0:Math.abs((Y-C)/C)},Up.flatten=function(u){for(var c=u[0][0].length,h={vertices:[],holes:[],dimensions:c},b=0,x=0;x<u.length;x++){for(var C=0;C<u[x].length;C++)for(var A=0;A<c;A++)h.vertices.push(u[x][C][A]);x>0&&h.holes.push(b+=u[x-1].length)}return h},Qc.default=d1;var ru=function(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(c){return c.id}),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new gc,this.indexArray=new tu,this.indexArray2=new yc,this.programConfigurations=new Ui(u.layers,u.zoom),this.segments=new De,this.segments2=new De,this.stateDependentLayerIds=this.layers.filter(function(c){return c.isStateDependent()}).map(function(c){return c.id})};ru.prototype.populate=function(u,c,h){this.hasPattern=$p("fill",this.layers,c);for(var b=this.layers[0].layout.get("fill-sort-key"),x=!b.isConstant(),C=[],A=0,V=u;A<V.length;A+=1){var Y=V[A],re=Y.feature,ue=Y.id,de=Y.index,be=Y.sourceLayerIndex,Pe=this.layers[0]._featureFilter.needGeometry,Ne=ia(re,Pe);if(this.layers[0]._featureFilter.filter(new Ei(this.zoom),Ne,h)){var Fe=x?b.evaluate(Ne,{},h,c.availableImages):void 0,ot={id:ue,properties:re.properties,type:re.type,sourceLayerIndex:be,index:de,geometry:Pe?Ne.geometry:Fo(re),patterns:{},sortKey:Fe};C.push(ot)}}x&&C.sort(function(cn,Tn){return cn.sortKey-Tn.sortKey});for(var Ye=0,ht=C;Ye<ht.length;Ye+=1){var gt=ht[Ye],bt=gt.geometry,St=gt.index,zt=gt.sourceLayerIndex;if(this.hasPattern){var nn=Tf("fill",this.layers,gt,this.zoom,c);this.patternFeatures.push(nn)}else this.addFeature(gt,bt,St,h,{});c.featureIndex.insert(u[St].feature,bt,St,zt,this.index)}},ru.prototype.update=function(u,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,c,this.stateDependentLayers,h)},ru.prototype.addFeatures=function(u,c,h){for(var b=0,x=this.patternFeatures;b<x.length;b+=1){var C=x[b];this.addFeature(C,C.geometry,C.index,c,h)}},ru.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ru.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ru.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Jy),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0},ru.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ru.prototype.addFeature=function(u,c,h,b,x){for(var C=0,A=nu(c,500);C<A.length;C+=1){for(var V=A[C],Y=0,re=0,ue=V;re<ue.length;re+=1)Y+=ue[re].length;for(var de=this.segments.prepareSegment(Y,this.layoutVertexArray,this.indexArray),be=de.vertexLength,Pe=[],Ne=[],Fe=0,ot=V;Fe<ot.length;Fe+=1){var Ye=ot[Fe];if(0!==Ye.length){Ye!==V[0]&&Ne.push(Pe.length/2);var ht=this.segments2.prepareSegment(Ye.length,this.layoutVertexArray,this.indexArray2),gt=ht.vertexLength;this.layoutVertexArray.emplaceBack(Ye[0].x,Ye[0].y),this.indexArray2.emplaceBack(gt+Ye.length-1,gt),Pe.push(Ye[0].x),Pe.push(Ye[0].y);for(var bt=1;bt<Ye.length;bt++)this.layoutVertexArray.emplaceBack(Ye[bt].x,Ye[bt].y),this.indexArray2.emplaceBack(gt+bt-1,gt+bt),Pe.push(Ye[bt].x),Pe.push(Ye[bt].y);ht.vertexLength+=Ye.length,ht.primitiveLength+=Ye.length}}for(var St=Qc(Pe,Ne),zt=0;zt<St.length;zt+=3)this.indexArray.emplaceBack(be+St[zt],be+St[zt+1],be+St[zt+2]);de.vertexLength+=Y,de.primitiveLength+=St.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,h,x,b)},_n("FillBucket",ru,{omit:["layers","patternFeatures"]});var Qy=new Pa({"fill-sort-key":new Zn(ke.layout_fill["fill-sort-key"])}),v1={paint:new Pa({"fill-antialias":new bn(ke.paint_fill["fill-antialias"]),"fill-opacity":new Zn(ke.paint_fill["fill-opacity"]),"fill-color":new Zn(ke.paint_fill["fill-color"]),"fill-outline-color":new Zn(ke.paint_fill["fill-outline-color"]),"fill-translate":new bn(ke.paint_fill["fill-translate"]),"fill-translate-anchor":new bn(ke.paint_fill["fill-translate-anchor"]),"fill-pattern":new So(ke.paint_fill["fill-pattern"])}),layout:Qy},y1=function(u){function c(h){u.call(this,h,v1)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.recalculate=function(h,b){u.prototype.recalculate.call(this,h,b);var x=this.paint._values["fill-outline-color"];"constant"===x.value.kind&&void 0===x.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},c.prototype.createBucket=function(h){return new ru(h)},c.prototype.queryRadius=function(){return Nu(this.paint.get("fill-translate"))},c.prototype.queryIntersectsFeature=function(h,b,x,C,A,V,Y){return bu(qs(h,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),V.angle,Y),C)},c.prototype.isTileClipped=function(){return!0},c}(Ro),NT=_o([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,_1=Sd;function Sd(u,c,h,b,x){this.properties={},this.extent=h,this.type=0,this._pbf=u,this._geometry=-1,this._keys=b,this._values=x,u.readFields(Lu,this,c)}function Lu(u,c,h){1==u?c.id=h.readVarint():2==u?function(b,x){for(var C=b.readVarint()+b.pos;b.pos<C;){var A=x._keys[b.readVarint()],V=x._values[b.readVarint()];x.properties[A]=V}}(h,c):3==u?c.type=h.readVarint():4==u&&(c._geometry=h.pos)}function Wg(u){for(var c,h,b=0,x=0,C=u.length,A=C-1;x<C;A=x++)b+=((h=u[A]).x-(c=u[x]).x)*(c.y+h.y);return b}Sd.types=["Unknown","Point","LineString","Polygon"],Sd.prototype.loadGeometry=function(){var u=this._pbf;u.pos=this._geometry;for(var c,h=u.readVarint()+u.pos,b=1,x=0,C=0,A=0,V=[];u.pos<h;){if(x<=0){var Y=u.readVarint();b=7&Y,x=Y>>3}if(x--,1===b||2===b)C+=u.readSVarint(),A+=u.readSVarint(),1===b&&(c&&V.push(c),c=[]),c.push(new I(C,A));else{if(7!==b)throw new Error("unknown command "+b);c&&c.push(c[0].clone())}}return c&&V.push(c),V},Sd.prototype.bbox=function(){var u=this._pbf;u.pos=this._geometry;for(var c=u.readVarint()+u.pos,h=1,b=0,x=0,C=0,A=1/0,V=-1/0,Y=1/0,re=-1/0;u.pos<c;){if(b<=0){var ue=u.readVarint();h=7&ue,b=ue>>3}if(b--,1===h||2===h)(x+=u.readSVarint())<A&&(A=x),x>V&&(V=x),(C+=u.readSVarint())<Y&&(Y=C),C>re&&(re=C);else if(7!==h)throw new Error("unknown command "+h)}return[A,Y,V,re]},Sd.prototype.toGeoJSON=function(u,c,h){var b,x,C=this.extent*Math.pow(2,h),A=this.extent*u,V=this.extent*c,Y=this.loadGeometry(),re=Sd.types[this.type];function ue(Pe){for(var Ne=0;Ne<Pe.length;Ne++){var Fe=Pe[Ne];Pe[Ne]=[360*(Fe.x+A)/C-180,360/Math.PI*Math.atan(Math.exp((180-360*(Fe.y+V)/C)*Math.PI/180))-90]}}switch(this.type){case 1:var de=[];for(b=0;b<Y.length;b++)de[b]=Y[b][0];ue(Y=de);break;case 2:for(b=0;b<Y.length;b++)ue(Y[b]);break;case 3:for(Y=function(Pe){var Ne=Pe.length;if(Ne<=1)return[Pe];for(var Fe,ot,Ye=[],ht=0;ht<Ne;ht++){var gt=Wg(Pe[ht]);0!==gt&&(void 0===ot&&(ot=gt<0),ot===gt<0?(Fe&&Ye.push(Fe),Fe=[Pe[ht]]):Fe.push(Pe[ht]))}return Fe&&Ye.push(Fe),Ye}(Y),b=0;b<Y.length;b++)for(x=0;x<Y[b].length;x++)ue(Y[b][x])}1===Y.length?Y=Y[0]:re="Multi"+re;var be={type:"Feature",geometry:{type:re,coordinates:Y},properties:this.properties};return"id"in this&&(be.id=this.id),be};var Cd=b1;function b1(u,c){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(e_,this,c),this.length=this._features.length}function e_(u,c,h){15===u?c.version=h.readVarint():1===u?c.name=h.readString():5===u?c.extent=h.readVarint():2===u?c._features.push(h.pos):3===u?c._keys.push(h.readString()):4===u&&c._values.push(function(b){for(var x=null,C=b.readVarint()+b.pos;b.pos<C;){var A=b.readVarint()>>3;x=1===A?b.readString():2===A?b.readFloat():3===A?b.readDouble():4===A?b.readVarint64():5===A?b.readVarint():6===A?b.readSVarint():7===A?b.readBoolean():null}return x}(h))}function w1(u,c,h){if(3===u){var b=new Cd(h,h.readVarint()+h.pos);b.length&&(c[b.name]=b)}}b1.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var c=this._pbf.readVarint()+this._pbf.pos;return new _1(this._pbf,c,this.extent,this._keys,this._values)};var If={VectorTile:function(u,c){this.layers=u.readFields(w1,{},c)},VectorTileFeature:_1,VectorTileLayer:Cd},x1=If.VectorTileFeature.types,Jg=Math.pow(2,13);function Mh(u,c,h,b,x,C,A,V){u.emplaceBack(c,h,2*Math.floor(b*Jg)+A,x*Jg*2,C*Jg*2,Math.round(V))}var Sl=function(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(c){return c.id}),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new Rs,this.indexArray=new tu,this.programConfigurations=new Ui(u.layers,u.zoom),this.segments=new De,this.stateDependentLayerIds=this.layers.filter(function(c){return c.isStateDependent()}).map(function(c){return c.id})};function Zg(u,c){return u.x===c.x&&(u.x<0||u.x>8192)||u.y===c.y&&(u.y<0||u.y>8192)}Sl.prototype.populate=function(u,c,h){this.features=[],this.hasPattern=$p("fill-extrusion",this.layers,c);for(var b=0,x=u;b<x.length;b+=1){var C=x[b],A=C.feature,V=C.id,Y=C.index,re=C.sourceLayerIndex,ue=this.layers[0]._featureFilter.needGeometry,de=ia(A,ue);if(this.layers[0]._featureFilter.filter(new Ei(this.zoom),de,h)){var be={id:V,sourceLayerIndex:re,index:Y,geometry:ue?de.geometry:Fo(A),properties:A.properties,type:A.type,patterns:{}};this.hasPattern?this.features.push(Tf("fill-extrusion",this.layers,be,this.zoom,c)):this.addFeature(be,be.geometry,Y,h,{}),c.featureIndex.insert(A,be.geometry,Y,re,this.index,!0)}}},Sl.prototype.addFeatures=function(u,c,h){for(var b=0,x=this.features;b<x.length;b+=1){var C=x[b];this.addFeature(C,C.geometry,C.index,c,h)}},Sl.prototype.update=function(u,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,c,this.stateDependentLayers,h)},Sl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Sl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Sl.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,NT),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0},Sl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Sl.prototype.addFeature=function(u,c,h,b,x){for(var C=0,A=nu(c,500);C<A.length;C+=1){for(var V=A[C],Y=0,re=0,ue=V;re<ue.length;re+=1)Y+=ue[re].length;for(var de=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),be=0,Pe=V;be<Pe.length;be+=1){var Ne=Pe[be];if(0!==Ne.length&&!((Sr=Ne).every(function(pr){return pr.x<0})||Sr.every(function(pr){return pr.x>8192})||Sr.every(function(pr){return pr.y<0})||Sr.every(function(pr){return pr.y>8192})))for(var Fe=0,ot=0;ot<Ne.length;ot++){var Ye=Ne[ot];if(ot>=1){var ht=Ne[ot-1];if(!Zg(Ye,ht)){de.vertexLength+4>De.MAX_VERTEX_ARRAY_LENGTH&&(de=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var gt=Ye.sub(ht)._perp()._unit(),bt=ht.dist(Ye);Fe+bt>32768&&(Fe=0),Mh(this.layoutVertexArray,Ye.x,Ye.y,gt.x,gt.y,0,0,Fe),Mh(this.layoutVertexArray,Ye.x,Ye.y,gt.x,gt.y,0,1,Fe),Mh(this.layoutVertexArray,ht.x,ht.y,gt.x,gt.y,0,0,Fe+=bt),Mh(this.layoutVertexArray,ht.x,ht.y,gt.x,gt.y,0,1,Fe);var St=de.vertexLength;this.indexArray.emplaceBack(St,St+2,St+1),this.indexArray.emplaceBack(St+1,St+2,St+3),de.vertexLength+=4,de.primitiveLength+=2}}}}if(de.vertexLength+Y>De.MAX_VERTEX_ARRAY_LENGTH&&(de=this.segments.prepareSegment(Y,this.layoutVertexArray,this.indexArray)),"Polygon"===x1[u.type]){for(var zt=[],nn=[],cn=de.vertexLength,Tn=0,hn=V;Tn<hn.length;Tn+=1){var jn=hn[Tn];if(0!==jn.length){jn!==V[0]&&nn.push(zt.length/2);for(var pn=0;pn<jn.length;pn++){var Er=jn[pn];Mh(this.layoutVertexArray,Er.x,Er.y,0,0,1,1,0),zt.push(Er.x),zt.push(Er.y)}}}for(var Yn=Qc(zt,nn),Mn=0;Mn<Yn.length;Mn+=3)this.indexArray.emplaceBack(cn+Yn[Mn],cn+Yn[Mn+2],cn+Yn[Mn+1]);de.primitiveLength+=Yn.length/3,de.vertexLength+=Y}}var Sr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,h,x,b)},_n("FillExtrusionBucket",Sl,{omit:["layers","features"]});var Kp={paint:new Pa({"fill-extrusion-opacity":new bn(ke["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Zn(ke["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new bn(ke["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new bn(ke["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new So(ke["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Zn(ke["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Zn(ke["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new bn(ke["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},LT=function(u){function c(h){u.call(this,h,Kp)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.createBucket=function(h){return new Sl(h)},c.prototype.queryRadius=function(){return Nu(this.paint.get("fill-extrusion-translate"))},c.prototype.is3D=function(){return!0},c.prototype.queryIntersectsFeature=function(h,b,x,C,A,V,Y,re){var ue=qs(h,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),V.angle,Y),de=this.paint.get("fill-extrusion-height").evaluate(b,x),be=this.paint.get("fill-extrusion-base").evaluate(b,x),Pe=function(Fe,ot,Ye,ht){for(var gt=[],bt=0,St=Fe;bt<St.length;bt+=1){var zt=St[bt],nn=[zt.x,zt.y,0,1];Jc(nn,nn,ot),gt.push(new I(nn[0]/nn[3],nn[1]/nn[3]))}return gt}(ue,re),Ne=function(Fe,ot,Ye,ht){for(var gt=[],bt=[],St=ht[8]*ot,zt=ht[9]*ot,nn=ht[10]*ot,cn=ht[11]*ot,Tn=ht[8]*Ye,hn=ht[9]*Ye,jn=ht[10]*Ye,pn=ht[11]*Ye,Er=0,Yn=Fe;Er<Yn.length;Er+=1){for(var Mn=[],Sr=[],pr=0,ii=Yn[Er];pr<ii.length;pr+=1){var Hn=ii[pr],ci=Hn.x,mo=Hn.y,Mo=ht[0]*ci+ht[4]*mo+ht[12],To=ht[1]*ci+ht[5]*mo+ht[13],go=ht[2]*ci+ht[6]*mo+ht[14],ko=ht[3]*ci+ht[7]*mo+ht[15],ga=go+nn,sa=ko+cn,Ga=Mo+Tn,va=To+hn,Va=go+jn,jo=ko+pn,Da=new I((Mo+St)/sa,(To+zt)/sa);Da.z=ga/sa,Mn.push(Da);var Wr=new I(Ga/jo,va/jo);Wr.z=Va/jo,Sr.push(Wr)}gt.push(Mn),bt.push(Sr)}return[gt,bt]}(C,be,de,re);return function(Fe,ot,Ye){var ht=1/0;bu(Ye,ot)&&(ht=Xp(Ye,ot[0]));for(var gt=0;gt<ot.length;gt++)for(var bt=ot[gt],St=Fe[gt],zt=0;zt<bt.length-1;zt++){var nn=bt[zt],cn=[nn,bt[zt+1],St[zt+1],St[zt],nn];ps(Ye,cn)&&(ht=Math.min(ht,Xp(Ye,cn)))}return ht!==1/0&&ht}(Ne[0],Ne[1],Pe)},c}(Ro);function wc(u,c){return u.x*c.x+u.y*c.y}function Xp(u,c){if(1===u.length){for(var h,b=0,x=c[b++];!h||x.equals(h);)if(!(h=c[b++]))return 1/0;for(;b<c.length;b++){var C=c[b],A=u[0],V=h.sub(x),Y=C.sub(x),re=A.sub(x),ue=wc(V,V),de=wc(V,Y),be=wc(Y,Y),Pe=wc(re,V),Ne=wc(re,Y),Fe=ue*be-de*de,ot=(be*Pe-de*Ne)/Fe,Ye=(ue*Ne-de*Pe)/Fe,ht=x.z*(1-ot-Ye)+h.z*ot+C.z*Ye;if(isFinite(ht))return ht}return 1/0}for(var gt=1/0,bt=0,St=c;bt<St.length;bt+=1)gt=Math.min(gt,St[bt].z);return gt}var Wp=_o([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,E1=_o([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,S1=If.VectorTileFeature.types,C1=Math.cos(Math.PI/180*37.5),Yg=Math.pow(2,14)/.5,Ra=function(u){var c=this;this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(h){return h.id}),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(h){c.gradients[h.id]={}}),this.layoutVertexArray=new Sh,this.layoutVertexArray2=new vc,this.indexArray=new tu,this.programConfigurations=new Ui(u.layers,u.zoom),this.segments=new De,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(h){return h.isStateDependent()}).map(function(h){return h.id})};Ra.prototype.populate=function(u,c,h){this.hasPattern=$p("line",this.layers,c);for(var b=this.layers[0].layout.get("line-sort-key"),x=!b.isConstant(),C=[],A=0,V=u;A<V.length;A+=1){var Y=V[A],re=Y.feature,ue=Y.id,de=Y.index,be=Y.sourceLayerIndex,Pe=this.layers[0]._featureFilter.needGeometry,Ne=ia(re,Pe);if(this.layers[0]._featureFilter.filter(new Ei(this.zoom),Ne,h)){var Fe=x?b.evaluate(Ne,{},h):void 0,ot={id:ue,properties:re.properties,type:re.type,sourceLayerIndex:be,index:de,geometry:Pe?Ne.geometry:Fo(re),patterns:{},sortKey:Fe};C.push(ot)}}x&&C.sort(function(cn,Tn){return cn.sortKey-Tn.sortKey});for(var Ye=0,ht=C;Ye<ht.length;Ye+=1){var gt=ht[Ye],bt=gt.geometry,St=gt.index,zt=gt.sourceLayerIndex;if(this.hasPattern){var nn=Tf("line",this.layers,gt,this.zoom,c);this.patternFeatures.push(nn)}else this.addFeature(gt,bt,St,h,{});c.featureIndex.insert(u[St].feature,bt,St,zt,this.index)}},Ra.prototype.update=function(u,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,c,this.stateDependentLayers,h)},Ra.prototype.addFeatures=function(u,c,h){for(var b=0,x=this.patternFeatures;b<x.length;b+=1){var C=x[b];this.addFeature(C,C.geometry,C.index,c,h)}},Ra.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ra.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ra.prototype.upload=function(u){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,E1)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Wp),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0},Ra.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ra.prototype.lineFeatureClips=function(u){if(u.properties&&u.properties.hasOwnProperty("mapbox_clip_start")&&u.properties.hasOwnProperty("mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}},Ra.prototype.addFeature=function(u,c,h,b,x){var C=this.layers[0].layout,A=C.get("line-join").evaluate(u,{}),V=C.get("line-cap"),Y=C.get("line-miter-limit"),re=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(var ue=0,de=c;ue<de.length;ue+=1)this.addLine(de[ue],u,A,V,Y,re);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,h,x,b)},Ra.prototype.addLine=function(u,c,h,b,x,C){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var A=0;A<u.length-1;A++)this.totalDistance+=u[A].dist(u[A+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var V="Polygon"===S1[c.type],Y=u.length;Y>=2&&u[Y-1].equals(u[Y-2]);)Y--;for(var re=0;re<Y-1&&u[re].equals(u[re+1]);)re++;if(!(Y<(V?3:2))){"bevel"===h&&(x=1.05);var ue,de=this.overscaling<=16?122880/(512*this.overscaling):0,be=this.segments.prepareSegment(10*Y,this.layoutVertexArray,this.indexArray),Pe=void 0,Ne=void 0,Fe=void 0,ot=void 0;this.e1=this.e2=-1,V&&(ot=u[re].sub(ue=u[Y-2])._unit()._perp());for(var Ye=re;Ye<Y;Ye++)if(!(Ne=Ye===Y-1?V?u[re+1]:void 0:u[Ye+1])||!u[Ye].equals(Ne)){ot&&(Fe=ot),ue&&(Pe=ue),ue=u[Ye],ot=Ne?Ne.sub(ue)._unit()._perp():Fe;var ht=(Fe=Fe||ot).add(ot);0===ht.x&&0===ht.y||ht._unit();var gt=Fe.x*ot.x+Fe.y*ot.y,bt=ht.x*ot.x+ht.y*ot.y,St=0!==bt?1/bt:1/0,zt=2*Math.sqrt(2-2*bt),nn=bt<C1&&Pe&&Ne,cn=Fe.x*ot.y-Fe.y*ot.x>0;if(nn&&Ye>re){var Tn=ue.dist(Pe);if(Tn>2*de){var hn=ue.sub(ue.sub(Pe)._mult(de/Tn)._round());this.updateDistance(Pe,hn),this.addCurrentVertex(hn,Fe,0,0,be),Pe=hn}}var jn=Pe&&Ne,pn=jn?h:V?"butt":b;if(jn&&"round"===pn&&(St<C?pn="miter":St<=2&&(pn="fakeround")),"miter"===pn&&St>x&&(pn="bevel"),"bevel"===pn&&(St>2&&(pn="flipbevel"),St<x&&(pn="miter")),Pe&&this.updateDistance(Pe,ue),"miter"===pn)ht._mult(St),this.addCurrentVertex(ue,ht,0,0,be);else if("flipbevel"===pn){if(St>100)ht=ot.mult(-1);else{var Er=St*Fe.add(ot).mag()/Fe.sub(ot).mag();ht._perp()._mult(Er*(cn?-1:1))}this.addCurrentVertex(ue,ht,0,0,be),this.addCurrentVertex(ue,ht.mult(-1),0,0,be)}else if("bevel"===pn||"fakeround"===pn){var Yn=-Math.sqrt(St*St-1),Mn=cn?Yn:0,Sr=cn?0:Yn;if(Pe&&this.addCurrentVertex(ue,Fe,Mn,Sr,be),"fakeround"===pn)for(var pr=Math.round(180*zt/Math.PI/20),ii=1;ii<pr;ii++){var Hn=ii/pr;if(.5!==Hn){var ci=Hn-.5;Hn+=Hn*ci*(Hn-1)*((1.0904+gt*(gt*(3.55645-1.43519*gt)-3.2452))*ci*ci+(.848013+gt*(.215638*gt-1.06021)))}var mo=ot.sub(Fe)._mult(Hn)._add(Fe)._unit()._mult(cn?-1:1);this.addHalfVertex(ue,mo.x,mo.y,!1,cn,0,be)}Ne&&this.addCurrentVertex(ue,ot,-Mn,-Sr,be)}else if("butt"===pn)this.addCurrentVertex(ue,ht,0,0,be);else if("square"===pn){var Mo=Pe?1:-1;this.addCurrentVertex(ue,ht,Mo,Mo,be)}else"round"===pn&&(Pe&&(this.addCurrentVertex(ue,Fe,0,0,be),this.addCurrentVertex(ue,Fe,1,1,be,!0)),Ne&&(this.addCurrentVertex(ue,ot,-1,-1,be,!0),this.addCurrentVertex(ue,ot,0,0,be)));if(nn&&Ye<Y-1){var To=ue.dist(Ne);if(To>2*de){var go=ue.add(Ne.sub(ue)._mult(de/To)._round());this.updateDistance(ue,go),this.addCurrentVertex(go,ot,0,0,be),ue=go}}}}},Ra.prototype.addCurrentVertex=function(u,c,h,b,x,C){void 0===C&&(C=!1);var A=c.y*b-c.x,V=-c.y-c.x*b;this.addHalfVertex(u,c.x+c.y*h,c.y-c.x*h,C,!1,h,x),this.addHalfVertex(u,A,V,C,!0,-b,x),this.distance>Yg/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(u,c,h,b,x,C))},Ra.prototype.addHalfVertex=function(u,c,h,b,x,C,A){var V=.5*(this.lineClips?this.scaledDistance*(Yg-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u.x<<1)+(b?1:0),(u.y<<1)+(x?1:0),Math.round(63*c)+128,Math.round(63*h)+128,1+(0===C?0:C<0?-1:1)|(63&V)<<2,V>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var Y=A.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Y),A.primitiveLength++),x?this.e2=Y:this.e1=Y},Ra.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ra.prototype.updateDistance=function(u,c){this.distance+=u.dist(c),this.updateScaledDistance()},_n("LineBucket",Ra,{omit:["layers","patternFeatures"]});var Jp=new Pa({"line-cap":new bn(ke.layout_line["line-cap"]),"line-join":new Zn(ke.layout_line["line-join"]),"line-miter-limit":new bn(ke.layout_line["line-miter-limit"]),"line-round-limit":new bn(ke.layout_line["line-round-limit"]),"line-sort-key":new Zn(ke.layout_line["line-sort-key"])}),t_={paint:new Pa({"line-opacity":new Zn(ke.paint_line["line-opacity"]),"line-color":new Zn(ke.paint_line["line-color"]),"line-translate":new bn(ke.paint_line["line-translate"]),"line-translate-anchor":new bn(ke.paint_line["line-translate-anchor"]),"line-width":new Zn(ke.paint_line["line-width"]),"line-gap-width":new Zn(ke.paint_line["line-gap-width"]),"line-offset":new Zn(ke.paint_line["line-offset"]),"line-blur":new Zn(ke.paint_line["line-blur"]),"line-dasharray":new vu(ke.paint_line["line-dasharray"]),"line-pattern":new So(ke.paint_line["line-pattern"]),"line-gradient":new Mu(ke.paint_line["line-gradient"])}),layout:Jp},hr=new(function(u){function c(){u.apply(this,arguments)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.possiblyEvaluate=function(h,b){return b=new Ei(Math.floor(b.zoom),{now:b.now,fadeDuration:b.fadeDuration,zoomHistory:b.zoomHistory,transition:b.transition}),u.prototype.possiblyEvaluate.call(this,h,b)},c.prototype.evaluate=function(h,b,x,C){return b=ae({},b,{zoom:Math.floor(b.zoom)}),u.prototype.evaluate.call(this,h,b,x,C)},c}(Zn))(t_.paint.properties["line-width"].specification);hr.useIntegerZoom=!0;var n_=function(u){function c(h){u.call(this,h,t_),this.gradientVersion=0}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype._handleSpecialPaintPropertyUpdate=function(h){"line-gradient"===h&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof La,this.gradientVersion=(this.gradientVersion+1)%H)},c.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},c.prototype.recalculate=function(h,b){u.prototype.recalculate.call(this,h,b),this.paint._values["line-floorwidth"]=hr.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,h)},c.prototype.createBucket=function(h){return new Ra(h)},c.prototype.queryRadius=function(h){var b=h,x=td(bo("line-width",this,b),bo("line-gap-width",this,b)),C=bo("line-offset",this,b);return x/2+Math.abs(C)+Nu(this.paint.get("line-translate"))},c.prototype.queryIntersectsFeature=function(h,b,x,C,A,V,Y){var re=qs(h,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),V.angle,Y),ue=Y/2*td(this.paint.get("line-width").evaluate(b,x),this.paint.get("line-gap-width").evaluate(b,x)),de=this.paint.get("line-offset").evaluate(b,x);return de&&(C=function(be,Pe){for(var Ne=[],Fe=new I(0,0),ot=0;ot<be.length;ot++){for(var Ye=be[ot],ht=[],gt=0;gt<Ye.length;gt++){var bt=Ye[gt],St=Ye[gt+1],zt=0===gt?Fe:bt.sub(Ye[gt-1])._unit()._perp(),nn=gt===Ye.length-1?Fe:St.sub(bt)._unit()._perp(),cn=zt._add(nn)._unit();cn._mult(1/(cn.x*nn.x+cn.y*nn.y)),ht.push(cn._mult(Pe)._add(bt))}Ne.push(ht)}return Ne}(C,de*Y)),function(be,Pe,Ne){for(var Fe=0;Fe<Pe.length;Fe++){var ot=Pe[Fe];if(be.length>=3)for(var Ye=0;Ye<ot.length;Ye++)if(Ds(be,ot[Ye]))return!0;if($c(be,ot,Ne))return!0}return!1}(re,C,ue)},c.prototype.isTileClipped=function(){return!0},c}(Ro);function td(u,c){return c>0?c+2*u:u}var Qg=_o([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),kh=_o([{name:"a_projected_pos",components:3,type:"Float32"}],4),T1=(_o([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),_o([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),r_=(_o([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),_o([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),I1=_o([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ev(u,c,h){return u.sections.forEach(function(b){var x,A,V;b.text=(x=b.text,A=h,"uppercase"===(V=c.layout.get("text-transform").evaluate(A,{}))?x=x.toLocaleUpperCase():"lowercase"===V&&(x=x.toLocaleLowerCase()),yo.applyArabicShaping&&(x=yo.applyArabicShaping(x)),x)}),u}_o([{name:"triangle",components:3,type:"Uint16"}]),_o([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),_o([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),_o([{type:"Float32",name:"offsetX"}]),_o([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var rl={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},tv=function(u,c,h,b,x){var C,A,V=8*x-b-1,Y=(1<<V)-1,re=Y>>1,ue=-7,de=h?x-1:0,be=h?-1:1,Pe=u[c+de];for(de+=be,C=Pe&(1<<-ue)-1,Pe>>=-ue,ue+=V;ue>0;C=256*C+u[c+de],de+=be,ue-=8);for(A=C&(1<<-ue)-1,C>>=-ue,ue+=b;ue>0;A=256*A+u[c+de],de+=be,ue-=8);if(0===C)C=1-re;else{if(C===Y)return A?NaN:1/0*(Pe?-1:1);A+=Math.pow(2,b),C-=re}return(Pe?-1:1)*A*Math.pow(2,C-b)},Pf=function(u,c,h,b,x,C){var A,V,Y,re=8*C-x-1,ue=(1<<re)-1,de=ue>>1,be=23===x?Math.pow(2,-24)-Math.pow(2,-77):0,Pe=b?0:C-1,Ne=b?1:-1,Fe=c<0||0===c&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(V=isNaN(c)?1:0,A=ue):(A=Math.floor(Math.log(c)/Math.LN2),c*(Y=Math.pow(2,-A))<1&&(A--,Y*=2),(c+=A+de>=1?be/Y:be*Math.pow(2,1-de))*Y>=2&&(A++,Y/=2),A+de>=ue?(V=0,A=ue):A+de>=1?(V=(c*Y-1)*Math.pow(2,x),A+=de):(V=c*Math.pow(2,de-1)*Math.pow(2,x),A=0));x>=8;u[h+Pe]=255&V,Pe+=Ne,V/=256,x-=8);for(A=A<<x|V,re+=x;re>0;u[h+Pe]=255&A,Pe+=Ne,A/=256,re-=8);u[h+Pe-Ne]|=128*Fe},Zp=Zi;function Zi(u){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(u)?u:new Uint8Array(u||0),this.pos=0,this.type=0,this.length=this.buf.length}Zi.Varint=0,Zi.Fixed64=1,Zi.Bytes=2,Zi.Fixed32=5;var Af=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function il(u){return u.type===Zi.Bytes?u.readVarint()+u.pos:u.pos+1}function i_(u,c,h){var b=c<=16383?1:c<=2097151?2:c<=268435455?3:Math.floor(Math.log(c)/(7*Math.LN2));h.realloc(b);for(var x=h.pos-1;x>=u;x--)h.buf[x+b]=h.buf[x]}function P1(u,c){for(var h=0;h<u.length;h++)c.writeVarint(u[h])}function Rf(u,c){for(var h=0;h<u.length;h++)c.writeSVarint(u[h])}function Nh(u,c){for(var h=0;h<u.length;h++)c.writeFloat(u[h])}function A1(u,c){for(var h=0;h<u.length;h++)c.writeDouble(u[h])}function BT(u,c){for(var h=0;h<u.length;h++)c.writeBoolean(u[h])}function o_(u,c){for(var h=0;h<u.length;h++)c.writeFixed32(u[h])}function R1(u,c){for(var h=0;h<u.length;h++)c.writeSFixed32(u[h])}function FT(u,c){for(var h=0;h<u.length;h++)c.writeFixed64(u[h])}function D1(u,c){for(var h=0;h<u.length;h++)c.writeSFixed64(u[h])}function Yp(u,c){return(u[c]|u[c+1]<<8|u[c+2]<<16)+16777216*u[c+3]}function Df(u,c,h){u[h]=c,u[h+1]=c>>>8,u[h+2]=c>>>16,u[h+3]=c>>>24}function Lh(u,c){return(u[c]|u[c+1]<<8|u[c+2]<<16)+(u[c+3]<<24)}function a_(u,c,h){1===u&&h.readMessage(O1,c)}function O1(u,c,h){if(3===u){var b=h.readMessage(s_,{}),x=b.width,C=b.height,A=b.left,V=b.top,Y=b.advance;c.push({id:b.id,bitmap:new Yc({width:x+6,height:C+6},b.bitmap),metrics:{width:x,height:C,left:A,top:V,advance:Y}})}}function s_(u,c,h){1===u?c.id=h.readVarint():2===u?c.bitmap=h.readBytes():3===u?c.width=h.readVarint():4===u?c.height=h.readVarint():5===u?c.left=h.readSVarint():6===u?c.top=h.readSVarint():7===u&&(c.advance=h.readVarint())}function M1(u){for(var c=0,h=0,b=0,x=u;b<x.length;b+=1){var C=x[b];c+=C.w*C.h,h=Math.max(h,C.w)}u.sort(function(Fe,ot){return ot.h-Fe.h});for(var A=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(c/.95)),h),h:1/0}],V=0,Y=0,re=0,ue=u;re<ue.length;re+=1)for(var de=ue[re],be=A.length-1;be>=0;be--){var Pe=A[be];if(!(de.w>Pe.w||de.h>Pe.h)){if(de.x=Pe.x,de.y=Pe.y,Y=Math.max(Y,de.y+de.h),V=Math.max(V,de.x+de.w),de.w===Pe.w&&de.h===Pe.h){var Ne=A.pop();be<A.length&&(A[be]=Ne)}else de.h===Pe.h?(Pe.x+=de.w,Pe.w-=de.w):de.w===Pe.w?(Pe.y+=de.h,Pe.h-=de.h):(A.push({x:Pe.x+de.w,y:Pe.y,w:Pe.w-de.w,h:de.h}),Pe.y+=de.h,Pe.h-=de.h);break}}return{w:V,h:Y,fill:c/(V*Y)||0}}Zi.prototype={destroy:function(){this.buf=null},readFields:function(u,c,h){for(h=h||this.length;this.pos<h;){var b=this.readVarint(),x=b>>3,C=this.pos;this.type=7&b,u(x,c,this),this.pos===C&&this.skip(b)}return c},readMessage:function(u,c){return this.readFields(u,c,this.readVarint()+this.pos)},readFixed32:function(){var u=Yp(this.buf,this.pos);return this.pos+=4,u},readSFixed32:function(){var u=Lh(this.buf,this.pos);return this.pos+=4,u},readFixed64:function(){var u=Yp(this.buf,this.pos)+4294967296*Yp(this.buf,this.pos+4);return this.pos+=8,u},readSFixed64:function(){var u=Yp(this.buf,this.pos)+4294967296*Lh(this.buf,this.pos+4);return this.pos+=8,u},readFloat:function(){var u=tv(this.buf,this.pos,!0,23,4);return this.pos+=4,u},readDouble:function(){var u=tv(this.buf,this.pos,!0,52,8);return this.pos+=8,u},readVarint:function(u){var c,h,b=this.buf;return c=127&(h=b[this.pos++]),h<128?c:(c|=(127&(h=b[this.pos++]))<<7,h<128?c:(c|=(127&(h=b[this.pos++]))<<14,h<128?c:(c|=(127&(h=b[this.pos++]))<<21,h<128?c:function(x,C,A){var V,Y,re=A.buf;if(V=(112&(Y=re[A.pos++]))>>4,Y<128||(V|=(127&(Y=re[A.pos++]))<<3,Y<128)||(V|=(127&(Y=re[A.pos++]))<<10,Y<128)||(V|=(127&(Y=re[A.pos++]))<<17,Y<128)||(V|=(127&(Y=re[A.pos++]))<<24,Y<128)||(V|=(1&(Y=re[A.pos++]))<<31,Y<128))return function Td(u,c,h){return h?4294967296*c+(u>>>0):4294967296*(c>>>0)+(u>>>0)}(x,V,C);throw new Error("Expected varint not more than 10 bytes")}(c|=(15&(h=b[this.pos]))<<28,u,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var u=this.readVarint();return u%2==1?(u+1)/-2:u/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var u=this.readVarint()+this.pos,c=this.pos;return this.pos=u,u-c>=12&&Af?Af.decode(this.buf.subarray(c,u)):function(h,b,x){for(var C="",A=b;A<x;){var V,Y,re,ue=h[A],de=null,be=ue>239?4:ue>223?3:ue>191?2:1;if(A+be>x)break;1===be?ue<128&&(de=ue):2===be?128==(192&(V=h[A+1]))&&(de=(31&ue)<<6|63&V)<=127&&(de=null):3===be?(Y=h[A+2],128==(192&(V=h[A+1]))&&128==(192&Y)&&((de=(15&ue)<<12|(63&V)<<6|63&Y)<=2047||de>=55296&&de<=57343)&&(de=null)):4===be&&(Y=h[A+2],re=h[A+3],128==(192&(V=h[A+1]))&&128==(192&Y)&&128==(192&re)&&((de=(15&ue)<<18|(63&V)<<12|(63&Y)<<6|63&re)<=65535||de>=1114112)&&(de=null)),null===de?(de=65533,be=1):de>65535&&(de-=65536,C+=String.fromCharCode(de>>>10&1023|55296),de=56320|1023&de),C+=String.fromCharCode(de),A+=be}return C}(this.buf,c,u)},readBytes:function(){var u=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,u);return this.pos=u,c},readPackedVarint:function(u,c){if(this.type!==Zi.Bytes)return u.push(this.readVarint(c));var h=il(this);for(u=u||[];this.pos<h;)u.push(this.readVarint(c));return u},readPackedSVarint:function(u){if(this.type!==Zi.Bytes)return u.push(this.readSVarint());var c=il(this);for(u=u||[];this.pos<c;)u.push(this.readSVarint());return u},readPackedBoolean:function(u){if(this.type!==Zi.Bytes)return u.push(this.readBoolean());var c=il(this);for(u=u||[];this.pos<c;)u.push(this.readBoolean());return u},readPackedFloat:function(u){if(this.type!==Zi.Bytes)return u.push(this.readFloat());var c=il(this);for(u=u||[];this.pos<c;)u.push(this.readFloat());return u},readPackedDouble:function(u){if(this.type!==Zi.Bytes)return u.push(this.readDouble());var c=il(this);for(u=u||[];this.pos<c;)u.push(this.readDouble());return u},readPackedFixed32:function(u){if(this.type!==Zi.Bytes)return u.push(this.readFixed32());var c=il(this);for(u=u||[];this.pos<c;)u.push(this.readFixed32());return u},readPackedSFixed32:function(u){if(this.type!==Zi.Bytes)return u.push(this.readSFixed32());var c=il(this);for(u=u||[];this.pos<c;)u.push(this.readSFixed32());return u},readPackedFixed64:function(u){if(this.type!==Zi.Bytes)return u.push(this.readFixed64());var c=il(this);for(u=u||[];this.pos<c;)u.push(this.readFixed64());return u},readPackedSFixed64:function(u){if(this.type!==Zi.Bytes)return u.push(this.readSFixed64());var c=il(this);for(u=u||[];this.pos<c;)u.push(this.readSFixed64());return u},skip:function(u){var c=7&u;if(c===Zi.Varint)for(;this.buf[this.pos++]>127;);else if(c===Zi.Bytes)this.pos=this.readVarint()+this.pos;else if(c===Zi.Fixed32)this.pos+=4;else{if(c!==Zi.Fixed64)throw new Error("Unimplemented type: "+c);this.pos+=8}},writeTag:function(u,c){this.writeVarint(u<<3|c)},realloc:function(u){for(var c=this.length||16;c<this.pos+u;)c*=2;if(c!==this.length){var h=new Uint8Array(c);h.set(this.buf),this.buf=h,this.length=c}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(u){this.realloc(4),Df(this.buf,u,this.pos),this.pos+=4},writeSFixed32:function(u){this.realloc(4),Df(this.buf,u,this.pos),this.pos+=4},writeFixed64:function(u){this.realloc(8),Df(this.buf,-1&u,this.pos),Df(this.buf,Math.floor(u*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(u){this.realloc(8),Df(this.buf,-1&u,this.pos),Df(this.buf,Math.floor(u*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(u){(u=+u||0)>268435455||u<0?function(c,h){var b,x,C,V;if(c>=0?(b=c%4294967296|0,x=c/4294967296|0):(x=~(-c/4294967296),4294967295^(b=~(-c%4294967296))?b=b+1|0:(b=0,x=x+1|0)),c>=0x10000000000000000||c<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),C=b,(V=h).buf[V.pos++]=127&C|128,C>>>=7,V.buf[V.pos++]=127&C|128,C>>>=7,V.buf[V.pos++]=127&C|128,C>>>=7,V.buf[V.pos++]=127&C|128,V.buf[V.pos]=127&(C>>>=7),function(C,A){var V=(7&C)<<4;A.buf[A.pos++]|=V|((C>>>=3)?128:0),C&&(A.buf[A.pos++]=127&C|((C>>>=7)?128:0),C&&(A.buf[A.pos++]=127&C|((C>>>=7)?128:0),C&&(A.buf[A.pos++]=127&C|((C>>>=7)?128:0),C&&(A.buf[A.pos++]=127&C|((C>>>=7)?128:0),C&&(A.buf[A.pos++]=127&C)))))}(x,h)}(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))},writeSVarint:function(u){this.writeVarint(u<0?2*-u-1:2*u)},writeBoolean:function(u){this.writeVarint(Boolean(u))},writeString:function(u){u=String(u),this.realloc(4*u.length),this.pos++;var c=this.pos;this.pos=function(b,x,C){for(var A,V,Y=0;Y<x.length;Y++){if((A=x.charCodeAt(Y))>55295&&A<57344){if(!V){A>56319||Y+1===x.length?(b[C++]=239,b[C++]=191,b[C++]=189):V=A;continue}if(A<56320){b[C++]=239,b[C++]=191,b[C++]=189,V=A;continue}A=V-55296<<10|A-56320|65536,V=null}else V&&(b[C++]=239,b[C++]=191,b[C++]=189,V=null);A<128?b[C++]=A:(A<2048?b[C++]=A>>6|192:(A<65536?b[C++]=A>>12|224:(b[C++]=A>>18|240,b[C++]=A>>12&63|128),b[C++]=A>>6&63|128),b[C++]=63&A|128)}return C}(this.buf,u,this.pos);var h=this.pos-c;h>=128&&i_(c,h,this),this.pos=c-1,this.writeVarint(h),this.pos+=h},writeFloat:function(u){this.realloc(4),Pf(this.buf,u,this.pos,!0,23,4),this.pos+=4},writeDouble:function(u){this.realloc(8),Pf(this.buf,u,this.pos,!0,52,8),this.pos+=8},writeBytes:function(u){var c=u.length;this.writeVarint(c),this.realloc(c);for(var h=0;h<c;h++)this.buf[this.pos++]=u[h]},writeRawMessage:function(u,c){this.pos++;var h=this.pos;u(c,this);var b=this.pos-h;b>=128&&i_(h,b,this),this.pos=h-1,this.writeVarint(b),this.pos+=b},writeMessage:function(u,c,h){this.writeTag(u,Zi.Bytes),this.writeRawMessage(c,h)},writePackedVarint:function(u,c){c.length&&this.writeMessage(u,P1,c)},writePackedSVarint:function(u,c){c.length&&this.writeMessage(u,Rf,c)},writePackedBoolean:function(u,c){c.length&&this.writeMessage(u,BT,c)},writePackedFloat:function(u,c){c.length&&this.writeMessage(u,Nh,c)},writePackedDouble:function(u,c){c.length&&this.writeMessage(u,A1,c)},writePackedFixed32:function(u,c){c.length&&this.writeMessage(u,o_,c)},writePackedSFixed32:function(u,c){c.length&&this.writeMessage(u,R1,c)},writePackedFixed64:function(u,c){c.length&&this.writeMessage(u,FT,c)},writePackedSFixed64:function(u,c){c.length&&this.writeMessage(u,D1,c)},writeBytesField:function(u,c){this.writeTag(u,Zi.Bytes),this.writeBytes(c)},writeFixed32Field:function(u,c){this.writeTag(u,Zi.Fixed32),this.writeFixed32(c)},writeSFixed32Field:function(u,c){this.writeTag(u,Zi.Fixed32),this.writeSFixed32(c)},writeFixed64Field:function(u,c){this.writeTag(u,Zi.Fixed64),this.writeFixed64(c)},writeSFixed64Field:function(u,c){this.writeTag(u,Zi.Fixed64),this.writeSFixed64(c)},writeVarintField:function(u,c){this.writeTag(u,Zi.Varint),this.writeVarint(c)},writeSVarintField:function(u,c){this.writeTag(u,Zi.Varint),this.writeSVarint(c)},writeStringField:function(u,c){this.writeTag(u,Zi.Bytes),this.writeString(c)},writeFloatField:function(u,c){this.writeTag(u,Zi.Fixed32),this.writeFloat(c)},writeDoubleField:function(u,c){this.writeTag(u,Zi.Fixed64),this.writeDouble(c)},writeBooleanField:function(u,c){this.writeVarintField(u,Boolean(c))}};var Bh=function(u,c){var h=c.pixelRatio,b=c.version,x=c.stretchX,C=c.stretchY,A=c.content;this.paddedRect=u,this.pixelRatio=h,this.stretchX=x,this.stretchY=C,this.content=A,this.version=b},Qp={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Qp.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Qp.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Qp.tlbr.get=function(){return this.tl.concat(this.br)},Qp.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Bh.prototype,Qp);var nd=function(u,c){var h={},b={};this.haveRenderCallbacks=[];var x=[];this.addImages(u,h,x),this.addImages(c,b,x);var C=M1(x),A=new Os({width:C.w||1,height:C.h||1});for(var V in u){var Y=u[V],re=h[V].paddedRect;Os.copy(Y.data,A,{x:0,y:0},{x:re.x+1,y:re.y+1},Y.data)}for(var ue in c){var de=c[ue],be=b[ue].paddedRect,Pe=be.x+1,Ne=be.y+1,Fe=de.data.width,ot=de.data.height;Os.copy(de.data,A,{x:0,y:0},{x:Pe,y:Ne},de.data),Os.copy(de.data,A,{x:0,y:ot-1},{x:Pe,y:Ne-1},{width:Fe,height:1}),Os.copy(de.data,A,{x:0,y:0},{x:Pe,y:Ne+ot},{width:Fe,height:1}),Os.copy(de.data,A,{x:Fe-1,y:0},{x:Pe-1,y:Ne},{width:1,height:ot}),Os.copy(de.data,A,{x:0,y:0},{x:Pe+Fe,y:Ne},{width:1,height:ot})}this.image=A,this.iconPositions=h,this.patternPositions=b};nd.prototype.addImages=function(u,c,h){for(var b in u){var x=u[b],C={x:0,y:0,w:x.data.width+2,h:x.data.height+2};h.push(C),c[b]=new Bh(C,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(b)}},nd.prototype.patchUpdatedImages=function(u,c){for(var h in u.dispatchRenderCallbacks(this.haveRenderCallbacks),u.updatedImages)this.patchUpdatedImage(this.iconPositions[h],u.getImage(h),c),this.patchUpdatedImage(this.patternPositions[h],u.getImage(h),c)},nd.prototype.patchUpdatedImage=function(u,c,h){if(u&&c&&u.version!==c.version){u.version=c.version;var b=u.tl;h.update(c.data,void 0,{x:b[0],y:b[1]})}},_n("ImagePosition",Bh),_n("ImageAtlas",nd);var $s={horizontal:1,vertical:2,horizontalOnly:3},Cl=function(){this.scale=1,this.fontStack="",this.imageName=null};Cl.forText=function(u,c){var h=new Cl;return h.scale=u||1,h.fontStack=c,h},Cl.forImage=function(u){var c=new Cl;return c.imageName=u,c};var gs=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function em(u,c,h,b,x,C,A,V,Y,re,ue,de,be,Pe,Ne,Fe){var ot,Ye=gs.fromFeature(u,x);de===$s.vertical&&Ye.verticalizePunctuation();var ht=yo.processBidirectionalText,gt=yo.processStyledBidirectionalText;if(ht&&1===Ye.sections.length){ot=[];for(var bt=0,St=ht(Ye.toString(),nm(Ye,re,C,c,b,Pe,Ne));bt<St.length;bt+=1){var zt=St[bt],nn=new gs;nn.text=zt,nn.sections=Ye.sections;for(var cn=0;cn<zt.length;cn++)nn.sectionIndex.push(0);ot.push(nn)}}else if(gt){ot=[];for(var Tn=0,hn=gt(Ye.text,Ye.sectionIndex,nm(Ye,re,C,c,b,Pe,Ne));Tn<hn.length;Tn+=1){var jn=hn[Tn],pn=new gs;pn.text=jn[0],pn.sectionIndex=jn[1],pn.sections=Ye.sections,ot.push(pn)}}else ot=function(Mn,Sr){for(var pr=[],ii=Mn.text,Hn=0,ci=0,mo=Sr;ci<mo.length;ci+=1){var Mo=mo[ci];pr.push(Mn.substring(Hn,Mo)),Hn=Mo}return Hn<ii.length&&pr.push(Mn.substring(Hn,ii.length)),pr}(Ye,nm(Ye,re,C,c,b,Pe,Ne));var Er=[],Yn={positionedLines:Er,text:Ye.toString(),top:ue[1],bottom:ue[1],left:ue[0],right:ue[0],writingMode:de,iconsInText:!1,verticalizable:!1};return function(Mn,Sr,pr,ii,Hn,ci,mo,Mo,To,go,ko,ga){for(var sa=0,Ga=-17,va=0,Va=0,jo="right"===Mo?1:"left"===Mo?0:.5,Da=0,Wr=0,Vi=Hn;Wr<Vi.length;Wr+=1){var di=Vi[Wr];di.trim();var ai=di.getMaxScale(),ys=24*(ai-1),Qa={positionedGlyphs:[],lineOffset:0};Mn.positionedLines[Da]=Qa;var oo=Qa.positionedGlyphs,Io=0;if(di.length()){for(var es=0;es<di.length();es++){var pi=di.getSection(es),Tl=di.getSectionIndex(es),iu=di.getCharCode(es),al=0,No=null,Bu=null,ou=null,Md=24,Sc=!(To===$s.horizontal||!ko&&!hf(iu)||ko&&(nv[iu]||(Pl=iu,xn.Arabic(Pl)||xn["Arabic Supplement"](Pl)||xn["Arabic Extended-A"](Pl)||xn["Arabic Presentation Forms-A"](Pl)||xn["Arabic Presentation Forms-B"](Pl))));if(pi.imageName){var kd=ii[pi.imageName];if(!kd)continue;ou=pi.imageName,Mn.iconsInText=Mn.iconsInText||!0,Bu=kd.paddedRect;var Il=kd.displaySize;pi.scale=24*pi.scale/ga,al=ys+(24-Il[1]*pi.scale),Md=(No={width:Il[0],height:Il[1],left:1,top:-3,advance:Sc?Il[1]:Il[0]}).advance;var Jl=Sc?Il[0]*pi.scale-24*ai:Il[1]*pi.scale-24*ai;Jl>0&&Jl>Io&&(Io=Jl)}else{var hm=pr[pi.fontStack],Nd=hm&&hm[iu];if(Nd&&Nd.rect)Bu=Nd.rect,No=Nd.metrics;else{var Gh=Sr[pi.fontStack],pm=Gh&&Gh[iu];if(!pm)continue;No=pm.metrics}al=24*(ai-pi.scale)}Sc?(Mn.verticalizable=!0,oo.push({glyph:iu,imageName:ou,x:sa,y:Ga+al,vertical:Sc,scale:pi.scale,fontStack:pi.fontStack,sectionIndex:Tl,metrics:No,rect:Bu}),sa+=Md*pi.scale+go):(oo.push({glyph:iu,imageName:ou,x:sa,y:Ga+al,vertical:Sc,scale:pi.scale,fontStack:pi.fontStack,sectionIndex:Tl,metrics:No,rect:Bu}),sa+=No.advance*pi.scale+go)}0!==oo.length&&(va=Math.max(sa-go,va),k1(oo,0,oo.length-1,jo,Io)),sa=0;var Vh=ci*ai+Io;Qa.lineOffset=Math.max(Io,ys),Ga+=Vh,Va=Math.max(Vh,Va),++Da}else Ga+=ci,++Da}var Pl,zf=Ga- -17,qh=ov(mo),Cc=qh.horizontalAlign,jf=qh.verticalAlign;(function(Hh,mm,$h,au,gm,Uf,Kh,Xh,vm){var Gf,Wh=(mm-$h)*gm;Gf=Uf!==Kh?-Xh*au- -17:(-au*vm+.5)*Kh;for(var Vf=0,Jh=Hh;Vf<Jh.length;Vf+=1)for(var Ld=0,Vr=Jh[Vf].positionedGlyphs;Ld<Vr.length;Ld+=1){var qf=Vr[Ld];qf.x+=Wh,qf.y+=Gf}})(Mn.positionedLines,jo,Cc,jf,va,Va,ci,zf,Hn.length),Mn.top+=-jf*zf,Mn.bottom=Mn.top+zf,Mn.left+=-Cc*va,Mn.right=Mn.left+va}(Yn,c,h,b,ot,A,V,Y,de,re,be,Fe),!function(Mn){for(var Sr=0,pr=Mn;Sr<pr.length;Sr+=1)if(0!==pr[Sr].positionedGlyphs.length)return!1;return!0}(Er)&&Yn}gs.fromFeature=function(u,c){for(var h=new gs,b=0;b<u.sections.length;b++){var x=u.sections[b];x.image?h.addImageSection(x):h.addTextSection(x,c)}return h},gs.prototype.length=function(){return this.text.length},gs.prototype.getSection=function(u){return this.sections[this.sectionIndex[u]]},gs.prototype.getSectionIndex=function(u){return this.sectionIndex[u]},gs.prototype.getCharCode=function(u){return this.text.charCodeAt(u)},gs.prototype.verticalizePunctuation=function(){this.text=function(u){for(var c="",h=0;h<u.length;h++){var b=u.charCodeAt(h+1)||null,x=u.charCodeAt(h-1)||null;c+=b&&eu(b)&&!rl[u[h+1]]||x&&eu(x)&&!rl[u[h-1]]||!rl[u[h]]?u[h]:rl[u[h]]}return c}(this.text)},gs.prototype.trim=function(){for(var u=0,c=0;c<this.text.length&&nv[this.text.charCodeAt(c)];c++)u++;for(var h=this.text.length,b=this.text.length-1;b>=0&&b>=u&&nv[this.text.charCodeAt(b)];b--)h--;this.text=this.text.substring(u,h),this.sectionIndex=this.sectionIndex.slice(u,h)},gs.prototype.substring=function(u,c){var h=new gs;return h.text=this.text.substring(u,c),h.sectionIndex=this.sectionIndex.slice(u,c),h.sections=this.sections,h},gs.prototype.toString=function(){return this.text},gs.prototype.getMaxScale=function(){var u=this;return this.sectionIndex.reduce(function(c,h){return Math.max(c,u.sections[h].scale)},0)},gs.prototype.addTextSection=function(u,c){this.text+=u.text,this.sections.push(Cl.forText(u.scale,u.fontStack||c));for(var h=this.sections.length-1,b=0;b<u.text.length;++b)this.sectionIndex.push(h)},gs.prototype.addImageSection=function(u){var c=u.image?u.image.name:"";if(0!==c.length){var h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Cl.forImage(c)),this.sectionIndex.push(this.sections.length-1)):N("Reached maximum number of images 6401")}else N("Can't add FormattedSection with an empty image.")},gs.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var nv={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},vs={};function tm(u,c,h,b,x,C){if(c.imageName){var A=b[c.imageName];return A?A.displaySize[0]*c.scale*24/C+x:0}var V=h[c.fontStack],Y=V&&V[u];return Y?Y.metrics.advance*c.scale+x:0}function rv(u,c,h,b){var x=Math.pow(u-c,2);return b?u<c?x/2:2*x:x+Math.abs(h)*h}function u_(u,c,h){var b=0;return 10===u&&(b-=1e4),h&&(b+=150),40!==u&&65288!==u||(b+=50),41!==c&&65289!==c||(b+=50),b}function iv(u,c,h,b,x,C){for(var A=null,V=rv(c,h,x,C),Y=0,re=b;Y<re.length;Y+=1){var ue=re[Y],de=rv(c-ue.x,h,x,C)+ue.badness;de<=V&&(A=ue,V=de)}return{index:u,x:c,priorBreak:A,badness:V}}function nm(u,c,h,b,x,C,A){if("point"!==C)return[];if(!u)return[];for(var V,Y=[],re=function(ot,Ye,ht,gt,bt,St){for(var zt=0,nn=0;nn<ot.length();nn++){var cn=ot.getSection(nn);zt+=tm(ot.getCharCode(nn),cn,gt,bt,Ye,St)}return zt/Math.max(1,Math.ceil(zt/ht))}(u,c,h,b,x,A),ue=u.text.indexOf("\u200b")>=0,de=0,be=0;be<u.length();be++){var Pe=u.getSection(be),Ne=u.getCharCode(be);if(nv[Ne]||(de+=tm(Ne,Pe,b,x,c,A)),be<u.length()-1){var Fe=!((V=Ne)<11904||!(xn["Bopomofo Extended"](V)||xn.Bopomofo(V)||xn["CJK Compatibility Forms"](V)||xn["CJK Compatibility Ideographs"](V)||xn["CJK Compatibility"](V)||xn["CJK Radicals Supplement"](V)||xn["CJK Strokes"](V)||xn["CJK Symbols and Punctuation"](V)||xn["CJK Unified Ideographs Extension A"](V)||xn["CJK Unified Ideographs"](V)||xn["Enclosed CJK Letters and Months"](V)||xn["Halfwidth and Fullwidth Forms"](V)||xn.Hiragana(V)||xn["Ideographic Description Characters"](V)||xn["Kangxi Radicals"](V)||xn["Katakana Phonetic Extensions"](V)||xn.Katakana(V)||xn["Vertical Forms"](V)||xn["Yi Radicals"](V)||xn["Yi Syllables"](V)));(vs[Ne]||Fe||Pe.imageName)&&Y.push(iv(be+1,de,re,Y,u_(Ne,u.getCharCode(be+1),Fe&&ue),!1))}}return function ot(Ye){return Ye?ot(Ye.priorBreak).concat(Ye.index):[]}(iv(u.length(),de,re,Y,0,!0))}function ov(u){var c=.5,h=.5;switch(u){case"right":case"top-right":case"bottom-right":c=1;break;case"left":case"top-left":case"bottom-left":c=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:c,verticalAlign:h}}function k1(u,c,h,b,x){if(b||x)for(var C=u[h],A=(u[h].x+C.metrics.advance*C.scale)*b,V=c;V<=h;V++)u[V].x-=A,u[V].y+=x}function l_(u,c,h,b,x,C){var A,V=u.image;if(V.content){var Y=V.content,re=V.pixelRatio||1;A=[Y[0]/re,Y[1]/re,V.displaySize[0]-Y[2]/re,V.displaySize[1]-Y[3]/re]}var ue,de,be,Pe,Ne=c.left*C,Fe=c.right*C;"width"===h||"both"===h?(Pe=x[0]+Ne-b[3],de=x[0]+Fe+b[1]):de=(Pe=x[0]+(Ne+Fe-V.displaySize[0])/2)+V.displaySize[0];var ot=c.top*C,Ye=c.bottom*C;return"height"===h||"both"===h?(ue=x[1]+ot-b[0],be=x[1]+Ye+b[2]):be=(ue=x[1]+(ot+Ye-V.displaySize[1])/2)+V.displaySize[1],{image:V,top:ue,right:de,bottom:be,left:Pe,collisionPadding:A}}vs[10]=!0,vs[32]=!0,vs[38]=!0,vs[40]=!0,vs[41]=!0,vs[43]=!0,vs[45]=!0,vs[47]=!0,vs[173]=!0,vs[183]=!0,vs[8203]=!0,vs[8208]=!0,vs[8211]=!0,vs[8231]=!0;var Of=function(u){function c(h,b,x,C){u.call(this,h,b),this.angle=x,void 0!==C&&(this.segment=C)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.clone=function(){return new c(this.x,this.y,this.angle,this.segment)},c}(I);function av(u,c){var h=c.expression;if("constant"===h.kind)return{kind:"constant",layoutSize:h.evaluate(new Ei(u+1))};if("source"===h.kind)return{kind:"source"};for(var b=h.zoomStops,x=h.interpolationType,C=0;C<b.length&&b[C]<=u;)C++;for(var A=C=Math.max(0,C-1);A<b.length&&b[A]<u+1;)A++;A=Math.min(b.length-1,A);var V=b[C],Y=b[A];return"composite"===h.kind?{kind:"composite",minZoom:V,maxZoom:Y,interpolationType:x}:{kind:"camera",minZoom:V,maxZoom:Y,minSize:h.evaluate(new Ei(V)),maxSize:h.evaluate(new Ei(Y)),interpolationType:x}}function xc(u,c,h){var b=c.uSize,x=h.lowerSize;return"source"===u.kind?x/128:"composite"===u.kind?ho(x/128,h.upperSize/128,c.uSizeT):b}function Mf(u,c){var h=0,b=0;if("constant"===u.kind)b=u.layoutSize;else if("source"!==u.kind){var x=u.interpolationType,C=x?ie(bi.interpolationFactor(x,c,u.minZoom,u.maxZoom),0,1):0;"camera"===u.kind?b=ho(u.minSize,u.maxSize,C):h=C}return{uSizeT:h,uSize:b}}_n("Anchor",Of);var N1=Object.freeze({__proto__:null,getSizeData:av,evaluateSizeForFeature:xc,evaluateSizeForZoom:Mf,SIZE_PACK_FACTOR:128});function L1(u,c,h,b,x){if(void 0===c.segment)return!0;for(var C=c,A=c.segment+1,V=0;V>-h/2;){if(--A<0)return!1;V-=u[A].dist(C),C=u[A]}V+=u[A].dist(u[A+1]),A++;for(var Y=[],re=0;V<h/2;){var ue=u[A],de=u[A+1];if(!de)return!1;var be=u[A-1].angleTo(ue)-ue.angleTo(de);for(be=Math.abs((be+3*Math.PI)%(2*Math.PI)-Math.PI),Y.push({distance:V,angleDelta:be}),re+=be;V-Y[0].distance>b;)re-=Y.shift().angleDelta;if(re>x)return!1;A++,V+=ue.dist(de)}return!0}function B1(u){for(var c=0,h=0;h<u.length-1;h++)c+=u[h].dist(u[h+1]);return c}function F1(u,c,h){return u?.6*c*h:0}function z1(u,c){return Math.max(u?u.right-u.left:0,c?c.right-c.left:0)}function zT(u,c,h,b,x,C){for(var A=F1(h,x,C),V=z1(h,b)*C,Y=0,re=B1(u)/2,ue=0;ue<u.length-1;ue++){var de=u[ue],be=u[ue+1],Pe=de.dist(be);if(Y+Pe>re){var Ne=(re-Y)/Pe,Fe=ho(de.x,be.x,Ne),ot=ho(de.y,be.y,Ne),Ye=new Of(Fe,ot,be.angleTo(de),ue);return Ye._round(),!A||L1(u,Ye,V,A,c)?Ye:void 0}Y+=Pe}}function c_(u,c,h,b,x,C,A,V,Y){var re=F1(b,C,A),ue=z1(b,x),de=ue*A,be=0===u[0].x||u[0].x===Y||0===u[0].y||u[0].y===Y;return c-de<c/4&&(c=de+c/4),function Pe(Ne,Fe,ot,Ye,ht,gt,bt,St,zt){for(var nn=gt/2,cn=B1(Ne),Tn=0,hn=Fe-ot,jn=[],pn=0;pn<Ne.length-1;pn++){for(var Er=Ne[pn],Yn=Ne[pn+1],Mn=Er.dist(Yn),Sr=Yn.angleTo(Er);hn+ot<Tn+Mn;){var pr=((hn+=ot)-Tn)/Mn,ii=ho(Er.x,Yn.x,pr),Hn=ho(Er.y,Yn.y,pr);if(ii>=0&&ii<zt&&Hn>=0&&Hn<zt&&hn-nn>=0&&hn+nn<=cn){var ci=new Of(ii,Hn,Sr,pn);ci._round(),Ye&&!L1(Ne,ci,gt,Ye,ht)||jn.push(ci)}}Tn+=Mn}return St||jn.length||bt||(jn=Pe(Ne,Tn/2,ot,Ye,ht,gt,bt,!0,zt)),jn}(u,be?c/2*V%c:(ue/2+2*C)*A*V%c,c,re,h,de,be,!1,Y)}function d_(u,c,h,b,x){for(var C=[],A=0;A<u.length;A++)for(var V=u[A],Y=void 0,re=0;re<V.length-1;re++){var ue=V[re],de=V[re+1];ue.x<c&&de.x<c||(ue.x<c?ue=new I(c,ue.y+(c-ue.x)/(de.x-ue.x)*(de.y-ue.y))._round():de.x<c&&(de=new I(c,ue.y+(c-ue.x)/(de.x-ue.x)*(de.y-ue.y))._round()),ue.y<h&&de.y<h||(ue.y<h?ue=new I(ue.x+(h-ue.y)/(de.y-ue.y)*(de.x-ue.x),h)._round():de.y<h&&(de=new I(ue.x+(h-ue.y)/(de.y-ue.y)*(de.x-ue.x),h)._round()),ue.x>=b&&de.x>=b||(ue.x>=b?ue=new I(b,ue.y+(b-ue.x)/(de.x-ue.x)*(de.y-ue.y))._round():de.x>=b&&(de=new I(b,ue.y+(b-ue.x)/(de.x-ue.x)*(de.y-ue.y))._round()),ue.y>=x&&de.y>=x||(ue.y>=x?ue=new I(ue.x+(x-ue.y)/(de.y-ue.y)*(de.x-ue.x),x)._round():de.y>=x&&(de=new I(ue.x+(x-ue.y)/(de.y-ue.y)*(de.x-ue.x),x)._round()),Y&&ue.equals(Y[Y.length-1])||C.push(Y=[ue]),Y.push(de)))))}return C}function f_(u,c,h,b){var x=[],C=u.image,A=C.pixelRatio,V=C.paddedRect.w-2,Y=C.paddedRect.h-2,re=u.right-u.left,ue=u.bottom-u.top,de=C.stretchX||[[0,V]],be=C.stretchY||[[0,Y]],Pe=function(ii,Hn){return ii+Hn[1]-Hn[0]},Ne=de.reduce(Pe,0),Fe=be.reduce(Pe,0),ot=V-Ne,Ye=Y-Fe,ht=0,gt=Ne,bt=0,St=Fe,zt=0,nn=ot,cn=0,Tn=Ye;if(C.content&&b){var hn=C.content;ht=rm(de,0,hn[0]),bt=rm(be,0,hn[1]),gt=rm(de,hn[0],hn[2]),St=rm(be,hn[1],hn[3]),zt=hn[0]-ht,cn=hn[1]-bt,nn=hn[2]-hn[0]-gt,Tn=hn[3]-hn[1]-St}var jn=function(ii,Hn,ci,mo){var Mo=sv(ii.stretch-ht,gt,re,u.left),To=im(ii.fixed-zt,nn,ii.stretch,Ne),go=sv(Hn.stretch-bt,St,ue,u.top),ko=im(Hn.fixed-cn,Tn,Hn.stretch,Fe),ga=sv(ci.stretch-ht,gt,re,u.left),sa=im(ci.fixed-zt,nn,ci.stretch,Ne),Ga=sv(mo.stretch-bt,St,ue,u.top),va=im(mo.fixed-cn,Tn,mo.stretch,Fe),Va=new I(Mo,go),jo=new I(ga,go),Da=new I(ga,Ga),Wr=new I(Mo,Ga),Vi=new I(To/A,ko/A),di=new I(sa/A,va/A),ai=c*Math.PI/180;if(ai){var ys=Math.sin(ai),Qa=Math.cos(ai),oo=[Qa,-ys,ys,Qa];Va._matMult(oo),jo._matMult(oo),Wr._matMult(oo),Da._matMult(oo)}var Io=ii.stretch+ii.fixed,es=Hn.stretch+Hn.fixed;return{tl:Va,tr:jo,bl:Wr,br:Da,tex:{x:C.paddedRect.x+1+Io,y:C.paddedRect.y+1+es,w:ci.stretch+ci.fixed-Io,h:mo.stretch+mo.fixed-es},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Vi,pixelOffsetBR:di,minFontScaleX:nn/A/re,minFontScaleY:Tn/A/ue,isSDF:h}};if(b&&(C.stretchX||C.stretchY))for(var pn=h_(de,ot,Ne),Er=h_(be,Ye,Fe),Yn=0;Yn<pn.length-1;Yn++)for(var Mn=pn[Yn],Sr=pn[Yn+1],pr=0;pr<Er.length-1;pr++)x.push(jn(Mn,Er[pr],Sr,Er[pr+1]));else x.push(jn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:V+1},{fixed:0,stretch:Y+1}));return x}function rm(u,c,h){for(var b=0,x=0,C=u;x<C.length;x+=1){var A=C[x];b+=Math.max(c,Math.min(h,A[1]))-Math.max(c,Math.min(h,A[0]))}return b}function h_(u,c,h){for(var b=[{fixed:-1,stretch:0}],x=0,C=u;x<C.length;x+=1){var A=C[x],V=A[0],Y=A[1],re=b[b.length-1];b.push({fixed:V-re.stretch,stretch:re.stretch}),b.push({fixed:V-re.stretch,stretch:re.stretch+(Y-V)})}return b.push({fixed:c+1,stretch:h}),b}function sv(u,c,h,b){return u/c*h+b}function im(u,c,h,b){return u-c*h/b}var Id=function(u,c,h,b,x,C,A,V,Y,re){if(this.boxStartIndex=u.length,Y){var ue=C.top,de=C.bottom,be=C.collisionPadding;be&&(ue-=be[1],de+=be[3]);var Pe=de-ue;Pe>0&&(Pe=Math.max(10,Pe),this.circleDiameter=Pe)}else{var Ne=C.top*A-V,Fe=C.bottom*A+V,ot=C.left*A-V,Ye=C.right*A+V,ht=C.collisionPadding;if(ht&&(ot-=ht[0]*A,Ne-=ht[1]*A,Ye+=ht[2]*A,Fe+=ht[3]*A),re){var gt=new I(ot,Ne),bt=new I(Ye,Ne),St=new I(ot,Fe),zt=new I(Ye,Fe),nn=re*Math.PI/180;gt._rotate(nn),bt._rotate(nn),St._rotate(nn),zt._rotate(nn),ot=Math.min(gt.x,bt.x,St.x,zt.x),Ye=Math.max(gt.x,bt.x,St.x,zt.x),Ne=Math.min(gt.y,bt.y,St.y,zt.y),Fe=Math.max(gt.y,bt.y,St.y,zt.y)}u.emplaceBack(c.x,c.y,ot,Ne,Ye,Fe,h,b,x)}this.boxEndIndex=u.length},Pd=function(u,c){if(void 0===u&&(u=[]),void 0===c&&(c=Xl),this.data=u,this.length=this.data.length,this.compare=c,this.length>0)for(var h=(this.length>>1)-1;h>=0;h--)this._down(h)};function Xl(u,c){return u<c?-1:u>c?1:0}function Fh(u,c,h){void 0===c&&(c=1),void 0===h&&(h=!1);for(var b=1/0,x=1/0,C=-1/0,A=-1/0,V=u[0],Y=0;Y<V.length;Y++){var re=V[Y];(!Y||re.x<b)&&(b=re.x),(!Y||re.y<x)&&(x=re.y),(!Y||re.x>C)&&(C=re.x),(!Y||re.y>A)&&(A=re.y)}var ue=Math.min(C-b,A-x),de=ue/2,be=new Pd([],p_);if(0===ue)return new I(b,x);for(var Pe=b;Pe<C;Pe+=ue)for(var Ne=x;Ne<A;Ne+=ue)be.push(new Ad(Pe+de,Ne+de,de,u));for(var Fe=function(ht){for(var gt=0,bt=0,St=0,zt=ht[0],nn=0,cn=zt.length,Tn=cn-1;nn<cn;Tn=nn++){var hn=zt[nn],jn=zt[Tn],pn=hn.x*jn.y-jn.x*hn.y;bt+=(hn.x+jn.x)*pn,St+=(hn.y+jn.y)*pn,gt+=3*pn}return new Ad(bt/gt,St/gt,0,ht)}(u),ot=be.length;be.length;){var Ye=be.pop();(Ye.d>Fe.d||!Fe.d)&&(Fe=Ye,h&&console.log("found best %d after %d probes",Math.round(1e4*Ye.d)/1e4,ot)),Ye.max-Fe.d<=c||(be.push(new Ad(Ye.p.x-(de=Ye.h/2),Ye.p.y-de,de,u)),be.push(new Ad(Ye.p.x+de,Ye.p.y-de,de,u)),be.push(new Ad(Ye.p.x-de,Ye.p.y+de,de,u)),be.push(new Ad(Ye.p.x+de,Ye.p.y+de,de,u)),ot+=4)}return h&&(console.log("num probes: "+ot),console.log("best distance: "+Fe.d)),Fe.p}function p_(u,c){return c.max-u.max}function Ad(u,c,h,b){this.p=new I(u,c),this.h=h,this.d=function(x,C){for(var A=!1,V=1/0,Y=0;Y<C.length;Y++)for(var re=C[Y],ue=0,de=re.length,be=de-1;ue<de;be=ue++){var Pe=re[ue],Ne=re[be];Pe.y>x.y!=Ne.y>x.y&&x.x<(Ne.x-Pe.x)*(x.y-Pe.y)/(Ne.y-Pe.y)+Pe.x&&(A=!A),V=Math.min(V,Kc(x,Pe,Ne))}return(A?1:-1)*Math.sqrt(V)}(this.p,b),this.max=this.d+this.h*Math.SQRT2}Pd.prototype.push=function(u){this.data.push(u),this.length++,this._up(this.length-1)},Pd.prototype.pop=function(){if(0!==this.length){var u=this.data[0],c=this.data.pop();return this.length--,this.length>0&&(this.data[0]=c,this._down(0)),u}},Pd.prototype.peek=function(){return this.data[0]},Pd.prototype._up=function(u){for(var c=this.data,h=this.compare,b=c[u];u>0;){var x=u-1>>1,C=c[x];if(h(b,C)>=0)break;c[u]=C,u=x}c[u]=b},Pd.prototype._down=function(u){for(var c=this.data,h=this.compare,b=this.length>>1,x=c[u];u<b;){var C=1+(u<<1),A=c[C],V=C+1;if(V<this.length&&h(c[V],A)<0&&(C=V,A=c[V]),h(A,x)>=0)break;c[u]=A,u=C}c[u]=x};var om=Number.POSITIVE_INFINITY;function j1(u,c){return c[1]!==om?function(h,b,x){var C=0,A=0;switch(b=Math.abs(b),x=Math.abs(x),h){case"top-right":case"top-left":case"top":A=x-7;break;case"bottom-right":case"bottom-left":case"bottom":A=7-x}switch(h){case"top-right":case"bottom-right":case"right":C=-b;break;case"top-left":case"bottom-left":case"left":C=b}return[C,A]}(u,c[0],c[1]):function(h,b){var x=0,C=0;b<0&&(b=0);var A=b/Math.sqrt(2);switch(h){case"top-right":case"top-left":C=A-7;break;case"bottom-right":case"bottom-left":C=7-A;break;case"bottom":C=7-b;break;case"top":C=b-7}switch(h){case"top-right":case"bottom-right":x=-A;break;case"top-left":case"bottom-left":x=A;break;case"left":x=b;break;case"right":x=-b}return[x,C]}(u,c[0])}function m_(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function U1(u,c,h,b,x,C,A,V,Y,re,ue,de,be,Pe,Ne){var Fe=function(bt,St,zt,nn,cn,Tn,hn,jn){for(var pn=nn.layout.get("text-rotate").evaluate(Tn,{})*Math.PI/180,Er=[],Yn=0,Mn=St.positionedLines;Yn<Mn.length;Yn+=1)for(var Sr=Mn[Yn],pr=0,ii=Sr.positionedGlyphs;pr<ii.length;pr+=1){var Hn=ii[pr];if(Hn.rect){var ci=Hn.rect||{},mo=4,Mo=!0,To=1,go=0,ko=(cn||jn)&&Hn.vertical,ga=Hn.metrics.advance*Hn.scale/2;if(jn&&St.verticalizable&&(go=Sr.lineOffset/2-(Hn.imageName?-(24-Hn.metrics.width*Hn.scale)/2:24*(Hn.scale-1))),Hn.imageName){var sa=hn[Hn.imageName];Mo=sa.sdf,mo=1/(To=sa.pixelRatio)}var Ga=cn?[Hn.x+ga,Hn.y]:[0,0],va=cn?[0,0]:[Hn.x+ga+zt[0],Hn.y+zt[1]-go],Va=[0,0];ko&&(Va=va,va=[0,0]);var jo=(Hn.metrics.left-mo)*Hn.scale-ga+va[0],Da=(-Hn.metrics.top-mo)*Hn.scale+va[1],Wr=jo+ci.w*Hn.scale/To,Vi=Da+ci.h*Hn.scale/To,di=new I(jo,Da),ai=new I(Wr,Da),ys=new I(jo,Vi),Qa=new I(Wr,Vi);if(ko){var oo=new I(-ga,ga- -17),Io=-Math.PI/2,es=12-ga,pi=new I(22-es,-(Hn.imageName?es:0)),Tl=new(Function.prototype.bind.apply(I,[null].concat(Va)));di._rotateAround(Io,oo)._add(pi)._add(Tl),ai._rotateAround(Io,oo)._add(pi)._add(Tl),ys._rotateAround(Io,oo)._add(pi)._add(Tl),Qa._rotateAround(Io,oo)._add(pi)._add(Tl)}if(pn){var iu=Math.sin(pn),al=Math.cos(pn),No=[al,-iu,iu,al];di._matMult(No),ai._matMult(No),ys._matMult(No),Qa._matMult(No)}var Bu=new I(0,0),ou=new I(0,0);Er.push({tl:di,tr:ai,bl:ys,br:Qa,tex:ci,writingMode:St.writingMode,glyphOffset:Ga,sectionIndex:Hn.sectionIndex,isSDF:Mo,pixelOffsetTL:Bu,pixelOffsetBR:ou,minFontScaleX:0,minFontScaleY:0})}}return Er}(0,h,V,x,C,A,b,u.allowVerticalPlacement),ot=u.textSizeData,Ye=null;"source"===ot.kind?(Ye=[128*x.layout.get("text-size").evaluate(A,{})])[0]>32640&&N(u.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===ot.kind&&((Ye=[128*Pe.compositeTextSizes[0].evaluate(A,{},Ne),128*Pe.compositeTextSizes[1].evaluate(A,{},Ne)])[0]>32640||Ye[1]>32640)&&N(u.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),u.addSymbols(u.text,Fe,Ye,V,C,A,re,c,Y.lineStartIndex,Y.lineLength,be,Ne);for(var ht=0,gt=ue;ht<gt.length;ht+=1)de[gt[ht]]=u.text.placedSymbolArray.length-1;return 4*Fe.length}function am(u){for(var c in u)return u[c];return null}function uv(u,c,h,b){var x=u.compareText;if(c in x){for(var C=x[c],A=C.length-1;A>=0;A--)if(b.dist(C[A])<h)return!0}else x[c]=[];return x[c].push(b),!1}var lv=If.VectorTileFeature.types,jT=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function cv(u,c,h,b,x,C,A,V,Y,re,ue,de,be){var Pe=V?Math.min(32640,Math.round(V[0])):0,Ne=V?Math.min(32640,Math.round(V[1])):0;u.emplaceBack(c,h,Math.round(32*b),Math.round(32*x),C,A,(Pe<<1)+(Y?1:0),Ne,16*re,16*ue,256*de,256*be)}function sm(u,c,h){u.emplaceBack(c.x,c.y,h),u.emplaceBack(c.x,c.y,h),u.emplaceBack(c.x,c.y,h),u.emplaceBack(c.x,c.y,h)}function G1(u){for(var c=0,h=u.sections;c<h.length;c+=1)if(mf(h[c].text))return!0;return!1}var kf=function(u){this.layoutVertexArray=new qc,this.indexArray=new tu,this.programConfigurations=u,this.segments=new De,this.dynamicLayoutVertexArray=new Hc,this.opacityVertexArray=new Ch,this.placedSymbolArray=new T};kf.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},kf.prototype.upload=function(u,c,h,b){this.isEmpty()||(h&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Qg.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,kh.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,jT,!0),this.opacityVertexBuffer.itemSize=1),(h||b)&&this.programConfigurations.upload(u))},kf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},_n("SymbolBuffers",kf);var zh=function(u,c,h){this.layoutVertexArray=new u,this.layoutAttributes=c,this.indexArray=new h,this.segments=new De,this.collisionVertexArray=new Th};zh.prototype.upload=function(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,T1.members,!0)},zh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},_n("CollisionBuffers",zh);var Gi=function(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(C){return C.id}),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ms([]),this.placementViewportMatrix=ms([]);var c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=av(this.zoom,c["text-size"]),this.iconSizeData=av(this.zoom,c["icon-size"]);var h=this.layers[0].layout,b=h.get("symbol-sort-key"),x=h.get("symbol-z-order");this.canOverlap=h.get("text-allow-overlap")||h.get("icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==x&&!b.isConstant(),this.sortFeaturesByY=("viewport-y"===x||"auto"===x&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===h.get("symbol-placement")&&(this.writingModes=h.get("text-writing-mode").map(function(C){return $s[C]})),this.stateDependentLayerIds=this.layers.filter(function(C){return C.isStateDependent()}).map(function(C){return C.id}),this.sourceID=u.sourceID};Gi.prototype.createArrays=function(){this.text=new kf(new Ui(this.layers,this.zoom,function(u){return/^text/.test(u)})),this.icon=new kf(new Ui(this.layers,this.zoom,function(u){return/^icon/.test(u)})),this.glyphOffsetArray=new Z,this.lineVertexArray=new se,this.symbolInstances=new U},Gi.prototype.calculateGlyphDependencies=function(u,c,h,b,x){for(var C=0;C<u.length;C++)if(c[u.charCodeAt(C)]=!0,(h||b)&&x){var A=rl[u.charAt(C)];A&&(c[A.charCodeAt(0)]=!0)}},Gi.prototype.populate=function(u,c,h){var b=this.layers[0],x=b.layout,C=x.get("text-font"),A=x.get("text-field"),V=x.get("icon-image"),Y=("constant"!==A.value.kind||A.value.value instanceof fo&&!A.value.value.isEmpty()||A.value.value.toString().length>0)&&("constant"!==C.value.kind||C.value.value.length>0),re="constant"!==V.value.kind||!!V.value.value||Object.keys(V.parameters).length>0,ue=x.get("symbol-sort-key");if(this.features=[],Y||re){for(var de=c.iconDependencies,be=c.glyphDependencies,Pe=c.availableImages,Ne=new Ei(this.zoom),Fe=0,ot=u;Fe<ot.length;Fe+=1){var Ye=ot[Fe],ht=Ye.feature,gt=Ye.id,bt=Ye.index,St=Ye.sourceLayerIndex,zt=b._featureFilter.needGeometry,nn=ia(ht,zt);if(b._featureFilter.filter(Ne,nn,h)){zt||(nn.geometry=Fo(ht));var cn=void 0;if(Y){var Tn=b.getValueAndResolveTokens("text-field",nn,h,Pe),hn=fo.factory(Tn);G1(hn)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Ru()||this.hasRTLText&&yo.isParsed())&&(cn=ev(hn,b,nn))}var jn=void 0;if(re){var pn=b.getValueAndResolveTokens("icon-image",nn,h,Pe);jn=pn instanceof _r?pn:_r.fromString(pn)}if(cn||jn){var Er=this.sortFeaturesByKey?ue.evaluate(nn,{},h):void 0;if(this.features.push({id:gt,text:cn,icon:jn,index:bt,sourceLayerIndex:St,geometry:nn.geometry,properties:ht.properties,type:lv[ht.type],sortKey:Er}),jn&&(de[jn.name]=!0),cn){var Yn=C.evaluate(nn,{},h).join(","),Mn="map"===x.get("text-rotation-alignment")&&"point"!==x.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf($s.vertical)>=0;for(var Sr=0,pr=cn.sections;Sr<pr.length;Sr+=1){var ii=pr[Sr];if(ii.image)de[ii.image.name]=!0;else{var Hn=ff(cn.toString()),ci=ii.fontStack||Yn,mo=be[ci]=be[ci]||{};this.calculateGlyphDependencies(ii.text,mo,Mn,this.allowVerticalPlacement,Hn)}}}}}}"line"===x.get("symbol-placement")&&(this.features=function(Mo){var To={},go={},ko=[],ga=0;function sa(oo){ko.push(Mo[oo]),ga++}function Ga(oo,Io,es){var pi=go[oo];return delete go[oo],go[Io]=pi,ko[pi].geometry[0].pop(),ko[pi].geometry[0]=ko[pi].geometry[0].concat(es[0]),pi}function va(oo,Io,es){var pi=To[Io];return delete To[Io],To[oo]=pi,ko[pi].geometry[0].shift(),ko[pi].geometry[0]=es[0].concat(ko[pi].geometry[0]),pi}function Va(oo,Io,es){var pi=es?Io[0][Io[0].length-1]:Io[0][0];return oo+":"+pi.x+":"+pi.y}for(var jo=0;jo<Mo.length;jo++){var Da=Mo[jo],Wr=Da.geometry,Vi=Da.text?Da.text.toString():null;if(Vi){var di=Va(Vi,Wr),ai=Va(Vi,Wr,!0);if(di in go&&ai in To&&go[di]!==To[ai]){var ys=va(di,ai,Wr),Qa=Ga(di,ai,ko[ys].geometry);delete To[di],delete go[ai],go[Va(Vi,ko[Qa].geometry,!0)]=Qa,ko[ys].geometry=null}else di in go?Ga(di,ai,Wr):ai in To?va(di,ai,Wr):(sa(jo),To[di]=ga-1,go[ai]=ga-1)}else sa(jo)}return ko.filter(function(oo){return oo.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Mo,To){return Mo.sortKey-To.sortKey})}},Gi.prototype.update=function(u,c,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,c,this.layers,h),this.icon.programConfigurations.updatePaintArrays(u,c,this.layers,h))},Gi.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},Gi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Gi.prototype.upload=function(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Gi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Gi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Gi.prototype.addToLineVertexArray=function(u,c){var h=this.lineVertexArray.length;if(void 0!==u.segment){for(var b=u.dist(c[u.segment+1]),x=u.dist(c[u.segment]),C={},A=u.segment+1;A<c.length;A++)C[A]={x:c[A].x,y:c[A].y,tileUnitDistanceFromAnchor:b},A<c.length-1&&(b+=c[A+1].dist(c[A]));for(var V=u.segment||0;V>=0;V--)C[V]={x:c[V].x,y:c[V].y,tileUnitDistanceFromAnchor:x},V>0&&(x+=c[V-1].dist(c[V]));for(var Y=0;Y<c.length;Y++){var re=C[Y];this.lineVertexArray.emplaceBack(re.x,re.y,re.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}},Gi.prototype.addSymbols=function(u,c,h,b,x,C,A,V,Y,re,ue,de){for(var be=u.indexArray,Pe=u.layoutVertexArray,Ne=u.segments.prepareSegment(4*c.length,Pe,be,this.canOverlap?C.sortKey:void 0),Fe=this.glyphOffsetArray.length,ot=Ne.vertexLength,Ye=this.allowVerticalPlacement&&A===$s.vertical?Math.PI/2:0,ht=C.text&&C.text.sections,gt=0;gt<c.length;gt++){var bt=c[gt],St=bt.tl,zt=bt.tr,nn=bt.bl,cn=bt.br,Tn=bt.tex,hn=bt.pixelOffsetTL,jn=bt.pixelOffsetBR,pn=bt.minFontScaleX,Er=bt.minFontScaleY,Yn=bt.glyphOffset,Mn=bt.isSDF,Sr=bt.sectionIndex,pr=Ne.vertexLength,ii=Yn[1];cv(Pe,V.x,V.y,St.x,ii+St.y,Tn.x,Tn.y,h,Mn,hn.x,hn.y,pn,Er),cv(Pe,V.x,V.y,zt.x,ii+zt.y,Tn.x+Tn.w,Tn.y,h,Mn,jn.x,hn.y,pn,Er),cv(Pe,V.x,V.y,nn.x,ii+nn.y,Tn.x,Tn.y+Tn.h,h,Mn,hn.x,jn.y,pn,Er),cv(Pe,V.x,V.y,cn.x,ii+cn.y,Tn.x+Tn.w,Tn.y+Tn.h,h,Mn,jn.x,jn.y,pn,Er),sm(u.dynamicLayoutVertexArray,V,Ye),be.emplaceBack(pr,pr+1,pr+2),be.emplaceBack(pr+1,pr+2,pr+3),Ne.vertexLength+=4,Ne.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Yn[0]),gt!==c.length-1&&Sr===c[gt+1].sectionIndex||u.programConfigurations.populatePaintArrays(Pe.length,C,C.index,{},de,ht&&ht[Sr])}u.placedSymbolArray.emplaceBack(V.x,V.y,Fe,this.glyphOffsetArray.length-Fe,ot,Y,re,V.segment,h?h[0]:0,h?h[1]:0,b[0],b[1],A,0,!1,0,ue)},Gi.prototype._addCollisionDebugVertex=function(u,c,h,b,x,C){return c.emplaceBack(0,0),u.emplaceBack(h.x,h.y,b,x,Math.round(C.x),Math.round(C.y))},Gi.prototype.addCollisionDebugVertices=function(u,c,h,b,x,C,A){var V=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),Y=V.vertexLength,re=x.layoutVertexArray,ue=x.collisionVertexArray,de=A.anchorX,be=A.anchorY;this._addCollisionDebugVertex(re,ue,C,de,be,new I(u,c)),this._addCollisionDebugVertex(re,ue,C,de,be,new I(h,c)),this._addCollisionDebugVertex(re,ue,C,de,be,new I(h,b)),this._addCollisionDebugVertex(re,ue,C,de,be,new I(u,b)),V.vertexLength+=4;var Pe=x.indexArray;Pe.emplaceBack(Y,Y+1),Pe.emplaceBack(Y+1,Y+2),Pe.emplaceBack(Y+2,Y+3),Pe.emplaceBack(Y+3,Y),V.primitiveLength+=4},Gi.prototype.addDebugCollisionBoxes=function(u,c,h,b){for(var x=u;x<c;x++){var C=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(C.x1,C.y1,C.x2,C.y2,b?this.textCollisionBox:this.iconCollisionBox,C.anchorPoint,h)}},Gi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new zh(Wt,r_.members,yc),this.iconCollisionBox=new zh(Wt,r_.members,yc);for(var u=0;u<this.symbolInstances.length;u++){var c=this.symbolInstances.get(u);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}},Gi.prototype._deserializeCollisionBoxesForSymbol=function(u,c,h,b,x,C,A,V,Y){for(var re={},ue=c;ue<h;ue++){var de=u.get(ue);re.textBox={x1:de.x1,y1:de.y1,x2:de.x2,y2:de.y2,anchorPointX:de.anchorPointX,anchorPointY:de.anchorPointY},re.textFeatureIndex=de.featureIndex;break}for(var be=b;be<x;be++){var Pe=u.get(be);re.verticalTextBox={x1:Pe.x1,y1:Pe.y1,x2:Pe.x2,y2:Pe.y2,anchorPointX:Pe.anchorPointX,anchorPointY:Pe.anchorPointY},re.verticalTextFeatureIndex=Pe.featureIndex;break}for(var Ne=C;Ne<A;Ne++){var Fe=u.get(Ne);re.iconBox={x1:Fe.x1,y1:Fe.y1,x2:Fe.x2,y2:Fe.y2,anchorPointX:Fe.anchorPointX,anchorPointY:Fe.anchorPointY},re.iconFeatureIndex=Fe.featureIndex;break}for(var ot=V;ot<Y;ot++){var Ye=u.get(ot);re.verticalIconBox={x1:Ye.x1,y1:Ye.y1,x2:Ye.x2,y2:Ye.y2,anchorPointX:Ye.anchorPointX,anchorPointY:Ye.anchorPointY},re.verticalIconFeatureIndex=Ye.featureIndex;break}return re},Gi.prototype.deserializeCollisionBoxes=function(u){this.collisionArrays=[];for(var c=0;c<this.symbolInstances.length;c++){var h=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}},Gi.prototype.hasTextData=function(){return this.text.segments.get().length>0},Gi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Gi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Gi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Gi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Gi.prototype.addIndicesForPlacedSymbol=function(u,c){for(var h=u.placedSymbolArray.get(c),b=h.vertexStartIndex+4*h.numGlyphs,x=h.vertexStartIndex;x<b;x+=4)u.indexArray.emplaceBack(x,x+1,x+2),u.indexArray.emplaceBack(x+1,x+2,x+3)},Gi.prototype.getSortedSymbolIndexes=function(u){if(this.sortedAngle===u&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var c=Math.sin(u),h=Math.cos(u),b=[],x=[],C=[],A=0;A<this.symbolInstances.length;++A){C.push(A);var V=this.symbolInstances.get(A);b.push(0|Math.round(c*V.anchorX+h*V.anchorY)),x.push(V.featureIndex)}return C.sort(function(Y,re){return b[Y]-b[re]||x[re]-x[Y]}),C},Gi.prototype.addToSortKeyRanges=function(u,c){var h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===c?h.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:u,symbolInstanceEnd:u+1})},Gi.prototype.sortFeatures=function(u){var c=this;if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var h=0,b=this.symbolInstanceIndexes;h<b.length;h+=1){var x=this.symbolInstances.get(b[h]);this.featureSortOrder.push(x.featureIndex),[x.rightJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.leftJustifiedTextSymbolIndex].forEach(function(C,A,V){C>=0&&V.indexOf(C)===A&&c.addIndicesForPlacedSymbol(c.text,C)}),x.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,x.verticalPlacedTextSymbolIndex),x.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.placedIconSymbolIndex),x.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},_n("SymbolBucket",Gi,{omit:["layers","collisionBoxArray","features","compareText"]}),Gi.MAX_GLYPHS=65535,Gi.addDynamicAttributes=sm;var g_=new Pa({"symbol-placement":new bn(ke.layout_symbol["symbol-placement"]),"symbol-spacing":new bn(ke.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new bn(ke.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Zn(ke.layout_symbol["symbol-sort-key"]),"symbol-z-order":new bn(ke.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new bn(ke.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new bn(ke.layout_symbol["icon-ignore-placement"]),"icon-optional":new bn(ke.layout_symbol["icon-optional"]),"icon-rotation-alignment":new bn(ke.layout_symbol["icon-rotation-alignment"]),"icon-size":new Zn(ke.layout_symbol["icon-size"]),"icon-text-fit":new bn(ke.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new bn(ke.layout_symbol["icon-text-fit-padding"]),"icon-image":new Zn(ke.layout_symbol["icon-image"]),"icon-rotate":new Zn(ke.layout_symbol["icon-rotate"]),"icon-padding":new bn(ke.layout_symbol["icon-padding"]),"icon-keep-upright":new bn(ke.layout_symbol["icon-keep-upright"]),"icon-offset":new Zn(ke.layout_symbol["icon-offset"]),"icon-anchor":new Zn(ke.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new bn(ke.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new bn(ke.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new bn(ke.layout_symbol["text-rotation-alignment"]),"text-field":new Zn(ke.layout_symbol["text-field"]),"text-font":new Zn(ke.layout_symbol["text-font"]),"text-size":new Zn(ke.layout_symbol["text-size"]),"text-max-width":new Zn(ke.layout_symbol["text-max-width"]),"text-line-height":new bn(ke.layout_symbol["text-line-height"]),"text-letter-spacing":new Zn(ke.layout_symbol["text-letter-spacing"]),"text-justify":new Zn(ke.layout_symbol["text-justify"]),"text-radial-offset":new Zn(ke.layout_symbol["text-radial-offset"]),"text-variable-anchor":new bn(ke.layout_symbol["text-variable-anchor"]),"text-anchor":new Zn(ke.layout_symbol["text-anchor"]),"text-max-angle":new bn(ke.layout_symbol["text-max-angle"]),"text-writing-mode":new bn(ke.layout_symbol["text-writing-mode"]),"text-rotate":new Zn(ke.layout_symbol["text-rotate"]),"text-padding":new bn(ke.layout_symbol["text-padding"]),"text-keep-upright":new bn(ke.layout_symbol["text-keep-upright"]),"text-transform":new Zn(ke.layout_symbol["text-transform"]),"text-offset":new Zn(ke.layout_symbol["text-offset"]),"text-allow-overlap":new bn(ke.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new bn(ke.layout_symbol["text-ignore-placement"]),"text-optional":new bn(ke.layout_symbol["text-optional"])}),Nf={paint:new Pa({"icon-opacity":new Zn(ke.paint_symbol["icon-opacity"]),"icon-color":new Zn(ke.paint_symbol["icon-color"]),"icon-halo-color":new Zn(ke.paint_symbol["icon-halo-color"]),"icon-halo-width":new Zn(ke.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Zn(ke.paint_symbol["icon-halo-blur"]),"icon-translate":new bn(ke.paint_symbol["icon-translate"]),"icon-translate-anchor":new bn(ke.paint_symbol["icon-translate-anchor"]),"text-opacity":new Zn(ke.paint_symbol["text-opacity"]),"text-color":new Zn(ke.paint_symbol["text-color"],{runtimeType:ir,getOverride:function(u){return u.textColor},hasOverride:function(u){return!!u.textColor}}),"text-halo-color":new Zn(ke.paint_symbol["text-halo-color"]),"text-halo-width":new Zn(ke.paint_symbol["text-halo-width"]),"text-halo-blur":new Zn(ke.paint_symbol["text-halo-blur"]),"text-translate":new bn(ke.paint_symbol["text-translate"]),"text-translate-anchor":new bn(ke.paint_symbol["text-translate-anchor"])}),layout:g_},Lf=function(u){this.type=u.property.overrides?u.property.overrides.runtimeType:In,this.defaultValue=u};Lf.prototype.evaluate=function(u){if(u.formattedSection){var c=this.defaultValue.property.overrides;if(c&&c.hasOverride(u.formattedSection))return c.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default},Lf.prototype.eachChild=function(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)},Lf.prototype.outputDefined=function(){return!1},Lf.prototype.serialize=function(){return null},_n("FormatSectionOverride",Lf,{omit:["defaultValue"]});var dv=function(u){function c(h){u.call(this,h,Nf)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.recalculate=function(h,b){if(u.prototype.recalculate.call(this,h,b),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var x=this.layout.get("text-writing-mode");if(x){for(var C=[],A=0,V=x;A<V.length;A+=1){var Y=V[A];C.indexOf(Y)<0&&C.push(Y)}this.layout._values["text-writing-mode"]=C}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},c.prototype.getValueAndResolveTokens=function(h,b,x,C){var Y,A=this.layout.get(h).evaluate(b,{},x,C),V=this._unevaluatedLayout._values[h];return V.isDataDriven()||Br(V.value)||!A?A:(Y=b.properties,A.replace(/{([^{}]+)}/g,function(ue,de){return de in Y?String(Y[de]):""}))},c.prototype.createBucket=function(h){return new Gi(h)},c.prototype.queryRadius=function(){return 0},c.prototype.queryIntersectsFeature=function(){return!1},c.prototype._setPaintOverrides=function(){for(var h=0,b=Nf.paint.overridableProperties;h<b.length;h+=1){var x=b[h];if(c.hasPaintOverride(this.layout,x)){var C,A=this.paint.get(x),V=new Lf(A),Y=new Wa(V,A.property.specification);C="constant"===A.value.kind||"source"===A.value.kind?new ft("source",Y):new Ot("composite",Y,A.value.zoomStops,A.value._interpolationType),this.paint._values[x]=new ji(A.property,C,A.parameters)}}},c.prototype._handleOverridablePaintPropertyUpdate=function(h,b,x){return!(!this.layout||b.isDataDriven()||x.isDataDriven())&&c.hasPaintOverride(this.layout,h)},c.hasPaintOverride=function(h,b){var x=h.get("text-field"),C=Nf.paint.properties[b],A=!1,V=function(ue){for(var de=0,be=ue;de<be.length;de+=1)if(C.overrides&&C.overrides.hasOverride(be[de]))return void(A=!0)};if("constant"===x.value.kind&&x.value.value instanceof fo)V(x.value.value.sections);else if("source"===x.value.kind){var Y=function(ue){A||(ue instanceof $o&&eo(ue.value)===zn?V(ue.value.sections):ue instanceof Xn?V(ue.sections):ue.eachChild(Y))},re=x.value;re._styleExpression&&Y(re._styleExpression.expression)}return A},c}(Ro),V1={paint:new Pa({"background-color":new bn(ke.paint_background["background-color"]),"background-pattern":new vu(ke.paint_background["background-pattern"]),"background-opacity":new bn(ke.paint_background["background-opacity"])})},Ua=function(u){function c(h){u.call(this,h,V1)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c}(Ro),q1={paint:new Pa({"raster-opacity":new bn(ke.paint_raster["raster-opacity"]),"raster-hue-rotate":new bn(ke.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new bn(ke.paint_raster["raster-brightness-min"]),"raster-brightness-max":new bn(ke.paint_raster["raster-brightness-max"]),"raster-saturation":new bn(ke.paint_raster["raster-saturation"]),"raster-contrast":new bn(ke.paint_raster["raster-contrast"]),"raster-resampling":new bn(ke.paint_raster["raster-resampling"]),"raster-fade-duration":new bn(ke.paint_raster["raster-fade-duration"])})},H1=function(u){function c(h){u.call(this,h,q1)}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c}(Ro),fv=function(u){function c(h){u.call(this,h,{}),this.implementation=h}return u&&(c.__proto__=u),(c.prototype=Object.create(u&&u.prototype)).constructor=c,c.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},c.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},c.prototype.recalculate=function(){},c.prototype.updateTransitions=function(){},c.prototype.hasTransition=function(){},c.prototype.serialize=function(){},c.prototype.onAdd=function(h){this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},c.prototype.onRemove=function(h){this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},c}(Ro),v_={circle:Zc,heatmap:Ah,hillshade:Wy,fill:y1,"fill-extrusion":LT,line:n_,symbol:dv,background:Ua,raster:H1},y_=M.HTMLImageElement,__=M.HTMLCanvasElement,b_=M.HTMLVideoElement,w_=M.ImageData,um=M.ImageBitmap,Bf=function(u,c,h,b){this.context=u,this.format=h,this.texture=u.gl.createTexture(),this.update(c,b)};Bf.prototype.update=function(u,c,h){var b=u.width,x=u.height,C=!(this.size&&this.size[0]===b&&this.size[1]===x||h),A=this.context,V=A.gl;if(this.useMipmap=Boolean(c&&c.useMipmap),V.bindTexture(V.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===V.RGBA&&(!c||!1!==c.premultiply)),C)this.size=[b,x],u instanceof y_||u instanceof __||u instanceof b_||u instanceof w_||um&&u instanceof um?V.texImage2D(V.TEXTURE_2D,0,this.format,this.format,V.UNSIGNED_BYTE,u):V.texImage2D(V.TEXTURE_2D,0,this.format,b,x,0,this.format,V.UNSIGNED_BYTE,u.data);else{var Y=h||{x:0,y:0},re=Y.x,ue=Y.y;u instanceof y_||u instanceof __||u instanceof b_||u instanceof w_||um&&u instanceof um?V.texSubImage2D(V.TEXTURE_2D,0,re,ue,V.RGBA,V.UNSIGNED_BYTE,u):V.texSubImage2D(V.TEXTURE_2D,0,re,ue,b,x,V.RGBA,V.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&V.generateMipmap(V.TEXTURE_2D)},Bf.prototype.bind=function(u,c,h){var b=this.context.gl;b.bindTexture(b.TEXTURE_2D,this.texture),h!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=b.LINEAR),u!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,u),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,h||u),this.filter=u),c!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,c),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,c),this.wrap=c)},Bf.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Bf.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var x_=function(u){var c=this;this._callback=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){c._triggered=!1,c._callback()})};x_.prototype.trigger=function(){var u=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){u._triggered=!1,u._callback()},0))},x_.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Wl=function(u,c,h){this.target=u,this.parent=c,this.mapId=h,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},pe(["receive","process"],this),this.invoker=new x_(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ee()?u:M};function lm(u,c,h){var b=2*Math.PI*6378137/256/Math.pow(2,h);return[u*b-2*Math.PI*6378137/2,c*b-2*Math.PI*6378137/2]}Wl.prototype.send=function(u,c,h,b,x){var C=this;void 0===x&&(x=!1);var A=Math.round(1e18*Math.random()).toString(36).substring(0,10);h&&(this.callbacks[A]=h);var V=Je(this.globalScope)?void 0:[];return this.target.postMessage({id:A,type:u,hasCallback:!!h,targetMapId:b,mustQueue:x,sourceMapId:this.mapId,data:ha(c,V)},V),{cancel:function(){h&&delete C.callbacks[A],C.target.postMessage({id:A,type:"<cancel>",targetMapId:b,sourceMapId:C.mapId})}}},Wl.prototype.receive=function(u){var c=u.data,h=c.id;if(h&&(!c.targetMapId||this.mapId===c.targetMapId))if("<cancel>"===c.type){delete this.tasks[h];var b=this.cancelCallbacks[h];delete this.cancelCallbacks[h],b&&b()}else ee()||c.mustQueue?(this.tasks[h]=c,this.taskQueue.push(h),this.invoker.trigger()):this.processTask(h,c)},Wl.prototype.process=function(){if(this.taskQueue.length){var u=this.taskQueue.shift(),c=this.tasks[u];delete this.tasks[u],this.taskQueue.length&&this.invoker.trigger(),c&&this.processTask(u,c)}},Wl.prototype.processTask=function(u,c){var h=this;if("<response>"===c.type){var b=this.callbacks[u];delete this.callbacks[u],b&&(c.error?b(vd(c.error)):b(null,vd(c.data)))}else{var x=!1,C=Je(this.globalScope)?void 0:[],A=c.hasCallback?function(ue,de){x=!0,delete h.cancelCallbacks[u],h.target.postMessage({id:u,type:"<response>",sourceMapId:h.mapId,error:ue?ha(ue):null,data:ha(de,C)},C)}:function(ue){x=!0},V=null,Y=vd(c.data);if(this.parent[c.type])V=this.parent[c.type](c.sourceMapId,Y,A);else if(this.parent.getWorkerSource){var re=c.type.split(".");V=this.parent.getWorkerSource(c.sourceMapId,re[0],Y.source)[re[1]](Y,A)}else A(new Error("Could not find function "+c.type));!x&&V&&V.cancel&&(this.cancelCallbacks[u]=V.cancel)}},Wl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var oa=function(u,c){u&&(c?this.setSouthWest(u).setNorthEast(c):4===u.length?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1]))};oa.prototype.setNorthEast=function(u){return this._ne=u instanceof io?new io(u.lng,u.lat):io.convert(u),this},oa.prototype.setSouthWest=function(u){return this._sw=u instanceof io?new io(u.lng,u.lat):io.convert(u),this},oa.prototype.extend=function(u){var c,h,b=this._sw,x=this._ne;if(u instanceof io)c=u,h=u;else{if(!(u instanceof oa))return Array.isArray(u)?4===u.length||u.every(Array.isArray)?this.extend(oa.convert(u)):this.extend(io.convert(u)):this;if(h=u._ne,!(c=u._sw)||!h)return this}return b||x?(b.lng=Math.min(c.lng,b.lng),b.lat=Math.min(c.lat,b.lat),x.lng=Math.max(h.lng,x.lng),x.lat=Math.max(h.lat,x.lat)):(this._sw=new io(c.lng,c.lat),this._ne=new io(h.lng,h.lat)),this},oa.prototype.getCenter=function(){return new io((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},oa.prototype.getSouthWest=function(){return this._sw},oa.prototype.getNorthEast=function(){return this._ne},oa.prototype.getNorthWest=function(){return new io(this.getWest(),this.getNorth())},oa.prototype.getSouthEast=function(){return new io(this.getEast(),this.getSouth())},oa.prototype.getWest=function(){return this._sw.lng},oa.prototype.getSouth=function(){return this._sw.lat},oa.prototype.getEast=function(){return this._ne.lng},oa.prototype.getNorth=function(){return this._ne.lat},oa.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},oa.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},oa.prototype.isEmpty=function(){return!(this._sw&&this._ne)},oa.prototype.contains=function(u){var c=io.convert(u),h=c.lng,b=c.lat,x=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(x=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=b&&b<=this._ne.lat&&x},oa.convert=function(u){return!u||u instanceof oa?u:new oa(u)};var io=function(u,c){if(isNaN(u)||isNaN(c))throw new Error("Invalid LngLat object: ("+u+", "+c+")");if(this.lng=+u,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};io.prototype.wrap=function(){return new io(Q(this.lng,-180,180),this.lat)},io.prototype.toArray=function(){return[this.lng,this.lat]},io.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},io.prototype.distanceTo=function(u){var c=Math.PI/180,h=this.lat*c,b=u.lat*c,x=Math.sin(h)*Math.sin(b)+Math.cos(h)*Math.cos(b)*Math.cos((u.lng-this.lng)*c);return 6371008.8*Math.acos(Math.min(x,1))},io.prototype.toBounds=function(u){void 0===u&&(u=0);var c=360*u/40075017,h=c/Math.cos(Math.PI/180*this.lat);return new oa(new io(this.lng-h,this.lat-c),new io(this.lng+h,this.lat+c))},io.convert=function(u){if(u instanceof io)return u;if(Array.isArray(u)&&(2===u.length||3===u.length))return new io(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&"object"==typeof u&&null!==u)return new io(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Rd=2*Math.PI*6371008.8;function E_(u){return Rd*Math.cos(u*Math.PI/180)}function S_(u){return(180+u)/360}function C_(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function hv(u,c){return u/E_(c)}function pv(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}var Dd=function(u,c,h){void 0===h&&(h=0),this.x=+u,this.y=+c,this.z=+h};Dd.fromLngLat=function(u,c){void 0===c&&(c=0);var h=io.convert(u);return new Dd(S_(h.lng),C_(h.lat),hv(c,h.lat))},Dd.prototype.toLngLat=function(){return new io(360*this.x-180,pv(this.y))},Dd.prototype.toAltitude=function(){return this.z*E_(pv(this.y))},Dd.prototype.meterInMercatorCoordinateUnits=function(){return 1/Rd*(u=pv(this.y),1/Math.cos(u*Math.PI/180));var u};var Od=function(u,c,h){this.z=u,this.x=c,this.y=h,this.key=jh(0,u,u,c,h)};Od.prototype.equals=function(u){return this.z===u.z&&this.x===u.x&&this.y===u.y},Od.prototype.url=function(u,c){var h,b,x,C,A,V=(b=this.y,x=this.z,C=lm(256*(h=this.x),256*(b=Math.pow(2,x)-b-1),x),A=lm(256*(h+1),256*(b+1),x),C[0]+","+C[1]+","+A[0]+","+A[1]),Y=function(re,ue,de){for(var be,Pe="",Ne=re;Ne>0;Ne--)Pe+=(ue&(be=1<<Ne-1)?1:0)+(de&be?2:0);return Pe}(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===c?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",Y).replace("{bbox-epsg-3857}",V)},Od.prototype.getTilePoint=function(u){var c=Math.pow(2,this.z);return new I(8192*(u.x*c-this.x),8192*(u.y*c-this.y))},Od.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var T_=function(u,c){this.wrap=u,this.canonical=c,this.key=jh(u,c.z,c.z,c.x,c.y)},zo=function(u,c,h,b,x){this.overscaledZ=u,this.wrap=c,this.canonical=new Od(h,+b,+x),this.key=jh(c,u,h,b,x)};function jh(u,c,h,b,x){(u*=2)<0&&(u=-1*u-1);var C=1<<h;return(C*C*u+C*x+b).toString(36)+h.toString(36)+c.toString(36)}zo.prototype.equals=function(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)},zo.prototype.scaledTo=function(u){var c=this.canonical.z-u;return u>this.canonical.z?new zo(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new zo(u,this.wrap,u,this.canonical.x>>c,this.canonical.y>>c)},zo.prototype.calculateScaledKey=function(u,c){var h=this.canonical.z-u;return u>this.canonical.z?jh(this.wrap*+c,u,this.canonical.z,this.canonical.x,this.canonical.y):jh(this.wrap*+c,u,u,this.canonical.x>>h,this.canonical.y>>h)},zo.prototype.isChildOf=function(u){if(u.wrap!==this.wrap)return!1;var c=this.canonical.z-u.canonical.z;return 0===u.overscaledZ||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>c&&u.canonical.y===this.canonical.y>>c},zo.prototype.children=function(u){if(this.overscaledZ>=u)return[new zo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var c=this.canonical.z+1,h=2*this.canonical.x,b=2*this.canonical.y;return[new zo(c,this.wrap,c,h,b),new zo(c,this.wrap,c,h+1,b),new zo(c,this.wrap,c,h,b+1),new zo(c,this.wrap,c,h+1,b+1)]},zo.prototype.isLessThan=function(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))},zo.prototype.wrapped=function(){return new zo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},zo.prototype.unwrapTo=function(u){return new zo(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)},zo.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},zo.prototype.toUnwrapped=function(){return new T_(this.wrap,this.canonical)},zo.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},zo.prototype.getTilePoint=function(u){return this.canonical.getTilePoint(new Dd(u.x-this.wrap,u.y))},_n("CanonicalTileID",Od),_n("OverscaledTileID",zo,{omit:["posMatrix"]});var Ec=function(u,c,h){if(this.uid=u,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(h&&"mapbox"!==h&&"terrarium"!==h)return N('"'+h+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=c.height;var b=this.dim=c.height-2;this.data=new Uint32Array(c.data.buffer),this.encoding=h||"mapbox";for(var x=0;x<b;x++)this.data[this._idx(-1,x)]=this.data[this._idx(0,x)],this.data[this._idx(b,x)]=this.data[this._idx(b-1,x)],this.data[this._idx(x,-1)]=this.data[this._idx(x,0)],this.data[this._idx(x,b)]=this.data[this._idx(x,b-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(b,-1)]=this.data[this._idx(b-1,0)],this.data[this._idx(-1,b)]=this.data[this._idx(0,b-1)],this.data[this._idx(b,b)]=this.data[this._idx(b-1,b-1)]};Ec.prototype.get=function(u,c){var h=new Uint8Array(this.data.buffer),b=4*this._idx(u,c);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(h[b],h[b+1],h[b+2])},Ec.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Ec.prototype._idx=function(u,c){if(u<-1||u>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(u+1)},Ec.prototype._unpackMapbox=function(u,c,h){return(256*u*256+256*c+h)/10-1e4},Ec.prototype._unpackTerrarium=function(u,c,h){return 256*u+c+h/256-32768},Ec.prototype.getPixels=function(){return new Os({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Ec.prototype.backfillBorder=function(u,c,h){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");var b=c*this.dim,x=c*this.dim+this.dim,C=h*this.dim,A=h*this.dim+this.dim;switch(c){case-1:b=x-1;break;case 1:x=b+1}switch(h){case-1:C=A-1;break;case 1:A=C+1}for(var V=-c*this.dim,Y=-h*this.dim,re=C;re<A;re++)for(var ue=b;ue<x;ue++)this.data[this._idx(ue,re)]=u.data[this._idx(ue+V,re+Y)]},_n("DEMData",Ec);var cm=function(u){this._stringToNumber={},this._numberToString=[];for(var c=0;c<u.length;c++){var h=u[c];this._stringToNumber[h]=c,this._numberToString[c]=h}};cm.prototype.encode=function(u){return this._stringToNumber[u]},cm.prototype.decode=function(u){return this._numberToString[u]};var Uh=function(u,c,h,b,x){this.type="Feature",this._vectorTileFeature=u,u._z=c,u._x=h,u._y=b,this.properties=u.properties,this.id=x},mv={geometry:{configurable:!0}};mv.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},mv.geometry.set=function(u){this._geometry=u},Uh.prototype.toJSON=function(){var u={geometry:this.geometry};for(var c in this)"_geometry"!==c&&"_vectorTileFeature"!==c&&(u[c]=this[c]);return u},Object.defineProperties(Uh.prototype,mv);var Ff=function(){this.state={},this.stateChanges={},this.deletedStates={}};Ff.prototype.updateState=function(u,c,h){var b=String(c);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][b]=this.stateChanges[u][b]||{},ae(this.stateChanges[u][b],h),null===this.deletedStates[u])for(var x in this.deletedStates[u]={},this.state[u])x!==b&&(this.deletedStates[u][x]=null);else if(this.deletedStates[u]&&null===this.deletedStates[u][b])for(var C in this.deletedStates[u][b]={},this.state[u][b])h[C]||(this.deletedStates[u][b][C]=null);else for(var A in h)this.deletedStates[u]&&this.deletedStates[u][b]&&null===this.deletedStates[u][b][A]&&delete this.deletedStates[u][b][A]},Ff.prototype.removeFeatureState=function(u,c,h){if(null!==this.deletedStates[u]){var b=String(c);if(this.deletedStates[u]=this.deletedStates[u]||{},h&&void 0!==c)null!==this.deletedStates[u][b]&&(this.deletedStates[u][b]=this.deletedStates[u][b]||{},this.deletedStates[u][b][h]=null);else if(void 0!==c)if(this.stateChanges[u]&&this.stateChanges[u][b])for(h in this.deletedStates[u][b]={},this.stateChanges[u][b])this.deletedStates[u][b][h]=null;else this.deletedStates[u][b]=null;else this.deletedStates[u]=null}},Ff.prototype.getState=function(u,c){var h=String(c),b=ae({},(this.state[u]||{})[h],(this.stateChanges[u]||{})[h]);if(null===this.deletedStates[u])return{};if(this.deletedStates[u]){var x=this.deletedStates[u][c];if(null===x)return{};for(var C in x)delete b[C]}return b},Ff.prototype.initializeTileState=function(u,c){u.setFeatureState(this.state,c)},Ff.prototype.coalesceChanges=function(u,c){var h={};for(var b in this.stateChanges){this.state[b]=this.state[b]||{};var x={};for(var C in this.stateChanges[b])this.state[b][C]||(this.state[b][C]={}),ae(this.state[b][C],this.stateChanges[b][C]),x[C]=this.state[b][C];h[b]=x}for(var A in this.deletedStates){this.state[A]=this.state[A]||{};var V={};if(null===this.deletedStates[A])for(var Y in this.state[A])V[Y]={},this.state[A][Y]={};else for(var re in this.deletedStates[A]){if(null===this.deletedStates[A][re])this.state[A][re]={};else for(var ue=0,de=Object.keys(this.deletedStates[A][re]);ue<de.length;ue+=1)delete this.state[A][re][de[ue]];V[re]=this.state[A][re]}h[A]=h[A]||{},ae(h[A],V)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(h).length)for(var be in u)u[be].setFeatureState(h,c)};var aa=function(u,c){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new Ia(8192,16,0),this.grid3D=new Ia(8192,16,0),this.featureIndexArray=new Re,this.promoteId=c};function dm(u,c,h,b,x){return qe(u,function(C,A){var V=c instanceof mc?c.get(A):null;return V&&V.evaluate?V.evaluate(h,b,x):V})}function gv(u){for(var c=1/0,h=1/0,b=-1/0,x=-1/0,C=0,A=u;C<A.length;C+=1){var V=A[C];c=Math.min(c,V.x),h=Math.min(h,V.y),b=Math.max(b,V.x),x=Math.max(x,V.y)}return{minX:c,minY:h,maxX:b,maxY:x}}function vv(u,c){return c-u}aa.prototype.insert=function(u,c,h,b,x,C){var A=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,b,x);for(var V=C?this.grid3D:this.grid,Y=0;Y<c.length;Y++){for(var re=c[Y],ue=[1/0,1/0,-1/0,-1/0],de=0;de<re.length;de++){var be=re[de];ue[0]=Math.min(ue[0],be.x),ue[1]=Math.min(ue[1],be.y),ue[2]=Math.max(ue[2],be.x),ue[3]=Math.max(ue[3],be.y)}ue[0]<8192&&ue[1]<8192&&ue[2]>=0&&ue[3]>=0&&V.insert(A,ue[0],ue[1],ue[2],ue[3])}},aa.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new If.VectorTile(new Zp(this.rawTileData)).layers,this.sourceLayerCoder=new cm(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},aa.prototype.query=function(u,c,h,b){var x=this;this.loadVTLayers();for(var C=u.params||{},A=8192/u.tileSize/u.scale,V=Ja(C.filter),Y=u.queryGeometry,re=u.queryPadding*A,ue=gv(Y),de=this.grid.query(ue.minX-re,ue.minY-re,ue.maxX+re,ue.maxY+re),be=gv(u.cameraQueryGeometry),Ne=0,Fe=this.grid3D.query(be.minX-re,be.minY-re,be.maxX+re,be.maxY+re,function(bt,St,zt,nn){return function(cn,Tn,hn,jn,pn){for(var Er=0,Yn=cn;Er<Yn.length;Er+=1){var Mn=Yn[Er];if(Tn<=Mn.x&&hn<=Mn.y&&jn>=Mn.x&&pn>=Mn.y)return!0}var Sr=[new I(Tn,hn),new I(Tn,pn),new I(jn,pn),new I(jn,hn)];if(cn.length>2)for(var pr=0,ii=Sr;pr<ii.length;pr+=1)if(Ds(cn,ii[pr]))return!0;for(var Hn=0;Hn<cn.length-1;Hn++)if(Xc(cn[Hn],cn[Hn+1],Sr))return!0;return!1}(u.cameraQueryGeometry,bt-re,St-re,zt+re,nn+re)});Ne<Fe.length;Ne+=1)de.push(Fe[Ne]);de.sort(vv);for(var ot,Ye={},ht=function(bt){var St=de[bt];if(St!==ot){ot=St;var zt=x.featureIndexArray.get(St),nn=null;x.loadMatchingFeature(Ye,zt.bucketIndex,zt.sourceLayerIndex,zt.featureIndex,V,C.layers,C.availableImages,c,h,b,function(cn,Tn,hn){return nn||(nn=Fo(cn)),Tn.queryIntersectsFeature(Y,cn,hn,nn,x.z,u.transform,A,u.pixelPosMatrix)})}},gt=0;gt<de.length;gt++)ht(gt);return Ye},aa.prototype.loadMatchingFeature=function(u,c,h,b,x,C,A,V,Y,re,ue){var de=this.bucketLayerIDs[c];if(!C||function(cn,Tn){for(var hn=0;hn<cn.length;hn++)if(Tn.indexOf(cn[hn])>=0)return!0;return!1}(C,de)){var be=this.sourceLayerCoder.decode(h),Pe=this.vtLayers[be].feature(b);if(x.needGeometry){var Ne=ia(Pe,!0);if(!x.filter(new Ei(this.tileID.overscaledZ),Ne,this.tileID.canonical))return}else if(!x.filter(new Ei(this.tileID.overscaledZ),Pe))return;for(var Fe=this.getId(Pe,be),ot=0;ot<de.length;ot++){var Ye=de[ot];if(!(C&&C.indexOf(Ye)<0)){var ht=V[Ye];if(ht){var gt={};void 0!==Fe&&re&&(gt=re.getState(ht.sourceLayer||"_geojsonTileLayer",Fe));var bt=ae({},Y[Ye]);bt.paint=dm(bt.paint,ht.paint,Pe,gt,A),bt.layout=dm(bt.layout,ht.layout,Pe,gt,A);var St=!ue||ue(Pe,ht,gt);if(St){var zt=new Uh(Pe,this.z,this.x,this.y,Fe);zt.layer=bt;var nn=u[Ye];void 0===nn&&(nn=u[Ye]=[]),nn.push({featureIndex:b,feature:zt,intersectionZ:St})}}}}}},aa.prototype.lookupSymbolFeatures=function(u,c,h,b,x,C,A,V){var Y={};this.loadVTLayers();for(var re=Ja(x),ue=0,de=u;ue<de.length;ue+=1)this.loadMatchingFeature(Y,h,b,de[ue],re,C,A,V,c);return Y},aa.prototype.hasLayer=function(u){for(var c=0,h=this.bucketLayerIDs;c<h.length;c+=1)for(var b=0,x=h[c];b<x.length;b+=1)if(u===x[b])return!0;return!1},aa.prototype.getId=function(u,c){var h=u.id;return this.promoteId&&"boolean"==typeof(h=u.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[c]])&&(h=Number(h)),h},_n("FeatureIndex",aa,{omit:["rawTileData","sourceLayerCoder"]});var Oi=function(u,c){this.tileID=u,this.uid=we(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Oi.prototype.registerFadeDuration=function(u){var c=u+this.timeAdded;c<kn.now()||this.fadeEndTime&&c<this.fadeEndTime||(this.fadeEndTime=c)},Oi.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Oi.prototype.loadVectorData=function(u,c,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){for(var b in u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=function(re,ue){var de={};if(!ue)return de;for(var be=function(){var Fe=Ne[Pe],ot=Fe.layerIds.map(function(gt){return ue.getLayer(gt)}).filter(Boolean);if(0!==ot.length){Fe.layers=ot,Fe.stateDependentLayerIds&&(Fe.stateDependentLayers=Fe.stateDependentLayerIds.map(function(gt){return ot.filter(function(bt){return bt.id===gt})[0]}));for(var Ye=0,ht=ot;Ye<ht.length;Ye+=1)de[ht[Ye].id]=Fe}},Pe=0,Ne=re;Pe<Ne.length;Pe+=1)be();return de}(u.buckets,c.style),this.hasSymbolBuckets=!1,this.buckets){var x=this.buckets[b];if(x instanceof Gi){if(this.hasSymbolBuckets=!0,!h)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var C in this.buckets){var A=this.buckets[C];if(A instanceof Gi&&A.hasRTLText){this.hasRTLText=!0,yo.isLoading()||yo.isLoaded()||"deferred"!==Ru()||vf();break}}for(var V in this.queryPadding=0,this.buckets){var Y=this.buckets[V];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(V).queryRadius(Y))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new g},Oi.prototype.unloadVectorData=function(){for(var u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Oi.prototype.getBucket=function(u){return this.buckets[u.id]},Oi.prototype.upload=function(u){for(var c in this.buckets){var h=this.buckets[c];h.uploadPending()&&h.upload(u)}var b=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Bf(u,this.imageAtlas.image,b.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Bf(u,this.glyphAtlasImage,b.ALPHA),this.glyphAtlasImage=null)},Oi.prototype.prepare=function(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)},Oi.prototype.queryRenderedFeatures=function(u,c,h,b,x,C,A,V,Y,re){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:b,cameraQueryGeometry:x,scale:C,tileSize:this.tileSize,pixelPosMatrix:re,transform:V,params:A,queryPadding:this.queryPadding*Y},u,c,h):{}},Oi.prototype.querySourceFeatures=function(u,c){var h=this.latestFeatureIndex;if(h&&h.rawTileData){var b=h.loadVTLayers(),x=c?c.sourceLayer:"",C=b._geojsonTileLayer||b[x];if(C)for(var A=Ja(c&&c.filter),V=this.tileID.canonical,Y=V.z,re=V.x,ue=V.y,de={z:Y,x:re,y:ue},be=0;be<C.length;be++){var Pe=C.feature(be);if(A.needGeometry){var Ne=ia(Pe,!0);if(!A.filter(new Ei(this.tileID.overscaledZ),Ne,this.tileID.canonical))continue}else if(!A.filter(new Ei(this.tileID.overscaledZ),Pe))continue;var Fe=h.getId(Pe,x),ot=new Uh(Pe,Y,re,ue,Fe);ot.tile=de,u.push(ot)}}},Oi.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Oi.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Oi.prototype.setExpiryData=function(u){var c=this.expirationTime;if(u.cacheControl){var h=W(u.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){var b=Date.now(),x=!1;if(this.expirationTime>b)x=!1;else if(c)if(this.expirationTime<c)x=!0;else{var C=this.expirationTime-c;C?this.expirationTime=b+Math.max(C,3e4):x=!0}else x=!0;x?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Oi.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Oi.prototype.setFeatureState=function(u,c){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(u).length){var h=this.latestFeatureIndex.loadVTLayers();for(var b in this.buckets)if(c.style.hasLayer(b)){var x=this.buckets[b],C=x.layers[0].sourceLayer||"_geojsonTileLayer",A=h[C],V=u[C];if(A&&V&&0!==Object.keys(V).length){x.update(V,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});var Y=c&&c.style&&c.style.getLayer(b);Y&&(this.queryPadding=Math.max(this.queryPadding,Y.queryRadius(x)))}}}},Oi.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Oi.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<kn.now()},Oi.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Oi.prototype.setHoldDuration=function(u){this.symbolFadeHoldUntil=kn.now()+u},Oi.prototype.setDependencies=function(u,c){for(var h={},b=0,x=c;b<x.length;b+=1)h[x[b]]=!0;this.dependencies[u]=h},Oi.prototype.hasDependency=function(u,c){for(var h=0,b=u;h<b.length;h+=1){var x=this.dependencies[b[h]];if(x)for(var C=0,A=c;C<A.length;C+=1)if(x[A[C]])return!0}return!1};var ol=M.performance,fm=function(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},ol.mark(this._marks.start)};fm.prototype.finish=function(){ol.mark(this._marks.end);var u=ol.getEntriesByName(this._marks.measure);return 0===u.length&&(ol.measure(this._marks.measure,this._marks.start,this._marks.end),u=ol.getEntriesByName(this._marks.measure),ol.clearMarks(this._marks.start),ol.clearMarks(this._marks.end),ol.clearMeasures(this._marks.measure)),u},v.Actor=Wl,v.AlphaImage=Yc,v.CanonicalTileID=Od,v.CollisionBoxArray=g,v.Color=dr,v.DEMData=Ec,v.DataConstantProperty=bn,v.DictionaryCoder=cm,v.EXTENT=8192,v.ErrorEvent=st,v.EvaluationParameters=Ei,v.Event=it,v.Evented=nt,v.FeatureIndex=aa,v.FillBucket=ru,v.FillExtrusionBucket=Sl,v.ImageAtlas=nd,v.ImagePosition=Bh,v.LineBucket=Ra,v.LngLat=io,v.LngLatBounds=oa,v.MercatorCoordinate=Dd,v.ONE_EM=24,v.OverscaledTileID=zo,v.Point=I,v.Point$1=I,v.Properties=Pa,v.Protobuf=Zp,v.RGBAImage=Os,v.RequestManager=er,v.RequestPerformance=fm,v.ResourceType=ml,v.SegmentVector=De,v.SourceFeatureState=Ff,v.StructArrayLayout1ui2=Ih,v.StructArrayLayout2f1f2i16=Si,v.StructArrayLayout2i4=gc,v.StructArrayLayout3ui6=tu,v.StructArrayLayout4i8=fr,v.SymbolBucket=Gi,v.Texture=Bf,v.Tile=Oi,v.Transitionable=Vs,v.Uniform1f=Yt,v.Uniform1i=rn,v.Uniform2f=on,v.Uniform3f=Ln,v.Uniform4f=yn,v.UniformColor=qn,v.UniformMatrix4f=En,v.UnwrappedTileID=T_,v.ValidationError=Xe,v.WritingMode=$s,v.ZoomHistory=ra,v.add=function(u,c,h){return u[0]=c[0]+h[0],u[1]=c[1]+h[1],u[2]=c[2]+h[2],u},v.addDynamicAttributes=sm,v.asyncAll=function(u,c,h){if(!u.length)return h(null,[]);var b=u.length,x=new Array(u.length),C=null;u.forEach(function(A,V){c(A,function(Y,re){Y&&(C=Y),x[V]=re,0==--b&&h(C,x)})})},v.bezier=K,v.bindAll=pe,v.browser=kn,v.cacheEntryPossiblyAdded=function(u){++xo>ni&&(u.getActor().send("enforceCacheSizeLimit",ei),xo=0)},v.clamp=ie,v.clearTileCache=function(u){var c=M.caches.delete("mapbox-tiles");u&&c.catch(u).then(function(){return u()})},v.clipLine=d_,v.clone=function(u){var c=new Co(16);return c[0]=u[0],c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=u[6],c[7]=u[7],c[8]=u[8],c[9]=u[9],c[10]=u[10],c[11]=u[11],c[12]=u[12],c[13]=u[13],c[14]=u[14],c[15]=u[15],c},v.clone$1=ze,v.clone$2=function(u){var c=new Co(3);return c[0]=u[0],c[1]=u[1],c[2]=u[2],c},v.collisionCircleLayout=I1,v.config=Nt,v.create=function(){var u=new Co(16);return Co!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},v.create$1=function(){var u=new Co(9);return Co!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u},v.create$2=function(){var u=new Co(4);return Co!=Float32Array&&(u[1]=0,u[2]=0),u[0]=1,u[3]=1,u},v.createCommonjsModule=G,v.createExpression=yl,v.createLayout=_o,v.createStyleLayer=function(u){return"custom"===u.type?new fv(u):new v_[u.type](u)},v.cross=function(u,c,h){var b=c[0],x=c[1],C=c[2],A=h[0],V=h[1],Y=h[2];return u[0]=x*Y-C*V,u[1]=C*A-b*Y,u[2]=b*V-x*A,u},v.deepEqual=function u(c,h){if(Array.isArray(c)){if(!Array.isArray(h)||c.length!==h.length)return!1;for(var b=0;b<c.length;b++)if(!u(c[b],h[b]))return!1;return!0}if("object"==typeof c&&null!==c&&null!==h){if("object"!=typeof h||Object.keys(c).length!==Object.keys(h).length)return!1;for(var x in c)if(!u(c[x],h[x]))return!1;return!0}return c===h},v.dot=function(u,c){return u[0]*c[0]+u[1]*c[1]+u[2]*c[2]},v.dot$1=function(u,c){return u[0]*c[0]+u[1]*c[1]+u[2]*c[2]+u[3]*c[3]},v.ease=J,v.emitValidationErrors=bl,v.endsWith=Ce,v.enforceCacheSizeLimit=function(u){Hr(),ce&&ce.then(function(c){c.keys().then(function(h){for(var b=0;b<h.length-u;b++)c.delete(h[b])})})},v.evaluateSizeForFeature=xc,v.evaluateSizeForZoom=Mf,v.evaluateVariableOffset=j1,v.evented=Eh,v.extend=ae,v.featureFilter=Ja,v.filterObject=He,v.fromRotation=function(u,c){var h=Math.sin(c),b=Math.cos(c);return u[0]=b,u[1]=h,u[2]=0,u[3]=-h,u[4]=b,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},v.getAnchorAlignment=ov,v.getAnchorJustification=m_,v.getArrayBuffer=si,v.getImage=Te,v.getJSON=function(u,c){return Pu(ae(u,{type:"json"}),c)},v.getRTLTextPluginStatus=Ru,v.getReferrer=fu,v.getVideo=function(u,c){var h,b,x=M.document.createElement("video");x.muted=!0,x.onloadstart=function(){c(null,x)};for(var C=0;C<u.length;C++){var A=M.document.createElement("source");h=u[C],b=void 0,(b=M.document.createElement("a")).href=h,(b.protocol!==M.document.location.protocol||b.host!==M.document.location.host)&&(x.crossOrigin="Anonymous"),A.src=u[C],x.appendChild(A)}return{cancel:function(){}}},v.identity=ms,v.invert=function(u,c){var h=c[0],b=c[1],x=c[2],C=c[3],A=c[4],V=c[5],Y=c[6],re=c[7],ue=c[8],de=c[9],be=c[10],Pe=c[11],Ne=c[12],Fe=c[13],ot=c[14],Ye=c[15],ht=h*V-b*A,gt=h*Y-x*A,bt=h*re-C*A,St=b*Y-x*V,zt=b*re-C*V,nn=x*re-C*Y,cn=ue*Fe-de*Ne,Tn=ue*ot-be*Ne,hn=ue*Ye-Pe*Ne,jn=de*ot-be*Fe,pn=de*Ye-Pe*Fe,Er=be*Ye-Pe*ot,Yn=ht*Er-gt*pn+bt*jn+St*hn-zt*Tn+nn*cn;return Yn?(u[0]=(V*Er-Y*pn+re*jn)*(Yn=1/Yn),u[1]=(x*pn-b*Er-C*jn)*Yn,u[2]=(Fe*nn-ot*zt+Ye*St)*Yn,u[3]=(be*zt-de*nn-Pe*St)*Yn,u[4]=(Y*hn-A*Er-re*Tn)*Yn,u[5]=(h*Er-x*hn+C*Tn)*Yn,u[6]=(ot*bt-Ne*nn-Ye*gt)*Yn,u[7]=(ue*nn-be*bt+Pe*gt)*Yn,u[8]=(A*pn-V*hn+re*cn)*Yn,u[9]=(b*hn-h*pn-C*cn)*Yn,u[10]=(Ne*zt-Fe*bt+Ye*ht)*Yn,u[11]=(de*bt-ue*zt-Pe*ht)*Yn,u[12]=(V*Tn-A*jn-Y*cn)*Yn,u[13]=(h*jn-b*Tn+x*cn)*Yn,u[14]=(Fe*gt-Ne*St-ot*ht)*Yn,u[15]=(ue*St-de*gt+be*ht)*Yn,u):null},v.isChar=xn,v.isMapboxURL=lr,v.keysDifference=function(u,c){var h=[];for(var b in u)b in c||h.push(b);return h},v.makeRequest=Pu,v.mapObject=qe,v.mercatorXfromLng=S_,v.mercatorYfromLat=C_,v.mercatorZfromAltitude=hv,v.mul=wd,v.multiply=Hs,v.mvt=If,v.nextPowerOfTwo=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},v.normalize=function(u,c){var h=c[0],b=c[1],x=c[2],C=h*h+b*b+x*x;return C>0&&(C=1/Math.sqrt(C)),u[0]=c[0]*C,u[1]=c[1]*C,u[2]=c[2]*C,u},v.number=ho,v.offscreenCanvasSupported=Cr,v.ortho=function(u,c,h,b,x,C,A){var V=1/(c-h),Y=1/(b-x),re=1/(C-A);return u[0]=-2*V,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*Y,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*re,u[11]=0,u[12]=(c+h)*V,u[13]=(x+b)*Y,u[14]=(A+C)*re,u[15]=1,u},v.parseGlyphPBF=function(u){return new Zp(u).readFields(a_,[])},v.pbf=Zp,v.performSymbolLayout=function(u,c,h,b,x,C,A){u.createArrays(),u.tilePixelRatio=8192/(512*u.overscaling),u.compareText={},u.iconsNeedLinear=!1;var V=u.layers[0].layout,Y=u.layers[0]._unevaluatedLayout._values,re={};if("composite"===u.textSizeData.kind){var ue=u.textSizeData,de=ue.maxZoom;re.compositeTextSizes=[Y["text-size"].possiblyEvaluate(new Ei(ue.minZoom),A),Y["text-size"].possiblyEvaluate(new Ei(de),A)]}if("composite"===u.iconSizeData.kind){var be=u.iconSizeData,Pe=be.maxZoom;re.compositeIconSizes=[Y["icon-size"].possiblyEvaluate(new Ei(be.minZoom),A),Y["icon-size"].possiblyEvaluate(new Ei(Pe),A)]}re.layoutTextSize=Y["text-size"].possiblyEvaluate(new Ei(u.zoom+1),A),re.layoutIconSize=Y["icon-size"].possiblyEvaluate(new Ei(u.zoom+1),A),re.textMaxSize=Y["text-size"].possiblyEvaluate(new Ei(18));for(var Ne=24*V.get("text-line-height"),Fe="map"===V.get("text-rotation-alignment")&&"point"!==V.get("symbol-placement"),ot=V.get("text-keep-upright"),Ye=V.get("text-size"),ht=function(){var St=bt[gt],zt=V.get("text-font").evaluate(St,{},A).join(","),nn=Ye.evaluate(St,{},A),cn=re.layoutTextSize.evaluate(St,{},A),Tn=re.layoutIconSize.evaluate(St,{},A),hn={horizontal:{},vertical:void 0},jn=St.text,pn=[0,0];if(jn){var Er=jn.toString(),Yn=24*V.get("text-letter-spacing").evaluate(St,{},A),Mn=function(Wr){for(var Vi=0,di=Wr;Vi<di.length;Vi+=1)if(ai=di[Vi].charCodeAt(0),xn.Arabic(ai)||xn["Arabic Supplement"](ai)||xn["Arabic Extended-A"](ai)||xn["Arabic Presentation Forms-A"](ai)||xn["Arabic Presentation Forms-B"](ai))return!1;var ai;return!0}(Er)?Yn:0,Sr=V.get("text-anchor").evaluate(St,{},A),pr=V.get("text-variable-anchor");if(!pr){var ii=V.get("text-radial-offset").evaluate(St,{},A);pn=ii?j1(Sr,[24*ii,om]):V.get("text-offset").evaluate(St,{},A).map(function(Wr){return 24*Wr})}var Hn=Fe?"center":V.get("text-justify").evaluate(St,{},A),ci=V.get("symbol-placement"),mo="point"===ci?24*V.get("text-max-width").evaluate(St,{},A):0,Mo=function(){u.allowVerticalPlacement&&ff(Er)&&(hn.vertical=em(jn,c,h,x,zt,mo,Ne,Sr,"left",Mn,pn,$s.vertical,!0,ci,cn,nn))};if(!Fe&&pr){for(var To="auto"===Hn?pr.map(function(Wr){return m_(Wr)}):[Hn],go=!1,ko=0;ko<To.length;ko++){var ga=To[ko];if(!hn.horizontal[ga])if(go)hn.horizontal[ga]=hn.horizontal[0];else{var sa=em(jn,c,h,x,zt,mo,Ne,"center",ga,Mn,pn,$s.horizontal,!1,ci,cn,nn);sa&&(hn.horizontal[ga]=sa,go=1===sa.positionedLines.length)}}Mo()}else{"auto"===Hn&&(Hn=m_(Sr));var Ga=em(jn,c,h,x,zt,mo,Ne,Sr,Hn,Mn,pn,$s.horizontal,!1,ci,cn,nn);Ga&&(hn.horizontal[Hn]=Ga),Mo(),ff(Er)&&Fe&&ot&&(hn.vertical=em(jn,c,h,x,zt,mo,Ne,Sr,Hn,Mn,pn,$s.vertical,!1,ci,cn,nn))}}var Wr,Vi,ai,ys,Qa,va=void 0,Va=!1;if(St.icon&&St.icon.name){var jo=b[St.icon.name];jo&&(Wr=x[St.icon.name],Vi=V.get("icon-offset").evaluate(St,{},A),ai=ov(V.get("icon-anchor").evaluate(St,{},A)),va={image:Wr,top:Qa=Vi[1]-Wr.displaySize[1]*ai.verticalAlign,bottom:Qa+Wr.displaySize[1],left:ys=Vi[0]-Wr.displaySize[0]*ai.horizontalAlign,right:ys+Wr.displaySize[0]},Va=jo.sdf,void 0===u.sdfIcons?u.sdfIcons=jo.sdf:u.sdfIcons!==jo.sdf&&N("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(jo.pixelRatio!==u.pixelRatio||0!==V.get("icon-rotate").constantOr(1))&&(u.iconsNeedLinear=!0))}var Da=am(hn.horizontal)||hn.vertical;u.iconsInText=!!Da&&Da.iconsInText,(Da||va)&&function(Wr,Vi,di,ai,ys,Qa,oo,Io,es,pi,Tl){var iu=Qa.textMaxSize.evaluate(Vi,{});void 0===iu&&(iu=oo);var al,No=Wr.layers[0].layout,Bu=No.get("icon-offset").evaluate(Vi,{},Tl),ou=am(di.horizontal),Md=oo/24,Sc=Wr.tilePixelRatio*Md,kd=Wr.tilePixelRatio*iu/24,Il=Wr.tilePixelRatio*Io,Jl=Wr.tilePixelRatio*No.get("symbol-spacing"),hm=No.get("text-padding")*Wr.tilePixelRatio,Nd=No.get("icon-padding")*Wr.tilePixelRatio,Gh=No.get("text-max-angle")/180*Math.PI,pm="map"===No.get("text-rotation-alignment")&&"point"!==No.get("symbol-placement"),Vh="map"===No.get("icon-rotation-alignment")&&"point"!==No.get("symbol-placement"),Pl=No.get("symbol-placement"),zf=Jl/2,qh=No.get("icon-text-fit");ai&&"none"!==qh&&(Wr.allowVerticalPlacement&&di.vertical&&(al=l_(ai,di.vertical,qh,No.get("icon-text-fit-padding"),Bu,Md)),ou&&(ai=l_(ai,ou,qh,No.get("icon-text-fit-padding"),Bu,Md)));var Cc=function($1,Hf){Hf.x<0||Hf.x>=8192||Hf.y<0||Hf.y>=8192||function(Uo,Al,UT,Zl,bm,P_,Zh,Rl,$f,wm,xm,Kf,Em,bv,Dl,A_,Sm,wv,Cm,Yh,wu,Xf,Tm,Ks,R_){var Im,Bd,Wf,Fd,Ol,Jf=Uo.addToLineVertexArray(Al,UT),D_=0,O_=0,M_=0,Pm=0,Am=-1,Rm=-1,ya={},k_=Ze(""),Qh=0,ep=0;if(void 0===Rl._unevaluatedLayout.getValue("text-radial-offset")?(Qh=(Im=Rl.layout.get("text-offset").evaluate(wu,{},Ks).map(function(Zf){return 24*Zf}))[0],ep=Im[1]):(Qh=24*Rl.layout.get("text-radial-offset").evaluate(wu,{},Ks),ep=om),Uo.allowVerticalPlacement&&Zl.vertical){var N_=Rl.layout.get("text-rotate").evaluate(wu,{},Ks)+90;Fd=new Id($f,Al,wm,xm,Kf,Zl.vertical,Em,bv,Dl,N_),Zh&&(Ol=new Id($f,Al,wm,xm,Kf,Zh,Sm,wv,Dl,N_))}if(bm){var L_=Rl.layout.get("icon-rotate").evaluate(wu,{}),K1="none"!==Rl.layout.get("icon-text-fit"),X1=f_(bm,L_,Tm,K1),xv=Zh?f_(Zh,L_,Tm,K1):void 0;Wf=new Id($f,Al,wm,xm,Kf,bm,Sm,wv,!1,L_),D_=4*X1.length;var Ev=Uo.iconSizeData,Dm=null;"source"===Ev.kind?(Dm=[128*Rl.layout.get("icon-size").evaluate(wu,{})])[0]>32640&&N(Uo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===Ev.kind&&((Dm=[128*Xf.compositeIconSizes[0].evaluate(wu,{},Ks),128*Xf.compositeIconSizes[1].evaluate(wu,{},Ks)])[0]>32640||Dm[1]>32640)&&N(Uo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Uo.addSymbols(Uo.icon,X1,Dm,Yh,Cm,wu,!1,Al,Jf.lineStartIndex,Jf.lineLength,-1,Ks),Am=Uo.icon.placedSymbolArray.length-1,xv&&(O_=4*xv.length,Uo.addSymbols(Uo.icon,xv,Dm,Yh,Cm,wu,$s.vertical,Al,Jf.lineStartIndex,Jf.lineLength,-1,Ks),Rm=Uo.icon.placedSymbolArray.length-1)}for(var B_ in Zl.horizontal){var Tc=Zl.horizontal[B_];if(!Bd){k_=Ze(Tc.text);var W1=Rl.layout.get("text-rotate").evaluate(wu,{},Ks);Bd=new Id($f,Al,wm,xm,Kf,Tc,Em,bv,Dl,W1)}var Sv=1===Tc.positionedLines.length;if(M_+=U1(Uo,Al,Tc,P_,Rl,Dl,wu,A_,Jf,Zl.vertical?$s.horizontal:$s.horizontalOnly,Sv?Object.keys(Zl.horizontal):[B_],ya,Am,Xf,Ks),Sv)break}Zl.vertical&&(Pm+=U1(Uo,Al,Zl.vertical,P_,Rl,Dl,wu,A_,Jf,$s.vertical,["vertical"],ya,Rm,Xf,Ks));var Om=Bd?Bd.boxStartIndex:Uo.collisionBoxArray.length,J1=Bd?Bd.boxEndIndex:Uo.collisionBoxArray.length,F_=Fd?Fd.boxStartIndex:Uo.collisionBoxArray.length,Z1=Fd?Fd.boxEndIndex:Uo.collisionBoxArray.length,Y1=Wf?Wf.boxStartIndex:Uo.collisionBoxArray.length,Q1=Wf?Wf.boxEndIndex:Uo.collisionBoxArray.length,ex=Ol?Ol.boxStartIndex:Uo.collisionBoxArray.length,tx=Ol?Ol.boxEndIndex:Uo.collisionBoxArray.length,Ml=-1,Mm=function(Zf,km){return Zf&&Zf.circleDiameter?Math.max(Zf.circleDiameter,km):km};Ml=Mm(Bd,Ml),Ml=Mm(Fd,Ml),Ml=Mm(Wf,Ml);var Cv=(Ml=Mm(Ol,Ml))>-1?1:0;Cv&&(Ml*=R_/24),Uo.glyphOffsetArray.length>=Gi.MAX_GLYPHS&&N("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==wu.sortKey&&Uo.addToSortKeyRanges(Uo.symbolInstances.length,wu.sortKey),Uo.symbolInstances.emplaceBack(Al.x,Al.y,ya.right>=0?ya.right:-1,ya.center>=0?ya.center:-1,ya.left>=0?ya.left:-1,ya.vertical||-1,Am,Rm,k_,Om,J1,F_,Z1,Y1,Q1,ex,tx,wm,M_,Pm,D_,O_,Cv,0,Em,Qh,ep,Ml)}(Wr,Hf,$1,di,ai,ys,al,Wr.layers[0],Wr.collisionBoxArray,Vi.index,Vi.sourceLayerIndex,Wr.index,Sc,hm,pm,es,Il,Nd,Vh,Bu,Vi,Qa,pi,Tl,oo)};if("line"===Pl)for(var jf=0,Hh=d_(Vi.geometry,0,0,8192,8192);jf<Hh.length;jf+=1)for(var mm=Hh[jf],$h=0,au=c_(mm,Jl,Gh,di.vertical||ou,ai,24,kd,Wr.overscaling,8192);$h<au.length;$h+=1){var gm=au[$h];ou&&uv(Wr,ou.text,zf,gm)||Cc(mm,gm)}else if("line-center"===Pl)for(var Uf=0,Kh=Vi.geometry;Uf<Kh.length;Uf+=1){var Xh=Kh[Uf];if(Xh.length>1){var vm=zT(Xh,Gh,di.vertical||ou,ai,24,kd);vm&&Cc(Xh,vm)}}else if("Polygon"===Vi.type)for(var Gf=0,Wh=nu(Vi.geometry,0);Gf<Wh.length;Gf+=1){var Vf=Wh[Gf],Jh=Fh(Vf,16);Cc(Vf[0],new Of(Jh.x,Jh.y,0))}else if("LineString"===Vi.type)for(var Ld=0,Vr=Vi.geometry;Ld<Vr.length;Ld+=1){var qf=Vr[Ld];Cc(qf,new Of(qf[0].x,qf[0].y,0))}else if("Point"===Vi.type)for(var ym=0,yv=Vi.geometry;ym<yv.length;ym+=1)for(var _v=0,I_=yv[ym];_v<I_.length;_v+=1){var _m=I_[_v];Cc([_m],new Of(_m.x,_m.y,0))}}(u,St,hn,va,b,re,cn,Tn,pn,Va,A)},gt=0,bt=u.features;gt<bt.length;gt+=1)ht();C&&u.generateCollisionDebugBuffers()},v.perspective=function(u,c,h,b,x){var C,A=1/Math.tan(c/2);return u[0]=A/h,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=A,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,null!=x&&x!==1/0?(u[10]=(x+b)*(C=1/(b-x)),u[14]=2*x*b*C):(u[10]=-1,u[14]=-2*b),u},v.pick=function(u,c){for(var h={},b=0;b<c.length;b++){var x=c[b];x in u&&(h[x]=u[x])}return h},v.plugin=yo,v.polygonIntersectsPolygon=ps,v.postMapLoadEvent=yr,v.postTurnstileEvent=Ht,v.potpack=M1,v.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],v.register=_n,v.registerForPluginStateChange=function(u){return u({pluginStatus:vo,pluginURL:tl}),Eh.on("pluginStateChange",u),u},v.renderColorRamp=Ph,v.rotate=function(u,c,h){var b=c[0],x=c[1],C=c[2],A=c[3],V=Math.sin(h),Y=Math.cos(h);return u[0]=b*Y+C*V,u[1]=x*Y+A*V,u[2]=b*-V+C*Y,u[3]=x*-V+A*Y,u},v.rotateX=function(u,c,h){var b=Math.sin(h),x=Math.cos(h),C=c[4],A=c[5],V=c[6],Y=c[7],re=c[8],ue=c[9],de=c[10],be=c[11];return c!==u&&(u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=c[3],u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15]),u[4]=C*x+re*b,u[5]=A*x+ue*b,u[6]=V*x+de*b,u[7]=Y*x+be*b,u[8]=re*x-C*b,u[9]=ue*x-A*b,u[10]=de*x-V*b,u[11]=be*x-Y*b,u},v.rotateZ=function(u,c,h){var b=Math.sin(h),x=Math.cos(h),C=c[0],A=c[1],V=c[2],Y=c[3],re=c[4],ue=c[5],de=c[6],be=c[7];return c!==u&&(u[8]=c[8],u[9]=c[9],u[10]=c[10],u[11]=c[11],u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15]),u[0]=C*x+re*b,u[1]=A*x+ue*b,u[2]=V*x+de*b,u[3]=Y*x+be*b,u[4]=re*x-C*b,u[5]=ue*x-A*b,u[6]=de*x-V*b,u[7]=be*x-Y*b,u},v.scale=function(u,c,h){var b=h[0],x=h[1],C=h[2];return u[0]=c[0]*b,u[1]=c[1]*b,u[2]=c[2]*b,u[3]=c[3]*b,u[4]=c[4]*x,u[5]=c[5]*x,u[6]=c[6]*x,u[7]=c[7]*x,u[8]=c[8]*C,u[9]=c[9]*C,u[10]=c[10]*C,u[11]=c[11]*C,u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15],u},v.scale$1=function(u,c,h){return u[0]=c[0]*h,u[1]=c[1]*h,u[2]=c[2]*h,u[3]=c[3]*h,u},v.scale$2=function(u,c,h){return u[0]=c[0]*h,u[1]=c[1]*h,u[2]=c[2]*h,u},v.setCacheLimits=function(u,c){ei=u,ni=c},v.setRTLTextPlugin=function(u,c,h){if(void 0===h&&(h=!1),"deferred"===vo||"loading"===vo||"loaded"===vo)throw new Error("setRTLTextPlugin cannot be called multiple times.");tl=kn.resolveURL(u),vo="deferred",xh=c,yd(),h||vf()},v.sphericalToCartesian=function(u){var c=u[0],h=u[1],b=u[2];return h+=90,h*=Math.PI/180,b*=Math.PI/180,{x:c*Math.cos(h)*Math.sin(b),y:c*Math.sin(h)*Math.sin(b),z:c*Math.cos(b)}},v.sqrLen=function(u){var c=u[0],h=u[1];return c*c+h*h},v.styleSpec=ke,v.sub=function(u,c,h){return u[0]=c[0]-h[0],u[1]=c[1]-h[1],u[2]=c[2]-h[2],u},v.symbolSize=N1,v.transformMat3=function(u,c,h){var b=c[0],x=c[1],C=c[2];return u[0]=b*h[0]+x*h[3]+C*h[6],u[1]=b*h[1]+x*h[4]+C*h[7],u[2]=b*h[2]+x*h[5]+C*h[8],u},v.transformMat4=Jc,v.translate=function(u,c,h){var b,x,C,A,V,Y,re,ue,de,be,Pe,Ne,Fe=h[0],ot=h[1],Ye=h[2];return c===u?(u[12]=c[0]*Fe+c[4]*ot+c[8]*Ye+c[12],u[13]=c[1]*Fe+c[5]*ot+c[9]*Ye+c[13],u[14]=c[2]*Fe+c[6]*ot+c[10]*Ye+c[14],u[15]=c[3]*Fe+c[7]*ot+c[11]*Ye+c[15]):(x=c[1],C=c[2],A=c[3],V=c[4],Y=c[5],re=c[6],ue=c[7],de=c[8],be=c[9],Pe=c[10],Ne=c[11],u[0]=b=c[0],u[1]=x,u[2]=C,u[3]=A,u[4]=V,u[5]=Y,u[6]=re,u[7]=ue,u[8]=de,u[9]=be,u[10]=Pe,u[11]=Ne,u[12]=b*Fe+V*ot+de*Ye+c[12],u[13]=x*Fe+Y*ot+be*Ye+c[13],u[14]=C*Fe+re*ot+Pe*Ye+c[14],u[15]=A*Fe+ue*ot+Ne*Ye+c[15]),u},v.triggerPluginCompletionEvent=gf,v.uniqueId=we,v.validateCustomStyleLayer=function(u){var c=[],h=u.id;return void 0===h&&c.push({message:"layers."+h+': missing required property "id"'}),void 0===u.render&&c.push({message:"layers."+h+': missing required method "render"'}),u.renderingMode&&"2d"!==u.renderingMode&&"3d"!==u.renderingMode&&c.push({message:"layers."+h+': property "renderingMode" must be either "2d" or "3d"'}),c},v.validateLight=md,v.validateStyle=fc,v.values=function(u){var c=[];for(var h in u)c.push(u[h]);return c},v.vectorTile=If,v.version="1.15.3",v.warnOnce=N,v.webpSupported=Bn,v.window=M,v.wrap=Q}),$(0,function(v){function G(he){var _e=typeof he;if("number"===_e||"boolean"===_e||"string"===_e||null==he)return JSON.stringify(he);if(Array.isArray(he)){for(var Te="[",Oe=0,Be=he;Oe<Be.length;Oe+=1)Te+=G(Be[Oe])+",";return Te+"]"}for(var it=Object.keys(he).sort(),st="{",nt=0;nt<it.length;nt++)st+=JSON.stringify(it[nt])+":"+G(he[it[nt]])+",";return st+"}"}function q(he){for(var _e="",Te=0,Oe=v.refProperties;Te<Oe.length;Te+=1)_e+="/"+G(he[Oe[Te]]);return _e}var k=function(he){this.keyCache={},he&&this.replace(he)};k.prototype.replace=function(he){this._layerConfigs={},this._layers={},this.update(he,[])},k.prototype.update=function(he,_e){for(var Te=this,Oe=0,Be=he;Oe<Be.length;Oe+=1){var it=Be[Oe];this._layerConfigs[it.id]=it;var st=this._layers[it.id]=v.createStyleLayer(it);st._featureFilter=v.featureFilter(st.filter),this.keyCache[it.id]&&delete this.keyCache[it.id]}for(var nt=0,ke=_e;nt<ke.length;nt+=1){var Xe=ke[nt];delete this.keyCache[Xe],delete this._layerConfigs[Xe],delete this._layers[Xe]}this.familiesBySource={};for(var qt=0,Jt=function(tn,jt){for(var ir={},rr=0;rr<tn.length;rr++){var wn=jt&&jt[tn[rr].id]||q(tn[rr]);jt&&(jt[tn[rr].id]=wn);var Ii=ir[wn];Ii||(Ii=ir[wn]=[]),Ii.push(tn[rr])}var zn=[];for(var Di in ir)zn.push(ir[Di]);return zn}(v.values(this._layerConfigs),this.keyCache);qt<Jt.length;qt+=1){var yt=Jt[qt].map(function(tn){return Te._layers[tn.id]}),Lt=yt[0];if("none"!==Lt.visibility){var un=Lt.source||"",ln=this.familiesBySource[un];ln||(ln=this.familiesBySource[un]={});var In=Lt.sourceLayer||"_geojsonTileLayer",Bt=ln[In];Bt||(Bt=ln[In]=[]),Bt.push(yt)}}};var I=function(he){var _e={},Te=[];for(var Oe in he){var Be=he[Oe],it=_e[Oe]={};for(var st in Be){var nt=Be[+st];if(nt&&0!==nt.bitmap.width&&0!==nt.bitmap.height){var ke={x:0,y:0,w:nt.bitmap.width+2,h:nt.bitmap.height+2};Te.push(ke),it[st]={rect:ke,metrics:nt.metrics}}}}var Xe=v.potpack(Te),qt=new v.AlphaImage({width:Xe.w||1,height:Xe.h||1});for(var Jt in he){var yt=he[Jt];for(var Lt in yt){var un=yt[+Lt];if(un&&0!==un.bitmap.width&&0!==un.bitmap.height){var ln=_e[Jt][Lt].rect;v.AlphaImage.copy(un.bitmap,qt,{x:0,y:0},{x:ln.x+1,y:ln.y+1},un.bitmap)}}}this.image=qt,this.positions=_e};v.register("GlyphAtlas",I);var S=function(he){this.tileID=new v.OverscaledTileID(he.tileID.overscaledZ,he.tileID.wrap,he.tileID.canonical.z,he.tileID.canonical.x,he.tileID.canonical.y),this.uid=he.uid,this.zoom=he.zoom,this.pixelRatio=he.pixelRatio,this.tileSize=he.tileSize,this.source=he.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=he.showCollisionBoxes,this.collectResourceTiming=!!he.collectResourceTiming,this.returnDependencies=!!he.returnDependencies,this.promoteId=he.promoteId};function M(he,_e,Te){for(var Oe=new v.EvaluationParameters(_e),Be=0,it=he;Be<it.length;Be+=1)it[Be].recalculate(Oe,Te)}function H(he,_e){var Te=v.getArrayBuffer(he.request,function(Oe,Be,it,st){Oe?_e(Oe):Be&&_e(null,{vectorTile:new v.vectorTile.VectorTile(new v.pbf(Be)),rawData:Be,cacheControl:it,expires:st})});return function(){Te.cancel(),_e()}}S.prototype.parse=function(he,_e,Te,Oe,Be){var it=this;this.status="parsing",this.data=he,this.collisionBoxArray=new v.CollisionBoxArray;var st=new v.DictionaryCoder(Object.keys(he.layers).sort()),nt=new v.FeatureIndex(this.tileID,this.promoteId);nt.bucketLayerIDs=[];var ke,Xe,qt,Jt,yt={},Lt={featureIndex:nt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Te},un=_e.familiesBySource[this.source];for(var ln in un){var In=he.layers[ln];if(In){1===In.version&&v.warnOnce('Vector tile source "'+this.source+'" layer "'+ln+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Bt=st.encode(ln),tn=[],jt=0;jt<In.length;jt++){var ir=In.feature(jt),rr=nt.getId(ir,ln);tn.push({feature:ir,id:rr,index:jt,sourceLayerIndex:Bt})}for(var wn=0,Ii=un[ln];wn<Ii.length;wn+=1){var zn=Ii[wn],Di=zn[0];Di.minzoom&&this.zoom<Math.floor(Di.minzoom)||Di.maxzoom&&this.zoom>=Di.maxzoom||"none"!==Di.visibility&&(M(zn,this.zoom,Te),(yt[Di.id]=Di.createBucket({index:nt.bucketLayerIDs.length,layers:zn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Bt,sourceID:this.source})).populate(tn,Lt,this.tileID.canonical),nt.bucketLayerIDs.push(zn.map(function(fi){return fi.id})))}}}var Fi=v.mapObject(Lt.glyphDependencies,function(fi){return Object.keys(fi).map(Number)});Object.keys(Fi).length?Oe.send("getGlyphs",{uid:this.uid,stacks:Fi},function(fi,$n){ke||(ke=fi,Xe=$n,Hi.call(it))}):Xe={};var $r=Object.keys(Lt.iconDependencies);$r.length?Oe.send("getImages",{icons:$r,source:this.source,tileID:this.tileID,type:"icons"},function(fi,$n){ke||(ke=fi,qt=$n,Hi.call(it))}):qt={};var _i=Object.keys(Lt.patternDependencies);function Hi(){if(ke)return Be(ke);if(Xe&&qt&&Jt){var fi=new I(Xe),$n=new v.ImageAtlas(qt,Jt);for(var so in yt){var dr=yt[so];dr instanceof v.SymbolBucket?(M(dr.layers,this.zoom,Te),v.performSymbolLayout(dr,Xe,fi.positions,qt,$n.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):dr.hasPattern&&(dr instanceof v.LineBucket||dr instanceof v.FillBucket||dr instanceof v.FillExtrusionBucket)&&(M(dr.layers,this.zoom,Te),dr.addFeatures(Lt,this.tileID.canonical,$n.patternPositions))}this.status="done",Be(null,{buckets:v.values(yt).filter(function(Ho){return!Ho.isEmpty()}),featureIndex:nt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:fi.image,imageAtlas:$n,glyphMap:this.returnDependencies?Xe:null,iconMap:this.returnDependencies?qt:null,glyphPositions:this.returnDependencies?fi.positions:null})}}_i.length?Oe.send("getImages",{icons:_i,source:this.source,tileID:this.tileID,type:"patterns"},function(fi,$n){ke||(ke=fi,Jt=$n,Hi.call(it))}):Jt={},Hi.call(this)};var K=function(he,_e,Te,Oe){this.actor=he,this.layerIndex=_e,this.availableImages=Te,this.loadVectorData=Oe||H,this.loading={},this.loaded={}};K.prototype.loadTile=function(he,_e){var Te=this,Oe=he.uid;this.loading||(this.loading={});var Be=!!(he&&he.request&&he.request.collectResourceTiming)&&new v.RequestPerformance(he.request),it=this.loading[Oe]=new S(he);it.abort=this.loadVectorData(he,function(st,nt){if(delete Te.loading[Oe],st||!nt)return it.status="done",Te.loaded[Oe]=it,_e(st);var ke=nt.rawData,Xe={};nt.expires&&(Xe.expires=nt.expires),nt.cacheControl&&(Xe.cacheControl=nt.cacheControl);var qt={};if(Be){var Jt=Be.finish();Jt&&(qt.resourceTiming=JSON.parse(JSON.stringify(Jt)))}it.vectorTile=nt.vectorTile,it.parse(nt.vectorTile,Te.layerIndex,Te.availableImages,Te.actor,function(yt,Lt){if(yt||!Lt)return _e(yt);_e(null,v.extend({rawTileData:ke.slice(0)},Lt,Xe,qt))}),Te.loaded=Te.loaded||{},Te.loaded[Oe]=it})},K.prototype.reloadTile=function(he,_e){var Te=this,Oe=this.loaded,Be=he.uid,it=this;if(Oe&&Oe[Be]){var st=Oe[Be];st.showCollisionBoxes=he.showCollisionBoxes;var nt=function(ke,Xe){var qt=st.reloadCallback;qt&&(delete st.reloadCallback,st.parse(st.vectorTile,it.layerIndex,Te.availableImages,it.actor,qt)),_e(ke,Xe)};"parsing"===st.status?st.reloadCallback=nt:"done"===st.status&&(st.vectorTile?st.parse(st.vectorTile,this.layerIndex,this.availableImages,this.actor,nt):nt())}},K.prototype.abortTile=function(he,_e){var Te=this.loading,Oe=he.uid;Te&&Te[Oe]&&Te[Oe].abort&&(Te[Oe].abort(),delete Te[Oe]),_e()},K.prototype.removeTile=function(he,_e){var Te=this.loaded,Oe=he.uid;Te&&Te[Oe]&&delete Te[Oe],_e()};var J=v.window.ImageBitmap,ie=function(){this.loaded={}};function Q(he,_e){if(0!==he.length){ae(he[0],_e);for(var Te=1;Te<he.length;Te++)ae(he[Te],!_e)}}function ae(he,_e){for(var Te=0,Oe=0,Be=he.length,it=Be-1;Oe<Be;it=Oe++)Te+=(he[Oe][0]-he[it][0])*(he[it][1]+he[Oe][1]);Te>=0!=!!_e&&he.reverse()}ie.prototype.loadTile=function(he,_e){var Te=he.uid,Oe=he.encoding,Be=he.rawImageData,it=J&&Be instanceof J?this.getImageData(Be):Be,st=new v.DEMData(Te,it,Oe);this.loaded=this.loaded||{},this.loaded[Te]=st,_e(null,st)},ie.prototype.getImageData=function(he){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(he.width,he.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=he.width,this.offscreenCanvas.height=he.height,this.offscreenCanvasContext.drawImage(he,0,0,he.width,he.height);var _e=this.offscreenCanvasContext.getImageData(-1,-1,he.width+2,he.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new v.RGBAImage({width:_e.width,height:_e.height},_e.data)},ie.prototype.removeTile=function(he){var _e=this.loaded,Te=he.uid;_e&&_e[Te]&&delete _e[Te]};var me=v.vectorTile.VectorTileFeature.prototype.toGeoJSON,we=function(he){this._feature=he,this.extent=v.EXTENT,this.type=he.type,this.properties=he.tags,"id"in he&&!isNaN(he.id)&&(this.id=parseInt(he.id,10))};we.prototype.loadGeometry=function(){if(1===this._feature.type){for(var he=[],_e=0,Te=this._feature.geometry;_e<Te.length;_e+=1){var Oe=Te[_e];he.push([new v.Point$1(Oe[0],Oe[1])])}return he}for(var Be=[],it=0,st=this._feature.geometry;it<st.length;it+=1){for(var nt=[],ke=0,Xe=st[it];ke<Xe.length;ke+=1){var qt=Xe[ke];nt.push(new v.Point$1(qt[0],qt[1]))}Be.push(nt)}return Be},we.prototype.toGeoJSON=function(he,_e,Te){return me.call(this,he,_e,Te)};var oe=function(he){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=v.EXTENT,this.length=he.length,this._features=he};oe.prototype.feature=function(he){return new we(this._features[he])};var fe=v.vectorTile.VectorTileFeature,pe=Ce;function Ce(he,_e){this.options=_e||{},this.features=he,this.length=he.length}function qe(he,_e){this.id="number"==typeof he.id?he.id:void 0,this.type=he.type,this.rawGeometry=1===he.type?[he.geometry]:he.geometry,this.properties=he.tags,this.extent=_e||4096}Ce.prototype.feature=function(he){return new qe(this.features[he],this.options.extent)},qe.prototype.loadGeometry=function(){var he=this.rawGeometry;this.geometry=[];for(var _e=0;_e<he.length;_e++){for(var Te=he[_e],Oe=[],Be=0;Be<Te.length;Be++)Oe.push(new v.Point$1(Te[Be][0],Te[Be][1]));this.geometry.push(Oe)}return this.geometry},qe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var he=this.geometry,_e=1/0,Te=-1/0,Oe=1/0,Be=-1/0,it=0;it<he.length;it++)for(var st=he[it],nt=0;nt<st.length;nt++){var ke=st[nt];_e=Math.min(_e,ke.x),Te=Math.max(Te,ke.x),Oe=Math.min(Oe,ke.y),Be=Math.max(Be,ke.y)}return[_e,Oe,Te,Be]},qe.prototype.toGeoJSON=fe.prototype.toGeoJSON;var He=P,ze=pe;function P(he){var _e=new v.pbf;return function(Te,Oe){for(var Be in Te.layers)Oe.writeMessage(3,N,Te.layers[Be])}(he,_e),_e.finish()}function N(he,_e){var Te;_e.writeVarintField(15,he.version||1),_e.writeStringField(1,he.name||""),_e.writeVarintField(5,he.extent||4096);var Oe={keys:[],values:[],keycache:{},valuecache:{}};for(Te=0;Te<he.length;Te++)Oe.feature=he.feature(Te),_e.writeMessage(2,F,Oe);var Be=Oe.keys;for(Te=0;Te<Be.length;Te++)_e.writeStringField(3,Be[Te]);var it=Oe.values;for(Te=0;Te<it.length;Te++)_e.writeMessage(4,Je,it[Te])}function F(he,_e){var Te=he.feature;void 0!==Te.id&&_e.writeVarintField(1,Te.id),_e.writeMessage(2,z,he),_e.writeVarintField(3,Te.type),_e.writeMessage(4,ve,Te)}function z(he,_e){var Te=he.feature,Oe=he.keys,Be=he.values,it=he.keycache,st=he.valuecache;for(var nt in Te.properties){var ke=it[nt];void 0===ke&&(Oe.push(nt),it[nt]=ke=Oe.length-1),_e.writeVarint(ke);var Xe=Te.properties[nt],qt=typeof Xe;"string"!==qt&&"boolean"!==qt&&"number"!==qt&&(Xe=JSON.stringify(Xe));var Jt=qt+":"+Xe,yt=st[Jt];void 0===yt&&(Be.push(Xe),st[Jt]=yt=Be.length-1),_e.writeVarint(yt)}}function ee(he,_e){return(_e<<3)+(7&he)}function W(he){return he<<1^he>>31}function ve(he,_e){for(var Te=he.loadGeometry(),Oe=he.type,Be=0,it=0,st=Te.length,nt=0;nt<st;nt++){var ke=Te[nt],Xe=1;1===Oe&&(Xe=ke.length),_e.writeVarint(ee(1,Xe));for(var qt=3===Oe?ke.length-1:ke.length,Jt=0;Jt<qt;Jt++){1===Jt&&1!==Oe&&_e.writeVarint(ee(2,qt-1));var yt=ke[Jt].x-Be,Lt=ke[Jt].y-it;_e.writeVarint(W(yt)),_e.writeVarint(W(Lt)),Be+=yt,it+=Lt}3===Oe&&_e.writeVarint(ee(7,1))}}function Je(he,_e){var Te=typeof he;"string"===Te?_e.writeStringField(1,he):"boolean"===Te?_e.writeBooleanField(7,he):"number"===Te&&(he%1!=0?_e.writeDoubleField(3,he):he<0?_e.writeSVarintField(6,he):_e.writeVarintField(5,he))}function dt(he,_e,Te,Oe){Ie(he,Te,Oe),Ie(_e,2*Te,2*Oe),Ie(_e,2*Te+1,2*Oe+1)}function Ie(he,_e,Te){var Oe=he[_e];he[_e]=he[Te],he[Te]=Oe}function At(he,_e,Te,Oe){var Be=he-Te,it=_e-Oe;return Be*Be+it*it}He.fromVectorTileJs=P,He.fromGeojsonVt=function(he,_e){_e=_e||{};var Te={};for(var Oe in he)Te[Oe]=new pe(he[Oe].features,_e),Te[Oe].name=Oe,Te[Oe].version=_e.version,Te[Oe].extent=_e.extent;return P({layers:Te})},He.GeoJSONWrapper=ze;var Rt=function(he){return he[0]},rt=function(he){return he[1]},Et=function(he,_e,Te,Oe,Be){void 0===_e&&(_e=Rt),void 0===Te&&(Te=rt),void 0===Oe&&(Oe=64),void 0===Be&&(Be=Float64Array),this.nodeSize=Oe,this.points=he;for(var it=he.length<65536?Uint16Array:Uint32Array,st=this.ids=new it(he.length),nt=this.coords=new Be(2*he.length),ke=0;ke<he.length;ke++)st[ke]=ke,nt[2*ke]=_e(he[ke]),nt[2*ke+1]=Te(he[ke]);!function Xe(qt,Jt,yt,Lt,un,ln){if(!(un-Lt<=yt)){var In=Lt+un>>1;(function Bt(tn,jt,ir,rr,wn,Ii){for(;wn>rr;){if(wn-rr>600){var zn=wn-rr+1,Di=ir-rr+1,Fi=Math.log(zn),$r=.5*Math.exp(2*Fi/3),_i=.5*Math.sqrt(Fi*$r*(zn-$r)/zn)*(Di-zn/2<0?-1:1);Bt(tn,jt,ir,Math.max(rr,Math.floor(ir-Di*$r/zn+_i)),Math.min(wn,Math.floor(ir+(zn-Di)*$r/zn+_i)),Ii)}var Hi=jt[2*ir+Ii],fi=rr,$n=wn;for(dt(tn,jt,rr,ir),jt[2*wn+Ii]>Hi&&dt(tn,jt,rr,wn);fi<$n;){for(dt(tn,jt,fi,$n),fi++,$n--;jt[2*fi+Ii]<Hi;)fi++;for(;jt[2*$n+Ii]>Hi;)$n--}jt[2*rr+Ii]===Hi?dt(tn,jt,rr,$n):dt(tn,jt,++$n,wn),$n<=ir&&(rr=$n+1),ir<=$n&&(wn=$n-1)}})(qt,Jt,In,Lt,un,ln%2),Xe(qt,Jt,yt,Lt,In-1,ln+1),Xe(qt,Jt,yt,In+1,un,ln+1)}}(st,nt,Oe,0,st.length-1,0)};Et.prototype.range=function(he,_e,Te,Oe){return function(Be,it,st,nt,ke,Xe,qt){for(var Jt,yt,Lt=[0,Be.length-1,0],un=[];Lt.length;){var ln=Lt.pop(),In=Lt.pop(),Bt=Lt.pop();if(In-Bt<=qt)for(var tn=Bt;tn<=In;tn++)yt=it[2*tn+1],(Jt=it[2*tn])>=st&&Jt<=ke&&yt>=nt&&yt<=Xe&&un.push(Be[tn]);else{var jt=Math.floor((Bt+In)/2);yt=it[2*jt+1],(Jt=it[2*jt])>=st&&Jt<=ke&&yt>=nt&&yt<=Xe&&un.push(Be[jt]);var ir=(ln+1)%2;(0===ln?st<=Jt:nt<=yt)&&(Lt.push(Bt),Lt.push(jt-1),Lt.push(ir)),(0===ln?ke>=Jt:Xe>=yt)&&(Lt.push(jt+1),Lt.push(In),Lt.push(ir))}}return un}(this.ids,this.coords,he,_e,Te,Oe,this.nodeSize)},Et.prototype.within=function(he,_e,Te){return function(Oe,Be,it,st,nt,ke){for(var Xe=[0,Oe.length-1,0],qt=[],Jt=nt*nt;Xe.length;){var yt=Xe.pop(),Lt=Xe.pop(),un=Xe.pop();if(Lt-un<=ke)for(var ln=un;ln<=Lt;ln++)At(Be[2*ln],Be[2*ln+1],it,st)<=Jt&&qt.push(Oe[ln]);else{var In=Math.floor((un+Lt)/2),Bt=Be[2*In],tn=Be[2*In+1];At(Bt,tn,it,st)<=Jt&&qt.push(Oe[In]);var jt=(yt+1)%2;(0===yt?it-nt<=Bt:st-nt<=tn)&&(Xe.push(un),Xe.push(In-1),Xe.push(jt)),(0===yt?it+nt>=Bt:st+nt>=tn)&&(Xe.push(In+1),Xe.push(Lt),Xe.push(jt))}}return qt}(this.ids,this.coords,he,_e,Te,this.nodeSize)};var sn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(he){return he}},$t=function(he){this.options=ne(Object.create(sn),he),this.trees=new Array(this.options.maxZoom+1)};function kn(he,_e,Te,Oe,Be){return{x:he,y:_e,zoom:1/0,id:Te,parentId:-1,numPoints:Oe,properties:Be}}function Nt(he,_e){var Te=he.geometry.coordinates,Oe=Te[1];return{x:ar(Te[0]),y:Zt(Oe),zoom:1/0,index:_e,parentId:-1}}function Bn(he){return{type:"Feature",id:he.id,properties:Nn(he),geometry:{type:"Point",coordinates:[(Oe=he.x,360*(Oe-.5)),(_e=he.y,Te=(180-360*_e)*Math.PI/180,360*Math.atan(Math.exp(Te))/Math.PI-90)]}};var _e,Te,Oe}function Nn(he){var _e=he.numPoints,Te=_e>=1e4?Math.round(_e/1e3)+"k":_e>=1e3?Math.round(_e/100)/10+"k":_e;return ne(ne({},he.properties),{cluster:!0,cluster_id:he.id,point_count:_e,point_count_abbreviated:Te})}function ar(he){return he/360+.5}function Zt(he){var _e=Math.sin(he*Math.PI/180),Te=.5-.25*Math.log((1+_e)/(1-_e))/Math.PI;return Te<0?0:Te>1?1:Te}function ne(he,_e){for(var Te in _e)he[Te]=_e[Te];return he}function er(he){return he.x}function lr(he){return he.y}function Ti(he,_e,Te,Oe,Be,it){var st=Be-Te,nt=it-Oe;if(0!==st||0!==nt){var ke=((he-Te)*st+(_e-Oe)*nt)/(st*st+nt*nt);ke>1?(Te=Be,Oe=it):ke>0&&(Te+=st*ke,Oe+=nt*ke)}return(st=he-Te)*st+(nt=_e-Oe)*nt}function Qi(he,_e,Te,Oe){var Be={id:void 0===he?null:he,type:_e,geometry:Te,tags:Oe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(it){var st=it.geometry,nt=it.type;if("Point"===nt||"MultiPoint"===nt||"LineString"===nt)kt(it,st);else if("Polygon"===nt||"MultiLineString"===nt)for(var ke=0;ke<st.length;ke++)kt(it,st[ke]);else if("MultiPolygon"===nt)for(ke=0;ke<st.length;ke++)for(var Xe=0;Xe<st[ke].length;Xe++)kt(it,st[ke][Xe])}(Be),Be}function kt(he,_e){for(var Te=0;Te<_e.length;Te+=3)he.minX=Math.min(he.minX,_e[Te]),he.minY=Math.min(he.minY,_e[Te+1]),he.maxX=Math.max(he.maxX,_e[Te]),he.maxY=Math.max(he.maxY,_e[Te+1])}function It(he,_e,Te,Oe){if(_e.geometry){var Be=_e.geometry.coordinates,it=_e.geometry.type,st=Math.pow(Te.tolerance/((1<<Te.maxZoom)*Te.extent),2),nt=[],ke=_e.id;if(Te.promoteId?ke=_e.properties[Te.promoteId]:Te.generateId&&(ke=Oe||0),"Point"===it)ka(Be,nt);else if("MultiPoint"===it)for(var Xe=0;Xe<Be.length;Xe++)ka(Be[Xe],nt);else if("LineString"===it)Le(Be,nt,st,!1);else if("MultiLineString"===it){if(Te.lineMetrics){for(Xe=0;Xe<Be.length;Xe++)Le(Be[Xe],nt=[],st,!1),he.push(Qi(ke,"LineString",nt,_e.properties));return}le(Be,nt,st,!1)}else if("Polygon"===it)le(Be,nt,st,!0);else{if("MultiPolygon"!==it){if("GeometryCollection"===it){for(Xe=0;Xe<_e.geometry.geometries.length;Xe++)It(he,{id:ke,geometry:_e.geometry.geometries[Xe],properties:_e.properties},Te,Oe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Xe=0;Xe<Be.length;Xe++){var qt=[];le(Be[Xe],qt,st,!0),nt.push(qt)}}he.push(Qi(ke,it,nt,_e.properties))}}function ka(he,_e){_e.push(ce(he[0])),_e.push(Ke(he[1])),_e.push(0)}function Le(he,_e,Te,Oe){for(var Be,it,st=0,nt=0;nt<he.length;nt++){var ke=ce(he[nt][0]),Xe=Ke(he[nt][1]);_e.push(ke),_e.push(Xe),_e.push(0),nt>0&&(st+=Oe?(Be*Xe-ke*it)/2:Math.sqrt(Math.pow(ke-Be,2)+Math.pow(Xe-it,2))),Be=ke,it=Xe}var qt=_e.length-3;_e[2]=1,function Jt(yt,Lt,un,ln){for(var In,Bt=ln,tn=un-Lt>>1,jt=un-Lt,ir=yt[Lt],rr=yt[Lt+1],wn=yt[un],Ii=yt[un+1],zn=Lt+3;zn<un;zn+=3){var Di=Ti(yt[zn],yt[zn+1],ir,rr,wn,Ii);if(Di>Bt)In=zn,Bt=Di;else if(Di===Bt){var Fi=Math.abs(zn-tn);Fi<jt&&(In=zn,jt=Fi)}}Bt>ln&&(In-Lt>3&&Jt(yt,Lt,In,ln),yt[In+2]=Bt,un-In>3&&Jt(yt,In,un,ln))}(_e,0,qt,Te),_e[qt+2]=1,_e.size=Math.abs(st),_e.start=0,_e.end=_e.size}function le(he,_e,Te,Oe){for(var Be=0;Be<he.length;Be++){var it=[];Le(he[Be],it,Te,Oe),_e.push(it)}}function ce(he){return he/360+.5}function Ke(he){var _e=Math.sin(he*Math.PI/180),Te=.5-.25*Math.log((1+_e)/(1-_e))/Math.PI;return Te<0?0:Te>1?1:Te}function _t(he,_e,Te,Oe,Be,it,st,nt){if(Oe/=_e,it>=(Te/=_e)&&st<Oe)return he;if(st<Te||it>=Oe)return null;for(var ke=[],Xe=0;Xe<he.length;Xe++){var qt=he[Xe],Jt=qt.geometry,yt=qt.type,Lt=0===Be?qt.minX:qt.minY,un=0===Be?qt.maxX:qt.maxY;if(Lt>=Te&&un<Oe)ke.push(qt);else if(!(un<Te||Lt>=Oe)){var ln=[];if("Point"===yt||"MultiPoint"===yt)Gt(Jt,ln,Te,Oe,Be);else if("LineString"===yt)Ht(Jt,ln,Te,Oe,Be,!1,nt.lineMetrics);else if("MultiLineString"===yt)yr(Jt,ln,Te,Oe,Be,!1);else if("Polygon"===yt)yr(Jt,ln,Te,Oe,Be,!0);else if("MultiPolygon"===yt)for(var In=0;In<Jt.length;In++){var Bt=[];yr(Jt[In],Bt,Te,Oe,Be,!0),Bt.length&&ln.push(Bt)}if(ln.length){if(nt.lineMetrics&&"LineString"===yt){for(In=0;In<ln.length;In++)ke.push(Qi(qt.id,yt,ln[In],qt.tags));continue}"LineString"!==yt&&"MultiLineString"!==yt||(1===ln.length?(yt="LineString",ln=ln[0]):yt="MultiLineString"),"Point"!==yt&&"MultiPoint"!==yt||(yt=3===ln.length?"Point":"MultiPoint"),ke.push(Qi(qt.id,yt,ln,qt.tags))}}}return ke.length?ke:null}function Gt(he,_e,Te,Oe,Be){for(var it=0;it<he.length;it+=3){var st=he[it+Be];st>=Te&&st<=Oe&&(_e.push(he[it]),_e.push(he[it+1]),_e.push(he[it+2]))}}function Ht(he,_e,Te,Oe,Be,it,st){for(var nt,ke,Xe=Ir(he),qt=0===Be?ni:Hr,Jt=he.start,yt=0;yt<he.length-3;yt+=3){var Lt=he[yt],un=he[yt+1],ln=he[yt+2],In=he[yt+3],Bt=he[yt+4],tn=0===Be?Lt:un,jt=0===Be?In:Bt,ir=!1;st&&(nt=Math.sqrt(Math.pow(Lt-In,2)+Math.pow(un-Bt,2))),tn<Te?jt>Te&&(ke=qt(Xe,Lt,un,In,Bt,Te),st&&(Xe.start=Jt+nt*ke)):tn>Oe?jt<Oe&&(ke=qt(Xe,Lt,un,In,Bt,Oe),st&&(Xe.start=Jt+nt*ke)):ei(Xe,Lt,un,ln),jt<Te&&tn>=Te&&(ke=qt(Xe,Lt,un,In,Bt,Te),ir=!0),jt>Oe&&tn<=Oe&&(ke=qt(Xe,Lt,un,In,Bt,Oe),ir=!0),!it&&ir&&(st&&(Xe.end=Jt+nt*ke),_e.push(Xe),Xe=Ir(he)),st&&(Jt+=nt)}var rr=he.length-3;Lt=he[rr],un=he[rr+1],ln=he[rr+2],(tn=0===Be?Lt:un)>=Te&&tn<=Oe&&ei(Xe,Lt,un,ln),rr=Xe.length-3,it&&rr>=3&&(Xe[rr]!==Xe[0]||Xe[rr+1]!==Xe[1])&&ei(Xe,Xe[0],Xe[1],Xe[2]),Xe.length&&_e.push(Xe)}function Ir(he){var _e=[];return _e.size=he.size,_e.start=he.start,_e.end=he.end,_e}function yr(he,_e,Te,Oe,Be,it){for(var st=0;st<he.length;st++)Ht(he[st],_e,Te,Oe,Be,it,!1)}function ei(he,_e,Te,Oe){he.push(_e),he.push(Te),he.push(Oe)}function ni(he,_e,Te,Oe,Be,it){var st=(it-_e)/(Oe-_e);return he.push(it),he.push(Te+(Be-Te)*st),he.push(1),st}function Hr(he,_e,Te,Oe,Be,it){var st=(it-Te)/(Be-Te);return he.push(_e+(Oe-_e)*st),he.push(it),he.push(1),st}function Bs(he,_e){for(var Te=[],Oe=0;Oe<he.length;Oe++){var Be,it=he[Oe],st=it.type;if("Point"===st||"MultiPoint"===st||"LineString"===st)Be=ls(it.geometry,_e);else if("MultiLineString"===st||"Polygon"===st){Be=[];for(var nt=0;nt<it.geometry.length;nt++)Be.push(ls(it.geometry[nt],_e))}else if("MultiPolygon"===st)for(Be=[],nt=0;nt<it.geometry.length;nt++){for(var ke=[],Xe=0;Xe<it.geometry[nt].length;Xe++)ke.push(ls(it.geometry[nt][Xe],_e));Be.push(ke)}Te.push(Qi(it.id,st,Be,it.tags))}return Te}function ls(he,_e){var Te=[];Te.size=he.size,void 0!==he.start&&(Te.start=he.start,Te.end=he.end);for(var Oe=0;Oe<he.length;Oe+=3)Te.push(he[Oe]+_e,he[Oe+1],he[Oe+2]);return Te}function xo(he,_e){if(he.transformed)return he;var Te,Oe,Be,it=1<<he.z,st=he.x,nt=he.y;for(Te=0;Te<he.features.length;Te++){var ke=he.features[Te],Xe=ke.geometry,qt=ke.type;if(ke.geometry=[],1===qt)for(Oe=0;Oe<Xe.length;Oe+=2)ke.geometry.push(Cr(Xe[Oe],Xe[Oe+1],_e,it,st,nt));else for(Oe=0;Oe<Xe.length;Oe++){var Jt=[];for(Be=0;Be<Xe[Oe].length;Be+=2)Jt.push(Cr(Xe[Oe][Be],Xe[Oe][Be+1],_e,it,st,nt));ke.geometry.push(Jt)}}return he.transformed=!0,he}function Cr(he,_e,Te,Oe,Be,it){return[Math.round(Te*(he*Oe-Be)),Math.round(Te*(_e*Oe-it))]}function ml(he,_e,Te,Oe,Be){for(var it=_e===Be.maxZoom?0:Be.tolerance/((1<<_e)*Be.extent),st={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Te,y:Oe,z:_e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},nt=0;nt<he.length;nt++){st.numFeatures++,Wu(st,he[nt],it,Be);var ke=he[nt].minX,Xe=he[nt].minY,qt=he[nt].maxX,Jt=he[nt].maxY;ke<st.minX&&(st.minX=ke),Xe<st.minY&&(st.minY=Xe),qt>st.maxX&&(st.maxX=qt),Jt>st.maxY&&(st.maxY=Jt)}return st}function Wu(he,_e,Te,Oe){var Be=_e.geometry,it=_e.type,st=[];if("Point"===it||"MultiPoint"===it)for(var nt=0;nt<Be.length;nt+=3)st.push(Be[nt]),st.push(Be[nt+1]),he.numPoints++,he.numSimplified++;else if("LineString"===it)fu(st,Be,he,Te,!1,!1);else if("MultiLineString"===it||"Polygon"===it)for(nt=0;nt<Be.length;nt++)fu(st,Be[nt],he,Te,"Polygon"===it,0===nt);else if("MultiPolygon"===it)for(var ke=0;ke<Be.length;ke++){var Xe=Be[ke];for(nt=0;nt<Xe.length;nt++)fu(st,Xe[nt],he,Te,!0,0===nt)}if(st.length){var qt=_e.tags||null;if("LineString"===it&&Oe.lineMetrics){for(var Jt in qt={},_e.tags)qt[Jt]=_e.tags[Jt];qt.mapbox_clip_start=Be.start/Be.size,qt.mapbox_clip_end=Be.end/Be.size}var yt={geometry:st,type:"Polygon"===it||"MultiPolygon"===it?3:"LineString"===it||"MultiLineString"===it?2:1,tags:qt};null!==_e.id&&(yt.id=_e.id),he.features.push(yt)}}function fu(he,_e,Te,Oe,Be,it){var st=Oe*Oe;if(Oe>0&&_e.size<(Be?st:Oe))Te.numPoints+=_e.length/3;else{for(var nt=[],ke=0;ke<_e.length;ke+=3)(0===Oe||_e[ke+2]>st)&&(Te.numSimplified++,nt.push(_e[ke]),nt.push(_e[ke+1])),Te.numPoints++;Be&&function(Xe,qt){for(var Jt=0,yt=0,Lt=Xe.length,un=Lt-2;yt<Lt;un=yt,yt+=2)Jt+=(Xe[yt]-Xe[un])*(Xe[yt+1]+Xe[un+1]);if(Jt>0===qt)for(yt=0,Lt=Xe.length;yt<Lt/2;yt+=2){var ln=Xe[yt],In=Xe[yt+1];Xe[yt]=Xe[Lt-2-yt],Xe[yt+1]=Xe[Lt-1-yt],Xe[Lt-2-yt]=ln,Xe[Lt-1-yt]=In}}(nt,it),he.push(nt)}}function ta(he,_e){var Te=(_e=this.options=function(Be,it){for(var st in it)Be[st]=it[st];return Be}(Object.create(this.options),_e)).debug;if(Te&&console.time("preprocess data"),_e.maxZoom<0||_e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(_e.promoteId&&_e.generateId)throw new Error("promoteId and generateId cannot be used together.");var Be,it,st,nt,ke,Xe,Oe=function(Be,it){var st=[];if("FeatureCollection"===Be.type)for(var nt=0;nt<Be.features.length;nt++)It(st,Be.features[nt],it,nt);else It(st,"Feature"===Be.type?Be:{geometry:Be},it);return st}(he,_e);this.tiles={},this.tileCoords=[],Te&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",_e.indexMaxZoom,_e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Be=Oe,it=_e,st=it.buffer/it.extent,nt=Be,ke=_t(Be,1,-1-st,st,0,-1,2,it),Xe=_t(Be,1,1-st,2+st,0,-1,2,it),(ke||Xe)&&(nt=_t(Be,1,-st,1+st,0,-1,2,it)||[],ke&&(nt=Bs(ke,1).concat(nt)),Xe&&(nt=nt.concat(Bs(Xe,-1)))),Oe=nt).length&&this.splitTile(Oe,0,0,0),Te&&(Oe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Fs(he,_e,Te){return 32*((1<<he)*Te+_e)+he}function yi(he,_e){var Te=he.tileID.canonical;if(!this._geoJSONIndex)return _e(null,null);var Oe=this._geoJSONIndex.getTile(Te.z,Te.x,Te.y);if(!Oe)return _e(null,null);var Be=new oe(Oe.features),it=He(Be);0===it.byteOffset&&it.byteLength===it.buffer.byteLength||(it=new Uint8Array(it)),_e(null,{vectorTile:Be,rawData:it.buffer})}$t.prototype.load=function(he){var _e=this.options,Te=_e.log,Oe=_e.minZoom,Be=_e.maxZoom,it=_e.nodeSize;Te&&console.time("total time");var st="prepare "+he.length+" points";Te&&console.time(st),this.points=he;for(var nt=[],ke=0;ke<he.length;ke++)he[ke].geometry&&nt.push(Nt(he[ke],ke));this.trees[Be+1]=new Et(nt,er,lr,it,Float32Array),Te&&console.timeEnd(st);for(var Xe=Be;Xe>=Oe;Xe--){var qt=+Date.now();nt=this._cluster(nt,Xe),this.trees[Xe]=new Et(nt,er,lr,it,Float32Array),Te&&console.log("z%d: %d clusters in %dms",Xe,nt.length,+Date.now()-qt)}return Te&&console.timeEnd("total time"),this},$t.prototype.getClusters=function(he,_e){var Te=((he[0]+180)%360+360)%360-180,Oe=Math.max(-90,Math.min(90,he[1])),Be=180===he[2]?180:((he[2]+180)%360+360)%360-180,it=Math.max(-90,Math.min(90,he[3]));if(he[2]-he[0]>=360)Te=-180,Be=180;else if(Te>Be){var st=this.getClusters([Te,Oe,180,it],_e),nt=this.getClusters([-180,Oe,Be,it],_e);return st.concat(nt)}for(var ke=this.trees[this._limitZoom(_e)],Xe=[],qt=0,Jt=ke.range(ar(Te),Zt(it),ar(Be),Zt(Oe));qt<Jt.length;qt+=1){var yt=ke.points[Jt[qt]];Xe.push(yt.numPoints?Bn(yt):this.points[yt.index])}return Xe},$t.prototype.getChildren=function(he){var _e=this._getOriginId(he),Te=this._getOriginZoom(he),Oe="No cluster with the specified id.",Be=this.trees[Te];if(!Be)throw new Error(Oe);var it=Be.points[_e];if(!it)throw new Error(Oe);for(var st=this.options.radius/(this.options.extent*Math.pow(2,Te-1)),nt=[],ke=0,Xe=Be.within(it.x,it.y,st);ke<Xe.length;ke+=1){var qt=Be.points[Xe[ke]];qt.parentId===he&&nt.push(qt.numPoints?Bn(qt):this.points[qt.index])}if(0===nt.length)throw new Error(Oe);return nt},$t.prototype.getLeaves=function(he,_e,Te){var Oe=[];return this._appendLeaves(Oe,he,_e=_e||10,Te=Te||0,0),Oe},$t.prototype.getTile=function(he,_e,Te){var Oe=this.trees[this._limitZoom(he)],Be=Math.pow(2,he),it=this.options,st=it.radius/it.extent,nt=(Te-st)/Be,ke=(Te+1+st)/Be,Xe={features:[]};return this._addTileFeatures(Oe.range((_e-st)/Be,nt,(_e+1+st)/Be,ke),Oe.points,_e,Te,Be,Xe),0===_e&&this._addTileFeatures(Oe.range(1-st/Be,nt,1,ke),Oe.points,Be,Te,Be,Xe),_e===Be-1&&this._addTileFeatures(Oe.range(0,nt,st/Be,ke),Oe.points,-1,Te,Be,Xe),Xe.features.length?Xe:null},$t.prototype.getClusterExpansionZoom=function(he){for(var _e=this._getOriginZoom(he)-1;_e<=this.options.maxZoom;){var Te=this.getChildren(he);if(_e++,1!==Te.length)break;he=Te[0].properties.cluster_id}return _e},$t.prototype._appendLeaves=function(he,_e,Te,Oe,Be){for(var it=0,st=this.getChildren(_e);it<st.length;it+=1){var nt=st[it],ke=nt.properties;if(ke&&ke.cluster?Be+ke.point_count<=Oe?Be+=ke.point_count:Be=this._appendLeaves(he,ke.cluster_id,Te,Oe,Be):Be<Oe?Be++:he.push(nt),he.length===Te)break}return Be},$t.prototype._addTileFeatures=function(he,_e,Te,Oe,Be,it){for(var st=0,nt=he;st<nt.length;st+=1){var ke=_e[nt[st]],Xe=ke.numPoints,qt={type:1,geometry:[[Math.round(this.options.extent*(ke.x*Be-Te)),Math.round(this.options.extent*(ke.y*Be-Oe))]],tags:Xe?Nn(ke):this.points[ke.index].properties},Jt=void 0;Xe?Jt=ke.id:this.options.generateId?Jt=ke.index:this.points[ke.index].id&&(Jt=this.points[ke.index].id),void 0!==Jt&&(qt.id=Jt),it.features.push(qt)}},$t.prototype._limitZoom=function(he){return Math.max(this.options.minZoom,Math.min(+he,this.options.maxZoom+1))},$t.prototype._cluster=function(he,_e){for(var Te=[],Oe=this.options,Be=Oe.reduce,it=Oe.minPoints,st=Oe.radius/(Oe.extent*Math.pow(2,_e)),nt=0;nt<he.length;nt++){var ke=he[nt];if(!(ke.zoom<=_e)){ke.zoom=_e;for(var Xe=this.trees[_e+1],qt=Xe.within(ke.x,ke.y,st),Jt=ke.numPoints||1,yt=Jt,Lt=0,un=qt;Lt<un.length;Lt+=1){var ln=Xe.points[un[Lt]];ln.zoom>_e&&(yt+=ln.numPoints||1)}if(yt>=it){for(var In=ke.x*Jt,Bt=ke.y*Jt,tn=Be&&Jt>1?this._map(ke,!0):null,jt=(nt<<5)+(_e+1)+this.points.length,ir=0,rr=qt;ir<rr.length;ir+=1){var wn=Xe.points[rr[ir]];if(!(wn.zoom<=_e)){wn.zoom=_e;var Ii=wn.numPoints||1;In+=wn.x*Ii,Bt+=wn.y*Ii,wn.parentId=jt,Be&&(tn||(tn=this._map(ke,!0)),Be(tn,this._map(wn)))}}ke.parentId=jt,Te.push(kn(In/yt,Bt/yt,jt,yt,tn))}else if(Te.push(ke),yt>1)for(var zn=0,Di=qt;zn<Di.length;zn+=1){var Fi=Xe.points[Di[zn]];Fi.zoom<=_e||(Fi.zoom=_e,Te.push(Fi))}}}return Te},$t.prototype._getOriginId=function(he){return he-this.points.length>>5},$t.prototype._getOriginZoom=function(he){return(he-this.points.length)%32},$t.prototype._map=function(he,_e){if(he.numPoints)return _e?ne({},he.properties):he.properties;var Te=this.points[he.index].properties,Oe=this.options.map(Te);return _e&&Oe===Te?ne({},Oe):Oe},ta.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ta.prototype.splitTile=function(he,_e,Te,Oe,Be,it,st){for(var nt=[he,_e,Te,Oe],ke=this.options,Xe=ke.debug;nt.length;){Oe=nt.pop(),Te=nt.pop(),_e=nt.pop(),he=nt.pop();var qt=1<<_e,Jt=Fs(_e,Te,Oe),yt=this.tiles[Jt];if(!yt&&(Xe>1&&console.time("creation"),yt=this.tiles[Jt]=ml(he,_e,Te,Oe,ke),this.tileCoords.push({z:_e,x:Te,y:Oe}),Xe)){Xe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",_e,Te,Oe,yt.numFeatures,yt.numPoints,yt.numSimplified),console.timeEnd("creation"));var Lt="z"+_e;this.stats[Lt]=(this.stats[Lt]||0)+1,this.total++}if(yt.source=he,Be){if(_e===ke.maxZoom||_e===Be)continue;var un=1<<Be-_e;if(Te!==Math.floor(it/un)||Oe!==Math.floor(st/un))continue}else if(_e===ke.indexMaxZoom||yt.numPoints<=ke.indexMaxPoints)continue;if(yt.source=null,0!==he.length){Xe>1&&console.time("clipping");var ln,In,Bt,tn,jt,ir,rr=.5*ke.buffer/ke.extent,wn=.5-rr,Ii=.5+rr,zn=1+rr;ln=In=Bt=tn=null,jt=_t(he,qt,Te-rr,Te+Ii,0,yt.minX,yt.maxX,ke),ir=_t(he,qt,Te+wn,Te+zn,0,yt.minX,yt.maxX,ke),he=null,jt&&(ln=_t(jt,qt,Oe-rr,Oe+Ii,1,yt.minY,yt.maxY,ke),In=_t(jt,qt,Oe+wn,Oe+zn,1,yt.minY,yt.maxY,ke),jt=null),ir&&(Bt=_t(ir,qt,Oe-rr,Oe+Ii,1,yt.minY,yt.maxY,ke),tn=_t(ir,qt,Oe+wn,Oe+zn,1,yt.minY,yt.maxY,ke),ir=null),Xe>1&&console.timeEnd("clipping"),nt.push(ln||[],_e+1,2*Te,2*Oe),nt.push(In||[],_e+1,2*Te,2*Oe+1),nt.push(Bt||[],_e+1,2*Te+1,2*Oe),nt.push(tn||[],_e+1,2*Te+1,2*Oe+1)}}},ta.prototype.getTile=function(he,_e,Te){var Oe=this.options,Be=Oe.extent,it=Oe.debug;if(he<0||he>24)return null;var st=1<<he,nt=Fs(he,_e=(_e%st+st)%st,Te);if(this.tiles[nt])return xo(this.tiles[nt],Be);it>1&&console.log("drilling down to z%d-%d-%d",he,_e,Te);for(var ke,Xe=he,qt=_e,Jt=Te;!ke&&Xe>0;)Xe--,qt=Math.floor(qt/2),Jt=Math.floor(Jt/2),ke=this.tiles[Fs(Xe,qt,Jt)];return ke&&ke.source?(it>1&&console.log("found parent tile z%d-%d-%d",Xe,qt,Jt),it>1&&console.time("drilling down"),this.splitTile(ke.source,Xe,qt,Jt,he,_e,Te),it>1&&console.timeEnd("drilling down"),this.tiles[nt]?xo(this.tiles[nt],Be):null):null};var Pu=function(he){function _e(Te,Oe,Be,it){he.call(this,Te,Oe,Be,yi),it&&(this.loadGeoJSON=it)}return he&&(_e.__proto__=he),(_e.prototype=Object.create(he&&he.prototype)).constructor=_e,_e.prototype.loadData=function(Te,Oe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Oe,this._pendingLoadDataParams=Te,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},_e.prototype._loadData=function(){var Te=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Oe=this._pendingCallback,Be=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var it=!!(Be&&Be.request&&Be.request.collectResourceTiming)&&new v.RequestPerformance(Be.request);this.loadGeoJSON(Be,function(st,nt){if(st||!nt)return Oe(st);if("object"!=typeof nt)return Oe(new Error("Input data given to '"+Be.source+"' is not a valid GeoJSON object."));!function yt(Lt,un){var ln,In=Lt&&Lt.type;if("FeatureCollection"===In)for(ln=0;ln<Lt.features.length;ln++)yt(Lt.features[ln],un);else if("GeometryCollection"===In)for(ln=0;ln<Lt.geometries.length;ln++)yt(Lt.geometries[ln],un);else if("Feature"===In)yt(Lt.geometry,un);else if("Polygon"===In)Q(Lt.coordinates,un);else if("MultiPolygon"===In)for(ln=0;ln<Lt.coordinates.length;ln++)Q(Lt.coordinates[ln],un);return Lt}(nt,!0);try{if(Be.filter){var ke=v.createExpression(Be.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===ke.result)throw new Error(ke.value.map(function(yt){return yt.key+": "+yt.message}).join(", "));var Xe=nt.features.filter(function(yt){return ke.value.evaluate({zoom:0},yt)});nt={type:"FeatureCollection",features:Xe}}Te._geoJSONIndex=Be.cluster?new $t(function(yt){var Lt=yt.superclusterOptions,un=yt.clusterProperties;if(!un||!Lt)return Lt;for(var ln={},In={},Bt={accumulated:null,zoom:0},tn={properties:null},jt=Object.keys(un),ir=0,rr=jt;ir<rr.length;ir+=1){var wn=rr[ir],Ii=un[wn],zn=Ii[0],Di=v.createExpression(Ii[1]),Fi=v.createExpression("string"==typeof zn?[zn,["accumulated"],["get",wn]]:zn);ln[wn]=Di.value,In[wn]=Fi.value}return Lt.map=function($r){tn.properties=$r;for(var _i={},Hi=0,fi=jt;Hi<fi.length;Hi+=1){var $n=fi[Hi];_i[$n]=ln[$n].evaluate(Bt,tn)}return _i},Lt.reduce=function($r,_i){tn.properties=_i;for(var Hi=0,fi=jt;Hi<fi.length;Hi+=1){var $n=fi[Hi];Bt.accumulated=$r[$n],$r[$n]=In[$n].evaluate(Bt,tn)}},Lt}(Be)).load(nt.features):new ta(yt=nt,Be.geojsonVtOptions)}catch(yt){return Oe(yt)}var yt;Te.loaded={};var qt={};if(it){var Jt=it.finish();Jt&&(qt.resourceTiming={},qt.resourceTiming[Be.source]=JSON.parse(JSON.stringify(Jt)))}Oe(null,qt)})}},_e.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},_e.prototype.reloadTile=function(Te,Oe){var Be=this.loaded;return Be&&Be[Te.uid]?he.prototype.reloadTile.call(this,Te,Oe):this.loadTile(Te,Oe)},_e.prototype.loadGeoJSON=function(Te,Oe){if(Te.request)v.getJSON(Te.request,Oe);else{if("string"!=typeof Te.data)return Oe(new Error("Input data given to '"+Te.source+"' is not a valid GeoJSON object."));try{return Oe(null,JSON.parse(Te.data))}catch{return Oe(new Error("Input data given to '"+Te.source+"' is not a valid GeoJSON object."))}}},_e.prototype.removeSource=function(Te,Oe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Oe()},_e.prototype.getClusterExpansionZoom=function(Te,Oe){try{Oe(null,this._geoJSONIndex.getClusterExpansionZoom(Te.clusterId))}catch(Be){Oe(Be)}},_e.prototype.getClusterChildren=function(Te,Oe){try{Oe(null,this._geoJSONIndex.getChildren(Te.clusterId))}catch(Be){Oe(Be)}},_e.prototype.getClusterLeaves=function(Te,Oe){try{Oe(null,this._geoJSONIndex.getLeaves(Te.clusterId,Te.limit,Te.offset))}catch(Be){Oe(Be)}},_e}(K),si=function(he){var _e=this;this.self=he,this.actor=new v.Actor(he,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:K,geojson:Pu},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Te,Oe){if(_e.workerSourceTypes[Te])throw new Error('Worker source with name "'+Te+'" already registered.');_e.workerSourceTypes[Te]=Oe},this.self.registerRTLTextPlugin=function(Te){if(v.plugin.isParsed())throw new Error("RTL text plugin already registered.");v.plugin.applyArabicShaping=Te.applyArabicShaping,v.plugin.processBidirectionalText=Te.processBidirectionalText,v.plugin.processStyledBidirectionalText=Te.processStyledBidirectionalText}};return si.prototype.setReferrer=function(he,_e){this.referrer=_e},si.prototype.setImages=function(he,_e,Te){for(var Oe in this.availableImages[he]=_e,this.workerSources[he]){var Be=this.workerSources[he][Oe];for(var it in Be)Be[it].availableImages=_e}Te()},si.prototype.setLayers=function(he,_e,Te){this.getLayerIndex(he).replace(_e),Te()},si.prototype.updateLayers=function(he,_e,Te){this.getLayerIndex(he).update(_e.layers,_e.removedIds),Te()},si.prototype.loadTile=function(he,_e,Te){this.getWorkerSource(he,_e.type,_e.source).loadTile(_e,Te)},si.prototype.loadDEMTile=function(he,_e,Te){this.getDEMWorkerSource(he,_e.source).loadTile(_e,Te)},si.prototype.reloadTile=function(he,_e,Te){this.getWorkerSource(he,_e.type,_e.source).reloadTile(_e,Te)},si.prototype.abortTile=function(he,_e,Te){this.getWorkerSource(he,_e.type,_e.source).abortTile(_e,Te)},si.prototype.removeTile=function(he,_e,Te){this.getWorkerSource(he,_e.type,_e.source).removeTile(_e,Te)},si.prototype.removeDEMTile=function(he,_e){this.getDEMWorkerSource(he,_e.source).removeTile(_e)},si.prototype.removeSource=function(he,_e,Te){if(this.workerSources[he]&&this.workerSources[he][_e.type]&&this.workerSources[he][_e.type][_e.source]){var Oe=this.workerSources[he][_e.type][_e.source];delete this.workerSources[he][_e.type][_e.source],void 0!==Oe.removeSource?Oe.removeSource(_e,Te):Te()}},si.prototype.loadWorkerSource=function(he,_e,Te){try{this.self.importScripts(_e.url),Te()}catch(Oe){Te(Oe.toString())}},si.prototype.syncRTLPluginState=function(he,_e,Te){try{v.plugin.setState(_e);var Oe=v.plugin.getPluginURL();if(v.plugin.isLoaded()&&!v.plugin.isParsed()&&null!=Oe){this.self.importScripts(Oe);var Be=v.plugin.isParsed();Te(Be?void 0:new Error("RTL Text Plugin failed to import scripts from "+Oe),Be)}}catch(it){Te(it.toString())}},si.prototype.getAvailableImages=function(he){var _e=this.availableImages[he];return _e||(_e=[]),_e},si.prototype.getLayerIndex=function(he){var _e=this.layerIndexes[he];return _e||(_e=this.layerIndexes[he]=new k),_e},si.prototype.getWorkerSource=function(he,_e,Te){var Oe=this;return this.workerSources[he]||(this.workerSources[he]={}),this.workerSources[he][_e]||(this.workerSources[he][_e]={}),this.workerSources[he][_e][Te]||(this.workerSources[he][_e][Te]=new this.workerSourceTypes[_e]({send:function(Be,it,st){Oe.actor.send(Be,it,st,he)}},this.getLayerIndex(he),this.getAvailableImages(he))),this.workerSources[he][_e][Te]},si.prototype.getDEMWorkerSource=function(he,_e){return this.demWorkerSources[he]||(this.demWorkerSources[he]={}),this.demWorkerSources[he][_e]||(this.demWorkerSources[he][_e]=new ie),this.demWorkerSources[he][_e]},si.prototype.enforceCacheSizeLimit=function(he,_e){v.enforceCacheSizeLimit(_e)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new si(self)),si}),$(0,function(v){var G=v.createCommonjsModule(function(p){function y(T){return!g(T)}function g(T){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var U,Z,se=new Blob([""],{type:"text/javascript"}),ge=URL.createObjectURL(se);try{Z=new Worker(ge),U=!0}catch{U=!1}return Z&&Z.terminate(),URL.revokeObjectURL(ge),U}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var U=document.createElement("canvas");U.width=U.height=1;var Z=U.getContext("2d");if(!Z)return!1;var se=Z.getImageData(0,0,1,1);return se&&se.width===U.width}()?(void 0===w[B=T&&T.failIfMajorPerformanceCaveat]&&(w[B]=function(U){var ge,Re,Me,Z=(ge=U,Re=document.createElement("canvas"),(Me=Object.create(y.webGLContextAttributes)).failIfMajorPerformanceCaveat=ge,Re.probablySupportsContext?Re.probablySupportsContext("webgl",Me)||Re.probablySupportsContext("experimental-webgl",Me):Re.supportsContext?Re.supportsContext("webgl",Me)||Re.supportsContext("experimental-webgl",Me):Re.getContext("webgl",Me)||Re.getContext("experimental-webgl",Me));if(!Z)return!1;var se=Z.createShader(Z.VERTEX_SHADER);return!(!se||Z.isContextLost())&&(Z.shaderSource(se,"void main() {}"),Z.compileShader(se),!0===Z.getShaderParameter(se,Z.COMPILE_STATUS))}(B)),w[B]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var B}p.exports?p.exports=y:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=y,window.mapboxgl.notSupportedReason=g);var w={};y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),q={create:function(p,y,g){var w=v.window.document.createElement(p);return void 0!==y&&(w.className=y),g&&g.appendChild(w),w},createNS:function(p,y){return v.window.document.createElementNS(p,y)}},k=v.window.document&&v.window.document.documentElement.style;function I(p){if(!k)return p[0];for(var y=0;y<p.length;y++)if(p[y]in k)return p[y];return p[0]}var S,M=I(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);q.disableDrag=function(){k&&M&&(S=k[M],k[M]="none")},q.enableDrag=function(){k&&M&&(k[M]=S)};var H=I(["transform","WebkitTransform"]);q.setTransform=function(p,y){p.style[H]=y};var K=!1;try{var J=Object.defineProperty({},"passive",{get:function(){K=!0}});v.window.addEventListener("test",J,J),v.window.removeEventListener("test",J,J)}catch{K=!1}q.addEventListener=function(p,y,g,w){void 0===w&&(w={}),p.addEventListener(y,g,"passive"in w&&K?w:w.capture)},q.removeEventListener=function(p,y,g,w){void 0===w&&(w={}),p.removeEventListener(y,g,"passive"in w&&K?w:w.capture)};var ie=function(p){p.preventDefault(),p.stopPropagation(),v.window.removeEventListener("click",ie,!0)};function Q(p){var y=p.userImage;return!!(y&&y.render&&y.render())&&(p.data.replace(new Uint8Array(y.data.buffer)),!0)}q.suppressClick=function(){v.window.addEventListener("click",ie,!0),v.window.setTimeout(function(){v.window.removeEventListener("click",ie,!0)},0)},q.mousePos=function(p,y){var g=p.getBoundingClientRect();return new v.Point(y.clientX-g.left-p.clientLeft,y.clientY-g.top-p.clientTop)},q.touchPos=function(p,y){for(var g=p.getBoundingClientRect(),w=[],T=0;T<y.length;T++)w.push(new v.Point(y[T].clientX-g.left-p.clientLeft,y[T].clientY-g.top-p.clientTop));return w},q.mouseButton=function(p){return void 0!==v.window.InstallTrigger&&2===p.button&&p.ctrlKey&&v.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:p.button},q.remove=function(p){p.parentNode&&p.parentNode.removeChild(p)};var ae=function(p){function y(){p.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new v.RGBAImage({width:1,height:1}),this.dirty=!0}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.isLoaded=function(){return this.loaded},y.prototype.setLoaded=function(g){if(this.loaded!==g&&(this.loaded=g,g)){for(var w=0,T=this.requestors;w<T.length;w+=1){var B=T[w];this._notify(B.ids,B.callback)}this.requestors=[]}},y.prototype.getImage=function(g){return this.images[g]},y.prototype.addImage=function(g,w){this._validate(g,w)&&(this.images[g]=w)},y.prototype._validate=function(g,w){var T=!0;return this._validateStretch(w.stretchX,w.data&&w.data.width)||(this.fire(new v.ErrorEvent(new Error('Image "'+g+'" has invalid "stretchX" value'))),T=!1),this._validateStretch(w.stretchY,w.data&&w.data.height)||(this.fire(new v.ErrorEvent(new Error('Image "'+g+'" has invalid "stretchY" value'))),T=!1),this._validateContent(w.content,w)||(this.fire(new v.ErrorEvent(new Error('Image "'+g+'" has invalid "content" value'))),T=!1),T},y.prototype._validateStretch=function(g,w){if(!g)return!0;for(var T=0,B=0,U=g;B<U.length;B+=1){var Z=U[B];if(Z[0]<T||Z[1]<Z[0]||w<Z[1])return!1;T=Z[1]}return!0},y.prototype._validateContent=function(g,w){return!(g&&(4!==g.length||g[0]<0||w.data.width<g[0]||g[1]<0||w.data.height<g[1]||g[2]<0||w.data.width<g[2]||g[3]<0||w.data.height<g[3]||g[2]<g[0]||g[3]<g[1]))},y.prototype.updateImage=function(g,w){w.version=this.images[g].version+1,this.images[g]=w,this.updatedImages[g]=!0},y.prototype.removeImage=function(g){var w=this.images[g];delete this.images[g],delete this.patterns[g],w.userImage&&w.userImage.onRemove&&w.userImage.onRemove()},y.prototype.listImages=function(){return Object.keys(this.images)},y.prototype.getImages=function(g,w){var T=!0;if(!this.isLoaded())for(var B=0,U=g;B<U.length;B+=1)this.images[U[B]]||(T=!1);this.isLoaded()||T?this._notify(g,w):this.requestors.push({ids:g,callback:w})},y.prototype._notify=function(g,w){for(var T={},B=0,U=g;B<U.length;B+=1){var Z=U[B];this.images[Z]||this.fire(new v.Event("styleimagemissing",{id:Z}));var se=this.images[Z];se?T[Z]={data:se.data.clone(),pixelRatio:se.pixelRatio,sdf:se.sdf,version:se.version,stretchX:se.stretchX,stretchY:se.stretchY,content:se.content,hasRenderCallback:Boolean(se.userImage&&se.userImage.render)}:v.warnOnce('Image "'+Z+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}w(null,T)},y.prototype.getPixelSize=function(){var g=this.atlasImage;return{width:g.width,height:g.height}},y.prototype.getPattern=function(g){var w=this.patterns[g],T=this.getImage(g);if(!T)return null;if(w&&w.position.version===T.version)return w.position;if(w)w.position.version=T.version;else{var B={w:T.data.width+2,h:T.data.height+2,x:0,y:0},U=new v.ImagePosition(B,T);this.patterns[g]={bin:B,position:U}}return this._updatePatternAtlas(),this.patterns[g].position},y.prototype.bind=function(g){var w=g.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new v.Texture(g,this.atlasImage,w.RGBA),this.atlasTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE)},y.prototype._updatePatternAtlas=function(){var g=[];for(var w in this.patterns)g.push(this.patterns[w].bin);var T=v.potpack(g),B=T.w,U=T.h,Z=this.atlasImage;for(var se in Z.resize({width:B||1,height:U||1}),this.patterns){var ge=this.patterns[se].bin,Re=ge.x+1,Me=ge.y+1,De=this.images[se].data,Ve=De.width,Ue=De.height;v.RGBAImage.copy(De,Z,{x:0,y:0},{x:Re,y:Me},{width:Ve,height:Ue}),v.RGBAImage.copy(De,Z,{x:0,y:Ue-1},{x:Re,y:Me-1},{width:Ve,height:1}),v.RGBAImage.copy(De,Z,{x:0,y:0},{x:Re,y:Me+Ue},{width:Ve,height:1}),v.RGBAImage.copy(De,Z,{x:Ve-1,y:0},{x:Re-1,y:Me},{width:1,height:Ue}),v.RGBAImage.copy(De,Z,{x:0,y:0},{x:Re+Ve,y:Me},{width:1,height:Ue})}this.dirty=!0},y.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},y.prototype.dispatchRenderCallbacks=function(g){for(var w=0,T=g;w<T.length;w+=1){var B=T[w];if(!this.callbackDispatchedThisFrame[B]){this.callbackDispatchedThisFrame[B]=!0;var U=this.images[B];Q(U)&&this.updateImage(B,U)}}},y}(v.Evented),me=fe,we=fe,oe=1e20;function fe(p,y,g,w,T,B){this.fontSize=p||24,this.buffer=void 0===y?3:y,this.cutoff=w||.25,this.fontFamily=T||"sans-serif",this.fontWeight=B||"normal",this.radius=g||8;var U=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=U,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(U*U),this.gridInner=new Float64Array(U*U),this.f=new Float64Array(U),this.d=new Float64Array(U),this.z=new Float64Array(U+1),this.v=new Int16Array(U),this.middle=Math.round(U/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function pe(p,y,g,w,T,B,U){for(var Z=0;Z<y;Z++){for(var se=0;se<g;se++)w[se]=p[se*y+Z];for(Ce(w,T,B,U,g),se=0;se<g;se++)p[se*y+Z]=T[se]}for(se=0;se<g;se++){for(Z=0;Z<y;Z++)w[Z]=p[se*y+Z];for(Ce(w,T,B,U,y),Z=0;Z<y;Z++)p[se*y+Z]=Math.sqrt(T[Z])}}function Ce(p,y,g,w,T){g[0]=0,w[0]=-oe,w[1]=+oe;for(var B=1,U=0;B<T;B++){for(var Z=(p[B]+B*B-(p[g[U]]+g[U]*g[U]))/(2*B-2*g[U]);Z<=w[U];)U--,Z=(p[B]+B*B-(p[g[U]]+g[U]*g[U]))/(2*B-2*g[U]);g[++U]=B,w[U]=Z,w[U+1]=+oe}for(B=0,U=0;B<T;B++){for(;w[U+1]<B;)U++;y[B]=(B-g[U])*(B-g[U])+p[g[U]]}}fe.prototype.draw=function(p){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(p,this.buffer,this.middle);for(var y=this.ctx.getImageData(0,0,this.size,this.size),g=new Uint8ClampedArray(this.size*this.size),w=0;w<this.size*this.size;w++){var T=y.data[4*w+3]/255;this.gridOuter[w]=1===T?0:0===T?oe:Math.pow(Math.max(0,.5-T),2),this.gridInner[w]=1===T?oe:0===T?0:Math.pow(Math.max(0,T-.5),2)}for(pe(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),pe(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),w=0;w<this.size*this.size;w++)g[w]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[w]-this.gridInner[w])/this.radius+this.cutoff))));return g},me.default=we;var qe=function(p,y){this.requestManager=p,this.localIdeographFontFamily=y,this.entries={}};qe.prototype.setURL=function(p){this.url=p},qe.prototype.getGlyphs=function(p,y){var g=this,w=[];for(var T in p)for(var B=0,U=p[T];B<U.length;B+=1)w.push({stack:T,id:U[B]});v.asyncAll(w,function(Z,se){var ge=Z.stack,Re=Z.id,Me=g.entries[ge];Me||(Me=g.entries[ge]={glyphs:{},requests:{},ranges:{}});var De=Me.glyphs[Re];if(void 0===De){if(De=g._tinySDF(Me,ge,Re))return Me.glyphs[Re]=De,void se(null,{stack:ge,id:Re,glyph:De});var Ve=Math.floor(Re/256);if(256*Ve>65535)se(new Error("glyphs > 65535 not supported"));else if(Me.ranges[Ve])se(null,{stack:ge,id:Re,glyph:De});else{var Ue=Me.requests[Ve];Ue||(Ue=Me.requests[Ve]=[],qe.loadGlyphRange(ge,Ve,g.url,g.requestManager,function(Qe,je){if(je){for(var Ze in je)g._doesCharSupportLocalGlyph(+Ze)||(Me.glyphs[+Ze]=je[+Ze]);Me.ranges[Ve]=!0}for(var at=0,pt=Ue;at<pt.length;at+=1)(0,pt[at])(Qe,je);delete Me.requests[Ve]})),Ue.push(function(Qe,je){Qe?se(Qe):je&&se(null,{stack:ge,id:Re,glyph:je[Re]||null})})}}else se(null,{stack:ge,id:Re,glyph:De})},function(Z,se){if(Z)y(Z);else if(se){for(var ge={},Re=0,Me=se;Re<Me.length;Re+=1){var De=Me[Re],Ve=De.stack,Ue=De.id,Qe=De.glyph;(ge[Ve]||(ge[Ve]={}))[Ue]=Qe&&{id:Qe.id,bitmap:Qe.bitmap.clone(),metrics:Qe.metrics}}y(null,ge)}})},qe.prototype._doesCharSupportLocalGlyph=function(p){return!!this.localIdeographFontFamily&&(v.isChar["CJK Unified Ideographs"](p)||v.isChar["Hangul Syllables"](p)||v.isChar.Hiragana(p)||v.isChar.Katakana(p))},qe.prototype._tinySDF=function(p,y,g){var w=this.localIdeographFontFamily;if(w&&this._doesCharSupportLocalGlyph(g)){var T=p.tinySDF;if(!T){var B="400";/bold/i.test(y)?B="900":/medium/i.test(y)?B="500":/light/i.test(y)&&(B="200"),T=p.tinySDF=new qe.TinySDF(24,3,8,.25,w,B)}return{id:g,bitmap:new v.AlphaImage({width:30,height:30},T.draw(String.fromCharCode(g))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},qe.loadGlyphRange=function(p,y,g,w,T){var B=256*y,U=B+255,Z=w.transformRequest(w.normalizeGlyphsURL(g).replace("{fontstack}",p).replace("{range}",B+"-"+U),v.ResourceType.Glyphs);v.getArrayBuffer(Z,function(se,ge){if(se)T(se);else if(ge){for(var Re={},Me=0,De=v.parseGlyphPBF(ge);Me<De.length;Me+=1){var Ve=De[Me];Re[Ve.id]=Ve}T(null,Re)}})},qe.TinySDF=me;var He=function(){this.specification=v.styleSpec.light.position};He.prototype.possiblyEvaluate=function(p,y){return v.sphericalToCartesian(p.expression.evaluate(y))},He.prototype.interpolate=function(p,y,g){return{x:v.number(p.x,y.x,g),y:v.number(p.y,y.y,g),z:v.number(p.z,y.z,g)}};var ze=new v.Properties({anchor:new v.DataConstantProperty(v.styleSpec.light.anchor),position:new He,color:new v.DataConstantProperty(v.styleSpec.light.color),intensity:new v.DataConstantProperty(v.styleSpec.light.intensity)}),P=function(p){function y(g){p.call(this),this._transitionable=new v.Transitionable(ze),this.setLight(g),this._transitioning=this._transitionable.untransitioned()}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getLight=function(){return this._transitionable.serialize()},y.prototype.setLight=function(g,w){if(void 0===w&&(w={}),!this._validate(v.validateLight,g,w))for(var T in g){var B=g[T];v.endsWith(T,"-transition")?this._transitionable.setTransition(T.slice(0,-11),B):this._transitionable.setValue(T,B)}},y.prototype.updateTransitions=function(g){this._transitioning=this._transitionable.transitioned(g,this._transitioning)},y.prototype.hasTransition=function(){return this._transitioning.hasTransition()},y.prototype.recalculate=function(g){this.properties=this._transitioning.possiblyEvaluate(g)},y.prototype._validate=function(g,w,T){return(!T||!1!==T.validate)&&v.emitValidationErrors(this,g.call(v.validateStyle,v.extend({value:w,style:{glyphs:!0,sprite:!0},styleSpec:v.styleSpec})))},y}(v.Evented),N=function(p,y){this.width=p,this.height=y,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};N.prototype.getDash=function(p,y){var g=p.join(",")+String(y);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(p,y)),this.dashEntry[g]},N.prototype.getDashRanges=function(p,y,g){var w=[],T=p.length%2==1?-p[p.length-1]*g:0,B=p[0]*g,U=!0;w.push({left:T,right:B,isDash:U,zeroLength:0===p[0]});for(var Z=p[0],se=1;se<p.length;se++){var ge=p[se];w.push({left:T=Z*g,right:B=(Z+=ge)*g,isDash:U=!U,zeroLength:0===ge})}return w},N.prototype.addRoundDash=function(p,y,g){for(var w=y/2,T=-g;T<=g;T++)for(var B=this.width*(this.nextRow+g+T),U=0,Z=p[U],se=0;se<this.width;se++){se/Z.right>1&&(Z=p[++U]);var ge=Math.abs(se-Z.left),Re=Math.abs(se-Z.right),Me=Math.min(ge,Re),De=void 0,Ve=T/g*(w+1);if(Z.isDash){var Ue=w-Math.abs(Ve);De=Math.sqrt(Me*Me+Ue*Ue)}else De=w-Math.sqrt(Me*Me+Ve*Ve);this.data[B+se]=Math.max(0,Math.min(255,De+128))}},N.prototype.addRegularDash=function(p){for(var y=p.length-1;y>=0;--y){var g=p[y],w=p[y+1];g.zeroLength?p.splice(y,1):w&&w.isDash===g.isDash&&(w.left=g.left,p.splice(y,1))}var T=p[0],B=p[p.length-1];T.isDash===B.isDash&&(T.left=B.left-this.width,B.right=T.right+this.width);for(var U=this.width*this.nextRow,Z=0,se=p[Z],ge=0;ge<this.width;ge++){ge/se.right>1&&(se=p[++Z]);var Re=Math.abs(ge-se.left),Me=Math.abs(ge-se.right),De=Math.min(Re,Me);this.data[U+ge]=Math.max(0,Math.min(255,(se.isDash?De:-De)+128))}},N.prototype.addDash=function(p,y){var g=y?7:0,w=2*g+1;if(this.nextRow+w>this.height)return v.warnOnce("LineAtlas out of space"),null;for(var T=0,B=0;B<p.length;B++)T+=p[B];if(0!==T){var U=this.width/T,Z=this.getDashRanges(p,this.width,U);y?this.addRoundDash(Z,U,g):this.addRegularDash(Z)}var se={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:T};return this.nextRow+=w,this.dirty=!0,se},N.prototype.bind=function(p){var y=p.gl;this.texture?(y.bindTexture(y.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,y.texSubImage2D(y.TEXTURE_2D,0,0,0,this.width,this.height,y.ALPHA,y.UNSIGNED_BYTE,this.data))):(this.texture=y.createTexture(),y.bindTexture(y.TEXTURE_2D,this.texture),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.REPEAT),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.REPEAT),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR),y.texImage2D(y.TEXTURE_2D,0,y.ALPHA,this.width,this.height,0,y.ALPHA,y.UNSIGNED_BYTE,this.data))};var F=function p(y,g){this.workerPool=y,this.actors=[],this.currentActor=0,this.id=v.uniqueId();for(var w=this.workerPool.acquire(this.id),T=0;T<w.length;T++){var B=new p.Actor(w[T],g,this.id);B.name="Worker "+T,this.actors.push(B)}};function z(p,y,g){var w=function(T,B){if(T)return g(T);if(B){var U=v.pick(v.extend(B,p),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);B.vector_layers&&(U.vectorLayers=B.vector_layers,U.vectorLayerIds=U.vectorLayers.map(function(Z){return Z.id})),U.tiles=y.canonicalizeTileset(U,p.url),g(null,U)}};return p.url?v.getJSON(y.transformRequest(y.normalizeSourceURL(p.url),v.ResourceType.Source),w):v.browser.frame(function(){return w(null,p)})}F.prototype.broadcast=function(p,y,g){v.asyncAll(this.actors,function(w,T){w.send(p,y,T)},g=g||function(){})},F.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},F.prototype.remove=function(){this.actors.forEach(function(p){p.remove()}),this.actors=[],this.workerPool.release(this.id)},F.Actor=v.Actor;var ee=function(p,y,g){this.bounds=v.LngLatBounds.convert(this.validateBounds(p)),this.minzoom=y||0,this.maxzoom=g||24};ee.prototype.validateBounds=function(p){return Array.isArray(p)&&4===p.length?[Math.max(-180,p[0]),Math.max(-90,p[1]),Math.min(180,p[2]),Math.min(90,p[3])]:[-180,-90,180,90]},ee.prototype.contains=function(p){var y=Math.pow(2,p.z),g=Math.floor(v.mercatorXfromLng(this.bounds.getWest())*y),w=Math.floor(v.mercatorYfromLat(this.bounds.getNorth())*y),T=Math.ceil(v.mercatorXfromLng(this.bounds.getEast())*y),B=Math.ceil(v.mercatorYfromLat(this.bounds.getSouth())*y);return p.x>=g&&p.x<T&&p.y>=w&&p.y<B};var W=function(p){function y(g,w,T,B){if(p.call(this),this.id=g,this.dispatcher=T,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,v.extend(this,v.pick(w,["url","scheme","tileSize","promoteId"])),this._options=v.extend({type:"vector"},w),this._collectResourceTiming=w.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(B)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.load=function(){var g=this;this._loaded=!1,this.fire(new v.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=z(this._options,this.map._requestManager,function(w,T){g._tileJSONRequest=null,g._loaded=!0,w?g.fire(new v.ErrorEvent(w)):T&&(v.extend(g,T),T.bounds&&(g.tileBounds=new ee(T.bounds,g.minzoom,g.maxzoom)),v.postTurnstileEvent(T.tiles,g.map._requestManager._customAccessToken),v.postMapLoadEvent(T.tiles,g.map._getMapId(),g.map._requestManager._skuToken,g.map._requestManager._customAccessToken),g.fire(new v.Event("data",{dataType:"source",sourceDataType:"metadata"})),g.fire(new v.Event("data",{dataType:"source",sourceDataType:"content"})))})},y.prototype.loaded=function(){return this._loaded},y.prototype.hasTile=function(g){return!this.tileBounds||this.tileBounds.contains(g.canonical)},y.prototype.onAdd=function(g){this.map=g,this.load()},y.prototype.setSourceProperty=function(g){this._tileJSONRequest&&this._tileJSONRequest.cancel(),g(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},y.prototype.setTiles=function(g){var w=this;return this.setSourceProperty(function(){w._options.tiles=g}),this},y.prototype.setUrl=function(g){var w=this;return this.setSourceProperty(function(){w.url=g,w._options.url=g}),this},y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},y.prototype.serialize=function(){return v.extend({},this._options)},y.prototype.loadTile=function(g,w){var T=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme)),B={request:this.map._requestManager.transformRequest(T,v.ResourceType.Tile),uid:g.uid,tileID:g.tileID,zoom:g.tileID.overscaledZ,tileSize:this.tileSize*g.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:v.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function U(Z,se){return delete g.request,g.aborted?w(null):Z&&404!==Z.status?w(Z):(se&&se.resourceTiming&&(g.resourceTiming=se.resourceTiming),this.map._refreshExpiredTiles&&se&&g.setExpiryData(se),g.loadVectorData(se,this.map.painter),v.cacheEntryPossiblyAdded(this.dispatcher),w(null),void(g.reloadCallback&&(this.loadTile(g,g.reloadCallback),g.reloadCallback=null)))}B.request.collectResourceTiming=this._collectResourceTiming,g.actor&&"expired"!==g.state?"loading"===g.state?g.reloadCallback=w:g.request=g.actor.send("reloadTile",B,U.bind(this)):(g.actor=this.dispatcher.getActor(),g.request=g.actor.send("loadTile",B,U.bind(this)))},y.prototype.abortTile=function(g){g.request&&(g.request.cancel(),delete g.request),g.actor&&g.actor.send("abortTile",{uid:g.uid,type:this.type,source:this.id},void 0)},y.prototype.unloadTile=function(g){g.unloadVectorData(),g.actor&&g.actor.send("removeTile",{uid:g.uid,type:this.type,source:this.id},void 0)},y.prototype.hasTransition=function(){return!1},y}(v.Evented),ve=function(p){function y(g,w,T,B){p.call(this),this.id=g,this.dispatcher=T,this.setEventedParent(B),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=v.extend({type:"raster"},w),v.extend(this,v.pick(w,["url","scheme","tileSize"]))}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.load=function(){var g=this;this._loaded=!1,this.fire(new v.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=z(this._options,this.map._requestManager,function(w,T){g._tileJSONRequest=null,g._loaded=!0,w?g.fire(new v.ErrorEvent(w)):T&&(v.extend(g,T),T.bounds&&(g.tileBounds=new ee(T.bounds,g.minzoom,g.maxzoom)),v.postTurnstileEvent(T.tiles),v.postMapLoadEvent(T.tiles,g.map._getMapId(),g.map._requestManager._skuToken),g.fire(new v.Event("data",{dataType:"source",sourceDataType:"metadata"})),g.fire(new v.Event("data",{dataType:"source",sourceDataType:"content"})))})},y.prototype.loaded=function(){return this._loaded},y.prototype.onAdd=function(g){this.map=g,this.load()},y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},y.prototype.serialize=function(){return v.extend({},this._options)},y.prototype.hasTile=function(g){return!this.tileBounds||this.tileBounds.contains(g.canonical)},y.prototype.loadTile=function(g,w){var T=this,B=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);g.request=v.getImage(this.map._requestManager.transformRequest(B,v.ResourceType.Tile),function(U,Z){if(delete g.request,g.aborted)g.state="unloaded",w(null);else if(U)g.state="errored",w(U);else if(Z){T.map._refreshExpiredTiles&&g.setExpiryData(Z),delete Z.cacheControl,delete Z.expires;var se=T.map.painter.context,ge=se.gl;g.texture=T.map.painter.getTileTexture(Z.width),g.texture?g.texture.update(Z,{useMipmap:!0}):(g.texture=new v.Texture(se,Z,ge.RGBA,{useMipmap:!0}),g.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE,ge.LINEAR_MIPMAP_NEAREST),se.extTextureFilterAnisotropic&&ge.texParameterf(ge.TEXTURE_2D,se.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,se.extTextureFilterAnisotropicMax)),g.state="loaded",v.cacheEntryPossiblyAdded(T.dispatcher),w(null)}})},y.prototype.abortTile=function(g,w){g.request&&(g.request.cancel(),delete g.request),w()},y.prototype.unloadTile=function(g,w){g.texture&&this.map.painter.saveTileTexture(g.texture),w()},y.prototype.hasTransition=function(){return!1},y}(v.Evented),Je=function(p){function y(g,w,T,B){p.call(this,g,w,T,B),this.type="raster-dem",this.maxzoom=22,this._options=v.extend({type:"raster-dem"},w),this.encoding=w.encoding||"mapbox"}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},y.prototype.loadTile=function(g,w){var T=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function B(U,Z){U&&(g.state="errored",w(U)),Z&&(g.dem=Z,g.needsHillshadePrepare=!0,g.state="loaded",w(null))}g.request=v.getImage(this.map._requestManager.transformRequest(T,v.ResourceType.Tile),function(U,Z){if(delete g.request,g.aborted)g.state="unloaded",w(null);else if(U)g.state="errored",w(U);else if(Z){this.map._refreshExpiredTiles&&g.setExpiryData(Z),delete Z.cacheControl,delete Z.expires;var se=v.window.ImageBitmap&&Z instanceof v.window.ImageBitmap&&v.offscreenCanvasSupported()?Z:v.browser.getImageData(Z,1),ge={uid:g.uid,coord:g.tileID,source:this.id,rawImageData:se,encoding:this.encoding};g.actor&&"expired"!==g.state||(g.actor=this.dispatcher.getActor(),g.actor.send("loadDEMTile",ge,B.bind(this)))}}.bind(this)),g.neighboringTiles=this._getNeighboringTiles(g.tileID)},y.prototype._getNeighboringTiles=function(g){var w=g.canonical,T=Math.pow(2,w.z),B=(w.x-1+T)%T,U=0===w.x?g.wrap-1:g.wrap,Z=(w.x+1+T)%T,se=w.x+1===T?g.wrap+1:g.wrap,ge={};return ge[new v.OverscaledTileID(g.overscaledZ,U,w.z,B,w.y).key]={backfilled:!1},ge[new v.OverscaledTileID(g.overscaledZ,se,w.z,Z,w.y).key]={backfilled:!1},w.y>0&&(ge[new v.OverscaledTileID(g.overscaledZ,U,w.z,B,w.y-1).key]={backfilled:!1},ge[new v.OverscaledTileID(g.overscaledZ,g.wrap,w.z,w.x,w.y-1).key]={backfilled:!1},ge[new v.OverscaledTileID(g.overscaledZ,se,w.z,Z,w.y-1).key]={backfilled:!1}),w.y+1<T&&(ge[new v.OverscaledTileID(g.overscaledZ,U,w.z,B,w.y+1).key]={backfilled:!1},ge[new v.OverscaledTileID(g.overscaledZ,g.wrap,w.z,w.x,w.y+1).key]={backfilled:!1},ge[new v.OverscaledTileID(g.overscaledZ,se,w.z,Z,w.y+1).key]={backfilled:!1}),ge},y.prototype.unloadTile=function(g){g.demTexture&&this.map.painter.saveTileTexture(g.demTexture),g.fbo&&(g.fbo.destroy(),delete g.fbo),g.dem&&delete g.dem,delete g.neighboringTiles,g.state="unloaded",g.actor&&g.actor.send("removeDEMTile",{uid:g.uid,source:this.id})},y}(ve),dt=function(p){function y(g,w,T,B){p.call(this),this.id=g,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=T.getActor(),this.setEventedParent(B),this._data=w.data,this._options=v.extend({},w),this._collectResourceTiming=w.collectResourceTiming,this._resourceTiming=[],void 0!==w.maxzoom&&(this.maxzoom=w.maxzoom),w.type&&(this.type=w.type),w.attribution&&(this.attribution=w.attribution),this.promoteId=w.promoteId;var U=v.EXTENT/this.tileSize;this.workerOptions=v.extend({source:this.id,cluster:w.cluster||!1,geojsonVtOptions:{buffer:(void 0!==w.buffer?w.buffer:128)*U,tolerance:(void 0!==w.tolerance?w.tolerance:.375)*U,extent:v.EXTENT,maxZoom:this.maxzoom,lineMetrics:w.lineMetrics||!1,generateId:w.generateId||!1},superclusterOptions:{maxZoom:void 0!==w.clusterMaxZoom?Math.min(w.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,w.clusterMinPoints||2),extent:v.EXTENT,radius:(w.clusterRadius||50)*U,log:!1,generateId:w.generateId||!1},clusterProperties:w.clusterProperties,filter:w.filter},w.workerOptions)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.load=function(){var g=this;this.fire(new v.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(w){if(w)g.fire(new v.ErrorEvent(w));else{var T={dataType:"source",sourceDataType:"metadata"};g._collectResourceTiming&&g._resourceTiming&&g._resourceTiming.length>0&&(T.resourceTiming=g._resourceTiming,g._resourceTiming=[]),g.fire(new v.Event("data",T))}})},y.prototype.onAdd=function(g){this.map=g,this.load()},y.prototype.setData=function(g){var w=this;return this._data=g,this.fire(new v.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(T){if(T)w.fire(new v.ErrorEvent(T));else{var B={dataType:"source",sourceDataType:"content"};w._collectResourceTiming&&w._resourceTiming&&w._resourceTiming.length>0&&(B.resourceTiming=w._resourceTiming,w._resourceTiming=[]),w.fire(new v.Event("data",B))}}),this},y.prototype.getClusterExpansionZoom=function(g,w){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:g,source:this.id},w),this},y.prototype.getClusterChildren=function(g,w){return this.actor.send("geojson.getClusterChildren",{clusterId:g,source:this.id},w),this},y.prototype.getClusterLeaves=function(g,w,T,B){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:g,limit:w,offset:T},B),this},y.prototype._updateWorkerData=function(g){var w=this;this._loaded=!1;var T=v.extend({},this.workerOptions),B=this._data;"string"==typeof B?(T.request=this.map._requestManager.transformRequest(v.browser.resolveURL(B),v.ResourceType.Source),T.request.collectResourceTiming=this._collectResourceTiming):T.data=JSON.stringify(B),this.actor.send(this.type+".loadData",T,function(U,Z){w._removed||Z&&Z.abandoned||(w._loaded=!0,Z&&Z.resourceTiming&&Z.resourceTiming[w.id]&&(w._resourceTiming=Z.resourceTiming[w.id].slice(0)),w.actor.send(w.type+".coalesce",{source:T.source},null),g(U))})},y.prototype.loaded=function(){return this._loaded},y.prototype.loadTile=function(g,w){var T=this,B=g.actor?"reloadTile":"loadTile";g.actor=this.actor,g.request=this.actor.send(B,{type:this.type,uid:g.uid,tileID:g.tileID,zoom:g.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:v.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(U,Z){return delete g.request,g.unloadVectorData(),g.aborted?w(null):U?w(U):(g.loadVectorData(Z,T.map.painter,"reloadTile"===B),w(null))})},y.prototype.abortTile=function(g){g.request&&(g.request.cancel(),delete g.request),g.aborted=!0},y.prototype.unloadTile=function(g){g.unloadVectorData(),this.actor.send("removeTile",{uid:g.uid,type:this.type,source:this.id})},y.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},y.prototype.serialize=function(){return v.extend({},this._options,{type:this.type,data:this._data})},y.prototype.hasTransition=function(){return!1},y}(v.Evented),Ie=v.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),At=function(p){function y(g,w,T,B){p.call(this),this.id=g,this.dispatcher=T,this.coordinates=w.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(B),this.options=w}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.load=function(g,w){var T=this;this._loaded=!1,this.fire(new v.Event("dataloading",{dataType:"source"})),this.url=this.options.url,v.getImage(this.map._requestManager.transformRequest(this.url,v.ResourceType.Image),function(B,U){T._loaded=!0,B?T.fire(new v.ErrorEvent(B)):U&&(T.image=U,g&&(T.coordinates=g),w&&w(),T._finishLoading())})},y.prototype.loaded=function(){return this._loaded},y.prototype.updateImage=function(g){var w=this;return this.image&&g.url?(this.options.url=g.url,this.load(g.coordinates,function(){w.texture=null}),this):this},y.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new v.Event("data",{dataType:"source",sourceDataType:"metadata"})))},y.prototype.onAdd=function(g){this.map=g,this.load()},y.prototype.setCoordinates=function(g){var w=this;this.coordinates=g;var T=g.map(v.MercatorCoordinate.fromLngLat);this.tileID=function(U){for(var Z=1/0,se=1/0,ge=-1/0,Re=-1/0,Me=0,De=U;Me<De.length;Me+=1){var Ve=De[Me];Z=Math.min(Z,Ve.x),se=Math.min(se,Ve.y),ge=Math.max(ge,Ve.x),Re=Math.max(Re,Ve.y)}var Ue=Math.max(ge-Z,Re-se),Qe=Math.max(0,Math.floor(-Math.log(Ue)/Math.LN2)),je=Math.pow(2,Qe);return new v.CanonicalTileID(Qe,Math.floor((Z+ge)/2*je),Math.floor((se+Re)/2*je))}(T),this.minzoom=this.maxzoom=this.tileID.z;var B=T.map(function(U){return w.tileID.getTilePoint(U)._round()});return this._boundsArray=new v.StructArrayLayout4i8,this._boundsArray.emplaceBack(B[0].x,B[0].y,0,0),this._boundsArray.emplaceBack(B[1].x,B[1].y,v.EXTENT,0),this._boundsArray.emplaceBack(B[3].x,B[3].y,0,v.EXTENT),this._boundsArray.emplaceBack(B[2].x,B[2].y,v.EXTENT,v.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new v.Event("data",{dataType:"source",sourceDataType:"content"})),this},y.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var g=this.map.painter.context,w=g.gl;for(var T in this.boundsBuffer||(this.boundsBuffer=g.createVertexBuffer(this._boundsArray,Ie.members)),this.boundsSegments||(this.boundsSegments=v.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new v.Texture(g,this.image,w.RGBA),this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE)),this.tiles){var B=this.tiles[T];"loaded"!==B.state&&(B.state="loaded",B.texture=this.texture)}}},y.prototype.loadTile=function(g,w){this.tileID&&this.tileID.equals(g.tileID.canonical)?(this.tiles[String(g.tileID.wrap)]=g,g.buckets={},w(null)):(g.state="errored",w(null))},y.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},y.prototype.hasTransition=function(){return!1},y}(v.Evented),Rt=function(p){function y(g,w,T,B){p.call(this,g,w,T,B),this.roundZoom=!0,this.type="video",this.options=w}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.load=function(){var g=this;this._loaded=!1;var w=this.options;this.urls=[];for(var T=0,B=w.urls;T<B.length;T+=1)this.urls.push(this.map._requestManager.transformRequest(B[T],v.ResourceType.Source).url);v.getVideo(this.urls,function(U,Z){g._loaded=!0,U?g.fire(new v.ErrorEvent(U)):Z&&(g.video=Z,g.video.loop=!0,g.video.addEventListener("playing",function(){g.map.triggerRepaint()}),g.map&&g.video.play(),g._finishLoading())})},y.prototype.pause=function(){this.video&&this.video.pause()},y.prototype.play=function(){this.video&&this.video.play()},y.prototype.seek=function(g){if(this.video){var w=this.video.seekable;g<w.start(0)||g>w.end(0)?this.fire(new v.ErrorEvent(new v.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+w.start(0)+" and "+w.end(0)+"-second mark."))):this.video.currentTime=g}},y.prototype.getVideo=function(){return this.video},y.prototype.onAdd=function(g){this.map||(this.map=g,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},y.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var g=this.map.painter.context,w=g.gl;for(var T in this.boundsBuffer||(this.boundsBuffer=g.createVertexBuffer(this._boundsArray,Ie.members)),this.boundsSegments||(this.boundsSegments=v.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE),w.texSubImage2D(w.TEXTURE_2D,0,0,0,w.RGBA,w.UNSIGNED_BYTE,this.video)):(this.texture=new v.Texture(g,this.video,w.RGBA),this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE)),this.tiles){var B=this.tiles[T];"loaded"!==B.state&&(B.state="loaded",B.texture=this.texture)}}},y.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},y.prototype.hasTransition=function(){return this.video&&!this.video.paused},y}(At),rt=function(p){function y(g,w,T,B){p.call(this,g,w,T,B),w.coordinates?Array.isArray(w.coordinates)&&4===w.coordinates.length&&!w.coordinates.some(function(U){return!Array.isArray(U)||2!==U.length||U.some(function(Z){return"number"!=typeof Z})})||this.fire(new v.ErrorEvent(new v.ValidationError("sources."+g,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new v.ErrorEvent(new v.ValidationError("sources."+g,null,'missing required property "coordinates"'))),w.animate&&"boolean"!=typeof w.animate&&this.fire(new v.ErrorEvent(new v.ValidationError("sources."+g,null,'optional "animate" property must be a boolean value'))),w.canvas?"string"==typeof w.canvas||w.canvas instanceof v.window.HTMLCanvasElement||this.fire(new v.ErrorEvent(new v.ValidationError("sources."+g,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new v.ErrorEvent(new v.ValidationError("sources."+g,null,'missing required property "canvas"'))),this.options=w,this.animate=void 0===w.animate||w.animate}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof v.window.HTMLCanvasElement?this.options.canvas:v.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new v.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},y.prototype.getCanvas=function(){return this.canvas},y.prototype.onAdd=function(g){this.map=g,this.load(),this.canvas&&this.animate&&this.play()},y.prototype.onRemove=function(){this.pause()},y.prototype.prepare=function(){var g=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,g=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,g=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var w=this.map.painter.context,T=w.gl;for(var B in this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,Ie.members)),this.boundsSegments||(this.boundsSegments=v.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(g||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new v.Texture(w,this.canvas,T.RGBA,{premultiply:!0}),this.tiles){var U=this.tiles[B];"loaded"!==U.state&&(U.state="loaded",U.texture=this.texture)}}},y.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},y.prototype.hasTransition=function(){return this._playing},y.prototype._hasInvalidDimensions=function(){for(var g=0,w=[this.canvas.width,this.canvas.height];g<w.length;g+=1){var T=w[g];if(isNaN(T)||T<=0)return!0}return!1},y}(At),Et={vector:W,raster:ve,"raster-dem":Je,geojson:dt,video:Rt,image:At,canvas:rt};function sn(p,y){var g=v.identity([]);return v.translate(g,g,[1,1,0]),v.scale(g,g,[.5*p.width,.5*p.height,1]),v.multiply(g,g,p.calculatePosMatrix(y.toUnwrapped()))}function $t(p,y,g,w,T,B){var U=function(Qe,je,Ze){if(Qe)for(var at=0,pt=Qe;at<pt.length;at+=1){var Pt=je[pt[at]];if(Pt&&Pt.source===Ze&&"fill-extrusion"===Pt.type)return!0}else for(var Tt in je){var Dt=je[Tt];if(Dt.source===Ze&&"fill-extrusion"===Dt.type)return!0}return!1}(T&&T.layers,y,p.id),Z=B.maxPitchScaleFactor(),se=p.tilesIn(w,Z,U);se.sort(kn);for(var ge=[],Re=0,Me=se;Re<Me.length;Re+=1){var De=Me[Re];ge.push({wrappedTileID:De.tileID.wrapped().key,queryResults:De.tile.queryRenderedFeatures(y,g,p._state,De.queryGeometry,De.cameraQueryGeometry,De.scale,T,B,Z,sn(p.transform,De.tileID))})}var Ve=function(Qe){for(var je={},Ze={},at=0,pt=Qe;at<pt.length;at+=1){var Pt=pt[at],Tt=Pt.queryResults,Dt=Pt.wrappedTileID,Ft=Ze[Dt]=Ze[Dt]||{};for(var rn in Tt)for(var Yt=Tt[rn],on=Ft[rn]=Ft[rn]||{},Ln=je[rn]=je[rn]||[],yn=0,qn=Yt;yn<qn.length;yn+=1){var li=qn[yn];on[li.featureIndex]||(on[li.featureIndex]=!0,Ln.push(li))}}return je}(ge);for(var Ue in Ve)Ve[Ue].forEach(function(Qe){var je=Qe.feature,Ze=p.getFeatureState(je.layer["source-layer"],je.id);je.source=je.layer.source,je.layer["source-layer"]&&(je.sourceLayer=je.layer["source-layer"]),je.state=Ze});return Ve}function kn(p,y){var g=p.tileID,w=y.tileID;return g.overscaledZ-w.overscaledZ||g.canonical.y-w.canonical.y||g.wrap-w.wrap||g.canonical.x-w.canonical.x}var Nt=function(p,y){this.max=p,this.onRemove=y,this.reset()};Nt.prototype.reset=function(){for(var p in this.data)for(var y=0,g=this.data[p];y<g.length;y+=1){var w=g[y];w.timeout&&clearTimeout(w.timeout),this.onRemove(w.value)}return this.data={},this.order=[],this},Nt.prototype.add=function(p,y,g){var w=this,T=p.wrapped().key;void 0===this.data[T]&&(this.data[T]=[]);var B={value:y,timeout:void 0};if(void 0!==g&&(B.timeout=setTimeout(function(){w.remove(p,B)},g)),this.data[T].push(B),this.order.push(T),this.order.length>this.max){var U=this._getAndRemoveByKey(this.order[0]);U&&this.onRemove(U)}return this},Nt.prototype.has=function(p){return p.wrapped().key in this.data},Nt.prototype.getAndRemove=function(p){return this.has(p)?this._getAndRemoveByKey(p.wrapped().key):null},Nt.prototype._getAndRemoveByKey=function(p){var y=this.data[p].shift();return y.timeout&&clearTimeout(y.timeout),0===this.data[p].length&&delete this.data[p],this.order.splice(this.order.indexOf(p),1),y.value},Nt.prototype.getByKey=function(p){var y=this.data[p];return y?y[0].value:null},Nt.prototype.get=function(p){return this.has(p)?this.data[p.wrapped().key][0].value:null},Nt.prototype.remove=function(p,y){if(!this.has(p))return this;var g=p.wrapped().key,w=void 0===y?0:this.data[g].indexOf(y),T=this.data[g][w];return this.data[g].splice(w,1),T.timeout&&clearTimeout(T.timeout),0===this.data[g].length&&delete this.data[g],this.onRemove(T.value),this.order.splice(this.order.indexOf(g),1),this},Nt.prototype.setMaxSize=function(p){for(this.max=p;this.order.length>this.max;){var y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this},Nt.prototype.filter=function(p){var y=[];for(var g in this.data)for(var w=0,T=this.data[g];w<T.length;w+=1){var B=T[w];p(B.value)||y.push(B)}for(var U=0,Z=y;U<Z.length;U+=1){var se=Z[U];this.remove(se.value.tileID,se)}};var Bn=function(p,y,g){this.context=p;var w=p.gl;this.buffer=w.createBuffer(),this.dynamicDraw=Boolean(g),this.context.unbindVAO(),p.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete y.arrayBuffer};Bn.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Bn.prototype.updateData=function(p){var y=this.context.gl;this.context.unbindVAO(),this.bind(),y.bufferSubData(y.ELEMENT_ARRAY_BUFFER,0,p.arrayBuffer)},Bn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Nn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ar=function(p,y,g,w){this.length=y.length,this.attributes=g,this.itemSize=y.bytesPerElement,this.dynamicDraw=w,this.context=p;var T=p.gl;this.buffer=T.createBuffer(),p.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||delete y.arrayBuffer};ar.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ar.prototype.updateData=function(p){var y=this.context.gl;this.bind(),y.bufferSubData(y.ARRAY_BUFFER,0,p.arrayBuffer)},ar.prototype.enableAttributes=function(p,y){for(var g=0;g<this.attributes.length;g++){var w=y.attributes[this.attributes[g].name];void 0!==w&&p.enableVertexAttribArray(w)}},ar.prototype.setVertexAttribPointers=function(p,y,g){for(var w=0;w<this.attributes.length;w++){var T=this.attributes[w],B=y.attributes[T.name];void 0!==B&&p.vertexAttribPointer(B,T.components,p[Nn[T.type]],!1,this.itemSize,T.offset+this.itemSize*(g||0))}},ar.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Zt=function(p){this.gl=p.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Zt.prototype.get=function(){return this.current},Zt.prototype.set=function(p){},Zt.prototype.getDefault=function(){return this.default},Zt.prototype.setDefault=function(){this.set(this.default)};var ne=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return v.Color.transparent},y.prototype.set=function(g){var w=this.current;(g.r!==w.r||g.g!==w.g||g.b!==w.b||g.a!==w.a||this.dirty)&&(this.gl.clearColor(g.r,g.g,g.b,g.a),this.current=g,this.dirty=!1)},y}(Zt),er=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return 1},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.clearDepth(g),this.current=g,this.dirty=!1)},y}(Zt),lr=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return 0},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.clearStencil(g),this.current=g,this.dirty=!1)},y}(Zt),Ti=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return[!0,!0,!0,!0]},y.prototype.set=function(g){var w=this.current;(g[0]!==w[0]||g[1]!==w[1]||g[2]!==w[2]||g[3]!==w[3]||this.dirty)&&(this.gl.colorMask(g[0],g[1],g[2],g[3]),this.current=g,this.dirty=!1)},y}(Zt),Qi=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return!0},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.depthMask(g),this.current=g,this.dirty=!1)},y}(Zt),kt=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return 255},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.stencilMask(g),this.current=g,this.dirty=!1)},y}(Zt),It=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},y.prototype.set=function(g){var w=this.current;(g.func!==w.func||g.ref!==w.ref||g.mask!==w.mask||this.dirty)&&(this.gl.stencilFunc(g.func,g.ref,g.mask),this.current=g,this.dirty=!1)},y}(Zt),ka=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){var g=this.gl;return[g.KEEP,g.KEEP,g.KEEP]},y.prototype.set=function(g){var w=this.current;(g[0]!==w[0]||g[1]!==w[1]||g[2]!==w[2]||this.dirty)&&(this.gl.stencilOp(g[0],g[1],g[2]),this.current=g,this.dirty=!1)},y}(Zt),Le=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;g?w.enable(w.STENCIL_TEST):w.disable(w.STENCIL_TEST),this.current=g,this.dirty=!1}},y}(Zt),le=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return[0,1]},y.prototype.set=function(g){var w=this.current;(g[0]!==w[0]||g[1]!==w[1]||this.dirty)&&(this.gl.depthRange(g[0],g[1]),this.current=g,this.dirty=!1)},y}(Zt),ce=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;g?w.enable(w.DEPTH_TEST):w.disable(w.DEPTH_TEST),this.current=g,this.dirty=!1}},y}(Zt),Ke=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return this.gl.LESS},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.depthFunc(g),this.current=g,this.dirty=!1)},y}(Zt),_t=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;g?w.enable(w.BLEND):w.disable(w.BLEND),this.current=g,this.dirty=!1}},y}(Zt),Gt=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){var g=this.gl;return[g.ONE,g.ZERO]},y.prototype.set=function(g){var w=this.current;(g[0]!==w[0]||g[1]!==w[1]||this.dirty)&&(this.gl.blendFunc(g[0],g[1]),this.current=g,this.dirty=!1)},y}(Zt),Ht=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return v.Color.transparent},y.prototype.set=function(g){var w=this.current;(g.r!==w.r||g.g!==w.g||g.b!==w.b||g.a!==w.a||this.dirty)&&(this.gl.blendColor(g.r,g.g,g.b,g.a),this.current=g,this.dirty=!1)},y}(Zt),Ir=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return this.gl.FUNC_ADD},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.blendEquation(g),this.current=g,this.dirty=!1)},y}(Zt),yr=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;g?w.enable(w.CULL_FACE):w.disable(w.CULL_FACE),this.current=g,this.dirty=!1}},y}(Zt),ei=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return this.gl.BACK},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.cullFace(g),this.current=g,this.dirty=!1)},y}(Zt),ni=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return this.gl.CCW},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.frontFace(g),this.current=g,this.dirty=!1)},y}(Zt),Hr=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.useProgram(g),this.current=g,this.dirty=!1)},y}(Zt),Bs=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return this.gl.TEXTURE0},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.activeTexture(g),this.current=g,this.dirty=!1)},y}(Zt),ls=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){var g=this.gl;return[0,0,g.drawingBufferWidth,g.drawingBufferHeight]},y.prototype.set=function(g){var w=this.current;(g[0]!==w[0]||g[1]!==w[1]||g[2]!==w[2]||g[3]!==w[3]||this.dirty)&&(this.gl.viewport(g[0],g[1],g[2],g[3]),this.current=g,this.dirty=!1)},y}(Zt),xo=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,g),this.current=g,this.dirty=!1}},y}(Zt),Cr=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.bindRenderbuffer(w.RENDERBUFFER,g),this.current=g,this.dirty=!1}},y}(Zt),ml=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.bindTexture(w.TEXTURE_2D,g),this.current=g,this.dirty=!1}},y}(Zt),Wu=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.bindBuffer(w.ARRAY_BUFFER,g),this.current=g,this.dirty=!1}},y}(Zt),fu=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(g){var w=this.gl;w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,g),this.current=g,this.dirty=!1},y}(Zt),ta=function(p){function y(g){p.call(this,g),this.vao=g.extVertexArrayObject}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(g){this.vao&&(g!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(g),this.current=g,this.dirty=!1)},y}(Zt),Fs=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return 4},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.pixelStorei(w.UNPACK_ALIGNMENT,g),this.current=g,this.dirty=!1}},y}(Zt),yi=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.pixelStorei(w.UNPACK_PREMULTIPLY_ALPHA_WEBGL,g),this.current=g,this.dirty=!1}},y}(Zt),Pu=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,g),this.current=g,this.dirty=!1}},y}(Zt),si=function(p){function y(g,w){p.call(this,g),this.context=g,this.parent=w}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y}(Zt),he=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.setDirty=function(){this.dirty=!0},y.prototype.set=function(g){if(g!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var w=this.gl;w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,g,0),this.current=g,this.dirty=!1}},y}(si),_e=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.set=function(g){if(g!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var w=this.gl;w.framebufferRenderbuffer(w.FRAMEBUFFER,w.DEPTH_ATTACHMENT,w.RENDERBUFFER,g),this.current=g,this.dirty=!1}},y}(si),Te=function(p,y,g,w){this.context=p,this.width=y,this.height=g;var T=this.framebuffer=p.gl.createFramebuffer();this.colorAttachment=new he(p,T),w&&(this.depthAttachment=new _e(p,T))};Te.prototype.destroy=function(){var p=this.context.gl,y=this.colorAttachment.get();if(y&&p.deleteTexture(y),this.depthAttachment){var g=this.depthAttachment.get();g&&p.deleteRenderbuffer(g)}p.deleteFramebuffer(this.framebuffer)};var Oe=function(p,y,g){this.func=p,this.mask=y,this.range=g};Oe.ReadOnly=!1,Oe.ReadWrite=!0,Oe.disabled=new Oe(519,Oe.ReadOnly,[0,1]);var Be=function(p,y,g,w,T,B){this.test=p,this.ref=y,this.mask=g,this.fail=w,this.depthFail=T,this.pass=B};Be.disabled=new Be({func:519,mask:0},0,0,7680,7680,7680);var it=function(p,y,g){this.blendFunction=p,this.blendColor=y,this.mask=g};it.disabled=new it(it.Replace=[1,0],v.Color.transparent,[!1,!1,!1,!1]),it.unblended=new it(it.Replace,v.Color.transparent,[!0,!0,!0,!0]),it.alphaBlended=new it([1,771],v.Color.transparent,[!0,!0,!0,!0]);var st=function(p,y,g){this.enable=p,this.mode=y,this.frontFace=g};st.disabled=new st(!1,1029,2305),st.backCCW=new st(!0,1029,2305);var nt=function(p){this.gl=p,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ne(this),this.clearDepth=new er(this),this.clearStencil=new lr(this),this.colorMask=new Ti(this),this.depthMask=new Qi(this),this.stencilMask=new kt(this),this.stencilFunc=new It(this),this.stencilOp=new ka(this),this.stencilTest=new Le(this),this.depthRange=new le(this),this.depthTest=new ce(this),this.depthFunc=new Ke(this),this.blend=new _t(this),this.blendFunc=new Gt(this),this.blendColor=new Ht(this),this.blendEquation=new Ir(this),this.cullFace=new yr(this),this.cullFaceSide=new ei(this),this.frontFace=new ni(this),this.program=new Hr(this),this.activeTexture=new Bs(this),this.viewport=new ls(this),this.bindFramebuffer=new xo(this),this.bindRenderbuffer=new Cr(this),this.bindTexture=new ml(this),this.bindVertexBuffer=new Wu(this),this.bindElementBuffer=new fu(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ta(this),this.pixelStoreUnpack=new Fs(this),this.pixelStoreUnpackPremultiplyAlpha=new yi(this),this.pixelStoreUnpackFlipY=new Pu(this),this.extTextureFilterAnisotropic=p.getExtension("EXT_texture_filter_anisotropic")||p.getExtension("MOZ_EXT_texture_filter_anisotropic")||p.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=p.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=p.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(p.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=p.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=p.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=p.getParameter(p.MAX_TEXTURE_SIZE)};nt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},nt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},nt.prototype.createIndexBuffer=function(p,y){return new Bn(this,p,y)},nt.prototype.createVertexBuffer=function(p,y,g){return new ar(this,p,y,g)},nt.prototype.createRenderbuffer=function(p,y,g){var w=this.gl,T=w.createRenderbuffer();return this.bindRenderbuffer.set(T),w.renderbufferStorage(w.RENDERBUFFER,p,y,g),this.bindRenderbuffer.set(null),T},nt.prototype.createFramebuffer=function(p,y,g){return new Te(this,p,y,g)},nt.prototype.clear=function(p){var y=p.color,g=p.depth,w=this.gl,T=0;y&&(T|=w.COLOR_BUFFER_BIT,this.clearColor.set(y),this.colorMask.set([!0,!0,!0,!0])),void 0!==g&&(T|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(g),this.depthMask.set(!0)),w.clear(T)},nt.prototype.setCullFace=function(p){!1===p.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(p.mode),this.frontFace.set(p.frontFace))},nt.prototype.setDepthMode=function(p){p.func!==this.gl.ALWAYS||p.mask?(this.depthTest.set(!0),this.depthFunc.set(p.func),this.depthMask.set(p.mask),this.depthRange.set(p.range)):this.depthTest.set(!1)},nt.prototype.setStencilMode=function(p){p.test.func!==this.gl.ALWAYS||p.mask?(this.stencilTest.set(!0),this.stencilMask.set(p.mask),this.stencilOp.set([p.fail,p.depthFail,p.pass]),this.stencilFunc.set({func:p.test.func,ref:p.ref,mask:p.test.mask})):this.stencilTest.set(!1)},nt.prototype.setColorMode=function(p){v.deepEqual(p.blendFunction,it.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(p.blendFunction),this.blendColor.set(p.blendColor)),this.colorMask.set(p.mask)},nt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ke=function(p){function y(g,w,T){var B=this;p.call(this),this.id=g,this.dispatcher=T,this.on("data",function(U){"source"===U.dataType&&"metadata"===U.sourceDataType&&(B._sourceLoaded=!0),B._sourceLoaded&&!B._paused&&"source"===U.dataType&&"content"===U.sourceDataType&&(B.reload(),B.transform&&B.update(B.transform))}),this.on("error",function(){B._sourceErrored=!0}),this._source=function(U,Z,se,ge){var Re=new Et[Z.type](U,Z,se,ge);if(Re.id!==U)throw new Error("Expected Source id to be "+U+" instead of "+Re.id);return v.bindAll(["load","abort","unload","serialize","prepare"],Re),Re}(g,w,T,this),this._tiles={},this._cache=new Nt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new v.SourceFeatureState}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.onAdd=function(g){this.map=g,this._maxTileCacheSize=g?g._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(g)},y.prototype.onRemove=function(g){this._source&&this._source.onRemove&&this._source.onRemove(g)},y.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var g in this._tiles){var w=this._tiles[g];if("loaded"!==w.state&&"errored"!==w.state)return!1}return!0},y.prototype.getSource=function(){return this._source},y.prototype.pause=function(){this._paused=!0},y.prototype.resume=function(){if(this._paused){var g=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,g&&this.reload(),this.transform&&this.update(this.transform)}},y.prototype._loadTile=function(g,w){return this._source.loadTile(g,w)},y.prototype._unloadTile=function(g){if(this._source.unloadTile)return this._source.unloadTile(g,function(){})},y.prototype._abortTile=function(g){if(this._source.abortTile)return this._source.abortTile(g,function(){})},y.prototype.serialize=function(){return this._source.serialize()},y.prototype.prepare=function(g){for(var w in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var T=this._tiles[w];T.upload(g),T.prepare(this.map.style.imageManager)}},y.prototype.getIds=function(){return v.values(this._tiles).map(function(g){return g.tileID}).sort(Xe).map(function(g){return g.key})},y.prototype.getRenderableIds=function(g){var w=this,T=[];for(var B in this._tiles)this._isIdRenderable(B,g)&&T.push(this._tiles[B]);return g?T.sort(function(U,Z){var se=U.tileID,ge=Z.tileID,Re=new v.Point(se.canonical.x,se.canonical.y)._rotate(w.transform.angle),Me=new v.Point(ge.canonical.x,ge.canonical.y)._rotate(w.transform.angle);return se.overscaledZ-ge.overscaledZ||Me.y-Re.y||Me.x-Re.x}).map(function(U){return U.tileID.key}):T.map(function(U){return U.tileID}).sort(Xe).map(function(U){return U.key})},y.prototype.hasRenderableParent=function(g){var w=this.findLoadedParent(g,0);return!!w&&this._isIdRenderable(w.tileID.key)},y.prototype._isIdRenderable=function(g,w){return this._tiles[g]&&this._tiles[g].hasData()&&!this._coveredTiles[g]&&(w||!this._tiles[g].holdingForFade())},y.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var g in this._cache.reset(),this._tiles)"errored"!==this._tiles[g].state&&this._reloadTile(g,"reloading")},y.prototype._reloadTile=function(g,w){var T=this._tiles[g];T&&("loading"!==T.state&&(T.state=w),this._loadTile(T,this._tileLoaded.bind(this,T,g,w)))},y.prototype._tileLoaded=function(g,w,T,B){if(B)return g.state="errored",void(404!==B.status?this._source.fire(new v.ErrorEvent(B,{tile:g})):this.update(this.transform));g.timeAdded=v.browser.now(),"expired"===T&&(g.refreshedUponExpiration=!0),this._setTileReloadTimer(w,g),"raster-dem"===this.getSource().type&&g.dem&&this._backfillDEM(g),this._state.initializeTileState(g,this.map?this.map.painter:null),this._source.fire(new v.Event("data",{dataType:"source",tile:g,coord:g.tileID}))},y.prototype._backfillDEM=function(g){for(var w=this.getRenderableIds(),T=0;T<w.length;T++){var B=w[T];if(g.neighboringTiles&&g.neighboringTiles[B]){var U=this.getTileByID(B);Z(g,U),Z(U,g)}}function Z(se,ge){se.needsHillshadePrepare=!0;var Re=ge.tileID.canonical.x-se.tileID.canonical.x,Me=ge.tileID.canonical.y-se.tileID.canonical.y,De=Math.pow(2,se.tileID.canonical.z),Ve=ge.tileID.key;0===Re&&0===Me||Math.abs(Me)>1||(Math.abs(Re)>1&&(1===Math.abs(Re+De)?Re+=De:1===Math.abs(Re-De)&&(Re-=De)),ge.dem&&se.dem&&(se.dem.backfillBorder(ge.dem,Re,Me),se.neighboringTiles&&se.neighboringTiles[Ve]&&(se.neighboringTiles[Ve].backfilled=!0)))}},y.prototype.getTile=function(g){return this.getTileByID(g.key)},y.prototype.getTileByID=function(g){return this._tiles[g]},y.prototype._retainLoadedChildren=function(g,w,T,B){for(var U in this._tiles){var Z=this._tiles[U];if(!(B[U]||!Z.hasData()||Z.tileID.overscaledZ<=w||Z.tileID.overscaledZ>T)){for(var se=Z.tileID;Z&&Z.tileID.overscaledZ>w+1;){var ge=Z.tileID.scaledTo(Z.tileID.overscaledZ-1);(Z=this._tiles[ge.key])&&Z.hasData()&&(se=ge)}for(var Re=se;Re.overscaledZ>w;)if(g[(Re=Re.scaledTo(Re.overscaledZ-1)).key]){B[se.key]=se;break}}}},y.prototype.findLoadedParent=function(g,w){if(g.key in this._loadedParentTiles){var T=this._loadedParentTiles[g.key];return T&&T.tileID.overscaledZ>=w?T:null}for(var B=g.overscaledZ-1;B>=w;B--){var U=g.scaledTo(B),Z=this._getLoadedTile(U);if(Z)return Z}},y.prototype._getLoadedTile=function(g){var w=this._tiles[g.key];return w&&w.hasData()?w:this._cache.getByKey(g.wrapped().key)},y.prototype.updateCacheSize=function(g){var w=Math.ceil(g.width/this._source.tileSize)+1,T=Math.ceil(g.height/this._source.tileSize)+1,B=Math.floor(w*T*5),U="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,B):B;this._cache.setMaxSize(U)},y.prototype.handleWrapJump=function(g){var w=Math.round((g-(void 0===this._prevLng?g:this._prevLng))/360);if(this._prevLng=g,w){var T={};for(var B in this._tiles){var U=this._tiles[B];U.tileID=U.tileID.unwrapTo(U.tileID.wrap+w),T[U.tileID.key]=U}for(var Z in this._tiles=T,this._timers)clearTimeout(this._timers[Z]),delete this._timers[Z];for(var se in this._tiles)this._setTileReloadTimer(se,this._tiles[se])}},y.prototype.update=function(g){var w=this;if(this.transform=g,this._sourceLoaded&&!this._paused){var T;this.updateCacheSize(g),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?T=g.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ft){return new v.OverscaledTileID(Ft.canonical.z,Ft.wrap,Ft.canonical.z,Ft.canonical.x,Ft.canonical.y)}):(T=g.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(T=T.filter(function(Ft){return w._source.hasTile(Ft)}))):T=[];var B=g.coveringZoomLevel(this._source),U=Math.max(B-y.maxOverzooming,this._source.minzoom),Z=Math.max(B+y.maxUnderzooming,this._source.minzoom),se=this._updateRetainedTiles(T,B);if(qt(this._source.type)){for(var ge={},Re={},Me=0,De=Object.keys(se);Me<De.length;Me+=1){var Ve=De[Me],Ue=se[Ve],Qe=this._tiles[Ve];if(Qe&&!(Qe.fadeEndTime&&Qe.fadeEndTime<=v.browser.now())){var je=this.findLoadedParent(Ue,U);je&&(this._addTile(je.tileID),ge[je.tileID.key]=je.tileID),Re[Ve]=Ue}}for(var Ze in this._retainLoadedChildren(Re,B,Z,se),ge)se[Ze]||(this._coveredTiles[Ze]=!0,se[Ze]=ge[Ze])}for(var at in se)this._tiles[at].clearFadeHold();for(var pt=0,Pt=v.keysDifference(this._tiles,se);pt<Pt.length;pt+=1){var Tt=Pt[pt],Dt=this._tiles[Tt];Dt.hasSymbolBuckets&&!Dt.holdingForFade()?Dt.setHoldDuration(this.map._fadeDuration):Dt.hasSymbolBuckets&&!Dt.symbolFadeFinished()||this._removeTile(Tt)}this._updateLoadedParentTileCache()}},y.prototype.releaseSymbolFadeTiles=function(){for(var g in this._tiles)this._tiles[g].holdingForFade()&&this._removeTile(g)},y.prototype._updateRetainedTiles=function(g,w){for(var T={},B={},U=Math.max(w-y.maxOverzooming,this._source.minzoom),Z=Math.max(w+y.maxUnderzooming,this._source.minzoom),se={},ge=0,Re=g;ge<Re.length;ge+=1){var Me=Re[ge],De=this._addTile(Me);T[Me.key]=Me,De.hasData()||w<this._source.maxzoom&&(se[Me.key]=Me)}this._retainLoadedChildren(se,w,Z,T);for(var Ve=0,Ue=g;Ve<Ue.length;Ve+=1){var Qe=Ue[Ve],je=this._tiles[Qe.key];if(!je.hasData()){if(w+1>this._source.maxzoom){var Ze=Qe.children(this._source.maxzoom)[0],at=this.getTile(Ze);if(at&&at.hasData()){T[Ze.key]=Ze;continue}}else{var pt=Qe.children(this._source.maxzoom);if(T[pt[0].key]&&T[pt[1].key]&&T[pt[2].key]&&T[pt[3].key])continue}for(var Pt=je.wasRequested(),Tt=Qe.overscaledZ-1;Tt>=U;--Tt){var Dt=Qe.scaledTo(Tt);if(B[Dt.key]||(B[Dt.key]=!0,!(je=this.getTile(Dt))&&Pt&&(je=this._addTile(Dt)),je&&(T[Dt.key]=Dt,Pt=je.wasRequested(),je.hasData())))break}}}return T},y.prototype._updateLoadedParentTileCache=function(){for(var g in this._loadedParentTiles={},this._tiles){for(var w=[],T=void 0,B=this._tiles[g].tileID;B.overscaledZ>0;){if(B.key in this._loadedParentTiles){T=this._loadedParentTiles[B.key];break}w.push(B.key);var U=B.scaledTo(B.overscaledZ-1);if(T=this._getLoadedTile(U))break;B=U}for(var Z=0,se=w;Z<se.length;Z+=1)this._loadedParentTiles[se[Z]]=T}},y.prototype._addTile=function(g){var w=this._tiles[g.key];if(w)return w;(w=this._cache.getAndRemove(g))&&(this._setTileReloadTimer(g.key,w),w.tileID=g,this._state.initializeTileState(w,this.map?this.map.painter:null),this._cacheTimers[g.key]&&(clearTimeout(this._cacheTimers[g.key]),delete this._cacheTimers[g.key],this._setTileReloadTimer(g.key,w)));var T=Boolean(w);return T||(w=new v.Tile(g,this._source.tileSize*g.overscaleFactor()),this._loadTile(w,this._tileLoaded.bind(this,w,g.key,w.state))),w?(w.uses++,this._tiles[g.key]=w,T||this._source.fire(new v.Event("dataloading",{tile:w,coord:w.tileID,dataType:"source"})),w):null},y.prototype._setTileReloadTimer=function(g,w){var T=this;g in this._timers&&(clearTimeout(this._timers[g]),delete this._timers[g]);var B=w.getExpiryTimeout();B&&(this._timers[g]=setTimeout(function(){T._reloadTile(g,"expired"),delete T._timers[g]},B))},y.prototype._removeTile=function(g){var w=this._tiles[g];w&&(w.uses--,delete this._tiles[g],this._timers[g]&&(clearTimeout(this._timers[g]),delete this._timers[g]),w.uses>0||(w.hasData()&&"reloading"!==w.state?this._cache.add(w.tileID,w,w.getExpiryTimeout()):(w.aborted=!0,this._abortTile(w),this._unloadTile(w))))},y.prototype.clearTiles=function(){for(var g in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(g);this._cache.reset()},y.prototype.tilesIn=function(g,w,T){var B=this,U=[],Z=this.transform;if(!Z)return U;for(var se=T?Z.getCameraQueryGeometry(g):g,ge=g.map(function(Tt){return Z.pointCoordinate(Tt)}),Re=se.map(function(Tt){return Z.pointCoordinate(Tt)}),Me=this.getIds(),De=1/0,Ve=1/0,Ue=-1/0,Qe=-1/0,je=0,Ze=Re;je<Ze.length;je+=1){var at=Ze[je];De=Math.min(De,at.x),Ve=Math.min(Ve,at.y),Ue=Math.max(Ue,at.x),Qe=Math.max(Qe,at.y)}for(var pt=function(Tt){var Dt=B._tiles[Me[Tt]];if(!Dt.holdingForFade()){var Ft=Dt.tileID,rn=Math.pow(2,Z.zoom-Dt.tileID.overscaledZ),Yt=w*Dt.queryPadding*v.EXTENT/Dt.tileSize/rn,on=[Ft.getTilePoint(new v.MercatorCoordinate(De,Ve)),Ft.getTilePoint(new v.MercatorCoordinate(Ue,Qe))];if(on[0].x-Yt<v.EXTENT&&on[0].y-Yt<v.EXTENT&&on[1].x+Yt>=0&&on[1].y+Yt>=0){var Ln=ge.map(function(qn){return Ft.getTilePoint(qn)}),yn=Re.map(function(qn){return Ft.getTilePoint(qn)});U.push({tile:Dt,tileID:Ft,queryGeometry:Ln,cameraQueryGeometry:yn,scale:rn})}}},Pt=0;Pt<Me.length;Pt++)pt(Pt);return U},y.prototype.getVisibleCoordinates=function(g){for(var w=this,T=this.getRenderableIds(g).map(function(se){return w._tiles[se].tileID}),B=0,U=T;B<U.length;B+=1){var Z=U[B];Z.posMatrix=this.transform.calculatePosMatrix(Z.toUnwrapped())}return T},y.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(qt(this._source.type))for(var g in this._tiles){var w=this._tiles[g];if(void 0!==w.fadeEndTime&&w.fadeEndTime>=v.browser.now())return!0}return!1},y.prototype.setFeatureState=function(g,w,T){this._state.updateState(g=g||"_geojsonTileLayer",w,T)},y.prototype.removeFeatureState=function(g,w,T){this._state.removeFeatureState(g=g||"_geojsonTileLayer",w,T)},y.prototype.getFeatureState=function(g,w){return this._state.getState(g=g||"_geojsonTileLayer",w)},y.prototype.setDependencies=function(g,w,T){var B=this._tiles[g];B&&B.setDependencies(w,T)},y.prototype.reloadTilesForDependencies=function(g,w){for(var T in this._tiles)this._tiles[T].hasDependency(g,w)&&this._reloadTile(T,"reloading");this._cache.filter(function(B){return!B.hasDependency(g,w)})},y}(v.Evented);function Xe(p,y){var g=Math.abs(2*p.wrap)-+(p.wrap<0),w=Math.abs(2*y.wrap)-+(y.wrap<0);return p.overscaledZ-y.overscaledZ||w-g||y.canonical.y-p.canonical.y||y.canonical.x-p.canonical.x}function qt(p){return"raster"===p||"image"===p||"video"===p}function Jt(){return new v.window.Worker(Ih.workerUrl)}ke.maxOverzooming=10,ke.maxUnderzooming=3;var yt="mapboxgl_preloaded_worker_pool",Lt=function(){this.active={}};Lt.prototype.acquire=function(p){if(!this.workers)for(this.workers=[];this.workers.length<Lt.workerCount;)this.workers.push(new Jt);return this.active[p]=!0,this.workers.slice()},Lt.prototype.release=function(p){delete this.active[p],0===this.numActive()&&(this.workers.forEach(function(y){y.terminate()}),this.workers=null)},Lt.prototype.isPreloaded=function(){return!!this.active[yt]},Lt.prototype.numActive=function(){return Object.keys(this.active).length};var un,ln=Math.floor(v.browser.hardwareConcurrency/2);function In(){return un||(un=new Lt),un}function Bt(p,y){var g={};for(var w in p)"ref"!==w&&(g[w]=p[w]);return v.refProperties.forEach(function(T){T in y&&(g[T]=y[T])}),g}function tn(p){p=p.slice();for(var y=Object.create(null),g=0;g<p.length;g++)y[p[g].id]=p[g];for(var w=0;w<p.length;w++)"ref"in p[w]&&(p[w]=Bt(p[w],y[p[w].ref]));return p}Lt.workerCount=Math.max(Math.min(ln,6),1);var jt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ir(p,y,g){g.push({command:jt.addSource,args:[p,y[p]]})}function rr(p,y,g){y.push({command:jt.removeSource,args:[p]}),g[p]=!0}function wn(p,y,g,w){rr(p,g,w),ir(p,y,g)}function Ii(p,y,g){var w;for(w in p[g])if(p[g].hasOwnProperty(w)&&"data"!==w&&!v.deepEqual(p[g][w],y[g][w]))return!1;for(w in y[g])if(y[g].hasOwnProperty(w)&&"data"!==w&&!v.deepEqual(p[g][w],y[g][w]))return!1;return!0}function zn(p,y,g,w,T,B){var U;for(U in y=y||{},p=p||{})p.hasOwnProperty(U)&&(v.deepEqual(p[U],y[U])||g.push({command:B,args:[w,U,y[U],T]}));for(U in y)y.hasOwnProperty(U)&&!p.hasOwnProperty(U)&&(v.deepEqual(p[U],y[U])||g.push({command:B,args:[w,U,y[U],T]}))}function Di(p){return p.id}function Fi(p,y){return p[y.id]=y,p}var $r=function(p,y){this.reset(p,y)};$r.prototype.reset=function(p,y){this.points=p||[],this._distances=[0];for(var g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(y||0,.5*this.length),this.paddedLength=this.length-2*this.padding},$r.prototype.lerp=function(p){if(1===this.points.length)return this.points[0];p=v.clamp(p,0,1);for(var y=1,g=this._distances[y],w=p*this.paddedLength+this.padding;g<w&&y<this._distances.length;)g=this._distances[++y];var T=y-1,B=this._distances[T],U=g-B,Z=U>0?(w-B)/U:0;return this.points[T].mult(1-Z).add(this.points[y].mult(Z))};var _i=function(p,y,g){var w=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(p/g),this.yCellCount=Math.ceil(y/g);for(var B=0;B<this.xCellCount*this.yCellCount;B++)w.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=p,this.height=y,this.xScale=this.xCellCount/p,this.yScale=this.yCellCount/y,this.boxUid=0,this.circleUid=0};function Hi(p,y,g,w,T){var B=v.create();return y?(v.scale(B,B,[1/T,1/T,1]),g||v.rotateZ(B,B,w.angle)):v.multiply(B,w.labelPlaneMatrix,p),B}function fi(p,y,g,w,T){if(y){var B=v.clone(p);return v.scale(B,B,[T,T,1]),g||v.rotateZ(B,B,-w.angle),B}return w.glCoordMatrix}function $n(p,y){var g=[p.x,p.y,0,1];$o(g,g,y);var w=g[3];return{point:new v.Point(g[0]/w,g[1]/w),signedDistanceFromCamera:w}}function so(p,y){return.5+p/y*.5}function dr(p,y){var g=p[0]/p[3],w=p[1]/p[3];return g>=-y[0]&&g<=y[0]&&w>=-y[1]&&w<=y[1]}function Ho(p,y,g,w,T,B,U,Z){var se=w?p.textSizeData:p.iconSizeData,ge=v.evaluateSizeForZoom(se,g.transform.zoom),Re=[256/g.width*2+1,256/g.height*2+1],Me=w?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;Me.clear();for(var De=p.lineVertexArray,Ve=w?p.text.placedSymbolArray:p.icon.placedSymbolArray,Ue=g.transform.width/g.transform.height,Qe=!1,je=0;je<Ve.length;je++){var Ze=Ve.get(je);if(Ze.hidden||Ze.writingMode===v.WritingMode.vertical&&!Qe)zs(Ze.numGlyphs,Me);else{Qe=!1;var at=[Ze.anchorX,Ze.anchorY,0,1];if(v.transformMat4(at,at,y),dr(at,Re)){var pt=so(g.transform.cameraToCenterDistance,at[3]),Pt=v.evaluateSizeForFeature(se,ge,Ze),Tt=U?Pt/pt:Pt*pt,Dt=new v.Point(Ze.anchorX,Ze.anchorY),Ft=$n(Dt,T).point,rn={},Yt=_r(Ze,Tt,!1,Z,y,T,B,p.glyphOffsetArray,De,Me,Ft,Dt,rn,Ue);Qe=Yt.useVertical,(Yt.notEnoughRoom||Qe||Yt.needsFlipping&&_r(Ze,Tt,!0,Z,y,T,B,p.glyphOffsetArray,De,Me,Ft,Dt,rn,Ue).notEnoughRoom)&&zs(Ze.numGlyphs,Me)}else zs(Ze.numGlyphs,Me)}}w?p.text.dynamicLayoutVertexBuffer.updateData(Me):p.icon.dynamicLayoutVertexBuffer.updateData(Me)}function $a(p,y,g,w,T,B,U,Z,se,ge,Re){var Me=Z.glyphStartIndex+Z.numGlyphs,De=Z.lineStartIndex,Ve=Z.lineStartIndex+Z.lineLength,Ue=y.getoffsetX(Z.glyphStartIndex),Qe=y.getoffsetX(Me-1),je=hi(p*Ue,g,w,T,B,U,Z.segment,De,Ve,se,ge,Re);if(!je)return null;var Ze=hi(p*Qe,g,w,T,B,U,Z.segment,De,Ve,se,ge,Re);return Ze?{first:je,last:Ze}:null}function fo(p,y,g,w){return p===v.WritingMode.horizontal&&Math.abs(g.y-y.y)>Math.abs(g.x-y.x)*w?{useVertical:!0}:(p===v.WritingMode.vertical?y.y<g.y:y.x>g.x)?{needsFlipping:!0}:null}function _r(p,y,g,w,T,B,U,Z,se,ge,Re,Me,De,Ve){var Ue,Qe=y/24,je=p.lineOffsetX*Qe,Ze=p.lineOffsetY*Qe;if(p.numGlyphs>1){var at=p.glyphStartIndex+p.numGlyphs,pt=p.lineStartIndex,Pt=p.lineStartIndex+p.lineLength,Tt=$a(Qe,Z,je,Ze,g,Re,Me,p,se,B,De);if(!Tt)return{notEnoughRoom:!0};var Dt=$n(Tt.first.point,U).point,Ft=$n(Tt.last.point,U).point;if(w&&!g){var rn=fo(p.writingMode,Dt,Ft,Ve);if(rn)return rn}Ue=[Tt.first];for(var Yt=p.glyphStartIndex+1;Yt<at-1;Yt++)Ue.push(hi(Qe*Z.getoffsetX(Yt),je,Ze,g,Re,Me,p.segment,pt,Pt,se,B,De));Ue.push(Tt.last)}else{if(w&&!g){var on=$n(Me,T).point,Ln=p.lineStartIndex+p.segment+1,yn=new v.Point(se.getx(Ln),se.gety(Ln)),qn=$n(yn,T),li=qn.signedDistanceFromCamera>0?qn.point:Cs(Me,yn,on,1,T),En=fo(p.writingMode,on,li,Ve);if(En)return En}var gr=hi(Qe*Z.getoffsetX(p.glyphStartIndex),je,Ze,g,Re,Me,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,se,B,De);if(!gr)return{notEnoughRoom:!0};Ue=[gr]}for(var zr=0,vr=Ue;zr<vr.length;zr+=1){var sr=vr[zr];v.addDynamicAttributes(ge,sr.point,sr.angle)}return{}}function Cs(p,y,g,w,T){var B=$n(p.add(p.sub(y)._unit()),T).point,U=g.sub(B);return g.add(U._mult(w/U.mag()))}function hi(p,y,g,w,T,B,U,Z,se,ge,Re,Me){var De=w?p-y:p+y,Ve=De>0?1:-1,Ue=0;w&&(Ve*=-1,Ue=Math.PI),Ve<0&&(Ue+=Math.PI);for(var Qe=Ve>0?Z+U:Z+U+1,je=T,Ze=T,at=0,pt=0,Pt=Math.abs(De),Tt=[];at+pt<=Pt;){if((Qe+=Ve)<Z||Qe>=se)return null;if(Ze=je,Tt.push(je),void 0===(je=Me[Qe])){var Dt=new v.Point(ge.getx(Qe),ge.gety(Qe)),Ft=$n(Dt,Re);if(Ft.signedDistanceFromCamera>0)je=Me[Qe]=Ft.point;else{var rn=Qe-Ve;je=Cs(0===at?B:new v.Point(ge.getx(rn),ge.gety(rn)),Dt,Ze,Pt-at+1,Re)}}at+=pt,pt=Ze.dist(je)}var Yt=(Pt-at)/pt,on=je.sub(Ze),Ln=on.mult(Yt)._add(Ze);Ln._add(on._unit()._perp()._mult(g*Ve));var yn=Ue+Math.atan2(je.y-Ze.y,je.x-Ze.x);return Tt.push(Ln),{point:Ln,angle:yn,path:Tt}}_i.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},_i.prototype.insert=function(p,y,g,w,T){this._forEachCell(y,g,w,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(p),this.bboxes.push(y),this.bboxes.push(g),this.bboxes.push(w),this.bboxes.push(T)},_i.prototype.insertCircle=function(p,y,g,w){this._forEachCell(y-w,g-w,y+w,g+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(p),this.circles.push(y),this.circles.push(g),this.circles.push(w)},_i.prototype._insertBoxCell=function(p,y,g,w,T,B){this.boxCells[T].push(B)},_i.prototype._insertCircleCell=function(p,y,g,w,T,B){this.circleCells[T].push(B)},_i.prototype._query=function(p,y,g,w,T,B){if(g<0||p>this.width||w<0||y>this.height)return!T&&[];var U=[];if(p<=0&&y<=0&&this.width<=g&&this.height<=w){if(T)return!0;for(var Z=0;Z<this.boxKeys.length;Z++)U.push({key:this.boxKeys[Z],x1:this.bboxes[4*Z],y1:this.bboxes[4*Z+1],x2:this.bboxes[4*Z+2],y2:this.bboxes[4*Z+3]});for(var se=0;se<this.circleKeys.length;se++){var ge=this.circles[3*se],Re=this.circles[3*se+1],Me=this.circles[3*se+2];U.push({key:this.circleKeys[se],x1:ge-Me,y1:Re-Me,x2:ge+Me,y2:Re+Me})}return B?U.filter(B):U}return this._forEachCell(p,y,g,w,this._queryCell,U,{hitTest:T,seenUids:{box:{},circle:{}}},B),T?U.length>0:U},_i.prototype._queryCircle=function(p,y,g,w,T){var B=p-g,U=p+g,Z=y-g,se=y+g;if(U<0||B>this.width||se<0||Z>this.height)return!w&&[];var ge=[];return this._forEachCell(B,Z,U,se,this._queryCellCircle,ge,{hitTest:w,circle:{x:p,y,radius:g},seenUids:{box:{},circle:{}}},T),w?ge.length>0:ge},_i.prototype.query=function(p,y,g,w,T){return this._query(p,y,g,w,!1,T)},_i.prototype.hitTest=function(p,y,g,w,T){return this._query(p,y,g,w,!0,T)},_i.prototype.hitTestCircle=function(p,y,g,w){return this._queryCircle(p,y,g,!0,w)},_i.prototype._queryCell=function(p,y,g,w,T,B,U,Z){var se=U.seenUids,ge=this.boxCells[T];if(null!==ge)for(var Re=this.bboxes,Me=0,De=ge;Me<De.length;Me+=1){var Ve=De[Me];if(!se.box[Ve]){se.box[Ve]=!0;var Ue=4*Ve;if(p<=Re[Ue+2]&&y<=Re[Ue+3]&&g>=Re[Ue+0]&&w>=Re[Ue+1]&&(!Z||Z(this.boxKeys[Ve]))){if(U.hitTest)return B.push(!0),!0;B.push({key:this.boxKeys[Ve],x1:Re[Ue],y1:Re[Ue+1],x2:Re[Ue+2],y2:Re[Ue+3]})}}}var Qe=this.circleCells[T];if(null!==Qe)for(var je=this.circles,Ze=0,at=Qe;Ze<at.length;Ze+=1){var pt=at[Ze];if(!se.circle[pt]){se.circle[pt]=!0;var Pt=3*pt;if(this._circleAndRectCollide(je[Pt],je[Pt+1],je[Pt+2],p,y,g,w)&&(!Z||Z(this.circleKeys[pt]))){if(U.hitTest)return B.push(!0),!0;var Tt=je[Pt],Dt=je[Pt+1],Ft=je[Pt+2];B.push({key:this.circleKeys[pt],x1:Tt-Ft,y1:Dt-Ft,x2:Tt+Ft,y2:Dt+Ft})}}}},_i.prototype._queryCellCircle=function(p,y,g,w,T,B,U,Z){var se=U.circle,ge=U.seenUids,Re=this.boxCells[T];if(null!==Re)for(var Me=this.bboxes,De=0,Ve=Re;De<Ve.length;De+=1){var Ue=Ve[De];if(!ge.box[Ue]){ge.box[Ue]=!0;var Qe=4*Ue;if(this._circleAndRectCollide(se.x,se.y,se.radius,Me[Qe+0],Me[Qe+1],Me[Qe+2],Me[Qe+3])&&(!Z||Z(this.boxKeys[Ue])))return B.push(!0),!0}}var je=this.circleCells[T];if(null!==je)for(var Ze=this.circles,at=0,pt=je;at<pt.length;at+=1){var Pt=pt[at];if(!ge.circle[Pt]){ge.circle[Pt]=!0;var Tt=3*Pt;if(this._circlesCollide(Ze[Tt],Ze[Tt+1],Ze[Tt+2],se.x,se.y,se.radius)&&(!Z||Z(this.circleKeys[Pt])))return B.push(!0),!0}}},_i.prototype._forEachCell=function(p,y,g,w,T,B,U,Z){for(var se=this._convertToXCellCoord(p),ge=this._convertToYCellCoord(y),Re=this._convertToXCellCoord(g),Me=this._convertToYCellCoord(w),De=se;De<=Re;De++)for(var Ve=ge;Ve<=Me;Ve++)if(T.call(this,p,y,g,w,this.xCellCount*Ve+De,B,U,Z))return},_i.prototype._convertToXCellCoord=function(p){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(p*this.xScale)))},_i.prototype._convertToYCellCoord=function(p){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(p*this.yScale)))},_i.prototype._circlesCollide=function(p,y,g,w,T,B){var U=w-p,Z=T-y,se=g+B;return se*se>U*U+Z*Z},_i.prototype._circleAndRectCollide=function(p,y,g,w,T,B,U){var Z=(B-w)/2,se=Math.abs(p-(w+Z));if(se>Z+g)return!1;var ge=(U-T)/2,Re=Math.abs(y-(T+ge));if(Re>ge+g)return!1;if(se<=Z||Re<=ge)return!0;var Me=se-Z,De=Re-ge;return Me*Me+De*De<=g*g};var eo=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function zs(p,y){for(var g=0;g<p;g++){var w=y.length;y.resize(w+4),y.float32.set(eo,3*w)}}function $o(p,y,g){var w=y[0],T=y[1];return p[0]=g[0]*w+g[4]*T+g[12],p[1]=g[1]*w+g[5]*T+g[13],p[3]=g[3]*w+g[7]*T+g[15],p}var Sn=function(p,y,g){void 0===y&&(y=new _i(p.width+200,p.height+200,25)),void 0===g&&(g=new _i(p.width+200,p.height+200,25)),this.transform=p,this.grid=y,this.ignoredGrid=g,this.pitchfactor=Math.cos(p._pitch)*p.cameraToCenterDistance,this.screenRightBoundary=p.width+100,this.screenBottomBoundary=p.height+100,this.gridRightBoundary=p.width+200,this.gridBottomBoundary=p.height+200};function Ko(p,y,g){return y*(v.EXTENT/(p.tileSize*Math.pow(2,g-p.tileID.overscaledZ)))}Sn.prototype.placeCollisionBox=function(p,y,g,w,T){var B=this.projectAndGetPerspectiveRatio(w,p.anchorPointX,p.anchorPointY),U=g*B.perspectiveRatio,Z=p.x1*U+B.point.x,se=p.y1*U+B.point.y,ge=p.x2*U+B.point.x,Re=p.y2*U+B.point.y;return!this.isInsideGrid(Z,se,ge,Re)||!y&&this.grid.hitTest(Z,se,ge,Re,T)?{box:[],offscreen:!1}:{box:[Z,se,ge,Re],offscreen:this.isOffscreen(Z,se,ge,Re)}},Sn.prototype.placeCollisionCircles=function(p,y,g,w,T,B,U,Z,se,ge,Re,Me,De){var Ve=[],Ue=new v.Point(y.anchorX,y.anchorY),Qe=$n(Ue,B),je=so(this.transform.cameraToCenterDistance,Qe.signedDistanceFromCamera),Ze=(ge?T/je:T*je)/v.ONE_EM,at=$n(Ue,U).point,pt=$a(Ze,w,y.lineOffsetX*Ze,y.lineOffsetY*Ze,!1,at,Ue,y,g,U,{}),Pt=!1,Tt=!1,Dt=!0;if(pt){for(var Ft=.5*Me*je+De,rn=new v.Point(-100,-100),Yt=new v.Point(this.screenRightBoundary,this.screenBottomBoundary),on=new $r,Ln=pt.first,yn=pt.last,qn=[],li=Ln.path.length-1;li>=1;li--)qn.push(Ln.path[li]);for(var En=1;En<yn.path.length;En++)qn.push(yn.path[En]);var gr=2.5*Ft;if(Z){var zr=qn.map(function(bu){return $n(bu,Z)});qn=zr.some(function(bu){return bu.signedDistanceFromCamera<=0})?[]:zr.map(function(bu){return bu.point})}var vr=[];if(qn.length>0){for(var sr=qn[0].clone(),or=qn[0].clone(),tr=1;tr<qn.length;tr++)sr.x=Math.min(sr.x,qn[tr].x),sr.y=Math.min(sr.y,qn[tr].y),or.x=Math.max(or.x,qn[tr].x),or.y=Math.max(or.y,qn[tr].y);vr=sr.x>=rn.x&&or.x<=Yt.x&&sr.y>=rn.y&&or.y<=Yt.y?[qn]:or.x<rn.x||sr.x>Yt.x||or.y<rn.y||sr.y>Yt.y?[]:v.clipLine([qn],rn.x,rn.y,Yt.x,Yt.y)}for(var Kn=0,Ui=vr;Kn<Ui.length;Kn+=1){var Lo;on.reset(Ui[Kn],.25*Ft),Lo=on.length<=.5*Ft?1:Math.ceil(on.paddedLength/gr)+1;for(var Bo=0;Bo<Lo;Bo++){var Do=Bo/Math.max(Lo-1,1),pa=on.lerp(Do),Fo=pa.x+100,ia=pa.y+100;Ve.push(Fo,ia,Ft,0);var _u=Fo-Ft,hs=ia-Ft,ps=Fo+Ft,xl=ia+Ft;if(Dt=Dt&&this.isOffscreen(_u,hs,ps,xl),Tt=Tt||this.isInsideGrid(_u,hs,ps,xl),!p&&this.grid.hitTestCircle(Fo,ia,Ft,Re)&&(Pt=!0,!se))return{circles:[],offscreen:!1,collisionDetected:Pt}}}}return{circles:!se&&Pt||!Tt?[]:Ve,offscreen:Dt,collisionDetected:Pt}},Sn.prototype.queryRenderedSymbols=function(p){if(0===p.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var y=[],g=1/0,w=1/0,T=-1/0,B=-1/0,U=0,Z=p;U<Z.length;U+=1){var se=Z[U],ge=new v.Point(se.x+100,se.y+100);g=Math.min(g,ge.x),w=Math.min(w,ge.y),T=Math.max(T,ge.x),B=Math.max(B,ge.y),y.push(ge)}for(var Re={},Me={},De=0,Ve=this.grid.query(g,w,T,B).concat(this.ignoredGrid.query(g,w,T,B));De<Ve.length;De+=1){var Ue=Ve[De],Qe=Ue.key;if(void 0===Re[Qe.bucketInstanceId]&&(Re[Qe.bucketInstanceId]={}),!Re[Qe.bucketInstanceId][Qe.featureIndex]){var je=[new v.Point(Ue.x1,Ue.y1),new v.Point(Ue.x2,Ue.y1),new v.Point(Ue.x2,Ue.y2),new v.Point(Ue.x1,Ue.y2)];v.polygonIntersectsPolygon(y,je)&&(Re[Qe.bucketInstanceId][Qe.featureIndex]=!0,void 0===Me[Qe.bucketInstanceId]&&(Me[Qe.bucketInstanceId]=[]),Me[Qe.bucketInstanceId].push(Qe.featureIndex))}}return Me},Sn.prototype.insertCollisionBox=function(p,y,g,w,T){(y?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:w,collisionGroupID:T},p[0],p[1],p[2],p[3])},Sn.prototype.insertCollisionCircles=function(p,y,g,w,T){for(var B=y?this.ignoredGrid:this.grid,U={bucketInstanceId:g,featureIndex:w,collisionGroupID:T},Z=0;Z<p.length;Z+=4)B.insertCircle(U,p[Z],p[Z+1],p[Z+2])},Sn.prototype.projectAndGetPerspectiveRatio=function(p,y,g){var w=[y,g,0,1];return $o(w,w,p),{point:new v.Point((w[0]/w[3]+1)/2*this.transform.width+100,(-w[1]/w[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/w[3]*.5}},Sn.prototype.isOffscreen=function(p,y,g,w){return g<100||p>=this.screenRightBoundary||w<100||y>this.screenBottomBoundary},Sn.prototype.isInsideGrid=function(p,y,g,w){return g>=0&&p<this.gridRightBoundary&&w>=0&&y<this.gridBottomBoundary},Sn.prototype.getViewportMatrix=function(){var p=v.identity([]);return v.translate(p,p,[-100,-100,0]),p};var ua=function(p,y,g,w){this.opacity=p?Math.max(0,Math.min(1,p.opacity+(p.placed?y:-y))):w&&g?1:0,this.placed=g};ua.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Xn=function(p,y,g,w,T){this.text=new ua(p?p.text:null,y,g,T),this.icon=new ua(p?p.icon:null,y,w,T)};Xn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var cs=function(p,y,g){this.text=p,this.icon=y,this.skipFade=g},Tr=function(){this.invProjMatrix=v.create(),this.viewportMatrix=v.create(),this.circles=[]},j=function(p,y,g,w,T){this.bucketInstanceId=p,this.featureIndex=y,this.sourceLayerIndex=g,this.bucketIndex=w,this.tileID=T},te=function(p){this.crossSourceCollisions=p,this.maxGroupID=0,this.collisionGroups={}};function Se(p,y,g,w,T){var B=v.getAnchorAlignment(p),U=-(B.horizontalAlign-.5)*y,Z=-(B.verticalAlign-.5)*g,se=v.evaluateVariableOffset(p,w);return new v.Point(U+se[0]*T,Z+se[1]*T)}function tt(p,y,g,w,T,B){var U=p.x1,Z=p.x2,se=p.y1,ge=p.y2,Re=p.anchorPointX,Me=p.anchorPointY,De=new v.Point(y,g);return w&&De._rotate(T?B:-B),{x1:U+De.x,y1:se+De.y,x2:Z+De.x,y2:ge+De.y,anchorPointX:Re,anchorPointY:Me}}te.prototype.get=function(p){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[p]){var y=++this.maxGroupID;this.collisionGroups[p]={ID:y,predicate:function(g){return g.collisionGroupID===y}}}return this.collisionGroups[p]};var ct=function(p,y,g,w){this.transform=p.clone(),this.collisionIndex=new Sn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new te(g),this.collisionCircleArrays={},this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}};function ut(p,y,g,w,T){p.emplaceBack(y?1:0,g?1:0,w||0,T||0),p.emplaceBack(y?1:0,g?1:0,w||0,T||0),p.emplaceBack(y?1:0,g?1:0,w||0,T||0),p.emplaceBack(y?1:0,g?1:0,w||0,T||0)}ct.prototype.getBucketParts=function(p,y,g,w){var T=g.getBucket(y),B=g.latestFeatureIndex;if(T&&B&&y.id===T.layerIds[0]){var U=g.collisionBoxArray,Z=T.layers[0].layout,se=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),ge=g.tileSize/v.EXTENT,Re=this.transform.calculatePosMatrix(g.tileID.toUnwrapped()),Me="map"===Z.get("text-pitch-alignment"),De="map"===Z.get("text-rotation-alignment"),Ve=Ko(g,1,this.transform.zoom),Ue=Hi(Re,Me,De,this.transform,Ve),Qe=null;if(Me){var je=fi(Re,Me,De,this.transform,Ve);Qe=v.multiply([],this.transform.labelPlaneMatrix,je)}this.retainedQueryData[T.bucketInstanceId]=new j(T.bucketInstanceId,B,T.sourceLayerIndex,T.index,g.tileID);var Ze={bucket:T,layout:Z,posMatrix:Re,textLabelPlaneMatrix:Ue,labelToScreenMatrix:Qe,scale:se,textPixelRatio:ge,holdingForFade:g.holdingForFade(),collisionBoxArray:U,partiallyEvaluatedTextSize:v.evaluateSizeForZoom(T.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(w)for(var at=0,pt=T.sortKeyRanges;at<pt.length;at+=1){var Pt=pt[at];p.push({sortKey:Pt.sortKey,symbolInstanceStart:Pt.symbolInstanceStart,symbolInstanceEnd:Pt.symbolInstanceEnd,parameters:Ze})}else p.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:Ze})}},ct.prototype.attemptAnchorPlacement=function(p,y,g,w,T,B,U,Z,se,ge,Re,Me,De,Ve,Ue){var Qe,je=[Me.textOffset0,Me.textOffset1],Ze=Se(p,g,w,je,T),at=this.collisionIndex.placeCollisionBox(tt(y,Ze.x,Ze.y,B,U,this.transform.angle),Re,Z,se,ge.predicate);if(!Ue||0!==this.collisionIndex.placeCollisionBox(tt(Ue,Ze.x,Ze.y,B,U,this.transform.angle),Re,Z,se,ge.predicate).box.length)return at.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Me.crossTileID]&&this.prevPlacement.placements[Me.crossTileID]&&this.prevPlacement.placements[Me.crossTileID].text&&(Qe=this.prevPlacement.variableOffsets[Me.crossTileID].anchor),this.variableOffsets[Me.crossTileID]={textOffset:je,width:g,height:w,anchor:p,textBoxScale:T,prevAnchor:Qe},this.markUsedJustification(De,p,Me,Ve),De.allowVerticalPlacement&&(this.markUsedOrientation(De,Ve,Me),this.placedOrientations[Me.crossTileID]=Ve),{shift:Ze,placedGlyphBoxes:at}):void 0},ct.prototype.placeLayerBucketPart=function(p,y,g){var w=this,T=p.parameters,B=T.bucket,U=T.layout,Z=T.posMatrix,se=T.textLabelPlaneMatrix,ge=T.labelToScreenMatrix,Re=T.textPixelRatio,Me=T.holdingForFade,De=T.collisionBoxArray,Ve=T.partiallyEvaluatedTextSize,Ue=T.collisionGroup,Qe=U.get("text-optional"),je=U.get("icon-optional"),Ze=U.get("text-allow-overlap"),at=U.get("icon-allow-overlap"),pt="map"===U.get("text-rotation-alignment"),Pt="map"===U.get("text-pitch-alignment"),Tt="none"!==U.get("icon-text-fit"),Dt="viewport-y"===U.get("symbol-z-order"),Ft=Ze&&(at||!B.hasIconData()||je),rn=at&&(Ze||!B.hasTextData()||Qe);!B.collisionArrays&&De&&B.deserializeCollisionBoxes(De);var Yt=function(En,gr){if(!y[En.crossTileID])if(Me)w.placements[En.crossTileID]=new cs(!1,!1,!1);else{var zr,vr=!1,sr=!1,or=!0,tr=null,Kn={box:null,offscreen:null},Ui={box:null,offscreen:null},Lo=null,Bo=null,Do=0,pa=0,Fo=0;gr.textFeatureIndex?Do=gr.textFeatureIndex:En.useRuntimeCollisionCircles&&(Do=En.featureIndex),gr.verticalTextFeatureIndex&&(pa=gr.verticalTextFeatureIndex);var ia=gr.textBox;if(ia){var _u=function(Oo){var Co=v.WritingMode.horizontal;if(B.allowVerticalPlacement&&!Oo&&w.prevPlacement){var ms=w.prevPlacement.placedOrientations[En.crossTileID];ms&&(w.placedOrientations[En.crossTileID]=ms,w.markUsedOrientation(B,Co=ms,En))}return Co},hs=function(Oo,Co){if(B.allowVerticalPlacement&&En.numVerticalGlyphVertices>0&&gr.verticalTextBox)for(var ms=0,Hs=B.writingModes;ms<Hs.length&&(Hs[ms]===v.WritingMode.vertical?(Kn=Co(),Ui=Kn):Kn=Oo(),!(Kn&&Kn.box&&Kn.box.length));ms+=1);else Kn=Oo()};if(U.get("text-variable-anchor")){var ps=U.get("text-variable-anchor");if(w.prevPlacement&&w.prevPlacement.variableOffsets[En.crossTileID]){var xl=w.prevPlacement.variableOffsets[En.crossTileID];ps.indexOf(xl.anchor)>0&&(ps=ps.filter(function(Oo){return Oo!==xl.anchor})).unshift(xl.anchor)}var bu=function(Oo,Co,ms){for(var Hs=Oo.x2-Oo.x1,_f=Oo.y2-Oo.y1,wd=En.textBoxScale,Jc=Tt&&!at?Co:null,Zc={box:[],offscreen:!1},xd=Ze?2*ps.length:ps.length,Kl=0;Kl<xd;++Kl){var Ed=w.attemptAnchorPlacement(ps[Kl%ps.length],Oo,Hs,_f,wd,pt,Pt,Re,Z,Ue,Kl>=ps.length,En,B,ms,Jc);if(Ed&&(Zc=Ed.placedGlyphBoxes)&&Zc.box&&Zc.box.length){vr=!0,tr=Ed.shift;break}}return Zc};hs(function(){return bu(ia,gr.iconBox,v.WritingMode.horizontal)},function(){var Oo=gr.verticalTextBox;return B.allowVerticalPlacement&&!(Kn&&Kn.box&&Kn.box.length)&&En.numVerticalGlyphVertices>0&&Oo?bu(Oo,gr.verticalIconBox,v.WritingMode.vertical):{box:null,offscreen:null}}),Kn&&(vr=Kn.box,or=Kn.offscreen);var $c=_u(Kn&&Kn.box);if(!vr&&w.prevPlacement){var El=w.prevPlacement.variableOffsets[En.crossTileID];El&&(w.variableOffsets[En.crossTileID]=El,w.markUsedJustification(B,El.anchor,En,$c))}}else{var $l=function(Oo,Co){var ms=w.collisionIndex.placeCollisionBox(Oo,Ze,Re,Z,Ue.predicate);return ms&&ms.box&&ms.box.length&&(w.markUsedOrientation(B,Co,En),w.placedOrientations[En.crossTileID]=Co),ms};hs(function(){return $l(ia,v.WritingMode.horizontal)},function(){var Oo=gr.verticalTextBox;return B.allowVerticalPlacement&&En.numVerticalGlyphVertices>0&&Oo?$l(Oo,v.WritingMode.vertical):{box:null,offscreen:null}}),_u(Kn&&Kn.box&&Kn.box.length)}}if(vr=(zr=Kn)&&zr.box&&zr.box.length>0,or=zr&&zr.offscreen,En.useRuntimeCollisionCircles){var nl=B.text.placedSymbolArray.get(En.centerJustifiedTextSymbolIndex),Kc=v.evaluateSizeForFeature(B.textSizeData,Ve,nl),_c=U.get("text-padding");Lo=w.collisionIndex.placeCollisionCircles(Ze,nl,B.lineVertexArray,B.glyphOffsetArray,Kc,Z,se,ge,g,Pt,Ue.predicate,En.collisionCircleDiameter,_c),vr=Ze||Lo.circles.length>0&&!Lo.collisionDetected,or=or&&Lo.offscreen}if(gr.iconFeatureIndex&&(Fo=gr.iconFeatureIndex),gr.iconBox){var Ds=function(Oo){var Co=Tt&&tr?tt(Oo,tr.x,tr.y,pt,Pt,w.transform.angle):Oo;return w.collisionIndex.placeCollisionBox(Co,at,Re,Z,Ue.predicate)};sr=Ui&&Ui.box&&Ui.box.length&&gr.verticalIconBox?(Bo=Ds(gr.verticalIconBox)).box.length>0:(Bo=Ds(gr.iconBox)).box.length>0,or=or&&Bo.offscreen}var Xc=Qe||0===En.numHorizontalGlyphVertices&&0===En.numVerticalGlyphVertices,bo=je||0===En.numIconVertices;if(Xc||bo?bo?Xc||(sr=sr&&vr):vr=sr&&vr:sr=vr=sr&&vr,vr&&zr&&zr.box&&w.collisionIndex.insertCollisionBox(zr.box,U.get("text-ignore-placement"),B.bucketInstanceId,Ui&&Ui.box&&pa?pa:Do,Ue.ID),sr&&Bo&&w.collisionIndex.insertCollisionBox(Bo.box,U.get("icon-ignore-placement"),B.bucketInstanceId,Fo,Ue.ID),Lo&&(vr&&w.collisionIndex.insertCollisionCircles(Lo.circles,U.get("text-ignore-placement"),B.bucketInstanceId,Do,Ue.ID),g)){var Nu=B.bucketInstanceId,qs=w.collisionCircleArrays[Nu];void 0===qs&&(qs=w.collisionCircleArrays[Nu]=new Tr);for(var Wc=0;Wc<Lo.circles.length;Wc+=4)qs.circles.push(Lo.circles[Wc+0]),qs.circles.push(Lo.circles[Wc+1]),qs.circles.push(Lo.circles[Wc+2]),qs.circles.push(Lo.collisionDetected?1:0)}w.placements[En.crossTileID]=new cs(vr||Ft,sr||rn,or||B.justReloaded),y[En.crossTileID]=!0}};if(Dt)for(var on=B.getSortedSymbolIndexes(this.transform.angle),Ln=on.length-1;Ln>=0;--Ln){var yn=on[Ln];Yt(B.symbolInstances.get(yn),B.collisionArrays[yn])}else for(var qn=p.symbolInstanceStart;qn<p.symbolInstanceEnd;qn++)Yt(B.symbolInstances.get(qn),B.collisionArrays[qn]);if(g&&B.bucketInstanceId in this.collisionCircleArrays){var li=this.collisionCircleArrays[B.bucketInstanceId];v.invert(li.invProjMatrix,Z),li.viewportMatrix=this.collisionIndex.getViewportMatrix()}B.justReloaded=!1},ct.prototype.markUsedJustification=function(p,y,g,w){var T;T=w===v.WritingMode.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[v.getAnchorJustification(y)];for(var B=0,U=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];B<U.length;B+=1){var Z=U[B];Z>=0&&(p.text.placedSymbolArray.get(Z).crossTileID=T>=0&&Z!==T?0:g.crossTileID)}},ct.prototype.markUsedOrientation=function(p,y,g){for(var w=y===v.WritingMode.horizontal||y===v.WritingMode.horizontalOnly?y:0,T=y===v.WritingMode.vertical?y:0,B=0,U=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];B<U.length;B+=1)p.text.placedSymbolArray.get(U[B]).placedOrientation=w;g.verticalPlacedTextSymbolIndex&&(p.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=T)},ct.prototype.commit=function(p){this.commitTime=p,this.zoomAtLastRecencyCheck=this.transform.zoom;var y=this.prevPlacement,g=!1;this.prevZoomAdjustment=y?y.zoomAdjustment(this.transform.zoom):0;var w=y?y.symbolFadeChange(p):1,T=y?y.opacities:{},B=y?y.variableOffsets:{},U=y?y.placedOrientations:{};for(var Z in this.placements){var se=this.placements[Z],ge=T[Z];ge?(this.opacities[Z]=new Xn(ge,w,se.text,se.icon),g=g||se.text!==ge.text.placed||se.icon!==ge.icon.placed):(this.opacities[Z]=new Xn(null,w,se.text,se.icon,se.skipFade),g=g||se.text||se.icon)}for(var Re in T){var Me=T[Re];if(!this.opacities[Re]){var De=new Xn(Me,w,!1,!1);De.isHidden()||(this.opacities[Re]=De,g=g||Me.text.placed||Me.icon.placed)}}for(var Ve in B)this.variableOffsets[Ve]||!this.opacities[Ve]||this.opacities[Ve].isHidden()||(this.variableOffsets[Ve]=B[Ve]);for(var Ue in U)this.placedOrientations[Ue]||!this.opacities[Ue]||this.opacities[Ue].isHidden()||(this.placedOrientations[Ue]=U[Ue]);g?this.lastPlacementChangeTime=p:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=y?y.lastPlacementChangeTime:p)},ct.prototype.updateLayerOpacities=function(p,y){for(var g={},w=0,T=y;w<T.length;w+=1){var B=T[w],U=B.getBucket(p);U&&B.latestFeatureIndex&&p.id===U.layerIds[0]&&this.updateBucketOpacities(U,g,B.collisionBoxArray)}},ct.prototype.updateBucketOpacities=function(p,y,g){var w=this;p.hasTextData()&&p.text.opacityVertexArray.clear(),p.hasIconData()&&p.icon.opacityVertexArray.clear(),p.hasIconCollisionBoxData()&&p.iconCollisionBox.collisionVertexArray.clear(),p.hasTextCollisionBoxData()&&p.textCollisionBox.collisionVertexArray.clear();var T=p.layers[0].layout,B=new Xn(null,0,!1,!1,!0),U=T.get("text-allow-overlap"),Z=T.get("icon-allow-overlap"),se=T.get("text-variable-anchor"),ge="map"===T.get("text-rotation-alignment"),Re="map"===T.get("text-pitch-alignment"),Me="none"!==T.get("icon-text-fit"),De=new Xn(null,0,U&&(Z||!p.hasIconData()||T.get("icon-optional")),Z&&(U||!p.hasTextData()||T.get("text-optional")),!0);!p.collisionArrays&&g&&(p.hasIconCollisionBoxData()||p.hasTextCollisionBoxData())&&p.deserializeCollisionBoxes(g);for(var Ve=function(Ze,at,pt){for(var Pt=0;Pt<at/4;Pt++)Ze.opacityVertexArray.emplaceBack(pt)},Ue=function(Ze){var at=p.symbolInstances.get(Ze),pt=at.numHorizontalGlyphVertices,Pt=at.numVerticalGlyphVertices,Tt=at.crossTileID,Dt=w.opacities[Tt];y[Tt]?Dt=B:Dt||(w.opacities[Tt]=Dt=De),y[Tt]=!0;var Ft=at.numIconVertices>0,rn=w.placedOrientations[at.crossTileID],Yt=rn===v.WritingMode.vertical,on=rn===v.WritingMode.horizontal||rn===v.WritingMode.horizontalOnly;if(pt>0||Pt>0){var Ln=Jn(Dt.text);Ve(p.text,pt,Yt?Wn:Ln),Ve(p.text,Pt,on?Wn:Ln);var yn=Dt.text.isHidden();[at.rightJustifiedTextSymbolIndex,at.centerJustifiedTextSymbolIndex,at.leftJustifiedTextSymbolIndex].forEach(function(Kn){Kn>=0&&(p.text.placedSymbolArray.get(Kn).hidden=yn||Yt?1:0)}),at.verticalPlacedTextSymbolIndex>=0&&(p.text.placedSymbolArray.get(at.verticalPlacedTextSymbolIndex).hidden=yn||on?1:0);var qn=w.variableOffsets[at.crossTileID];qn&&w.markUsedJustification(p,qn.anchor,at,rn);var li=w.placedOrientations[at.crossTileID];li&&(w.markUsedJustification(p,"left",at,li),w.markUsedOrientation(p,li,at))}if(Ft){var En=Jn(Dt.icon),gr=!(Me&&at.verticalPlacedIconSymbolIndex&&Yt);at.placedIconSymbolIndex>=0&&(Ve(p.icon,at.numIconVertices,gr?En:Wn),p.icon.placedSymbolArray.get(at.placedIconSymbolIndex).hidden=Dt.icon.isHidden()),at.verticalPlacedIconSymbolIndex>=0&&(Ve(p.icon,at.numVerticalIconVertices,gr?Wn:En),p.icon.placedSymbolArray.get(at.verticalPlacedIconSymbolIndex).hidden=Dt.icon.isHidden())}if(p.hasIconCollisionBoxData()||p.hasTextCollisionBoxData()){var zr=p.collisionArrays[Ze];if(zr){var vr=new v.Point(0,0);if(zr.textBox||zr.verticalTextBox){var sr=!0;if(se){var or=w.variableOffsets[Tt];or?(vr=Se(or.anchor,or.width,or.height,or.textOffset,or.textBoxScale),ge&&vr._rotate(Re?w.transform.angle:-w.transform.angle)):sr=!1}zr.textBox&&ut(p.textCollisionBox.collisionVertexArray,Dt.text.placed,!sr||Yt,vr.x,vr.y),zr.verticalTextBox&&ut(p.textCollisionBox.collisionVertexArray,Dt.text.placed,!sr||on,vr.x,vr.y)}var tr=Boolean(!on&&zr.verticalIconBox);zr.iconBox&&ut(p.iconCollisionBox.collisionVertexArray,Dt.icon.placed,tr,Me?vr.x:0,Me?vr.y:0),zr.verticalIconBox&&ut(p.iconCollisionBox.collisionVertexArray,Dt.icon.placed,!tr,Me?vr.x:0,Me?vr.y:0)}}},Qe=0;Qe<p.symbolInstances.length;Qe++)Ue(Qe);if(p.sortFeatures(this.transform.angle),this.retainedQueryData[p.bucketInstanceId]&&(this.retainedQueryData[p.bucketInstanceId].featureSortOrder=p.featureSortOrder),p.hasTextData()&&p.text.opacityVertexBuffer&&p.text.opacityVertexBuffer.updateData(p.text.opacityVertexArray),p.hasIconData()&&p.icon.opacityVertexBuffer&&p.icon.opacityVertexBuffer.updateData(p.icon.opacityVertexArray),p.hasIconCollisionBoxData()&&p.iconCollisionBox.collisionVertexBuffer&&p.iconCollisionBox.collisionVertexBuffer.updateData(p.iconCollisionBox.collisionVertexArray),p.hasTextCollisionBoxData()&&p.textCollisionBox.collisionVertexBuffer&&p.textCollisionBox.collisionVertexBuffer.updateData(p.textCollisionBox.collisionVertexArray),p.bucketInstanceId in this.collisionCircleArrays){var je=this.collisionCircleArrays[p.bucketInstanceId];p.placementInvProjMatrix=je.invProjMatrix,p.placementViewportMatrix=je.viewportMatrix,p.collisionCircleArray=je.circles,delete this.collisionCircleArrays[p.bucketInstanceId]}},ct.prototype.symbolFadeChange=function(p){return 0===this.fadeDuration?1:(p-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ct.prototype.zoomAdjustment=function(p){return Math.max(0,(this.transform.zoom-p)/1.5)},ct.prototype.hasTransitions=function(p){return this.stale||p-this.lastPlacementChangeTime<this.fadeDuration},ct.prototype.stillRecent=function(p,y){var g=this.zoomAtLastRecencyCheck===y?1-this.zoomAdjustment(y):1;return this.zoomAtLastRecencyCheck=y,this.commitTime+this.fadeDuration*g>p},ct.prototype.setStale=function(){this.stale=!0};var wt=Math.pow(2,25),Qt=Math.pow(2,24),Kt=Math.pow(2,17),dn=Math.pow(2,16),Ct=Math.pow(2,9),mn=Math.pow(2,8),Rn=Math.pow(2,1);function Jn(p){if(0===p.opacity&&!p.placed)return 0;if(1===p.opacity&&p.placed)return 4294967295;var y=p.placed?1:0,g=Math.floor(127*p.opacity);return g*wt+y*Qt+g*Kt+y*dn+g*Ct+y*mn+g*Rn+y}var Wn=0,uo=function(p){this._sortAcrossTiles="viewport-y"!==p.layout.get("symbol-z-order")&&!p.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};uo.prototype.continuePlacement=function(p,y,g,w,T){for(var B=this._bucketParts;this._currentTileIndex<p.length;)if(y.getBucketParts(B,w,p[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,B.sort(function(U,Z){return U.sortKey-Z.sortKey}));this._currentPartIndex<B.length;)if(y.placeLayerBucketPart(B[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,T())return!0;return!1};var Vt=function(p,y,g,w,T,B,U){this.placement=new ct(p,T,B,U),this._currentPlacementIndex=y.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=w,this._done=!1};Vt.prototype.isDone=function(){return this._done},Vt.prototype.continuePlacement=function(p,y,g){for(var w=this,T=v.browser.now(),B=function(){var se=v.browser.now()-T;return!w._forceFullPlacement&&se>2};this._currentPlacementIndex>=0;){var U=y[p[this._currentPlacementIndex]],Z=this.placement.collisionIndex.transform.zoom;if("symbol"===U.type&&(!U.minzoom||U.minzoom<=Z)&&(!U.maxzoom||U.maxzoom>Z)){if(this._inProgressLayer||(this._inProgressLayer=new uo(U)),this._inProgressLayer.continuePlacement(g[U.source],this.placement,this._showCollisionBoxes,U,B))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Vt.prototype.commit=function(p){return this.placement.commit(p),this.placement};var Dn=512/v.EXTENT/2,Pr=function(p,y,g){this.tileID=p,this.indexedSymbolInstances={},this.bucketInstanceId=g;for(var w=0;w<y.length;w++){var T=y.get(w),B=T.key;this.indexedSymbolInstances[B]||(this.indexedSymbolInstances[B]=[]),this.indexedSymbolInstances[B].push({crossTileID:T.crossTileID,coord:this.getScaledCoordinates(T,p)})}};Pr.prototype.getScaledCoordinates=function(p,y){var g=Dn/Math.pow(2,y.canonical.z-this.tileID.canonical.z);return{x:Math.floor((y.canonical.x*v.EXTENT+p.anchorX)*g),y:Math.floor((y.canonical.y*v.EXTENT+p.anchorY)*g)}},Pr.prototype.findMatches=function(p,y,g){for(var w=this.tileID.canonical.z<y.canonical.z?1:Math.pow(2,this.tileID.canonical.z-y.canonical.z),T=0;T<p.length;T++){var B=p.get(T);if(!B.crossTileID){var U=this.indexedSymbolInstances[B.key];if(U)for(var Z=this.getScaledCoordinates(B,y),se=0,ge=U;se<ge.length;se+=1){var Re=ge[se];if(Math.abs(Re.coord.x-Z.x)<=w&&Math.abs(Re.coord.y-Z.y)<=w&&!g[Re.crossTileID]){g[Re.crossTileID]=!0,B.crossTileID=Re.crossTileID;break}}}}};var Gn=function(){this.maxCrossTileID=0};Gn.prototype.generate=function(){return++this.maxCrossTileID};var oi=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};oi.prototype.handleWrapJump=function(p){var y=Math.round((p-this.lng)/360);if(0!==y)for(var g in this.indexes){var w=this.indexes[g],T={};for(var B in w){var U=w[B];U.tileID=U.tileID.unwrapTo(U.tileID.wrap+y),T[U.tileID.key]=U}this.indexes[g]=T}this.lng=p},oi.prototype.addBucket=function(p,y,g){if(this.indexes[p.overscaledZ]&&this.indexes[p.overscaledZ][p.key]){if(this.indexes[p.overscaledZ][p.key].bucketInstanceId===y.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(p.overscaledZ,this.indexes[p.overscaledZ][p.key])}for(var w=0;w<y.symbolInstances.length;w++)y.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[p.overscaledZ]||(this.usedCrossTileIDs[p.overscaledZ]={});var T=this.usedCrossTileIDs[p.overscaledZ];for(var B in this.indexes){var U=this.indexes[B];if(Number(B)>p.overscaledZ)for(var Z in U){var se=U[Z];se.tileID.isChildOf(p)&&se.findMatches(y.symbolInstances,p,T)}else{var ge=U[p.scaledTo(Number(B)).key];ge&&ge.findMatches(y.symbolInstances,p,T)}}for(var Re=0;Re<y.symbolInstances.length;Re++){var Me=y.symbolInstances.get(Re);Me.crossTileID||(Me.crossTileID=g.generate(),T[Me.crossTileID]=!0)}return void 0===this.indexes[p.overscaledZ]&&(this.indexes[p.overscaledZ]={}),this.indexes[p.overscaledZ][p.key]=new Pr(p,y.symbolInstances,y.bucketInstanceId),!0},oi.prototype.removeBucketCrossTileIDs=function(p,y){for(var g in y.indexedSymbolInstances)for(var w=0,T=y.indexedSymbolInstances[g];w<T.length;w+=1)delete this.usedCrossTileIDs[p][T[w].crossTileID]},oi.prototype.removeStaleBuckets=function(p){var y=!1;for(var g in this.indexes){var w=this.indexes[g];for(var T in w)p[w[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,w[T]),delete w[T],y=!0)}return y};var Vn=function(){this.layerIndexes={},this.crossTileIDs=new Gn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Vn.prototype.addLayer=function(p,y,g){var w=this.layerIndexes[p.id];void 0===w&&(w=this.layerIndexes[p.id]=new oi);var T=!1,B={};w.handleWrapJump(g);for(var U=0,Z=y;U<Z.length;U+=1){var se=Z[U],ge=se.getBucket(p);ge&&p.id===ge.layerIds[0]&&(ge.bucketInstanceId||(ge.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(se.tileID,ge,this.crossTileIDs)&&(T=!0),B[ge.bucketInstanceId]=!0)}return w.removeStaleBuckets(B)&&(T=!0),T},Vn.prototype.pruneUnusedLayers=function(p){var y={};for(var g in p.forEach(function(w){y[w]=!0}),this.layerIndexes)y[g]||delete this.layerIndexes[g]};var Na=function(p,y){return v.emitValidationErrors(p,y&&y.filter(function(g){return"source.canvas"!==g.identifier}))},mr=v.pick(jt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Nr=v.pick(jt,["setCenter","setZoom","setBearing","setPitch"]),Xi=function(){var p={},y=v.styleSpec.$version;for(var g in v.styleSpec.$root){var w,T=v.styleSpec.$root[g];T.required&&null!=(w="version"===g?y:"array"===T.type?[]:{})&&(p[g]=w)}return p}(),lo=function(p){function y(g,w){var T=this;void 0===w&&(w={}),p.call(this),this.map=g,this.dispatcher=new F(In(),this),this.imageManager=new ae,this.imageManager.setEventedParent(this),this.glyphManager=new qe(g._requestManager,w.localIdeographFontFamily),this.lineAtlas=new N(256,512),this.crossTileSymbolIndex=new Vn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new v.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",v.getReferrer());var B=this;this._rtlTextPluginCallback=y.registerForPluginStateChange(function(U){B.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:U.pluginStatus,pluginURL:U.pluginURL},function(Z,se){if(v.triggerPluginCompletionEvent(Z),se&&se.every(function(Re){return Re}))for(var ge in B.sourceCaches)B.sourceCaches[ge].reload()})}),this.on("data",function(U){if("source"===U.dataType&&"metadata"===U.sourceDataType){var Z=T.sourceCaches[U.sourceId];if(Z){var se=Z.getSource();if(se&&se.vectorLayerIds)for(var ge in T._layers){var Re=T._layers[ge];Re.source===se.id&&T._validateLayer(Re)}}}})}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.loadURL=function(g,w){var T=this;void 0===w&&(w={}),this.fire(new v.Event("dataloading",{dataType:"style"}));var B="boolean"==typeof w.validate?w.validate:!v.isMapboxURL(g);g=this.map._requestManager.normalizeStyleURL(g,w.accessToken);var U=this.map._requestManager.transformRequest(g,v.ResourceType.Style);this._request=v.getJSON(U,function(Z,se){T._request=null,Z?T.fire(new v.ErrorEvent(Z)):se&&T._load(se,B)})},y.prototype.loadJSON=function(g,w){var T=this;void 0===w&&(w={}),this.fire(new v.Event("dataloading",{dataType:"style"})),this._request=v.browser.frame(function(){T._request=null,T._load(g,!1!==w.validate)})},y.prototype.loadEmpty=function(){this.fire(new v.Event("dataloading",{dataType:"style"})),this._load(Xi,!1)},y.prototype._load=function(g,w){if(!w||!Na(this,v.validateStyle(g))){for(var T in this._loaded=!0,this.stylesheet=g,g.sources)this.addSource(T,g.sources[T],{validate:!1});g.sprite?this._loadSprite(g.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(g.glyphs);var B=tn(this.stylesheet.layers);this._order=B.map(function(ge){return ge.id}),this._layers={},this._serializedLayers={};for(var U=0,Z=B;U<Z.length;U+=1){var se=Z[U];(se=v.createStyleLayer(se)).setEventedParent(this,{layer:{id:se.id}}),this._layers[se.id]=se,this._serializedLayers[se.id]=se.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new P(this.stylesheet.light),this.fire(new v.Event("data",{dataType:"style"})),this.fire(new v.Event("style.load"))}},y.prototype._loadSprite=function(g){var w=this;this._spriteRequest=function(T,B,U){var Z,se,ge,Re=v.browser.devicePixelRatio>1?"@2x":"",Me=v.getJSON(B.transformRequest(B.normalizeSpriteURL(T,Re,".json"),v.ResourceType.SpriteJSON),function(Ue,Qe){Me=null,ge||(ge=Ue,Z=Qe,Ve())}),De=v.getImage(B.transformRequest(B.normalizeSpriteURL(T,Re,".png"),v.ResourceType.SpriteImage),function(Ue,Qe){De=null,ge||(ge=Ue,se=Qe,Ve())});function Ve(){if(ge)U(ge);else if(Z&&se){var Ue=v.browser.getImageData(se),Qe={};for(var je in Z){var Ze=Z[je],at=Ze.width,pt=Ze.height,Pt=Ze.x,Tt=Ze.y,Dt=Ze.sdf,Ft=Ze.pixelRatio,rn=Ze.stretchX,Yt=Ze.stretchY,on=Ze.content,Ln=new v.RGBAImage({width:at,height:pt});v.RGBAImage.copy(Ue,Ln,{x:Pt,y:Tt},{x:0,y:0},{width:at,height:pt}),Qe[je]={data:Ln,pixelRatio:Ft,sdf:Dt,stretchX:rn,stretchY:Yt,content:on}}U(null,Qe)}}return{cancel:function(){Me&&(Me.cancel(),Me=null),De&&(De.cancel(),De=null)}}}(g,this.map._requestManager,function(T,B){if(w._spriteRequest=null,T)w.fire(new v.ErrorEvent(T));else if(B)for(var U in B)w.imageManager.addImage(U,B[U]);w.imageManager.setLoaded(!0),w._availableImages=w.imageManager.listImages(),w.dispatcher.broadcast("setImages",w._availableImages),w.fire(new v.Event("data",{dataType:"style"}))})},y.prototype._validateLayer=function(g){var w=this.sourceCaches[g.source];if(w){var T=g.sourceLayer;if(T){var B=w.getSource();("geojson"===B.type||B.vectorLayerIds&&-1===B.vectorLayerIds.indexOf(T))&&this.fire(new v.ErrorEvent(new Error('Source layer "'+T+'" does not exist on source "'+B.id+'" as specified by style layer "'+g.id+'"')))}}},y.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var g in this.sourceCaches)if(!this.sourceCaches[g].loaded())return!1;return!!this.imageManager.isLoaded()},y.prototype._serializeLayers=function(g){for(var w=[],T=0,B=g;T<B.length;T+=1){var U=this._layers[B[T]];"custom"!==U.type&&w.push(U.serialize())}return w},y.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var g in this.sourceCaches)if(this.sourceCaches[g].hasTransition())return!0;for(var w in this._layers)if(this._layers[w].hasTransition())return!0;return!1},y.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},y.prototype.update=function(g){if(this._loaded){var w=this._changed;if(this._changed){var T=Object.keys(this._updatedLayers),B=Object.keys(this._removedLayers);for(var U in(T.length||B.length)&&this._updateWorkerLayers(T,B),this._updatedSources){var Z=this._updatedSources[U];"reload"===Z?this._reloadSource(U):"clear"===Z&&this._clearSource(U)}for(var se in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[se].updateTransitions(g);this.light.updateTransitions(g),this._resetUpdates()}var ge={};for(var Re in this.sourceCaches){var Me=this.sourceCaches[Re];ge[Re]=Me.used,Me.used=!1}for(var De=0,Ve=this._order;De<Ve.length;De+=1){var Ue=this._layers[Ve[De]];Ue.recalculate(g,this._availableImages),!Ue.isHidden(g.zoom)&&Ue.source&&(this.sourceCaches[Ue.source].used=!0)}for(var Qe in ge){var je=this.sourceCaches[Qe];ge[Qe]!==je.used&&je.fire(new v.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Qe}))}this.light.recalculate(g),this.z=g.zoom,w&&this.fire(new v.Event("data",{dataType:"style"}))}},y.prototype._updateTilesForChangedImages=function(){var g=Object.keys(this._changedImages);if(g.length){for(var w in this.sourceCaches)this.sourceCaches[w].reloadTilesForDependencies(["icons","patterns"],g);this._changedImages={}}},y.prototype._updateWorkerLayers=function(g,w){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(g),removedIds:w})},y.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},y.prototype.setState=function(g){var w=this;if(this._checkLoaded(),Na(this,v.validateStyle(g)))return!1;(g=v.clone$1(g)).layers=tn(g.layers);var T=function(U,Z){if(!U)return[{command:jt.setStyle,args:[Z]}];var se=[];try{if(!v.deepEqual(U.version,Z.version))return[{command:jt.setStyle,args:[Z]}];v.deepEqual(U.center,Z.center)||se.push({command:jt.setCenter,args:[Z.center]}),v.deepEqual(U.zoom,Z.zoom)||se.push({command:jt.setZoom,args:[Z.zoom]}),v.deepEqual(U.bearing,Z.bearing)||se.push({command:jt.setBearing,args:[Z.bearing]}),v.deepEqual(U.pitch,Z.pitch)||se.push({command:jt.setPitch,args:[Z.pitch]}),v.deepEqual(U.sprite,Z.sprite)||se.push({command:jt.setSprite,args:[Z.sprite]}),v.deepEqual(U.glyphs,Z.glyphs)||se.push({command:jt.setGlyphs,args:[Z.glyphs]}),v.deepEqual(U.transition,Z.transition)||se.push({command:jt.setTransition,args:[Z.transition]}),v.deepEqual(U.light,Z.light)||se.push({command:jt.setLight,args:[Z.light]});var ge={},Re=[];!function(De,Ve,Ue,Qe){var je;for(je in Ve=Ve||{},De=De||{})De.hasOwnProperty(je)&&(Ve.hasOwnProperty(je)||rr(je,Ue,Qe));for(je in Ve)Ve.hasOwnProperty(je)&&(De.hasOwnProperty(je)?v.deepEqual(De[je],Ve[je])||("geojson"===De[je].type&&"geojson"===Ve[je].type&&Ii(De,Ve,je)?Ue.push({command:jt.setGeoJSONSourceData,args:[je,Ve[je].data]}):wn(je,Ve,Ue,Qe)):ir(je,Ve,Ue))}(U.sources,Z.sources,Re,ge);var Me=[];U.layers&&U.layers.forEach(function(De){ge[De.source]?se.push({command:jt.removeLayer,args:[De.id]}):Me.push(De)}),se=se.concat(Re),function(De,Ve,Ue){Ve=Ve||[];var Qe,je,Ze,at,pt,Pt,Tt,Dt=(De=De||[]).map(Di),Ft=Ve.map(Di),rn=De.reduce(Fi,{}),Yt=Ve.reduce(Fi,{}),on=Dt.slice(),Ln=Object.create(null);for(Qe=0,je=0;Qe<Dt.length;Qe++)Yt.hasOwnProperty(Ze=Dt[Qe])?je++:(Ue.push({command:jt.removeLayer,args:[Ze]}),on.splice(on.indexOf(Ze,je),1));for(Qe=0,je=0;Qe<Ft.length;Qe++)on[on.length-1-Qe]!==(Ze=Ft[Ft.length-1-Qe])&&(rn.hasOwnProperty(Ze)?(Ue.push({command:jt.removeLayer,args:[Ze]}),on.splice(on.lastIndexOf(Ze,on.length-je),1)):je++,Ue.push({command:jt.addLayer,args:[Yt[Ze],Pt=on[on.length-Qe]]}),on.splice(on.length-Qe,0,Ze),Ln[Ze]=!0);for(Qe=0;Qe<Ft.length;Qe++)if(at=rn[Ze=Ft[Qe]],pt=Yt[Ze],!Ln[Ze]&&!v.deepEqual(at,pt))if(v.deepEqual(at.source,pt.source)&&v.deepEqual(at["source-layer"],pt["source-layer"])&&v.deepEqual(at.type,pt.type)){for(Tt in zn(at.layout,pt.layout,Ue,Ze,null,jt.setLayoutProperty),zn(at.paint,pt.paint,Ue,Ze,null,jt.setPaintProperty),v.deepEqual(at.filter,pt.filter)||Ue.push({command:jt.setFilter,args:[Ze,pt.filter]}),v.deepEqual(at.minzoom,pt.minzoom)&&v.deepEqual(at.maxzoom,pt.maxzoom)||Ue.push({command:jt.setLayerZoomRange,args:[Ze,pt.minzoom,pt.maxzoom]}),at)at.hasOwnProperty(Tt)&&"layout"!==Tt&&"paint"!==Tt&&"filter"!==Tt&&"metadata"!==Tt&&"minzoom"!==Tt&&"maxzoom"!==Tt&&(0===Tt.indexOf("paint.")?zn(at[Tt],pt[Tt],Ue,Ze,Tt.slice(6),jt.setPaintProperty):v.deepEqual(at[Tt],pt[Tt])||Ue.push({command:jt.setLayerProperty,args:[Ze,Tt,pt[Tt]]}));for(Tt in pt)pt.hasOwnProperty(Tt)&&!at.hasOwnProperty(Tt)&&"layout"!==Tt&&"paint"!==Tt&&"filter"!==Tt&&"metadata"!==Tt&&"minzoom"!==Tt&&"maxzoom"!==Tt&&(0===Tt.indexOf("paint.")?zn(at[Tt],pt[Tt],Ue,Ze,Tt.slice(6),jt.setPaintProperty):v.deepEqual(at[Tt],pt[Tt])||Ue.push({command:jt.setLayerProperty,args:[Ze,Tt,pt[Tt]]}))}else Ue.push({command:jt.removeLayer,args:[Ze]}),Pt=on[on.lastIndexOf(Ze)+1],Ue.push({command:jt.addLayer,args:[pt,Pt]})}(Me,Z.layers,se)}catch(De){console.warn("Unable to compute style diff:",De),se=[{command:jt.setStyle,args:[Z]}]}return se}(this.serialize(),g).filter(function(U){return!(U.command in Nr)});if(0===T.length)return!1;var B=T.filter(function(U){return!(U.command in mr)});if(B.length>0)throw new Error("Unimplemented: "+B.map(function(U){return U.command}).join(", ")+".");return T.forEach(function(U){"setTransition"!==U.command&&w[U.command].apply(w,U.args)}),this.stylesheet=g,!0},y.prototype.addImage=function(g,w){if(this.getImage(g))return this.fire(new v.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(g,w),this._afterImageUpdated(g)},y.prototype.updateImage=function(g,w){this.imageManager.updateImage(g,w)},y.prototype.getImage=function(g){return this.imageManager.getImage(g)},y.prototype.removeImage=function(g){if(!this.getImage(g))return this.fire(new v.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(g),this._afterImageUpdated(g)},y.prototype._afterImageUpdated=function(g){this._availableImages=this.imageManager.listImages(),this._changedImages[g]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new v.Event("data",{dataType:"style"}))},y.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},y.prototype.addSource=function(g,w,T){var B=this;if(void 0===T&&(T={}),this._checkLoaded(),void 0!==this.sourceCaches[g])throw new Error("There is already a source with this ID");if(!w.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(w).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(w.type)>=0&&this._validate(v.validateStyle.source,"sources."+g,w,null,T))){this.map&&this.map._collectResourceTiming&&(w.collectResourceTiming=!0);var U=this.sourceCaches[g]=new ke(g,w,this.dispatcher);U.style=this,U.setEventedParent(this,function(){return{isSourceLoaded:B.loaded(),source:U.serialize(),sourceId:g}}),U.onAdd(this.map),this._changed=!0}},y.prototype.removeSource=function(g){if(this._checkLoaded(),void 0===this.sourceCaches[g])throw new Error("There is no source with this ID");for(var w in this._layers)if(this._layers[w].source===g)return this.fire(new v.ErrorEvent(new Error('Source "'+g+'" cannot be removed while layer "'+w+'" is using it.')));var T=this.sourceCaches[g];delete this.sourceCaches[g],delete this._updatedSources[g],T.fire(new v.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:g})),T.setEventedParent(null),T.clearTiles(),T.onRemove&&T.onRemove(this.map),this._changed=!0},y.prototype.setGeoJSONSourceData=function(g,w){this._checkLoaded(),this.sourceCaches[g].getSource().setData(w),this._changed=!0},y.prototype.getSource=function(g){return this.sourceCaches[g]&&this.sourceCaches[g].getSource()},y.prototype.addLayer=function(g,w,T){void 0===T&&(T={}),this._checkLoaded();var B=g.id;if(this.getLayer(B))this.fire(new v.ErrorEvent(new Error('Layer with id "'+B+'" already exists on this map')));else{var U;if("custom"===g.type){if(Na(this,v.validateCustomStyleLayer(g)))return;U=v.createStyleLayer(g)}else{if("object"==typeof g.source&&(this.addSource(B,g.source),g=v.clone$1(g),g=v.extend(g,{source:B})),this._validate(v.validateStyle.layer,"layers."+B,g,{arrayIndex:-1},T))return;U=v.createStyleLayer(g),this._validateLayer(U),U.setEventedParent(this,{layer:{id:B}}),this._serializedLayers[U.id]=U.serialize()}var Z=w?this._order.indexOf(w):this._order.length;if(w&&-1===Z)this.fire(new v.ErrorEvent(new Error('Layer with id "'+w+'" does not exist on this map.')));else{if(this._order.splice(Z,0,B),this._layerOrderChanged=!0,this._layers[B]=U,this._removedLayers[B]&&U.source&&"custom"!==U.type){var se=this._removedLayers[B];delete this._removedLayers[B],se.type!==U.type?this._updatedSources[U.source]="clear":(this._updatedSources[U.source]="reload",this.sourceCaches[U.source].pause())}this._updateLayer(U),U.onAdd&&U.onAdd(this.map)}}},y.prototype.moveLayer=function(g,w){if(this._checkLoaded(),this._changed=!0,this._layers[g]){if(g!==w){var T=this._order.indexOf(g);this._order.splice(T,1);var B=w?this._order.indexOf(w):this._order.length;w&&-1===B?this.fire(new v.ErrorEvent(new Error('Layer with id "'+w+'" does not exist on this map.'))):(this._order.splice(B,0,g),this._layerOrderChanged=!0)}}else this.fire(new v.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be moved.")))},y.prototype.removeLayer=function(g){this._checkLoaded();var w=this._layers[g];if(w){w.setEventedParent(null);var T=this._order.indexOf(g);this._order.splice(T,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[g]=w,delete this._layers[g],delete this._serializedLayers[g],delete this._updatedLayers[g],delete this._updatedPaintProps[g],w.onRemove&&w.onRemove(this.map)}else this.fire(new v.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be removed.")))},y.prototype.getLayer=function(g){return this._layers[g]},y.prototype.hasLayer=function(g){return g in this._layers},y.prototype.setLayerZoomRange=function(g,w,T){this._checkLoaded();var B=this.getLayer(g);B?B.minzoom===w&&B.maxzoom===T||(null!=w&&(B.minzoom=w),null!=T&&(B.maxzoom=T),this._updateLayer(B)):this.fire(new v.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot have zoom extent.")))},y.prototype.setFilter=function(g,w,T){void 0===T&&(T={}),this._checkLoaded();var B=this.getLayer(g);if(B){if(!v.deepEqual(B.filter,w))return null==w?(B.filter=void 0,void this._updateLayer(B)):void(this._validate(v.validateStyle.filter,"layers."+B.id+".filter",w,null,T)||(B.filter=v.clone$1(w),this._updateLayer(B)))}else this.fire(new v.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be filtered.")))},y.prototype.getFilter=function(g){return v.clone$1(this.getLayer(g).filter)},y.prototype.setLayoutProperty=function(g,w,T,B){void 0===B&&(B={}),this._checkLoaded();var U=this.getLayer(g);U?v.deepEqual(U.getLayoutProperty(w),T)||(U.setLayoutProperty(w,T,B),this._updateLayer(U)):this.fire(new v.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be styled.")))},y.prototype.getLayoutProperty=function(g,w){var T=this.getLayer(g);if(T)return T.getLayoutProperty(w);this.fire(new v.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style.")))},y.prototype.setPaintProperty=function(g,w,T,B){void 0===B&&(B={}),this._checkLoaded();var U=this.getLayer(g);U?v.deepEqual(U.getPaintProperty(w),T)||(U.setPaintProperty(w,T,B)&&this._updateLayer(U),this._changed=!0,this._updatedPaintProps[g]=!0):this.fire(new v.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be styled.")))},y.prototype.getPaintProperty=function(g,w){return this.getLayer(g).getPaintProperty(w)},y.prototype.setFeatureState=function(g,w){this._checkLoaded();var T=g.source,B=g.sourceLayer,U=this.sourceCaches[T];if(void 0!==U){var Z=U.getSource().type;"geojson"===Z&&B?this.fire(new v.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==Z||B?(void 0===g.id&&this.fire(new v.ErrorEvent(new Error("The feature id parameter must be provided."))),U.setFeatureState(B,g.id,w)):this.fire(new v.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new v.ErrorEvent(new Error("The source '"+T+"' does not exist in the map's style.")))},y.prototype.removeFeatureState=function(g,w){this._checkLoaded();var T=g.source,B=this.sourceCaches[T];if(void 0!==B){var U=B.getSource().type,Z="vector"===U?g.sourceLayer:void 0;"vector"!==U||Z?w&&"string"!=typeof g.id&&"number"!=typeof g.id?this.fire(new v.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):B.removeFeatureState(Z,g.id,w):this.fire(new v.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new v.ErrorEvent(new Error("The source '"+T+"' does not exist in the map's style.")))},y.prototype.getFeatureState=function(g){this._checkLoaded();var w=g.source,T=g.sourceLayer,B=this.sourceCaches[w];if(void 0!==B){if("vector"!==B.getSource().type||T)return void 0===g.id&&this.fire(new v.ErrorEvent(new Error("The feature id parameter must be provided."))),B.getFeatureState(T,g.id);this.fire(new v.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new v.ErrorEvent(new Error("The source '"+w+"' does not exist in the map's style.")))},y.prototype.getTransition=function(){return v.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},y.prototype.serialize=function(){return v.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:v.mapObject(this.sourceCaches,function(g){return g.serialize()}),layers:this._serializeLayers(this._order)},function(g){return void 0!==g})},y.prototype._updateLayer=function(g){this._updatedLayers[g.id]=!0,g.source&&!this._updatedSources[g.source]&&"raster"!==this.sourceCaches[g.source].getSource().type&&(this._updatedSources[g.source]="reload",this.sourceCaches[g.source].pause()),this._changed=!0},y.prototype._flattenAndSortRenderedFeatures=function(g){for(var w=this,T=function(rn){return"fill-extrusion"===w._layers[rn].type},B={},U=[],Z=this._order.length-1;Z>=0;Z--){var se=this._order[Z];if(T(se)){B[se]=Z;for(var ge=0,Re=g;ge<Re.length;ge+=1){var Me=Re[ge][se];if(Me)for(var De=0,Ve=Me;De<Ve.length;De+=1)U.push(Ve[De])}}}U.sort(function(rn,Yt){return Yt.intersectionZ-rn.intersectionZ});for(var Ue=[],Qe=this._order.length-1;Qe>=0;Qe--){var je=this._order[Qe];if(T(je))for(var Ze=U.length-1;Ze>=0;Ze--){var at=U[Ze].feature;if(B[at.layer.id]<Qe)break;Ue.push(at),U.pop()}else for(var pt=0,Pt=g;pt<Pt.length;pt+=1){var Tt=Pt[pt][je];if(Tt)for(var Dt=0,Ft=Tt;Dt<Ft.length;Dt+=1)Ue.push(Ft[Dt].feature)}}return Ue},y.prototype.queryRenderedFeatures=function(g,w,T){w&&w.filter&&this._validate(v.validateStyle.filter,"queryRenderedFeatures.filter",w.filter,null,w);var B={};if(w&&w.layers){if(!Array.isArray(w.layers))return this.fire(new v.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var U=0,Z=w.layers;U<Z.length;U+=1){var se=Z[U],ge=this._layers[se];if(!ge)return this.fire(new v.ErrorEvent(new Error("The layer '"+se+"' does not exist in the map's style and cannot be queried for features."))),[];B[ge.source]=!0}}var Re=[];for(var Me in w.availableImages=this._availableImages,this.sourceCaches)w.layers&&!B[Me]||Re.push($t(this.sourceCaches[Me],this._layers,this._serializedLayers,g,w,T));return this.placement&&Re.push(function(De,Ve,Ue,Qe,je,Ze,at){for(var pt={},Pt=Ze.queryRenderedSymbols(Qe),Tt=[],Dt=0,Ft=Object.keys(Pt).map(Number);Dt<Ft.length;Dt+=1)Tt.push(at[Ft[Dt]]);Tt.sort(kn);for(var rn=function(){var qn=on[Yt],li=qn.featureIndex.lookupSymbolFeatures(Pt[qn.bucketInstanceId],Ve,qn.bucketIndex,qn.sourceLayerIndex,je.filter,je.layers,je.availableImages,De);for(var En in li){var gr=pt[En]=pt[En]||[],zr=li[En];zr.sort(function(or,tr){var Kn=qn.featureSortOrder;if(Kn){var Ui=Kn.indexOf(or.featureIndex);return Kn.indexOf(tr.featureIndex)-Ui}return tr.featureIndex-or.featureIndex});for(var vr=0,sr=zr;vr<sr.length;vr+=1)gr.push(sr[vr])}},Yt=0,on=Tt;Yt<on.length;Yt+=1)rn();var Ln=function(qn){pt[qn].forEach(function(li){var En=li.feature,gr=Ue[De[qn].source].getFeatureState(En.layer["source-layer"],En.id);En.source=En.layer.source,En.layer["source-layer"]&&(En.sourceLayer=En.layer["source-layer"]),En.state=gr})};for(var yn in pt)Ln(yn);return pt}(this._layers,this._serializedLayers,this.sourceCaches,g,w,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Re)},y.prototype.querySourceFeatures=function(g,w){w&&w.filter&&this._validate(v.validateStyle.filter,"querySourceFeatures.filter",w.filter,null,w);var T=this.sourceCaches[g];return T?function(B,U){for(var Z=B.getRenderableIds().map(function(Ve){return B.getTileByID(Ve)}),se=[],ge={},Re=0;Re<Z.length;Re++){var Me=Z[Re],De=Me.tileID.canonical.key;ge[De]||(ge[De]=!0,Me.querySourceFeatures(se,U))}return se}(T,w):[]},y.prototype.addSourceType=function(g,w,T){return y.getSourceType(g)?T(new Error('A source type called "'+g+'" already exists.')):(y.setSourceType(g,w),w.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:g,url:w.workerSourceURL},T):T(null,null))},y.prototype.getLight=function(){return this.light.getLight()},y.prototype.setLight=function(g,w){void 0===w&&(w={}),this._checkLoaded();var T=this.light.getLight(),B=!1;for(var U in g)if(!v.deepEqual(g[U],T[U])){B=!0;break}if(B){var Z={now:v.browser.now(),transition:v.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(g,w),this.light.updateTransitions(Z)}},y.prototype._validate=function(g,w,T,B,U){return void 0===U&&(U={}),(!U||!1!==U.validate)&&Na(this,g.call(v.validateStyle,v.extend({key:w,style:this.serialize(),value:T,styleSpec:v.styleSpec},B)))},y.prototype._remove=function(){for(var g in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),v.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[g].setEventedParent(null);for(var w in this.sourceCaches)this.sourceCaches[w].clearTiles(),this.sourceCaches[w].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},y.prototype._clearSource=function(g){this.sourceCaches[g].clearTiles()},y.prototype._reloadSource=function(g){this.sourceCaches[g].resume(),this.sourceCaches[g].reload()},y.prototype._updateSources=function(g){for(var w in this.sourceCaches)this.sourceCaches[w].update(g)},y.prototype._generateCollisionBoxes=function(){for(var g in this.sourceCaches)this._reloadSource(g)},y.prototype._updatePlacement=function(g,w,T,B,U){void 0===U&&(U=!1);for(var Z=!1,se=!1,ge={},Re=0,Me=this._order;Re<Me.length;Re+=1){var De=this._layers[Me[Re]];if("symbol"===De.type){if(!ge[De.source]){var Ve=this.sourceCaches[De.source];ge[De.source]=Ve.getRenderableIds(!0).map(function(at){return Ve.getTileByID(at)}).sort(function(at,pt){return pt.tileID.overscaledZ-at.tileID.overscaledZ||(at.tileID.isLessThan(pt.tileID)?-1:1)})}var Ue=this.crossTileSymbolIndex.addLayer(De,ge[De.source],g.center.lng);Z=Z||Ue}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((U=U||this._layerOrderChanged||0===T)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(v.browser.now(),g.zoom))&&(this.pauseablePlacement=new Vt(g,this._order,U,w,T,B,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ge),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(v.browser.now()),se=!0),Z&&this.pauseablePlacement.placement.setStale()),se||Z)for(var Qe=0,je=this._order;Qe<je.length;Qe+=1){var Ze=this._layers[je[Qe]];"symbol"===Ze.type&&this.placement.updateLayerOpacities(Ze,ge[Ze.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(v.browser.now())},y.prototype._releaseSymbolFadeTiles=function(){for(var g in this.sourceCaches)this.sourceCaches[g].releaseSymbolFadeTiles()},y.prototype.getImages=function(g,w,T){this.imageManager.getImages(w.icons,T),this._updateTilesForChangedImages();var B=this.sourceCaches[w.source];B&&B.setDependencies(w.tileID.key,w.type,w.icons)},y.prototype.getGlyphs=function(g,w,T){this.glyphManager.getGlyphs(w.stacks,T)},y.prototype.getResource=function(g,w,T){return v.makeRequest(w,T)},y}(v.Evented);lo.getSourceType=function(p){return Et[p]},lo.setSourceType=function(p,y){Et[p]=y},lo.registerForPluginStateChange=v.registerForPluginStateChange;var La=v.createLayout([{name:"a_pos",type:"Int16",components:2}]),ho=zi("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Ge=zi("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),mt=zi("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Xt=zi("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Fn=zi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ni=zi("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),wr=zi("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Cn=zi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),po=zi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Xo=zi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Yr=zi("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Ea=zi("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Ba=zi("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),$i=zi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),to=zi("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),bi=zi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Ts=zi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Ki=zi("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Lr=zi("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Is=zi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Js=zi("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),la=zi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),ui=zi("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),hu=zi("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),pu=zi("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),cc=zi("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function zi(p,y){var g=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,w=y.match(/attribute ([\w]+) ([\w]+)/g),T=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),B=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),U=B?B.concat(T):T,Z={};return{fragmentSource:p=p.replace(g,function(se,ge,Re,Me,De){return Z[De]=!0,"define"===ge?"\n#ifndef HAS_UNIFORM_u_"+De+"\nvarying "+Re+" "+Me+" "+De+";\n#else\nuniform "+Re+" "+Me+" u_"+De+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+De+"\n    "+Re+" "+Me+" "+De+" = u_"+De+";\n#endif\n"}),vertexSource:y=y.replace(g,function(se,ge,Re,Me,De){var Ve="float"===Me?"vec2":"vec4",Ue=De.match(/color/)?"color":Ve;return Z[De]?"define"===ge?"\n#ifndef HAS_UNIFORM_u_"+De+"\nuniform lowp float u_"+De+"_t;\nattribute "+Re+" "+Ve+" a_"+De+";\nvarying "+Re+" "+Me+" "+De+";\n#else\nuniform "+Re+" "+Me+" u_"+De+";\n#endif\n":"vec4"===Ue?"\n#ifndef HAS_UNIFORM_u_"+De+"\n    "+De+" = a_"+De+";\n#else\n    "+Re+" "+Me+" "+De+" = u_"+De+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+De+"\n    "+De+" = unpack_mix_"+Ue+"(a_"+De+", u_"+De+"_t);\n#else\n    "+Re+" "+Me+" "+De+" = u_"+De+";\n#endif\n":"define"===ge?"\n#ifndef HAS_UNIFORM_u_"+De+"\nuniform lowp float u_"+De+"_t;\nattribute "+Re+" "+Ve+" a_"+De+";\n#else\nuniform "+Re+" "+Me+" u_"+De+";\n#endif\n":"vec4"===Ue?"\n#ifndef HAS_UNIFORM_u_"+De+"\n    "+Re+" "+Me+" "+De+" = a_"+De+";\n#else\n    "+Re+" "+Me+" "+De+" = u_"+De+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+De+"\n    "+Re+" "+Me+" "+De+" = unpack_mix_"+Ue+"(a_"+De+", u_"+De+"_t);\n#else\n    "+Re+" "+Me+" "+De+" = u_"+De+";\n#endif\n"}),staticAttributes:w,staticUniforms:U}}var Wo=Object.freeze({__proto__:null,prelude:ho,background:Ge,backgroundPattern:mt,circle:Xt,clippingMask:Fn,heatmap:Ni,heatmapTexture:wr,collisionBox:Cn,collisionCircle:po,debug:Xo,fill:Yr,fillOutline:Ea,fillOutlinePattern:Ba,fillPattern:$i,fillExtrusion:to,fillExtrusionPattern:bi,hillshadePrepare:Ts,hillshade:Ki,line:Lr,lineGradient:Is,linePattern:Js,lineSDF:la,raster:ui,symbolIcon:hu,symbolSDF:pu,symbolTextAndIcon:cc}),Fa=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Ju(p){for(var y=[],g=0;g<p.length;g++)if(null!==p[g]){var w=p[g].split(" ");y.push(w.pop())}return y}Fa.prototype.bind=function(p,y,g,w,T,B,U,Z){this.context=p;for(var se=this.boundPaintVertexBuffers.length!==w.length,ge=0;!se&&ge<w.length;ge++)this.boundPaintVertexBuffers[ge]!==w[ge]&&(se=!0);p.extVertexArrayObject&&this.vao&&this.boundProgram===y&&this.boundLayoutVertexBuffer===g&&!se&&this.boundIndexBuffer===T&&this.boundVertexOffset===B&&this.boundDynamicVertexBuffer===U&&this.boundDynamicVertexBuffer2===Z?(p.bindVertexArrayOES.set(this.vao),U&&U.bind(),T&&T.dynamicDraw&&T.bind(),Z&&Z.bind()):this.freshBind(y,g,w,T,B,U,Z)},Fa.prototype.freshBind=function(p,y,g,w,T,B,U){var Z,se=p.numAttributes,ge=this.context,Re=ge.gl;if(ge.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ge.extVertexArrayObject.createVertexArrayOES(),ge.bindVertexArrayOES.set(this.vao),Z=0,this.boundProgram=p,this.boundLayoutVertexBuffer=y,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=w,this.boundVertexOffset=T,this.boundDynamicVertexBuffer=B,this.boundDynamicVertexBuffer2=U;else{Z=ge.currentNumAttributes||0;for(var Me=se;Me<Z;Me++)Re.disableVertexAttribArray(Me)}y.enableAttributes(Re,p);for(var De=0,Ve=g;De<Ve.length;De+=1)Ve[De].enableAttributes(Re,p);B&&B.enableAttributes(Re,p),U&&U.enableAttributes(Re,p),y.bind(),y.setVertexAttribPointers(Re,p,T);for(var Ue=0,Qe=g;Ue<Qe.length;Ue+=1){var je=Qe[Ue];je.bind(),je.setVertexAttribPointers(Re,p,T)}B&&(B.bind(),B.setVertexAttribPointers(Re,p,T)),w&&w.bind(),U&&(U.bind(),U.setVertexAttribPointers(Re,p,T)),ge.currentNumAttributes=se},Fa.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Zu=function(p,y,g,w,T,B){var U=p.gl;this.program=U.createProgram();for(var Z=Ju(g.staticAttributes),se=w?w.getBinderAttributes():[],ge=Z.concat(se),Re=g.staticUniforms?Ju(g.staticUniforms):[],Me=w?w.getBinderUniforms():[],De=[],Ve=0,Ue=Re.concat(Me);Ve<Ue.length;Ve+=1){var Qe=Ue[Ve];De.indexOf(Qe)<0&&De.push(Qe)}var je=w?w.defines():[];B&&je.push("#define OVERDRAW_INSPECTOR;");var Ze=je.concat(ho.fragmentSource,g.fragmentSource).join("\n"),at=je.concat(ho.vertexSource,g.vertexSource).join("\n"),pt=U.createShader(U.FRAGMENT_SHADER);if(U.isContextLost())this.failedToCreate=!0;else{U.shaderSource(pt,Ze),U.compileShader(pt),U.attachShader(this.program,pt);var Pt=U.createShader(U.VERTEX_SHADER);if(U.isContextLost())this.failedToCreate=!0;else{U.shaderSource(Pt,at),U.compileShader(Pt),U.attachShader(this.program,Pt),this.attributes={};var Tt={};this.numAttributes=ge.length;for(var Dt=0;Dt<this.numAttributes;Dt++)ge[Dt]&&(U.bindAttribLocation(this.program,Dt,ge[Dt]),this.attributes[ge[Dt]]=Dt);U.linkProgram(this.program),U.deleteShader(Pt),U.deleteShader(pt);for(var Ft=0;Ft<De.length;Ft++){var rn=De[Ft];if(rn&&!Tt[rn]){var Yt=U.getUniformLocation(this.program,rn);Yt&&(Tt[rn]=Yt)}}this.fixedUniforms=T(p,Tt),this.binderUniforms=w?w.getUniforms(p,Tt):[]}}};function Au(p,y,g){var w=1/Ko(g,1,y.transform.tileZoom),T=Math.pow(2,g.tileID.overscaledZ),B=g.tileSize*Math.pow(2,y.transform.tileZoom)/T,U=B*(g.tileID.canonical.x+g.tileID.wrap*T),Z=B*g.tileID.canonical.y;return{u_image:0,u_texsize:g.imageAtlasTexture.size,u_scale:[w,p.fromScale,p.toScale],u_fade:p.t,u_pixel_coord_upper:[U>>16,Z>>16],u_pixel_coord_lower:[65535&U,65535&Z]}}Zu.prototype.draw=function(p,y,g,w,T,B,U,Z,se,ge,Re,Me,De,Ve,Ue,Qe){var je,Ze=p.gl;if(!this.failedToCreate){for(var at in p.program.set(this.program),p.setDepthMode(g),p.setStencilMode(w),p.setColorMode(T),p.setCullFace(B),this.fixedUniforms)this.fixedUniforms[at].set(U[at]);Ve&&Ve.setUniforms(p,this.binderUniforms,Me,{zoom:De});for(var pt=(je={},je[Ze.LINES]=2,je[Ze.TRIANGLES]=3,je[Ze.LINE_STRIP]=1,je)[y],Pt=0,Tt=Re.get();Pt<Tt.length;Pt+=1){var Dt=Tt[Pt],Ft=Dt.vaos||(Dt.vaos={});(Ft[Z]||(Ft[Z]=new Fa)).bind(p,this,se,Ve?Ve.getPaintVertexBuffers():[],ge,Dt.vertexOffset,Ue,Qe),Ze.drawElements(y,Dt.primitiveLength*pt,Ze.UNSIGNED_SHORT,Dt.primitiveOffset*pt*2)}}};var hd=function(p,y,g,w){var T=y.style.light,B=T.properties.get("position"),U=[B.x,B.y,B.z],Z=v.create$1();"viewport"===T.properties.get("anchor")&&v.fromRotation(Z,-y.transform.angle),v.transformMat3(U,U,Z);var se=T.properties.get("color");return{u_matrix:p,u_lightpos:U,u_lightintensity:T.properties.get("intensity"),u_lightcolor:[se.r,se.g,se.b],u_vertical_gradient:+g,u_opacity:w}},dc=function(p,y,g,w,T,B,U){return v.extend(hd(p,y,g,w),Au(B,y,U),{u_height_factor:-Math.pow(2,T.overscaledZ)/U.tileSize/8})},js=function(p){return{u_matrix:p}},Ka=function(p,y,g,w){return v.extend(js(p),Au(g,y,w))},gl=function(p,y){return{u_matrix:p,u_world:y}},pd=function(p,y,g,w,T){return v.extend(Ka(p,y,g,w),{u_world:T})},Sa=function(p,y,g,w){var T,B,U=p.transform;if("map"===w.paint.get("circle-pitch-alignment")){var Z=Ko(g,1,U.zoom);T=!0,B=[Z,Z]}else T=!1,B=U.pixelsToGLUnits;return{u_camera_to_center_distance:U.cameraToCenterDistance,u_scale_with_map:+("map"===w.paint.get("circle-pitch-scale")),u_matrix:p.translatePosMatrix(y.posMatrix,g,w.paint.get("circle-translate"),w.paint.get("circle-translate-anchor")),u_pitch_with_map:+T,u_device_pixel_ratio:v.browser.devicePixelRatio,u_extrude_scale:B}},Ca=function(p,y,g){var w=Ko(g,1,y.zoom),T=Math.pow(2,y.zoom-g.tileID.overscaledZ),B=g.tileID.overscaleFactor();return{u_matrix:p,u_camera_to_center_distance:y.cameraToCenterDistance,u_pixels_to_tile_units:w,u_extrude_scale:[y.pixelsToGLUnits[0]/(w*T),y.pixelsToGLUnits[1]/(w*T)],u_overscale_factor:B}},wi=function(p,y,g){return{u_matrix:p,u_inv_matrix:y,u_camera_to_center_distance:g.cameraToCenterDistance,u_viewport_size:[g.width,g.height]}},Jo=function(p,y,g){return void 0===g&&(g=1),{u_matrix:p,u_color:y,u_overlay:0,u_overlay_scale:g}},co=function(p){return{u_matrix:p}},ca=function(p,y,g,w){return{u_matrix:p,u_extrude_scale:Ko(y,1,g),u_intensity:w}},Po=function(p,y,g){var w=p.transform;return{u_matrix:Xa(p,y,g),u_ratio:1/Ko(y,1,w.zoom),u_device_pixel_ratio:v.browser.devicePixelRatio,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},On=function(p,y,g,w){return v.extend(Po(p,y,g),{u_image:0,u_image_height:w})},Pn=function(p,y,g,w){var T=p.transform,B=ds(y,T);return{u_matrix:Xa(p,y,g),u_texsize:y.imageAtlasTexture.size,u_ratio:1/Ko(y,1,T.zoom),u_device_pixel_ratio:v.browser.devicePixelRatio,u_image:0,u_scale:[B,w.fromScale,w.toScale],u_fade:w.t,u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]]}},Wi=function(p,y,g,w,T){var B=p.lineAtlas,U=ds(y,p.transform),Z="round"===g.layout.get("line-cap"),se=B.getDash(w.from,Z),ge=B.getDash(w.to,Z),Re=se.width*T.fromScale,Me=ge.width*T.toScale;return v.extend(Po(p,y,g),{u_patternscale_a:[U/Re,-se.height/2],u_patternscale_b:[U/Me,-ge.height/2],u_sdfgamma:B.width/(256*Math.min(Re,Me)*v.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:se.y,u_tex_y_b:ge.y,u_mix:T.t})};function ds(p,y){return 1/Ko(p,1,y.tileZoom)}function Xa(p,y,g){return p.translatePosMatrix(y.tileID.posMatrix,y,g.paint.get("line-translate"),g.paint.get("line-translate-anchor"))}var Zo=function(p,y,g,w,T){return{u_matrix:p,u_tl_parent:y,u_scale_parent:g,u_buffer_scale:1,u_fade_t:w.mix,u_opacity:w.opacity*T.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:T.paint.get("raster-brightness-min"),u_brightness_high:T.paint.get("raster-brightness-max"),u_saturation_factor:(U=T.paint.get("raster-saturation"),U>0?1-1/(1.001-U):-U),u_contrast_factor:(B=T.paint.get("raster-contrast"),B>0?1/(1-B):1+B),u_spin_weights:Yu(T.paint.get("raster-hue-rotate"))};var B,U};function Yu(p){p*=Math.PI/180;var y=Math.sin(p),g=Math.cos(p);return[(2*g+1)/3,(-Math.sqrt(3)*y-g+1)/3,(Math.sqrt(3)*y-g+1)/3]}var Ji,vl=function(p,y,g,w,T,B,U,Z,se,ge){var Re=T.transform;return{u_is_size_zoom_constant:+("constant"===p||"source"===p),u_is_size_feature_constant:+("constant"===p||"camera"===p),u_size_t:y?y.uSizeT:0,u_size:y?y.uSize:0,u_camera_to_center_distance:Re.cameraToCenterDistance,u_pitch:Re.pitch/360*2*Math.PI,u_rotate_symbol:+g,u_aspect_ratio:Re.width/Re.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_matrix:B,u_label_plane_matrix:U,u_coord_matrix:Z,u_is_text:+se,u_pitch_with_map:+w,u_texsize:ge,u_texture:0}},Wa=function(p,y,g,w,T,B,U,Z,se,ge,Re){var Me=T.transform;return v.extend(vl(p,y,g,w,T,B,U,Z,se,ge),{u_gamma_scale:w?Math.cos(Me._pitch)*Me.cameraToCenterDistance:1,u_device_pixel_ratio:v.browser.devicePixelRatio,u_is_halo:+Re})},Br=function(p,y,g,w,T,B,U,Z,se,ge){return v.extend(Wa(p,y,g,w,T,B,U,Z,!0,se,!0),{u_texsize_icon:ge,u_texture_icon:1})},yl=function(p,y,g){return{u_matrix:p,u_opacity:y,u_color:g}},ft=function(p,y,g,w,T,B){return v.extend((Z=B,ge=T,Re=(se=g).imageManager.getPattern((U=w).from.toString()),Me=se.imageManager.getPattern(U.to.toString()),Ve=(De=se.imageManager.getPixelSize()).width,Ue=De.height,Qe=Math.pow(2,ge.tileID.overscaledZ),Ze=(je=ge.tileSize*Math.pow(2,se.transform.tileZoom)/Qe)*(ge.tileID.canonical.x+ge.tileID.wrap*Qe),at=je*ge.tileID.canonical.y,{u_image:0,u_pattern_tl_a:Re.tl,u_pattern_br_a:Re.br,u_pattern_tl_b:Me.tl,u_pattern_br_b:Me.br,u_texsize:[Ve,Ue],u_mix:Z.t,u_pattern_size_a:Re.displaySize,u_pattern_size_b:Me.displaySize,u_scale_a:Z.fromScale,u_scale_b:Z.toScale,u_tile_units_to_pixels:1/Ko(ge,1,se.transform.tileZoom),u_pixel_coord_upper:[Ze>>16,at>>16],u_pixel_coord_lower:[65535&Ze,65535&at]}),{u_matrix:p,u_opacity:y});var U,Z,se,ge,Re,Me,De,Ve,Ue,Qe,je,Ze,at},Ot={fillExtrusion:function(p,y){return{u_matrix:new v.UniformMatrix4f(p,y.u_matrix),u_lightpos:new v.Uniform3f(p,y.u_lightpos),u_lightintensity:new v.Uniform1f(p,y.u_lightintensity),u_lightcolor:new v.Uniform3f(p,y.u_lightcolor),u_vertical_gradient:new v.Uniform1f(p,y.u_vertical_gradient),u_opacity:new v.Uniform1f(p,y.u_opacity)}},fillExtrusionPattern:function(p,y){return{u_matrix:new v.UniformMatrix4f(p,y.u_matrix),u_lightpos:new v.Uniform3f(p,y.u_lightpos),u_lightintensity:new v.Uniform1f(p,y.u_lightintensity),u_lightcolor:new v.Uniform3f(p,y.u_lightcolor),u_vertical_gradient:new v.Uniform1f(p,y.u_vertical_gradient),u_height_factor:new v.Uniform1f(p,y.u_height_factor),u_image:new v.Uniform1i(p,y.u_image),u_texsize:new v.Uniform2f(p,y.u_texsize),u_pixel_coord_upper:new v.Uniform2f(p,y.u_pixel_coord_upper),u_pixel_coord_lower:new v.Uniform2f(p,y.u_pixel_coord_lower),u_scale:new v.Uniform3f(p,y.u_scale),u_fade:new v.Uniform1f(p,y.u_fade),u_opacity:new v.Uniform1f(p,y.u_opacity)}},fill:function(p,y){return{u_matrix:new v.UniformMatrix4f(p,y.u_matrix)}},fillPattern:function(p,y){return{u_matrix:new v.UniformMatrix4f(p,y.u_matrix),u_image:new v.Uniform1i(p,y.u_image),u_texsize:new v.Uniform2f(p,y.u_texsize),u_pixel_coord_upper:new v.Uniform2f(p,y.u_pixel_coord_upper),u_pixel_coord_lower:new v.Uniform2f(p,y.u_pixel_coord_lower),u_scale:new v.Uniform3f(p,y.u_scale),u_fade:new v.Uniform1f(p,y.u_fade)}},fillOutline:function(p,y){return{u_matrix:new v.UniformMatrix4f(p,y.u_matrix),u_world:new v.Uniform2f(p,y.u_world)}},fillOutlinePattern:function(p,y){return{u_matrix:new v.UniformMatrix4f(p,y.u_matrix),u_world:new v.Uniform2f(p,y.u_world),u_image:new v.Uniform1i(p,y.u_image),u_texsize:new v.Uniform2f(p,y.u_texsize),u_pixel_coord_upper:new v.Uniform2f(p,y.u_pixel_coord_upper),u_pixel_coord_lower:new v.Uniform2f(p,y.u_pixel_coord_lower),u_scale:new v.Uniform3f(p,y.u_scale),u_fade:new v.Uniform1f(p,y.u_fade)}},circle:function(p,y){return{u_camera_to_center_distance:new v.Uniform1f(p,y.u_camera_to_center_distance),u_scale_with_map:new v.Uniform1i(p,y.u_scale_with_map),u_pitch_with_map:new v.Uniform1i(p,y.u_pitch_with_map),u_extrude_scale:new v.Uniform2f(p,y.u_extrude_scale),u_device_pixel_ratio:new v.Uniform1f(p,y.u_device_pixel_ratio),u_matrix:new v.UniformMatrix4f(p,y.u_matrix)}},collisionBox:function(p,y){return{u_matrix:new v.UniformMatrix4f(p,y.u_matrix),u_camera_to_center_distance:new v.Uniform1f(p,y.u_camera_to_center_distance),u_pixels_to_tile_units:new v.Uniform1f(p,y.u_pixels_to_tile_units),u_extrude_scale:new v.Uniform2f(p,y.u_extrude_scale),u_overscale_factor:new v.Uniform1f(p,y.u_overscale_factor)}},collisionCircle:function(p,y){return{u_matrix:new v.UniformMatrix4f(p,y.u_matrix),u_inv_matrix:new v.UniformMatrix4f(p,y.u_inv_matrix),u_camera_to_center_distance:new v.Uniform1f(p,y.u_camera_to_center_distance),u_viewport_size:new v.Uniform2f(p,y.u_viewport_size)}},debug:function(p,y){return{u_color:new v.UniformColor(p,y.u_color),u_matrix:new v.UniformMatrix4f(p,y.u_matrix),u_overlay:new v.Uniform1i(p,y.u_overlay),u_overlay_scale:new v.Uniform1f(p,y.u_overlay_scale)}},clippingMask:function(p,y){return{u_matrix:new v.UniformMatrix4f(p,y.u_matrix)}},heatmap:function(p,y){return{u_extrude_scale:new v.Uniform1f(p,y.u_extrude_scale),u_intensity:new v.Uniform1f(p,y.u_intensity),u_matrix:new v.UniformMatrix4f(p,y.u_matrix)}},heatmapTexture:function(p,y){return{u_matrix:new v.UniformMatrix4f(p,y.u_matrix),u_world:new v.Uniform2f(p,y.u_world),u_image:new v.Uniform1i(p,y.u_image),u_color_ramp:new v.Uniform1i(p,y.u_color_ramp),u_opacity:new v.Uniform1f(p,y.u_opacity)}},hillshade:function(p,y){return{u_matrix:new v.UniformMatrix4f(p,y.u_matrix),u_image:new v.Uniform1i(p,y.u_image),u_latrange:new v.Uniform2f(p,y.u_latrange),u_light:new v.Uniform2f(p,y.u_light),u_shadow:new v.UniformColor(p,y.u_shadow),u_highlight:new v.UniformColor(p,y.u_highlight),u_accent:new v.UniformColor(p,y.u_accent)}},hillshadePrepare:function(p,y){return{u_matrix:new v.UniformMatrix4f(p,y.u_matrix),u_image:new v.Uniform1i(p,y.u_image),u_dimension:new v.Uniform2f(p,y.u_dimension),u_zoom:new v.Uniform1f(p,y.u_zoom),u_unpack:new v.Uniform4f(p,y.u_unpack)}},line:function(p,y){return{u_matrix:new v.UniformMatrix4f(p,y.u_matrix),u_ratio:new v.Uniform1f(p,y.u_ratio),u_device_pixel_ratio:new v.Uniform1f(p,y.u_device_pixel_ratio),u_units_to_pixels:new v.Uniform2f(p,y.u_units_to_pixels)}},lineGradient:function(p,y){return{u_matrix:new v.UniformMatrix4f(p,y.u_matrix),u_ratio:new v.Uniform1f(p,y.u_ratio),u_device_pixel_ratio:new v.Uniform1f(p,y.u_device_pixel_ratio),u_units_to_pixels:new v.Uniform2f(p,y.u_units_to_pixels),u_image:new v.Uniform1i(p,y.u_image),u_image_height:new v.Uniform1f(p,y.u_image_height)}},linePattern:function(p,y){return{u_matrix:new v.UniformMatrix4f(p,y.u_matrix),u_texsize:new v.Uniform2f(p,y.u_texsize),u_ratio:new v.Uniform1f(p,y.u_ratio),u_device_pixel_ratio:new v.Uniform1f(p,y.u_device_pixel_ratio),u_image:new v.Uniform1i(p,y.u_image),u_units_to_pixels:new v.Uniform2f(p,y.u_units_to_pixels),u_scale:new v.Uniform3f(p,y.u_scale),u_fade:new v.Uniform1f(p,y.u_fade)}},lineSDF:function(p,y){return{u_matrix:new v.UniformMatrix4f(p,y.u_matrix),u_ratio:new v.Uniform1f(p,y.u_ratio),u_device_pixel_ratio:new v.Uniform1f(p,y.u_device_pixel_ratio),u_units_to_pixels:new v.Uniform2f(p,y.u_units_to_pixels),u_patternscale_a:new v.Uniform2f(p,y.u_patternscale_a),u_patternscale_b:new v.Uniform2f(p,y.u_patternscale_b),u_sdfgamma:new v.Uniform1f(p,y.u_sdfgamma),u_image:new v.Uniform1i(p,y.u_image),u_tex_y_a:new v.Uniform1f(p,y.u_tex_y_a),u_tex_y_b:new v.Uniform1f(p,y.u_tex_y_b),u_mix:new v.Uniform1f(p,y.u_mix)}},raster:function(p,y){return{u_matrix:new v.UniformMatrix4f(p,y.u_matrix),u_tl_parent:new v.Uniform2f(p,y.u_tl_parent),u_scale_parent:new v.Uniform1f(p,y.u_scale_parent),u_buffer_scale:new v.Uniform1f(p,y.u_buffer_scale),u_fade_t:new v.Uniform1f(p,y.u_fade_t),u_opacity:new v.Uniform1f(p,y.u_opacity),u_image0:new v.Uniform1i(p,y.u_image0),u_image1:new v.Uniform1i(p,y.u_image1),u_brightness_low:new v.Uniform1f(p,y.u_brightness_low),u_brightness_high:new v.Uniform1f(p,y.u_brightness_high),u_saturation_factor:new v.Uniform1f(p,y.u_saturation_factor),u_contrast_factor:new v.Uniform1f(p,y.u_contrast_factor),u_spin_weights:new v.Uniform3f(p,y.u_spin_weights)}},symbolIcon:function(p,y){return{u_is_size_zoom_constant:new v.Uniform1i(p,y.u_is_size_zoom_constant),u_is_size_feature_constant:new v.Uniform1i(p,y.u_is_size_feature_constant),u_size_t:new v.Uniform1f(p,y.u_size_t),u_size:new v.Uniform1f(p,y.u_size),u_camera_to_center_distance:new v.Uniform1f(p,y.u_camera_to_center_distance),u_pitch:new v.Uniform1f(p,y.u_pitch),u_rotate_symbol:new v.Uniform1i(p,y.u_rotate_symbol),u_aspect_ratio:new v.Uniform1f(p,y.u_aspect_ratio),u_fade_change:new v.Uniform1f(p,y.u_fade_change),u_matrix:new v.UniformMatrix4f(p,y.u_matrix),u_label_plane_matrix:new v.UniformMatrix4f(p,y.u_label_plane_matrix),u_coord_matrix:new v.UniformMatrix4f(p,y.u_coord_matrix),u_is_text:new v.Uniform1i(p,y.u_is_text),u_pitch_with_map:new v.Uniform1i(p,y.u_pitch_with_map),u_texsize:new v.Uniform2f(p,y.u_texsize),u_texture:new v.Uniform1i(p,y.u_texture)}},symbolSDF:function(p,y){return{u_is_size_zoom_constant:new v.Uniform1i(p,y.u_is_size_zoom_constant),u_is_size_feature_constant:new v.Uniform1i(p,y.u_is_size_feature_constant),u_size_t:new v.Uniform1f(p,y.u_size_t),u_size:new v.Uniform1f(p,y.u_size),u_camera_to_center_distance:new v.Uniform1f(p,y.u_camera_to_center_distance),u_pitch:new v.Uniform1f(p,y.u_pitch),u_rotate_symbol:new v.Uniform1i(p,y.u_rotate_symbol),u_aspect_ratio:new v.Uniform1f(p,y.u_aspect_ratio),u_fade_change:new v.Uniform1f(p,y.u_fade_change),u_matrix:new v.UniformMatrix4f(p,y.u_matrix),u_label_plane_matrix:new v.UniformMatrix4f(p,y.u_label_plane_matrix),u_coord_matrix:new v.UniformMatrix4f(p,y.u_coord_matrix),u_is_text:new v.Uniform1i(p,y.u_is_text),u_pitch_with_map:new v.Uniform1i(p,y.u_pitch_with_map),u_texsize:new v.Uniform2f(p,y.u_texsize),u_texture:new v.Uniform1i(p,y.u_texture),u_gamma_scale:new v.Uniform1f(p,y.u_gamma_scale),u_device_pixel_ratio:new v.Uniform1f(p,y.u_device_pixel_ratio),u_is_halo:new v.Uniform1i(p,y.u_is_halo)}},symbolTextAndIcon:function(p,y){return{u_is_size_zoom_constant:new v.Uniform1i(p,y.u_is_size_zoom_constant),u_is_size_feature_constant:new v.Uniform1i(p,y.u_is_size_feature_constant),u_size_t:new v.Uniform1f(p,y.u_size_t),u_size:new v.Uniform1f(p,y.u_size),u_camera_to_center_distance:new v.Uniform1f(p,y.u_camera_to_center_distance),u_pitch:new v.Uniform1f(p,y.u_pitch),u_rotate_symbol:new v.Uniform1i(p,y.u_rotate_symbol),u_aspect_ratio:new v.Uniform1f(p,y.u_aspect_ratio),u_fade_change:new v.Uniform1f(p,y.u_fade_change),u_matrix:new v.UniformMatrix4f(p,y.u_matrix),u_label_plane_matrix:new v.UniformMatrix4f(p,y.u_label_plane_matrix),u_coord_matrix:new v.UniformMatrix4f(p,y.u_coord_matrix),u_is_text:new v.Uniform1i(p,y.u_is_text),u_pitch_with_map:new v.Uniform1i(p,y.u_pitch_with_map),u_texsize:new v.Uniform2f(p,y.u_texsize),u_texsize_icon:new v.Uniform2f(p,y.u_texsize_icon),u_texture:new v.Uniform1i(p,y.u_texture),u_texture_icon:new v.Uniform1i(p,y.u_texture_icon),u_gamma_scale:new v.Uniform1f(p,y.u_gamma_scale),u_device_pixel_ratio:new v.Uniform1f(p,y.u_device_pixel_ratio),u_is_halo:new v.Uniform1i(p,y.u_is_halo)}},background:function(p,y){return{u_matrix:new v.UniformMatrix4f(p,y.u_matrix),u_opacity:new v.Uniform1f(p,y.u_opacity),u_color:new v.UniformColor(p,y.u_color)}},backgroundPattern:function(p,y){return{u_matrix:new v.UniformMatrix4f(p,y.u_matrix),u_opacity:new v.Uniform1f(p,y.u_opacity),u_image:new v.Uniform1i(p,y.u_image),u_pattern_tl_a:new v.Uniform2f(p,y.u_pattern_tl_a),u_pattern_br_a:new v.Uniform2f(p,y.u_pattern_br_a),u_pattern_tl_b:new v.Uniform2f(p,y.u_pattern_tl_b),u_pattern_br_b:new v.Uniform2f(p,y.u_pattern_br_b),u_texsize:new v.Uniform2f(p,y.u_texsize),u_mix:new v.Uniform1f(p,y.u_mix),u_pattern_size_a:new v.Uniform2f(p,y.u_pattern_size_a),u_pattern_size_b:new v.Uniform2f(p,y.u_pattern_size_b),u_scale_a:new v.Uniform1f(p,y.u_scale_a),u_scale_b:new v.Uniform1f(p,y.u_scale_b),u_pixel_coord_upper:new v.Uniform2f(p,y.u_pixel_coord_upper),u_pixel_coord_lower:new v.Uniform2f(p,y.u_pixel_coord_lower),u_tile_units_to_pixels:new v.Uniform1f(p,y.u_tile_units_to_pixels)}}};function fn(p,y,g,w,T,B,U){for(var Z=p.context,se=Z.gl,ge=p.useProgram("collisionBox"),Re=[],Me=0,De=0,Ve=0;Ve<w.length;Ve++){var Ue=w[Ve],Qe=y.getTile(Ue),je=Qe.getBucket(g);if(je){var Ze=Ue.posMatrix;0===T[0]&&0===T[1]||(Ze=p.translatePosMatrix(Ue.posMatrix,Qe,T,B));var at=U?je.textCollisionBox:je.iconCollisionBox,pt=je.collisionCircleArray;if(pt.length>0){var Pt=v.create(),Tt=Ze;v.mul(Pt,je.placementInvProjMatrix,p.transform.glCoordMatrix),v.mul(Pt,Pt,je.placementViewportMatrix),Re.push({circleArray:pt,circleOffset:De,transform:Tt,invTransform:Pt}),De=Me+=pt.length/4}at&&ge.draw(Z,se.LINES,Oe.disabled,Be.disabled,p.colorModeForRenderPass(),st.disabled,Ca(Ze,p.transform,Qe),g.id,at.layoutVertexBuffer,at.indexBuffer,at.segments,null,p.transform.zoom,null,null,at.collisionVertexBuffer)}}if(U&&Re.length){var Dt=p.useProgram("collisionCircle"),Ft=new v.StructArrayLayout2f1f2i16;Ft.resize(4*Me),Ft._trim();for(var rn=0,Yt=0,on=Re;Yt<on.length;Yt+=1)for(var Ln=on[Yt],yn=0;yn<Ln.circleArray.length/4;yn++){var qn=4*yn,li=Ln.circleArray[qn+0],En=Ln.circleArray[qn+1],gr=Ln.circleArray[qn+2],zr=Ln.circleArray[qn+3];Ft.emplace(rn++,li,En,gr,zr,0),Ft.emplace(rn++,li,En,gr,zr,1),Ft.emplace(rn++,li,En,gr,zr,2),Ft.emplace(rn++,li,En,gr,zr,3)}(!Ji||Ji.length<2*Me)&&(Ji=function(Lo){var Bo=2*Lo,Do=new v.StructArrayLayout3ui6;Do.resize(Bo),Do._trim();for(var pa=0;pa<Bo;pa++){var Fo=6*pa;Do.uint16[Fo+0]=4*pa+0,Do.uint16[Fo+1]=4*pa+1,Do.uint16[Fo+2]=4*pa+2,Do.uint16[Fo+3]=4*pa+2,Do.uint16[Fo+4]=4*pa+3,Do.uint16[Fo+5]=4*pa+0}return Do}(Me));for(var vr=Z.createIndexBuffer(Ji,!0),sr=Z.createVertexBuffer(Ft,v.collisionCircleLayout.members,!0),or=0,tr=Re;or<tr.length;or+=1){var Kn=tr[or],Ui=wi(Kn.transform,Kn.invTransform,p.transform);Dt.draw(Z,se.TRIANGLES,Oe.disabled,Be.disabled,p.colorModeForRenderPass(),st.disabled,Ui,g.id,sr,vr,v.SegmentVector.simpleSegment(0,2*Kn.circleOffset,Kn.circleArray.length,Kn.circleArray.length/2),null,p.transform.zoom,null,null,null)}sr.destroy(),vr.destroy()}}var An=v.identity(new Float32Array(16));function ri(p,y,g,w,T,B){var U=v.getAnchorAlignment(p),Z=-(U.horizontalAlign-.5)*y,se=-(U.verticalAlign-.5)*g,ge=v.evaluateVariableOffset(p,w);return new v.Point((Z/T+ge[0])*B,(se/T+ge[1])*B)}function Xr(p,y,g,w,T,B,U,Z,se,ge,Re){var Me=p.text.placedSymbolArray,De=p.text.dynamicLayoutVertexArray,Ve=p.icon.dynamicLayoutVertexArray,Ue={};De.clear();for(var Qe=0;Qe<Me.length;Qe++){var je=Me.get(Qe),Ze=je.hidden||!je.crossTileID||p.allowVerticalPlacement&&!je.placedOrientation?null:w[je.crossTileID];if(Ze){var at=new v.Point(je.anchorX,je.anchorY),pt=$n(at,g?Z:U),Pt=so(B.cameraToCenterDistance,pt.signedDistanceFromCamera),Tt=T.evaluateSizeForFeature(p.textSizeData,ge,je)*Pt/v.ONE_EM;g&&(Tt*=p.tilePixelRatio/se);for(var Dt=ri(Ze.anchor,Ze.width,Ze.height,Ze.textOffset,Ze.textBoxScale,Tt),Ft=g?$n(at.add(Dt),U).point:pt.point.add(y?Dt.rotate(-B.angle):Dt),rn=p.allowVerticalPlacement&&je.placedOrientation===v.WritingMode.vertical?Math.PI/2:0,Yt=0;Yt<je.numGlyphs;Yt++)v.addDynamicAttributes(De,Ft,rn);Re&&je.associatedIconIndex>=0&&(Ue[je.associatedIconIndex]={shiftedAnchor:Ft,angle:rn})}else zs(je.numGlyphs,De)}if(Re){Ve.clear();for(var on=p.icon.placedSymbolArray,Ln=0;Ln<on.length;Ln++){var yn=on.get(Ln);if(yn.hidden)zs(yn.numGlyphs,Ve);else{var qn=Ue[Ln];if(qn)for(var li=0;li<yn.numGlyphs;li++)v.addDynamicAttributes(Ve,qn.shiftedAnchor,qn.angle);else zs(yn.numGlyphs,Ve)}}p.icon.dynamicLayoutVertexBuffer.updateData(Ve)}p.text.dynamicLayoutVertexBuffer.updateData(De)}function Pi(p,y,g){return g.iconsInText&&y?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function no(p,y,g,w,T,B,U,Z,se,ge,Re,Me){for(var De=p.context,Ve=De.gl,Ue=p.transform,Qe="map"===Z,je="map"===se,Ze=Qe&&"point"!==g.layout.get("symbol-placement"),at=Qe&&!je&&!Ze,pt=!g.layout.get("symbol-sort-key").isConstant(),Pt=!1,Tt=p.depthModeForSublayer(0,Oe.ReadOnly),Dt=g.layout.get("text-variable-anchor"),Ft=[],rn=0,Yt=w;rn<Yt.length;rn+=1){var on=Yt[rn],Ln=y.getTile(on),yn=Ln.getBucket(g);if(yn){var qn=T?yn.text:yn.icon;if(qn&&qn.segments.get().length){var li=qn.programConfigurations.get(g.id),En=T||yn.sdfIcons,gr=T?yn.textSizeData:yn.iconSizeData,zr=je||0!==Ue.pitch,vr=p.useProgram(Pi(En,T,yn),li),sr=v.evaluateSizeForZoom(gr,Ue.zoom),or=void 0,tr=[0,0],Kn=void 0,Ui=void 0,Lo=null,Bo=void 0;if(T)Kn=Ln.glyphAtlasTexture,Ui=Ve.LINEAR,or=Ln.glyphAtlasTexture.size,yn.iconsInText&&(tr=Ln.imageAtlasTexture.size,Lo=Ln.imageAtlasTexture,Bo=zr||p.options.rotating||p.options.zooming||"composite"===gr.kind||"camera"===gr.kind?Ve.LINEAR:Ve.NEAREST);else{var Do=1!==g.layout.get("icon-size").constantOr(0)||yn.iconsNeedLinear;Kn=Ln.imageAtlasTexture,Ui=En||p.options.rotating||p.options.zooming||Do||zr?Ve.LINEAR:Ve.NEAREST,or=Ln.imageAtlasTexture.size}var pa=Ko(Ln,1,p.transform.zoom),Fo=Hi(on.posMatrix,je,Qe,p.transform,pa),ia=fi(on.posMatrix,je,Qe,p.transform,pa),_u=Dt&&yn.hasTextData(),hs="none"!==g.layout.get("icon-text-fit")&&_u&&yn.hasIconData();Ze&&Ho(yn,on.posMatrix,p,T,Fo,ia,je,ge);var ps=p.translatePosMatrix(on.posMatrix,Ln,B,U),xl=Ze||T&&Dt||hs?An:Fo,bu=p.translatePosMatrix(ia,Ln,B,U,!0),$c=En&&0!==g.paint.get(T?"text-halo-width":"icon-halo-width").constantOr(1),El={program:vr,buffers:qn,uniformValues:En?yn.iconsInText?Br(gr.kind,sr,at,je,p,ps,xl,bu,or,tr):Wa(gr.kind,sr,at,je,p,ps,xl,bu,T,or,!0):vl(gr.kind,sr,at,je,p,ps,xl,bu,T,or),atlasTexture:Kn,atlasTextureIcon:Lo,atlasInterpolation:Ui,atlasInterpolationIcon:Bo,isSDF:En,hasHalo:$c};if(pt&&yn.canOverlap){Pt=!0;for(var $l=0,nl=qn.segments.get();$l<nl.length;$l+=1){var Kc=nl[$l];Ft.push({segments:new v.SegmentVector([Kc]),sortKey:Kc.sortKey,state:El})}}else Ft.push({segments:qn.segments,sortKey:0,state:El})}}}Pt&&Ft.sort(function(qs,Wc){return qs.sortKey-Wc.sortKey});for(var _c=0,Ds=Ft;_c<Ds.length;_c+=1){var Xc=Ds[_c],bo=Xc.state;if(De.activeTexture.set(Ve.TEXTURE0),bo.atlasTexture.bind(bo.atlasInterpolation,Ve.CLAMP_TO_EDGE),bo.atlasTextureIcon&&(De.activeTexture.set(Ve.TEXTURE1),bo.atlasTextureIcon&&bo.atlasTextureIcon.bind(bo.atlasInterpolationIcon,Ve.CLAMP_TO_EDGE)),bo.isSDF){var Nu=bo.uniformValues;bo.hasHalo&&(Nu.u_is_halo=1,da(bo.buffers,Xc.segments,g,p,bo.program,Tt,Re,Me,Nu)),Nu.u_is_halo=0}da(bo.buffers,Xc.segments,g,p,bo.program,Tt,Re,Me,bo.uniformValues)}}function da(p,y,g,w,T,B,U,Z,se){var ge=w.context;T.draw(ge,ge.gl.TRIANGLES,B,U,Z,st.disabled,se,g.id,p.layoutVertexBuffer,p.indexBuffer,y,g.paint,w.transform.zoom,p.programConfigurations.get(g.id),p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer)}function xr(p,y,g,w,T,B,U){var Z,se,ge,Re,Me,De=p.context.gl,Ve=g.paint.get("fill-pattern"),Ue=Ve&&Ve.constantOr(1),Qe=g.getCrossfadeParameters();U?(se=Ue&&!g.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Z=De.LINES):(se=Ue?"fillPattern":"fill",Z=De.TRIANGLES);for(var je=0,Ze=w;je<Ze.length;je+=1){var at=Ze[je],pt=y.getTile(at);if(!Ue||pt.patternsLoaded()){var Pt=pt.getBucket(g);if(Pt){var Tt=Pt.programConfigurations.get(g.id),Dt=p.useProgram(se,Tt);Ue&&(p.context.activeTexture.set(De.TEXTURE0),pt.imageAtlasTexture.bind(De.LINEAR,De.CLAMP_TO_EDGE),Tt.updatePaintBuffers(Qe));var Ft=Ve.constantOr(null);if(Ft&&pt.imageAtlas){var rn=pt.imageAtlas,Yt=rn.patternPositions[Ft.to.toString()],on=rn.patternPositions[Ft.from.toString()];Yt&&on&&Tt.setConstantPatternPositions(Yt,on)}var Ln=p.translatePosMatrix(at.posMatrix,pt,g.paint.get("fill-translate"),g.paint.get("fill-translate-anchor"));if(U){Re=Pt.indexBuffer2,Me=Pt.segments2;var yn=[De.drawingBufferWidth,De.drawingBufferHeight];ge="fillOutlinePattern"===se&&Ue?pd(Ln,p,Qe,pt,yn):gl(Ln,yn)}else Re=Pt.indexBuffer,Me=Pt.segments,ge=Ue?Ka(Ln,p,Qe,pt):js(Ln);Dt.draw(p.context,Z,T,p.stencilModeForClipping(at),B,st.disabled,ge,g.id,Pt.layoutVertexBuffer,Re,Me,g.paint,p.transform.zoom,Tt)}}}}function Eo(p,y,g,w,T,B,U){for(var Z=p.context,se=Z.gl,ge=g.paint.get("fill-extrusion-pattern"),Re=ge.constantOr(1),Me=g.getCrossfadeParameters(),De=g.paint.get("fill-extrusion-opacity"),Ve=0,Ue=w;Ve<Ue.length;Ve+=1){var Qe=Ue[Ve],je=y.getTile(Qe),Ze=je.getBucket(g);if(Ze){var at=Ze.programConfigurations.get(g.id),pt=p.useProgram(Re?"fillExtrusionPattern":"fillExtrusion",at);Re&&(p.context.activeTexture.set(se.TEXTURE0),je.imageAtlasTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE),at.updatePaintBuffers(Me));var Pt=ge.constantOr(null);if(Pt&&je.imageAtlas){var Tt=je.imageAtlas,Dt=Tt.patternPositions[Pt.to.toString()],Ft=Tt.patternPositions[Pt.from.toString()];Dt&&Ft&&at.setConstantPatternPositions(Dt,Ft)}var rn=p.translatePosMatrix(Qe.posMatrix,je,g.paint.get("fill-extrusion-translate"),g.paint.get("fill-extrusion-translate-anchor")),Yt=g.paint.get("fill-extrusion-vertical-gradient"),on=Re?dc(rn,p,Yt,De,Qe,Me,je):hd(rn,p,Yt,De);pt.draw(Z,Z.gl.TRIANGLES,T,B,U,st.backCCW,on,g.id,Ze.layoutVertexBuffer,Ze.indexBuffer,Ze.segments,g.paint,p.transform.zoom,at)}}}function mu(p,y,g,w,T,B){var U=p.context,Z=U.gl,se=y.fbo;if(se){var ge=p.useProgram("hillshade");U.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,se.colorAttachment.get());var Re=function(Me,De,Ve){var Ue=Ve.paint.get("hillshade-shadow-color"),Qe=Ve.paint.get("hillshade-highlight-color"),je=Ve.paint.get("hillshade-accent-color"),Ze=Ve.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Ve.paint.get("hillshade-illumination-anchor")&&(Ze-=Me.transform.angle);var at,pt,Pt,Tt=!Me.options.moving;return{u_matrix:Me.transform.calculatePosMatrix(De.tileID.toUnwrapped(),Tt),u_image:0,u_latrange:(at=De.tileID,pt=Math.pow(2,at.canonical.z),Pt=at.canonical.y,[new v.MercatorCoordinate(0,Pt/pt).toLngLat().lat,new v.MercatorCoordinate(0,(Pt+1)/pt).toLngLat().lat]),u_light:[Ve.paint.get("hillshade-exaggeration"),Ze],u_shadow:Ue,u_highlight:Qe,u_accent:je}}(p,y,g);ge.draw(U,Z.TRIANGLES,w,T,B,st.disabled,Re,g.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}}function Ja(p,y,g,w,T,B){var Qe,je,Ze,at,U=p.context,Z=U.gl,se=y.dem;if(se&&se.data){var ge=se.dim,Re=se.stride,Me=se.getPixels();if(U.activeTexture.set(Z.TEXTURE1),U.pixelStoreUnpackPremultiplyAlpha.set(!1),y.demTexture=y.demTexture||p.getTileTexture(Re),y.demTexture){var De=y.demTexture;De.update(Me,{premultiply:!1}),De.bind(Z.NEAREST,Z.CLAMP_TO_EDGE)}else y.demTexture=new v.Texture(U,Me,Z.RGBA,{premultiply:!1}),y.demTexture.bind(Z.NEAREST,Z.CLAMP_TO_EDGE);U.activeTexture.set(Z.TEXTURE0);var Ve=y.fbo;if(!Ve){var Ue=new v.Texture(U,{width:ge,height:ge,data:null},Z.RGBA);Ue.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),(Ve=y.fbo=U.createFramebuffer(ge,ge,!0)).colorAttachment.set(Ue.texture)}U.bindFramebuffer.set(Ve.framebuffer),U.viewport.set([0,0,ge,ge]),p.useProgram("hillshadePrepare").draw(U,Z.TRIANGLES,w,T,B,st.disabled,(Qe=y.tileID,Ze=(je=se).stride,at=v.create(),v.ortho(at,0,v.EXTENT,-v.EXTENT,0,0,1),v.translate(at,at,[0,-v.EXTENT,0]),{u_matrix:at,u_image:1,u_dimension:[Ze,Ze],u_zoom:Qe.overscaledZ,u_unpack:je.getUnpackVector()}),g.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments),y.needsHillshadePrepare=!1}}function Ta(p,y,g,w,T){var B=w.paint.get("raster-fade-duration");if(B>0){var U=v.browser.now(),Z=(U-p.timeAdded)/B,se=y?(U-y.timeAdded)/B:-1,ge=g.getSource(),Re=T.coveringZoomLevel({tileSize:ge.tileSize,roundZoom:ge.roundZoom}),Me=!y||Math.abs(y.tileID.overscaledZ-Re)>Math.abs(p.tileID.overscaledZ-Re),De=Me&&p.refreshedUponExpiration?1:v.clamp(Me?Z:1-se,0,1);return p.refreshedUponExpiration&&Z>=1&&(p.refreshedUponExpiration=!1),y?{opacity:1,mix:1-De}:{opacity:De,mix:0}}return{opacity:1,mix:0}}var za=new v.Color(1,0,0,1),Zs=new v.Color(0,1,0,1),Ys=new v.Color(0,0,1,1),Ao=new v.Color(1,0,1,1),Qu=new v.Color(0,1,1,1);function fa(p,y,g,w){_l(p,0,y+g/2,p.transform.width,g,w)}function Ps(p,y,g,w){_l(p,y-g/2,0,g,p.transform.height,w)}function _l(p,y,g,w,T,B){var U=p.context,Z=U.gl;Z.enable(Z.SCISSOR_TEST),Z.scissor(y*v.browser.devicePixelRatio,g*v.browser.devicePixelRatio,w*v.browser.devicePixelRatio,T*v.browser.devicePixelRatio),U.clear({color:B}),Z.disable(Z.SCISSOR_TEST)}function Li(p,y,g){var w=p.context,T=w.gl,B=g.posMatrix,U=p.useProgram("debug"),Z=Oe.disabled,se=Be.disabled,ge=p.colorModeForRenderPass();w.activeTexture.set(T.TEXTURE0),p.emptyTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),U.draw(w,T.LINE_STRIP,Z,se,ge,st.disabled,Jo(B,v.Color.red),"$debug",p.debugBuffer,p.tileBorderIndexBuffer,p.debugSegments);var Re=y.getTileByID(g.key).latestRawTileData,Me=Math.floor((Re&&Re.byteLength||0)/1024),De=y.getTile(g).tileSize,Ve=512/Math.min(De,512)*(g.overscaledZ/p.transform.zoom)*.5,Ue=g.canonical.toString();g.overscaledZ!==g.canonical.z&&(Ue+=" => "+g.overscaledZ),function(Qe,je){Qe.initDebugOverlayCanvas();var Ze=Qe.debugOverlayCanvas,at=Qe.context.gl,pt=Qe.debugOverlayCanvas.getContext("2d");pt.clearRect(0,0,Ze.width,Ze.height),pt.shadowColor="white",pt.shadowBlur=2,pt.lineWidth=1.5,pt.strokeStyle="white",pt.textBaseline="top",pt.font="bold 36px Open Sans, sans-serif",pt.fillText(je,5,5),pt.strokeText(je,5,5),Qe.debugOverlayTexture.update(Ze),Qe.debugOverlayTexture.bind(at.LINEAR,at.CLAMP_TO_EDGE)}(p,Ue+" "+Me+"kb"),U.draw(w,T.TRIANGLES,Z,se,it.alphaBlended,st.disabled,Jo(B,v.Color.transparent,Ve),"$debug",p.debugBuffer,p.quadTriangleIndexBuffer,p.debugSegments)}var xi={symbol:function(p,y,g,w,T){if("translucent"===p.renderPass){var B=Be.disabled,U=p.colorModeForRenderPass();g.layout.get("text-variable-anchor")&&function(Z,se,ge,Re,Me,De,Ve){for(var Ue=se.transform,Qe="map"===Me,je="map"===De,Ze=0,at=Z;Ze<at.length;Ze+=1){var pt=at[Ze],Pt=Re.getTile(pt),Tt=Pt.getBucket(ge);if(Tt&&Tt.text&&Tt.text.segments.get().length){var Dt=v.evaluateSizeForZoom(Tt.textSizeData,Ue.zoom),Ft=Ko(Pt,1,se.transform.zoom),rn=Hi(pt.posMatrix,je,Qe,se.transform,Ft),Yt="none"!==ge.layout.get("icon-text-fit")&&Tt.hasIconData();if(Dt){var on=Math.pow(2,Ue.zoom-Pt.tileID.overscaledZ);Xr(Tt,Qe,je,Ve,v.symbolSize,Ue,rn,pt.posMatrix,on,Dt,Yt)}}}}(w,p,g,y,g.layout.get("text-rotation-alignment"),g.layout.get("text-pitch-alignment"),T),0!==g.paint.get("icon-opacity").constantOr(1)&&no(p,y,g,w,!1,g.paint.get("icon-translate"),g.paint.get("icon-translate-anchor"),g.layout.get("icon-rotation-alignment"),g.layout.get("icon-pitch-alignment"),g.layout.get("icon-keep-upright"),B,U),0!==g.paint.get("text-opacity").constantOr(1)&&no(p,y,g,w,!0,g.paint.get("text-translate"),g.paint.get("text-translate-anchor"),g.layout.get("text-rotation-alignment"),g.layout.get("text-pitch-alignment"),g.layout.get("text-keep-upright"),B,U),y.map.showCollisionBoxes&&(fn(p,y,g,w,g.paint.get("text-translate"),g.paint.get("text-translate-anchor"),!0),fn(p,y,g,w,g.paint.get("icon-translate"),g.paint.get("icon-translate-anchor"),!1))}},circle:function(p,y,g,w){if("translucent"===p.renderPass){var T=g.paint.get("circle-opacity"),B=g.paint.get("circle-stroke-width"),U=g.paint.get("circle-stroke-opacity"),Z=!g.layout.get("circle-sort-key").isConstant();if(0!==T.constantOr(1)||0!==B.constantOr(1)&&0!==U.constantOr(1)){for(var se=p.context,ge=se.gl,Re=p.depthModeForSublayer(0,Oe.ReadOnly),Me=Be.disabled,De=p.colorModeForRenderPass(),Ve=[],Ue=0;Ue<w.length;Ue++){var Qe=w[Ue],je=y.getTile(Qe),Ze=je.getBucket(g);if(Ze){var at=Ze.programConfigurations.get(g.id),pt={programConfiguration:at,program:p.useProgram("circle",at),layoutVertexBuffer:Ze.layoutVertexBuffer,indexBuffer:Ze.indexBuffer,uniformValues:Sa(p,Qe,je,g)};if(Z)for(var Pt=0,Tt=Ze.segments.get();Pt<Tt.length;Pt+=1){var Dt=Tt[Pt];Ve.push({segments:new v.SegmentVector([Dt]),sortKey:Dt.sortKey,state:pt})}else Ve.push({segments:Ze.segments,sortKey:0,state:pt})}}Z&&Ve.sort(function(Ln,yn){return Ln.sortKey-yn.sortKey});for(var Ft=0,rn=Ve;Ft<rn.length;Ft+=1){var Yt=rn[Ft],on=Yt.state;on.program.draw(se,ge.TRIANGLES,Re,Me,De,st.disabled,on.uniformValues,g.id,on.layoutVertexBuffer,on.indexBuffer,Yt.segments,g.paint,p.transform.zoom,on.programConfiguration)}}}},heatmap:function(p,y,g,w){if(0!==g.paint.get("heatmap-opacity"))if("offscreen"===p.renderPass){var T=p.context,B=T.gl,U=Be.disabled,Z=new it([B.ONE,B.ONE],v.Color.transparent,[!0,!0,!0,!0]);(function(Ve,Ue,Qe){var je=Ve.gl;Ve.activeTexture.set(je.TEXTURE1),Ve.viewport.set([0,0,Ue.width/4,Ue.height/4]);var pt,Pt,Tt,Dt,Ft,Ze=Qe.heatmapFbo;if(Ze)je.bindTexture(je.TEXTURE_2D,Ze.colorAttachment.get()),Ve.bindFramebuffer.set(Ze.framebuffer);else{var at=je.createTexture();je.bindTexture(je.TEXTURE_2D,at),je.texParameteri(je.TEXTURE_2D,je.TEXTURE_WRAP_S,je.CLAMP_TO_EDGE),je.texParameteri(je.TEXTURE_2D,je.TEXTURE_WRAP_T,je.CLAMP_TO_EDGE),je.texParameteri(je.TEXTURE_2D,je.TEXTURE_MIN_FILTER,je.LINEAR),je.texParameteri(je.TEXTURE_2D,je.TEXTURE_MAG_FILTER,je.LINEAR),Tt=at,Dt=Ze=Qe.heatmapFbo=Ve.createFramebuffer(Ue.width/4,Ue.height/4,!1),(Ft=(pt=Ve).gl).texImage2D(Ft.TEXTURE_2D,0,Ft.RGBA,(Pt=Ue).width/4,Pt.height/4,0,Ft.RGBA,pt.extRenderToTextureHalfFloat?pt.extTextureHalfFloat.HALF_FLOAT_OES:Ft.UNSIGNED_BYTE,null),Dt.colorAttachment.set(Tt)}})(T,p,g),T.clear({color:v.Color.transparent});for(var se=0;se<w.length;se++){var ge=w[se];if(!y.hasRenderableParent(ge)){var Re=y.getTile(ge),Me=Re.getBucket(g);if(Me){var De=Me.programConfigurations.get(g.id);p.useProgram("heatmap",De).draw(T,B.TRIANGLES,Oe.disabled,U,Z,st.disabled,ca(ge.posMatrix,Re,p.transform.zoom,g.paint.get("heatmap-intensity")),g.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,g.paint,p.transform.zoom,De)}}}T.viewport.set([0,0,p.width,p.height])}else"translucent"===p.renderPass&&(p.context.setColorMode(p.colorModeForRenderPass()),function(Ve,Ue){var Qe=Ve.context,je=Qe.gl,Ze=Ue.heatmapFbo;if(Ze){Qe.activeTexture.set(je.TEXTURE0),je.bindTexture(je.TEXTURE_2D,Ze.colorAttachment.get()),Qe.activeTexture.set(je.TEXTURE1);var at=Ue.colorRampTexture;at||(at=Ue.colorRampTexture=new v.Texture(Qe,Ue.colorRamp,je.RGBA)),at.bind(je.LINEAR,je.CLAMP_TO_EDGE),Ve.useProgram("heatmapTexture").draw(Qe,je.TRIANGLES,Oe.disabled,Be.disabled,Ve.colorModeForRenderPass(),st.disabled,function(pt,Pt,Tt,Dt){var Ft=v.create();v.ortho(Ft,0,pt.width,pt.height,0,0,1);var rn=pt.context.gl;return{u_matrix:Ft,u_world:[rn.drawingBufferWidth,rn.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Pt.paint.get("heatmap-opacity")}}(Ve,Ue),Ue.id,Ve.viewportBuffer,Ve.quadTriangleIndexBuffer,Ve.viewportSegments,Ue.paint,Ve.transform.zoom)}}(p,g))},line:function(p,y,g,w){if("translucent"===p.renderPass){var T=g.paint.get("line-opacity"),B=g.paint.get("line-width");if(0!==T.constantOr(1)&&0!==B.constantOr(1))for(var U=p.depthModeForSublayer(0,Oe.ReadOnly),Z=p.colorModeForRenderPass(),se=g.paint.get("line-dasharray"),ge=g.paint.get("line-pattern"),Re=ge.constantOr(1),Me=g.paint.get("line-gradient"),De=g.getCrossfadeParameters(),Ve=Re?"linePattern":se?"lineSDF":Me?"lineGradient":"line",Ue=p.context,Qe=Ue.gl,je=!0,Ze=0,at=w;Ze<at.length;Ze+=1){var pt=at[Ze],Pt=y.getTile(pt);if(!Re||Pt.patternsLoaded()){var Tt=Pt.getBucket(g);if(Tt){var Dt=Tt.programConfigurations.get(g.id),Ft=p.context.program.get(),rn=p.useProgram(Ve,Dt),Yt=je||rn.program!==Ft,on=ge.constantOr(null);if(on&&Pt.imageAtlas){var Ln=Pt.imageAtlas,yn=Ln.patternPositions[on.to.toString()],qn=Ln.patternPositions[on.from.toString()];yn&&qn&&Dt.setConstantPatternPositions(yn,qn)}var li=Re?Pn(p,Pt,g,De):se?Wi(p,Pt,g,se,De):Me?On(p,Pt,g,Tt.lineClipsArray.length):Po(p,Pt,g);if(Re)Ue.activeTexture.set(Qe.TEXTURE0),Pt.imageAtlasTexture.bind(Qe.LINEAR,Qe.CLAMP_TO_EDGE),Dt.updatePaintBuffers(De);else if(se&&(Yt||p.lineAtlas.dirty))Ue.activeTexture.set(Qe.TEXTURE0),p.lineAtlas.bind(Ue);else if(Me){var En=Tt.gradients[g.id],gr=En.texture;if(g.gradientVersion!==En.version){var zr=256;if(g.stepInterpolant){var vr=y.getSource().maxzoom,sr=pt.canonical.z===vr?Math.ceil(1<<p.transform.maxZoom-pt.canonical.z):1;zr=v.clamp(v.nextPowerOfTwo(Tt.maxLineLength/v.EXTENT*1024*sr),256,Ue.maxTextureSize)}En.gradient=v.renderColorRamp({expression:g.gradientExpression(),evaluationKey:"lineProgress",resolution:zr,image:En.gradient||void 0,clips:Tt.lineClipsArray}),En.texture?En.texture.update(En.gradient):En.texture=new v.Texture(Ue,En.gradient,Qe.RGBA),En.version=g.gradientVersion,gr=En.texture}Ue.activeTexture.set(Qe.TEXTURE0),gr.bind(g.stepInterpolant?Qe.NEAREST:Qe.LINEAR,Qe.CLAMP_TO_EDGE)}rn.draw(Ue,Qe.TRIANGLES,U,p.stencilModeForClipping(pt),Z,st.disabled,li,g.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,g.paint,p.transform.zoom,Dt,Tt.layoutVertexBuffer2),je=!1}}}}},fill:function(p,y,g,w){var T=g.paint.get("fill-color"),B=g.paint.get("fill-opacity");if(0!==B.constantOr(1)){var U=p.colorModeForRenderPass(),Z=g.paint.get("fill-pattern"),se=p.opaquePassEnabledForLayer()&&!Z.constantOr(1)&&1===T.constantOr(v.Color.transparent).a&&1===B.constantOr(0)?"opaque":"translucent";if(p.renderPass===se){var ge=p.depthModeForSublayer(1,"opaque"===p.renderPass?Oe.ReadWrite:Oe.ReadOnly);xr(p,y,g,w,ge,U,!1)}if("translucent"===p.renderPass&&g.paint.get("fill-antialias")){var Re=p.depthModeForSublayer(g.getPaintProperty("fill-outline-color")?2:0,Oe.ReadOnly);xr(p,y,g,w,Re,U,!0)}}},"fill-extrusion":function(p,y,g,w){var T=g.paint.get("fill-extrusion-opacity");if(0!==T&&"translucent"===p.renderPass){var B=new Oe(p.context.gl.LEQUAL,Oe.ReadWrite,p.depthRangeFor3D);if(1!==T||g.paint.get("fill-extrusion-pattern").constantOr(1))Eo(p,y,g,w,B,Be.disabled,it.disabled),Eo(p,y,g,w,B,p.stencilModeFor3D(),p.colorModeForRenderPass());else{var U=p.colorModeForRenderPass();Eo(p,y,g,w,B,Be.disabled,U)}}},hillshade:function(p,y,g,w){if("offscreen"===p.renderPass||"translucent"===p.renderPass){for(var T=p.context,B=p.depthModeForSublayer(0,Oe.ReadOnly),U=p.colorModeForRenderPass(),Z="translucent"===p.renderPass?p.stencilConfigForOverlap(w):[{},w],se=Z[0],ge=0,Re=Z[1];ge<Re.length;ge+=1){var Me=Re[ge],De=y.getTile(Me);De.needsHillshadePrepare&&"offscreen"===p.renderPass?Ja(p,De,g,B,Be.disabled,U):"translucent"===p.renderPass&&mu(p,De,g,B,se[Me.overscaledZ],U)}T.viewport.set([0,0,p.width,p.height])}},raster:function(p,y,g,w){if("translucent"===p.renderPass&&0!==g.paint.get("raster-opacity")&&w.length)for(var T=p.context,B=T.gl,U=y.getSource(),Z=p.useProgram("raster"),se=p.colorModeForRenderPass(),ge=U instanceof At?[{},w]:p.stencilConfigForOverlap(w),Re=ge[0],Me=ge[1],De=Me[Me.length-1].overscaledZ,Ve=!p.options.moving,Ue=0,Qe=Me;Ue<Qe.length;Ue+=1){var je=Qe[Ue],Ze=p.depthModeForSublayer(je.overscaledZ-De,1===g.paint.get("raster-opacity")?Oe.ReadWrite:Oe.ReadOnly,B.LESS),at=y.getTile(je),pt=p.transform.calculatePosMatrix(je.toUnwrapped(),Ve);at.registerFadeDuration(g.paint.get("raster-fade-duration"));var Pt=y.findLoadedParent(je,0),Tt=Ta(at,Pt,y,g,p.transform),Dt=void 0,Ft=void 0,rn="nearest"===g.paint.get("raster-resampling")?B.NEAREST:B.LINEAR;T.activeTexture.set(B.TEXTURE0),at.texture.bind(rn,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),T.activeTexture.set(B.TEXTURE1),Pt?(Pt.texture.bind(rn,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),Dt=Math.pow(2,Pt.tileID.overscaledZ-at.tileID.overscaledZ),Ft=[at.tileID.canonical.x*Dt%1,at.tileID.canonical.y*Dt%1]):at.texture.bind(rn,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST);var Yt=Zo(pt,Ft||[0,0],Dt||1,Tt,g);U instanceof At?Z.draw(T,B.TRIANGLES,Ze,Be.disabled,se,st.disabled,Yt,g.id,U.boundsBuffer,p.quadTriangleIndexBuffer,U.boundsSegments):Z.draw(T,B.TRIANGLES,Ze,Re[je.overscaledZ],se,st.disabled,Yt,g.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}},background:function(p,y,g){var w=g.paint.get("background-color"),T=g.paint.get("background-opacity");if(0!==T){var B=p.context,U=B.gl,Z=p.transform,se=Z.tileSize,ge=g.paint.get("background-pattern");if(!p.isPatternMissing(ge)){var Re=!ge&&1===w.a&&1===T&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass===Re){var Me=Be.disabled,De=p.depthModeForSublayer(0,"opaque"===Re?Oe.ReadWrite:Oe.ReadOnly),Ve=p.colorModeForRenderPass(),Ue=p.useProgram(ge?"backgroundPattern":"background"),Qe=Z.coveringTiles({tileSize:se});ge&&(B.activeTexture.set(U.TEXTURE0),p.imageManager.bind(p.context));for(var je=g.getCrossfadeParameters(),Ze=0,at=Qe;Ze<at.length;Ze+=1){var pt=at[Ze],Pt=p.transform.calculatePosMatrix(pt.toUnwrapped()),Tt=ge?ft(Pt,T,p,ge,{tileID:pt,tileSize:se},je):yl(Pt,T,w);Ue.draw(B,U.TRIANGLES,De,Me,Ve,st.disabled,Tt,g.id,p.tileExtentBuffer,p.quadTriangleIndexBuffer,p.tileExtentSegments)}}}}},debug:function(p,y,g){for(var w=0;w<g.length;w++)Li(p,y,g[w])},custom:function(p,y,g){var w=p.context,T=g.implementation;if("offscreen"===p.renderPass){var B=T.prerender;B&&(p.setCustomLayerDefaults(),w.setColorMode(p.colorModeForRenderPass()),B.call(T,w.gl,p.transform.customLayerMatrix()),w.setDirty(),p.setBaseState())}else if("translucent"===p.renderPass){p.setCustomLayerDefaults(),w.setColorMode(p.colorModeForRenderPass()),w.setStencilMode(Be.disabled);var U="3d"===T.renderingMode?new Oe(p.context.gl.LEQUAL,Oe.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,Oe.ReadOnly);w.setDepthMode(U),T.render(w.gl,p.transform.customLayerMatrix()),w.setDirty(),p.setBaseState(),w.bindFramebuffer.set(null)}}},Ur=function(p,y){this.context=new nt(p),this.transform=y,this._tileTextures={},this.setup(),this.numSublayers=ke.maxUnderzooming+ke.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Vn,this.gpuTimers={}};Ur.prototype.resize=function(p,y){if(this.width=p*v.browser.devicePixelRatio,this.height=y*v.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var g=0,w=this.style._order;g<w.length;g+=1)this.style._layers[w[g]].resize()},Ur.prototype.setup=function(){var p=this.context,y=new v.StructArrayLayout2i4;y.emplaceBack(0,0),y.emplaceBack(v.EXTENT,0),y.emplaceBack(0,v.EXTENT),y.emplaceBack(v.EXTENT,v.EXTENT),this.tileExtentBuffer=p.createVertexBuffer(y,La.members),this.tileExtentSegments=v.SegmentVector.simpleSegment(0,0,4,2);var g=new v.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(v.EXTENT,0),g.emplaceBack(0,v.EXTENT),g.emplaceBack(v.EXTENT,v.EXTENT),this.debugBuffer=p.createVertexBuffer(g,La.members),this.debugSegments=v.SegmentVector.simpleSegment(0,0,4,5);var w=new v.StructArrayLayout4i8;w.emplaceBack(0,0,0,0),w.emplaceBack(v.EXTENT,0,v.EXTENT,0),w.emplaceBack(0,v.EXTENT,0,v.EXTENT),w.emplaceBack(v.EXTENT,v.EXTENT,v.EXTENT,v.EXTENT),this.rasterBoundsBuffer=p.createVertexBuffer(w,Ie.members),this.rasterBoundsSegments=v.SegmentVector.simpleSegment(0,0,4,2);var T=new v.StructArrayLayout2i4;T.emplaceBack(0,0),T.emplaceBack(1,0),T.emplaceBack(0,1),T.emplaceBack(1,1),this.viewportBuffer=p.createVertexBuffer(T,La.members),this.viewportSegments=v.SegmentVector.simpleSegment(0,0,4,2);var B=new v.StructArrayLayout1ui2;B.emplaceBack(0),B.emplaceBack(1),B.emplaceBack(3),B.emplaceBack(2),B.emplaceBack(0),this.tileBorderIndexBuffer=p.createIndexBuffer(B);var U=new v.StructArrayLayout3ui6;U.emplaceBack(0,1,2),U.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=p.createIndexBuffer(U),this.emptyTexture=new v.Texture(p,{width:1,height:1,data:new Uint8Array([0,0,0,0])},p.gl.RGBA);var Z=this.context.gl;this.stencilClearMode=new Be({func:Z.ALWAYS,mask:0},0,255,Z.ZERO,Z.ZERO,Z.ZERO)},Ur.prototype.clearStencil=function(){var p=this.context,y=p.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var g=v.create();v.ortho(g,0,this.width,this.height,0,0,1),v.scale(g,g,[y.drawingBufferWidth,y.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(p,y.TRIANGLES,Oe.disabled,this.stencilClearMode,it.disabled,st.disabled,co(g),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ur.prototype._renderTileClippingMasks=function(p,y){if(this.currentStencilSource!==p.source&&p.isTileClipped()&&y&&y.length){this.currentStencilSource=p.source;var g=this.context,w=g.gl;this.nextStencilID+y.length>256&&this.clearStencil(),g.setColorMode(it.disabled),g.setDepthMode(Oe.disabled);var T=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var B=0,U=y;B<U.length;B+=1){var Z=U[B],se=this._tileClippingMaskIDs[Z.key]=this.nextStencilID++;T.draw(g,w.TRIANGLES,Oe.disabled,new Be({func:w.ALWAYS,mask:0},se,255,w.KEEP,w.KEEP,w.REPLACE),it.disabled,st.disabled,co(Z.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Ur.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var p=this.nextStencilID++,y=this.context.gl;return new Be({func:y.NOTEQUAL,mask:255},p,255,y.KEEP,y.KEEP,y.REPLACE)},Ur.prototype.stencilModeForClipping=function(p){var y=this.context.gl;return new Be({func:y.EQUAL,mask:255},this._tileClippingMaskIDs[p.key],0,y.KEEP,y.KEEP,y.REPLACE)},Ur.prototype.stencilConfigForOverlap=function(p){var y,g=this.context.gl,w=p.sort(function(se,ge){return ge.overscaledZ-se.overscaledZ}),T=w[w.length-1].overscaledZ,B=w[0].overscaledZ-T+1;if(B>1){this.currentStencilSource=void 0,this.nextStencilID+B>256&&this.clearStencil();for(var U={},Z=0;Z<B;Z++)U[Z+T]=new Be({func:g.GEQUAL,mask:255},Z+this.nextStencilID,255,g.KEEP,g.KEEP,g.REPLACE);return this.nextStencilID+=B,[U,w]}return[(y={},y[T]=Be.disabled,y),w]},Ur.prototype.colorModeForRenderPass=function(){var p=this.context.gl;return this._showOverdrawInspector?new it([p.CONSTANT_COLOR,p.ONE],new v.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?it.unblended:it.alphaBlended},Ur.prototype.depthModeForSublayer=function(p,y,g){if(!this.opaquePassEnabledForLayer())return Oe.disabled;var w=1-((1+this.currentLayer)*this.numSublayers+p)*this.depthEpsilon;return new Oe(g||this.context.gl.LEQUAL,y,[w,w])},Ur.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Ur.prototype.render=function(p,y){var g=this;this.style=p,this.options=y,this.lineAtlas=p.lineAtlas,this.imageManager=p.imageManager,this.glyphManager=p.glyphManager,this.symbolFadeChange=p.placement.symbolFadeChange(v.browser.now()),this.imageManager.beginFrame();var w=this.style._order,T=this.style.sourceCaches;for(var B in T){var U=T[B];U.used&&U.prepare(this.context)}var Z,se,ge={},Re={},Me={};for(var De in T){var Ve=T[De];ge[De]=Ve.getVisibleCoordinates(),Re[De]=ge[De].slice().reverse(),Me[De]=Ve.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Ue=0;Ue<w.length;Ue++)if(this.style._layers[w[Ue]].is3D()){this.opaquePassCutoff=Ue;break}this.renderPass="offscreen";for(var Qe=0,je=w;Qe<je.length;Qe+=1){var Ze=this.style._layers[je[Qe]];if(Ze.hasOffscreenPass()&&!Ze.isHidden(this.transform.zoom)){var at=Re[Ze.source];("custom"===Ze.type||at.length)&&this.renderLayer(this,T[Ze.source],Ze,at)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:y.showOverdrawInspector?v.Color.black:v.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=y.showOverdrawInspector,this.depthRangeFor3D=[0,1-(p._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){var pt=this.style._layers[w[this.currentLayer]],Pt=T[pt.source],Tt=ge[pt.source];this._renderTileClippingMasks(pt,Tt),this.renderLayer(this,Pt,pt,Tt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){var Dt=this.style._layers[w[this.currentLayer]],Ft=T[Dt.source],rn=("symbol"===Dt.type?Me:Re)[Dt.source];this._renderTileClippingMasks(Dt,ge[Dt.source]),this.renderLayer(this,Ft,Dt,rn)}this.options.showTileBoundaries&&(v.values(this.style._layers).forEach(function(Yt){Yt.source&&!Yt.isHidden(g.transform.zoom)&&(Yt.source!==(se&&se.id)&&(se=g.style.sourceCaches[Yt.source]),(!Z||Z.getSource().maxzoom<se.getSource().maxzoom)&&(Z=se))}),Z&&xi.debug(this,Z,Z.getVisibleCoordinates())),this.options.showPadding&&function(Yt){var on=Yt.transform.padding;fa(Yt,Yt.transform.height-(on.top||0),3,za),fa(Yt,on.bottom||0,3,Zs),Ps(Yt,on.left||0,3,Ys),Ps(Yt,Yt.transform.width-(on.right||0),3,Ao);var yn,qn,li,En,Ln=Yt.transform.centerPoint;_l(yn=Yt,(qn=Ln.x)-1,(li=Yt.transform.height-Ln.y)-10,2,20,En=Qu),_l(yn,qn-10,li-1,20,2,En)}(this),this.context.setDefault()},Ur.prototype.renderLayer=function(p,y,g,w){g.isHidden(this.transform.zoom)||("background"===g.type||"custom"===g.type||w.length)&&(this.id=g.id,this.gpuTimingStart(g),xi[g.type](p,y,g,w,this.style.placement.variableOffsets),this.gpuTimingEnd())},Ur.prototype.gpuTimingStart=function(p){if(this.options.gpuTiming){var y=this.context.extTimerQuery,g=this.gpuTimers[p.id];g||(g=this.gpuTimers[p.id]={calls:0,cpuTime:0,query:y.createQueryEXT()}),g.calls++,y.beginQueryEXT(y.TIME_ELAPSED_EXT,g.query)}},Ur.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var p=this.context.extTimerQuery;p.endQueryEXT(p.TIME_ELAPSED_EXT)}},Ur.prototype.collectGpuTimers=function(){var p=this.gpuTimers;return this.gpuTimers={},p},Ur.prototype.queryGpuTimers=function(p){var y={};for(var g in p){var w=p[g],T=this.context.extTimerQuery,B=T.getQueryObjectEXT(w.query,T.QUERY_RESULT_EXT)/1e6;T.deleteQueryEXT(w.query),y[g]=B}return y},Ur.prototype.translatePosMatrix=function(p,y,g,w,T){if(!g[0]&&!g[1])return p;var B=T?"map"===w?this.transform.angle:0:"viewport"===w?-this.transform.angle:0;if(B){var U=Math.sin(B),Z=Math.cos(B);g=[g[0]*Z-g[1]*U,g[0]*U+g[1]*Z]}var se=[T?g[0]:Ko(y,g[0],this.transform.zoom),T?g[1]:Ko(y,g[1],this.transform.zoom),0],ge=new Float32Array(16);return v.translate(ge,p,se),ge},Ur.prototype.saveTileTexture=function(p){var y=this._tileTextures[p.size[0]];y?y.push(p):this._tileTextures[p.size[0]]=[p]},Ur.prototype.getTileTexture=function(p){var y=this._tileTextures[p];return y&&y.length>0?y.pop():null},Ur.prototype.isPatternMissing=function(p){if(!p)return!1;if(!p.from||!p.to)return!0;var y=this.imageManager.getPattern(p.from.toString()),g=this.imageManager.getPattern(p.to.toString());return!y||!g},Ur.prototype.useProgram=function(p,y){this.cache=this.cache||{};var g=""+p+(y?y.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[g]||(this.cache[g]=new Zu(this.context,p,Wo[p],y,Ot[p],this._showOverdrawInspector)),this.cache[g]},Ur.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ur.prototype.setBaseState=function(){var p=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(p.FUNC_ADD)},Ur.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=v.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new v.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Ur.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Qs=function(p,y){this.points=p,this.planes=y};Qs.fromInvProjectionMatrix=function(p,y,g){var w=Math.pow(2,g),T=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(U){return v.transformMat4([],U,p)}).map(function(U){return v.scale$1([],U,1/U[3]/y*w)}),B=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(U){var Z=v.sub([],T[U[0]],T[U[1]]),se=v.sub([],T[U[2]],T[U[1]]),ge=v.normalize([],v.cross([],Z,se)),Re=-v.dot(ge,T[U[1]]);return ge.concat(Re)});return new Qs(T,B)};var el=function(p,y){this.min=p,this.max=y,this.center=v.scale$2([],v.add([],this.min,this.max),.5)};el.prototype.quadrant=function(p){for(var y=[p%2==0,p<2],g=v.clone$2(this.min),w=v.clone$2(this.max),T=0;T<y.length;T++)g[T]=y[T]?this.min[T]:this.center[T],w[T]=y[T]?this.center[T]:this.max[T];return w[2]=this.max[2],new el(g,w)},el.prototype.distanceX=function(p){return Math.max(Math.min(this.max[0],p[0]),this.min[0])-p[0]},el.prototype.distanceY=function(p){return Math.max(Math.min(this.max[1],p[1]),this.min[1])-p[1]},el.prototype.intersects=function(p){for(var y=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],g=!0,w=0;w<p.planes.length;w++){for(var T=p.planes[w],B=0,U=0;U<y.length;U++)B+=v.dot$1(T,y[U])>=0;if(0===B)return 0;B!==y.length&&(g=!1)}if(g)return 2;for(var Z=0;Z<3;Z++){for(var se=Number.MAX_VALUE,ge=-Number.MAX_VALUE,Re=0;Re<p.points.length;Re++){var Me=p.points[Re][Z]-this.min[Z];se=Math.min(se,Me),ge=Math.max(ge,Me)}if(ge<0||se>this.max[Z]-this.min[Z])return 0}return 1};var na=function(p,y,g,w){if(void 0===p&&(p=0),void 0===y&&(y=0),void 0===g&&(g=0),void 0===w&&(w=0),isNaN(p)||p<0||isNaN(y)||y<0||isNaN(g)||g<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=p,this.bottom=y,this.left=g,this.right=w};na.prototype.interpolate=function(p,y,g){return null!=y.top&&null!=p.top&&(this.top=v.number(p.top,y.top,g)),null!=y.bottom&&null!=p.bottom&&(this.bottom=v.number(p.bottom,y.bottom,g)),null!=y.left&&null!=p.left&&(this.left=v.number(p.left,y.left,g)),null!=y.right&&null!=p.right&&(this.right=v.number(p.right,y.right,g)),this},na.prototype.getCenter=function(p,y){var g=v.clamp((this.left+p-this.right)/2,0,p),w=v.clamp((this.top+y-this.bottom)/2,0,y);return new v.Point(g,w)},na.prototype.equals=function(p){return this.top===p.top&&this.bottom===p.bottom&&this.left===p.left&&this.right===p.right},na.prototype.clone=function(){return new na(this.top,this.bottom,this.left,this.right)},na.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var ti=function(p,y,g,w,T){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===T||T,this._minZoom=p||0,this._maxZoom=y||22,this._minPitch=g??0,this._maxPitch=w??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new v.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new na,this._posMatrixCache={},this._alignedPosMatrixCache={}},Fr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ti.prototype.clone=function(){var p=new ti(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return p.tileSize=this.tileSize,p.latRange=this.latRange,p.width=this.width,p.height=this.height,p._center=this._center,p.zoom=this.zoom,p.angle=this.angle,p._fov=this._fov,p._pitch=this._pitch,p._unmodified=this._unmodified,p._edgeInsets=this._edgeInsets.clone(),p._calcMatrices(),p},Fr.minZoom.get=function(){return this._minZoom},Fr.minZoom.set=function(p){this._minZoom!==p&&(this._minZoom=p,this.zoom=Math.max(this.zoom,p))},Fr.maxZoom.get=function(){return this._maxZoom},Fr.maxZoom.set=function(p){this._maxZoom!==p&&(this._maxZoom=p,this.zoom=Math.min(this.zoom,p))},Fr.minPitch.get=function(){return this._minPitch},Fr.minPitch.set=function(p){this._minPitch!==p&&(this._minPitch=p,this.pitch=Math.max(this.pitch,p))},Fr.maxPitch.get=function(){return this._maxPitch},Fr.maxPitch.set=function(p){this._maxPitch!==p&&(this._maxPitch=p,this.pitch=Math.min(this.pitch,p))},Fr.renderWorldCopies.get=function(){return this._renderWorldCopies},Fr.renderWorldCopies.set=function(p){void 0===p?p=!0:null===p&&(p=!1),this._renderWorldCopies=p},Fr.worldSize.get=function(){return this.tileSize*this.scale},Fr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Fr.size.get=function(){return new v.Point(this.width,this.height)},Fr.bearing.get=function(){return-this.angle/Math.PI*180},Fr.bearing.set=function(p){var y=-v.wrap(p,-180,180)*Math.PI/180;this.angle!==y&&(this._unmodified=!1,this.angle=y,this._calcMatrices(),this.rotationMatrix=v.create$2(),v.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Fr.pitch.get=function(){return this._pitch/Math.PI*180},Fr.pitch.set=function(p){var y=v.clamp(p,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==y&&(this._unmodified=!1,this._pitch=y,this._calcMatrices())},Fr.fov.get=function(){return this._fov/Math.PI*180},Fr.fov.set=function(p){p=Math.max(.01,Math.min(60,p)),this._fov!==p&&(this._unmodified=!1,this._fov=p/180*Math.PI,this._calcMatrices())},Fr.zoom.get=function(){return this._zoom},Fr.zoom.set=function(p){var y=Math.min(Math.max(p,this.minZoom),this.maxZoom);this._zoom!==y&&(this._unmodified=!1,this._zoom=y,this.scale=this.zoomScale(y),this.tileZoom=Math.floor(y),this.zoomFraction=y-this.tileZoom,this._constrain(),this._calcMatrices())},Fr.center.get=function(){return this._center},Fr.center.set=function(p){p.lat===this._center.lat&&p.lng===this._center.lng||(this._unmodified=!1,this._center=p,this._constrain(),this._calcMatrices())},Fr.padding.get=function(){return this._edgeInsets.toJSON()},Fr.padding.set=function(p){this._edgeInsets.equals(p)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,p,1),this._calcMatrices())},Fr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},ti.prototype.isPaddingEqual=function(p){return this._edgeInsets.equals(p)},ti.prototype.interpolatePadding=function(p,y,g){this._unmodified=!1,this._edgeInsets.interpolate(p,y,g),this._constrain(),this._calcMatrices()},ti.prototype.coveringZoomLevel=function(p){var y=(p.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/p.tileSize));return Math.max(0,y)},ti.prototype.getVisibleUnwrappedCoordinates=function(p){var y=[new v.UnwrappedTileID(0,p)];if(this._renderWorldCopies)for(var g=this.pointCoordinate(new v.Point(0,0)),w=this.pointCoordinate(new v.Point(this.width,0)),T=this.pointCoordinate(new v.Point(this.width,this.height)),B=this.pointCoordinate(new v.Point(0,this.height)),U=Math.floor(Math.min(g.x,w.x,T.x,B.x)),Z=Math.floor(Math.max(g.x,w.x,T.x,B.x)),se=U-1;se<=Z+1;se++)0!==se&&y.push(new v.UnwrappedTileID(se,p));return y},ti.prototype.coveringTiles=function(p){var y=this.coveringZoomLevel(p),g=y;if(void 0!==p.minzoom&&y<p.minzoom)return[];void 0!==p.maxzoom&&y>p.maxzoom&&(y=p.maxzoom);var w=v.MercatorCoordinate.fromLngLat(this.center),T=Math.pow(2,y),B=[T*w.x,T*w.y,0],U=Qs.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,y),Z=p.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Z=y);var se=function(Yt){return{aabb:new el([Yt*T,0,0],[(Yt+1)*T,T,0]),zoom:0,x:0,y:0,wrap:Yt,fullyVisible:!1}},ge=[],Re=[],Me=y,De=p.reparseOverscaled?g:y;if(this._renderWorldCopies)for(var Ve=1;Ve<=3;Ve++)ge.push(se(-Ve)),ge.push(se(Ve));for(ge.push(se(0));ge.length>0;){var Ue=ge.pop(),Qe=Ue.x,je=Ue.y,Ze=Ue.fullyVisible;if(!Ze){var at=Ue.aabb.intersects(U);if(0===at)continue;Ze=2===at}var pt=Ue.aabb.distanceX(B),Pt=Ue.aabb.distanceY(B),Tt=Math.max(Math.abs(pt),Math.abs(Pt));if(Ue.zoom===Me||Tt>3+(1<<Me-Ue.zoom)-2&&Ue.zoom>=Z)Re.push({tileID:new v.OverscaledTileID(Ue.zoom===Me?De:Ue.zoom,Ue.wrap,Ue.zoom,Qe,je),distanceSq:v.sqrLen([B[0]-.5-Qe,B[1]-.5-je])});else for(var Dt=0;Dt<4;Dt++){var Ft=(Qe<<1)+Dt%2,rn=(je<<1)+(Dt>>1);ge.push({aabb:Ue.aabb.quadrant(Dt),zoom:Ue.zoom+1,x:Ft,y:rn,wrap:Ue.wrap,fullyVisible:Ze})}}return Re.sort(function(Yt,on){return Yt.distanceSq-on.distanceSq}).map(function(Yt){return Yt.tileID})},ti.prototype.resize=function(p,y){this.width=p,this.height=y,this.pixelsToGLUnits=[2/p,-2/y],this._constrain(),this._calcMatrices()},Fr.unmodified.get=function(){return this._unmodified},ti.prototype.zoomScale=function(p){return Math.pow(2,p)},ti.prototype.scaleZoom=function(p){return Math.log(p)/Math.LN2},ti.prototype.project=function(p){var y=v.clamp(p.lat,-this.maxValidLatitude,this.maxValidLatitude);return new v.Point(v.mercatorXfromLng(p.lng)*this.worldSize,v.mercatorYfromLat(y)*this.worldSize)},ti.prototype.unproject=function(p){return new v.MercatorCoordinate(p.x/this.worldSize,p.y/this.worldSize).toLngLat()},Fr.point.get=function(){return this.project(this.center)},ti.prototype.setLocationAtPoint=function(p,y){var g=this.pointCoordinate(y),w=this.pointCoordinate(this.centerPoint),T=this.locationCoordinate(p),B=new v.MercatorCoordinate(T.x-(g.x-w.x),T.y-(g.y-w.y));this.center=this.coordinateLocation(B),this._renderWorldCopies&&(this.center=this.center.wrap())},ti.prototype.locationPoint=function(p){return this.coordinatePoint(this.locationCoordinate(p))},ti.prototype.pointLocation=function(p){return this.coordinateLocation(this.pointCoordinate(p))},ti.prototype.locationCoordinate=function(p){return v.MercatorCoordinate.fromLngLat(p)},ti.prototype.coordinateLocation=function(p){return p.toLngLat()},ti.prototype.pointCoordinate=function(p){var y=[p.x,p.y,0,1],g=[p.x,p.y,1,1];v.transformMat4(y,y,this.pixelMatrixInverse),v.transformMat4(g,g,this.pixelMatrixInverse);var w=y[3],T=g[3],B=y[1]/w,U=g[1]/T,Z=y[2]/w,se=g[2]/T,ge=Z===se?0:(0-Z)/(se-Z);return new v.MercatorCoordinate(v.number(y[0]/w,g[0]/T,ge)/this.worldSize,v.number(B,U,ge)/this.worldSize)},ti.prototype.coordinatePoint=function(p){var y=[p.x*this.worldSize,p.y*this.worldSize,0,1];return v.transformMat4(y,y,this.pixelMatrix),new v.Point(y[0]/y[3],y[1]/y[3])},ti.prototype.getBounds=function(){return(new v.LngLatBounds).extend(this.pointLocation(new v.Point(0,0))).extend(this.pointLocation(new v.Point(this.width,0))).extend(this.pointLocation(new v.Point(this.width,this.height))).extend(this.pointLocation(new v.Point(0,this.height)))},ti.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new v.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},ti.prototype.setMaxBounds=function(p){p?(this.lngRange=[p.getWest(),p.getEast()],this.latRange=[p.getSouth(),p.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ti.prototype.calculatePosMatrix=function(p,y){void 0===y&&(y=!1);var g=p.key,w=y?this._alignedPosMatrixCache:this._posMatrixCache;if(w[g])return w[g];var T=p.canonical,B=this.worldSize/this.zoomScale(T.z),U=T.x+Math.pow(2,T.z)*p.wrap,Z=v.identity(new Float64Array(16));return v.translate(Z,Z,[U*B,T.y*B,0]),v.scale(Z,Z,[B/v.EXTENT,B/v.EXTENT,1]),v.multiply(Z,y?this.alignedProjMatrix:this.projMatrix,Z),w[g]=new Float32Array(Z),w[g]},ti.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ti.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var p,y,g,w,T=-90,B=90,U=-180,Z=180,se=this.size,ge=this._unmodified;if(this.latRange){var Re=this.latRange;T=v.mercatorYfromLat(Re[1])*this.worldSize,p=(B=v.mercatorYfromLat(Re[0])*this.worldSize)-T<se.y?se.y/(B-T):0}if(this.lngRange){var Me=this.lngRange;U=v.mercatorXfromLng(Me[0])*this.worldSize,y=(Z=v.mercatorXfromLng(Me[1])*this.worldSize)-U<se.x?se.x/(Z-U):0}var De=this.point,Ve=Math.max(y||0,p||0);if(Ve)return this.center=this.unproject(new v.Point(y?(Z+U)/2:De.x,p?(B+T)/2:De.y)),this.zoom+=this.scaleZoom(Ve),this._unmodified=ge,void(this._constraining=!1);if(this.latRange){var Ue=De.y,Qe=se.y/2;Ue-Qe<T&&(w=T+Qe),Ue+Qe>B&&(w=B-Qe)}if(this.lngRange){var je=De.x,Ze=se.x/2;je-Ze<U&&(g=U+Ze),je+Ze>Z&&(g=Z-Ze)}void 0===g&&void 0===w||(this.center=this.unproject(new v.Point(void 0!==g?g:De.x,void 0!==w?w:De.y))),this._unmodified=ge,this._constraining=!1}},ti.prototype._calcMatrices=function(){if(this.height){var p=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var y=Math.PI/2+this._pitch,g=this._fov*(.5+p.y/this.height),w=Math.sin(g)*this.cameraToCenterDistance/Math.sin(v.clamp(Math.PI-y-g,.01,Math.PI-.01)),T=this.point,B=T.x,U=T.y,Z=1.01*(Math.cos(Math.PI/2-this._pitch)*w+this.cameraToCenterDistance),se=this.height/50,ge=new Float64Array(16);v.perspective(ge,this._fov,this.width/this.height,se,Z),ge[8]=2*-p.x/this.width,ge[9]=2*p.y/this.height,v.scale(ge,ge,[1,-1,1]),v.translate(ge,ge,[0,0,-this.cameraToCenterDistance]),v.rotateX(ge,ge,this._pitch),v.rotateZ(ge,ge,this.angle),v.translate(ge,ge,[-B,-U,0]),this.mercatorMatrix=v.scale([],ge,[this.worldSize,this.worldSize,this.worldSize]),v.scale(ge,ge,[1,1,v.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=ge,this.invProjMatrix=v.invert([],this.projMatrix);var Re=this.width%2/2,Me=this.height%2/2,De=Math.cos(this.angle),Ve=Math.sin(this.angle),Ue=B-Math.round(B)+De*Re+Ve*Me,Qe=U-Math.round(U)+De*Me+Ve*Re,je=new Float64Array(ge);if(v.translate(je,je,[Ue>.5?Ue-1:Ue,Qe>.5?Qe-1:Qe,0]),this.alignedProjMatrix=je,ge=v.create(),v.scale(ge,ge,[this.width/2,-this.height/2,1]),v.translate(ge,ge,[1,-1,0]),this.labelPlaneMatrix=ge,ge=v.create(),v.scale(ge,ge,[1,-1,1]),v.translate(ge,ge,[-1,-1,0]),v.scale(ge,ge,[2/this.width,2/this.height,1]),this.glCoordMatrix=ge,this.pixelMatrix=v.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(ge=v.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=ge,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ti.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var p=this.pointCoordinate(new v.Point(0,0)),y=[p.x*this.worldSize,p.y*this.worldSize,0,1];return v.transformMat4(y,y,this.pixelMatrix)[3]/this.cameraToCenterDistance},ti.prototype.getCameraPoint=function(){var p=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new v.Point(0,p))},ti.prototype.getCameraQueryGeometry=function(p){var y=this.getCameraPoint();if(1===p.length)return[p[0],y];for(var g=y.x,w=y.y,T=y.x,B=y.y,U=0,Z=p;U<Z.length;U+=1){var se=Z[U];g=Math.min(g,se.x),w=Math.min(w,se.y),T=Math.max(T,se.x),B=Math.max(B,se.y)}return[new v.Point(g,w),new v.Point(T,w),new v.Point(T,B),new v.Point(g,B),new v.Point(g,w)]},Object.defineProperties(ti.prototype,Fr);var gu=function(p){var y,g,w,T;this._hashName=p&&encodeURIComponent(p),v.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(y=this._updateHashUnthrottled.bind(this),g=!1,w=null,T=function(){w=null,g&&(y(),w=setTimeout(T,300),g=!1)},function(){return g=!0,w||T(),w})};gu.prototype.addTo=function(p){return this._map=p,v.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},gu.prototype.remove=function(){return v.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},gu.prototype.getHashString=function(p){var y=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,w=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,w),B=Math.round(y.lng*T)/T,U=Math.round(y.lat*T)/T,Z=this._map.getBearing(),se=this._map.getPitch(),ge="";if(ge+=p?"/"+B+"/"+U+"/"+g:g+"/"+U+"/"+B,(Z||se)&&(ge+="/"+Math.round(10*Z)/10),se&&(ge+="/"+Math.round(se)),this._hashName){var Re=this._hashName,Me=!1,De=v.window.location.hash.slice(1).split("&").map(function(Ve){var Ue=Ve.split("=")[0];return Ue===Re?(Me=!0,Ue+"="+ge):Ve}).filter(function(Ve){return Ve});return Me||De.push(Re+"="+ge),"#"+De.join("&")}return"#"+ge},gu.prototype._getCurrentHash=function(){var p,y=this,g=v.window.location.hash.replace("#","");return this._hashName?(g.split("&").map(function(w){return w.split("=")}).forEach(function(w){w[0]===y._hashName&&(p=w)}),(p&&p[1]||"").split("/")):g.split("/")},gu.prototype._onHashChange=function(){var p=this._getCurrentHash();if(p.length>=3&&!p.some(function(g){return isNaN(g)})){var y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:y,pitch:+(p[4]||0)}),!0}return!1},gu.prototype._updateHashUnthrottled=function(){var p=v.window.location.href.replace(/(#.+)?$/,this.getHashString());try{v.window.history.replaceState(v.window.history.state,null,p)}catch{}};var Us={linearity:.3,easing:v.bezier(0,0,.3,1)},Ul=v.extend({deceleration:2500,maxSpeed:1400},Us),Gs=v.extend({deceleration:20,maxSpeed:1400},Us),fc=v.extend({deceleration:1e3,maxSpeed:360},Us),md=v.extend({deceleration:1e3,maxSpeed:90},Us),Gl=function(p){this._map=p,this.clear()};function Vl(p,y){(!p.duration||p.duration<y.duration)&&(p.duration=y.duration,p.easing=y.easing)}function bl(p,y,g){var w=g.maxSpeed,T=g.linearity,B=g.deceleration,U=v.clamp(p*T/(y/1e3),-w,w),Z=Math.abs(U)/(B*T);return{easing:g.easing,duration:1e3*Z,amount:U*(Z/2)}}Gl.prototype.clear=function(){this._inertiaBuffer=[]},Gl.prototype.record=function(p){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:v.browser.now(),settings:p})},Gl.prototype._drainInertiaBuffer=function(){for(var p=this._inertiaBuffer,y=v.browser.now();p.length>0&&y-p[0].time>160;)p.shift()},Gl.prototype._onMoveEnd=function(p){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var y={zoom:0,bearing:0,pitch:0,pan:new v.Point(0,0),pinchAround:void 0,around:void 0},g=0,w=this._inertiaBuffer;g<w.length;g+=1){var T=w[g].settings;y.zoom+=T.zoomDelta||0,y.bearing+=T.bearingDelta||0,y.pitch+=T.pitchDelta||0,T.panDelta&&y.pan._add(T.panDelta),T.around&&(y.around=T.around),T.pinchAround&&(y.pinchAround=T.pinchAround)}var B=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,U={};if(y.pan.mag()){var Z=bl(y.pan.mag(),B,v.extend({},Ul,p||{}));U.offset=y.pan.mult(Z.amount/y.pan.mag()),U.center=this._map.transform.center,Vl(U,Z)}if(y.zoom){var se=bl(y.zoom,B,Gs);U.zoom=this._map.transform.zoom+se.amount,Vl(U,se)}if(y.bearing){var ge=bl(y.bearing,B,fc);U.bearing=this._map.transform.bearing+v.clamp(ge.amount,-179,179),Vl(U,ge)}if(y.pitch){var Re=bl(y.pitch,B,md);U.pitch=this._map.transform.pitch+Re.amount,Vl(U,Re)}if(U.zoom||U.bearing){var Me=void 0===y.pinchAround?y.around:y.pinchAround;U.around=Me?this._map.unproject(Me):this._map.getCenter()}return this.clear(),v.extend(U,{noMoveStart:!0})}};var Ia=function(p){function y(w,T,B,U){void 0===U&&(U={});var Z=q.mousePos(T.getCanvasContainer(),B),se=T.unproject(Z);p.call(this,w,v.extend({point:Z,lngLat:se,originalEvent:B},U)),this._defaultPrevented=!1,this.target=T}p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y;var g={defaultPrevented:{configurable:!0}};return y.prototype.preventDefault=function(){this._defaultPrevented=!0},g.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(y.prototype,g),y}(v.Event),Za=function(p){function y(w,T,B){var U="touchend"===w?B.changedTouches:B.touches,Z=q.touchPos(T.getCanvasContainer(),U),se=Z.map(function(Me){return T.unproject(Me)}),ge=Z.reduce(function(Me,De,Ve,Ue){return Me.add(De.div(Ue.length))},new v.Point(0,0)),Re=T.unproject(ge);p.call(this,w,{points:Z,point:ge,lngLats:se,lngLat:Re,originalEvent:B}),this._defaultPrevented=!1}p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y;var g={defaultPrevented:{configurable:!0}};return y.prototype.preventDefault=function(){this._defaultPrevented=!0},g.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(y.prototype,g),y}(v.Event),Vc=function(p){function y(w,T,B){p.call(this,w,{originalEvent:B}),this._defaultPrevented=!1}p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y;var g={defaultPrevented:{configurable:!0}};return y.prototype.preventDefault=function(){this._defaultPrevented=!0},g.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(y.prototype,g),y}(v.Event),ja=function(p,y){this._map=p,this._clickTolerance=y.clickTolerance};ja.prototype.reset=function(){delete this._mousedownPos},ja.prototype.wheel=function(p){return this._firePreventable(new Vc(p.type,this._map,p))},ja.prototype.mousedown=function(p,y){return this._mousedownPos=y,this._firePreventable(new Ia(p.type,this._map,p))},ja.prototype.mouseup=function(p){this._map.fire(new Ia(p.type,this._map,p))},ja.prototype.click=function(p,y){this._mousedownPos&&this._mousedownPos.dist(y)>=this._clickTolerance||this._map.fire(new Ia(p.type,this._map,p))},ja.prototype.dblclick=function(p){return this._firePreventable(new Ia(p.type,this._map,p))},ja.prototype.mouseover=function(p){this._map.fire(new Ia(p.type,this._map,p))},ja.prototype.mouseout=function(p){this._map.fire(new Ia(p.type,this._map,p))},ja.prototype.touchstart=function(p){return this._firePreventable(new Za(p.type,this._map,p))},ja.prototype.touchmove=function(p){this._map.fire(new Za(p.type,this._map,p))},ja.prototype.touchend=function(p){this._map.fire(new Za(p.type,this._map,p))},ja.prototype.touchcancel=function(p){this._map.fire(new Za(p.type,this._map,p))},ja.prototype._firePreventable=function(p){if(this._map.fire(p),p.defaultPrevented)return{}},ja.prototype.isEnabled=function(){return!0},ja.prototype.isActive=function(){return!1},ja.prototype.enable=function(){},ja.prototype.disable=function(){};var As=function(p){this._map=p};As.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},As.prototype.mousemove=function(p){this._map.fire(new Ia(p.type,this._map,p))},As.prototype.mousedown=function(){this._delayContextMenu=!0},As.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ia("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},As.prototype.contextmenu=function(p){this._delayContextMenu?this._contextMenuEvent=p:this._map.fire(new Ia(p.type,this._map,p)),this._map.listens("contextmenu")&&p.preventDefault()},As.prototype.isEnabled=function(){return!0},As.prototype.isActive=function(){return!1},As.prototype.enable=function(){},As.prototype.disable=function(){};var _n=function(p,y){this._map=p,this._el=p.getCanvasContainer(),this._container=p.getContainer(),this._clickTolerance=y.clickTolerance||1};function df(p,y){for(var g={},w=0;w<p.length;w++)g[p[w].identifier]=y[w];return g}_n.prototype.isEnabled=function(){return!!this._enabled},_n.prototype.isActive=function(){return!!this._active},_n.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},_n.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},_n.prototype.mousedown=function(p,y){this.isEnabled()&&p.shiftKey&&0===p.button&&(q.disableDrag(),this._startPos=this._lastPos=y,this._active=!0)},_n.prototype.mousemoveWindow=function(p,y){if(this._active){var g=y;if(!(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)){var w=this._startPos;this._lastPos=g,this._box||(this._box=q.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",p));var T=Math.min(w.x,g.x),B=Math.max(w.x,g.x),U=Math.min(w.y,g.y),Z=Math.max(w.y,g.y);q.setTransform(this._box,"translate("+T+"px,"+U+"px)"),this._box.style.width=B-T+"px",this._box.style.height=Z-U+"px"}}},_n.prototype.mouseupWindow=function(p,y){var g=this;if(this._active&&0===p.button){var w=this._startPos,T=y;if(this.reset(),q.suppressClick(),w.x!==T.x||w.y!==T.y)return this._map.fire(new v.Event("boxzoomend",{originalEvent:p})),{cameraAnimation:function(B){return B.fitScreenCoordinates(w,T,g._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",p)}},_n.prototype.keydown=function(p){this._active&&27===p.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",p))},_n.prototype.reset=function(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(q.remove(this._box),this._box=null),q.enableDrag(),delete this._startPos,delete this._lastPos},_n.prototype._fireEvent=function(p,y){return this._map.fire(new v.Event(p,{originalEvent:y}))};var gd=function(p){this.reset(),this.numTouches=p.numTouches};gd.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},gd.prototype.touchstart=function(p,y,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=p.timeStamp),g.length===this.numTouches&&(this.centroid=function(w){for(var T=new v.Point(0,0),B=0,U=w;B<U.length;B+=1)T._add(U[B]);return T.div(w.length)}(y),this.touches=df(g,y)))},gd.prototype.touchmove=function(p,y,g){if(!this.aborted&&this.centroid){var w=df(g,y);for(var T in this.touches){var B=w[T];(!B||B.dist(this.touches[T])>30)&&(this.aborted=!0)}}},gd.prototype.touchend=function(p,y,g){if((!this.centroid||p.timeStamp-this.startTime>500)&&(this.aborted=!0),0===g.length){var w=!this.aborted&&this.centroid;if(this.reset(),w)return w}};var hc=function(p){this.singleTap=new gd(p),this.numTaps=p.numTaps,this.reset()};hc.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},hc.prototype.touchstart=function(p,y,g){this.singleTap.touchstart(p,y,g)},hc.prototype.touchmove=function(p,y,g){this.singleTap.touchmove(p,y,g)},hc.prototype.touchend=function(p,y,g){var w=this.singleTap.touchend(p,y,g);if(w){var T=p.timeStamp-this.lastTime<500,B=!this.lastTap||this.lastTap.dist(w)<30;if(T&&B||this.reset(),this.count++,this.lastTime=p.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}};var ha=function(){this._zoomIn=new hc({numTouches:1,numTaps:2}),this._zoomOut=new hc({numTouches:2,numTaps:1}),this.reset()};ha.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ha.prototype.touchstart=function(p,y,g){this._zoomIn.touchstart(p,y,g),this._zoomOut.touchstart(p,y,g)},ha.prototype.touchmove=function(p,y,g){this._zoomIn.touchmove(p,y,g),this._zoomOut.touchmove(p,y,g)},ha.prototype.touchend=function(p,y,g){var w=this,T=this._zoomIn.touchend(p,y,g),B=this._zoomOut.touchend(p,y,g);return T?(this._active=!0,p.preventDefault(),setTimeout(function(){return w.reset()},0),{cameraAnimation:function(U){return U.easeTo({duration:300,zoom:U.getZoom()+1,around:U.unproject(T)},{originalEvent:p})}}):B?(this._active=!0,p.preventDefault(),setTimeout(function(){return w.reset()},0),{cameraAnimation:function(U){return U.easeTo({duration:300,zoom:U.getZoom()-1,around:U.unproject(B)},{originalEvent:p})}}):void 0},ha.prototype.touchcancel=function(){this.reset()},ha.prototype.enable=function(){this._enabled=!0},ha.prototype.disable=function(){this._enabled=!1,this.reset()},ha.prototype.isEnabled=function(){return this._enabled},ha.prototype.isActive=function(){return this._active};var vd={0:1,2:2},ra=function(p){this.reset(),this._clickTolerance=p.clickTolerance||1};ra.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ra.prototype._correctButton=function(p,y){return!1},ra.prototype._move=function(p,y){return{}},ra.prototype.mousedown=function(p,y){if(!this._lastPoint){var g=q.mouseButton(p);this._correctButton(p,g)&&(this._lastPoint=y,this._eventButton=g)}},ra.prototype.mousemoveWindow=function(p,y){var w,B,g=this._lastPoint;if(g)if(p.preventDefault(),B=vd[this._eventButton],void 0===(w=p).buttons||(w.buttons&B)!==B)this.reset();else if(this._moved||!(y.dist(g)<this._clickTolerance))return this._moved=!0,this._lastPoint=y,this._move(g,y)},ra.prototype.mouseupWindow=function(p){this._lastPoint&&q.mouseButton(p)===this._eventButton&&(this._moved&&q.suppressClick(),this.reset())},ra.prototype.enable=function(){this._enabled=!0},ra.prototype.disable=function(){this._enabled=!1,this.reset()},ra.prototype.isEnabled=function(){return this._enabled},ra.prototype.isActive=function(){return this._active};var xn=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.mousedown=function(g,w){p.prototype.mousedown.call(this,g,w),this._lastPoint&&(this._active=!0)},y.prototype._correctButton=function(g,w){return 0===w&&!g.ctrlKey},y.prototype._move=function(g,w){return{around:w,panDelta:w.sub(g)}},y}(ra),ff=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype._correctButton=function(g,w){return 0===w&&g.ctrlKey||2===w},y.prototype._move=function(g,w){var T=.8*(w.x-g.x);if(T)return this._active=!0,{bearingDelta:T}},y.prototype.contextmenu=function(g){g.preventDefault()},y}(ra),hf=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype._correctButton=function(g,w){return 0===w&&g.ctrlKey||2===w},y.prototype._move=function(g,w){var T=-.5*(w.y-g.y);if(T)return this._active=!0,{pitchDelta:T}},y.prototype.contextmenu=function(g){g.preventDefault()},y}(ra),eu=function(p){this._minTouches=1,this._clickTolerance=p.clickTolerance||1,this.reset()};eu.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new v.Point(0,0)},eu.prototype.touchstart=function(p,y,g){return this._calculateTransform(p,y,g)},eu.prototype.touchmove=function(p,y,g){if(this._active&&!(g.length<this._minTouches))return p.preventDefault(),this._calculateTransform(p,y,g)},eu.prototype.touchend=function(p,y,g){this._calculateTransform(p,y,g),this._active&&g.length<this._minTouches&&this.reset()},eu.prototype.touchcancel=function(){this.reset()},eu.prototype._calculateTransform=function(p,y,g){g.length>0&&(this._active=!0);var w=df(g,y),T=new v.Point(0,0),B=new v.Point(0,0),U=0;for(var Z in w){var se=w[Z],ge=this._touches[Z];ge&&(T._add(se),B._add(se.sub(ge)),U++,w[Z]=se)}if(this._touches=w,!(U<this._minTouches)&&B.mag()){var Re=B.div(U);if(this._sum._add(Re),!(this._sum.mag()<this._clickTolerance))return{around:T.div(U),panDelta:Re}}},eu.prototype.enable=function(){this._enabled=!0},eu.prototype.disable=function(){this._enabled=!1,this.reset()},eu.prototype.isEnabled=function(){return this._enabled},eu.prototype.isActive=function(){return this._active};var fs=function(){this.reset()};function pf(p,y,g){for(var w=0;w<p.length;w++)if(p[w].identifier===g)return y[w]}function mf(p,y){return Math.log(p/y)/Math.LN2}fs.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},fs.prototype._start=function(p){},fs.prototype._move=function(p,y,g){return{}},fs.prototype.touchstart=function(p,y,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([y[0],y[1]]))},fs.prototype.touchmove=function(p,y,g){if(this._firstTwoTouches){p.preventDefault();var w=this._firstTwoTouches,T=w[1],B=pf(g,y,w[0]),U=pf(g,y,T);if(B&&U){var Z=this._aroundCenter?null:B.add(U).div(2);return this._move([B,U],Z,p)}}},fs.prototype.touchend=function(p,y,g){if(this._firstTwoTouches){var w=this._firstTwoTouches,T=w[1],B=pf(g,y,w[0]),U=pf(g,y,T);B&&U||(this._active&&q.suppressClick(),this.reset())}},fs.prototype.touchcancel=function(){this.reset()},fs.prototype.enable=function(p){this._enabled=!0,this._aroundCenter=!!p&&"center"===p.around},fs.prototype.disable=function(){this._enabled=!1,this.reset()},fs.prototype.isEnabled=function(){return this._enabled},fs.prototype.isActive=function(){return this._active};var xh=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.reset=function(){p.prototype.reset.call(this),delete this._distance,delete this._startDistance},y.prototype._start=function(g){this._startDistance=this._distance=g[0].dist(g[1])},y.prototype._move=function(g,w){var T=this._distance;if(this._distance=g[0].dist(g[1]),this._active||!(Math.abs(mf(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:mf(this._distance,T),pinchAround:w}},y}(fs);function vo(p,y){return 180*p.angleWith(y)/Math.PI}var tl=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.reset=function(){p.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},y.prototype._start=function(g){this._startVector=this._vector=g[0].sub(g[1]),this._minDiameter=g[0].dist(g[1])},y.prototype._move=function(g,w){var T=this._vector;if(this._vector=g[0].sub(g[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:vo(this._vector,T),pinchAround:w}},y.prototype._isBelowThreshold=function(g){this._minDiameter=Math.min(this._minDiameter,g.mag());var w=25/(Math.PI*this._minDiameter)*360,T=vo(g,this._startVector);return Math.abs(T)<w},y}(fs);function gf(p){return Math.abs(p.y)>Math.abs(p.x)}var yd=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.reset=function(){p.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},y.prototype._start=function(g){this._lastPoints=g,gf(g[0].sub(g[1]))&&(this._valid=!1)},y.prototype._move=function(g,w,T){var B=g[0].sub(this._lastPoints[0]),U=g[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(B,U,T.timeStamp),this._valid)return this._lastPoints=g,this._active=!0,{pitchDelta:(B.y+U.y)/2*-.5}},y.prototype.gestureBeginsVertically=function(g,w,T){if(void 0!==this._valid)return this._valid;var B=g.mag()>=2,U=w.mag()>=2;if(B||U){if(!B||!U)return void 0===this._firstMove&&(this._firstMove=T),T-this._firstMove<100&&void 0;var Z=g.y>0==w.y>0;return gf(g)&&gf(w)&&Z}},y}(fs),Eh={panStep:100,bearingStep:15,pitchStep:10},Ru=function(){var p=Eh;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1};function vf(p){return p*(2-p)}Ru.prototype.reset=function(){this._active=!1},Ru.prototype.keydown=function(p){var y=this;if(!(p.altKey||p.ctrlKey||p.metaKey)){var g=0,w=0,T=0,B=0,U=0;switch(p.keyCode){case 61:case 107:case 171:case 187:g=1;break;case 189:case 109:case 173:g=-1;break;case 37:p.shiftKey?w=-1:(p.preventDefault(),B=-1);break;case 39:p.shiftKey?w=1:(p.preventDefault(),B=1);break;case 38:p.shiftKey?T=1:(p.preventDefault(),U=-1);break;case 40:p.shiftKey?T=-1:(p.preventDefault(),U=1);break;default:return}return this._rotationDisabled&&(w=0,T=0),{cameraAnimation:function(Z){var se=Z.getZoom();Z.easeTo({duration:300,easeId:"keyboardHandler",easing:vf,zoom:g?Math.round(se)+g*(p.shiftKey?2:1):se,bearing:Z.getBearing()+w*y._bearingStep,pitch:Z.getPitch()+T*y._pitchStep,offset:[-B*y._panStep,-U*y._panStep],center:Z.getCenter()},{originalEvent:p})}}}},Ru.prototype.enable=function(){this._enabled=!0},Ru.prototype.disable=function(){this._enabled=!1,this.reset()},Ru.prototype.isEnabled=function(){return this._enabled},Ru.prototype.isActive=function(){return this._active},Ru.prototype.disableRotation=function(){this._rotationDisabled=!0},Ru.prototype.enableRotation=function(){this._rotationDisabled=!1};var yo=function(p,y){this._map=p,this._el=p.getCanvasContainer(),this._handler=y,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,v.bindAll(["_onTimeout"],this)};yo.prototype.setZoomRate=function(p){this._defaultZoomRate=p},yo.prototype.setWheelZoomRate=function(p){this._wheelZoomRate=p},yo.prototype.isEnabled=function(){return!!this._enabled},yo.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},yo.prototype.isZooming=function(){return!!this._zooming},yo.prototype.enable=function(p){this.isEnabled()||(this._enabled=!0,this._aroundCenter=p&&"center"===p.around)},yo.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},yo.prototype.wheel=function(p){if(this.isEnabled()){var y=p.deltaMode===v.window.WheelEvent.DOM_DELTA_LINE?40*p.deltaY:p.deltaY,g=v.browser.now(),w=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,0!==y&&y%4.000244140625==0?this._type="wheel":0!==y&&Math.abs(y)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=y,this._timeout=setTimeout(this._onTimeout,40,p)):this._type||(this._type=Math.abs(w*y)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,y+=this._lastValue)),p.shiftKey&&y&&(y/=4),this._type&&(this._lastWheelEvent=p,this._delta-=y,this._active||this._start(p)),p.preventDefault()}},yo.prototype._onTimeout=function(p){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},yo.prototype._start=function(p){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var y=q.mousePos(this._el,p);this._around=v.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(y)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},yo.prototype.renderFrame=function(){var p=this;if(this._frameId&&(this._frameId=null,this.isActive())){var y=this._map.transform;if(0!==this._delta){var g="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,w=2/(1+Math.exp(-Math.abs(this._delta*g)));this._delta<0&&0!==w&&(w=1/w);var T="number"==typeof this._targetZoom?y.zoomScale(this._targetZoom):y.scale;this._targetZoom=Math.min(y.maxZoom,Math.max(y.minZoom,y.scaleZoom(T*w))),"wheel"===this._type&&(this._startZoom=y.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var B,U="number"==typeof this._targetZoom?this._targetZoom:y.zoom,Z=this._startZoom,se=this._easing,ge=!1;if("wheel"===this._type&&Z&&se){var Re=Math.min((v.browser.now()-this._lastWheelEventTime)/200,1),Me=se(Re);B=v.number(Z,U,Me),Re<1?this._frameId||(this._frameId=!0):ge=!0}else B=U,ge=!0;return this._active=!0,ge&&(this._active=!1,this._finishTimeout=setTimeout(function(){p._zooming=!1,p._handler._triggerRenderFrame(),delete p._targetZoom,delete p._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ge,zoomDelta:B-y.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},yo.prototype._smoothOutEasing=function(p){var y=v.ease;if(this._prevEase){var g=this._prevEase,w=(v.browser.now()-g.start)/g.duration,T=g.easing(w+.01)-g.easing(w),B=.27/Math.sqrt(T*T+1e-4)*.01,U=Math.sqrt(.0729-B*B);y=v.bezier(B,U,.25,1)}return this._prevEase={start:v.browser.now(),duration:p,easing:y},y},yo.prototype.reset=function(){this._active=!1};var Ei=function(p,y){this._clickZoom=p,this._tapZoom=y};Ei.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ei.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ei.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ei.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Du=function(){this.reset()};Du.prototype.reset=function(){this._active=!1},Du.prototype.dblclick=function(p,y){return p.preventDefault(),{cameraAnimation:function(g){g.easeTo({duration:300,zoom:g.getZoom()+(p.shiftKey?-1:1),around:g.unproject(y)},{originalEvent:p})}}},Du.prototype.enable=function(){this._enabled=!0},Du.prototype.disable=function(){this._enabled=!1,this.reset()},Du.prototype.isEnabled=function(){return this._enabled},Du.prototype.isActive=function(){return this._active};var Ai=function(){this._tap=new hc({numTouches:1,numTaps:1}),this.reset()};Ai.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Ai.prototype.touchstart=function(p,y,g){this._swipePoint||(this._tapTime&&p.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=y[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(p,y,g))},Ai.prototype.touchmove=function(p,y,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;var w=y[0],T=w.y-this._swipePoint.y;return this._swipePoint=w,p.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(p,y,g)},Ai.prototype.touchend=function(p,y,g){this._tapTime?this._swipePoint&&0===g.length&&this.reset():this._tap.touchend(p,y,g)&&(this._tapTime=p.timeStamp)},Ai.prototype.touchcancel=function(){this.reset()},Ai.prototype.enable=function(){this._enabled=!0},Ai.prototype.disable=function(){this._enabled=!1,this.reset()},Ai.prototype.isEnabled=function(){return this._enabled},Ai.prototype.isActive=function(){return this._active};var Vs=function(p,y,g){this._el=p,this._mousePan=y,this._touchPan=g};Vs.prototype.enable=function(p){this._inertiaOptions=p||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")},Vs.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")},Vs.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Vs.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var pc=function(p,y,g){this._pitchWithRotate=p.pitchWithRotate,this._mouseRotate=y,this._mousePitch=g};pc.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},pc.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},pc.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},pc.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ou=function(p,y,g,w){this._el=p,this._touchZoom=y,this._touchRotate=g,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0};Ou.prototype.enable=function(p){this._touchZoom.enable(p),this._rotationDisabled||this._touchRotate.enable(p),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")},Ou.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")},Ou.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ou.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ou.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ou.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var ql=function(p){return p.zoom||p.drag||p.pitch||p.rotate},ji=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y}(v.Event);function mc(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}var bn=function(p,y){this._map=p,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Gl(p),this._bearingSnap=y.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(y),v.bindAll(["handleEvent","handleWindowEvent"],this);var g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[v.window.document,"mousemove",{capture:!0}],[v.window.document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[v.window,"blur",void 0]];for(var w=0,T=this._listeners;w<T.length;w+=1){var B=T[w],U=B[0];q.addEventListener(U,B[1],U===v.window.document?this.handleWindowEvent:this.handleEvent,B[2])}};bn.prototype.destroy=function(){for(var p=0,y=this._listeners;p<y.length;p+=1){var g=y[p],w=g[0];q.removeEventListener(w,g[1],w===v.window.document?this.handleWindowEvent:this.handleEvent,g[2])}},bn.prototype._addDefaultHandlers=function(p){var y=this._map,g=y.getCanvasContainer();this._add("mapEvent",new ja(y,p));var w=y.boxZoom=new _n(y,p);this._add("boxZoom",w);var T=new ha,B=new Du;y.doubleClickZoom=new Ei(B,T),this._add("tapZoom",T),this._add("clickZoom",B);var U=new Ai;this._add("tapDragZoom",U);var Z=y.touchPitch=new yd;this._add("touchPitch",Z);var se=new ff(p),ge=new hf(p);y.dragRotate=new pc(p,se,ge),this._add("mouseRotate",se,["mousePitch"]),this._add("mousePitch",ge,["mouseRotate"]);var Re=new xn(p),Me=new eu(p);y.dragPan=new Vs(g,Re,Me),this._add("mousePan",Re),this._add("touchPan",Me,["touchZoom","touchRotate"]);var De=new tl,Ve=new xh;y.touchZoomRotate=new Ou(g,Ve,De,U),this._add("touchRotate",De,["touchPan","touchZoom"]),this._add("touchZoom",Ve,["touchPan","touchRotate"]);var Ue=y.scrollZoom=new yo(y,this);this._add("scrollZoom",Ue,["mousePan"]);var Qe=y.keyboard=new Ru;this._add("keyboard",Qe),this._add("blockableMapEvent",new As(y));for(var je=0,Ze=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];je<Ze.length;je+=1){var at=Ze[je];p.interactive&&p[at]&&y[at].enable(p[at])}},bn.prototype._add=function(p,y,g){this._handlers.push({handlerName:p,handler:y,allowed:g}),this._handlersById[p]=y},bn.prototype.stop=function(p){if(!this._updatingCamera){for(var y=0,g=this._handlers;y<g.length;y+=1)g[y].handler.reset();this._inertia.clear(),this._fireEvents({},{},p),this._changes=[]}},bn.prototype.isActive=function(){for(var p=0,y=this._handlers;p<y.length;p+=1)if(y[p].handler.isActive())return!0;return!1},bn.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},bn.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},bn.prototype.isMoving=function(){return Boolean(ql(this._eventsInProgress))||this.isZooming()},bn.prototype._blockedByActive=function(p,y,g){for(var w in p)if(w!==g&&(!y||y.indexOf(w)<0))return!0;return!1},bn.prototype.handleWindowEvent=function(p){this.handleEvent(p,p.type+"Window")},bn.prototype._getMapTouches=function(p){for(var y=[],g=0,w=p;g<w.length;g+=1){var T=w[g];this._el.contains(T.target)&&y.push(T)}return y},bn.prototype.handleEvent=function(p,y){if("blur"!==p.type){this._updatingCamera=!0;for(var g="renderFrame"===p.type?void 0:p,w={needsRenderFrame:!1},T={},B={},U=p.touches?this._getMapTouches(p.touches):void 0,Z=U?q.touchPos(this._el,U):q.mousePos(this._el,p),se=0,ge=this._handlers;se<ge.length;se+=1){var Re=ge[se],Me=Re.handlerName,De=Re.handler,Ve=Re.allowed;if(De.isEnabled()){var Ue=void 0;this._blockedByActive(B,Ve,Me)?De.reset():De[y||p.type]&&(Ue=De[y||p.type](p,Z,U),this.mergeHandlerResult(w,T,Ue,Me,g),Ue&&Ue.needsRenderFrame&&this._triggerRenderFrame()),(Ue||De.isActive())&&(B[Me]=De)}}var Qe={};for(var je in this._previousActiveHandlers)B[je]||(Qe[je]=g);this._previousActiveHandlers=B,(Object.keys(Qe).length||mc(w))&&(this._changes.push([w,T,Qe]),this._triggerRenderFrame()),(Object.keys(B).length||mc(w))&&this._map._stop(!0),this._updatingCamera=!1;var Ze=w.cameraAnimation;Ze&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ze(this._map))}else this.stop(!0)},bn.prototype.mergeHandlerResult=function(p,y,g,w,T){if(g){v.extend(p,g);var B={handlerName:w,originalEvent:g.originalEvent||T};void 0!==g.zoomDelta&&(y.zoom=B),void 0!==g.panDelta&&(y.drag=B),void 0!==g.pitchDelta&&(y.pitch=B),void 0!==g.bearingDelta&&(y.rotate=B)}},bn.prototype._applyChanges=function(){for(var p={},y={},g={},w=0,T=this._changes;w<T.length;w+=1){var B=T[w],U=B[0],Z=B[1],se=B[2];U.panDelta&&(p.panDelta=(p.panDelta||new v.Point(0,0))._add(U.panDelta)),U.zoomDelta&&(p.zoomDelta=(p.zoomDelta||0)+U.zoomDelta),U.bearingDelta&&(p.bearingDelta=(p.bearingDelta||0)+U.bearingDelta),U.pitchDelta&&(p.pitchDelta=(p.pitchDelta||0)+U.pitchDelta),void 0!==U.around&&(p.around=U.around),void 0!==U.pinchAround&&(p.pinchAround=U.pinchAround),U.noInertia&&(p.noInertia=U.noInertia),v.extend(y,Z),v.extend(g,se)}this._updateMapTransform(p,y,g),this._changes=[]},bn.prototype._updateMapTransform=function(p,y,g){var w=this._map,T=w.transform;if(!mc(p))return this._fireEvents(y,g,!0);var B=p.panDelta,U=p.zoomDelta,Z=p.bearingDelta,se=p.pitchDelta,ge=p.around,Re=p.pinchAround;void 0!==Re&&(ge=Re),w._stop(!0),ge=ge||w.transform.centerPoint;var Me=T.pointLocation(B?ge.sub(B):ge);Z&&(T.bearing+=Z),se&&(T.pitch+=se),U&&(T.zoom+=U),T.setLocationAtPoint(Me,ge),this._map._update(),p.noInertia||this._inertia.record(p),this._fireEvents(y,g,!0)},bn.prototype._fireEvents=function(p,y,g){var w=this,T=ql(this._eventsInProgress),B=ql(p),U={};for(var Z in p)this._eventsInProgress[Z]||(U[Z+"start"]=p[Z].originalEvent),this._eventsInProgress[Z]=p[Z];for(var se in!T&&B&&this._fireEvent("movestart",B.originalEvent),U)this._fireEvent(se,U[se]);for(var ge in B&&this._fireEvent("move",B.originalEvent),p)this._fireEvent(ge,p[ge].originalEvent);var Re,Me={};for(var De in this._eventsInProgress){var Ve=this._eventsInProgress[De],Ue=Ve.handlerName,Qe=Ve.originalEvent;this._handlersById[Ue].isActive()||(delete this._eventsInProgress[De],Me[De+"end"]=Re=y[Ue]||Qe)}for(var je in Me)this._fireEvent(je,Me[je]);var Ze=ql(this._eventsInProgress);if(g&&(T||B)&&!Ze){this._updatingCamera=!0;var at=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),pt=function(Pt){return 0!==Pt&&-w._bearingSnap<Pt&&Pt<w._bearingSnap};at?(pt(at.bearing||this._map.getBearing())&&(at.bearing=0),this._map.easeTo(at,{originalEvent:Re})):(this._map.fire(new v.Event("moveend",{originalEvent:Re})),pt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},bn.prototype._fireEvent=function(p,y){this._map.fire(new v.Event(p,y?{originalEvent:y}:{}))},bn.prototype._requestFrame=function(){var p=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(y){delete p._frameId,p.handleEvent(new ji("renderFrame",{timeStamp:y})),p._applyChanges()})},bn.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var Zn=function(p){function y(g,w){p.call(this),this._moving=!1,this._zooming=!1,this.transform=g,this._bearingSnap=w.bearingSnap,v.bindAll(["_renderFrameCallback"],this)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getCenter=function(){return new v.LngLat(this.transform.center.lng,this.transform.center.lat)},y.prototype.setCenter=function(g,w){return this.jumpTo({center:g},w)},y.prototype.panBy=function(g,w,T){return g=v.Point.convert(g).mult(-1),this.panTo(this.transform.center,v.extend({offset:g},w),T)},y.prototype.panTo=function(g,w,T){return this.easeTo(v.extend({center:g},w),T)},y.prototype.getZoom=function(){return this.transform.zoom},y.prototype.setZoom=function(g,w){return this.jumpTo({zoom:g},w),this},y.prototype.zoomTo=function(g,w,T){return this.easeTo(v.extend({zoom:g},w),T)},y.prototype.zoomIn=function(g,w){return this.zoomTo(this.getZoom()+1,g,w),this},y.prototype.zoomOut=function(g,w){return this.zoomTo(this.getZoom()-1,g,w),this},y.prototype.getBearing=function(){return this.transform.bearing},y.prototype.setBearing=function(g,w){return this.jumpTo({bearing:g},w),this},y.prototype.getPadding=function(){return this.transform.padding},y.prototype.setPadding=function(g,w){return this.jumpTo({padding:g},w),this},y.prototype.rotateTo=function(g,w,T){return this.easeTo(v.extend({bearing:g},w),T)},y.prototype.resetNorth=function(g,w){return this.rotateTo(0,v.extend({duration:1e3},g),w),this},y.prototype.resetNorthPitch=function(g,w){return this.easeTo(v.extend({bearing:0,pitch:0,duration:1e3},g),w),this},y.prototype.snapToNorth=function(g,w){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(g,w):this},y.prototype.getPitch=function(){return this.transform.pitch},y.prototype.setPitch=function(g,w){return this.jumpTo({pitch:g},w),this},y.prototype.cameraForBounds=function(g,w){g=v.LngLatBounds.convert(g);var T=w&&w.bearing||0;return this._cameraForBoxAndBearing(g.getNorthWest(),g.getSouthEast(),T,w)},y.prototype._cameraForBoxAndBearing=function(g,w,T,B){var U={top:0,bottom:0,right:0,left:0};if("number"==typeof(B=v.extend({padding:U,offset:[0,0],maxZoom:this.transform.maxZoom},B)).padding){var Z=B.padding;B.padding={top:Z,bottom:Z,right:Z,left:Z}}B.padding=v.extend(U,B.padding);var se=this.transform,ge=se.padding,Re=se.project(v.LngLat.convert(g)),Me=se.project(v.LngLat.convert(w)),De=Re.rotate(-T*Math.PI/180),Ve=Me.rotate(-T*Math.PI/180),Ue=new v.Point(Math.max(De.x,Ve.x),Math.max(De.y,Ve.y)),Qe=new v.Point(Math.min(De.x,Ve.x),Math.min(De.y,Ve.y)),je=Ue.sub(Qe),Ze=(se.width-(ge.left+ge.right+B.padding.left+B.padding.right))/je.x,at=(se.height-(ge.top+ge.bottom+B.padding.top+B.padding.bottom))/je.y;if(!(at<0||Ze<0)){var pt=Math.min(se.scaleZoom(se.scale*Math.min(Ze,at)),B.maxZoom),Pt="number"==typeof B.offset.x?new v.Point(B.offset.x,B.offset.y):v.Point.convert(B.offset),Tt=new v.Point((B.padding.left-B.padding.right)/2,(B.padding.top-B.padding.bottom)/2).rotate(T*Math.PI/180),Dt=Pt.add(Tt).mult(se.scale/se.zoomScale(pt));return{center:se.unproject(Re.add(Me).div(2).sub(Dt)),zoom:pt,bearing:T}}v.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},y.prototype.fitBounds=function(g,w,T){return this._fitInternal(this.cameraForBounds(g,w),w,T)},y.prototype.fitScreenCoordinates=function(g,w,T,B,U){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(v.Point.convert(g)),this.transform.pointLocation(v.Point.convert(w)),T,B),B,U)},y.prototype._fitInternal=function(g,w,T){return g?(delete(w=v.extend(g,w)).padding,w.linear?this.easeTo(w,T):this.flyTo(w,T)):this},y.prototype.jumpTo=function(g,w){this.stop();var T=this.transform,B=!1,U=!1,Z=!1;return"zoom"in g&&T.zoom!==+g.zoom&&(B=!0,T.zoom=+g.zoom),void 0!==g.center&&(T.center=v.LngLat.convert(g.center)),"bearing"in g&&T.bearing!==+g.bearing&&(U=!0,T.bearing=+g.bearing),"pitch"in g&&T.pitch!==+g.pitch&&(Z=!0,T.pitch=+g.pitch),null==g.padding||T.isPaddingEqual(g.padding)||(T.padding=g.padding),this.fire(new v.Event("movestart",w)).fire(new v.Event("move",w)),B&&this.fire(new v.Event("zoomstart",w)).fire(new v.Event("zoom",w)).fire(new v.Event("zoomend",w)),U&&this.fire(new v.Event("rotatestart",w)).fire(new v.Event("rotate",w)).fire(new v.Event("rotateend",w)),Z&&this.fire(new v.Event("pitchstart",w)).fire(new v.Event("pitch",w)).fire(new v.Event("pitchend",w)),this.fire(new v.Event("moveend",w))},y.prototype.easeTo=function(g,w){var T=this;this._stop(!1,g.easeId),(!1===(g=v.extend({offset:[0,0],duration:500,easing:v.ease},g)).animate||!g.essential&&v.browser.prefersReducedMotion)&&(g.duration=0);var B=this.transform,U=this.getZoom(),Z=this.getBearing(),se=this.getPitch(),ge=this.getPadding(),Re="zoom"in g?+g.zoom:U,Me="bearing"in g?this._normalizeBearing(g.bearing,Z):Z,De="pitch"in g?+g.pitch:se,Ve="padding"in g?g.padding:B.padding,Ue=v.Point.convert(g.offset),Qe=B.centerPoint.add(Ue),je=B.pointLocation(Qe),Ze=v.LngLat.convert(g.center||je);this._normalizeCenter(Ze);var at,pt,Pt=B.project(je),Tt=B.project(Ze).sub(Pt),Dt=B.zoomScale(Re-U);g.around&&(at=v.LngLat.convert(g.around),pt=B.locationPoint(at));var Ft={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Re!==U,this._rotating=this._rotating||Z!==Me,this._pitching=this._pitching||De!==se,this._padding=!B.isPaddingEqual(Ve),this._easeId=g.easeId,this._prepareEase(w,g.noMoveStart,Ft),this._ease(function(rn){if(T._zooming&&(B.zoom=v.number(U,Re,rn)),T._rotating&&(B.bearing=v.number(Z,Me,rn)),T._pitching&&(B.pitch=v.number(se,De,rn)),T._padding&&(B.interpolatePadding(ge,Ve,rn),Qe=B.centerPoint.add(Ue)),at)B.setLocationAtPoint(at,pt);else{var Yt=B.zoomScale(B.zoom-U),on=Re>U?Math.min(2,Dt):Math.max(.5,Dt),Ln=Math.pow(on,1-rn),yn=B.unproject(Pt.add(Tt.mult(rn*Ln)).mult(Yt));B.setLocationAtPoint(B.renderWorldCopies?yn.wrap():yn,Qe)}T._fireMoveEvents(w)},function(rn){T._afterEase(w,rn)},g),this},y.prototype._prepareEase=function(g,w,T){void 0===T&&(T={}),this._moving=!0,w||T.moving||this.fire(new v.Event("movestart",g)),this._zooming&&!T.zooming&&this.fire(new v.Event("zoomstart",g)),this._rotating&&!T.rotating&&this.fire(new v.Event("rotatestart",g)),this._pitching&&!T.pitching&&this.fire(new v.Event("pitchstart",g))},y.prototype._fireMoveEvents=function(g){this.fire(new v.Event("move",g)),this._zooming&&this.fire(new v.Event("zoom",g)),this._rotating&&this.fire(new v.Event("rotate",g)),this._pitching&&this.fire(new v.Event("pitch",g))},y.prototype._afterEase=function(g,w){if(!this._easeId||!w||this._easeId!==w){delete this._easeId;var T=this._zooming,B=this._rotating,U=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,T&&this.fire(new v.Event("zoomend",g)),B&&this.fire(new v.Event("rotateend",g)),U&&this.fire(new v.Event("pitchend",g)),this.fire(new v.Event("moveend",g))}},y.prototype.flyTo=function(g,w){var T=this;if(!g.essential&&v.browser.prefersReducedMotion){var B=v.pick(g,["center","zoom","bearing","pitch","around"]);return this.jumpTo(B,w)}this.stop(),g=v.extend({offset:[0,0],speed:1.2,curve:1.42,easing:v.ease},g);var U=this.transform,Z=this.getZoom(),se=this.getBearing(),ge=this.getPitch(),Re=this.getPadding(),Me="zoom"in g?v.clamp(+g.zoom,U.minZoom,U.maxZoom):Z,De="bearing"in g?this._normalizeBearing(g.bearing,se):se,Ve="pitch"in g?+g.pitch:ge,Ue="padding"in g?g.padding:U.padding,Qe=U.zoomScale(Me-Z),je=v.Point.convert(g.offset),Ze=U.centerPoint.add(je),at=U.pointLocation(Ze),pt=v.LngLat.convert(g.center||at);this._normalizeCenter(pt);var Pt=U.project(at),Tt=U.project(pt).sub(Pt),Dt=g.curve,Ft=Math.max(U.width,U.height),rn=Ft/Qe,Yt=Tt.mag();if("minZoom"in g){var on=v.clamp(Math.min(g.minZoom,Z,Me),U.minZoom,U.maxZoom),Ln=Ft/U.zoomScale(on-Z);Dt=Math.sqrt(Ln/Yt*2)}var yn=Dt*Dt;function qn(tr){var Kn=(rn*rn-Ft*Ft+(tr?-1:1)*yn*yn*Yt*Yt)/(2*(tr?rn:Ft)*yn*Yt);return Math.log(Math.sqrt(Kn*Kn+1)-Kn)}function li(tr){return(Math.exp(tr)-Math.exp(-tr))/2}function En(tr){return(Math.exp(tr)+Math.exp(-tr))/2}var gr=qn(0),zr=function(tr){return En(gr)/En(gr+Dt*tr)},vr=function(tr){return Ft*((En(gr)*(li(Kn=gr+Dt*tr)/En(Kn))-li(gr))/yn)/Yt;var Kn},sr=(qn(1)-gr)/Dt;if(Math.abs(Yt)<1e-6||!isFinite(sr)){if(Math.abs(Ft-rn)<1e-6)return this.easeTo(g,w);var or=rn<Ft?-1:1;sr=Math.abs(Math.log(rn/Ft))/Dt,vr=function(){return 0},zr=function(tr){return Math.exp(or*Dt*tr)}}return g.duration="duration"in g?+g.duration:1e3*sr/("screenSpeed"in g?+g.screenSpeed/Dt:+g.speed),g.maxDuration&&g.duration>g.maxDuration&&(g.duration=0),this._zooming=!0,this._rotating=se!==De,this._pitching=Ve!==ge,this._padding=!U.isPaddingEqual(Ue),this._prepareEase(w,!1),this._ease(function(tr){var Kn=tr*sr,Ui=1/zr(Kn);U.zoom=1===tr?Me:Z+U.scaleZoom(Ui),T._rotating&&(U.bearing=v.number(se,De,tr)),T._pitching&&(U.pitch=v.number(ge,Ve,tr)),T._padding&&(U.interpolatePadding(Re,Ue,tr),Ze=U.centerPoint.add(je));var Lo=1===tr?pt:U.unproject(Pt.add(Tt.mult(vr(Kn))).mult(Ui));U.setLocationAtPoint(U.renderWorldCopies?Lo.wrap():Lo,Ze),T._fireMoveEvents(w)},function(){return T._afterEase(w)},g),this},y.prototype.isEasing=function(){return!!this._easeFrameId},y.prototype.stop=function(){return this._stop()},y.prototype._stop=function(g,w){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var T=this._onEaseEnd;delete this._onEaseEnd,T.call(this,w)}if(!g){var B=this.handlers;B&&B.stop(!1)}return this},y.prototype._ease=function(g,w,T){!1===T.animate||0===T.duration?(g(1),w()):(this._easeStart=v.browser.now(),this._easeOptions=T,this._onEaseFrame=g,this._onEaseEnd=w,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},y.prototype._renderFrameCallback=function(){var g=Math.min((v.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(g)),g<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},y.prototype._normalizeBearing=function(g,w){g=v.wrap(g,-180,180);var T=Math.abs(g-w);return Math.abs(g-360-w)<T&&(g-=360),Math.abs(g+360-w)<T&&(g+=360),g},y.prototype._normalizeCenter=function(g){var w=this.transform;if(w.renderWorldCopies&&!w.lngRange){var T=g.lng-w.center.lng;g.lng+=T>180?-360:T<-180?360:0}},y}(v.Evented),So=function(p){void 0===p&&(p={}),this.options=p,v.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};So.prototype.getDefaultPosition=function(){return"bottom-right"},So.prototype.onAdd=function(p){var y=this.options&&this.options.compact;return this._map=p,this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=q.create("button","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.type="button",this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=q.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),y&&this._container.classList.add("maplibregl-compact","mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===y&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},So.prototype.onRemove=function(){q.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},So.prototype._setElementTitle=function(p,y){var g=this._map._getUIString("AttributionControl."+y);p.title=g,p.setAttribute("aria-label",g)},So.prototype._toggleAttribution=function(){this._container.classList.contains("maplibregl-compact-show")||this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},So.prototype._updateEditLink=function(){var p=this._editLink;p||(p=this._editLink=this._container.querySelector(".mapbox-improve-map"));var y=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||v.config.ACCESS_TOKEN}];if(p){var g=y.reduce(function(w,T,B){return T.value&&(w+=T.key+"="+T.value+(B<y.length-1?"&":"")),w},"?");p.href=v.config.FEEDBACK_URL+"/"+g+(this._map._hash?this._map._hash.getHashString(!0):""),p.rel="noopener nofollow",this._setElementTitle(p,"MapFeedback")}},So.prototype._updateData=function(p){!p||"metadata"!==p.sourceDataType&&"visibility"!==p.sourceDataType&&"style"!==p.dataType||(this._updateAttributions(),this._updateEditLink())},So.prototype._updateAttributions=function(){if(this._map.style){var p=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?p=p.concat(this.options.customAttribution.map(function(Z){return"string"!=typeof Z?"":Z})):"string"==typeof this.options.customAttribution&&p.push(this.options.customAttribution)),this._map.style.stylesheet){var y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}var g=this._map.style.sourceCaches;for(var w in g){var T=g[w];if(T.used){var B=T.getSource();B.attribution&&p.indexOf(B.attribution)<0&&p.push(B.attribution)}}p.sort(function(Z,se){return Z.length-se.length});var U=(p=p.filter(function(Z,se){for(var ge=se+1;ge<p.length;ge++)if(p[ge].indexOf(Z)>=0)return!1;return!0})).join(" | ");U!==this._attribHTML&&(this._attribHTML=U,p.length?(this._innerContainer.innerHTML=U,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._editLink=null)}},So.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("maplibregl-compact","mapboxgl-compact"):this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show")};var vu=function(){v.bindAll(["_updateLogo"],this),v.bindAll(["_updateCompact"],this)};vu.prototype.onAdd=function(p){this._map=p,this._container=q.create("div","maplibregl-ctrl mapboxgl-ctrl");var y=q.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return y.target="_blank",y.rel="noopener nofollow",y.href="https://maplibre.org/",y.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),y.setAttribute("rel","noopener nofollow"),this._container.appendChild(y),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},vu.prototype.onRemove=function(){q.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},vu.prototype.getDefaultPosition=function(){return"bottom-left"},vu.prototype._updateLogo=function(p){p&&"metadata"!==p.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},vu.prototype._logoRequired=function(){if(this._map.style){var p=this._map.style.sourceCaches;for(var y in p)if(p[y].getSource().mapbox_logo)return!0;return!1}},vu.prototype._updateCompact=function(){var p=this._container.children;if(p.length){var y=p[0];this._map.getCanvasContainer().offsetWidth<250?y.classList.add("maplibregl-compact","mapboxgl-compact"):y.classList.remove("maplibregl-compact","mapboxgl-compact")}};var Mu=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Mu.prototype.add=function(p){var y=++this._id;return this._queue.push({callback:p,id:y,cancelled:!1}),y},Mu.prototype.remove=function(p){for(var y=this._currentlyRunning,g=0,w=y?this._queue.concat(y):this._queue;g<w.length;g+=1){var T=w[g];if(T.id===p)return void(T.cancelled=!0)}},Mu.prototype.run=function(p){void 0===p&&(p=0);var y=this._currentlyRunning=this._queue;this._queue=[];for(var g=0,w=y;g<w.length;g+=1){var T=w[g];if(!T.cancelled&&(T.callback(p),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Mu.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Pa={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ro=v.window.HTMLImageElement,zp=v.window.HTMLElement,ku=v.window.ImageBitmap,ro={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},_o=function(p){function y(w){var T=this;if(null!=(w=v.extend({},ro,w)).minZoom&&null!=w.maxZoom&&w.minZoom>w.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=w.minPitch&&null!=w.maxPitch&&w.minPitch>w.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=w.minPitch&&w.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=w.maxPitch&&w.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var B=new ti(w.minZoom,w.maxZoom,w.minPitch,w.maxPitch,w.renderWorldCopies);if(p.call(this,B,w),this._interactive=w.interactive,this._maxTileCacheSize=w.maxTileCacheSize,this._failIfMajorPerformanceCaveat=w.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=w.preserveDrawingBuffer,this._antialias=w.antialias,this._trackResize=w.trackResize,this._bearingSnap=w.bearingSnap,this._refreshExpiredTiles=w.refreshExpiredTiles,this._fadeDuration=w.fadeDuration,this._crossSourceCollisions=w.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=w.collectResourceTiming,this._renderTaskQueue=new Mu,this._controls=[],this._mapId=v.uniqueId(),this._locale=v.extend({},Pa,w.locale),this._clickTolerance=w.clickTolerance,this._requestManager=new v.RequestManager(w.transformRequest,w.accessToken),"string"==typeof w.container){if(this._container=v.window.document.getElementById(w.container),!this._container)throw new Error("Container '"+w.container+"' not found.")}else{if(!(w.container instanceof zp))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=w.container}if(w.maxBounds&&this.setMaxBounds(w.maxBounds),v.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return T._update(!1)}),this.on("moveend",function(){return T._update(!1)}),this.on("zoom",function(){return T._update(!0)}),void 0!==v.window&&(v.window.addEventListener("online",this._onWindowOnline,!1),v.window.addEventListener("resize",this._onWindowResize,!1),v.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new bn(this,w),this._hash=w.hash&&new gu("string"==typeof w.hash&&w.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:w.center,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch}),w.bounds&&(this.resize(),this.fitBounds(w.bounds,v.extend({},w.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=w.localIdeographFontFamily,w.style&&this.setStyle(w.style,{localIdeographFontFamily:w.localIdeographFontFamily}),w.attributionControl&&this.addControl(new So({customAttribution:w.customAttribution})),this.addControl(new vu,w.logoPosition),this.on("style.load",function(){T.transform.unmodified&&T.jumpTo(T.style.stylesheet)}),this.on("data",function(U){T._update("style"===U.dataType),T.fire(new v.Event(U.dataType+"data",U))}),this.on("dataloading",function(U){T.fire(new v.Event(U.dataType+"dataloading",U))})}p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y;var g={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return y.prototype._getMapId=function(){return this._mapId},y.prototype.addControl=function(w,T){if(void 0===T&&(T=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new v.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var B=w.onAdd(this);this._controls.push(w);var U=this._controlPositions[T];return-1!==T.indexOf("bottom")?U.insertBefore(B,U.firstChild):U.appendChild(B),this},y.prototype.removeControl=function(w){if(!w||!w.onRemove)return this.fire(new v.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var T=this._controls.indexOf(w);return T>-1&&this._controls.splice(T,1),w.onRemove(this),this},y.prototype.hasControl=function(w){return this._controls.indexOf(w)>-1},y.prototype.resize=function(w){var T=this._containerDimensions(),B=T[0],U=T[1];this._resizeCanvas(B,U),this.transform.resize(B,U),this.painter.resize(B,U);var Z=!this._moving;return Z&&(this.stop(),this.fire(new v.Event("movestart",w)).fire(new v.Event("move",w))),this.fire(new v.Event("resize",w)),Z&&this.fire(new v.Event("moveend",w)),this},y.prototype.getBounds=function(){return this.transform.getBounds()},y.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},y.prototype.setMaxBounds=function(w){return this.transform.setMaxBounds(v.LngLatBounds.convert(w)),this._update()},y.prototype.setMinZoom=function(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom)return this.transform.minZoom=w,this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},y.prototype.getMinZoom=function(){return this.transform.minZoom},y.prototype.setMaxZoom=function(w){if((w=w??22)>=this.transform.minZoom)return this.transform.maxZoom=w,this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")},y.prototype.getMaxZoom=function(){return this.transform.maxZoom},y.prototype.setMinPitch=function(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.minPitch=w,this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},y.prototype.getMinPitch=function(){return this.transform.minPitch},y.prototype.setMaxPitch=function(w){if((w=w??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(w>=this.transform.minPitch)return this.transform.maxPitch=w,this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")},y.prototype.getMaxPitch=function(){return this.transform.maxPitch},y.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},y.prototype.setRenderWorldCopies=function(w){return this.transform.renderWorldCopies=w,this._update()},y.prototype.project=function(w){return this.transform.locationPoint(v.LngLat.convert(w))},y.prototype.unproject=function(w){return this.transform.pointLocation(v.Point.convert(w))},y.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},y.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},y.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},y.prototype._createDelegatedListener=function(w,T,B){var U,Z=this;if("mouseenter"===w||"mouseover"===w){var se=!1;return{layer:T,listener:B,delegates:{mousemove:function(Re){var Me=Z.getLayer(T)?Z.queryRenderedFeatures(Re.point,{layers:[T]}):[];Me.length?se||(se=!0,B.call(Z,new Ia(w,Z,Re.originalEvent,{features:Me}))):se=!1},mouseout:function(){se=!1}}}}if("mouseleave"===w||"mouseout"===w){var ge=!1;return{layer:T,listener:B,delegates:{mousemove:function(Re){(Z.getLayer(T)?Z.queryRenderedFeatures(Re.point,{layers:[T]}):[]).length?ge=!0:ge&&(ge=!1,B.call(Z,new Ia(w,Z,Re.originalEvent)))},mouseout:function(Re){ge&&(ge=!1,B.call(Z,new Ia(w,Z,Re.originalEvent)))}}}}return{layer:T,listener:B,delegates:(U={},U[w]=function(Re){var Me=Z.getLayer(T)?Z.queryRenderedFeatures(Re.point,{layers:[T]}):[];Me.length&&(Re.features=Me,B.call(Z,Re),delete Re.features)},U)}},y.prototype.on=function(w,T,B){if(void 0===B)return p.prototype.on.call(this,w,T);var U=this._createDelegatedListener(w,T,B);for(var Z in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(U),U.delegates)this.on(Z,U.delegates[Z]);return this},y.prototype.once=function(w,T,B){if(void 0===B)return p.prototype.once.call(this,w,T);var U=this._createDelegatedListener(w,T,B);for(var Z in U.delegates)this.once(Z,U.delegates[Z]);return this},y.prototype.off=function(w,T,B){var U=this;return void 0===B?p.prototype.off.call(this,w,T):(this._delegatedListeners&&this._delegatedListeners[w]&&function(Z){for(var se=Z[w],ge=0;ge<se.length;ge++){var Re=se[ge];if(Re.layer===T&&Re.listener===B){for(var Me in Re.delegates)U.off(Me,Re.delegates[Me]);return se.splice(ge,1),U}}}(this._delegatedListeners),this)},y.prototype.queryRenderedFeatures=function(w,T){if(!this.style)return[];var B;if(void 0!==T||void 0===w||w instanceof v.Point||Array.isArray(w)||(T=w,w=void 0),T=T||{},(w=w||[[0,0],[this.transform.width,this.transform.height]])instanceof v.Point||"number"==typeof w[0])B=[v.Point.convert(w)];else{var U=v.Point.convert(w[0]),Z=v.Point.convert(w[1]);B=[U,new v.Point(Z.x,U.y),Z,new v.Point(U.x,Z.y),U]}return this.style.queryRenderedFeatures(B,T,this.transform)},y.prototype.querySourceFeatures=function(w,T){return this.style.querySourceFeatures(w,T)},y.prototype.setStyle=function(w,T){return!1!==(T=v.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},T)).diff&&T.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,T),this):(this._localIdeographFontFamily=T.localIdeographFontFamily,this._updateStyle(w,T))},y.prototype.setTransformRequest=function(w){return this._requestManager.setTransformRequest(w),this},y.prototype._getUIString=function(w){var T=this._locale[w];if(null==T)throw new Error("Missing UI string '"+w+"'");return T},y.prototype._updateStyle=function(w,T){return this.style&&(this.style.setEventedParent(null),this.style._remove()),w?(this.style=new lo(this,T||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof w?this.style.loadURL(w):this.style.loadJSON(w),this):(delete this.style,this)},y.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new lo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},y.prototype._diffStyle=function(w,T){var B=this;if("string"==typeof w){var U=this._requestManager.normalizeStyleURL(w),Z=this._requestManager.transformRequest(U,v.ResourceType.Style);v.getJSON(Z,function(se,ge){se?B.fire(new v.ErrorEvent(se)):ge&&B._updateDiff(ge,T)})}else"object"==typeof w&&this._updateDiff(w,T)},y.prototype._updateDiff=function(w,T){try{this.style.setState(w)&&this._update(!0)}catch(B){v.warnOnce("Unable to perform style diff: "+(B.message||B.error||B)+".  Rebuilding the style from scratch."),this._updateStyle(w,T)}},y.prototype.getStyle=function(){if(this.style)return this.style.serialize()},y.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():v.warnOnce("There is no style added to the map.")},y.prototype.addSource=function(w,T){return this._lazyInitEmptyStyle(),this.style.addSource(w,T),this._update(!0)},y.prototype.isSourceLoaded=function(w){var T=this.style&&this.style.sourceCaches[w];if(void 0!==T)return T.loaded();this.fire(new v.ErrorEvent(new Error("There is no source with ID '"+w+"'")))},y.prototype.areTilesLoaded=function(){var w=this.style&&this.style.sourceCaches;for(var T in w){var B=w[T]._tiles;for(var U in B){var Z=B[U];if("loaded"!==Z.state&&"errored"!==Z.state)return!1}}return!0},y.prototype.addSourceType=function(w,T,B){return this._lazyInitEmptyStyle(),this.style.addSourceType(w,T,B)},y.prototype.removeSource=function(w){return this.style.removeSource(w),this._update(!0)},y.prototype.getSource=function(w){return this.style.getSource(w)},y.prototype.addImage=function(w,T,B){void 0===B&&(B={});var U=B.pixelRatio;void 0===U&&(U=1);var Z=B.sdf;void 0===Z&&(Z=!1);var se=B.stretchX,ge=B.stretchY,Re=B.content;if(this._lazyInitEmptyStyle(),T instanceof Ro||ku&&T instanceof ku){var Me=v.browser.getImageData(T);this.style.addImage(w,{data:new v.RGBAImage({width:Me.width,height:Me.height},Me.data),pixelRatio:U,stretchX:se,stretchY:ge,content:Re,sdf:Z,version:0})}else{if(void 0===T.width||void 0===T.height)return this.fire(new v.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var De=T;this.style.addImage(w,{data:new v.RGBAImage({width:T.width,height:T.height},new Uint8Array(T.data)),pixelRatio:U,stretchX:se,stretchY:ge,content:Re,sdf:Z,version:0,userImage:De}),De.onAdd&&De.onAdd(this,w)}},y.prototype.updateImage=function(w,T){var B=this.style.getImage(w);if(!B)return this.fire(new v.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var U=T instanceof Ro||ku&&T instanceof ku?v.browser.getImageData(T):T,Z=U.width,se=U.height,ge=U.data;return void 0===Z||void 0===se?this.fire(new v.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):Z!==B.data.width||se!==B.data.height?this.fire(new v.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(B.data.replace(ge,!(T instanceof Ro||ku&&T instanceof ku)),void this.style.updateImage(w,B))},y.prototype.hasImage=function(w){return w?!!this.style.getImage(w):(this.fire(new v.ErrorEvent(new Error("Missing required image id"))),!1)},y.prototype.removeImage=function(w){this.style.removeImage(w)},y.prototype.loadImage=function(w,T){v.getImage(this._requestManager.transformRequest(w,v.ResourceType.Image),T)},y.prototype.listImages=function(){return this.style.listImages()},y.prototype.addLayer=function(w,T){return this._lazyInitEmptyStyle(),this.style.addLayer(w,T),this._update(!0)},y.prototype.moveLayer=function(w,T){return this.style.moveLayer(w,T),this._update(!0)},y.prototype.removeLayer=function(w){return this.style.removeLayer(w),this._update(!0)},y.prototype.getLayer=function(w){return this.style.getLayer(w)},y.prototype.setLayerZoomRange=function(w,T,B){return this.style.setLayerZoomRange(w,T,B),this._update(!0)},y.prototype.setFilter=function(w,T,B){return void 0===B&&(B={}),this.style.setFilter(w,T,B),this._update(!0)},y.prototype.getFilter=function(w){return this.style.getFilter(w)},y.prototype.setPaintProperty=function(w,T,B,U){return void 0===U&&(U={}),this.style.setPaintProperty(w,T,B,U),this._update(!0)},y.prototype.getPaintProperty=function(w,T){return this.style.getPaintProperty(w,T)},y.prototype.setLayoutProperty=function(w,T,B,U){return void 0===U&&(U={}),this.style.setLayoutProperty(w,T,B,U),this._update(!0)},y.prototype.getLayoutProperty=function(w,T){return this.style.getLayoutProperty(w,T)},y.prototype.setLight=function(w,T){return void 0===T&&(T={}),this._lazyInitEmptyStyle(),this.style.setLight(w,T),this._update(!0)},y.prototype.getLight=function(){return this.style.getLight()},y.prototype.setFeatureState=function(w,T){return this.style.setFeatureState(w,T),this._update()},y.prototype.removeFeatureState=function(w,T){return this.style.removeFeatureState(w,T),this._update()},y.prototype.getFeatureState=function(w){return this.style.getFeatureState(w)},y.prototype.getContainer=function(){return this._container},y.prototype.getCanvasContainer=function(){return this._canvasContainer},y.prototype.getCanvas=function(){return this._canvas},y.prototype._containerDimensions=function(){var w=0,T=0;return this._container&&(w=this._container.clientWidth||400,T=this._container.clientHeight||300),[w,T]},y.prototype._setupContainer=function(){var w=this._container;w.classList.add("maplibregl-map","mapboxgl-map");var T=this._canvasContainer=q.create("div","maplibregl-canvas-container mapboxgl-canvas-container",w);this._interactive&&T.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=q.create("canvas","maplibregl-canvas mapboxgl-canvas",T),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var B=this._containerDimensions();this._resizeCanvas(B[0],B[1]);var U=this._controlContainer=q.create("div","maplibregl-control-container mapboxgl-control-container",w),Z=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(se){Z[se]=q.create("div","maplibregl-ctrl-"+se+" mapboxgl-ctrl-"+se,U)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},y.prototype._resizeCanvas=function(w,T){var B=v.browser.devicePixelRatio||1;this._canvas.width=B*w,this._canvas.height=B*T,this._canvas.style.width=w+"px",this._canvas.style.height=T+"px"},y.prototype._setupPainter=function(){var w=v.extend({},G.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),T=this._canvas.getContext("webgl",w)||this._canvas.getContext("experimental-webgl",w);T?(this.painter=new Ur(T,this.transform),v.webpSupported.testSupport(T)):this.fire(new v.ErrorEvent(new Error("Failed to initialize WebGL")))},y.prototype._contextLost=function(w){w.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new v.Event("webglcontextlost",{originalEvent:w}))},y.prototype._contextRestored=function(w){this._setupPainter(),this.resize(),this._update(),this.fire(new v.Event("webglcontextrestored",{originalEvent:w}))},y.prototype._onMapScroll=function(w){if(w.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},y.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},y.prototype._update=function(w){return this.style?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this},y.prototype._requestRenderFrame=function(w){return this._update(),this._renderTaskQueue.add(w)},y.prototype._cancelRenderFrame=function(w){this._renderTaskQueue.remove(w)},y.prototype._render=function(w){var T,B=this,U=0,Z=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(T=Z.createQueryEXT(),Z.beginQueryEXT(Z.TIME_ELAPSED_EXT,T),U=v.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),!this._removed){var se=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var ge=this.transform.zoom,Re=v.browser.now();this.style.zoomHistory.update(ge,Re);var Me=new v.EvaluationParameters(ge,{now:Re,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),De=Me.crossFadingFactor();1===De&&De===this._crossFadingFactor||(se=!0,this._crossFadingFactor=De),this.style.update(Me)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new v.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new v.Event("load"))),this.style&&(this.style.hasTransitions()||se)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Ve=v.browser.now()-U;Z.endQueryEXT(Z.TIME_ELAPSED_EXT,T),setTimeout(function(){var je=Z.getQueryObjectEXT(T,Z.QUERY_RESULT_EXT)/1e6;Z.deleteQueryEXT(T),B.fire(new v.Event("gpu-timing-frame",{cpuTime:Ve,gpuTime:je}))},50)}if(this.listens("gpu-timing-layer")){var Ue=this.painter.collectGpuTimers();setTimeout(function(){var je=B.painter.queryGpuTimers(Ue);B.fire(new v.Event("gpu-timing-layer",{layerTimes:je}))},50)}var Qe=this._sourcesDirty||this._styleDirty||this._placementDirty;return Qe||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new v.Event("idle")),!this._loaded||this._fullyLoaded||Qe||(this._fullyLoaded=!0),this}},y.prototype.remove=function(){this._hash&&this._hash.remove();for(var w=0,T=this._controls;w<T.length;w+=1)T[w].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==v.window&&(v.window.removeEventListener("resize",this._onWindowResize,!1),v.window.removeEventListener("orientationchange",this._onWindowResize,!1),v.window.removeEventListener("online",this._onWindowOnline,!1));var B=this.painter.context.gl.getExtension("WEBGL_lose_context");B&&B.loseContext(),yf(this._canvasContainer),yf(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),this._removed=!0,this.fire(new v.Event("remove"))},y.prototype.triggerRepaint=function(){var w=this;this.style&&!this._frame&&(this._frame=v.browser.frame(function(T){w._frame=null,w._render(T)}))},y.prototype._onWindowOnline=function(){this._update()},y.prototype._onWindowResize=function(w){this._trackResize&&this.resize({originalEvent:w})._update()},g.showTileBoundaries.get=function(){return!!this._showTileBoundaries},g.showTileBoundaries.set=function(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())},g.showPadding.get=function(){return!!this._showPadding},g.showPadding.set=function(w){this._showPadding!==w&&(this._showPadding=w,this._update())},g.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},g.showCollisionBoxes.set=function(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())},g.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},g.showOverdrawInspector.set=function(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())},g.repaint.get=function(){return!!this._repaint},g.repaint.set=function(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())},g.vertices.get=function(){return!!this._vertices},g.vertices.set=function(w){this._vertices=w,this._update()},y.prototype._setCacheLimits=function(w,T){v.setCacheLimits(w,T)},g.version.get=function(){return v.version},Object.defineProperties(y.prototype,g),y}(Zn);function yf(p){p.parentNode&&p.parentNode.removeChild(p)}var gc={showCompass:!0,showZoom:!0,visualizePitch:!1},fr=function(p){var y=this;this.options=v.extend({},gc,p),this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(g){return g.preventDefault()}),this.options.showZoom&&(v.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",function(g){return y._map.zoomIn({},{originalEvent:g})}),q.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",function(g){return y._map.zoomOut({},{originalEvent:g})}),q.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(v.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",function(g){y.options.visualizePitch?y._map.resetNorthPitch({},{originalEvent:g}):y._map.resetNorth({},{originalEvent:g})}),this._compassIcon=q.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};fr.prototype._updateZoomButtons=function(){var p=this._map.getZoom(),y=p===this._map.getMaxZoom(),g=p===this._map.getMinZoom();this._zoomInButton.disabled=y,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",y.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},fr.prototype._rotateCompassArrow=function(){var p=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=p},fr.prototype.onAdd=function(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Rs(this._map,this._compass,this.options.visualizePitch)),this._container},fr.prototype.onRemove=function(){q.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},fr.prototype._createButton=function(p,y){var g=q.create("button",p,this._container);return g.type="button",g.addEventListener("click",y),g},fr.prototype._setButtonTitle=function(p,y){var g=this._map._getUIString("NavigationControl."+y);p.title=g,p.setAttribute("aria-label",g)};var Rs=function(p,y,g){void 0===g&&(g=!1),this._clickTolerance=10,this.element=y,this.mouseRotate=new ff({clickTolerance:p.dragRotate._mouseRotate._clickTolerance}),this.map=p,g&&(this.mousePitch=new hf({clickTolerance:p.dragRotate._mousePitch._clickTolerance})),v.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),q.addEventListener(y,"mousedown",this.mousedown),q.addEventListener(y,"touchstart",this.touchstart,{passive:!1}),q.addEventListener(y,"touchmove",this.touchmove),q.addEventListener(y,"touchend",this.touchend),q.addEventListener(y,"touchcancel",this.reset)};function Sh(p,y,g){if(p=new v.LngLat(p.lng,p.lat),y){var w=new v.LngLat(p.lng-360,p.lat),T=new v.LngLat(p.lng+360,p.lat),B=g.locationPoint(p).distSqr(y);g.locationPoint(w).distSqr(y)<B?p=w:g.locationPoint(T).distSqr(y)<B&&(p=T)}for(;Math.abs(p.lng-g.center.lng)>180;){var U=g.locationPoint(p);if(U.x>=0&&U.y>=0&&U.x<=g.width&&U.y<=g.height)break;p.lng>g.center.lng?p.lng-=360:p.lng+=360}return p}Rs.prototype.down=function(p,y){this.mouseRotate.mousedown(p,y),this.mousePitch&&this.mousePitch.mousedown(p,y),q.disableDrag()},Rs.prototype.move=function(p,y){var g=this.map,w=this.mouseRotate.mousemoveWindow(p,y);if(w&&w.bearingDelta&&g.setBearing(g.getBearing()+w.bearingDelta),this.mousePitch){var T=this.mousePitch.mousemoveWindow(p,y);T&&T.pitchDelta&&g.setPitch(g.getPitch()+T.pitchDelta)}},Rs.prototype.off=function(){var p=this.element;q.removeEventListener(p,"mousedown",this.mousedown),q.removeEventListener(p,"touchstart",this.touchstart,{passive:!1}),q.removeEventListener(p,"touchmove",this.touchmove),q.removeEventListener(p,"touchend",this.touchend),q.removeEventListener(p,"touchcancel",this.reset),this.offTemp()},Rs.prototype.offTemp=function(){q.enableDrag(),q.removeEventListener(v.window,"mousemove",this.mousemove),q.removeEventListener(v.window,"mouseup",this.mouseup)},Rs.prototype.mousedown=function(p){this.down(v.extend({},p,{ctrlKey:!0,preventDefault:function(){return p.preventDefault()}}),q.mousePos(this.element,p)),q.addEventListener(v.window,"mousemove",this.mousemove),q.addEventListener(v.window,"mouseup",this.mouseup)},Rs.prototype.mousemove=function(p){this.move(p,q.mousePos(this.element,p))},Rs.prototype.mouseup=function(p){this.mouseRotate.mouseupWindow(p),this.mousePitch&&this.mousePitch.mouseupWindow(p),this.offTemp()},Rs.prototype.touchstart=function(p){1!==p.targetTouches.length?this.reset():(this._startPos=this._lastPos=q.touchPos(this.element,p.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return p.preventDefault()}},this._startPos))},Rs.prototype.touchmove=function(p){1!==p.targetTouches.length?this.reset():(this._lastPos=q.touchPos(this.element,p.targetTouches)[0],this.move({preventDefault:function(){return p.preventDefault()}},this._lastPos))},Rs.prototype.touchend=function(p){0===p.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Rs.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var vc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function wl(p,y,g){var w=p.classList;for(var T in vc)w.remove("maplibregl-"+g+"-anchor-"+T,"mapboxgl-"+g+"-anchor-"+T);w.add("maplibregl-"+g+"-anchor-"+y,"mapboxgl-"+g+"-anchor-"+y)}var qc,Hc=function(p){function y(g,w){if(p.call(this),(g instanceof v.window.HTMLElement||w)&&(g=v.extend({element:g},w)),v.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=g&&g.anchor||"center",this._color=g&&g.color||"#3FB1CE",this._scale=g&&g.scale||1,this._draggable=g&&g.draggable||!1,this._clickTolerance=g&&g.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=g&&g.rotation||0,this._rotationAlignment=g&&g.rotationAlignment||"auto",this._pitchAlignment=g&&g.pitchAlignment&&"auto"!==g.pitchAlignment?g.pitchAlignment:this._rotationAlignment,g&&g.element)this._element=g.element,this._offset=v.Point.convert(g&&g.offset||[0,0]);else{this._defaultMarker=!0,this._element=q.create("div"),this._element.setAttribute("aria-label","Map marker");var T=q.createNS("http://www.w3.org/2000/svg","svg");T.setAttributeNS(null,"display","block"),T.setAttributeNS(null,"height","41px"),T.setAttributeNS(null,"width","27px"),T.setAttributeNS(null,"viewBox","0 0 27 41");var B=q.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"stroke","none"),B.setAttributeNS(null,"stroke-width","1"),B.setAttributeNS(null,"fill","none"),B.setAttributeNS(null,"fill-rule","evenodd");var U=q.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"fill-rule","nonzero");var Z=q.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Z.setAttributeNS(null,"fill","#000000");for(var se=0,ge=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];se<ge.length;se+=1){var Re=ge[se],Me=q.createNS("http://www.w3.org/2000/svg","ellipse");Me.setAttributeNS(null,"opacity","0.04"),Me.setAttributeNS(null,"cx","10.5"),Me.setAttributeNS(null,"cy","5.80029008"),Me.setAttributeNS(null,"rx",Re.rx),Me.setAttributeNS(null,"ry",Re.ry),Z.appendChild(Me)}var De=q.createNS("http://www.w3.org/2000/svg","g");De.setAttributeNS(null,"fill",this._color);var Ve=q.createNS("http://www.w3.org/2000/svg","path");Ve.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),De.appendChild(Ve);var Ue=q.createNS("http://www.w3.org/2000/svg","g");Ue.setAttributeNS(null,"opacity","0.25"),Ue.setAttributeNS(null,"fill","#000000");var Qe=q.createNS("http://www.w3.org/2000/svg","path");Qe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ue.appendChild(Qe);var je=q.createNS("http://www.w3.org/2000/svg","g");je.setAttributeNS(null,"transform","translate(6.0, 7.0)"),je.setAttributeNS(null,"fill","#FFFFFF");var Ze=q.createNS("http://www.w3.org/2000/svg","g");Ze.setAttributeNS(null,"transform","translate(8.0, 8.0)");var at=q.createNS("http://www.w3.org/2000/svg","circle");at.setAttributeNS(null,"fill","#000000"),at.setAttributeNS(null,"opacity","0.25"),at.setAttributeNS(null,"cx","5.5"),at.setAttributeNS(null,"cy","5.5"),at.setAttributeNS(null,"r","5.4999962");var pt=q.createNS("http://www.w3.org/2000/svg","circle");pt.setAttributeNS(null,"fill","#FFFFFF"),pt.setAttributeNS(null,"cx","5.5"),pt.setAttributeNS(null,"cy","5.5"),pt.setAttributeNS(null,"r","5.4999962"),Ze.appendChild(at),Ze.appendChild(pt),U.appendChild(Z),U.appendChild(De),U.appendChild(Ue),U.appendChild(je),U.appendChild(Ze),T.appendChild(U),T.setAttributeNS(null,"height",41*this._scale+"px"),T.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(T),this._offset=v.Point.convert(g&&g.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",function(Pt){Pt.preventDefault()}),this._element.addEventListener("mousedown",function(Pt){Pt.preventDefault()}),wl(this._element,this._anchor,"marker"),this._popup=null}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.addTo=function(g){return this.remove(),this._map=g,g.getCanvasContainer().appendChild(this._element),g.on("move",this._update),g.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},y.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),q.remove(this._element),this._popup&&this._popup.remove(),this},y.prototype.getLngLat=function(){return this._lngLat},y.prototype.setLngLat=function(g){return this._lngLat=v.LngLat.convert(g),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},y.prototype.getElement=function(){return this._element},y.prototype.setPopup=function(g){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),g){if(!("offset"in g.options)){var w=Math.sqrt(Math.pow(13.5,2)/2);g.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[w,-1*(24.6+w)],"bottom-right":[-w,-1*(24.6+w)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=g,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},y.prototype._onKeyPress=function(g){var w=g.code,T=g.charCode||g.keyCode;"Space"!==w&&"Enter"!==w&&32!==T&&13!==T||this.togglePopup()},y.prototype._onMapClick=function(g){var w=g.originalEvent.target,T=this._element;this._popup&&(w===T||T.contains(w))&&this.togglePopup()},y.prototype.getPopup=function(){return this._popup},y.prototype.togglePopup=function(){var g=this._popup;return g?(g.isOpen()?g.remove():g.addTo(this._map),this):this},y.prototype._update=function(g){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Sh(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var w="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?w="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(w="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var T="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?T="rotateX(0deg)":"map"===this._pitchAlignment&&(T="rotateX("+this._map.getPitch()+"deg)"),g&&"moveend"!==g.type||(this._pos=this._pos.round()),q.setTransform(this._element,vc[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+T+" "+w)}},y.prototype.getOffset=function(){return this._offset},y.prototype.setOffset=function(g){return this._offset=v.Point.convert(g),this._update(),this},y.prototype._onMove=function(g){if(!this._isDragging){var w=this._clickTolerance||this._map._clickTolerance;this._isDragging=g.point.dist(this._pointerdownPos)>=w}this._isDragging&&(this._pos=g.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new v.Event("dragstart"))),this.fire(new v.Event("drag")))},y.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new v.Event("dragend")),this._state="inactive"},y.prototype._addDragHandler=function(g){this._element.contains(g.originalEvent.target)&&(g.preventDefault(),this._positionDelta=g.point.sub(this._pos).add(this._offset),this._pointerdownPos=g.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},y.prototype.setDraggable=function(g){return this._draggable=!!g,this._map&&(g?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},y.prototype.isDraggable=function(){return this._draggable},y.prototype.setRotation=function(g){return this._rotation=g||0,this._update(),this},y.prototype.getRotation=function(){return this._rotation},y.prototype.setRotationAlignment=function(g){return this._rotationAlignment=g||"auto",this._update(),this},y.prototype.getRotationAlignment=function(){return this._rotationAlignment},y.prototype.setPitchAlignment=function(g){return this._pitchAlignment=g&&"auto"!==g?g:this._rotationAlignment,this._update(),this},y.prototype.getPitchAlignment=function(){return this._pitchAlignment},y}(v.Evented),Ch={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},_d=0,Wt=!1,Si=function(p){function y(g){p.call(this),this.options=v.extend({},Ch,g),v.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.onAdd=function(g){var w;return this._map=g,this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),w=this._setupUI,void 0!==qc?w(qc):void 0!==v.window.navigator.permissions?v.window.navigator.permissions.query({name:"geolocation"}).then(function(T){w(qc="denied"!==T.state)}):w(qc=!!v.window.navigator.geolocation),this._container},y.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(v.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),q.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,_d=0,Wt=!1},y.prototype._isOutOfMapMaxBounds=function(g){var w=this._map.getMaxBounds(),T=g.coords;return w&&(T.longitude<w.getWest()||T.longitude>w.getEast()||T.latitude<w.getSouth()||T.latitude>w.getNorth())},y.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}},y.prototype._onSuccess=function(g){if(this._map){if(this._isOutOfMapMaxBounds(g))return this._setErrorState(),this.fire(new v.Event("outofmaxbounds",g)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=g,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(g),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(g),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new v.Event("geolocate",g)),this._finish()}},y.prototype._updateCamera=function(g){var w=new v.LngLat(g.coords.longitude,g.coords.latitude),T=g.coords.accuracy,B=this._map.getBearing(),U=v.extend({bearing:B},this.options.fitBoundsOptions);this._map.fitBounds(w.toBounds(T),U,{geolocateSource:!0})},y.prototype._updateMarker=function(g){if(g){var w=new v.LngLat(g.coords.longitude,g.coords.latitude);this._accuracyCircleMarker.setLngLat(w).addTo(this._map),this._userLocationDotMarker.setLngLat(w).addTo(this._map),this._accuracy=g.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},y.prototype._updateCircleRadius=function(){var g=this._map._container.clientHeight/2,w=this._map.unproject([0,g]),T=this._map.unproject([1,g]),B=w.distanceTo(T),U=Math.ceil(2*this._accuracy/B);this._circleElement.style.width=U+"px",this._circleElement.style.height=U+"px"},y.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},y.prototype._onError=function(g){if(this._map){if(this.options.trackUserLocation)if(1===g.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var w=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===g.code&&Wt)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new v.Event("error",g)),this._finish()}},y.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},y.prototype._setupUI=function(g){var w=this;if(this._container.addEventListener("contextmenu",function(U){return U.preventDefault()}),this._geolocateButton=q.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),q.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===g){v.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var T=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=T,this._geolocateButton.setAttribute("aria-label",T)}else{var B=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=B,this._geolocateButton.setAttribute("aria-label",B)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=q.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Hc(this._dotElement),this._circleElement=q.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Hc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(U){U.geolocateSource||"ACTIVE_LOCK"!==w._watchState||U.originalEvent&&"resize"===U.originalEvent.type||(w._watchState="BACKGROUND",w._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),w._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),w.fire(new v.Event("trackuserlocationend")))})},y.prototype.trigger=function(){if(!this._setup)return v.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new v.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":_d--,Wt=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new v.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new v.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var g;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++_d>1?(g={maximumAge:6e5,timeout:0},Wt=!0):(g=this.options.positionOptions,Wt=!1),this._geolocationWatchID=v.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else v.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},y.prototype._clearWatch=function(){v.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},y}(v.Evented),Th={maxWidth:100,unit:"metric"},tu=function(p){this.options=v.extend({},Th,p),v.bindAll(["_onMove","setUnit"],this)};function Yo(p,y,g){var w=g&&g.maxWidth||100,T=p._container.clientHeight/2,B=p.unproject([0,T]),U=p.unproject([w,T]),Z=B.distanceTo(U);if(g&&"imperial"===g.unit){var se=3.2808*Z;se>5280?Hl(y,w,se/5280,p._getUIString("ScaleControl.Miles")):Hl(y,w,se,p._getUIString("ScaleControl.Feet"))}else g&&"nautical"===g.unit?Hl(y,w,Z/1852,p._getUIString("ScaleControl.NauticalMiles")):Z>=1e3?Hl(y,w,Z/1e3,p._getUIString("ScaleControl.Kilometers")):Hl(y,w,Z,p._getUIString("ScaleControl.Meters"))}function Hl(p,y,g,w){var T,B,U,se,ge,Z=(T=g,(B=Math.pow(10,(""+Math.floor(T)).length-1))*(U=(U=T/B)>=10?10:U>=5?5:U>=3?3:U>=2?2:U>=1?1:(se=U,ge=Math.pow(10,Math.ceil(-Math.log(se)/Math.LN10)),Math.round(se*ge)/ge)));p.style.width=y*(Z/g)+"px",p.innerHTML=Z+"&nbsp;"+w}tu.prototype.getDefaultPosition=function(){return"bottom-left"},tu.prototype._onMove=function(){Yo(this._map,this._container,this.options)},tu.prototype.onAdd=function(p){return this._map=p,this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},tu.prototype.onRemove=function(){q.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},tu.prototype.setUnit=function(p){this.options.unit=p,Yo(this._map,this._container,this.options)};var Ya=function(p){this._fullscreen=!1,p&&p.container&&(p.container instanceof v.window.HTMLElement?this._container=p.container:v.warnOnce("Full screen control 'container' must be a DOM element.")),v.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in v.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in v.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in v.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in v.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ya.prototype.onAdd=function(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=q.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",v.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ya.prototype.onRemove=function(){q.remove(this._controlContainer),this._map=null,v.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ya.prototype._checkFullscreenSupport=function(){return!!(v.window.document.fullscreenEnabled||v.window.document.mozFullScreenEnabled||v.window.document.msFullscreenEnabled||v.window.document.webkitFullscreenEnabled)},Ya.prototype._setupUI=function(){var p=this._fullscreenButton=q.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);q.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",p).setAttribute("aria-hidden",!0),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),v.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ya.prototype._updateTitle=function(){var p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.title=p},Ya.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ya.prototype._isFullscreen=function(){return this._fullscreen},Ya.prototype._changeIcon=function(){(v.window.document.fullscreenElement||v.window.document.mozFullScreenElement||v.window.document.webkitFullscreenElement||v.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ya.prototype._onClickFullscreen=function(){this._isFullscreen()?v.window.document.exitFullscreen?v.window.document.exitFullscreen():v.window.document.mozCancelFullScreen?v.window.document.mozCancelFullScreen():v.window.document.msExitFullscreen?v.window.document.msExitFullscreen():v.window.document.webkitCancelFullScreen&&v.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var yu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},bd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),yc=function(p){function y(g){p.call(this),this.options=v.extend(Object.create(yu),g),v.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.addTo=function(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new v.Event("open")),this},y.prototype.isOpen=function(){return!!this._map},y.prototype.remove=function(){return this._content&&q.remove(this._content),this._container&&(q.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new v.Event("close")),this},y.prototype.getLngLat=function(){return this._lngLat},y.prototype.setLngLat=function(g){return this._lngLat=v.LngLat.convert(g),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this},y.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this},y.prototype.getElement=function(){return this._container},y.prototype.setText=function(g){return this.setDOMContent(v.window.document.createTextNode(g))},y.prototype.setHTML=function(g){var w,T=v.window.document.createDocumentFragment(),B=v.window.document.createElement("body");for(B.innerHTML=g;w=B.firstChild;)T.appendChild(w);return this.setDOMContent(T)},y.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},y.prototype.setMaxWidth=function(g){return this.options.maxWidth=g,this._update(),this},y.prototype.setDOMContent=function(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=q.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this},y.prototype.addClassName=function(g){this._container&&this._container.classList.add(g)},y.prototype.removeClassName=function(g){this._container&&this._container.classList.remove(g)},y.prototype.setOffset=function(g){return this.options.offset=g,this._update(),this},y.prototype.toggleClassName=function(g){if(this._container)return this._container.classList.toggle(g)},y.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=q.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},y.prototype._onMouseUp=function(g){this._update(g.point)},y.prototype._onMouseMove=function(g){this._update(g.point)},y.prototype._onDrag=function(g){this._update(g.point)},y.prototype._update=function(g){var w=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=q.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=q.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Me){return w._container.classList.add(Me)}),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Sh(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||g)){var T=this._pos=this._trackPointer&&g?g:this._map.project(this._lngLat),B=this.options.anchor,U=function Me(De){if(De){if("number"==typeof De){var Ve=Math.round(Math.sqrt(.5*Math.pow(De,2)));return{center:new v.Point(0,0),top:new v.Point(0,De),"top-left":new v.Point(Ve,Ve),"top-right":new v.Point(-Ve,Ve),bottom:new v.Point(0,-De),"bottom-left":new v.Point(Ve,-Ve),"bottom-right":new v.Point(-Ve,-Ve),left:new v.Point(De,0),right:new v.Point(-De,0)}}if(De instanceof v.Point||Array.isArray(De)){var Ue=v.Point.convert(De);return{center:Ue,top:Ue,"top-left":Ue,"top-right":Ue,bottom:Ue,"bottom-left":Ue,"bottom-right":Ue,left:Ue,right:Ue}}return{center:v.Point.convert(De.center||[0,0]),top:v.Point.convert(De.top||[0,0]),"top-left":v.Point.convert(De["top-left"]||[0,0]),"top-right":v.Point.convert(De["top-right"]||[0,0]),bottom:v.Point.convert(De.bottom||[0,0]),"bottom-left":v.Point.convert(De["bottom-left"]||[0,0]),"bottom-right":v.Point.convert(De["bottom-right"]||[0,0]),left:v.Point.convert(De.left||[0,0]),right:v.Point.convert(De.right||[0,0])}}return Me(new v.Point(0,0))}(this.options.offset);if(!B){var Z,se=this._container.offsetWidth,ge=this._container.offsetHeight;Z=T.y+U.bottom.y<ge?["top"]:T.y>this._map.transform.height-ge?["bottom"]:[],T.x<se/2?Z.push("left"):T.x>this._map.transform.width-se/2&&Z.push("right"),B=0===Z.length?"bottom":Z.join("-")}var Re=T.add(U[B]).round();q.setTransform(this._container,vc[B]+" translate("+Re.x+"px,"+Re.y+"px)"),wl(this._container,B,"popup")}},y.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var g=this._container.querySelector(bd);g&&g.focus()}},y.prototype._onClose=function(){this.remove()},y}(v.Evented),Ih={version:v.version,supported:G,setRTLTextPlugin:v.setRTLTextPlugin,getRTLTextPluginStatus:v.getRTLTextPluginStatus,Map:_o,NavigationControl:fr,GeolocateControl:Si,AttributionControl:So,ScaleControl:tu,FullscreenControl:Ya,Popup:yc,Marker:Hc,Style:lo,LngLat:v.LngLat,LngLatBounds:v.LngLatBounds,Point:v.Point,MercatorCoordinate:v.MercatorCoordinate,Evented:v.Evented,config:v.config,prewarm:function(){In().acquire(yt)},clearPrewarmedResources:function(){var p=un;p&&(p.isPreloaded()&&1===p.numActive()?(p.release(yt),un=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return v.config.ACCESS_TOKEN},set accessToken(p){v.config.ACCESS_TOKEN=p},get baseApiUrl(){return v.config.API_URL},set baseApiUrl(p){v.config.API_URL=p},get workerCount(){return Lt.workerCount},set workerCount(p){Lt.workerCount=p},get maxParallelImageRequests(){return v.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){v.config.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage:function(p){v.clearTileCache(p)},workerUrl:"",addProtocol:function(p,y){v.config.REGISTERED_PROTOCOLS[p]=y},removeProtocol:function(p){delete v.config.REGISTERED_PROTOCOLS[p]}};return Ih}),L}()},7150:(Ee,X)=>{X.printMsg=function(){console.log("This is a message from the demo package")}},6117:function(Ee,X,O){var L;Ee=O.nmd(Ee),function($){"object"==typeof global&&global;var k,I=2147483647,S=36,me=/^xn--/,we=/[^\x20-\x7E]/,oe=/[\x2E\u3002\uFF0E\uFF61]/g,fe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ce=Math.floor,qe=String.fromCharCode;function ze(Rt){throw RangeError(fe[Rt])}function P(Rt,rt){for(var Et=Rt.length,sn=[];Et--;)sn[Et]=rt(Rt[Et]);return sn}function N(Rt,rt){var Et=Rt.split("@"),sn="";return Et.length>1&&(sn=Et[0]+"@",Rt=Et[1]),sn+P((Rt=Rt.replace(oe,".")).split("."),rt).join(".")}function F(Rt){for(var $t,kn,rt=[],Et=0,sn=Rt.length;Et<sn;)($t=Rt.charCodeAt(Et++))>=55296&&$t<=56319&&Et<sn?56320==(64512&(kn=Rt.charCodeAt(Et++)))?rt.push(((1023&$t)<<10)+(1023&kn)+65536):(rt.push($t),Et--):rt.push($t);return rt}function z(Rt){return P(Rt,function(rt){var Et="";return rt>65535&&(Et+=qe((rt-=65536)>>>10&1023|55296),rt=56320|1023&rt),Et+qe(rt)}).join("")}function ee(Rt){return Rt-48<10?Rt-22:Rt-65<26?Rt-65:Rt-97<26?Rt-97:S}function W(Rt,rt){return Rt+22+75*(Rt<26)-((0!=rt)<<5)}function ve(Rt,rt,Et){var sn=0;for(Rt=Et?Ce(Rt/700):Rt>>1,Rt+=Ce(Rt/rt);Rt>455;sn+=S)Rt=Ce(Rt/35);return Ce(sn+36*Rt/(Rt+38))}function Je(Rt){var sn,Bn,Nn,ar,Zt,ne,er,lr,Ti,Qi,rt=[],Et=Rt.length,$t=0,kn=128,Nt=72;for((Bn=Rt.lastIndexOf("-"))<0&&(Bn=0),Nn=0;Nn<Bn;++Nn)Rt.charCodeAt(Nn)>=128&&ze("not-basic"),rt.push(Rt.charCodeAt(Nn));for(ar=Bn>0?Bn+1:0;ar<Et;){for(Zt=$t,ne=1,er=S;ar>=Et&&ze("invalid-input"),((lr=ee(Rt.charCodeAt(ar++)))>=S||lr>Ce((I-$t)/ne))&&ze("overflow"),$t+=lr*ne,!(lr<(Ti=er<=Nt?1:er>=Nt+26?26:er-Nt));er+=S)ne>Ce(I/(Qi=S-Ti))&&ze("overflow"),ne*=Qi;Nt=ve($t-Zt,sn=rt.length+1,0==Zt),Ce($t/sn)>I-kn&&ze("overflow"),kn+=Ce($t/sn),$t%=sn,rt.splice($t++,0,kn)}return z(rt)}function dt(Rt){var rt,Et,sn,$t,kn,Nt,Bn,Nn,ar,Zt,ne,lr,Ti,Qi,kt,er=[];for(lr=(Rt=F(Rt)).length,rt=128,Et=0,kn=72,Nt=0;Nt<lr;++Nt)(ne=Rt[Nt])<128&&er.push(qe(ne));for(sn=$t=er.length,$t&&er.push("-");sn<lr;){for(Bn=I,Nt=0;Nt<lr;++Nt)(ne=Rt[Nt])>=rt&&ne<Bn&&(Bn=ne);for(Bn-rt>Ce((I-Et)/(Ti=sn+1))&&ze("overflow"),Et+=(Bn-rt)*Ti,rt=Bn,Nt=0;Nt<lr;++Nt)if((ne=Rt[Nt])<rt&&++Et>I&&ze("overflow"),ne==rt){for(Nn=Et,ar=S;!(Nn<(Zt=ar<=kn?1:ar>=kn+26?26:ar-kn));ar+=S)er.push(qe(W(Zt+(kt=Nn-Zt)%(Qi=S-Zt),0))),Nn=Ce(kt/Qi);er.push(qe(W(Nn,0))),kn=ve(Et,Ti,sn==$t),Et=0,++sn}++Et,++rt}return er.join("")}k={version:"1.3.2",ucs2:{decode:F,encode:z},decode:Je,encode:dt,toASCII:function At(Rt){return N(Rt,function(rt){return we.test(rt)?"xn--"+dt(rt):rt})},toUnicode:function Ie(Rt){return N(Rt,function(rt){return me.test(rt)?Je(rt.slice(4).toLowerCase()):rt})}},void 0!==(L=function(){return k}.call(X,O,X,Ee))&&(Ee.exports=L)}()},516:Ee=>{"use strict";function X(O,L){return Object.prototype.hasOwnProperty.call(O,L)}Ee.exports=function(O,L,$,v){$=$||"=";var G={};if("string"!=typeof O||0===O.length)return G;var q=/\+/g;O=O.split(L=L||"&");var k=1e3;v&&"number"==typeof v.maxKeys&&(k=v.maxKeys);var I=O.length;k>0&&I>k&&(I=k);for(var S=0;S<I;++S){var K,J,ie,Q,M=O[S].replace(q,"%20"),H=M.indexOf($);H>=0?(K=M.substr(0,H),J=M.substr(H+1)):(K=M,J=""),ie=decodeURIComponent(K),Q=decodeURIComponent(J),X(G,ie)?Array.isArray(G[ie])?G[ie].push(Q):G[ie]=[G[ie],Q]:G[ie]=Q}return G}},5776:Ee=>{"use strict";var X=function(O){switch(typeof O){case"string":return O;case"boolean":return O?"true":"false";case"number":return isFinite(O)?O:"";default:return""}};Ee.exports=function(O,L,$,v){return L=L||"&",$=$||"=",null===O&&(O=void 0),"object"==typeof O?Object.keys(O).map(function(G){var q=encodeURIComponent(X(G))+$;return Array.isArray(O[G])?O[G].map(function(k){return q+encodeURIComponent(X(k))}).join(L):q+encodeURIComponent(X(O[G]))}).join(L):v?encodeURIComponent(X(v))+$+encodeURIComponent(X(O)):""}},7137:(Ee,X,O)=>{"use strict";X.decode=X.parse=O(516),X.encode=X.stringify=O(5776)},7231:Ee=>{"use strict";class X{constructor(L={}){if(!(L.maxSize&&L.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=L.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(L,$){this.cache.set(L,$),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(L){if(this.cache.has(L))return this.cache.get(L);if(this.oldCache.has(L)){const $=this.oldCache.get(L);return this.oldCache.delete(L),this._set(L,$),$}}set(L,$){return this.cache.has(L)?this.cache.set(L,$):this._set(L,$),this}has(L){return this.cache.has(L)||this.oldCache.has(L)}peek(L){return this.cache.has(L)?this.cache.get(L):this.oldCache.has(L)?this.oldCache.get(L):void 0}delete(L){const $=this.cache.delete(L);return $&&this._size--,this.oldCache.delete(L)||$}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[L]of this)yield L}*values(){for(const[,L]of this)yield L}*[Symbol.iterator](){for(const L of this.cache)yield L;for(const L of this.oldCache){const[$]=L;this.cache.has($)||(yield L)}}get size(){let L=0;for(const $ of this.oldCache.keys())this.cache.has($)||L++;return this._size+L}}Ee.exports=X},6775:function(Ee){var L;L=function(){var O=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function L(k){return k.match(O)||[]}function v(k){return{language:(k=L(k))[1]||"",extlang:k[2]||"",script:k[3]||"",region:k[4]||""}}function G(k,I,S){Object.defineProperty(k,I,{value:S,enumerable:!0})}function q(k,I,S){function M(H){return L(H)[k]||""}G(M,"pattern",I),G(v,S,M)}return q(1,/^[a-zA-Z]{2,3}$/,"language"),q(2,/^[a-zA-Z]{3}$/,"extlang"),q(3,/^[a-zA-Z]{4}$/,"script"),q(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),G(v,"split",function $(k){return L(k).filter(function(I,S){return I&&S})}),v},Ee.exports?Ee.exports=L():this.subtag=L()},4208:(Ee,X,O)=>{"use strict";var L=O(8526);Ee.exports=L,typeof window<"u"&&(window.Suggestions=L)},4861:Ee=>{"use strict";var X=function(O){return this.component=O,this.items=[],this.active=O.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,O.el.parentNode.insertBefore(this.wrapper,O.el.nextSibling),this};X.prototype.show=function(){this.element.style.display="block"},X.prototype.hide=function(){this.element.style.display="none"},X.prototype.add=function(O){this.items.push(O)},X.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},X.prototype.isEmpty=function(){return!this.items.length},X.prototype.isVisible=function(){return"block"===this.element.style.display},X.prototype.draw=function(){if(this.element.innerHTML="",0!==this.items.length){for(var O=0;O<this.items.length;O++)this.drawItem(this.items[O],this.active===O);this.show()}else this.hide()},X.prototype.drawItem=function(O,L){var $=document.createElement("li"),v=document.createElement("a");L&&($.className+=" active"),v.innerHTML=O.string,$.appendChild(v),this.element.appendChild($),$.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),$.addEventListener("mouseup",function(){this.handleMouseUp.call(this,O)}.bind(this))},X.prototype.handleMouseUp=function(O){this.selectingListItem=!1,this.component.value(O.original),this.clear(),this.draw()},X.prototype.move=function(O){this.active=O,this.draw()},X.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},X.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},X.prototype.drawError=function(O){var L=document.createElement("li");L.innerHTML=O,this.element.appendChild(L),this.show()},Ee.exports=X},8526:(Ee,X,O)=>{"use strict";var L=O(4703),$=O(5780),v=O(4861),G=function(q,k,I){return this.options=L({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},I=I||{}),this.el=q,this.data=k||[],this.list=new v(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(S){this.handleKeyUp(S.keyCode,S)}.bind(this),!1),this.el.addEventListener("keydown",function(S){this.handleKeyDown(S)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(S){this.handlePaste(S)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};G.prototype.handleKeyUp=function(q,k){if(40!==q&&38!==q&&27!==q&&9!==q){if(13===q)return void(this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),k.stopPropagation()));this.handleInputChange(this.el.value)}},G.prototype.handleKeyDown=function(q){switch(q.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&q.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},G.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},G.prototype.handlePaste=function(q){if(q.clipboardData)this.handleInputChange(q.clipboardData.getData("Text"));else{var k=this;setTimeout(function(){k.handleInputChange(q.target.value)},100)}},G.prototype.handleInputChange=function(q){this.query=this.normalize(q),this.list.clear(),this.query.length<this.options.minLength?this.list.draw():this.getCandidates(function(k){for(var I=0;I<k.length&&(this.list.add(k[I]),I!==this.options.limit-1);I++);this.list.draw()}.bind(this))},G.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},G.prototype.update=function(q){this.data=q,this.handleKeyUp()},G.prototype.clear=function(){this.data=[],this.list.clear()},G.prototype.normalize=function(q){return q.toLowerCase()},G.prototype.match=function(q,k){return q.indexOf(k)>-1},G.prototype.value=function(q){if(this.selected=q,this.el.value=this.getItemValue(q||{place_name:this.query}),document.createEvent){var k=document.createEvent("HTMLEvents");k.initEvent("change",!0,!1),this.el.dispatchEvent(k)}else this.el.fireEvent("onchange")},G.prototype.getCandidates=function(q){var k={pre:"<strong>",post:"</strong>",extract:function(S){return this.getItemValue(S)}.bind(this)};q(this.options.filter?$.filter(this.query,this.data,k).map(function(S){return{original:S.original,string:this.render(S.original,S.string)}}.bind(this)):this.data.map(function(S){return{original:S,string:this.render(S)}}.bind(this)))},G.prototype.getItemValue=function(q){return q},G.prototype.render=function(q,k){if(k)return k;for(var I=this.getItemValue(q.original?q.original:q),S=this.normalize(I),M=S.lastIndexOf(this.query);M>-1;){var H=M+this.query.length;I=I.slice(0,M)+"<strong>"+I.slice(M,H)+"</strong>"+I.slice(H),M=S.slice(0,M).lastIndexOf(this.query)}return I},G.prototype.renderError=function(q){this.list.drawError(q)},Ee.exports=G},5080:Ee=>{var X=Ee.exports=function(Q){return new O(Q)};function O(Q){this.value=Q}function L(Q,ae,me){var we=[],oe=[],fe=!0;return function pe(Ce){var qe=me?$(Ce):Ce,He={},ze=!0,P={node:qe,node_:Ce,path:[].concat(we),parent:oe[oe.length-1],parents:oe,key:we.slice(-1)[0],isRoot:0===we.length,level:we.length,circular:null,update:function(z,ee){P.isRoot||(P.parent.node[P.key]=z),P.node=z,ee&&(ze=!1)},delete:function(z){delete P.parent.node[P.key],z&&(ze=!1)},remove:function(z){K(P.parent.node)?P.parent.node.splice(P.key,1):delete P.parent.node[P.key],z&&(ze=!1)},keys:null,before:function(z){He.before=z},after:function(z){He.after=z},pre:function(z){He.pre=z},post:function(z){He.post=z},stop:function(){fe=!1},block:function(){ze=!1}};if(!fe)return P;function N(){if("object"==typeof P.node&&null!==P.node){(!P.keys||P.node_!==P.node)&&(P.keys=v(P.node)),P.isLeaf=0==P.keys.length;for(var z=0;z<oe.length;z++)if(oe[z].node_===Ce){P.circular=oe[z];break}}else P.isLeaf=!0,P.keys=null;P.notLeaf=!P.isLeaf,P.notRoot=!P.isRoot}N();var F=ae.call(P,P.node);return void 0!==F&&P.update&&P.update(F),He.before&&He.before.call(P,P.node),ze&&("object"==typeof P.node&&null!==P.node&&!P.circular&&(oe.push(P),N(),J(P.keys,function(z,ee){we.push(z),He.pre&&He.pre.call(P,P.node[z],z);var W=pe(P.node[z]);me&&ie.call(P.node,z)&&(P.node[z]=W.node),W.isLast=ee==P.keys.length-1,W.isFirst=0==ee,He.post&&He.post.call(P,W),we.pop()}),oe.pop()),He.after&&He.after.call(P,P.node)),P}(Q).node}function $(Q){if("object"==typeof Q&&null!==Q){var ae;if(K(Q))ae=[];else if(function q(Q){return"[object Date]"===G(Q)}(Q))ae=new Date(Q.getTime?Q.getTime():Q);else if(function k(Q){return"[object RegExp]"===G(Q)}(Q))ae=new RegExp(Q);else if(function I(Q){return"[object Error]"===G(Q)}(Q))ae={message:Q.message};else if(function S(Q){return"[object Boolean]"===G(Q)}(Q))ae=new Boolean(Q);else if(function M(Q){return"[object Number]"===G(Q)}(Q))ae=new Number(Q);else if(function H(Q){return"[object String]"===G(Q)}(Q))ae=new String(Q);else if(Object.create&&Object.getPrototypeOf)ae=Object.create(Object.getPrototypeOf(Q));else if(Q.constructor===Object)ae={};else{var we=function(){};we.prototype=Q.constructor&&Q.constructor.prototype||Q.__proto__||{},ae=new we}return J(v(Q),function(oe){ae[oe]=Q[oe]}),ae}return Q}O.prototype.get=function(Q){for(var ae=this.value,me=0;me<Q.length;me++){var we=Q[me];if(!ae||!ie.call(ae,we)){ae=void 0;break}ae=ae[we]}return ae},O.prototype.has=function(Q){for(var ae=this.value,me=0;me<Q.length;me++){var we=Q[me];if(!ae||!ie.call(ae,we))return!1;ae=ae[we]}return!0},O.prototype.set=function(Q,ae){for(var me=this.value,we=0;we<Q.length-1;we++){var oe=Q[we];ie.call(me,oe)||(me[oe]={}),me=me[oe]}return me[Q[we]]=ae,ae},O.prototype.map=function(Q){return L(this.value,Q,!0)},O.prototype.forEach=function(Q){return this.value=L(this.value,Q,!1),this.value},O.prototype.reduce=function(Q,ae){var me=1===arguments.length,we=me?this.value:ae;return this.forEach(function(oe){(!this.isRoot||!me)&&(we=Q.call(this,we,oe))}),we},O.prototype.paths=function(){var Q=[];return this.forEach(function(ae){Q.push(this.path)}),Q},O.prototype.nodes=function(){var Q=[];return this.forEach(function(ae){Q.push(this.node)}),Q},O.prototype.clone=function(){var Q=[],ae=[];return function me(we){for(var oe=0;oe<Q.length;oe++)if(Q[oe]===we)return ae[oe];if("object"==typeof we&&null!==we){var fe=$(we);return Q.push(we),ae.push(fe),J(v(we),function(pe){fe[pe]=me(we[pe])}),Q.pop(),ae.pop(),fe}return we}(this.value)};var v=Object.keys||function(ae){var me=[];for(var we in ae)me.push(we);return me};function G(Q){return Object.prototype.toString.call(Q)}var K=Array.isArray||function(ae){return"[object Array]"===Object.prototype.toString.call(ae)},J=function(Q,ae){if(Q.forEach)return Q.forEach(ae);for(var me=0;me<Q.length;me++)ae(Q[me],me,Q)};J(v(O.prototype),function(Q){X[Q]=function(ae){var me=[].slice.call(arguments,1),we=new O(ae);return we[Q].apply(we,me)}});var ie=Object.hasOwnProperty||function(Q,ae){return ae in Q}},5557:(Ee,X,O)=>{"use strict";function L($,v){return v=v||{},new Promise(function(G,q){var k=new XMLHttpRequest,I=[],S=[],M={},H=function(){return{ok:2==(k.status/100|0),statusText:k.statusText,status:k.status,url:k.responseURL,text:function(){return Promise.resolve(k.responseText)},json:function(){return Promise.resolve(k.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([k.response]))},clone:H,headers:{keys:function(){return I},entries:function(){return S},get:function(J){return M[J.toLowerCase()]},has:function(J){return J.toLowerCase()in M}}}};for(var K in k.open(v.method||"get",$,!0),k.onload=function(){k.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(J,ie,Q){I.push(ie=ie.toLowerCase()),S.push([ie,Q]),M[ie]=M[ie]?M[ie]+","+Q:Q}),G(H())},k.onerror=q,k.withCredentials="include"==v.credentials,v.headers)k.setRequestHeader(K,v.headers[K]);k.send(v.body||null)})}O.r(X),O.d(X,{default:()=>L})},8762:(Ee,X,O)=>{"use strict";var $=O(6117),v=O(796);function G(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}X.Qc=pe,X.WU=function Ce(ze){return v.isString(ze)&&(ze=pe(ze)),ze instanceof G?ze.format():G.prototype.format.call(ze)};var q=/^([a-z0-9.+-]+:)/i,k=/:[0-9]*$/,I=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,M=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),H=["'"].concat(M),K=["%","/","?",";","#"].concat(H),J=["/","?","#"],Q=/^[+a-z0-9A-Z_-]{0,63}$/,ae=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,me={javascript:!0,"javascript:":!0},we={javascript:!0,"javascript:":!0},oe={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},fe=O(7137);function pe(ze,P,N){if(ze&&v.isObject(ze)&&ze instanceof G)return ze;var F=new G;return F.parse(ze,P,N),F}G.prototype.parse=function(ze,P,N){if(!v.isString(ze))throw new TypeError("Parameter 'url' must be a string, not "+typeof ze);var F=ze.indexOf("?"),z=-1!==F&&F<ze.indexOf("#")?"?":"#",ee=ze.split(z);ee[0]=ee[0].replace(/\\/g,"/");var ve=ze=ee.join(z);if(ve=ve.trim(),!N&&1===ze.split("#").length){var Je=I.exec(ve);if(Je)return this.path=ve,this.href=ve,this.pathname=Je[1],Je[2]?(this.search=Je[2],this.query=P?fe.parse(this.search.substr(1)):this.search.substr(1)):P&&(this.search="",this.query={}),this}var dt=q.exec(ve);if(dt){var Ie=(dt=dt[0]).toLowerCase();this.protocol=Ie,ve=ve.substr(dt.length)}if(N||dt||ve.match(/^\/\/[^@\/]+@[^@\/]+/)){var At="//"===ve.substr(0,2);At&&(!dt||!we[dt])&&(ve=ve.substr(2),this.slashes=!0)}if(!we[dt]&&(At||dt&&!oe[dt])){for(var Rt=-1,rt=0;rt<J.length;rt++)-1!==(Et=ve.indexOf(J[rt]))&&(-1===Rt||Et<Rt)&&(Rt=Et);var sn,$t;for(-1!==($t=-1===Rt?ve.lastIndexOf("@"):ve.lastIndexOf("@",Rt))&&(sn=ve.slice(0,$t),ve=ve.slice($t+1),this.auth=decodeURIComponent(sn)),Rt=-1,rt=0;rt<K.length;rt++){var Et;-1!==(Et=ve.indexOf(K[rt]))&&(-1===Rt||Et<Rt)&&(Rt=Et)}-1===Rt&&(Rt=ve.length),this.host=ve.slice(0,Rt),ve=ve.slice(Rt),this.parseHost(),this.hostname=this.hostname||"";var kn="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!kn)for(var Nt=this.hostname.split(/\./),Bn=(rt=0,Nt.length);rt<Bn;rt++){var Nn=Nt[rt];if(Nn&&!Nn.match(Q)){for(var ar="",Zt=0,ne=Nn.length;Zt<ne;Zt++)Nn.charCodeAt(Zt)>127?ar+="x":ar+=Nn[Zt];if(!ar.match(Q)){var er=Nt.slice(0,rt),lr=Nt.slice(rt+1),Ti=Nn.match(ae);Ti&&(er.push(Ti[1]),lr.unshift(Ti[2])),lr.length&&(ve="/"+lr.join(".")+ve),this.hostname=er.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),kn||(this.hostname=$.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,kn&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==ve[0]&&(ve="/"+ve))}if(!me[Ie])for(rt=0,Bn=H.length;rt<Bn;rt++){var It=H[rt];if(-1!==ve.indexOf(It)){var ka=encodeURIComponent(It);ka===It&&(ka=escape(It)),ve=ve.split(It).join(ka)}}var Le=ve.indexOf("#");-1!==Le&&(this.hash=ve.substr(Le),ve=ve.slice(0,Le));var le=ve.indexOf("?");return-1!==le?(this.search=ve.substr(le),this.query=ve.substr(le+1),P&&(this.query=fe.parse(this.query)),ve=ve.slice(0,le)):P&&(this.search="",this.query={}),ve&&(this.pathname=ve),oe[Ie]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},G.prototype.format=function(){var ze=this.auth||"";ze&&(ze=(ze=encodeURIComponent(ze)).replace(/%3A/i,":"),ze+="@");var P=this.protocol||"",N=this.pathname||"",F=this.hash||"",z=!1,ee="";this.host?z=ze+this.host:this.hostname&&(z=ze+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(z+=":"+this.port)),this.query&&v.isObject(this.query)&&Object.keys(this.query).length&&(ee=fe.stringify(this.query));var W=this.search||ee&&"?"+ee||"";return P&&":"!==P.substr(-1)&&(P+=":"),this.slashes||(!P||oe[P])&&!1!==z?(z="//"+(z||""),N&&"/"!==N.charAt(0)&&(N="/"+N)):z||(z=""),F&&"#"!==F.charAt(0)&&(F="#"+F),W&&"?"!==W.charAt(0)&&(W="?"+W),P+z+(N=N.replace(/[?#]/g,function(ve){return encodeURIComponent(ve)}))+(W=W.replace("#","%23"))+F},G.prototype.resolve=function(ze){return this.resolveObject(pe(ze,!1,!0)).format()},G.prototype.resolveObject=function(ze){if(v.isString(ze)){var P=new G;P.parse(ze,!1,!0),ze=P}for(var N=new G,F=Object.keys(this),z=0;z<F.length;z++){var ee=F[z];N[ee]=this[ee]}if(N.hash=ze.hash,""===ze.href)return N.href=N.format(),N;if(ze.slashes&&!ze.protocol){for(var W=Object.keys(ze),ve=0;ve<W.length;ve++){var Je=W[ve];"protocol"!==Je&&(N[Je]=ze[Je])}return oe[N.protocol]&&N.hostname&&!N.pathname&&(N.path=N.pathname="/"),N.href=N.format(),N}if(ze.protocol&&ze.protocol!==N.protocol){if(!oe[ze.protocol]){for(var dt=Object.keys(ze),Ie=0;Ie<dt.length;Ie++){var At=dt[Ie];N[At]=ze[At]}return N.href=N.format(),N}if(N.protocol=ze.protocol,ze.host||we[ze.protocol])N.pathname=ze.pathname;else{for(var Bn=(ze.pathname||"").split("/");Bn.length&&!(ze.host=Bn.shift()););ze.host||(ze.host=""),ze.hostname||(ze.hostname=""),""!==Bn[0]&&Bn.unshift(""),Bn.length<2&&Bn.unshift(""),N.pathname=Bn.join("/")}return N.search=ze.search,N.query=ze.query,N.host=ze.host||"",N.auth=ze.auth,N.hostname=ze.hostname||ze.host,N.port=ze.port,(N.pathname||N.search)&&(N.path=(N.pathname||"")+(N.search||"")),N.slashes=N.slashes||ze.slashes,N.href=N.format(),N}var Et=N.pathname&&"/"===N.pathname.charAt(0),sn=ze.host||ze.pathname&&"/"===ze.pathname.charAt(0),$t=sn||Et||N.host&&ze.pathname,kn=$t,Nt=N.pathname&&N.pathname.split("/")||[],Nn=(Bn=ze.pathname&&ze.pathname.split("/")||[],N.protocol&&!oe[N.protocol]);if(Nn&&(N.hostname="",N.port=null,N.host&&(""===Nt[0]?Nt[0]=N.host:Nt.unshift(N.host)),N.host="",ze.protocol&&(ze.hostname=null,ze.port=null,ze.host&&(""===Bn[0]?Bn[0]=ze.host:Bn.unshift(ze.host)),ze.host=null),$t=$t&&(""===Bn[0]||""===Nt[0])),sn)N.host=ze.host||""===ze.host?ze.host:N.host,N.hostname=ze.hostname||""===ze.hostname?ze.hostname:N.hostname,N.search=ze.search,N.query=ze.query,Nt=Bn;else if(Bn.length)Nt||(Nt=[]),Nt.pop(),Nt=Nt.concat(Bn),N.search=ze.search,N.query=ze.query;else if(!v.isNullOrUndefined(ze.search))return Nn&&(N.hostname=N.host=Nt.shift(),(ar=!!(N.host&&N.host.indexOf("@")>0)&&N.host.split("@"))&&(N.auth=ar.shift(),N.host=N.hostname=ar.shift())),N.search=ze.search,N.query=ze.query,(!v.isNull(N.pathname)||!v.isNull(N.search))&&(N.path=(N.pathname?N.pathname:"")+(N.search?N.search:"")),N.href=N.format(),N;if(!Nt.length)return N.pathname=null,N.path=N.search?"/"+N.search:null,N.href=N.format(),N;for(var Zt=Nt.slice(-1)[0],ne=(N.host||ze.host||Nt.length>1)&&("."===Zt||".."===Zt)||""===Zt,er=0,lr=Nt.length;lr>=0;lr--)"."===(Zt=Nt[lr])?Nt.splice(lr,1):".."===Zt?(Nt.splice(lr,1),er++):er&&(Nt.splice(lr,1),er--);if(!$t&&!kn)for(;er--;er)Nt.unshift("..");$t&&""!==Nt[0]&&(!Nt[0]||"/"!==Nt[0].charAt(0))&&Nt.unshift(""),ne&&"/"!==Nt.join("/").substr(-1)&&Nt.push("");var ar,Ti=""===Nt[0]||Nt[0]&&"/"===Nt[0].charAt(0);return Nn&&(N.hostname=N.host=Ti?"":Nt.length?Nt.shift():"",(ar=!!(N.host&&N.host.indexOf("@")>0)&&N.host.split("@"))&&(N.auth=ar.shift(),N.host=N.hostname=ar.shift())),($t=$t||N.host&&Nt.length)&&!Ti&&Nt.unshift(""),Nt.length?N.pathname=Nt.join("/"):(N.pathname=null,N.path=null),(!v.isNull(N.pathname)||!v.isNull(N.search))&&(N.path=(N.pathname?N.pathname:"")+(N.search?N.search:"")),N.auth=ze.auth||N.auth,N.slashes=N.slashes||ze.slashes,N.href=N.format(),N},G.prototype.parseHost=function(){var ze=this.host,P=k.exec(ze);P&&(":"!==(P=P[0])&&(this.port=P.substr(1)),ze=ze.substr(0,ze.length-P.length)),ze&&(this.hostname=ze)}},796:Ee=>{"use strict";Ee.exports={isString:function(X){return"string"==typeof X},isObject:function(X){return"object"==typeof X&&null!==X},isNull:function(X){return null===X},isNullOrUndefined:function(X){return null==X}}},9444:(Ee,X,O)=>{var L=O(4542),$=O(6926),v=$;v.v1=L,v.v4=$,Ee.exports=v},7805:Ee=>{for(var X=[],O=0;O<256;++O)X[O]=(O+256).toString(16).substr(1);Ee.exports=function L($,v){var G=v||0;return[X[$[G++]],X[$[G++]],X[$[G++]],X[$[G++]],"-",X[$[G++]],X[$[G++]],"-",X[$[G++]],X[$[G++]],"-",X[$[G++]],X[$[G++]],"-",X[$[G++]],X[$[G++]],X[$[G++]],X[$[G++]],X[$[G++]],X[$[G++]]].join("")}},7142:Ee=>{var X=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(X){var O=new Uint8Array(16);Ee.exports=function(){return X(O),O}}else{var L=new Array(16);Ee.exports=function(){for(var G,v=0;v<16;v++)0==(3&v)&&(G=4294967296*Math.random()),L[v]=G>>>((3&v)<<3)&255;return L}}},4542:(Ee,X,O)=>{var v,G,L=O(7142),$=O(7805),q=0,k=0;Ee.exports=function I(S,M,H){var K=M&&H||0,J=M||[],ie=(S=S||{}).node||v,Q=void 0!==S.clockseq?S.clockseq:G;if(null==ie||null==Q){var ae=L();null==ie&&(ie=v=[1|ae[0],ae[1],ae[2],ae[3],ae[4],ae[5]]),null==Q&&(Q=G=16383&(ae[6]<<8|ae[7]))}var me=void 0!==S.msecs?S.msecs:(new Date).getTime(),we=void 0!==S.nsecs?S.nsecs:k+1,oe=me-q+(we-k)/1e4;if(oe<0&&void 0===S.clockseq&&(Q=Q+1&16383),(oe<0||me>q)&&void 0===S.nsecs&&(we=0),we>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");q=me,k=we,G=Q;var fe=(1e4*(268435455&(me+=122192928e5))+we)%4294967296;J[K++]=fe>>>24&255,J[K++]=fe>>>16&255,J[K++]=fe>>>8&255,J[K++]=255&fe;var pe=me/4294967296*1e4&268435455;J[K++]=pe>>>8&255,J[K++]=255&pe,J[K++]=pe>>>24&15|16,J[K++]=pe>>>16&255,J[K++]=Q>>>8|128,J[K++]=255&Q;for(var Ce=0;Ce<6;++Ce)J[K+Ce]=ie[Ce];return M||$(J)}},6926:(Ee,X,O)=>{var L=O(7142),$=O(7805);Ee.exports=function v(G,q,k){var I=q&&k||0;"string"==typeof G&&(q="binary"===G?new Array(16):null,G=null);var S=(G=G||{}).random||(G.rng||L)();if(S[6]=15&S[6]|64,S[8]=63&S[8]|128,q)for(var M=0;M<16;++M)q[I+M]=S[M];return q||$(S)}},7265:Ee=>{Ee.exports.RADIUS=6378137,Ee.exports.FLATTENING=1/298.257223563,Ee.exports.POLAR_RADIUS=6356752.3142},4703:Ee=>{Ee.exports=function O(){for(var L={},$=0;$<arguments.length;$++){var v=arguments[$];for(var G in v)X.call(v,G)&&(L[G]=v[G])}return L};var X=Object.prototype.hasOwnProperty},2717:(Ee,X,O)=>{"use strict";O.r(X),O.d(X,{__assign:()=>v,__asyncDelegator:()=>oe,__asyncGenerator:()=>we,__asyncValues:()=>fe,__await:()=>me,__awaiter:()=>S,__classPrivateFieldGet:()=>He,__classPrivateFieldSet:()=>ze,__createBinding:()=>H,__decorate:()=>q,__exportStar:()=>K,__extends:()=>$,__generator:()=>M,__importDefault:()=>qe,__importStar:()=>Ce,__makeTemplateObject:()=>pe,__metadata:()=>I,__param:()=>k,__read:()=>ie,__rest:()=>G,__spread:()=>Q,__spreadArrays:()=>ae,__values:()=>J});var L=function(P,N){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,z){F.__proto__=z}||function(F,z){for(var ee in z)z.hasOwnProperty(ee)&&(F[ee]=z[ee])})(P,N)};function $(P,N){function F(){this.constructor=P}L(P,N),P.prototype=null===N?Object.create(N):(F.prototype=N.prototype,new F)}var v=function(){return v=Object.assign||function(N){for(var F,z=1,ee=arguments.length;z<ee;z++)for(var W in F=arguments[z])Object.prototype.hasOwnProperty.call(F,W)&&(N[W]=F[W]);return N},v.apply(this,arguments)};function G(P,N){var F={};for(var z in P)Object.prototype.hasOwnProperty.call(P,z)&&N.indexOf(z)<0&&(F[z]=P[z]);if(null!=P&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(z=Object.getOwnPropertySymbols(P);ee<z.length;ee++)N.indexOf(z[ee])<0&&Object.prototype.propertyIsEnumerable.call(P,z[ee])&&(F[z[ee]]=P[z[ee]])}return F}function q(P,N,F,z){var ve,ee=arguments.length,W=ee<3?N:null===z?z=Object.getOwnPropertyDescriptor(N,F):z;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(P,N,F,z);else for(var Je=P.length-1;Je>=0;Je--)(ve=P[Je])&&(W=(ee<3?ve(W):ee>3?ve(N,F,W):ve(N,F))||W);return ee>3&&W&&Object.defineProperty(N,F,W),W}function k(P,N){return function(F,z){N(F,z,P)}}function I(P,N){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(P,N)}function S(P,N,F,z){return new(F||(F=Promise))(function(W,ve){function Je(At){try{Ie(z.next(At))}catch(Rt){ve(Rt)}}function dt(At){try{Ie(z.throw(At))}catch(Rt){ve(Rt)}}function Ie(At){At.done?W(At.value):function ee(W){return W instanceof F?W:new F(function(ve){ve(W)})}(At.value).then(Je,dt)}Ie((z=z.apply(P,N||[])).next())})}function M(P,N){var z,ee,W,ve,F={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ve={next:Je(0),throw:Je(1),return:Je(2)},"function"==typeof Symbol&&(ve[Symbol.iterator]=function(){return this}),ve;function Je(Ie){return function(At){return function dt(Ie){if(z)throw new TypeError("Generator is already executing.");for(;F;)try{if(z=1,ee&&(W=2&Ie[0]?ee.return:Ie[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,Ie[1])).done)return W;switch(ee=0,W&&(Ie=[2&Ie[0],W.value]),Ie[0]){case 0:case 1:W=Ie;break;case 4:return F.label++,{value:Ie[1],done:!1};case 5:F.label++,ee=Ie[1],Ie=[0];continue;case 7:Ie=F.ops.pop(),F.trys.pop();continue;default:if(!(W=(W=F.trys).length>0&&W[W.length-1])&&(6===Ie[0]||2===Ie[0])){F=0;continue}if(3===Ie[0]&&(!W||Ie[1]>W[0]&&Ie[1]<W[3])){F.label=Ie[1];break}if(6===Ie[0]&&F.label<W[1]){F.label=W[1],W=Ie;break}if(W&&F.label<W[2]){F.label=W[2],F.ops.push(Ie);break}W[2]&&F.ops.pop(),F.trys.pop();continue}Ie=N.call(P,F)}catch(At){Ie=[6,At],ee=0}finally{z=W=0}if(5&Ie[0])throw Ie[1];return{value:Ie[0]?Ie[1]:void 0,done:!0}}([Ie,At])}}}function H(P,N,F,z){void 0===z&&(z=F),P[z]=N[F]}function K(P,N){for(var F in P)"default"!==F&&!N.hasOwnProperty(F)&&(N[F]=P[F])}function J(P){var N="function"==typeof Symbol&&Symbol.iterator,F=N&&P[N],z=0;if(F)return F.call(P);if(P&&"number"==typeof P.length)return{next:function(){return P&&z>=P.length&&(P=void 0),{value:P&&P[z++],done:!P}}};throw new TypeError(N?"Object is not iterable.":"Symbol.iterator is not defined.")}function ie(P,N){var F="function"==typeof Symbol&&P[Symbol.iterator];if(!F)return P;var ee,ve,z=F.call(P),W=[];try{for(;(void 0===N||N-- >0)&&!(ee=z.next()).done;)W.push(ee.value)}catch(Je){ve={error:Je}}finally{try{ee&&!ee.done&&(F=z.return)&&F.call(z)}finally{if(ve)throw ve.error}}return W}function Q(){for(var P=[],N=0;N<arguments.length;N++)P=P.concat(ie(arguments[N]));return P}function ae(){for(var P=0,N=0,F=arguments.length;N<F;N++)P+=arguments[N].length;var z=Array(P),ee=0;for(N=0;N<F;N++)for(var W=arguments[N],ve=0,Je=W.length;ve<Je;ve++,ee++)z[ee]=W[ve];return z}function me(P){return this instanceof me?(this.v=P,this):new me(P)}function we(P,N,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,z=F.apply(P,N||[]),W=[];return ee={},ve("next"),ve("throw"),ve("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ve(rt){z[rt]&&(ee[rt]=function(Et){return new Promise(function(sn,$t){W.push([rt,Et,sn,$t])>1||Je(rt,Et)})})}function Je(rt,Et){try{!function dt(rt){rt.value instanceof me?Promise.resolve(rt.value.v).then(Ie,At):Rt(W[0][2],rt)}(z[rt](Et))}catch(sn){Rt(W[0][3],sn)}}function Ie(rt){Je("next",rt)}function At(rt){Je("throw",rt)}function Rt(rt,Et){rt(Et),W.shift(),W.length&&Je(W[0][0],W[0][1])}}function oe(P){var N,F;return N={},z("next"),z("throw",function(ee){throw ee}),z("return"),N[Symbol.iterator]=function(){return this},N;function z(ee,W){N[ee]=P[ee]?function(ve){return(F=!F)?{value:me(P[ee](ve)),done:"return"===ee}:W?W(ve):ve}:W}}function fe(P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F,N=P[Symbol.asyncIterator];return N?N.call(P):(P=J(P),F={},z("next"),z("throw"),z("return"),F[Symbol.asyncIterator]=function(){return this},F);function z(W){F[W]=P[W]&&function(ve){return new Promise(function(Je,dt){!function ee(W,ve,Je,dt){Promise.resolve(dt).then(function(Ie){W({value:Ie,done:Je})},ve)}(Je,dt,(ve=P[W](ve)).done,ve.value)})}}}function pe(P,N){return Object.defineProperty?Object.defineProperty(P,"raw",{value:N}):P.raw=N,P}function Ce(P){if(P&&P.__esModule)return P;var N={};if(null!=P)for(var F in P)Object.hasOwnProperty.call(P,F)&&(N[F]=P[F]);return N.default=P,N}function qe(P){return P&&P.__esModule?P:{default:P}}function He(P,N){if(!N.has(P))throw new TypeError("attempted to get private field on non-instance");return N.get(P)}function ze(P,N,F){if(!N.has(P))throw new TypeError("attempted to set private field on non-instance");return N.set(P,F),F}},1980:(Ee,X,O)=>{"use strict";O.r(X),O.d(X,{__assign:()=>v,__asyncDelegator:()=>oe,__asyncGenerator:()=>we,__asyncValues:()=>fe,__await:()=>me,__awaiter:()=>S,__classPrivateFieldGet:()=>He,__classPrivateFieldSet:()=>ze,__createBinding:()=>H,__decorate:()=>q,__exportStar:()=>K,__extends:()=>$,__generator:()=>M,__importDefault:()=>qe,__importStar:()=>Ce,__makeTemplateObject:()=>pe,__metadata:()=>I,__param:()=>k,__read:()=>ie,__rest:()=>G,__spread:()=>Q,__spreadArrays:()=>ae,__values:()=>J});var L=function(P,N){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,z){F.__proto__=z}||function(F,z){for(var ee in z)z.hasOwnProperty(ee)&&(F[ee]=z[ee])})(P,N)};function $(P,N){function F(){this.constructor=P}L(P,N),P.prototype=null===N?Object.create(N):(F.prototype=N.prototype,new F)}var v=function(){return v=Object.assign||function(N){for(var F,z=1,ee=arguments.length;z<ee;z++)for(var W in F=arguments[z])Object.prototype.hasOwnProperty.call(F,W)&&(N[W]=F[W]);return N},v.apply(this,arguments)};function G(P,N){var F={};for(var z in P)Object.prototype.hasOwnProperty.call(P,z)&&N.indexOf(z)<0&&(F[z]=P[z]);if(null!=P&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(z=Object.getOwnPropertySymbols(P);ee<z.length;ee++)N.indexOf(z[ee])<0&&Object.prototype.propertyIsEnumerable.call(P,z[ee])&&(F[z[ee]]=P[z[ee]])}return F}function q(P,N,F,z){var ve,ee=arguments.length,W=ee<3?N:null===z?z=Object.getOwnPropertyDescriptor(N,F):z;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(P,N,F,z);else for(var Je=P.length-1;Je>=0;Je--)(ve=P[Je])&&(W=(ee<3?ve(W):ee>3?ve(N,F,W):ve(N,F))||W);return ee>3&&W&&Object.defineProperty(N,F,W),W}function k(P,N){return function(F,z){N(F,z,P)}}function I(P,N){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(P,N)}function S(P,N,F,z){return new(F||(F=Promise))(function(W,ve){function Je(At){try{Ie(z.next(At))}catch(Rt){ve(Rt)}}function dt(At){try{Ie(z.throw(At))}catch(Rt){ve(Rt)}}function Ie(At){At.done?W(At.value):function ee(W){return W instanceof F?W:new F(function(ve){ve(W)})}(At.value).then(Je,dt)}Ie((z=z.apply(P,N||[])).next())})}function M(P,N){var z,ee,W,ve,F={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ve={next:Je(0),throw:Je(1),return:Je(2)},"function"==typeof Symbol&&(ve[Symbol.iterator]=function(){return this}),ve;function Je(Ie){return function(At){return function dt(Ie){if(z)throw new TypeError("Generator is already executing.");for(;F;)try{if(z=1,ee&&(W=2&Ie[0]?ee.return:Ie[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,Ie[1])).done)return W;switch(ee=0,W&&(Ie=[2&Ie[0],W.value]),Ie[0]){case 0:case 1:W=Ie;break;case 4:return F.label++,{value:Ie[1],done:!1};case 5:F.label++,ee=Ie[1],Ie=[0];continue;case 7:Ie=F.ops.pop(),F.trys.pop();continue;default:if(!(W=(W=F.trys).length>0&&W[W.length-1])&&(6===Ie[0]||2===Ie[0])){F=0;continue}if(3===Ie[0]&&(!W||Ie[1]>W[0]&&Ie[1]<W[3])){F.label=Ie[1];break}if(6===Ie[0]&&F.label<W[1]){F.label=W[1],W=Ie;break}if(W&&F.label<W[2]){F.label=W[2],F.ops.push(Ie);break}W[2]&&F.ops.pop(),F.trys.pop();continue}Ie=N.call(P,F)}catch(At){Ie=[6,At],ee=0}finally{z=W=0}if(5&Ie[0])throw Ie[1];return{value:Ie[0]?Ie[1]:void 0,done:!0}}([Ie,At])}}}function H(P,N,F,z){void 0===z&&(z=F),P[z]=N[F]}function K(P,N){for(var F in P)"default"!==F&&!N.hasOwnProperty(F)&&(N[F]=P[F])}function J(P){var N="function"==typeof Symbol&&Symbol.iterator,F=N&&P[N],z=0;if(F)return F.call(P);if(P&&"number"==typeof P.length)return{next:function(){return P&&z>=P.length&&(P=void 0),{value:P&&P[z++],done:!P}}};throw new TypeError(N?"Object is not iterable.":"Symbol.iterator is not defined.")}function ie(P,N){var F="function"==typeof Symbol&&P[Symbol.iterator];if(!F)return P;var ee,ve,z=F.call(P),W=[];try{for(;(void 0===N||N-- >0)&&!(ee=z.next()).done;)W.push(ee.value)}catch(Je){ve={error:Je}}finally{try{ee&&!ee.done&&(F=z.return)&&F.call(z)}finally{if(ve)throw ve.error}}return W}function Q(){for(var P=[],N=0;N<arguments.length;N++)P=P.concat(ie(arguments[N]));return P}function ae(){for(var P=0,N=0,F=arguments.length;N<F;N++)P+=arguments[N].length;var z=Array(P),ee=0;for(N=0;N<F;N++)for(var W=arguments[N],ve=0,Je=W.length;ve<Je;ve++,ee++)z[ee]=W[ve];return z}function me(P){return this instanceof me?(this.v=P,this):new me(P)}function we(P,N,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,z=F.apply(P,N||[]),W=[];return ee={},ve("next"),ve("throw"),ve("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ve(rt){z[rt]&&(ee[rt]=function(Et){return new Promise(function(sn,$t){W.push([rt,Et,sn,$t])>1||Je(rt,Et)})})}function Je(rt,Et){try{!function dt(rt){rt.value instanceof me?Promise.resolve(rt.value.v).then(Ie,At):Rt(W[0][2],rt)}(z[rt](Et))}catch(sn){Rt(W[0][3],sn)}}function Ie(rt){Je("next",rt)}function At(rt){Je("throw",rt)}function Rt(rt,Et){rt(Et),W.shift(),W.length&&Je(W[0][0],W[0][1])}}function oe(P){var N,F;return N={},z("next"),z("throw",function(ee){throw ee}),z("return"),N[Symbol.iterator]=function(){return this},N;function z(ee,W){N[ee]=P[ee]?function(ve){return(F=!F)?{value:me(P[ee](ve)),done:"return"===ee}:W?W(ve):ve}:W}}function fe(P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F,N=P[Symbol.asyncIterator];return N?N.call(P):(P=J(P),F={},z("next"),z("throw"),z("return"),F[Symbol.asyncIterator]=function(){return this},F);function z(W){F[W]=P[W]&&function(ve){return new Promise(function(Je,dt){!function ee(W,ve,Je,dt){Promise.resolve(dt).then(function(Ie){W({value:Ie,done:Je})},ve)}(Je,dt,(ve=P[W](ve)).done,ve.value)})}}}function pe(P,N){return Object.defineProperty?Object.defineProperty(P,"raw",{value:N}):P.raw=N,P}function Ce(P){if(P&&P.__esModule)return P;var N={};if(null!=P)for(var F in P)Object.hasOwnProperty.call(P,F)&&(N[F]=P[F]);return N.default=P,N}function qe(P){return P&&P.__esModule?P:{default:P}}function He(P,N){if(!N.has(P))throw new TypeError("attempted to get private field on non-instance");return N.get(P)}function ze(P,N,F){if(!N.has(P))throw new TypeError("attempted to set private field on non-instance");return N.set(P,F),F}},5789:(Ee,X,O)=>{"use strict";O.r(X),O.d(X,{__assign:()=>v,__asyncDelegator:()=>oe,__asyncGenerator:()=>we,__asyncValues:()=>fe,__await:()=>me,__awaiter:()=>S,__classPrivateFieldGet:()=>He,__classPrivateFieldSet:()=>ze,__createBinding:()=>H,__decorate:()=>q,__exportStar:()=>K,__extends:()=>$,__generator:()=>M,__importDefault:()=>qe,__importStar:()=>Ce,__makeTemplateObject:()=>pe,__metadata:()=>I,__param:()=>k,__read:()=>ie,__rest:()=>G,__spread:()=>Q,__spreadArrays:()=>ae,__values:()=>J});var L=function(P,N){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,z){F.__proto__=z}||function(F,z){for(var ee in z)z.hasOwnProperty(ee)&&(F[ee]=z[ee])})(P,N)};function $(P,N){function F(){this.constructor=P}L(P,N),P.prototype=null===N?Object.create(N):(F.prototype=N.prototype,new F)}var v=function(){return v=Object.assign||function(N){for(var F,z=1,ee=arguments.length;z<ee;z++)for(var W in F=arguments[z])Object.prototype.hasOwnProperty.call(F,W)&&(N[W]=F[W]);return N},v.apply(this,arguments)};function G(P,N){var F={};for(var z in P)Object.prototype.hasOwnProperty.call(P,z)&&N.indexOf(z)<0&&(F[z]=P[z]);if(null!=P&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(z=Object.getOwnPropertySymbols(P);ee<z.length;ee++)N.indexOf(z[ee])<0&&Object.prototype.propertyIsEnumerable.call(P,z[ee])&&(F[z[ee]]=P[z[ee]])}return F}function q(P,N,F,z){var ve,ee=arguments.length,W=ee<3?N:null===z?z=Object.getOwnPropertyDescriptor(N,F):z;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(P,N,F,z);else for(var Je=P.length-1;Je>=0;Je--)(ve=P[Je])&&(W=(ee<3?ve(W):ee>3?ve(N,F,W):ve(N,F))||W);return ee>3&&W&&Object.defineProperty(N,F,W),W}function k(P,N){return function(F,z){N(F,z,P)}}function I(P,N){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(P,N)}function S(P,N,F,z){return new(F||(F=Promise))(function(W,ve){function Je(At){try{Ie(z.next(At))}catch(Rt){ve(Rt)}}function dt(At){try{Ie(z.throw(At))}catch(Rt){ve(Rt)}}function Ie(At){At.done?W(At.value):function ee(W){return W instanceof F?W:new F(function(ve){ve(W)})}(At.value).then(Je,dt)}Ie((z=z.apply(P,N||[])).next())})}function M(P,N){var z,ee,W,ve,F={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ve={next:Je(0),throw:Je(1),return:Je(2)},"function"==typeof Symbol&&(ve[Symbol.iterator]=function(){return this}),ve;function Je(Ie){return function(At){return function dt(Ie){if(z)throw new TypeError("Generator is already executing.");for(;F;)try{if(z=1,ee&&(W=2&Ie[0]?ee.return:Ie[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,Ie[1])).done)return W;switch(ee=0,W&&(Ie=[2&Ie[0],W.value]),Ie[0]){case 0:case 1:W=Ie;break;case 4:return F.label++,{value:Ie[1],done:!1};case 5:F.label++,ee=Ie[1],Ie=[0];continue;case 7:Ie=F.ops.pop(),F.trys.pop();continue;default:if(!(W=(W=F.trys).length>0&&W[W.length-1])&&(6===Ie[0]||2===Ie[0])){F=0;continue}if(3===Ie[0]&&(!W||Ie[1]>W[0]&&Ie[1]<W[3])){F.label=Ie[1];break}if(6===Ie[0]&&F.label<W[1]){F.label=W[1],W=Ie;break}if(W&&F.label<W[2]){F.label=W[2],F.ops.push(Ie);break}W[2]&&F.ops.pop(),F.trys.pop();continue}Ie=N.call(P,F)}catch(At){Ie=[6,At],ee=0}finally{z=W=0}if(5&Ie[0])throw Ie[1];return{value:Ie[0]?Ie[1]:void 0,done:!0}}([Ie,At])}}}function H(P,N,F,z){void 0===z&&(z=F),P[z]=N[F]}function K(P,N){for(var F in P)"default"!==F&&!N.hasOwnProperty(F)&&(N[F]=P[F])}function J(P){var N="function"==typeof Symbol&&Symbol.iterator,F=N&&P[N],z=0;if(F)return F.call(P);if(P&&"number"==typeof P.length)return{next:function(){return P&&z>=P.length&&(P=void 0),{value:P&&P[z++],done:!P}}};throw new TypeError(N?"Object is not iterable.":"Symbol.iterator is not defined.")}function ie(P,N){var F="function"==typeof Symbol&&P[Symbol.iterator];if(!F)return P;var ee,ve,z=F.call(P),W=[];try{for(;(void 0===N||N-- >0)&&!(ee=z.next()).done;)W.push(ee.value)}catch(Je){ve={error:Je}}finally{try{ee&&!ee.done&&(F=z.return)&&F.call(z)}finally{if(ve)throw ve.error}}return W}function Q(){for(var P=[],N=0;N<arguments.length;N++)P=P.concat(ie(arguments[N]));return P}function ae(){for(var P=0,N=0,F=arguments.length;N<F;N++)P+=arguments[N].length;var z=Array(P),ee=0;for(N=0;N<F;N++)for(var W=arguments[N],ve=0,Je=W.length;ve<Je;ve++,ee++)z[ee]=W[ve];return z}function me(P){return this instanceof me?(this.v=P,this):new me(P)}function we(P,N,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,z=F.apply(P,N||[]),W=[];return ee={},ve("next"),ve("throw"),ve("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ve(rt){z[rt]&&(ee[rt]=function(Et){return new Promise(function(sn,$t){W.push([rt,Et,sn,$t])>1||Je(rt,Et)})})}function Je(rt,Et){try{!function dt(rt){rt.value instanceof me?Promise.resolve(rt.value.v).then(Ie,At):Rt(W[0][2],rt)}(z[rt](Et))}catch(sn){Rt(W[0][3],sn)}}function Ie(rt){Je("next",rt)}function At(rt){Je("throw",rt)}function Rt(rt,Et){rt(Et),W.shift(),W.length&&Je(W[0][0],W[0][1])}}function oe(P){var N,F;return N={},z("next"),z("throw",function(ee){throw ee}),z("return"),N[Symbol.iterator]=function(){return this},N;function z(ee,W){N[ee]=P[ee]?function(ve){return(F=!F)?{value:me(P[ee](ve)),done:"return"===ee}:W?W(ve):ve}:W}}function fe(P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F,N=P[Symbol.asyncIterator];return N?N.call(P):(P=J(P),F={},z("next"),z("throw"),z("return"),F[Symbol.asyncIterator]=function(){return this},F);function z(W){F[W]=P[W]&&function(ve){return new Promise(function(Je,dt){!function ee(W,ve,Je,dt){Promise.resolve(dt).then(function(Ie){W({value:Ie,done:Je})},ve)}(Je,dt,(ve=P[W](ve)).done,ve.value)})}}}function pe(P,N){return Object.defineProperty?Object.defineProperty(P,"raw",{value:N}):P.raw=N,P}function Ce(P){if(P&&P.__esModule)return P;var N={};if(null!=P)for(var F in P)Object.hasOwnProperty.call(P,F)&&(N[F]=P[F]);return N.default=P,N}function qe(P){return P&&P.__esModule?P:{default:P}}function He(P,N){if(!N.has(P))throw new TypeError("attempted to get private field on non-instance");return N.get(P)}function ze(P,N,F){if(!N.has(P))throw new TypeError("attempted to set private field on non-instance");return N.set(P,F),F}},3541:(Ee,X,O)=>{"use strict";O.r(X),O.d(X,{__assign:()=>v,__asyncDelegator:()=>oe,__asyncGenerator:()=>we,__asyncValues:()=>fe,__await:()=>me,__awaiter:()=>S,__classPrivateFieldGet:()=>He,__classPrivateFieldSet:()=>ze,__createBinding:()=>H,__decorate:()=>q,__exportStar:()=>K,__extends:()=>$,__generator:()=>M,__importDefault:()=>qe,__importStar:()=>Ce,__makeTemplateObject:()=>pe,__metadata:()=>I,__param:()=>k,__read:()=>ie,__rest:()=>G,__spread:()=>Q,__spreadArrays:()=>ae,__values:()=>J});var L=function(P,N){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,z){F.__proto__=z}||function(F,z){for(var ee in z)z.hasOwnProperty(ee)&&(F[ee]=z[ee])})(P,N)};function $(P,N){function F(){this.constructor=P}L(P,N),P.prototype=null===N?Object.create(N):(F.prototype=N.prototype,new F)}var v=function(){return v=Object.assign||function(N){for(var F,z=1,ee=arguments.length;z<ee;z++)for(var W in F=arguments[z])Object.prototype.hasOwnProperty.call(F,W)&&(N[W]=F[W]);return N},v.apply(this,arguments)};function G(P,N){var F={};for(var z in P)Object.prototype.hasOwnProperty.call(P,z)&&N.indexOf(z)<0&&(F[z]=P[z]);if(null!=P&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(z=Object.getOwnPropertySymbols(P);ee<z.length;ee++)N.indexOf(z[ee])<0&&Object.prototype.propertyIsEnumerable.call(P,z[ee])&&(F[z[ee]]=P[z[ee]])}return F}function q(P,N,F,z){var ve,ee=arguments.length,W=ee<3?N:null===z?z=Object.getOwnPropertyDescriptor(N,F):z;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(P,N,F,z);else for(var Je=P.length-1;Je>=0;Je--)(ve=P[Je])&&(W=(ee<3?ve(W):ee>3?ve(N,F,W):ve(N,F))||W);return ee>3&&W&&Object.defineProperty(N,F,W),W}function k(P,N){return function(F,z){N(F,z,P)}}function I(P,N){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(P,N)}function S(P,N,F,z){return new(F||(F=Promise))(function(W,ve){function Je(At){try{Ie(z.next(At))}catch(Rt){ve(Rt)}}function dt(At){try{Ie(z.throw(At))}catch(Rt){ve(Rt)}}function Ie(At){At.done?W(At.value):function ee(W){return W instanceof F?W:new F(function(ve){ve(W)})}(At.value).then(Je,dt)}Ie((z=z.apply(P,N||[])).next())})}function M(P,N){var z,ee,W,ve,F={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ve={next:Je(0),throw:Je(1),return:Je(2)},"function"==typeof Symbol&&(ve[Symbol.iterator]=function(){return this}),ve;function Je(Ie){return function(At){return function dt(Ie){if(z)throw new TypeError("Generator is already executing.");for(;F;)try{if(z=1,ee&&(W=2&Ie[0]?ee.return:Ie[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,Ie[1])).done)return W;switch(ee=0,W&&(Ie=[2&Ie[0],W.value]),Ie[0]){case 0:case 1:W=Ie;break;case 4:return F.label++,{value:Ie[1],done:!1};case 5:F.label++,ee=Ie[1],Ie=[0];continue;case 7:Ie=F.ops.pop(),F.trys.pop();continue;default:if(!(W=(W=F.trys).length>0&&W[W.length-1])&&(6===Ie[0]||2===Ie[0])){F=0;continue}if(3===Ie[0]&&(!W||Ie[1]>W[0]&&Ie[1]<W[3])){F.label=Ie[1];break}if(6===Ie[0]&&F.label<W[1]){F.label=W[1],W=Ie;break}if(W&&F.label<W[2]){F.label=W[2],F.ops.push(Ie);break}W[2]&&F.ops.pop(),F.trys.pop();continue}Ie=N.call(P,F)}catch(At){Ie=[6,At],ee=0}finally{z=W=0}if(5&Ie[0])throw Ie[1];return{value:Ie[0]?Ie[1]:void 0,done:!0}}([Ie,At])}}}function H(P,N,F,z){void 0===z&&(z=F),P[z]=N[F]}function K(P,N){for(var F in P)"default"!==F&&!N.hasOwnProperty(F)&&(N[F]=P[F])}function J(P){var N="function"==typeof Symbol&&Symbol.iterator,F=N&&P[N],z=0;if(F)return F.call(P);if(P&&"number"==typeof P.length)return{next:function(){return P&&z>=P.length&&(P=void 0),{value:P&&P[z++],done:!P}}};throw new TypeError(N?"Object is not iterable.":"Symbol.iterator is not defined.")}function ie(P,N){var F="function"==typeof Symbol&&P[Symbol.iterator];if(!F)return P;var ee,ve,z=F.call(P),W=[];try{for(;(void 0===N||N-- >0)&&!(ee=z.next()).done;)W.push(ee.value)}catch(Je){ve={error:Je}}finally{try{ee&&!ee.done&&(F=z.return)&&F.call(z)}finally{if(ve)throw ve.error}}return W}function Q(){for(var P=[],N=0;N<arguments.length;N++)P=P.concat(ie(arguments[N]));return P}function ae(){for(var P=0,N=0,F=arguments.length;N<F;N++)P+=arguments[N].length;var z=Array(P),ee=0;for(N=0;N<F;N++)for(var W=arguments[N],ve=0,Je=W.length;ve<Je;ve++,ee++)z[ee]=W[ve];return z}function me(P){return this instanceof me?(this.v=P,this):new me(P)}function we(P,N,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,z=F.apply(P,N||[]),W=[];return ee={},ve("next"),ve("throw"),ve("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ve(rt){z[rt]&&(ee[rt]=function(Et){return new Promise(function(sn,$t){W.push([rt,Et,sn,$t])>1||Je(rt,Et)})})}function Je(rt,Et){try{!function dt(rt){rt.value instanceof me?Promise.resolve(rt.value.v).then(Ie,At):Rt(W[0][2],rt)}(z[rt](Et))}catch(sn){Rt(W[0][3],sn)}}function Ie(rt){Je("next",rt)}function At(rt){Je("throw",rt)}function Rt(rt,Et){rt(Et),W.shift(),W.length&&Je(W[0][0],W[0][1])}}function oe(P){var N,F;return N={},z("next"),z("throw",function(ee){throw ee}),z("return"),N[Symbol.iterator]=function(){return this},N;function z(ee,W){N[ee]=P[ee]?function(ve){return(F=!F)?{value:me(P[ee](ve)),done:"return"===ee}:W?W(ve):ve}:W}}function fe(P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F,N=P[Symbol.asyncIterator];return N?N.call(P):(P=J(P),F={},z("next"),z("throw"),z("return"),F[Symbol.asyncIterator]=function(){return this},F);function z(W){F[W]=P[W]&&function(ve){return new Promise(function(Je,dt){!function ee(W,ve,Je,dt){Promise.resolve(dt).then(function(Ie){W({value:Ie,done:Je})},ve)}(Je,dt,(ve=P[W](ve)).done,ve.value)})}}}function pe(P,N){return Object.defineProperty?Object.defineProperty(P,"raw",{value:N}):P.raw=N,P}function Ce(P){if(P&&P.__esModule)return P;var N={};if(null!=P)for(var F in P)Object.hasOwnProperty.call(P,F)&&(N[F]=P[F]);return N.default=P,N}function qe(P){return P&&P.__esModule?P:{default:P}}function He(P,N){if(!N.has(P))throw new TypeError("attempted to get private field on non-instance");return N.get(P)}function ze(P,N,F){if(!N.has(P))throw new TypeError("attempted to set private field on non-instance");return N.set(P,F),F}},7840:(Ee,X,O)=>{"use strict";O.r(X),O.d(X,{__assign:()=>v,__asyncDelegator:()=>oe,__asyncGenerator:()=>we,__asyncValues:()=>fe,__await:()=>me,__awaiter:()=>S,__classPrivateFieldGet:()=>He,__classPrivateFieldSet:()=>ze,__createBinding:()=>H,__decorate:()=>q,__exportStar:()=>K,__extends:()=>$,__generator:()=>M,__importDefault:()=>qe,__importStar:()=>Ce,__makeTemplateObject:()=>pe,__metadata:()=>I,__param:()=>k,__read:()=>ie,__rest:()=>G,__spread:()=>Q,__spreadArrays:()=>ae,__values:()=>J});var L=function(P,N){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,z){F.__proto__=z}||function(F,z){for(var ee in z)z.hasOwnProperty(ee)&&(F[ee]=z[ee])})(P,N)};function $(P,N){function F(){this.constructor=P}L(P,N),P.prototype=null===N?Object.create(N):(F.prototype=N.prototype,new F)}var v=function(){return v=Object.assign||function(N){for(var F,z=1,ee=arguments.length;z<ee;z++)for(var W in F=arguments[z])Object.prototype.hasOwnProperty.call(F,W)&&(N[W]=F[W]);return N},v.apply(this,arguments)};function G(P,N){var F={};for(var z in P)Object.prototype.hasOwnProperty.call(P,z)&&N.indexOf(z)<0&&(F[z]=P[z]);if(null!=P&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(z=Object.getOwnPropertySymbols(P);ee<z.length;ee++)N.indexOf(z[ee])<0&&Object.prototype.propertyIsEnumerable.call(P,z[ee])&&(F[z[ee]]=P[z[ee]])}return F}function q(P,N,F,z){var ve,ee=arguments.length,W=ee<3?N:null===z?z=Object.getOwnPropertyDescriptor(N,F):z;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(P,N,F,z);else for(var Je=P.length-1;Je>=0;Je--)(ve=P[Je])&&(W=(ee<3?ve(W):ee>3?ve(N,F,W):ve(N,F))||W);return ee>3&&W&&Object.defineProperty(N,F,W),W}function k(P,N){return function(F,z){N(F,z,P)}}function I(P,N){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(P,N)}function S(P,N,F,z){return new(F||(F=Promise))(function(W,ve){function Je(At){try{Ie(z.next(At))}catch(Rt){ve(Rt)}}function dt(At){try{Ie(z.throw(At))}catch(Rt){ve(Rt)}}function Ie(At){At.done?W(At.value):function ee(W){return W instanceof F?W:new F(function(ve){ve(W)})}(At.value).then(Je,dt)}Ie((z=z.apply(P,N||[])).next())})}function M(P,N){var z,ee,W,ve,F={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ve={next:Je(0),throw:Je(1),return:Je(2)},"function"==typeof Symbol&&(ve[Symbol.iterator]=function(){return this}),ve;function Je(Ie){return function(At){return function dt(Ie){if(z)throw new TypeError("Generator is already executing.");for(;F;)try{if(z=1,ee&&(W=2&Ie[0]?ee.return:Ie[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,Ie[1])).done)return W;switch(ee=0,W&&(Ie=[2&Ie[0],W.value]),Ie[0]){case 0:case 1:W=Ie;break;case 4:return F.label++,{value:Ie[1],done:!1};case 5:F.label++,ee=Ie[1],Ie=[0];continue;case 7:Ie=F.ops.pop(),F.trys.pop();continue;default:if(!(W=(W=F.trys).length>0&&W[W.length-1])&&(6===Ie[0]||2===Ie[0])){F=0;continue}if(3===Ie[0]&&(!W||Ie[1]>W[0]&&Ie[1]<W[3])){F.label=Ie[1];break}if(6===Ie[0]&&F.label<W[1]){F.label=W[1],W=Ie;break}if(W&&F.label<W[2]){F.label=W[2],F.ops.push(Ie);break}W[2]&&F.ops.pop(),F.trys.pop();continue}Ie=N.call(P,F)}catch(At){Ie=[6,At],ee=0}finally{z=W=0}if(5&Ie[0])throw Ie[1];return{value:Ie[0]?Ie[1]:void 0,done:!0}}([Ie,At])}}}function H(P,N,F,z){void 0===z&&(z=F),P[z]=N[F]}function K(P,N){for(var F in P)"default"!==F&&!N.hasOwnProperty(F)&&(N[F]=P[F])}function J(P){var N="function"==typeof Symbol&&Symbol.iterator,F=N&&P[N],z=0;if(F)return F.call(P);if(P&&"number"==typeof P.length)return{next:function(){return P&&z>=P.length&&(P=void 0),{value:P&&P[z++],done:!P}}};throw new TypeError(N?"Object is not iterable.":"Symbol.iterator is not defined.")}function ie(P,N){var F="function"==typeof Symbol&&P[Symbol.iterator];if(!F)return P;var ee,ve,z=F.call(P),W=[];try{for(;(void 0===N||N-- >0)&&!(ee=z.next()).done;)W.push(ee.value)}catch(Je){ve={error:Je}}finally{try{ee&&!ee.done&&(F=z.return)&&F.call(z)}finally{if(ve)throw ve.error}}return W}function Q(){for(var P=[],N=0;N<arguments.length;N++)P=P.concat(ie(arguments[N]));return P}function ae(){for(var P=0,N=0,F=arguments.length;N<F;N++)P+=arguments[N].length;var z=Array(P),ee=0;for(N=0;N<F;N++)for(var W=arguments[N],ve=0,Je=W.length;ve<Je;ve++,ee++)z[ee]=W[ve];return z}function me(P){return this instanceof me?(this.v=P,this):new me(P)}function we(P,N,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,z=F.apply(P,N||[]),W=[];return ee={},ve("next"),ve("throw"),ve("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ve(rt){z[rt]&&(ee[rt]=function(Et){return new Promise(function(sn,$t){W.push([rt,Et,sn,$t])>1||Je(rt,Et)})})}function Je(rt,Et){try{!function dt(rt){rt.value instanceof me?Promise.resolve(rt.value.v).then(Ie,At):Rt(W[0][2],rt)}(z[rt](Et))}catch(sn){Rt(W[0][3],sn)}}function Ie(rt){Je("next",rt)}function At(rt){Je("throw",rt)}function Rt(rt,Et){rt(Et),W.shift(),W.length&&Je(W[0][0],W[0][1])}}function oe(P){var N,F;return N={},z("next"),z("throw",function(ee){throw ee}),z("return"),N[Symbol.iterator]=function(){return this},N;function z(ee,W){N[ee]=P[ee]?function(ve){return(F=!F)?{value:me(P[ee](ve)),done:"return"===ee}:W?W(ve):ve}:W}}function fe(P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F,N=P[Symbol.asyncIterator];return N?N.call(P):(P=J(P),F={},z("next"),z("throw"),z("return"),F[Symbol.asyncIterator]=function(){return this},F);function z(W){F[W]=P[W]&&function(ve){return new Promise(function(Je,dt){!function ee(W,ve,Je,dt){Promise.resolve(dt).then(function(Ie){W({value:Ie,done:Je})},ve)}(Je,dt,(ve=P[W](ve)).done,ve.value)})}}}function pe(P,N){return Object.defineProperty?Object.defineProperty(P,"raw",{value:N}):P.raw=N,P}function Ce(P){if(P&&P.__esModule)return P;var N={};if(null!=P)for(var F in P)Object.hasOwnProperty.call(P,F)&&(N[F]=P[F]);return N.default=P,N}function qe(P){return P&&P.__esModule?P:{default:P}}function He(P,N){if(!N.has(P))throw new TypeError("attempted to get private field on non-instance");return N.get(P)}function ze(P,N,F){if(!N.has(P))throw new TypeError("attempted to set private field on non-instance");return N.set(P,F),F}},4806:(Ee,X,O)=>{"use strict";O.r(X),O.d(X,{__assign:()=>v,__asyncDelegator:()=>oe,__asyncGenerator:()=>we,__asyncValues:()=>fe,__await:()=>me,__awaiter:()=>S,__classPrivateFieldGet:()=>He,__classPrivateFieldSet:()=>ze,__createBinding:()=>H,__decorate:()=>q,__exportStar:()=>K,__extends:()=>$,__generator:()=>M,__importDefault:()=>qe,__importStar:()=>Ce,__makeTemplateObject:()=>pe,__metadata:()=>I,__param:()=>k,__read:()=>ie,__rest:()=>G,__spread:()=>Q,__spreadArrays:()=>ae,__values:()=>J});var L=function(P,N){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,z){F.__proto__=z}||function(F,z){for(var ee in z)z.hasOwnProperty(ee)&&(F[ee]=z[ee])})(P,N)};function $(P,N){function F(){this.constructor=P}L(P,N),P.prototype=null===N?Object.create(N):(F.prototype=N.prototype,new F)}var v=function(){return v=Object.assign||function(N){for(var F,z=1,ee=arguments.length;z<ee;z++)for(var W in F=arguments[z])Object.prototype.hasOwnProperty.call(F,W)&&(N[W]=F[W]);return N},v.apply(this,arguments)};function G(P,N){var F={};for(var z in P)Object.prototype.hasOwnProperty.call(P,z)&&N.indexOf(z)<0&&(F[z]=P[z]);if(null!=P&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(z=Object.getOwnPropertySymbols(P);ee<z.length;ee++)N.indexOf(z[ee])<0&&Object.prototype.propertyIsEnumerable.call(P,z[ee])&&(F[z[ee]]=P[z[ee]])}return F}function q(P,N,F,z){var ve,ee=arguments.length,W=ee<3?N:null===z?z=Object.getOwnPropertyDescriptor(N,F):z;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(P,N,F,z);else for(var Je=P.length-1;Je>=0;Je--)(ve=P[Je])&&(W=(ee<3?ve(W):ee>3?ve(N,F,W):ve(N,F))||W);return ee>3&&W&&Object.defineProperty(N,F,W),W}function k(P,N){return function(F,z){N(F,z,P)}}function I(P,N){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(P,N)}function S(P,N,F,z){return new(F||(F=Promise))(function(W,ve){function Je(At){try{Ie(z.next(At))}catch(Rt){ve(Rt)}}function dt(At){try{Ie(z.throw(At))}catch(Rt){ve(Rt)}}function Ie(At){At.done?W(At.value):function ee(W){return W instanceof F?W:new F(function(ve){ve(W)})}(At.value).then(Je,dt)}Ie((z=z.apply(P,N||[])).next())})}function M(P,N){var z,ee,W,ve,F={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ve={next:Je(0),throw:Je(1),return:Je(2)},"function"==typeof Symbol&&(ve[Symbol.iterator]=function(){return this}),ve;function Je(Ie){return function(At){return function dt(Ie){if(z)throw new TypeError("Generator is already executing.");for(;F;)try{if(z=1,ee&&(W=2&Ie[0]?ee.return:Ie[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,Ie[1])).done)return W;switch(ee=0,W&&(Ie=[2&Ie[0],W.value]),Ie[0]){case 0:case 1:W=Ie;break;case 4:return F.label++,{value:Ie[1],done:!1};case 5:F.label++,ee=Ie[1],Ie=[0];continue;case 7:Ie=F.ops.pop(),F.trys.pop();continue;default:if(!(W=(W=F.trys).length>0&&W[W.length-1])&&(6===Ie[0]||2===Ie[0])){F=0;continue}if(3===Ie[0]&&(!W||Ie[1]>W[0]&&Ie[1]<W[3])){F.label=Ie[1];break}if(6===Ie[0]&&F.label<W[1]){F.label=W[1],W=Ie;break}if(W&&F.label<W[2]){F.label=W[2],F.ops.push(Ie);break}W[2]&&F.ops.pop(),F.trys.pop();continue}Ie=N.call(P,F)}catch(At){Ie=[6,At],ee=0}finally{z=W=0}if(5&Ie[0])throw Ie[1];return{value:Ie[0]?Ie[1]:void 0,done:!0}}([Ie,At])}}}function H(P,N,F,z){void 0===z&&(z=F),P[z]=N[F]}function K(P,N){for(var F in P)"default"!==F&&!N.hasOwnProperty(F)&&(N[F]=P[F])}function J(P){var N="function"==typeof Symbol&&Symbol.iterator,F=N&&P[N],z=0;if(F)return F.call(P);if(P&&"number"==typeof P.length)return{next:function(){return P&&z>=P.length&&(P=void 0),{value:P&&P[z++],done:!P}}};throw new TypeError(N?"Object is not iterable.":"Symbol.iterator is not defined.")}function ie(P,N){var F="function"==typeof Symbol&&P[Symbol.iterator];if(!F)return P;var ee,ve,z=F.call(P),W=[];try{for(;(void 0===N||N-- >0)&&!(ee=z.next()).done;)W.push(ee.value)}catch(Je){ve={error:Je}}finally{try{ee&&!ee.done&&(F=z.return)&&F.call(z)}finally{if(ve)throw ve.error}}return W}function Q(){for(var P=[],N=0;N<arguments.length;N++)P=P.concat(ie(arguments[N]));return P}function ae(){for(var P=0,N=0,F=arguments.length;N<F;N++)P+=arguments[N].length;var z=Array(P),ee=0;for(N=0;N<F;N++)for(var W=arguments[N],ve=0,Je=W.length;ve<Je;ve++,ee++)z[ee]=W[ve];return z}function me(P){return this instanceof me?(this.v=P,this):new me(P)}function we(P,N,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,z=F.apply(P,N||[]),W=[];return ee={},ve("next"),ve("throw"),ve("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ve(rt){z[rt]&&(ee[rt]=function(Et){return new Promise(function(sn,$t){W.push([rt,Et,sn,$t])>1||Je(rt,Et)})})}function Je(rt,Et){try{!function dt(rt){rt.value instanceof me?Promise.resolve(rt.value.v).then(Ie,At):Rt(W[0][2],rt)}(z[rt](Et))}catch(sn){Rt(W[0][3],sn)}}function Ie(rt){Je("next",rt)}function At(rt){Je("throw",rt)}function Rt(rt,Et){rt(Et),W.shift(),W.length&&Je(W[0][0],W[0][1])}}function oe(P){var N,F;return N={},z("next"),z("throw",function(ee){throw ee}),z("return"),N[Symbol.iterator]=function(){return this},N;function z(ee,W){N[ee]=P[ee]?function(ve){return(F=!F)?{value:me(P[ee](ve)),done:"return"===ee}:W?W(ve):ve}:W}}function fe(P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F,N=P[Symbol.asyncIterator];return N?N.call(P):(P=J(P),F={},z("next"),z("throw"),z("return"),F[Symbol.asyncIterator]=function(){return this},F);function z(W){F[W]=P[W]&&function(ve){return new Promise(function(Je,dt){!function ee(W,ve,Je,dt){Promise.resolve(dt).then(function(Ie){W({value:Ie,done:Je})},ve)}(Je,dt,(ve=P[W](ve)).done,ve.value)})}}}function pe(P,N){return Object.defineProperty?Object.defineProperty(P,"raw",{value:N}):P.raw=N,P}function Ce(P){if(P&&P.__esModule)return P;var N={};if(null!=P)for(var F in P)Object.hasOwnProperty.call(P,F)&&(N[F]=P[F]);return N.default=P,N}function qe(P){return P&&P.__esModule?P:{default:P}}function He(P,N){if(!N.has(P))throw new TypeError("attempted to get private field on non-instance");return N.get(P)}function ze(P,N,F){if(!N.has(P))throw new TypeError("attempted to set private field on non-instance");return N.set(P,F),F}},5955:(Ee,X,O)=>{"use strict";O.r(X),O.d(X,{__assign:()=>v,__asyncDelegator:()=>oe,__asyncGenerator:()=>we,__asyncValues:()=>fe,__await:()=>me,__awaiter:()=>S,__classPrivateFieldGet:()=>He,__classPrivateFieldSet:()=>ze,__createBinding:()=>H,__decorate:()=>q,__exportStar:()=>K,__extends:()=>$,__generator:()=>M,__importDefault:()=>qe,__importStar:()=>Ce,__makeTemplateObject:()=>pe,__metadata:()=>I,__param:()=>k,__read:()=>ie,__rest:()=>G,__spread:()=>Q,__spreadArrays:()=>ae,__values:()=>J});var L=function(P,N){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,z){F.__proto__=z}||function(F,z){for(var ee in z)z.hasOwnProperty(ee)&&(F[ee]=z[ee])})(P,N)};function $(P,N){function F(){this.constructor=P}L(P,N),P.prototype=null===N?Object.create(N):(F.prototype=N.prototype,new F)}var v=function(){return v=Object.assign||function(N){for(var F,z=1,ee=arguments.length;z<ee;z++)for(var W in F=arguments[z])Object.prototype.hasOwnProperty.call(F,W)&&(N[W]=F[W]);return N},v.apply(this,arguments)};function G(P,N){var F={};for(var z in P)Object.prototype.hasOwnProperty.call(P,z)&&N.indexOf(z)<0&&(F[z]=P[z]);if(null!=P&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(z=Object.getOwnPropertySymbols(P);ee<z.length;ee++)N.indexOf(z[ee])<0&&Object.prototype.propertyIsEnumerable.call(P,z[ee])&&(F[z[ee]]=P[z[ee]])}return F}function q(P,N,F,z){var ve,ee=arguments.length,W=ee<3?N:null===z?z=Object.getOwnPropertyDescriptor(N,F):z;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(P,N,F,z);else for(var Je=P.length-1;Je>=0;Je--)(ve=P[Je])&&(W=(ee<3?ve(W):ee>3?ve(N,F,W):ve(N,F))||W);return ee>3&&W&&Object.defineProperty(N,F,W),W}function k(P,N){return function(F,z){N(F,z,P)}}function I(P,N){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(P,N)}function S(P,N,F,z){return new(F||(F=Promise))(function(W,ve){function Je(At){try{Ie(z.next(At))}catch(Rt){ve(Rt)}}function dt(At){try{Ie(z.throw(At))}catch(Rt){ve(Rt)}}function Ie(At){At.done?W(At.value):function ee(W){return W instanceof F?W:new F(function(ve){ve(W)})}(At.value).then(Je,dt)}Ie((z=z.apply(P,N||[])).next())})}function M(P,N){var z,ee,W,ve,F={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ve={next:Je(0),throw:Je(1),return:Je(2)},"function"==typeof Symbol&&(ve[Symbol.iterator]=function(){return this}),ve;function Je(Ie){return function(At){return function dt(Ie){if(z)throw new TypeError("Generator is already executing.");for(;F;)try{if(z=1,ee&&(W=2&Ie[0]?ee.return:Ie[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,Ie[1])).done)return W;switch(ee=0,W&&(Ie=[2&Ie[0],W.value]),Ie[0]){case 0:case 1:W=Ie;break;case 4:return F.label++,{value:Ie[1],done:!1};case 5:F.label++,ee=Ie[1],Ie=[0];continue;case 7:Ie=F.ops.pop(),F.trys.pop();continue;default:if(!(W=(W=F.trys).length>0&&W[W.length-1])&&(6===Ie[0]||2===Ie[0])){F=0;continue}if(3===Ie[0]&&(!W||Ie[1]>W[0]&&Ie[1]<W[3])){F.label=Ie[1];break}if(6===Ie[0]&&F.label<W[1]){F.label=W[1],W=Ie;break}if(W&&F.label<W[2]){F.label=W[2],F.ops.push(Ie);break}W[2]&&F.ops.pop(),F.trys.pop();continue}Ie=N.call(P,F)}catch(At){Ie=[6,At],ee=0}finally{z=W=0}if(5&Ie[0])throw Ie[1];return{value:Ie[0]?Ie[1]:void 0,done:!0}}([Ie,At])}}}function H(P,N,F,z){void 0===z&&(z=F),P[z]=N[F]}function K(P,N){for(var F in P)"default"!==F&&!N.hasOwnProperty(F)&&(N[F]=P[F])}function J(P){var N="function"==typeof Symbol&&Symbol.iterator,F=N&&P[N],z=0;if(F)return F.call(P);if(P&&"number"==typeof P.length)return{next:function(){return P&&z>=P.length&&(P=void 0),{value:P&&P[z++],done:!P}}};throw new TypeError(N?"Object is not iterable.":"Symbol.iterator is not defined.")}function ie(P,N){var F="function"==typeof Symbol&&P[Symbol.iterator];if(!F)return P;var ee,ve,z=F.call(P),W=[];try{for(;(void 0===N||N-- >0)&&!(ee=z.next()).done;)W.push(ee.value)}catch(Je){ve={error:Je}}finally{try{ee&&!ee.done&&(F=z.return)&&F.call(z)}finally{if(ve)throw ve.error}}return W}function Q(){for(var P=[],N=0;N<arguments.length;N++)P=P.concat(ie(arguments[N]));return P}function ae(){for(var P=0,N=0,F=arguments.length;N<F;N++)P+=arguments[N].length;var z=Array(P),ee=0;for(N=0;N<F;N++)for(var W=arguments[N],ve=0,Je=W.length;ve<Je;ve++,ee++)z[ee]=W[ve];return z}function me(P){return this instanceof me?(this.v=P,this):new me(P)}function we(P,N,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,z=F.apply(P,N||[]),W=[];return ee={},ve("next"),ve("throw"),ve("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ve(rt){z[rt]&&(ee[rt]=function(Et){return new Promise(function(sn,$t){W.push([rt,Et,sn,$t])>1||Je(rt,Et)})})}function Je(rt,Et){try{!function dt(rt){rt.value instanceof me?Promise.resolve(rt.value.v).then(Ie,At):Rt(W[0][2],rt)}(z[rt](Et))}catch(sn){Rt(W[0][3],sn)}}function Ie(rt){Je("next",rt)}function At(rt){Je("throw",rt)}function Rt(rt,Et){rt(Et),W.shift(),W.length&&Je(W[0][0],W[0][1])}}function oe(P){var N,F;return N={},z("next"),z("throw",function(ee){throw ee}),z("return"),N[Symbol.iterator]=function(){return this},N;function z(ee,W){N[ee]=P[ee]?function(ve){return(F=!F)?{value:me(P[ee](ve)),done:"return"===ee}:W?W(ve):ve}:W}}function fe(P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F,N=P[Symbol.asyncIterator];return N?N.call(P):(P=J(P),F={},z("next"),z("throw"),z("return"),F[Symbol.asyncIterator]=function(){return this},F);function z(W){F[W]=P[W]&&function(ve){return new Promise(function(Je,dt){!function ee(W,ve,Je,dt){Promise.resolve(dt).then(function(Ie){W({value:Ie,done:Je})},ve)}(Je,dt,(ve=P[W](ve)).done,ve.value)})}}}function pe(P,N){return Object.defineProperty?Object.defineProperty(P,"raw",{value:N}):P.raw=N,P}function Ce(P){if(P&&P.__esModule)return P;var N={};if(null!=P)for(var F in P)Object.hasOwnProperty.call(P,F)&&(N[F]=P[F]);return N.default=P,N}function qe(P){return P&&P.__esModule?P:{default:P}}function He(P,N){if(!N.has(P))throw new TypeError("attempted to get private field on non-instance");return N.get(P)}function ze(P,N,F){if(!N.has(P))throw new TypeError("attempted to set private field on non-instance");return N.set(P,F),F}},2960:(Ee,X,O)=>{"use strict";O.r(X),O.d(X,{__assign:()=>v,__asyncDelegator:()=>oe,__asyncGenerator:()=>we,__asyncValues:()=>fe,__await:()=>me,__awaiter:()=>S,__classPrivateFieldGet:()=>He,__classPrivateFieldSet:()=>ze,__createBinding:()=>H,__decorate:()=>q,__exportStar:()=>K,__extends:()=>$,__generator:()=>M,__importDefault:()=>qe,__importStar:()=>Ce,__makeTemplateObject:()=>pe,__metadata:()=>I,__param:()=>k,__read:()=>ie,__rest:()=>G,__spread:()=>Q,__spreadArrays:()=>ae,__values:()=>J});var L=function(P,N){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,z){F.__proto__=z}||function(F,z){for(var ee in z)z.hasOwnProperty(ee)&&(F[ee]=z[ee])})(P,N)};function $(P,N){function F(){this.constructor=P}L(P,N),P.prototype=null===N?Object.create(N):(F.prototype=N.prototype,new F)}var v=function(){return v=Object.assign||function(N){for(var F,z=1,ee=arguments.length;z<ee;z++)for(var W in F=arguments[z])Object.prototype.hasOwnProperty.call(F,W)&&(N[W]=F[W]);return N},v.apply(this,arguments)};function G(P,N){var F={};for(var z in P)Object.prototype.hasOwnProperty.call(P,z)&&N.indexOf(z)<0&&(F[z]=P[z]);if(null!=P&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(z=Object.getOwnPropertySymbols(P);ee<z.length;ee++)N.indexOf(z[ee])<0&&Object.prototype.propertyIsEnumerable.call(P,z[ee])&&(F[z[ee]]=P[z[ee]])}return F}function q(P,N,F,z){var ve,ee=arguments.length,W=ee<3?N:null===z?z=Object.getOwnPropertyDescriptor(N,F):z;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(P,N,F,z);else for(var Je=P.length-1;Je>=0;Je--)(ve=P[Je])&&(W=(ee<3?ve(W):ee>3?ve(N,F,W):ve(N,F))||W);return ee>3&&W&&Object.defineProperty(N,F,W),W}function k(P,N){return function(F,z){N(F,z,P)}}function I(P,N){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(P,N)}function S(P,N,F,z){return new(F||(F=Promise))(function(W,ve){function Je(At){try{Ie(z.next(At))}catch(Rt){ve(Rt)}}function dt(At){try{Ie(z.throw(At))}catch(Rt){ve(Rt)}}function Ie(At){At.done?W(At.value):function ee(W){return W instanceof F?W:new F(function(ve){ve(W)})}(At.value).then(Je,dt)}Ie((z=z.apply(P,N||[])).next())})}function M(P,N){var z,ee,W,ve,F={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ve={next:Je(0),throw:Je(1),return:Je(2)},"function"==typeof Symbol&&(ve[Symbol.iterator]=function(){return this}),ve;function Je(Ie){return function(At){return function dt(Ie){if(z)throw new TypeError("Generator is already executing.");for(;F;)try{if(z=1,ee&&(W=2&Ie[0]?ee.return:Ie[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,Ie[1])).done)return W;switch(ee=0,W&&(Ie=[2&Ie[0],W.value]),Ie[0]){case 0:case 1:W=Ie;break;case 4:return F.label++,{value:Ie[1],done:!1};case 5:F.label++,ee=Ie[1],Ie=[0];continue;case 7:Ie=F.ops.pop(),F.trys.pop();continue;default:if(!(W=(W=F.trys).length>0&&W[W.length-1])&&(6===Ie[0]||2===Ie[0])){F=0;continue}if(3===Ie[0]&&(!W||Ie[1]>W[0]&&Ie[1]<W[3])){F.label=Ie[1];break}if(6===Ie[0]&&F.label<W[1]){F.label=W[1],W=Ie;break}if(W&&F.label<W[2]){F.label=W[2],F.ops.push(Ie);break}W[2]&&F.ops.pop(),F.trys.pop();continue}Ie=N.call(P,F)}catch(At){Ie=[6,At],ee=0}finally{z=W=0}if(5&Ie[0])throw Ie[1];return{value:Ie[0]?Ie[1]:void 0,done:!0}}([Ie,At])}}}function H(P,N,F,z){void 0===z&&(z=F),P[z]=N[F]}function K(P,N){for(var F in P)"default"!==F&&!N.hasOwnProperty(F)&&(N[F]=P[F])}function J(P){var N="function"==typeof Symbol&&Symbol.iterator,F=N&&P[N],z=0;if(F)return F.call(P);if(P&&"number"==typeof P.length)return{next:function(){return P&&z>=P.length&&(P=void 0),{value:P&&P[z++],done:!P}}};throw new TypeError(N?"Object is not iterable.":"Symbol.iterator is not defined.")}function ie(P,N){var F="function"==typeof Symbol&&P[Symbol.iterator];if(!F)return P;var ee,ve,z=F.call(P),W=[];try{for(;(void 0===N||N-- >0)&&!(ee=z.next()).done;)W.push(ee.value)}catch(Je){ve={error:Je}}finally{try{ee&&!ee.done&&(F=z.return)&&F.call(z)}finally{if(ve)throw ve.error}}return W}function Q(){for(var P=[],N=0;N<arguments.length;N++)P=P.concat(ie(arguments[N]));return P}function ae(){for(var P=0,N=0,F=arguments.length;N<F;N++)P+=arguments[N].length;var z=Array(P),ee=0;for(N=0;N<F;N++)for(var W=arguments[N],ve=0,Je=W.length;ve<Je;ve++,ee++)z[ee]=W[ve];return z}function me(P){return this instanceof me?(this.v=P,this):new me(P)}function we(P,N,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,z=F.apply(P,N||[]),W=[];return ee={},ve("next"),ve("throw"),ve("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ve(rt){z[rt]&&(ee[rt]=function(Et){return new Promise(function(sn,$t){W.push([rt,Et,sn,$t])>1||Je(rt,Et)})})}function Je(rt,Et){try{!function dt(rt){rt.value instanceof me?Promise.resolve(rt.value.v).then(Ie,At):Rt(W[0][2],rt)}(z[rt](Et))}catch(sn){Rt(W[0][3],sn)}}function Ie(rt){Je("next",rt)}function At(rt){Je("throw",rt)}function Rt(rt,Et){rt(Et),W.shift(),W.length&&Je(W[0][0],W[0][1])}}function oe(P){var N,F;return N={},z("next"),z("throw",function(ee){throw ee}),z("return"),N[Symbol.iterator]=function(){return this},N;function z(ee,W){N[ee]=P[ee]?function(ve){return(F=!F)?{value:me(P[ee](ve)),done:"return"===ee}:W?W(ve):ve}:W}}function fe(P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F,N=P[Symbol.asyncIterator];return N?N.call(P):(P=J(P),F={},z("next"),z("throw"),z("return"),F[Symbol.asyncIterator]=function(){return this},F);function z(W){F[W]=P[W]&&function(ve){return new Promise(function(Je,dt){!function ee(W,ve,Je,dt){Promise.resolve(dt).then(function(Ie){W({value:Ie,done:Je})},ve)}(Je,dt,(ve=P[W](ve)).done,ve.value)})}}}function pe(P,N){return Object.defineProperty?Object.defineProperty(P,"raw",{value:N}):P.raw=N,P}function Ce(P){if(P&&P.__esModule)return P;var N={};if(null!=P)for(var F in P)Object.hasOwnProperty.call(P,F)&&(N[F]=P[F]);return N.default=P,N}function qe(P){return P&&P.__esModule?P:{default:P}}function He(P,N){if(!N.has(P))throw new TypeError("attempted to get private field on non-instance");return N.get(P)}function ze(P,N,F){if(!N.has(P))throw new TypeError("attempted to set private field on non-instance");return N.set(P,F),F}},9077:(Ee,X,O)=>{"use strict";O.r(X),O.d(X,{__assign:()=>v,__asyncDelegator:()=>oe,__asyncGenerator:()=>we,__asyncValues:()=>fe,__await:()=>me,__awaiter:()=>S,__classPrivateFieldGet:()=>He,__classPrivateFieldSet:()=>ze,__createBinding:()=>H,__decorate:()=>q,__exportStar:()=>K,__extends:()=>$,__generator:()=>M,__importDefault:()=>qe,__importStar:()=>Ce,__makeTemplateObject:()=>pe,__metadata:()=>I,__param:()=>k,__read:()=>ie,__rest:()=>G,__spread:()=>Q,__spreadArrays:()=>ae,__values:()=>J});var L=function(P,N){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,z){F.__proto__=z}||function(F,z){for(var ee in z)z.hasOwnProperty(ee)&&(F[ee]=z[ee])})(P,N)};function $(P,N){function F(){this.constructor=P}L(P,N),P.prototype=null===N?Object.create(N):(F.prototype=N.prototype,new F)}var v=function(){return v=Object.assign||function(N){for(var F,z=1,ee=arguments.length;z<ee;z++)for(var W in F=arguments[z])Object.prototype.hasOwnProperty.call(F,W)&&(N[W]=F[W]);return N},v.apply(this,arguments)};function G(P,N){var F={};for(var z in P)Object.prototype.hasOwnProperty.call(P,z)&&N.indexOf(z)<0&&(F[z]=P[z]);if(null!=P&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(z=Object.getOwnPropertySymbols(P);ee<z.length;ee++)N.indexOf(z[ee])<0&&Object.prototype.propertyIsEnumerable.call(P,z[ee])&&(F[z[ee]]=P[z[ee]])}return F}function q(P,N,F,z){var ve,ee=arguments.length,W=ee<3?N:null===z?z=Object.getOwnPropertyDescriptor(N,F):z;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(P,N,F,z);else for(var Je=P.length-1;Je>=0;Je--)(ve=P[Je])&&(W=(ee<3?ve(W):ee>3?ve(N,F,W):ve(N,F))||W);return ee>3&&W&&Object.defineProperty(N,F,W),W}function k(P,N){return function(F,z){N(F,z,P)}}function I(P,N){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(P,N)}function S(P,N,F,z){return new(F||(F=Promise))(function(W,ve){function Je(At){try{Ie(z.next(At))}catch(Rt){ve(Rt)}}function dt(At){try{Ie(z.throw(At))}catch(Rt){ve(Rt)}}function Ie(At){At.done?W(At.value):function ee(W){return W instanceof F?W:new F(function(ve){ve(W)})}(At.value).then(Je,dt)}Ie((z=z.apply(P,N||[])).next())})}function M(P,N){var z,ee,W,ve,F={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return ve={next:Je(0),throw:Je(1),return:Je(2)},"function"==typeof Symbol&&(ve[Symbol.iterator]=function(){return this}),ve;function Je(Ie){return function(At){return function dt(Ie){if(z)throw new TypeError("Generator is already executing.");for(;F;)try{if(z=1,ee&&(W=2&Ie[0]?ee.return:Ie[0]?ee.throw||((W=ee.return)&&W.call(ee),0):ee.next)&&!(W=W.call(ee,Ie[1])).done)return W;switch(ee=0,W&&(Ie=[2&Ie[0],W.value]),Ie[0]){case 0:case 1:W=Ie;break;case 4:return F.label++,{value:Ie[1],done:!1};case 5:F.label++,ee=Ie[1],Ie=[0];continue;case 7:Ie=F.ops.pop(),F.trys.pop();continue;default:if(!(W=(W=F.trys).length>0&&W[W.length-1])&&(6===Ie[0]||2===Ie[0])){F=0;continue}if(3===Ie[0]&&(!W||Ie[1]>W[0]&&Ie[1]<W[3])){F.label=Ie[1];break}if(6===Ie[0]&&F.label<W[1]){F.label=W[1],W=Ie;break}if(W&&F.label<W[2]){F.label=W[2],F.ops.push(Ie);break}W[2]&&F.ops.pop(),F.trys.pop();continue}Ie=N.call(P,F)}catch(At){Ie=[6,At],ee=0}finally{z=W=0}if(5&Ie[0])throw Ie[1];return{value:Ie[0]?Ie[1]:void 0,done:!0}}([Ie,At])}}}function H(P,N,F,z){void 0===z&&(z=F),P[z]=N[F]}function K(P,N){for(var F in P)"default"!==F&&!N.hasOwnProperty(F)&&(N[F]=P[F])}function J(P){var N="function"==typeof Symbol&&Symbol.iterator,F=N&&P[N],z=0;if(F)return F.call(P);if(P&&"number"==typeof P.length)return{next:function(){return P&&z>=P.length&&(P=void 0),{value:P&&P[z++],done:!P}}};throw new TypeError(N?"Object is not iterable.":"Symbol.iterator is not defined.")}function ie(P,N){var F="function"==typeof Symbol&&P[Symbol.iterator];if(!F)return P;var ee,ve,z=F.call(P),W=[];try{for(;(void 0===N||N-- >0)&&!(ee=z.next()).done;)W.push(ee.value)}catch(Je){ve={error:Je}}finally{try{ee&&!ee.done&&(F=z.return)&&F.call(z)}finally{if(ve)throw ve.error}}return W}function Q(){for(var P=[],N=0;N<arguments.length;N++)P=P.concat(ie(arguments[N]));return P}function ae(){for(var P=0,N=0,F=arguments.length;N<F;N++)P+=arguments[N].length;var z=Array(P),ee=0;for(N=0;N<F;N++)for(var W=arguments[N],ve=0,Je=W.length;ve<Je;ve++,ee++)z[ee]=W[ve];return z}function me(P){return this instanceof me?(this.v=P,this):new me(P)}function we(P,N,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,z=F.apply(P,N||[]),W=[];return ee={},ve("next"),ve("throw"),ve("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ve(rt){z[rt]&&(ee[rt]=function(Et){return new Promise(function(sn,$t){W.push([rt,Et,sn,$t])>1||Je(rt,Et)})})}function Je(rt,Et){try{!function dt(rt){rt.value instanceof me?Promise.resolve(rt.value.v).then(Ie,At):Rt(W[0][2],rt)}(z[rt](Et))}catch(sn){Rt(W[0][3],sn)}}function Ie(rt){Je("next",rt)}function At(rt){Je("throw",rt)}function Rt(rt,Et){rt(Et),W.shift(),W.length&&Je(W[0][0],W[0][1])}}function oe(P){var N,F;return N={},z("next"),z("throw",function(ee){throw ee}),z("return"),N[Symbol.iterator]=function(){return this},N;function z(ee,W){N[ee]=P[ee]?function(ve){return(F=!F)?{value:me(P[ee](ve)),done:"return"===ee}:W?W(ve):ve}:W}}function fe(P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F,N=P[Symbol.asyncIterator];return N?N.call(P):(P=J(P),F={},z("next"),z("throw"),z("return"),F[Symbol.asyncIterator]=function(){return this},F);function z(W){F[W]=P[W]&&function(ve){return new Promise(function(Je,dt){!function ee(W,ve,Je,dt){Promise.resolve(dt).then(function(Ie){W({value:Ie,done:Je})},ve)}(Je,dt,(ve=P[W](ve)).done,ve.value)})}}}function pe(P,N){return Object.defineProperty?Object.defineProperty(P,"raw",{value:N}):P.raw=N,P}function Ce(P){if(P&&P.__esModule)return P;var N={};if(null!=P)for(var F in P)Object.hasOwnProperty.call(P,F)&&(N[F]=P[F]);return N.default=P,N}function qe(P){return P&&P.__esModule?P:{default:P}}function He(P,N){if(!N.has(P))throw new TypeError("attempted to get private field on non-instance");return N.get(P)}function ze(P,N,F){if(!N.has(P))throw new TypeError("attempted to set private field on non-instance");return N.set(P,F),F}},6249:()=>{},2480:()=>{}},Ee=>{Ee(Ee.s=9121)}]);